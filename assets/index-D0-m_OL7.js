(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))R(T);new MutationObserver(T=>{for(const A of T)if(A.type==="childList")for(const k of A.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&R(k)}).observe(document,{childList:!0,subtree:!0});function S(T){const A={};return T.integrity&&(A.integrity=T.integrity),T.referrerPolicy&&(A.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?A.credentials="include":T.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function R(T){if(T.ep)return;T.ep=!0;const A=S(T);fetch(T.href,A)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),v=Symbol.for("react.fragment");function S(R,T,A){var k=null;if(A!==void 0&&(k=""+A),T.key!==void 0&&(k=""+T.key),"key"in T){A={};for(var q in T)q!=="key"&&(A[q]=T[q])}else A=T;return T=A.ref,{$$typeof:_,type:R,key:k,ref:T!==void 0?T:null,props:A}}return reactJsxRuntime_production.Fragment=v,reactJsxRuntime_production.jsx=S,reactJsxRuntime_production.jsxs=S,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),k=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.iterator;function F(le){return le===null||typeof le!="object"?null:(le=N&&le[N]||le["@@iterator"],typeof le=="function"?le:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,V={};function j(le,me,Te){this.props=le,this.context=me,this.refs=V,this.updater=Te||H}j.prototype.isReactComponent={},j.prototype.setState=function(le,me){if(typeof le!="object"&&typeof le!="function"&&le!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,le,me,"setState")},j.prototype.forceUpdate=function(le){this.updater.enqueueForceUpdate(this,le,"forceUpdate")};function W(){}W.prototype=j.prototype;function X(le,me,Te){this.props=le,this.context=me,this.refs=V,this.updater=Te||H}var J=X.prototype=new W;J.constructor=X,G(J,j.prototype),J.isPureReactComponent=!0;var te=Array.isArray;function re(){}var ee={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function oe(le,me,Te){var ye=Te.ref;return{$$typeof:_,type:le,key:me,ref:ye!==void 0?ye:null,props:Te}}function ue(le,me){return oe(le.type,me,le.props)}function ce(le){return typeof le=="object"&&le!==null&&le.$$typeof===_}function de(le){var me={"=":"=0",":":"=2"};return"$"+le.replace(/[=:]/g,function(Te){return me[Te]})}var pe=/\/+/g;function _e(le,me){return typeof le=="object"&&le!==null&&le.key!=null?de(""+le.key):me.toString(36)}function Ee(le){switch(le.status){case"fulfilled":return le.value;case"rejected":throw le.reason;default:switch(typeof le.status=="string"?le.then(re,re):(le.status="pending",le.then(function(me){le.status==="pending"&&(le.status="fulfilled",le.value=me)},function(me){le.status==="pending"&&(le.status="rejected",le.reason=me)})),le.status){case"fulfilled":return le.value;case"rejected":throw le.reason}}throw le}function ge(le,me,Te,ye,Re){var qe=typeof le;(qe==="undefined"||qe==="boolean")&&(le=null);var ke=!1;if(le===null)ke=!0;else switch(qe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(le.$$typeof){case _:case v:ke=!0;break;case L:return ke=le._init,ge(ke(le._payload),me,Te,ye,Re)}}if(ke)return Re=Re(le),ke=ye===""?"."+_e(le,0):ye,te(Re)?(Te="",ke!=null&&(Te=ke.replace(pe,"$&/")+"/"),ge(Re,me,Te,"",function(Pe){return Pe})):Re!=null&&(ce(Re)&&(Re=ue(Re,Te+(Re.key==null||le&&le.key===Re.key?"":(""+Re.key).replace(pe,"$&/")+"/")+ke)),me.push(Re)),1;ke=0;var ze=ye===""?".":ye+":";if(te(le))for(var Ne=0;Ne<le.length;Ne++)ye=le[Ne],qe=ze+_e(ye,Ne),ke+=ge(ye,me,Te,qe,Re);else if(Ne=F(le),typeof Ne=="function")for(le=Ne.call(le),Ne=0;!(ye=le.next()).done;)ye=ye.value,qe=ze+_e(ye,Ne++),ke+=ge(ye,me,Te,qe,Re);else if(qe==="object"){if(typeof le.then=="function")return ge(Ee(le),me,Te,ye,Re);throw me=String(le),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return ke}function be(le,me,Te){if(le==null)return le;var ye=[],Re=0;return ge(le,ye,"","",function(qe){return me.call(Te,qe,Re++)}),ye}function Ae(le){if(le._status===-1){var me=le._result;me=me(),me.then(function(Te){(le._status===0||le._status===-1)&&(le._status=1,le._result=Te)},function(Te){(le._status===0||le._status===-1)&&(le._status=2,le._result=Te)}),le._status===-1&&(le._status=0,le._result=me)}if(le._status===1)return le._result.default;throw le._result}var De=typeof reportError=="function"?reportError:function(le){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof le=="object"&&le!==null&&typeof le.message=="string"?String(le.message):String(le),error:le});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",le);return}console.error(le)},ve={map:be,forEach:function(le,me,Te){be(le,function(){me.apply(this,arguments)},Te)},count:function(le){var me=0;return be(le,function(){me++}),me},toArray:function(le){return be(le,function(me){return me})||[]},only:function(le){if(!ce(le))throw Error("React.Children.only expected to receive a single React element child.");return le}};return react_production.Activity=I,react_production.Children=ve,react_production.Component=j,react_production.Fragment=S,react_production.Profiler=T,react_production.PureComponent=X,react_production.StrictMode=R,react_production.Suspense=M,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(le){return ee.H.useMemoCache(le)}},react_production.cache=function(le){return function(){return le.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(le,me,Te){if(le==null)throw Error("The argument must be a React element, but you passed "+le+".");var ye=G({},le.props),Re=le.key;if(me!=null)for(qe in me.key!==void 0&&(Re=""+me.key),me)!ne.call(me,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&me.ref===void 0||(ye[qe]=me[qe]);var qe=arguments.length-2;if(qe===1)ye.children=Te;else if(1<qe){for(var ke=Array(qe),ze=0;ze<qe;ze++)ke[ze]=arguments[ze+2];ye.children=ke}return oe(le.type,Re,ye)},react_production.createContext=function(le){return le={$$typeof:k,_currentValue:le,_currentValue2:le,_threadCount:0,Provider:null,Consumer:null},le.Provider=le,le.Consumer={$$typeof:A,_context:le},le},react_production.createElement=function(le,me,Te){var ye,Re={},qe=null;if(me!=null)for(ye in me.key!==void 0&&(qe=""+me.key),me)ne.call(me,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Re[ye]=me[ye]);var ke=arguments.length-2;if(ke===1)Re.children=Te;else if(1<ke){for(var ze=Array(ke),Ne=0;Ne<ke;Ne++)ze[Ne]=arguments[Ne+2];Re.children=ze}if(le&&le.defaultProps)for(ye in ke=le.defaultProps,ke)Re[ye]===void 0&&(Re[ye]=ke[ye]);return oe(le,qe,Re)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(le){return{$$typeof:q,render:le}},react_production.isValidElement=ce,react_production.lazy=function(le){return{$$typeof:L,_payload:{_status:-1,_result:le},_init:Ae}},react_production.memo=function(le,me){return{$$typeof:D,type:le,compare:me===void 0?null:me}},react_production.startTransition=function(le){var me=ee.T,Te={};ee.T=Te;try{var ye=le(),Re=ee.S;Re!==null&&Re(Te,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(re,De)}catch(qe){De(qe)}finally{me!==null&&Te.types!==null&&(me.types=Te.types),ee.T=me}},react_production.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},react_production.use=function(le){return ee.H.use(le)},react_production.useActionState=function(le,me,Te){return ee.H.useActionState(le,me,Te)},react_production.useCallback=function(le,me){return ee.H.useCallback(le,me)},react_production.useContext=function(le){return ee.H.useContext(le)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(le,me){return ee.H.useDeferredValue(le,me)},react_production.useEffect=function(le,me){return ee.H.useEffect(le,me)},react_production.useEffectEvent=function(le){return ee.H.useEffectEvent(le)},react_production.useId=function(){return ee.H.useId()},react_production.useImperativeHandle=function(le,me,Te){return ee.H.useImperativeHandle(le,me,Te)},react_production.useInsertionEffect=function(le,me){return ee.H.useInsertionEffect(le,me)},react_production.useLayoutEffect=function(le,me){return ee.H.useLayoutEffect(le,me)},react_production.useMemo=function(le,me){return ee.H.useMemo(le,me)},react_production.useOptimistic=function(le,me){return ee.H.useOptimistic(le,me)},react_production.useReducer=function(le,me,Te){return ee.H.useReducer(le,me,Te)},react_production.useRef=function(le){return ee.H.useRef(le)},react_production.useState=function(le){return ee.H.useState(le)},react_production.useSyncExternalStore=function(le,me,Te){return ee.H.useSyncExternalStore(le,me,Te)},react_production.useTransition=function(){return ee.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(_){function v(ge,be){var Ae=ge.length;ge.push(be);e:for(;0<Ae;){var De=Ae-1>>>1,ve=ge[De];if(0<T(ve,be))ge[De]=be,ge[Ae]=ve,Ae=De;else break e}}function S(ge){return ge.length===0?null:ge[0]}function R(ge){if(ge.length===0)return null;var be=ge[0],Ae=ge.pop();if(Ae!==be){ge[0]=Ae;e:for(var De=0,ve=ge.length,le=ve>>>1;De<le;){var me=2*(De+1)-1,Te=ge[me],ye=me+1,Re=ge[ye];if(0>T(Te,Ae))ye<ve&&0>T(Re,Te)?(ge[De]=Re,ge[ye]=Ae,De=ye):(ge[De]=Te,ge[me]=Ae,De=me);else if(ye<ve&&0>T(Re,Ae))ge[De]=Re,ge[ye]=Ae,De=ye;else break e}}return be}function T(ge,be){var Ae=ge.sortIndex-be.sortIndex;return Ae!==0?Ae:ge.id-be.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;_.unstable_now=function(){return A.now()}}else{var k=Date,q=k.now();_.unstable_now=function(){return k.now()-q}}var M=[],D=[],L=1,I=null,N=3,F=!1,H=!1,G=!1,V=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function J(ge){for(var be=S(D);be!==null;){if(be.callback===null)R(D);else if(be.startTime<=ge)R(D),be.sortIndex=be.expirationTime,v(M,be);else break;be=S(D)}}function te(ge){if(G=!1,J(ge),!H)if(S(M)!==null)H=!0,re||(re=!0,de());else{var be=S(D);be!==null&&Ee(te,be.startTime-ge)}}var re=!1,ee=-1,ne=5,oe=-1;function ue(){return V?!0:!(_.unstable_now()-oe<ne)}function ce(){if(V=!1,re){var ge=_.unstable_now();oe=ge;var be=!0;try{e:{H=!1,G&&(G=!1,W(ee),ee=-1),F=!0;var Ae=N;try{t:{for(J(ge),I=S(M);I!==null&&!(I.expirationTime>ge&&ue());){var De=I.callback;if(typeof De=="function"){I.callback=null,N=I.priorityLevel;var ve=De(I.expirationTime<=ge);if(ge=_.unstable_now(),typeof ve=="function"){I.callback=ve,J(ge),be=!0;break t}I===S(M)&&R(M),J(ge)}else R(M);I=S(M)}if(I!==null)be=!0;else{var le=S(D);le!==null&&Ee(te,le.startTime-ge),be=!1}}break e}finally{I=null,N=Ae,F=!1}be=void 0}}finally{be?de():re=!1}}}var de;if(typeof X=="function")de=function(){X(ce)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,_e=pe.port2;pe.port1.onmessage=ce,de=function(){_e.postMessage(null)}}else de=function(){j(ce,0)};function Ee(ge,be){ee=j(function(){ge(_.unstable_now())},be)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(ge){ge.callback=null},_.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<ge?Math.floor(1e3/ge):5},_.unstable_getCurrentPriorityLevel=function(){return N},_.unstable_next=function(ge){switch(N){case 1:case 2:case 3:var be=3;break;default:be=N}var Ae=N;N=be;try{return ge()}finally{N=Ae}},_.unstable_requestPaint=function(){V=!0},_.unstable_runWithPriority=function(ge,be){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Ae=N;N=ge;try{return be()}finally{N=Ae}},_.unstable_scheduleCallback=function(ge,be,Ae){var De=_.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?De+Ae:De):Ae=De,ge){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Ae+ve,ge={id:L++,callback:be,priorityLevel:ge,startTime:Ae,expirationTime:ve,sortIndex:-1},Ae>De?(ge.sortIndex=Ae,v(D,ge),S(M)===null&&ge===S(D)&&(G?(W(ee),ee=-1):G=!0,Ee(te,Ae-De))):(ge.sortIndex=ve,v(M,ge),H||F||(H=!0,re||(re=!0,de()))),ge},_.unstable_shouldYield=ue,_.unstable_wrapCallback=function(ge){var be=N;return function(){var Ae=N;N=be;try{return ge.apply(this,arguments)}finally{N=Ae}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function v(M){var D="https://react.dev/errors/"+M;if(1<arguments.length){D+="?args[]="+encodeURIComponent(arguments[1]);for(var L=2;L<arguments.length;L++)D+="&args[]="+encodeURIComponent(arguments[L])}return"Minified React error #"+M+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(){}var R={d:{f:S,r:function(){throw Error(v(522))},D:S,C:S,L:S,m:S,X:S,S,M:S},p:0,findDOMNode:null},T=Symbol.for("react.portal");function A(M,D,L){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:I==null?null:""+I,children:M,containerInfo:D,implementation:L}}var k=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function q(M,D){if(M==="font")return"";if(typeof D=="string")return D==="use-credentials"?D:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,reactDom_production.createPortal=function(M,D){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)throw Error(v(299));return A(M,D,null,L)},reactDom_production.flushSync=function(M){var D=k.T,L=R.p;try{if(k.T=null,R.p=2,M)return M()}finally{k.T=D,R.p=L,R.d.f()}},reactDom_production.preconnect=function(M,D){typeof M=="string"&&(D?(D=D.crossOrigin,D=typeof D=="string"?D==="use-credentials"?D:"":void 0):D=null,R.d.C(M,D))},reactDom_production.prefetchDNS=function(M){typeof M=="string"&&R.d.D(M)},reactDom_production.preinit=function(M,D){if(typeof M=="string"&&D&&typeof D.as=="string"){var L=D.as,I=q(L,D.crossOrigin),N=typeof D.integrity=="string"?D.integrity:void 0,F=typeof D.fetchPriority=="string"?D.fetchPriority:void 0;L==="style"?R.d.S(M,typeof D.precedence=="string"?D.precedence:void 0,{crossOrigin:I,integrity:N,fetchPriority:F}):L==="script"&&R.d.X(M,{crossOrigin:I,integrity:N,fetchPriority:F,nonce:typeof D.nonce=="string"?D.nonce:void 0})}},reactDom_production.preinitModule=function(M,D){if(typeof M=="string")if(typeof D=="object"&&D!==null){if(D.as==null||D.as==="script"){var L=q(D.as,D.crossOrigin);R.d.M(M,{crossOrigin:L,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0})}}else D==null&&R.d.M(M)},reactDom_production.preload=function(M,D){if(typeof M=="string"&&typeof D=="object"&&D!==null&&typeof D.as=="string"){var L=D.as,I=q(L,D.crossOrigin);R.d.L(M,L,{crossOrigin:I,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0,type:typeof D.type=="string"?D.type:void 0,fetchPriority:typeof D.fetchPriority=="string"?D.fetchPriority:void 0,referrerPolicy:typeof D.referrerPolicy=="string"?D.referrerPolicy:void 0,imageSrcSet:typeof D.imageSrcSet=="string"?D.imageSrcSet:void 0,imageSizes:typeof D.imageSizes=="string"?D.imageSizes:void 0,media:typeof D.media=="string"?D.media:void 0})}},reactDom_production.preloadModule=function(M,D){if(typeof M=="string")if(D){var L=q(D.as,D.crossOrigin);R.d.m(M,{as:typeof D.as=="string"&&D.as!=="script"?D.as:void 0,crossOrigin:L,integrity:typeof D.integrity=="string"?D.integrity:void 0})}else R.d.m(M)},reactDom_production.requestFormReset=function(M){R.d.r(M)},reactDom_production.unstable_batchedUpdates=function(M,D){return M(D)},reactDom_production.useFormState=function(M,D,L){return k.H.useFormState(M,D,L)},reactDom_production.useFormStatus=function(){return k.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(v){console.error(v)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler(),v=requireReact(),S=requireReactDom();function R(B){var P="https://react.dev/errors/"+B;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var $=2;$<arguments.length;$++)P+="&args[]="+encodeURIComponent(arguments[$])}return"Minified React error #"+B+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(B){return!(!B||B.nodeType!==1&&B.nodeType!==9&&B.nodeType!==11)}function A(B){var P=B,$=B;if(B.alternate)for(;P.return;)P=P.return;else{B=P;do P=B,(P.flags&4098)!==0&&($=P.return),B=P.return;while(B)}return P.tag===3?$:null}function k(B){if(B.tag===13){var P=B.memoizedState;if(P===null&&(B=B.alternate,B!==null&&(P=B.memoizedState)),P!==null)return P.dehydrated}return null}function q(B){if(B.tag===31){var P=B.memoizedState;if(P===null&&(B=B.alternate,B!==null&&(P=B.memoizedState)),P!==null)return P.dehydrated}return null}function M(B){if(A(B)!==B)throw Error(R(188))}function D(B){var P=B.alternate;if(!P){if(P=A(B),P===null)throw Error(R(188));return P!==B?null:B}for(var $=B,z=P;;){var Y=$.return;if(Y===null)break;var Z=Y.alternate;if(Z===null){if(z=Y.return,z!==null){$=z;continue}break}if(Y.child===Z.child){for(Z=Y.child;Z;){if(Z===$)return M(Y),B;if(Z===z)return M(Y),P;Z=Z.sibling}throw Error(R(188))}if($.return!==z.return)$=Y,z=Z;else{for(var fe=!1,Ce=Y.child;Ce;){if(Ce===$){fe=!0,$=Y,z=Z;break}if(Ce===z){fe=!0,z=Y,$=Z;break}Ce=Ce.sibling}if(!fe){for(Ce=Z.child;Ce;){if(Ce===$){fe=!0,$=Z,z=Y;break}if(Ce===z){fe=!0,z=Z,$=Y;break}Ce=Ce.sibling}if(!fe)throw Error(R(189))}}if($.alternate!==z)throw Error(R(190))}if($.tag!==3)throw Error(R(188));return $.stateNode.current===$?B:P}function L(B){var P=B.tag;if(P===5||P===26||P===27||P===6)return B;for(B=B.child;B!==null;){if(P=L(B),P!==null)return P;B=B.sibling}return null}var I=Object.assign,N=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),X=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function de(B){return B===null||typeof B!="object"?null:(B=ce&&B[ce]||B["@@iterator"],typeof B=="function"?B:null)}var pe=Symbol.for("react.client.reference");function _e(B){if(B==null)return null;if(typeof B=="function")return B.$$typeof===pe?null:B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case G:return"Fragment";case j:return"Profiler";case V:return"StrictMode";case te:return"Suspense";case re:return"SuspenseList";case oe:return"Activity"}if(typeof B=="object")switch(B.$$typeof){case H:return"Portal";case X:return B.displayName||"Context";case W:return(B._context.displayName||"Context")+".Consumer";case J:var P=B.render;return B=B.displayName,B||(B=P.displayName||P.name||"",B=B!==""?"ForwardRef("+B+")":"ForwardRef"),B;case ee:return P=B.displayName||null,P!==null?P:_e(B.type)||"Memo";case ne:P=B._payload,B=B._init;try{return _e(B(P))}catch{}}return null}var Ee=Array.isArray,ge=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=S.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},De=[],ve=-1;function le(B){return{current:B}}function me(B){0>ve||(B.current=De[ve],De[ve]=null,ve--)}function Te(B,P){ve++,De[ve]=B.current,B.current=P}var ye=le(null),Re=le(null),qe=le(null),ke=le(null);function ze(B,P){switch(Te(qe,P),Te(Re,B),Te(ye,null),P.nodeType){case 9:case 11:B=(B=P.documentElement)&&(B=B.namespaceURI)?Jd(B):0;break;default:if(B=P.tagName,P=P.namespaceURI)P=Jd(P),B=ep(P,B);else switch(B){case"svg":B=1;break;case"math":B=2;break;default:B=0}}me(ye),Te(ye,B)}function Ne(){me(ye),me(Re),me(qe)}function Pe(B){B.memoizedState!==null&&Te(ke,B);var P=ye.current,$=ep(P,B.type);P!==$&&(Te(Re,B),Te(ye,$))}function Me(B){Re.current===B&&(me(ye),me(Re)),ke.current===B&&(me(ke),Xo._currentValue=Ae)}var Ie,Le;function nt(B){if(Ie===void 0)try{throw Error()}catch($){var P=$.stack.trim().match(/\n( *(at )?)/);Ie=P&&P[1]||"",Le=-1<$.stack.indexOf(`
    at`)?" (<anonymous>)":-1<$.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+B+Le}var lt=!1;function dt(B,P){if(!B||lt)return"";lt=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(P){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(tt){var Je=tt}Reflect.construct(B,[],ct)}else{try{ct.call()}catch(tt){Je=tt}B.call(ct.prototype)}}else{try{throw Error()}catch(tt){Je=tt}(ct=B())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(tt){if(tt&&Je&&typeof tt.stack=="string")return[tt.stack,Je.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Z=z.DetermineComponentFrameRoot(),fe=Z[0],Ce=Z[1];if(fe&&Ce){var Oe=fe.split(`
`),Ye=Ce.split(`
`);for(Y=z=0;z<Oe.length&&!Oe[z].includes("DetermineComponentFrameRoot");)z++;for(;Y<Ye.length&&!Ye[Y].includes("DetermineComponentFrameRoot");)Y++;if(z===Oe.length||Y===Ye.length)for(z=Oe.length-1,Y=Ye.length-1;1<=z&&0<=Y&&Oe[z]!==Ye[Y];)Y--;for(;1<=z&&0<=Y;z--,Y--)if(Oe[z]!==Ye[Y]){if(z!==1||Y!==1)do if(z--,Y--,0>Y||Oe[z]!==Ye[Y]){var at=`
`+Oe[z].replace(" at new "," at ");return B.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",B.displayName)),at}while(1<=z&&0<=Y);break}}}finally{lt=!1,Error.prepareStackTrace=$}return($=B?B.displayName||B.name:"")?nt($):""}function pt(B,P){switch(B.tag){case 26:case 27:case 5:return nt(B.type);case 16:return nt("Lazy");case 13:return B.child!==P&&P!==null?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return dt(B.type,!1);case 11:return dt(B.type.render,!1);case 1:return dt(B.type,!0);case 31:return nt("Activity");default:return""}}function We(B){try{var P="",$=null;do P+=pt(B,$),$=B,B=B.return;while(B);return P}catch(z){return`
Error generating stack: `+z.message+`
`+z.stack}}var wt=Object.prototype.hasOwnProperty,st=_.unstable_scheduleCallback,St=_.unstable_cancelCallback,gt=_.unstable_shouldYield,Et=_.unstable_requestPaint,xt=_.unstable_now,Lt=_.unstable_getCurrentPriorityLevel,zt=_.unstable_ImmediatePriority,jt=_.unstable_UserBlockingPriority,At=_.unstable_NormalPriority,Ot=_.unstable_LowPriority,Ct=_.unstable_IdlePriority,bt=_.log,et=_.unstable_setDisableYieldValue,we=null,Fe=null;function Ge(B){if(typeof bt=="function"&&et(B),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(we,B)}catch{}}var Ze=Math.clz32?Math.clz32:ot,rt=Math.log,_t=Math.LN2;function ot(B){return B>>>=0,B===0?32:31-(rt(B)/_t|0)|0}var Tt=256,Rt=262144,qt=4194304;function Nt(B){var P=B&42;if(P!==0)return P;switch(B&-B){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return B&261888;case 262144:case 524288:case 1048576:case 2097152:return B&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return B&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return B}}function yt(B,P,$){var z=B.pendingLanes;if(z===0)return 0;var Y=0,Z=B.suspendedLanes,fe=B.pingedLanes;B=B.warmLanes;var Ce=z&134217727;return Ce!==0?(z=Ce&~Z,z!==0?Y=Nt(z):(fe&=Ce,fe!==0?Y=Nt(fe):$||($=Ce&~B,$!==0&&(Y=Nt($))))):(Ce=z&~Z,Ce!==0?Y=Nt(Ce):fe!==0?Y=Nt(fe):$||($=z&~B,$!==0&&(Y=Nt($)))),Y===0?0:P!==0&&P!==Y&&(P&Z)===0&&(Z=Y&-Y,$=P&-P,Z>=$||Z===32&&($&4194048)!==0)?P:Y}function vt(B,P){return(B.pendingLanes&~(B.suspendedLanes&~B.pingedLanes)&P)===0}function Dt(B,P){switch(B){case 1:case 2:case 4:case 8:case 64:return P+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return P+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var B=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),B}function or(B){for(var P=[],$=0;31>$;$++)P.push(B);return P}function Vt(B,P){B.pendingLanes|=P,P!==268435456&&(B.suspendedLanes=0,B.pingedLanes=0,B.warmLanes=0)}function ur(B,P,$,z,Y,Z){var fe=B.pendingLanes;B.pendingLanes=$,B.suspendedLanes=0,B.pingedLanes=0,B.warmLanes=0,B.expiredLanes&=$,B.entangledLanes&=$,B.errorRecoveryDisabledLanes&=$,B.shellSuspendCounter=0;var Ce=B.entanglements,Oe=B.expirationTimes,Ye=B.hiddenUpdates;for($=fe&~$;0<$;){var at=31-Ze($),ct=1<<at;Ce[at]=0,Oe[at]=-1;var Je=Ye[at];if(Je!==null)for(Ye[at]=null,at=0;at<Je.length;at++){var tt=Je[at];tt!==null&&(tt.lane&=-536870913)}$&=~ct}z!==0&&dr(B,z,0),Z!==0&&Y===0&&B.tag!==0&&(B.suspendedLanes|=Z&~(fe&~P))}function dr(B,P,$){B.pendingLanes|=P,B.suspendedLanes&=~P;var z=31-Ze(P);B.entangledLanes|=P,B.entanglements[z]=B.entanglements[z]|1073741824|$&261930}function sr(B,P){var $=B.entangledLanes|=P;for(B=B.entanglements;$;){var z=31-Ze($),Y=1<<z;Y&P|B[z]&P&&(B[z]|=P),$&=~Y}}function rr(B,P){var $=P&-P;return $=($&42)!==0?1:_r($),($&(B.suspendedLanes|P))!==0?0:$}function _r(B){switch(B){case 2:B=1;break;case 8:B=4;break;case 32:B=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:B=128;break;case 268435456:B=134217728;break;default:B=0}return B}function Pr(B){return B&=-B,2<B?8<B?(B&134217727)!==0?32:268435456:8:2}function Er(){var B=be.p;return B!==0?B:(B=window.event,B===void 0?32:_p(B.type))}function kn(B,P){var $=be.p;try{return be.p=B,P()}finally{be.p=$}}var Fr=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Fr,zr="__reactProps$"+Fr,Sn="__reactContainer$"+Fr,Kr="__reactEvents$"+Fr,Wr="__reactListeners$"+Fr,pn="__reactHandles$"+Fr,wa="__reactResources$"+Fr,Xr="__reactMarker$"+Fr;function ti(B){delete B[Tr],delete B[zr],delete B[Kr],delete B[Wr],delete B[pn]}function Ca(B){var P=B[Tr];if(P)return P;for(var $=B.parentNode;$;){if(P=$[Sn]||$[Tr]){if($=P.alternate,P.child!==null||$!==null&&$.child!==null)for(B=op(B);B!==null;){if($=B[Tr])return $;B=op(B)}return P}B=$,$=B.parentNode}return null}function Ea(B){if(B=B[Tr]||B[Sn]){var P=B.tag;if(P===5||P===6||P===13||P===31||P===26||P===27||P===3)return B}return null}function Ia(B){var P=B.tag;if(P===5||P===26||P===27||P===6)return B.stateNode;throw Error(R(33))}function Ra(B){var P=B[wa];return P||(P=B[wa]={hoistableStyles:new Map,hoistableScripts:new Map}),P}function Lr(B){B[Xr]=!0}var oa=new Set,is={};function En(B,P){Xn(B,P),Xn(B+"Capture",P)}function Xn(B,P){for(is[B]=P,B=0;B<P.length;B++)oa.add(P[B])}var Hn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Di={},Mi={};function ss(B){return wt.call(Mi,B)?!0:wt.call(Di,B)?!1:Hn.test(B)?Mi[B]=!0:(Di[B]=!0,!1)}function gn(B,P,$){if(ss(P))if($===null)B.removeAttribute(P);else{switch(typeof $){case"undefined":case"function":case"symbol":B.removeAttribute(P);return;case"boolean":var z=P.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){B.removeAttribute(P);return}}B.setAttribute(P,""+$)}}function la(B,P,$){if($===null)B.removeAttribute(P);else{switch(typeof $){case"undefined":case"function":case"symbol":case"boolean":B.removeAttribute(P);return}B.setAttribute(P,""+$)}}function Rn(B,P,$,z){if(z===null)B.removeAttribute($);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":B.removeAttribute($);return}B.setAttributeNS(P,$,""+z)}}function en(B){switch(typeof B){case"bigint":case"boolean":case"number":case"string":case"undefined":return B;case"object":return B;default:return""}}function xn(B){var P=B.type;return(B=B.nodeName)&&B.toLowerCase()==="input"&&(P==="checkbox"||P==="radio")}function Us(B,P,$){var z=Object.getOwnPropertyDescriptor(B.constructor.prototype,P);if(!B.hasOwnProperty(P)&&typeof z<"u"&&typeof z.get=="function"&&typeof z.set=="function"){var Y=z.get,Z=z.set;return Object.defineProperty(B,P,{configurable:!0,get:function(){return Y.call(this)},set:function(fe){$=""+fe,Z.call(this,fe)}}),Object.defineProperty(B,P,{enumerable:z.enumerable}),{getValue:function(){return $},setValue:function(fe){$=""+fe},stopTracking:function(){B._valueTracker=null,delete B[P]}}}}function os(B){if(!B._valueTracker){var P=xn(B)?"checked":"value";B._valueTracker=Us(B,P,""+B[P])}}function ls(B){if(!B)return!1;var P=B._valueTracker;if(!P)return!0;var $=P.getValue(),z="";return B&&(z=xn(B)?B.checked?"true":"false":B.value),B=z,B!==$?(P.setValue(B),!0):!1}function us(B){if(B=B||(typeof document<"u"?document:void 0),typeof B>"u")return null;try{return B.activeElement||B.body}catch{return B.body}}var Tu=/[\n"\\]/g;function qn(B){return B.replace(Tu,function(P){return"\\"+P.charCodeAt(0).toString(16)+" "})}function Gs(B,P,$,z,Y,Z,fe,Ce){B.name="",fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?B.type=fe:B.removeAttribute("type"),P!=null?fe==="number"?(P===0&&B.value===""||B.value!=P)&&(B.value=""+en(P)):B.value!==""+en(P)&&(B.value=""+en(P)):fe!=="submit"&&fe!=="reset"||B.removeAttribute("value"),P!=null?js(B,fe,en(P)):$!=null?js(B,fe,en($)):z!=null&&B.removeAttribute("value"),Y==null&&Z!=null&&(B.defaultChecked=!!Z),Y!=null&&(B.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?B.name=""+en(Ce):B.removeAttribute("name")}function cs(B,P,$,z,Y,Z,fe,Ce){if(Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(B.type=Z),P!=null||$!=null){if(!(Z!=="submit"&&Z!=="reset"||P!=null)){os(B);return}$=$!=null?""+en($):"",P=P!=null?""+en(P):$,Ce||P===B.value||(B.value=P),B.defaultValue=P}z=z??Y,z=typeof z!="function"&&typeof z!="symbol"&&!!z,B.checked=Ce?B.checked:!!z,B.defaultChecked=!!z,fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"&&(B.name=fe),os(B)}function js(B,P,$){P==="number"&&us(B.ownerDocument)===B||B.defaultValue===""+$||(B.defaultValue=""+$)}function ri(B,P,$,z){if(B=B.options,P){P={};for(var Y=0;Y<$.length;Y++)P["$"+$[Y]]=!0;for($=0;$<B.length;$++)Y=P.hasOwnProperty("$"+B[$].value),B[$].selected!==Y&&(B[$].selected=Y),Y&&z&&(B[$].defaultSelected=!0)}else{for($=""+en($),P=null,Y=0;Y<B.length;Y++){if(B[Y].value===$){B[Y].selected=!0,z&&(B[Y].defaultSelected=!0);return}P!==null||B[Y].disabled||(P=B[Y])}P!==null&&(P.selected=!0)}}function el(B,P,$){if(P!=null&&(P=""+en(P),P!==B.value&&(B.value=P),$==null)){B.defaultValue!==P&&(B.defaultValue=P);return}B.defaultValue=$!=null?""+en($):""}function tl(B,P,$,z){if(P==null){if(z!=null){if($!=null)throw Error(R(92));if(Ee(z)){if(1<z.length)throw Error(R(93));z=z[0]}$=z}$==null&&($=""),P=$}$=en(P),B.defaultValue=$,z=B.textContent,z===$&&z!==""&&z!==null&&(B.value=z),os(B)}function ni(B,P){if(P){var $=B.firstChild;if($&&$===B.lastChild&&$.nodeType===3){$.nodeValue=P;return}}B.textContent=P}var Au=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(B,P,$){var z=P.indexOf("--")===0;$==null||typeof $=="boolean"||$===""?z?B.setProperty(P,""):P==="float"?B.cssFloat="":B[P]="":z?B.setProperty(P,$):typeof $!="number"||$===0||Au.has(P)?P==="float"?B.cssFloat=$:B[P]=(""+$).trim():B[P]=$+"px"}function nl(B,P,$){if(P!=null&&typeof P!="object")throw Error(R(62));if(B=B.style,$!=null){for(var z in $)!$.hasOwnProperty(z)||P!=null&&P.hasOwnProperty(z)||(z.indexOf("--")===0?B.setProperty(z,""):z==="float"?B.cssFloat="":B[z]="");for(var Y in P)z=P[Y],P.hasOwnProperty(Y)&&$[Y]!==z&&rl(B,Y,z)}else for(var Z in P)P.hasOwnProperty(Z)&&rl(B,Z,P[Z])}function Ws(B){if(B.indexOf("-")===-1)return!1;switch(B){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(B){return qu.test(""+B)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":B}function ua(){}var Ys=null;function Qs(B){return B=B.target||B.srcElement||window,B.correspondingUseElement&&(B=B.correspondingUseElement),B.nodeType===3?B.parentNode:B}var ca=null,ai=null;function al(B){var P=Ea(B);if(P&&(B=P.stateNode)){var $=B[zr]||null;e:switch(B=P.stateNode,P.type){case"input":if(Gs(B,$.value,$.defaultValue,$.defaultValue,$.checked,$.defaultChecked,$.type,$.name),P=$.name,$.type==="radio"&&P!=null){for($=B;$.parentNode;)$=$.parentNode;for($=$.querySelectorAll('input[name="'+qn(""+P)+'"][type="radio"]'),P=0;P<$.length;P++){var z=$[P];if(z!==B&&z.form===B.form){var Y=z[zr]||null;if(!Y)throw Error(R(90));Gs(z,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(P=0;P<$.length;P++)z=$[P],z.form===B.form&&ls(z)}break e;case"textarea":el(B,$.value,$.defaultValue);break e;case"select":P=$.value,P!=null&&ri(B,!!$.multiple,P,!1)}}}var Zs=!1;function il(B,P,$){if(Zs)return B(P,$);Zs=!0;try{var z=B(P);return z}finally{if(Zs=!1,(ca!==null||ai!==null)&&(iu(),ca&&(P=ca,B=ai,ai=ca=null,al(P),B)))for(P=0;P<B.length;P++)al(B[P])}}function Bi(B,P){var $=B.stateNode;if($===null)return null;var z=$[zr]||null;if(z===null)return null;$=z[P];e:switch(P){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(B=B.type,z=!(B==="button"||B==="input"||B==="select"||B==="textarea")),B=!z;break e;default:B=!1}if(B)return null;if($&&typeof $!="function")throw Error(R(231,P,typeof $));return $}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Js=!1;if(fa)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){Js=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{Js=!1}var Ta=null,eo=null,hs=null;function sl(){if(hs)return hs;var B,P=eo,$=P.length,z,Y="value"in Ta?Ta.value:Ta.textContent,Z=Y.length;for(B=0;B<$&&P[B]===Y[B];B++);var fe=$-B;for(z=1;z<=fe&&P[$-z]===Y[Z-z];z++);return hs=Y.slice(B,1<z?1-z:void 0)}function ds(B){var P=B.keyCode;return"charCode"in B?(B=B.charCode,B===0&&P===13&&(B=13)):B=P,B===10&&(B=13),32<=B||B===13?B:0}function ps(){return!0}function ol(){return!1}function wn(B){function P($,z,Y,Z,fe){this._reactName=$,this._targetInst=Y,this.type=z,this.nativeEvent=Z,this.target=fe,this.currentTarget=null;for(var Ce in B)B.hasOwnProperty(Ce)&&($=B[Ce],this[Ce]=$?$(Z):Z[Ce]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?ps:ol,this.isPropagationStopped=ol,this}return I(P.prototype,{preventDefault:function(){this.defaultPrevented=!0;var $=this.nativeEvent;$&&($.preventDefault?$.preventDefault():typeof $.returnValue!="unknown"&&($.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var $=this.nativeEvent;$&&($.stopPropagation?$.stopPropagation():typeof $.cancelBubble!="unknown"&&($.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),P}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(B){return B.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=wn($a),Li=I({},$a,{view:0,detail:0}),Du=wn(Li),to,ro,Pi,vs=I({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(B){return B.relatedTarget===void 0?B.fromElement===B.srcElement?B.toElement:B.fromElement:B.relatedTarget},movementX:function(B){return"movementX"in B?B.movementX:(B!==Pi&&(Pi&&B.type==="mousemove"?(to=B.screenX-Pi.screenX,ro=B.screenY-Pi.screenY):ro=to=0,Pi=B),to)},movementY:function(B){return"movementY"in B?B.movementY:ro}}),ll=wn(vs),Mu=I({},vs,{dataTransfer:0}),Bu=wn(Mu),Ou=I({},Li,{relatedTarget:0}),no=wn(Ou),Lu=I({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=wn(Lu),Iu=I({},$a,{clipboardData:function(B){return"clipboardData"in B?B.clipboardData:window.clipboardData}}),$u=wn(Iu),Nu=I({},$a,{data:0}),ul=wn(Nu),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(B){var P=this.nativeEvent;return P.getModifierState?P.getModifierState(B):(B=Hu[B])?!!P[B]:!1}function ao(){return Vu}var Uu=I({},Li,{key:function(B){if(B.key){var P=Fu[B.key]||B.key;if(P!=="Unidentified")return P}return B.type==="keypress"?(B=ds(B),B===13?"Enter":String.fromCharCode(B)):B.type==="keydown"||B.type==="keyup"?zu[B.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(B){return B.type==="keypress"?ds(B):0},keyCode:function(B){return B.type==="keydown"||B.type==="keyup"?B.keyCode:0},which:function(B){return B.type==="keypress"?ds(B):B.type==="keydown"||B.type==="keyup"?B.keyCode:0}}),Gu=wn(Uu),ju=I({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=wn(ju),Ku=I({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Wu=wn(Ku),Yu=I({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xu=wn(Yu),Qu=I({},vs,{deltaX:function(B){return"deltaX"in B?B.deltaX:"wheelDeltaX"in B?-B.wheelDeltaX:0},deltaY:function(B){return"deltaY"in B?B.deltaY:"wheelDeltaY"in B?-B.wheelDeltaY:"wheelDelta"in B?-B.wheelDelta:0},deltaZ:0,deltaMode:0}),Zu=wn(Qu),Ju=I({},$a,{newState:0,oldState:0}),ec=wn(Ju),tc=[9,13,27,32],io=fa&&"CompositionEvent"in window,Ii=null;fa&&"documentMode"in document&&(Ii=document.documentMode);var rc=fa&&"TextEvent"in window&&!Ii,fl=fa&&(!io||Ii&&8<Ii&&11>=Ii),hl=" ",dl=!1;function pl(B,P){switch(B){case"keyup":return tc.indexOf(P.keyCode)!==-1;case"keydown":return P.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gl(B){return B=B.detail,typeof B=="object"&&"data"in B?B.data:null}var ii=!1;function ae(B,P){switch(B){case"compositionend":return gl(P);case"keypress":return P.which!==32?null:(dl=!0,hl);case"textInput":return B=P.data,B===hl&&dl?null:B;default:return null}}function kt(B,P){if(ii)return B==="compositionend"||!io&&pl(B,P)?(B=sl(),hs=eo=Ta=null,ii=!1,B):null;switch(B){case"paste":return null;case"keypress":if(!(P.ctrlKey||P.altKey||P.metaKey)||P.ctrlKey&&P.altKey){if(P.char&&1<P.char.length)return P.char;if(P.which)return String.fromCharCode(P.which)}return null;case"compositionend":return fl&&P.locale!=="ko"?null:P.data;default:return null}}var si={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(B){var P=B&&B.nodeName&&B.nodeName.toLowerCase();return P==="input"?!!si[B.type]:P==="textarea"}function $i(B,P,$,z){ca?ai?ai.push(z):ai=[z]:ca=z,P=hu(P,"onChange"),0<P.length&&($=new gs("onChange","change",null,$,z),B.push({event:$,listeners:P}))}var Ue=null,ha=null;function nc(B){Kd(B,0)}function Xt(B){var P=Ia(B);if(ls(P))return B}function Aa(B,P){if(B==="change")return P}var Ni=!1;if(fa){var Gt;if(fa){var qr="oninput"in document;if(!qr){var vl=document.createElement("div");vl.setAttribute("oninput","return;"),qr=typeof vl.oninput=="function"}Gt=qr}else Gt=!1;Ni=Gt&&(!document.documentMode||9<document.documentMode)}function ml(){Ue&&(Ue.detachEvent("onpropertychange",da),ha=Ue=null)}function da(B){if(B.propertyName==="value"&&Xt(ha)){var P=[];$i(P,ha,B,Qs(B)),il(nc,P)}}function yl(B,P,$){B==="focusin"?(ml(),Ue=P,ha=$,Ue.attachEvent("onpropertychange",da)):B==="focusout"&&ml()}function ys(B){if(B==="selectionchange"||B==="keyup"||B==="keydown")return Xt(ha)}function it(B,P){if(B==="click")return Xt(P)}function ac(B,P){if(B==="input"||B==="change")return Xt(P)}function ic(B,P){return B===P&&(B!==0||1/B===1/P)||B!==B&&P!==P}var _n=typeof Object.is=="function"?Object.is:ic;function Fi(B,P){if(_n(B,P))return!0;if(typeof B!="object"||B===null||typeof P!="object"||P===null)return!1;var $=Object.keys(B),z=Object.keys(P);if($.length!==z.length)return!1;for(z=0;z<$.length;z++){var Y=$[z];if(!wt.call(P,Y)||!_n(B[Y],P[Y]))return!1}return!0}function bl(B){for(;B&&B.firstChild;)B=B.firstChild;return B}function Sl(B,P){var $=bl(B);B=0;for(var z;$;){if($.nodeType===3){if(z=B+$.textContent.length,B<=P&&z>=P)return{node:$,offset:P-B};B=z}e:{for(;$;){if($.nextSibling){$=$.nextSibling;break e}$=$.parentNode}$=void 0}$=bl($)}}function so(B,P){return B&&P?B===P?!0:B&&B.nodeType===3?!1:P&&P.nodeType===3?so(B,P.parentNode):"contains"in B?B.contains(P):B.compareDocumentPosition?!!(B.compareDocumentPosition(P)&16):!1:!1}function oo(B){B=B!=null&&B.ownerDocument!=null&&B.ownerDocument.defaultView!=null?B.ownerDocument.defaultView:window;for(var P=us(B.document);P instanceof B.HTMLIFrameElement;){try{var $=typeof P.contentWindow.location.href=="string"}catch{$=!1}if($)B=P.contentWindow;else break;P=us(B.document)}return P}function lo(B){var P=B&&B.nodeName&&B.nodeName.toLowerCase();return P&&(P==="input"&&(B.type==="text"||B.type==="search"||B.type==="tel"||B.type==="url"||B.type==="password")||P==="textarea"||B.contentEditable==="true")}var sc=fa&&"documentMode"in document&&11>=document.documentMode,Na=null,bs=null,zi=null,uo=!1;function co(B,P,$){var z=$.window===$?$.document:$.nodeType===9?$:$.ownerDocument;uo||Na==null||Na!==us(z)||(z=Na,"selectionStart"in z&&lo(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),zi&&Fi(zi,z)||(zi=z,z=hu(bs,"onSelect"),0<z.length&&(P=new gs("onSelect","select",null,P,$),B.push({event:P,listeners:z}),P.target=Na)))}function ka(B,P){var $={};return $[B.toLowerCase()]=P.toLowerCase(),$["Webkit"+B]="webkit"+P,$["Moz"+B]="moz"+P,$}var pa={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},fo={},xl={};fa&&(xl=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Fa(B){if(fo[B])return fo[B];if(!pa[B])return B;var P=pa[B],$;for($ in P)if(P.hasOwnProperty($)&&$ in xl)return fo[B]=P[$];return B}var wl=Fa("animationend"),ho=Fa("animationiteration"),Ss=Fa("animationstart"),po=Fa("transitionrun"),oc=Fa("transitionstart"),go=Fa("transitioncancel"),_l=Fa("transitionend"),vo=new Map,Hi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hi.push("scrollEnd");function Vn(B,P){vo.set(B,P),En(P,[B])}var Vi=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Mn=[],oi=0,mo=0;function li(){for(var B=oi,P=mo=oi=0;P<B;){var $=Mn[P];Mn[P++]=null;var z=Mn[P];Mn[P++]=null;var Y=Mn[P];Mn[P++]=null;var Z=Mn[P];if(Mn[P++]=null,z!==null&&Y!==null){var fe=z.pending;fe===null?Y.next=Y:(Y.next=fe.next,fe.next=Y),z.pending=Y}Z!==0&&Cl($,Y,Z)}}function ui(B,P,$,z){Mn[oi++]=B,Mn[oi++]=P,Mn[oi++]=$,Mn[oi++]=z,mo|=z,B.lanes|=z,B=B.alternate,B!==null&&(B.lanes|=z)}function yo(B,P,$,z){return ui(B,P,$,z),hn(B)}function za(B,P){return ui(B,null,null,P),hn(B)}function Cl(B,P,$){B.lanes|=$;var z=B.alternate;z!==null&&(z.lanes|=$);for(var Y=!1,Z=B.return;Z!==null;)Z.childLanes|=$,z=Z.alternate,z!==null&&(z.childLanes|=$),Z.tag===22&&(B=Z.stateNode,B===null||B._visibility&1||(Y=!0)),B=Z,Z=Z.return;return B.tag===3?(Z=B.stateNode,Y&&P!==null&&(Y=31-Ze($),B=Z.hiddenUpdates,z=B[Y],z===null?B[Y]=[P]:z.push(P),P.lane=$|536870912),Z):null}function hn(B){if(50<Vo)throw Vo=0,of=null,Error(R(185));for(var P=B.return;P!==null;)B=P,P=B.return;return B.tag===3?B.stateNode:null}var ci={};function lc(B,P,$,z){this.tag=B,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=P,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(B,P,$,z){return new lc(B,P,$,z)}function Ha(B){return B=B.prototype,!(!B||!B.isReactComponent)}function Bn(B,P){var $=B.alternate;return $===null?($=vn(B.tag,P,B.key,B.mode),$.elementType=B.elementType,$.type=B.type,$.stateNode=B.stateNode,$.alternate=B,B.alternate=$):($.pendingProps=P,$.type=B.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=B.flags&65011712,$.childLanes=B.childLanes,$.lanes=B.lanes,$.child=B.child,$.memoizedProps=B.memoizedProps,$.memoizedState=B.memoizedState,$.updateQueue=B.updateQueue,P=B.dependencies,$.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext},$.sibling=B.sibling,$.index=B.index,$.ref=B.ref,$.refCleanup=B.refCleanup,$}function bo(B,P){B.flags&=65011714;var $=B.alternate;return $===null?(B.childLanes=0,B.lanes=P,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=$.childLanes,B.lanes=$.lanes,B.child=$.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=$.memoizedProps,B.memoizedState=$.memoizedState,B.updateQueue=$.updateQueue,B.type=$.type,P=$.dependencies,B.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),B}function xs(B,P,$,z,Y,Z){var fe=0;if(z=B,typeof B=="function")Ha(B)&&(fe=1);else if(typeof B=="string")fe=Mg(B,$,ye.current)?26:B==="html"||B==="head"||B==="body"?27:5;else e:switch(B){case oe:return B=vn(31,$,P,Y),B.elementType=oe,B.lanes=Z,B;case G:return qa($.children,Y,Z,P);case V:fe=8,Y|=24;break;case j:return B=vn(12,$,P,Y|2),B.elementType=j,B.lanes=Z,B;case te:return B=vn(13,$,P,Y),B.elementType=te,B.lanes=Z,B;case re:return B=vn(19,$,P,Y),B.elementType=re,B.lanes=Z,B;default:if(typeof B=="object"&&B!==null)switch(B.$$typeof){case X:fe=10;break e;case W:fe=9;break e;case J:fe=11;break e;case ee:fe=14;break e;case ne:fe=16,z=null;break e}fe=29,$=Error(R(130,B===null?"null":typeof B,"")),z=null}return P=vn(fe,$,P,Y),P.elementType=B,P.type=z,P.lanes=Z,P}function qa(B,P,$,z){return B=vn(7,B,z,P),B.lanes=$,B}function ws(B,P,$){return B=vn(6,B,null,P),B.lanes=$,B}function ga(B){var P=vn(18,null,null,0);return P.stateNode=B,P}function So(B,P,$){return P=vn(4,B.children!==null?B.children:[],B.key,P),P.lanes=$,P.stateNode={containerInfo:B.containerInfo,pendingChildren:null,implementation:B.implementation},P}var xo=new WeakMap;function On(B,P){if(typeof B=="object"&&B!==null){var $=xo.get(B);return $!==void 0?$:(P={value:B,source:P,stack:We(P)},xo.set(B,P),P)}return{value:B,source:P,stack:We(P)}}var Qn=[],Va=0,Ui=null,Gi=0,Tn=[],Ln=0,Da=null,Zn=1,Jn="";function va(B,P){Qn[Va++]=Gi,Qn[Va++]=Ui,Ui=B,Gi=P}function ji(B,P,$){Tn[Ln++]=Zn,Tn[Ln++]=Jn,Tn[Ln++]=Da,Da=B;var z=Zn;B=Jn;var Y=32-Ze(z)-1;z&=~(1<<Y),$+=1;var Z=32-Ze(P)+Y;if(30<Z){var fe=Y-Y%5;Z=(z&(1<<fe)-1).toString(32),z>>=fe,Y-=fe,Zn=1<<32-Ze(P)+Y|$<<Y|z,Jn=Z+B}else Zn=1<<Z|$<<Y|z,Jn=B}function Ki(B){B.return!==null&&(va(B,1),ji(B,1,0))}function wo(B){for(;B===Ui;)Ui=Qn[--Va],Qn[Va]=null,Gi=Qn[--Va],Qn[Va]=null;for(;B===Da;)Da=Tn[--Ln],Tn[Ln]=null,Jn=Tn[--Ln],Tn[Ln]=null,Zn=Tn[--Ln],Tn[Ln]=null}function El(B,P){Tn[Ln++]=Zn,Tn[Ln++]=Jn,Tn[Ln++]=Da,Zn=P.id,Jn=P.overflow,Da=B}var nn=null,mr=null,Qt=!1,ra=null,Cn=!1,_o=Error(R(519));function ma(B){var P=Error(R(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pn(On(P,B)),_o}function Rl(B){var P=B.stateNode,$=B.type,z=B.memoizedProps;switch(P[Tr]=B,P[zr]=z,$){case"dialog":er("cancel",P),er("close",P);break;case"iframe":case"object":case"embed":er("load",P);break;case"video":case"audio":for($=0;$<Go.length;$++)er(Go[$],P);break;case"source":er("error",P);break;case"img":case"image":case"link":er("error",P),er("load",P);break;case"details":er("toggle",P);break;case"input":er("invalid",P),cs(P,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0);break;case"select":er("invalid",P);break;case"textarea":er("invalid",P),tl(P,z.value,z.defaultValue,z.children)}$=z.children,typeof $!="string"&&typeof $!="number"&&typeof $!="bigint"||P.textContent===""+$||z.suppressHydrationWarning===!0||Qd(P.textContent,$)?(z.popover!=null&&(er("beforetoggle",P),er("toggle",P)),z.onScroll!=null&&er("scroll",P),z.onScrollEnd!=null&&er("scrollend",P),z.onClick!=null&&(P.onclick=ua),P=!0):P=!1,P||ma(B,!0)}function Tl(B){for(nn=B.return;nn;)switch(nn.tag){case 5:case 31:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:nn=nn.return}}function fi(B){if(B!==nn)return!1;if(!Qt)return Tl(B),Qt=!0,!1;var P=B.tag,$;if(($=P!==3&&P!==27)&&(($=P===5)&&($=B.type,$=!($!=="form"&&$!=="button")||wf(B.type,B.memoizedProps)),$=!$),$&&mr&&ma(B),Tl(B),P===13){if(B=B.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(R(317));mr=sp(B)}else if(P===31){if(B=B.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(R(317));mr=sp(B)}else P===27?(P=mr,Ei(B.type)?(B=Tf,Tf=null,mr=B):mr=P):mr=nn?ia(B.stateNode.nextSibling):null;return!0}function Ma(){mr=nn=null,Qt=!1}function hi(){var B=ra;return B!==null&&(Fn===null?Fn=B:Fn.push.apply(Fn,B),ra=null),B}function Pn(B){ra===null?ra=[B]:ra.push(B)}var Co=le(null),Un=null,ya=null;function na(B,P,$){Te(Co,P._currentValue),P._currentValue=$}function ba(B){B._currentValue=Co.current,me(Co)}function Pt(B,P,$){for(;B!==null;){var z=B.alternate;if((B.childLanes&P)!==P?(B.childLanes|=P,z!==null&&(z.childLanes|=P)):z!==null&&(z.childLanes&P)!==P&&(z.childLanes|=P),B===$)break;B=B.return}}function Eo(B,P,$,z){var Y=B.child;for(Y!==null&&(Y.return=B);Y!==null;){var Z=Y.dependencies;if(Z!==null){var fe=Y.child;Z=Z.firstContext;e:for(;Z!==null;){var Ce=Z;Z=Y;for(var Oe=0;Oe<P.length;Oe++)if(Ce.context===P[Oe]){Z.lanes|=$,Ce=Z.alternate,Ce!==null&&(Ce.lanes|=$),Pt(Z.return,$,B),z||(fe=null);break e}Z=Ce.next}}else if(Y.tag===18){if(fe=Y.return,fe===null)throw Error(R(341));fe.lanes|=$,Z=fe.alternate,Z!==null&&(Z.lanes|=$),Pt(fe,$,B),fe=null}else fe=Y.child;if(fe!==null)fe.return=Y;else for(fe=Y;fe!==null;){if(fe===B){fe=null;break}if(Y=fe.sibling,Y!==null){Y.return=fe.return,fe=Y;break}fe=fe.return}Y=fe}}function Ba(B,P,$,z){B=null;for(var Y=P,Z=!1;Y!==null;){if(!Z){if((Y.flags&524288)!==0)Z=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var fe=Y.alternate;if(fe===null)throw Error(R(387));if(fe=fe.memoizedProps,fe!==null){var Ce=Y.type;_n(Y.pendingProps.value,fe.value)||(B!==null?B.push(Ce):B=[Ce])}}else if(Y===ke.current){if(fe=Y.alternate,fe===null)throw Error(R(387));fe.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(B!==null?B.push(Xo):B=[Xo])}Y=Y.return}B!==null&&Eo(P,B,$,z),P.flags|=262144}function _s(B){for(B=B.firstContext;B!==null;){if(!_n(B.context._currentValue,B.memoizedValue))return!0;B=B.next}return!1}function Oa(B){Un=B,ya=null,B=B.dependencies,B!==null&&(B.firstContext=null)}function Hr(B){return Q(Un,B)}function Wi(B,P){return Un===null&&Oa(B),Q(B,P)}function Q(B,P){var $=P._currentValue;if(P={context:P,memoizedValue:$,next:null},ya===null){if(B===null)throw Error(R(308));ya=P,B.dependencies={lanes:0,firstContext:P},B.flags|=524288}else ya=ya.next=P;return $}var se=typeof AbortController<"u"?AbortController:function(){var B=[],P=this.signal={aborted:!1,addEventListener:function($,z){B.push(z)}};this.abort=function(){P.aborted=!0,B.forEach(function($){return $()})}},Se=_.unstable_scheduleCallback,xe=_.unstable_NormalPriority,Be={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xe(){return{controller:new se,data:new Map,refCount:0}}function Ut(B){B.refCount--,B.refCount===0&&Se(xe,function(){B.controller.abort()})}var Mr=null,uc=0,Cs=0,Es=null;function Dp(B,P){if(Mr===null){var $=Mr=[];uc=0,Cs=df(),Es={status:"pending",value:void 0,then:function(z){$.push(z)}}}return uc++,P.then(If,If),P}function If(){if(--uc===0&&Mr!==null){Es!==null&&(Es.status="fulfilled");var B=Mr;Mr=null,Cs=0,Es=null;for(var P=0;P<B.length;P++)(0,B[P])()}}function Mp(B,P){var $=[],z={status:"pending",value:null,reason:null,then:function(Y){$.push(Y)}};return B.then(function(){z.status="fulfilled",z.value=P;for(var Y=0;Y<$.length;Y++)(0,$[Y])(P)},function(Y){for(z.status="rejected",z.reason=Y,Y=0;Y<$.length;Y++)(0,$[Y])(void 0)}),z}var $f=ge.S;ge.S=function(B,P){xd=xt(),typeof P=="object"&&P!==null&&typeof P.then=="function"&&Dp(B,P),$f!==null&&$f(B,P)};var Yi=le(null);function cc(){var B=Yi.current;return B!==null?B:Cr.pooledCache}function Al(B,P){P===null?Te(Yi,Yi.current):Te(Yi,P.pool)}function Nf(){var B=cc();return B===null?null:{parent:Be._currentValue,pool:B}}var Rs=Error(R(460)),fc=Error(R(474)),kl=Error(R(542)),ql={then:function(){}};function Ff(B){return B=B.status,B==="fulfilled"||B==="rejected"}function zf(B,P,$){switch($=B[$],$===void 0?B.push(P):$!==P&&(P.then(ua,ua),P=$),P.status){case"fulfilled":return P.value;case"rejected":throw B=P.reason,Vf(B),B;default:if(typeof P.status=="string")P.then(ua,ua);else{if(B=Cr,B!==null&&100<B.shellSuspendCounter)throw Error(R(482));B=P,B.status="pending",B.then(function(z){if(P.status==="pending"){var Y=P;Y.status="fulfilled",Y.value=z}},function(z){if(P.status==="pending"){var Y=P;Y.status="rejected",Y.reason=z}})}switch(P.status){case"fulfilled":return P.value;case"rejected":throw B=P.reason,Vf(B),B}throw Qi=P,Rs}}function Xi(B){try{var P=B._init;return P(B._payload)}catch($){throw $!==null&&typeof $=="object"&&typeof $.then=="function"?(Qi=$,Rs):$}}var Qi=null;function Hf(){if(Qi===null)throw Error(R(459));var B=Qi;return Qi=null,B}function Vf(B){if(B===Rs||B===kl)throw Error(R(483))}var Ts=null,Ro=0;function Dl(B){var P=Ro;return Ro+=1,Ts===null&&(Ts=[]),zf(Ts,B,P)}function To(B,P){P=P.props.ref,B.ref=P!==void 0?P:null}function Ml(B,P){throw P.$$typeof===N?Error(R(525)):(B=Object.prototype.toString.call(P),Error(R(31,B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)))}function Uf(B){function P(He,$e){if(B){var je=He.deletions;je===null?(He.deletions=[$e],He.flags|=16):je.push($e)}}function $(He,$e){if(!B)return null;for(;$e!==null;)P(He,$e),$e=$e.sibling;return null}function z(He){for(var $e=new Map;He!==null;)He.key!==null?$e.set(He.key,He):$e.set(He.index,He),He=He.sibling;return $e}function Y(He,$e){return He=Bn(He,$e),He.index=0,He.sibling=null,He}function Z(He,$e,je){return He.index=je,B?(je=He.alternate,je!==null?(je=je.index,je<$e?(He.flags|=67108866,$e):je):(He.flags|=67108866,$e)):(He.flags|=1048576,$e)}function fe(He){return B&&He.alternate===null&&(He.flags|=67108866),He}function Ce(He,$e,je,ut){return $e===null||$e.tag!==6?($e=ws(je,He.mode,ut),$e.return=He,$e):($e=Y($e,je),$e.return=He,$e)}function Oe(He,$e,je,ut){var $t=je.type;return $t===G?at(He,$e,je.props.children,ut,je.key):$e!==null&&($e.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===ne&&Xi($t)===$e.type)?($e=Y($e,je.props),To($e,je),$e.return=He,$e):($e=xs(je.type,je.key,je.props,null,He.mode,ut),To($e,je),$e.return=He,$e)}function Ye(He,$e,je,ut){return $e===null||$e.tag!==4||$e.stateNode.containerInfo!==je.containerInfo||$e.stateNode.implementation!==je.implementation?($e=So(je,He.mode,ut),$e.return=He,$e):($e=Y($e,je.children||[]),$e.return=He,$e)}function at(He,$e,je,ut,$t){return $e===null||$e.tag!==7?($e=qa(je,He.mode,ut,$t),$e.return=He,$e):($e=Y($e,je),$e.return=He,$e)}function ct(He,$e,je){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return $e=ws(""+$e,He.mode,je),$e.return=He,$e;if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case F:return je=xs($e.type,$e.key,$e.props,null,He.mode,je),To(je,$e),je.return=He,je;case H:return $e=So($e,He.mode,je),$e.return=He,$e;case ne:return $e=Xi($e),ct(He,$e,je)}if(Ee($e)||de($e))return $e=qa($e,He.mode,je,null),$e.return=He,$e;if(typeof $e.then=="function")return ct(He,Dl($e),je);if($e.$$typeof===X)return ct(He,Wi(He,$e),je);Ml(He,$e)}return null}function Je(He,$e,je,ut){var $t=$e!==null?$e.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return $t!==null?null:Ce(He,$e,""+je,ut);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case F:return je.key===$t?Oe(He,$e,je,ut):null;case H:return je.key===$t?Ye(He,$e,je,ut):null;case ne:return je=Xi(je),Je(He,$e,je,ut)}if(Ee(je)||de(je))return $t!==null?null:at(He,$e,je,ut,null);if(typeof je.then=="function")return Je(He,$e,Dl(je),ut);if(je.$$typeof===X)return Je(He,$e,Wi(He,je),ut);Ml(He,je)}return null}function tt(He,$e,je,ut,$t){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return He=He.get(je)||null,Ce($e,He,""+ut,$t);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case F:return He=He.get(ut.key===null?je:ut.key)||null,Oe($e,He,ut,$t);case H:return He=He.get(ut.key===null?je:ut.key)||null,Ye($e,He,ut,$t);case ne:return ut=Xi(ut),tt(He,$e,je,ut,$t)}if(Ee(ut)||de(ut))return He=He.get(je)||null,at($e,He,ut,$t,null);if(typeof ut.then=="function")return tt(He,$e,je,Dl(ut),$t);if(ut.$$typeof===X)return tt(He,$e,je,Wi($e,ut),$t);Ml($e,ut)}return null}function Mt(He,$e,je,ut){for(var $t=null,cr=null,Bt=$e,Yt=$e=0,ar=null;Bt!==null&&Yt<je.length;Yt++){Bt.index>Yt?(ar=Bt,Bt=null):ar=Bt.sibling;var fr=Je(He,Bt,je[Yt],ut);if(fr===null){Bt===null&&(Bt=ar);break}B&&Bt&&fr.alternate===null&&P(He,Bt),$e=Z(fr,$e,Yt),cr===null?$t=fr:cr.sibling=fr,cr=fr,Bt=ar}if(Yt===je.length)return $(He,Bt),Qt&&va(He,Yt),$t;if(Bt===null){for(;Yt<je.length;Yt++)Bt=ct(He,je[Yt],ut),Bt!==null&&($e=Z(Bt,$e,Yt),cr===null?$t=Bt:cr.sibling=Bt,cr=Bt);return Qt&&va(He,Yt),$t}for(Bt=z(Bt);Yt<je.length;Yt++)ar=tt(Bt,He,Yt,je[Yt],ut),ar!==null&&(B&&ar.alternate!==null&&Bt.delete(ar.key===null?Yt:ar.key),$e=Z(ar,$e,Yt),cr===null?$t=ar:cr.sibling=ar,cr=ar);return B&&Bt.forEach(function(qi){return P(He,qi)}),Qt&&va(He,Yt),$t}function Ft(He,$e,je,ut){if(je==null)throw Error(R(151));for(var $t=null,cr=null,Bt=$e,Yt=$e=0,ar=null,fr=je.next();Bt!==null&&!fr.done;Yt++,fr=je.next()){Bt.index>Yt?(ar=Bt,Bt=null):ar=Bt.sibling;var qi=Je(He,Bt,fr.value,ut);if(qi===null){Bt===null&&(Bt=ar);break}B&&Bt&&qi.alternate===null&&P(He,Bt),$e=Z(qi,$e,Yt),cr===null?$t=qi:cr.sibling=qi,cr=qi,Bt=ar}if(fr.done)return $(He,Bt),Qt&&va(He,Yt),$t;if(Bt===null){for(;!fr.done;Yt++,fr=je.next())fr=ct(He,fr.value,ut),fr!==null&&($e=Z(fr,$e,Yt),cr===null?$t=fr:cr.sibling=fr,cr=fr);return Qt&&va(He,Yt),$t}for(Bt=z(Bt);!fr.done;Yt++,fr=je.next())fr=tt(Bt,He,Yt,fr.value,ut),fr!==null&&(B&&fr.alternate!==null&&Bt.delete(fr.key===null?Yt:fr.key),$e=Z(fr,$e,Yt),cr===null?$t=fr:cr.sibling=fr,cr=fr);return B&&Bt.forEach(function(Vg){return P(He,Vg)}),Qt&&va(He,Yt),$t}function wr(He,$e,je,ut){if(typeof je=="object"&&je!==null&&je.type===G&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case F:e:{for(var $t=je.key;$e!==null;){if($e.key===$t){if($t=je.type,$t===G){if($e.tag===7){$(He,$e.sibling),ut=Y($e,je.props.children),ut.return=He,He=ut;break e}}else if($e.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===ne&&Xi($t)===$e.type){$(He,$e.sibling),ut=Y($e,je.props),To(ut,je),ut.return=He,He=ut;break e}$(He,$e);break}else P(He,$e);$e=$e.sibling}je.type===G?(ut=qa(je.props.children,He.mode,ut,je.key),ut.return=He,He=ut):(ut=xs(je.type,je.key,je.props,null,He.mode,ut),To(ut,je),ut.return=He,He=ut)}return fe(He);case H:e:{for($t=je.key;$e!==null;){if($e.key===$t)if($e.tag===4&&$e.stateNode.containerInfo===je.containerInfo&&$e.stateNode.implementation===je.implementation){$(He,$e.sibling),ut=Y($e,je.children||[]),ut.return=He,He=ut;break e}else{$(He,$e);break}else P(He,$e);$e=$e.sibling}ut=So(je,He.mode,ut),ut.return=He,He=ut}return fe(He);case ne:return je=Xi(je),wr(He,$e,je,ut)}if(Ee(je))return Mt(He,$e,je,ut);if(de(je)){if($t=de(je),typeof $t!="function")throw Error(R(150));return je=$t.call(je),Ft(He,$e,je,ut)}if(typeof je.then=="function")return wr(He,$e,Dl(je),ut);if(je.$$typeof===X)return wr(He,$e,Wi(He,je),ut);Ml(He,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,$e!==null&&$e.tag===6?($(He,$e.sibling),ut=Y($e,je),ut.return=He,He=ut):($(He,$e),ut=ws(je,He.mode,ut),ut.return=He,He=ut),fe(He)):$(He,$e)}return function(He,$e,je,ut){try{Ro=0;var $t=wr(He,$e,je,ut);return Ts=null,$t}catch(Bt){if(Bt===Rs||Bt===kl)throw Bt;var cr=vn(29,Bt,null,He.mode);return cr.lanes=ut,cr.return=He,cr}finally{}}}var Zi=Uf(!0),Gf=Uf(!1),di=!1;function hc(B){B.updateQueue={baseState:B.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(B,P){B=B.updateQueue,P.updateQueue===B&&(P.updateQueue={baseState:B.baseState,firstBaseUpdate:B.firstBaseUpdate,lastBaseUpdate:B.lastBaseUpdate,shared:B.shared,callbacks:null})}function pi(B){return{lane:B,tag:0,payload:null,callback:null,next:null}}function gi(B,P,$){var z=B.updateQueue;if(z===null)return null;if(z=z.shared,(hr&2)!==0){var Y=z.pending;return Y===null?P.next=P:(P.next=Y.next,Y.next=P),z.pending=P,P=hn(B),Cl(B,null,$),P}return ui(B,z,P,$),hn(B)}function Ao(B,P,$){if(P=P.updateQueue,P!==null&&(P=P.shared,($&4194048)!==0)){var z=P.lanes;z&=B.pendingLanes,$|=z,P.lanes=$,sr(B,$)}}function pc(B,P){var $=B.updateQueue,z=B.alternate;if(z!==null&&(z=z.updateQueue,$===z)){var Y=null,Z=null;if($=$.firstBaseUpdate,$!==null){do{var fe={lane:$.lane,tag:$.tag,payload:$.payload,callback:null,next:null};Z===null?Y=Z=fe:Z=Z.next=fe,$=$.next}while($!==null);Z===null?Y=Z=P:Z=Z.next=P}else Y=Z=P;$={baseState:z.baseState,firstBaseUpdate:Y,lastBaseUpdate:Z,shared:z.shared,callbacks:z.callbacks},B.updateQueue=$;return}B=$.lastBaseUpdate,B===null?$.firstBaseUpdate=P:B.next=P,$.lastBaseUpdate=P}var gc=!1;function ko(){if(gc){var B=Es;if(B!==null)throw B}}function qo(B,P,$,z){gc=!1;var Y=B.updateQueue;di=!1;var Z=Y.firstBaseUpdate,fe=Y.lastBaseUpdate,Ce=Y.shared.pending;if(Ce!==null){Y.shared.pending=null;var Oe=Ce,Ye=Oe.next;Oe.next=null,fe===null?Z=Ye:fe.next=Ye,fe=Oe;var at=B.alternate;at!==null&&(at=at.updateQueue,Ce=at.lastBaseUpdate,Ce!==fe&&(Ce===null?at.firstBaseUpdate=Ye:Ce.next=Ye,at.lastBaseUpdate=Oe))}if(Z!==null){var ct=Y.baseState;fe=0,at=Ye=Oe=null,Ce=Z;do{var Je=Ce.lane&-536870913,tt=Je!==Ce.lane;if(tt?(nr&Je)===Je:(z&Je)===Je){Je!==0&&Je===Cs&&(gc=!0),at!==null&&(at=at.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var Mt=B,Ft=Ce;Je=P;var wr=$;switch(Ft.tag){case 1:if(Mt=Ft.payload,typeof Mt=="function"){ct=Mt.call(wr,ct,Je);break e}ct=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ft.payload,Je=typeof Mt=="function"?Mt.call(wr,ct,Je):Mt,Je==null)break e;ct=I({},ct,Je);break e;case 2:di=!0}}Je=Ce.callback,Je!==null&&(B.flags|=64,tt&&(B.flags|=8192),tt=Y.callbacks,tt===null?Y.callbacks=[Je]:tt.push(Je))}else tt={lane:Je,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},at===null?(Ye=at=tt,Oe=ct):at=at.next=tt,fe|=Je;if(Ce=Ce.next,Ce===null){if(Ce=Y.shared.pending,Ce===null)break;tt=Ce,Ce=tt.next,tt.next=null,Y.lastBaseUpdate=tt,Y.shared.pending=null}}while(!0);at===null&&(Oe=ct),Y.baseState=Oe,Y.firstBaseUpdate=Ye,Y.lastBaseUpdate=at,Z===null&&(Y.shared.lanes=0),Si|=fe,B.lanes=fe,B.memoizedState=ct}}function jf(B,P){if(typeof B!="function")throw Error(R(191,B));B.call(P)}function Kf(B,P){var $=B.callbacks;if($!==null)for(B.callbacks=null,B=0;B<$.length;B++)jf($[B],P)}var As=le(null),Bl=le(0);function Wf(B,P){B=Za,Te(Bl,B),Te(As,P),Za=B|P.baseLanes}function vc(){Te(Bl,Za),Te(As,As.current)}function mc(){Za=Bl.current,me(As),me(Bl)}var Gn=le(null),aa=null;function vi(B){var P=B.alternate;Te(Vr,Vr.current&1),Te(Gn,B),aa===null&&(P===null||As.current!==null||P.memoizedState!==null)&&(aa=B)}function yc(B){Te(Vr,Vr.current),Te(Gn,B),aa===null&&(aa=B)}function Yf(B){B.tag===22?(Te(Vr,Vr.current),Te(Gn,B),aa===null&&(aa=B)):mi()}function mi(){Te(Vr,Vr.current),Te(Gn,Gn.current)}function jn(B){me(Gn),aa===B&&(aa=null),me(Vr)}var Vr=le(0);function Ol(B){for(var P=B;P!==null;){if(P.tag===13){var $=P.memoizedState;if($!==null&&($=$.dehydrated,$===null||Ef($)||Rf($)))return P}else if(P.tag===19&&(P.memoizedProps.revealOrder==="forwards"||P.memoizedProps.revealOrder==="backwards"||P.memoizedProps.revealOrder==="unstable_legacy-backwards"||P.memoizedProps.revealOrder==="together")){if((P.flags&128)!==0)return P}else if(P.child!==null){P.child.return=P,P=P.child;continue}if(P===B)break;for(;P.sibling===null;){if(P.return===null||P.return===B)return null;P=P.return}P.sibling.return=P.return,P=P.sibling}return null}var Ua=0,Wt=null,br=null,sn=null,Ll=!1,ks=!1,Ji=!1,Pl=0,Do=0,qs=null,Bp=0;function Ir(){throw Error(R(321))}function bc(B,P){if(P===null)return!1;for(var $=0;$<P.length&&$<B.length;$++)if(!_n(B[$],P[$]))return!1;return!0}function Sc(B,P,$,z,Y,Z){return Ua=Z,Wt=P,P.memoizedState=null,P.updateQueue=null,P.lanes=0,ge.H=B===null||B.memoizedState===null?Mh:Lc,Ji=!1,Z=$(z,Y),Ji=!1,ks&&(Z=Qf(P,$,z,Y)),Xf(B),Z}function Xf(B){ge.H=Oo;var P=br!==null&&br.next!==null;if(Ua=0,sn=br=Wt=null,Ll=!1,Do=0,qs=null,P)throw Error(R(300));B===null||on||(B=B.dependencies,B!==null&&_s(B)&&(on=!0))}function Qf(B,P,$,z){Wt=B;var Y=0;do{if(ks&&(qs=null),Do=0,ks=!1,25<=Y)throw Error(R(301));if(Y+=1,sn=br=null,B.updateQueue!=null){var Z=B.updateQueue;Z.lastEffect=null,Z.events=null,Z.stores=null,Z.memoCache!=null&&(Z.memoCache.index=0)}ge.H=Bh,Z=P($,z)}while(ks);return Z}function Op(){var B=ge.H,P=B.useState()[0];return P=typeof P.then=="function"?Mo(P):P,B=B.useState()[0],(br!==null?br.memoizedState:null)!==B&&(Wt.flags|=1024),P}function xc(){var B=Pl!==0;return Pl=0,B}function wc(B,P,$){P.updateQueue=B.updateQueue,P.flags&=-2053,B.lanes&=~$}function _c(B){if(Ll){for(B=B.memoizedState;B!==null;){var P=B.queue;P!==null&&(P.pending=null),B=B.next}Ll=!1}Ua=0,sn=br=Wt=null,ks=!1,Do=Pl=0,qs=null}function An(){var B={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Wt.memoizedState=sn=B:sn=sn.next=B,sn}function Ur(){if(br===null){var B=Wt.alternate;B=B!==null?B.memoizedState:null}else B=br.next;var P=sn===null?Wt.memoizedState:sn.next;if(P!==null)sn=P,br=B;else{if(B===null)throw Wt.alternate===null?Error(R(467)):Error(R(310));br=B,B={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},sn===null?Wt.memoizedState=sn=B:sn=sn.next=B}return sn}function Il(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(B){var P=Do;return Do+=1,qs===null&&(qs=[]),B=zf(qs,B,P),P=Wt,(sn===null?P.memoizedState:sn.next)===null&&(P=P.alternate,ge.H=P===null||P.memoizedState===null?Mh:Lc),B}function $l(B){if(B!==null&&typeof B=="object"){if(typeof B.then=="function")return Mo(B);if(B.$$typeof===X)return Hr(B)}throw Error(R(438,String(B)))}function Cc(B){var P=null,$=Wt.updateQueue;if($!==null&&(P=$.memoCache),P==null){var z=Wt.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(P={data:z.data.map(function(Y){return Y.slice()}),index:0})))}if(P==null&&(P={data:[],index:0}),$===null&&($=Il(),Wt.updateQueue=$),$.memoCache=P,$=P.data[P.index],$===void 0)for($=P.data[P.index]=Array(B),z=0;z<B;z++)$[z]=ue;return P.index++,$}function Ga(B,P){return typeof P=="function"?P(B):P}function Nl(B){var P=Ur();return Ec(P,br,B)}function Ec(B,P,$){var z=B.queue;if(z===null)throw Error(R(311));z.lastRenderedReducer=$;var Y=B.baseQueue,Z=z.pending;if(Z!==null){if(Y!==null){var fe=Y.next;Y.next=Z.next,Z.next=fe}P.baseQueue=Y=Z,z.pending=null}if(Z=B.baseState,Y===null)B.memoizedState=Z;else{P=Y.next;var Ce=fe=null,Oe=null,Ye=P,at=!1;do{var ct=Ye.lane&-536870913;if(ct!==Ye.lane?(nr&ct)===ct:(Ua&ct)===ct){var Je=Ye.revertLane;if(Je===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),ct===Cs&&(at=!0);else if((Ua&Je)===Je){Ye=Ye.next,Je===Cs&&(at=!0);continue}else ct={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Oe===null?(Ce=Oe=ct,fe=Z):Oe=Oe.next=ct,Wt.lanes|=Je,Si|=Je;ct=Ye.action,Ji&&$(Z,ct),Z=Ye.hasEagerState?Ye.eagerState:$(Z,ct)}else Je={lane:ct,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Oe===null?(Ce=Oe=Je,fe=Z):Oe=Oe.next=Je,Wt.lanes|=ct,Si|=ct;Ye=Ye.next}while(Ye!==null&&Ye!==P);if(Oe===null?fe=Z:Oe.next=Ce,!_n(Z,B.memoizedState)&&(on=!0,at&&($=Es,$!==null)))throw $;B.memoizedState=Z,B.baseState=fe,B.baseQueue=Oe,z.lastRenderedState=Z}return Y===null&&(z.lanes=0),[B.memoizedState,z.dispatch]}function Rc(B){var P=Ur(),$=P.queue;if($===null)throw Error(R(311));$.lastRenderedReducer=B;var z=$.dispatch,Y=$.pending,Z=P.memoizedState;if(Y!==null){$.pending=null;var fe=Y=Y.next;do Z=B(Z,fe.action),fe=fe.next;while(fe!==Y);_n(Z,P.memoizedState)||(on=!0),P.memoizedState=Z,P.baseQueue===null&&(P.baseState=Z),$.lastRenderedState=Z}return[Z,z]}function Zf(B,P,$){var z=Wt,Y=Ur(),Z=Qt;if(Z){if($===void 0)throw Error(R(407));$=$()}else $=P();var fe=!_n((br||Y).memoizedState,$);if(fe&&(Y.memoizedState=$,on=!0),Y=Y.queue,kc(th.bind(null,z,Y,B),[B]),Y.getSnapshot!==P||fe||sn!==null&&sn.memoizedState.tag&1){if(z.flags|=2048,Ds(9,{destroy:void 0},eh.bind(null,z,Y,$,P),null),Cr===null)throw Error(R(349));Z||(Ua&127)!==0||Jf(z,P,$)}return $}function Jf(B,P,$){B.flags|=16384,B={getSnapshot:P,value:$},P=Wt.updateQueue,P===null?(P=Il(),Wt.updateQueue=P,P.stores=[B]):($=P.stores,$===null?P.stores=[B]:$.push(B))}function eh(B,P,$,z){P.value=$,P.getSnapshot=z,rh(P)&&nh(B)}function th(B,P,$){return $(function(){rh(P)&&nh(B)})}function rh(B){var P=B.getSnapshot;B=B.value;try{var $=P();return!_n(B,$)}catch{return!0}}function nh(B){var P=za(B,2);P!==null&&zn(P,B,2)}function Tc(B){var P=An();if(typeof B=="function"){var $=B;if(B=$(),Ji){Ge(!0);try{$()}finally{Ge(!1)}}}return P.memoizedState=P.baseState=B,P.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:B},P}function ah(B,P,$,z){return B.baseState=$,Ec(B,br,typeof z=="function"?z:Ga)}function Lp(B,P,$,z,Y){if(Hl(B))throw Error(R(485));if(B=P.action,B!==null){var Z={payload:Y,action:B,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(fe){Z.listeners.push(fe)}};ge.T!==null?$(!0):Z.isTransition=!1,z(Z),$=P.pending,$===null?(Z.next=P.pending=Z,ih(P,Z)):(Z.next=$.next,P.pending=$.next=Z)}}function ih(B,P){var $=P.action,z=P.payload,Y=B.state;if(P.isTransition){var Z=ge.T,fe={};ge.T=fe;try{var Ce=$(Y,z),Oe=ge.S;Oe!==null&&Oe(fe,Ce),sh(B,P,Ce)}catch(Ye){Ac(B,P,Ye)}finally{Z!==null&&fe.types!==null&&(Z.types=fe.types),ge.T=Z}}else try{Z=$(Y,z),sh(B,P,Z)}catch(Ye){Ac(B,P,Ye)}}function sh(B,P,$){$!==null&&typeof $=="object"&&typeof $.then=="function"?$.then(function(z){oh(B,P,z)},function(z){return Ac(B,P,z)}):oh(B,P,$)}function oh(B,P,$){P.status="fulfilled",P.value=$,lh(P),B.state=$,P=B.pending,P!==null&&($=P.next,$===P?B.pending=null:($=$.next,P.next=$,ih(B,$)))}function Ac(B,P,$){var z=B.pending;if(B.pending=null,z!==null){z=z.next;do P.status="rejected",P.reason=$,lh(P),P=P.next;while(P!==z)}B.action=null}function lh(B){B=B.listeners;for(var P=0;P<B.length;P++)(0,B[P])()}function uh(B,P){return P}function ch(B,P){if(Qt){var $=Cr.formState;if($!==null){e:{var z=Wt;if(Qt){if(mr){t:{for(var Y=mr,Z=Cn;Y.nodeType!==8;){if(!Z){Y=null;break t}if(Y=ia(Y.nextSibling),Y===null){Y=null;break t}}Z=Y.data,Y=Z==="F!"||Z==="F"?Y:null}if(Y){mr=ia(Y.nextSibling),z=Y.data==="F!";break e}}ma(z)}z=!1}z&&(P=$[0])}}return $=An(),$.memoizedState=$.baseState=P,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:P},$.queue=z,$=kh.bind(null,Wt,z),z.dispatch=$,z=Tc(!1),Z=Oc.bind(null,Wt,!1,z.queue),z=An(),Y={state:P,dispatch:null,action:B,pending:null},z.queue=Y,$=Lp.bind(null,Wt,Y,Z,$),Y.dispatch=$,z.memoizedState=B,[P,$,!1]}function fh(B){var P=Ur();return hh(P,br,B)}function hh(B,P,$){if(P=Ec(B,P,uh)[0],B=Nl(Ga)[0],typeof P=="object"&&P!==null&&typeof P.then=="function")try{var z=Mo(P)}catch(fe){throw fe===Rs?kl:fe}else z=P;P=Ur();var Y=P.queue,Z=Y.dispatch;return $!==P.memoizedState&&(Wt.flags|=2048,Ds(9,{destroy:void 0},Pp.bind(null,Y,$),null)),[z,Z,B]}function Pp(B,P){B.action=P}function dh(B){var P=Ur(),$=br;if($!==null)return hh(P,$,B);Ur(),P=P.memoizedState,$=Ur();var z=$.queue.dispatch;return $.memoizedState=B,[P,z,!1]}function Ds(B,P,$,z){return B={tag:B,create:$,deps:z,inst:P,next:null},P=Wt.updateQueue,P===null&&(P=Il(),Wt.updateQueue=P),$=P.lastEffect,$===null?P.lastEffect=B.next=B:(z=$.next,$.next=B,B.next=z,P.lastEffect=B),B}function ph(){return Ur().memoizedState}function Fl(B,P,$,z){var Y=An();Wt.flags|=B,Y.memoizedState=Ds(1|P,{destroy:void 0},$,z===void 0?null:z)}function zl(B,P,$,z){var Y=Ur();z=z===void 0?null:z;var Z=Y.memoizedState.inst;br!==null&&z!==null&&bc(z,br.memoizedState.deps)?Y.memoizedState=Ds(P,Z,$,z):(Wt.flags|=B,Y.memoizedState=Ds(1|P,Z,$,z))}function gh(B,P){Fl(8390656,8,B,P)}function kc(B,P){zl(2048,8,B,P)}function Ip(B){Wt.flags|=4;var P=Wt.updateQueue;if(P===null)P=Il(),Wt.updateQueue=P,P.events=[B];else{var $=P.events;$===null?P.events=[B]:$.push(B)}}function vh(B){var P=Ur().memoizedState;return Ip({ref:P,nextImpl:B}),function(){if((hr&2)!==0)throw Error(R(440));return P.impl.apply(void 0,arguments)}}function mh(B,P){return zl(4,2,B,P)}function yh(B,P){return zl(4,4,B,P)}function bh(B,P){if(typeof P=="function"){B=B();var $=P(B);return function(){typeof $=="function"?$():P(null)}}if(P!=null)return B=B(),P.current=B,function(){P.current=null}}function Sh(B,P,$){$=$!=null?$.concat([B]):null,zl(4,4,bh.bind(null,P,B),$)}function qc(){}function xh(B,P){var $=Ur();P=P===void 0?null:P;var z=$.memoizedState;return P!==null&&bc(P,z[1])?z[0]:($.memoizedState=[B,P],B)}function wh(B,P){var $=Ur();P=P===void 0?null:P;var z=$.memoizedState;if(P!==null&&bc(P,z[1]))return z[0];if(z=B(),Ji){Ge(!0);try{B()}finally{Ge(!1)}}return $.memoizedState=[z,P],z}function Dc(B,P,$){return $===void 0||(Ua&1073741824)!==0&&(nr&261930)===0?B.memoizedState=P:(B.memoizedState=$,B=_d(),Wt.lanes|=B,Si|=B,$)}function _h(B,P,$,z){return _n($,P)?$:As.current!==null?(B=Dc(B,$,z),_n(B,P)||(on=!0),B):(Ua&42)===0||(Ua&1073741824)!==0&&(nr&261930)===0?(on=!0,B.memoizedState=$):(B=_d(),Wt.lanes|=B,Si|=B,P)}function Ch(B,P,$,z,Y){var Z=be.p;be.p=Z!==0&&8>Z?Z:8;var fe=ge.T,Ce={};ge.T=Ce,Oc(B,!1,P,$);try{var Oe=Y(),Ye=ge.S;if(Ye!==null&&Ye(Ce,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var at=Mp(Oe,z);Bo(B,P,at,Yn(B))}else Bo(B,P,z,Yn(B))}catch(ct){Bo(B,P,{then:function(){},status:"rejected",reason:ct},Yn())}finally{be.p=Z,fe!==null&&Ce.types!==null&&(fe.types=Ce.types),ge.T=fe}}function $p(){}function Mc(B,P,$,z){if(B.tag!==5)throw Error(R(476));var Y=Eh(B).queue;Ch(B,Y,P,Ae,$===null?$p:function(){return Rh(B),$(z)})}function Eh(B){var P=B.memoizedState;if(P!==null)return P;P={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:Ae},next:null};var $={};return P.next={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:$},next:null},B.memoizedState=P,B=B.alternate,B!==null&&(B.memoizedState=P),P}function Rh(B){var P=Eh(B);P.next===null&&(P=B.alternate.memoizedState),Bo(B,P.next.queue,{},Yn())}function Bc(){return Hr(Xo)}function Th(){return Ur().memoizedState}function Ah(){return Ur().memoizedState}function Np(B){for(var P=B.return;P!==null;){switch(P.tag){case 24:case 3:var $=Yn();B=pi($);var z=gi(P,B,$);z!==null&&(zn(z,P,$),Ao(z,P,$)),P={cache:Xe()},B.payload=P;return}P=P.return}}function Fp(B,P,$){var z=Yn();$={lane:z,revertLane:0,gesture:null,action:$,hasEagerState:!1,eagerState:null,next:null},Hl(B)?qh(P,$):($=yo(B,P,$,z),$!==null&&(zn($,B,z),Dh($,P,z)))}function kh(B,P,$){var z=Yn();Bo(B,P,$,z)}function Bo(B,P,$,z){var Y={lane:z,revertLane:0,gesture:null,action:$,hasEagerState:!1,eagerState:null,next:null};if(Hl(B))qh(P,Y);else{var Z=B.alternate;if(B.lanes===0&&(Z===null||Z.lanes===0)&&(Z=P.lastRenderedReducer,Z!==null))try{var fe=P.lastRenderedState,Ce=Z(fe,$);if(Y.hasEagerState=!0,Y.eagerState=Ce,_n(Ce,fe))return ui(B,P,Y,0),Cr===null&&li(),!1}catch{}finally{}if($=yo(B,P,Y,z),$!==null)return zn($,B,z),Dh($,P,z),!0}return!1}function Oc(B,P,$,z){if(z={lane:2,revertLane:df(),gesture:null,action:z,hasEagerState:!1,eagerState:null,next:null},Hl(B)){if(P)throw Error(R(479))}else P=yo(B,$,z,2),P!==null&&zn(P,B,2)}function Hl(B){var P=B.alternate;return B===Wt||P!==null&&P===Wt}function qh(B,P){ks=Ll=!0;var $=B.pending;$===null?P.next=P:(P.next=$.next,$.next=P),B.pending=P}function Dh(B,P,$){if(($&4194048)!==0){var z=P.lanes;z&=B.pendingLanes,$|=z,P.lanes=$,sr(B,$)}}var Oo={readContext:Hr,use:$l,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useLayoutEffect:Ir,useInsertionEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useSyncExternalStore:Ir,useId:Ir,useHostTransitionStatus:Ir,useFormState:Ir,useActionState:Ir,useOptimistic:Ir,useMemoCache:Ir,useCacheRefresh:Ir};Oo.useEffectEvent=Ir;var Mh={readContext:Hr,use:$l,useCallback:function(B,P){return An().memoizedState=[B,P===void 0?null:P],B},useContext:Hr,useEffect:gh,useImperativeHandle:function(B,P,$){$=$!=null?$.concat([B]):null,Fl(4194308,4,bh.bind(null,P,B),$)},useLayoutEffect:function(B,P){return Fl(4194308,4,B,P)},useInsertionEffect:function(B,P){Fl(4,2,B,P)},useMemo:function(B,P){var $=An();P=P===void 0?null:P;var z=B();if(Ji){Ge(!0);try{B()}finally{Ge(!1)}}return $.memoizedState=[z,P],z},useReducer:function(B,P,$){var z=An();if($!==void 0){var Y=$(P);if(Ji){Ge(!0);try{$(P)}finally{Ge(!1)}}}else Y=P;return z.memoizedState=z.baseState=Y,B={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B,lastRenderedState:Y},z.queue=B,B=B.dispatch=Fp.bind(null,Wt,B),[z.memoizedState,B]},useRef:function(B){var P=An();return B={current:B},P.memoizedState=B},useState:function(B){B=Tc(B);var P=B.queue,$=kh.bind(null,Wt,P);return P.dispatch=$,[B.memoizedState,$]},useDebugValue:qc,useDeferredValue:function(B,P){var $=An();return Dc($,B,P)},useTransition:function(){var B=Tc(!1);return B=Ch.bind(null,Wt,B.queue,!0,!1),An().memoizedState=B,[!1,B]},useSyncExternalStore:function(B,P,$){var z=Wt,Y=An();if(Qt){if($===void 0)throw Error(R(407));$=$()}else{if($=P(),Cr===null)throw Error(R(349));(nr&127)!==0||Jf(z,P,$)}Y.memoizedState=$;var Z={value:$,getSnapshot:P};return Y.queue=Z,gh(th.bind(null,z,Z,B),[B]),z.flags|=2048,Ds(9,{destroy:void 0},eh.bind(null,z,Z,$,P),null),$},useId:function(){var B=An(),P=Cr.identifierPrefix;if(Qt){var $=Jn,z=Zn;$=(z&~(1<<32-Ze(z)-1)).toString(32)+$,P="_"+P+"R_"+$,$=Pl++,0<$&&(P+="H"+$.toString(32)),P+="_"}else $=Bp++,P="_"+P+"r_"+$.toString(32)+"_";return B.memoizedState=P},useHostTransitionStatus:Bc,useFormState:ch,useActionState:ch,useOptimistic:function(B){var P=An();P.memoizedState=P.baseState=B;var $={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return P.queue=$,P=Oc.bind(null,Wt,!0,$),$.dispatch=P,[B,P]},useMemoCache:Cc,useCacheRefresh:function(){return An().memoizedState=Np.bind(null,Wt)},useEffectEvent:function(B){var P=An(),$={impl:B};return P.memoizedState=$,function(){if((hr&2)!==0)throw Error(R(440));return $.impl.apply(void 0,arguments)}}},Lc={readContext:Hr,use:$l,useCallback:xh,useContext:Hr,useEffect:kc,useImperativeHandle:Sh,useInsertionEffect:mh,useLayoutEffect:yh,useMemo:wh,useReducer:Nl,useRef:ph,useState:function(){return Nl(Ga)},useDebugValue:qc,useDeferredValue:function(B,P){var $=Ur();return _h($,br.memoizedState,B,P)},useTransition:function(){var B=Nl(Ga)[0],P=Ur().memoizedState;return[typeof B=="boolean"?B:Mo(B),P]},useSyncExternalStore:Zf,useId:Th,useHostTransitionStatus:Bc,useFormState:fh,useActionState:fh,useOptimistic:function(B,P){var $=Ur();return ah($,br,B,P)},useMemoCache:Cc,useCacheRefresh:Ah};Lc.useEffectEvent=vh;var Bh={readContext:Hr,use:$l,useCallback:xh,useContext:Hr,useEffect:kc,useImperativeHandle:Sh,useInsertionEffect:mh,useLayoutEffect:yh,useMemo:wh,useReducer:Rc,useRef:ph,useState:function(){return Rc(Ga)},useDebugValue:qc,useDeferredValue:function(B,P){var $=Ur();return br===null?Dc($,B,P):_h($,br.memoizedState,B,P)},useTransition:function(){var B=Rc(Ga)[0],P=Ur().memoizedState;return[typeof B=="boolean"?B:Mo(B),P]},useSyncExternalStore:Zf,useId:Th,useHostTransitionStatus:Bc,useFormState:dh,useActionState:dh,useOptimistic:function(B,P){var $=Ur();return br!==null?ah($,br,B,P):($.baseState=B,[B,$.queue.dispatch])},useMemoCache:Cc,useCacheRefresh:Ah};Bh.useEffectEvent=vh;function Pc(B,P,$,z){P=B.memoizedState,$=$(z,P),$=$==null?P:I({},P,$),B.memoizedState=$,B.lanes===0&&(B.updateQueue.baseState=$)}var Ic={enqueueSetState:function(B,P,$){B=B._reactInternals;var z=Yn(),Y=pi(z);Y.payload=P,$!=null&&(Y.callback=$),P=gi(B,Y,z),P!==null&&(zn(P,B,z),Ao(P,B,z))},enqueueReplaceState:function(B,P,$){B=B._reactInternals;var z=Yn(),Y=pi(z);Y.tag=1,Y.payload=P,$!=null&&(Y.callback=$),P=gi(B,Y,z),P!==null&&(zn(P,B,z),Ao(P,B,z))},enqueueForceUpdate:function(B,P){B=B._reactInternals;var $=Yn(),z=pi($);z.tag=2,P!=null&&(z.callback=P),P=gi(B,z,$),P!==null&&(zn(P,B,$),Ao(P,B,$))}};function Oh(B,P,$,z,Y,Z,fe){return B=B.stateNode,typeof B.shouldComponentUpdate=="function"?B.shouldComponentUpdate(z,Z,fe):P.prototype&&P.prototype.isPureReactComponent?!Fi($,z)||!Fi(Y,Z):!0}function Lh(B,P,$,z){B=P.state,typeof P.componentWillReceiveProps=="function"&&P.componentWillReceiveProps($,z),typeof P.UNSAFE_componentWillReceiveProps=="function"&&P.UNSAFE_componentWillReceiveProps($,z),P.state!==B&&Ic.enqueueReplaceState(P,P.state,null)}function rs(B,P){var $=P;if("ref"in P){$={};for(var z in P)z!=="ref"&&($[z]=P[z])}if(B=B.defaultProps){$===P&&($=I({},$));for(var Y in B)$[Y]===void 0&&($[Y]=B[Y])}return $}function Ph(B){Vi(B)}function Ih(B){console.error(B)}function $h(B){Vi(B)}function Vl(B,P){try{var $=B.onUncaughtError;$(P.value,{componentStack:P.stack})}catch(z){setTimeout(function(){throw z})}}function Nh(B,P,$){try{var z=B.onCaughtError;z($.value,{componentStack:$.stack,errorBoundary:P.tag===1?P.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function $c(B,P,$){return $=pi($),$.tag=3,$.payload={element:null},$.callback=function(){Vl(B,P)},$}function Fh(B){return B=pi(B),B.tag=3,B}function zh(B,P,$,z){var Y=$.type.getDerivedStateFromError;if(typeof Y=="function"){var Z=z.value;B.payload=function(){return Y(Z)},B.callback=function(){Nh(P,$,z)}}var fe=$.stateNode;fe!==null&&typeof fe.componentDidCatch=="function"&&(B.callback=function(){Nh(P,$,z),typeof Y!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var Ce=z.stack;this.componentDidCatch(z.value,{componentStack:Ce!==null?Ce:""})})}function zp(B,P,$,z,Y){if($.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(P=$.alternate,P!==null&&Ba(P,$,Y,!0),$=Gn.current,$!==null){switch($.tag){case 31:case 13:return aa===null?su():$.alternate===null&&$r===0&&($r=3),$.flags&=-257,$.flags|=65536,$.lanes=Y,z===ql?$.flags|=16384:(P=$.updateQueue,P===null?$.updateQueue=new Set([z]):P.add(z),cf(B,z,Y)),!1;case 22:return $.flags|=65536,z===ql?$.flags|=16384:(P=$.updateQueue,P===null?(P={transitions:null,markerInstances:null,retryQueue:new Set([z])},$.updateQueue=P):($=P.retryQueue,$===null?P.retryQueue=new Set([z]):$.add(z)),cf(B,z,Y)),!1}throw Error(R(435,$.tag))}return cf(B,z,Y),su(),!1}if(Qt)return P=Gn.current,P!==null?((P.flags&65536)===0&&(P.flags|=256),P.flags|=65536,P.lanes=Y,z!==_o&&(B=Error(R(422),{cause:z}),Pn(On(B,$)))):(z!==_o&&(P=Error(R(423),{cause:z}),Pn(On(P,$))),B=B.current.alternate,B.flags|=65536,Y&=-Y,B.lanes|=Y,z=On(z,$),Y=$c(B.stateNode,z,Y),pc(B,Y),$r!==4&&($r=2)),!1;var Z=Error(R(520),{cause:z});if(Z=On(Z,$),Ho===null?Ho=[Z]:Ho.push(Z),$r!==4&&($r=2),P===null)return!0;z=On(z,$),$=P;do{switch($.tag){case 3:return $.flags|=65536,B=Y&-Y,$.lanes|=B,B=$c($.stateNode,z,B),pc($,B),!1;case 1:if(P=$.type,Z=$.stateNode,($.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(xi===null||!xi.has(Z))))return $.flags|=65536,Y&=-Y,$.lanes|=Y,Y=Fh(Y),zh(Y,B,$,z),pc($,Y),!1}$=$.return}while($!==null);return!1}var Nc=Error(R(461)),on=!1;function yn(B,P,$,z){P.child=B===null?Gf(P,null,$,z):Zi(P,B.child,$,z)}function Hh(B,P,$,z,Y){$=$.render;var Z=P.ref;if("ref"in z){var fe={};for(var Ce in z)Ce!=="ref"&&(fe[Ce]=z[Ce])}else fe=z;return Oa(P),z=Sc(B,P,$,fe,Z,Y),Ce=xc(),B!==null&&!on?(wc(B,P,Y),ja(B,P,Y)):(Qt&&Ce&&Ki(P),P.flags|=1,yn(B,P,z,Y),P.child)}function Vh(B,P,$,z,Y){if(B===null){var Z=$.type;return typeof Z=="function"&&!Ha(Z)&&Z.defaultProps===void 0&&$.compare===null?(P.tag=15,P.type=Z,Uh(B,P,Z,z,Y)):(B=xs($.type,null,z,P,P.mode,Y),B.ref=P.ref,B.return=P,P.child=B)}if(Z=B.child,!Kc(B,Y)){var fe=Z.memoizedProps;if($=$.compare,$=$!==null?$:Fi,$(fe,z)&&B.ref===P.ref)return ja(B,P,Y)}return P.flags|=1,B=Bn(Z,z),B.ref=P.ref,B.return=P,P.child=B}function Uh(B,P,$,z,Y){if(B!==null){var Z=B.memoizedProps;if(Fi(Z,z)&&B.ref===P.ref)if(on=!1,P.pendingProps=z=Z,Kc(B,Y))(B.flags&131072)!==0&&(on=!0);else return P.lanes=B.lanes,ja(B,P,Y)}return Fc(B,P,$,z,Y)}function Gh(B,P,$,z){var Y=z.children,Z=B!==null?B.memoizedState:null;if(B===null&&P.stateNode===null&&(P.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),z.mode==="hidden"){if((P.flags&128)!==0){if(Z=Z!==null?Z.baseLanes|$:$,B!==null){for(z=P.child=B.child,Y=0;z!==null;)Y=Y|z.lanes|z.childLanes,z=z.sibling;z=Y&~Z}else z=0,P.child=null;return jh(B,P,Z,$,z)}if(($&536870912)!==0)P.memoizedState={baseLanes:0,cachePool:null},B!==null&&Al(P,Z!==null?Z.cachePool:null),Z!==null?Wf(P,Z):vc(),Yf(P);else return z=P.lanes=536870912,jh(B,P,Z!==null?Z.baseLanes|$:$,$,z)}else Z!==null?(Al(P,Z.cachePool),Wf(P,Z),mi(),P.memoizedState=null):(B!==null&&Al(P,null),vc(),mi());return yn(B,P,Y,$),P.child}function Lo(B,P){return B!==null&&B.tag===22||P.stateNode!==null||(P.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),P.sibling}function jh(B,P,$,z,Y){var Z=cc();return Z=Z===null?null:{parent:Be._currentValue,pool:Z},P.memoizedState={baseLanes:$,cachePool:Z},B!==null&&Al(P,null),vc(),Yf(P),B!==null&&Ba(B,P,z,!0),P.childLanes=Y,null}function Ul(B,P){return P=jl({mode:P.mode,children:P.children},B.mode),P.ref=B.ref,B.child=P,P.return=B,P}function Kh(B,P,$){return Zi(P,B.child,null,$),B=Ul(P,P.pendingProps),B.flags|=2,jn(P),P.memoizedState=null,B}function Hp(B,P,$){var z=P.pendingProps,Y=(P.flags&128)!==0;if(P.flags&=-129,B===null){if(Qt){if(z.mode==="hidden")return B=Ul(P,z),P.lanes=536870912,Lo(null,B);if(yc(P),(B=mr)?(B=ip(B,Cn),B=B!==null&&B.data==="&"?B:null,B!==null&&(P.memoizedState={dehydrated:B,treeContext:Da!==null?{id:Zn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},$=ga(B),$.return=P,P.child=$,nn=P,mr=null)):B=null,B===null)throw ma(P);return P.lanes=536870912,null}return Ul(P,z)}var Z=B.memoizedState;if(Z!==null){var fe=Z.dehydrated;if(yc(P),Y)if(P.flags&256)P.flags&=-257,P=Kh(B,P,$);else if(P.memoizedState!==null)P.child=B.child,P.flags|=128,P=null;else throw Error(R(558));else if(on||Ba(B,P,$,!1),Y=($&B.childLanes)!==0,on||Y){if(z=Cr,z!==null&&(fe=rr(z,$),fe!==0&&fe!==Z.retryLane))throw Z.retryLane=fe,za(B,fe),zn(z,B,fe),Nc;su(),P=Kh(B,P,$)}else B=Z.treeContext,mr=ia(fe.nextSibling),nn=P,Qt=!0,ra=null,Cn=!1,B!==null&&El(P,B),P=Ul(P,z),P.flags|=4096;return P}return B=Bn(B.child,{mode:z.mode,children:z.children}),B.ref=P.ref,P.child=B,B.return=P,B}function Gl(B,P){var $=P.ref;if($===null)B!==null&&B.ref!==null&&(P.flags|=4194816);else{if(typeof $!="function"&&typeof $!="object")throw Error(R(284));(B===null||B.ref!==$)&&(P.flags|=4194816)}}function Fc(B,P,$,z,Y){return Oa(P),$=Sc(B,P,$,z,void 0,Y),z=xc(),B!==null&&!on?(wc(B,P,Y),ja(B,P,Y)):(Qt&&z&&Ki(P),P.flags|=1,yn(B,P,$,Y),P.child)}function Wh(B,P,$,z,Y,Z){return Oa(P),P.updateQueue=null,$=Qf(P,z,$,Y),Xf(B),z=xc(),B!==null&&!on?(wc(B,P,Z),ja(B,P,Z)):(Qt&&z&&Ki(P),P.flags|=1,yn(B,P,$,Z),P.child)}function Yh(B,P,$,z,Y){if(Oa(P),P.stateNode===null){var Z=ci,fe=$.contextType;typeof fe=="object"&&fe!==null&&(Z=Hr(fe)),Z=new $(z,Z),P.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Z.updater=Ic,P.stateNode=Z,Z._reactInternals=P,Z=P.stateNode,Z.props=z,Z.state=P.memoizedState,Z.refs={},hc(P),fe=$.contextType,Z.context=typeof fe=="object"&&fe!==null?Hr(fe):ci,Z.state=P.memoizedState,fe=$.getDerivedStateFromProps,typeof fe=="function"&&(Pc(P,$,fe,z),Z.state=P.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(fe=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),fe!==Z.state&&Ic.enqueueReplaceState(Z,Z.state,null),qo(P,z,Z,Y),ko(),Z.state=P.memoizedState),typeof Z.componentDidMount=="function"&&(P.flags|=4194308),z=!0}else if(B===null){Z=P.stateNode;var Ce=P.memoizedProps,Oe=rs($,Ce);Z.props=Oe;var Ye=Z.context,at=$.contextType;fe=ci,typeof at=="object"&&at!==null&&(fe=Hr(at));var ct=$.getDerivedStateFromProps;at=typeof ct=="function"||typeof Z.getSnapshotBeforeUpdate=="function",Ce=P.pendingProps!==Ce,at||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(Ce||Ye!==fe)&&Lh(P,Z,z,fe),di=!1;var Je=P.memoizedState;Z.state=Je,qo(P,z,Z,Y),ko(),Ye=P.memoizedState,Ce||Je!==Ye||di?(typeof ct=="function"&&(Pc(P,$,ct,z),Ye=P.memoizedState),(Oe=di||Oh(P,$,Oe,z,Je,Ye,fe))?(at||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(P.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(P.flags|=4194308),P.memoizedProps=z,P.memoizedState=Ye),Z.props=z,Z.state=Ye,Z.context=fe,z=Oe):(typeof Z.componentDidMount=="function"&&(P.flags|=4194308),z=!1)}else{Z=P.stateNode,dc(B,P),fe=P.memoizedProps,at=rs($,fe),Z.props=at,ct=P.pendingProps,Je=Z.context,Ye=$.contextType,Oe=ci,typeof Ye=="object"&&Ye!==null&&(Oe=Hr(Ye)),Ce=$.getDerivedStateFromProps,(Ye=typeof Ce=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(fe!==ct||Je!==Oe)&&Lh(P,Z,z,Oe),di=!1,Je=P.memoizedState,Z.state=Je,qo(P,z,Z,Y),ko();var tt=P.memoizedState;fe!==ct||Je!==tt||di||B!==null&&B.dependencies!==null&&_s(B.dependencies)?(typeof Ce=="function"&&(Pc(P,$,Ce,z),tt=P.memoizedState),(at=di||Oh(P,$,at,z,Je,tt,Oe)||B!==null&&B.dependencies!==null&&_s(B.dependencies))?(Ye||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(z,tt,Oe),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(z,tt,Oe)),typeof Z.componentDidUpdate=="function"&&(P.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(P.flags|=1024)):(typeof Z.componentDidUpdate!="function"||fe===B.memoizedProps&&Je===B.memoizedState||(P.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||fe===B.memoizedProps&&Je===B.memoizedState||(P.flags|=1024),P.memoizedProps=z,P.memoizedState=tt),Z.props=z,Z.state=tt,Z.context=Oe,z=at):(typeof Z.componentDidUpdate!="function"||fe===B.memoizedProps&&Je===B.memoizedState||(P.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||fe===B.memoizedProps&&Je===B.memoizedState||(P.flags|=1024),z=!1)}return Z=z,Gl(B,P),z=(P.flags&128)!==0,Z||z?(Z=P.stateNode,$=z&&typeof $.getDerivedStateFromError!="function"?null:Z.render(),P.flags|=1,B!==null&&z?(P.child=Zi(P,B.child,null,Y),P.child=Zi(P,null,$,Y)):yn(B,P,$,Y),P.memoizedState=Z.state,B=P.child):B=ja(B,P,Y),B}function Xh(B,P,$,z){return Ma(),P.flags|=256,yn(B,P,$,z),P.child}var zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hc(B){return{baseLanes:B,cachePool:Nf()}}function Vc(B,P,$){return B=B!==null?B.childLanes&~$:0,P&&(B|=Wn),B}function Qh(B,P,$){var z=P.pendingProps,Y=!1,Z=(P.flags&128)!==0,fe;if((fe=Z)||(fe=B!==null&&B.memoizedState===null?!1:(Vr.current&2)!==0),fe&&(Y=!0,P.flags&=-129),fe=(P.flags&32)!==0,P.flags&=-33,B===null){if(Qt){if(Y?vi(P):mi(),(B=mr)?(B=ip(B,Cn),B=B!==null&&B.data!=="&"?B:null,B!==null&&(P.memoizedState={dehydrated:B,treeContext:Da!==null?{id:Zn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},$=ga(B),$.return=P,P.child=$,nn=P,mr=null)):B=null,B===null)throw ma(P);return Rf(B)?P.lanes=32:P.lanes=536870912,null}var Ce=z.children;return z=z.fallback,Y?(mi(),Y=P.mode,Ce=jl({mode:"hidden",children:Ce},Y),z=qa(z,Y,$,null),Ce.return=P,z.return=P,Ce.sibling=z,P.child=Ce,z=P.child,z.memoizedState=Hc($),z.childLanes=Vc(B,fe,$),P.memoizedState=zc,Lo(null,z)):(vi(P),Uc(P,Ce))}var Oe=B.memoizedState;if(Oe!==null&&(Ce=Oe.dehydrated,Ce!==null)){if(Z)P.flags&256?(vi(P),P.flags&=-257,P=Gc(B,P,$)):P.memoizedState!==null?(mi(),P.child=B.child,P.flags|=128,P=null):(mi(),Ce=z.fallback,Y=P.mode,z=jl({mode:"visible",children:z.children},Y),Ce=qa(Ce,Y,$,null),Ce.flags|=2,z.return=P,Ce.return=P,z.sibling=Ce,P.child=z,Zi(P,B.child,null,$),z=P.child,z.memoizedState=Hc($),z.childLanes=Vc(B,fe,$),P.memoizedState=zc,P=Lo(null,z));else if(vi(P),Rf(Ce)){if(fe=Ce.nextSibling&&Ce.nextSibling.dataset,fe)var Ye=fe.dgst;fe=Ye,z=Error(R(419)),z.stack="",z.digest=fe,Pn({value:z,source:null,stack:null}),P=Gc(B,P,$)}else if(on||Ba(B,P,$,!1),fe=($&B.childLanes)!==0,on||fe){if(fe=Cr,fe!==null&&(z=rr(fe,$),z!==0&&z!==Oe.retryLane))throw Oe.retryLane=z,za(B,z),zn(fe,B,z),Nc;Ef(Ce)||su(),P=Gc(B,P,$)}else Ef(Ce)?(P.flags|=192,P.child=B.child,P=null):(B=Oe.treeContext,mr=ia(Ce.nextSibling),nn=P,Qt=!0,ra=null,Cn=!1,B!==null&&El(P,B),P=Uc(P,z.children),P.flags|=4096);return P}return Y?(mi(),Ce=z.fallback,Y=P.mode,Oe=B.child,Ye=Oe.sibling,z=Bn(Oe,{mode:"hidden",children:z.children}),z.subtreeFlags=Oe.subtreeFlags&65011712,Ye!==null?Ce=Bn(Ye,Ce):(Ce=qa(Ce,Y,$,null),Ce.flags|=2),Ce.return=P,z.return=P,z.sibling=Ce,P.child=z,Lo(null,z),z=P.child,Ce=B.child.memoizedState,Ce===null?Ce=Hc($):(Y=Ce.cachePool,Y!==null?(Oe=Be._currentValue,Y=Y.parent!==Oe?{parent:Oe,pool:Oe}:Y):Y=Nf(),Ce={baseLanes:Ce.baseLanes|$,cachePool:Y}),z.memoizedState=Ce,z.childLanes=Vc(B,fe,$),P.memoizedState=zc,Lo(B.child,z)):(vi(P),$=B.child,B=$.sibling,$=Bn($,{mode:"visible",children:z.children}),$.return=P,$.sibling=null,B!==null&&(fe=P.deletions,fe===null?(P.deletions=[B],P.flags|=16):fe.push(B)),P.child=$,P.memoizedState=null,$)}function Uc(B,P){return P=jl({mode:"visible",children:P},B.mode),P.return=B,B.child=P}function jl(B,P){return B=vn(22,B,null,P),B.lanes=0,B}function Gc(B,P,$){return Zi(P,B.child,null,$),B=Uc(P,P.pendingProps.children),B.flags|=2,P.memoizedState=null,B}function Zh(B,P,$){B.lanes|=P;var z=B.alternate;z!==null&&(z.lanes|=P),Pt(B.return,P,$)}function jc(B,P,$,z,Y,Z){var fe=B.memoizedState;fe===null?B.memoizedState={isBackwards:P,rendering:null,renderingStartTime:0,last:z,tail:$,tailMode:Y,treeForkCount:Z}:(fe.isBackwards=P,fe.rendering=null,fe.renderingStartTime=0,fe.last=z,fe.tail=$,fe.tailMode=Y,fe.treeForkCount=Z)}function Jh(B,P,$){var z=P.pendingProps,Y=z.revealOrder,Z=z.tail;z=z.children;var fe=Vr.current,Ce=(fe&2)!==0;if(Ce?(fe=fe&1|2,P.flags|=128):fe&=1,Te(Vr,fe),yn(B,P,z,$),z=Qt?Gi:0,!Ce&&B!==null&&(B.flags&128)!==0)e:for(B=P.child;B!==null;){if(B.tag===13)B.memoizedState!==null&&Zh(B,$,P);else if(B.tag===19)Zh(B,$,P);else if(B.child!==null){B.child.return=B,B=B.child;continue}if(B===P)break e;for(;B.sibling===null;){if(B.return===null||B.return===P)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}switch(Y){case"forwards":for($=P.child,Y=null;$!==null;)B=$.alternate,B!==null&&Ol(B)===null&&(Y=$),$=$.sibling;$=Y,$===null?(Y=P.child,P.child=null):(Y=$.sibling,$.sibling=null),jc(P,!1,Y,$,Z,z);break;case"backwards":case"unstable_legacy-backwards":for($=null,Y=P.child,P.child=null;Y!==null;){if(B=Y.alternate,B!==null&&Ol(B)===null){P.child=Y;break}B=Y.sibling,Y.sibling=$,$=Y,Y=B}jc(P,!0,$,null,Z,z);break;case"together":jc(P,!1,null,null,void 0,z);break;default:P.memoizedState=null}return P.child}function ja(B,P,$){if(B!==null&&(P.dependencies=B.dependencies),Si|=P.lanes,($&P.childLanes)===0)if(B!==null){if(Ba(B,P,$,!1),($&P.childLanes)===0)return null}else return null;if(B!==null&&P.child!==B.child)throw Error(R(153));if(P.child!==null){for(B=P.child,$=Bn(B,B.pendingProps),P.child=$,$.return=P;B.sibling!==null;)B=B.sibling,$=$.sibling=Bn(B,B.pendingProps),$.return=P;$.sibling=null}return P.child}function Kc(B,P){return(B.lanes&P)!==0?!0:(B=B.dependencies,!!(B!==null&&_s(B)))}function Vp(B,P,$){switch(P.tag){case 3:ze(P,P.stateNode.containerInfo),na(P,Be,B.memoizedState.cache),Ma();break;case 27:case 5:Pe(P);break;case 4:ze(P,P.stateNode.containerInfo);break;case 10:na(P,P.type,P.memoizedProps.value);break;case 31:if(P.memoizedState!==null)return P.flags|=128,yc(P),null;break;case 13:var z=P.memoizedState;if(z!==null)return z.dehydrated!==null?(vi(P),P.flags|=128,null):($&P.child.childLanes)!==0?Qh(B,P,$):(vi(P),B=ja(B,P,$),B!==null?B.sibling:null);vi(P);break;case 19:var Y=(B.flags&128)!==0;if(z=($&P.childLanes)!==0,z||(Ba(B,P,$,!1),z=($&P.childLanes)!==0),Y){if(z)return Jh(B,P,$);P.flags|=128}if(Y=P.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Te(Vr,Vr.current),z)break;return null;case 22:return P.lanes=0,Gh(B,P,$,P.pendingProps);case 24:na(P,Be,B.memoizedState.cache)}return ja(B,P,$)}function ed(B,P,$){if(B!==null)if(B.memoizedProps!==P.pendingProps)on=!0;else{if(!Kc(B,$)&&(P.flags&128)===0)return on=!1,Vp(B,P,$);on=(B.flags&131072)!==0}else on=!1,Qt&&(P.flags&1048576)!==0&&ji(P,Gi,P.index);switch(P.lanes=0,P.tag){case 16:e:{var z=P.pendingProps;if(B=Xi(P.elementType),P.type=B,typeof B=="function")Ha(B)?(z=rs(B,z),P.tag=1,P=Yh(null,P,B,z,$)):(P.tag=0,P=Fc(null,P,B,z,$));else{if(B!=null){var Y=B.$$typeof;if(Y===J){P.tag=11,P=Hh(null,P,B,z,$);break e}else if(Y===ee){P.tag=14,P=Vh(null,P,B,z,$);break e}}throw P=_e(B)||B,Error(R(306,P,""))}}return P;case 0:return Fc(B,P,P.type,P.pendingProps,$);case 1:return z=P.type,Y=rs(z,P.pendingProps),Yh(B,P,z,Y,$);case 3:e:{if(ze(P,P.stateNode.containerInfo),B===null)throw Error(R(387));z=P.pendingProps;var Z=P.memoizedState;Y=Z.element,dc(B,P),qo(P,z,null,$);var fe=P.memoizedState;if(z=fe.cache,na(P,Be,z),z!==Z.cache&&Eo(P,[Be],$,!0),ko(),z=fe.element,Z.isDehydrated)if(Z={element:z,isDehydrated:!1,cache:fe.cache},P.updateQueue.baseState=Z,P.memoizedState=Z,P.flags&256){P=Xh(B,P,z,$);break e}else if(z!==Y){Y=On(Error(R(424)),P),Pn(Y),P=Xh(B,P,z,$);break e}else{switch(B=P.stateNode.containerInfo,B.nodeType){case 9:B=B.body;break;default:B=B.nodeName==="HTML"?B.ownerDocument.body:B}for(mr=ia(B.firstChild),nn=P,Qt=!0,ra=null,Cn=!0,$=Gf(P,null,z,$),P.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling}else{if(Ma(),z===Y){P=ja(B,P,$);break e}yn(B,P,z,$)}P=P.child}return P;case 26:return Gl(B,P),B===null?($=fp(P.type,null,P.pendingProps,null))?P.memoizedState=$:Qt||($=P.type,B=P.pendingProps,z=du(qe.current).createElement($),z[Tr]=P,z[zr]=B,bn(z,$,B),Lr(z),P.stateNode=z):P.memoizedState=fp(P.type,B.memoizedProps,P.pendingProps,B.memoizedState),null;case 27:return Pe(P),B===null&&Qt&&(z=P.stateNode=lp(P.type,P.pendingProps,qe.current),nn=P,Cn=!0,Y=mr,Ei(P.type)?(Tf=Y,mr=ia(z.firstChild)):mr=Y),yn(B,P,P.pendingProps.children,$),Gl(B,P),B===null&&(P.flags|=4194304),P.child;case 5:return B===null&&Qt&&((Y=z=mr)&&(z=bg(z,P.type,P.pendingProps,Cn),z!==null?(P.stateNode=z,nn=P,mr=ia(z.firstChild),Cn=!1,Y=!0):Y=!1),Y||ma(P)),Pe(P),Y=P.type,Z=P.pendingProps,fe=B!==null?B.memoizedProps:null,z=Z.children,wf(Y,Z)?z=null:fe!==null&&wf(Y,fe)&&(P.flags|=32),P.memoizedState!==null&&(Y=Sc(B,P,Op,null,null,$),Xo._currentValue=Y),Gl(B,P),yn(B,P,z,$),P.child;case 6:return B===null&&Qt&&((B=$=mr)&&($=Sg($,P.pendingProps,Cn),$!==null?(P.stateNode=$,nn=P,mr=null,B=!0):B=!1),B||ma(P)),null;case 13:return Qh(B,P,$);case 4:return ze(P,P.stateNode.containerInfo),z=P.pendingProps,B===null?P.child=Zi(P,null,z,$):yn(B,P,z,$),P.child;case 11:return Hh(B,P,P.type,P.pendingProps,$);case 7:return yn(B,P,P.pendingProps,$),P.child;case 8:return yn(B,P,P.pendingProps.children,$),P.child;case 12:return yn(B,P,P.pendingProps.children,$),P.child;case 10:return z=P.pendingProps,na(P,P.type,z.value),yn(B,P,z.children,$),P.child;case 9:return Y=P.type._context,z=P.pendingProps.children,Oa(P),Y=Hr(Y),z=z(Y),P.flags|=1,yn(B,P,z,$),P.child;case 14:return Vh(B,P,P.type,P.pendingProps,$);case 15:return Uh(B,P,P.type,P.pendingProps,$);case 19:return Jh(B,P,$);case 31:return Hp(B,P,$);case 22:return Gh(B,P,$,P.pendingProps);case 24:return Oa(P),z=Hr(Be),B===null?(Y=cc(),Y===null&&(Y=Cr,Z=Xe(),Y.pooledCache=Z,Z.refCount++,Z!==null&&(Y.pooledCacheLanes|=$),Y=Z),P.memoizedState={parent:z,cache:Y},hc(P),na(P,Be,Y)):((B.lanes&$)!==0&&(dc(B,P),qo(P,null,null,$),ko()),Y=B.memoizedState,Z=P.memoizedState,Y.parent!==z?(Y={parent:z,cache:z},P.memoizedState=Y,P.lanes===0&&(P.memoizedState=P.updateQueue.baseState=Y),na(P,Be,z)):(z=Z.cache,na(P,Be,z),z!==Y.cache&&Eo(P,[Be],$,!0))),yn(B,P,P.pendingProps.children,$),P.child;case 29:throw P.pendingProps}throw Error(R(156,P.tag))}function Ka(B){B.flags|=4}function Wc(B,P,$,z,Y){if((P=(B.mode&32)!==0)&&(P=!1),P){if(B.flags|=16777216,(Y&335544128)===Y)if(B.stateNode.complete)B.flags|=8192;else if(Td())B.flags|=8192;else throw Qi=ql,fc}else B.flags&=-16777217}function td(B,P){if(P.type!=="stylesheet"||(P.state.loading&4)!==0)B.flags&=-16777217;else if(B.flags|=16777216,!vp(P))if(Td())B.flags|=8192;else throw Qi=ql,fc}function Wl(B,P){P!==null&&(B.flags|=4),B.flags&16384&&(P=B.tag!==22?It():536870912,B.lanes|=P,Ls|=P)}function Po(B,P){if(!Qt)switch(B.tailMode){case"hidden":P=B.tail;for(var $=null;P!==null;)P.alternate!==null&&($=P),P=P.sibling;$===null?B.tail=null:$.sibling=null;break;case"collapsed":$=B.tail;for(var z=null;$!==null;)$.alternate!==null&&(z=$),$=$.sibling;z===null?P||B.tail===null?B.tail=null:B.tail.sibling=null:z.sibling=null}}function Dr(B){var P=B.alternate!==null&&B.alternate.child===B.child,$=0,z=0;if(P)for(var Y=B.child;Y!==null;)$|=Y.lanes|Y.childLanes,z|=Y.subtreeFlags&65011712,z|=Y.flags&65011712,Y.return=B,Y=Y.sibling;else for(Y=B.child;Y!==null;)$|=Y.lanes|Y.childLanes,z|=Y.subtreeFlags,z|=Y.flags,Y.return=B,Y=Y.sibling;return B.subtreeFlags|=z,B.childLanes=$,P}function Up(B,P,$){var z=P.pendingProps;switch(wo(P),P.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(P),null;case 1:return Dr(P),null;case 3:return $=P.stateNode,z=null,B!==null&&(z=B.memoizedState.cache),P.memoizedState.cache!==z&&(P.flags|=2048),ba(Be),Ne(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(B===null||B.child===null)&&(fi(P)?Ka(P):B===null||B.memoizedState.isDehydrated&&(P.flags&256)===0||(P.flags|=1024,hi())),Dr(P),null;case 26:var Y=P.type,Z=P.memoizedState;return B===null?(Ka(P),Z!==null?(Dr(P),td(P,Z)):(Dr(P),Wc(P,Y,null,z,$))):Z?Z!==B.memoizedState?(Ka(P),Dr(P),td(P,Z)):(Dr(P),P.flags&=-16777217):(B=B.memoizedProps,B!==z&&Ka(P),Dr(P),Wc(P,Y,B,z,$)),null;case 27:if(Me(P),$=qe.current,Y=P.type,B!==null&&P.stateNode!=null)B.memoizedProps!==z&&Ka(P);else{if(!z){if(P.stateNode===null)throw Error(R(166));return Dr(P),null}B=ye.current,fi(P)?Rl(P):(B=lp(Y,z,$),P.stateNode=B,Ka(P))}return Dr(P),null;case 5:if(Me(P),Y=P.type,B!==null&&P.stateNode!=null)B.memoizedProps!==z&&Ka(P);else{if(!z){if(P.stateNode===null)throw Error(R(166));return Dr(P),null}if(Z=ye.current,fi(P))Rl(P);else{var fe=du(qe.current);switch(Z){case 1:Z=fe.createElementNS("http://www.w3.org/2000/svg",Y);break;case 2:Z=fe.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;default:switch(Y){case"svg":Z=fe.createElementNS("http://www.w3.org/2000/svg",Y);break;case"math":Z=fe.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;case"script":Z=fe.createElement("div"),Z.innerHTML="<script><\/script>",Z=Z.removeChild(Z.firstChild);break;case"select":Z=typeof z.is=="string"?fe.createElement("select",{is:z.is}):fe.createElement("select"),z.multiple?Z.multiple=!0:z.size&&(Z.size=z.size);break;default:Z=typeof z.is=="string"?fe.createElement(Y,{is:z.is}):fe.createElement(Y)}}Z[Tr]=P,Z[zr]=z;e:for(fe=P.child;fe!==null;){if(fe.tag===5||fe.tag===6)Z.appendChild(fe.stateNode);else if(fe.tag!==4&&fe.tag!==27&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===P)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===P)break e;fe=fe.return}fe.sibling.return=fe.return,fe=fe.sibling}P.stateNode=Z;e:switch(bn(Z,Y,z),Y){case"button":case"input":case"select":case"textarea":z=!!z.autoFocus;break e;case"img":z=!0;break e;default:z=!1}z&&Ka(P)}}return Dr(P),Wc(P,P.type,B===null?null:B.memoizedProps,P.pendingProps,$),null;case 6:if(B&&P.stateNode!=null)B.memoizedProps!==z&&Ka(P);else{if(typeof z!="string"&&P.stateNode===null)throw Error(R(166));if(B=qe.current,fi(P)){if(B=P.stateNode,$=P.memoizedProps,z=null,Y=nn,Y!==null)switch(Y.tag){case 27:case 5:z=Y.memoizedProps}B[Tr]=P,B=!!(B.nodeValue===$||z!==null&&z.suppressHydrationWarning===!0||Qd(B.nodeValue,$)),B||ma(P,!0)}else B=du(B).createTextNode(z),B[Tr]=P,P.stateNode=B}return Dr(P),null;case 31:if($=P.memoizedState,B===null||B.memoizedState!==null){if(z=fi(P),$!==null){if(B===null){if(!z)throw Error(R(318));if(B=P.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(R(557));B[Tr]=P}else Ma(),(P.flags&128)===0&&(P.memoizedState=null),P.flags|=4;Dr(P),B=!1}else $=hi(),B!==null&&B.memoizedState!==null&&(B.memoizedState.hydrationErrors=$),B=!0;if(!B)return P.flags&256?(jn(P),P):(jn(P),null);if((P.flags&128)!==0)throw Error(R(558))}return Dr(P),null;case 13:if(z=P.memoizedState,B===null||B.memoizedState!==null&&B.memoizedState.dehydrated!==null){if(Y=fi(P),z!==null&&z.dehydrated!==null){if(B===null){if(!Y)throw Error(R(318));if(Y=P.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(R(317));Y[Tr]=P}else Ma(),(P.flags&128)===0&&(P.memoizedState=null),P.flags|=4;Dr(P),Y=!1}else Y=hi(),B!==null&&B.memoizedState!==null&&(B.memoizedState.hydrationErrors=Y),Y=!0;if(!Y)return P.flags&256?(jn(P),P):(jn(P),null)}return jn(P),(P.flags&128)!==0?(P.lanes=$,P):($=z!==null,B=B!==null&&B.memoizedState!==null,$&&(z=P.child,Y=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(Y=z.alternate.memoizedState.cachePool.pool),Z=null,z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(Z=z.memoizedState.cachePool.pool),Z!==Y&&(z.flags|=2048)),$!==B&&$&&(P.child.flags|=8192),Wl(P,P.updateQueue),Dr(P),null);case 4:return Ne(),B===null&&mf(P.stateNode.containerInfo),Dr(P),null;case 10:return ba(P.type),Dr(P),null;case 19:if(me(Vr),z=P.memoizedState,z===null)return Dr(P),null;if(Y=(P.flags&128)!==0,Z=z.rendering,Z===null)if(Y)Po(z,!1);else{if($r!==0||B!==null&&(B.flags&128)!==0)for(B=P.child;B!==null;){if(Z=Ol(B),Z!==null){for(P.flags|=128,Po(z,!1),B=Z.updateQueue,P.updateQueue=B,Wl(P,B),P.subtreeFlags=0,B=$,$=P.child;$!==null;)bo($,B),$=$.sibling;return Te(Vr,Vr.current&1|2),Qt&&va(P,z.treeForkCount),P.child}B=B.sibling}z.tail!==null&&xt()>nu&&(P.flags|=128,Y=!0,Po(z,!1),P.lanes=4194304)}else{if(!Y)if(B=Ol(Z),B!==null){if(P.flags|=128,Y=!0,B=B.updateQueue,P.updateQueue=B,Wl(P,B),Po(z,!0),z.tail===null&&z.tailMode==="hidden"&&!Z.alternate&&!Qt)return Dr(P),null}else 2*xt()-z.renderingStartTime>nu&&$!==536870912&&(P.flags|=128,Y=!0,Po(z,!1),P.lanes=4194304);z.isBackwards?(Z.sibling=P.child,P.child=Z):(B=z.last,B!==null?B.sibling=Z:P.child=Z,z.last=Z)}return z.tail!==null?(B=z.tail,z.rendering=B,z.tail=B.sibling,z.renderingStartTime=xt(),B.sibling=null,$=Vr.current,Te(Vr,Y?$&1|2:$&1),Qt&&va(P,z.treeForkCount),B):(Dr(P),null);case 22:case 23:return jn(P),mc(),z=P.memoizedState!==null,B!==null?B.memoizedState!==null!==z&&(P.flags|=8192):z&&(P.flags|=8192),z?($&536870912)!==0&&(P.flags&128)===0&&(Dr(P),P.subtreeFlags&6&&(P.flags|=8192)):Dr(P),$=P.updateQueue,$!==null&&Wl(P,$.retryQueue),$=null,B!==null&&B.memoizedState!==null&&B.memoizedState.cachePool!==null&&($=B.memoizedState.cachePool.pool),z=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(z=P.memoizedState.cachePool.pool),z!==$&&(P.flags|=2048),B!==null&&me(Yi),null;case 24:return $=null,B!==null&&($=B.memoizedState.cache),P.memoizedState.cache!==$&&(P.flags|=2048),ba(Be),Dr(P),null;case 25:return null;case 30:return null}throw Error(R(156,P.tag))}function Gp(B,P){switch(wo(P),P.tag){case 1:return B=P.flags,B&65536?(P.flags=B&-65537|128,P):null;case 3:return ba(Be),Ne(),B=P.flags,(B&65536)!==0&&(B&128)===0?(P.flags=B&-65537|128,P):null;case 26:case 27:case 5:return Me(P),null;case 31:if(P.memoizedState!==null){if(jn(P),P.alternate===null)throw Error(R(340));Ma()}return B=P.flags,B&65536?(P.flags=B&-65537|128,P):null;case 13:if(jn(P),B=P.memoizedState,B!==null&&B.dehydrated!==null){if(P.alternate===null)throw Error(R(340));Ma()}return B=P.flags,B&65536?(P.flags=B&-65537|128,P):null;case 19:return me(Vr),null;case 4:return Ne(),null;case 10:return ba(P.type),null;case 22:case 23:return jn(P),mc(),B!==null&&me(Yi),B=P.flags,B&65536?(P.flags=B&-65537|128,P):null;case 24:return ba(Be),null;case 25:return null;default:return null}}function rd(B,P){switch(wo(P),P.tag){case 3:ba(Be),Ne();break;case 26:case 27:case 5:Me(P);break;case 4:Ne();break;case 31:P.memoizedState!==null&&jn(P);break;case 13:jn(P);break;case 19:me(Vr);break;case 10:ba(P.type);break;case 22:case 23:jn(P),mc(),B!==null&&me(Yi);break;case 24:ba(Be)}}function Io(B,P){try{var $=P.updateQueue,z=$!==null?$.lastEffect:null;if(z!==null){var Y=z.next;$=Y;do{if(($.tag&B)===B){z=void 0;var Z=$.create,fe=$.inst;z=Z(),fe.destroy=z}$=$.next}while($!==Y)}}catch(Ce){vr(P,P.return,Ce)}}function yi(B,P,$){try{var z=P.updateQueue,Y=z!==null?z.lastEffect:null;if(Y!==null){var Z=Y.next;z=Z;do{if((z.tag&B)===B){var fe=z.inst,Ce=fe.destroy;if(Ce!==void 0){fe.destroy=void 0,Y=P;var Oe=$,Ye=Ce;try{Ye()}catch(at){vr(Y,Oe,at)}}}z=z.next}while(z!==Z)}}catch(at){vr(P,P.return,at)}}function nd(B){var P=B.updateQueue;if(P!==null){var $=B.stateNode;try{Kf(P,$)}catch(z){vr(B,B.return,z)}}}function ad(B,P,$){$.props=rs(B.type,B.memoizedProps),$.state=B.memoizedState;try{$.componentWillUnmount()}catch(z){vr(B,P,z)}}function $o(B,P){try{var $=B.ref;if($!==null){switch(B.tag){case 26:case 27:case 5:var z=B.stateNode;break;case 30:z=B.stateNode;break;default:z=B.stateNode}typeof $=="function"?B.refCleanup=$(z):$.current=z}}catch(Y){vr(B,P,Y)}}function La(B,P){var $=B.ref,z=B.refCleanup;if($!==null)if(typeof z=="function")try{z()}catch(Y){vr(B,P,Y)}finally{B.refCleanup=null,B=B.alternate,B!=null&&(B.refCleanup=null)}else if(typeof $=="function")try{$(null)}catch(Y){vr(B,P,Y)}else $.current=null}function id(B){var P=B.type,$=B.memoizedProps,z=B.stateNode;try{e:switch(P){case"button":case"input":case"select":case"textarea":$.autoFocus&&z.focus();break e;case"img":$.src?z.src=$.src:$.srcSet&&(z.srcset=$.srcSet)}}catch(Y){vr(B,B.return,Y)}}function Yc(B,P,$){try{var z=B.stateNode;dg(z,B.type,$,P),z[zr]=P}catch(Y){vr(B,B.return,Y)}}function sd(B){return B.tag===5||B.tag===3||B.tag===26||B.tag===27&&Ei(B.type)||B.tag===4}function Xc(B){e:for(;;){for(;B.sibling===null;){if(B.return===null||sd(B.return))return null;B=B.return}for(B.sibling.return=B.return,B=B.sibling;B.tag!==5&&B.tag!==6&&B.tag!==18;){if(B.tag===27&&Ei(B.type)||B.flags&2||B.child===null||B.tag===4)continue e;B.child.return=B,B=B.child}if(!(B.flags&2))return B.stateNode}}function Qc(B,P,$){var z=B.tag;if(z===5||z===6)B=B.stateNode,P?($.nodeType===9?$.body:$.nodeName==="HTML"?$.ownerDocument.body:$).insertBefore(B,P):(P=$.nodeType===9?$.body:$.nodeName==="HTML"?$.ownerDocument.body:$,P.appendChild(B),$=$._reactRootContainer,$!=null||P.onclick!==null||(P.onclick=ua));else if(z!==4&&(z===27&&Ei(B.type)&&($=B.stateNode,P=null),B=B.child,B!==null))for(Qc(B,P,$),B=B.sibling;B!==null;)Qc(B,P,$),B=B.sibling}function Yl(B,P,$){var z=B.tag;if(z===5||z===6)B=B.stateNode,P?$.insertBefore(B,P):$.appendChild(B);else if(z!==4&&(z===27&&Ei(B.type)&&($=B.stateNode),B=B.child,B!==null))for(Yl(B,P,$),B=B.sibling;B!==null;)Yl(B,P,$),B=B.sibling}function od(B){var P=B.stateNode,$=B.memoizedProps;try{for(var z=B.type,Y=P.attributes;Y.length;)P.removeAttributeNode(Y[0]);bn(P,z,$),P[Tr]=B,P[zr]=$}catch(Z){vr(B,B.return,Z)}}var Wa=!1,ln=!1,Zc=!1,ld=typeof WeakSet=="function"?WeakSet:Set,mn=null;function jp(B,P){if(B=B.containerInfo,Sf=Su,B=oo(B),lo(B)){if("selectionStart"in B)var $={start:B.selectionStart,end:B.selectionEnd};else e:{$=($=B.ownerDocument)&&$.defaultView||window;var z=$.getSelection&&$.getSelection();if(z&&z.rangeCount!==0){$=z.anchorNode;var Y=z.anchorOffset,Z=z.focusNode;z=z.focusOffset;try{$.nodeType,Z.nodeType}catch{$=null;break e}var fe=0,Ce=-1,Oe=-1,Ye=0,at=0,ct=B,Je=null;t:for(;;){for(var tt;ct!==$||Y!==0&&ct.nodeType!==3||(Ce=fe+Y),ct!==Z||z!==0&&ct.nodeType!==3||(Oe=fe+z),ct.nodeType===3&&(fe+=ct.nodeValue.length),(tt=ct.firstChild)!==null;)Je=ct,ct=tt;for(;;){if(ct===B)break t;if(Je===$&&++Ye===Y&&(Ce=fe),Je===Z&&++at===z&&(Oe=fe),(tt=ct.nextSibling)!==null)break;ct=Je,Je=ct.parentNode}ct=tt}$=Ce===-1||Oe===-1?null:{start:Ce,end:Oe}}else $=null}$=$||{start:0,end:0}}else $=null;for(xf={focusedElem:B,selectionRange:$},Su=!1,mn=P;mn!==null;)if(P=mn,B=P.child,(P.subtreeFlags&1028)!==0&&B!==null)B.return=P,mn=B;else for(;mn!==null;){switch(P=mn,Z=P.alternate,B=P.flags,P.tag){case 0:if((B&4)!==0&&(B=P.updateQueue,B=B!==null?B.events:null,B!==null))for($=0;$<B.length;$++)Y=B[$],Y.ref.impl=Y.nextImpl;break;case 11:case 15:break;case 1:if((B&1024)!==0&&Z!==null){B=void 0,$=P,Y=Z.memoizedProps,Z=Z.memoizedState,z=$.stateNode;try{var Mt=rs($.type,Y);B=z.getSnapshotBeforeUpdate(Mt,Z),z.__reactInternalSnapshotBeforeUpdate=B}catch(Ft){vr($,$.return,Ft)}}break;case 3:if((B&1024)!==0){if(B=P.stateNode.containerInfo,$=B.nodeType,$===9)Cf(B);else if($===1)switch(B.nodeName){case"HEAD":case"HTML":case"BODY":Cf(B);break;default:B.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((B&1024)!==0)throw Error(R(163))}if(B=P.sibling,B!==null){B.return=P.return,mn=B;break}mn=P.return}}function ud(B,P,$){var z=$.flags;switch($.tag){case 0:case 11:case 15:Xa(B,$),z&4&&Io(5,$);break;case 1:if(Xa(B,$),z&4)if(B=$.stateNode,P===null)try{B.componentDidMount()}catch(fe){vr($,$.return,fe)}else{var Y=rs($.type,P.memoizedProps);P=P.memoizedState;try{B.componentDidUpdate(Y,P,B.__reactInternalSnapshotBeforeUpdate)}catch(fe){vr($,$.return,fe)}}z&64&&nd($),z&512&&$o($,$.return);break;case 3:if(Xa(B,$),z&64&&(B=$.updateQueue,B!==null)){if(P=null,$.child!==null)switch($.child.tag){case 27:case 5:P=$.child.stateNode;break;case 1:P=$.child.stateNode}try{Kf(B,P)}catch(fe){vr($,$.return,fe)}}break;case 27:P===null&&z&4&&od($);case 26:case 5:Xa(B,$),P===null&&z&4&&id($),z&512&&$o($,$.return);break;case 12:Xa(B,$);break;case 31:Xa(B,$),z&4&&hd(B,$);break;case 13:Xa(B,$),z&4&&dd(B,$),z&64&&(B=$.memoizedState,B!==null&&(B=B.dehydrated,B!==null&&($=tg.bind(null,$),xg(B,$))));break;case 22:if(z=$.memoizedState!==null||Wa,!z){P=P!==null&&P.memoizedState!==null||ln,Y=Wa;var Z=ln;Wa=z,(ln=P)&&!Z?Qa(B,$,($.subtreeFlags&8772)!==0):Xa(B,$),Wa=Y,ln=Z}break;case 30:break;default:Xa(B,$)}}function cd(B){var P=B.alternate;P!==null&&(B.alternate=null,cd(P)),B.child=null,B.deletions=null,B.sibling=null,B.tag===5&&(P=B.stateNode,P!==null&&ti(P)),B.stateNode=null,B.return=null,B.dependencies=null,B.memoizedProps=null,B.memoizedState=null,B.pendingProps=null,B.stateNode=null,B.updateQueue=null}var Or=null,In=!1;function Ya(B,P,$){for($=$.child;$!==null;)fd(B,P,$),$=$.sibling}function fd(B,P,$){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(we,$)}catch{}switch($.tag){case 26:ln||La($,P),Ya(B,P,$),$.memoizedState?$.memoizedState.count--:$.stateNode&&($=$.stateNode,$.parentNode.removeChild($));break;case 27:ln||La($,P);var z=Or,Y=In;Ei($.type)&&(Or=$.stateNode,In=!1),Ya(B,P,$),Ko($.stateNode),Or=z,In=Y;break;case 5:ln||La($,P);case 6:if(z=Or,Y=In,Or=null,Ya(B,P,$),Or=z,In=Y,Or!==null)if(In)try{(Or.nodeType===9?Or.body:Or.nodeName==="HTML"?Or.ownerDocument.body:Or).removeChild($.stateNode)}catch(Z){vr($,P,Z)}else try{Or.removeChild($.stateNode)}catch(Z){vr($,P,Z)}break;case 18:Or!==null&&(In?(B=Or,np(B.nodeType===9?B.body:B.nodeName==="HTML"?B.ownerDocument.body:B,$.stateNode),Vs(B)):np(Or,$.stateNode));break;case 4:z=Or,Y=In,Or=$.stateNode.containerInfo,In=!0,Ya(B,P,$),Or=z,In=Y;break;case 0:case 11:case 14:case 15:yi(2,$,P),ln||yi(4,$,P),Ya(B,P,$);break;case 1:ln||(La($,P),z=$.stateNode,typeof z.componentWillUnmount=="function"&&ad($,P,z)),Ya(B,P,$);break;case 21:Ya(B,P,$);break;case 22:ln=(z=ln)||$.memoizedState!==null,Ya(B,P,$),ln=z;break;default:Ya(B,P,$)}}function hd(B,P){if(P.memoizedState===null&&(B=P.alternate,B!==null&&(B=B.memoizedState,B!==null))){B=B.dehydrated;try{Vs(B)}catch($){vr(P,P.return,$)}}}function dd(B,P){if(P.memoizedState===null&&(B=P.alternate,B!==null&&(B=B.memoizedState,B!==null&&(B=B.dehydrated,B!==null))))try{Vs(B)}catch($){vr(P,P.return,$)}}function Kp(B){switch(B.tag){case 31:case 13:case 19:var P=B.stateNode;return P===null&&(P=B.stateNode=new ld),P;case 22:return B=B.stateNode,P=B._retryCache,P===null&&(P=B._retryCache=new ld),P;default:throw Error(R(435,B.tag))}}function eu(B,P){var $=Kp(B);P.forEach(function(z){if(!$.has(z)){$.add(z);var Y=rg.bind(null,B,z);z.then(Y,Y)}})}function $n(B,P){var $=P.deletions;if($!==null)for(var z=0;z<$.length;z++){var Y=$[z],Z=B,fe=P,Ce=fe;e:for(;Ce!==null;){switch(Ce.tag){case 27:if(Ei(Ce.type)){Or=Ce.stateNode,In=!1;break e}break;case 5:Or=Ce.stateNode,In=!1;break e;case 3:case 4:Or=Ce.stateNode.containerInfo,In=!0;break e}Ce=Ce.return}if(Or===null)throw Error(R(160));fd(Z,fe,Y),Or=null,In=!1,Z=Y.alternate,Z!==null&&(Z.return=null),Y.return=null}if(P.subtreeFlags&13886)for(P=P.child;P!==null;)pd(P,B),P=P.sibling}var Sa=null;function pd(B,P){var $=B.alternate,z=B.flags;switch(B.tag){case 0:case 11:case 14:case 15:$n(P,B),Nn(B),z&4&&(yi(3,B,B.return),Io(3,B),yi(5,B,B.return));break;case 1:$n(P,B),Nn(B),z&512&&(ln||$===null||La($,$.return)),z&64&&Wa&&(B=B.updateQueue,B!==null&&(z=B.callbacks,z!==null&&($=B.shared.hiddenCallbacks,B.shared.hiddenCallbacks=$===null?z:$.concat(z))));break;case 26:var Y=Sa;if($n(P,B),Nn(B),z&512&&(ln||$===null||La($,$.return)),z&4){var Z=$!==null?$.memoizedState:null;if(z=B.memoizedState,$===null)if(z===null)if(B.stateNode===null){e:{z=B.type,$=B.memoizedProps,Y=Y.ownerDocument||Y;t:switch(z){case"title":Z=Y.getElementsByTagName("title")[0],(!Z||Z[Xr]||Z[Tr]||Z.namespaceURI==="http://www.w3.org/2000/svg"||Z.hasAttribute("itemprop"))&&(Z=Y.createElement(z),Y.head.insertBefore(Z,Y.querySelector("head > title"))),bn(Z,z,$),Z[Tr]=B,Lr(Z),z=Z;break e;case"link":var fe=pp("link","href",Y).get(z+($.href||""));if(fe){for(var Ce=0;Ce<fe.length;Ce++)if(Z=fe[Ce],Z.getAttribute("href")===($.href==null||$.href===""?null:$.href)&&Z.getAttribute("rel")===($.rel==null?null:$.rel)&&Z.getAttribute("title")===($.title==null?null:$.title)&&Z.getAttribute("crossorigin")===($.crossOrigin==null?null:$.crossOrigin)){fe.splice(Ce,1);break t}}Z=Y.createElement(z),bn(Z,z,$),Y.head.appendChild(Z);break;case"meta":if(fe=pp("meta","content",Y).get(z+($.content||""))){for(Ce=0;Ce<fe.length;Ce++)if(Z=fe[Ce],Z.getAttribute("content")===($.content==null?null:""+$.content)&&Z.getAttribute("name")===($.name==null?null:$.name)&&Z.getAttribute("property")===($.property==null?null:$.property)&&Z.getAttribute("http-equiv")===($.httpEquiv==null?null:$.httpEquiv)&&Z.getAttribute("charset")===($.charSet==null?null:$.charSet)){fe.splice(Ce,1);break t}}Z=Y.createElement(z),bn(Z,z,$),Y.head.appendChild(Z);break;default:throw Error(R(468,z))}Z[Tr]=B,Lr(Z),z=Z}B.stateNode=z}else gp(Y,B.type,B.stateNode);else B.stateNode=dp(Y,z,B.memoizedProps);else Z!==z?(Z===null?$.stateNode!==null&&($=$.stateNode,$.parentNode.removeChild($)):Z.count--,z===null?gp(Y,B.type,B.stateNode):dp(Y,z,B.memoizedProps)):z===null&&B.stateNode!==null&&Yc(B,B.memoizedProps,$.memoizedProps)}break;case 27:$n(P,B),Nn(B),z&512&&(ln||$===null||La($,$.return)),$!==null&&z&4&&Yc(B,B.memoizedProps,$.memoizedProps);break;case 5:if($n(P,B),Nn(B),z&512&&(ln||$===null||La($,$.return)),B.flags&32){Y=B.stateNode;try{ni(Y,"")}catch(Mt){vr(B,B.return,Mt)}}z&4&&B.stateNode!=null&&(Y=B.memoizedProps,Yc(B,Y,$!==null?$.memoizedProps:Y)),z&1024&&(Zc=!0);break;case 6:if($n(P,B),Nn(B),z&4){if(B.stateNode===null)throw Error(R(162));z=B.memoizedProps,$=B.stateNode;try{$.nodeValue=z}catch(Mt){vr(B,B.return,Mt)}}break;case 3:if(vu=null,Y=Sa,Sa=pu(P.containerInfo),$n(P,B),Sa=Y,Nn(B),z&4&&$!==null&&$.memoizedState.isDehydrated)try{Vs(P.containerInfo)}catch(Mt){vr(B,B.return,Mt)}Zc&&(Zc=!1,gd(B));break;case 4:z=Sa,Sa=pu(B.stateNode.containerInfo),$n(P,B),Nn(B),Sa=z;break;case 12:$n(P,B),Nn(B);break;case 31:$n(P,B),Nn(B),z&4&&(z=B.updateQueue,z!==null&&(B.updateQueue=null,eu(B,z)));break;case 13:$n(P,B),Nn(B),B.child.flags&8192&&B.memoizedState!==null!=($!==null&&$.memoizedState!==null)&&(ru=xt()),z&4&&(z=B.updateQueue,z!==null&&(B.updateQueue=null,eu(B,z)));break;case 22:Y=B.memoizedState!==null;var Oe=$!==null&&$.memoizedState!==null,Ye=Wa,at=ln;if(Wa=Ye||Y,ln=at||Oe,$n(P,B),ln=at,Wa=Ye,Nn(B),z&8192)e:for(P=B.stateNode,P._visibility=Y?P._visibility&-2:P._visibility|1,Y&&($===null||Oe||Wa||ln||ns(B)),$=null,P=B;;){if(P.tag===5||P.tag===26){if($===null){Oe=$=P;try{if(Z=Oe.stateNode,Y)fe=Z.style,typeof fe.setProperty=="function"?fe.setProperty("display","none","important"):fe.display="none";else{Ce=Oe.stateNode;var ct=Oe.memoizedProps.style,Je=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;Ce.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(Mt){vr(Oe,Oe.return,Mt)}}}else if(P.tag===6){if($===null){Oe=P;try{Oe.stateNode.nodeValue=Y?"":Oe.memoizedProps}catch(Mt){vr(Oe,Oe.return,Mt)}}}else if(P.tag===18){if($===null){Oe=P;try{var tt=Oe.stateNode;Y?ap(tt,!0):ap(Oe.stateNode,!1)}catch(Mt){vr(Oe,Oe.return,Mt)}}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===B)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===B)break e;for(;P.sibling===null;){if(P.return===null||P.return===B)break e;$===P&&($=null),P=P.return}$===P&&($=null),P.sibling.return=P.return,P=P.sibling}z&4&&(z=B.updateQueue,z!==null&&($=z.retryQueue,$!==null&&(z.retryQueue=null,eu(B,$))));break;case 19:$n(P,B),Nn(B),z&4&&(z=B.updateQueue,z!==null&&(B.updateQueue=null,eu(B,z)));break;case 30:break;case 21:break;default:$n(P,B),Nn(B)}}function Nn(B){var P=B.flags;if(P&2){try{for(var $,z=B.return;z!==null;){if(sd(z)){$=z;break}z=z.return}if($==null)throw Error(R(160));switch($.tag){case 27:var Y=$.stateNode,Z=Xc(B);Yl(B,Z,Y);break;case 5:var fe=$.stateNode;$.flags&32&&(ni(fe,""),$.flags&=-33);var Ce=Xc(B);Yl(B,Ce,fe);break;case 3:case 4:var Oe=$.stateNode.containerInfo,Ye=Xc(B);Qc(B,Ye,Oe);break;default:throw Error(R(161))}}catch(at){vr(B,B.return,at)}B.flags&=-3}P&4096&&(B.flags&=-4097)}function gd(B){if(B.subtreeFlags&1024)for(B=B.child;B!==null;){var P=B;gd(P),P.tag===5&&P.flags&1024&&P.stateNode.reset(),B=B.sibling}}function Xa(B,P){if(P.subtreeFlags&8772)for(P=P.child;P!==null;)ud(B,P.alternate,P),P=P.sibling}function ns(B){for(B=B.child;B!==null;){var P=B;switch(P.tag){case 0:case 11:case 14:case 15:yi(4,P,P.return),ns(P);break;case 1:La(P,P.return);var $=P.stateNode;typeof $.componentWillUnmount=="function"&&ad(P,P.return,$),ns(P);break;case 27:Ko(P.stateNode);case 26:case 5:La(P,P.return),ns(P);break;case 22:P.memoizedState===null&&ns(P);break;case 30:ns(P);break;default:ns(P)}B=B.sibling}}function Qa(B,P,$){for($=$&&(P.subtreeFlags&8772)!==0,P=P.child;P!==null;){var z=P.alternate,Y=B,Z=P,fe=Z.flags;switch(Z.tag){case 0:case 11:case 15:Qa(Y,Z,$),Io(4,Z);break;case 1:if(Qa(Y,Z,$),z=Z,Y=z.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(Ye){vr(z,z.return,Ye)}if(z=Z,Y=z.updateQueue,Y!==null){var Ce=z.stateNode;try{var Oe=Y.shared.hiddenCallbacks;if(Oe!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<Oe.length;Y++)jf(Oe[Y],Ce)}catch(Ye){vr(z,z.return,Ye)}}$&&fe&64&&nd(Z),$o(Z,Z.return);break;case 27:od(Z);case 26:case 5:Qa(Y,Z,$),$&&z===null&&fe&4&&id(Z),$o(Z,Z.return);break;case 12:Qa(Y,Z,$);break;case 31:Qa(Y,Z,$),$&&fe&4&&hd(Y,Z);break;case 13:Qa(Y,Z,$),$&&fe&4&&dd(Y,Z);break;case 22:Z.memoizedState===null&&Qa(Y,Z,$),$o(Z,Z.return);break;case 30:break;default:Qa(Y,Z,$)}P=P.sibling}}function Jc(B,P){var $=null;B!==null&&B.memoizedState!==null&&B.memoizedState.cachePool!==null&&($=B.memoizedState.cachePool.pool),B=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(B=P.memoizedState.cachePool.pool),B!==$&&(B!=null&&B.refCount++,$!=null&&Ut($))}function ef(B,P){B=null,P.alternate!==null&&(B=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==B&&(P.refCount++,B!=null&&Ut(B))}function xa(B,P,$,z){if(P.subtreeFlags&10256)for(P=P.child;P!==null;)vd(B,P,$,z),P=P.sibling}function vd(B,P,$,z){var Y=P.flags;switch(P.tag){case 0:case 11:case 15:xa(B,P,$,z),Y&2048&&Io(9,P);break;case 1:xa(B,P,$,z);break;case 3:xa(B,P,$,z),Y&2048&&(B=null,P.alternate!==null&&(B=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==B&&(P.refCount++,B!=null&&Ut(B)));break;case 12:if(Y&2048){xa(B,P,$,z),B=P.stateNode;try{var Z=P.memoizedProps,fe=Z.id,Ce=Z.onPostCommit;typeof Ce=="function"&&Ce(fe,P.alternate===null?"mount":"update",B.passiveEffectDuration,-0)}catch(Oe){vr(P,P.return,Oe)}}else xa(B,P,$,z);break;case 31:xa(B,P,$,z);break;case 13:xa(B,P,$,z);break;case 23:break;case 22:Z=P.stateNode,fe=P.alternate,P.memoizedState!==null?Z._visibility&2?xa(B,P,$,z):No(B,P):Z._visibility&2?xa(B,P,$,z):(Z._visibility|=2,Ms(B,P,$,z,(P.subtreeFlags&10256)!==0||!1)),Y&2048&&Jc(fe,P);break;case 24:xa(B,P,$,z),Y&2048&&ef(P.alternate,P);break;default:xa(B,P,$,z)}}function Ms(B,P,$,z,Y){for(Y=Y&&((P.subtreeFlags&10256)!==0||!1),P=P.child;P!==null;){var Z=B,fe=P,Ce=$,Oe=z,Ye=fe.flags;switch(fe.tag){case 0:case 11:case 15:Ms(Z,fe,Ce,Oe,Y),Io(8,fe);break;case 23:break;case 22:var at=fe.stateNode;fe.memoizedState!==null?at._visibility&2?Ms(Z,fe,Ce,Oe,Y):No(Z,fe):(at._visibility|=2,Ms(Z,fe,Ce,Oe,Y)),Y&&Ye&2048&&Jc(fe.alternate,fe);break;case 24:Ms(Z,fe,Ce,Oe,Y),Y&&Ye&2048&&ef(fe.alternate,fe);break;default:Ms(Z,fe,Ce,Oe,Y)}P=P.sibling}}function No(B,P){if(P.subtreeFlags&10256)for(P=P.child;P!==null;){var $=B,z=P,Y=z.flags;switch(z.tag){case 22:No($,z),Y&2048&&Jc(z.alternate,z);break;case 24:No($,z),Y&2048&&ef(z.alternate,z);break;default:No($,z)}P=P.sibling}}var Fo=8192;function Bs(B,P,$){if(B.subtreeFlags&Fo)for(B=B.child;B!==null;)md(B,P,$),B=B.sibling}function md(B,P,$){switch(B.tag){case 26:Bs(B,P,$),B.flags&Fo&&B.memoizedState!==null&&Bg($,Sa,B.memoizedState,B.memoizedProps);break;case 5:Bs(B,P,$);break;case 3:case 4:var z=Sa;Sa=pu(B.stateNode.containerInfo),Bs(B,P,$),Sa=z;break;case 22:B.memoizedState===null&&(z=B.alternate,z!==null&&z.memoizedState!==null?(z=Fo,Fo=16777216,Bs(B,P,$),Fo=z):Bs(B,P,$));break;default:Bs(B,P,$)}}function yd(B){var P=B.alternate;if(P!==null&&(B=P.child,B!==null)){P.child=null;do P=B.sibling,B.sibling=null,B=P;while(B!==null)}}function zo(B){var P=B.deletions;if((B.flags&16)!==0){if(P!==null)for(var $=0;$<P.length;$++){var z=P[$];mn=z,Sd(z,B)}yd(B)}if(B.subtreeFlags&10256)for(B=B.child;B!==null;)bd(B),B=B.sibling}function bd(B){switch(B.tag){case 0:case 11:case 15:zo(B),B.flags&2048&&yi(9,B,B.return);break;case 3:zo(B);break;case 12:zo(B);break;case 22:var P=B.stateNode;B.memoizedState!==null&&P._visibility&2&&(B.return===null||B.return.tag!==13)?(P._visibility&=-3,tu(B)):zo(B);break;default:zo(B)}}function tu(B){var P=B.deletions;if((B.flags&16)!==0){if(P!==null)for(var $=0;$<P.length;$++){var z=P[$];mn=z,Sd(z,B)}yd(B)}for(B=B.child;B!==null;){switch(P=B,P.tag){case 0:case 11:case 15:yi(8,P,P.return),tu(P);break;case 22:$=P.stateNode,$._visibility&2&&($._visibility&=-3,tu(P));break;default:tu(P)}B=B.sibling}}function Sd(B,P){for(;mn!==null;){var $=mn;switch($.tag){case 0:case 11:case 15:yi(8,$,P);break;case 23:case 22:if($.memoizedState!==null&&$.memoizedState.cachePool!==null){var z=$.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Ut($.memoizedState.cache)}if(z=$.child,z!==null)z.return=$,mn=z;else e:for($=B;mn!==null;){z=mn;var Y=z.sibling,Z=z.return;if(cd(z),z===$){mn=null;break e}if(Y!==null){Y.return=Z,mn=Y;break e}mn=Z}}}var Wp={getCacheForType:function(B){var P=Hr(Be),$=P.data.get(B);return $===void 0&&($=B(),P.data.set(B,$)),$},cacheSignal:function(){return Hr(Be).controller.signal}},Yp=typeof WeakMap=="function"?WeakMap:Map,hr=0,Cr=null,Zt=null,nr=0,gr=0,Kn=null,bi=!1,Os=!1,tf=!1,Za=0,$r=0,Si=0,as=0,rf=0,Wn=0,Ls=0,Ho=null,Fn=null,nf=!1,ru=0,xd=0,nu=1/0,au=null,xi=null,dn=0,wi=null,Ps=null,Ja=0,af=0,sf=null,wd=null,Vo=0,of=null;function Yn(){return(hr&2)!==0&&nr!==0?nr&-nr:ge.T!==null?df():Er()}function _d(){if(Wn===0)if((nr&536870912)===0||Qt){var B=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),Wn=B}else Wn=536870912;return B=Gn.current,B!==null&&(B.flags|=32),Wn}function zn(B,P,$){(B===Cr&&(gr===2||gr===9)||B.cancelPendingCommit!==null)&&(Is(B,0),_i(B,nr,Wn,!1)),Vt(B,$),((hr&2)===0||B!==Cr)&&(B===Cr&&((hr&2)===0&&(as|=$),$r===4&&_i(B,nr,Wn,!1)),Pa(B))}function Cd(B,P,$){if((hr&6)!==0)throw Error(R(327));var z=!$&&(P&127)===0&&(P&B.expiredLanes)===0||vt(B,P),Y=z?Zp(B,P):uf(B,P,!0),Z=z;do{if(Y===0){Os&&!z&&_i(B,P,0,!1);break}else{if($=B.current.alternate,Z&&!Xp($)){Y=uf(B,P,!1),Z=!1;continue}if(Y===2){if(Z=P,B.errorRecoveryDisabledLanes&Z)var fe=0;else fe=B.pendingLanes&-536870913,fe=fe!==0?fe:fe&536870912?536870912:0;if(fe!==0){P=fe;e:{var Ce=B;Y=Ho;var Oe=Ce.current.memoizedState.isDehydrated;if(Oe&&(Is(Ce,fe).flags|=256),fe=uf(Ce,fe,!1),fe!==2){if(tf&&!Oe){Ce.errorRecoveryDisabledLanes|=Z,as|=Z,Y=4;break e}Z=Fn,Fn=Y,Z!==null&&(Fn===null?Fn=Z:Fn.push.apply(Fn,Z))}Y=fe}if(Z=!1,Y!==2)continue}}if(Y===1){Is(B,0),_i(B,P,0,!0);break}e:{switch(z=B,Z=Y,Z){case 0:case 1:throw Error(R(345));case 4:if((P&4194048)!==P)break;case 6:_i(z,P,Wn,!bi);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(R(329))}if((P&62914560)===P&&(Y=ru+300-xt(),10<Y)){if(_i(z,P,Wn,!bi),yt(z,0,!0)!==0)break e;Ja=P,z.timeoutHandle=tp(Ed.bind(null,z,$,Fn,au,nf,P,Wn,as,Ls,bi,Z,"Throttled",-0,0),Y);break e}Ed(z,$,Fn,au,nf,P,Wn,as,Ls,bi,Z,null,-0,0)}}break}while(!0);Pa(B)}function Ed(B,P,$,z,Y,Z,fe,Ce,Oe,Ye,at,ct,Je,tt){if(B.timeoutHandle=-1,ct=P.subtreeFlags,ct&8192||(ct&16785408)===16785408){ct={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ua},md(P,Z,ct);var Mt=(Z&62914560)===Z?ru-xt():(Z&4194048)===Z?xd-xt():0;if(Mt=Og(ct,Mt),Mt!==null){Ja=Z,B.cancelPendingCommit=Mt(Bd.bind(null,B,P,Z,$,z,Y,fe,Ce,Oe,at,ct,null,Je,tt)),_i(B,Z,fe,!Ye);return}}Bd(B,P,Z,$,z,Y,fe,Ce,Oe)}function Xp(B){for(var P=B;;){var $=P.tag;if(($===0||$===11||$===15)&&P.flags&16384&&($=P.updateQueue,$!==null&&($=$.stores,$!==null)))for(var z=0;z<$.length;z++){var Y=$[z],Z=Y.getSnapshot;Y=Y.value;try{if(!_n(Z(),Y))return!1}catch{return!1}}if($=P.child,P.subtreeFlags&16384&&$!==null)$.return=P,P=$;else{if(P===B)break;for(;P.sibling===null;){if(P.return===null||P.return===B)return!0;P=P.return}P.sibling.return=P.return,P=P.sibling}}return!0}function _i(B,P,$,z){P&=~rf,P&=~as,B.suspendedLanes|=P,B.pingedLanes&=~P,z&&(B.warmLanes|=P),z=B.expirationTimes;for(var Y=P;0<Y;){var Z=31-Ze(Y),fe=1<<Z;z[Z]=-1,Y&=~fe}$!==0&&dr(B,$,P)}function iu(){return(hr&6)===0?(Uo(0),!1):!0}function lf(){if(Zt!==null){if(gr===0)var B=Zt.return;else B=Zt,ya=Un=null,_c(B),Ts=null,Ro=0,B=Zt;for(;B!==null;)rd(B.alternate,B),B=B.return;Zt=null}}function Is(B,P){var $=B.timeoutHandle;$!==-1&&(B.timeoutHandle=-1,vg($)),$=B.cancelPendingCommit,$!==null&&(B.cancelPendingCommit=null,$()),Ja=0,lf(),Cr=B,Zt=$=Bn(B.current,null),nr=P,gr=0,Kn=null,bi=!1,Os=vt(B,P),tf=!1,Ls=Wn=rf=as=Si=$r=0,Fn=Ho=null,nf=!1,(P&8)!==0&&(P|=P&32);var z=B.entangledLanes;if(z!==0)for(B=B.entanglements,z&=P;0<z;){var Y=31-Ze(z),Z=1<<Y;P|=B[Y],z&=~Z}return Za=P,li(),$}function Rd(B,P){Wt=null,ge.H=Oo,P===Rs||P===kl?(P=Hf(),gr=3):P===fc?(P=Hf(),gr=4):gr=P===Nc?8:P!==null&&typeof P=="object"&&typeof P.then=="function"?6:1,Kn=P,Zt===null&&($r=1,Vl(B,On(P,B.current)))}function Td(){var B=Gn.current;return B===null?!0:(nr&4194048)===nr?aa===null:(nr&62914560)===nr||(nr&536870912)!==0?B===aa:!1}function Ad(){var B=ge.H;return ge.H=Oo,B===null?Oo:B}function kd(){var B=ge.A;return ge.A=Wp,B}function su(){$r=4,bi||(nr&4194048)!==nr&&Gn.current!==null||(Os=!0),(Si&134217727)===0&&(as&134217727)===0||Cr===null||_i(Cr,nr,Wn,!1)}function uf(B,P,$){var z=hr;hr|=2;var Y=Ad(),Z=kd();(Cr!==B||nr!==P)&&(au=null,Is(B,P)),P=!1;var fe=$r;e:do try{if(gr!==0&&Zt!==null){var Ce=Zt,Oe=Kn;switch(gr){case 8:lf(),fe=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(P=!0);var Ye=gr;if(gr=0,Kn=null,$s(B,Ce,Oe,Ye),$&&Os){fe=0;break e}break;default:Ye=gr,gr=0,Kn=null,$s(B,Ce,Oe,Ye)}}Qp(),fe=$r;break}catch(at){Rd(B,at)}while(!0);return P&&B.shellSuspendCounter++,ya=Un=null,hr=z,ge.H=Y,ge.A=Z,Zt===null&&(Cr=null,nr=0,li()),fe}function Qp(){for(;Zt!==null;)qd(Zt)}function Zp(B,P){var $=hr;hr|=2;var z=Ad(),Y=kd();Cr!==B||nr!==P?(au=null,nu=xt()+500,Is(B,P)):Os=vt(B,P);e:do try{if(gr!==0&&Zt!==null){P=Zt;var Z=Kn;t:switch(gr){case 1:gr=0,Kn=null,$s(B,P,Z,1);break;case 2:case 9:if(Ff(Z)){gr=0,Kn=null,Dd(P);break}P=function(){gr!==2&&gr!==9||Cr!==B||(gr=7),Pa(B)},Z.then(P,P);break e;case 3:gr=7;break e;case 4:gr=5;break e;case 7:Ff(Z)?(gr=0,Kn=null,Dd(P)):(gr=0,Kn=null,$s(B,P,Z,7));break;case 5:var fe=null;switch(Zt.tag){case 26:fe=Zt.memoizedState;case 5:case 27:var Ce=Zt;if(fe?vp(fe):Ce.stateNode.complete){gr=0,Kn=null;var Oe=Ce.sibling;if(Oe!==null)Zt=Oe;else{var Ye=Ce.return;Ye!==null?(Zt=Ye,ou(Ye)):Zt=null}break t}}gr=0,Kn=null,$s(B,P,Z,5);break;case 6:gr=0,Kn=null,$s(B,P,Z,6);break;case 8:lf(),$r=6;break e;default:throw Error(R(462))}}Jp();break}catch(at){Rd(B,at)}while(!0);return ya=Un=null,ge.H=z,ge.A=Y,hr=$,Zt!==null?0:(Cr=null,nr=0,li(),$r)}function Jp(){for(;Zt!==null&&!gt();)qd(Zt)}function qd(B){var P=ed(B.alternate,B,Za);B.memoizedProps=B.pendingProps,P===null?ou(B):Zt=P}function Dd(B){var P=B,$=P.alternate;switch(P.tag){case 15:case 0:P=Wh($,P,P.pendingProps,P.type,void 0,nr);break;case 11:P=Wh($,P,P.pendingProps,P.type.render,P.ref,nr);break;case 5:_c(P);default:rd($,P),P=Zt=bo(P,Za),P=ed($,P,Za)}B.memoizedProps=B.pendingProps,P===null?ou(B):Zt=P}function $s(B,P,$,z){ya=Un=null,_c(P),Ts=null,Ro=0;var Y=P.return;try{if(zp(B,Y,P,$,nr)){$r=1,Vl(B,On($,B.current)),Zt=null;return}}catch(Z){if(Y!==null)throw Zt=Y,Z;$r=1,Vl(B,On($,B.current)),Zt=null;return}P.flags&32768?(Qt||z===1?B=!0:Os||(nr&536870912)!==0?B=!1:(bi=B=!0,(z===2||z===9||z===3||z===6)&&(z=Gn.current,z!==null&&z.tag===13&&(z.flags|=16384))),Md(P,B)):ou(P)}function ou(B){var P=B;do{if((P.flags&32768)!==0){Md(P,bi);return}B=P.return;var $=Up(P.alternate,P,Za);if($!==null){Zt=$;return}if(P=P.sibling,P!==null){Zt=P;return}Zt=P=B}while(P!==null);$r===0&&($r=5)}function Md(B,P){do{var $=Gp(B.alternate,B);if($!==null){$.flags&=32767,Zt=$;return}if($=B.return,$!==null&&($.flags|=32768,$.subtreeFlags=0,$.deletions=null),!P&&(B=B.sibling,B!==null)){Zt=B;return}Zt=B=$}while(B!==null);$r=6,Zt=null}function Bd(B,P,$,z,Y,Z,fe,Ce,Oe){B.cancelPendingCommit=null;do lu();while(dn!==0);if((hr&6)!==0)throw Error(R(327));if(P!==null){if(P===B.current)throw Error(R(177));if(Z=P.lanes|P.childLanes,Z|=mo,ur(B,$,Z,fe,Ce,Oe),B===Cr&&(Zt=Cr=null,nr=0),Ps=P,wi=B,Ja=$,af=Z,sf=Y,wd=z,(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?(B.callbackNode=null,B.callbackPriority=0,ng(At,function(){return $d(),null})):(B.callbackNode=null,B.callbackPriority=0),z=(P.flags&13878)!==0,(P.subtreeFlags&13878)!==0||z){z=ge.T,ge.T=null,Y=be.p,be.p=2,fe=hr,hr|=4;try{jp(B,P,$)}finally{hr=fe,be.p=Y,ge.T=z}}dn=1,Od(),Ld(),Pd()}}function Od(){if(dn===1){dn=0;var B=wi,P=Ps,$=(P.flags&13878)!==0;if((P.subtreeFlags&13878)!==0||$){$=ge.T,ge.T=null;var z=be.p;be.p=2;var Y=hr;hr|=4;try{pd(P,B);var Z=xf,fe=oo(B.containerInfo),Ce=Z.focusedElem,Oe=Z.selectionRange;if(fe!==Ce&&Ce&&Ce.ownerDocument&&so(Ce.ownerDocument.documentElement,Ce)){if(Oe!==null&&lo(Ce)){var Ye=Oe.start,at=Oe.end;if(at===void 0&&(at=Ye),"selectionStart"in Ce)Ce.selectionStart=Ye,Ce.selectionEnd=Math.min(at,Ce.value.length);else{var ct=Ce.ownerDocument||document,Je=ct&&ct.defaultView||window;if(Je.getSelection){var tt=Je.getSelection(),Mt=Ce.textContent.length,Ft=Math.min(Oe.start,Mt),wr=Oe.end===void 0?Ft:Math.min(Oe.end,Mt);!tt.extend&&Ft>wr&&(fe=wr,wr=Ft,Ft=fe);var He=Sl(Ce,Ft),$e=Sl(Ce,wr);if(He&&$e&&(tt.rangeCount!==1||tt.anchorNode!==He.node||tt.anchorOffset!==He.offset||tt.focusNode!==$e.node||tt.focusOffset!==$e.offset)){var je=ct.createRange();je.setStart(He.node,He.offset),tt.removeAllRanges(),Ft>wr?(tt.addRange(je),tt.extend($e.node,$e.offset)):(je.setEnd($e.node,$e.offset),tt.addRange(je))}}}}for(ct=[],tt=Ce;tt=tt.parentNode;)tt.nodeType===1&&ct.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof Ce.focus=="function"&&Ce.focus(),Ce=0;Ce<ct.length;Ce++){var ut=ct[Ce];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Su=!!Sf,xf=Sf=null}finally{hr=Y,be.p=z,ge.T=$}}B.current=P,dn=2}}function Ld(){if(dn===2){dn=0;var B=wi,P=Ps,$=(P.flags&8772)!==0;if((P.subtreeFlags&8772)!==0||$){$=ge.T,ge.T=null;var z=be.p;be.p=2;var Y=hr;hr|=4;try{ud(B,P.alternate,P)}finally{hr=Y,be.p=z,ge.T=$}}dn=3}}function Pd(){if(dn===4||dn===3){dn=0,Et();var B=wi,P=Ps,$=Ja,z=wd;(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?dn=5:(dn=0,Ps=wi=null,Id(B,B.pendingLanes));var Y=B.pendingLanes;if(Y===0&&(xi=null),Pr($),P=P.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(we,P,void 0,(P.current.flags&128)===128)}catch{}if(z!==null){P=ge.T,Y=be.p,be.p=2,ge.T=null;try{for(var Z=B.onRecoverableError,fe=0;fe<z.length;fe++){var Ce=z[fe];Z(Ce.value,{componentStack:Ce.stack})}}finally{ge.T=P,be.p=Y}}(Ja&3)!==0&&lu(),Pa(B),Y=B.pendingLanes,($&261930)!==0&&(Y&42)!==0?B===of?Vo++:(Vo=0,of=B):Vo=0,Uo(0)}}function Id(B,P){(B.pooledCacheLanes&=P)===0&&(P=B.pooledCache,P!=null&&(B.pooledCache=null,Ut(P)))}function lu(){return Od(),Ld(),Pd(),$d()}function $d(){if(dn!==5)return!1;var B=wi,P=af;af=0;var $=Pr(Ja),z=ge.T,Y=be.p;try{be.p=32>$?32:$,ge.T=null,$=sf,sf=null;var Z=wi,fe=Ja;if(dn=0,Ps=wi=null,Ja=0,(hr&6)!==0)throw Error(R(331));var Ce=hr;if(hr|=4,bd(Z.current),vd(Z,Z.current,fe,$),hr=Ce,Uo(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(we,Z)}catch{}return!0}finally{be.p=Y,ge.T=z,Id(B,P)}}function Nd(B,P,$){P=On($,P),P=$c(B.stateNode,P,2),B=gi(B,P,2),B!==null&&(Vt(B,2),Pa(B))}function vr(B,P,$){if(B.tag===3)Nd(B,B,$);else for(;P!==null;){if(P.tag===3){Nd(P,B,$);break}else if(P.tag===1){var z=P.stateNode;if(typeof P.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(xi===null||!xi.has(z))){B=On($,B),$=Fh(2),z=gi(P,$,2),z!==null&&(zh($,z,P,B),Vt(z,2),Pa(z));break}}P=P.return}}function cf(B,P,$){var z=B.pingCache;if(z===null){z=B.pingCache=new Yp;var Y=new Set;z.set(P,Y)}else Y=z.get(P),Y===void 0&&(Y=new Set,z.set(P,Y));Y.has($)||(tf=!0,Y.add($),B=eg.bind(null,B,P,$),P.then(B,B))}function eg(B,P,$){var z=B.pingCache;z!==null&&z.delete(P),B.pingedLanes|=B.suspendedLanes&$,B.warmLanes&=~$,Cr===B&&(nr&$)===$&&($r===4||$r===3&&(nr&62914560)===nr&&300>xt()-ru?(hr&2)===0&&Is(B,0):rf|=$,Ls===nr&&(Ls=0)),Pa(B)}function Fd(B,P){P===0&&(P=It()),B=za(B,P),B!==null&&(Vt(B,P),Pa(B))}function tg(B){var P=B.memoizedState,$=0;P!==null&&($=P.retryLane),Fd(B,$)}function rg(B,P){var $=0;switch(B.tag){case 31:case 13:var z=B.stateNode,Y=B.memoizedState;Y!==null&&($=Y.retryLane);break;case 19:z=B.stateNode;break;case 22:z=B.stateNode._retryCache;break;default:throw Error(R(314))}z!==null&&z.delete(P),Fd(B,$)}function ng(B,P){return st(B,P)}var uu=null,Ns=null,ff=!1,cu=!1,hf=!1,Ci=0;function Pa(B){B!==Ns&&B.next===null&&(Ns===null?uu=Ns=B:Ns=Ns.next=B),cu=!0,ff||(ff=!0,ig())}function Uo(B,P){if(!hf&&cu){hf=!0;do for(var $=!1,z=uu;z!==null;){if(B!==0){var Y=z.pendingLanes;if(Y===0)var Z=0;else{var fe=z.suspendedLanes,Ce=z.pingedLanes;Z=(1<<31-Ze(42|B)+1)-1,Z&=Y&~(fe&~Ce),Z=Z&201326741?Z&201326741|1:Z?Z|2:0}Z!==0&&($=!0,Ud(z,Z))}else Z=nr,Z=yt(z,z===Cr?Z:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),(Z&3)===0||vt(z,Z)||($=!0,Ud(z,Z));z=z.next}while($);hf=!1}}function ag(){zd()}function zd(){cu=ff=!1;var B=0;Ci!==0&&gg()&&(B=Ci);for(var P=xt(),$=null,z=uu;z!==null;){var Y=z.next,Z=Hd(z,P);Z===0?(z.next=null,$===null?uu=Y:$.next=Y,Y===null&&(Ns=$)):($=z,(B!==0||(Z&3)!==0)&&(cu=!0)),z=Y}dn!==0&&dn!==5||Uo(B),Ci!==0&&(Ci=0)}function Hd(B,P){for(var $=B.suspendedLanes,z=B.pingedLanes,Y=B.expirationTimes,Z=B.pendingLanes&-62914561;0<Z;){var fe=31-Ze(Z),Ce=1<<fe,Oe=Y[fe];Oe===-1?((Ce&$)===0||(Ce&z)!==0)&&(Y[fe]=Dt(Ce,P)):Oe<=P&&(B.expiredLanes|=Ce),Z&=~Ce}if(P=Cr,$=nr,$=yt(B,B===P?$:0,B.cancelPendingCommit!==null||B.timeoutHandle!==-1),z=B.callbackNode,$===0||B===P&&(gr===2||gr===9)||B.cancelPendingCommit!==null)return z!==null&&z!==null&&St(z),B.callbackNode=null,B.callbackPriority=0;if(($&3)===0||vt(B,$)){if(P=$&-$,P===B.callbackPriority)return P;switch(z!==null&&St(z),Pr($)){case 2:case 8:$=jt;break;case 32:$=At;break;case 268435456:$=Ct;break;default:$=At}return z=Vd.bind(null,B),$=st($,z),B.callbackPriority=P,B.callbackNode=$,P}return z!==null&&z!==null&&St(z),B.callbackPriority=2,B.callbackNode=null,2}function Vd(B,P){if(dn!==0&&dn!==5)return B.callbackNode=null,B.callbackPriority=0,null;var $=B.callbackNode;if(lu()&&B.callbackNode!==$)return null;var z=nr;return z=yt(B,B===Cr?z:0,B.cancelPendingCommit!==null||B.timeoutHandle!==-1),z===0?null:(Cd(B,z,P),Hd(B,xt()),B.callbackNode!=null&&B.callbackNode===$?Vd.bind(null,B):null)}function Ud(B,P){if(lu())return null;Cd(B,P,!0)}function ig(){mg(function(){(hr&6)!==0?st(zt,ag):zd()})}function df(){if(Ci===0){var B=Cs;B===0&&(B=Tt,Tt<<=1,(Tt&261888)===0&&(Tt=256)),Ci=B}return Ci}function Gd(B){return B==null||typeof B=="symbol"||typeof B=="boolean"?null:typeof B=="function"?B:fs(""+B)}function jd(B,P){var $=P.ownerDocument.createElement("input");return $.name=P.name,$.value=P.value,B.id&&$.setAttribute("form",B.id),P.parentNode.insertBefore($,P),B=new FormData(B),$.parentNode.removeChild($),B}function sg(B,P,$,z,Y){if(P==="submit"&&$&&$.stateNode===Y){var Z=Gd((Y[zr]||null).action),fe=z.submitter;fe&&(P=(P=fe[zr]||null)?Gd(P.formAction):fe.getAttribute("formAction"),P!==null&&(Z=P,fe=null));var Ce=new gs("action","action",null,z,Y);B.push({event:Ce,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(Ci!==0){var Oe=fe?jd(Y,fe):new FormData(Y);Mc($,{pending:!0,data:Oe,method:Y.method,action:Z},null,Oe)}}else typeof Z=="function"&&(Ce.preventDefault(),Oe=fe?jd(Y,fe):new FormData(Y),Mc($,{pending:!0,data:Oe,method:Y.method,action:Z},Z,Oe))},currentTarget:Y}]})}}for(var pf=0;pf<Hi.length;pf++){var gf=Hi[pf],og=gf.toLowerCase(),lg=gf[0].toUpperCase()+gf.slice(1);Vn(og,"on"+lg)}Vn(wl,"onAnimationEnd"),Vn(ho,"onAnimationIteration"),Vn(Ss,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(po,"onTransitionRun"),Vn(oc,"onTransitionStart"),Vn(go,"onTransitionCancel"),Vn(_l,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),En("onBeforeInput",["compositionend","keypress","textInput","paste"]),En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Go));function Kd(B,P){P=(P&4)!==0;for(var $=0;$<B.length;$++){var z=B[$],Y=z.event;z=z.listeners;e:{var Z=void 0;if(P)for(var fe=z.length-1;0<=fe;fe--){var Ce=z[fe],Oe=Ce.instance,Ye=Ce.currentTarget;if(Ce=Ce.listener,Oe!==Z&&Y.isPropagationStopped())break e;Z=Ce,Y.currentTarget=Ye;try{Z(Y)}catch(at){Vi(at)}Y.currentTarget=null,Z=Oe}else for(fe=0;fe<z.length;fe++){if(Ce=z[fe],Oe=Ce.instance,Ye=Ce.currentTarget,Ce=Ce.listener,Oe!==Z&&Y.isPropagationStopped())break e;Z=Ce,Y.currentTarget=Ye;try{Z(Y)}catch(at){Vi(at)}Y.currentTarget=null,Z=Oe}}}}function er(B,P){var $=P[Kr];$===void 0&&($=P[Kr]=new Set);var z=B+"__bubble";$.has(z)||(Wd(P,B,2,!1),$.add(z))}function vf(B,P,$){var z=0;P&&(z|=4),Wd($,B,z,P)}var fu="_reactListening"+Math.random().toString(36).slice(2);function mf(B){if(!B[fu]){B[fu]=!0,oa.forEach(function($){$!=="selectionchange"&&(ug.has($)||vf($,!1,B),vf($,!0,B))});var P=B.nodeType===9?B:B.ownerDocument;P===null||P[fu]||(P[fu]=!0,vf("selectionchange",!1,P))}}function Wd(B,P,$,z){switch(_p(P)){case 2:var Y=Ig;break;case 8:Y=$g;break;default:Y=Mf}$=Y.bind(null,P,$,B),Y=void 0,!Js||P!=="touchstart"&&P!=="touchmove"&&P!=="wheel"||(Y=!0),z?Y!==void 0?B.addEventListener(P,$,{capture:!0,passive:Y}):B.addEventListener(P,$,!0):Y!==void 0?B.addEventListener(P,$,{passive:Y}):B.addEventListener(P,$,!1)}function yf(B,P,$,z,Y){var Z=z;if((P&1)===0&&(P&2)===0&&z!==null)e:for(;;){if(z===null)return;var fe=z.tag;if(fe===3||fe===4){var Ce=z.stateNode.containerInfo;if(Ce===Y)break;if(fe===4)for(fe=z.return;fe!==null;){var Oe=fe.tag;if((Oe===3||Oe===4)&&fe.stateNode.containerInfo===Y)return;fe=fe.return}for(;Ce!==null;){if(fe=Ca(Ce),fe===null)return;if(Oe=fe.tag,Oe===5||Oe===6||Oe===26||Oe===27){z=Z=fe;continue e}Ce=Ce.parentNode}}z=z.return}il(function(){var Ye=Z,at=Qs($),ct=[];e:{var Je=vo.get(B);if(Je!==void 0){var tt=gs,Mt=B;switch(B){case"keypress":if(ds($)===0)break e;case"keydown":case"keyup":tt=Gu;break;case"focusin":Mt="focus",tt=no;break;case"focusout":Mt="blur",tt=no;break;case"beforeblur":case"afterblur":tt=no;break;case"click":if($.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Wu;break;case wl:case ho:case Ss:tt=Pu;break;case _l:tt=Xu;break;case"scroll":case"scrollend":tt=Du;break;case"wheel":tt=Zu;break;case"copy":case"cut":case"paste":tt=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=cl;break;case"toggle":case"beforetoggle":tt=ec}var Ft=(P&4)!==0,wr=!Ft&&(B==="scroll"||B==="scrollend"),He=Ft?Je!==null?Je+"Capture":null:Je;Ft=[];for(var $e=Ye,je;$e!==null;){var ut=$e;if(je=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||je===null||He===null||(ut=Bi($e,He),ut!=null&&Ft.push(jo($e,ut,je))),wr)break;$e=$e.return}0<Ft.length&&(Je=new tt(Je,Mt,null,$,at),ct.push({event:Je,listeners:Ft}))}}if((P&7)===0){e:{if(Je=B==="mouseover"||B==="pointerover",tt=B==="mouseout"||B==="pointerout",Je&&$!==Ys&&(Mt=$.relatedTarget||$.fromElement)&&(Ca(Mt)||Mt[Sn]))break e;if((tt||Je)&&(Je=at.window===at?at:(Je=at.ownerDocument)?Je.defaultView||Je.parentWindow:window,tt?(Mt=$.relatedTarget||$.toElement,tt=Ye,Mt=Mt?Ca(Mt):null,Mt!==null&&(wr=A(Mt),Ft=Mt.tag,Mt!==wr||Ft!==5&&Ft!==27&&Ft!==6)&&(Mt=null)):(tt=null,Mt=Ye),tt!==Mt)){if(Ft=ll,ut="onMouseLeave",He="onMouseEnter",$e="mouse",(B==="pointerout"||B==="pointerover")&&(Ft=cl,ut="onPointerLeave",He="onPointerEnter",$e="pointer"),wr=tt==null?Je:Ia(tt),je=Mt==null?Je:Ia(Mt),Je=new Ft(ut,$e+"leave",tt,$,at),Je.target=wr,Je.relatedTarget=je,ut=null,Ca(at)===Ye&&(Ft=new Ft(He,$e+"enter",Mt,$,at),Ft.target=je,Ft.relatedTarget=wr,ut=Ft),wr=ut,tt&&Mt)t:{for(Ft=cg,He=tt,$e=Mt,je=0,ut=He;ut;ut=Ft(ut))je++;ut=0;for(var $t=$e;$t;$t=Ft($t))ut++;for(;0<je-ut;)He=Ft(He),je--;for(;0<ut-je;)$e=Ft($e),ut--;for(;je--;){if(He===$e||$e!==null&&He===$e.alternate){Ft=He;break t}He=Ft(He),$e=Ft($e)}Ft=null}else Ft=null;tt!==null&&Yd(ct,Je,tt,Ft,!1),Mt!==null&&wr!==null&&Yd(ct,wr,Mt,Ft,!0)}}e:{if(Je=Ye?Ia(Ye):window,tt=Je.nodeName&&Je.nodeName.toLowerCase(),tt==="select"||tt==="input"&&Je.type==="file")var cr=Aa;else if(Dn(Je))if(Ni)cr=ac;else{cr=ys;var Bt=yl}else tt=Je.nodeName,!tt||tt.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?Ye&&Ws(Ye.elementType)&&(cr=Aa):cr=it;if(cr&&(cr=cr(B,Ye))){$i(ct,cr,$,at);break e}Bt&&Bt(B,Je,Ye),B==="focusout"&&Ye&&Je.type==="number"&&Ye.memoizedProps.value!=null&&js(Je,"number",Je.value)}switch(Bt=Ye?Ia(Ye):window,B){case"focusin":(Dn(Bt)||Bt.contentEditable==="true")&&(Na=Bt,bs=Ye,zi=null);break;case"focusout":zi=bs=Na=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,co(ct,$,at);break;case"selectionchange":if(sc)break;case"keydown":case"keyup":co(ct,$,at)}var Yt;if(io)e:{switch(B){case"compositionstart":var ar="onCompositionStart";break e;case"compositionend":ar="onCompositionEnd";break e;case"compositionupdate":ar="onCompositionUpdate";break e}ar=void 0}else ii?pl(B,$)&&(ar="onCompositionEnd"):B==="keydown"&&$.keyCode===229&&(ar="onCompositionStart");ar&&(fl&&$.locale!=="ko"&&(ii||ar!=="onCompositionStart"?ar==="onCompositionEnd"&&ii&&(Yt=sl()):(Ta=at,eo="value"in Ta?Ta.value:Ta.textContent,ii=!0)),Bt=hu(Ye,ar),0<Bt.length&&(ar=new ul(ar,B,null,$,at),ct.push({event:ar,listeners:Bt}),Yt?ar.data=Yt:(Yt=gl($),Yt!==null&&(ar.data=Yt)))),(Yt=rc?ae(B,$):kt(B,$))&&(ar=hu(Ye,"onBeforeInput"),0<ar.length&&(Bt=new ul("onBeforeInput","beforeinput",null,$,at),ct.push({event:Bt,listeners:ar}),Bt.data=Yt)),sg(ct,B,Ye,$,at)}Kd(ct,P)})}function jo(B,P,$){return{instance:B,listener:P,currentTarget:$}}function hu(B,P){for(var $=P+"Capture",z=[];B!==null;){var Y=B,Z=Y.stateNode;if(Y=Y.tag,Y!==5&&Y!==26&&Y!==27||Z===null||(Y=Bi(B,$),Y!=null&&z.unshift(jo(B,Y,Z)),Y=Bi(B,P),Y!=null&&z.push(jo(B,Y,Z))),B.tag===3)return z;B=B.return}return[]}function cg(B){if(B===null)return null;do B=B.return;while(B&&B.tag!==5&&B.tag!==27);return B||null}function Yd(B,P,$,z,Y){for(var Z=P._reactName,fe=[];$!==null&&$!==z;){var Ce=$,Oe=Ce.alternate,Ye=Ce.stateNode;if(Ce=Ce.tag,Oe!==null&&Oe===z)break;Ce!==5&&Ce!==26&&Ce!==27||Ye===null||(Oe=Ye,Y?(Ye=Bi($,Z),Ye!=null&&fe.unshift(jo($,Ye,Oe))):Y||(Ye=Bi($,Z),Ye!=null&&fe.push(jo($,Ye,Oe)))),$=$.return}fe.length!==0&&B.push({event:P,listeners:fe})}var fg=/\r\n?/g,hg=/\u0000|\uFFFD/g;function Xd(B){return(typeof B=="string"?B:""+B).replace(fg,`
`).replace(hg,"")}function Qd(B,P){return P=Xd(P),Xd(B)===P}function Sr(B,P,$,z,Y,Z){switch($){case"children":typeof z=="string"?P==="body"||P==="textarea"&&z===""||ni(B,z):(typeof z=="number"||typeof z=="bigint")&&P!=="body"&&ni(B,""+z);break;case"className":la(B,"class",z);break;case"tabIndex":la(B,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":la(B,$,z);break;case"style":nl(B,z,Z);break;case"data":if(P!=="object"){la(B,"data",z);break}case"src":case"href":if(z===""&&(P!=="a"||$!=="href")){B.removeAttribute($);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){B.removeAttribute($);break}z=fs(""+z),B.setAttribute($,z);break;case"action":case"formAction":if(typeof z=="function"){B.setAttribute($,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Z=="function"&&($==="formAction"?(P!=="input"&&Sr(B,P,"name",Y.name,Y,null),Sr(B,P,"formEncType",Y.formEncType,Y,null),Sr(B,P,"formMethod",Y.formMethod,Y,null),Sr(B,P,"formTarget",Y.formTarget,Y,null)):(Sr(B,P,"encType",Y.encType,Y,null),Sr(B,P,"method",Y.method,Y,null),Sr(B,P,"target",Y.target,Y,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){B.removeAttribute($);break}z=fs(""+z),B.setAttribute($,z);break;case"onClick":z!=null&&(B.onclick=ua);break;case"onScroll":z!=null&&er("scroll",B);break;case"onScrollEnd":z!=null&&er("scrollend",B);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(R(61));if($=z.__html,$!=null){if(Y.children!=null)throw Error(R(60));B.innerHTML=$}}break;case"multiple":B.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":B.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){B.removeAttribute("xlink:href");break}$=fs(""+z),B.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",$);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?B.setAttribute($,""+z):B.removeAttribute($);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?B.setAttribute($,""):B.removeAttribute($);break;case"capture":case"download":z===!0?B.setAttribute($,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?B.setAttribute($,z):B.removeAttribute($);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?B.setAttribute($,z):B.removeAttribute($);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?B.removeAttribute($):B.setAttribute($,z);break;case"popover":er("beforetoggle",B),er("toggle",B),gn(B,"popover",z);break;case"xlinkActuate":Rn(B,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":Rn(B,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":Rn(B,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":Rn(B,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":Rn(B,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":Rn(B,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":Rn(B,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":Rn(B,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":Rn(B,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":gn(B,"is",z);break;case"innerText":case"textContent":break;default:(!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&($=ku.get($)||$,gn(B,$,z))}}function bf(B,P,$,z,Y,Z){switch($){case"style":nl(B,z,Z);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(R(61));if($=z.__html,$!=null){if(Y.children!=null)throw Error(R(60));B.innerHTML=$}}break;case"children":typeof z=="string"?ni(B,z):(typeof z=="number"||typeof z=="bigint")&&ni(B,""+z);break;case"onScroll":z!=null&&er("scroll",B);break;case"onScrollEnd":z!=null&&er("scrollend",B);break;case"onClick":z!=null&&(B.onclick=ua);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!is.hasOwnProperty($))e:{if($[0]==="o"&&$[1]==="n"&&(Y=$.endsWith("Capture"),P=$.slice(2,Y?$.length-7:void 0),Z=B[zr]||null,Z=Z!=null?Z[$]:null,typeof Z=="function"&&B.removeEventListener(P,Z,Y),typeof z=="function")){typeof Z!="function"&&Z!==null&&($ in B?B[$]=null:B.hasAttribute($)&&B.removeAttribute($)),B.addEventListener(P,z,Y);break e}$ in B?B[$]=z:z===!0?B.setAttribute($,""):gn(B,$,z)}}}function bn(B,P,$){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",B),er("load",B);var z=!1,Y=!1,Z;for(Z in $)if($.hasOwnProperty(Z)){var fe=$[Z];if(fe!=null)switch(Z){case"src":z=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(R(137,P));default:Sr(B,P,Z,fe,$,null)}}Y&&Sr(B,P,"srcSet",$.srcSet,$,null),z&&Sr(B,P,"src",$.src,$,null);return;case"input":er("invalid",B);var Ce=Z=fe=Y=null,Oe=null,Ye=null;for(z in $)if($.hasOwnProperty(z)){var at=$[z];if(at!=null)switch(z){case"name":Y=at;break;case"type":fe=at;break;case"checked":Oe=at;break;case"defaultChecked":Ye=at;break;case"value":Z=at;break;case"defaultValue":Ce=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(R(137,P));break;default:Sr(B,P,z,at,$,null)}}cs(B,Z,Ce,Oe,Ye,fe,Y,!1);return;case"select":er("invalid",B),z=fe=Z=null;for(Y in $)if($.hasOwnProperty(Y)&&(Ce=$[Y],Ce!=null))switch(Y){case"value":Z=Ce;break;case"defaultValue":fe=Ce;break;case"multiple":z=Ce;default:Sr(B,P,Y,Ce,$,null)}P=Z,$=fe,B.multiple=!!z,P!=null?ri(B,!!z,P,!1):$!=null&&ri(B,!!z,$,!0);return;case"textarea":er("invalid",B),Z=Y=z=null;for(fe in $)if($.hasOwnProperty(fe)&&(Ce=$[fe],Ce!=null))switch(fe){case"value":z=Ce;break;case"defaultValue":Y=Ce;break;case"children":Z=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(R(91));break;default:Sr(B,P,fe,Ce,$,null)}tl(B,z,Y,Z);return;case"option":for(Oe in $)if($.hasOwnProperty(Oe)&&(z=$[Oe],z!=null))switch(Oe){case"selected":B.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Sr(B,P,Oe,z,$,null)}return;case"dialog":er("beforetoggle",B),er("toggle",B),er("cancel",B),er("close",B);break;case"iframe":case"object":er("load",B);break;case"video":case"audio":for(z=0;z<Go.length;z++)er(Go[z],B);break;case"image":er("error",B),er("load",B);break;case"details":er("toggle",B);break;case"embed":case"source":case"link":er("error",B),er("load",B);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in $)if($.hasOwnProperty(Ye)&&(z=$[Ye],z!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(R(137,P));default:Sr(B,P,Ye,z,$,null)}return;default:if(Ws(P)){for(at in $)$.hasOwnProperty(at)&&(z=$[at],z!==void 0&&bf(B,P,at,z,$,void 0));return}}for(Ce in $)$.hasOwnProperty(Ce)&&(z=$[Ce],z!=null&&Sr(B,P,Ce,z,$,null))}function dg(B,P,$,z){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,Z=null,fe=null,Ce=null,Oe=null,Ye=null,at=null;for(tt in $){var ct=$[tt];if($.hasOwnProperty(tt)&&ct!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":Oe=ct;default:z.hasOwnProperty(tt)||Sr(B,P,tt,null,z,ct)}}for(var Je in z){var tt=z[Je];if(ct=$[Je],z.hasOwnProperty(Je)&&(tt!=null||ct!=null))switch(Je){case"type":Z=tt;break;case"name":Y=tt;break;case"checked":Ye=tt;break;case"defaultChecked":at=tt;break;case"value":fe=tt;break;case"defaultValue":Ce=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(R(137,P));break;default:tt!==ct&&Sr(B,P,Je,tt,z,ct)}}Gs(B,fe,Ce,Oe,Ye,at,Z,Y);return;case"select":tt=fe=Ce=Je=null;for(Z in $)if(Oe=$[Z],$.hasOwnProperty(Z)&&Oe!=null)switch(Z){case"value":break;case"multiple":tt=Oe;default:z.hasOwnProperty(Z)||Sr(B,P,Z,null,z,Oe)}for(Y in z)if(Z=z[Y],Oe=$[Y],z.hasOwnProperty(Y)&&(Z!=null||Oe!=null))switch(Y){case"value":Je=Z;break;case"defaultValue":Ce=Z;break;case"multiple":fe=Z;default:Z!==Oe&&Sr(B,P,Y,Z,z,Oe)}P=Ce,$=fe,z=tt,Je!=null?ri(B,!!$,Je,!1):!!z!=!!$&&(P!=null?ri(B,!!$,P,!0):ri(B,!!$,$?[]:"",!1));return;case"textarea":tt=Je=null;for(Ce in $)if(Y=$[Ce],$.hasOwnProperty(Ce)&&Y!=null&&!z.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:Sr(B,P,Ce,null,z,Y)}for(fe in z)if(Y=z[fe],Z=$[fe],z.hasOwnProperty(fe)&&(Y!=null||Z!=null))switch(fe){case"value":Je=Y;break;case"defaultValue":tt=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(R(91));break;default:Y!==Z&&Sr(B,P,fe,Y,z,Z)}el(B,Je,tt);return;case"option":for(var Mt in $)if(Je=$[Mt],$.hasOwnProperty(Mt)&&Je!=null&&!z.hasOwnProperty(Mt))switch(Mt){case"selected":B.selected=!1;break;default:Sr(B,P,Mt,null,z,Je)}for(Oe in z)if(Je=z[Oe],tt=$[Oe],z.hasOwnProperty(Oe)&&Je!==tt&&(Je!=null||tt!=null))switch(Oe){case"selected":B.selected=Je&&typeof Je!="function"&&typeof Je!="symbol";break;default:Sr(B,P,Oe,Je,z,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in $)Je=$[Ft],$.hasOwnProperty(Ft)&&Je!=null&&!z.hasOwnProperty(Ft)&&Sr(B,P,Ft,null,z,Je);for(Ye in z)if(Je=z[Ye],tt=$[Ye],z.hasOwnProperty(Ye)&&Je!==tt&&(Je!=null||tt!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(R(137,P));break;default:Sr(B,P,Ye,Je,z,tt)}return;default:if(Ws(P)){for(var wr in $)Je=$[wr],$.hasOwnProperty(wr)&&Je!==void 0&&!z.hasOwnProperty(wr)&&bf(B,P,wr,void 0,z,Je);for(at in z)Je=z[at],tt=$[at],!z.hasOwnProperty(at)||Je===tt||Je===void 0&&tt===void 0||bf(B,P,at,Je,z,tt);return}}for(var He in $)Je=$[He],$.hasOwnProperty(He)&&Je!=null&&!z.hasOwnProperty(He)&&Sr(B,P,He,null,z,Je);for(ct in z)Je=z[ct],tt=$[ct],!z.hasOwnProperty(ct)||Je===tt||Je==null&&tt==null||Sr(B,P,ct,Je,z,tt)}function Zd(B){switch(B){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pg(){if(typeof performance.getEntriesByType=="function"){for(var B=0,P=0,$=performance.getEntriesByType("resource"),z=0;z<$.length;z++){var Y=$[z],Z=Y.transferSize,fe=Y.initiatorType,Ce=Y.duration;if(Z&&Ce&&Zd(fe)){for(fe=0,Ce=Y.responseEnd,z+=1;z<$.length;z++){var Oe=$[z],Ye=Oe.startTime;if(Ye>Ce)break;var at=Oe.transferSize,ct=Oe.initiatorType;at&&Zd(ct)&&(Oe=Oe.responseEnd,fe+=at*(Oe<Ce?1:(Ce-Ye)/(Oe-Ye)))}if(--z,P+=8*(Z+fe)/(Y.duration/1e3),B++,10<B)break}}if(0<B)return P/B/1e6}return navigator.connection&&(B=navigator.connection.downlink,typeof B=="number")?B:5}var Sf=null,xf=null;function du(B){return B.nodeType===9?B:B.ownerDocument}function Jd(B){switch(B){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ep(B,P){if(B===0)switch(P){case"svg":return 1;case"math":return 2;default:return 0}return B===1&&P==="foreignObject"?0:B}function wf(B,P){return B==="textarea"||B==="noscript"||typeof P.children=="string"||typeof P.children=="number"||typeof P.children=="bigint"||typeof P.dangerouslySetInnerHTML=="object"&&P.dangerouslySetInnerHTML!==null&&P.dangerouslySetInnerHTML.__html!=null}var _f=null;function gg(){var B=window.event;return B&&B.type==="popstate"?B===_f?!1:(_f=B,!0):(_f=null,!1)}var tp=typeof setTimeout=="function"?setTimeout:void 0,vg=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,mg=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(B){return rp.resolve(null).then(B).catch(yg)}:tp;function yg(B){setTimeout(function(){throw B})}function Ei(B){return B==="head"}function np(B,P){var $=P,z=0;do{var Y=$.nextSibling;if(B.removeChild($),Y&&Y.nodeType===8)if($=Y.data,$==="/$"||$==="/&"){if(z===0){B.removeChild(Y),Vs(P);return}z--}else if($==="$"||$==="$?"||$==="$~"||$==="$!"||$==="&")z++;else if($==="html")Ko(B.ownerDocument.documentElement);else if($==="head"){$=B.ownerDocument.head,Ko($);for(var Z=$.firstChild;Z;){var fe=Z.nextSibling,Ce=Z.nodeName;Z[Xr]||Ce==="SCRIPT"||Ce==="STYLE"||Ce==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||$.removeChild(Z),Z=fe}}else $==="body"&&Ko(B.ownerDocument.body);$=Y}while($);Vs(P)}function ap(B,P){var $=B;B=0;do{var z=$.nextSibling;if($.nodeType===1?P?($._stashedDisplay=$.style.display,$.style.display="none"):($.style.display=$._stashedDisplay||"",$.getAttribute("style")===""&&$.removeAttribute("style")):$.nodeType===3&&(P?($._stashedText=$.nodeValue,$.nodeValue=""):$.nodeValue=$._stashedText||""),z&&z.nodeType===8)if($=z.data,$==="/$"){if(B===0)break;B--}else $!=="$"&&$!=="$?"&&$!=="$~"&&$!=="$!"||B++;$=z}while($)}function Cf(B){var P=B.firstChild;for(P&&P.nodeType===10&&(P=P.nextSibling);P;){var $=P;switch(P=P.nextSibling,$.nodeName){case"HTML":case"HEAD":case"BODY":Cf($),ti($);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if($.rel.toLowerCase()==="stylesheet")continue}B.removeChild($)}}function bg(B,P,$,z){for(;B.nodeType===1;){var Y=$;if(B.nodeName.toLowerCase()!==P.toLowerCase()){if(!z&&(B.nodeName!=="INPUT"||B.type!=="hidden"))break}else if(z){if(!B[Xr])switch(P){case"meta":if(!B.hasAttribute("itemprop"))break;return B;case"link":if(Z=B.getAttribute("rel"),Z==="stylesheet"&&B.hasAttribute("data-precedence"))break;if(Z!==Y.rel||B.getAttribute("href")!==(Y.href==null||Y.href===""?null:Y.href)||B.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||B.getAttribute("title")!==(Y.title==null?null:Y.title))break;return B;case"style":if(B.hasAttribute("data-precedence"))break;return B;case"script":if(Z=B.getAttribute("src"),(Z!==(Y.src==null?null:Y.src)||B.getAttribute("type")!==(Y.type==null?null:Y.type)||B.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&Z&&B.hasAttribute("async")&&!B.hasAttribute("itemprop"))break;return B;default:return B}}else if(P==="input"&&B.type==="hidden"){var Z=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&B.getAttribute("name")===Z)return B}else return B;if(B=ia(B.nextSibling),B===null)break}return null}function Sg(B,P,$){if(P==="")return null;for(;B.nodeType!==3;)if((B.nodeType!==1||B.nodeName!=="INPUT"||B.type!=="hidden")&&!$||(B=ia(B.nextSibling),B===null))return null;return B}function ip(B,P){for(;B.nodeType!==8;)if((B.nodeType!==1||B.nodeName!=="INPUT"||B.type!=="hidden")&&!P||(B=ia(B.nextSibling),B===null))return null;return B}function Ef(B){return B.data==="$?"||B.data==="$~"}function Rf(B){return B.data==="$!"||B.data==="$?"&&B.ownerDocument.readyState!=="loading"}function xg(B,P){var $=B.ownerDocument;if(B.data==="$~")B._reactRetry=P;else if(B.data!=="$?"||$.readyState!=="loading")P();else{var z=function(){P(),$.removeEventListener("DOMContentLoaded",z)};$.addEventListener("DOMContentLoaded",z),B._reactRetry=z}}function ia(B){for(;B!=null;B=B.nextSibling){var P=B.nodeType;if(P===1||P===3)break;if(P===8){if(P=B.data,P==="$"||P==="$!"||P==="$?"||P==="$~"||P==="&"||P==="F!"||P==="F")break;if(P==="/$"||P==="/&")return null}}return B}var Tf=null;function sp(B){B=B.nextSibling;for(var P=0;B;){if(B.nodeType===8){var $=B.data;if($==="/$"||$==="/&"){if(P===0)return ia(B.nextSibling);P--}else $!=="$"&&$!=="$!"&&$!=="$?"&&$!=="$~"&&$!=="&"||P++}B=B.nextSibling}return null}function op(B){B=B.previousSibling;for(var P=0;B;){if(B.nodeType===8){var $=B.data;if($==="$"||$==="$!"||$==="$?"||$==="$~"||$==="&"){if(P===0)return B;P--}else $!=="/$"&&$!=="/&"||P++}B=B.previousSibling}return null}function lp(B,P,$){switch(P=du($),B){case"html":if(B=P.documentElement,!B)throw Error(R(452));return B;case"head":if(B=P.head,!B)throw Error(R(453));return B;case"body":if(B=P.body,!B)throw Error(R(454));return B;default:throw Error(R(451))}}function Ko(B){for(var P=B.attributes;P.length;)B.removeAttributeNode(P[0]);ti(B)}var sa=new Map,up=new Set;function pu(B){return typeof B.getRootNode=="function"?B.getRootNode():B.nodeType===9?B:B.ownerDocument}var ei=be.d;be.d={f:wg,r:_g,D:Cg,C:Eg,L:Rg,m:Tg,X:kg,S:Ag,M:qg};function wg(){var B=ei.f(),P=iu();return B||P}function _g(B){var P=Ea(B);P!==null&&P.tag===5&&P.type==="form"?Rh(P):ei.r(B)}var Fs=typeof document>"u"?null:document;function cp(B,P,$){var z=Fs;if(z&&typeof P=="string"&&P){var Y=qn(P);Y='link[rel="'+B+'"][href="'+Y+'"]',typeof $=="string"&&(Y+='[crossorigin="'+$+'"]'),up.has(Y)||(up.add(Y),B={rel:B,crossOrigin:$,href:P},z.querySelector(Y)===null&&(P=z.createElement("link"),bn(P,"link",B),Lr(P),z.head.appendChild(P)))}}function Cg(B){ei.D(B),cp("dns-prefetch",B,null)}function Eg(B,P){ei.C(B,P),cp("preconnect",B,P)}function Rg(B,P,$){ei.L(B,P,$);var z=Fs;if(z&&B&&P){var Y='link[rel="preload"][as="'+qn(P)+'"]';P==="image"&&$&&$.imageSrcSet?(Y+='[imagesrcset="'+qn($.imageSrcSet)+'"]',typeof $.imageSizes=="string"&&(Y+='[imagesizes="'+qn($.imageSizes)+'"]')):Y+='[href="'+qn(B)+'"]';var Z=Y;switch(P){case"style":Z=zs(B);break;case"script":Z=Hs(B)}sa.has(Z)||(B=I({rel:"preload",href:P==="image"&&$&&$.imageSrcSet?void 0:B,as:P},$),sa.set(Z,B),z.querySelector(Y)!==null||P==="style"&&z.querySelector(Wo(Z))||P==="script"&&z.querySelector(Yo(Z))||(P=z.createElement("link"),bn(P,"link",B),Lr(P),z.head.appendChild(P)))}}function Tg(B,P){ei.m(B,P);var $=Fs;if($&&B){var z=P&&typeof P.as=="string"?P.as:"script",Y='link[rel="modulepreload"][as="'+qn(z)+'"][href="'+qn(B)+'"]',Z=Y;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Z=Hs(B)}if(!sa.has(Z)&&(B=I({rel:"modulepreload",href:B},P),sa.set(Z,B),$.querySelector(Y)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if($.querySelector(Yo(Z)))return}z=$.createElement("link"),bn(z,"link",B),Lr(z),$.head.appendChild(z)}}}function Ag(B,P,$){ei.S(B,P,$);var z=Fs;if(z&&B){var Y=Ra(z).hoistableStyles,Z=zs(B);P=P||"default";var fe=Y.get(Z);if(!fe){var Ce={loading:0,preload:null};if(fe=z.querySelector(Wo(Z)))Ce.loading=5;else{B=I({rel:"stylesheet",href:B,"data-precedence":P},$),($=sa.get(Z))&&Af(B,$);var Oe=fe=z.createElement("link");Lr(Oe),bn(Oe,"link",B),Oe._p=new Promise(function(Ye,at){Oe.onload=Ye,Oe.onerror=at}),Oe.addEventListener("load",function(){Ce.loading|=1}),Oe.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,gu(fe,P,z)}fe={type:"stylesheet",instance:fe,count:1,state:Ce},Y.set(Z,fe)}}}function kg(B,P){ei.X(B,P);var $=Fs;if($&&B){var z=Ra($).hoistableScripts,Y=Hs(B),Z=z.get(Y);Z||(Z=$.querySelector(Yo(Y)),Z||(B=I({src:B,async:!0},P),(P=sa.get(Y))&&kf(B,P),Z=$.createElement("script"),Lr(Z),bn(Z,"link",B),$.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},z.set(Y,Z))}}function qg(B,P){ei.M(B,P);var $=Fs;if($&&B){var z=Ra($).hoistableScripts,Y=Hs(B),Z=z.get(Y);Z||(Z=$.querySelector(Yo(Y)),Z||(B=I({src:B,async:!0,type:"module"},P),(P=sa.get(Y))&&kf(B,P),Z=$.createElement("script"),Lr(Z),bn(Z,"link",B),$.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},z.set(Y,Z))}}function fp(B,P,$,z){var Y=(Y=qe.current)?pu(Y):null;if(!Y)throw Error(R(446));switch(B){case"meta":case"title":return null;case"style":return typeof $.precedence=="string"&&typeof $.href=="string"?(P=zs($.href),$=Ra(Y).hoistableStyles,z=$.get(P),z||(z={type:"style",instance:null,count:0,state:null},$.set(P,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if($.rel==="stylesheet"&&typeof $.href=="string"&&typeof $.precedence=="string"){B=zs($.href);var Z=Ra(Y).hoistableStyles,fe=Z.get(B);if(fe||(Y=Y.ownerDocument||Y,fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Z.set(B,fe),(Z=Y.querySelector(Wo(B)))&&!Z._p&&(fe.instance=Z,fe.state.loading=5),sa.has(B)||($={rel:"preload",as:"style",href:$.href,crossOrigin:$.crossOrigin,integrity:$.integrity,media:$.media,hrefLang:$.hrefLang,referrerPolicy:$.referrerPolicy},sa.set(B,$),Z||Dg(Y,B,$,fe.state))),P&&z===null)throw Error(R(528,""));return fe}if(P&&z!==null)throw Error(R(529,""));return null;case"script":return P=$.async,$=$.src,typeof $=="string"&&P&&typeof P!="function"&&typeof P!="symbol"?(P=Hs($),$=Ra(Y).hoistableScripts,z=$.get(P),z||(z={type:"script",instance:null,count:0,state:null},$.set(P,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(R(444,B))}}function zs(B){return'href="'+qn(B)+'"'}function Wo(B){return'link[rel="stylesheet"]['+B+"]"}function hp(B){return I({},B,{"data-precedence":B.precedence,precedence:null})}function Dg(B,P,$,z){B.querySelector('link[rel="preload"][as="style"]['+P+"]")?z.loading=1:(P=B.createElement("link"),z.preload=P,P.addEventListener("load",function(){return z.loading|=1}),P.addEventListener("error",function(){return z.loading|=2}),bn(P,"link",$),Lr(P),B.head.appendChild(P))}function Hs(B){return'[src="'+qn(B)+'"]'}function Yo(B){return"script[async]"+B}function dp(B,P,$){if(P.count++,P.instance===null)switch(P.type){case"style":var z=B.querySelector('style[data-href~="'+qn($.href)+'"]');if(z)return P.instance=z,Lr(z),z;var Y=I({},$,{"data-href":$.href,"data-precedence":$.precedence,href:null,precedence:null});return z=(B.ownerDocument||B).createElement("style"),Lr(z),bn(z,"style",Y),gu(z,$.precedence,B),P.instance=z;case"stylesheet":Y=zs($.href);var Z=B.querySelector(Wo(Y));if(Z)return P.state.loading|=4,P.instance=Z,Lr(Z),Z;z=hp($),(Y=sa.get(Y))&&Af(z,Y),Z=(B.ownerDocument||B).createElement("link"),Lr(Z);var fe=Z;return fe._p=new Promise(function(Ce,Oe){fe.onload=Ce,fe.onerror=Oe}),bn(Z,"link",z),P.state.loading|=4,gu(Z,$.precedence,B),P.instance=Z;case"script":return Z=Hs($.src),(Y=B.querySelector(Yo(Z)))?(P.instance=Y,Lr(Y),Y):(z=$,(Y=sa.get(Z))&&(z=I({},$),kf(z,Y)),B=B.ownerDocument||B,Y=B.createElement("script"),Lr(Y),bn(Y,"link",z),B.head.appendChild(Y),P.instance=Y);case"void":return null;default:throw Error(R(443,P.type))}else P.type==="stylesheet"&&(P.state.loading&4)===0&&(z=P.instance,P.state.loading|=4,gu(z,$.precedence,B));return P.instance}function gu(B,P,$){for(var z=$.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=z.length?z[z.length-1]:null,Z=Y,fe=0;fe<z.length;fe++){var Ce=z[fe];if(Ce.dataset.precedence===P)Z=Ce;else if(Z!==Y)break}Z?Z.parentNode.insertBefore(B,Z.nextSibling):(P=$.nodeType===9?$.head:$,P.insertBefore(B,P.firstChild))}function Af(B,P){B.crossOrigin==null&&(B.crossOrigin=P.crossOrigin),B.referrerPolicy==null&&(B.referrerPolicy=P.referrerPolicy),B.title==null&&(B.title=P.title)}function kf(B,P){B.crossOrigin==null&&(B.crossOrigin=P.crossOrigin),B.referrerPolicy==null&&(B.referrerPolicy=P.referrerPolicy),B.integrity==null&&(B.integrity=P.integrity)}var vu=null;function pp(B,P,$){if(vu===null){var z=new Map,Y=vu=new Map;Y.set($,z)}else Y=vu,z=Y.get($),z||(z=new Map,Y.set($,z));if(z.has(B))return z;for(z.set(B,null),$=$.getElementsByTagName(B),Y=0;Y<$.length;Y++){var Z=$[Y];if(!(Z[Xr]||Z[Tr]||B==="link"&&Z.getAttribute("rel")==="stylesheet")&&Z.namespaceURI!=="http://www.w3.org/2000/svg"){var fe=Z.getAttribute(P)||"";fe=B+fe;var Ce=z.get(fe);Ce?Ce.push(Z):z.set(fe,[Z])}}return z}function gp(B,P,$){B=B.ownerDocument||B,B.head.insertBefore($,P==="title"?B.querySelector("head > title"):null)}function Mg(B,P,$){if($===1||P.itemProp!=null)return!1;switch(B){case"meta":case"title":return!0;case"style":if(typeof P.precedence!="string"||typeof P.href!="string"||P.href==="")break;return!0;case"link":if(typeof P.rel!="string"||typeof P.href!="string"||P.href===""||P.onLoad||P.onError)break;switch(P.rel){case"stylesheet":return B=P.disabled,typeof P.precedence=="string"&&B==null;default:return!0}case"script":if(P.async&&typeof P.async!="function"&&typeof P.async!="symbol"&&!P.onLoad&&!P.onError&&P.src&&typeof P.src=="string")return!0}return!1}function vp(B){return!(B.type==="stylesheet"&&(B.state.loading&3)===0)}function Bg(B,P,$,z){if($.type==="stylesheet"&&(typeof z.media!="string"||matchMedia(z.media).matches!==!1)&&($.state.loading&4)===0){if($.instance===null){var Y=zs(z.href),Z=P.querySelector(Wo(Y));if(Z){P=Z._p,P!==null&&typeof P=="object"&&typeof P.then=="function"&&(B.count++,B=mu.bind(B),P.then(B,B)),$.state.loading|=4,$.instance=Z,Lr(Z);return}Z=P.ownerDocument||P,z=hp(z),(Y=sa.get(Y))&&Af(z,Y),Z=Z.createElement("link"),Lr(Z);var fe=Z;fe._p=new Promise(function(Ce,Oe){fe.onload=Ce,fe.onerror=Oe}),bn(Z,"link",z),$.instance=Z}B.stylesheets===null&&(B.stylesheets=new Map),B.stylesheets.set($,P),(P=$.state.preload)&&($.state.loading&3)===0&&(B.count++,$=mu.bind(B),P.addEventListener("load",$),P.addEventListener("error",$))}}var qf=0;function Og(B,P){return B.stylesheets&&B.count===0&&bu(B,B.stylesheets),0<B.count||0<B.imgCount?function($){var z=setTimeout(function(){if(B.stylesheets&&bu(B,B.stylesheets),B.unsuspend){var Z=B.unsuspend;B.unsuspend=null,Z()}},6e4+P);0<B.imgBytes&&qf===0&&(qf=62500*pg());var Y=setTimeout(function(){if(B.waitingForImages=!1,B.count===0&&(B.stylesheets&&bu(B,B.stylesheets),B.unsuspend)){var Z=B.unsuspend;B.unsuspend=null,Z()}},(B.imgBytes>qf?50:800)+P);return B.unsuspend=$,function(){B.unsuspend=null,clearTimeout(z),clearTimeout(Y)}}:null}function mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bu(this,this.stylesheets);else if(this.unsuspend){var B=this.unsuspend;this.unsuspend=null,B()}}}var yu=null;function bu(B,P){B.stylesheets=null,B.unsuspend!==null&&(B.count++,yu=new Map,P.forEach(Lg,B),yu=null,mu.call(B))}function Lg(B,P){if(!(P.state.loading&4)){var $=yu.get(B);if($)var z=$.get(null);else{$=new Map,yu.set(B,$);for(var Y=B.querySelectorAll("link[data-precedence],style[data-precedence]"),Z=0;Z<Y.length;Z++){var fe=Y[Z];(fe.nodeName==="LINK"||fe.getAttribute("media")!=="not all")&&($.set(fe.dataset.precedence,fe),z=fe)}z&&$.set(null,z)}Y=P.instance,fe=Y.getAttribute("data-precedence"),Z=$.get(fe)||z,Z===z&&$.set(null,Y),$.set(fe,Y),this.count++,z=mu.bind(this),Y.addEventListener("load",z),Y.addEventListener("error",z),Z?Z.parentNode.insertBefore(Y,Z.nextSibling):(B=B.nodeType===9?B.head:B,B.insertBefore(Y,B.firstChild)),P.state.loading|=4}}var Xo={$$typeof:X,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function Pg(B,P,$,z,Y,Z,fe,Ce,Oe){this.tag=1,this.containerInfo=B,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=z,this.onUncaughtError=Y,this.onCaughtError=Z,this.onRecoverableError=fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function mp(B,P,$,z,Y,Z,fe,Ce,Oe,Ye,at,ct){return B=new Pg(B,P,$,fe,Oe,Ye,at,ct,Ce),P=1,Z===!0&&(P|=24),Z=vn(3,null,null,P),B.current=Z,Z.stateNode=B,P=Xe(),P.refCount++,B.pooledCache=P,P.refCount++,Z.memoizedState={element:z,isDehydrated:$,cache:P},hc(Z),B}function yp(B){return B?(B=ci,B):ci}function bp(B,P,$,z,Y,Z){Y=yp(Y),z.context===null?z.context=Y:z.pendingContext=Y,z=pi(P),z.payload={element:$},Z=Z===void 0?null:Z,Z!==null&&(z.callback=Z),$=gi(B,z,P),$!==null&&(zn($,B,P),Ao($,B,P))}function Sp(B,P){if(B=B.memoizedState,B!==null&&B.dehydrated!==null){var $=B.retryLane;B.retryLane=$!==0&&$<P?$:P}}function Df(B,P){Sp(B,P),(B=B.alternate)&&Sp(B,P)}function xp(B){if(B.tag===13||B.tag===31){var P=za(B,67108864);P!==null&&zn(P,B,67108864),Df(B,67108864)}}function wp(B){if(B.tag===13||B.tag===31){var P=Yn();P=_r(P);var $=za(B,P);$!==null&&zn($,B,P),Df(B,P)}}var Su=!0;function Ig(B,P,$,z){var Y=ge.T;ge.T=null;var Z=be.p;try{be.p=2,Mf(B,P,$,z)}finally{be.p=Z,ge.T=Y}}function $g(B,P,$,z){var Y=ge.T;ge.T=null;var Z=be.p;try{be.p=8,Mf(B,P,$,z)}finally{be.p=Z,ge.T=Y}}function Mf(B,P,$,z){if(Su){var Y=Bf(z);if(Y===null)yf(B,P,z,xu,$),Cp(B,z);else if(Fg(Y,B,P,$,z))z.stopPropagation();else if(Cp(B,z),P&4&&-1<Ng.indexOf(B)){for(;Y!==null;){var Z=Ea(Y);if(Z!==null)switch(Z.tag){case 3:if(Z=Z.stateNode,Z.current.memoizedState.isDehydrated){var fe=Nt(Z.pendingLanes);if(fe!==0){var Ce=Z;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;fe;){var Oe=1<<31-Ze(fe);Ce.entanglements[1]|=Oe,fe&=~Oe}Pa(Z),(hr&6)===0&&(nu=xt()+500,Uo(0))}}break;case 31:case 13:Ce=za(Z,2),Ce!==null&&zn(Ce,Z,2),iu(),Df(Z,2)}if(Z=Bf(z),Z===null&&yf(B,P,z,xu,$),Z===Y)break;Y=Z}Y!==null&&z.stopPropagation()}else yf(B,P,z,null,$)}}function Bf(B){return B=Qs(B),Of(B)}var xu=null;function Of(B){if(xu=null,B=Ca(B),B!==null){var P=A(B);if(P===null)B=null;else{var $=P.tag;if($===13){if(B=k(P),B!==null)return B;B=null}else if($===31){if(B=q(P),B!==null)return B;B=null}else if($===3){if(P.stateNode.current.memoizedState.isDehydrated)return P.tag===3?P.stateNode.containerInfo:null;B=null}else P!==B&&(B=null)}}return xu=B,null}function _p(B){switch(B){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case zt:return 2;case jt:return 8;case At:case Ot:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var Lf=!1,Ri=null,Ti=null,Ai=null,Qo=new Map,Zo=new Map,ki=[],Ng="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cp(B,P){switch(B){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":Qo.delete(P.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(P.pointerId)}}function Jo(B,P,$,z,Y,Z){return B===null||B.nativeEvent!==Z?(B={blockedOn:P,domEventName:$,eventSystemFlags:z,nativeEvent:Z,targetContainers:[Y]},P!==null&&(P=Ea(P),P!==null&&xp(P)),B):(B.eventSystemFlags|=z,P=B.targetContainers,Y!==null&&P.indexOf(Y)===-1&&P.push(Y),B)}function Fg(B,P,$,z,Y){switch(P){case"focusin":return Ri=Jo(Ri,B,P,$,z,Y),!0;case"dragenter":return Ti=Jo(Ti,B,P,$,z,Y),!0;case"mouseover":return Ai=Jo(Ai,B,P,$,z,Y),!0;case"pointerover":var Z=Y.pointerId;return Qo.set(Z,Jo(Qo.get(Z)||null,B,P,$,z,Y)),!0;case"gotpointercapture":return Z=Y.pointerId,Zo.set(Z,Jo(Zo.get(Z)||null,B,P,$,z,Y)),!0}return!1}function Ep(B){var P=Ca(B.target);if(P!==null){var $=A(P);if($!==null){if(P=$.tag,P===13){if(P=k($),P!==null){B.blockedOn=P,kn(B.priority,function(){wp($)});return}}else if(P===31){if(P=q($),P!==null){B.blockedOn=P,kn(B.priority,function(){wp($)});return}}else if(P===3&&$.stateNode.current.memoizedState.isDehydrated){B.blockedOn=$.tag===3?$.stateNode.containerInfo:null;return}}}B.blockedOn=null}function wu(B){if(B.blockedOn!==null)return!1;for(var P=B.targetContainers;0<P.length;){var $=Bf(B.nativeEvent);if($===null){$=B.nativeEvent;var z=new $.constructor($.type,$);Ys=z,$.target.dispatchEvent(z),Ys=null}else return P=Ea($),P!==null&&xp(P),B.blockedOn=$,!1;P.shift()}return!0}function Rp(B,P,$){wu(B)&&$.delete(P)}function zg(){Lf=!1,Ri!==null&&wu(Ri)&&(Ri=null),Ti!==null&&wu(Ti)&&(Ti=null),Ai!==null&&wu(Ai)&&(Ai=null),Qo.forEach(Rp),Zo.forEach(Rp)}function _u(B,P){B.blockedOn===P&&(B.blockedOn=null,Lf||(Lf=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,zg)))}var Cu=null;function Tp(B){Cu!==B&&(Cu=B,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){Cu===B&&(Cu=null);for(var P=0;P<B.length;P+=3){var $=B[P],z=B[P+1],Y=B[P+2];if(typeof z!="function"){if(Of(z||$)===null)continue;break}var Z=Ea($);Z!==null&&(B.splice(P,3),P-=3,Mc(Z,{pending:!0,data:Y,method:$.method,action:z},z,Y))}}))}function Vs(B){function P(Oe){return _u(Oe,B)}Ri!==null&&_u(Ri,B),Ti!==null&&_u(Ti,B),Ai!==null&&_u(Ai,B),Qo.forEach(P),Zo.forEach(P);for(var $=0;$<ki.length;$++){var z=ki[$];z.blockedOn===B&&(z.blockedOn=null)}for(;0<ki.length&&($=ki[0],$.blockedOn===null);)Ep($),$.blockedOn===null&&ki.shift();if($=(B.ownerDocument||B).$$reactFormReplay,$!=null)for(z=0;z<$.length;z+=3){var Y=$[z],Z=$[z+1],fe=Y[zr]||null;if(typeof Z=="function")fe||Tp($);else if(fe){var Ce=null;if(Z&&Z.hasAttribute("formAction")){if(Y=Z,fe=Z[zr]||null)Ce=fe.formAction;else if(Of(Y)!==null)continue}else Ce=fe.action;typeof Ce=="function"?$[z+1]=Ce:($.splice(z,3),z-=3),Tp($)}}}function Ap(){function B(Z){Z.canIntercept&&Z.info==="react-transition"&&Z.intercept({handler:function(){return new Promise(function(fe){return Y=fe})},focusReset:"manual",scroll:"manual"})}function P(){Y!==null&&(Y(),Y=null),z||setTimeout($,20)}function $(){if(!z&&!navigation.transition){var Z=navigation.currentEntry;Z&&Z.url!=null&&navigation.navigate(Z.url,{state:Z.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var z=!1,Y=null;return navigation.addEventListener("navigate",B),navigation.addEventListener("navigatesuccess",P),navigation.addEventListener("navigateerror",P),setTimeout($,100),function(){z=!0,navigation.removeEventListener("navigate",B),navigation.removeEventListener("navigatesuccess",P),navigation.removeEventListener("navigateerror",P),Y!==null&&(Y(),Y=null)}}}function Pf(B){this._internalRoot=B}Eu.prototype.render=Pf.prototype.render=function(B){var P=this._internalRoot;if(P===null)throw Error(R(409));var $=P.current,z=Yn();bp($,z,B,P,null,null)},Eu.prototype.unmount=Pf.prototype.unmount=function(){var B=this._internalRoot;if(B!==null){this._internalRoot=null;var P=B.containerInfo;bp(B.current,2,null,B,null,null),iu(),P[Sn]=null}};function Eu(B){this._internalRoot=B}Eu.prototype.unstable_scheduleHydration=function(B){if(B){var P=Er();B={blockedOn:null,target:B,priority:P};for(var $=0;$<ki.length&&P!==0&&P<ki[$].priority;$++);ki.splice($,0,B),$===0&&Ep(B)}};var kp=v.version;if(kp!=="19.2.0")throw Error(R(527,kp,"19.2.0"));be.findDOMNode=function(B){var P=B._reactInternals;if(P===void 0)throw typeof B.render=="function"?Error(R(188)):(B=Object.keys(B).join(","),Error(R(268,B)));return B=D(P),B=B!==null?L(B):null,B=B===null?null:B.stateNode,B};var Hg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{we=Ru.inject(Hg),Fe=Ru}catch{}}return reactDomClient_production.createRoot=function(B,P){if(!T(B))throw Error(R(299));var $=!1,z="",Y=Ph,Z=Ih,fe=$h;return P!=null&&(P.unstable_strictMode===!0&&($=!0),P.identifierPrefix!==void 0&&(z=P.identifierPrefix),P.onUncaughtError!==void 0&&(Y=P.onUncaughtError),P.onCaughtError!==void 0&&(Z=P.onCaughtError),P.onRecoverableError!==void 0&&(fe=P.onRecoverableError)),P=mp(B,1,!1,null,null,$,z,null,Y,Z,fe,Ap),B[Sn]=P.current,mf(B),new Pf(P)},reactDomClient_production.hydrateRoot=function(B,P,$){if(!T(B))throw Error(R(299));var z=!1,Y="",Z=Ph,fe=Ih,Ce=$h,Oe=null;return $!=null&&($.unstable_strictMode===!0&&(z=!0),$.identifierPrefix!==void 0&&(Y=$.identifierPrefix),$.onUncaughtError!==void 0&&(Z=$.onUncaughtError),$.onCaughtError!==void 0&&(fe=$.onCaughtError),$.onRecoverableError!==void 0&&(Ce=$.onRecoverableError),$.formState!==void 0&&(Oe=$.formState)),P=mp(B,1,!0,P,$??null,z,Y,Oe,Z,fe,Ce,Ap),P.context=yp(null),$=P.current,z=Yn(),z=_r(z),Y=pi(z),Y.callback=null,gi($,Y,z),$=z,P.current.lanes=$,Vt(P,$),Pa(P),B[Sn]=P.current,mf(B),new Eu(P)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(v){console.error(v)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createBrowserHistory(_={}){function v(R,T){let{pathname:A,search:k,hash:q}=R.location;return createLocation("",{pathname:A,search:k,hash:q},T.state&&T.state.usr||null,T.state&&T.state.key||"default")}function S(R,T){return typeof T=="string"?T:createPath(T)}return getUrlBasedHistory(v,S,null,_)}function invariant(_,v){if(_===!1||_===null||typeof _>"u")throw new Error(v)}function warning(_,v){if(!_){typeof console<"u"&&console.warn(v);try{throw new Error(v)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(_,v){return{usr:_.state,key:_.key,idx:v}}function createLocation(_,v,S=null,R){return{pathname:typeof _=="string"?_:_.pathname,search:"",hash:"",...typeof v=="string"?parsePath(v):v,state:S,key:v&&v.key||R||createKey()}}function createPath({pathname:_="/",search:v="",hash:S=""}){return v&&v!=="?"&&(_+=v.charAt(0)==="?"?v:"?"+v),S&&S!=="#"&&(_+=S.charAt(0)==="#"?S:"#"+S),_}function parsePath(_){let v={};if(_){let S=_.indexOf("#");S>=0&&(v.hash=_.substring(S),_=_.substring(0,S));let R=_.indexOf("?");R>=0&&(v.search=_.substring(R),_=_.substring(0,R)),_&&(v.pathname=_)}return v}function getUrlBasedHistory(_,v,S,R={}){let{window:T=document.defaultView,v5Compat:A=!1}=R,k=T.history,q="POP",M=null,D=L();D==null&&(D=0,k.replaceState({...k.state,idx:D},""));function L(){return(k.state||{idx:null}).idx}function I(){q="POP";let V=L(),j=V==null?null:V-D;D=V,M&&M({action:q,location:G.location,delta:j})}function N(V,j){q="PUSH";let W=createLocation(G.location,V,j);D=L()+1;let X=getHistoryState(W,D),J=G.createHref(W);try{k.pushState(X,"",J)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;T.location.assign(J)}A&&M&&M({action:q,location:G.location,delta:1})}function F(V,j){q="REPLACE";let W=createLocation(G.location,V,j);D=L();let X=getHistoryState(W,D),J=G.createHref(W);k.replaceState(X,"",J),A&&M&&M({action:q,location:G.location,delta:0})}function H(V){return createBrowserURLImpl(V)}let G={get action(){return q},get location(){return _(T,k)},listen(V){if(M)throw new Error("A history only accepts one active listener");return T.addEventListener(PopStateEventType,I),M=V,()=>{T.removeEventListener(PopStateEventType,I),M=null}},createHref(V){return v(T,V)},createURL:H,encodeLocation(V){let j=H(V);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:N,replace:F,go(V){return k.go(V)}};return G}function createBrowserURLImpl(_,v=!1){let S="http://localhost";typeof window<"u"&&(S=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(S,"No window.location.(origin|href) available to create URL");let R=typeof _=="string"?_:createPath(_);return R=R.replace(/ $/,"%20"),!v&&R.startsWith("//")&&(R=S+R),new URL(R,S)}function matchRoutes(_,v,S="/"){return matchRoutesImpl(_,v,S,!1)}function matchRoutesImpl(_,v,S,R){let T=typeof v=="string"?parsePath(v):v,A=stripBasename(T.pathname||"/",S);if(A==null)return null;let k=flattenRoutes(_);rankRouteBranches(k);let q=null;for(let M=0;q==null&&M<k.length;++M){let D=decodePath(A);q=matchRouteBranch(k[M],D,R)}return q}function flattenRoutes(_,v=[],S=[],R="",T=!1){let A=(k,q,M=T,D)=>{let L={relativePath:D===void 0?k.path||"":D,caseSensitive:k.caseSensitive===!0,childrenIndex:q,route:k};if(L.relativePath.startsWith("/")){if(!L.relativePath.startsWith(R)&&M)return;invariant(L.relativePath.startsWith(R),`Absolute route path "${L.relativePath}" nested under path "${R}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),L.relativePath=L.relativePath.slice(R.length)}let I=joinPaths([R,L.relativePath]),N=S.concat(L);k.children&&k.children.length>0&&(invariant(k.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),flattenRoutes(k.children,v,N,I,M)),!(k.path==null&&!k.index)&&v.push({path:I,score:computeScore(I,k.index),routesMeta:N})};return _.forEach((k,q)=>{if(k.path===""||!k.path?.includes("?"))A(k,q);else for(let M of explodeOptionalSegments(k.path))A(k,q,!0,M)}),v}function explodeOptionalSegments(_){let v=_.split("/");if(v.length===0)return[];let[S,...R]=v,T=S.endsWith("?"),A=S.replace(/\?$/,"");if(R.length===0)return T?[A,""]:[A];let k=explodeOptionalSegments(R.join("/")),q=[];return q.push(...k.map(M=>M===""?A:[A,M].join("/"))),T&&q.push(...k),q.map(M=>_.startsWith("/")&&M===""?"/":M)}function rankRouteBranches(_){_.sort((v,S)=>v.score!==S.score?S.score-v.score:compareIndexes(v.routesMeta.map(R=>R.childrenIndex),S.routesMeta.map(R=>R.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_=>_==="*";function computeScore(_,v){let S=_.split("/"),R=S.length;return S.some(isSplat)&&(R+=splatPenalty),v&&(R+=indexRouteValue),S.filter(T=>!isSplat(T)).reduce((T,A)=>T+(paramRe.test(A)?dynamicSegmentValue:A===""?emptySegmentValue:staticSegmentValue),R)}function compareIndexes(_,v){return _.length===v.length&&_.slice(0,-1).every((R,T)=>R===v[T])?_[_.length-1]-v[v.length-1]:0}function matchRouteBranch(_,v,S=!1){let{routesMeta:R}=_,T={},A="/",k=[];for(let q=0;q<R.length;++q){let M=R[q],D=q===R.length-1,L=A==="/"?v:v.slice(A.length)||"/",I=matchPath({path:M.relativePath,caseSensitive:M.caseSensitive,end:D},L),N=M.route;if(!I&&D&&S&&!R[R.length-1].route.index&&(I=matchPath({path:M.relativePath,caseSensitive:M.caseSensitive,end:!1},L)),!I)return null;Object.assign(T,I.params),k.push({params:T,pathname:joinPaths([A,I.pathname]),pathnameBase:normalizePathname(joinPaths([A,I.pathnameBase])),route:N}),I.pathnameBase!=="/"&&(A=joinPaths([A,I.pathnameBase]))}return k}function matchPath(_,v){typeof _=="string"&&(_={path:_,caseSensitive:!1,end:!0});let[S,R]=compilePath(_.path,_.caseSensitive,_.end),T=v.match(S);if(!T)return null;let A=T[0],k=A.replace(/(.)\/+$/,"$1"),q=T.slice(1);return{params:R.reduce((D,{paramName:L,isOptional:I},N)=>{if(L==="*"){let H=q[N]||"";k=A.slice(0,A.length-H.length).replace(/(.)\/+$/,"$1")}const F=q[N];return I&&!F?D[L]=void 0:D[L]=(F||"").replace(/%2F/g,"/"),D},{}),pathname:A,pathnameBase:k,pattern:_}}function compilePath(_,v=!1,S=!0){warning(_==="*"||!_.endsWith("*")||_.endsWith("/*"),`Route path "${_}" will be treated as if it were "${_.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${_.replace(/\*$/,"/*")}".`);let R=[],T="^"+_.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(k,q,M)=>(R.push({paramName:q,isOptional:M!=null}),M?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return _.endsWith("*")?(R.push({paramName:"*"}),T+=_==="*"||_==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):S?T+="\\/*$":_!==""&&_!=="/"&&(T+="(?:(?=\\/|$))"),[new RegExp(T,v?void 0:"i"),R]}function decodePath(_){try{return _.split("/").map(v=>decodeURIComponent(v).replace(/\//g,"%2F")).join("/")}catch(v){return warning(!1,`The URL path "${_}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${v}).`),_}}function stripBasename(_,v){if(v==="/")return _;if(!_.toLowerCase().startsWith(v.toLowerCase()))return null;let S=v.endsWith("/")?v.length-1:v.length,R=_.charAt(S);return R&&R!=="/"?null:_.slice(S)||"/"}function resolvePath(_,v="/"){let{pathname:S,search:R="",hash:T=""}=typeof _=="string"?parsePath(_):_;return{pathname:S?S.startsWith("/")?S:resolvePathname(S,v):v,search:normalizeSearch(R),hash:normalizeHash(T)}}function resolvePathname(_,v){let S=v.replace(/\/+$/,"").split("/");return _.split("/").forEach(T=>{T===".."?S.length>1&&S.pop():T!=="."&&S.push(T)}),S.length>1?S.join("/"):"/"}function getInvalidPathError(_,v,S,R){return`Cannot include a '${_}' character in a manually specified \`to.${v}\` field [${JSON.stringify(R)}].  Please separate it out to the \`to.${S}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(_){return _.filter((v,S)=>S===0||v.route.path&&v.route.path.length>0)}function getResolveToMatches(_){let v=getPathContributingMatches(_);return v.map((S,R)=>R===v.length-1?S.pathname:S.pathnameBase)}function resolveTo(_,v,S,R=!1){let T;typeof _=="string"?T=parsePath(_):(T={..._},invariant(!T.pathname||!T.pathname.includes("?"),getInvalidPathError("?","pathname","search",T)),invariant(!T.pathname||!T.pathname.includes("#"),getInvalidPathError("#","pathname","hash",T)),invariant(!T.search||!T.search.includes("#"),getInvalidPathError("#","search","hash",T)));let A=_===""||T.pathname==="",k=A?"/":T.pathname,q;if(k==null)q=S;else{let I=v.length-1;if(!R&&k.startsWith("..")){let N=k.split("/");for(;N[0]==="..";)N.shift(),I-=1;T.pathname=N.join("/")}q=I>=0?v[I]:"/"}let M=resolvePath(T,q),D=k&&k!=="/"&&k.endsWith("/"),L=(A||k===".")&&S.endsWith("/");return!M.pathname.endsWith("/")&&(D||L)&&(M.pathname+="/"),M}var joinPaths=_=>_.join("/").replace(/\/\/+/g,"/"),normalizePathname=_=>_.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_=>!_||_==="?"?"":_.startsWith("?")?_:"?"+_,normalizeHash=_=>!_||_==="#"?"":_.startsWith("#")?_:"#"+_;function isRouteErrorResponse(_){return _!=null&&typeof _.status=="number"&&typeof _.statusText=="string"&&typeof _.internal=="boolean"&&"data"in _}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(_,{relative:v}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:S,navigator:R}=reactExports.useContext(NavigationContext),{hash:T,pathname:A,search:k}=useResolvedPath(_,{relative:v}),q=A;return S!=="/"&&(q=A==="/"?S:joinPaths([S,A])),R.createHref({pathname:q,search:k,hash:T})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(_){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_)}function useNavigate(){let{isDataRoute:_}=reactExports.useContext(RouteContext);return _?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let _=reactExports.useContext(DataRouterContext),{basename:v,navigator:S}=reactExports.useContext(NavigationContext),{matches:R}=reactExports.useContext(RouteContext),{pathname:T}=useLocation(),A=JSON.stringify(getResolveToMatches(R)),k=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{k.current=!0}),reactExports.useCallback((M,D={})=>{if(warning(k.current,navigateEffectWarning),!k.current)return;if(typeof M=="number"){S.go(M);return}let L=resolveTo(M,JSON.parse(A),T,D.relative==="path");_==null&&v!=="/"&&(L.pathname=L.pathname==="/"?v:joinPaths([v,L.pathname])),(D.replace?S.replace:S.push)(L,D.state,D)},[v,S,A,T,_])}reactExports.createContext(null);function useResolvedPath(_,{relative:v}={}){let{matches:S}=reactExports.useContext(RouteContext),{pathname:R}=useLocation(),T=JSON.stringify(getResolveToMatches(S));return reactExports.useMemo(()=>resolveTo(_,JSON.parse(T),R,v==="path"),[_,T,R,v])}function useRoutes(_,v){return useRoutesImpl(_,v)}function useRoutesImpl(_,v,S,R,T){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:A}=reactExports.useContext(NavigationContext),{matches:k}=reactExports.useContext(RouteContext),q=k[k.length-1],M=q?q.params:{},D=q?q.pathname:"/",L=q?q.pathnameBase:"/",I=q&&q.route;{let W=I&&I.path||"";warningOnce(D,!I||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${D}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let N=useLocation(),F;if(v){let W=typeof v=="string"?parsePath(v):v;invariant(L==="/"||W.pathname?.startsWith(L),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${L}" but pathname "${W.pathname}" was given in the \`location\` prop.`),F=W}else F=N;let H=F.pathname||"/",G=H;if(L!=="/"){let W=L.replace(/^\//,"").split("/");G="/"+H.replace(/^\//,"").split("/").slice(W.length).join("/")}let V=matchRoutes(_,{pathname:G});warning(I||V!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),warning(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=_renderMatches(V&&V.map(W=>Object.assign({},W,{params:Object.assign({},M,W.params),pathname:joinPaths([L,A.encodeLocation?A.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?L:joinPaths([L,A.encodeLocation?A.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),k,S,R,T);return v&&j?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},j):j}function DefaultErrorComponent(){let _=useRouteError(),v=isRouteErrorResponse(_)?`${_.status} ${_.statusText}`:_ instanceof Error?_.message:JSON.stringify(_),S=_ instanceof Error?_.stack:null,R="rgba(200,200,200, 0.5)",T={padding:"0.5rem",backgroundColor:R},A={padding:"2px 4px",backgroundColor:R},k=null;return console.error("Error handled by React Router default ErrorBoundary:",_),k=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:A},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:A},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},v),S?reactExports.createElement("pre",{style:T},S):null,k)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(_){super(_),this.state={location:_.location,revalidation:_.revalidation,error:_.error}}static getDerivedStateFromError(_){return{error:_}}static getDerivedStateFromProps(_,v){return v.location!==_.location||v.revalidation!=="idle"&&_.revalidation==="idle"?{error:_.error,location:_.location,revalidation:_.revalidation}:{error:_.error!==void 0?_.error:v.error,location:v.location,revalidation:_.revalidation||v.revalidation}}componentDidCatch(_,v){this.props.unstable_onError?this.props.unstable_onError(_,v):console.error("React Router caught the following error during render",_)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:_,match:v,children:S}){let R=reactExports.useContext(DataRouterContext);return R&&R.static&&R.staticContext&&(v.route.errorElement||v.route.ErrorBoundary)&&(R.staticContext._deepestRenderedBoundaryId=v.route.id),reactExports.createElement(RouteContext.Provider,{value:_},S)}function _renderMatches(_,v=[],S=null,R=null,T=null){if(_==null){if(!S)return null;if(S.errors)_=S.matches;else if(v.length===0&&!S.initialized&&S.matches.length>0)_=S.matches;else return null}let A=_,k=S?.errors;if(k!=null){let D=A.findIndex(L=>L.route.id&&k?.[L.route.id]!==void 0);invariant(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(k).join(",")}`),A=A.slice(0,Math.min(A.length,D+1))}let q=!1,M=-1;if(S)for(let D=0;D<A.length;D++){let L=A[D];if((L.route.HydrateFallback||L.route.hydrateFallbackElement)&&(M=D),L.route.id){let{loaderData:I,errors:N}=S,F=L.route.loader&&!I.hasOwnProperty(L.route.id)&&(!N||N[L.route.id]===void 0);if(L.route.lazy||F){q=!0,M>=0?A=A.slice(0,M+1):A=[A[0]];break}}}return A.reduceRight((D,L,I)=>{let N,F=!1,H=null,G=null;S&&(N=k&&L.route.id?k[L.route.id]:void 0,H=L.route.errorElement||defaultErrorElement,q&&(M<0&&I===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,G=null):M===I&&(F=!0,G=L.route.hydrateFallbackElement||null)));let V=v.concat(A.slice(0,I+1)),j=()=>{let W;return N?W=H:F?W=G:L.route.Component?W=reactExports.createElement(L.route.Component,null):L.route.element?W=L.route.element:W=D,reactExports.createElement(RenderedRoute,{match:L,routeContext:{outlet:D,matches:V,isDataRoute:S!=null},children:W})};return S&&(L.route.ErrorBoundary||L.route.errorElement||I===0)?reactExports.createElement(RenderErrorBoundary,{location:S.location,revalidation:S.revalidation,component:H,error:N,children:j(),routeContext:{outlet:null,matches:V,isDataRoute:!0},unstable_onError:R}):j()},null)}function getDataRouterConsoleError(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(_){let v=reactExports.useContext(DataRouterContext);return invariant(v,getDataRouterConsoleError(_)),v}function useDataRouterState(_){let v=reactExports.useContext(DataRouterStateContext);return invariant(v,getDataRouterConsoleError(_)),v}function useRouteContext(_){let v=reactExports.useContext(RouteContext);return invariant(v,getDataRouterConsoleError(_)),v}function useCurrentRouteId(_){let v=useRouteContext(_),S=v.matches[v.matches.length-1];return invariant(S.route.id,`${_} can only be used on routes that contain a unique "id"`),S.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let _=reactExports.useContext(RouteErrorContext),v=useDataRouterState("useRouteError"),S=useCurrentRouteId("useRouteError");return _!==void 0?_:v.errors?.[S]}function useNavigateStable(){let{router:_}=useDataRouterContext("useNavigate"),v=useCurrentRouteId("useNavigate"),S=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{S.current=!0}),reactExports.useCallback(async(T,A={})=>{warning(S.current,navigateEffectWarning),S.current&&(typeof T=="number"?_.navigate(T):await _.navigate(T,{fromRouteId:v,...A}))},[_,v])}var alreadyWarned={};function warningOnce(_,v,S){!v&&!alreadyWarned[_]&&(alreadyWarned[_]=!0,warning(!1,S))}reactExports.memo(DataRoutes);function DataRoutes({routes:_,future:v,state:S,unstable_onError:R}){return useRoutesImpl(_,void 0,S,R,v)}function Route(_){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:_="/",children:v=null,location:S,navigationType:R="POP",navigator:T,static:A=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let k=_.replace(/^\/*/,"/"),q=reactExports.useMemo(()=>({basename:k,navigator:T,static:A,future:{}}),[k,T,A]);typeof S=="string"&&(S=parsePath(S));let{pathname:M="/",search:D="",hash:L="",state:I=null,key:N="default"}=S,F=reactExports.useMemo(()=>{let H=stripBasename(M,k);return H==null?null:{location:{pathname:H,search:D,hash:L,state:I,key:N},navigationType:R}},[k,M,D,L,I,N,R]);return warning(F!=null,`<Router basename="${k}"> is not able to match the URL "${M}${D}${L}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:reactExports.createElement(NavigationContext.Provider,{value:q},reactExports.createElement(LocationContext.Provider,{children:v,value:F}))}function Routes({children:_,location:v}){return useRoutes(createRoutesFromChildren(_),v)}function createRoutesFromChildren(_,v=[]){let S=[];return reactExports.Children.forEach(_,(R,T)=>{if(!reactExports.isValidElement(R))return;let A=[...v,T];if(R.type===reactExports.Fragment){S.push.apply(S,createRoutesFromChildren(R.props.children,A));return}invariant(R.type===Route,`[${typeof R.type=="string"?R.type:R.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!R.props.index||!R.props.children,"An index route cannot have child routes.");let k={id:R.props.id||A.join("-"),caseSensitive:R.props.caseSensitive,element:R.props.element,Component:R.props.Component,index:R.props.index,path:R.props.path,middleware:R.props.middleware,loader:R.props.loader,action:R.props.action,hydrateFallbackElement:R.props.hydrateFallbackElement,HydrateFallback:R.props.HydrateFallback,errorElement:R.props.errorElement,ErrorBoundary:R.props.ErrorBoundary,hasErrorBoundary:R.props.hasErrorBoundary===!0||R.props.ErrorBoundary!=null||R.props.errorElement!=null,shouldRevalidate:R.props.shouldRevalidate,handle:R.props.handle,lazy:R.props.lazy};R.props.children&&(k.children=createRoutesFromChildren(R.props.children,A)),S.push(k)}),S}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(_){return _!=null&&typeof _.tagName=="string"}function isButtonElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="button"}function isFormElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="form"}function isInputElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="input"}function isModifiedEvent(_){return!!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)}function shouldProcessLinkClick(_,v){return _.button===0&&(!v||v==="_self")&&!isModifiedEvent(_)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(_){return _!=null&&!supportedFormEncTypes.has(_)?(warning(!1,`"${_}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):_}function getFormSubmissionInfo(_,v){let S,R,T,A,k;if(isFormElement(_)){let q=_.getAttribute("action");R=q?stripBasename(q,v):null,S=_.getAttribute("method")||defaultMethod,T=getFormEncType(_.getAttribute("enctype"))||defaultEncType,A=new FormData(_)}else if(isButtonElement(_)||isInputElement(_)&&(_.type==="submit"||_.type==="image")){let q=_.form;if(q==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let M=_.getAttribute("formaction")||q.getAttribute("action");if(R=M?stripBasename(M,v):null,S=_.getAttribute("formmethod")||q.getAttribute("method")||defaultMethod,T=getFormEncType(_.getAttribute("formenctype"))||getFormEncType(q.getAttribute("enctype"))||defaultEncType,A=new FormData(q,_),!isFormDataSubmitterSupported()){let{name:D,type:L,value:I}=_;if(L==="image"){let N=D?`${D}.`:"";A.append(`${N}x`,"0"),A.append(`${N}y`,"0")}else D&&A.append(D,I)}}else{if(isHtmlElement(_))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');S=defaultMethod,R=null,T=defaultEncType,k=_}return A&&T==="text/plain"&&(k=A,A=void 0),{action:R,method:S.toLowerCase(),encType:T,formData:A,body:k}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(_,v){if(_===!1||_===null||typeof _>"u")throw new Error(v)}function singleFetchUrl(_,v,S){let R=typeof _=="string"?new URL(_,typeof window>"u"?"server://singlefetch/":window.location.origin):_;return R.pathname==="/"?R.pathname=`_root.${S}`:v&&stripBasename(R.pathname,v)==="/"?R.pathname=`${v.replace(/\/$/,"")}/_root.${S}`:R.pathname=`${R.pathname.replace(/\/$/,"")}.${S}`,R}async function loadRouteModule(_,v){if(_.id in v)return v[_.id];try{let S=await import(_.module);return v[_.id]=S,S}catch(S){return console.error(`Error loading route module \`${_.module}\`, reloading page...`),console.error(S),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(_){return _==null?!1:_.href==null?_.rel==="preload"&&typeof _.imageSrcSet=="string"&&typeof _.imageSizes=="string":typeof _.rel=="string"&&typeof _.href=="string"}async function getKeyedPrefetchLinks(_,v,S){let R=await Promise.all(_.map(async T=>{let A=v.routes[T.route.id];if(A){let k=await loadRouteModule(A,S);return k.links?k.links():[]}return[]}));return dedupeLinkDescriptors(R.flat(1).filter(isHtmlLinkDescriptor).filter(T=>T.rel==="stylesheet"||T.rel==="preload").map(T=>T.rel==="stylesheet"?{...T,rel:"prefetch",as:"style"}:{...T,rel:"prefetch"}))}function getNewMatchesForLinks(_,v,S,R,T,A){let k=(M,D)=>S[D]?M.route.id!==S[D].route.id:!0,q=(M,D)=>S[D].pathname!==M.pathname||S[D].route.path?.endsWith("*")&&S[D].params["*"]!==M.params["*"];return A==="assets"?v.filter((M,D)=>k(M,D)||q(M,D)):A==="data"?v.filter((M,D)=>{let L=R.routes[M.route.id];if(!L||!L.hasLoader)return!1;if(k(M,D)||q(M,D))return!0;if(M.route.shouldRevalidate){let I=M.route.shouldRevalidate({currentUrl:new URL(T.pathname+T.search+T.hash,window.origin),currentParams:S[0]?.params||{},nextUrl:new URL(_,window.origin),nextParams:M.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function getModuleLinkHrefs(_,v,{includeHydrateFallback:S}={}){return dedupeHrefs(_.map(R=>{let T=v.routes[R.route.id];if(!T)return[];let A=[T.module];return T.clientActionModule&&(A=A.concat(T.clientActionModule)),T.clientLoaderModule&&(A=A.concat(T.clientLoaderModule)),S&&T.hydrateFallbackModule&&(A=A.concat(T.hydrateFallbackModule)),T.imports&&(A=A.concat(T.imports)),A}).flat(1))}function dedupeHrefs(_){return[...new Set(_)]}function sortKeys(_){let v={},S=Object.keys(_).sort();for(let R of S)v[R]=_[R];return v}function dedupeLinkDescriptors(_,v){let S=new Set;return new Set(v),_.reduce((R,T)=>{let A=JSON.stringify(sortKeys(T));return S.has(A)||(S.add(A),R.push({key:A,link:T})),R},[])}function useDataRouterContext2(){let _=reactExports.useContext(DataRouterContext);return invariant2(_,"You must render this element inside a <DataRouterContext.Provider> element"),_}function useDataRouterStateContext(){let _=reactExports.useContext(DataRouterStateContext);return invariant2(_,"You must render this element inside a <DataRouterStateContext.Provider> element"),_}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let _=reactExports.useContext(FrameworkContext);return invariant2(_,"You must render this element inside a <HydratedRouter> element"),_}function usePrefetchBehavior(_,v){let S=reactExports.useContext(FrameworkContext),[R,T]=reactExports.useState(!1),[A,k]=reactExports.useState(!1),{onFocus:q,onBlur:M,onMouseEnter:D,onMouseLeave:L,onTouchStart:I}=v,N=reactExports.useRef(null);reactExports.useEffect(()=>{if(_==="render"&&k(!0),_==="viewport"){let G=j=>{j.forEach(W=>{k(W.isIntersecting)})},V=new IntersectionObserver(G,{threshold:.5});return N.current&&V.observe(N.current),()=>{V.disconnect()}}},[_]),reactExports.useEffect(()=>{if(R){let G=setTimeout(()=>{k(!0)},100);return()=>{clearTimeout(G)}}},[R]);let F=()=>{T(!0)},H=()=>{T(!1),k(!1)};return S?_!=="intent"?[A,N,{}]:[A,N,{onFocus:composeEventHandlers(q,F),onBlur:composeEventHandlers(M,H),onMouseEnter:composeEventHandlers(D,F),onMouseLeave:composeEventHandlers(L,H),onTouchStart:composeEventHandlers(I,F)}]:[!1,N,{}]}function composeEventHandlers(_,v){return S=>{_&&_(S),S.defaultPrevented||v(S)}}function PrefetchPageLinks({page:_,...v}){let{router:S}=useDataRouterContext2(),R=reactExports.useMemo(()=>matchRoutes(S.routes,_,S.basename),[S.routes,_,S.basename]);return R?reactExports.createElement(PrefetchPageLinksImpl,{page:_,matches:R,...v}):null}function useKeyedPrefetchLinks(_){let{manifest:v,routeModules:S}=useFrameworkContext(),[R,T]=reactExports.useState([]);return reactExports.useEffect(()=>{let A=!1;return getKeyedPrefetchLinks(_,v,S).then(k=>{A||T(k)}),()=>{A=!0}},[_,v,S]),R}function PrefetchPageLinksImpl({page:_,matches:v,...S}){let R=useLocation(),{manifest:T,routeModules:A}=useFrameworkContext(),{basename:k}=useDataRouterContext2(),{loaderData:q,matches:M}=useDataRouterStateContext(),D=reactExports.useMemo(()=>getNewMatchesForLinks(_,v,M,T,R,"data"),[_,v,M,T,R]),L=reactExports.useMemo(()=>getNewMatchesForLinks(_,v,M,T,R,"assets"),[_,v,M,T,R]),I=reactExports.useMemo(()=>{if(_===R.pathname+R.search+R.hash)return[];let H=new Set,G=!1;if(v.forEach(j=>{let W=T.routes[j.route.id];!W||!W.hasLoader||(!D.some(X=>X.route.id===j.route.id)&&j.route.id in q&&A[j.route.id]?.shouldRevalidate||W.hasClientLoader?G=!0:H.add(j.route.id))}),H.size===0)return[];let V=singleFetchUrl(_,k,"data");return G&&H.size>0&&V.searchParams.set("_routes",v.filter(j=>H.has(j.route.id)).map(j=>j.route.id).join(",")),[V.pathname+V.search]},[k,q,R,T,D,v,_,A]),N=reactExports.useMemo(()=>getModuleLinkHrefs(L,T),[L,T]),F=useKeyedPrefetchLinks(L);return reactExports.createElement(reactExports.Fragment,null,I.map(H=>reactExports.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...S})),N.map(H=>reactExports.createElement("link",{key:H,rel:"modulepreload",href:H,...S})),F.map(({key:H,link:G})=>reactExports.createElement("link",{key:H,nonce:S.nonce,...G})))}function mergeRefs(..._){return v=>{_.forEach(S=>{typeof S=="function"?S(v):S!=null&&(S.current=v)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function BrowserRouter({basename:_,children:v,window:S}){let R=reactExports.useRef();R.current==null&&(R.current=createBrowserHistory({window:S,v5Compat:!0}));let T=R.current,[A,k]=reactExports.useState({action:T.action,location:T.location}),q=reactExports.useCallback(M=>{reactExports.startTransition(()=>k(M))},[k]);return reactExports.useLayoutEffect(()=>T.listen(q),[T,q]),reactExports.createElement(Router,{basename:_,children:v,location:A.location,navigationType:A.action,navigator:T})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:v,discover:S="render",prefetch:R="none",relative:T,reloadDocument:A,replace:k,state:q,target:M,to:D,preventScrollReset:L,viewTransition:I,...N},F){let{basename:H}=reactExports.useContext(NavigationContext),G=typeof D=="string"&&ABSOLUTE_URL_REGEX2.test(D),V,j=!1;if(typeof D=="string"&&G&&(V=D,isBrowser))try{let oe=new URL(window.location.href),ue=D.startsWith("//")?new URL(oe.protocol+D):new URL(D),ce=stripBasename(ue.pathname,H);ue.origin===oe.origin&&ce!=null?D=ce+ue.search+ue.hash:j=!0}catch{warning(!1,`<Link to="${D}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=useHref(D,{relative:T}),[X,J,te]=usePrefetchBehavior(R,N),re=useLinkClickHandler(D,{replace:k,state:q,target:M,preventScrollReset:L,relative:T,viewTransition:I});function ee(oe){v&&v(oe),oe.defaultPrevented||re(oe)}let ne=reactExports.createElement("a",{...N,...te,href:V||W,onClick:j||A?v:ee,ref:mergeRefs(F,J),target:M,"data-discover":!G&&S==="render"?"true":void 0});return X&&!G?reactExports.createElement(reactExports.Fragment,null,ne,reactExports.createElement(PrefetchPageLinks,{page:W})):ne});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":v="page",caseSensitive:S=!1,className:R="",end:T=!1,style:A,to:k,viewTransition:q,children:M,...D},L){let I=useResolvedPath(k,{relative:D.relative}),N=useLocation(),F=reactExports.useContext(DataRouterStateContext),{navigator:H,basename:G}=reactExports.useContext(NavigationContext),V=F!=null&&useViewTransitionState(I)&&q===!0,j=H.encodeLocation?H.encodeLocation(I).pathname:I.pathname,W=N.pathname,X=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;S||(W=W.toLowerCase(),X=X?X.toLowerCase():null,j=j.toLowerCase()),X&&G&&(X=stripBasename(X,G)||X);const J=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let te=W===j||!T&&W.startsWith(j)&&W.charAt(J)==="/",re=X!=null&&(X===j||!T&&X.startsWith(j)&&X.charAt(j.length)==="/"),ee={isActive:te,isPending:re,isTransitioning:V},ne=te?v:void 0,oe;typeof R=="function"?oe=R(ee):oe=[R,te?"active":null,re?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let ue=typeof A=="function"?A(ee):A;return reactExports.createElement(Link,{...D,"aria-current":ne,className:oe,ref:L,style:ue,to:k,viewTransition:q},typeof M=="function"?M(ee):M)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:_="render",fetcherKey:v,navigate:S,reloadDocument:R,replace:T,state:A,method:k=defaultMethod,action:q,onSubmit:M,relative:D,preventScrollReset:L,viewTransition:I,...N},F)=>{let H=useSubmit(),G=useFormAction(q,{relative:D}),V=k.toLowerCase()==="get"?"get":"post",j=typeof q=="string"&&ABSOLUTE_URL_REGEX2.test(q),W=X=>{if(M&&M(X),X.defaultPrevented)return;X.preventDefault();let J=X.nativeEvent.submitter,te=J?.getAttribute("formmethod")||k;H(J||X.currentTarget,{fetcherKey:v,method:te,navigate:S,replace:T,state:A,relative:D,preventScrollReset:L,viewTransition:I})};return reactExports.createElement("form",{ref:F,method:V,action:G,onSubmit:R?M:W,...N,"data-discover":!j&&_==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(_){let v=reactExports.useContext(DataRouterContext);return invariant(v,getDataRouterConsoleError2(_)),v}function useLinkClickHandler(_,{target:v,replace:S,state:R,preventScrollReset:T,relative:A,viewTransition:k}={}){let q=useNavigate(),M=useLocation(),D=useResolvedPath(_,{relative:A});return reactExports.useCallback(L=>{if(shouldProcessLinkClick(L,v)){L.preventDefault();let I=S!==void 0?S:createPath(M)===createPath(D);q(_,{replace:I,state:R,preventScrollReset:T,relative:A,viewTransition:k})}},[M,q,D,S,R,v,_,T,A,k])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:_}=useDataRouterContext3("useSubmit"),{basename:v}=reactExports.useContext(NavigationContext),S=useRouteId();return reactExports.useCallback(async(R,T={})=>{let{action:A,method:k,encType:q,formData:M,body:D}=getFormSubmissionInfo(R,v);if(T.navigate===!1){let L=T.fetcherKey||getUniqueFetcherId();await _.fetch(L,S,T.action||A,{preventScrollReset:T.preventScrollReset,formData:M,body:D,formMethod:T.method||k,formEncType:T.encType||q,flushSync:T.flushSync})}else await _.navigate(T.action||A,{preventScrollReset:T.preventScrollReset,formData:M,body:D,formMethod:T.method||k,formEncType:T.encType||q,replace:T.replace,state:T.state,fromRouteId:S,flushSync:T.flushSync,viewTransition:T.viewTransition})},[_,v,S])}function useFormAction(_,{relative:v}={}){let{basename:S}=reactExports.useContext(NavigationContext),R=reactExports.useContext(RouteContext);invariant(R,"useFormAction must be used inside a RouteContext");let[T]=R.matches.slice(-1),A={...useResolvedPath(_||".",{relative:v})},k=useLocation();if(_==null){A.search=k.search;let q=new URLSearchParams(A.search),M=q.getAll("index");if(M.some(L=>L==="")){q.delete("index"),M.filter(I=>I).forEach(I=>q.append("index",I));let L=q.toString();A.search=L?`?${L}`:""}}return(!_||_===".")&&T.route.index&&(A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index"),S!=="/"&&(A.pathname=A.pathname==="/"?S:joinPaths([S,A.pathname])),createPath(A)}function useViewTransitionState(_,{relative:v}={}){let S=reactExports.useContext(ViewTransitionContext);invariant(S!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:R}=useDataRouterContext3("useViewTransitionState"),T=useResolvedPath(_,{relative:v});if(!S.isTransitioning)return!1;let A=stripBasename(S.currentLocation.pathname,R)||S.currentLocation.pathname,k=stripBasename(S.nextLocation.pathname,R)||S.nextLocation.pathname;return matchPath(T.pathname,k)!=null||matchPath(T.pathname,A)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var _="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=_,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var _=requireReactPropTypesSecret();function v(){}function S(){}return S.resetWarningCache=v,factoryWithThrowingShims=function(){function R(k,q,M,D,L,I){if(I!==_){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}R.isRequired=R;function T(){return R}var A={array:R,bigint:R,bool:R,func:R,number:R,object:R,string:R,symbol:R,any:R,arrayOf:T,element:R,elementType:R,instanceOf:T,node:R,objectOf:T,oneOf:T,oneOfType:T,shape:T,exact:T,checkPropTypes:S,resetWarningCache:v};return A.PropTypes=A,A},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const t$1=getDefaultExportFromCjs$1(propTypesExports);function _arrayLikeToArray(_,v){(v==null||v>_.length)&&(v=_.length);for(var S=0,R=Array(v);S<v;S++)R[S]=_[S];return R}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _classCallCheck(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_,v){for(var S=0;S<v.length;S++){var R=v[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,_toPropertyKey(R.key),R)}}function _createClass(_,v,S){return v&&_defineProperties(_.prototype,v),Object.defineProperty(_,"prototype",{writable:!1}),_}function _createForOfIteratorHelper(_,v){var S=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!S){if(Array.isArray(_)||(S=_unsupportedIterableToArray(_))||v){S&&(_=S);var R=0,T=function(){};return{s:T,n:function(){return R>=_.length?{done:!0}:{done:!1,value:_[R++]}},e:function(M){throw M},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,k=!0,q=!1;return{s:function(){S=S.call(_)},n:function(){var M=S.next();return k=M.done,M},e:function(M){q=!0,A=M},f:function(){try{k||S.return==null||S.return()}finally{if(q)throw A}}}}function _defineProperty$1(_,v,S){return(v=_toPropertyKey(v))in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _iterableToArrayLimit(_,v){var S=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(S!=null){var R,T,A,k,q=[],M=!0,D=!1;try{if(A=(S=S.call(_)).next,v===0){if(Object(S)!==S)return;M=!1}else for(;!(M=(R=A.call(S)).done)&&(q.push(R.value),q.length!==v);M=!0);}catch(L){D=!0,T=L}finally{try{if(!M&&S.return!=null&&(k=S.return(),Object(k)!==k))return}finally{if(D)throw T}}return q}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(_,v){return _arrayWithHoles(_)||_iterableToArrayLimit(_,v)||_unsupportedIterableToArray(_,v)||_nonIterableRest()}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}function _toPrimitive(_,v){if(typeof _!="object"||!_)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var R=S.call(_,v);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}function _toPropertyKey(_){var v=_toPrimitive(_,"string");return typeof v=="symbol"?v:v+""}function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},_typeof(_)}function _unsupportedIterableToArray(_,v){if(_){if(typeof _=="string")return _arrayLikeToArray(_,v);var S={}.toString.call(_).slice(8,-1);return S==="Object"&&_.constructor&&(S=_.constructor.name),S==="Map"||S==="Set"?Array.from(_):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?_arrayLikeToArray(_,v):void 0}}var _window=typeof window>"u"?null:window,navigator$1=_window?_window.navigator:null;_window&&_window.document;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele=typeof HTMLElement>"u"?"undefined":_typeof(HTMLElement),instanceStr=function(v){return v&&v.instanceString&&fn$6(v.instanceString)?v.instanceString():null},string$1=function(v){return v!=null&&_typeof(v)==typeofstr},fn$6=function(v){return v!=null&&_typeof(v)===typeoffn},array=function(v){return!elementOrCollection(v)&&(Array.isArray?Array.isArray(v):v!=null&&v instanceof Array)},plainObject=function(v){return v!=null&&_typeof(v)===typeofobj&&!array(v)&&v.constructor===Object},object=function(v){return v!=null&&_typeof(v)===typeofobj},number$1=function(v){return v!=null&&_typeof(v)===_typeof(1)&&!isNaN(v)},integer=function(v){return number$1(v)&&Math.floor(v)===v},htmlElement=function(v){if(typeofhtmlele!=="undefined")return v!=null&&v instanceof HTMLElement},elementOrCollection=function(v){return element(v)||collection(v)},element=function(v){return instanceStr(v)==="collection"&&v._private.single},collection=function(v){return instanceStr(v)==="collection"&&!v._private.single},core=function(v){return instanceStr(v)==="core"},stylesheet=function(v){return instanceStr(v)==="stylesheet"},event=function(v){return instanceStr(v)==="event"},emptyString=function(v){return v==null?!0:!!(v===""||v.match(/^\s+$/))},domElement=function(v){return typeof HTMLElement>"u"?!1:v instanceof HTMLElement},boundingBox=function(v){return plainObject(v)&&number$1(v.x1)&&number$1(v.x2)&&number$1(v.y1)&&number$1(v.y2)},promise=function(v){return object(v)&&fn$6(v.then)},ms=function(){return navigator$1&&navigator$1.userAgent.match(/msie|trident|edge/i)},memoize=function(v,S){S||(S=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var A=[],k=0;k<arguments.length;k++)A.push(arguments[k]);return A.join("$")});var R=function(){var A=this,k=arguments,q,M=S.apply(A,k),D=R.cache;return(q=D[M])||(q=D[M]=v.apply(A,k)),q};return R.cache={},R},camel2dash=memoize(function(_){return _.replace(/([A-Z])/g,function(v){return"-"+v.toLowerCase()})}),dash2camel=memoize(function(_){return _.replace(/(-\w)/g,function(v){return v[1].toUpperCase()})}),prependCamel=memoize(function(_,v){return _+v[0].toUpperCase()+v.substring(1)},function(_,v){return _+"$"+v}),capitalize=function(v){return emptyString(v)?v:v.charAt(0).toUpperCase()+v.substring(1)},endsWith=function(v,S){return v.slice(-1*S.length)===S},number$2="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number$2+"[%]?)\\s*,\\s*("+number$2+"[%]?)\\s*,\\s*("+number$2+"[%]?)(?:\\s*,\\s*("+number$2+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number$2+"[%]?)\\s*,\\s*(?:"+number$2+"[%]?)\\s*,\\s*(?:"+number$2+"[%]?)(?:\\s*,\\s*(?:"+number$2+"))?\\)",hsla="hsl[a]?\\(("+number$2+")\\s*,\\s*("+number$2+"[%])\\s*,\\s*("+number$2+"[%])(?:\\s*,\\s*("+number$2+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number$2+")\\s*,\\s*(?:"+number$2+"[%])\\s*,\\s*(?:"+number$2+"[%])(?:\\s*,\\s*(?:"+number$2+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(v,S){return v<S?-1:v>S?1:0},descending=function(v,S){return-1*ascending(v,S)},extend=Object.assign!=null?Object.assign.bind(Object):function(_){for(var v=arguments,S=1;S<v.length;S++){var R=v[S];if(R!=null)for(var T=Object.keys(R),A=0;A<T.length;A++){var k=T[A];_[k]=R[k]}}return _},hex2tuple=function(v){if(!(!(v.length===4||v.length===7)||v[0]!=="#")){var S=v.length===4,R,T,A,k=16;return S?(R=parseInt(v[1]+v[1],k),T=parseInt(v[2]+v[2],k),A=parseInt(v[3]+v[3],k)):(R=parseInt(v[1]+v[2],k),T=parseInt(v[3]+v[4],k),A=parseInt(v[5]+v[6],k)),[R,T,A]}},hsl2tuple=function(v){var S,R,T,A,k,q,M,D;function L(H,G,V){return V<0&&(V+=1),V>1&&(V-=1),V<1/6?H+(G-H)*6*V:V<1/2?G:V<2/3?H+(G-H)*(2/3-V)*6:H}var I=new RegExp("^"+hsla+"$").exec(v);if(I){if(R=parseInt(I[1]),R<0?R=(360- -1*R%360)%360:R>360&&(R=R%360),R/=360,T=parseFloat(I[2]),T<0||T>100||(T=T/100,A=parseFloat(I[3]),A<0||A>100)||(A=A/100,k=I[4],k!==void 0&&(k=parseFloat(k),k<0||k>1)))return;if(T===0)q=M=D=Math.round(A*255);else{var N=A<.5?A*(1+T):A+T-A*T,F=2*A-N;q=Math.round(255*L(F,N,R+1/3)),M=Math.round(255*L(F,N,R)),D=Math.round(255*L(F,N,R-1/3))}S=[q,M,D,k]}return S},rgb2tuple=function(v){var S,R=new RegExp("^"+rgba+"$").exec(v);if(R){S=[];for(var T=[],A=1;A<=3;A++){var k=R[A];if(k[k.length-1]==="%"&&(T[A]=!0),k=parseFloat(k),T[A]&&(k=k/100*255),k<0||k>255)return;S.push(Math.floor(k))}var q=T[1]||T[2]||T[3],M=T[1]&&T[2]&&T[3];if(q&&!M)return;var D=R[4];if(D!==void 0){if(D=parseFloat(D),D<0||D>1)return;S.push(D)}}return S},colorname2tuple=function(v){return colors[v.toLowerCase()]},color2tuple=function(v){return(array(v)?v:null)||colorname2tuple(v)||hex2tuple(v)||rgb2tuple(v)||hsl2tuple(v)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(v){for(var S=v.map,R=v.keys,T=R.length,A=0;A<T;A++){var k=R[A];if(plainObject(k))throw Error("Tried to set map with object key");A<R.length-1?(S[k]==null&&(S[k]={}),S=S[k]):S[k]=v.value}},getMap=function(v){for(var S=v.map,R=v.keys,T=R.length,A=0;A<T;A++){var k=R[A];if(plainObject(k))throw Error("Tried to get map with object key");if(S=S[k],S==null)return S}return S},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var isObject_1$1,hasRequiredIsObject$1;function requireIsObject$1(){if(hasRequiredIsObject$1)return isObject_1$1;hasRequiredIsObject$1=1;function _(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")}return isObject_1$1=_,isObject_1$1}var _freeGlobal$1,hasRequired_freeGlobal$1;function require_freeGlobal$1(){if(hasRequired_freeGlobal$1)return _freeGlobal$1;hasRequired_freeGlobal$1=1;var _=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal$1=_,_freeGlobal$1}var _root$1,hasRequired_root$1;function require_root$1(){if(hasRequired_root$1)return _root$1;hasRequired_root$1=1;var _=require_freeGlobal$1(),v=typeof self=="object"&&self&&self.Object===Object&&self,S=_||v||Function("return this")();return _root$1=S,_root$1}var now_1$1,hasRequiredNow$1;function requireNow$1(){if(hasRequiredNow$1)return now_1$1;hasRequiredNow$1=1;var _=require_root$1(),v=function(){return _.Date.now()};return now_1$1=v,now_1$1}var _trimmedEndIndex$1,hasRequired_trimmedEndIndex$1;function require_trimmedEndIndex$1(){if(hasRequired_trimmedEndIndex$1)return _trimmedEndIndex$1;hasRequired_trimmedEndIndex$1=1;var _=/\s/;function v(S){for(var R=S.length;R--&&_.test(S.charAt(R)););return R}return _trimmedEndIndex$1=v,_trimmedEndIndex$1}var _baseTrim$1,hasRequired_baseTrim$1;function require_baseTrim$1(){if(hasRequired_baseTrim$1)return _baseTrim$1;hasRequired_baseTrim$1=1;var _=require_trimmedEndIndex$1(),v=/^\s+/;function S(R){return R&&R.slice(0,_(R)+1).replace(v,"")}return _baseTrim$1=S,_baseTrim$1}var _Symbol$1,hasRequired_Symbol$1;function require_Symbol$1(){if(hasRequired_Symbol$1)return _Symbol$1;hasRequired_Symbol$1=1;var _=require_root$1(),v=_.Symbol;return _Symbol$1=v,_Symbol$1}var _getRawTag$1,hasRequired_getRawTag$1;function require_getRawTag$1(){if(hasRequired_getRawTag$1)return _getRawTag$1;hasRequired_getRawTag$1=1;var _=require_Symbol$1(),v=Object.prototype,S=v.hasOwnProperty,R=v.toString,T=_?_.toStringTag:void 0;function A(k){var q=S.call(k,T),M=k[T];try{k[T]=void 0;var D=!0}catch{}var L=R.call(k);return D&&(q?k[T]=M:delete k[T]),L}return _getRawTag$1=A,_getRawTag$1}var _objectToString$1,hasRequired_objectToString$1;function require_objectToString$1(){if(hasRequired_objectToString$1)return _objectToString$1;hasRequired_objectToString$1=1;var _=Object.prototype,v=_.toString;function S(R){return v.call(R)}return _objectToString$1=S,_objectToString$1}var _baseGetTag$1,hasRequired_baseGetTag$1;function require_baseGetTag$1(){if(hasRequired_baseGetTag$1)return _baseGetTag$1;hasRequired_baseGetTag$1=1;var _=require_Symbol$1(),v=require_getRawTag$1(),S=require_objectToString$1(),R="[object Null]",T="[object Undefined]",A=_?_.toStringTag:void 0;function k(q){return q==null?q===void 0?T:R:A&&A in Object(q)?v(q):S(q)}return _baseGetTag$1=k,_baseGetTag$1}var isObjectLike_1$1,hasRequiredIsObjectLike$1;function requireIsObjectLike$1(){if(hasRequiredIsObjectLike$1)return isObjectLike_1$1;hasRequiredIsObjectLike$1=1;function _(v){return v!=null&&typeof v=="object"}return isObjectLike_1$1=_,isObjectLike_1$1}var isSymbol_1$1,hasRequiredIsSymbol$1;function requireIsSymbol$1(){if(hasRequiredIsSymbol$1)return isSymbol_1$1;hasRequiredIsSymbol$1=1;var _=require_baseGetTag$1(),v=requireIsObjectLike$1(),S="[object Symbol]";function R(T){return typeof T=="symbol"||v(T)&&_(T)==S}return isSymbol_1$1=R,isSymbol_1$1}var toNumber_1$1,hasRequiredToNumber$1;function requireToNumber$1(){if(hasRequiredToNumber$1)return toNumber_1$1;hasRequiredToNumber$1=1;var _=require_baseTrim$1(),v=requireIsObject$1(),S=requireIsSymbol$1(),R=NaN,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,q=parseInt;function M(D){if(typeof D=="number")return D;if(S(D))return R;if(v(D)){var L=typeof D.valueOf=="function"?D.valueOf():D;D=v(L)?L+"":L}if(typeof D!="string")return D===0?D:+D;D=_(D);var I=A.test(D);return I||k.test(D)?q(D.slice(2),I?2:8):T.test(D)?R:+D}return toNumber_1$1=M,toNumber_1$1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var _=requireIsObject$1(),v=requireNow$1(),S=requireToNumber$1(),R="Expected a function",T=Math.max,A=Math.min;function k(q,M,D){var L,I,N,F,H,G,V=0,j=!1,W=!1,X=!0;if(typeof q!="function")throw new TypeError(R);M=S(M)||0,_(D)&&(j=!!D.leading,W="maxWait"in D,N=W?T(S(D.maxWait)||0,M):N,X="trailing"in D?!!D.trailing:X);function J(pe){var _e=L,Ee=I;return L=I=void 0,V=pe,F=q.apply(Ee,_e),F}function te(pe){return V=pe,H=setTimeout(ne,M),j?J(pe):F}function re(pe){var _e=pe-G,Ee=pe-V,ge=M-_e;return W?A(ge,N-Ee):ge}function ee(pe){var _e=pe-G,Ee=pe-V;return G===void 0||_e>=M||_e<0||W&&Ee>=N}function ne(){var pe=v();if(ee(pe))return oe(pe);H=setTimeout(ne,re(pe))}function oe(pe){return H=void 0,X&&L?J(pe):(L=I=void 0,F)}function ue(){H!==void 0&&clearTimeout(H),V=0,L=G=I=H=void 0}function ce(){return H===void 0?F:oe(v())}function de(){var pe=v(),_e=ee(pe);if(L=arguments,I=this,G=pe,_e){if(H===void 0)return te(G);if(W)return clearTimeout(H),H=setTimeout(ne,M),J(G)}return H===void 0&&(H=setTimeout(ne,M)),F}return de.cancel=ue,de.flush=ce,de}return debounce_1=k,debounce_1}var debounceExports=requireDebounce(),debounce=getDefaultExportFromCjs(debounceExports),performance$1=_window?_window.performance:null,pnow=performance$1&&performance$1.now?function(){return performance$1.now()}:function(){return Date.now()},raf=(function(){if(_window){if(_window.requestAnimationFrame)return function(_){_window.requestAnimationFrame(_)};if(_window.mozRequestAnimationFrame)return function(_){_window.mozRequestAnimationFrame(_)};if(_window.webkitRequestAnimationFrame)return function(_){_window.webkitRequestAnimationFrame(_)};if(_window.msRequestAnimationFrame)return function(_){_window.msRequestAnimationFrame(_)}}return function(_){_&&setTimeout(function(){_(pnow())},1e3/60)}})(),requestAnimationFrame$1=function(v){return raf(v)},performanceNow=pnow,DEFAULT_HASH_SEED=9261,K=65599,DEFAULT_HASH_SEED_ALT=5381,hashIterableInts=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED,R=S,T;T=v.next(),!T.done;)R=R*K+T.value|0;return R},hashInt=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED;return S*K+v|0},hashIntAlt=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED_ALT;return(S<<5)+S+v|0},combineHashes=function(v,S){return v*2097152+S},combineHashesArray=function(v){return v[0]*2097152+v[1]},hashArrays=function(v,S){return[hashInt(v[0],S[0]),hashIntAlt(v[1],S[1])]},hashIntsArray=function(v,S){var R={value:0,done:!1},T=0,A=v.length,k={next:function(){return T<A?R.value=v[T++]:R.done=!0,R}};return hashIterableInts(k,S)},hashString=function(v,S){var R={value:0,done:!1},T=0,A=v.length,k={next:function(){return T<A?R.value=v.charCodeAt(T++):R.done=!0,R}};return hashIterableInts(k,S)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(v){for(var S,R=0;R<v.length;R++){var T=v[R];R===0?S=hashString(T):S=hashString(T,S)}return S};function rotatePoint(_,v,S,R,T){var A=T*Math.PI/180,k=Math.cos(A)*(_-S)-Math.sin(A)*(v-R)+S,q=Math.sin(A)*(_-S)+Math.cos(A)*(v-R)+R;return{x:k,y:q}}var movePointByBoxAspect=function(v,S,R,T,A,k){return{x:(v-R)*A+R,y:(S-T)*k+T}};function rotatePosAndSkewByBox(_,v,S){if(S===0)return _;var R=(v.x1+v.x2)/2,T=(v.y1+v.y2)/2,A=v.w/v.h,k=1/A,q=rotatePoint(_.x,_.y,R,T,S),M=movePointByBoxAspect(q.x,q.y,R,T,A,k);return{x:M.x,y:M.y}}var warningsEnabled=!0,warnSupported=console.warn!=null,traceSupported=console.trace!=null,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1=function(){},error=function(v){throw new Error(v)},warnings=function(v){if(v!==void 0)warningsEnabled=!!v;else return warningsEnabled},warn=function(v){warnings()&&(warnSupported?console.warn(v):(console.log(v),traceSupported&&console.trace()))},clone=function(v){return extend({},v)},copy=function(v){return v==null?v:array(v)?v.slice():plainObject(v)?clone(v):v},copyArray=function(v){return v.slice()},uuid=function(v,S){for(S=v="";v++<36;S+=v*51&52?(v^15?8^Math.random()*(v^20?16:4):4).toString(16):"-");return S},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults$g=function(v){var S=Object.keys(v);return function(R){for(var T={},A=0;A<S.length;A++){var k=S[A],q=R?.[k];T[k]=q===void 0?v[k]:q}return T}},removeFromArray=function(v,S,R){for(var T=v.length-1;T>=0;T--)v[T]===S&&v.splice(T,1)},clearArray=function(v){v.splice(0,v.length)},push=function(v,S){for(var R=0;R<S.length;R++){var T=S[R];v.push(T)}},getPrefixedProperty=function(v,S,R){return R&&(S=prependCamel(R,S)),v[S]},setPrefixedProperty=function(v,S,R,T){R&&(S=prependCamel(R,S)),v[S]=T},ObjectMap=(function(){function _(){_classCallCheck(this,_),this._obj={}}return _createClass(_,[{key:"set",value:function(S,R){return this._obj[S]=R,this}},{key:"delete",value:function(S){return this._obj[S]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(S){return this._obj[S]!==void 0}},{key:"get",value:function(S){return this._obj[S]}}])})(),Map$1=typeof Map<"u"?Map:ObjectMap,undef="undefined",ObjectSet=(function(){function _(v){if(_classCallCheck(this,_),this._obj=Object.create(null),this.size=0,v!=null){var S;v.instanceString!=null&&v.instanceString()===this.instanceString()?S=v.toArray():S=v;for(var R=0;R<S.length;R++)this.add(S[R])}}return _createClass(_,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(S){var R=this._obj;R[S]!==1&&(R[S]=1,this.size++)}},{key:"delete",value:function(S){var R=this._obj;R[S]===1&&(R[S]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(S){return this._obj[S]===1}},{key:"toArray",value:function(){var S=this;return Object.keys(this._obj).filter(function(R){return S.has(R)})}},{key:"forEach",value:function(S,R){return this.toArray().forEach(S,R)}}])})(),Set$1=(typeof Set>"u"?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element=function(v,S){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(v===void 0||S===void 0||!core(v)){error("An element must have a core reference and parameters set");return}var T=S.group;if(T==null&&(S.data&&S.data.source!=null&&S.data.target!=null?T="edges":T="nodes"),T!=="nodes"&&T!=="edges"){error("An element must be of type `nodes` or `edges`; you specified `"+T+"`");return}this.length=1,this[0]=this;var A=this._private={cy:v,single:!0,data:S.data||{},position:S.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:T,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!S.selected,selectable:S.selectable===void 0?!0:!!S.selectable,locked:!!S.locked,grabbed:!1,grabbable:S.grabbable===void 0?!0:!!S.grabbable,pannable:S.pannable===void 0?T==="edges":!!S.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:S.scratch||{},edges:[],children:[],parent:S.parent&&S.parent.isNode()?S.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(A.position.x==null&&(A.position.x=0),A.position.y==null&&(A.position.y=0),S.renderedPosition){var k=S.renderedPosition,q=v.pan(),M=v.zoom();A.position={x:(k.x-q.x)/M,y:(k.y-q.y)/M}}var D=[];array(S.classes)?D=S.classes:string$1(S.classes)&&(D=S.classes.split(/\s+/));for(var L=0,I=D.length;L<I;L++){var N=D[L];!N||N===""||A.classes.add(N)}this.createEmitter(),(R===void 0||R)&&this.restore();var F=S.style||S.css;F&&(warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(F))},defineSearch=function(v){return v={bfs:v.bfs||!v.dfs,dfs:v.dfs||!v.bfs},function(R,T,A){var k;plainObject(R)&&!elementOrCollection(R)&&(k=R,R=k.roots||k.root,T=k.visit,A=k.directed),A=arguments.length===2&&!fn$6(T)?T:A,T=fn$6(T)?T:function(){};for(var q=this._private.cy,M=R=string$1(R)?this.filter(R):R,D=[],L=[],I={},N={},F={},H=0,G,V=this.byGroup(),j=V.nodes,W=V.edges,X=0;X<M.length;X++){var J=M[X],te=J.id();J.isNode()&&(D.unshift(J),v.bfs&&(F[te]=!0,L.push(J)),N[te]=0)}for(var re=function(){var pe=v.bfs?D.shift():D.pop(),_e=pe.id();if(v.dfs){if(F[_e])return 0;F[_e]=!0,L.push(pe)}var Ee=N[_e],ge=I[_e],be=ge!=null?ge.source():null,Ae=ge!=null?ge.target():null,De=ge==null?void 0:pe.same(be)?Ae[0]:be[0],ve;if(ve=T(pe,ge,De,H++,Ee),ve===!0)return G=pe,1;if(ve===!1)return 1;for(var le=pe.connectedEdges().filter(function(qe){return(!A||qe.source().same(pe))&&W.has(qe)}),me=0;me<le.length;me++){var Te=le[me],ye=Te.connectedNodes().filter(function(qe){return!qe.same(pe)&&j.has(qe)}),Re=ye.id();ye.length!==0&&!F[Re]&&(ye=ye[0],D.push(ye),v.bfs&&(F[Re]=!0,L.push(ye)),I[Re]=Te,N[Re]=N[_e]+1)}},ee;D.length!==0&&(ee=re(),!(ee!==0&&ee===1)););for(var ne=q.collection(),oe=0;oe<L.length;oe++){var ue=L[oe],ce=I[ue.id()];ce!=null&&ne.push(ce),ne.push(ue)}return{path:q.collection(ne),found:q.collection(G)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch;elesfn$v.dfs=elesfn$v.depthFirstSearch;var heap$2={exports:{}},heap$1=heap$2.exports,hasRequiredHeap$1;function requireHeap$1(){return hasRequiredHeap$1||(hasRequiredHeap$1=1,(function(_,v){(function(){var S,R,T,A,k,q,M,D,L,I,N,F,H,G,V;T=Math.floor,I=Math.min,R=function(j,W){return j<W?-1:j>W?1:0},L=function(j,W,X,J,te){var re;if(X==null&&(X=0),te==null&&(te=R),X<0)throw new Error("lo must be non-negative");for(J==null&&(J=j.length);X<J;)re=T((X+J)/2),te(W,j[re])<0?J=re:X=re+1;return[].splice.apply(j,[X,X-X].concat(W)),W},q=function(j,W,X){return X==null&&(X=R),j.push(W),G(j,0,j.length-1,X)},k=function(j,W){var X,J;return W==null&&(W=R),X=j.pop(),j.length?(J=j[0],j[0]=X,V(j,0,W)):J=X,J},D=function(j,W,X){var J;return X==null&&(X=R),J=j[0],j[0]=W,V(j,0,X),J},M=function(j,W,X){var J;return X==null&&(X=R),j.length&&X(j[0],W)<0&&(J=[j[0],W],W=J[0],j[0]=J[1],V(j,0,X)),W},A=function(j,W){var X,J,te,re,ee,ne;for(W==null&&(W=R),re=(function(){ne=[];for(var oe=0,ue=T(j.length/2);0<=ue?oe<ue:oe>ue;0<=ue?oe++:oe--)ne.push(oe);return ne}).apply(this).reverse(),ee=[],J=0,te=re.length;J<te;J++)X=re[J],ee.push(V(j,X,W));return ee},H=function(j,W,X){var J;if(X==null&&(X=R),J=j.indexOf(W),J!==-1)return G(j,0,J,X),V(j,J,X)},N=function(j,W,X){var J,te,re,ee,ne;if(X==null&&(X=R),te=j.slice(0,W),!te.length)return te;for(A(te,X),ne=j.slice(W),re=0,ee=ne.length;re<ee;re++)J=ne[re],M(te,J,X);return te.sort(X).reverse()},F=function(j,W,X){var J,te,re,ee,ne,oe,ue,ce,de;if(X==null&&(X=R),W*10<=j.length){if(re=j.slice(0,W).sort(X),!re.length)return re;for(te=re[re.length-1],ue=j.slice(W),ee=0,oe=ue.length;ee<oe;ee++)J=ue[ee],X(J,te)<0&&(L(re,J,0,null,X),re.pop(),te=re[re.length-1]);return re}for(A(j,X),de=[],ne=0,ce=I(W,j.length);0<=ce?ne<ce:ne>ce;0<=ce?++ne:--ne)de.push(k(j,X));return de},G=function(j,W,X,J){var te,re,ee;for(J==null&&(J=R),te=j[X];X>W;){if(ee=X-1>>1,re=j[ee],J(te,re)<0){j[X]=re,X=ee;continue}break}return j[X]=te},V=function(j,W,X){var J,te,re,ee,ne;for(X==null&&(X=R),te=j.length,ne=W,re=j[W],J=2*W+1;J<te;)ee=J+1,ee<te&&!(X(j[J],j[ee])<0)&&(J=ee),j[W]=j[J],W=J,J=2*W+1;return j[W]=re,G(j,ne,W,X)},S=(function(){j.push=q,j.pop=k,j.replace=D,j.pushpop=M,j.heapify=A,j.updateItem=H,j.nlargest=N,j.nsmallest=F;function j(W){this.cmp=W??R,this.nodes=[]}return j.prototype.push=function(W){return q(this.nodes,W,this.cmp)},j.prototype.pop=function(){return k(this.nodes,this.cmp)},j.prototype.peek=function(){return this.nodes[0]},j.prototype.contains=function(W){return this.nodes.indexOf(W)!==-1},j.prototype.replace=function(W){return D(this.nodes,W,this.cmp)},j.prototype.pushpop=function(W){return M(this.nodes,W,this.cmp)},j.prototype.heapify=function(){return A(this.nodes,this.cmp)},j.prototype.updateItem=function(W){return H(this.nodes,W,this.cmp)},j.prototype.clear=function(){return this.nodes=[]},j.prototype.empty=function(){return this.nodes.length===0},j.prototype.size=function(){return this.nodes.length},j.prototype.clone=function(){var W;return W=new j,W.nodes=this.nodes.slice(0),W},j.prototype.toArray=function(){return this.nodes.slice(0)},j.prototype.insert=j.prototype.push,j.prototype.top=j.prototype.peek,j.prototype.front=j.prototype.peek,j.prototype.has=j.prototype.contains,j.prototype.copy=j.prototype.clone,j})(),(function(j,W){return _.exports=W()})(this,function(){return S})}).call(heap$1)})(heap$2)),heap$2.exports}var heap,hasRequiredHeap;function requireHeap(){return hasRequiredHeap||(hasRequiredHeap=1,heap=requireHeap$1()),heap}var heapExports=requireHeap(),Heap=getDefaultExportFromCjs(heapExports),dijkstraDefaults=defaults$g({root:null,weight:function(v){return 1},directed:!1}),elesfn$u={dijkstra:function(v){if(!plainObject(v)){var S=arguments;v={root:S[0],weight:S[1],directed:S[2]}}var R=dijkstraDefaults(v),T=R.root,A=R.weight,k=R.directed,q=this,M=A,D=string$1(T)?this.filter(T)[0]:T[0],L={},I={},N={},F=this.byGroup(),H=F.nodes,G=F.edges;G.unmergeBy(function(Ee){return Ee.isLoop()});for(var V=function(ge){return L[ge.id()]},j=function(ge,be){L[ge.id()]=be,W.updateItem(ge)},W=new Heap(function(Ee,ge){return V(Ee)-V(ge)}),X=0;X<H.length;X++){var J=H[X];L[J.id()]=J.same(D)?0:1/0,W.push(J)}for(var te=function(ge,be){for(var Ae=(k?ge.edgesTo(be):ge.edgesWith(be)).intersect(G),De=1/0,ve,le=0;le<Ae.length;le++){var me=Ae[le],Te=M(me);(Te<De||!ve)&&(De=Te,ve=me)}return{edge:ve,dist:De}};W.size()>0;){var re=W.pop(),ee=V(re),ne=re.id();if(N[ne]=ee,ee!==1/0)for(var oe=re.neighborhood().intersect(H),ue=0;ue<oe.length;ue++){var ce=oe[ue],de=ce.id(),pe=te(re,ce),_e=ee+pe.dist;_e<V(ce)&&(j(ce,_e),I[de]={node:re,edge:pe.edge})}}return{distanceTo:function(ge){var be=string$1(ge)?H.filter(ge)[0]:ge[0];return N[be.id()]},pathTo:function(ge){var be=string$1(ge)?H.filter(ge)[0]:ge[0],Ae=[],De=be,ve=De.id();if(be.length>0)for(Ae.unshift(be);I[ve];){var le=I[ve];Ae.unshift(le.edge),Ae.unshift(le.node),De=le.node,ve=De.id()}return q.spawn(Ae)}}}},elesfn$t={kruskal:function(v){v=v||function(X){return 1};for(var S=this.byGroup(),R=S.nodes,T=S.edges,A=R.length,k=new Array(A),q=R,M=function(J){for(var te=0;te<k.length;te++){var re=k[te];if(re.has(J))return te}},D=0;D<A;D++)k[D]=this.spawn(R[D]);for(var L=T.sort(function(X,J){return v(X)-v(J)}),I=0;I<L.length;I++){var N=L[I],F=N.source()[0],H=N.target()[0],G=M(F),V=M(H),j=k[G],W=k[V];G!==V&&(q.merge(N),j.merge(W),k.splice(V,1))}return q}},aStarDefaults=defaults$g({root:null,goal:null,weight:function(v){return 1},heuristic:function(v){return 0},directed:!1}),elesfn$s={aStar:function(v){var S=this.cy(),R=aStarDefaults(v),T=R.root,A=R.goal,k=R.heuristic,q=R.directed,M=R.weight;T=S.collection(T)[0],A=S.collection(A)[0];var D=T.id(),L=A.id(),I={},N={},F={},H=new Heap(function(ve,le){return N[ve.id()]-N[le.id()]}),G=new Set$1,V={},j={},W=function(le,me){H.push(le),G.add(me)},X,J,te=function(){X=H.pop(),J=X.id(),G.delete(J)},re=function(le){return G.has(le)};W(T,D),I[D]=0,N[D]=k(T);for(var ee=0;H.size()>0;){if(te(),ee++,J===L){for(var ne=[],oe=A,ue=L,ce=j[ue];ne.unshift(oe),ce!=null&&ne.unshift(ce),oe=V[ue],oe!=null;)ue=oe.id(),ce=j[ue];return{found:!0,distance:I[J],path:this.spawn(ne),steps:ee}}F[J]=!0;for(var de=X._private.edges,pe=0;pe<de.length;pe++){var _e=de[pe];if(this.hasElementWithId(_e.id())&&!(q&&_e.data("source")!==J)){var Ee=_e.source(),ge=_e.target(),be=Ee.id()!==J?Ee:ge,Ae=be.id();if(this.hasElementWithId(Ae)&&!F[Ae]){var De=I[J]+M(_e);if(!re(Ae)){I[Ae]=De,N[Ae]=De+k(be),W(be,Ae),V[Ae]=X,j[Ae]=_e;continue}De<I[Ae]&&(I[Ae]=De,N[Ae]=De+k(be),V[Ae]=X,j[Ae]=_e)}}}}return{found:!1,distance:void 0,path:void 0,steps:ee}}},floydWarshallDefaults=defaults$g({weight:function(v){return 1},directed:!1}),elesfn$r={floydWarshall:function(v){for(var S=this.cy(),R=floydWarshallDefaults(v),T=R.weight,A=R.directed,k=T,q=this.byGroup(),M=q.nodes,D=q.edges,L=M.length,I=L*L,N=function(Te){return M.indexOf(Te)},F=function(Te){return M[Te]},H=new Array(I),G=0;G<I;G++){var V=G%L,j=(G-V)/L;j===V?H[G]=0:H[G]=1/0}for(var W=new Array(I),X=new Array(I),J=0;J<D.length;J++){var te=D[J],re=te.source()[0],ee=te.target()[0];if(re!==ee){var ne=N(re),oe=N(ee),ue=ne*L+oe,ce=k(te);if(H[ue]>ce&&(H[ue]=ce,W[ue]=oe,X[ue]=te),!A){var de=oe*L+ne;!A&&H[de]>ce&&(H[de]=ce,W[de]=ne,X[de]=te)}}}for(var pe=0;pe<L;pe++)for(var _e=0;_e<L;_e++)for(var Ee=_e*L+pe,ge=0;ge<L;ge++){var be=_e*L+ge,Ae=pe*L+ge;H[Ee]+H[Ae]<H[be]&&(H[be]=H[Ee]+H[Ae],W[be]=W[Ee])}var De=function(Te){return(string$1(Te)?S.filter(Te):Te)[0]},ve=function(Te){return N(De(Te))},le={distance:function(Te,ye){var Re=ve(Te),qe=ve(ye);return H[Re*L+qe]},path:function(Te,ye){var Re=ve(Te),qe=ve(ye),ke=F(Re);if(Re===qe)return ke.collection();if(W[Re*L+qe]==null)return S.collection();var ze=S.collection(),Ne=Re,Pe;for(ze.merge(ke);Re!==qe;)Ne=Re,Re=W[Re*L+qe],Pe=X[Ne*L+Re],ze.merge(Pe),ze.merge(F(Re));return ze}};return le}},bellmanFordDefaults=defaults$g({weight:function(v){return 1},directed:!1,root:null}),elesfn$q={bellmanFord:function(v){var S=this,R=bellmanFordDefaults(v),T=R.weight,A=R.directed,k=R.root,q=T,M=this,D=this.cy(),L=this.byGroup(),I=L.edges,N=L.nodes,F=N.length,H=new Map$1,G=!1,V=[];k=D.collection(k)[0],I.unmergeBy(function(pt){return pt.isLoop()});for(var j=I.length,W=function(We){var wt=H.get(We.id());return wt||(wt={},H.set(We.id(),wt)),wt},X=function(We){return(string$1(We)?D.$(We):We)[0]},J=function(We){return W(X(We)).dist},te=function(We){for(var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k,st=X(We),St=[],gt=st;;){if(gt==null)return S.spawn();var Et=W(gt),xt=Et.edge,Lt=Et.pred;if(St.unshift(gt[0]),gt.same(wt)&&St.length>0)break;xt!=null&&St.unshift(xt),gt=Lt}return M.spawn(St)},re=0;re<F;re++){var ee=N[re],ne=W(ee);ee.same(k)?ne.dist=0:ne.dist=1/0,ne.pred=null,ne.edge=null}for(var oe=!1,ue=function(We,wt,st,St,gt,Et){var xt=St.dist+Et;xt<gt.dist&&!st.same(St.edge)&&(gt.dist=xt,gt.pred=We,gt.edge=st,oe=!0)},ce=1;ce<F;ce++){oe=!1;for(var de=0;de<j;de++){var pe=I[de],_e=pe.source(),Ee=pe.target(),ge=q(pe),be=W(_e),Ae=W(Ee);ue(_e,Ee,pe,be,Ae,ge),A||ue(Ee,_e,pe,Ae,be,ge)}if(!oe)break}if(oe)for(var De=[],ve=0;ve<j;ve++){var le=I[ve],me=le.source(),Te=le.target(),ye=q(le),Re=W(me).dist,qe=W(Te).dist;if(Re+ye<qe||!A&&qe+ye<Re)if(G||(warn("Graph contains a negative weight cycle for Bellman-Ford"),G=!0),v.findNegativeWeightCycles!==!1){var ke=[];Re+ye<qe&&ke.push(me),!A&&qe+ye<Re&&ke.push(Te);for(var ze=ke.length,Ne=0;Ne<ze;Ne++){var Pe=ke[Ne],Me=[Pe];Me.push(W(Pe).edge);for(var Ie=W(Pe).pred;Me.indexOf(Ie)===-1;)Me.push(Ie),Me.push(W(Ie).edge),Ie=W(Ie).pred;Me=Me.slice(Me.indexOf(Ie));for(var Le=Me[0].id(),nt=0,lt=2;lt<Me.length;lt+=2)Me[lt].id()<Le&&(Le=Me[lt].id(),nt=lt);Me=Me.slice(nt).concat(Me.slice(0,nt)),Me.push(Me[0]);var dt=Me.map(function(pt){return pt.id()}).join(",");De.indexOf(dt)===-1&&(V.push(M.spawn(Me)),De.push(dt))}}else break}return{distanceTo:J,pathTo:te,hasNegativeWeightCycle:G,negativeWeightCycles:V}}},sqrt2=Math.sqrt(2),collapse=function(v,S,R){R.length===0&&error("Karger-Stein must be run on a connected (sub)graph");for(var T=R[v],A=T[1],k=T[2],q=S[A],M=S[k],D=R,L=D.length-1;L>=0;L--){var I=D[L],N=I[1],F=I[2];(S[N]===q&&S[F]===M||S[N]===M&&S[F]===q)&&D.splice(L,1)}for(var H=0;H<D.length;H++){var G=D[H];G[1]===M?(D[H]=G.slice(),D[H][1]=q):G[2]===M&&(D[H]=G.slice(),D[H][2]=q)}for(var V=0;V<S.length;V++)S[V]===M&&(S[V]=q);return D},contractUntil=function(v,S,R,T){for(;R>T;){var A=Math.floor(Math.random()*S.length);S=collapse(A,v,S),R--}return S},elesfn$p={kargerStein:function(){var v=this,S=this.byGroup(),R=S.nodes,T=S.edges;T.unmergeBy(function(Ae){return Ae.isLoop()});var A=R.length,k=T.length,q=Math.ceil(Math.pow(Math.log(A)/Math.LN2,2)),M=Math.floor(A/sqrt2);if(A<2){error("At least 2 nodes are required for Karger-Stein algorithm");return}for(var D=[],L=0;L<k;L++){var I=T[L];D.push([L,R.indexOf(I.source()),R.indexOf(I.target())])}for(var N=1/0,F=[],H=new Array(A),G=new Array(A),V=new Array(A),j=function(De,ve){for(var le=0;le<A;le++)ve[le]=De[le]},W=0;W<=q;W++){for(var X=0;X<A;X++)G[X]=X;var J=contractUntil(G,D.slice(),A,M),te=J.slice();j(G,V);var re=contractUntil(G,J,M,2),ee=contractUntil(V,te,M,2);re.length<=ee.length&&re.length<N?(N=re.length,F=re,j(G,H)):ee.length<=re.length&&ee.length<N&&(N=ee.length,F=ee,j(V,H))}for(var ne=this.spawn(F.map(function(Ae){return T[Ae[0]]})),oe=this.spawn(),ue=this.spawn(),ce=H[0],de=0;de<H.length;de++){var pe=H[de],_e=R[de];pe===ce?oe.merge(_e):ue.merge(_e)}var Ee=function(De){var ve=v.spawn();return De.forEach(function(le){ve.merge(le),le.connectedEdges().forEach(function(me){v.contains(me)&&!ne.contains(me)&&ve.merge(me)})}),ve},ge=[Ee(oe),Ee(ue)],be={cut:ne,components:ge,partition1:oe,partition2:ue};return be}},_Math$hypot,copyPosition=function(v){return{x:v.x,y:v.y}},modelToRenderedPosition$1=function(v,S,R){return{x:v.x*S+R.x,y:v.y*S+R.y}},renderedToModelPosition=function(v,S,R){return{x:(v.x-R.x)/S,y:(v.y-R.y)/S}},array2point=function(v){return{x:v[0],y:v[1]}},min=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=1/0,A=S;A<R;A++){var k=v[A];isFinite(k)&&(T=Math.min(k,T))}return T},max=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=-1/0,A=S;A<R;A++){var k=v[A];isFinite(k)&&(T=Math.max(k,T))}return T},mean=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=0,A=0,k=S;k<R;k++){var q=v[k];isFinite(q)&&(T+=q,A++)}return T/A},median=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;T?v=v.slice(S,R):(R<v.length&&v.splice(R,v.length-R),S>0&&v.splice(0,S));for(var q=0,M=v.length-1;M>=0;M--){var D=v[M];k?isFinite(D)||(v[M]=-1/0,q++):v.splice(M,1)}A&&v.sort(function(N,F){return N-F});var L=v.length,I=Math.floor(L/2);return L%2!==0?v[I+1+q]:(v[I-1+q]+v[I+q])/2},deg2rad=function(v){return Math.PI*v/180},getAngleFromDisp=function(v,S){return Math.atan2(S,v)-Math.PI/2},log2=Math.log2||function(_){return Math.log(_)/Math.log(2)},signum=function(v){return v>0?1:v<0?-1:0},dist$1=function(v,S){return Math.sqrt(sqdist(v,S))},sqdist=function(v,S){var R=S.x-v.x,T=S.y-v.y;return R*R+T*T},inPlaceSumNormalize=function(v){for(var S=v.length,R=0,T=0;T<S;T++)R+=v[T];for(var A=0;A<S;A++)v[A]=v[A]/R;return v},qbezierAt=function(v,S,R,T){return(1-T)*(1-T)*v+2*(1-T)*T*S+T*T*R},qbezierPtAt=function(v,S,R,T){return{x:qbezierAt(v.x,S.x,R.x,T),y:qbezierAt(v.y,S.y,R.y,T)}},lineAt=function(v,S,R,T){var A={x:S.x-v.x,y:S.y-v.y},k=dist$1(v,S),q={x:A.x/k,y:A.y/k};return R=R??0,T=T??R*k,{x:v.x+q.x*T,y:v.y+q.y*T}},bound=function(v,S,R){return Math.max(v,Math.min(R,S))},makeBoundingBox=function(v){if(v==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(v.x1!=null&&v.y1!=null){if(v.x2!=null&&v.y2!=null&&v.x2>=v.x1&&v.y2>=v.y1)return{x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,w:v.x2-v.x1,h:v.y2-v.y1};if(v.w!=null&&v.h!=null&&v.w>=0&&v.h>=0)return{x1:v.x1,y1:v.y1,x2:v.x1+v.w,y2:v.y1+v.h,w:v.w,h:v.h}}},copyBoundingBox=function(v){return{x1:v.x1,x2:v.x2,w:v.w,y1:v.y1,y2:v.y2,h:v.h}},clearBoundingBox=function(v){v.x1=1/0,v.y1=1/0,v.x2=-1/0,v.y2=-1/0,v.w=0,v.h=0},updateBoundingBox=function(v,S){v.x1=Math.min(v.x1,S.x1),v.x2=Math.max(v.x2,S.x2),v.w=v.x2-v.x1,v.y1=Math.min(v.y1,S.y1),v.y2=Math.max(v.y2,S.y2),v.h=v.y2-v.y1},expandBoundingBoxByPoint=function(v,S,R){v.x1=Math.min(v.x1,S),v.x2=Math.max(v.x2,S),v.w=v.x2-v.x1,v.y1=Math.min(v.y1,R),v.y2=Math.max(v.y2,R),v.h=v.y2-v.y1},expandBoundingBox=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return v.x1-=S,v.x2+=S,v.y1-=S,v.y2+=S,v.w=v.x2-v.x1,v.h=v.y2-v.y1,v},expandBoundingBoxSides=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],R,T,A,k;if(S.length===1)R=T=A=k=S[0];else if(S.length===2)R=A=S[0],k=T=S[1];else if(S.length===4){var q=_slicedToArray(S,4);R=q[0],T=q[1],A=q[2],k=q[3]}return v.x1-=k,v.x2+=T,v.y1-=R,v.y2+=A,v.w=v.x2-v.x1,v.h=v.y2-v.y1,v},assignBoundingBox=function(v,S){v.x1=S.x1,v.y1=S.y1,v.x2=S.x2,v.y2=S.y2,v.w=v.x2-v.x1,v.h=v.y2-v.y1},boundingBoxesIntersect=function(v,S){return!(v.x1>S.x2||S.x1>v.x2||v.x2<S.x1||S.x2<v.x1||v.y2<S.y1||S.y2<v.y1||v.y1>S.y2||S.y1>v.y2)},inBoundingBox=function(v,S,R){return v.x1<=S&&S<=v.x2&&v.y1<=R&&R<=v.y2},pointInBoundingBox=function(v,S){return inBoundingBox(v,S.x,S.y)},boundingBoxInBoundingBox=function(v,S){return inBoundingBox(v,S.x1,S.y1)&&inBoundingBox(v,S.x2,S.y2)},hypot=(_Math$hypot=Math.hypot)!==null&&_Math$hypot!==void 0?_Math$hypot:function(_,v){return Math.sqrt(_*_+v*v)};function inflatePolygon(_,v){if(_.length<3)throw new Error("Need at least 3 vertices");var S=function(ne,oe){return{x:ne.x+oe.x,y:ne.y+oe.y}},R=function(ne,oe){return{x:ne.x-oe.x,y:ne.y-oe.y}},T=function(ne,oe){return{x:ne.x*oe,y:ne.y*oe}},A=function(ne,oe){return ne.x*oe.y-ne.y*oe.x},k=function(ne){var oe=hypot(ne.x,ne.y);return oe===0?{x:0,y:0}:{x:ne.x/oe,y:ne.y/oe}},q=function(ne){for(var oe=0,ue=0;ue<ne.length;ue++){var ce=ne[ue],de=ne[(ue+1)%ne.length];oe+=ce.x*de.y-de.x*ce.y}return oe/2},M=function(ne,oe,ue,ce){var de=R(oe,ne),pe=R(ce,ue),_e=A(de,pe);if(Math.abs(_e)<1e-9)return S(ne,T(de,.5));var Ee=A(R(ue,ne),pe)/_e;return S(ne,T(de,Ee))},D=_.map(function(ee){return{x:ee.x,y:ee.y}});q(D)<0&&D.reverse();for(var L=D.length,I=[],N=0;N<L;N++){var F=D[N],H=D[(N+1)%L],G=R(H,F),V=k({x:G.y,y:-G.x});I.push(V)}for(var j=I.map(function(ee,ne){var oe=S(D[ne],T(ee,v)),ue=S(D[(ne+1)%L],T(ee,v));return{p1:oe,p2:ue}}),W=[],X=0;X<L;X++){var J=j[(X-1+L)%L],te=j[X],re=M(J.p1,J.p2,te.p1,te.p2);W.push(re)}return W}function miterBox(_,v,S,R,T,A){var k=transformPoints(_,v,S,R,T),q=inflatePolygon(k,A),M=makeBoundingBox();return q.forEach(function(D){return expandBoundingBoxByPoint(M,D.x,D.y)}),M}var roundRectangleIntersectLine=function(v,S,R,T,A,k,q){var M=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",D=M==="auto"?getRoundRectangleRadius(A,k):M,L=A/2,I=k/2;D=Math.min(D,L,I);var N=D!==L,F=D!==I,H;if(N){var G=R-L+D-q,V=T-I-q,j=R+L-D+q,W=V;if(H=finiteLinesIntersect(v,S,R,T,G,V,j,W,!1),H.length>0)return H}if(F){var X=R+L+q,J=T-I+D-q,te=X,re=T+I-D+q;if(H=finiteLinesIntersect(v,S,R,T,X,J,te,re,!1),H.length>0)return H}if(N){var ee=R-L+D-q,ne=T+I+q,oe=R+L-D+q,ue=ne;if(H=finiteLinesIntersect(v,S,R,T,ee,ne,oe,ue,!1),H.length>0)return H}if(F){var ce=R-L-q,de=T-I+D-q,pe=ce,_e=T+I-D+q;if(H=finiteLinesIntersect(v,S,R,T,ce,de,pe,_e,!1),H.length>0)return H}var Ee;{var ge=R-L+D,be=T-I+D;if(Ee=intersectLineCircle(v,S,R,T,ge,be,D+q),Ee.length>0&&Ee[0]<=ge&&Ee[1]<=be)return[Ee[0],Ee[1]]}{var Ae=R+L-D,De=T-I+D;if(Ee=intersectLineCircle(v,S,R,T,Ae,De,D+q),Ee.length>0&&Ee[0]>=Ae&&Ee[1]<=De)return[Ee[0],Ee[1]]}{var ve=R+L-D,le=T+I-D;if(Ee=intersectLineCircle(v,S,R,T,ve,le,D+q),Ee.length>0&&Ee[0]>=ve&&Ee[1]>=le)return[Ee[0],Ee[1]]}{var me=R-L+D,Te=T+I-D;if(Ee=intersectLineCircle(v,S,R,T,me,Te,D+q),Ee.length>0&&Ee[0]<=me&&Ee[1]>=Te)return[Ee[0],Ee[1]]}return[]},inLineVicinity=function(v,S,R,T,A,k,q){var M=q,D=Math.min(R,A),L=Math.max(R,A),I=Math.min(T,k),N=Math.max(T,k);return D-M<=v&&v<=L+M&&I-M<=S&&S<=N+M},inBezierVicinity=function(v,S,R,T,A,k,q,M,D){var L={x1:Math.min(R,q,A)-D,x2:Math.max(R,q,A)+D,y1:Math.min(T,M,k)-D,y2:Math.max(T,M,k)+D};return!(v<L.x1||v>L.x2||S<L.y1||S>L.y2)},solveQuadratic=function(v,S,R,T){R-=T;var A=S*S-4*v*R;if(A<0)return[];var k=Math.sqrt(A),q=2*v,M=(-S+k)/q,D=(-S-k)/q;return[M,D]},solveCubic=function(v,S,R,T,A){var k=1e-5;v===0&&(v=k),S/=v,R/=v,T/=v;var q,M,D,L,I,N,F,H;if(M=(3*R-S*S)/9,D=-(27*T)+S*(9*R-2*(S*S)),D/=54,q=M*M*M+D*D,A[1]=0,F=S/3,q>0){I=D+Math.sqrt(q),I=I<0?-Math.pow(-I,1/3):Math.pow(I,1/3),N=D-Math.sqrt(q),N=N<0?-Math.pow(-N,1/3):Math.pow(N,1/3),A[0]=-F+I+N,F+=(I+N)/2,A[4]=A[2]=-F,F=Math.sqrt(3)*(-N+I)/2,A[3]=F,A[5]=-F;return}if(A[5]=A[3]=0,q===0){H=D<0?-Math.pow(-D,1/3):Math.pow(D,1/3),A[0]=-F+2*H,A[4]=A[2]=-(H+F);return}M=-M,L=M*M*M,L=Math.acos(D/Math.sqrt(L)),H=2*Math.sqrt(M),A[0]=-F+H*Math.cos(L/3),A[2]=-F+H*Math.cos((L+2*Math.PI)/3),A[4]=-F+H*Math.cos((L+4*Math.PI)/3)},sqdistToQuadraticBezier=function(v,S,R,T,A,k,q,M){var D=1*R*R-4*R*A+2*R*q+4*A*A-4*A*q+q*q+T*T-4*T*k+2*T*M+4*k*k-4*k*M+M*M,L=9*R*A-3*R*R-3*R*q-6*A*A+3*A*q+9*T*k-3*T*T-3*T*M-6*k*k+3*k*M,I=3*R*R-6*R*A+R*q-R*v+2*A*A+2*A*v-q*v+3*T*T-6*T*k+T*M-T*S+2*k*k+2*k*S-M*S,N=1*R*A-R*R+R*v-A*v+T*k-T*T+T*S-k*S,F=[];solveCubic(D,L,I,N,F);for(var H=1e-7,G=[],V=0;V<6;V+=2)Math.abs(F[V+1])<H&&F[V]>=0&&F[V]<=1&&G.push(F[V]);G.push(1),G.push(0);for(var j=-1,W,X,J,te=0;te<G.length;te++)W=Math.pow(1-G[te],2)*R+2*(1-G[te])*G[te]*A+G[te]*G[te]*q,X=Math.pow(1-G[te],2)*T+2*(1-G[te])*G[te]*k+G[te]*G[te]*M,J=Math.pow(W-v,2)+Math.pow(X-S,2),j>=0?J<j&&(j=J):j=J;return j},sqdistToFiniteLine=function(v,S,R,T,A,k){var q=[v-R,S-T],M=[A-R,k-T],D=M[0]*M[0]+M[1]*M[1],L=q[0]*q[0]+q[1]*q[1],I=q[0]*M[0]+q[1]*M[1],N=I*I/D;return I<0?L:N>D?(v-A)*(v-A)+(S-k)*(S-k):L-N},pointInsidePolygonPoints=function(v,S,R){for(var T,A,k,q,M,D=0,L=0;L<R.length/2;L++)if(T=R[L*2],A=R[L*2+1],L+1<R.length/2?(k=R[(L+1)*2],q=R[(L+1)*2+1]):(k=R[(L+1-R.length/2)*2],q=R[(L+1-R.length/2)*2+1]),!(T==v&&k==v))if(T>=v&&v>=k||T<=v&&v<=k)M=(v-T)/(k-T)*(q-A)+A,M>S&&D++;else continue;return D%2!==0},pointInsidePolygon=function(v,S,R,T,A,k,q,M,D){var L=new Array(R.length),I;M[0]!=null?(I=Math.atan(M[1]/M[0]),M[0]<0?I=I+Math.PI/2:I=-I-Math.PI/2):I=M;for(var N=Math.cos(-I),F=Math.sin(-I),H=0;H<L.length/2;H++)L[H*2]=k/2*(R[H*2]*N-R[H*2+1]*F),L[H*2+1]=q/2*(R[H*2+1]*N+R[H*2]*F),L[H*2]+=T,L[H*2+1]+=A;var G;if(D>0){var V=expandPolygon(L,-D);G=joinLines(V)}else G=L;return pointInsidePolygonPoints(v,S,G)},pointInsideRoundPolygon=function(v,S,R,T,A,k,q,M){for(var D=new Array(R.length*2),L=0;L<M.length;L++){var I=M[L];D[L*4+0]=I.startX,D[L*4+1]=I.startY,D[L*4+2]=I.stopX,D[L*4+3]=I.stopY;var N=Math.pow(I.cx-v,2)+Math.pow(I.cy-S,2);if(N<=Math.pow(I.radius,2))return!0}return pointInsidePolygonPoints(v,S,D)},joinLines=function(v){for(var S=new Array(v.length/2),R,T,A,k,q,M,D,L,I=0;I<v.length/4;I++){R=v[I*4],T=v[I*4+1],A=v[I*4+2],k=v[I*4+3],I<v.length/4-1?(q=v[(I+1)*4],M=v[(I+1)*4+1],D=v[(I+1)*4+2],L=v[(I+1)*4+3]):(q=v[0],M=v[1],D=v[2],L=v[3]);var N=finiteLinesIntersect(R,T,A,k,q,M,D,L,!0);S[I*2]=N[0],S[I*2+1]=N[1]}return S},expandPolygon=function(v,S){for(var R=new Array(v.length*2),T,A,k,q,M=0;M<v.length/2;M++){T=v[M*2],A=v[M*2+1],M<v.length/2-1?(k=v[(M+1)*2],q=v[(M+1)*2+1]):(k=v[0],q=v[1]);var D=q-A,L=-(k-T),I=Math.sqrt(D*D+L*L),N=D/I,F=L/I;R[M*4]=T+N*S,R[M*4+1]=A+F*S,R[M*4+2]=k+N*S,R[M*4+3]=q+F*S}return R},intersectLineEllipse=function(v,S,R,T,A,k){var q=R-v,M=T-S;q/=A,M/=k;var D=Math.sqrt(q*q+M*M),L=D-1;if(L<0)return[];var I=L/D;return[(R-v)*I+v,(T-S)*I+S]},checkInEllipse=function(v,S,R,T,A,k,q){return v-=A,S-=k,v/=R/2+q,S/=T/2+q,v*v+S*S<=1},intersectLineCircle=function(v,S,R,T,A,k,q){var M=[R-v,T-S],D=[v-A,S-k],L=M[0]*M[0]+M[1]*M[1],I=2*(D[0]*M[0]+D[1]*M[1]),N=D[0]*D[0]+D[1]*D[1]-q*q,F=I*I-4*L*N;if(F<0)return[];var H=(-I+Math.sqrt(F))/(2*L),G=(-I-Math.sqrt(F))/(2*L),V=Math.min(H,G),j=Math.max(H,G),W=[];if(V>=0&&V<=1&&W.push(V),j>=0&&j<=1&&W.push(j),W.length===0)return[];var X=W[0]*M[0]+v,J=W[0]*M[1]+S;if(W.length>1){if(W[0]==W[1])return[X,J];var te=W[1]*M[0]+v,re=W[1]*M[1]+S;return[X,J,te,re]}else return[X,J]},midOfThree=function(v,S,R){return S<=v&&v<=R||R<=v&&v<=S?v:v<=S&&S<=R||R<=S&&S<=v?S:R},finiteLinesIntersect=function(v,S,R,T,A,k,q,M,D){var L=v-A,I=R-v,N=q-A,F=S-k,H=T-S,G=M-k,V=N*F-G*L,j=I*F-H*L,W=G*I-N*H;if(W!==0){var X=V/W,J=j/W,te=.001,re=0-te,ee=1+te;return re<=X&&X<=ee&&re<=J&&J<=ee?[v+X*I,S+X*H]:D?[v+X*I,S+X*H]:[]}else return V===0||j===0?midOfThree(v,R,q)===q?[q,M]:midOfThree(v,R,A)===A?[A,k]:midOfThree(A,q,R)===R?[R,T]:[]:[]},transformPoints=function(v,S,R,T,A){var k=[],q=T/2,M=A/2,D=S,L=R;k.push({x:D+q*v[0],y:L+M*v[1]});for(var I=1;I<v.length/2;I++)k.push({x:D+q*v[I*2],y:L+M*v[I*2+1]});return k},polygonIntersectLine=function(v,S,R,T,A,k,q,M){var D=[],L,I=new Array(R.length),N=!0;k==null&&(N=!1);var F;if(N){for(var H=0;H<I.length/2;H++)I[H*2]=R[H*2]*k+T,I[H*2+1]=R[H*2+1]*q+A;if(M>0){var G=expandPolygon(I,-M);F=joinLines(G)}else F=I}else F=R;for(var V,j,W,X,J=0;J<F.length/2;J++)V=F[J*2],j=F[J*2+1],J<F.length/2-1?(W=F[(J+1)*2],X=F[(J+1)*2+1]):(W=F[0],X=F[1]),L=finiteLinesIntersect(v,S,T,A,V,j,W,X),L.length!==0&&D.push(L[0],L[1]);return D},roundPolygonIntersectLine=function(v,S,R,T,A,k,q,M,D){var L=[],I,N=new Array(R.length*2);D.forEach(function(W,X){X===0?(N[N.length-2]=W.startX,N[N.length-1]=W.startY):(N[X*4-2]=W.startX,N[X*4-1]=W.startY),N[X*4]=W.stopX,N[X*4+1]=W.stopY,I=intersectLineCircle(v,S,T,A,W.cx,W.cy,W.radius),I.length!==0&&L.push(I[0],I[1])});for(var F=0;F<N.length/4;F++)I=finiteLinesIntersect(v,S,T,A,N[F*4],N[F*4+1],N[F*4+2],N[F*4+3],!1),I.length!==0&&L.push(I[0],I[1]);if(L.length>2){for(var H=[L[0],L[1]],G=Math.pow(H[0]-v,2)+Math.pow(H[1]-S,2),V=1;V<L.length/2;V++){var j=Math.pow(L[V*2]-v,2)+Math.pow(L[V*2+1]-S,2);j<=G&&(H[0]=L[V*2],H[1]=L[V*2+1],G=j)}return H}return L},shortenIntersection=function(v,S,R){var T=[v[0]-S[0],v[1]-S[1]],A=Math.sqrt(T[0]*T[0]+T[1]*T[1]),k=(A-R)/A;return k<0&&(k=1e-5),[S[0]+k*T[0],S[1]+k*T[1]]},generateUnitNgonPointsFitToSquare=function(v,S){var R=generateUnitNgonPoints(v,S);return R=fitPolygonToSquare(R),R},fitPolygonToSquare=function(v){for(var S,R,T=v.length/2,A=1/0,k=1/0,q=-1/0,M=-1/0,D=0;D<T;D++)S=v[2*D],R=v[2*D+1],A=Math.min(A,S),q=Math.max(q,S),k=Math.min(k,R),M=Math.max(M,R);for(var L=2/(q-A),I=2/(M-k),N=0;N<T;N++)S=v[2*N]=v[2*N]*L,R=v[2*N+1]=v[2*N+1]*I,A=Math.min(A,S),q=Math.max(q,S),k=Math.min(k,R),M=Math.max(M,R);if(k<-1)for(var F=0;F<T;F++)R=v[2*F+1]=v[2*F+1]+(-1-k);return v},generateUnitNgonPoints=function(v,S){var R=1/v*2*Math.PI,T=v%2===0?Math.PI/2+R/2:Math.PI/2;T+=S;for(var A=new Array(v*2),k,q=0;q<v;q++)k=q*R+T,A[2*q]=Math.cos(k),A[2*q+1]=Math.sin(-k);return A},getRoundRectangleRadius=function(v,S){return Math.min(v/4,S/4,8)},getRoundPolygonRadius=function(v,S){return Math.min(v/10,S/10,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(v,S,R){return[v-2*S+R,2*(S-v),v]},getBarrelCurveConstants=function(v,S){return{heightOffset:Math.min(15,.05*S),widthOffset:Math.min(100,.25*v),ctrlPtOffsetPct:.05}};function satPolygonIntersection(_,v){function S(I){for(var N=[],F=0;F<I.length;F++){var H=I[F],G=I[(F+1)%I.length],V={x:G.x-H.x,y:G.y-H.y},j={x:-V.y,y:V.x},W=Math.sqrt(j.x*j.x+j.y*j.y);N.push({x:j.x/W,y:j.y/W})}return N}function R(I,N){var F=1/0,H=-1/0,G=_createForOfIteratorHelper(I),V;try{for(G.s();!(V=G.n()).done;){var j=V.value,W=j.x*N.x+j.y*N.y;F=Math.min(F,W),H=Math.max(H,W)}}catch(X){G.e(X)}finally{G.f()}return{min:F,max:H}}function T(I,N){return!(I.max<N.min||N.max<I.min)}var A=[].concat(_toConsumableArray(S(_)),_toConsumableArray(S(v))),k=_createForOfIteratorHelper(A),q;try{for(k.s();!(q=k.n()).done;){var M=q.value,D=R(_,M),L=R(v,M);if(!T(D,L))return!1}}catch(I){k.e(I)}finally{k.f()}return!0}var pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(v){return 1}}),elesfn$o={pageRank:function(v){for(var S=pageRankDefaults(v),R=S.dampingFactor,T=S.precision,A=S.iterations,k=S.weight,q=this._private.cy,M=this.byGroup(),D=M.nodes,L=M.edges,I=D.length,N=I*I,F=L.length,H=new Array(N),G=new Array(I),V=(1-R)/I,j=0;j<I;j++){for(var W=0;W<I;W++){var X=j*I+W;H[X]=0}G[j]=0}for(var J=0;J<F;J++){var te=L[J],re=te.data("source"),ee=te.data("target");if(re!==ee){var ne=D.indexOfId(re),oe=D.indexOfId(ee),ue=k(te),ce=oe*I+ne;H[ce]+=ue,G[ne]+=ue}}for(var de=1/I+V,pe=0;pe<I;pe++)if(G[pe]===0)for(var _e=0;_e<I;_e++){var Ee=_e*I+pe;H[Ee]=de}else for(var ge=0;ge<I;ge++){var be=ge*I+pe;H[be]=H[be]/G[pe]+V}for(var Ae=new Array(I),De=new Array(I),ve,le=0;le<I;le++)Ae[le]=1;for(var me=0;me<A;me++){for(var Te=0;Te<I;Te++)De[Te]=0;for(var ye=0;ye<I;ye++)for(var Re=0;Re<I;Re++){var qe=ye*I+Re;De[ye]+=H[qe]*Ae[Re]}inPlaceSumNormalize(De),ve=Ae,Ae=De,De=ve;for(var ke=0,ze=0;ze<I;ze++){var Ne=ve[ze]-Ae[ze];ke+=Ne*Ne}if(ke<T)break}var Pe={rank:function(Ie){return Ie=q.collection(Ie)[0],Ae[D.indexOf(Ie)]}};return Pe}},defaults$f=defaults$g({root:null,weight:function(v){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function(v){v=defaults$f(v);var S=this.cy(),R=this.nodes(),T=R.length;if(v.directed){for(var L={},I={},N=0,F=0,H=0;H<T;H++){var G=R[H],V=G.id();v.root=G;var j=this.degreeCentrality(v);N<j.indegree&&(N=j.indegree),F<j.outdegree&&(F=j.outdegree),L[V]=j.indegree,I[V]=j.outdegree}return{indegree:function(X){return N==0?0:(string$1(X)&&(X=S.filter(X)),L[X.id()]/N)},outdegree:function(X){return F===0?0:(string$1(X)&&(X=S.filter(X)),I[X.id()]/F)}}}else{for(var A={},k=0,q=0;q<T;q++){var M=R[q];v.root=M;var D=this.degreeCentrality(v);k<D.degree&&(k=D.degree),A[M.id()]=D.degree}return{degree:function(X){return k===0?0:(string$1(X)&&(X=S.filter(X)),A[X.id()]/k)}}}},degreeCentrality:function(v){v=defaults$f(v);var S=this.cy(),R=this,T=v,A=T.root,k=T.weight,q=T.directed,M=T.alpha;if(A=S.collection(A)[0],q){for(var F=A.connectedEdges(),H=F.filter(function(re){return re.target().same(A)&&R.has(re)}),G=F.filter(function(re){return re.source().same(A)&&R.has(re)}),V=H.length,j=G.length,W=0,X=0,J=0;J<H.length;J++)W+=k(H[J]);for(var te=0;te<G.length;te++)X+=k(G[te]);return{indegree:Math.pow(V,1-M)*Math.pow(W,M),outdegree:Math.pow(j,1-M)*Math.pow(X,M)}}else{for(var D=A.connectedEdges().intersection(R),L=D.length,I=0,N=0;N<D.length;N++)I+=k(D[N]);return{degree:Math.pow(L,1-M)*Math.pow(I,M)}}}};elesfn$n.dc=elesfn$n.degreeCentrality;elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function(v){for(var S=defaults$e(v),R=S.harmonic,T=S.weight,A=S.directed,k=this.cy(),q={},M=0,D=this.nodes(),L=this.floydWarshall({weight:T,directed:A}),I=0;I<D.length;I++){for(var N=0,F=D[I],H=0;H<D.length;H++)if(I!==H){var G=L.distance(F,D[H]);R?N+=1/G:N+=G}R||(N=1/N),M<N&&(M=N),q[F.id()]=N}return{closeness:function(j){return M==0?0:(string$1(j)?j=k.filter(j)[0].id():j=j.id(),q[j]/M)}}},closenessCentrality:function(v){var S=defaults$e(v),R=S.root,T=S.weight,A=S.directed,k=S.harmonic;R=this.filter(R)[0];for(var q=this.dijkstra({root:R,weight:T,directed:A}),M=0,D=this.nodes(),L=0;L<D.length;L++){var I=D[L];if(!I.same(R)){var N=q.distanceTo(I);k?M+=1/N:M+=N}}return k?M:1/M}};elesfn$m.cc=elesfn$m.closenessCentrality;elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function(v){for(var S=defaults$d(v),R=S.directed,T=S.weight,A=T!=null,k=this.cy(),q=this.nodes(),M={},D={},L=0,I={set:function(X,J){D[X]=J,J>L&&(L=J)},get:function(X){return D[X]}},N=0;N<q.length;N++){var F=q[N],H=F.id();R?M[H]=F.outgoers().nodes():M[H]=F.openNeighborhood().nodes(),I.set(H,0)}for(var G=function(){for(var X=q[V].id(),J=[],te={},re={},ee={},ne=new Heap(function(ye,Re){return ee[ye]-ee[Re]}),oe=0;oe<q.length;oe++){var ue=q[oe].id();te[ue]=[],re[ue]=0,ee[ue]=1/0}for(re[X]=1,ee[X]=0,ne.push(X);!ne.empty();){var ce=ne.pop();if(J.push(ce),A)for(var de=0;de<M[ce].length;de++){var pe=M[ce][de],_e=k.getElementById(ce),Ee=void 0;_e.edgesTo(pe).length>0?Ee=_e.edgesTo(pe)[0]:Ee=pe.edgesTo(_e)[0];var ge=T(Ee);pe=pe.id(),ee[pe]>ee[ce]+ge&&(ee[pe]=ee[ce]+ge,ne.nodes.indexOf(pe)<0?ne.push(pe):ne.updateItem(pe),re[pe]=0,te[pe]=[]),ee[pe]==ee[ce]+ge&&(re[pe]=re[pe]+re[ce],te[pe].push(ce))}else for(var be=0;be<M[ce].length;be++){var Ae=M[ce][be].id();ee[Ae]==1/0&&(ne.push(Ae),ee[Ae]=ee[ce]+1),ee[Ae]==ee[ce]+1&&(re[Ae]=re[Ae]+re[ce],te[Ae].push(ce))}}for(var De={},ve=0;ve<q.length;ve++)De[q[ve].id()]=0;for(;J.length>0;){for(var le=J.pop(),me=0;me<te[le].length;me++){var Te=te[le][me];De[Te]=De[Te]+re[Te]/re[le]*(1+De[le])}le!=q[V].id()&&I.set(le,I.get(le)+De[le])}},V=0;V<q.length;V++)G();var j={betweenness:function(X){var J=k.collection(X).id();return I.get(J)},betweennessNormalized:function(X){if(L==0)return 0;var J=k.collection(X).id();return I.get(J)/L}};return j.betweennessNormalised=j.betweennessNormalized,j}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(_){return 1}]}),setOptions$3=function(v){return defaults$c(v)},getSimilarity$1=function(v,S){for(var R=0,T=0;T<S.length;T++)R+=S[T](v);return R},addLoops=function(v,S,R){for(var T=0;T<S;T++)v[T*S+T]=R},normalize$1=function(v,S){for(var R,T=0;T<S;T++){R=0;for(var A=0;A<S;A++)R+=v[A*S+T];for(var k=0;k<S;k++)v[k*S+T]=v[k*S+T]/R}},mmult=function(v,S,R){for(var T=new Array(R*R),A=0;A<R;A++){for(var k=0;k<R;k++)T[A*R+k]=0;for(var q=0;q<R;q++)for(var M=0;M<R;M++)T[A*R+M]+=v[A*R+q]*S[q*R+M]}return T},expand=function(v,S,R){for(var T=v.slice(0),A=1;A<R;A++)v=mmult(v,T,S);return v},inflate=function(v,S,R){for(var T=new Array(S*S),A=0;A<S*S;A++)T[A]=Math.pow(v[A],R);return normalize$1(T,S),T},hasConverged=function(v,S,R,T){for(var A=0;A<R;A++){var k=Math.round(v[A]*Math.pow(10,T))/Math.pow(10,T),q=Math.round(S[A]*Math.pow(10,T))/Math.pow(10,T);if(k!==q)return!1}return!0},assign$2=function(v,S,R,T){for(var A=[],k=0;k<S;k++){for(var q=[],M=0;M<S;M++)Math.round(v[k*S+M]*1e3)/1e3>0&&q.push(R[M]);q.length!==0&&A.push(T.collection(q))}return A},isDuplicate=function(v,S){for(var R=0;R<v.length;R++)if(!S[R]||v[R].id()!==S[R].id())return!1;return!0},removeDuplicates=function(v){for(var S=0;S<v.length;S++)for(var R=0;R<v.length;R++)S!=R&&isDuplicate(v[S],v[R])&&v.splice(R,1);return v},markovClustering=function(v){for(var S=this.nodes(),R=this.edges(),T=this.cy(),A=setOptions$3(v),k={},q=0;q<S.length;q++)k[S[q].id()]=q;for(var M=S.length,D=M*M,L=new Array(D),I,N=0;N<D;N++)L[N]=0;for(var F=0;F<R.length;F++){var H=R[F],G=k[H.source().id()],V=k[H.target().id()],j=getSimilarity$1(H,A.attributes);L[G*M+V]+=j,L[V*M+G]+=j}addLoops(L,M,A.multFactor),normalize$1(L,M);for(var W=!0,X=0;W&&X<A.maxIterations;)W=!1,I=expand(L,M,A.expandFactor),L=inflate(I,M,A.inflateFactor),hasConverged(L,I,D,4)||(W=!0),X++;var J=assign$2(L,M,S,T);return J=removeDuplicates(J),J},markovClustering$1={markovClustering,mcl:markovClustering},identity$1=function(v){return v},absDiff=function(v,S){return Math.abs(S-v)},addAbsDiff=function(v,S,R){return v+absDiff(S,R)},addSquaredDiff=function(v,S,R){return v+Math.pow(R-S,2)},sqrt=function(v){return Math.sqrt(v)},maxAbsDiff=function(v,S,R){return Math.max(v,absDiff(S,R))},getDistance=function(v,S,R,T,A){for(var k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:identity$1,q=T,M,D,L=0;L<v;L++)M=S(L),D=R(L),q=A(q,M,D);return k(q)},distances={euclidean:function(v,S,R){return v>=2?getDistance(v,S,R,0,addSquaredDiff,sqrt):getDistance(v,S,R,0,addAbsDiff)},squaredEuclidean:function(v,S,R){return getDistance(v,S,R,0,addSquaredDiff)},manhattan:function(v,S,R){return getDistance(v,S,R,0,addAbsDiff)},max:function(v,S,R){return getDistance(v,S,R,-1/0,maxAbsDiff)}};distances["squared-euclidean"]=distances.squaredEuclidean;distances.squaredeuclidean=distances.squaredEuclidean;function clusteringDistance(_,v,S,R,T,A){var k;return fn$6(_)?k=_:k=distances[_]||distances.euclidean,v===0&&fn$6(_)?k(T,A):k(v,S,R,T,A)}var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=function(v){return defaults$b(v)},getDist=function(v,S,R,T,A){var k=A!=="kMedoids",q=k?function(I){return R[I]}:function(I){return T[I](R)},M=function(N){return T[N](S)},D=R,L=S;return clusteringDistance(v,T.length,q,M,D,L)},randomCentroids=function(v,S,R){for(var T=R.length,A=new Array(T),k=new Array(T),q=new Array(S),M=null,D=0;D<T;D++)A[D]=v.min(R[D]).value,k[D]=v.max(R[D]).value;for(var L=0;L<S;L++){M=[];for(var I=0;I<T;I++)M[I]=Math.random()*(k[I]-A[I])+A[I];q[L]=M}return q},classify=function(v,S,R,T,A){for(var k=1/0,q=0,M=0;M<S.length;M++){var D=getDist(R,v,S[M],T,A);D<k&&(k=D,q=M)}return q},buildCluster=function(v,S,R){for(var T=[],A=null,k=0;k<S.length;k++)A=S[k],R[A.id()]===v&&T.push(A);return T},haveValuesConverged=function(v,S,R){return Math.abs(S-v)<=R},haveMatricesConverged=function(v,S,R){for(var T=0;T<v.length;T++)for(var A=0;A<v[T].length;A++){var k=Math.abs(v[T][A]-S[T][A]);if(k>R)return!1}return!0},seenBefore=function(v,S,R){for(var T=0;T<R;T++)if(v===S[T])return!0;return!1},randomMedoids=function(v,S){var R=new Array(S);if(v.length<50)for(var T=0;T<S;T++){for(var A=v[Math.floor(Math.random()*v.length)];seenBefore(A,R,T);)A=v[Math.floor(Math.random()*v.length)];R[T]=A}else for(var k=0;k<S;k++)R[k]=v[Math.floor(Math.random()*v.length)];return R},findCost=function(v,S,R){for(var T=0,A=0;A<S.length;A++)T+=getDist("manhattan",S[A],v,R,"kMedoids");return T},kMeans=function(v){var S=this.cy(),R=this.nodes(),T=null,A=setOptions$2(v),k=new Array(A.k),q={},M;A.testMode?typeof A.testCentroids=="number"?(A.testCentroids,M=randomCentroids(R,A.k,A.attributes)):_typeof(A.testCentroids)==="object"?M=A.testCentroids:M=randomCentroids(R,A.k,A.attributes):M=randomCentroids(R,A.k,A.attributes);for(var D=!0,L=0;D&&L<A.maxIterations;){for(var I=0;I<R.length;I++)T=R[I],q[T.id()]=classify(T,M,A.distance,A.attributes,"kMeans");D=!1;for(var N=0;N<A.k;N++){var F=buildCluster(N,R,q);if(F.length!==0){for(var H=A.attributes.length,G=M[N],V=new Array(H),j=new Array(H),W=0;W<H;W++){j[W]=0;for(var X=0;X<F.length;X++)T=F[X],j[W]+=A.attributes[W](T);V[W]=j[W]/F.length,haveValuesConverged(V[W],G[W],A.sensitivityThreshold)||(D=!0)}M[N]=V,k[N]=S.collection(F)}}L++}return k},kMedoids=function(v){var S=this.cy(),R=this.nodes(),T=null,A=setOptions$2(v),k=new Array(A.k),q,M={},D,L=new Array(A.k);A.testMode?typeof A.testCentroids=="number"||(_typeof(A.testCentroids)==="object"?q=A.testCentroids:q=randomMedoids(R,A.k)):q=randomMedoids(R,A.k);for(var I=!0,N=0;I&&N<A.maxIterations;){for(var F=0;F<R.length;F++)T=R[F],M[T.id()]=classify(T,q,A.distance,A.attributes,"kMedoids");I=!1;for(var H=0;H<q.length;H++){var G=buildCluster(H,R,M);if(G.length!==0){L[H]=findCost(q[H],G,A.attributes);for(var V=0;V<G.length;V++)D=findCost(G[V],G,A.attributes),D<L[H]&&(L[H]=D,q[H]=G[V],I=!0);k[H]=S.collection(G)}}N++}return k},updateCentroids=function(v,S,R,T,A){for(var k,q,M=0;M<S.length;M++)for(var D=0;D<v.length;D++)T[M][D]=Math.pow(R[M][D],A.m);for(var L=0;L<v.length;L++)for(var I=0;I<A.attributes.length;I++){k=0,q=0;for(var N=0;N<S.length;N++)k+=T[N][L]*A.attributes[I](S[N]),q+=T[N][L];v[L][I]=k/q}},updateMembership=function(v,S,R,T,A){for(var k=0;k<v.length;k++)S[k]=v[k].slice();for(var q,M,D,L=2/(A.m-1),I=0;I<R.length;I++)for(var N=0;N<T.length;N++){q=0;for(var F=0;F<R.length;F++)M=getDist(A.distance,T[N],R[I],A.attributes,"cmeans"),D=getDist(A.distance,T[N],R[F],A.attributes,"cmeans"),q+=Math.pow(M/D,L);v[N][I]=1/q}},assign$1=function(v,S,R,T){for(var A=new Array(R.k),k=0;k<A.length;k++)A[k]=[];for(var q,M,D=0;D<S.length;D++){q=-1/0,M=-1;for(var L=0;L<S[0].length;L++)S[D][L]>q&&(q=S[D][L],M=L);A[M].push(v[D])}for(var I=0;I<A.length;I++)A[I]=T.collection(A[I]);return A},fuzzyCMeans=function(v){var S=this.cy(),R=this.nodes(),T=setOptions$2(v),A,k,q,M,D;M=new Array(R.length);for(var L=0;L<R.length;L++)M[L]=new Array(T.k);q=new Array(R.length);for(var I=0;I<R.length;I++)q[I]=new Array(T.k);for(var N=0;N<R.length;N++){for(var F=0,H=0;H<T.k;H++)q[N][H]=Math.random(),F+=q[N][H];for(var G=0;G<T.k;G++)q[N][G]=q[N][G]/F}k=new Array(T.k);for(var V=0;V<T.k;V++)k[V]=new Array(T.attributes.length);D=new Array(R.length);for(var j=0;j<R.length;j++)D[j]=new Array(T.k);for(var W=!0,X=0;W&&X<T.maxIterations;)W=!1,updateCentroids(k,R,q,D,T),updateMembership(q,M,k,R,T),haveMatricesConverged(q,M,T.sensitivityThreshold)||(W=!0),X++;return A=assign$1(R,q,T,S),{clusters:A,degreeOfMembership:q}},kClustering={kMeans,kMedoids,fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function(v){var S=defaults$a(v),R=linkageAliases[S.linkage];return R!=null&&(S.linkage=R),S},mergeClosest=function(v,S,R,T,A){for(var k=0,q=1/0,M,D=A.attributes,L=function(oe,ue){return clusteringDistance(A.distance,D.length,function(ce){return D[ce](oe)},function(ce){return D[ce](ue)},oe,ue)},I=0;I<v.length;I++){var N=v[I].key,F=R[N][T[N]];F<q&&(k=N,q=F)}if(A.mode==="threshold"&&q>=A.threshold||A.mode==="dendrogram"&&v.length===1)return!1;var H=S[k],G=S[T[k]],V;A.mode==="dendrogram"?V={left:H,right:G,key:H.key}:V={value:H.value.concat(G.value),key:H.key},v[H.index]=V,v.splice(G.index,1),S[H.key]=V;for(var j=0;j<v.length;j++){var W=v[j];H.key===W.key?M=1/0:A.linkage==="min"?(M=R[H.key][W.key],R[H.key][W.key]>R[G.key][W.key]&&(M=R[G.key][W.key])):A.linkage==="max"?(M=R[H.key][W.key],R[H.key][W.key]<R[G.key][W.key]&&(M=R[G.key][W.key])):A.linkage==="mean"?M=(R[H.key][W.key]*H.size+R[G.key][W.key]*G.size)/(H.size+G.size):A.mode==="dendrogram"?M=L(W.value,H.value):M=L(W.value[0],H.value[0]),R[H.key][W.key]=R[W.key][H.key]=M}for(var X=0;X<v.length;X++){var J=v[X].key;if(T[J]===H.key||T[J]===G.key){for(var te=J,re=0;re<v.length;re++){var ee=v[re].key;R[J][ee]<R[J][te]&&(te=ee)}T[J]=te}v[X].index=X}return H.key=G.key=H.index=G.index=null,!0},_getAllChildren=function(v,S,R){v&&(v.value?S.push(v.value):(v.left&&_getAllChildren(v.left,S),v.right&&_getAllChildren(v.right,S)))},_buildDendrogram=function(v,S){if(!v)return"";if(v.left&&v.right){var R=_buildDendrogram(v.left,S),T=_buildDendrogram(v.right,S),A=S.add({group:"nodes",data:{id:R+","+T}});return S.add({group:"edges",data:{source:R,target:A.id()}}),S.add({group:"edges",data:{source:T,target:A.id()}}),A.id()}else if(v.value)return v.value.id()},_buildClustersFromTree=function(v,S,R){if(!v)return[];var T=[],A=[],k=[];return S===0?(v.left&&_getAllChildren(v.left,T),v.right&&_getAllChildren(v.right,A),k=T.concat(A),[R.collection(k)]):S===1?v.value?[R.collection(v.value)]:(v.left&&_getAllChildren(v.left,T),v.right&&_getAllChildren(v.right,A),[R.collection(T),R.collection(A)]):v.value?[R.collection(v.value)]:(v.left&&(T=_buildClustersFromTree(v.left,S-1,R)),v.right&&(A=_buildClustersFromTree(v.right,S-1,R)),T.concat(A))},hierarchicalClustering=function(v){for(var S=this.cy(),R=this.nodes(),T=setOptions$1(v),A=T.attributes,k=function(X,J){return clusteringDistance(T.distance,A.length,function(te){return A[te](X)},function(te){return A[te](J)},X,J)},q=[],M=[],D=[],L=[],I=0;I<R.length;I++){var N={value:T.mode==="dendrogram"?R[I]:[R[I]],key:I,index:I};q[I]=N,L[I]=N,M[I]=[],D[I]=0}for(var F=0;F<q.length;F++)for(var H=0;H<=F;H++){var G=void 0;T.mode==="dendrogram"?G=F===H?1/0:k(q[F].value,q[H].value):G=F===H?1/0:k(q[F].value[0],q[H].value[0]),M[F][H]=G,M[H][F]=G,G<M[F][D[F]]&&(D[F]=H)}for(var V=mergeClosest(q,L,M,D,T);V;)V=mergeClosest(q,L,M,D,T);var j;return T.mode==="dendrogram"?(j=_buildClustersFromTree(q[0],T.dendrogramDepth,S),T.addDendrogram&&_buildDendrogram(q[0],S)):(j=new Array(q.length),q.forEach(function(W,X){W.key=W.index=null,j[X]=S.collection(W.value)})),j},hierarchicalClustering$1={hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions=function(v){var S=v.damping,R=v.preference;.5<=S&&S<1||error("Damping must range on [0.5, 1).  Got: ".concat(S));var T=["median","mean","min","max"];return T.some(function(A){return A===R})||number$1(R)||error("Preference must be one of [".concat(T.map(function(A){return"'".concat(A,"'")}).join(", "),"] or a number.  Got: ").concat(R)),defaults$9(v)},getSimilarity=function(v,S,R,T){var A=function(q,M){return T[M](q)};return-clusteringDistance(v,T.length,function(k){return A(S,k)},function(k){return A(R,k)},S,R)},getPreference=function(v,S){var R=null;return S==="median"?R=median(v):S==="mean"?R=mean(v):S==="min"?R=min(v):S==="max"?R=max(v):R=S,R},findExemplars=function(v,S,R){for(var T=[],A=0;A<v;A++)S[A*v+A]+R[A*v+A]>0&&T.push(A);return T},assignClusters=function(v,S,R){for(var T=[],A=0;A<v;A++){for(var k=-1,q=-1/0,M=0;M<R.length;M++){var D=R[M];S[A*v+D]>q&&(k=D,q=S[A*v+D])}k>0&&T.push(k)}for(var L=0;L<R.length;L++)T[R[L]]=R[L];return T},assign=function(v,S,R){for(var T=assignClusters(v,S,R),A=0;A<R.length;A++){for(var k=[],q=0;q<T.length;q++)T[q]===R[A]&&k.push(q);for(var M=-1,D=-1/0,L=0;L<k.length;L++){for(var I=0,N=0;N<k.length;N++)I+=S[k[N]*v+k[L]];I>D&&(M=L,D=I)}R[A]=k[M]}return T=assignClusters(v,S,R),T},affinityPropagation=function(v){for(var S=this.cy(),R=this.nodes(),T=setOptions(v),A={},k=0;k<R.length;k++)A[R[k].id()]=k;var q,M,D,L,I,N;q=R.length,M=q*q,D=new Array(M);for(var F=0;F<M;F++)D[F]=-1/0;for(var H=0;H<q;H++)for(var G=0;G<q;G++)H!==G&&(D[H*q+G]=getSimilarity(T.distance,R[H],R[G],T.attributes));L=getPreference(D,T.preference);for(var V=0;V<q;V++)D[V*q+V]=L;I=new Array(M);for(var j=0;j<M;j++)I[j]=0;N=new Array(M);for(var W=0;W<M;W++)N[W]=0;for(var X=new Array(q),J=new Array(q),te=new Array(q),re=0;re<q;re++)X[re]=0,J[re]=0,te[re]=0;for(var ee=new Array(q*T.minIterations),ne=0;ne<ee.length;ne++)ee[ne]=0;var oe;for(oe=0;oe<T.maxIterations;oe++){for(var ue=0;ue<q;ue++){for(var ce=-1/0,de=-1/0,pe=-1,_e=0,Ee=0;Ee<q;Ee++)X[Ee]=I[ue*q+Ee],_e=N[ue*q+Ee]+D[ue*q+Ee],_e>=ce?(de=ce,ce=_e,pe=Ee):_e>de&&(de=_e);for(var ge=0;ge<q;ge++)I[ue*q+ge]=(1-T.damping)*(D[ue*q+ge]-ce)+T.damping*X[ge];I[ue*q+pe]=(1-T.damping)*(D[ue*q+pe]-de)+T.damping*X[pe]}for(var be=0;be<q;be++){for(var Ae=0,De=0;De<q;De++)X[De]=N[De*q+be],J[De]=Math.max(0,I[De*q+be]),Ae+=J[De];Ae-=J[be],J[be]=I[be*q+be],Ae+=J[be];for(var ve=0;ve<q;ve++)N[ve*q+be]=(1-T.damping)*Math.min(0,Ae-J[ve])+T.damping*X[ve];N[be*q+be]=(1-T.damping)*(Ae-J[be])+T.damping*X[be]}for(var le=0,me=0;me<q;me++){var Te=N[me*q+me]+I[me*q+me]>0?1:0;ee[oe%T.minIterations*q+me]=Te,le+=Te}if(le>0&&(oe>=T.minIterations-1||oe==T.maxIterations-1)){for(var ye=0,Re=0;Re<q;Re++){te[Re]=0;for(var qe=0;qe<T.minIterations;qe++)te[Re]+=ee[qe*q+Re];(te[Re]===0||te[Re]===T.minIterations)&&ye++}if(ye===q)break}}for(var ke=findExemplars(q,I,N),ze=assign(q,D,ke),Ne={},Pe=0;Pe<ke.length;Pe++)Ne[ke[Pe]]=[];for(var Me=0;Me<R.length;Me++){var Ie=A[R[Me].id()],Le=ze[Ie];Le!=null&&Ne[Le].push(R[Me])}for(var nt=new Array(ke.length),lt=0;lt<ke.length;lt++)nt[lt]=S.collection(Ne[ke[lt]]);return nt},affinityPropagation$1={affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:function(v){if(!plainObject(v)){var S=arguments;v={root:S[0],directed:S[1]}}var R=hierholzerDefaults(v),T=R.root,A=R.directed,k=this,q=!1,M,D,L;T&&(L=string$1(T)?this.filter(T)[0].id():T[0].id());var I={},N={};A?k.forEach(function(W){var X=W.id();if(W.isNode()){var J=W.indegree(!0),te=W.outdegree(!0),re=J-te,ee=te-J;re==1?M?q=!0:M=X:ee==1?D?q=!0:D=X:(ee>1||re>1)&&(q=!0),I[X]=[],W.outgoers().forEach(function(ne){ne.isEdge()&&I[X].push(ne.id())})}else N[X]=[void 0,W.target().id()]}):k.forEach(function(W){var X=W.id();if(W.isNode()){var J=W.degree(!0);J%2&&(M?D?q=!0:D=X:M=X),I[X]=[],W.connectedEdges().forEach(function(te){return I[X].push(te.id())})}else N[X]=[W.source().id(),W.target().id()]});var F={found:!1,trail:void 0};if(q)return F;if(D&&M)if(A){if(L&&D!=L)return F;L=D}else{if(L&&D!=L&&M!=L)return F;L||(L=D)}else L||(L=k[0].id());var H=function(X){for(var J=X,te=[X],re,ee,ne;I[J].length;)re=I[J].shift(),ee=N[re][0],ne=N[re][1],J!=ne?(I[ne]=I[ne].filter(function(oe){return oe!=re}),J=ne):!A&&J!=ee&&(I[ee]=I[ee].filter(function(oe){return oe!=re}),J=ee),te.unshift(re),te.unshift(J);return te},G=[],V=[];for(V=H(L);V.length!=1;)I[V[0]].length==0?(G.unshift(k.getElementById(V.shift())),G.unshift(k.getElementById(V.shift()))):V=H(V.shift()).concat(V);G.unshift(k.getElementById(V.shift()));for(var j in I)if(I[j].length)return F;return F.found=!0,F.trail=this.spawn(G,!0),F}},hopcroftTarjanBiconnected=function(){var v=this,S={},R=0,T=0,A=[],k=[],q={},M=function(N,F){for(var H=k.length-1,G=[],V=v.spawn();k[H].x!=N||k[H].y!=F;)G.push(k.pop().edge),H--;G.push(k.pop().edge),G.forEach(function(j){var W=j.connectedNodes().intersection(v);V.merge(j),W.forEach(function(X){var J=X.id(),te=X.connectedEdges().intersection(v);V.merge(X),S[J].cutVertex?V.merge(te.filter(function(re){return re.isLoop()})):V.merge(te)})}),A.push(V)},D=function(N,F,H){N===H&&(T+=1),S[F]={id:R,low:R++,cutVertex:!1};var G=v.getElementById(F).connectedEdges().intersection(v);if(G.size()===0)A.push(v.spawn(v.getElementById(F)));else{var V,j,W,X;G.forEach(function(J){V=J.source().id(),j=J.target().id(),W=V===F?j:V,W!==H&&(X=J.id(),q[X]||(q[X]=!0,k.push({x:F,y:W,edge:J})),W in S?S[F].low=Math.min(S[F].low,S[W].id):(D(N,W,F),S[F].low=Math.min(S[F].low,S[W].low),S[F].id<=S[W].low&&(S[F].cutVertex=!0,M(F,W))))})}};v.forEach(function(I){if(I.isNode()){var N=I.id();N in S||(T=0,D(N,N),S[N].cutVertex=T>1)}});var L=Object.keys(S).filter(function(I){return S[I].cutVertex}).map(function(I){return v.getElementById(I)});return{cut:v.spawn(L),components:A}},hopcroftTarjanBiconnected$1={hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},tarjanStronglyConnected=function(){var v=this,S={},R=0,T=[],A=[],k=v.spawn(v),q=function(D){A.push(D),S[D]={index:R,low:R++,explored:!1};var L=v.getElementById(D).connectedEdges().intersection(v);if(L.forEach(function(G){var V=G.target().id();V!==D&&(V in S||q(V),S[V].explored||(S[D].low=Math.min(S[D].low,S[V].low)))}),S[D].index===S[D].low){for(var I=v.spawn();;){var N=A.pop();if(I.merge(v.getElementById(N)),S[N].low=S[D].index,S[N].explored=!0,N===D)break}var F=I.edgesWith(I),H=I.merge(F);T.push(H),k=k.difference(H)}};return v.forEach(function(M){if(M.isNode()){var D=M.id();D in S||q(D)}}),{cut:k,components:T}},tarjanStronglyConnected$1={tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected},elesfn$j={};[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,hopcroftTarjanBiconnected$1,tarjanStronglyConnected$1].forEach(function(_){extend(elesfn$j,_)});var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,_api=function(v){if(!(this instanceof _api))return new _api(v);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof v=="function"&&v.call(this,this.fulfill.bind(this),this.reject.bind(this))};_api.prototype={fulfill:function(v){return deliver(this,STATE_FULFILLED,"fulfillValue",v)},reject:function(v){return deliver(this,STATE_REJECTED,"rejectReason",v)},then:function(v,S){var R=this,T=new _api;return R.onFulfilled.push(resolver(v,T,"fulfill")),R.onRejected.push(resolver(S,T,"reject")),execute(R),T.proxy}};var deliver=function(v,S,R,T){return v.state===STATE_PENDING&&(v.state=S,v[R]=T,execute(v)),v},execute=function(v){v.state===STATE_FULFILLED?execute_handlers(v,"onFulfilled",v.fulfillValue):v.state===STATE_REJECTED&&execute_handlers(v,"onRejected",v.rejectReason)},execute_handlers=function(v,S,R){if(v[S].length!==0){var T=v[S];v[S]=[];var A=function(){for(var q=0;q<T.length;q++)T[q](R)};typeof setImmediate=="function"?setImmediate(A):setTimeout(A,0)}},resolver=function(v,S,R){return function(T){if(typeof v!="function")S[R].call(S,T);else{var A;try{A=v(T)}catch(k){S.reject(k);return}_resolve(S,A)}}},_resolve=function(v,S){if(v===S||v.proxy===S){v.reject(new TypeError("cannot resolve promise with itself"));return}var R;if(_typeof(S)==="object"&&S!==null||typeof S=="function")try{R=S.then}catch(A){v.reject(A);return}if(typeof R=="function"){var T=!1;try{R.call(S,function(A){T||(T=!0,A===S?v.reject(new TypeError("circular thenable chain")):_resolve(v,A))},function(A){T||(T=!0,v.reject(A))})}catch(A){T||v.reject(A)}return}v.fulfill(S)};_api.all=function(_){return new _api(function(v,S){for(var R=new Array(_.length),T=0,A=function(M,D){R[M]=D,T++,T===_.length&&v(R)},k=0;k<_.length;k++)(function(q){var M=_[q],D=M!=null&&M.then!=null;if(D)M.then(function(I){A(q,I)},function(I){S(I)});else{var L=M;A(q,L)}})(k)})};_api.resolve=function(_){return new _api(function(v,S){v(_)})};_api.reject=function(_){return new _api(function(v,S){S(_)})};var Promise$1=typeof Promise<"u"?Promise:_api,Animation=function(v,S,R){var T=core(v),A=!T,k=this._private=extend({duration:1e3},S,R);if(k.target=v,k.style=k.style||k.css,k.started=!1,k.playing=!1,k.hooked=!1,k.applying=!1,k.progress=0,k.completes=[],k.frames=[],k.complete&&fn$6(k.complete)&&k.completes.push(k.complete),A){var q=v.position();k.startPosition=k.startPosition||{x:q.x,y:q.y},k.startStyle=k.startStyle||v.cy().style().getAnimationStartStyle(v,k.style)}if(T){var M=v.pan();k.startPan={x:M.x,y:M.y},k.startZoom=v.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var v=this._private;if(!v.hooked){var S,R=v.target._private.animation;v.queue?S=R.queue:S=R.current,S.push(this),elementOrCollection(v.target)&&v.target.cy().addToAnimationPool(v.target),v.hooked=!0}return this},play:function(){var v=this._private;return v.progress===1&&(v.progress=0),v.playing=!0,v.started=!1,v.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var v=this._private;return v.applying=!0,v.started=!1,v.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var v=this._private;return v.playing=!1,v.started=!1,this},stop:function(){var v=this._private;return v.playing=!1,v.started=!1,v.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(v){var S=this._private;return v===void 0?S.progress*S.duration:this.progress(v/S.duration)},progress:function(v){var S=this._private,R=S.playing;return v===void 0?S.progress:(R&&this.pause(),S.progress=v,S.started=!1,R&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var v=this._private,S=v.playing;S&&this.pause(),v.progress=1-v.progress,v.started=!1;var R=function(D,L){var I=v[D];I!=null&&(v[D]=v[L],v[L]=I)};if(R("zoom","startZoom"),R("pan","startPan"),R("position","startPosition"),v.style)for(var T=0;T<v.style.length;T++){var A=v.style[T],k=A.name,q=v.startStyle[k];v.startStyle[k]=A,v.style[T]=q}return S&&this.play(),this},promise:function(v){var S=this._private,R;switch(v){case"frame":R=S.frames;break;default:case"complete":case"completed":R=S.completes}return new Promise$1(function(T,A){R.push(function(){T()})})}});anifn.complete=anifn.completed;anifn.run=anifn.play;anifn.running=anifn.playing;var define$3={animated:function(){return function(){var S=this,R=S.length!==void 0,T=R?S:[S],A=this._private.cy||this;if(!A.styleEnabled())return!1;var k=T[0];if(k)return k._private.animation.current.length>0}},clearQueue:function(){return function(){var S=this,R=S.length!==void 0,T=R?S:[S],A=this._private.cy||this;if(!A.styleEnabled())return this;for(var k=0;k<T.length;k++){var q=T[k];q._private.animation.queue=[]}return this}},delay:function(){return function(S,R){var T=this._private.cy||this;return T.styleEnabled()?this.animate({delay:S,duration:S,complete:R}):this}},delayAnimation:function(){return function(S,R){var T=this._private.cy||this;return T.styleEnabled()?this.animation({delay:S,duration:S,complete:R}):this}},animation:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],q=this._private.cy||this,M=!A,D=!M;if(!q.styleEnabled())return this;var L=q.style();S=extend({},S,R);var I=Object.keys(S).length===0;if(I)return new Animation(k[0],S);switch(S.duration===void 0&&(S.duration=400),S.duration){case"slow":S.duration=600;break;case"fast":S.duration=200;break}if(D&&(S.style=L.getPropsList(S.style||S.css),S.css=void 0),D&&S.renderedPosition!=null){var N=S.renderedPosition,F=q.pan(),H=q.zoom();S.position=renderedToModelPosition(N,H,F)}if(M&&S.panBy!=null){var G=S.panBy,V=q.pan();S.pan={x:V.x+G.x,y:V.y+G.y}}var j=S.center||S.centre;if(M&&j!=null){var W=q.getCenterPan(j.eles,S.zoom);W!=null&&(S.pan=W)}if(M&&S.fit!=null){var X=S.fit,J=q.getFitViewport(X.eles||X.boundingBox,X.padding);J!=null&&(S.pan=J.pan,S.zoom=J.zoom)}if(M&&plainObject(S.zoom)){var te=q.getZoomedViewport(S.zoom);te!=null?(te.zoomed&&(S.zoom=te.zoom),te.panned&&(S.pan=te.pan)):S.zoom=null}return new Animation(k[0],S)}},animate:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],q=this._private.cy||this;if(!q.styleEnabled())return this;R&&(S=extend({},S,R));for(var M=0;M<k.length;M++){var D=k[M],L=D.animated()&&(S.queue===void 0||S.queue),I=D.animation(S,L?{queue:!0}:void 0);I.play()}return this}},stop:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],q=this._private.cy||this;if(!q.styleEnabled())return this;for(var M=0;M<k.length;M++){for(var D=k[M],L=D._private,I=L.animation.current,N=0;N<I.length;N++){var F=I[N],H=F._private;R&&(H.duration=0)}S&&(L.animation.queue=[]),R||(L.animation.current=[])}return q.notify("draw"),this}}},isArray_1$1,hasRequiredIsArray$1;function requireIsArray$1(){if(hasRequiredIsArray$1)return isArray_1$1;hasRequiredIsArray$1=1;var _=Array.isArray;return isArray_1$1=_,isArray_1$1}var _isKey$1,hasRequired_isKey$1;function require_isKey$1(){if(hasRequired_isKey$1)return _isKey$1;hasRequired_isKey$1=1;var _=requireIsArray$1(),v=requireIsSymbol$1(),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function T(A,k){if(_(A))return!1;var q=typeof A;return q=="number"||q=="symbol"||q=="boolean"||A==null||v(A)?!0:R.test(A)||!S.test(A)||k!=null&&A in Object(k)}return _isKey$1=T,_isKey$1}var isFunction_1$1,hasRequiredIsFunction$1;function requireIsFunction$1(){if(hasRequiredIsFunction$1)return isFunction_1$1;hasRequiredIsFunction$1=1;var _=require_baseGetTag$1(),v=requireIsObject$1(),S="[object AsyncFunction]",R="[object Function]",T="[object GeneratorFunction]",A="[object Proxy]";function k(q){if(!v(q))return!1;var M=_(q);return M==R||M==T||M==S||M==A}return isFunction_1$1=k,isFunction_1$1}var _coreJsData$1,hasRequired_coreJsData$1;function require_coreJsData$1(){if(hasRequired_coreJsData$1)return _coreJsData$1;hasRequired_coreJsData$1=1;var _=require_root$1(),v=_["__core-js_shared__"];return _coreJsData$1=v,_coreJsData$1}var _isMasked$1,hasRequired_isMasked$1;function require_isMasked$1(){if(hasRequired_isMasked$1)return _isMasked$1;hasRequired_isMasked$1=1;var _=require_coreJsData$1(),v=(function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""})();function S(R){return!!v&&v in R}return _isMasked$1=S,_isMasked$1}var _toSource$1,hasRequired_toSource$1;function require_toSource$1(){if(hasRequired_toSource$1)return _toSource$1;hasRequired_toSource$1=1;var _=Function.prototype,v=_.toString;function S(R){if(R!=null){try{return v.call(R)}catch{}try{return R+""}catch{}}return""}return _toSource$1=S,_toSource$1}var _baseIsNative$1,hasRequired_baseIsNative$1;function require_baseIsNative$1(){if(hasRequired_baseIsNative$1)return _baseIsNative$1;hasRequired_baseIsNative$1=1;var _=requireIsFunction$1(),v=require_isMasked$1(),S=requireIsObject$1(),R=require_toSource$1(),T=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,k=Function.prototype,q=Object.prototype,M=k.toString,D=q.hasOwnProperty,L=RegExp("^"+M.call(D).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I(N){if(!S(N)||v(N))return!1;var F=_(N)?L:A;return F.test(R(N))}return _baseIsNative$1=I,_baseIsNative$1}var _getValue$1,hasRequired_getValue$1;function require_getValue$1(){if(hasRequired_getValue$1)return _getValue$1;hasRequired_getValue$1=1;function _(v,S){return v?.[S]}return _getValue$1=_,_getValue$1}var _getNative$1,hasRequired_getNative$1;function require_getNative$1(){if(hasRequired_getNative$1)return _getNative$1;hasRequired_getNative$1=1;var _=require_baseIsNative$1(),v=require_getValue$1();function S(R,T){var A=v(R,T);return _(A)?A:void 0}return _getNative$1=S,_getNative$1}var _nativeCreate$1,hasRequired_nativeCreate$1;function require_nativeCreate$1(){if(hasRequired_nativeCreate$1)return _nativeCreate$1;hasRequired_nativeCreate$1=1;var _=require_getNative$1(),v=_(Object,"create");return _nativeCreate$1=v,_nativeCreate$1}var _hashClear$1,hasRequired_hashClear$1;function require_hashClear$1(){if(hasRequired_hashClear$1)return _hashClear$1;hasRequired_hashClear$1=1;var _=require_nativeCreate$1();function v(){this.__data__=_?_(null):{},this.size=0}return _hashClear$1=v,_hashClear$1}var _hashDelete$1,hasRequired_hashDelete$1;function require_hashDelete$1(){if(hasRequired_hashDelete$1)return _hashDelete$1;hasRequired_hashDelete$1=1;function _(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S}return _hashDelete$1=_,_hashDelete$1}var _hashGet$1,hasRequired_hashGet$1;function require_hashGet$1(){if(hasRequired_hashGet$1)return _hashGet$1;hasRequired_hashGet$1=1;var _=require_nativeCreate$1(),v="__lodash_hash_undefined__",S=Object.prototype,R=S.hasOwnProperty;function T(A){var k=this.__data__;if(_){var q=k[A];return q===v?void 0:q}return R.call(k,A)?k[A]:void 0}return _hashGet$1=T,_hashGet$1}var _hashHas$1,hasRequired_hashHas$1;function require_hashHas$1(){if(hasRequired_hashHas$1)return _hashHas$1;hasRequired_hashHas$1=1;var _=require_nativeCreate$1(),v=Object.prototype,S=v.hasOwnProperty;function R(T){var A=this.__data__;return _?A[T]!==void 0:S.call(A,T)}return _hashHas$1=R,_hashHas$1}var _hashSet$1,hasRequired_hashSet$1;function require_hashSet$1(){if(hasRequired_hashSet$1)return _hashSet$1;hasRequired_hashSet$1=1;var _=require_nativeCreate$1(),v="__lodash_hash_undefined__";function S(R,T){var A=this.__data__;return this.size+=this.has(R)?0:1,A[R]=_&&T===void 0?v:T,this}return _hashSet$1=S,_hashSet$1}var _Hash$1,hasRequired_Hash$1;function require_Hash$1(){if(hasRequired_Hash$1)return _Hash$1;hasRequired_Hash$1=1;var _=require_hashClear$1(),v=require_hashDelete$1(),S=require_hashGet$1(),R=require_hashHas$1(),T=require_hashSet$1();function A(k){var q=-1,M=k==null?0:k.length;for(this.clear();++q<M;){var D=k[q];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_Hash$1=A,_Hash$1}var _listCacheClear$1,hasRequired_listCacheClear$1;function require_listCacheClear$1(){if(hasRequired_listCacheClear$1)return _listCacheClear$1;hasRequired_listCacheClear$1=1;function _(){this.__data__=[],this.size=0}return _listCacheClear$1=_,_listCacheClear$1}var eq_1$1,hasRequiredEq$1;function requireEq$1(){if(hasRequiredEq$1)return eq_1$1;hasRequiredEq$1=1;function _(v,S){return v===S||v!==v&&S!==S}return eq_1$1=_,eq_1$1}var _assocIndexOf$1,hasRequired_assocIndexOf$1;function require_assocIndexOf$1(){if(hasRequired_assocIndexOf$1)return _assocIndexOf$1;hasRequired_assocIndexOf$1=1;var _=requireEq$1();function v(S,R){for(var T=S.length;T--;)if(_(S[T][0],R))return T;return-1}return _assocIndexOf$1=v,_assocIndexOf$1}var _listCacheDelete$1,hasRequired_listCacheDelete$1;function require_listCacheDelete$1(){if(hasRequired_listCacheDelete$1)return _listCacheDelete$1;hasRequired_listCacheDelete$1=1;var _=require_assocIndexOf$1(),v=Array.prototype,S=v.splice;function R(T){var A=this.__data__,k=_(A,T);if(k<0)return!1;var q=A.length-1;return k==q?A.pop():S.call(A,k,1),--this.size,!0}return _listCacheDelete$1=R,_listCacheDelete$1}var _listCacheGet$1,hasRequired_listCacheGet$1;function require_listCacheGet$1(){if(hasRequired_listCacheGet$1)return _listCacheGet$1;hasRequired_listCacheGet$1=1;var _=require_assocIndexOf$1();function v(S){var R=this.__data__,T=_(R,S);return T<0?void 0:R[T][1]}return _listCacheGet$1=v,_listCacheGet$1}var _listCacheHas$1,hasRequired_listCacheHas$1;function require_listCacheHas$1(){if(hasRequired_listCacheHas$1)return _listCacheHas$1;hasRequired_listCacheHas$1=1;var _=require_assocIndexOf$1();function v(S){return _(this.__data__,S)>-1}return _listCacheHas$1=v,_listCacheHas$1}var _listCacheSet$1,hasRequired_listCacheSet$1;function require_listCacheSet$1(){if(hasRequired_listCacheSet$1)return _listCacheSet$1;hasRequired_listCacheSet$1=1;var _=require_assocIndexOf$1();function v(S,R){var T=this.__data__,A=_(T,S);return A<0?(++this.size,T.push([S,R])):T[A][1]=R,this}return _listCacheSet$1=v,_listCacheSet$1}var _ListCache$1,hasRequired_ListCache$1;function require_ListCache$1(){if(hasRequired_ListCache$1)return _ListCache$1;hasRequired_ListCache$1=1;var _=require_listCacheClear$1(),v=require_listCacheDelete$1(),S=require_listCacheGet$1(),R=require_listCacheHas$1(),T=require_listCacheSet$1();function A(k){var q=-1,M=k==null?0:k.length;for(this.clear();++q<M;){var D=k[q];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_ListCache$1=A,_ListCache$1}var _Map$1,hasRequired_Map$1;function require_Map$1(){if(hasRequired_Map$1)return _Map$1;hasRequired_Map$1=1;var _=require_getNative$1(),v=require_root$1(),S=_(v,"Map");return _Map$1=S,_Map$1}var _mapCacheClear$1,hasRequired_mapCacheClear$1;function require_mapCacheClear$1(){if(hasRequired_mapCacheClear$1)return _mapCacheClear$1;hasRequired_mapCacheClear$1=1;var _=require_Hash$1(),v=require_ListCache$1(),S=require_Map$1();function R(){this.size=0,this.__data__={hash:new _,map:new(S||v),string:new _}}return _mapCacheClear$1=R,_mapCacheClear$1}var _isKeyable$1,hasRequired_isKeyable$1;function require_isKeyable$1(){if(hasRequired_isKeyable$1)return _isKeyable$1;hasRequired_isKeyable$1=1;function _(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null}return _isKeyable$1=_,_isKeyable$1}var _getMapData$1,hasRequired_getMapData$1;function require_getMapData$1(){if(hasRequired_getMapData$1)return _getMapData$1;hasRequired_getMapData$1=1;var _=require_isKeyable$1();function v(S,R){var T=S.__data__;return _(R)?T[typeof R=="string"?"string":"hash"]:T.map}return _getMapData$1=v,_getMapData$1}var _mapCacheDelete$1,hasRequired_mapCacheDelete$1;function require_mapCacheDelete$1(){if(hasRequired_mapCacheDelete$1)return _mapCacheDelete$1;hasRequired_mapCacheDelete$1=1;var _=require_getMapData$1();function v(S){var R=_(this,S).delete(S);return this.size-=R?1:0,R}return _mapCacheDelete$1=v,_mapCacheDelete$1}var _mapCacheGet$1,hasRequired_mapCacheGet$1;function require_mapCacheGet$1(){if(hasRequired_mapCacheGet$1)return _mapCacheGet$1;hasRequired_mapCacheGet$1=1;var _=require_getMapData$1();function v(S){return _(this,S).get(S)}return _mapCacheGet$1=v,_mapCacheGet$1}var _mapCacheHas$1,hasRequired_mapCacheHas$1;function require_mapCacheHas$1(){if(hasRequired_mapCacheHas$1)return _mapCacheHas$1;hasRequired_mapCacheHas$1=1;var _=require_getMapData$1();function v(S){return _(this,S).has(S)}return _mapCacheHas$1=v,_mapCacheHas$1}var _mapCacheSet$1,hasRequired_mapCacheSet$1;function require_mapCacheSet$1(){if(hasRequired_mapCacheSet$1)return _mapCacheSet$1;hasRequired_mapCacheSet$1=1;var _=require_getMapData$1();function v(S,R){var T=_(this,S),A=T.size;return T.set(S,R),this.size+=T.size==A?0:1,this}return _mapCacheSet$1=v,_mapCacheSet$1}var _MapCache$1,hasRequired_MapCache$1;function require_MapCache$1(){if(hasRequired_MapCache$1)return _MapCache$1;hasRequired_MapCache$1=1;var _=require_mapCacheClear$1(),v=require_mapCacheDelete$1(),S=require_mapCacheGet$1(),R=require_mapCacheHas$1(),T=require_mapCacheSet$1();function A(k){var q=-1,M=k==null?0:k.length;for(this.clear();++q<M;){var D=k[q];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_MapCache$1=A,_MapCache$1}var memoize_1$1,hasRequiredMemoize$1;function requireMemoize$1(){if(hasRequiredMemoize$1)return memoize_1$1;hasRequiredMemoize$1=1;var _=require_MapCache$1(),v="Expected a function";function S(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(v);var A=function(){var k=arguments,q=T?T.apply(this,k):k[0],M=A.cache;if(M.has(q))return M.get(q);var D=R.apply(this,k);return A.cache=M.set(q,D)||M,D};return A.cache=new(S.Cache||_),A}return S.Cache=_,memoize_1$1=S,memoize_1$1}var _memoizeCapped$1,hasRequired_memoizeCapped$1;function require_memoizeCapped$1(){if(hasRequired_memoizeCapped$1)return _memoizeCapped$1;hasRequired_memoizeCapped$1=1;var _=requireMemoize$1(),v=500;function S(R){var T=_(R,function(k){return A.size===v&&A.clear(),k}),A=T.cache;return T}return _memoizeCapped$1=S,_memoizeCapped$1}var _stringToPath$1,hasRequired_stringToPath$1;function require_stringToPath$1(){if(hasRequired_stringToPath$1)return _stringToPath$1;hasRequired_stringToPath$1=1;var _=require_memoizeCapped$1(),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,R=_(function(T){var A=[];return T.charCodeAt(0)===46&&A.push(""),T.replace(v,function(k,q,M,D){A.push(M?D.replace(S,"$1"):q||k)}),A});return _stringToPath$1=R,_stringToPath$1}var _arrayMap$1,hasRequired_arrayMap$1;function require_arrayMap$1(){if(hasRequired_arrayMap$1)return _arrayMap$1;hasRequired_arrayMap$1=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=Array(T);++R<T;)A[R]=S(v[R],R,v);return A}return _arrayMap$1=_,_arrayMap$1}var _baseToString$1,hasRequired_baseToString$1;function require_baseToString$1(){if(hasRequired_baseToString$1)return _baseToString$1;hasRequired_baseToString$1=1;var _=require_Symbol$1(),v=require_arrayMap$1(),S=requireIsArray$1(),R=requireIsSymbol$1(),T=_?_.prototype:void 0,A=T?T.toString:void 0;function k(q){if(typeof q=="string")return q;if(S(q))return v(q,k)+"";if(R(q))return A?A.call(q):"";var M=q+"";return M=="0"&&1/q==-1/0?"-0":M}return _baseToString$1=k,_baseToString$1}var toString_1$1,hasRequiredToString$1;function requireToString$1(){if(hasRequiredToString$1)return toString_1$1;hasRequiredToString$1=1;var _=require_baseToString$1();function v(S){return S==null?"":_(S)}return toString_1$1=v,toString_1$1}var _castPath$1,hasRequired_castPath$1;function require_castPath$1(){if(hasRequired_castPath$1)return _castPath$1;hasRequired_castPath$1=1;var _=requireIsArray$1(),v=require_isKey$1(),S=require_stringToPath$1(),R=requireToString$1();function T(A,k){return _(A)?A:v(A,k)?[A]:S(R(A))}return _castPath$1=T,_castPath$1}var _toKey$1,hasRequired_toKey$1;function require_toKey$1(){if(hasRequired_toKey$1)return _toKey$1;hasRequired_toKey$1=1;var _=requireIsSymbol$1();function v(S){if(typeof S=="string"||_(S))return S;var R=S+"";return R=="0"&&1/S==-1/0?"-0":R}return _toKey$1=v,_toKey$1}var _baseGet$1,hasRequired_baseGet$1;function require_baseGet$1(){if(hasRequired_baseGet$1)return _baseGet$1;hasRequired_baseGet$1=1;var _=require_castPath$1(),v=require_toKey$1();function S(R,T){T=_(T,R);for(var A=0,k=T.length;R!=null&&A<k;)R=R[v(T[A++])];return A&&A==k?R:void 0}return _baseGet$1=S,_baseGet$1}var get_1$1,hasRequiredGet$1;function requireGet$1(){if(hasRequiredGet$1)return get_1$1;hasRequiredGet$1=1;var _=require_baseGet$1();function v(S,R,T){var A=S==null?void 0:_(S,R);return A===void 0?T:A}return get_1$1=v,get_1$1}var getExports=requireGet$1(),get=getDefaultExportFromCjs(getExports),_defineProperty$2,hasRequired_defineProperty$1;function require_defineProperty$1(){if(hasRequired_defineProperty$1)return _defineProperty$2;hasRequired_defineProperty$1=1;var _=require_getNative$1(),v=(function(){try{var S=_(Object,"defineProperty");return S({},"",{}),S}catch{}})();return _defineProperty$2=v,_defineProperty$2}var _baseAssignValue$1,hasRequired_baseAssignValue$1;function require_baseAssignValue$1(){if(hasRequired_baseAssignValue$1)return _baseAssignValue$1;hasRequired_baseAssignValue$1=1;var _=require_defineProperty$1();function v(S,R,T){R=="__proto__"&&_?_(S,R,{configurable:!0,enumerable:!0,value:T,writable:!0}):S[R]=T}return _baseAssignValue$1=v,_baseAssignValue$1}var _assignValue$1,hasRequired_assignValue$1;function require_assignValue$1(){if(hasRequired_assignValue$1)return _assignValue$1;hasRequired_assignValue$1=1;var _=require_baseAssignValue$1(),v=requireEq$1(),S=Object.prototype,R=S.hasOwnProperty;function T(A,k,q){var M=A[k];(!(R.call(A,k)&&v(M,q))||q===void 0&&!(k in A))&&_(A,k,q)}return _assignValue$1=T,_assignValue$1}var _isIndex$1,hasRequired_isIndex$1;function require_isIndex$1(){if(hasRequired_isIndex$1)return _isIndex$1;hasRequired_isIndex$1=1;var _=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function S(R,T){var A=typeof R;return T=T??_,!!T&&(A=="number"||A!="symbol"&&v.test(R))&&R>-1&&R%1==0&&R<T}return _isIndex$1=S,_isIndex$1}var _baseSet$1,hasRequired_baseSet$1;function require_baseSet$1(){if(hasRequired_baseSet$1)return _baseSet$1;hasRequired_baseSet$1=1;var _=require_assignValue$1(),v=require_castPath$1(),S=require_isIndex$1(),R=requireIsObject$1(),T=require_toKey$1();function A(k,q,M,D){if(!R(k))return k;q=v(q,k);for(var L=-1,I=q.length,N=I-1,F=k;F!=null&&++L<I;){var H=T(q[L]),G=M;if(H==="__proto__"||H==="constructor"||H==="prototype")return k;if(L!=N){var V=F[H];G=D?D(V,H,F):void 0,G===void 0&&(G=R(V)?V:S(q[L+1])?[]:{})}_(F,H,G),F=F[H]}return k}return _baseSet$1=A,_baseSet$1}var set_1,hasRequiredSet;function requireSet(){if(hasRequiredSet)return set_1;hasRequiredSet=1;var _=require_baseSet$1();function v(S,R,T){return S==null?S:_(S,R,T)}return set_1=v,set_1}var setExports=requireSet(),set=getDefaultExportFromCjs(setExports),_copyArray$1,hasRequired_copyArray$1;function require_copyArray$1(){if(hasRequired_copyArray$1)return _copyArray$1;hasRequired_copyArray$1=1;function _(v,S){var R=-1,T=v.length;for(S||(S=Array(T));++R<T;)S[R]=v[R];return S}return _copyArray$1=_,_copyArray$1}var toPath_1,hasRequiredToPath;function requireToPath(){if(hasRequiredToPath)return toPath_1;hasRequiredToPath=1;var _=require_arrayMap$1(),v=require_copyArray$1(),S=requireIsArray$1(),R=requireIsSymbol$1(),T=require_stringToPath$1(),A=require_toKey$1(),k=requireToString$1();function q(M){return S(M)?_(M,A):R(M)?[M]:v(T(k(M)))}return toPath_1=q,toPath_1}var toPathExports=requireToPath(),toPath=getDefaultExportFromCjs(toPathExports),define$2={data:function(v){var S={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(T){},beforeSet:function(T,A){},onSet:function(T){},canSet:function(T){return!0}};return v=extend({},S,v),function(T,A){var k=v,q=this,M=q.length!==void 0,D=M?q:[q],L=M?q[0]:q;if(string$1(T)){var I=T.indexOf(".")!==-1,N=I&&toPath(T);if(k.allowGetting&&A===void 0){var F;return L&&(k.beforeGet(L),N&&L._private[k.field][T]===void 0?F=get(L._private[k.field],N):F=L._private[k.field][T]),F}else if(k.allowSetting&&A!==void 0){var H=!k.immutableKeys[T];if(H){var G=_defineProperty$1({},T,A);k.beforeSet(q,G);for(var V=0,j=D.length;V<j;V++){var W=D[V];k.canSet(W)&&(N&&L._private[k.field][T]===void 0?set(W._private[k.field],N,A):W._private[k.field][T]=A)}k.updateStyle&&q.updateStyle(),k.onSet(q),k.settingTriggersEvent&&q[k.triggerFnName](k.settingEvent)}}}else if(k.allowSetting&&plainObject(T)){var X=T,J,te,re=Object.keys(X);k.beforeSet(q,X);for(var ee=0;ee<re.length;ee++){J=re[ee],te=X[J];var ne=!k.immutableKeys[J];if(ne)for(var oe=0;oe<D.length;oe++){var ue=D[oe];k.canSet(ue)&&(ue._private[k.field][J]=te)}}k.updateStyle&&q.updateStyle(),k.onSet(q),k.settingTriggersEvent&&q[k.triggerFnName](k.settingEvent)}else if(k.allowBinding&&fn$6(T)){var ce=T;q.on(k.bindingEvent,ce)}else if(k.allowGetting&&T===void 0){var de;return L&&(k.beforeGet(L),de=L._private[k.field]),de}return q}},removeData:function(v){var S={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return v=extend({},S,v),function(T){var A=v,k=this,q=k.length!==void 0,M=q?k:[k];if(string$1(T)){for(var D=T.split(/\s+/),L=D.length,I=0;I<L;I++){var N=D[I];if(!emptyString(N)){var F=!A.immutableKeys[N];if(F)for(var H=0,G=M.length;H<G;H++)M[H]._private[A.field][N]=void 0}}A.triggerEvent&&k[A.triggerFnName](A.event)}else if(T===void 0){for(var V=0,j=M.length;V<j;V++)for(var W=M[V]._private[A.field],X=Object.keys(W),J=0;J<X.length;J++){var te=X[J],re=!A.immutableKeys[te];re&&(W[te]=void 0)}A.triggerEvent&&k[A.triggerFnName](A.event)}return k}}},define$1={eventAliasesOn:function(v){var S=v;S.addListener=S.listen=S.bind=S.on,S.unlisten=S.unbind=S.off=S.removeListener,S.trigger=S.emit,S.pon=S.promiseOn=function(R,T){var A=this,k=Array.prototype.slice.call(arguments,0);return new Promise$1(function(q,M){var D=function(F){A.off.apply(A,I),q(F)},L=k.concat([D]),I=L.concat([]);A.on.apply(A,L)})}}},define={};[define$3,define$2,define$1].forEach(function(_){extend(define,_)});var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function(v){var S=this;if(v===void 0){var R=[];return S[0]._private.classes.forEach(function(H){return R.push(H)}),R}else array(v)||(v=(v||"").match(/\S+/g)||[]);for(var T=[],A=new Set$1(v),k=0;k<S.length;k++){for(var q=S[k],M=q._private,D=M.classes,L=!1,I=0;I<v.length;I++){var N=v[I],F=D.has(N);if(!F){L=!0;break}}L||(L=D.size!==v.length),L&&(M.classes=A,T.push(q))}return T.length>0&&this.spawn(T).updateStyle().emit("class"),S},addClass:function(v){return this.toggleClass(v,!0)},hasClass:function(v){var S=this[0];return S!=null&&S._private.classes.has(v)},toggleClass:function(v,S){array(v)||(v=v.match(/\S+/g)||[]);for(var R=this,T=S===void 0,A=[],k=0,q=R.length;k<q;k++)for(var M=R[k],D=M._private.classes,L=!1,I=0;I<v.length;I++){var N=v[I],F=D.has(N),H=!1;S||T&&!F?(D.add(N),H=!0):(!S||T&&F)&&(D.delete(N),H=!0),!L&&H&&(A.push(M),L=!0)}return A.length>0&&this.spawn(A).updateStyle().emit("class"),R},removeClass:function(v){return this.toggleClass(v,!1)},flashClass:function(v,S){var R=this;if(S==null)S=250;else if(S===0)return R;return R.addClass(v),setTimeout(function(){R.removeClass(v)},S),R}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:number$2,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+";tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+";tokens.value=tokens.string+"|"+tokens.number;tokens.id=tokens.variable;(function(){var _,v,S;for(_=tokens.comparatorOp.split("|"),S=0;S<_.length;S++)v=_[S],tokens.comparatorOp+="|@"+v;for(_=tokens.comparatorOp.split("|"),S=0;S<_.length;S++)v=_[S],!(v.indexOf("!")>=0)&&v!=="="&&(tokens.comparatorOp+="|\\!"+v)})();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(v){return v.selected()}},{selector:":unselected",matches:function(v){return!v.selected()}},{selector:":selectable",matches:function(v){return v.selectable()}},{selector:":unselectable",matches:function(v){return!v.selectable()}},{selector:":locked",matches:function(v){return v.locked()}},{selector:":unlocked",matches:function(v){return!v.locked()}},{selector:":visible",matches:function(v){return v.visible()}},{selector:":hidden",matches:function(v){return!v.visible()}},{selector:":transparent",matches:function(v){return v.transparent()}},{selector:":grabbed",matches:function(v){return v.grabbed()}},{selector:":free",matches:function(v){return!v.grabbed()}},{selector:":removed",matches:function(v){return v.removed()}},{selector:":inside",matches:function(v){return!v.removed()}},{selector:":grabbable",matches:function(v){return v.grabbable()}},{selector:":ungrabbable",matches:function(v){return!v.grabbable()}},{selector:":animated",matches:function(v){return v.animated()}},{selector:":unanimated",matches:function(v){return!v.animated()}},{selector:":parent",matches:function(v){return v.isParent()}},{selector:":childless",matches:function(v){return v.isChildless()}},{selector:":child",matches:function(v){return v.isChild()}},{selector:":orphan",matches:function(v){return v.isOrphan()}},{selector:":nonorphan",matches:function(v){return v.isChild()}},{selector:":compound",matches:function(v){return v.isNode()?v.isParent():v.source().isParent()||v.target().isParent()}},{selector:":loop",matches:function(v){return v.isLoop()}},{selector:":simple",matches:function(v){return v.isSimple()}},{selector:":active",matches:function(v){return v.active()}},{selector:":inactive",matches:function(v){return!v.active()}},{selector:":backgrounding",matches:function(v){return v.backgrounding()}},{selector:":nonbackgrounding",matches:function(v){return!v.backgrounding()}}].sort(function(_,v){return descending(_.selector,v.selector)}),lookup=(function(){for(var _={},v,S=0;S<stateSelectors.length;S++)v=stateSelectors[S],_[v.selector]=v.matches;return _})(),stateSelectorMatches=function(v,S){return lookup[v](S)},stateSelectorRegex="("+stateSelectors.map(function(_){return _.selector}).join("|")+")",cleanMetaChars=function(v){return v.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(S,R){return R})},replaceLastQuery=function(v,S,R){v[v.length-1]=R},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.GROUP,value:A==="*"?A:A+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.STATE,value:A})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.ID,value:cleanMetaChars(A)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.CLASS,value:cleanMetaChars(A)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(A)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,3),A=T[0],k=T[1],q=T[2],M=new RegExp("^"+tokens.string+"$").exec(q)!=null;M?q=q.substring(1,q.length-1):q=parseFloat(q),S.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(A),operator:k,value:q})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,2),A=T[0],k=T[1];S.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(k),operator:A})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(v,S,R){var T=_slicedToArray(R,3),A=T[0],k=T[1],q=T[2];S.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(A),operator:k,value:parseFloat(q)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(v,S){var R=v.currentSubject,T=v.edgeCount,A=v.compoundCount,k=v[v.length-1];R!=null&&(k.subject=R,v.currentSubject=null),k.edgeCount=T,k.compoundCount=A,v.edgeCount=0,v.compoundCount=0;var q=v[v.length++]=newQuery();return q}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=S,A=newQuery();return R.checks.push({type:Type.DIRECTED_EDGE,source:T,target:A}),replaceLastQuery(v,S,R),v.edgeCount++,A}else{var k=newQuery(),q=S,M=newQuery();return k.checks.push({type:Type.NODE_SOURCE,source:q,target:M}),replaceLastQuery(v,S,k),v.edgeCount++,M}}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=S,A=newQuery();return R.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[T,A]}),replaceLastQuery(v,S,R),v.edgeCount++,A}else{var k=newQuery(),q=S,M=newQuery();return k.checks.push({type:Type.NODE_NEIGHBOR,node:q,neighbor:M}),replaceLastQuery(v,S,k),M}}},{name:"child",separator:!0,regex:tokens.child,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=newQuery(),A=v[v.length-1];return R.checks.push({type:Type.CHILD,parent:A,child:T}),replaceLastQuery(v,S,R),v.compoundCount++,T}else if(v.currentSubject===S){var k=newQuery(),q=v[v.length-1],M=newQuery(),D=newQuery(),L=newQuery(),I=newQuery();return k.checks.push({type:Type.COMPOUND_SPLIT,left:q,right:M,subject:D}),D.checks=S.checks,S.checks=[{type:Type.TRUE}],I.checks.push({type:Type.TRUE}),M.checks.push({type:Type.PARENT,parent:I,child:L}),replaceLastQuery(v,q,k),v.currentSubject=D,v.compoundCount++,L}else{var N=newQuery(),F=newQuery(),H=[{type:Type.PARENT,parent:N,child:F}];return N.checks=S.checks,S.checks=H,v.compoundCount++,F}}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=newQuery(),A=v[v.length-1];return R.checks.push({type:Type.DESCENDANT,ancestor:A,descendant:T}),replaceLastQuery(v,S,R),v.compoundCount++,T}else if(v.currentSubject===S){var k=newQuery(),q=v[v.length-1],M=newQuery(),D=newQuery(),L=newQuery(),I=newQuery();return k.checks.push({type:Type.COMPOUND_SPLIT,left:q,right:M,subject:D}),D.checks=S.checks,S.checks=[{type:Type.TRUE}],I.checks.push({type:Type.TRUE}),M.checks.push({type:Type.ANCESTOR,ancestor:I,descendant:L}),replaceLastQuery(v,q,k),v.currentSubject=D,v.compoundCount++,L}else{var N=newQuery(),F=newQuery(),H=[{type:Type.ANCESTOR,ancestor:N,descendant:F}];return N.checks=S.checks,S.checks=H,v.compoundCount++,F}}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(v,S){if(v.currentSubject!=null&&v.currentSubject!==S)return warn("Redefinition of subject in selector `"+v.toString()+"`"),!1;v.currentSubject=S;var R=v[v.length-1],T=R.checks[0],A=T==null?null:T.type;A===Type.DIRECTED_EDGE?T.type=Type.NODE_TARGET:A===Type.UNDIRECTED_EDGE&&(T.type=Type.NODE_NEIGHBOR,T.node=T.nodes[1],T.neighbor=T.nodes[0],T.nodes=null)}}];exprs.forEach(function(_){return _.regexObj=new RegExp("^"+_.regex)});var consumeExpr=function(v){for(var S,R,T,A=0;A<exprs.length;A++){var k=exprs[A],q=k.name,M=v.match(k.regexObj);if(M!=null){R=M,S=k,T=q;var D=M[0];v=v.substring(D.length);break}}return{expr:S,match:R,name:T,remaining:v}},consumeWhitespace=function(v){var S=v.match(/^\s+/);if(S){var R=S[0];v=v.substring(R.length)}return v},parse=function(v){var S=this,R=S.inputText=v,T=S[0]=newQuery();for(S.length=1,R=consumeWhitespace(R);;){var A=consumeExpr(R);if(A.expr==null)return warn("The selector `"+v+"`is invalid"),!1;var k=A.match.slice(1),q=A.expr.populate(S,T,k);if(q===!1)return!1;if(q!=null&&(T=q),R=A.remaining,R.match(/^\s*$/))break}var M=S[S.length-1];S.currentSubject!=null&&(M.subject=S.currentSubject),M.edgeCount=S.edgeCount,M.compoundCount=S.compoundCount;for(var D=0;D<S.length;D++){var L=S[D];if(L.compoundCount>0&&L.edgeCount>0)return warn("The selector `"+v+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(L.edgeCount>1)return warn("The selector `"+v+"` is invalid because it uses multiple edge selectors"),!1;L.edgeCount===1&&warn("The selector `"+v+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(this.toStringCache!=null)return this.toStringCache;for(var v=function(L){return L??""},S=function(L){return string$1(L)?'"'+L+'"':v(L)},R=function(L){return" "+L+" "},T=function(L,I){var N=L.type,F=L.value;switch(N){case Type.GROUP:{var H=v(F);return H.substring(0,H.length-1)}case Type.DATA_COMPARE:{var G=L.field,V=L.operator;return"["+G+R(v(V))+S(F)+"]"}case Type.DATA_BOOL:{var j=L.operator,W=L.field;return"["+v(j)+W+"]"}case Type.DATA_EXIST:{var X=L.field;return"["+X+"]"}case Type.META_COMPARE:{var J=L.operator,te=L.field;return"[["+te+R(v(J))+S(F)+"]]"}case Type.STATE:return F;case Type.ID:return"#"+F;case Type.CLASS:return"."+F;case Type.PARENT:case Type.CHILD:return A(L.parent,I)+R(">")+A(L.child,I);case Type.ANCESTOR:case Type.DESCENDANT:return A(L.ancestor,I)+" "+A(L.descendant,I);case Type.COMPOUND_SPLIT:{var re=A(L.left,I),ee=A(L.subject,I),ne=A(L.right,I);return re+(re.length>0?" ":"")+ee+ne}case Type.TRUE:return""}},A=function(L,I){return L.checks.reduce(function(N,F,H){return N+(I===L&&H===0?"$":"")+T(F,I)},"")},k="",q=0;q<this.length;q++){var M=this[q];k+=A(M,M.subject),this.length>1&&q<this.length-1&&(k+=", ")}return this.toStringCache=k,k},parse$1={parse,toString},valCmp=function(v,S,R){var T,A=string$1(v),k=number$1(v),q=string$1(R),M,D,L=!1,I=!1,N=!1;switch(S.indexOf("!")>=0&&(S=S.replace("!",""),I=!0),S.indexOf("@")>=0&&(S=S.replace("@",""),L=!0),(A||q||L)&&(M=!A&&!k?"":""+v,D=""+R),L&&(v=M=M.toLowerCase(),R=D=D.toLowerCase()),S){case"*=":T=M.indexOf(D)>=0;break;case"$=":T=M.indexOf(D,M.length-D.length)>=0;break;case"^=":T=M.indexOf(D)===0;break;case"=":T=v===R;break;case">":N=!0,T=v>R;break;case">=":N=!0,T=v>=R;break;case"<":N=!0,T=v<R;break;case"<=":N=!0,T=v<=R;break;default:T=!1;break}return I&&(v!=null||!N)&&(T=!T),T},boolCmp=function(v,S){switch(S){case"?":return!!v;case"!":return!v;case"^":return v===void 0}},existCmp=function(v){return v!==void 0},data$1=function(v,S){return v.data(S)},meta$1=function(v,S){return v[S]()},match=[],matches$1=function(v,S){return v.checks.every(function(R){return match[R.type](R,S)})};match[Type.GROUP]=function(_,v){var S=_.value;return S==="*"||S===v.group()};match[Type.STATE]=function(_,v){var S=_.value;return stateSelectorMatches(S,v)};match[Type.ID]=function(_,v){var S=_.value;return v.id()===S};match[Type.CLASS]=function(_,v){var S=_.value;return v.hasClass(S)};match[Type.META_COMPARE]=function(_,v){var S=_.field,R=_.operator,T=_.value;return valCmp(meta$1(v,S),R,T)};match[Type.DATA_COMPARE]=function(_,v){var S=_.field,R=_.operator,T=_.value;return valCmp(data$1(v,S),R,T)};match[Type.DATA_BOOL]=function(_,v){var S=_.field,R=_.operator;return boolCmp(data$1(v,S),R)};match[Type.DATA_EXIST]=function(_,v){var S=_.field;return _.operator,existCmp(data$1(v,S))};match[Type.UNDIRECTED_EDGE]=function(_,v){var S=_.nodes[0],R=_.nodes[1],T=v.source(),A=v.target();return matches$1(S,T)&&matches$1(R,A)||matches$1(R,T)&&matches$1(S,A)};match[Type.NODE_NEIGHBOR]=function(_,v){return matches$1(_.node,v)&&v.neighborhood().some(function(S){return S.isNode()&&matches$1(_.neighbor,S)})};match[Type.DIRECTED_EDGE]=function(_,v){return matches$1(_.source,v.source())&&matches$1(_.target,v.target())};match[Type.NODE_SOURCE]=function(_,v){return matches$1(_.source,v)&&v.outgoers().some(function(S){return S.isNode()&&matches$1(_.target,S)})};match[Type.NODE_TARGET]=function(_,v){return matches$1(_.target,v)&&v.incomers().some(function(S){return S.isNode()&&matches$1(_.source,S)})};match[Type.CHILD]=function(_,v){return matches$1(_.child,v)&&matches$1(_.parent,v.parent())};match[Type.PARENT]=function(_,v){return matches$1(_.parent,v)&&v.children().some(function(S){return matches$1(_.child,S)})};match[Type.DESCENDANT]=function(_,v){return matches$1(_.descendant,v)&&v.ancestors().some(function(S){return matches$1(_.ancestor,S)})};match[Type.ANCESTOR]=function(_,v){return matches$1(_.ancestor,v)&&v.descendants().some(function(S){return matches$1(_.descendant,S)})};match[Type.COMPOUND_SPLIT]=function(_,v){return matches$1(_.subject,v)&&matches$1(_.left,v)&&matches$1(_.right,v)};match[Type.TRUE]=function(){return!0};match[Type.COLLECTION]=function(_,v){var S=_.value;return S.has(v)};match[Type.FILTER]=function(_,v){var S=_.value;return S(v)};var filter=function(v){var S=this;if(S.length===1&&S[0].checks.length===1&&S[0].checks[0].type===Type.ID)return v.getElementById(S[0].checks[0].value).collection();var R=function(A){for(var k=0;k<S.length;k++){var q=S[k];if(matches$1(q,A))return!0}return!1};return S.text()==null&&(R=function(){return!0}),v.filter(R)},matches=function(v){for(var S=this,R=0;R<S.length;R++){var T=S[R];if(matches$1(T,v))return!0}return!1},matching={matches,filter},Selector=function(v){this.inputText=v,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,v==null||string$1(v)&&v.match(/^\s*$/)||(elementOrCollection(v)?this.addQuery({checks:[{type:Type.COLLECTION,value:v.collection()}]}):fn$6(v)?this.addQuery({checks:[{type:Type.FILTER,value:v}]}):string$1(v)?this.parse(v)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach(function(_){return extend(selfn,_)});selfn.text=function(){return this.inputText};selfn.size=function(){return this.length};selfn.eq=function(_){return this[_]};selfn.sameText=function(_){return!this.invalid&&!_.invalid&&this.text()===_.text()};selfn.addQuery=function(_){this[this.length++]=_};selfn.selector=selfn.toString;var elesfn$g={allAre:function(v){var S=new Selector(v);return this.every(function(R){return S.matches(R)})},is:function(v){var S=new Selector(v);return this.some(function(R){return S.matches(R)})},some:function(v,S){for(var R=0;R<this.length;R++){var T=S?v.apply(S,[this[R],R,this]):v(this[R],R,this);if(T)return!0}return!1},every:function(v,S){for(var R=0;R<this.length;R++){var T=S?v.apply(S,[this[R],R,this]):v(this[R],R,this);if(!T)return!1}return!0},same:function(v){if(this===v)return!0;v=this.cy().collection(v);var S=this.length,R=v.length;return S!==R?!1:S===1?this[0]===v[0]:this.every(function(T){return v.hasElementWithId(T.id())})},anySame:function(v){return v=this.cy().collection(v),this.some(function(S){return v.hasElementWithId(S.id())})},allAreNeighbors:function(v){v=this.cy().collection(v);var S=this.neighborhood();return v.every(function(R){return S.hasElementWithId(R.id())})},contains:function(v){v=this.cy().collection(v);var S=this;return v.every(function(R){return S.hasElementWithId(R.id())})}};elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors;elesfn$g.has=elesfn$g.contains;elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var cache=function(v,S){return function(T,A,k,q){var M=T,D=this,L;if(M==null?L="":elementOrCollection(M)&&M.length===1&&(L=M.id()),D.length===1&&L){var I=D[0]._private,N=I.traversalCache=I.traversalCache||{},F=N[S]=N[S]||[],H=hashString(L),G=F[H];return G||(F[H]=v.call(D,T,A,k,q))}else return v.call(D,T,A,k,q)}},elesfn$f={parent:function(v){var S=[];if(this.length===1){var R=this[0]._private.parent;if(R)return R}for(var T=0;T<this.length;T++){var A=this[T],k=A._private.parent;k&&S.push(k)}return this.spawn(S,!0).filter(v)},parents:function(v){for(var S=[],R=this.parent();R.nonempty();){for(var T=0;T<R.length;T++){var A=R[T];S.push(A)}R=R.parent()}return this.spawn(S,!0).filter(v)},commonAncestors:function(v){for(var S,R=0;R<this.length;R++){var T=this[R],A=T.parents();S=S||A,S=S.intersect(A)}return S.filter(v)},orphans:function(v){return this.stdFilter(function(S){return S.isOrphan()}).filter(v)},nonorphans:function(v){return this.stdFilter(function(S){return S.isChild()}).filter(v)},children:cache(function(_){for(var v=[],S=0;S<this.length;S++)for(var R=this[S],T=R._private.children,A=0;A<T.length;A++)v.push(T[A]);return this.spawn(v,!0).filter(_)},"children"),siblings:function(v){return this.parent().children().not(this).filter(v)},isParent:function(){var v=this[0];if(v)return v.isNode()&&v._private.children.length!==0},isChildless:function(){var v=this[0];if(v)return v.isNode()&&v._private.children.length===0},isChild:function(){var v=this[0];if(v)return v.isNode()&&v._private.parent!=null},isOrphan:function(){var v=this[0];if(v)return v.isNode()&&v._private.parent==null},descendants:function(v){var S=[];function R(T){for(var A=0;A<T.length;A++){var k=T[A];S.push(k),k.children().nonempty()&&R(k.children())}}return R(this.children()),this.spawn(S,!0).filter(v)}};function forEachCompound(_,v,S,R){for(var T=[],A=new Set$1,k=_.cy(),q=k.hasCompoundNodes(),M=0;M<_.length;M++){var D=_[M];S?T.push(D):q&&R(T,A,D)}for(;T.length>0;){var L=T.shift();v(L),A.add(L.id()),q&&R(T,A,L)}return _}function addChildren(_,v,S){if(S.isParent())for(var R=S._private.children,T=0;T<R.length;T++){var A=R[T];v.has(A.id())||_.push(A)}}elesfn$f.forEachDown=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addChildren)};function addParent(_,v,S){if(S.isChild()){var R=S._private.parent;v.has(R.id())||_.push(R)}}elesfn$f.forEachUp=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addParent)};function addParentAndChildren(_,v,S){addParent(_,v,S),addChildren(_,v,S)}elesfn$f.forEachUpAndDown=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addParentAndChildren)};elesfn$f.ancestors=elesfn$f.parents;var fn$5,elesfn$e;fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var v=this[0];if(v)return v._private.data.id}};fn$5.attr=fn$5.data;fn$5.removeAttr=fn$5.removeData;var data=elesfn$e,elesfn$d={};function defineDegreeFunction(_){return function(v){var S=this;if(v===void 0&&(v=!0),S.length!==0)if(S.isNode()&&!S.removed()){for(var R=0,T=S[0],A=T._private.edges,k=0;k<A.length;k++){var q=A[k];!v&&q.isLoop()||(R+=_(T,q))}return R}else return}}extend(elesfn$d,{degree:defineDegreeFunction(function(_,v){return v.source().same(v.target())?2:1}),indegree:defineDegreeFunction(function(_,v){return v.target().same(_)?1:0}),outdegree:defineDegreeFunction(function(_,v){return v.source().same(_)?1:0})});function defineDegreeBoundsFunction(_,v){return function(S){for(var R,T=this.nodes(),A=0;A<T.length;A++){var k=T[A],q=k[_](S);q!==void 0&&(R===void 0||v(q,R))&&(R=q)}return R}}extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",function(_,v){return _<v}),maxDegree:defineDegreeBoundsFunction("degree",function(_,v){return _>v}),minIndegree:defineDegreeBoundsFunction("indegree",function(_,v){return _<v}),maxIndegree:defineDegreeBoundsFunction("indegree",function(_,v){return _>v}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(_,v){return _<v}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(_,v){return _>v})});extend(elesfn$d,{totalDegree:function(v){for(var S=0,R=this.nodes(),T=0;T<R.length;T++)S+=R[T].degree(v);return S}});var fn$4,elesfn$c,beforePositionSet=function(v,S,R){for(var T=0;T<v.length;T++){var A=v[T];if(!A.locked()){var k=A._private.position,q={x:S.x!=null?S.x-k.x:0,y:S.y!=null?S.y-k.y:0};A.isParent()&&!(q.x===0&&q.y===0)&&A.children().shift(q,R),A.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(v){v.updateCompoundBounds()},beforeSet:function(v,S){beforePositionSet(v,S,!1)},onSet:function(v){v.dirtyCompoundBoundsCache()},canSet:function(v){return!v.locked()}};fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(v,S){beforePositionSet(v,S,!0)},onSet:function(v){v.dirtyCompoundBoundsCache()}})),positions:function(v,S){if(plainObject(v))S?this.silentPosition(v):this.position(v);else if(fn$6(v)){var R=v,T=this.cy();T.startBatch();for(var A=0;A<this.length;A++){var k=this[A],q=void 0;(q=R(k,A))&&(S?k.silentPosition(q):k.position(q))}T.endBatch()}return this},silentPositions:function(v){return this.positions(v,!0)},shift:function(v,S,R){var T;if(plainObject(v)?(T={x:number$1(v.x)?v.x:0,y:number$1(v.y)?v.y:0},R=S):string$1(v)&&number$1(S)&&(T={x:0,y:0},T[v]=S),T!=null){var A=this.cy();A.startBatch();for(var k=0;k<this.length;k++){var q=this[k];if(!(A.hasCompoundNodes()&&q.isChild()&&q.ancestors().anySame(this))){var M=q.position(),D={x:M.x+T.x,y:M.y+T.y};R?q.silentPosition(D):q.position(D)}}A.endBatch()}return this},silentShift:function(v,S){return plainObject(v)?this.shift(v,!0):string$1(v)&&number$1(S)&&this.shift(v,S,!0),this},renderedPosition:function(v,S){var R=this[0],T=this.cy(),A=T.zoom(),k=T.pan(),q=plainObject(v)?v:void 0,M=q!==void 0||S!==void 0&&string$1(v);if(R&&R.isNode())if(M)for(var D=0;D<this.length;D++){var L=this[D];S!==void 0?L.position(v,(S-k[v])/A):q!==void 0&&L.position(renderedToModelPosition(q,A,k))}else{var I=R.position();return q=modelToRenderedPosition$1(I,A,k),v===void 0?q:q[v]}else if(!M)return;return this},relativePosition:function(v,S){var R=this[0],T=this.cy(),A=plainObject(v)?v:void 0,k=A!==void 0||S!==void 0&&string$1(v),q=T.hasCompoundNodes();if(R&&R.isNode())if(k)for(var M=0;M<this.length;M++){var D=this[M],L=q?D.parent():null,I=L&&L.length>0,N=I;I&&(L=L[0]);var F=N?L.position():{x:0,y:0};S!==void 0?D.position(v,S+F[v]):A!==void 0&&D.position({x:A.x+F.x,y:A.y+F.y})}else{var H=R.position(),G=q?R.parent():null,V=G&&G.length>0,j=V;V&&(G=G[0]);var W=j?G.position():{x:0,y:0};return A={x:H.x-W.x,y:H.y-W.y},v===void 0?A:A[v]}else if(!k)return;return this}};fn$4.modelPosition=fn$4.point=fn$4.position;fn$4.modelPositions=fn$4.points=fn$4.positions;fn$4.renderedPoint=fn$4.renderedPosition;fn$4.relativePoint=fn$4.relativePosition;var position=elesfn$c,fn$3,elesfn$b;fn$3=elesfn$b={};elesfn$b.renderedBoundingBox=function(_){var v=this.boundingBox(_),S=this.cy(),R=S.zoom(),T=S.pan(),A=v.x1*R+T.x,k=v.x2*R+T.x,q=v.y1*R+T.y,M=v.y2*R+T.y;return{x1:A,x2:k,y1:q,y2:M,w:k-A,h:M-q}};elesfn$b.dirtyCompoundBoundsCache=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.cy();return!v.styleEnabled()||!v.hasCompoundNodes()?this:(this.forEachUp(function(S){if(S.isParent()){var R=S._private;R.compoundBoundsClean=!1,R.bbCache=null,_||S.emitAndNotify("bounds")}}),this)};elesfn$b.updateCompoundBounds=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.cy();if(!v.styleEnabled()||!v.hasCompoundNodes())return this;if(!_&&v.batching())return this;function S(k){if(!k.isParent())return;var q=k._private,M=k.children(),D=k.pstyle("compound-sizing-wrt-labels").value==="include",L={width:{val:k.pstyle("min-width").pfValue,left:k.pstyle("min-width-bias-left"),right:k.pstyle("min-width-bias-right")},height:{val:k.pstyle("min-height").pfValue,top:k.pstyle("min-height-bias-top"),bottom:k.pstyle("min-height-bias-bottom")}},I=M.boundingBox({includeLabels:D,includeOverlays:!1,useCache:!1}),N=q.position;(I.w===0||I.h===0)&&(I={w:k.pstyle("width").pfValue,h:k.pstyle("height").pfValue},I.x1=N.x-I.w/2,I.x2=N.x+I.w/2,I.y1=N.y-I.h/2,I.y2=N.y+I.h/2);function F(oe,ue,ce){var de=0,pe=0,_e=ue+ce;return oe>0&&_e>0&&(de=ue/_e*oe,pe=ce/_e*oe),{biasDiff:de,biasComplementDiff:pe}}function H(oe,ue,ce,de){if(ce.units==="%")switch(de){case"width":return oe>0?ce.pfValue*oe:0;case"height":return ue>0?ce.pfValue*ue:0;case"average":return oe>0&&ue>0?ce.pfValue*(oe+ue)/2:0;case"min":return oe>0&&ue>0?oe>ue?ce.pfValue*ue:ce.pfValue*oe:0;case"max":return oe>0&&ue>0?oe>ue?ce.pfValue*oe:ce.pfValue*ue:0;default:return 0}else return ce.units==="px"?ce.pfValue:0}var G=L.width.left.value;L.width.left.units==="px"&&L.width.val>0&&(G=G*100/L.width.val);var V=L.width.right.value;L.width.right.units==="px"&&L.width.val>0&&(V=V*100/L.width.val);var j=L.height.top.value;L.height.top.units==="px"&&L.height.val>0&&(j=j*100/L.height.val);var W=L.height.bottom.value;L.height.bottom.units==="px"&&L.height.val>0&&(W=W*100/L.height.val);var X=F(L.width.val-I.w,G,V),J=X.biasDiff,te=X.biasComplementDiff,re=F(L.height.val-I.h,j,W),ee=re.biasDiff,ne=re.biasComplementDiff;q.autoPadding=H(I.w,I.h,k.pstyle("padding"),k.pstyle("padding-relative-to").value),q.autoWidth=Math.max(I.w,L.width.val),N.x=(-J+I.x1+I.x2+te)/2,q.autoHeight=Math.max(I.h,L.height.val),N.y=(-ee+I.y1+I.y2+ne)/2}for(var R=0;R<this.length;R++){var T=this[R],A=T._private;(!A.compoundBoundsClean||_)&&(S(T),v.batching()||(A.compoundBoundsClean=!0))}return this};var noninf=function(v){return v===1/0||v===-1/0?0:v},updateBounds=function(v,S,R,T,A){T-S===0||A-R===0||S==null||R==null||T==null||A==null||(v.x1=S<v.x1?S:v.x1,v.x2=T>v.x2?T:v.x2,v.y1=R<v.y1?R:v.y1,v.y2=A>v.y2?A:v.y2,v.w=v.x2-v.x1,v.h=v.y2-v.y1)},updateBoundsFromBox=function(v,S){return S==null?v:updateBounds(v,S.x1,S.y1,S.x2,S.y2)},prefixedProperty=function(v,S,R){return getPrefixedProperty(v,S,R)},updateBoundsFromArrow=function(v,S,R){if(!S.cy().headless()){var T=S._private,A=T.rstyle,k=A.arrowWidth/2,q=S.pstyle(R+"-arrow-shape").value,M,D;if(q!=="none"){R==="source"?(M=A.srcX,D=A.srcY):R==="target"?(M=A.tgtX,D=A.tgtY):(M=A.midX,D=A.midY);var L=T.arrowBounds=T.arrowBounds||{},I=L[R]=L[R]||{};I.x1=M-k,I.y1=D-k,I.x2=M+k,I.y2=D+k,I.w=I.x2-I.x1,I.h=I.y2-I.y1,expandBoundingBox(I,1),updateBounds(v,I.x1,I.y1,I.x2,I.y2)}}},updateBoundsFromLabel=function(v,S,R){if(!S.cy().headless()){var T;R?T=R+"-":T="";var A=S._private,k=A.rstyle,q=S.pstyle(T+"label").strValue;if(q){var M=S.pstyle("text-halign"),D=S.pstyle("text-valign"),L=prefixedProperty(k,"labelWidth",R),I=prefixedProperty(k,"labelHeight",R),N=prefixedProperty(k,"labelX",R),F=prefixedProperty(k,"labelY",R),H=S.pstyle(T+"text-margin-x").pfValue,G=S.pstyle(T+"text-margin-y").pfValue,V=S.isEdge(),j=S.pstyle(T+"text-rotation"),W=S.pstyle("text-outline-width").pfValue,X=S.pstyle("text-border-width").pfValue,J=X/2,te=S.pstyle("text-background-padding").pfValue,re=2,ee=I,ne=L,oe=ne/2,ue=ee/2,ce,de,pe,_e;if(V)ce=N-oe,de=N+oe,pe=F-ue,_e=F+ue;else{switch(M.value){case"left":ce=N-ne,de=N;break;case"center":ce=N-oe,de=N+oe;break;case"right":ce=N,de=N+ne;break}switch(D.value){case"top":pe=F-ee,_e=F;break;case"center":pe=F-ue,_e=F+ue;break;case"bottom":pe=F,_e=F+ee;break}}var Ee=H-Math.max(W,J)-te-re,ge=H+Math.max(W,J)+te+re,be=G-Math.max(W,J)-te-re,Ae=G+Math.max(W,J)+te+re;ce+=Ee,de+=ge,pe+=be,_e+=Ae;var De=R||"main",ve=A.labelBounds,le=ve[De]=ve[De]||{};le.x1=ce,le.y1=pe,le.x2=de,le.y2=_e,le.w=de-ce,le.h=_e-pe,le.leftPad=Ee,le.rightPad=ge,le.topPad=be,le.botPad=Ae;var me=V&&j.strValue==="autorotate",Te=j.pfValue!=null&&j.pfValue!==0;if(me||Te){var ye=me?prefixedProperty(A.rstyle,"labelAngle",R):j.pfValue,Re=Math.cos(ye),qe=Math.sin(ye),ke=(ce+de)/2,ze=(pe+_e)/2;if(!V){switch(M.value){case"left":ke=de;break;case"right":ke=ce;break}switch(D.value){case"top":ze=_e;break;case"bottom":ze=pe;break}}var Ne=function(pt,We){return pt=pt-ke,We=We-ze,{x:pt*Re-We*qe+ke,y:pt*qe+We*Re+ze}},Pe=Ne(ce,pe),Me=Ne(ce,_e),Ie=Ne(de,pe),Le=Ne(de,_e);ce=Math.min(Pe.x,Me.x,Ie.x,Le.x),de=Math.max(Pe.x,Me.x,Ie.x,Le.x),pe=Math.min(Pe.y,Me.y,Ie.y,Le.y),_e=Math.max(Pe.y,Me.y,Ie.y,Le.y)}var nt=De+"Rot",lt=ve[nt]=ve[nt]||{};lt.x1=ce,lt.y1=pe,lt.x2=de,lt.y2=_e,lt.w=de-ce,lt.h=_e-pe,updateBounds(v,ce,pe,de,_e),updateBounds(A.labelBounds.all,ce,pe,de,_e)}return v}},updateBoundsFromOutline=function(v,S){if(!S.cy().headless()){var R=S.pstyle("outline-opacity").value,T=S.pstyle("outline-width").value,A=S.pstyle("outline-offset").value,k=T+A;updateBoundsFromMiter(v,S,R,k,"outside",k/2)}},updateBoundsFromMiter=function(v,S,R,T,A,k){if(!(R===0||T<=0||A==="inside")){var q=S.cy(),M=S.pstyle("shape").value,D=q.renderer().nodeShapes[M],L=S.position(),I=L.x,N=L.y,F=S.width(),H=S.height();if(D.hasMiterBounds){A==="center"&&(T/=2);var G=D.miterBounds(I,N,F,H,T);updateBoundsFromBox(v,G)}else k!=null&&k>0&&expandBoundingBoxSides(v,[k,k,k,k])}},updateBoundsFromMiterBorder=function(v,S){if(!S.cy().headless()){var R=S.pstyle("border-opacity").value,T=S.pstyle("border-width").pfValue,A=S.pstyle("border-position").value;updateBoundsFromMiter(v,S,R,T,A)}},boundingBoxImpl=function(v,S){var R=v._private.cy,T=R.styleEnabled(),A=R.headless(),k=makeBoundingBox(),q=v._private,M=v.isNode(),D=v.isEdge(),L,I,N,F,H,G,V=q.rstyle,j=M&&T?v.pstyle("bounds-expansion").pfValue:[0],W=function(dt){return dt.pstyle("display").value!=="none"},X=!T||W(v)&&(!D||W(v.source())&&W(v.target()));if(X){var J=0,te=0;T&&S.includeOverlays&&(J=v.pstyle("overlay-opacity").value,J!==0&&(te=v.pstyle("overlay-padding").value));var re=0,ee=0;T&&S.includeUnderlays&&(re=v.pstyle("underlay-opacity").value,re!==0&&(ee=v.pstyle("underlay-padding").value));var ne=Math.max(te,ee),oe=0,ue=0;if(T&&(oe=v.pstyle("width").pfValue,ue=oe/2),M&&S.includeNodes){var ce=v.position();H=ce.x,G=ce.y;var de=v.outerWidth(),pe=de/2,_e=v.outerHeight(),Ee=_e/2;L=H-pe,I=H+pe,N=G-Ee,F=G+Ee,updateBounds(k,L,N,I,F),T&&updateBoundsFromOutline(k,v),T&&S.includeOutlines&&!A&&updateBoundsFromOutline(k,v),T&&updateBoundsFromMiterBorder(k,v)}else if(D&&S.includeEdges)if(T&&!A){var ge=v.pstyle("curve-style").strValue;if(L=Math.min(V.srcX,V.midX,V.tgtX),I=Math.max(V.srcX,V.midX,V.tgtX),N=Math.min(V.srcY,V.midY,V.tgtY),F=Math.max(V.srcY,V.midY,V.tgtY),L-=ue,I+=ue,N-=ue,F+=ue,updateBounds(k,L,N,I,F),ge==="haystack"){var be=V.haystackPts;if(be&&be.length===2){if(L=be[0].x,N=be[0].y,I=be[1].x,F=be[1].y,L>I){var Ae=L;L=I,I=Ae}if(N>F){var De=N;N=F,F=De}updateBounds(k,L-ue,N-ue,I+ue,F+ue)}}else if(ge==="bezier"||ge==="unbundled-bezier"||endsWith(ge,"segments")||endsWith(ge,"taxi")){var ve;switch(ge){case"bezier":case"unbundled-bezier":ve=V.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":ve=V.linePts;break}if(ve!=null)for(var le=0;le<ve.length;le++){var me=ve[le];L=me.x-ue,I=me.x+ue,N=me.y-ue,F=me.y+ue,updateBounds(k,L,N,I,F)}}}else{var Te=v.source(),ye=Te.position(),Re=v.target(),qe=Re.position();if(L=ye.x,I=qe.x,N=ye.y,F=qe.y,L>I){var ke=L;L=I,I=ke}if(N>F){var ze=N;N=F,F=ze}L-=ue,I+=ue,N-=ue,F+=ue,updateBounds(k,L,N,I,F)}if(T&&S.includeEdges&&D&&(updateBoundsFromArrow(k,v,"mid-source"),updateBoundsFromArrow(k,v,"mid-target"),updateBoundsFromArrow(k,v,"source"),updateBoundsFromArrow(k,v,"target")),T){var Ne=v.pstyle("ghost").value==="yes";if(Ne){var Pe=v.pstyle("ghost-offset-x").pfValue,Me=v.pstyle("ghost-offset-y").pfValue;updateBounds(k,k.x1+Pe,k.y1+Me,k.x2+Pe,k.y2+Me)}}var Ie=q.bodyBounds=q.bodyBounds||{};assignBoundingBox(Ie,k),expandBoundingBoxSides(Ie,j),expandBoundingBox(Ie,1),T&&(L=k.x1,I=k.x2,N=k.y1,F=k.y2,updateBounds(k,L-ne,N-ne,I+ne,F+ne));var Le=q.overlayBounds=q.overlayBounds||{};assignBoundingBox(Le,k),expandBoundingBoxSides(Le,j),expandBoundingBox(Le,1);var nt=q.labelBounds=q.labelBounds||{};nt.all!=null?clearBoundingBox(nt.all):nt.all=makeBoundingBox(),T&&S.includeLabels&&(S.includeMainLabels&&updateBoundsFromLabel(k,v,null),D&&(S.includeSourceLabels&&updateBoundsFromLabel(k,v,"source"),S.includeTargetLabels&&updateBoundsFromLabel(k,v,"target")))}return k.x1=noninf(k.x1),k.y1=noninf(k.y1),k.x2=noninf(k.x2),k.y2=noninf(k.y2),k.w=noninf(k.x2-k.x1),k.h=noninf(k.y2-k.y1),k.w>0&&k.h>0&&X&&(expandBoundingBoxSides(k,j),expandBoundingBox(k,1)),k},getKey=function(v){var S=0,R=function(k){return(k?1:0)<<S++},T=0;return T+=R(v.incudeNodes),T+=R(v.includeEdges),T+=R(v.includeLabels),T+=R(v.includeMainLabels),T+=R(v.includeSourceLabels),T+=R(v.includeTargetLabels),T+=R(v.includeOverlays),T+=R(v.includeOutlines),T},getBoundingBoxPosKey=function(v){var S=function(q){return Math.round(q)};if(v.isEdge()){var R=v.source().position(),T=v.target().position();return hashIntsArray([S(R.x),S(R.y),S(T.x),S(T.y)])}else{var A=v.position();return hashIntsArray([S(A.x),S(A.y)])}},cachedBoundingBoxImpl=function(v,S){var R=v._private,T,A=v.isEdge(),k=S==null?defBbOptsKey:getKey(S),q=k===defBbOptsKey;if(R.bbCache==null?(T=boundingBoxImpl(v,defBbOpts),R.bbCache=T,R.bbCachePosKey=getBoundingBoxPosKey(v)):T=R.bbCache,!q){var M=v.isNode();T=makeBoundingBox(),(S.includeNodes&&M||S.includeEdges&&!M)&&(S.includeOverlays?updateBoundsFromBox(T,R.overlayBounds):updateBoundsFromBox(T,R.bodyBounds)),S.includeLabels&&(S.includeMainLabels&&(!A||S.includeSourceLabels&&S.includeTargetLabels)?updateBoundsFromBox(T,R.labelBounds.all):(S.includeMainLabels&&updateBoundsFromBox(T,R.labelBounds.mainRot),S.includeSourceLabels&&updateBoundsFromBox(T,R.labelBounds.sourceRot),S.includeTargetLabels&&updateBoundsFromBox(T,R.labelBounds.targetRot))),T.w=T.x2-T.x1,T.h=T.y2-T.y1}return T},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(_){var v,S=_===void 0||_.useCache===void 0||_.useCache===!0,R=memoize(function(L){var I=L._private;return I.bbCache==null||I.styleDirty||I.bbCachePosKey!==getBoundingBoxPosKey(L)},function(L){return L.id()});if(S&&this.length===1&&!R(this[0]))_===void 0?_=defBbOpts:_=filledBbOpts(_),v=cachedBoundingBoxImpl(this[0],_);else{v=makeBoundingBox(),_=_||defBbOpts;var T=filledBbOpts(_),A=this,k=A.cy(),q=k.styleEnabled();this.edges().forEach(R),this.nodes().forEach(R),q&&this.recalculateRenderedStyle(S),this.updateCompoundBounds(!S);for(var M=0;M<A.length;M++){var D=A[M];R(D)&&D.dirtyBoundingBoxCache(),updateBoundsFromBox(v,cachedBoundingBoxImpl(D,T))}}return v.x1=noninf(v.x1),v.y1=noninf(v.y1),v.x2=noninf(v.x2),v.y2=noninf(v.y2),v.w=noninf(v.x2-v.x1),v.h=noninf(v.y2-v.y1),v};elesfn$b.dirtyBoundingBoxCache=function(){for(var _=0;_<this.length;_++){var v=this[_]._private;v.bbCache=null,v.bbCachePosKey=null,v.bodyBounds=null,v.overlayBounds=null,v.labelBounds.all=null,v.labelBounds.source=null,v.labelBounds.target=null,v.labelBounds.main=null,v.labelBounds.sourceRot=null,v.labelBounds.targetRot=null,v.labelBounds.mainRot=null,v.arrowBounds.source=null,v.arrowBounds.target=null,v.arrowBounds["mid-source"]=null,v.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};elesfn$b.boundingBoxAt=function(_){var v=this.nodes(),S=this.cy(),R=S.hasCompoundNodes(),T=S.collection();if(R&&(T=v.filter(function(D){return D.isParent()}),v=v.not(T)),plainObject(_)){var A=_;_=function(){return A}}var k=function(L,I){return L._private.bbAtOldPos=_(L,I)},q=function(L){return L._private.bbAtOldPos};S.startBatch(),v.forEach(k).silentPositions(_),R&&(T.dirtyCompoundBoundsCache(),T.dirtyBoundingBoxCache(),T.updateCompoundBounds(!0));var M=copyBoundingBox(this.boundingBox({useCache:!1}));return v.silentPositions(q),R&&(T.dirtyCompoundBoundsCache(),T.dirtyBoundingBoxCache(),T.updateCompoundBounds(!0)),S.endBatch(),M};fn$3.boundingbox=fn$3.bb=fn$3.boundingBox;fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$b,fn$2,elesfn$a;fn$2=elesfn$a={};var defineDimFns=function(v){v.uppercaseName=capitalize(v.name),v.autoName="auto"+v.uppercaseName,v.labelName="label"+v.uppercaseName,v.outerName="outer"+v.uppercaseName,v.uppercaseOuterName=capitalize(v.outerName),fn$2[v.name]=function(){var R=this[0],T=R._private,A=T.cy,k=A._private.styleEnabled;if(R)if(k){if(R.isParent())return R.updateCompoundBounds(),T[v.autoName]||0;var q=R.pstyle(v.name);switch(q.strValue){case"label":return R.recalculateRenderedStyle(),T.rstyle[v.labelName]||0;default:return q.pfValue}}else return 1},fn$2["outer"+v.uppercaseName]=function(){var R=this[0],T=R._private,A=T.cy,k=A._private.styleEnabled;if(R)if(k){var q=R[v.name](),M=R.pstyle("border-position").value,D;M==="center"?D=R.pstyle("border-width").pfValue:M==="outside"?D=2*R.pstyle("border-width").pfValue:D=0;var L=2*R.padding();return q+D+L}else return 1},fn$2["rendered"+v.uppercaseName]=function(){var R=this[0];if(R){var T=R[v.name]();return T*this.cy().zoom()}},fn$2["rendered"+v.uppercaseOuterName]=function(){var R=this[0];if(R){var T=R[v.outerName]();return T*this.cy().zoom()}}};defineDimFns({name:"width"});defineDimFns({name:"height"});elesfn$a.padding=function(){var _=this[0],v=_._private;return _.isParent()?(_.updateCompoundBounds(),v.autoPadding!==void 0?v.autoPadding:_.pstyle("padding").pfValue):_.pstyle("padding").pfValue};elesfn$a.paddedHeight=function(){var _=this[0];return _.height()+2*_.padding()};elesfn$a.paddedWidth=function(){var _=this[0];return _.width()+2*_.padding()};var widthHeight=elesfn$a,ifEdge=function(v,S){if(v.isEdge()&&v.takesUpSpace())return S(v)},ifEdgeRenderedPosition=function(v,S){if(v.isEdge()&&v.takesUpSpace()){var R=v.cy();return modelToRenderedPosition$1(S(v),R.zoom(),R.pan())}},ifEdgeRenderedPositions=function(v,S){if(v.isEdge()&&v.takesUpSpace()){var R=v.cy(),T=R.pan(),A=R.zoom();return S(v).map(function(k){return modelToRenderedPosition$1(k,A,T)})}},controlPoints=function(v){return v.renderer().getControlPoints(v)},segmentPoints=function(v){return v.renderer().getSegmentPoints(v)},sourceEndpoint=function(v){return v.renderer().getSourceEndpoint(v)},targetEndpoint=function(v){return v.renderer().getTargetEndpoint(v)},midpoint=function(v){return v.renderer().getEdgeMidpoint(v)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(v){return"rendered"+v[0].toUpperCase()+v.substr(1)},edgePoints=Object.keys(pts).reduce(function(_,v){var S=pts[v],R=renderedName(v);return _[v]=function(){return ifEdge(this,S.get)},S.mult?_[R]=function(){return ifEdgeRenderedPositions(this,S.get)}:_[R]=function(){return ifEdgeRenderedPosition(this,S.get)},_},{}),dimensions=extend({},position,bounds,widthHeight,edgePoints);var Event=function(v,S){this.recycle(v,S)};function returnFalse(){return!1}function returnTrue(){return!0}Event.prototype={instanceString:function(){return"event"},recycle:function(v,S){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,v!=null&&v.preventDefault?(this.type=v.type,this.isDefaultPrevented=v.defaultPrevented?returnTrue:returnFalse):v!=null&&v.type?S=v:this.type=v,S!=null&&(this.originalEvent=S.originalEvent,this.type=S.type!=null?S.type:this.type,this.cy=S.cy,this.target=S.target,this.position=S.position,this.renderedPosition=S.renderedPosition,this.namespace=S.namespace,this.layout=S.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var R=this.position,T=this.cy.zoom(),A=this.cy.pan();this.renderedPosition={x:R.x*T+A.x,y:R.y*T+A.y}}this.timeStamp=v&&v.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var v=this.originalEvent;v&&v.preventDefault&&v.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var v=this.originalEvent;v&&v.stopPropagation&&v.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(v,S){return v===S},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(v){return v},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:emptyOpts,v=arguments.length>1?arguments[1]:void 0,S=0;S<defaultsKeys.length;S++){var R=defaultsKeys[S];this[R]=_[R]||defaults$8[R]}this.context=v||this.context,this.listeners=[],this.emitting=0}var p$1=Emitter.prototype,forEachEvent=function(v,S,R,T,A,k,q){fn$6(T)&&(A=T,T=null),q&&(k==null?k=q:k=extend({},k,q));for(var M=array(R)?R:R.split(/\s+/),D=0;D<M.length;D++){var L=M[D];if(!emptyString(L)){var I=L.match(eventRegex);if(I){var N=I[1],F=I[2]?I[2]:null,H=S(v,L,N,F,T,A,k);if(H===!1)break}}}},makeEventObj=function(v,S){return v.addEventFields(v.context,S),new Event(S.type,S)},forEachEventObj=function(v,S,R){if(event(R)){S(v,R);return}else if(plainObject(R)){S(v,makeEventObj(v,R));return}for(var T=array(R)?R:R.split(/\s+/),A=0;A<T.length;A++){var k=T[A];if(!emptyString(k)){var q=k.match(eventRegex);if(q){var M=q[1],D=q[2]?q[2]:null,L=makeEventObj(v,{type:M,namespace:D,target:v.context});S(v,L)}}}};p$1.on=p$1.addListener=function(_,v,S,R,T){return forEachEvent(this,function(A,k,q,M,D,L,I){fn$6(L)&&A.listeners.push({event:k,callback:L,type:q,namespace:M,qualifier:D,conf:I})},_,v,S,R,T),this};p$1.one=function(_,v,S,R){return this.on(_,v,S,R,{one:!0})};p$1.removeListener=p$1.off=function(_,v,S,R){var T=this;this.emitting!==0&&(this.listeners=copyArray(this.listeners));for(var A=this.listeners,k=function(D){var L=A[D];forEachEvent(T,function(I,N,F,H,G,V){if((L.type===F||_==="*")&&(!H&&L.namespace!==".*"||L.namespace===H)&&(!G||I.qualifierCompare(L.qualifier,G))&&(!V||L.callback===V))return A.splice(D,1),!1},_,v,S,R)},q=A.length-1;q>=0;q--)k(q);return this};p$1.removeAllListeners=function(){return this.removeListener("*")};p$1.emit=p$1.trigger=function(_,v,S){var R=this.listeners,T=R.length;return this.emitting++,array(v)||(v=[v]),forEachEventObj(this,function(A,k){S!=null&&(R=[{event:k.event,type:k.type,namespace:k.namespace,callback:S}],T=R.length);for(var q=function(){var L=R[M];if(L.type===k.type&&(!L.namespace||L.namespace===k.namespace||L.namespace===universalNamespace)&&A.eventMatches(A.context,L,k)){var I=[k];v!=null&&push(I,v),A.beforeEmit(A.context,L,k),L.conf&&L.conf.one&&(A.listeners=A.listeners.filter(function(H){return H!==L}));var N=A.callbackContext(A.context,L,k),F=L.callback.apply(N,I);A.afterEmit(A.context,L,k),F===!1&&(k.stopPropagation(),k.preventDefault())}},M=0;M<T;M++)q();A.bubble(A.context)&&!k.isPropagationStopped()&&A.parent(A.context).emit(k,v)},_),this.emitting--,this};var emitterOptions$1={qualifierCompare:function(v,S){return v==null||S==null?v==null&&S==null:v.sameText(S)},eventMatches:function(v,S,R){var T=S.qualifier;return T!=null?v!==R.target&&element(R.target)&&T.matches(R.target):!0},addEventFields:function(v,S){S.cy=v.cy(),S.target=v},callbackContext:function(v,S,R){return S.qualifier!=null?R.target:v},beforeEmit:function(v,S){S.conf&&S.conf.once&&S.conf.onceCollection.removeListener(S.event,S.qualifier,S.callback)},bubble:function(){return!0},parent:function(v){return v.isChild()?v.parent():v.cy()}},argSelector$1=function(v){return string$1(v)?new Selector(v):v},elesfn$9={createEmitter:function(){for(var v=0;v<this.length;v++){var S=this[v],R=S._private;R.emitter||(R.emitter=new Emitter(emitterOptions$1,S))}return this},emitter:function(){return this._private.emitter},on:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().on(v,T,R)}return this},removeListener:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().removeListener(v,T,R)}return this},removeAllListeners:function(){for(var v=0;v<this.length;v++){var S=this[v];S.emitter().removeAllListeners()}return this},one:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().one(v,T,R)}return this},once:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().on(v,T,R,{once:!0,onceCollection:this})}},emit:function(v,S){for(var R=0;R<this.length;R++){var T=this[R];T.emitter().emit(v,S)}return this},emitAndNotify:function(v,S){if(this.length!==0)return this.cy().notify(v,this),this.emit(v,S),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function(v){return this.filter(function(S){return S.isNode()}).filter(v)},edges:function(v){return this.filter(function(S){return S.isEdge()}).filter(v)},byGroup:function(){for(var v=this.spawn(),S=this.spawn(),R=0;R<this.length;R++){var T=this[R];T.isNode()?v.push(T):S.push(T)}return{nodes:v,edges:S}},filter:function(v,S){if(v===void 0)return this;if(string$1(v)||elementOrCollection(v))return new Selector(v).filter(this);if(fn$6(v)){for(var R=this.spawn(),T=this,A=0;A<T.length;A++){var k=T[A],q=S?v.apply(S,[k,A,T]):v(k,A,T);q&&R.push(k)}return R}return this.spawn()},not:function(v){if(v){string$1(v)&&(v=this.filter(v));for(var S=this.spawn(),R=0;R<this.length;R++){var T=this[R],A=v.has(T);A||S.push(T)}return S}else return this},absoluteComplement:function(){var v=this.cy();return v.mutableElements().not(this)},intersect:function(v){if(string$1(v)){var S=v;return this.filter(S)}for(var R=this.spawn(),T=this,A=v,k=this.length<v.length,q=k?T:A,M=k?A:T,D=0;D<q.length;D++){var L=q[D];M.has(L)&&R.push(L)}return R},xor:function(v){var S=this._private.cy;string$1(v)&&(v=S.$(v));var R=this.spawn(),T=this,A=v,k=function(M,D){for(var L=0;L<M.length;L++){var I=M[L],N=I._private.data.id,F=D.hasElementWithId(N);F||R.push(I)}};return k(T,A),k(A,T),R},diff:function(v){var S=this._private.cy;string$1(v)&&(v=S.$(v));var R=this.spawn(),T=this.spawn(),A=this.spawn(),k=this,q=v,M=function(L,I,N){for(var F=0;F<L.length;F++){var H=L[F],G=H._private.data.id,V=I.hasElementWithId(G);V?A.merge(H):N.push(H)}};return M(k,q,R),M(q,k,T),{left:R,right:T,both:A}},add:function(v){var S=this._private.cy;if(!v)return this;if(string$1(v)){var R=v;v=S.mutableElements().filter(R)}for(var T=this.spawnSelf(),A=0;A<v.length;A++){var k=v[A],q=!this.has(k);q&&T.push(k)}return T},merge:function(v){var S=this._private,R=S.cy;if(!v)return this;if(v&&string$1(v)){var T=v;v=R.mutableElements().filter(T)}for(var A=S.map,k=0;k<v.length;k++){var q=v[k],M=q._private.data.id,D=!A.has(M);if(D){var L=this.length++;this[L]=q,A.set(M,{ele:q,index:L})}}return this},unmergeAt:function(v){var S=this[v],R=S.id(),T=this._private,A=T.map;this[v]=void 0,A.delete(R);var k=v===this.length-1;if(this.length>1&&!k){var q=this.length-1,M=this[q],D=M._private.data.id;this[q]=void 0,this[v]=M,A.set(D,{ele:M,index:v})}return this.length--,this},unmergeOne:function(v){v=v[0];var S=this._private,R=v._private.data.id,T=S.map,A=T.get(R);if(!A)return this;var k=A.index;return this.unmergeAt(k),this},unmerge:function(v){var S=this._private.cy;if(!v)return this;if(v&&string$1(v)){var R=v;v=S.mutableElements().filter(R)}for(var T=0;T<v.length;T++)this.unmergeOne(v[T]);return this},unmergeBy:function(v){for(var S=this.length-1;S>=0;S--){var R=this[S];v(R)&&this.unmergeAt(S)}return this},map:function(v,S){for(var R=[],T=this,A=0;A<T.length;A++){var k=T[A],q=S?v.apply(S,[k,A,T]):v(k,A,T);R.push(q)}return R},reduce:function(v,S){for(var R=S,T=this,A=0;A<T.length;A++)R=v(R,T[A],A,T);return R},max:function(v,S){for(var R=-1/0,T,A=this,k=0;k<A.length;k++){var q=A[k],M=S?v.apply(S,[q,k,A]):v(q,k,A);M>R&&(R=M,T=q)}return{value:R,ele:T}},min:function(v,S){for(var R=1/0,T,A=this,k=0;k<A.length;k++){var q=A[k],M=S?v.apply(S,[q,k,A]):v(q,k,A);M<R&&(R=M,T=q)}return{value:R,ele:T}}},fn$1=elesfn$8;fn$1.u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add;fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not;fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect;fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor;fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter;fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement;var elesfn$7={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var v=this[0];if(v)return v._private.group}},zIndexSort=function(v,S){var R=v.cy(),T=R.hasCompoundNodes();function A(L){var I=L.pstyle("z-compound-depth");return I.value==="auto"?T?L.zDepth():0:I.value==="bottom"?-1:I.value==="top"?MAX_INT$1:0}var k=A(v)-A(S);if(k!==0)return k;function q(L){var I=L.pstyle("z-index-compare");return I.value==="auto"&&L.isNode()?1:0}var M=q(v)-q(S);if(M!==0)return M;var D=v.pstyle("z-index").value-S.pstyle("z-index").value;return D!==0?D:v.poolIndex()-S.poolIndex()},elesfn$6={forEach:function(v,S){if(fn$6(v))for(var R=this.length,T=0;T<R;T++){var A=this[T],k=S?v.apply(S,[A,T,this]):v(A,T,this);if(k===!1)break}return this},toArray:function(){for(var v=[],S=0;S<this.length;S++)v.push(this[S]);return v},slice:function(v,S){var R=[],T=this.length;S==null&&(S=T),v==null&&(v=0),v<0&&(v=T+v),S<0&&(S=T+S);for(var A=v;A>=0&&A<S&&A<T;A++)R.push(this[A]);return this.spawn(R)},size:function(){return this.length},eq:function(v){return this[v]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(v){if(!fn$6(v))return this;var S=this.toArray().sort(v);return this.spawn(S)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var v=this[0];if(v){var S=v._private,R=S.group;if(R==="nodes"){var T=S.data.parent?v.parents().size():0;return v.isParent()?T:MAX_INT$1-1}else{var A=S.source,k=S.target,q=A.zDepth(),M=k.zDepth();return Math.max(q,M,0)}}}};elesfn$6.each=elesfn$6.forEach;var defineSymbolIterator=function(){var v="undefined",S=(typeof Symbol>"u"?"undefined":_typeof(Symbol))!=v&&_typeof(Symbol.iterator)!=v;S&&(elesfn$6[Symbol.iterator]=function(){var R=this,T={value:void 0,done:!1},A=0,k=this.length;return _defineProperty$1({next:function(){return A<k?T.value=R[A++]:(T.value=void 0,T.done=!0),T}},Symbol.iterator,function(){return this})})};defineSymbolIterator();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function(v){v=getLayoutDimensionOptions(v);var S;if(!this.takesUpSpace())S={w:0,h:0};else if(v.nodeDimensionsIncludeLabels){var R=this.boundingBox();S={w:R.w,h:R.h}}else S={w:this.outerWidth(),h:this.outerHeight()};return(S.w===0||S.h===0)&&(S.w=S.h=1),S},layoutPositions:function(v,S,R){var T=this.nodes().filter(function(te){return!te.isParent()}),A=this.cy(),k=S.eles,q=function(re){return re.id()},M=memoize(R,q);v.emit({type:"layoutstart",layout:v}),v.animations=[];var D=function(re,ee,ne){var oe={x:ee.x1+ee.w/2,y:ee.y1+ee.h/2},ue={x:(ne.x-oe.x)*re,y:(ne.y-oe.y)*re};return{x:oe.x+ue.x,y:oe.y+ue.y}},L=S.spacingFactor&&S.spacingFactor!==1,I=function(){if(!L)return null;for(var re=makeBoundingBox(),ee=0;ee<T.length;ee++){var ne=T[ee],oe=M(ne,ee);expandBoundingBoxByPoint(re,oe.x,oe.y)}return re},N=I(),F=memoize(function(te,re){var ee=M(te,re);if(L){var ne=Math.abs(S.spacingFactor);ee=D(ne,N,ee)}return S.transform!=null&&(ee=S.transform(te,ee)),ee},q);if(S.animate){for(var H=0;H<T.length;H++){var G=T[H],V=F(G,H),j=S.animateFilter==null||S.animateFilter(G,H);if(j){var W=G.animation({position:V,duration:S.animationDuration,easing:S.animationEasing});v.animations.push(W)}else G.position(V)}if(S.fit){var X=A.animation({fit:{boundingBox:k.boundingBoxAt(F),padding:S.padding},duration:S.animationDuration,easing:S.animationEasing});v.animations.push(X)}else if(S.zoom!==void 0&&S.pan!==void 0){var J=A.animation({zoom:S.zoom,pan:S.pan,duration:S.animationDuration,easing:S.animationEasing});v.animations.push(J)}v.animations.forEach(function(te){return te.play()}),v.one("layoutready",S.ready),v.emit({type:"layoutready",layout:v}),Promise$1.all(v.animations.map(function(te){return te.promise()})).then(function(){v.one("layoutstop",S.stop),v.emit({type:"layoutstop",layout:v})})}else T.positions(F),S.fit&&A.fit(S.eles,S.padding),S.zoom!=null&&A.zoom(S.zoom),S.pan&&A.pan(S.pan),v.one("layoutready",S.ready),v.emit({type:"layoutready",layout:v}),v.one("layoutstop",S.stop),v.emit({type:"layoutstop",layout:v});return this},layout:function(v){var S=this.cy();return S.makeLayout(extend({},v,{eles:this}))}};elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout;function styleCache(_,v,S){var R=S._private,T=R.styleCache=R.styleCache||[],A;return(A=T[_])!=null||(A=T[_]=v(S)),A}function cacheStyleFunction(_,v){return _=hashString(_),function(R){return styleCache(_,v,R)}}function cachePrototypeStyleFunction(_,v){_=hashString(_);var S=function(T){return v.call(T)};return function(){var T=this[0];if(T)return styleCache(_,S,T)}}var elesfn$4={recalculateRenderedStyle:function(v){var S=this.cy(),R=S.renderer(),T=S.styleEnabled();return R&&T&&R.recalculateRenderedStyle(this,v),this},dirtyStyleCache:function(){var v=this.cy(),S=function(A){return A._private.styleCache=null};if(v.hasCompoundNodes()){var R;R=this.spawnSelf().merge(this.descendants()).merge(this.parents()),R.merge(R.connectedEdges()),R.forEach(S)}else this.forEach(function(T){S(T),T.connectedEdges().forEach(S)});return this},updateStyle:function(v){var S=this._private.cy;if(!S.styleEnabled())return this;if(S.batching()){var R=S._private.batchStyleEles;return R.merge(this),this}var T=S.hasCompoundNodes(),A=this;v=!!(v||v===void 0),T&&(A=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var k=A;return v?k.emitAndNotify("style"):k.emit("style"),A.forEach(function(q){return q._private.styleDirty=!0}),this},cleanStyle:function(){var v=this.cy();if(v.styleEnabled())for(var S=0;S<this.length;S++){var R=this[S];R._private.styleDirty&&(R._private.styleDirty=!1,v.style().apply(R))}},parsedStyle:function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=this[0],T=R.cy();if(T.styleEnabled()&&R){R._private.styleDirty&&(R._private.styleDirty=!1,T.style().apply(R));var A=R._private.style[v];return A??(S?T.style().getDefaultProperty(v):null)}},numericStyle:function(v){var S=this[0];if(S.cy().styleEnabled()&&S){var R=S.pstyle(v);return R.pfValue!==void 0?R.pfValue:R.value}},numericStyleUnits:function(v){var S=this[0];if(S.cy().styleEnabled()&&S)return S.pstyle(v).units},renderedStyle:function(v){var S=this.cy();if(!S.styleEnabled())return this;var R=this[0];if(R)return S.style().getRenderedStyle(R,v)},style:function(v,S){var R=this.cy();if(!R.styleEnabled())return this;var T=!1,A=R.style();if(plainObject(v)){var k=v;A.applyBypass(this,k,T),this.emitAndNotify("style")}else if(string$1(v))if(S===void 0){var q=this[0];return q?A.getStylePropertyValue(q,v):void 0}else A.applyBypass(this,v,S,T),this.emitAndNotify("style");else if(v===void 0){var M=this[0];return M?A.getRawStyle(M):void 0}return this},removeStyle:function(v){var S=this.cy();if(!S.styleEnabled())return this;var R=!1,T=S.style(),A=this;if(v===void 0)for(var k=0;k<A.length;k++){var q=A[k];T.removeAllBypasses(q,R)}else{v=v.split(/\s+/);for(var M=0;M<A.length;M++){var D=A[M];T.removeBypasses(D,v,R)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var v=this.cy();if(!v.styleEnabled())return 1;var S=v.hasCompoundNodes(),R=this[0];if(R){var T=R._private,A=R.pstyle("opacity").value;if(!S)return A;var k=T.data.parent?R.parents():null;if(k)for(var q=0;q<k.length;q++){var M=k[q],D=M.pstyle("opacity").value;A=D*A}return A}},transparent:function(){var v=this.cy();if(!v.styleEnabled())return!1;var S=this[0],R=S.cy().hasCompoundNodes();if(S)return R?S.effectiveOpacity()===0:S.pstyle("opacity").value===0},backgrounding:function(){var v=this.cy();if(!v.styleEnabled())return!1;var S=this[0];return!!S._private.backgrounding}};function checkCompound(_,v){var S=_._private,R=S.data.parent?_.parents():null;if(R)for(var T=0;T<R.length;T++){var A=R[T];if(!v(A))return!1}return!0}function defineDerivedStateFunction(_){var v=_.ok,S=_.edgeOkViaNode||_.ok,R=_.parentOk||_.ok;return function(){var T=this.cy();if(!T.styleEnabled())return!0;var A=this[0],k=T.hasCompoundNodes();if(A){var q=A._private;if(!v(A))return!1;if(A.isNode())return!k||checkCompound(A,R);var M=q.source,D=q.target;return S(M)&&(!k||checkCompound(M,S))&&(M===D||S(D)&&(!k||checkCompound(D,S)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",function(_){return _.pstyle("display").value==="element"&&_.width()!==0&&(_.isNode()?_.height()!==0:!0)});elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",function(_){return _.pstyle("events").value==="yes"&&_.pstyle("visibility").value==="visible"&&eleTakesUpSpace(_)}),parentInteractive=cacheStyleFunction("parentInteractive",function(_){return _.pstyle("visibility").value==="visible"&&eleTakesUpSpace(_)});elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace}));elesfn$4.noninteractive=function(){var _=this[0];if(_)return!_.interactive()};var eleVisible=cacheStyleFunction("eleVisible",function(_){return _.pstyle("visibility").value==="visible"&&_.pstyle("opacity").pfValue!==0&&eleTakesUpSpace(_)}),edgeVisibleViaNode=eleTakesUpSpace;elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode}));elesfn$4.hidden=function(){var _=this[0];if(_)return!_.visible()};elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});elesfn$4.bypass=elesfn$4.css=elesfn$4.style;elesfn$4.renderedCss=elesfn$4.renderedStyle;elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle;elesfn$4.pstyle=elesfn$4.parsedStyle;var elesfn$3={};function defineSwitchFunction(_){return function(){var v=arguments,S=[];if(v.length===2){var R=v[0],T=v[1];this.on(_.event,R,T)}else if(v.length===1&&fn$6(v[0])){var A=v[0];this.on(_.event,A)}else if(v.length===0||v.length===1&&array(v[0])){for(var k=v.length===1?v[0]:null,q=0;q<this.length;q++){var M=this[q],D=!_.ableField||M._private[_.ableField],L=M._private[_.field]!=_.value;if(_.overrideAble){var I=_.overrideAble(M);if(I!==void 0&&(D=I,!I))return this}D&&(M._private[_.field]=_.value,L&&S.push(M))}var N=this.spawn(S);N.updateStyle(),N.emit(_.event),k&&N.emit(k)}return this}}function defineSwitchSet(_){elesfn$3[_.field]=function(){var v=this[0];if(v){if(_.overrideField){var S=_.overrideField(v);if(S!==void 0)return S}return v._private[_.field]}},elesfn$3[_.on]=defineSwitchFunction({event:_.on,field:_.field,ableField:_.ableField,overrideAble:_.overrideAble,value:!0}),elesfn$3[_.off]=defineSwitchFunction({event:_.off,field:_.field,ableField:_.ableField,overrideAble:_.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(v){return v.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});defineSwitchSet({field:"grabbable",overrideField:function(v){return v.cy().autoungrabify()||v.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(v){return v.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});defineSwitchSet({field:"selectable",overrideField:function(v){return v.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});elesfn$3.deselect=elesfn$3.unselect;elesfn$3.grabbed=function(){var _=this[0];if(_)return _._private.grabbed};defineSwitchSet({field:"active",on:"activate",off:"unactivate"});defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"});elesfn$3.inactive=function(){var _=this[0];if(_)return!_._private.active};var elesfn$2={},defineDagExtremity=function(v){return function(R){for(var T=this,A=[],k=0;k<T.length;k++){var q=T[k];if(q.isNode()){for(var M=!1,D=q.connectedEdges(),L=0;L<D.length;L++){var I=D[L],N=I.source(),F=I.target();if(v.noIncomingEdges&&F===q&&N!==q||v.noOutgoingEdges&&N===q&&F!==q){M=!0;break}}M||A.push(q)}}return this.spawn(A,!0).filter(R)}},defineDagOneHop=function(v){return function(S){for(var R=this,T=[],A=0;A<R.length;A++){var k=R[A];if(k.isNode())for(var q=k.connectedEdges(),M=0;M<q.length;M++){var D=q[M],L=D.source(),I=D.target();v.outgoing&&L===k?(T.push(D),T.push(I)):v.incoming&&I===k&&(T.push(D),T.push(L))}}return this.spawn(T,!0).filter(S)}},defineDagAllHops=function(v){return function(S){for(var R=this,T=[],A={};;){var k=v.outgoing?R.outgoers():R.incomers();if(k.length===0)break;for(var q=!1,M=0;M<k.length;M++){var D=k[M],L=D.id();A[L]||(A[L]=!0,T.push(D),q=!0)}if(!q)break;R=k}return this.spawn(T,!0).filter(S)}};elesfn$2.clearTraversalCache=function(){for(var _=0;_<this.length;_++)this[_]._private.traversalCache=null};extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({})});extend(elesfn$2,{neighborhood:cache(function(_){for(var v=[],S=this.nodes(),R=0;R<S.length;R++)for(var T=S[R],A=T.connectedEdges(),k=0;k<A.length;k++){var q=A[k],M=q.source(),D=q.target(),L=T===M?D:M;L.length>0&&v.push(L[0]),v.push(q[0])}return this.spawn(v,!0).filter(_)},"neighborhood"),closedNeighborhood:function(v){return this.neighborhood().add(this).filter(v)},openNeighborhood:function(v){return this.neighborhood(v)}});elesfn$2.neighbourhood=elesfn$2.neighborhood;elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood;elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood;extend(elesfn$2,{source:cache(function(v){var S=this[0],R;return S&&(R=S._private.source||S.cy().collection()),R&&v?R.filter(v):R},"source"),target:cache(function(v){var S=this[0],R;return S&&(R=S._private.target||S.cy().collection()),R&&v?R.filter(v):R},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})});function defineSourceFunction(_){return function(S){for(var R=[],T=0;T<this.length;T++){var A=this[T],k=A._private[_.attr];k&&R.push(k)}return this.spawn(R,!0).filter(S)}}extend(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")});function defineEdgesWithFunction(_){return function(S){var R=[],T=this._private.cy,A=_||{};string$1(S)&&(S=T.$(S));for(var k=0;k<S.length;k++)for(var q=S[k]._private.edges,M=0;M<q.length;M++){var D=q[M],L=D._private.data,I=this.hasElementWithId(L.source)&&S.hasElementWithId(L.target),N=S.hasElementWithId(L.source)&&this.hasElementWithId(L.target),F=I||N;F&&((A.thisIsSrc||A.thisIsTgt)&&(A.thisIsSrc&&!I||A.thisIsTgt&&!N)||R.push(D))}return this.spawn(R,!0)}}extend(elesfn$2,{connectedEdges:cache(function(_){for(var v=[],S=this,R=0;R<S.length;R++){var T=S[R];if(T.isNode())for(var A=T._private.edges,k=0;k<A.length;k++){var q=A[k];v.push(q)}}return this.spawn(v,!0).filter(_)},"connectedEdges"),connectedNodes:cache(function(_){for(var v=[],S=this,R=0;R<S.length;R++){var T=S[R];T.isEdge()&&(v.push(T.source()[0]),v.push(T.target()[0]))}return this.spawn(v,!0).filter(_)},"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")});function defineParallelEdgesFunction(_){var v={codirected:!1};return _=extend({},v,_),function(R){for(var T=[],A=this.edges(),k=_,q=0;q<A.length;q++)for(var M=A[q],D=M._private,L=D.source,I=L._private.data.id,N=D.data.target,F=L._private.edges,H=0;H<F.length;H++){var G=F[H],V=G._private.data,j=V.target,W=V.source,X=j===N&&W===I,J=I===j&&N===W;(k.codirected&&X||!k.codirected&&(X||J))&&T.push(G)}return this.spawn(T,!0).filter(R)}}extend(elesfn$2,{components:function(v){var S=this,R=S.cy(),T=R.collection(),A=v==null?S.nodes():v.nodes(),k=[];v!=null&&A.empty()&&(A=v.sources());var q=function(L,I){T.merge(L),A.unmerge(L),I.merge(L)};if(A.empty())return S.spawn();var M=function(){var L=R.collection();k.push(L);var I=A[0];q(I,L),S.bfs({directed:!1,roots:I,visit:function(F){return q(F,L)}}),L.forEach(function(N){N.connectedEdges().forEach(function(F){S.has(F)&&L.has(F.source())&&L.has(F.target())&&L.merge(F)})})};do M();while(A.length>0);return k},component:function(){var v=this[0];return v.cy().mutableElements().components(v)[0]}});elesfn$2.componentsOf=elesfn$2.components;var Collection=function(v,S){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(v===void 0){error("A collection must have a reference to the core");return}var A=new Map$1,k=!1;if(!S)S=[];else if(S.length>0&&plainObject(S[0])&&!element(S[0])){k=!0;for(var q=[],M=new Set$1,D=0,L=S.length;D<L;D++){var I=S[D];I.data==null&&(I.data={});var N=I.data;if(N.id==null)N.id=uuid();else if(v.hasElementWithId(N.id)||M.has(N.id))continue;var F=new Element(v,I,!1);q.push(F),M.add(N.id)}S=q}this.length=0;for(var H=0,G=S.length;H<G;H++){var V=S[H][0];if(V!=null){var j=V._private.data.id;(!R||!A.has(j))&&(R&&A.set(j,{index:this.length,ele:V}),this[this.length]=V,this.length++)}}this._private={eles:this,cy:v,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(W){this.lazyMap=W},rebuildMap:function(){for(var X=this.lazyMap=new Map$1,J=this.eles,te=0;te<J.length;te++){var re=J[te];X.set(re.id(),{index:te,ele:re})}}},R&&(this._private.map=A),k&&!T&&this.restore()},elesfn$1=Element.prototype=Collection.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"};elesfn$1.spawn=function(_,v){return new Collection(this.cy(),_,v)};elesfn$1.spawnSelf=function(){return this.spawn(this)};elesfn$1.cy=function(){return this._private.cy};elesfn$1.renderer=function(){return this._private.cy.renderer()};elesfn$1.element=function(){return this[0]};elesfn$1.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])};elesfn$1.unique=function(){return new Collection(this._private.cy,this,!0)};elesfn$1.hasElementWithId=function(_){return _=""+_,this._private.map.has(_)};elesfn$1.getElementById=function(_){_=""+_;var v=this._private.cy,S=this._private.map.get(_);return S?S.ele:new Collection(v)};elesfn$1.$id=elesfn$1.getElementById;elesfn$1.poolIndex=function(){var _=this._private.cy,v=_._private.elements,S=this[0]._private.data.id;return v._private.map.get(S).index};elesfn$1.indexOf=function(_){var v=_[0]._private.data.id;return this._private.map.get(v).index};elesfn$1.indexOfId=function(_){return _=""+_,this._private.map.get(_).index};elesfn$1.json=function(_){var v=this.element(),S=this.cy();if(v==null&&_)return this;if(v!=null){var R=v._private;if(plainObject(_)){if(S.startBatch(),_.data){v.data(_.data);var T=R.data;if(v.isEdge()){var A=!1,k={},q=_.data.source,M=_.data.target;q!=null&&q!=T.source&&(k.source=""+q,A=!0),M!=null&&M!=T.target&&(k.target=""+M,A=!0),A&&(v=v.move(k))}else{var D="parent"in _.data,L=_.data.parent;D&&(L!=null||T.parent!=null)&&L!=T.parent&&(L===void 0&&(L=null),L!=null&&(L=""+L),v=v.move({parent:L}))}}_.position&&v.position(_.position);var I=function(G,V,j){var W=_[G];W!=null&&W!==R[G]&&(W?v[V]():v[j]())};return I("removed","remove","restore"),I("selected","select","unselect"),I("selectable","selectify","unselectify"),I("locked","lock","unlock"),I("grabbable","grabify","ungrabify"),I("pannable","panify","unpanify"),_.classes!=null&&v.classes(_.classes),S.endBatch(),this}else if(_===void 0){var N={data:copy(R.data),position:copy(R.position),group:R.group,removed:R.removed,selected:R.selected,selectable:R.selectable,locked:R.locked,grabbable:R.grabbable,pannable:R.pannable,classes:null};N.classes="";var F=0;return R.classes.forEach(function(H){return N.classes+=F++===0?H:" "+H}),N}}};elesfn$1.jsons=function(){for(var _=[],v=0;v<this.length;v++){var S=this[v],R=S.json();_.push(R)}return _};elesfn$1.clone=function(){for(var _=this.cy(),v=[],S=0;S<this.length;S++){var R=this[S],T=R.json(),A=new Element(_,T,!1);v.push(A)}return new Collection(_,v)};elesfn$1.copy=elesfn$1.clone;elesfn$1.restore=function(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this,R=S.cy(),T=R._private,A=[],k=[],q,M=0,D=S.length;M<D;M++){var L=S[M];v&&!L.removed()||(L.isNode()?A.push(L):k.push(L))}q=A.concat(k);var I,N=function(){q.splice(I,1),I--};for(I=0;I<q.length;I++){var F=q[I],H=F._private,G=H.data;if(F.clearTraversalCache(),!(!v&&!H.removed)){if(G.id===void 0)G.id=uuid();else if(number$1(G.id))G.id=""+G.id;else if(emptyString(G.id)||!string$1(G.id)){error("Can not create element with invalid string ID `"+G.id+"`"),N();continue}else if(R.hasElementWithId(G.id)){error("Can not create second element with ID `"+G.id+"`"),N();continue}}var V=G.id;if(F.isNode()){var j=H.position;j.x==null&&(j.x=0),j.y==null&&(j.y=0)}if(F.isEdge()){for(var W=F,X=["source","target"],J=X.length,te=!1,re=0;re<J;re++){var ee=X[re],ne=G[ee];number$1(ne)&&(ne=G[ee]=""+G[ee]),ne==null||ne===""?(error("Can not create edge `"+V+"` with unspecified "+ee),te=!0):R.hasElementWithId(ne)||(error("Can not create edge `"+V+"` with nonexistant "+ee+" `"+ne+"`"),te=!0)}if(te){N();continue}var oe=R.getElementById(G.source),ue=R.getElementById(G.target);oe.same(ue)?oe._private.edges.push(W):(oe._private.edges.push(W),ue._private.edges.push(W)),W._private.source=oe,W._private.target=ue}H.map=new Map$1,H.map.set(V,{ele:F,index:0}),H.removed=!1,v&&R.addToPool(F)}for(var ce=0;ce<A.length;ce++){var de=A[ce],pe=de._private.data;number$1(pe.parent)&&(pe.parent=""+pe.parent);var _e=pe.parent,Ee=_e!=null;if(Ee||de._private.parent){var ge=de._private.parent?R.collection().merge(de._private.parent):R.getElementById(_e);if(ge.empty())pe.parent=void 0;else if(ge[0].removed())warn("Node added with missing parent, reference to parent removed"),pe.parent=void 0,de._private.parent=null;else{for(var be=!1,Ae=ge;!Ae.empty();){if(de.same(Ae)){be=!0,pe.parent=void 0;break}Ae=Ae.parent()}be||(ge[0]._private.children.push(de),de._private.parent=ge[0],T.hasCompoundNodes=!0)}}}if(q.length>0){for(var De=q.length===S.length?S:new Collection(R,q),ve=0;ve<De.length;ve++){var le=De[ve];le.isNode()||(le.parallelEdges().clearTraversalCache(),le.source().clearTraversalCache(),le.target().clearTraversalCache())}var me;T.hasCompoundNodes?me=R.collection().merge(De).merge(De.connectedNodes()).merge(De.parent()):me=De,me.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(_),_?De.emitAndNotify("add"):v&&De.emit("add")}return S};elesfn$1.removed=function(){var _=this[0];return _&&_._private.removed};elesfn$1.inside=function(){var _=this[0];return _&&!_._private.removed};elesfn$1.remove=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this,R=[],T={},A=S._private.cy;function k(_e){for(var Ee=_e._private.edges,ge=0;ge<Ee.length;ge++)M(Ee[ge])}function q(_e){for(var Ee=_e._private.children,ge=0;ge<Ee.length;ge++)M(Ee[ge])}function M(_e){var Ee=T[_e.id()];v&&_e.removed()||Ee||(T[_e.id()]=!0,_e.isNode()?(R.push(_e),k(_e),q(_e)):R.unshift(_e))}for(var D=0,L=S.length;D<L;D++){var I=S[D];M(I)}function N(_e,Ee){var ge=_e._private.edges;removeFromArray(ge,Ee),_e.clearTraversalCache()}function F(_e){_e.clearTraversalCache()}var H=[];H.ids={};function G(_e,Ee){Ee=Ee[0],_e=_e[0];var ge=_e._private.children,be=_e.id();removeFromArray(ge,Ee),Ee._private.parent=null,H.ids[be]||(H.ids[be]=!0,H.push(_e))}S.dirtyCompoundBoundsCache(),v&&A.removeFromPool(R);for(var V=0;V<R.length;V++){var j=R[V];if(j.isEdge()){var W=j.source()[0],X=j.target()[0];N(W,j),N(X,j);for(var J=j.parallelEdges(),te=0;te<J.length;te++){var re=J[te];F(re),re.isBundledBezier()&&re.dirtyBoundingBoxCache()}}else{var ee=j.parent();ee.length!==0&&G(ee,j)}v&&(j._private.removed=!0)}var ne=A._private.elements;A._private.hasCompoundNodes=!1;for(var oe=0;oe<ne.length;oe++){var ue=ne[oe];if(ue.isParent()){A._private.hasCompoundNodes=!0;break}}var ce=new Collection(this.cy(),R);ce.size()>0&&(_?ce.emitAndNotify("remove"):v&&ce.emit("remove"));for(var de=0;de<H.length;de++){var pe=H[de];(!v||!pe.removed())&&pe.updateStyle()}return ce};elesfn$1.move=function(_){var v=this._private.cy,S=this,R=!1,T=!1,A=function(H){return H==null?H:""+H};if(_.source!==void 0||_.target!==void 0){var k=A(_.source),q=A(_.target),M=k!=null&&v.hasElementWithId(k),D=q!=null&&v.hasElementWithId(q);(M||D)&&(v.batch(function(){S.remove(R,T),S.emitAndNotify("moveout");for(var F=0;F<S.length;F++){var H=S[F],G=H._private.data;H.isEdge()&&(M&&(G.source=k),D&&(G.target=q))}S.restore(R,T)}),S.emitAndNotify("move"))}else if(_.parent!==void 0){var L=A(_.parent),I=L===null||v.hasElementWithId(L);if(I){var N=L===null?void 0:L;v.batch(function(){var F=S.remove(R,T);F.emitAndNotify("moveout");for(var H=0;H<S.length;H++){var G=S[H],V=G._private.data;G.isNode()&&(V.parent=N)}F.restore(R,T)}),S.emitAndNotify("move")}}return this};[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach(function(_){extend(elesfn$1,_)});var corefn$9={add:function(v){var S,R=this;if(elementOrCollection(v)){var T=v;if(T._private.cy===R)S=T.restore();else{for(var A=[],k=0;k<T.length;k++){var q=T[k];A.push(q.json())}S=new Collection(R,A)}}else if(array(v)){var M=v;S=new Collection(R,M)}else if(plainObject(v)&&(array(v.nodes)||array(v.edges))){for(var D=v,L=[],I=["nodes","edges"],N=0,F=I.length;N<F;N++){var H=I[N],G=D[H];if(array(G))for(var V=0,j=G.length;V<j;V++){var W=extend({group:H},G[V]);L.push(W)}}S=new Collection(R,L)}else{var X=v;S=new Element(R,X).collection()}return S},remove:function(v){if(!elementOrCollection(v)){if(string$1(v)){var S=v;v=this.$(S)}}return v.remove()}};function generateCubicBezier(_,v,S,R){var T=4,A=.001,k=1e-7,q=10,M=11,D=1/(M-1),L=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var I=0;I<4;++I)if(typeof arguments[I]!="number"||isNaN(arguments[I])||!isFinite(arguments[I]))return!1;_=Math.min(_,1),S=Math.min(S,1),_=Math.max(_,0),S=Math.max(S,0);var N=L?new Float32Array(M):new Array(M);function F(ue,ce){return 1-3*ce+3*ue}function H(ue,ce){return 3*ce-6*ue}function G(ue){return 3*ue}function V(ue,ce,de){return((F(ce,de)*ue+H(ce,de))*ue+G(ce))*ue}function j(ue,ce,de){return 3*F(ce,de)*ue*ue+2*H(ce,de)*ue+G(ce)}function W(ue,ce){for(var de=0;de<T;++de){var pe=j(ce,_,S);if(pe===0)return ce;var _e=V(ce,_,S)-ue;ce-=_e/pe}return ce}function X(){for(var ue=0;ue<M;++ue)N[ue]=V(ue*D,_,S)}function J(ue,ce,de){var pe,_e,Ee=0;do _e=ce+(de-ce)/2,pe=V(_e,_,S)-ue,pe>0?de=_e:ce=_e;while(Math.abs(pe)>k&&++Ee<q);return _e}function te(ue){for(var ce=0,de=1,pe=M-1;de!==pe&&N[de]<=ue;++de)ce+=D;--de;var _e=(ue-N[de])/(N[de+1]-N[de]),Ee=ce+_e*D,ge=j(Ee,_,S);return ge>=A?W(ue,Ee):ge===0?Ee:J(ue,ce,ce+D)}var re=!1;function ee(){re=!0,(_!==v||S!==R)&&X()}var ne=function(ce){return re||ee(),_===v&&S===R?ce:ce===0?0:ce===1?1:V(te(ce),v,R)};ne.getControlPoints=function(){return[{x:_,y:v},{x:S,y:R}]};var oe="generateBezier("+[_,v,S,R]+")";return ne.toString=function(){return oe},ne}var generateSpringRK4=(function(){function _(R){return-R.tension*R.x-R.friction*R.v}function v(R,T,A){var k={x:R.x+A.dx*T,v:R.v+A.dv*T,tension:R.tension,friction:R.friction};return{dx:k.v,dv:_(k)}}function S(R,T){var A={dx:R.v,dv:_(R)},k=v(R,T*.5,A),q=v(R,T*.5,k),M=v(R,T,q),D=1/6*(A.dx+2*(k.dx+q.dx)+M.dx),L=1/6*(A.dv+2*(k.dv+q.dv)+M.dv);return R.x=R.x+D*T,R.v=R.v+L*T,R}return function R(T,A,k){var q={x:-1,v:0,tension:null,friction:null},M=[0],D=0,L=1/1e4,I=16/1e3,N,F,H;for(T=parseFloat(T)||500,A=parseFloat(A)||20,k=k||null,q.tension=T,q.friction=A,N=k!==null,N?(D=R(T,A),F=D/k*I):F=I;H=S(H||q,F),M.push(1+H.x),D+=16,Math.abs(H.x)>L&&Math.abs(H.v)>L;);return N?function(G){return M[G*(M.length-1)|0]}:D}})(),cubicBezier=function(v,S,R,T){var A=generateCubicBezier(v,S,R,T);return function(k,q,M){return k+(q-k)*A(M)}},easings={linear:function(v,S,R){return v+(S-v)*R},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(v,S,R){if(R===0)return easings.linear;var T=generateSpringRK4(v,S,R);return function(A,k,q){return A+(k-A)*T(q)}},"cubic-bezier":cubicBezier};function getEasedValue(_,v,S,R,T){if(R===1||v===S)return S;var A=T(v,S,R);return _==null||((_.roundValue||_.color)&&(A=Math.round(A)),_.min!==void 0&&(A=Math.max(A,_.min)),_.max!==void 0&&(A=Math.min(A,_.max))),A}function getValue(_,v){return _.pfValue!=null||_.value!=null?_.pfValue!=null&&(v==null||v.type.units!=="%")?_.pfValue:_.value:_}function ease(_,v,S,R,T){var A=T!=null?T.type:null;S<0?S=0:S>1&&(S=1);var k=getValue(_,T),q=getValue(v,T);if(number$1(k)&&number$1(q))return getEasedValue(A,k,q,S,R);if(array(k)&&array(q)){for(var M=[],D=0;D<q.length;D++){var L=k[D],I=q[D];if(L!=null&&I!=null){var N=getEasedValue(A,L,I,S,R);M.push(N)}else M.push(I)}return M}}function step$1(_,v,S,R){var T=!R,A=_._private,k=v._private,q=k.easing,M=k.startTime,D=R?_:_.cy(),L=D.style();if(!k.easingImpl)if(q==null)k.easingImpl=easings.linear;else{var I;if(string$1(q)){var N=L.parse("transition-timing-function",q);I=N.value}else I=q;var F,H;string$1(I)?(F=I,H=[]):(F=I[1],H=I.slice(2).map(function(De){return+De})),H.length>0?(F==="spring"&&H.push(k.duration),k.easingImpl=easings[F].apply(null,H)):k.easingImpl=easings[F]}var G=k.easingImpl,V;if(k.duration===0?V=1:V=(S-M)/k.duration,k.applying&&(V=k.progress),V<0?V=0:V>1&&(V=1),k.delay==null){var j=k.startPosition,W=k.position;if(W&&T&&!_.locked()){var X={};valid(j.x,W.x)&&(X.x=ease(j.x,W.x,V,G)),valid(j.y,W.y)&&(X.y=ease(j.y,W.y,V,G)),_.position(X)}var J=k.startPan,te=k.pan,re=A.pan,ee=te!=null&&R;ee&&(valid(J.x,te.x)&&(re.x=ease(J.x,te.x,V,G)),valid(J.y,te.y)&&(re.y=ease(J.y,te.y,V,G)),_.emit("pan"));var ne=k.startZoom,oe=k.zoom,ue=oe!=null&&R;ue&&(valid(ne,oe)&&(A.zoom=bound(A.minZoom,ease(ne,oe,V,G),A.maxZoom)),_.emit("zoom")),(ee||ue)&&_.emit("viewport");var ce=k.style;if(ce&&ce.length>0&&T){for(var de=0;de<ce.length;de++){var pe=ce[de],_e=pe.name,Ee=pe,ge=k.startStyle[_e],be=L.properties[ge.name],Ae=ease(ge,Ee,V,G,be);L.overrideBypass(_,_e,Ae)}_.emit("style")}}return k.progress=V,V}function valid(_,v){return _==null||v==null?!1:number$1(_)&&number$1(v)?!0:!!(_&&v)}function startAnimation(_,v,S,R){var T=v._private;T.started=!0,T.startTime=S-T.progress*T.duration}function stepAll(_,v){var S=v._private.aniEles,R=[];function T(L,I){var N=L._private,F=N.animation.current,H=N.animation.queue,G=!1;if(F.length===0){var V=H.shift();V&&F.push(V)}for(var j=function(re){for(var ee=re.length-1;ee>=0;ee--){var ne=re[ee];ne()}re.splice(0,re.length)},W=F.length-1;W>=0;W--){var X=F[W],J=X._private;if(J.stopped){F.splice(W,1),J.hooked=!1,J.playing=!1,J.started=!1,j(J.frames);continue}!J.playing&&!J.applying||(J.playing&&J.applying&&(J.applying=!1),J.started||startAnimation(L,X,_),step$1(L,X,_,I),J.applying&&(J.applying=!1),j(J.frames),J.step!=null&&J.step(_),X.completed()&&(F.splice(W,1),J.hooked=!1,J.playing=!1,J.started=!1,j(J.completes)),G=!0)}return!I&&F.length===0&&H.length===0&&R.push(L),G}for(var A=!1,k=0;k<S.length;k++){var q=S[k],M=T(q);A=A||M}var D=T(v,!0);(A||D)&&(S.length>0?v.notify("draw",S):v.notify("draw")),S.unmerge(R),v.emit("step")}var corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function(v){var S=this;S.styleEnabled()&&S._private.aniEles.merge(v)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var v=this;if(v._private.animationsRunning=!0,!v.styleEnabled())return;function S(){v._private.animationsRunning&&requestAnimationFrame$1(function(A){stepAll(A,v),S()})}var R=v.renderer();R&&R.beforeRender?R.beforeRender(function(A,k){stepAll(k,v)},R.beforeRenderPriorities.animations):S()}},emitterOptions={qualifierCompare:function(v,S){return v==null||S==null?v==null&&S==null:v.sameText(S)},eventMatches:function(v,S,R){var T=S.qualifier;return T!=null?v!==R.target&&element(R.target)&&T.matches(R.target):!0},addEventFields:function(v,S){S.cy=v,S.target=v},callbackContext:function(v,S,R){return S.qualifier!=null?R.target:v}},argSelector=function(v){return string$1(v)?new Selector(v):v},elesfn={createEmitter:function(){var v=this._private;return v.emitter||(v.emitter=new Emitter(emitterOptions,this)),this},emitter:function(){return this._private.emitter},on:function(v,S,R){return this.emitter().on(v,argSelector(S),R),this},removeListener:function(v,S,R){return this.emitter().removeListener(v,argSelector(S),R),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(v,S,R){return this.emitter().one(v,argSelector(S),R),this},once:function(v,S,R){return this.emitter().one(v,argSelector(S),R),this},emit:function(v,S){return this.emitter().emit(v,S),this},emitAndNotify:function(v,S){return this.emit(v),this.notify(v,S),this}};define.eventAliasesOn(elesfn);var corefn$7={png:function(v){var S=this._private.renderer;return v=v||{},S.png(v)},jpg:function(v){var S=this._private.renderer;return v=v||{},v.bg=v.bg||"#fff",S.jpg(v)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function(v){var S=this;if(v==null){error("Layout options must be specified to make a layout");return}if(v.name==null){error("A `name` must be specified to make a layout");return}var R=v.name,T=S.extension("layout",R);if(T==null){error("No such layout `"+R+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var A;string$1(v.eles)?A=S.$(v.eles):A=v.eles!=null?v.eles:S.$();var k=new T(extend({},v,{cy:S,eles:A}));return k}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var corefn$5={notify:function(v,S){var R=this._private;if(this.batching()){R.batchNotifications=R.batchNotifications||{};var T=R.batchNotifications[v]=R.batchNotifications[v]||this.collection();S!=null&&T.merge(S);return}if(R.notificationsEnabled){var A=this.renderer();this.destroyed()||!A||A.notify(v,S)}},notifications:function(v){var S=this._private;return v===void 0?S.notificationsEnabled:(S.notificationsEnabled=!!v,this)},noNotifications:function(v){this.notifications(!1),v(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var v=this._private;return v.batchCount==null&&(v.batchCount=0),v.batchCount===0&&(v.batchStyleEles=this.collection(),v.batchNotifications={}),v.batchCount++,this},endBatch:function(){var v=this._private;if(v.batchCount===0)return this;if(v.batchCount--,v.batchCount===0){v.batchStyleEles.updateStyle();var S=this.renderer();Object.keys(v.batchNotifications).forEach(function(R){var T=v.batchNotifications[R];T.empty()?S.notify(R):S.notify(R,T)})}return this},batch:function(v){return this.startBatch(),v(),this.endBatch(),this},batchData:function(v){var S=this;return this.batch(function(){for(var R=Object.keys(v),T=0;T<R.length;T++){var A=R[T],k=v[A],q=S.getElementById(A);q.data(k)}})}},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),corefn$4={renderTo:function(v,S,R,T){var A=this._private.renderer;return A.renderTo(v,S,R,T),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(v){var S=this,R=S.extension("renderer",v.name);if(R==null){error("Can not initialise: No such renderer `".concat(v.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}v.wheelSensitivity!==void 0&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var T=rendererDefaults(v);T.cy=S,S._private.renderer=new R(T),this.notify("init")},destroyRenderer:function(){var v=this;v.notify("destroy");var S=v.container();if(S)for(S._cyreg=null;S.childNodes.length>0;)S.removeChild(S.childNodes[0]);v._private.renderer=null,v.mutableElements().forEach(function(R){var T=R._private;T.rscratch={},T.rstyle={},T.animation.current=[],T.animation.queue=[]})},onRender:function(v){return this.on("render",v)},offRender:function(v){return this.off("render",v)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function(v,S){return string$1(v)?this.$(v):elementOrCollection(v)?v.collection():array(v)?(S||(S={}),new Collection(this,v,S.unique,S.removed)):new Collection(this)},nodes:function(v){var S=this.$(function(R){return R.isNode()});return v?S.filter(v):S},edges:function(v){var S=this.$(function(R){return R.isEdge()});return v?S.filter(v):S},$:function(v){var S=this._private.elements;return v?S.filter(v):S.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$8={},TRUE="t",FALSE="f";styfn$8.apply=function(_){for(var v=this,S=v._private,R=S.cy,T=R.collection(),A=0;A<_.length;A++){var k=_[A],q=v.getContextMeta(k);if(!q.empty){var M=v.getContextStyle(q),D=v.applyContextStyle(q,M,k);k._private.appliedInitStyle?v.updateTransitions(k,D.diffProps):k._private.appliedInitStyle=!0;var L=v.updateStyleHints(k);L&&T.push(k)}}return T};styfn$8.getPropertiesDiff=function(_,v){var S=this,R=S._private.propDiffs=S._private.propDiffs||{},T=_+"-"+v,A=R[T];if(A)return A;for(var k=[],q={},M=0;M<S.length;M++){var D=S[M],L=_[M]===TRUE,I=v[M]===TRUE,N=L!==I,F=D.mappedProperties.length>0;if(N||I&&F){var H=void 0;N&&F||N?H=D.properties:F&&(H=D.mappedProperties);for(var G=0;G<H.length;G++){for(var V=H[G],j=V.name,W=!1,X=M+1;X<S.length;X++){var J=S[X],te=v[X]===TRUE;if(te&&(W=J.properties[V.name]!=null,W))break}!q[j]&&!W&&(q[j]=!0,k.push(j))}}}return R[T]=k,k};styfn$8.getContextMeta=function(_){for(var v=this,S="",R,T=_._private.styleCxtKey||"",A=0;A<v.length;A++){var k=v[A],q=k.selector&&k.selector.matches(_);q?S+=TRUE:S+=FALSE}return R=v.getPropertiesDiff(T,S),_._private.styleCxtKey=S,{key:S,diffPropNames:R,empty:R.length===0}};styfn$8.getContextStyle=function(_){var v=_.key,S=this,R=this._private.contextStyles=this._private.contextStyles||{};if(R[v])return R[v];for(var T={_private:{key:v}},A=0;A<S.length;A++){var k=S[A],q=v[A]===TRUE;if(q)for(var M=0;M<k.properties.length;M++){var D=k.properties[M];T[D.name]=D}}return R[v]=T,T};styfn$8.applyContextStyle=function(_,v,S){for(var R=this,T=_.diffPropNames,A={},k=R.types,q=0;q<T.length;q++){var M=T[q],D=v[M],L=S.pstyle(M);if(!D)if(L)L.bypass?D={name:M,deleteBypassed:!0}:D={name:M,delete:!0};else continue;if(L!==D){if(D.mapped===k.fn&&L!=null&&L.mapping!=null&&L.mapping.value===D.value){var I=L.mapping,N=I.fnValue=D.value(S);if(N===I.prevFnValue)continue}var F=A[M]={prev:L};R.applyParsedProperty(S,D),F.next=S.pstyle(M),F.next&&F.next.bypass&&(F.next=F.next.bypassed)}}return{diffProps:A}};styfn$8.updateStyleHints=function(_){var v=_._private,S=this,R=S.propertyGroupNames,T=S.propertyGroupKeys,A=function(Ie,Le,nt){return S.getPropertiesHash(Ie,Le,nt)},k=v.styleKey;if(_.removed())return!1;var q=v.group==="nodes",M=_._private.style;R=Object.keys(M);for(var D=0;D<T.length;D++){var L=T[D];v.styleKeys[L]=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]}for(var I=function(Ie,Le){return v.styleKeys[Le][0]=hashInt(Ie,v.styleKeys[Le][0])},N=function(Ie,Le){return v.styleKeys[Le][1]=hashIntAlt(Ie,v.styleKeys[Le][1])},F=function(Ie,Le){I(Ie,Le),N(Ie,Le)},H=function(Ie,Le){for(var nt=0;nt<Ie.length;nt++){var lt=Ie.charCodeAt(nt);I(lt,Le),N(lt,Le)}},G=2e9,V=function(Ie){return-128<Ie&&Ie<128&&Math.floor(Ie)!==Ie?G-(Ie*1024|0):Ie},j=0;j<R.length;j++){var W=R[j],X=M[W];if(X!=null){var J=this.properties[W],te=J.type,re=J.groupKey,ee=void 0;J.hashOverride!=null?ee=J.hashOverride(_,X):X.pfValue!=null&&(ee=X.pfValue);var ne=J.enums==null?X.value:null,oe=ee!=null,ue=ne!=null,ce=oe||ue,de=X.units;if(te.number&&ce&&!te.multiple){var pe=oe?ee:ne;F(V(pe),re),!oe&&de!=null&&H(de,re)}else H(X.strValue,re)}}for(var _e=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT],Ee=0;Ee<T.length;Ee++){var ge=T[Ee],be=v.styleKeys[ge];_e[0]=hashInt(be[0],_e[0]),_e[1]=hashIntAlt(be[1],_e[1])}v.styleKey=combineHashes(_e[0],_e[1]);var Ae=v.styleKeys;v.labelDimsKey=combineHashesArray(Ae.labelDimensions);var De=A(_,["label"],Ae.labelDimensions);if(v.labelKey=combineHashesArray(De),v.labelStyleKey=combineHashesArray(hashArrays(Ae.commonLabel,De)),!q){var ve=A(_,["source-label"],Ae.labelDimensions);v.sourceLabelKey=combineHashesArray(ve),v.sourceLabelStyleKey=combineHashesArray(hashArrays(Ae.commonLabel,ve));var le=A(_,["target-label"],Ae.labelDimensions);v.targetLabelKey=combineHashesArray(le),v.targetLabelStyleKey=combineHashesArray(hashArrays(Ae.commonLabel,le))}if(q){var me=v.styleKeys,Te=me.nodeBody,ye=me.nodeBorder,Re=me.nodeOutline,qe=me.backgroundImage,ke=me.compound,ze=me.pie,Ne=me.stripe,Pe=[Te,ye,Re,qe,ke,ze,Ne].filter(function(Me){return Me!=null}).reduce(hashArrays,[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]);v.nodeKey=combineHashesArray(Pe),v.hasPie=ze!=null&&ze[0]!==DEFAULT_HASH_SEED&&ze[1]!==DEFAULT_HASH_SEED_ALT,v.hasStripe=Ne!=null&&Ne[0]!==DEFAULT_HASH_SEED&&Ne[1]!==DEFAULT_HASH_SEED_ALT}return k!==v.styleKey};styfn$8.clearStyleHints=function(_){var v=_._private;v.styleCxtKey="",v.styleKeys={},v.styleKey=null,v.labelKey=null,v.labelStyleKey=null,v.sourceLabelKey=null,v.sourceLabelStyleKey=null,v.targetLabelKey=null,v.targetLabelStyleKey=null,v.nodeKey=null,v.hasPie=null,v.hasStripe=null};styfn$8.applyParsedProperty=function(_,v){var S=this,R=v,T=_._private.style,A,k=S.types,q=S.properties[R.name].type,M=R.bypass,D=T[R.name],L=D&&D.bypass,I=_._private,N="mapping",F=function(Te){return Te==null?null:Te.pfValue!=null?Te.pfValue:Te.value},H=function(){var Te=F(D),ye=F(R);S.checkTriggers(_,R.name,Te,ye)};if(v.name==="curve-style"&&_.isEdge()&&(v.value!=="bezier"&&_.isLoop()||v.value==="haystack"&&(_.source().isParent()||_.target().isParent()))&&(R=v=this.parse(v.name,"bezier",M)),R.delete)return T[R.name]=void 0,H(),!0;if(R.deleteBypassed)return D?D.bypass?(D.bypassed=void 0,H(),!0):!1:(H(),!0);if(R.deleteBypass)return D?D.bypass?(T[R.name]=D.bypassed,H(),!0):!1:(H(),!0);var G=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+_.id()+"` has no mapping for property `"+R.name+"` with data field `"+R.field+"`); try a `["+R.field+"]` selector to limit scope to elements with `"+R.field+"` defined")};switch(R.mapped){case k.mapData:{for(var V=R.field.split("."),j=I.data,W=0;W<V.length&&j;W++){var X=V[W];j=j[X]}if(j==null)return G(),!1;var J;if(number$1(j)){var te=R.fieldMax-R.fieldMin;te===0?J=0:J=(j-R.fieldMin)/te}else return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+R.field+": "+j+"` for `"+_.id()+"` is non-numeric)"),!1;if(J<0?J=0:J>1&&(J=1),q.color){var re=R.valueMin[0],ee=R.valueMax[0],ne=R.valueMin[1],oe=R.valueMax[1],ue=R.valueMin[2],ce=R.valueMax[2],de=R.valueMin[3]==null?1:R.valueMin[3],pe=R.valueMax[3]==null?1:R.valueMax[3],_e=[Math.round(re+(ee-re)*J),Math.round(ne+(oe-ne)*J),Math.round(ue+(ce-ue)*J),Math.round(de+(pe-de)*J)];A={bypass:R.bypass,name:R.name,value:_e,strValue:"rgb("+_e[0]+", "+_e[1]+", "+_e[2]+")"}}else if(q.number){var Ee=R.valueMin+(R.valueMax-R.valueMin)*J;A=this.parse(R.name,Ee,R.bypass,N)}else return!1;if(!A)return G(),!1;A.mapping=R,R=A;break}case k.data:{for(var ge=R.field.split("."),be=I.data,Ae=0;Ae<ge.length&&be;Ae++){var De=ge[Ae];be=be[De]}if(be!=null&&(A=this.parse(R.name,be,R.bypass,N)),!A)return G(),!1;A.mapping=R,R=A;break}case k.fn:{var ve=R.value,le=R.fnValue!=null?R.fnValue:ve(_);if(R.prevFnValue=le,le==null)return warn("Custom function mappers may not return null (i.e. `"+R.name+"` for ele `"+_.id()+"` is null)"),!1;if(A=this.parse(R.name,le,R.bypass,N),!A)return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+R.name+"` for ele `"+_.id()+"` is invalid)"),!1;A.mapping=copy(R),R=A;break}case void 0:break;default:return!1}return M?(L?R.bypassed=D.bypassed:R.bypassed=D,T[R.name]=R):L?D.bypassed=R:T[R.name]=R,H(),!0};styfn$8.cleanElements=function(_,v){for(var S=0;S<_.length;S++){var R=_[S];if(this.clearStyleHints(R),R.dirtyCompoundBoundsCache(),R.dirtyBoundingBoxCache(),!v)R._private.style={};else for(var T=R._private.style,A=Object.keys(T),k=0;k<A.length;k++){var q=A[k],M=T[q];M!=null&&(M.bypass?M.bypassed=null:T[q]=null)}}};styfn$8.update=function(){var _=this._private.cy,v=_.mutableElements();v.updateStyle()};styfn$8.updateTransitions=function(_,v){var S=this,R=_._private,T=_.pstyle("transition-property").value,A=_.pstyle("transition-duration").pfValue,k=_.pstyle("transition-delay").pfValue;if(T.length>0&&A>0){for(var q={},M=!1,D=0;D<T.length;D++){var L=T[D],I=_.pstyle(L),N=v[L];if(N){var F=N.prev,H=F,G=N.next!=null?N.next:I,V=!1,j=void 0,W=1e-6;H&&(number$1(H.pfValue)&&number$1(G.pfValue)?(V=G.pfValue-H.pfValue,j=H.pfValue+W*V):number$1(H.value)&&number$1(G.value)?(V=G.value-H.value,j=H.value+W*V):array(H.value)&&array(G.value)&&(V=H.value[0]!==G.value[0]||H.value[1]!==G.value[1]||H.value[2]!==G.value[2],j=H.strValue),V&&(q[L]=G.strValue,this.applyBypass(_,L,j),M=!0))}}if(!M)return;R.transitioning=!0,new Promise$1(function(X){k>0?_.delayAnimation(k).play().promise().then(X):X()}).then(function(){return _.animation({style:q,duration:A,easing:_.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){S.removeBypasses(_,T),_.emitAndNotify("style"),R.transitioning=!1})}else R.transitioning&&(this.removeBypasses(_,T),_.emitAndNotify("style"),R.transitioning=!1)};styfn$8.checkTrigger=function(_,v,S,R,T,A){var k=this.properties[v],q=T(k);_.removed()||q!=null&&q(S,R,_)&&A(k)};styfn$8.checkZOrderTrigger=function(_,v,S,R){var T=this;this.checkTrigger(_,v,S,R,function(A){return A.triggersZOrder},function(){T._private.cy.notify("zorder",_)})};styfn$8.checkBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBounds},function(T){_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache()})};styfn$8.checkConnectedEdgesBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBoundsOfConnectedEdges},function(T){_.connectedEdges().forEach(function(A){A.dirtyBoundingBoxCache()})})};styfn$8.checkParallelEdgesBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBoundsOfParallelEdges},function(T){_.parallelEdges().forEach(function(A){A.dirtyBoundingBoxCache()})})};styfn$8.checkTriggers=function(_,v,S,R){_.dirtyStyleCache(),this.checkZOrderTrigger(_,v,S,R),this.checkBoundsTrigger(_,v,S,R),this.checkConnectedEdgesBoundsTrigger(_,v,S,R),this.checkParallelEdgesBoundsTrigger(_,v,S,R)};var styfn$7={};styfn$7.applyBypass=function(_,v,S,R){var T=this,A=[],k=!0;if(v==="*"||v==="**"){if(S!==void 0)for(var q=0;q<T.properties.length;q++){var M=T.properties[q],D=M.name,L=this.parse(D,S,!0);L&&A.push(L)}}else if(string$1(v)){var I=this.parse(v,S,!0);I&&A.push(I)}else if(plainObject(v)){var N=v;R=S;for(var F=Object.keys(N),H=0;H<F.length;H++){var G=F[H],V=N[G];if(V===void 0&&(V=N[dash2camel(G)]),V!==void 0){var j=this.parse(G,V,!0);j&&A.push(j)}}}else return!1;if(A.length===0)return!1;for(var W=!1,X=0;X<_.length;X++){for(var J=_[X],te={},re=void 0,ee=0;ee<A.length;ee++){var ne=A[ee];if(R){var oe=J.pstyle(ne.name);re=te[ne.name]={prev:oe}}W=this.applyParsedProperty(J,copy(ne))||W,R&&(re.next=J.pstyle(ne.name))}W&&this.updateStyleHints(J),R&&this.updateTransitions(J,te,k)}return W};styfn$7.overrideBypass=function(_,v,S){v=camel2dash(v);for(var R=0;R<_.length;R++){var T=_[R],A=T._private.style[v],k=this.properties[v].type,q=k.color,M=k.mutiple,D=A?A.pfValue!=null?A.pfValue:A.value:null;!A||!A.bypass?this.applyBypass(T,v,S):(A.value=S,A.pfValue!=null&&(A.pfValue=S),q?A.strValue="rgb("+S.join(",")+")":M?A.strValue=S.join(" "):A.strValue=""+S,this.updateStyleHints(T)),this.checkTriggers(T,v,D,S)}};styfn$7.removeAllBypasses=function(_,v){return this.removeBypasses(_,this.propertyNames,v)};styfn$7.removeBypasses=function(_,v,S){for(var R=!0,T=0;T<_.length;T++){for(var A=_[T],k={},q=0;q<v.length;q++){var M=v[q],D=this.properties[M],L=A.pstyle(D.name);if(!(!L||!L.bypass)){var I="",N=this.parse(M,I,!0),F=k[D.name]={prev:L};this.applyParsedProperty(A,N),F.next=A.pstyle(D.name)}}this.updateStyleHints(A),S&&this.updateTransitions(A,k,R)}};var styfn$6={};styfn$6.getEmSizeInPixels=function(){var _=this.containerCss("font-size");return _!=null?parseFloat(_):1};styfn$6.containerCss=function(_){var v=this._private.cy,S=v.container(),R=v.window();if(R&&S&&R.getComputedStyle)return R.getComputedStyle(S).getPropertyValue(_)};var styfn$5={};styfn$5.getRenderedStyle=function(_,v){return v?this.getStylePropertyValue(_,v,!0):this.getRawStyle(_,!0)};styfn$5.getRawStyle=function(_,v){var S=this;if(_=_[0],_){for(var R={},T=0;T<S.properties.length;T++){var A=S.properties[T],k=S.getStylePropertyValue(_,A.name,v);k!=null&&(R[A.name]=k,R[dash2camel(A.name)]=k)}return R}};styfn$5.getIndexedStyle=function(_,v,S,R){var T=_.pstyle(v)[S][R];return T??_.cy().style().getDefaultProperty(v)[S][0]};styfn$5.getStylePropertyValue=function(_,v,S){var R=this;if(_=_[0],_){var T=R.properties[v];T.alias&&(T=T.pointsTo);var A=T.type,k=_.pstyle(T.name);if(k){var q=k.value,M=k.units,D=k.strValue;if(S&&A.number&&q!=null&&number$1(q)){var L=_.cy().zoom(),I=function(V){return V*L},N=function(V,j){return I(V)+j},F=array(q),H=F?M.every(function(G){return G!=null}):M!=null;return H?F?q.map(function(G,V){return N(G,M[V])}).join(" "):N(q,M):F?q.map(function(G){return string$1(G)?G:""+I(G)}).join(" "):""+I(q)}else if(D!=null)return D}return null}};styfn$5.getAnimationStartStyle=function(_,v){for(var S={},R=0;R<v.length;R++){var T=v[R],A=T.name,k=_.pstyle(A);k!==void 0&&(plainObject(k)?k=this.parse(A,k.strValue):k=this.parse(A,k)),k&&(S[A]=k)}return S};styfn$5.getPropsList=function(_){var v=this,S=[],R=_,T=v.properties;if(R)for(var A=Object.keys(R),k=0;k<A.length;k++){var q=A[k],M=R[q],D=T[q]||T[camel2dash(q)],L=this.parse(D.name,M);L&&S.push(L)}return S};styfn$5.getNonDefaultPropertiesHash=function(_,v,S){var R=S.slice(),T,A,k,q,M,D;for(M=0;M<v.length;M++)if(T=v[M],A=_.pstyle(T,!1),A!=null)if(A.pfValue!=null)R[0]=hashInt(q,R[0]),R[1]=hashIntAlt(q,R[1]);else for(k=A.strValue,D=0;D<k.length;D++)q=k.charCodeAt(D),R[0]=hashInt(q,R[0]),R[1]=hashIntAlt(q,R[1]);return R};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$4={};styfn$4.appendFromJson=function(_){for(var v=this,S=0;S<_.length;S++){var R=_[S],T=R.selector,A=R.style||R.css,k=Object.keys(A);v.selector(T);for(var q=0;q<k.length;q++){var M=k[q],D=A[M];v.css(M,D)}}return v};styfn$4.fromJson=function(_){var v=this;return v.resetToDefault(),v.appendFromJson(_),v};styfn$4.json=function(){for(var _=[],v=this.defaultLength;v<this.length;v++){for(var S=this[v],R=S.selector,T=S.properties,A={},k=0;k<T.length;k++){var q=T[k];A[q.name]=q.strValue}_.push({selector:R?R.toString():"core",style:A})}return _};var styfn$3={};styfn$3.appendFromString=function(_){var v=this,S=this,R=""+_,T,A,k;R=R.replace(/[/][*](\s|.)+?[*][/]/g,"");function q(){R.length>T.length?R=R.substr(T.length):R=""}function M(){A.length>k.length?A=A.substr(k.length):A=""}for(;;){var D=R.match(/^\s*$/);if(D)break;var L=R.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!L){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+R);break}T=L[0];var I=L[1];if(I!=="core"){var N=new Selector(I);if(N.invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+I),q();continue}}var F=L[2],H=!1;A=F;for(var G=[];;){var V=A.match(/^\s*$/);if(V)break;var j=A.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!j){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+F),H=!0;break}k=j[0];var W=j[1],X=j[2],J=v.properties[W];if(!J){warn("Skipping property: Invalid property name in: "+k),M();continue}var te=S.parse(W,X);if(!te){warn("Skipping property: Invalid property definition in: "+k),M();continue}G.push({name:W,val:X}),M()}if(H){q();break}S.selector(I);for(var re=0;re<G.length;re++){var ee=G[re];S.css(ee.name,ee.val)}q()}return S};styfn$3.fromString=function(_){var v=this;return v.resetToDefault(),v.appendFromString(_),v};var styfn$2={};(function(){var _=number$2,v=rgbaNoBackRefs,S=hslaNoBackRefs,R=hex3,T=hex6,A=function(Me){return"^"+Me+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},k=function(Me){var Ie=_+"|\\w+|"+v+"|"+S+"|"+R+"|"+T;return"^"+Me+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+_+")\\s*\\,\\s*("+_+")\\s*,\\s*("+Ie+")\\s*\\,\\s*("+Ie+")\\)$"},q=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:A("data")},layoutData:{mapping:!0,regex:A("layoutData")},scratch:{mapping:!0,regex:A("scratch")},mapData:{mapping:!0,regex:k("mapData")},mapLayoutData:{mapping:!0,regex:k("mapLayoutData")},mapScratch:{mapping:!0,regex:k("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:q,singleRegexMatchValue:!0},urls:{regexes:q,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Me,Ie){switch(Me.length){case 2:return Ie[0]!=="deg"&&Ie[0]!=="rad"&&Ie[1]!=="deg"&&Ie[1]!=="rad";case 1:return string$1(Me[0])||Ie[0]==="deg"||Ie[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+_+")\\s*,\\s*("+_+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+_+")\\s*,\\s*("+_+")\\s*,\\s*("+_+")\\s*,\\s*("+_+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Me){var Ie=Me.length;return Ie===1||Ie===2||Ie===4}}};var M={zeroNonZero:function(Me,Ie){return(Me==null||Ie==null)&&Me!==Ie||Me==0&&Ie!=0?!0:Me!=0&&Ie==0},any:function(Me,Ie){return Me!=Ie},emptyNonEmpty:function(Me,Ie){var Le=emptyString(Me),nt=emptyString(Ie);return Le&&!nt||!Le&&nt}},D=styfn$2.types,L=[{name:"label",type:D.text,triggersBounds:M.any,triggersZOrder:M.emptyNonEmpty},{name:"text-rotation",type:D.textRotation,triggersBounds:M.any},{name:"text-margin-x",type:D.bidirectionalSize,triggersBounds:M.any},{name:"text-margin-y",type:D.bidirectionalSize,triggersBounds:M.any}],I=[{name:"source-label",type:D.text,triggersBounds:M.any},{name:"source-text-rotation",type:D.textRotation,triggersBounds:M.any},{name:"source-text-margin-x",type:D.bidirectionalSize,triggersBounds:M.any},{name:"source-text-margin-y",type:D.bidirectionalSize,triggersBounds:M.any},{name:"source-text-offset",type:D.size,triggersBounds:M.any}],N=[{name:"target-label",type:D.text,triggersBounds:M.any},{name:"target-text-rotation",type:D.textRotation,triggersBounds:M.any},{name:"target-text-margin-x",type:D.bidirectionalSize,triggersBounds:M.any},{name:"target-text-margin-y",type:D.bidirectionalSize,triggersBounds:M.any},{name:"target-text-offset",type:D.size,triggersBounds:M.any}],F=[{name:"font-family",type:D.fontFamily,triggersBounds:M.any},{name:"font-style",type:D.fontStyle,triggersBounds:M.any},{name:"font-weight",type:D.fontWeight,triggersBounds:M.any},{name:"font-size",type:D.size,triggersBounds:M.any},{name:"text-transform",type:D.textTransform,triggersBounds:M.any},{name:"text-wrap",type:D.textWrap,triggersBounds:M.any},{name:"text-overflow-wrap",type:D.textOverflowWrap,triggersBounds:M.any},{name:"text-max-width",type:D.size,triggersBounds:M.any},{name:"text-outline-width",type:D.size,triggersBounds:M.any},{name:"line-height",type:D.positiveNumber,triggersBounds:M.any}],H=[{name:"text-valign",type:D.valign,triggersBounds:M.any},{name:"text-halign",type:D.halign,triggersBounds:M.any},{name:"color",type:D.color},{name:"text-outline-color",type:D.color},{name:"text-outline-opacity",type:D.zeroOneNumber},{name:"text-background-color",type:D.color},{name:"text-background-opacity",type:D.zeroOneNumber},{name:"text-background-padding",type:D.size,triggersBounds:M.any},{name:"text-border-opacity",type:D.zeroOneNumber},{name:"text-border-color",type:D.color},{name:"text-border-width",type:D.size,triggersBounds:M.any},{name:"text-border-style",type:D.borderStyle,triggersBounds:M.any},{name:"text-background-shape",type:D.textBackgroundShape,triggersBounds:M.any},{name:"text-justification",type:D.justification},{name:"box-select-labels",type:D.bool,triggersBounds:M.any}],G=[{name:"events",type:D.bool,triggersZOrder:M.any},{name:"text-events",type:D.bool,triggersZOrder:M.any},{name:"box-selection",type:D.boxSelection,triggersZOrder:M.any}],V=[{name:"display",type:D.display,triggersZOrder:M.any,triggersBounds:M.any,triggersBoundsOfConnectedEdges:M.any,triggersBoundsOfParallelEdges:function(Me,Ie,Le){return Me===Ie?!1:Le.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:D.visibility,triggersZOrder:M.any},{name:"opacity",type:D.zeroOneNumber,triggersZOrder:M.zeroNonZero},{name:"text-opacity",type:D.zeroOneNumber},{name:"min-zoomed-font-size",type:D.size},{name:"z-compound-depth",type:D.zCompoundDepth,triggersZOrder:M.any},{name:"z-index-compare",type:D.zIndexCompare,triggersZOrder:M.any},{name:"z-index",type:D.number,triggersZOrder:M.any}],j=[{name:"overlay-padding",type:D.size,triggersBounds:M.any},{name:"overlay-color",type:D.color},{name:"overlay-opacity",type:D.zeroOneNumber,triggersBounds:M.zeroNonZero},{name:"overlay-shape",type:D.overlayShape,triggersBounds:M.any},{name:"overlay-corner-radius",type:D.cornerRadius}],W=[{name:"underlay-padding",type:D.size,triggersBounds:M.any},{name:"underlay-color",type:D.color},{name:"underlay-opacity",type:D.zeroOneNumber,triggersBounds:M.zeroNonZero},{name:"underlay-shape",type:D.overlayShape,triggersBounds:M.any},{name:"underlay-corner-radius",type:D.cornerRadius}],X=[{name:"transition-property",type:D.propList},{name:"transition-duration",type:D.time},{name:"transition-delay",type:D.time},{name:"transition-timing-function",type:D.easing}],J=function(Me,Ie){return Ie.value==="label"?-Me.poolIndex():Ie.pfValue},te=[{name:"height",type:D.nodeSize,triggersBounds:M.any,hashOverride:J},{name:"width",type:D.nodeSize,triggersBounds:M.any,hashOverride:J},{name:"shape",type:D.nodeShape,triggersBounds:M.any},{name:"shape-polygon-points",type:D.polygonPointList,triggersBounds:M.any},{name:"corner-radius",type:D.cornerRadius},{name:"background-color",type:D.color},{name:"background-fill",type:D.fill},{name:"background-opacity",type:D.zeroOneNumber},{name:"background-blacken",type:D.nOneOneNumber},{name:"background-gradient-stop-colors",type:D.colors},{name:"background-gradient-stop-positions",type:D.percentages},{name:"background-gradient-direction",type:D.gradientDirection},{name:"padding",type:D.sizeMaybePercent,triggersBounds:M.any},{name:"padding-relative-to",type:D.paddingRelativeTo,triggersBounds:M.any},{name:"bounds-expansion",type:D.boundsExpansion,triggersBounds:M.any}],re=[{name:"border-color",type:D.color},{name:"border-opacity",type:D.zeroOneNumber},{name:"border-width",type:D.size,triggersBounds:M.any},{name:"border-style",type:D.borderStyle},{name:"border-cap",type:D.lineCap},{name:"border-join",type:D.lineJoin},{name:"border-dash-pattern",type:D.numbers},{name:"border-dash-offset",type:D.number},{name:"border-position",type:D.linePosition}],ee=[{name:"outline-color",type:D.color},{name:"outline-opacity",type:D.zeroOneNumber},{name:"outline-width",type:D.size,triggersBounds:M.any},{name:"outline-style",type:D.borderStyle},{name:"outline-offset",type:D.size,triggersBounds:M.any}],ne=[{name:"background-image",type:D.urls},{name:"background-image-crossorigin",type:D.bgCrossOrigin},{name:"background-image-opacity",type:D.zeroOneNumbers},{name:"background-image-containment",type:D.bgContainment},{name:"background-image-smoothing",type:D.bools},{name:"background-position-x",type:D.bgPos},{name:"background-position-y",type:D.bgPos},{name:"background-width-relative-to",type:D.bgRelativeTo},{name:"background-height-relative-to",type:D.bgRelativeTo},{name:"background-repeat",type:D.bgRepeat},{name:"background-fit",type:D.bgFit},{name:"background-clip",type:D.bgClip},{name:"background-width",type:D.bgWH},{name:"background-height",type:D.bgWH},{name:"background-offset-x",type:D.bgPos},{name:"background-offset-y",type:D.bgPos}],oe=[{name:"position",type:D.position,triggersBounds:M.any},{name:"compound-sizing-wrt-labels",type:D.compoundIncludeLabels,triggersBounds:M.any},{name:"min-width",type:D.size,triggersBounds:M.any},{name:"min-width-bias-left",type:D.sizeMaybePercent,triggersBounds:M.any},{name:"min-width-bias-right",type:D.sizeMaybePercent,triggersBounds:M.any},{name:"min-height",type:D.size,triggersBounds:M.any},{name:"min-height-bias-top",type:D.sizeMaybePercent,triggersBounds:M.any},{name:"min-height-bias-bottom",type:D.sizeMaybePercent,triggersBounds:M.any}],ue=[{name:"line-style",type:D.lineStyle},{name:"line-color",type:D.color},{name:"line-fill",type:D.fill},{name:"line-cap",type:D.lineCap},{name:"line-opacity",type:D.zeroOneNumber},{name:"line-dash-pattern",type:D.numbers},{name:"line-dash-offset",type:D.number},{name:"line-outline-width",type:D.size},{name:"line-outline-color",type:D.color},{name:"line-gradient-stop-colors",type:D.colors},{name:"line-gradient-stop-positions",type:D.percentages},{name:"curve-style",type:D.curveStyle,triggersBounds:M.any,triggersBoundsOfParallelEdges:function(Me,Ie){return Me===Ie?!1:Me==="bezier"||Ie==="bezier"}},{name:"haystack-radius",type:D.zeroOneNumber,triggersBounds:M.any},{name:"source-endpoint",type:D.edgeEndpoint,triggersBounds:M.any},{name:"target-endpoint",type:D.edgeEndpoint,triggersBounds:M.any},{name:"control-point-step-size",type:D.size,triggersBounds:M.any},{name:"control-point-distances",type:D.bidirectionalSizes,triggersBounds:M.any},{name:"control-point-weights",type:D.numbers,triggersBounds:M.any},{name:"segment-distances",type:D.bidirectionalSizes,triggersBounds:M.any},{name:"segment-weights",type:D.numbers,triggersBounds:M.any},{name:"segment-radii",type:D.numbers,triggersBounds:M.any},{name:"radius-type",type:D.radiusType,triggersBounds:M.any},{name:"taxi-turn",type:D.bidirectionalSizeMaybePercent,triggersBounds:M.any},{name:"taxi-turn-min-distance",type:D.size,triggersBounds:M.any},{name:"taxi-direction",type:D.axisDirection,triggersBounds:M.any},{name:"taxi-radius",type:D.number,triggersBounds:M.any},{name:"edge-distances",type:D.edgeDistances,triggersBounds:M.any},{name:"arrow-scale",type:D.positiveNumber,triggersBounds:M.any},{name:"loop-direction",type:D.angle,triggersBounds:M.any},{name:"loop-sweep",type:D.angle,triggersBounds:M.any},{name:"source-distance-from-node",type:D.size,triggersBounds:M.any},{name:"target-distance-from-node",type:D.size,triggersBounds:M.any}],ce=[{name:"ghost",type:D.bool,triggersBounds:M.any},{name:"ghost-offset-x",type:D.bidirectionalSize,triggersBounds:M.any},{name:"ghost-offset-y",type:D.bidirectionalSize,triggersBounds:M.any},{name:"ghost-opacity",type:D.zeroOneNumber}],de=[{name:"selection-box-color",type:D.color},{name:"selection-box-opacity",type:D.zeroOneNumber},{name:"selection-box-border-color",type:D.color},{name:"selection-box-border-width",type:D.size},{name:"active-bg-color",type:D.color},{name:"active-bg-opacity",type:D.zeroOneNumber},{name:"active-bg-size",type:D.size},{name:"outside-texture-bg-color",type:D.color},{name:"outside-texture-bg-opacity",type:D.zeroOneNumber}],pe=[];styfn$2.pieBackgroundN=16,pe.push({name:"pie-size",type:D.sizeMaybePercent}),pe.push({name:"pie-hole",type:D.sizeMaybePercent}),pe.push({name:"pie-start-angle",type:D.angle});for(var _e=1;_e<=styfn$2.pieBackgroundN;_e++)pe.push({name:"pie-"+_e+"-background-color",type:D.color}),pe.push({name:"pie-"+_e+"-background-size",type:D.percent}),pe.push({name:"pie-"+_e+"-background-opacity",type:D.zeroOneNumber});var Ee=[];styfn$2.stripeBackgroundN=16,Ee.push({name:"stripe-size",type:D.sizeMaybePercent}),Ee.push({name:"stripe-direction",type:D.axisDirectionPrimary});for(var ge=1;ge<=styfn$2.stripeBackgroundN;ge++)Ee.push({name:"stripe-"+ge+"-background-color",type:D.color}),Ee.push({name:"stripe-"+ge+"-background-size",type:D.percent}),Ee.push({name:"stripe-"+ge+"-background-opacity",type:D.zeroOneNumber});var be=[],Ae=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:D.arrowShape,triggersBounds:M.any},{name:"arrow-color",type:D.color},{name:"arrow-fill",type:D.arrowFill},{name:"arrow-width",type:D.arrowWidth}].forEach(function(Pe){Ae.forEach(function(Me){var Ie=Me+"-"+Pe.name,Le=Pe.type,nt=Pe.triggersBounds;be.push({name:Ie,type:Le,triggersBounds:nt})})},{});var De=styfn$2.properties=[].concat(G,X,V,j,W,ce,H,F,L,I,N,te,re,ee,ne,pe,Ee,oe,ue,be,de),ve=styfn$2.propertyGroups={behavior:G,transition:X,visibility:V,overlay:j,underlay:W,ghost:ce,commonLabel:H,labelDimensions:F,mainLabel:L,sourceLabel:I,targetLabel:N,nodeBody:te,nodeBorder:re,nodeOutline:ee,backgroundImage:ne,pie:pe,stripe:Ee,compound:oe,edgeLine:ue,edgeArrow:be,core:de},le=styfn$2.propertyGroupNames={},me=styfn$2.propertyGroupKeys=Object.keys(ve);me.forEach(function(Pe){le[Pe]=ve[Pe].map(function(Me){return Me.name}),ve[Pe].forEach(function(Me){return Me.groupKey=Pe})});var Te=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=De.map(function(Pe){return Pe.name});for(var ye=0;ye<De.length;ye++){var Re=De[ye];De[Re.name]=Re}for(var qe=0;qe<Te.length;qe++){var ke=Te[qe],ze=De[ke.pointsTo],Ne={name:ke.name,alias:!0,pointsTo:ze};De.push(Ne),De[ke.name]=Ne}})();styfn$2.getDefaultProperty=function(_){return this.getDefaultProperties()[_]};styfn$2.getDefaultProperties=function(){var _=this._private;if(_.defaultProperties!=null)return _.defaultProperties;for(var v=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(M,D){for(var L=1;L<=styfn$2.pieBackgroundN;L++){var I=D.name.replace("{{i}}",L),N=D.value;M[I]=N}return M},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(M,D){for(var L=1;L<=styfn$2.stripeBackgroundN;L++){var I=D.name.replace("{{i}}",L),N=D.value;M[I]=N}return M},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(M,D){return styfn$2.arrowPrefixes.forEach(function(L){var I=L+"-"+D.name,N=D.value;M[I]=N}),M},{})),S={},R=0;R<this.properties.length;R++){var T=this.properties[R];if(!T.pointsTo){var A=T.name,k=v[A],q=this.parse(A,k);S[A]=q}}return _.defaultProperties=S,_.defaultProperties};styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$1={};styfn$1.parse=function(_,v,S,R){var T=this;if(fn$6(v))return T.parseImplWarn(_,v,S,R);var A=R==="mapping"||R===!0||R===!1||R==null?"dontcare":R,k=S?"t":"f",q=""+v,M=hashStrings(_,q,k,A),D=T.propCache=T.propCache||[],L;return(L=D[M])||(L=D[M]=T.parseImplWarn(_,v,S,R)),(S||R==="mapping")&&(L=copy(L),L&&(L.value=copy(L.value))),L};styfn$1.parseImplWarn=function(_,v,S,R){var T=this.parseImpl(_,v,S,R);return!T&&v!=null&&warn("The style property `".concat(_,": ").concat(v,"` is invalid")),T&&(T.name==="width"||T.name==="height")&&v==="label"&&warn("The style value of `label` is deprecated for `"+T.name+"`"),T};styfn$1.parseImpl=function(_,v,S,R){var T=this;_=camel2dash(_);var A=T.properties[_],k=v,q=T.types;if(!A||v===void 0)return null;A.alias&&(A=A.pointsTo,_=A.name);var M=string$1(v);M&&(v=v.trim());var D=A.type;if(!D)return null;if(S&&(v===""||v===null))return{name:_,value:v,bypass:!0,deleteBypass:!0};if(fn$6(v))return{name:_,value:v,strValue:"fn",mapped:q.fn,bypass:S};var L,I;if(!(!M||R||v.length<7||v[1]!=="a")){if(v.length>=7&&v[0]==="d"&&(L=new RegExp(q.data.regex).exec(v))){if(S)return!1;var N=q.data;return{name:_,value:L,strValue:""+v,mapped:N,field:L[1],bypass:S}}else if(v.length>=10&&v[0]==="m"&&(I=new RegExp(q.mapData.regex).exec(v))){if(S||D.multiple)return!1;var F=q.mapData;if(!(D.color||D.number))return!1;var H=this.parse(_,I[4]);if(!H||H.mapped)return!1;var G=this.parse(_,I[5]);if(!G||G.mapped)return!1;if(H.pfValue===G.pfValue||H.strValue===G.strValue)return warn("`"+_+": "+v+"` is not a valid mapper because the output range is zero; converting to `"+_+": "+H.strValue+"`"),this.parse(_,H.strValue);if(D.color){var V=H.value,j=G.value,W=V[0]===j[0]&&V[1]===j[1]&&V[2]===j[2]&&(V[3]===j[3]||(V[3]==null||V[3]===1)&&(j[3]==null||j[3]===1));if(W)return!1}return{name:_,value:I,strValue:""+v,mapped:F,field:I[1],fieldMin:parseFloat(I[2]),fieldMax:parseFloat(I[3]),valueMin:H.value,valueMax:G.value,bypass:S}}}if(D.multiple&&R!=="multiple"){var X;if(M?X=v.split(/\s+/):array(v)?X=v:X=[v],D.evenMultiple&&X.length%2!==0)return null;for(var J=[],te=[],re=[],ee="",ne=!1,oe=0;oe<X.length;oe++){var ue=T.parse(_,X[oe],S,"multiple");ne=ne||string$1(ue.value),J.push(ue.value),re.push(ue.pfValue!=null?ue.pfValue:ue.value),te.push(ue.units),ee+=(oe>0?" ":"")+ue.strValue}return D.validate&&!D.validate(J,te)?null:D.singleEnum&&ne?J.length===1&&string$1(J[0])?{name:_,value:J[0],strValue:J[0],bypass:S}:null:{name:_,value:J,pfValue:re,strValue:ee,bypass:S,units:te}}var ce=function(){for(var Ne=0;Ne<D.enums.length;Ne++){var Pe=D.enums[Ne];if(Pe===v)return{name:_,value:v,strValue:""+v,bypass:S}}return null};if(D.number){var de,pe="px";if(D.units&&(de=D.units),D.implicitUnits&&(pe=D.implicitUnits),!D.unitless)if(M){var _e="px|em"+(D.allowPercent?"|\\%":"");de&&(_e=de);var Ee=v.match("^("+number$2+")("+_e+")?$");Ee&&(v=Ee[1],de=Ee[2]||pe)}else(!de||D.implicitUnits)&&(de=pe);if(v=parseFloat(v),isNaN(v)&&D.enums===void 0)return null;if(isNaN(v)&&D.enums!==void 0)return v=k,ce();if(D.integer&&!integer(v)||D.min!==void 0&&(v<D.min||D.strictMin&&v===D.min)||D.max!==void 0&&(v>D.max||D.strictMax&&v===D.max))return null;var ge={name:_,value:v,strValue:""+v+(de||""),units:de,bypass:S};return D.unitless||de!=="px"&&de!=="em"?ge.pfValue=v:ge.pfValue=de==="px"||!de?v:this.getEmSizeInPixels()*v,(de==="ms"||de==="s")&&(ge.pfValue=de==="ms"?v:1e3*v),(de==="deg"||de==="rad")&&(ge.pfValue=de==="rad"?v:deg2rad(v)),de==="%"&&(ge.pfValue=v/100),ge}else if(D.propList){var be=[],Ae=""+v;if(Ae!=="none"){for(var De=Ae.split(/\s*,\s*|\s+/),ve=0;ve<De.length;ve++){var le=De[ve].trim();T.properties[le]?be.push(le):warn("`"+le+"` is not a valid property name")}if(be.length===0)return null}return{name:_,value:be,strValue:be.length===0?"none":be.join(" "),bypass:S}}else if(D.color){var me=color2tuple(v);return me?{name:_,value:me,pfValue:me,strValue:"rgb("+me[0]+","+me[1]+","+me[2]+")",bypass:S}:null}else if(D.regex||D.regexes){if(D.enums){var Te=ce();if(Te)return Te}for(var ye=D.regexes?D.regexes:[D.regex],Re=0;Re<ye.length;Re++){var qe=new RegExp(ye[Re]),ke=qe.exec(v);if(ke)return{name:_,value:D.singleRegexMatchValue?ke[1]:ke,strValue:""+v,bypass:S}}return null}else return D.string?{name:_,value:""+v,strValue:""+v,bypass:S}:D.enums?ce():null};var _Style=function(v){if(!(this instanceof _Style))return new _Style(v);if(!core(v)){error("A style must have a core reference");return}this._private={cy:v,coreStyle:{}},this.length=0,this.resetToDefault()},styfn=_Style.prototype;styfn.instanceString=function(){return"style"};styfn.clear=function(){for(var _=this._private,v=_.cy,S=v.elements(),R=0;R<this.length;R++)this[R]=void 0;return this.length=0,_.contextStyles={},_.propDiffs={},this.cleanElements(S,!0),S.forEach(function(T){var A=T[0]._private;A.styleDirty=!0,A.appliedInitStyle=!1}),this};styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};styfn.core=function(_){return this._private.coreStyle[_]||this.getDefaultProperty(_)};styfn.selector=function(_){var v=_==="core"?null:new Selector(_),S=this.length++;return this[S]={selector:v,properties:[],mappedProperties:[],index:S},this};styfn.css=function(){var _=this,v=arguments;if(v.length===1)for(var S=v[0],R=0;R<_.properties.length;R++){var T=_.properties[R],A=S[T.name];A===void 0&&(A=S[dash2camel(T.name)]),A!==void 0&&this.cssRule(T.name,A)}else v.length===2&&this.cssRule(v[0],v[1]);return this};styfn.style=styfn.css;styfn.cssRule=function(_,v){var S=this.parse(_,v);if(S){var R=this.length-1;this[R].properties.push(S),this[R].properties[S.name]=S,S.name.match(/pie-(\d+)-background-size/)&&S.value&&(this._private.hasPie=!0),S.name.match(/stripe-(\d+)-background-size/)&&S.value&&(this._private.hasStripe=!0),S.mapped&&this[R].mappedProperties.push(S);var T=!this[R].selector;T&&(this._private.coreStyle[S.name]=S)}return this};styfn.append=function(_){return stylesheet(_)?_.appendToStyle(this):array(_)?this.appendFromJson(_):string$1(_)&&this.appendFromString(_),this};_Style.fromJson=function(_,v){var S=new _Style(_);return S.fromJson(v),S};_Style.fromString=function(_,v){return new _Style(_).fromString(v)};[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach(function(_){extend(styfn,_)});_Style.types=styfn.types;_Style.properties=styfn.properties;_Style.propertyGroups=styfn.propertyGroups;_Style.propertyGroupNames=styfn.propertyGroupNames;_Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$2={style:function(v){if(v){var S=this.setStyle(v);S.update()}return this._private.style},setStyle:function(v){var S=this._private;return stylesheet(v)?S.style=v.generateStyle(this):array(v)?S.style=_Style.fromJson(this,v):string$1(v)?S.style=_Style.fromString(this,v):S.style=_Style(this),S.style},updateStyle:function(){this.mutableElements().updateStyle()}},defaultSelectionType="single",corefn$1={autolock:function(v){if(v!==void 0)this._private.autolock=!!v;else return this._private.autolock;return this},autoungrabify:function(v){if(v!==void 0)this._private.autoungrabify=!!v;else return this._private.autoungrabify;return this},autounselectify:function(v){if(v!==void 0)this._private.autounselectify=!!v;else return this._private.autounselectify;return this},selectionType:function(v){var S=this._private;if(S.selectionType==null&&(S.selectionType=defaultSelectionType),v!==void 0)(v==="additive"||v==="single")&&(S.selectionType=v);else return S.selectionType;return this},panningEnabled:function(v){if(v!==void 0)this._private.panningEnabled=!!v;else return this._private.panningEnabled;return this},userPanningEnabled:function(v){if(v!==void 0)this._private.userPanningEnabled=!!v;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(v){if(v!==void 0)this._private.zoomingEnabled=!!v;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(v){if(v!==void 0)this._private.userZoomingEnabled=!!v;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(v){if(v!==void 0)this._private.boxSelectionEnabled=!!v;else return this._private.boxSelectionEnabled;return this},pan:function(){var v=arguments,S=this._private.pan,R,T,A,k,q;switch(v.length){case 0:return S;case 1:if(string$1(v[0]))return R=v[0],S[R];if(plainObject(v[0])){if(!this._private.panningEnabled)return this;A=v[0],k=A.x,q=A.y,number$1(k)&&(S.x=k),number$1(q)&&(S.y=q),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;R=v[0],T=v[1],(R==="x"||R==="y")&&number$1(T)&&(S[R]=T),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(v,S){var R=arguments,T=this._private.pan,A,k,q,M,D;if(!this._private.panningEnabled)return this;switch(R.length){case 1:plainObject(v)&&(q=R[0],M=q.x,D=q.y,number$1(M)&&(T.x+=M),number$1(D)&&(T.y+=D),this.emit("pan viewport"));break;case 2:A=v,k=S,(A==="x"||A==="y")&&number$1(k)&&(T[A]+=k),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(v,S){var R=this.getFitViewport(v,S);if(R){var T=this._private;T.zoom=R.zoom,T.pan=R.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(v,S){if(number$1(v)&&S===void 0&&(S=v,v=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var R;if(string$1(v)){var T=v;v=this.$(T)}else if(boundingBox(v)){var A=v;R={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2},R.w=R.x2-R.x1,R.h=R.y2-R.y1}else elementOrCollection(v)||(v=this.mutableElements());if(!(elementOrCollection(v)&&v.empty())){R=R||v.boundingBox();var k=this.width(),q=this.height(),M;if(S=number$1(S)?S:0,!isNaN(k)&&!isNaN(q)&&k>0&&q>0&&!isNaN(R.w)&&!isNaN(R.h)&&R.w>0&&R.h>0){M=Math.min((k-2*S)/R.w,(q-2*S)/R.h),M=M>this._private.maxZoom?this._private.maxZoom:M,M=M<this._private.minZoom?this._private.minZoom:M;var D={x:(k-M*(R.x1+R.x2))/2,y:(q-M*(R.y1+R.y2))/2};return{zoom:M,pan:D}}}}},zoomRange:function(v,S){var R=this._private;if(S==null){var T=v;v=T.min,S=T.max}return number$1(v)&&number$1(S)&&v<=S?(R.minZoom=v,R.maxZoom=S):number$1(v)&&S===void 0&&v<=R.maxZoom?R.minZoom=v:number$1(S)&&v===void 0&&S>=R.minZoom&&(R.maxZoom=S),this},minZoom:function(v){return v===void 0?this._private.minZoom:this.zoomRange({min:v})},maxZoom:function(v){return v===void 0?this._private.maxZoom:this.zoomRange({max:v})},getZoomedViewport:function(v){var S=this._private,R=S.pan,T=S.zoom,A,k,q=!1;if(S.zoomingEnabled||(q=!0),number$1(v)?k=v:plainObject(v)&&(k=v.level,v.position!=null?A=modelToRenderedPosition$1(v.position,T,R):v.renderedPosition!=null&&(A=v.renderedPosition),A!=null&&!S.panningEnabled&&(q=!0)),k=k>S.maxZoom?S.maxZoom:k,k=k<S.minZoom?S.minZoom:k,q||!number$1(k)||k===T||A!=null&&(!number$1(A.x)||!number$1(A.y)))return null;if(A!=null){var M=R,D=T,L=k,I={x:-L/D*(A.x-M.x)+A.x,y:-L/D*(A.y-M.y)+A.y};return{zoomed:!0,panned:!0,zoom:L,pan:I}}else return{zoomed:!0,panned:!1,zoom:k,pan:R}},zoom:function(v){if(v===void 0)return this._private.zoom;var S=this.getZoomedViewport(v),R=this._private;return S==null||!S.zoomed?this:(R.zoom=S.zoom,S.panned&&(R.pan.x=S.pan.x,R.pan.y=S.pan.y),this.emit("zoom"+(S.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(v){var S=this._private,R=!0,T=!0,A=[],k=!1,q=!1;if(!v)return this;if(number$1(v.zoom)||(R=!1),plainObject(v.pan)||(T=!1),!R&&!T)return this;if(R){var M=v.zoom;M<S.minZoom||M>S.maxZoom||!S.zoomingEnabled?k=!0:(S.zoom=M,A.push("zoom"))}if(T&&(!k||!v.cancelOnFailedZoom)&&S.panningEnabled){var D=v.pan;number$1(D.x)&&(S.pan.x=D.x,q=!1),number$1(D.y)&&(S.pan.y=D.y,q=!1),q||A.push("pan")}return A.length>0&&(A.push("viewport"),this.emit(A.join(" ")),this.notify("viewport")),this},center:function(v){var S=this.getCenterPan(v);return S&&(this._private.pan=S,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(v,S){if(this._private.panningEnabled){if(string$1(v)){var R=v;v=this.mutableElements().filter(R)}else elementOrCollection(v)||(v=this.mutableElements());if(v.length!==0){var T=v.boundingBox(),A=this.width(),k=this.height();S=S===void 0?this._private.zoom:S;var q={x:(A-S*(T.x1+T.x2))/2,y:(k-S*(T.y1+T.y2))/2};return q}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var v=this._private,S=v.container,R=this;return v.sizeCache=v.sizeCache||(S?(function(){var T=R.window().getComputedStyle(S),A=function(q){return parseFloat(T.getPropertyValue(q))};return{width:S.clientWidth-A("padding-left")-A("padding-right"),height:S.clientHeight-A("padding-top")-A("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var v=this._private.pan,S=this._private.zoom,R=this.renderedExtent(),T={x1:(R.x1-v.x)/S,x2:(R.x2-v.x)/S,y1:(R.y1-v.y)/S,y2:(R.y2-v.y)/S};return T.w=T.x2-T.x1,T.h=T.y2-T.y1,T},renderedExtent:function(){var v=this.width(),S=this.height();return{x1:0,y1:0,x2:v,y2:S,w:v,h:S}},multiClickDebounceTime:function(v){if(v)this._private.multiClickDebounceTime=v;else return this._private.multiClickDebounceTime;return this}};corefn$1.centre=corefn$1.center;corefn$1.autolockNodes=corefn$1.autolock;corefn$1.autoungrabifyNodes=corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data;fn.removeAttr=fn.removeData;var Core=function(v){var S=this;v=extend({},v);var R=v.container;R&&!htmlElement(R)&&htmlElement(R[0])&&(R=R[0]);var T=R?R._cyreg:null;T=T||{},T&&T.cy&&(T.cy.destroy(),T={});var A=T.readies=T.readies||[];R&&(R._cyreg=T),T.cy=S;var k=_window!==void 0&&R!==void 0&&!v.headless,q=v;q.layout=extend({name:k?"grid":"null"},q.layout),q.renderer=extend({name:k?"canvas":"null"},q.renderer);var M=function(H,G,V){return G!==void 0?G:V!==void 0?V:H},D=this._private={container:R,ready:!1,options:q,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:q.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:M(!0,q.zoomingEnabled),userZoomingEnabled:M(!0,q.userZoomingEnabled),panningEnabled:M(!0,q.panningEnabled),userPanningEnabled:M(!0,q.userPanningEnabled),boxSelectionEnabled:M(!0,q.boxSelectionEnabled),autolock:M(!1,q.autolock,q.autolockNodes),autoungrabify:M(!1,q.autoungrabify,q.autoungrabifyNodes),autounselectify:M(!1,q.autounselectify),styleEnabled:q.styleEnabled===void 0?k:q.styleEnabled,zoom:number$1(q.zoom)?q.zoom:1,pan:{x:plainObject(q.pan)&&number$1(q.pan.x)?q.pan.x:0,y:plainObject(q.pan)&&number$1(q.pan.y)?q.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:M(250,q.multiClickDebounceTime)};this.createEmitter(),this.selectionType(q.selectionType),this.zoomRange({min:q.minZoom,max:q.maxZoom});var L=function(H,G){var V=H.some(promise);if(V)return Promise$1.all(H).then(G);G(H)};D.styleEnabled&&S.setStyle([]);var I=extend({},q,q.renderer);S.initRenderer(I);var N=function(H,G,V){S.notifications(!1);var j=S.mutableElements();j.length>0&&j.remove(),H!=null&&(plainObject(H)||array(H))&&S.add(H),S.one("layoutready",function(X){S.notifications(!0),S.emit(X),S.one("load",G),S.emitAndNotify("load")}).one("layoutstop",function(){S.one("done",V),S.emit("done")});var W=extend({},S._private.options.layout);W.eles=S.elements(),S.layout(W).run()};L([q.style,q.elements],function(F){var H=F[0],G=F[1];D.styleEnabled&&S.style().append(H),N(G,function(){S.startAnimationLoop(),D.ready=!0,fn$6(q.ready)&&S.on("ready",q.ready);for(var V=0;V<A.length;V++){var j=A[V];S.on("ready",j)}T&&(T.readies=[]),S.emit("ready")},q.done)})},corefn=Core.prototype;extend(corefn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(v){return this.isReady()?this.emitter().emit("ready",[],v):this.on("ready",v),this},destroy:function(){var v=this;if(!v.destroyed())return v.stopAnimationLoop(),v.destroyRenderer(),this.emit("destroy"),v._private.destroyed=!0,v},hasElementWithId:function(v){return this._private.elements.hasElementWithId(v)},getElementById:function(v){return this._private.elements.getElementById(v)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(v){return this._private.elements.merge(v),this},removeFromPool:function(v){return this._private.elements.unmerge(v),this},container:function(){return this._private.container||null},window:function(){var v=this._private.container;if(v==null)return _window;var S=this._private.container.ownerDocument;return S===void 0||S==null?_window:S.defaultView||_window},mount:function(v){if(v!=null){var S=this,R=S._private,T=R.options;return!htmlElement(v)&&htmlElement(v[0])&&(v=v[0]),S.stopAnimationLoop(),S.destroyRenderer(),R.container=v,R.styleEnabled=!0,S.invalidateSize(),S.initRenderer(extend({},T,T.renderer,{name:T.renderer.name==="null"?"canvas":T.renderer.name})),S.startAnimationLoop(),S.style(T.style),S.emit("mount"),S}},unmount:function(){var v=this;return v.stopAnimationLoop(),v.destroyRenderer(),v.initRenderer({name:"null"}),v.emit("unmount"),v},options:function(){return copy(this._private.options)},json:function(v){var S=this,R=S._private,T=S.mutableElements(),A=function(J){return S.getElementById(J.id())};if(plainObject(v)){if(S.startBatch(),v.elements){var k={},q=function(J,te){for(var re=[],ee=[],ne=0;ne<J.length;ne++){var oe=J[ne];if(!oe.data.id){warn("cy.json() cannot handle elements without an ID attribute");continue}var ue=""+oe.data.id,ce=S.getElementById(ue);k[ue]=!0,ce.length!==0?ee.push({ele:ce,json:oe}):(te&&(oe.group=te),re.push(oe))}S.add(re);for(var de=0;de<ee.length;de++){var pe=ee[de],_e=pe.ele,Ee=pe.json;_e.json(Ee)}};if(array(v.elements))q(v.elements);else for(var M=["nodes","edges"],D=0;D<M.length;D++){var L=M[D],I=v.elements[L];array(I)&&q(I,L)}var N=S.collection();T.filter(function(X){return!k[X.id()]}).forEach(function(X){X.isParent()?N.merge(X):X.remove()}),N.forEach(function(X){return X.children().move({parent:null})}),N.forEach(function(X){return A(X).remove()})}v.style&&S.style(v.style),v.zoom!=null&&v.zoom!==R.zoom&&S.zoom(v.zoom),v.pan&&(v.pan.x!==R.pan.x||v.pan.y!==R.pan.y)&&S.pan(v.pan),v.data&&S.data(v.data);for(var F=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],H=0;H<F.length;H++){var G=F[H];v[G]!=null&&S[G](v[G])}return S.endBatch(),this}else{var V=!!v,j={};V?j.elements=this.elements().map(function(X){return X.json()}):(j.elements={},T.forEach(function(X){var J=X.group();j.elements[J]||(j.elements[J]=[]),j.elements[J].push(X.json())})),this._private.styleEnabled&&(j.style=S.style().json()),j.data=copy(S.data());var W=R.options;return j.zoomingEnabled=R.zoomingEnabled,j.userZoomingEnabled=R.userZoomingEnabled,j.zoom=R.zoom,j.minZoom=R.minZoom,j.maxZoom=R.maxZoom,j.panningEnabled=R.panningEnabled,j.userPanningEnabled=R.userPanningEnabled,j.pan=copy(R.pan),j.boxSelectionEnabled=R.boxSelectionEnabled,j.renderer=copy(W.renderer),j.hideEdgesOnViewport=W.hideEdgesOnViewport,j.textureOnViewport=W.textureOnViewport,j.wheelSensitivity=W.wheelSensitivity,j.motionBlur=W.motionBlur,j.multiClickDebounceTime=W.multiClickDebounceTime,j}}});corefn.$id=corefn.getElementById;[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn].forEach(function(_){extend(corefn,_)});var defaults$7={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function(v){return v.scratch("breadthfirst")},setInfo=function(v,S){return v.scratch("breadthfirst",S)};function BreadthFirstLayout(_){this.options=extend({},defaults$7,deprecatedOptionDefaults,_)}BreadthFirstLayout.prototype.run=function(){var _=this.options,v=_.cy,S=_.eles,R=S.nodes().filter(function(wt){return wt.isChildless()}),T=S,A=_.directed,k=_.acyclic||_.maximal||_.maximalAdjustments>0,q=!!_.boundingBox,M=makeBoundingBox(q?_.boundingBox:structuredClone(v.extent())),D;if(elementOrCollection(_.roots))D=_.roots;else if(array(_.roots)){for(var L=[],I=0;I<_.roots.length;I++){var N=_.roots[I],F=v.getElementById(N);L.push(F)}D=v.collection(L)}else if(string$1(_.roots))D=v.$(_.roots);else if(A)D=R.roots();else{var H=S.components();D=v.collection();for(var G=function(){var st=H[V],St=st.maxDegree(!1),gt=st.filter(function(Et){return Et.degree(!1)===St});D=D.add(gt)},V=0;V<H.length;V++)G()}var j=[],W={},X=function(st,St){j[St]==null&&(j[St]=[]);var gt=j[St].length;j[St].push(st),setInfo(st,{index:gt,depth:St})},J=function(st,St){var gt=getInfo(st),Et=gt.depth,xt=gt.index;j[Et][xt]=null,st.isChildless()&&X(st,St)};T.bfs({roots:D,directed:_.directed,visit:function(st,St,gt,Et,xt){var Lt=st[0],zt=Lt.id();Lt.isChildless()&&X(Lt,xt),W[zt]=!0}});for(var te=[],re=0;re<R.length;re++){var ee=R[re];W[ee.id()]||te.push(ee)}var ne=function(st){for(var St=j[st],gt=0;gt<St.length;gt++){var Et=St[gt];if(Et==null){St.splice(gt,1),gt--;continue}setInfo(Et,{depth:st,index:gt})}},oe=function(st,St){for(var gt=getInfo(st),Et=st.incomers().filter(function(Ct){return Ct.isNode()&&S.has(Ct)}),xt=-1,Lt=st.id(),zt=0;zt<Et.length;zt++){var jt=Et[zt],At=getInfo(jt);xt=Math.max(xt,At.depth)}if(gt.depth<=xt){if(!_.acyclic&&St[Lt])return null;var Ot=xt+1;return J(st,Ot),St[Lt]=Ot,!0}return!1};if(A&&k){var ue=[],ce={},de=function(st){return ue.push(st)},pe=function(){return ue.shift()};for(R.forEach(function(wt){return ue.push(wt)});ue.length>0;){var _e=pe(),Ee=oe(_e,ce);if(Ee)_e.outgoers().filter(function(wt){return wt.isNode()&&S.has(wt)}).forEach(de);else if(Ee===null){warn("Detected double maximal shift for node `"+_e.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var ge=0;if(_.avoidOverlap)for(var be=0;be<R.length;be++){var Ae=R[be],De=Ae.layoutDimensions(_),ve=De.w,le=De.h;ge=Math.max(ge,ve,le)}var me={},Te=function(st){if(me[st.id()])return me[st.id()];for(var St=getInfo(st).depth,gt=st.neighborhood(),Et=0,xt=0,Lt=0;Lt<gt.length;Lt++){var zt=gt[Lt];if(!(zt.isEdge()||zt.isParent()||!R.has(zt))){var jt=getInfo(zt);if(jt!=null){var At=jt.index,Ot=jt.depth;if(!(At==null||Ot==null)){var Ct=j[Ot].length;Ot<St&&(Et+=At/Ct,xt++)}}}}return xt=Math.max(1,xt),Et=Et/xt,xt===0&&(Et=0),me[st.id()]=Et,Et},ye=function(st,St){var gt=Te(st),Et=Te(St),xt=gt-Et;return xt===0?ascending(st.id(),St.id()):xt};_.depthSort!==void 0&&(ye=_.depthSort);for(var Re=j.length,qe=0;qe<Re;qe++)j[qe].sort(ye),ne(qe);for(var ke=[],ze=0;ze<te.length;ze++)ke.push(te[ze]);var Ne=function(){for(var st=0;st<Re;st++)ne(st)};ke.length&&(j.unshift(ke),Re=j.length,Ne());for(var Pe=0,Me=0;Me<Re;Me++)Pe=Math.max(j[Me].length,Pe);var Ie={x:M.x1+M.w/2,y:M.y1+M.h/2},Le=R.reduce(function(wt,st){return(function(St){return{w:wt.w===-1?St.w:(wt.w+St.w)/2,h:wt.h===-1?St.h:(wt.h+St.h)/2}})(st.boundingBox({includeLabels:_.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),nt=Math.max(Re===1?0:q?(M.h-_.padding*2-Le.h)/(Re-1):(M.h-_.padding*2-Le.h)/(Re+1),ge),lt=j.reduce(function(wt,st){return Math.max(wt,st.length)},0),dt=function(st){var St=getInfo(st),gt=St.depth,Et=St.index;if(_.circle){var xt=Math.min(M.w/2/Re,M.h/2/Re);xt=Math.max(xt,ge);var Lt=xt*gt+xt-(Re>0&&j[0].length<=3?xt/2:0),zt=2*Math.PI/j[gt].length*Et;return gt===0&&j[0].length===1&&(Lt=1),{x:Ie.x+Lt*Math.cos(zt),y:Ie.y+Lt*Math.sin(zt)}}else{var jt=j[gt].length,At=Math.max(jt===1?0:q?(M.w-_.padding*2-Le.w)/((_.grid?lt:jt)-1):(M.w-_.padding*2-Le.w)/((_.grid?lt:jt)+1),ge),Ot={x:Ie.x+(Et+1-(jt+1)/2)*At,y:Ie.y+(gt+1-(Re+1)/2)*nt};return Ot}},pt={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(pt).indexOf(_.direction)===-1&&error("Invalid direction '".concat(_.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(pt).join(", ")));var We=function(st){return rotatePosAndSkewByBox(dt(st),M,pt[_.direction])};return S.nodes().layoutPositions(this,_,We),this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function CircleLayout(_){this.options=extend({},defaults$6,_)}CircleLayout.prototype.run=function(){var _=this.options,v=_,S=_.cy,R=v.eles,T=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise,A=R.nodes().not(":parent");v.sort&&(A=A.sort(v.sort));for(var k=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:S.width(),h:S.height()}),q={x:k.x1+k.w/2,y:k.y1+k.h/2},M=v.sweep===void 0?2*Math.PI-2*Math.PI/A.length:v.sweep,D=M/Math.max(1,A.length-1),L,I=0,N=0;N<A.length;N++){var F=A[N],H=F.layoutDimensions(v),G=H.w,V=H.h;I=Math.max(I,G,V)}if(number$1(v.radius)?L=v.radius:A.length<=1?L=0:L=Math.min(k.h,k.w)/2-I,A.length>1&&v.avoidOverlap){I*=1.75;var j=Math.cos(D)-Math.cos(0),W=Math.sin(D)-Math.sin(0),X=Math.sqrt(I*I/(j*j+W*W));L=Math.max(X,L)}var J=function(re,ee){var ne=v.startAngle+ee*D*(T?1:-1),oe=L*Math.cos(ne),ue=L*Math.sin(ne),ce={x:q.x+oe,y:q.y+ue};return ce};return R.nodes().layoutPositions(this,v,J),this};var defaults$5={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(v){return v.degree()},levelWidth:function(v){return v.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function ConcentricLayout(_){this.options=extend({},defaults$5,_)}ConcentricLayout.prototype.run=function(){for(var _=this.options,v=_,S=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise,R=_.cy,T=v.eles,A=T.nodes().not(":parent"),k=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:R.width(),h:R.height()}),q={x:k.x1+k.w/2,y:k.y1+k.h/2},M=[],D=0,L=0;L<A.length;L++){var I=A[L],N=void 0;N=v.concentric(I),M.push({value:N,node:I}),I._private.scratch.concentric=N}A.updateStyle();for(var F=0;F<A.length;F++){var H=A[F],G=H.layoutDimensions(v);D=Math.max(D,G.w,G.h)}M.sort(function(nt,lt){return lt.value-nt.value});for(var V=v.levelWidth(A),j=[[]],W=j[0],X=0;X<M.length;X++){var J=M[X];if(W.length>0){var te=Math.abs(W[0].value-J.value);te>=V&&(W=[],j.push(W))}W.push(J)}var re=D+v.minNodeSpacing;if(!v.avoidOverlap){var ee=j.length>0&&j[0].length>1,ne=Math.min(k.w,k.h)/2-re,oe=ne/(j.length+ee?1:0);re=Math.min(re,oe)}for(var ue=0,ce=0;ce<j.length;ce++){var de=j[ce],pe=v.sweep===void 0?2*Math.PI-2*Math.PI/de.length:v.sweep,_e=de.dTheta=pe/Math.max(1,de.length-1);if(de.length>1&&v.avoidOverlap){var Ee=Math.cos(_e)-Math.cos(0),ge=Math.sin(_e)-Math.sin(0),be=Math.sqrt(re*re/(Ee*Ee+ge*ge));ue=Math.max(be,ue)}de.r=ue,ue+=re}if(v.equidistant){for(var Ae=0,De=0,ve=0;ve<j.length;ve++){var le=j[ve],me=le.r-De;Ae=Math.max(Ae,me)}De=0;for(var Te=0;Te<j.length;Te++){var ye=j[Te];Te===0&&(De=ye.r),ye.r=De,De+=Ae}}for(var Re={},qe=0;qe<j.length;qe++)for(var ke=j[qe],ze=ke.dTheta,Ne=ke.r,Pe=0;Pe<ke.length;Pe++){var Me=ke[Pe],Ie=v.startAngle+(S?1:-1)*ze*Pe,Le={x:q.x+Ne*Math.cos(Ie),y:q.y+Ne*Math.sin(Ie)};Re[Me.node.id()]=Le}return T.nodes().layoutPositions(this,v,function(nt){var lt=nt.id();return Re[lt]}),this};var DEBUG,defaults$4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(v,S){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(v){return 2048},nodeOverlap:4,idealEdgeLength:function(v){return 32},edgeElasticity:function(v){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(_){this.options=extend({},defaults$4,_),this.options.layout=this;var v=this.options.eles.nodes(),S=this.options.eles.edges(),R=S.filter(function(T){var A=T.source().data("id"),k=T.target().data("id"),q=v.some(function(D){return D.data("id")===A}),M=v.some(function(D){return D.data("id")===k});return!q||!M});this.options.eles=this.options.eles.not(R)}CoseLayout.prototype.run=function(){var _=this.options,v=_.cy,S=this;S.stopped=!1,(_.animate===!0||_.animate===!1)&&S.emit({type:"layoutstart",layout:S}),_.debug===!0?DEBUG=!0:DEBUG=!1;var R=createLayoutInfo(v,S,_);DEBUG&&printLayoutInfo(R),_.randomize&&randomizePositions(R);var T=performanceNow(),A=function(){refreshPositions(R,v,_),_.fit===!0&&v.fit(_.padding)},k=function(N){return!(S.stopped||N>=_.numIter||(step(R,_),R.temperature=R.temperature*_.coolingFactor,R.temperature<_.minTemp))},q=function(){if(_.animate===!0||_.animate===!1)A(),S.one("layoutstop",_.stop),S.emit({type:"layoutstop",layout:S});else{var N=_.eles.nodes(),F=getScaleInBoundsFn(R,_,N);N.layoutPositions(S,_,F)}},M=0,D=!0;if(_.animate===!0){var L=function(){for(var N=0;D&&N<_.refresh;)D=k(M),M++,N++;if(!D)separateComponents(R,_),q();else{var F=performanceNow();F-T>=_.animationThreshold&&A(),requestAnimationFrame$1(L)}};L()}else{for(;D;)D=k(M),M++;separateComponents(R,_),q()}return this};CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(v,S,R){for(var T=R.eles.edges(),A=R.eles.nodes(),k=makeBoundingBox(R.boundingBox?R.boundingBox:{x1:0,y1:0,w:v.width(),h:v.height()}),q={isCompound:v.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:A.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:T.size(),temperature:R.initialTemp,clientWidth:k.w,clientHeight:k.h,boundingBox:k},M=R.eles.components(),D={},L=0;L<M.length;L++)for(var I=M[L],N=0;N<I.length;N++){var F=I[N];D[F.id()]=L}for(var L=0;L<q.nodeSize;L++){var H=A[L],G=H.layoutDimensions(R),V={};V.isLocked=H.locked(),V.id=H.data("id"),V.parentId=H.data("parent"),V.cmptId=D[H.id()],V.children=[],V.positionX=H.position("x"),V.positionY=H.position("y"),V.offsetX=0,V.offsetY=0,V.height=G.w,V.width=G.h,V.maxX=V.positionX+V.width/2,V.minX=V.positionX-V.width/2,V.maxY=V.positionY+V.height/2,V.minY=V.positionY-V.height/2,V.padLeft=parseFloat(H.style("padding")),V.padRight=parseFloat(H.style("padding")),V.padTop=parseFloat(H.style("padding")),V.padBottom=parseFloat(H.style("padding")),V.nodeRepulsion=fn$6(R.nodeRepulsion)?R.nodeRepulsion(H):R.nodeRepulsion,q.layoutNodes.push(V),q.idToIndex[V.id]=L}for(var j=[],W=0,X=-1,J=[],L=0;L<q.nodeSize;L++){var H=q.layoutNodes[L],te=H.parentId;te!=null?q.layoutNodes[q.idToIndex[te]].children.push(H.id):(j[++X]=H.id,J.push(H.id))}for(q.graphSet.push(J);W<=X;){var re=j[W++],ee=q.idToIndex[re],F=q.layoutNodes[ee],ne=F.children;if(ne.length>0){q.graphSet.push(ne);for(var L=0;L<ne.length;L++)j[++X]=ne[L]}}for(var L=0;L<q.graphSet.length;L++)for(var oe=q.graphSet[L],N=0;N<oe.length;N++){var ue=q.idToIndex[oe[N]];q.indexToGraph[ue]=L}for(var L=0;L<q.edgeSize;L++){var ce=T[L],de={};de.id=ce.data("id"),de.sourceId=ce.data("source"),de.targetId=ce.data("target");var pe=fn$6(R.idealEdgeLength)?R.idealEdgeLength(ce):R.idealEdgeLength,_e=fn$6(R.edgeElasticity)?R.edgeElasticity(ce):R.edgeElasticity,Ee=q.idToIndex[de.sourceId],ge=q.idToIndex[de.targetId],be=q.indexToGraph[Ee],Ae=q.indexToGraph[ge];if(be!=Ae){for(var De=findLCA(de.sourceId,de.targetId,q),ve=q.graphSet[De],le=0,V=q.layoutNodes[Ee];ve.indexOf(V.id)===-1;)V=q.layoutNodes[q.idToIndex[V.parentId]],le++;for(V=q.layoutNodes[ge];ve.indexOf(V.id)===-1;)V=q.layoutNodes[q.idToIndex[V.parentId]],le++;pe*=le*R.nestingFactor}de.idealLength=pe,de.elasticity=_e,q.layoutEdges.push(de)}return q},findLCA=function(v,S,R){var T=_findLCA_aux(v,S,0,R);return 2>T.count?0:T.graph},_findLCA_aux=function(v,S,R,T){var A=T.graphSet[R];if(-1<A.indexOf(v)&&-1<A.indexOf(S))return{count:2,graph:R};for(var k=0,q=0;q<A.length;q++){var M=A[q],D=T.idToIndex[M],L=T.layoutNodes[D].children;if(L.length!==0){var I=T.indexToGraph[T.idToIndex[L[0]]],N=_findLCA_aux(v,S,I,T);if(N.count!==0)if(N.count===1){if(k++,k===2)break}else return N}}return{count:k,graph:R}},printLayoutInfo,randomizePositions=function(v,S){for(var R=v.clientWidth,T=v.clientHeight,A=0;A<v.nodeSize;A++){var k=v.layoutNodes[A];k.children.length===0&&!k.isLocked&&(k.positionX=Math.random()*R,k.positionY=Math.random()*T)}},getScaleInBoundsFn=function(v,S,R){var T=v.boundingBox,A={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return S.boundingBox&&(R.forEach(function(k){var q=v.layoutNodes[v.idToIndex[k.data("id")]];A.x1=Math.min(A.x1,q.positionX),A.x2=Math.max(A.x2,q.positionX),A.y1=Math.min(A.y1,q.positionY),A.y2=Math.max(A.y2,q.positionY)}),A.w=A.x2-A.x1,A.h=A.y2-A.y1),function(k,q){var M=v.layoutNodes[v.idToIndex[k.data("id")]];if(S.boundingBox){var D=A.w===0?.5:(M.positionX-A.x1)/A.w,L=A.h===0?.5:(M.positionY-A.y1)/A.h;return{x:T.x1+D*T.w,y:T.y1+L*T.h}}else return{x:M.positionX,y:M.positionY}}},refreshPositions=function(v,S,R){var T=R.layout,A=R.eles.nodes(),k=getScaleInBoundsFn(v,R,A);A.positions(k),v.ready!==!0&&(v.ready=!0,T.one("layoutready",R.ready),T.emit({type:"layoutready",layout:this}))},step=function(v,S,R){calculateNodeForces(v,S),calculateEdgeForces(v),calculateGravityForces(v,S),propagateForces(v),updatePositions(v)},calculateNodeForces=function(v,S){for(var R=0;R<v.graphSet.length;R++)for(var T=v.graphSet[R],A=T.length,k=0;k<A;k++)for(var q=v.layoutNodes[v.idToIndex[T[k]]],M=k+1;M<A;M++){var D=v.layoutNodes[v.idToIndex[T[M]]];nodeRepulsion(q,D,v,S)}},randomDistance=function(v){return-1+2*v*Math.random()},nodeRepulsion=function(v,S,R,T){var A=v.cmptId,k=S.cmptId;if(!(A!==k&&!R.isCompound)){var q=S.positionX-v.positionX,M=S.positionY-v.positionY,D=1;q===0&&M===0&&(q=randomDistance(D),M=randomDistance(D));var L=nodesOverlap(v,S,q,M);if(L>0)var I=T.nodeOverlap*L,N=Math.sqrt(q*q+M*M),F=I*q/N,H=I*M/N;else var G=findClippingPoint(v,q,M),V=findClippingPoint(S,-1*q,-1*M),j=V.x-G.x,W=V.y-G.y,X=j*j+W*W,N=Math.sqrt(X),I=(v.nodeRepulsion+S.nodeRepulsion)/X,F=I*j/N,H=I*W/N;v.isLocked||(v.offsetX-=F,v.offsetY-=H),S.isLocked||(S.offsetX+=F,S.offsetY+=H)}},nodesOverlap=function(v,S,R,T){if(R>0)var A=v.maxX-S.minX;else var A=S.maxX-v.minX;if(T>0)var k=v.maxY-S.minY;else var k=S.maxY-v.minY;return A>=0&&k>=0?Math.sqrt(A*A+k*k):0},findClippingPoint=function(v,S,R){var T=v.positionX,A=v.positionY,k=v.height||1,q=v.width||1,M=R/S,D=k/q,L={};return S===0&&0<R||S===0&&0>R?(L.x=T,L.y=A+k/2,L):0<S&&-1*D<=M&&M<=D?(L.x=T+q/2,L.y=A+q*R/2/S,L):0>S&&-1*D<=M&&M<=D?(L.x=T-q/2,L.y=A-q*R/2/S,L):0<R&&(M<=-1*D||M>=D)?(L.x=T+k*S/2/R,L.y=A+k/2,L):(0>R&&(M<=-1*D||M>=D)&&(L.x=T-k*S/2/R,L.y=A-k/2),L)},calculateEdgeForces=function(v,S){for(var R=0;R<v.edgeSize;R++){var T=v.layoutEdges[R],A=v.idToIndex[T.sourceId],k=v.layoutNodes[A],q=v.idToIndex[T.targetId],M=v.layoutNodes[q],D=M.positionX-k.positionX,L=M.positionY-k.positionY;if(!(D===0&&L===0)){var I=findClippingPoint(k,D,L),N=findClippingPoint(M,-1*D,-1*L),F=N.x-I.x,H=N.y-I.y,G=Math.sqrt(F*F+H*H),V=Math.pow(T.idealLength-G,2)/T.elasticity;if(G!==0)var j=V*F/G,W=V*H/G;else var j=0,W=0;k.isLocked||(k.offsetX+=j,k.offsetY+=W),M.isLocked||(M.offsetX-=j,M.offsetY-=W)}}},calculateGravityForces=function(v,S){if(S.gravity!==0)for(var R=1,T=0;T<v.graphSet.length;T++){var A=v.graphSet[T],k=A.length;if(T===0)var q=v.clientHeight/2,M=v.clientWidth/2;else var D=v.layoutNodes[v.idToIndex[A[0]]],L=v.layoutNodes[v.idToIndex[D.parentId]],q=L.positionX,M=L.positionY;for(var I=0;I<k;I++){var N=v.layoutNodes[v.idToIndex[A[I]]];if(!N.isLocked){var F=q-N.positionX,H=M-N.positionY,G=Math.sqrt(F*F+H*H);if(G>R){var V=S.gravity*F/G,j=S.gravity*H/G;N.offsetX+=V,N.offsetY+=j}}}}},propagateForces=function(v,S){var R=[],T=0,A=-1;for(R.push.apply(R,v.graphSet[0]),A+=v.graphSet[0].length;T<=A;){var k=R[T++],q=v.idToIndex[k],M=v.layoutNodes[q],D=M.children;if(0<D.length&&!M.isLocked){for(var L=M.offsetX,I=M.offsetY,N=0;N<D.length;N++){var F=v.layoutNodes[v.idToIndex[D[N]]];F.offsetX+=L,F.offsetY+=I,R[++A]=D[N]}M.offsetX=0,M.offsetY=0}}},updatePositions=function(v,S){for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];0<T.children.length&&(T.maxX=void 0,T.minX=void 0,T.maxY=void 0,T.minY=void 0)}for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];if(!(0<T.children.length||T.isLocked)){var A=limitForce(T.offsetX,T.offsetY,v.temperature);T.positionX+=A.x,T.positionY+=A.y,T.offsetX=0,T.offsetY=0,T.minX=T.positionX-T.width,T.maxX=T.positionX+T.width,T.minY=T.positionY-T.height,T.maxY=T.positionY+T.height,_updateAncestryBoundaries(T,v)}}for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];0<T.children.length&&!T.isLocked&&(T.positionX=(T.maxX+T.minX)/2,T.positionY=(T.maxY+T.minY)/2,T.width=T.maxX-T.minX,T.height=T.maxY-T.minY)}},limitForce=function(v,S,R){var T=Math.sqrt(v*v+S*S);if(T>R)var A={x:R*v/T,y:R*S/T};else var A={x:v,y:S};return A},_updateAncestryBoundaries=function(v,S){var R=v.parentId;if(R!=null){var T=S.layoutNodes[S.idToIndex[R]],A=!1;if((T.maxX==null||v.maxX+T.padRight>T.maxX)&&(T.maxX=v.maxX+T.padRight,A=!0),(T.minX==null||v.minX-T.padLeft<T.minX)&&(T.minX=v.minX-T.padLeft,A=!0),(T.maxY==null||v.maxY+T.padBottom>T.maxY)&&(T.maxY=v.maxY+T.padBottom,A=!0),(T.minY==null||v.minY-T.padTop<T.minY)&&(T.minY=v.minY-T.padTop,A=!0),A)return _updateAncestryBoundaries(T,S)}},separateComponents=function(v,S){for(var R=v.layoutNodes,T=[],A=0;A<R.length;A++){var k=R[A],q=k.cmptId,M=T[q]=T[q]||[];M.push(k)}for(var D=0,A=0;A<T.length;A++){var L=T[A];if(L){L.x1=1/0,L.x2=-1/0,L.y1=1/0,L.y2=-1/0;for(var I=0;I<L.length;I++){var N=L[I];L.x1=Math.min(L.x1,N.positionX-N.width/2),L.x2=Math.max(L.x2,N.positionX+N.width/2),L.y1=Math.min(L.y1,N.positionY-N.height/2),L.y2=Math.max(L.y2,N.positionY+N.height/2)}L.w=L.x2-L.x1,L.h=L.y2-L.y1,D+=L.w*L.h}}T.sort(function(W,X){return X.w*X.h-W.w*W.h});for(var F=0,H=0,G=0,V=0,j=Math.sqrt(D)*v.clientWidth/v.clientHeight,A=0;A<T.length;A++){var L=T[A];if(L){for(var I=0;I<L.length;I++){var N=L[I];N.isLocked||(N.positionX+=F-L.x1,N.positionY+=H-L.y1)}F+=L.w+S.componentSpacing,G+=L.w+S.componentSpacing,V=Math.max(V,L.h),G>j&&(H+=V+S.componentSpacing,F=0,G=0,V=0)}}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(v){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function GridLayout(_){this.options=extend({},defaults$3,_)}GridLayout.prototype.run=function(){var _=this.options,v=_,S=_.cy,R=v.eles,T=R.nodes().not(":parent");v.sort&&(T=T.sort(v.sort));var A=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:S.width(),h:S.height()});if(A.h===0||A.w===0)R.nodes().layoutPositions(this,v,function(Te){return{x:A.x1,y:A.y1}});else{var k=T.size(),q=Math.sqrt(k*A.h/A.w),M=Math.round(q),D=Math.round(A.w/A.h*q),L=function(ye){if(ye==null)return Math.min(M,D);var Re=Math.min(M,D);Re==M?M=ye:D=ye},I=function(ye){if(ye==null)return Math.max(M,D);var Re=Math.max(M,D);Re==M?M=ye:D=ye},N=v.rows,F=v.cols!=null?v.cols:v.columns;if(N!=null&&F!=null)M=N,D=F;else if(N!=null&&F==null)M=N,D=Math.ceil(k/M);else if(N==null&&F!=null)D=F,M=Math.ceil(k/D);else if(D*M>k){var H=L(),G=I();(H-1)*G>=k?L(H-1):(G-1)*H>=k&&I(G-1)}else for(;D*M<k;){var V=L(),j=I();(j+1)*V>=k?I(j+1):L(V+1)}var W=A.w/D,X=A.h/M;if(v.condense&&(W=0,X=0),v.avoidOverlap)for(var J=0;J<T.length;J++){var te=T[J],re=te._private.position;(re.x==null||re.y==null)&&(re.x=0,re.y=0);var ee=te.layoutDimensions(v),ne=v.avoidOverlapPadding,oe=ee.w+ne,ue=ee.h+ne;W=Math.max(W,oe),X=Math.max(X,ue)}for(var ce={},de=function(ye,Re){return!!ce["c-"+ye+"-"+Re]},pe=function(ye,Re){ce["c-"+ye+"-"+Re]=!0},_e=0,Ee=0,ge=function(){Ee++,Ee>=D&&(Ee=0,_e++)},be={},Ae=0;Ae<T.length;Ae++){var De=T[Ae],ve=v.position(De);if(ve&&(ve.row!==void 0||ve.col!==void 0)){var le={row:ve.row,col:ve.col};if(le.col===void 0)for(le.col=0;de(le.row,le.col);)le.col++;else if(le.row===void 0)for(le.row=0;de(le.row,le.col);)le.row++;be[De.id()]=le,pe(le.row,le.col)}}var me=function(ye,Re){var qe,ke;if(ye.locked()||ye.isParent())return!1;var ze=be[ye.id()];if(ze)qe=ze.col*W+W/2+A.x1,ke=ze.row*X+X/2+A.y1;else{for(;de(_e,Ee);)ge();qe=Ee*W+W/2+A.x1,ke=_e*X+X/2+A.y1,pe(_e,Ee),ge()}return{x:qe,y:ke}};T.layoutPositions(this,v,me)}return this};var defaults$2={ready:function(){},stop:function(){}};function NullLayout(_){this.options=extend({},defaults$2,_)}NullLayout.prototype.run=function(){var _=this.options,v=_.eles,S=this;return _.cy,S.emit("layoutstart"),v.nodes().positions(function(){return{x:0,y:0}}),S.one("layoutready",_.ready),S.emit("layoutready"),S.one("layoutstop",_.stop),S.emit("layoutstop"),this};NullLayout.prototype.stop=function(){return this};var defaults$1$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function PresetLayout(_){this.options=extend({},defaults$1$1,_)}PresetLayout.prototype.run=function(){var _=this.options,v=_.eles,S=v.nodes(),R=fn$6(_.positions);function T(A){if(_.positions==null)return copyPosition(A.position());if(R)return _.positions(A);var k=_.positions[A._private.data.id];return k??null}return S.layoutPositions(this,_,function(A,k){var q=T(A);return A.locked()||q==null?!1:q}),this};var defaults$h={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function RandomLayout(_){this.options=extend({},defaults$h,_)}RandomLayout.prototype.run=function(){var _=this.options,v=_.cy,S=_.eles,R=makeBoundingBox(_.boundingBox?_.boundingBox:{x1:0,y1:0,w:v.width(),h:v.height()}),T=function(k,q){return{x:R.x1+Math.round(Math.random()*R.w),y:R.y1+Math.round(Math.random()*R.h)}};return S.nodes().layoutPositions(this,_,T),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(_){this.options=_,this.notifications=0}var noop=function(){},throwImgErr=function(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop,notify:function(){this.notifications++},init:noop,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$f={};BRp$f.arrowShapeWidth=.3;BRp$f.registerArrowShapes=function(){var _=this.arrowShapes={},v=this,S=function(D,L,I,N,F,H,G){var V=F.x-I/2-G,j=F.x+I/2+G,W=F.y-I/2-G,X=F.y+I/2+G,J=V<=D&&D<=j&&W<=L&&L<=X;return J},R=function(D,L,I,N,F){var H=D*Math.cos(N)-L*Math.sin(N),G=D*Math.sin(N)+L*Math.cos(N),V=H*I,j=G*I,W=V+F.x,X=j+F.y;return{x:W,y:X}},T=function(D,L,I,N){for(var F=[],H=0;H<D.length;H+=2){var G=D[H],V=D[H+1];F.push(R(G,V,L,I,N))}return F},A=function(D){for(var L=[],I=0;I<D.length;I++){var N=D[I];L.push(N.x,N.y)}return L},k=function(D){return D.pstyle("width").pfValue*D.pstyle("arrow-scale").pfValue*2},q=function(D,L){string$1(L)&&(L=_[L]),_[D]=extend({name:D,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(N,F,H,G,V,j){var W=A(T(this.points,H+2*j,G,V)),X=pointInsidePolygonPoints(N,F,W);return X},roughCollide:S,draw:function(N,F,H,G){var V=T(this.points,F,H,G);v.arrowShapeImpl("polygon")(N,V)},spacing:function(N){return 0},gap:k},L)};q("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),q("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),q("arrow","triangle"),q("triangle-backcurve",{points:_.triangle.points,controlPoint:[0,-.15],roughCollide:S,draw:function(D,L,I,N,F){var H=T(this.points,L,I,N),G=this.controlPoint,V=R(G[0],G[1],L,I,N);v.arrowShapeImpl(this.name)(D,H,V)},gap:function(D){return k(D)*.8}}),q("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(D,L,I,N,F,H,G){var V=A(T(this.points,I+2*G,N,F)),j=A(T(this.pointsTee,I+2*G,N,F)),W=pointInsidePolygonPoints(D,L,V)||pointInsidePolygonPoints(D,L,j);return W},draw:function(D,L,I,N,F){var H=T(this.points,L,I,N),G=T(this.pointsTee,L,I,N);v.arrowShapeImpl(this.name)(D,H,G)}}),q("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(D,L,I,N,F,H,G){var V=F,j=Math.pow(V.x-D,2)+Math.pow(V.y-L,2)<=Math.pow((I+2*G)*this.radius,2),W=A(T(this.points,I+2*G,N,F));return pointInsidePolygonPoints(D,L,W)||j},draw:function(D,L,I,N,F){var H=T(this.pointsTr,L,I,N);v.arrowShapeImpl(this.name)(D,H,N.x,N.y,this.radius*L)},spacing:function(D){return v.getArrowWidth(D.pstyle("width").pfValue,D.pstyle("arrow-scale").value)*this.radius}}),q("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(D,L){var I=this.baseCrossLinePts.slice(),N=L/D,F=3,H=5;return I[F]=I[F]-N,I[H]=I[H]-N,I},collide:function(D,L,I,N,F,H,G){var V=A(T(this.points,I+2*G,N,F)),j=A(T(this.crossLinePts(I,H),I+2*G,N,F)),W=pointInsidePolygonPoints(D,L,V)||pointInsidePolygonPoints(D,L,j);return W},draw:function(D,L,I,N,F){var H=T(this.points,L,I,N),G=T(this.crossLinePts(L,F),L,I,N);v.arrowShapeImpl(this.name)(D,H,G)}}),q("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(D){return k(D)*.525}}),q("circle",{radius:.15,collide:function(D,L,I,N,F,H,G){var V=F,j=Math.pow(V.x-D,2)+Math.pow(V.y-L,2)<=Math.pow((I+2*G)*this.radius,2);return j},draw:function(D,L,I,N,F){v.arrowShapeImpl(this.name)(D,N.x,N.y,this.radius*L)},spacing:function(D){return v.getArrowWidth(D.pstyle("width").pfValue,D.pstyle("arrow-scale").value)*this.radius}}),q("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(D){return 1},gap:function(D){return 1}}),q("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),q("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(D){return D.pstyle("width").pfValue*D.pstyle("arrow-scale").value}}),q("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(D){return .95*D.pstyle("width").pfValue*D.pstyle("arrow-scale").value}})};var BRp$e={};BRp$e.projectIntoViewport=function(_,v){var S=this.cy,R=this.findContainerClientCoords(),T=R[0],A=R[1],k=R[4],q=S.pan(),M=S.zoom(),D=((_-T)/k-q.x)/M,L=((v-A)/k-q.y)/M;return[D,L]};BRp$e.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var _=this.container,v=_.getBoundingClientRect(),S=this.cy.window().getComputedStyle(_),R=function(j){return parseFloat(S.getPropertyValue(j))},T={left:R("padding-left"),right:R("padding-right"),top:R("padding-top"),bottom:R("padding-bottom")},A={left:R("border-left-width"),right:R("border-right-width"),top:R("border-top-width"),bottom:R("border-bottom-width")},k=_.clientWidth,q=_.clientHeight,M=T.left+T.right,D=T.top+T.bottom,L=A.left+A.right,I=v.width/(k+L),N=k-M,F=q-D,H=v.left+T.left+A.left,G=v.top+T.top+A.top;return this.containerBB=[H,G,N,F,I]};BRp$e.invalidateContainerClientCoordsCache=function(){this.containerBB=null};BRp$e.findNearestElement=function(_,v,S,R){return this.findNearestElements(_,v,S,R)[0]};BRp$e.findNearestElements=function(_,v,S,R){var T=this,A=this,k=A.getCachedZSortedEles(),q=[],M=A.cy.zoom(),D=A.cy.hasCompoundNodes(),L=(R?24:8)/M,I=(R?8:2)/M,N=(R?8:2)/M,F=1/0,H,G;S&&(k=k.interactive);function V(ee,ne){if(ee.isNode()){if(G)return;G=ee,q.push(ee)}if(ee.isEdge()&&(ne==null||ne<F))if(H){if(H.pstyle("z-compound-depth").value===ee.pstyle("z-compound-depth").value&&H.pstyle("z-compound-depth").value===ee.pstyle("z-compound-depth").value){for(var oe=0;oe<q.length;oe++)if(q[oe].isEdge()){q[oe]=ee,H=ee,F=ne??F;break}}}else q.push(ee),H=ee,F=ne??F}function j(ee){var ne=ee.outerWidth()+2*I,oe=ee.outerHeight()+2*I,ue=ne/2,ce=oe/2,de=ee.position(),pe=ee.pstyle("corner-radius").value==="auto"?"auto":ee.pstyle("corner-radius").pfValue,_e=ee._private.rscratch;if(de.x-ue<=_&&_<=de.x+ue&&de.y-ce<=v&&v<=de.y+ce){var Ee=A.nodeShapes[T.getNodeShape(ee)];if(Ee.checkPoint(_,v,0,ne,oe,de.x,de.y,pe,_e))return V(ee,0),!0}}function W(ee){var ne=ee._private,oe=ne.rscratch,ue=ee.pstyle("width").pfValue,ce=ee.pstyle("arrow-scale").value,de=ue/2+L,pe=de*de,_e=de*2,Ae=ne.source,De=ne.target,Ee;if(oe.edgeType==="segments"||oe.edgeType==="straight"||oe.edgeType==="haystack"){for(var ge=oe.allpts,be=0;be+3<ge.length;be+=2)if(inLineVicinity(_,v,ge[be],ge[be+1],ge[be+2],ge[be+3],_e)&&pe>(Ee=sqdistToFiniteLine(_,v,ge[be],ge[be+1],ge[be+2],ge[be+3])))return V(ee,Ee),!0}else if(oe.edgeType==="bezier"||oe.edgeType==="multibezier"||oe.edgeType==="self"||oe.edgeType==="compound"){for(var ge=oe.allpts,be=0;be+5<oe.allpts.length;be+=4)if(inBezierVicinity(_,v,ge[be],ge[be+1],ge[be+2],ge[be+3],ge[be+4],ge[be+5],_e)&&pe>(Ee=sqdistToQuadraticBezier(_,v,ge[be],ge[be+1],ge[be+2],ge[be+3],ge[be+4],ge[be+5])))return V(ee,Ee),!0}for(var Ae=Ae||ne.source,De=De||ne.target,ve=T.getArrowWidth(ue,ce),le=[{name:"source",x:oe.arrowStartX,y:oe.arrowStartY,angle:oe.srcArrowAngle},{name:"target",x:oe.arrowEndX,y:oe.arrowEndY,angle:oe.tgtArrowAngle},{name:"mid-source",x:oe.midX,y:oe.midY,angle:oe.midsrcArrowAngle},{name:"mid-target",x:oe.midX,y:oe.midY,angle:oe.midtgtArrowAngle}],be=0;be<le.length;be++){var me=le[be],Te=A.arrowShapes[ee.pstyle(me.name+"-arrow-shape").value],ye=ee.pstyle("width").pfValue;if(Te.roughCollide(_,v,ve,me.angle,{x:me.x,y:me.y},ye,L)&&Te.collide(_,v,ve,me.angle,{x:me.x,y:me.y},ye,L))return V(ee),!0}D&&q.length>0&&(j(Ae),j(De))}function X(ee,ne,oe){return getPrefixedProperty(ee,ne,oe)}function J(ee,ne){var oe=ee._private,ue=N,ce;ne?ce=ne+"-":ce="",ee.boundingBox();var de=oe.labelBounds[ne||"main"],pe=ee.pstyle(ce+"label").value,_e=ee.pstyle("text-events").strValue==="yes";if(!(!_e||!pe)){var Ee=X(oe.rscratch,"labelX",ne),ge=X(oe.rscratch,"labelY",ne),be=X(oe.rscratch,"labelAngle",ne),Ae=ee.pstyle(ce+"text-margin-x").pfValue,De=ee.pstyle(ce+"text-margin-y").pfValue,ve=de.x1-ue-Ae,le=de.x2+ue-Ae,me=de.y1-ue-De,Te=de.y2+ue-De;if(be){var ye=Math.cos(be),Re=Math.sin(be),qe=function(Le,nt){return Le=Le-Ee,nt=nt-ge,{x:Le*ye-nt*Re+Ee,y:Le*Re+nt*ye+ge}},ke=qe(ve,me),ze=qe(ve,Te),Ne=qe(le,me),Pe=qe(le,Te),Me=[ke.x+Ae,ke.y+De,Ne.x+Ae,Ne.y+De,Pe.x+Ae,Pe.y+De,ze.x+Ae,ze.y+De];if(pointInsidePolygonPoints(_,v,Me))return V(ee),!0}else if(inBoundingBox(de,_,v))return V(ee),!0}}for(var te=k.length-1;te>=0;te--){var re=k[te];re.isNode()?j(re)||J(re):W(re)||J(re)||J(re,"source")||J(re,"target")}return q};BRp$e.getAllInBox=function(_,v,S,R){var T=this.getCachedZSortedEles().interactive,A=this.cy.zoom(),k=2/A,q=[],M=Math.min(_,S),D=Math.max(_,S),L=Math.min(v,R),I=Math.max(v,R);_=M,S=D,v=L,R=I;var N=makeBoundingBox({x1:_,y1:v,x2:S,y2:R}),F=[{x:N.x1,y:N.y1},{x:N.x2,y:N.y1},{x:N.x2,y:N.y2},{x:N.x1,y:N.y2}],H=[[F[0],F[1]],[F[1],F[2]],[F[2],F[3]],[F[3],F[0]]];function G(Le,nt,lt){return getPrefixedProperty(Le,nt,lt)}function V(Le,nt){var lt=Le._private,dt=k,pt="";Le.boundingBox();var We=lt.labelBounds.main;if(!We)return null;var wt=G(lt.rscratch,"labelX",nt),st=G(lt.rscratch,"labelY",nt),St=G(lt.rscratch,"labelAngle",nt),gt=Le.pstyle(pt+"text-margin-x").pfValue,Et=Le.pstyle(pt+"text-margin-y").pfValue,xt=We.x1-dt-gt,Lt=We.x2+dt-gt,zt=We.y1-dt-Et,jt=We.y2+dt-Et;if(St){var At=Math.cos(St),Ot=Math.sin(St),Ct=function(et,we){return et=et-wt,we=we-st,{x:et*At-we*Ot+wt,y:et*Ot+we*At+st}};return[Ct(xt,zt),Ct(Lt,zt),Ct(Lt,jt),Ct(xt,jt)]}else return[{x:xt,y:zt},{x:Lt,y:zt},{x:Lt,y:jt},{x:xt,y:jt}]}function j(Le,nt,lt,dt){function pt(We,wt,st){return(st.y-We.y)*(wt.x-We.x)>(wt.y-We.y)*(st.x-We.x)}return pt(Le,lt,dt)!==pt(nt,lt,dt)&&pt(Le,nt,lt)!==pt(Le,nt,dt)}for(var W=0;W<T.length;W++){var X=T[W];if(X.isNode()){var J=X,te=J.pstyle("text-events").strValue==="yes",re=J.pstyle("box-selection").strValue,ee=J.pstyle("box-select-labels").strValue==="yes";if(re==="none")continue;var ne=(re==="overlap"||ee)&&te,oe=J.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:ne});if(re==="contain"){var ue=!1;if(ee&&te){var ce=V(J);ce&&satPolygonIntersection(ce,F)&&(q.push(J),ue=!0)}!ue&&boundingBoxInBoundingBox(N,oe)&&q.push(J)}else if(re==="overlap"&&boundingBoxesIntersect(N,oe)){var de=J.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),pe=[{x:de.x1,y:de.y1},{x:de.x2,y:de.y1},{x:de.x2,y:de.y2},{x:de.x1,y:de.y2}];if(satPolygonIntersection(pe,F))q.push(J);else{var _e=V(J);_e&&satPolygonIntersection(_e,F)&&q.push(J)}}}else{var Ee=X,ge=Ee._private,be=ge.rscratch,Ae=Ee.pstyle("box-selection").strValue;if(Ae==="none")continue;if(Ae==="contain"){if(be.startX!=null&&be.startY!=null&&!inBoundingBox(N,be.startX,be.startY)||be.endX!=null&&be.endY!=null&&!inBoundingBox(N,be.endX,be.endY))continue;if(be.edgeType==="bezier"||be.edgeType==="multibezier"||be.edgeType==="self"||be.edgeType==="compound"||be.edgeType==="segments"||be.edgeType==="haystack"){for(var De=ge.rstyle.bezierPts||ge.rstyle.linePts||ge.rstyle.haystackPts,ve=!0,le=0;le<De.length;le++)if(!pointInBoundingBox(N,De[le])){ve=!1;break}ve&&q.push(Ee)}else be.edgeType==="straight"&&q.push(Ee)}else if(Ae==="overlap"){var me=!1;if(be.startX!=null&&be.startY!=null&&be.endX!=null&&be.endY!=null&&(inBoundingBox(N,be.startX,be.startY)||inBoundingBox(N,be.endX,be.endY)))q.push(Ee),me=!0;else if(!me&&be.edgeType==="haystack"){for(var Te=ge.rstyle.haystackPts,ye=0;ye<Te.length;ye++)if(pointInBoundingBox(N,Te[ye])){q.push(Ee),me=!0;break}}if(!me){var Re=ge.rstyle.bezierPts||ge.rstyle.linePts||ge.rstyle.haystackPts;if((!Re||Re.length<2)&&be.edgeType==="straight"&&be.startX!=null&&be.startY!=null&&be.endX!=null&&be.endY!=null&&(Re=[{x:be.startX,y:be.startY},{x:be.endX,y:be.endY}]),!Re||Re.length<2)continue;for(var qe=0;qe<Re.length-1;qe++){for(var ke=Re[qe],ze=Re[qe+1],Ne=0;Ne<H.length;Ne++){var Pe=_slicedToArray(H[Ne],2),Me=Pe[0],Ie=Pe[1];if(j(ke,ze,Me,Ie)){q.push(Ee),me=!0;break}}if(me)break}}}}}return q};var BRp$d={};BRp$d.calculateArrowAngles=function(_){var v=_._private.rscratch,S=v.edgeType==="haystack",R=v.edgeType==="bezier",T=v.edgeType==="multibezier",A=v.edgeType==="segments",k=v.edgeType==="compound",q=v.edgeType==="self",M,D,L,I,N,F,j,W;if(S?(L=v.haystackPts[0],I=v.haystackPts[1],N=v.haystackPts[2],F=v.haystackPts[3]):(L=v.arrowStartX,I=v.arrowStartY,N=v.arrowEndX,F=v.arrowEndY),j=v.midX,W=v.midY,A)M=L-v.segpts[0],D=I-v.segpts[1];else if(T||k||q||R){var H=v.allpts,G=qbezierAt(H[0],H[2],H[4],.1),V=qbezierAt(H[1],H[3],H[5],.1);M=L-G,D=I-V}else M=L-j,D=I-W;v.srcArrowAngle=getAngleFromDisp(M,D);var j=v.midX,W=v.midY;if(S&&(j=(L+N)/2,W=(I+F)/2),M=N-L,D=F-I,A){var H=v.allpts;if(H.length/2%2===0){var X=H.length/2,J=X-2;M=H[X]-H[J],D=H[X+1]-H[J+1]}else if(v.isRound)M=v.midVector[1],D=-v.midVector[0];else{var X=H.length/2-1,J=X-2;M=H[X]-H[J],D=H[X+1]-H[J+1]}}else if(T||k||q){var H=v.allpts,te=v.ctrlpts,re,ee,ne,oe;if(te.length/2%2===0){var ue=H.length/2-1,ce=ue+2,de=ce+2;re=qbezierAt(H[ue],H[ce],H[de],0),ee=qbezierAt(H[ue+1],H[ce+1],H[de+1],0),ne=qbezierAt(H[ue],H[ce],H[de],1e-4),oe=qbezierAt(H[ue+1],H[ce+1],H[de+1],1e-4)}else{var ce=H.length/2-1,ue=ce-2,de=ce+2;re=qbezierAt(H[ue],H[ce],H[de],.4999),ee=qbezierAt(H[ue+1],H[ce+1],H[de+1],.4999),ne=qbezierAt(H[ue],H[ce],H[de],.5),oe=qbezierAt(H[ue+1],H[ce+1],H[de+1],.5)}M=ne-re,D=oe-ee}if(v.midtgtArrowAngle=getAngleFromDisp(M,D),v.midDispX=M,v.midDispY=D,M*=-1,D*=-1,A){var H=v.allpts;if(H.length/2%2!==0){if(!v.isRound){var X=H.length/2-1,pe=X+2;M=-(H[pe]-H[X]),D=-(H[pe+1]-H[X+1])}}}if(v.midsrcArrowAngle=getAngleFromDisp(M,D),A)M=N-v.segpts[v.segpts.length-2],D=F-v.segpts[v.segpts.length-1];else if(T||k||q||R){var H=v.allpts,_e=H.length,G=qbezierAt(H[_e-6],H[_e-4],H[_e-2],.9),V=qbezierAt(H[_e-5],H[_e-3],H[_e-1],.9);M=N-G,D=F-V}else M=N-j,D=F-W;v.tgtArrowAngle=getAngleFromDisp(M,D)};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(_,v){var S=this.arrowWidthCache=this.arrowWidthCache||{},R=S[_+", "+v];return R||(R=Math.max(Math.pow(_*13.37,.9),29)*v,S[_+", "+v]=R,R)};var x$1,y$1,v1={},v2={},sinA,sinA90,radDirection,drawDirection,angle,halfAngle,cRadius,lenOut,radius,limit,startX,startY,stopX,stopY,lastPoint,asVec=function(v,S,R){R.x=S.x-v.x,R.y=S.y-v.y,R.len=Math.sqrt(R.x*R.x+R.y*R.y),R.nx=R.x/R.len,R.ny=R.y/R.len,R.ang=Math.atan2(R.ny,R.nx)},invertVec=function(v,S){S.x=v.x*-1,S.y=v.y*-1,S.nx=v.nx*-1,S.ny=v.ny*-1,S.ang=v.ang>0?-(Math.PI-v.ang):Math.PI+v.ang},calcCornerArc=function(v,S,R,T,A){if(v!==lastPoint?asVec(S,v,v1):invertVec(v2,v1),asVec(S,R,v2),sinA=v1.nx*v2.ny-v1.ny*v2.nx,sinA90=v1.nx*v2.nx-v1.ny*-v2.ny,angle=Math.asin(Math.max(-1,Math.min(1,sinA))),Math.abs(angle)<1e-6){x$1=S.x,y$1=S.y,cRadius=radius=0;return}radDirection=1,drawDirection=!1,sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),S.radius!==void 0?radius=S.radius:radius=T,halfAngle=angle/2,limit=Math.min(v1.len/2,v2.len/2),A?(lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle)),lenOut>limit?(lenOut=limit,cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius):(lenOut=Math.min(limit,radius),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))),stopX=S.x+v2.nx*lenOut,stopY=S.y+v2.ny*lenOut,x$1=stopX-v2.ny*cRadius*radDirection,y$1=stopY+v2.nx*cRadius*radDirection,startX=S.x+v1.nx*lenOut,startY=S.y+v1.ny*lenOut,lastPoint=S};function drawPreparedRoundCorner(_,v){v.radius===0?_.lineTo(v.cx,v.cy):_.arc(v.cx,v.cy,v.radius,v.startAngle,v.endAngle,v.counterClockwise)}function getRoundCorner(_,v,S,R){var T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return R===0||v.radius===0?{cx:v.x,cy:v.y,radius:0,startX:v.x,startY:v.y,stopX:v.x,stopY:v.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(calcCornerArc(_,v,S,R,T),{cx:x$1,cy:y$1,radius:cRadius,startX,startY,stopX,stopY,startAngle:v1.ang+Math.PI/2*radDirection,endAngle:v2.ang-Math.PI/2*radDirection,counterClockwise:drawDirection})}var AVOID_IMPOSSIBLE_BEZIER_CONSTANT=.01,AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L=Math.sqrt(2*AVOID_IMPOSSIBLE_BEZIER_CONSTANT),BRp$c={};BRp$c.findMidptPtsEtc=function(_,v){var S=v.posPts,R=v.intersectionPts,T=v.vectorNormInverse,A,k=_.pstyle("source-endpoint"),q=_.pstyle("target-endpoint"),M=k.units!=null&&q.units!=null,D=function(te,re,ee,ne){var oe=ne-re,ue=ee-te,ce=Math.sqrt(ue*ue+oe*oe);return{x:-oe/ce,y:ue/ce}},L=_.pstyle("edge-distances").value;switch(L){case"node-position":A=S;break;case"intersection":A=R;break;case"endpoints":{if(M){var I=this.manualEndptToPx(_.source()[0],k),N=_slicedToArray(I,2),F=N[0],H=N[1],G=this.manualEndptToPx(_.target()[0],q),V=_slicedToArray(G,2),j=V[0],W=V[1],X={x1:F,y1:H,x2:j,y2:W};T=D(F,H,j,W),A=X}else warn("Edge ".concat(_.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),A=R;break}}return{midptPts:A,vectorNormInverse:T}};BRp$c.findHaystackPoints=function(_){for(var v=0;v<_.length;v++){var S=_[v],R=S._private,T=R.rscratch;if(!T.haystack){var A=Math.random()*2*Math.PI;T.source={x:Math.cos(A),y:Math.sin(A)},A=Math.random()*2*Math.PI,T.target={x:Math.cos(A),y:Math.sin(A)}}var k=R.source,q=R.target,M=k.position(),D=q.position(),L=k.width(),I=q.width(),N=k.height(),F=q.height(),H=S.pstyle("haystack-radius").value,G=H/2;T.haystackPts=T.allpts=[T.source.x*L*G+M.x,T.source.y*N*G+M.y,T.target.x*I*G+D.x,T.target.y*F*G+D.y],T.midX=(T.allpts[0]+T.allpts[2])/2,T.midY=(T.allpts[1]+T.allpts[3])/2,T.edgeType="haystack",T.haystack=!0,this.storeEdgeProjections(S),this.calculateArrowAngles(S),this.recalculateEdgeLabelProjections(S),this.calculateLabelAngles(S)}};BRp$c.findSegmentsPoints=function(_,v){var S=_._private.rscratch,R=_.pstyle("segment-weights"),T=_.pstyle("segment-distances"),A=_.pstyle("segment-radii"),k=_.pstyle("radius-type"),q=Math.min(R.pfValue.length,T.pfValue.length),M=A.pfValue[A.pfValue.length-1],D=k.pfValue[k.pfValue.length-1];S.edgeType="segments",S.segpts=[],S.radii=[],S.isArcRadius=[];for(var L=0;L<q;L++){var I=R.pfValue[L],N=T.pfValue[L],F=1-I,H=I,G=this.findMidptPtsEtc(_,v),V=G.midptPts,j=G.vectorNormInverse,W={x:V.x1*F+V.x2*H,y:V.y1*F+V.y2*H};S.segpts.push(W.x+j.x*N,W.y+j.y*N),S.radii.push(A.pfValue[L]!==void 0?A.pfValue[L]:M),S.isArcRadius.push((k.pfValue[L]!==void 0?k.pfValue[L]:D)==="arc-radius")}};BRp$c.findLoopPoints=function(_,v,S,R){var T=_._private.rscratch,A=v.dirCounts,k=v.srcPos,q=_.pstyle("control-point-distances"),M=q?q.pfValue[0]:void 0,D=_.pstyle("loop-direction").pfValue,L=_.pstyle("loop-sweep").pfValue,I=_.pstyle("control-point-step-size").pfValue;T.edgeType="self";var N=S,F=I;R&&(N=0,F=M);var H=D-Math.PI/2,G=H-L/2,V=H+L/2,j=D+"_"+L;N=A[j]===void 0?A[j]=0:++A[j],T.ctrlpts=[k.x+Math.cos(G)*1.4*F*(N/3+1),k.y+Math.sin(G)*1.4*F*(N/3+1),k.x+Math.cos(V)*1.4*F*(N/3+1),k.y+Math.sin(V)*1.4*F*(N/3+1)]};BRp$c.findCompoundLoopPoints=function(_,v,S,R){var T=_._private.rscratch;T.edgeType="compound";var A=v.srcPos,k=v.tgtPos,q=v.srcW,M=v.srcH,D=v.tgtW,L=v.tgtH,I=_.pstyle("control-point-step-size").pfValue,N=_.pstyle("control-point-distances"),F=N?N.pfValue[0]:void 0,H=S,G=I;R&&(H=0,G=F);var V=50,j={x:A.x-q/2,y:A.y-M/2},W={x:k.x-D/2,y:k.y-L/2},X={x:Math.min(j.x,W.x),y:Math.min(j.y,W.y)},J=.5,te=Math.max(J,Math.log(q*AVOID_IMPOSSIBLE_BEZIER_CONSTANT)),re=Math.max(J,Math.log(D*AVOID_IMPOSSIBLE_BEZIER_CONSTANT));T.ctrlpts=[X.x,X.y-(1+Math.pow(V,1.12)/100)*G*(H/3+1)*te,X.x-(1+Math.pow(V,1.12)/100)*G*(H/3+1)*re,X.y]};BRp$c.findStraightEdgePoints=function(_){_._private.rscratch.edgeType="straight"};BRp$c.findBezierPoints=function(_,v,S,R,T){var A=_._private.rscratch,k=_.pstyle("control-point-step-size").pfValue,q=_.pstyle("control-point-distances"),M=_.pstyle("control-point-weights"),D=q&&M?Math.min(q.value.length,M.value.length):1,L=q?q.pfValue[0]:void 0,I=M.value[0],N=R;A.edgeType=N?"multibezier":"bezier",A.ctrlpts=[];for(var F=0;F<D;F++){var H=(.5-v.eles.length/2+S)*k*(T?-1:1),G=void 0,V=signum(H);N&&(L=q?q.pfValue[F]:k,I=M.value[F]),R?G=L:G=L!==void 0?V*L:void 0;var j=G!==void 0?G:H,W=1-I,X=I,J=this.findMidptPtsEtc(_,v),te=J.midptPts,re=J.vectorNormInverse,ee={x:te.x1*W+te.x2*X,y:te.y1*W+te.y2*X};A.ctrlpts.push(ee.x+re.x*j,ee.y+re.y*j)}};BRp$c.findTaxiPoints=function(_,v){var S=_._private.rscratch;S.edgeType="segments";var R="vertical",T="horizontal",A="leftward",k="rightward",q="downward",M="upward",D="auto",L=v.posPts,I=v.srcW,N=v.srcH,F=v.tgtW,H=v.tgtH,G=_.pstyle("edge-distances").value,V=G!=="node-position",j=_.pstyle("taxi-direction").value,W=j,X=_.pstyle("taxi-turn"),J=X.units==="%",te=X.pfValue,re=te<0,ee=_.pstyle("taxi-turn-min-distance").pfValue,ne=V?(I+F)/2:0,oe=V?(N+H)/2:0,ue=L.x2-L.x1,ce=L.y2-L.y1,de=function(we,Fe){return we>0?Math.max(we-Fe,0):Math.min(we+Fe,0)},pe=de(ue,ne),_e=de(ce,oe),Ee=!1;W===D?j=Math.abs(pe)>Math.abs(_e)?T:R:W===M||W===q?(j=R,Ee=!0):(W===A||W===k)&&(j=T,Ee=!0);var ge=j===R,be=ge?_e:pe,Ae=ge?ce:ue,De=signum(Ae),ve=!1;!(Ee&&(J||re))&&(W===q&&Ae<0||W===M&&Ae>0||W===A&&Ae>0||W===k&&Ae<0)&&(De*=-1,be=De*Math.abs(be),ve=!0);var le;if(J){var me=te<0?1+te:te;le=me*be}else{var Te=te<0?be:0;le=Te+te*De}var ye=function(we){return Math.abs(we)<ee||Math.abs(we)>=Math.abs(be)},Re=ye(le),qe=ye(Math.abs(be)-Math.abs(le)),ke=Re||qe;if(ke&&!ve)if(ge){var ze=Math.abs(Ae)<=N/2,Ne=Math.abs(ue)<=F/2;if(ze){var Pe=(L.x1+L.x2)/2,Me=L.y1,Ie=L.y2;S.segpts=[Pe,Me,Pe,Ie]}else if(Ne){var Le=(L.y1+L.y2)/2,nt=L.x1,lt=L.x2;S.segpts=[nt,Le,lt,Le]}else S.segpts=[L.x1,L.y2]}else{var dt=Math.abs(Ae)<=I/2,pt=Math.abs(ce)<=H/2;if(dt){var We=(L.y1+L.y2)/2,wt=L.x1,st=L.x2;S.segpts=[wt,We,st,We]}else if(pt){var St=(L.x1+L.x2)/2,gt=L.y1,Et=L.y2;S.segpts=[St,gt,St,Et]}else S.segpts=[L.x2,L.y1]}else if(ge){var xt=L.y1+le+(V?N/2*De:0),Lt=L.x1,zt=L.x2;S.segpts=[Lt,xt,zt,xt]}else{var jt=L.x1+le+(V?I/2*De:0),At=L.y1,Ot=L.y2;S.segpts=[jt,At,jt,Ot]}if(S.isRound){var Ct=_.pstyle("taxi-radius").value,bt=_.pstyle("radius-type").value[0]==="arc-radius";S.radii=new Array(S.segpts.length/2).fill(Ct),S.isArcRadius=new Array(S.segpts.length/2).fill(bt)}};BRp$c.tryToCorrectInvalidPoints=function(_,v){var S=_._private.rscratch;if(S.edgeType==="bezier"){var R=v.srcPos,T=v.tgtPos,A=v.srcW,k=v.srcH,q=v.tgtW,M=v.tgtH,D=v.srcShape,L=v.tgtShape,I=v.srcCornerRadius,N=v.tgtCornerRadius,F=v.srcRs,H=v.tgtRs,G=!number$1(S.startX)||!number$1(S.startY),V=!number$1(S.arrowStartX)||!number$1(S.arrowStartY),j=!number$1(S.endX)||!number$1(S.endY),W=!number$1(S.arrowEndX)||!number$1(S.arrowEndY),X=3,J=this.getArrowWidth(_.pstyle("width").pfValue,_.pstyle("arrow-scale").value)*this.arrowShapeWidth,te=X*J,re=dist$1({x:S.ctrlpts[0],y:S.ctrlpts[1]},{x:S.startX,y:S.startY}),ee=re<te,ne=dist$1({x:S.ctrlpts[0],y:S.ctrlpts[1]},{x:S.endX,y:S.endY}),oe=ne<te,ue=!1;if(G||V||ee){ue=!0;var ce={x:S.ctrlpts[0]-R.x,y:S.ctrlpts[1]-R.y},de=Math.sqrt(ce.x*ce.x+ce.y*ce.y),pe={x:ce.x/de,y:ce.y/de},_e=Math.max(A,k),Ee={x:S.ctrlpts[0]+pe.x*2*_e,y:S.ctrlpts[1]+pe.y*2*_e},ge=D.intersectLine(R.x,R.y,A,k,Ee.x,Ee.y,0,I,F);ee?(S.ctrlpts[0]=S.ctrlpts[0]+pe.x*(te-re),S.ctrlpts[1]=S.ctrlpts[1]+pe.y*(te-re)):(S.ctrlpts[0]=ge[0]+pe.x*te,S.ctrlpts[1]=ge[1]+pe.y*te)}if(j||W||oe){ue=!0;var be={x:S.ctrlpts[0]-T.x,y:S.ctrlpts[1]-T.y},Ae=Math.sqrt(be.x*be.x+be.y*be.y),De={x:be.x/Ae,y:be.y/Ae},ve=Math.max(A,k),le={x:S.ctrlpts[0]+De.x*2*ve,y:S.ctrlpts[1]+De.y*2*ve},me=L.intersectLine(T.x,T.y,q,M,le.x,le.y,0,N,H);oe?(S.ctrlpts[0]=S.ctrlpts[0]+De.x*(te-ne),S.ctrlpts[1]=S.ctrlpts[1]+De.y*(te-ne)):(S.ctrlpts[0]=me[0]+De.x*te,S.ctrlpts[1]=me[1]+De.y*te)}ue&&this.findEndpoints(_)}};BRp$c.storeAllpts=function(_){var v=_._private.rscratch;if(v.edgeType==="multibezier"||v.edgeType==="bezier"||v.edgeType==="self"||v.edgeType==="compound"){v.allpts=[],v.allpts.push(v.startX,v.startY);for(var S=0;S+1<v.ctrlpts.length;S+=2)v.allpts.push(v.ctrlpts[S],v.ctrlpts[S+1]),S+3<v.ctrlpts.length&&v.allpts.push((v.ctrlpts[S]+v.ctrlpts[S+2])/2,(v.ctrlpts[S+1]+v.ctrlpts[S+3])/2);v.allpts.push(v.endX,v.endY);var R,T;v.ctrlpts.length/2%2===0?(R=v.allpts.length/2-1,v.midX=v.allpts[R],v.midY=v.allpts[R+1]):(R=v.allpts.length/2-3,T=.5,v.midX=qbezierAt(v.allpts[R],v.allpts[R+2],v.allpts[R+4],T),v.midY=qbezierAt(v.allpts[R+1],v.allpts[R+3],v.allpts[R+5],T))}else if(v.edgeType==="straight")v.allpts=[v.startX,v.startY,v.endX,v.endY],v.midX=(v.startX+v.endX+v.arrowStartX+v.arrowEndX)/4,v.midY=(v.startY+v.endY+v.arrowStartY+v.arrowEndY)/4;else if(v.edgeType==="segments"){if(v.allpts=[],v.allpts.push(v.startX,v.startY),v.allpts.push.apply(v.allpts,v.segpts),v.allpts.push(v.endX,v.endY),v.isRound){v.roundCorners=[];for(var A=2;A+3<v.allpts.length;A+=2){var k=v.radii[A/2-1],q=v.isArcRadius[A/2-1];v.roundCorners.push(getRoundCorner({x:v.allpts[A-2],y:v.allpts[A-1]},{x:v.allpts[A],y:v.allpts[A+1],radius:k},{x:v.allpts[A+2],y:v.allpts[A+3]},k,q))}}if(v.segpts.length%4===0){var M=v.segpts.length/2,D=M-2;v.midX=(v.segpts[D]+v.segpts[M])/2,v.midY=(v.segpts[D+1]+v.segpts[M+1])/2}else{var L=v.segpts.length/2-1;if(!v.isRound)v.midX=v.segpts[L],v.midY=v.segpts[L+1];else{var I={x:v.segpts[L],y:v.segpts[L+1]},N=v.roundCorners[L/2];if(N.radius===0){var F={x:v.segpts[L+2],y:v.segpts[L+3]};v.midX=I.x,v.midY=I.y,v.midVector=[I.y-F.y,F.x-I.x]}else{var H=[I.x-N.cx,I.y-N.cy],G=N.radius/Math.sqrt(Math.pow(H[0],2)+Math.pow(H[1],2));H=H.map(function(V){return V*G}),v.midX=N.cx+H[0],v.midY=N.cy+H[1],v.midVector=H}}}}};BRp$c.checkForInvalidEdgeWarning=function(_){var v=_[0]._private.rscratch;v.nodesOverlap||number$1(v.startX)&&number$1(v.startY)&&number$1(v.endX)&&number$1(v.endY)?v.loggedErr=!1:v.loggedErr||(v.loggedErr=!0,warn("Edge `"+_.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};BRp$c.findEdgeControlPoints=function(_){var v=this;if(!(!_||_.length===0)){for(var S=this,R=S.cy,T=R.hasCompoundNodes(),A=new Map$1,k=function(oe,ue){return[].concat(_toConsumableArray(oe),[ue?1:0]).join("-")},q=[],M=[],D=0;D<_.length;D++){var L=_[D],I=L._private,N=L.pstyle("curve-style").value;if(!(L.removed()||!L.takesUpSpace())){if(N==="haystack"){M.push(L);continue}var F=N==="unbundled-bezier"||endsWith(N,"segments")||N==="straight"||N==="straight-triangle"||endsWith(N,"taxi"),H=N==="unbundled-bezier"||N==="bezier",G=I.source,V=I.target,j=G.poolIndex(),W=V.poolIndex(),X=[j,W].sort(),J=k(X,F),te=A.get(J);te==null&&(te={eles:[]},q.push({pairId:X,edgeIsUnbundled:F}),A.set(J,te)),te.eles.push(L),F&&(te.hasUnbundled=!0),H&&(te.hasBezier=!0)}}for(var re=function(){var oe=q[ee],ue=oe.pairId,ce=oe.edgeIsUnbundled,de=k(ue,ce),pe=A.get(de),_e;if(!pe.hasUnbundled){var Ee=pe.eles[0].parallelEdges().filter(function(bt){return bt.isBundledBezier()});clearArray(pe.eles),Ee.forEach(function(bt){return pe.eles.push(bt)}),pe.eles.sort(function(bt,et){return bt.poolIndex()-et.poolIndex()})}var ge=pe.eles[0],be=ge.source(),Ae=ge.target();if(be.poolIndex()>Ae.poolIndex()){var De=be;be=Ae,Ae=De}var ve=pe.srcPos=be.position(),le=pe.tgtPos=Ae.position(),me=pe.srcW=be.outerWidth(),Te=pe.srcH=be.outerHeight(),ye=pe.tgtW=Ae.outerWidth(),Re=pe.tgtH=Ae.outerHeight(),qe=pe.srcShape=S.nodeShapes[v.getNodeShape(be)],ke=pe.tgtShape=S.nodeShapes[v.getNodeShape(Ae)],ze=pe.srcCornerRadius=be.pstyle("corner-radius").value==="auto"?"auto":be.pstyle("corner-radius").pfValue,Ne=pe.tgtCornerRadius=Ae.pstyle("corner-radius").value==="auto"?"auto":Ae.pstyle("corner-radius").pfValue,Pe=pe.tgtRs=Ae._private.rscratch,Me=pe.srcRs=be._private.rscratch;pe.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ie=0;Ie<pe.eles.length;Ie++){var Le=pe.eles[Ie],nt=Le[0]._private.rscratch,lt=Le.pstyle("curve-style").value,dt=lt==="unbundled-bezier"||endsWith(lt,"segments")||endsWith(lt,"taxi"),pt=!be.same(Le.source());if(!pe.calculatedIntersection&&be!==Ae&&(pe.hasBezier||pe.hasUnbundled)){pe.calculatedIntersection=!0;var We=qe.intersectLine(ve.x,ve.y,me,Te,le.x,le.y,0,ze,Me),wt=pe.srcIntn=We,st=ke.intersectLine(le.x,le.y,ye,Re,ve.x,ve.y,0,Ne,Pe),St=pe.tgtIntn=st,gt=pe.intersectionPts={x1:We[0],x2:st[0],y1:We[1],y2:st[1]},Et=pe.posPts={x1:ve.x,x2:le.x,y1:ve.y,y2:le.y},xt=st[1]-We[1],Lt=st[0]-We[0],zt=Math.sqrt(Lt*Lt+xt*xt);number$1(zt)&&zt>=AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L||(zt=Math.sqrt(Math.max(Lt*Lt,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)+Math.max(xt*xt,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)));var jt=pe.vector={x:Lt,y:xt},At=pe.vectorNorm={x:jt.x/zt,y:jt.y/zt},Ot={x:-At.y,y:At.x};pe.nodesOverlap=!number$1(zt)||ke.checkPoint(We[0],We[1],0,ye,Re,le.x,le.y,Ne,Pe)||qe.checkPoint(st[0],st[1],0,me,Te,ve.x,ve.y,ze,Me),pe.vectorNormInverse=Ot,_e={nodesOverlap:pe.nodesOverlap,dirCounts:pe.dirCounts,calculatedIntersection:!0,hasBezier:pe.hasBezier,hasUnbundled:pe.hasUnbundled,eles:pe.eles,srcPos:le,srcRs:Pe,tgtPos:ve,tgtRs:Me,srcW:ye,srcH:Re,tgtW:me,tgtH:Te,srcIntn:St,tgtIntn:wt,srcShape:ke,tgtShape:qe,posPts:{x1:Et.x2,y1:Et.y2,x2:Et.x1,y2:Et.y1},intersectionPts:{x1:gt.x2,y1:gt.y2,x2:gt.x1,y2:gt.y1},vector:{x:-jt.x,y:-jt.y},vectorNorm:{x:-At.x,y:-At.y},vectorNormInverse:{x:-Ot.x,y:-Ot.y}}}var Ct=pt?_e:pe;nt.nodesOverlap=Ct.nodesOverlap,nt.srcIntn=Ct.srcIntn,nt.tgtIntn=Ct.tgtIntn,nt.isRound=lt.startsWith("round"),T&&(be.isParent()||be.isChild()||Ae.isParent()||Ae.isChild())&&(be.parents().anySame(Ae)||Ae.parents().anySame(be)||be.same(Ae)&&be.isParent())?v.findCompoundLoopPoints(Le,Ct,Ie,dt):be===Ae?v.findLoopPoints(Le,Ct,Ie,dt):lt.endsWith("segments")?v.findSegmentsPoints(Le,Ct):lt.endsWith("taxi")?v.findTaxiPoints(Le,Ct):lt==="straight"||!dt&&pe.eles.length%2===1&&Ie===Math.floor(pe.eles.length/2)?v.findStraightEdgePoints(Le):v.findBezierPoints(Le,Ct,Ie,dt,pt),v.findEndpoints(Le),v.tryToCorrectInvalidPoints(Le,Ct),v.checkForInvalidEdgeWarning(Le),v.storeAllpts(Le),v.storeEdgeProjections(Le),v.calculateArrowAngles(Le),v.recalculateEdgeLabelProjections(Le),v.calculateLabelAngles(Le)}},ee=0;ee<q.length;ee++)re();this.findHaystackPoints(M)}};function getPts(_){var v=[];if(_!=null){for(var S=0;S<_.length;S+=2){var R=_[S],T=_[S+1];v.push({x:R,y:T})}return v}}BRp$c.getSegmentPoints=function(_){var v=_[0]._private.rscratch;this.recalculateRenderedStyle(_);var S=v.edgeType;if(S==="segments")return getPts(v.segpts)};BRp$c.getControlPoints=function(_){var v=_[0]._private.rscratch;this.recalculateRenderedStyle(_);var S=v.edgeType;if(S==="bezier"||S==="multibezier"||S==="self"||S==="compound")return getPts(v.ctrlpts)};BRp$c.getEdgeMidpoint=function(_){var v=_[0]._private.rscratch;return this.recalculateRenderedStyle(_),{x:v.midX,y:v.midY}};var BRp$b={};BRp$b.manualEndptToPx=function(_,v){var S=this,R=_.position(),T=_.outerWidth(),A=_.outerHeight(),k=_._private.rscratch;if(v.value.length===2){var q=[v.pfValue[0],v.pfValue[1]];return v.units[0]==="%"&&(q[0]=q[0]*T),v.units[1]==="%"&&(q[1]=q[1]*A),q[0]+=R.x,q[1]+=R.y,q}else{var M=v.pfValue[0];M=-Math.PI/2+M;var D=2*Math.max(T,A),L=[R.x+Math.cos(M)*D,R.y+Math.sin(M)*D];return S.nodeShapes[this.getNodeShape(_)].intersectLine(R.x,R.y,T,A,L[0],L[1],0,_.pstyle("corner-radius").value==="auto"?"auto":_.pstyle("corner-radius").pfValue,k)}};BRp$b.findEndpoints=function(_){var v,S,R,T,A=this,k,q=_.source()[0],M=_.target()[0],D=q.position(),L=M.position(),I=_.pstyle("target-arrow-shape").value,N=_.pstyle("source-arrow-shape").value,F=_.pstyle("target-distance-from-node").pfValue,H=_.pstyle("source-distance-from-node").pfValue,G=q._private.rscratch,V=M._private.rscratch,j=_.pstyle("curve-style").value,W=_._private.rscratch,X=W.edgeType,J=endsWith(j,"taxi"),te=X==="self"||X==="compound",re=X==="bezier"||X==="multibezier"||te,ee=X!=="bezier",ne=X==="straight"||X==="segments",oe=X==="segments",ue=re||ee||ne,ce=te||J,de=_.pstyle("source-endpoint"),pe=ce?"outside-to-node":de.value,_e=q.pstyle("corner-radius").value==="auto"?"auto":q.pstyle("corner-radius").pfValue,Ee=_.pstyle("target-endpoint"),ge=ce?"outside-to-node":Ee.value,be=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue;W.srcManEndpt=de,W.tgtManEndpt=Ee;var Ae,De,ve,le,me=(v=(Ee==null||(S=Ee.pfValue)===null||S===void 0?void 0:S.length)===2?Ee.pfValue:null)!==null&&v!==void 0?v:[0,0],Te=(R=(de==null||(T=de.pfValue)===null||T===void 0?void 0:T.length)===2?de.pfValue:null)!==null&&R!==void 0?R:[0,0];if(re){var ye=[W.ctrlpts[0],W.ctrlpts[1]],Re=ee?[W.ctrlpts[W.ctrlpts.length-2],W.ctrlpts[W.ctrlpts.length-1]]:ye;Ae=Re,De=ye}else if(ne){var qe=oe?W.segpts.slice(0,2):[L.x+me[0],L.y+me[1]],ke=oe?W.segpts.slice(W.segpts.length-2):[D.x+Te[0],D.y+Te[1]];Ae=ke,De=qe}if(ge==="inside-to-node")k=[L.x,L.y];else if(Ee.units)k=this.manualEndptToPx(M,Ee);else if(ge==="outside-to-line")k=W.tgtIntn;else if(ge==="outside-to-node"||ge==="outside-to-node-or-label"?ve=Ae:(ge==="outside-to-line"||ge==="outside-to-line-or-label")&&(ve=[D.x,D.y]),k=A.nodeShapes[this.getNodeShape(M)].intersectLine(L.x,L.y,M.outerWidth(),M.outerHeight(),ve[0],ve[1],0,be,V),ge==="outside-to-node-or-label"||ge==="outside-to-line-or-label"){var ze=M._private.rscratch,Ne=ze.labelWidth,Pe=ze.labelHeight,Me=ze.labelX,Ie=ze.labelY,Le=Ne/2,nt=Pe/2,lt=M.pstyle("text-valign").value;lt==="top"?Ie-=nt:lt==="bottom"&&(Ie+=nt);var dt=M.pstyle("text-halign").value;dt==="left"?Me-=Le:dt==="right"&&(Me+=Le);var pt=polygonIntersectLine(ve[0],ve[1],[Me-Le,Ie-nt,Me+Le,Ie-nt,Me+Le,Ie+nt,Me-Le,Ie+nt],L.x,L.y);if(pt.length>0){var We=D,wt=sqdist(We,array2point(k)),st=sqdist(We,array2point(pt)),St=wt;if(st<wt&&(k=pt,St=st),pt.length>2){var gt=sqdist(We,{x:pt[2],y:pt[3]});gt<St&&(k=[pt[2],pt[3]])}}}var Et=shortenIntersection(k,Ae,A.arrowShapes[I].spacing(_)+F),xt=shortenIntersection(k,Ae,A.arrowShapes[I].gap(_)+F);if(W.endX=xt[0],W.endY=xt[1],W.arrowEndX=Et[0],W.arrowEndY=Et[1],pe==="inside-to-node")k=[D.x,D.y];else if(de.units)k=this.manualEndptToPx(q,de);else if(pe==="outside-to-line")k=W.srcIntn;else if(pe==="outside-to-node"||pe==="outside-to-node-or-label"?le=De:(pe==="outside-to-line"||pe==="outside-to-line-or-label")&&(le=[L.x,L.y]),k=A.nodeShapes[this.getNodeShape(q)].intersectLine(D.x,D.y,q.outerWidth(),q.outerHeight(),le[0],le[1],0,_e,G),pe==="outside-to-node-or-label"||pe==="outside-to-line-or-label"){var Lt=q._private.rscratch,zt=Lt.labelWidth,jt=Lt.labelHeight,At=Lt.labelX,Ot=Lt.labelY,Ct=zt/2,bt=jt/2,et=q.pstyle("text-valign").value;et==="top"?Ot-=bt:et==="bottom"&&(Ot+=bt);var we=q.pstyle("text-halign").value;we==="left"?At-=Ct:we==="right"&&(At+=Ct);var Fe=polygonIntersectLine(le[0],le[1],[At-Ct,Ot-bt,At+Ct,Ot-bt,At+Ct,Ot+bt,At-Ct,Ot+bt],D.x,D.y);if(Fe.length>0){var Ge=L,Ze=sqdist(Ge,array2point(k)),rt=sqdist(Ge,array2point(Fe)),_t=Ze;if(rt<Ze&&(k=[Fe[0],Fe[1]],_t=rt),Fe.length>2){var ot=sqdist(Ge,{x:Fe[2],y:Fe[3]});ot<_t&&(k=[Fe[2],Fe[3]])}}}var Tt=shortenIntersection(k,De,A.arrowShapes[N].spacing(_)+H),Rt=shortenIntersection(k,De,A.arrowShapes[N].gap(_)+H);W.startX=Rt[0],W.startY=Rt[1],W.arrowStartX=Tt[0],W.arrowStartY=Tt[1],ue&&(!number$1(W.startX)||!number$1(W.startY)||!number$1(W.endX)||!number$1(W.endY)?W.badLine=!0:W.badLine=!1)};BRp$b.getSourceEndpoint=function(_){var v=_[0]._private.rscratch;switch(this.recalculateRenderedStyle(_),v.edgeType){case"haystack":return{x:v.haystackPts[0],y:v.haystackPts[1]};default:return{x:v.arrowStartX,y:v.arrowStartY}}};BRp$b.getTargetEndpoint=function(_){var v=_[0]._private.rscratch;switch(this.recalculateRenderedStyle(_),v.edgeType){case"haystack":return{x:v.haystackPts[2],y:v.haystackPts[3]};default:return{x:v.arrowEndX,y:v.arrowEndY}}};var BRp$a={};function pushBezierPts(_,v,S){for(var R=function(D,L,I,N){return qbezierAt(D,L,I,N)},T=v._private,A=T.rstyle.bezierPts,k=0;k<_.bezierProjPcts.length;k++){var q=_.bezierProjPcts[k];A.push({x:R(S[0],S[2],S[4],q),y:R(S[1],S[3],S[5],q)})}}BRp$a.storeEdgeProjections=function(_){var v=_._private,S=v.rscratch,R=S.edgeType;if(v.rstyle.bezierPts=null,v.rstyle.linePts=null,v.rstyle.haystackPts=null,R==="multibezier"||R==="bezier"||R==="self"||R==="compound"){v.rstyle.bezierPts=[];for(var T=0;T+5<S.allpts.length;T+=4)pushBezierPts(this,_,S.allpts.slice(T,T+6))}else if(R==="segments")for(var A=v.rstyle.linePts=[],T=0;T+1<S.allpts.length;T+=2)A.push({x:S.allpts[T],y:S.allpts[T+1]});else if(R==="haystack"){var k=S.haystackPts;v.rstyle.haystackPts=[{x:k[0],y:k[1]},{x:k[2],y:k[3]}]}v.rstyle.arrowWidth=this.getArrowWidth(_.pstyle("width").pfValue,_.pstyle("arrow-scale").value)*this.arrowShapeWidth};BRp$a.recalculateEdgeProjections=function(_){this.findEdgeControlPoints(_)};var BRp$9={};BRp$9.recalculateNodeLabelProjection=function(_){var v=_.pstyle("label").strValue;if(!emptyString(v)){var S,R,T=_._private,A=_.width(),k=_.height(),q=_.padding(),M=_.position(),D=_.pstyle("text-halign").strValue,L=_.pstyle("text-valign").strValue,I=T.rscratch,N=T.rstyle;switch(D){case"left":S=M.x-A/2-q;break;case"right":S=M.x+A/2+q;break;default:S=M.x}switch(L){case"top":R=M.y-k/2-q;break;case"bottom":R=M.y+k/2+q;break;default:R=M.y}I.labelX=S,I.labelY=R,N.labelX=S,N.labelY=R,this.calculateLabelAngles(_),this.applyLabelDimensions(_)}};var lineAngleFromDelta=function(v,S){var R=Math.atan(S/v);return v===0&&R<0&&(R=R*-1),R},lineAngle=function(v,S){var R=S.x-v.x,T=S.y-v.y;return lineAngleFromDelta(R,T)},bezierAngle=function(v,S,R,T){var A=bound(0,T-.001,1),k=bound(0,T+.001,1),q=qbezierPtAt(v,S,R,A),M=qbezierPtAt(v,S,R,k);return lineAngle(q,M)};BRp$9.recalculateEdgeLabelProjections=function(_){var v,S=_._private,R=S.rscratch,T=this,A={mid:_.pstyle("label").strValue,source:_.pstyle("source-label").strValue,target:_.pstyle("target-label").strValue};if(A.mid||A.source||A.target){v={x:R.midX,y:R.midY};var k=function(I,N,F){setPrefixedProperty(S.rscratch,I,N,F),setPrefixedProperty(S.rstyle,I,N,F)};k("labelX",null,v.x),k("labelY",null,v.y);var q=lineAngleFromDelta(R.midDispX,R.midDispY);k("labelAutoAngle",null,q);var M=function(){if(M.cache)return M.cache;for(var I=[],N=0;N+5<R.allpts.length;N+=4){var F={x:R.allpts[N],y:R.allpts[N+1]},H={x:R.allpts[N+2],y:R.allpts[N+3]},G={x:R.allpts[N+4],y:R.allpts[N+5]};I.push({p0:F,p1:H,p2:G,startDist:0,length:0,segments:[]})}var V=S.rstyle.bezierPts,j=T.bezierProjPcts.length;function W(ee,ne,oe,ue,ce){var de=dist$1(ne,oe),pe=ee.segments[ee.segments.length-1],_e={p0:ne,p1:oe,t0:ue,t1:ce,startDist:pe?pe.startDist+pe.length:0,length:de};ee.segments.push(_e),ee.length+=de}for(var X=0;X<I.length;X++){var J=I[X],te=I[X-1];te&&(J.startDist=te.startDist+te.length),W(J,J.p0,V[X*j],0,T.bezierProjPcts[0]);for(var re=0;re<j-1;re++)W(J,V[X*j+re],V[X*j+re+1],T.bezierProjPcts[re],T.bezierProjPcts[re+1]);W(J,V[X*j+j-1],J.p2,T.bezierProjPcts[j-1],1)}return M.cache=I},D=function(I){var N,F=I==="source";if(A[I]){var H=_.pstyle(I+"-text-offset").pfValue;switch(R.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var G=M(),V,j=0,W=0,X=0;X<G.length;X++){for(var J=G[F?X:G.length-1-X],te=0;te<J.segments.length;te++){var re=J.segments[F?te:J.segments.length-1-te],ee=X===G.length-1&&te===J.segments.length-1;if(j=W,W+=re.length,W>=H||ee){V={cp:J,segment:re};break}}if(V)break}var ne=V.cp,oe=V.segment,ue=(H-j)/oe.length,ce=oe.t1-oe.t0,de=F?oe.t0+ce*ue:oe.t1-ce*ue;de=bound(0,de,1),v=qbezierPtAt(ne.p0,ne.p1,ne.p2,de),N=bezierAngle(ne.p0,ne.p1,ne.p2,de);break}case"straight":case"segments":case"haystack":{for(var pe=0,_e,Ee,ge,be,Ae=R.allpts.length,De=0;De+3<Ae&&(F?(ge={x:R.allpts[De],y:R.allpts[De+1]},be={x:R.allpts[De+2],y:R.allpts[De+3]}):(ge={x:R.allpts[Ae-2-De],y:R.allpts[Ae-1-De]},be={x:R.allpts[Ae-4-De],y:R.allpts[Ae-3-De]}),_e=dist$1(ge,be),Ee=pe,pe+=_e,!(pe>=H));De+=2);var ve=H-Ee,le=ve/_e;le=bound(0,le,1),v=lineAt(ge,be,le),N=lineAngle(ge,be);break}}k("labelX",I,v.x),k("labelY",I,v.y),k("labelAutoAngle",I,N)}};D("source"),D("target"),this.applyLabelDimensions(_)}};BRp$9.applyLabelDimensions=function(_){this.applyPrefixedLabelDimensions(_),_.isEdge()&&(this.applyPrefixedLabelDimensions(_,"source"),this.applyPrefixedLabelDimensions(_,"target"))};BRp$9.applyPrefixedLabelDimensions=function(_,v){var S=_._private,R=this.getLabelText(_,v),T=hashString(R,_._private.labelDimsKey);if(getPrefixedProperty(S.rscratch,"prefixedLabelDimsKey",v)!==T){setPrefixedProperty(S.rscratch,"prefixedLabelDimsKey",v,T);var A=this.calculateLabelDimensions(_,R),k=_.pstyle("line-height").pfValue,q=_.pstyle("text-wrap").strValue,M=getPrefixedProperty(S.rscratch,"labelWrapCachedLines",v)||[],D=q!=="wrap"?1:Math.max(M.length,1),L=A.height/D,I=L*k,N=A.width,F=A.height+(D-1)*(k-1)*L;setPrefixedProperty(S.rstyle,"labelWidth",v,N),setPrefixedProperty(S.rscratch,"labelWidth",v,N),setPrefixedProperty(S.rstyle,"labelHeight",v,F),setPrefixedProperty(S.rscratch,"labelHeight",v,F),setPrefixedProperty(S.rscratch,"labelLineHeight",v,I)}};BRp$9.getLabelText=function(_,v){var S=_._private,R=v?v+"-":"",T=_.pstyle(R+"label").strValue,A=_.pstyle("text-transform").value,k=function(Te,ye){return ye?(setPrefixedProperty(S.rscratch,Te,v,ye),ye):getPrefixedProperty(S.rscratch,Te,v)};if(!T)return"";A=="none"||(A=="uppercase"?T=T.toUpperCase():A=="lowercase"&&(T=T.toLowerCase()));var q=_.pstyle("text-wrap").value;if(q==="wrap"){var M=k("labelKey");if(M!=null&&k("labelWrapKey")===M)return k("labelWrapCachedText");for(var D="",L=T.split(`
`),I=_.pstyle("text-max-width").pfValue,N=_.pstyle("text-overflow-wrap").value,F=N==="anywhere",H=[],G=/[\s\u200b]+|$/g,V=0;V<L.length;V++){var j=L[V],W=this.calculateLabelDimensions(_,j),X=W.width;if(F){var J=j.split("").join(D);j=J}if(X>I){var te=j.matchAll(G),re="",ee=0,ne=_createForOfIteratorHelper(te),oe;try{for(ne.s();!(oe=ne.n()).done;){var ue=oe.value,ce=ue[0],de=j.substring(ee,ue.index);ee=ue.index+ce.length;var pe=re.length===0?de:re+de+ce,_e=this.calculateLabelDimensions(_,pe),Ee=_e.width;Ee<=I?re+=de+ce:(re&&H.push(re),re=de+ce)}}catch(me){ne.e(me)}finally{ne.f()}re.match(/^[\s\u200b]+$/)||H.push(re)}else H.push(j)}k("labelWrapCachedLines",H),T=k("labelWrapCachedText",H.join(`
`)),k("labelWrapKey",M)}else if(q==="ellipsis"){var ge=_.pstyle("text-max-width").pfValue,be="",Ae="",De=!1;if(this.calculateLabelDimensions(_,T).width<ge)return T;for(var ve=0;ve<T.length;ve++){var le=this.calculateLabelDimensions(_,be+T[ve]+Ae).width;if(le>ge)break;be+=T[ve],ve===T.length-1&&(De=!0)}return De||(be+=Ae),be}return T};BRp$9.getLabelJustification=function(_){var v=_.pstyle("text-justification").strValue,S=_.pstyle("text-halign").strValue;if(v==="auto")if(_.isNode())switch(S){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return v};BRp$9.calculateLabelDimensions=function(_,v){var S=this,R=S.cy.window(),T=R.document,A=0,k=_.pstyle("font-style").strValue,q=_.pstyle("font-size").pfValue,M=_.pstyle("font-family").strValue,D=_.pstyle("font-weight").strValue,L=this.labelCalcCanvas,I=this.labelCalcCanvasContext;if(!L){L=this.labelCalcCanvas=T.createElement("canvas"),I=this.labelCalcCanvasContext=L.getContext("2d");var N=L.style;N.position="absolute",N.left="-9999px",N.top="-9999px",N.zIndex="-1",N.visibility="hidden",N.pointerEvents="none"}I.font="".concat(k," ").concat(D," ").concat(q,"px ").concat(M);for(var F=0,H=0,G=v.split(`
`),V=0;V<G.length;V++){var j=G[V],W=I.measureText(j),X=Math.ceil(W.width),J=q;F=Math.max(X,F),H+=J}return F+=A,H+=A,{width:F,height:H}};BRp$9.calculateLabelAngle=function(_,v){var S=_._private,R=S.rscratch,T=_.isEdge(),A=v?v+"-":"",k=_.pstyle(A+"text-rotation"),q=k.strValue;return q==="none"?0:T&&q==="autorotate"?R.labelAutoAngle:q==="autorotate"?0:k.pfValue};BRp$9.calculateLabelAngles=function(_){var v=this,S=_.isEdge(),R=_._private,T=R.rscratch;T.labelAngle=v.calculateLabelAngle(_),S&&(T.sourceLabelAngle=v.calculateLabelAngle(_,"source"),T.targetLabelAngle=v.calculateLabelAngle(_,"target"))};var BRp$8={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$8.getNodeShape=function(_){var v=this,S=_.pstyle("shape").value;if(S==="cutrectangle"&&(_.width()<TOO_SMALL_CUT_RECT||_.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(_.isParent())return S==="rectangle"||S==="roundrectangle"||S==="round-rectangle"||S==="cutrectangle"||S==="cut-rectangle"||S==="barrel"?S:"rectangle";if(S==="polygon"){var R=_.pstyle("shape-polygon-points").value;return v.nodeShapes.makePolygon(R).name}return S};var BRp$7={};BRp$7.registerCalculationListeners=function(){var _=this.cy,v=_.collection(),S=this,R=function(k){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(v.merge(k),q)for(var M=0;M<k.length;M++){var D=k[M],L=D._private,I=L.rstyle;I.clean=!1,I.cleanConnected=!1}};S.binder(_).on("bounds.* dirty.*",function(k){var q=k.target;R(q)}).on("style.* background.*",function(k){var q=k.target;R(q,!1)});var T=function(k){if(k){var q=S.onUpdateEleCalcsFns;v.cleanStyle();for(var M=0;M<v.length;M++){var D=v[M],L=D._private.rstyle;D.isNode()&&!L.cleanConnected&&(R(D.connectedEdges()),L.cleanConnected=!0)}if(q)for(var I=0;I<q.length;I++){var N=q[I];N(k,v)}S.recalculateRenderedStyle(v),v=_.collection()}};S.flushRenderedStyleQueue=function(){T(!0)},S.beforeRender(T,S.beforeRenderPriorities.eleCalcs)};BRp$7.onUpdateEleCalcs=function(_){var v=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];v.push(_)};BRp$7.recalculateRenderedStyle=function(_,v){var S=function(J){return J._private.rstyle.cleanConnected};if(_.length!==0){var R=[],T=[];if(!this.destroyed){v===void 0&&(v=!0);for(var A=0;A<_.length;A++){var k=_[A],q=k._private,M=q.rstyle;k.isEdge()&&(!S(k.source())||!S(k.target()))&&(M.clean=!1),k.isEdge()&&k.isBundledBezier()&&k.parallelEdges().some(function(X){return!X._private.rstyle.clean&&X.isBundledBezier()})&&(M.clean=!1),!(v&&M.clean||k.removed())&&k.pstyle("display").value!=="none"&&(q.group==="nodes"?T.push(k):R.push(k),M.clean=!0)}for(var D=0;D<T.length;D++){var L=T[D],I=L._private,N=I.rstyle,F=L.position();this.recalculateNodeLabelProjection(L),N.nodeX=F.x,N.nodeY=F.y,N.nodeW=L.pstyle("width").pfValue,N.nodeH=L.pstyle("height").pfValue}this.recalculateEdgeProjections(R);for(var H=0;H<R.length;H++){var G=R[H],V=G._private,j=V.rstyle,W=V.rscratch;j.srcX=W.arrowStartX,j.srcY=W.arrowStartY,j.tgtX=W.arrowEndX,j.tgtY=W.arrowEndY,j.midX=W.midX,j.midY=W.midY,j.labelAngle=W.labelAngle,j.sourceLabelAngle=W.sourceLabelAngle,j.targetLabelAngle=W.targetLabelAngle}}}};var BRp$6={};BRp$6.updateCachedGrabbedEles=function(){var _=this.cachedZSortedEles;if(_){_.drag=[],_.nondrag=[];for(var v=[],S=0;S<_.length;S++){var R=_[S],T=R._private.rscratch;R.grabbed()&&!R.isParent()?v.push(R):T.inDragLayer?_.drag.push(R):_.nondrag.push(R)}for(var S=0;S<v.length;S++){var R=v[S];_.drag.push(R)}}};BRp$6.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};BRp$6.getCachedZSortedEles=function(_){if(_||!this.cachedZSortedEles){var v=this.cy.mutableElements().toArray();v.sort(zIndexSort),v.interactive=v.filter(function(S){return S.interactive()}),this.cachedZSortedEles=v,this.updateCachedGrabbedEles()}else v=this.cachedZSortedEles;return v};var BRp$5={};[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach(function(_){extend(BRp$5,_)});var BRp$4={};BRp$4.getCachedImage=function(_,v,S){var R=this,T=R.imageCache=R.imageCache||{},A=T[_];if(A)return A.image.complete||A.image.addEventListener("load",S),A.image;A=T[_]=T[_]||{};var k=A.image=new Image;k.addEventListener("load",S),k.addEventListener("error",function(){k.error=!0});var q="data:",M=_.substring(0,q.length).toLowerCase()===q;return M||(v=v==="null"?null:v,k.crossOrigin=v),k.src=_,k};var BRp$3={};BRp$3.registerBinding=function(_,v,S,R){var T=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(_)){for(var A=[],k=0;k<_.length;k++){var q=_[k];if(q!==void 0){var M=this.binder(q);A.push(M.on.apply(M,T))}}return A}var M=this.binder(_);return M.on.apply(M,T)};BRp$3.binder=function(_){var v=this,S=v.cy.window(),R=_===S||_===S.document||_===S.document.body||domElement(_);if(v.supportsPassiveEvents==null){var T=!1;try{var A=Object.defineProperty({},"passive",{get:function(){return T=!0,!0}});S.addEventListener("test",null,A)}catch{}v.supportsPassiveEvents=T}var k=function(M,D,L){var I=Array.prototype.slice.call(arguments);return R&&v.supportsPassiveEvents&&(I[2]={capture:L??!1,passive:!1,once:!1}),v.bindings.push({target:_,args:I}),(_.addEventListener||_.on).apply(_,I),this};return{on:k,addEventListener:k,addListener:k,bind:k}};BRp$3.nodeIsDraggable=function(_){return _&&_.isNode()&&!_.locked()&&_.grabbable()};BRp$3.nodeIsGrabbable=function(_){return this.nodeIsDraggable(_)&&_.interactive()};BRp$3.load=function(){var _=this,v=_.cy.window(),S=function(we){return we.selected()},R=function(we){var Fe=we.getRootNode();if(Fe&&Fe.nodeType===11&&Fe.host!==void 0)return Fe},T=function(we,Fe,Ge,Ze){we==null&&(we=_.cy);for(var rt=0;rt<Fe.length;rt++){var _t=Fe[rt];we.emit({originalEvent:Ge,type:_t,position:Ze})}},A=function(we){return we.shiftKey||we.metaKey||we.ctrlKey},k=function(we,Fe){var Ge=!0;if(_.cy.hasCompoundNodes()&&we&&we.pannable())for(var Ze=0;Fe&&Ze<Fe.length;Ze++){var we=Fe[Ze];if(we.isNode()&&we.isParent()&&!we.pannable()){Ge=!1;break}}else Ge=!0;return Ge},q=function(we){we[0]._private.grabbed=!0},M=function(we){we[0]._private.grabbed=!1},D=function(we){we[0]._private.rscratch.inDragLayer=!0},L=function(we){we[0]._private.rscratch.inDragLayer=!1},I=function(we){we[0]._private.rscratch.isGrabTarget=!0},N=function(we){we[0]._private.rscratch.isGrabTarget=!1},F=function(we,Fe){var Ge=Fe.addToList,Ze=Ge.has(we);!Ze&&we.grabbable()&&!we.locked()&&(Ge.merge(we),q(we))},H=function(we,Fe){if(we.cy().hasCompoundNodes()&&!(Fe.inDragLayer==null&&Fe.addToList==null)){var Ge=we.descendants();Fe.inDragLayer&&(Ge.forEach(D),Ge.connectedEdges().forEach(D)),Fe.addToList&&F(Ge,Fe)}},G=function(we,Fe){Fe=Fe||{};var Ge=we.cy().hasCompoundNodes();Fe.inDragLayer&&(we.forEach(D),we.neighborhood().stdFilter(function(Ze){return!Ge||Ze.isEdge()}).forEach(D)),Fe.addToList&&we.forEach(function(Ze){F(Ze,Fe)}),H(we,Fe),W(we,{inDragLayer:Fe.inDragLayer}),_.updateCachedGrabbedEles()},V=G,j=function(we){we&&(_.getCachedZSortedEles().forEach(function(Fe){M(Fe),L(Fe),N(Fe)}),_.updateCachedGrabbedEles())},W=function(we,Fe){if(!(Fe.inDragLayer==null&&Fe.addToList==null)&&we.cy().hasCompoundNodes()){var Ge=we.ancestors().orphans();if(!Ge.same(we)){var Ze=Ge.descendants().spawnSelf().merge(Ge).unmerge(we).unmerge(we.descendants()),rt=Ze.connectedEdges();Fe.inDragLayer&&(rt.forEach(D),Ze.forEach(D)),Fe.addToList&&Ze.forEach(function(_t){F(_t,Fe)})}}},X=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},J=typeof MutationObserver<"u",te=typeof ResizeObserver<"u";J?(_.removeObserver=new MutationObserver(function(et){for(var we=0;we<et.length;we++){var Fe=et[we],Ge=Fe.removedNodes;if(Ge)for(var Ze=0;Ze<Ge.length;Ze++){var rt=Ge[Ze];if(rt===_.container){_.destroy();break}}}}),_.container.parentNode&&_.removeObserver.observe(_.container.parentNode,{childList:!0})):_.registerBinding(_.container,"DOMNodeRemoved",function(et){_.destroy()});var re=debounce(function(){_.cy.resize()},100);J&&(_.styleObserver=new MutationObserver(re),_.styleObserver.observe(_.container,{attributes:!0})),_.registerBinding(v,"resize",re),te&&(_.resizeObserver=new ResizeObserver(re),_.resizeObserver.observe(_.container));var ee=function(we,Fe){for(;we!=null;)Fe(we),we=we.parentNode},ne=function(){_.invalidateContainerClientCoordsCache()};ee(_.container,function(et){_.registerBinding(et,"transitionend",ne),_.registerBinding(et,"animationend",ne),_.registerBinding(et,"scroll",ne)}),_.registerBinding(_.container,"contextmenu",function(et){et.preventDefault()});var oe=function(){return _.selection[4]!==0},ue=function(we){for(var Fe=_.findContainerClientCoords(),Ge=Fe[0],Ze=Fe[1],rt=Fe[2],_t=Fe[3],ot=we.touches?we.touches:[we],Tt=!1,Rt=0;Rt<ot.length;Rt++){var qt=ot[Rt];if(Ge<=qt.clientX&&qt.clientX<=Ge+rt&&Ze<=qt.clientY&&qt.clientY<=Ze+_t){Tt=!0;break}}if(!Tt)return!1;for(var Nt=_.container,yt=we.target,vt=yt.parentNode,Dt=!1;vt;){if(vt===Nt){Dt=!0;break}vt=vt.parentNode}return!!Dt};_.registerBinding(_.container,"mousedown",function(we){if(ue(we)&&!(_.hoverData.which===1&&we.which!==1)){we.preventDefault(),X(),_.hoverData.capture=!0,_.hoverData.which=we.which;var Fe=_.cy,Ge=[we.clientX,we.clientY],Ze=_.projectIntoViewport(Ge[0],Ge[1]),rt=_.selection,_t=_.findNearestElements(Ze[0],Ze[1],!0,!1),ot=_t[0],Tt=_.dragData.possibleDragElements;_.hoverData.mdownPos=Ze,_.hoverData.mdownGPos=Ge;var Rt=function(It){return{originalEvent:we,type:It,position:{x:Ze[0],y:Ze[1]}}},qt=function(){_.hoverData.tapholdCancelled=!1,clearTimeout(_.hoverData.tapholdTimeout),_.hoverData.tapholdTimeout=setTimeout(function(){if(!_.hoverData.tapholdCancelled){var It=_.hoverData.down;It?It.emit(Rt("taphold")):Fe.emit(Rt("taphold"))}},_.tapholdDuration)};if(we.which==3){_.hoverData.cxtStarted=!0;var Nt={originalEvent:we,type:"cxttapstart",position:{x:Ze[0],y:Ze[1]}};ot?(ot.activate(),ot.emit(Nt),_.hoverData.down=ot):Fe.emit(Nt),_.hoverData.downTime=new Date().getTime(),_.hoverData.cxtDragged=!1}else if(we.which==1){ot&&ot.activate();{if(ot!=null&&_.nodeIsGrabbable(ot)){var yt=function(It){It.emit(Rt("grab"))};if(I(ot),!ot.selected())Tt=_.dragData.possibleDragElements=Fe.collection(),V(ot,{addToList:Tt}),ot.emit(Rt("grabon")).emit(Rt("grab"));else{Tt=_.dragData.possibleDragElements=Fe.collection();var vt=Fe.$(function(Dt){return Dt.isNode()&&Dt.selected()&&_.nodeIsGrabbable(Dt)});G(vt,{addToList:Tt}),ot.emit(Rt("grabon")),vt.forEach(yt)}_.redrawHint("eles",!0),_.redrawHint("drag",!0)}_.hoverData.down=ot,_.hoverData.downs=_t,_.hoverData.downTime=new Date().getTime()}T(ot,["mousedown","tapstart","vmousedown"],we,{x:Ze[0],y:Ze[1]}),ot==null?(rt[4]=1,_.data.bgActivePosistion={x:Ze[0],y:Ze[1]},_.redrawHint("select",!0),_.redraw()):ot.pannable()&&(rt[4]=1),qt()}rt[0]=rt[2]=Ze[0],rt[1]=rt[3]=Ze[1]}},!1);var ce=R(_.container);_.registerBinding([v,ce],"mousemove",function(we){var Fe=_.hoverData.capture;if(!(!Fe&&!ue(we))){var Ge=!1,Ze=_.cy,rt=Ze.zoom(),_t=[we.clientX,we.clientY],ot=_.projectIntoViewport(_t[0],_t[1]),Tt=_.hoverData.mdownPos,Rt=_.hoverData.mdownGPos,qt=_.selection,Nt=null;!_.hoverData.draggingEles&&!_.hoverData.dragging&&!_.hoverData.selecting&&(Nt=_.findNearestElement(ot[0],ot[1],!0,!1));var yt=_.hoverData.last,vt=_.hoverData.down,Dt=[ot[0]-qt[2],ot[1]-qt[3]],It=_.dragData.possibleDragElements,or;if(Rt){var Vt=_t[0]-Rt[0],ur=Vt*Vt,dr=_t[1]-Rt[1],sr=dr*dr,rr=ur+sr;_.hoverData.isOverThresholdDrag=or=rr>=_.desktopTapThreshold2}var _r=A(we);or&&(_.hoverData.tapholdCancelled=!0);var Pr=function(){var Xr=_.hoverData.dragDelta=_.hoverData.dragDelta||[];Xr.length===0?(Xr.push(Dt[0]),Xr.push(Dt[1])):(Xr[0]+=Dt[0],Xr[1]+=Dt[1])};Ge=!0,T(Nt,["mousemove","vmousemove","tapdrag"],we,{x:ot[0],y:ot[1]});var Er=function(Xr){return{originalEvent:we,type:Xr,position:{x:ot[0],y:ot[1]}}},kn=function(){_.data.bgActivePosistion=void 0,_.hoverData.selecting||Ze.emit(Er("boxstart")),qt[4]=1,_.hoverData.selecting=!0,_.redrawHint("select",!0),_.redraw()};if(_.hoverData.which===3){if(or){var Fr=Er("cxtdrag");vt?vt.emit(Fr):Ze.emit(Fr),_.hoverData.cxtDragged=!0,(!_.hoverData.cxtOver||Nt!==_.hoverData.cxtOver)&&(_.hoverData.cxtOver&&_.hoverData.cxtOver.emit(Er("cxtdragout")),_.hoverData.cxtOver=Nt,Nt&&Nt.emit(Er("cxtdragover")))}}else if(_.hoverData.dragging){if(Ge=!0,Ze.panningEnabled()&&Ze.userPanningEnabled()){var Tr;if(_.hoverData.justStartedPan){var zr=_.hoverData.mdownPos;Tr={x:(ot[0]-zr[0])*rt,y:(ot[1]-zr[1])*rt},_.hoverData.justStartedPan=!1}else Tr={x:Dt[0]*rt,y:Dt[1]*rt};Ze.panBy(Tr),Ze.emit(Er("dragpan")),_.hoverData.dragged=!0}ot=_.projectIntoViewport(we.clientX,we.clientY)}else if(qt[4]==1&&(vt==null||vt.pannable())){if(or){if(!_.hoverData.dragging&&Ze.boxSelectionEnabled()&&(_r||!Ze.panningEnabled()||!Ze.userPanningEnabled()))kn();else if(!_.hoverData.selecting&&Ze.panningEnabled()&&Ze.userPanningEnabled()){var Sn=k(vt,_.hoverData.downs);Sn&&(_.hoverData.dragging=!0,_.hoverData.justStartedPan=!0,qt[4]=0,_.data.bgActivePosistion=array2point(Tt),_.redrawHint("select",!0),_.redraw())}vt&&vt.pannable()&&vt.active()&&vt.unactivate()}}else{if(vt&&vt.pannable()&&vt.active()&&vt.unactivate(),(!vt||!vt.grabbed())&&Nt!=yt&&(yt&&T(yt,["mouseout","tapdragout"],we,{x:ot[0],y:ot[1]}),Nt&&T(Nt,["mouseover","tapdragover"],we,{x:ot[0],y:ot[1]}),_.hoverData.last=Nt),vt)if(or){if(Ze.boxSelectionEnabled()&&_r)vt&&vt.grabbed()&&(j(It),vt.emit(Er("freeon")),It.emit(Er("free")),_.dragData.didDrag&&(vt.emit(Er("dragfreeon")),It.emit(Er("dragfree")))),kn();else if(vt&&vt.grabbed()&&_.nodeIsDraggable(vt)){var Kr=!_.dragData.didDrag;Kr&&_.redrawHint("eles",!0),_.dragData.didDrag=!0,_.hoverData.draggingEles||G(It,{inDragLayer:!0});var Wr={x:0,y:0};if(number$1(Dt[0])&&number$1(Dt[1])&&(Wr.x+=Dt[0],Wr.y+=Dt[1],Kr)){var pn=_.hoverData.dragDelta;pn&&number$1(pn[0])&&number$1(pn[1])&&(Wr.x+=pn[0],Wr.y+=pn[1])}_.hoverData.draggingEles=!0,It.silentShift(Wr).emit(Er("position")).emit(Er("drag")),_.redrawHint("drag",!0),_.redraw()}}else Pr();Ge=!0}if(qt[2]=ot[0],qt[3]=ot[1],Ge)return we.stopPropagation&&we.stopPropagation(),we.preventDefault&&we.preventDefault(),!1}},!1);var de,pe,_e;_.registerBinding(v,"mouseup",function(we){if(!(_.hoverData.which===1&&we.which!==1&&_.hoverData.capture)){var Fe=_.hoverData.capture;if(Fe){_.hoverData.capture=!1;var Ge=_.cy,Ze=_.projectIntoViewport(we.clientX,we.clientY),rt=_.selection,_t=_.findNearestElement(Ze[0],Ze[1],!0,!1),ot=_.dragData.possibleDragElements,Tt=_.hoverData.down,Rt=A(we);_.data.bgActivePosistion&&(_.redrawHint("select",!0),_.redraw()),_.hoverData.tapholdCancelled=!0,_.data.bgActivePosistion=void 0,Tt&&Tt.unactivate();var qt=function(Vt){return{originalEvent:we,type:Vt,position:{x:Ze[0],y:Ze[1]}}};if(_.hoverData.which===3){var Nt=qt("cxttapend");if(Tt?Tt.emit(Nt):Ge.emit(Nt),!_.hoverData.cxtDragged){var yt=qt("cxttap");Tt?Tt.emit(yt):Ge.emit(yt)}_.hoverData.cxtDragged=!1,_.hoverData.which=null}else if(_.hoverData.which===1){if(T(_t,["mouseup","tapend","vmouseup"],we,{x:Ze[0],y:Ze[1]}),!_.dragData.didDrag&&!_.hoverData.dragged&&!_.hoverData.selecting&&!_.hoverData.isOverThresholdDrag&&(T(Tt,["click","tap","vclick"],we,{x:Ze[0],y:Ze[1]}),pe=!1,we.timeStamp-_e<=Ge.multiClickDebounceTime()?(de&&clearTimeout(de),pe=!0,_e=null,T(Tt,["dblclick","dbltap","vdblclick"],we,{x:Ze[0],y:Ze[1]})):(de=setTimeout(function(){pe||T(Tt,["oneclick","onetap","voneclick"],we,{x:Ze[0],y:Ze[1]})},Ge.multiClickDebounceTime()),_e=we.timeStamp)),Tt==null&&!_.dragData.didDrag&&!_.hoverData.selecting&&!_.hoverData.dragged&&!A(we)&&(Ge.$(S).unselect(["tapunselect"]),ot.length>0&&_.redrawHint("eles",!0),_.dragData.possibleDragElements=ot=Ge.collection()),_t==Tt&&!_.dragData.didDrag&&!_.hoverData.selecting&&_t!=null&&_t._private.selectable&&(_.hoverData.dragging||(Ge.selectionType()==="additive"||Rt?_t.selected()?_t.unselect(["tapunselect"]):_t.select(["tapselect"]):Rt||(Ge.$(S).unmerge(_t).unselect(["tapunselect"]),_t.select(["tapselect"]))),_.redrawHint("eles",!0)),_.hoverData.selecting){var vt=Ge.collection(_.getAllInBox(rt[0],rt[1],rt[2],rt[3]));_.redrawHint("select",!0),vt.length>0&&_.redrawHint("eles",!0),Ge.emit(qt("boxend"));var Dt=function(Vt){return Vt.selectable()&&!Vt.selected()};Ge.selectionType()==="additive"||Rt||Ge.$(S).unmerge(vt).unselect(),vt.emit(qt("box")).stdFilter(Dt).select().emit(qt("boxselect")),_.redraw()}if(_.hoverData.dragging&&(_.hoverData.dragging=!1,_.redrawHint("select",!0),_.redrawHint("eles",!0),_.redraw()),!rt[4]){_.redrawHint("drag",!0),_.redrawHint("eles",!0);var It=Tt&&Tt.grabbed();j(ot),It&&(Tt.emit(qt("freeon")),ot.emit(qt("free")),_.dragData.didDrag&&(Tt.emit(qt("dragfreeon")),ot.emit(qt("dragfree"))))}}rt[4]=0,_.hoverData.down=null,_.hoverData.cxtStarted=!1,_.hoverData.draggingEles=!1,_.hoverData.selecting=!1,_.hoverData.isOverThresholdDrag=!1,_.dragData.didDrag=!1,_.hoverData.dragged=!1,_.hoverData.dragDelta=[],_.hoverData.mdownPos=null,_.hoverData.mdownGPos=null,_.hoverData.which=null}}},!1);var Ee=[],ge=4,be,Ae=1e5,De=function(we,Fe){for(var Ge=0;Ge<we.length;Ge++)if(we[Ge]%Fe!==0)return!1;return!0},ve=function(we){for(var Fe=Math.abs(we[0]),Ge=1;Ge<we.length;Ge++)if(Math.abs(we[Ge])!==Fe)return!1;return!0},le=function(we){var Fe=!1,Ge=we.deltaY;if(Ge==null&&(we.wheelDeltaY!=null?Ge=we.wheelDeltaY/4:we.wheelDelta!=null&&(Ge=we.wheelDelta/4)),Ge!==0){if(be==null)if(Ee.length>=ge){var Ze=Ee;if(be=De(Ze,5),!be){var rt=Math.abs(Ze[0]);be=ve(Ze)&&rt>5}if(be)for(var _t=0;_t<Ze.length;_t++)Ae=Math.min(Math.abs(Ze[_t]),Ae)}else Ee.push(Ge),Fe=!0;else be&&(Ae=Math.min(Math.abs(Ge),Ae));if(!_.scrollingPage){var ot=_.cy,Tt=ot.zoom(),Rt=ot.pan(),qt=_.projectIntoViewport(we.clientX,we.clientY),Nt=[qt[0]*Tt+Rt.x,qt[1]*Tt+Rt.y];if(_.hoverData.draggingEles||_.hoverData.dragging||_.hoverData.cxtStarted||oe()){we.preventDefault();return}if(ot.panningEnabled()&&ot.userPanningEnabled()&&ot.zoomingEnabled()&&ot.userZoomingEnabled()){we.preventDefault(),_.data.wheelZooming=!0,clearTimeout(_.data.wheelTimeout),_.data.wheelTimeout=setTimeout(function(){_.data.wheelZooming=!1,_.redrawHint("eles",!0),_.redraw()},150);var yt;Fe&&Math.abs(Ge)>5&&(Ge=signum(Ge)*5),yt=Ge/-250,be&&(yt/=Ae,yt*=3),yt=yt*_.wheelSensitivity;var vt=we.deltaMode===1;vt&&(yt*=33);var Dt=ot.zoom()*Math.pow(10,yt);we.type==="gesturechange"&&(Dt=_.gestureStartZoom*we.scale),ot.zoom({level:Dt,renderedPosition:{x:Nt[0],y:Nt[1]}}),ot.emit({type:we.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:we,position:{x:qt[0],y:qt[1]}})}}}};_.registerBinding(_.container,"wheel",le,!0),_.registerBinding(v,"scroll",function(we){_.scrollingPage=!0,clearTimeout(_.scrollingPageTimeout),_.scrollingPageTimeout=setTimeout(function(){_.scrollingPage=!1},250)},!0),_.registerBinding(_.container,"gesturestart",function(we){_.gestureStartZoom=_.cy.zoom(),_.hasTouchStarted||we.preventDefault()},!0),_.registerBinding(_.container,"gesturechange",function(et){_.hasTouchStarted||le(et)},!0),_.registerBinding(_.container,"mouseout",function(we){var Fe=_.projectIntoViewport(we.clientX,we.clientY);_.cy.emit({originalEvent:we,type:"mouseout",position:{x:Fe[0],y:Fe[1]}})},!1),_.registerBinding(_.container,"mouseover",function(we){var Fe=_.projectIntoViewport(we.clientX,we.clientY);_.cy.emit({originalEvent:we,type:"mouseover",position:{x:Fe[0],y:Fe[1]}})},!1);var me,Te,ye,Re,qe,ke,ze,Ne,Pe,Me,Ie,Le,nt,lt=function(we,Fe,Ge,Ze){return Math.sqrt((Ge-we)*(Ge-we)+(Ze-Fe)*(Ze-Fe))},dt=function(we,Fe,Ge,Ze){return(Ge-we)*(Ge-we)+(Ze-Fe)*(Ze-Fe)},pt;_.registerBinding(_.container,"touchstart",pt=function(we){if(_.hasTouchStarted=!0,!!ue(we)){X(),_.touchData.capture=!0,_.data.bgActivePosistion=void 0;var Fe=_.cy,Ge=_.touchData.now,Ze=_.touchData.earlier;if(we.touches[0]){var rt=_.projectIntoViewport(we.touches[0].clientX,we.touches[0].clientY);Ge[0]=rt[0],Ge[1]=rt[1]}if(we.touches[1]){var rt=_.projectIntoViewport(we.touches[1].clientX,we.touches[1].clientY);Ge[2]=rt[0],Ge[3]=rt[1]}if(we.touches[2]){var rt=_.projectIntoViewport(we.touches[2].clientX,we.touches[2].clientY);Ge[4]=rt[0],Ge[5]=rt[1]}var _t=function(_r){return{originalEvent:we,type:_r,position:{x:Ge[0],y:Ge[1]}}};if(we.touches[1]){_.touchData.singleTouchMoved=!0,j(_.dragData.touchDragEles);var ot=_.findContainerClientCoords();Pe=ot[0],Me=ot[1],Ie=ot[2],Le=ot[3],me=we.touches[0].clientX-Pe,Te=we.touches[0].clientY-Me,ye=we.touches[1].clientX-Pe,Re=we.touches[1].clientY-Me,nt=0<=me&&me<=Ie&&0<=ye&&ye<=Ie&&0<=Te&&Te<=Le&&0<=Re&&Re<=Le;var Tt=Fe.pan(),Rt=Fe.zoom();qe=lt(me,Te,ye,Re),ke=dt(me,Te,ye,Re),ze=[(me+ye)/2,(Te+Re)/2],Ne=[(ze[0]-Tt.x)/Rt,(ze[1]-Tt.y)/Rt];var qt=200,Nt=qt*qt;if(ke<Nt&&!we.touches[2]){var yt=_.findNearestElement(Ge[0],Ge[1],!0,!0),vt=_.findNearestElement(Ge[2],Ge[3],!0,!0);yt&&yt.isNode()?(yt.activate().emit(_t("cxttapstart")),_.touchData.start=yt):vt&&vt.isNode()?(vt.activate().emit(_t("cxttapstart")),_.touchData.start=vt):Fe.emit(_t("cxttapstart")),_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxt=!0,_.touchData.cxtDragged=!1,_.data.bgActivePosistion=void 0,_.redraw();return}}if(we.touches[2])Fe.boxSelectionEnabled()&&we.preventDefault();else if(!we.touches[1]){if(we.touches[0]){var Dt=_.findNearestElements(Ge[0],Ge[1],!0,!0),It=Dt[0];if(It!=null&&(It.activate(),_.touchData.start=It,_.touchData.starts=Dt,_.nodeIsGrabbable(It))){var or=_.dragData.touchDragEles=Fe.collection(),Vt=null;_.redrawHint("eles",!0),_.redrawHint("drag",!0),It.selected()?(Vt=Fe.$(function(rr){return rr.selected()&&_.nodeIsGrabbable(rr)}),G(Vt,{addToList:or})):V(It,{addToList:or}),I(It),It.emit(_t("grabon")),Vt?Vt.forEach(function(rr){rr.emit(_t("grab"))}):It.emit(_t("grab"))}T(It,["touchstart","tapstart","vmousedown"],we,{x:Ge[0],y:Ge[1]}),It==null&&(_.data.bgActivePosistion={x:rt[0],y:rt[1]},_.redrawHint("select",!0),_.redraw()),_.touchData.singleTouchMoved=!1,_.touchData.singleTouchStartTime=+new Date,clearTimeout(_.touchData.tapholdTimeout),_.touchData.tapholdTimeout=setTimeout(function(){_.touchData.singleTouchMoved===!1&&!_.pinching&&!_.touchData.selecting&&T(_.touchData.start,["taphold"],we,{x:Ge[0],y:Ge[1]})},_.tapholdDuration)}}if(we.touches.length>=1){for(var ur=_.touchData.startPosition=[null,null,null,null,null,null],dr=0;dr<Ge.length;dr++)ur[dr]=Ze[dr]=Ge[dr];var sr=we.touches[0];_.touchData.startGPosition=[sr.clientX,sr.clientY]}}},!1);var We;_.registerBinding(v,"touchmove",We=function(we){var Fe=_.touchData.capture;if(!(!Fe&&!ue(we))){var Ge=_.selection,Ze=_.cy,rt=_.touchData.now,_t=_.touchData.earlier,ot=Ze.zoom();if(we.touches[0]){var Tt=_.projectIntoViewport(we.touches[0].clientX,we.touches[0].clientY);rt[0]=Tt[0],rt[1]=Tt[1]}if(we.touches[1]){var Tt=_.projectIntoViewport(we.touches[1].clientX,we.touches[1].clientY);rt[2]=Tt[0],rt[3]=Tt[1]}if(we.touches[2]){var Tt=_.projectIntoViewport(we.touches[2].clientX,we.touches[2].clientY);rt[4]=Tt[0],rt[5]=Tt[1]}var Rt=function(ls){return{originalEvent:we,type:ls,position:{x:rt[0],y:rt[1]}}},qt=_.touchData.startGPosition,Nt;if(Fe&&we.touches[0]&&qt){for(var yt=[],vt=0;vt<rt.length;vt++)yt[vt]=rt[vt]-_t[vt];var Dt=we.touches[0].clientX-qt[0],It=Dt*Dt,or=we.touches[0].clientY-qt[1],Vt=or*or,ur=It+Vt;Nt=ur>=_.touchTapThreshold2}if(Fe&&_.touchData.cxt){we.preventDefault();var dr=we.touches[0].clientX-Pe,sr=we.touches[0].clientY-Me,rr=we.touches[1].clientX-Pe,_r=we.touches[1].clientY-Me,Pr=dt(dr,sr,rr,_r),Er=Pr/ke,kn=150,Fr=kn*kn,Tr=1.5,zr=Tr*Tr;if(Er>=zr||Pr>=Fr){_.touchData.cxt=!1,_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var Sn=Rt("cxttapend");_.touchData.start?(_.touchData.start.unactivate().emit(Sn),_.touchData.start=null):Ze.emit(Sn)}}if(Fe&&_.touchData.cxt){var Sn=Rt("cxtdrag");_.data.bgActivePosistion=void 0,_.redrawHint("select",!0),_.touchData.start?_.touchData.start.emit(Sn):Ze.emit(Sn),_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxtDragged=!0;var Kr=_.findNearestElement(rt[0],rt[1],!0,!0);(!_.touchData.cxtOver||Kr!==_.touchData.cxtOver)&&(_.touchData.cxtOver&&_.touchData.cxtOver.emit(Rt("cxtdragout")),_.touchData.cxtOver=Kr,Kr&&Kr.emit(Rt("cxtdragover")))}else if(Fe&&we.touches[2]&&Ze.boxSelectionEnabled())we.preventDefault(),_.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,_.touchData.selecting||Ze.emit(Rt("boxstart")),_.touchData.selecting=!0,_.touchData.didSelect=!0,Ge[4]=1,!Ge||Ge.length===0||Ge[0]===void 0?(Ge[0]=(rt[0]+rt[2]+rt[4])/3,Ge[1]=(rt[1]+rt[3]+rt[5])/3,Ge[2]=(rt[0]+rt[2]+rt[4])/3+1,Ge[3]=(rt[1]+rt[3]+rt[5])/3+1):(Ge[2]=(rt[0]+rt[2]+rt[4])/3,Ge[3]=(rt[1]+rt[3]+rt[5])/3),_.redrawHint("select",!0),_.redraw();else if(Fe&&we.touches[1]&&!_.touchData.didSelect&&Ze.zoomingEnabled()&&Ze.panningEnabled()&&Ze.userZoomingEnabled()&&Ze.userPanningEnabled()){we.preventDefault(),_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var Wr=_.dragData.touchDragEles;if(Wr){_.redrawHint("drag",!0);for(var pn=0;pn<Wr.length;pn++){var wa=Wr[pn]._private;wa.grabbed=!1,wa.rscratch.inDragLayer=!1}}var Xr=_.touchData.start,dr=we.touches[0].clientX-Pe,sr=we.touches[0].clientY-Me,rr=we.touches[1].clientX-Pe,_r=we.touches[1].clientY-Me,ti=lt(dr,sr,rr,_r),Ca=ti/qe;if(nt){var Ea=dr-me,Ia=sr-Te,Ra=rr-ye,Lr=_r-Re,oa=(Ea+Ra)/2,is=(Ia+Lr)/2,En=Ze.zoom(),Xn=En*Ca,Hn=Ze.pan(),Di=Ne[0]*En+Hn.x,Mi=Ne[1]*En+Hn.y,ss={x:-Xn/En*(Di-Hn.x-oa)+Di,y:-Xn/En*(Mi-Hn.y-is)+Mi};if(Xr&&Xr.active()){var Wr=_.dragData.touchDragEles;j(Wr),_.redrawHint("drag",!0),_.redrawHint("eles",!0),Xr.unactivate().emit(Rt("freeon")),Wr.emit(Rt("free")),_.dragData.didDrag&&(Xr.emit(Rt("dragfreeon")),Wr.emit(Rt("dragfree")))}Ze.viewport({zoom:Xn,pan:ss,cancelOnFailedZoom:!0}),Ze.emit(Rt("pinchzoom")),qe=ti,me=dr,Te=sr,ye=rr,Re=_r,_.pinching=!0}if(we.touches[0]){var Tt=_.projectIntoViewport(we.touches[0].clientX,we.touches[0].clientY);rt[0]=Tt[0],rt[1]=Tt[1]}if(we.touches[1]){var Tt=_.projectIntoViewport(we.touches[1].clientX,we.touches[1].clientY);rt[2]=Tt[0],rt[3]=Tt[1]}if(we.touches[2]){var Tt=_.projectIntoViewport(we.touches[2].clientX,we.touches[2].clientY);rt[4]=Tt[0],rt[5]=Tt[1]}}else if(we.touches[0]&&!_.touchData.didSelect){var gn=_.touchData.start,la=_.touchData.last,Kr;if(!_.hoverData.draggingEles&&!_.swipePanning&&(Kr=_.findNearestElement(rt[0],rt[1],!0,!0)),Fe&&gn!=null&&we.preventDefault(),Fe&&gn!=null&&_.nodeIsDraggable(gn))if(Nt){var Wr=_.dragData.touchDragEles,Rn=!_.dragData.didDrag;Rn&&G(Wr,{inDragLayer:!0}),_.dragData.didDrag=!0;var en={x:0,y:0};if(number$1(yt[0])&&number$1(yt[1])&&(en.x+=yt[0],en.y+=yt[1],Rn)){_.redrawHint("eles",!0);var xn=_.touchData.dragDelta;xn&&number$1(xn[0])&&number$1(xn[1])&&(en.x+=xn[0],en.y+=xn[1])}_.hoverData.draggingEles=!0,Wr.silentShift(en).emit(Rt("position")).emit(Rt("drag")),_.redrawHint("drag",!0),_.touchData.startPosition[0]==_t[0]&&_.touchData.startPosition[1]==_t[1]&&_.redrawHint("eles",!0),_.redraw()}else{var xn=_.touchData.dragDelta=_.touchData.dragDelta||[];xn.length===0?(xn.push(yt[0]),xn.push(yt[1])):(xn[0]+=yt[0],xn[1]+=yt[1])}if(T(gn||Kr,["touchmove","tapdrag","vmousemove"],we,{x:rt[0],y:rt[1]}),(!gn||!gn.grabbed())&&Kr!=la&&(la&&la.emit(Rt("tapdragout")),Kr&&Kr.emit(Rt("tapdragover"))),_.touchData.last=Kr,Fe)for(var pn=0;pn<rt.length;pn++)rt[pn]&&_.touchData.startPosition[pn]&&Nt&&(_.touchData.singleTouchMoved=!0);if(Fe&&(gn==null||gn.pannable())&&Ze.panningEnabled()&&Ze.userPanningEnabled()){var Us=k(gn,_.touchData.starts);Us&&(we.preventDefault(),_.data.bgActivePosistion||(_.data.bgActivePosistion=array2point(_.touchData.startPosition)),_.swipePanning?(Ze.panBy({x:yt[0]*ot,y:yt[1]*ot}),Ze.emit(Rt("dragpan"))):Nt&&(_.swipePanning=!0,Ze.panBy({x:Dt*ot,y:or*ot}),Ze.emit(Rt("dragpan")),gn&&(gn.unactivate(),_.redrawHint("select",!0),_.touchData.start=null)));var Tt=_.projectIntoViewport(we.touches[0].clientX,we.touches[0].clientY);rt[0]=Tt[0],rt[1]=Tt[1]}}for(var vt=0;vt<rt.length;vt++)_t[vt]=rt[vt];Fe&&we.touches.length>0&&!_.hoverData.draggingEles&&!_.swipePanning&&_.data.bgActivePosistion!=null&&(_.data.bgActivePosistion=void 0,_.redrawHint("select",!0),_.redraw())}},!1);var wt;_.registerBinding(v,"touchcancel",wt=function(we){var Fe=_.touchData.start;_.touchData.capture=!1,Fe&&Fe.unactivate()});var st,St,gt,Et;if(_.registerBinding(v,"touchend",st=function(we){var Fe=_.touchData.start,Ge=_.touchData.capture;if(Ge)we.touches.length===0&&(_.touchData.capture=!1),we.preventDefault();else return;var Ze=_.selection;_.swipePanning=!1,_.hoverData.draggingEles=!1;var rt=_.cy,_t=rt.zoom(),ot=_.touchData.now,Tt=_.touchData.earlier;if(we.touches[0]){var Rt=_.projectIntoViewport(we.touches[0].clientX,we.touches[0].clientY);ot[0]=Rt[0],ot[1]=Rt[1]}if(we.touches[1]){var Rt=_.projectIntoViewport(we.touches[1].clientX,we.touches[1].clientY);ot[2]=Rt[0],ot[3]=Rt[1]}if(we.touches[2]){var Rt=_.projectIntoViewport(we.touches[2].clientX,we.touches[2].clientY);ot[4]=Rt[0],ot[5]=Rt[1]}var qt=function(Fr){return{originalEvent:we,type:Fr,position:{x:ot[0],y:ot[1]}}};Fe&&Fe.unactivate();var Nt;if(_.touchData.cxt){if(Nt=qt("cxttapend"),Fe?Fe.emit(Nt):rt.emit(Nt),!_.touchData.cxtDragged){var yt=qt("cxttap");Fe?Fe.emit(yt):rt.emit(yt)}_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxt=!1,_.touchData.start=null,_.redraw();return}if(!we.touches[2]&&rt.boxSelectionEnabled()&&_.touchData.selecting){_.touchData.selecting=!1;var vt=rt.collection(_.getAllInBox(Ze[0],Ze[1],Ze[2],Ze[3]));Ze[0]=void 0,Ze[1]=void 0,Ze[2]=void 0,Ze[3]=void 0,Ze[4]=0,_.redrawHint("select",!0),rt.emit(qt("boxend"));var Dt=function(Fr){return Fr.selectable()&&!Fr.selected()};vt.emit(qt("box")).stdFilter(Dt).select().emit(qt("boxselect")),vt.nonempty()&&_.redrawHint("eles",!0),_.redraw()}if(Fe?.unactivate(),we.touches[2])_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);else if(!we.touches[1]){if(!we.touches[0]){if(!we.touches[0]){_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var It=_.dragData.touchDragEles;if(Fe!=null){var or=Fe._private.grabbed;j(It),_.redrawHint("drag",!0),_.redrawHint("eles",!0),or&&(Fe.emit(qt("freeon")),It.emit(qt("free")),_.dragData.didDrag&&(Fe.emit(qt("dragfreeon")),It.emit(qt("dragfree")))),T(Fe,["touchend","tapend","vmouseup","tapdragout"],we,{x:ot[0],y:ot[1]}),Fe.unactivate(),_.touchData.start=null}else{var Vt=_.findNearestElement(ot[0],ot[1],!0,!0);T(Vt,["touchend","tapend","vmouseup","tapdragout"],we,{x:ot[0],y:ot[1]})}var ur=_.touchData.startPosition[0]-ot[0],dr=ur*ur,sr=_.touchData.startPosition[1]-ot[1],rr=sr*sr,_r=dr+rr,Pr=_r*_t*_t;_.touchData.singleTouchMoved||(Fe||rt.$(":selected").unselect(["tapunselect"]),T(Fe,["tap","vclick"],we,{x:ot[0],y:ot[1]}),St=!1,we.timeStamp-Et<=rt.multiClickDebounceTime()?(gt&&clearTimeout(gt),St=!0,Et=null,T(Fe,["dbltap","vdblclick"],we,{x:ot[0],y:ot[1]})):(gt=setTimeout(function(){St||T(Fe,["onetap","voneclick"],we,{x:ot[0],y:ot[1]})},rt.multiClickDebounceTime()),Et=we.timeStamp)),Fe!=null&&!_.dragData.didDrag&&Fe._private.selectable&&Pr<_.touchTapThreshold2&&!_.pinching&&(rt.selectionType()==="single"?(rt.$(S).unmerge(Fe).unselect(["tapunselect"]),Fe.select(["tapselect"])):Fe.selected()?Fe.unselect(["tapunselect"]):Fe.select(["tapselect"]),_.redrawHint("eles",!0)),_.touchData.singleTouchMoved=!0}}}for(var Er=0;Er<ot.length;Er++)Tt[Er]=ot[Er];_.dragData.didDrag=!1,we.touches.length===0&&(_.touchData.dragDelta=[],_.touchData.startPosition=[null,null,null,null,null,null],_.touchData.startGPosition=null,_.touchData.didSelect=!1),we.touches.length<2&&(we.touches.length===1&&(_.touchData.startGPosition=[we.touches[0].clientX,we.touches[0].clientY]),_.pinching=!1,_.redrawHint("eles",!0),_.redraw())},!1),typeof TouchEvent>"u"){var xt=[],Lt=function(we){return{clientX:we.clientX,clientY:we.clientY,force:1,identifier:we.pointerId,pageX:we.pageX,pageY:we.pageY,radiusX:we.width/2,radiusY:we.height/2,screenX:we.screenX,screenY:we.screenY,target:we.target}},zt=function(we){return{event:we,touch:Lt(we)}},jt=function(we){xt.push(zt(we))},At=function(we){for(var Fe=0;Fe<xt.length;Fe++){var Ge=xt[Fe];if(Ge.event.pointerId===we.pointerId){xt.splice(Fe,1);return}}},Ot=function(we){var Fe=xt.filter(function(Ge){return Ge.event.pointerId===we.pointerId})[0];Fe.event=we,Fe.touch=Lt(we)},Ct=function(we){we.touches=xt.map(function(Fe){return Fe.touch})},bt=function(we){return we.pointerType==="mouse"||we.pointerType===4};_.registerBinding(_.container,"pointerdown",function(et){bt(et)||(et.preventDefault(),jt(et),Ct(et),pt(et))}),_.registerBinding(_.container,"pointerup",function(et){bt(et)||(At(et),Ct(et),st(et))}),_.registerBinding(_.container,"pointercancel",function(et){bt(et)||(At(et),Ct(et),wt(et))}),_.registerBinding(_.container,"pointermove",function(et){bt(et)||(et.preventDefault(),Ot(et),Ct(et),We(et))})}};var BRp$2={};BRp$2.generatePolygon=function(_,v){return this.nodeShapes[_]={renderer:this,name:_,points:v,draw:function(R,T,A,k,q,M){this.renderer.nodeShapeImpl("polygon",R,T,A,k,q,this.points)},intersectLine:function(R,T,A,k,q,M,D,L){return polygonIntersectLine(q,M,this.points,R,T,A/2,k/2,D)},checkPoint:function(R,T,A,k,q,M,D,L){return pointInsidePolygon(R,T,this.points,M,D,k,q,[0,-1],A)},hasMiterBounds:_!=="rectangle",miterBounds:function(R,T,A,k,q,M){return miterBox(this.points,R,T,A,k,q)}}};BRp$2.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A)},intersectLine:function(v,S,R,T,A,k,q,M){return intersectLineEllipse(A,k,v,S,R/2+q,T/2+q)},checkPoint:function(v,S,R,T,A,k,q,M){return checkInEllipse(v,S,T,A,k,q,R)}}};BRp$2.generateRoundPolygon=function(_,v){return this.nodeShapes[_]={renderer:this,name:_,points:v,getOrCreateCorners:function(R,T,A,k,q,M,D){if(M[D]!==void 0&&M[D+"-cx"]===R&&M[D+"-cy"]===T)return M[D];M[D]=new Array(v.length/2),M[D+"-cx"]=R,M[D+"-cy"]=T;var L=A/2,I=k/2;q=q==="auto"?getRoundPolygonRadius(A,k):q;for(var N=new Array(v.length/2),F=0;F<v.length/2;F++)N[F]={x:R+L*v[F*2],y:T+I*v[F*2+1]};var H,G,V,j,W=N.length;for(G=N[W-1],H=0;H<W;H++)V=N[H%W],j=N[(H+1)%W],M[D][H]=getRoundCorner(G,V,j,q),G=V,V=j;return M[D]},draw:function(R,T,A,k,q,M,D){this.renderer.nodeShapeImpl("round-polygon",R,T,A,k,q,this.points,this.getOrCreateCorners(T,A,k,q,M,D,"drawCorners"))},intersectLine:function(R,T,A,k,q,M,D,L,I){return roundPolygonIntersectLine(q,M,this.points,R,T,A,k,D,this.getOrCreateCorners(R,T,A,k,L,I,"corners"))},checkPoint:function(R,T,A,k,q,M,D,L,I){return pointInsideRoundPolygon(R,T,this.points,M,D,k,q,this.getOrCreateCorners(M,D,k,q,L,I,"corners"))}}};BRp$2.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,this.points,k)},intersectLine:function(v,S,R,T,A,k,q,M){return roundRectangleIntersectLine(A,k,v,S,R,T,q,M)},checkPoint:function(v,S,R,T,A,k,q,M){var D=T/2,L=A/2;M=M==="auto"?getRoundRectangleRadius(T,A):M,M=Math.min(D,L,M);var I=M*2;return!!(pointInsidePolygon(v,S,this.points,k,q,T,A-I,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,q,T-I,A,[0,-1],R)||checkInEllipse(v,S,I,I,k-D+M,q-L+M,R)||checkInEllipse(v,S,I,I,k+D-M,q-L+M,R)||checkInEllipse(v,S,I,I,k+D-M,q+L-M,R)||checkInEllipse(v,S,I,I,k-D+M,q+L-M,R))}}};BRp$2.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,null,k)},generateCutTrianglePts:function(v,S,R,T,A){var k=A==="auto"?this.cornerLength:A,q=S/2,M=v/2,D=R-M,L=R+M,I=T-q,N=T+q;return{topLeft:[D,I+k,D+k,I,D+k,I+k],topRight:[L-k,I,L,I+k,L-k,I+k],bottomRight:[L,N-k,L-k,N,L-k,N-k],bottomLeft:[D+k,N,D,N-k,D+k,N-k]}},intersectLine:function(v,S,R,T,A,k,q,M){var D=this.generateCutTrianglePts(R+2*q,T+2*q,v,S,M),L=[].concat.apply([],[D.topLeft.splice(0,4),D.topRight.splice(0,4),D.bottomRight.splice(0,4),D.bottomLeft.splice(0,4)]);return polygonIntersectLine(A,k,L,v,S)},checkPoint:function(v,S,R,T,A,k,q,M){var D=M==="auto"?this.cornerLength:M;if(pointInsidePolygon(v,S,this.points,k,q,T,A-2*D,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,q,T-2*D,A,[0,-1],R))return!0;var L=this.generateCutTrianglePts(T,A,k,q);return pointInsidePolygonPoints(v,S,L.topLeft)||pointInsidePolygonPoints(v,S,L.topRight)||pointInsidePolygonPoints(v,S,L.bottomRight)||pointInsidePolygonPoints(v,S,L.bottomLeft)}}};BRp$2.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A)},intersectLine:function(v,S,R,T,A,k,q,M){var D=.15,L=.5,I=.85,N=this.generateBarrelBezierPts(R+2*q,T+2*q,v,S),F=function(V){var j=qbezierPtAt({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},D),W=qbezierPtAt({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},L),X=qbezierPtAt({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},I);return[V[0],V[1],j.x,j.y,W.x,W.y,X.x,X.y,V[4],V[5]]},H=[].concat(F(N.topLeft),F(N.topRight),F(N.bottomRight),F(N.bottomLeft));return polygonIntersectLine(A,k,H,v,S)},generateBarrelBezierPts:function(v,S,R,T){var A=S/2,k=v/2,q=R-k,M=R+k,D=T-A,L=T+A,I=getBarrelCurveConstants(v,S),N=I.heightOffset,F=I.widthOffset,H=I.ctrlPtOffsetPct*v,G={topLeft:[q,D+N,q+H,D,q+F,D],topRight:[M-F,D,M-H,D,M,D+N],bottomRight:[M,L-N,M-H,L,M-F,L],bottomLeft:[q+F,L,q+H,L,q,L-N]};return G.topLeft.isTop=!0,G.topRight.isTop=!0,G.bottomLeft.isBottom=!0,G.bottomRight.isBottom=!0,G},checkPoint:function(v,S,R,T,A,k,q,M){var D=getBarrelCurveConstants(T,A),L=D.heightOffset,I=D.widthOffset;if(pointInsidePolygon(v,S,this.points,k,q,T,A-2*L,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,q,T-2*I,A,[0,-1],R))return!0;for(var N=this.generateBarrelBezierPts(T,A,k,q),F=function(ne,oe,ue){var ce=ue[4],de=ue[2],pe=ue[0],_e=ue[5],Ee=ue[1],ge=Math.min(ce,pe),be=Math.max(ce,pe),Ae=Math.min(_e,Ee),De=Math.max(_e,Ee);if(ge<=ne&&ne<=be&&Ae<=oe&&oe<=De){var ve=bezierPtsToQuadCoeff(ce,de,pe),le=solveQuadratic(ve[0],ve[1],ve[2],ne),me=le.filter(function(Te){return 0<=Te&&Te<=1});if(me.length>0)return me[0]}return null},H=Object.keys(N),G=0;G<H.length;G++){var V=H[G],j=N[V],W=F(v,S,j);if(W!=null){var X=j[5],J=j[3],te=j[1],re=qbezierAt(X,J,te,W);if(j.isTop&&re<=S||j.isBottom&&S<=re)return!0}}return!1}}};BRp$2.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,this.points,k)},intersectLine:function(v,S,R,T,A,k,q,M){var D=v-(R/2+q),L=S-(T/2+q),I=L,N=v+(R/2+q),F=finiteLinesIntersect(A,k,v,S,D,L,N,I,!1);return F.length>0?F:roundRectangleIntersectLine(A,k,v,S,R,T,q,M)},checkPoint:function(v,S,R,T,A,k,q,M){M=M==="auto"?getRoundRectangleRadius(T,A):M;var D=2*M;if(pointInsidePolygon(v,S,this.points,k,q,T,A-D,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,q,T-D,A,[0,-1],R))return!0;var L=T/2+2*R,I=A/2+2*R,N=[k-L,q-I,k-L,q,k+L,q,k+L,q-I];return!!(pointInsidePolygonPoints(v,S,N)||checkInEllipse(v,S,D,D,k+T/2-M,q+A/2-M,R)||checkInEllipse(v,S,D,D,k-T/2+M,q+A/2-M,R))}}};BRp$2.registerNodeShapes=function(){var _=this.nodeShapes={},v=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),_.square=_.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var S=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",S),this.generateRoundPolygon("round-diamond",S)}this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var R=new Array(20);{var T=generateUnitNgonPoints(5,0),A=generateUnitNgonPoints(5,Math.PI/5),k=.5*(3-Math.sqrt(5));k*=1.57;for(var q=0;q<A.length/2;q++)A[q*2]*=k,A[q*2+1]*=k;for(var q=0;q<20/4;q++)R[q*4]=T[q*2],R[q*4+1]=T[q*2+1],R[q*4+2]=A[q*2],R[q*4+3]=A[q*2+1]}R=fitPolygonToSquare(R),this.generatePolygon("star",R),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var M=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",M),this.generateRoundPolygon("round-tag",M)}_.makePolygon=function(D){var L=D.join("$"),I="polygon-"+L,N;return(N=this[I])?N:v.generatePolygon(I,D)}};var BRp$1={};BRp$1.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};BRp$1.redraw=function(_){_=_||staticEmptyObject();var v=this;v.averageRedrawTime===void 0&&(v.averageRedrawTime=0),v.lastRedrawTime===void 0&&(v.lastRedrawTime=0),v.lastDrawTime===void 0&&(v.lastDrawTime=0),v.requestedFrame=!0,v.renderOptions=_};BRp$1.beforeRender=function(_,v){if(!this.destroyed){v==null&&error("Priority is not optional for beforeRender");var S=this.beforeRenderCallbacks;S.push({fn:_,priority:v}),S.sort(function(R,T){return T.priority-R.priority})}};var beforeRenderCallbacks=function(v,S,R){for(var T=v.beforeRenderCallbacks,A=0;A<T.length;A++)T[A].fn(S,R)};BRp$1.startRenderLoop=function(){var _=this,v=_.cy;if(!_.renderLoopStarted){_.renderLoopStarted=!0;var S=function(T){if(!_.destroyed){if(!v.batching())if(_.requestedFrame&&!_.skipFrame){beforeRenderCallbacks(_,!0,T);var A=performanceNow();_.render(_.renderOptions);var k=_.lastDrawTime=performanceNow();_.averageRedrawTime===void 0&&(_.averageRedrawTime=k-A),_.redrawCount===void 0&&(_.redrawCount=0),_.redrawCount++,_.redrawTotalTime===void 0&&(_.redrawTotalTime=0);var q=k-A;_.redrawTotalTime+=q,_.lastRedrawTime=q,_.averageRedrawTime=_.averageRedrawTime/2+q/2,_.requestedFrame=!1}else beforeRenderCallbacks(_,!1,T);_.skipFrame=!1,requestAnimationFrame$1(S)}};requestAnimationFrame$1(S)}};var BaseRenderer=function(v){this.init(v)},BR=BaseRenderer,BRp=BR.prototype;BRp.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];BRp.init=function(_){var v=this;v.options=_,v.cy=_.cy;var S=v.container=_.cy.container(),R=v.cy.window();if(R){var T=R.document,A=T.head,k="__________cytoscape_stylesheet",q="__________cytoscape_container",M=T.getElementById(k)!=null;if(S.className.indexOf(q)<0&&(S.className=(S.className||"")+" "+q),!M){var D=T.createElement("style");D.id=k,D.textContent="."+q+" { position: relative; }",A.insertBefore(D,A.children[0])}var L=R.getComputedStyle(S),I=L.getPropertyValue("position");I==="static"&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}v.selection=[void 0,void 0,void 0,void 0,0],v.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],v.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},v.dragData={possibleDragElements:[]},v.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},v.redraws=0,v.showFps=_.showFps,v.debug=_.debug,v.webgl=_.webgl,v.hideEdgesOnViewport=_.hideEdgesOnViewport,v.textureOnViewport=_.textureOnViewport,v.wheelSensitivity=_.wheelSensitivity,v.motionBlurEnabled=_.motionBlur,v.forcedPixelRatio=number$1(_.pixelRatio)?_.pixelRatio:null,v.motionBlur=_.motionBlur,v.motionBlurOpacity=_.motionBlurOpacity,v.motionBlurTransparency=1-v.motionBlurOpacity,v.motionBlurPxRatio=1,v.mbPxRBlurry=1,v.minMbLowQualFrames=4,v.fullQualityMb=!1,v.clearedForMotionBlur=[],v.desktopTapThreshold=_.desktopTapThreshold,v.desktopTapThreshold2=_.desktopTapThreshold*_.desktopTapThreshold,v.touchTapThreshold=_.touchTapThreshold,v.touchTapThreshold2=_.touchTapThreshold*_.touchTapThreshold,v.tapholdDuration=500,v.bindings=[],v.beforeRenderCallbacks=[],v.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},v.registerNodeShapes(),v.registerArrowShapes(),v.registerCalculationListeners()};BRp.notify=function(_,v){var S=this,R=S.cy;if(!this.destroyed){if(_==="init"){S.load();return}if(_==="destroy"){S.destroy();return}(_==="add"||_==="remove"||_==="move"&&R.hasCompoundNodes()||_==="load"||_==="zorder"||_==="mount")&&S.invalidateCachedZSortedEles(),_==="viewport"&&S.redrawHint("select",!0),_==="gc"&&S.redrawHint("gc",!0),(_==="load"||_==="resize"||_==="mount")&&(S.invalidateContainerClientCoordsCache(),S.matchCanvasSize(S.container)),S.redrawHint("eles",!0),S.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};BRp.destroy=function(){var _=this;_.destroyed=!0,_.cy.stopAnimationLoop();for(var v=0;v<_.bindings.length;v++){var S=_.bindings[v],R=S,T=R.target;(T.off||T.removeEventListener).apply(T,R.args)}if(_.bindings=[],_.beforeRenderCallbacks=[],_.onUpdateEleCalcsFns=[],_.removeObserver&&_.removeObserver.disconnect(),_.styleObserver&&_.styleObserver.disconnect(),_.resizeObserver&&_.resizeObserver.disconnect(),_.labelCalcDiv)try{document.body.removeChild(_.labelCalcDiv)}catch{}};BRp.isHeadless=function(){return!1};[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach(function(_){extend(BRp,_)});var fullFpsTime=1e3/60,defs={setupDequeueing:function(v){return function(){var R=this,T=this.renderer;if(!R.dequeueingSetup){R.dequeueingSetup=!0;var A=debounce(function(){T.redrawHint("eles",!0),T.redrawHint("drag",!0),T.redraw()},v.deqRedrawThreshold),k=function(D,L){var I=performanceNow(),N=T.averageRedrawTime,F=T.lastRedrawTime,H=[],G=T.cy.extent(),V=T.getPixelRatio();for(D||T.flushRenderedStyleQueue();;){var j=performanceNow(),W=j-I,X=j-L;if(F<fullFpsTime){var J=fullFpsTime-(D?N:0);if(X>=v.deqFastCost*J)break}else if(D){if(W>=v.deqCost*F||W>=v.deqAvgCost*N)break}else if(X>=v.deqNoDrawCost*fullFpsTime)break;var te=v.deq(R,V,G);if(te.length>0)for(var re=0;re<te.length;re++)H.push(te[re]);else break}H.length>0&&(v.onDeqd(R,H),!D&&v.shouldRedraw(R,H,V,G)&&A())},q=v.priority||noop$1;T.beforeRender(k,q(R))}}}},ElementTextureCacheLookup=(function(){function _(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:falsify;_classCallCheck(this,_),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=v,this.doesEleInvalidateKey=S}return _createClass(_,[{key:"getIdsFor",value:function(S){S==null&&error("Can not get id list for null key");var R=this.idsByKey,T=this.idsByKey.get(S);return T||(T=new Set$1,R.set(S,T)),T}},{key:"addIdForKey",value:function(S,R){S!=null&&this.getIdsFor(S).add(R)}},{key:"deleteIdForKey",value:function(S,R){S!=null&&this.getIdsFor(S).delete(R)}},{key:"getNumberOfIdsForKey",value:function(S){return S==null?0:this.getIdsFor(S).size}},{key:"updateKeyMappingFor",value:function(S){var R=S.id(),T=this.keyForId.get(R),A=this.getKey(S);this.deleteIdForKey(T,R),this.addIdForKey(A,R),this.keyForId.set(R,A)}},{key:"deleteKeyMappingFor",value:function(S){var R=S.id(),T=this.keyForId.get(R);this.deleteIdForKey(T,R),this.keyForId.delete(R)}},{key:"keyHasChangedFor",value:function(S){var R=S.id(),T=this.keyForId.get(R),A=this.getKey(S);return T!==A}},{key:"isInvalid",value:function(S){return this.keyHasChangedFor(S)||this.doesEleInvalidateKey(S)}},{key:"getCachesAt",value:function(S){var R=this.cachesByLvl,T=this.lvls,A=R.get(S);return A||(A=new Map$1,R.set(S,A),T.push(S)),A}},{key:"getCache",value:function(S,R){return this.getCachesAt(R).get(S)}},{key:"get",value:function(S,R){var T=this.getKey(S),A=this.getCache(T,R);return A!=null&&this.updateKeyMappingFor(S),A}},{key:"getForCachedKey",value:function(S,R){var T=this.keyForId.get(S.id()),A=this.getCache(T,R);return A}},{key:"hasCache",value:function(S,R){return this.getCachesAt(R).has(S)}},{key:"has",value:function(S,R){var T=this.getKey(S);return this.hasCache(T,R)}},{key:"setCache",value:function(S,R,T){T.key=S,this.getCachesAt(R).set(S,T)}},{key:"set",value:function(S,R,T){var A=this.getKey(S);this.setCache(A,R,T),this.updateKeyMappingFor(S)}},{key:"deleteCache",value:function(S,R){this.getCachesAt(R).delete(S)}},{key:"delete",value:function(S,R){var T=this.getKey(S);this.deleteCache(T,R)}},{key:"invalidateKey",value:function(S){var R=this;this.lvls.forEach(function(T){return R.deleteCache(S,T)})}},{key:"invalidate",value:function(S){var R=S.id(),T=this.keyForId.get(R);this.deleteKeyMappingFor(S);var A=this.doesEleInvalidateKey(S);return A&&this.invalidateKey(T),A||this.getNumberOfIdsForKey(T)===0}}])})(),minTxrH=25,txrStepH=50,minLvl$1=-4,maxLvl$1=3,maxZoom$1=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,deqRedrawThreshold$1=100,maxDeqSize$1=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(v,S){var R=this;R.renderer=v,R.onDequeues=[];var T=initDefaults(S);extend(R,T),R.lookup=new ElementTextureCacheLookup(T.getKey,T.doesEleInvalidateKey),R.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons;ETCp.getTextureQueue=function(_){var v=this;return v.eleImgCaches=v.eleImgCaches||{},v.eleImgCaches[_]=v.eleImgCaches[_]||[]};ETCp.getRetiredTextureQueue=function(_){var v=this,S=v.eleImgCaches.retired=v.eleImgCaches.retired||{},R=S[_]=S[_]||[];return R};ETCp.getElementQueue=function(){var _=this,v=_.eleCacheQueue=_.eleCacheQueue||new Heap(function(S,R){return R.reqs-S.reqs});return v};ETCp.getElementKeyToQueue=function(){var _=this,v=_.eleKeyToCacheQueue=_.eleKeyToCacheQueue||{};return v};ETCp.getElement=function(_,v,S,R,T){var A=this,k=this.renderer,q=k.cy.zoom(),M=this.lookup;if(!v||v.w===0||v.h===0||isNaN(v.w)||isNaN(v.h)||!_.visible()||_.removed()||!A.allowEdgeTxrCaching&&_.isEdge()||!A.allowParentTxrCaching&&_.isParent())return null;if(R==null&&(R=Math.ceil(log2(q*S))),R<minLvl$1)R=minLvl$1;else if(q>=maxZoom$1||R>maxLvl$1)return null;var D=Math.pow(2,R),L=v.h*D,I=v.w*D,N=k.eleTextBiggerThanMin(_,D);if(!this.isVisible(_,N))return null;var F=M.get(_,R);if(F&&F.invalidated&&(F.invalidated=!1,F.texture.invalidatedWidth-=F.width),F)return F;var H;if(L<=minTxrH?H=minTxrH:L<=txrStepH?H=txrStepH:H=Math.ceil(L/txrStepH)*txrStepH,L>maxTxrH||I>maxTxrW)return null;var G=A.getTextureQueue(H),V=G[G.length-2],j=function(){return A.recycleTexture(H,I)||A.addTexture(H,I)};V||(V=G[G.length-1]),V||(V=j()),V.width-V.usedWidth<I&&(V=j());for(var W=function(ge){return ge&&ge.scaledLabelShown===N},X=T&&T===getTxrReasons.dequeue,J=T&&T===getTxrReasons.highQuality,te=T&&T===getTxrReasons.downscale,re,ee=R+1;ee<=maxLvl$1;ee++){var ne=M.get(_,ee);if(ne){re=ne;break}}var oe=re&&re.level===R+1?re:null,ue=function(){V.context.drawImage(oe.texture.canvas,oe.x,0,oe.width,oe.height,V.usedWidth,0,I,L)};if(V.context.setTransform(1,0,0,1,0,0),V.context.clearRect(V.usedWidth,0,I,H),W(oe))ue();else if(W(re))if(J){for(var ce=re.level;ce>R;ce--)oe=A.getElement(_,v,S,ce,getTxrReasons.downscale);ue()}else return A.queueElement(_,re.level-1),re;else{var de;if(!X&&!J&&!te)for(var pe=R-1;pe>=minLvl$1;pe--){var _e=M.get(_,pe);if(_e){de=_e;break}}if(W(de))return A.queueElement(_,R),de;V.context.translate(V.usedWidth,0),V.context.scale(D,D),this.drawElement(V.context,_,v,N,!1),V.context.scale(1/D,1/D),V.context.translate(-V.usedWidth,0)}return F={x:V.usedWidth,texture:V,level:R,scale:D,width:I,height:L,scaledLabelShown:N},V.usedWidth+=Math.ceil(I+eleTxrSpacing),V.eleCaches.push(F),M.set(_,R,F),A.checkTextureFullness(V),F};ETCp.invalidateElements=function(_){for(var v=0;v<_.length;v++)this.invalidateElement(_[v])};ETCp.invalidateElement=function(_){var v=this,S=v.lookup,R=[],T=S.isInvalid(_);if(T){for(var A=minLvl$1;A<=maxLvl$1;A++){var k=S.getForCachedKey(_,A);k&&R.push(k)}var q=S.invalidate(_);if(q)for(var M=0;M<R.length;M++){var D=R[M],L=D.texture;L.invalidatedWidth+=D.width,D.invalidated=!0,v.checkTextureUtility(L)}v.removeFromQueue(_)}};ETCp.checkTextureUtility=function(_){_.invalidatedWidth>=minUtility*_.width&&this.retireTexture(_)};ETCp.checkTextureFullness=function(_){var v=this,S=v.getTextureQueue(_.height);_.usedWidth/_.width>maxFullness&&_.fullnessChecks>=maxFullnessChecks?removeFromArray(S,_):_.fullnessChecks++};ETCp.retireTexture=function(_){var v=this,S=_.height,R=v.getTextureQueue(S),T=this.lookup;removeFromArray(R,_),_.retired=!0;for(var A=_.eleCaches,k=0;k<A.length;k++){var q=A[k];T.deleteCache(q.key,q.level)}clearArray(A);var M=v.getRetiredTextureQueue(S);M.push(_)};ETCp.addTexture=function(_,v){var S=this,R=S.getTextureQueue(_),T={};return R.push(T),T.eleCaches=[],T.height=_,T.width=Math.max(defTxrWidth,v),T.usedWidth=0,T.invalidatedWidth=0,T.fullnessChecks=0,T.canvas=S.renderer.makeOffscreenCanvas(T.width,T.height),T.context=T.canvas.getContext("2d"),T};ETCp.recycleTexture=function(_,v){for(var S=this,R=S.getTextureQueue(_),T=S.getRetiredTextureQueue(_),A=0;A<T.length;A++){var k=T[A];if(k.width>=v)return k.retired=!1,k.usedWidth=0,k.invalidatedWidth=0,k.fullnessChecks=0,clearArray(k.eleCaches),k.context.setTransform(1,0,0,1,0,0),k.context.clearRect(0,0,k.width,k.height),removeFromArray(T,k),R.push(k),k}};ETCp.queueElement=function(_,v){var S=this,R=S.getElementQueue(),T=S.getElementKeyToQueue(),A=this.getKey(_),k=T[A];if(k)k.level=Math.max(k.level,v),k.eles.merge(_),k.reqs++,R.updateItem(k);else{var q={eles:_.spawn().merge(_),level:v,reqs:1,key:A};R.push(q),T[A]=q}};ETCp.dequeue=function(_){for(var v=this,S=v.getElementQueue(),R=v.getElementKeyToQueue(),T=[],A=v.lookup,k=0;k<maxDeqSize$1&&S.size()>0;k++){var q=S.pop(),M=q.key,D=q.eles[0],L=A.hasCache(D,q.level);if(R[M]=null,L)continue;T.push(q);var I=v.getBoundingBox(D);v.getElement(D,I,_,q.level,getTxrReasons.dequeue)}return T};ETCp.removeFromQueue=function(_){var v=this,S=v.getElementQueue(),R=v.getElementKeyToQueue(),T=this.getKey(_),A=R[T];A!=null&&(A.eles.length===1?(A.reqs=MAX_INT$1,S.updateItem(A),S.pop(),R[T]=null):A.eles.unmerge(_))};ETCp.onDequeue=function(_){this.onDequeues.push(_)};ETCp.offDequeue=function(_){removeFromArray(this.onDequeues,_)};ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(v,S,R){return v.dequeue(S,R)},onDeqd:function(v,S){for(var R=0;R<v.onDequeues.length;R++){var T=v.onDequeues[R];T(S)}},shouldRedraw:function(v,S,R,T){for(var A=0;A<S.length;A++)for(var k=S[A].eles,q=0;q<k.length;q++){var M=k[q].boundingBox();if(boundingBoxesIntersect(M,T))return!0}return!1},priority:function(v){return v.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl=-4,maxLvl=2,maxZoom=3.99,deqRedrawThreshold=50,refineEleDebounceTime=50,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,maxDeqSize=1,invalidThreshold=250,maxLayerArea=4e3*4e3,maxLayerDim=32767,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(v){var S=this,R=S.renderer=v,T=R.cy;S.layersByLevel={},S.firstGet=!0,S.lastInvalidationTime=performanceNow()-2*invalidThreshold,S.skipping=!1,S.eleTxrDeqs=T.collection(),S.scheduleElementRefinement=debounce(function(){S.refineElementTextures(S.eleTxrDeqs),S.eleTxrDeqs.unmerge(S.eleTxrDeqs)},refineEleDebounceTime),R.beforeRender(function(k,q){q-S.lastInvalidationTime<=invalidThreshold?S.skipping=!0:S.skipping=!1},R.beforeRenderPriorities.lyrTxrSkip);var A=function(q,M){return M.reqs-q.reqs};S.layersQueue=new Heap(A),S.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(_,v){var S=Math.pow(2,v),R=Math.ceil(_.w*S),T=Math.ceil(_.h*S),A=this.renderer.makeOffscreenCanvas(R,T),k={id:layerIdPool=++layerIdPool%MAX_INT,bb:_,level:v,width:R,height:T,canvas:A,context:A.getContext("2d"),eles:[],elesQueue:[],reqs:0},q=k.context,M=-k.bb.x1,D=-k.bb.y1;return q.scale(S,S),q.translate(M,D),k};LTCp.getLayers=function(_,v,S){var R=this,T=R.renderer,A=T.cy,k=A.zoom(),q=R.firstGet;if(R.firstGet=!1,S==null){if(S=Math.ceil(log2(k*v)),S<minLvl)S=minLvl;else if(k>=maxZoom||S>maxLvl)return null}R.validateLayersElesOrdering(S,_);var M=R.layersByLevel,D=Math.pow(2,S),L=M[S]=M[S]||[],I,N=R.levelIsComplete(S,_),F,H=function(){var ue=function(Ee){if(R.validateLayersElesOrdering(Ee,_),R.levelIsComplete(Ee,_))return F=M[Ee],!0},ce=function(Ee){if(!F)for(var ge=S+Ee;minLvl<=ge&&ge<=maxLvl&&!ue(ge);ge+=Ee);};ce(1),ce(-1);for(var de=L.length-1;de>=0;de--){var pe=L[de];pe.invalid&&removeFromArray(L,pe)}};if(!N)H();else return L;var G=function(){if(!I){I=makeBoundingBox();for(var ue=0;ue<_.length;ue++)updateBoundingBox(I,_[ue].boundingBox())}return I},V=function(ue){ue=ue||{};var ce=ue.after;G();var de=Math.ceil(I.w*D),pe=Math.ceil(I.h*D);if(de>maxLayerDim||pe>maxLayerDim)return null;var _e=de*pe;if(_e>maxLayerArea)return null;var Ee=R.makeLayer(I,S);if(ce!=null){var ge=L.indexOf(ce)+1;L.splice(ge,0,Ee)}else(ue.insert===void 0||ue.insert)&&L.unshift(Ee);return Ee};if(R.skipping&&!q)return null;for(var j=null,W=_.length/defNumLayers,X=!q,J=0;J<_.length;J++){var te=_[J],re=te._private.rscratch,ee=re.imgLayerCaches=re.imgLayerCaches||{},ne=ee[S];if(ne){j=ne;continue}if((!j||j.eles.length>=W||!boundingBoxInBoundingBox(j.bb,te.boundingBox()))&&(j=V({insert:!0,after:j}),!j))return null;F||X?R.queueLayer(j,te):R.drawEleInLayer(j,te,S,v),j.eles.push(te),ee[S]=j}return F||(X?null:L)};LTCp.getEleLevelForLayerLevel=function(_,v){return _};LTCp.drawEleInLayer=function(_,v,S,R){var T=this,A=this.renderer,k=_.context,q=v.boundingBox();q.w===0||q.h===0||!v.visible()||(S=T.getEleLevelForLayerLevel(S,R),A.setImgSmoothing(k,!1),A.drawCachedElement(k,v,null,null,S,useHighQualityEleTxrReqs),A.setImgSmoothing(k,!0))};LTCp.levelIsComplete=function(_,v){var S=this,R=S.layersByLevel[_];if(!R||R.length===0)return!1;for(var T=0,A=0;A<R.length;A++){var k=R[A];if(k.reqs>0||k.invalid)return!1;T+=k.eles.length}return T===v.length};LTCp.validateLayersElesOrdering=function(_,v){var S=this.layersByLevel[_];if(S)for(var R=0;R<S.length;R++){for(var T=S[R],A=-1,k=0;k<v.length;k++)if(T.eles[0]===v[k]){A=k;break}if(A<0){this.invalidateLayer(T);continue}for(var q=A,k=0;k<T.eles.length;k++)if(T.eles[k]!==v[q+k]){this.invalidateLayer(T);break}}};LTCp.updateElementsInLayers=function(_,v){for(var S=this,R=element(_[0]),T=0;T<_.length;T++)for(var A=R?null:_[T],k=R?_[T]:_[T].ele,q=k._private.rscratch,M=q.imgLayerCaches=q.imgLayerCaches||{},D=minLvl;D<=maxLvl;D++){var L=M[D];L&&(A&&S.getEleLevelForLayerLevel(L.level)!==A.level||v(L,k,A))}};LTCp.haveLayers=function(){for(var _=this,v=!1,S=minLvl;S<=maxLvl;S++){var R=_.layersByLevel[S];if(R&&R.length>0){v=!0;break}}return v};LTCp.invalidateElements=function(_){var v=this;_.length!==0&&(v.lastInvalidationTime=performanceNow(),!(_.length===0||!v.haveLayers())&&v.updateElementsInLayers(_,function(R,T,A){v.invalidateLayer(R)}))};LTCp.invalidateLayer=function(_){if(this.lastInvalidationTime=performanceNow(),!_.invalid){var v=_.level,S=_.eles,R=this.layersByLevel[v];removeFromArray(R,_),_.elesQueue=[],_.invalid=!0,_.replacement&&(_.replacement.invalid=!0);for(var T=0;T<S.length;T++){var A=S[T]._private.rscratch.imgLayerCaches;A&&(A[v]=null)}}};LTCp.refineElementTextures=function(_){var v=this;v.updateElementsInLayers(_,function(R,T,A){var k=R.replacement;if(k||(k=R.replacement=v.makeLayer(R.bb,R.level),k.replaces=R,k.eles=R.eles),!k.reqs)for(var q=0;q<k.eles.length;q++)v.queueLayer(k,k.eles[q])})};LTCp.enqueueElementRefinement=function(_){this.eleTxrDeqs.merge(_),this.scheduleElementRefinement()};LTCp.queueLayer=function(_,v){var S=this,R=S.layersQueue,T=_.elesQueue,A=T.hasId=T.hasId||{};if(!_.replacement){if(v){if(A[v.id()])return;T.push(v),A[v.id()]=!0}_.reqs?(_.reqs++,R.updateItem(_)):(_.reqs=1,R.push(_))}};LTCp.dequeue=function(_){for(var v=this,S=v.layersQueue,R=[],T=0;T<maxDeqSize&&S.size()!==0;){var A=S.peek();if(A.replacement){S.pop();continue}if(A.replaces&&A!==A.replaces.replacement){S.pop();continue}if(A.invalid){S.pop();continue}var k=A.elesQueue.shift();k&&(v.drawEleInLayer(A,k,A.level,_),T++),R.length===0&&R.push(!0),A.elesQueue.length===0&&(S.pop(),A.reqs=0,A.replaces&&v.applyLayerReplacement(A),v.requestRedraw())}return R};LTCp.applyLayerReplacement=function(_){var v=this,S=v.layersByLevel[_.level],R=_.replaces,T=S.indexOf(R);if(!(T<0||R.invalid)){S[T]=_;for(var A=0;A<_.eles.length;A++){var k=_.eles[A]._private,q=k.imgLayerCaches=k.imgLayerCaches||{};q&&(q[_.level]=_)}v.requestRedraw()}};LTCp.requestRedraw=debounce(function(){var _=this.renderer;_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},100);LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold,deqCost,deqAvgCost,deqNoDrawCost,deqFastCost,deq:function(v,S){return v.dequeue(S)},onDeqd:noop$1,shouldRedraw:trueify,priority:function(v){return v.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp$b={},impl;function polygon(_,v){for(var S=0;S<v.length;S++){var R=v[S];_.lineTo(R.x,R.y)}}function triangleBackcurve(_,v,S){for(var R,T=0;T<v.length;T++){var A=v[T];T===0&&(R=A),_.lineTo(A.x,A.y)}_.quadraticCurveTo(S.x,S.y,R.x,R.y)}function triangleTee(_,v,S){_.beginPath&&_.beginPath();for(var R=v,T=0;T<R.length;T++){var A=R[T];_.lineTo(A.x,A.y)}var k=S,q=S[0];_.moveTo(q.x,q.y);for(var T=1;T<k.length;T++){var A=k[T];_.lineTo(A.x,A.y)}_.closePath&&_.closePath()}function circleTriangle(_,v,S,R,T){_.beginPath&&_.beginPath(),_.arc(S,R,T,0,Math.PI*2,!1);var A=v,k=A[0];_.moveTo(k.x,k.y);for(var q=0;q<A.length;q++){var M=A[q];_.lineTo(M.x,M.y)}_.closePath&&_.closePath()}function circle$1(_,v,S,R){_.arc(v,S,R,0,Math.PI*2,!1)}CRp$b.arrowShapeImpl=function(_){return(impl||(impl={polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle$1}))[_]};var CRp$a={};CRp$a.drawElement=function(_,v,S,R,T,A){var k=this;v.isNode()?k.drawNode(_,v,S,R,T,A):k.drawEdge(_,v,S,R,T,A)};CRp$a.drawElementOverlay=function(_,v){var S=this;v.isNode()?S.drawNodeOverlay(_,v):S.drawEdgeOverlay(_,v)};CRp$a.drawElementUnderlay=function(_,v){var S=this;v.isNode()?S.drawNodeUnderlay(_,v):S.drawEdgeUnderlay(_,v)};CRp$a.drawCachedElementPortion=function(_,v,S,R,T,A,k,q){var M=this,D=S.getBoundingBox(v);if(!(D.w===0||D.h===0)){var L=S.getElement(v,D,R,T,A);if(L!=null){var I=q(M,v);if(I===0)return;var N=k(M,v),F=D.x1,H=D.y1,G=D.w,V=D.h,j,W,X,J,te;if(N!==0){var re=S.getRotationPoint(v);X=re.x,J=re.y,_.translate(X,J),_.rotate(N),te=M.getImgSmoothing(_),te||M.setImgSmoothing(_,!0);var ee=S.getRotationOffset(v);j=ee.x,W=ee.y}else j=F,W=H;var ne;I!==1&&(ne=_.globalAlpha,_.globalAlpha=ne*I),_.drawImage(L.texture.canvas,L.x,0,L.width,L.height,j,W,G,V),I!==1&&(_.globalAlpha=ne),N!==0&&(_.rotate(-N),_.translate(-X,-J),te||M.setImgSmoothing(_,!1))}else S.drawElement(_,v)}};var getZeroRotation=function(){return 0},getLabelRotation=function(v,S){return v.getTextAngle(S,null)},getSourceLabelRotation=function(v,S){return v.getTextAngle(S,"source")},getTargetLabelRotation=function(v,S){return v.getTextAngle(S,"target")},getOpacity=function(v,S){return S.effectiveOpacity()},getTextOpacity=function(v,S){return S.pstyle("text-opacity").pfValue*S.effectiveOpacity()};CRp$a.drawCachedElement=function(_,v,S,R,T,A){var k=this,q=k.data,M=q.eleTxrCache,D=q.lblTxrCache,L=q.slbTxrCache,I=q.tlbTxrCache,N=v.boundingBox(),F=A===!0?M.reasons.highQuality:null;if(!(N.w===0||N.h===0||!v.visible())&&(!R||boundingBoxesIntersect(N,R))){var H=v.isEdge(),G=v.element()._private.rscratch.badLine;k.drawElementUnderlay(_,v),k.drawCachedElementPortion(_,v,M,S,T,F,getZeroRotation,getOpacity),(!H||!G)&&k.drawCachedElementPortion(_,v,D,S,T,F,getLabelRotation,getTextOpacity),H&&!G&&(k.drawCachedElementPortion(_,v,L,S,T,F,getSourceLabelRotation,getTextOpacity),k.drawCachedElementPortion(_,v,I,S,T,F,getTargetLabelRotation,getTextOpacity)),k.drawElementOverlay(_,v)}};CRp$a.drawElements=function(_,v){for(var S=this,R=0;R<v.length;R++){var T=v[R];S.drawElement(_,T)}};CRp$a.drawCachedElements=function(_,v,S,R){for(var T=this,A=0;A<v.length;A++){var k=v[A];T.drawCachedElement(_,k,S,R)}};CRp$a.drawCachedNodes=function(_,v,S,R){for(var T=this,A=0;A<v.length;A++){var k=v[A];k.isNode()&&T.drawCachedElement(_,k,S,R)}};CRp$a.drawLayeredElements=function(_,v,S,R){var T=this,A=T.data.lyrTxrCache.getLayers(v,S);if(A)for(var k=0;k<A.length;k++){var q=A[k],M=q.bb;M.w===0||M.h===0||_.drawImage(q.canvas,M.x1,M.y1,M.w,M.h)}else T.drawCachedElements(_,v,S,R)};var CRp$9={};CRp$9.drawEdge=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this,q=v._private.rscratch;if(!(A&&!v.visible())&&!(q.badLine||q.allpts==null||isNaN(q.allpts[0]))){var M;S&&(M=S,_.translate(-M.x1,-M.y1));var D=A?v.pstyle("opacity").value:1,L=A?v.pstyle("line-opacity").value:1,I=v.pstyle("curve-style").value,N=v.pstyle("line-style").value,F=v.pstyle("width").pfValue,H=v.pstyle("line-cap").value,G=v.pstyle("line-outline-width").value,V=v.pstyle("line-outline-color").value,j=D*L,W=D*L,X=function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j;I==="straight-triangle"?(k.eleStrokeStyle(_,v,Ee),k.drawEdgeTrianglePath(v,_,q.allpts)):(_.lineWidth=F,_.lineCap=H,k.eleStrokeStyle(_,v,Ee),k.drawEdgePath(v,_,q.allpts,N),_.lineCap="butt")},J=function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j;if(_.lineWidth=F+G,_.lineCap=H,G>0)k.colorStrokeStyle(_,V[0],V[1],V[2],Ee);else{_.lineCap="butt";return}I==="straight-triangle"?k.drawEdgeTrianglePath(v,_,q.allpts):(k.drawEdgePath(v,_,q.allpts,N),_.lineCap="butt")},te=function(){T&&k.drawEdgeOverlay(_,v)},re=function(){T&&k.drawEdgeUnderlay(_,v)},ee=function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;k.drawArrowheads(_,v,Ee)},ne=function(){k.drawElementText(_,v,null,R)};_.lineJoin="round";var oe=v.pstyle("ghost").value==="yes";if(oe){var ue=v.pstyle("ghost-offset-x").pfValue,ce=v.pstyle("ghost-offset-y").pfValue,de=v.pstyle("ghost-opacity").value,pe=j*de;_.translate(ue,ce),X(pe),ee(pe),_.translate(-ue,-ce)}else J();re(),X(),ee(),te(),ne(),S&&_.translate(M.x1,M.y1)}};var drawEdgeOverlayUnderlay=function(v){if(!["overlay","underlay"].includes(v))throw new Error("Invalid state");return function(S,R){if(R.visible()){var T=R.pstyle("".concat(v,"-opacity")).value;if(T!==0){var A=this,k=A.usePaths(),q=R._private.rscratch,M=R.pstyle("".concat(v,"-padding")).pfValue,D=2*M,L=R.pstyle("".concat(v,"-color")).value;S.lineWidth=D,q.edgeType==="self"&&!k?S.lineCap="butt":S.lineCap="round",A.colorStrokeStyle(S,L[0],L[1],L[2],T),A.drawEdgePath(R,S,q.allpts,"solid")}}}};CRp$9.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay");CRp$9.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay");CRp$9.drawEdgePath=function(_,v,S,R){var T=_._private.rscratch,A=v,k,q=!1,M=this.usePaths(),D=_.pstyle("line-dash-pattern").pfValue,L=_.pstyle("line-dash-offset").pfValue;if(M){var I=S.join("$"),N=T.pathCacheKey&&T.pathCacheKey===I;N?(k=v=T.pathCache,q=!0):(k=v=new Path2D,T.pathCacheKey=I,T.pathCache=k)}if(A.setLineDash)switch(R){case"dotted":A.setLineDash([1,1]);break;case"dashed":A.setLineDash(D),A.lineDashOffset=L;break;case"solid":A.setLineDash([]);break}if(!q&&!T.badLine)switch(v.beginPath&&v.beginPath(),v.moveTo(S[0],S[1]),T.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var F=2;F+3<S.length;F+=4)v.quadraticCurveTo(S[F],S[F+1],S[F+2],S[F+3]);break;case"straight":case"haystack":for(var H=2;H+1<S.length;H+=2)v.lineTo(S[H],S[H+1]);break;case"segments":if(T.isRound){var G=_createForOfIteratorHelper(T.roundCorners),V;try{for(G.s();!(V=G.n()).done;){var j=V.value;drawPreparedRoundCorner(v,j)}}catch(X){G.e(X)}finally{G.f()}v.lineTo(S[S.length-2],S[S.length-1])}else for(var W=2;W+1<S.length;W+=2)v.lineTo(S[W],S[W+1]);break}v=A,M?v.stroke(k):v.stroke(),v.setLineDash&&v.setLineDash([])};CRp$9.drawEdgeTrianglePath=function(_,v,S){v.fillStyle=v.strokeStyle;for(var R=_.pstyle("width").pfValue,T=0;T+1<S.length;T+=2){var A=[S[T+2]-S[T],S[T+3]-S[T+1]],k=Math.sqrt(A[0]*A[0]+A[1]*A[1]),q=[A[1]/k,-A[0]/k],M=[q[0]*R/2,q[1]*R/2];v.beginPath(),v.moveTo(S[T]-M[0],S[T+1]-M[1]),v.lineTo(S[T]+M[0],S[T+1]+M[1]),v.lineTo(S[T+2],S[T+3]),v.closePath(),v.fill()}};CRp$9.drawArrowheads=function(_,v,S){var R=v._private.rscratch,T=R.edgeType==="haystack";T||this.drawArrowhead(_,v,"source",R.arrowStartX,R.arrowStartY,R.srcArrowAngle,S),this.drawArrowhead(_,v,"mid-target",R.midX,R.midY,R.midtgtArrowAngle,S),this.drawArrowhead(_,v,"mid-source",R.midX,R.midY,R.midsrcArrowAngle,S),T||this.drawArrowhead(_,v,"target",R.arrowEndX,R.arrowEndY,R.tgtArrowAngle,S)};CRp$9.drawArrowhead=function(_,v,S,R,T,A,k){if(!(isNaN(R)||R==null||isNaN(T)||T==null||isNaN(A)||A==null)){var q=this,M=v.pstyle(S+"-arrow-shape").value;if(M!=="none"){var D=v.pstyle(S+"-arrow-fill").value==="hollow"?"both":"filled",L=v.pstyle(S+"-arrow-fill").value,I=v.pstyle("width").pfValue,N=v.pstyle(S+"-arrow-width"),F=N.value==="match-line"?I:N.pfValue;N.units==="%"&&(F*=I);var H=v.pstyle("opacity").value;k===void 0&&(k=H);var G=_.globalCompositeOperation;(k!==1||L==="hollow")&&(_.globalCompositeOperation="destination-out",q.colorFillStyle(_,255,255,255,1),q.colorStrokeStyle(_,255,255,255,1),q.drawArrowShape(v,_,D,I,M,F,R,T,A),_.globalCompositeOperation=G);var V=v.pstyle(S+"-arrow-color").value;q.colorFillStyle(_,V[0],V[1],V[2],k),q.colorStrokeStyle(_,V[0],V[1],V[2],k),q.drawArrowShape(v,_,L,I,M,F,R,T,A)}}};CRp$9.drawArrowShape=function(_,v,S,R,T,A,k,q,M){var D=this,L=this.usePaths()&&T!=="triangle-cross",I=!1,N,F=v,H={x:k,y:q},G=_.pstyle("arrow-scale").value,V=this.getArrowWidth(R,G),j=D.arrowShapes[T];if(L){var W=D.arrowPathCache=D.arrowPathCache||[],X=hashString(T),J=W[X];J!=null?(N=v=J,I=!0):(N=v=new Path2D,W[X]=N)}I||(v.beginPath&&v.beginPath(),L?j.draw(v,1,0,{x:0,y:0},1):j.draw(v,V,M,H,R),v.closePath&&v.closePath()),v=F,L&&(v.translate(k,q),v.rotate(M),v.scale(V,V)),(S==="filled"||S==="both")&&(L?v.fill(N):v.fill()),(S==="hollow"||S==="both")&&(v.lineWidth=A/(L?V:1),v.lineJoin="miter",L?v.stroke(N):v.stroke()),L&&(v.scale(1/V,1/V),v.rotate(-M),v.translate(-k,-q))};var CRp$8={};CRp$8.safeDrawImage=function(_,v,S,R,T,A,k,q,M,D){if(!(T<=0||A<=0||M<=0||D<=0))try{_.drawImage(v,S,R,T,A,k,q,M,D)}catch(L){warn(L)}};CRp$8.drawInscribedImage=function(_,v,S,R,T){var A=this,k=S.position(),q=k.x,M=k.y,D=S.cy().style(),L=D.getIndexedStyle.bind(D),I=L(S,"background-fit","value",R),N=L(S,"background-repeat","value",R),F=S.width(),H=S.height(),G=S.padding()*2,V=F+(L(S,"background-width-relative-to","value",R)==="inner"?0:G),j=H+(L(S,"background-height-relative-to","value",R)==="inner"?0:G),W=S._private.rscratch,X=L(S,"background-clip","value",R),J=X==="node",te=L(S,"background-image-opacity","value",R)*T,re=L(S,"background-image-smoothing","value",R),ee=S.pstyle("corner-radius").value;ee!=="auto"&&(ee=S.pstyle("corner-radius").pfValue);var ne=v.width||v.cachedW,oe=v.height||v.cachedH;(ne==null||oe==null)&&(document.body.appendChild(v),ne=v.cachedW=v.width||v.offsetWidth,oe=v.cachedH=v.height||v.offsetHeight,document.body.removeChild(v));var ue=ne,ce=oe;if(L(S,"background-width","value",R)!=="auto"&&(L(S,"background-width","units",R)==="%"?ue=L(S,"background-width","pfValue",R)*V:ue=L(S,"background-width","pfValue",R)),L(S,"background-height","value",R)!=="auto"&&(L(S,"background-height","units",R)==="%"?ce=L(S,"background-height","pfValue",R)*j:ce=L(S,"background-height","pfValue",R)),!(ue===0||ce===0)){if(I==="contain"){var de=Math.min(V/ue,j/ce);ue*=de,ce*=de}else if(I==="cover"){var de=Math.max(V/ue,j/ce);ue*=de,ce*=de}var pe=q-V/2,_e=L(S,"background-position-x","units",R),Ee=L(S,"background-position-x","pfValue",R);_e==="%"?pe+=(V-ue)*Ee:pe+=Ee;var ge=L(S,"background-offset-x","units",R),be=L(S,"background-offset-x","pfValue",R);ge==="%"?pe+=(V-ue)*be:pe+=be;var Ae=M-j/2,De=L(S,"background-position-y","units",R),ve=L(S,"background-position-y","pfValue",R);De==="%"?Ae+=(j-ce)*ve:Ae+=ve;var le=L(S,"background-offset-y","units",R),me=L(S,"background-offset-y","pfValue",R);le==="%"?Ae+=(j-ce)*me:Ae+=me,W.pathCache&&(pe-=q,Ae-=M,q=0,M=0);var Te=_.globalAlpha;_.globalAlpha=te;var ye=A.getImgSmoothing(_),Re=!1;if(re==="no"&&ye?(A.setImgSmoothing(_,!1),Re=!0):re==="yes"&&!ye&&(A.setImgSmoothing(_,!0),Re=!0),N==="no-repeat")J&&(_.save(),W.pathCache?_.clip(W.pathCache):(A.nodeShapes[A.getNodeShape(S)].draw(_,q,M,V,j,ee,W),_.clip())),A.safeDrawImage(_,v,0,0,ne,oe,pe,Ae,ue,ce),J&&_.restore();else{var qe=_.createPattern(v,N);_.fillStyle=qe,A.nodeShapes[A.getNodeShape(S)].draw(_,q,M,V,j,ee,W),_.translate(pe,Ae),_.fill(),_.translate(-pe,-Ae)}_.globalAlpha=Te,Re&&A.setImgSmoothing(_,ye)}};var CRp$7={};CRp$7.eleTextBiggerThanMin=function(_,v){if(!v){var S=_.cy().zoom(),R=this.getPixelRatio(),T=Math.ceil(log2(S*R));v=Math.pow(2,T)}var A=_.pstyle("font-size").pfValue*v,k=_.pstyle("min-zoomed-font-size").pfValue;return!(A<k)};CRp$7.drawElementText=function(_,v,S,R,T){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this;if(R==null){if(A&&!k.eleTextBiggerThanMin(v))return}else if(R===!1)return;if(v.isNode()){var q=v.pstyle("label");if(!q||!q.value)return;var M=k.getLabelJustification(v);_.textAlign=M,_.textBaseline="bottom"}else{var D=v.element()._private.rscratch.badLine,L=v.pstyle("label"),I=v.pstyle("source-label"),N=v.pstyle("target-label");if(D||(!L||!L.value)&&(!I||!I.value)&&(!N||!N.value))return;_.textAlign="center",_.textBaseline="bottom"}var F=!S,H;S&&(H=S,_.translate(-H.x1,-H.y1)),T==null?(k.drawText(_,v,null,F,A),v.isEdge()&&(k.drawText(_,v,"source",F,A),k.drawText(_,v,"target",F,A))):k.drawText(_,v,T,F,A),S&&_.translate(H.x1,H.y1)};CRp$7.getFontCache=function(_){var v;this.fontCaches=this.fontCaches||[];for(var S=0;S<this.fontCaches.length;S++)if(v=this.fontCaches[S],v.context===_)return v;return v={context:_},this.fontCaches.push(v),v};CRp$7.setupTextStyle=function(_,v){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,R=v.pstyle("font-style").strValue,T=v.pstyle("font-size").pfValue+"px",A=v.pstyle("font-family").strValue,k=v.pstyle("font-weight").strValue,q=S?v.effectiveOpacity()*v.pstyle("text-opacity").value:1,M=v.pstyle("text-outline-opacity").value*q,D=v.pstyle("color").value,L=v.pstyle("text-outline-color").value;_.font=R+" "+k+" "+T+" "+A,_.lineJoin="round",this.colorFillStyle(_,D[0],D[1],D[2],q),this.colorStrokeStyle(_,L[0],L[1],L[2],M)};function circle(_,v,S,R,T){var A=Math.min(R,T),k=A/2,q=v+R/2,M=S+T/2;_.beginPath(),_.arc(q,M,k,0,Math.PI*2),_.closePath()}function roundRect(_,v,S,R,T){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,k=Math.min(A,R/2,T/2);_.beginPath(),_.moveTo(v+k,S),_.lineTo(v+R-k,S),_.quadraticCurveTo(v+R,S,v+R,S+k),_.lineTo(v+R,S+T-k),_.quadraticCurveTo(v+R,S+T,v+R-k,S+T),_.lineTo(v+k,S+T),_.quadraticCurveTo(v,S+T,v,S+T-k),_.lineTo(v,S+k),_.quadraticCurveTo(v,S,v+k,S),_.closePath()}CRp$7.getTextAngle=function(_,v){var S,R=_._private,T=R.rscratch,A=v?v+"-":"",k=_.pstyle(A+"text-rotation");if(k.strValue==="autorotate"){var q=getPrefixedProperty(T,"labelAngle",v);S=_.isEdge()?q:0}else k.strValue==="none"?S=0:S=k.pfValue;return S};CRp$7.drawText=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=v._private,k=A.rscratch,q=T?v.effectiveOpacity():1;if(!(T&&(q===0||v.pstyle("text-opacity").value===0))){S==="main"&&(S=null);var M=getPrefixedProperty(k,"labelX",S),D=getPrefixedProperty(k,"labelY",S),L,I,N=this.getLabelText(v,S);if(N!=null&&N!==""&&!isNaN(M)&&!isNaN(D)){this.setupTextStyle(_,v,T);var F=S?S+"-":"",H=getPrefixedProperty(k,"labelWidth",S),G=getPrefixedProperty(k,"labelHeight",S),V=v.pstyle(F+"text-margin-x").pfValue,j=v.pstyle(F+"text-margin-y").pfValue,W=v.isEdge(),X=v.pstyle("text-halign").value,J=v.pstyle("text-valign").value;W&&(X="center",J="center"),M+=V,D+=j;var te;switch(R?te=this.getTextAngle(v,S):te=0,te!==0&&(L=M,I=D,_.translate(L,I),_.rotate(te),M=0,D=0),J){case"top":break;case"center":D+=G/2;break;case"bottom":D+=G;break}var re=v.pstyle("text-background-opacity").value,ee=v.pstyle("text-border-opacity").value,ne=v.pstyle("text-border-width").pfValue,oe=v.pstyle("text-background-padding").pfValue,ue=v.pstyle("text-background-shape").strValue,ce=ue==="round-rectangle"||ue==="roundrectangle",de=ue==="circle",pe=2;if(re>0||ne>0&&ee>0){var _e=_.fillStyle,Ee=_.strokeStyle,ge=_.lineWidth,be=v.pstyle("text-background-color").value,Ae=v.pstyle("text-border-color").value,De=v.pstyle("text-border-style").value,ve=re>0,le=ne>0&&ee>0,me=M-oe;switch(X){case"left":me-=H;break;case"center":me-=H/2;break}var Te=D-G-oe,ye=H+2*oe,Re=G+2*oe;if(ve&&(_.fillStyle="rgba(".concat(be[0],",").concat(be[1],",").concat(be[2],",").concat(re*q,")")),le&&(_.strokeStyle="rgba(".concat(Ae[0],",").concat(Ae[1],",").concat(Ae[2],",").concat(ee*q,")"),_.lineWidth=ne,_.setLineDash))switch(De){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash([4,2]);break;case"double":_.lineWidth=ne/4,_.setLineDash([]);break;case"solid":default:_.setLineDash([]);break}if(ce?(_.beginPath(),roundRect(_,me,Te,ye,Re,pe)):de?(_.beginPath(),circle(_,me,Te,ye,Re)):(_.beginPath(),_.rect(me,Te,ye,Re)),ve&&_.fill(),le&&_.stroke(),le&&De==="double"){var qe=ne/2;_.beginPath(),ce?roundRect(_,me+qe,Te+qe,ye-2*qe,Re-2*qe,pe):_.rect(me+qe,Te+qe,ye-2*qe,Re-2*qe),_.stroke()}_.fillStyle=_e,_.strokeStyle=Ee,_.lineWidth=ge,_.setLineDash&&_.setLineDash([])}var ke=2*v.pstyle("text-outline-width").pfValue;if(ke>0&&(_.lineWidth=ke),v.pstyle("text-wrap").value==="wrap"){var ze=getPrefixedProperty(k,"labelWrapCachedLines",S),Ne=getPrefixedProperty(k,"labelLineHeight",S),Pe=H/2,Me=this.getLabelJustification(v);switch(Me==="auto"||(X==="left"?Me==="left"?M+=-H:Me==="center"&&(M+=-Pe):X==="center"?Me==="left"?M+=-Pe:Me==="right"&&(M+=Pe):X==="right"&&(Me==="center"?M+=Pe:Me==="right"&&(M+=H))),J){case"top":D-=(ze.length-1)*Ne;break;case"center":case"bottom":D-=(ze.length-1)*Ne;break}for(var Ie=0;Ie<ze.length;Ie++)ke>0&&_.strokeText(ze[Ie],M,D),_.fillText(ze[Ie],M,D),D+=Ne}else ke>0&&_.strokeText(N,M,D),_.fillText(N,M,D);te!==0&&(_.rotate(-te),_.translate(-L,-I))}}};var CRp$6={};CRp$6.drawNode=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this,q,M,D=v._private,L=D.rscratch,I=v.position();if(!(!number$1(I.x)||!number$1(I.y))&&!(A&&!v.visible())){var N=A?v.effectiveOpacity():1,F=k.usePaths(),H,G=!1,V=v.padding();q=v.width()+2*V,M=v.height()+2*V;var j;S&&(j=S,_.translate(-j.x1,-j.y1));for(var W=v.pstyle("background-image"),X=W.value,J=new Array(X.length),te=new Array(X.length),re=0,ee=0;ee<X.length;ee++){var ne=X[ee],oe=J[ee]=ne!=null&&ne!=="none";if(oe){var ue=v.cy().style().getIndexedStyle(v,"background-image-crossorigin","value",ee);re++,te[ee]=k.getCachedImage(ne,ue,function(){D.backgroundTimestamp=Date.now(),v.emitAndNotify("background")})}}var ce=v.pstyle("background-blacken").value,de=v.pstyle("border-width").pfValue,pe=v.pstyle("background-opacity").value*N,_e=v.pstyle("border-color").value,Ee=v.pstyle("border-style").value,ge=v.pstyle("border-join").value,be=v.pstyle("border-cap").value,Ae=v.pstyle("border-position").value,De=v.pstyle("border-dash-pattern").pfValue,ve=v.pstyle("border-dash-offset").pfValue,le=v.pstyle("border-opacity").value*N,me=v.pstyle("outline-width").pfValue,Te=v.pstyle("outline-color").value,ye=v.pstyle("outline-style").value,Re=v.pstyle("outline-opacity").value*N,qe=v.pstyle("outline-offset").value,ke=v.pstyle("corner-radius").value;ke!=="auto"&&(ke=v.pstyle("corner-radius").pfValue);var ze=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pe;k.eleFillStyle(_,v,bt)},Ne=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:le;k.colorStrokeStyle(_,_e[0],_e[1],_e[2],bt)},Pe=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Re;k.colorStrokeStyle(_,Te[0],Te[1],Te[2],bt)},Me=function(bt,et,we,Fe){var Ge=k.nodePathCache=k.nodePathCache||[],Ze=hashStrings(we==="polygon"?we+","+Fe.join(","):we,""+et,""+bt,""+ke),rt=Ge[Ze],_t,ot=!1;return rt!=null?(_t=rt,ot=!0,L.pathCache=_t):(_t=new Path2D,Ge[Ze]=L.pathCache=_t),{path:_t,cacheHit:ot}},Ie=v.pstyle("shape").strValue,Le=v.pstyle("shape-polygon-points").pfValue;if(F){_.translate(I.x,I.y);var nt=Me(q,M,Ie,Le);H=nt.path,G=nt.cacheHit}var lt=function(){if(!G){var bt=I;F&&(bt={x:0,y:0}),k.nodeShapes[k.getNodeShape(v)].draw(H||_,bt.x,bt.y,q,M,ke,L)}F?_.fill(H):_.fill()},dt=function(){for(var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,we=D.backgrounding,Fe=0,Ge=0;Ge<te.length;Ge++){var Ze=v.cy().style().getIndexedStyle(v,"background-image-containment","value",Ge);if(et&&Ze==="over"||!et&&Ze==="inside"){Fe++;continue}J[Ge]&&te[Ge].complete&&!te[Ge].error&&(Fe++,k.drawInscribedImage(_,te[Ge],v,Ge,bt))}D.backgrounding=Fe!==re,we!==D.backgrounding&&v.updateStyle(!1)},pt=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N;k.hasPie(v)&&(k.drawPie(_,v,et),bt&&(F||k.nodeShapes[k.getNodeShape(v)].draw(_,I.x,I.y,q,M,ke,L)))},We=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N;k.hasStripe(v)&&(_.save(),F?_.clip(L.pathCache):(k.nodeShapes[k.getNodeShape(v)].draw(_,I.x,I.y,q,M,ke,L),_.clip()),k.drawStripe(_,v,et),_.restore(),bt&&(F||k.nodeShapes[k.getNodeShape(v)].draw(_,I.x,I.y,q,M,ke,L)))},wt=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,et=(ce>0?ce:-ce)*bt,we=ce>0?0:255;ce!==0&&(k.colorFillStyle(_,we,we,we,et),F?_.fill(H):_.fill())},st=function(){if(de>0){if(_.lineWidth=de,_.lineCap=be,_.lineJoin=ge,_.setLineDash)switch(Ee){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash(De),_.lineDashOffset=ve;break;case"solid":case"double":_.setLineDash([]);break}if(Ae!=="center"){if(_.save(),_.lineWidth*=2,Ae==="inside")F?_.clip(H):_.clip();else{var bt=new Path2D;bt.rect(-q/2-de,-M/2-de,q+2*de,M+2*de),bt.addPath(H),_.clip(bt,"evenodd")}F?_.stroke(H):_.stroke(),_.restore()}else F?_.stroke(H):_.stroke();if(Ee==="double"){_.lineWidth=de/3;var et=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",F?_.stroke(H):_.stroke(),_.globalCompositeOperation=et}_.setLineDash&&_.setLineDash([])}},St=function(){if(me>0){if(_.lineWidth=me,_.lineCap="butt",_.setLineDash)switch(ye){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash([4,2]);break;case"solid":case"double":_.setLineDash([]);break}var bt=I;F&&(bt={x:0,y:0});var et=k.getNodeShape(v),we=de;Ae==="inside"&&(we=0),Ae==="outside"&&(we*=2);var Fe=(q+we+(me+qe))/q,Ge=(M+we+(me+qe))/M,Ze=q*Fe,rt=M*Ge,_t=k.nodeShapes[et].points,ot;if(F){var Tt=Me(Ze,rt,et,_t);ot=Tt.path}if(et==="ellipse")k.drawEllipsePath(ot||_,bt.x,bt.y,Ze,rt);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(et)){var Rt=0,qt=0,Nt=0;et==="round-diamond"?Rt=(we+qe+me)*1.4:et==="round-heptagon"?(Rt=(we+qe+me)*1.075,Nt=-(we/2+qe+me)/35):et==="round-hexagon"?Rt=(we+qe+me)*1.12:et==="round-pentagon"?(Rt=(we+qe+me)*1.13,Nt=-(we/2+qe+me)/15):et==="round-tag"?(Rt=(we+qe+me)*1.12,qt=(we/2+me+qe)*.07):et==="round-triangle"&&(Rt=(we+qe+me)*(Math.PI/2),Nt=-(we+qe/2+me)/Math.PI),Rt!==0&&(Fe=(q+Rt)/q,Ze=q*Fe,["round-hexagon","round-tag"].includes(et)||(Ge=(M+Rt)/M,rt=M*Ge)),ke=ke==="auto"?getRoundPolygonRadius(Ze,rt):ke;for(var yt=Ze/2,vt=rt/2,Dt=ke+(we+me+qe)/2,It=new Array(_t.length/2),or=new Array(_t.length/2),Vt=0;Vt<_t.length/2;Vt++)It[Vt]={x:bt.x+qt+yt*_t[Vt*2],y:bt.y+Nt+vt*_t[Vt*2+1]};var ur,dr,sr,rr,_r=It.length;for(dr=It[_r-1],ur=0;ur<_r;ur++)sr=It[ur%_r],rr=It[(ur+1)%_r],or[ur]=getRoundCorner(dr,sr,rr,Dt),dr=sr,sr=rr;k.drawRoundPolygonPath(ot||_,bt.x+qt,bt.y+Nt,q*Fe,M*Ge,_t,or)}else if(["roundrectangle","round-rectangle"].includes(et))ke=ke==="auto"?getRoundRectangleRadius(Ze,rt):ke,k.drawRoundRectanglePath(ot||_,bt.x,bt.y,Ze,rt,ke+(we+me+qe)/2);else if(["cutrectangle","cut-rectangle"].includes(et))ke=ke==="auto"?getCutRectangleCornerLength():ke,k.drawCutRectanglePath(ot||_,bt.x,bt.y,Ze,rt,null,ke+(we+me+qe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(et))ke=ke==="auto"?getRoundRectangleRadius(Ze,rt):ke,k.drawBottomRoundRectanglePath(ot||_,bt.x,bt.y,Ze,rt,ke+(we+me+qe)/2);else if(et==="barrel")k.drawBarrelPath(ot||_,bt.x,bt.y,Ze,rt);else if(et.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(et)){var Pr=(we+me+qe)/q;_t=joinLines(expandPolygon(_t,Pr)),k.drawPolygonPath(ot||_,bt.x,bt.y,q,M,_t)}else{var Er=(we+me+qe)/q;_t=joinLines(expandPolygon(_t,-Er)),k.drawPolygonPath(ot||_,bt.x,bt.y,q,M,_t)}if(F?_.stroke(ot):_.stroke(),ye==="double"){_.lineWidth=we/3;var kn=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",F?_.stroke(ot):_.stroke(),_.globalCompositeOperation=kn}_.setLineDash&&_.setLineDash([])}},gt=function(){T&&k.drawNodeOverlay(_,v,I,q,M)},Et=function(){T&&k.drawNodeUnderlay(_,v,I,q,M)},xt=function(){k.drawElementText(_,v,null,R)},Lt=v.pstyle("ghost").value==="yes";if(Lt){var zt=v.pstyle("ghost-offset-x").pfValue,jt=v.pstyle("ghost-offset-y").pfValue,At=v.pstyle("ghost-opacity").value,Ot=At*N;_.translate(zt,jt),Pe(),St(),ze(At*pe),lt(),dt(Ot,!0),Ne(At*le),st(),pt(ce!==0||de!==0),We(ce!==0||de!==0),dt(Ot,!1),wt(Ot),_.translate(-zt,-jt)}F&&_.translate(-I.x,-I.y),Et(),F&&_.translate(I.x,I.y),Pe(),St(),ze(),lt(),dt(N,!0),Ne(),st(),pt(ce!==0||de!==0),We(ce!==0||de!==0),dt(N,!1),wt(),F&&_.translate(-I.x,-I.y),xt(),gt(),S&&_.translate(j.x1,j.y1)}};var drawNodeOverlayUnderlay=function(v){if(!["overlay","underlay"].includes(v))throw new Error("Invalid state");return function(S,R,T,A,k){var q=this;if(R.visible()){var M=R.pstyle("".concat(v,"-padding")).pfValue,D=R.pstyle("".concat(v,"-opacity")).value,L=R.pstyle("".concat(v,"-color")).value,I=R.pstyle("".concat(v,"-shape")).value,N=R.pstyle("".concat(v,"-corner-radius")).value;if(D>0){if(T=T||R.position(),A==null||k==null){var F=R.padding();A=R.width()+2*F,k=R.height()+2*F}q.colorFillStyle(S,L[0],L[1],L[2],D),q.nodeShapes[I].draw(S,T.x,T.y,A+M*2,k+M*2,N),S.fill()}}}};CRp$6.drawNodeOverlay=drawNodeOverlayUnderlay("overlay");CRp$6.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay");CRp$6.hasPie=function(_){return _=_[0],_._private.hasPie};CRp$6.hasStripe=function(_){return _=_[0],_._private.hasStripe};CRp$6.drawPie=function(_,v,S,R){v=v[0],R=R||v.position();var T=v.cy().style(),A=v.pstyle("pie-size"),k=v.pstyle("pie-hole"),q=v.pstyle("pie-start-angle").pfValue,M=R.x,D=R.y,L=v.width(),I=v.height(),N=Math.min(L,I)/2,F,H=0,G=this.usePaths();if(G&&(M=0,D=0),A.units==="%"?N=N*A.pfValue:A.pfValue!==void 0&&(N=A.pfValue/2),k.units==="%"?F=N*k.pfValue:k.pfValue!==void 0&&(F=k.pfValue/2),!(F>=N))for(var V=1;V<=T.pieBackgroundN;V++){var j=v.pstyle("pie-"+V+"-background-size").value,W=v.pstyle("pie-"+V+"-background-color").value,X=v.pstyle("pie-"+V+"-background-opacity").value*S,J=j/100;J+H>1&&(J=1-H);var te=1.5*Math.PI+2*Math.PI*H;te+=q;var re=2*Math.PI*J,ee=te+re;j===0||H>=1||H+J>1||(F===0?(_.beginPath(),_.moveTo(M,D),_.arc(M,D,N,te,ee),_.closePath()):(_.beginPath(),_.arc(M,D,N,te,ee),_.arc(M,D,F,ee,te,!0),_.closePath()),this.colorFillStyle(_,W[0],W[1],W[2],X),_.fill(),H+=J)}};CRp$6.drawStripe=function(_,v,S,R){v=v[0],R=R||v.position();var T=v.cy().style(),A=R.x,k=R.y,q=v.width(),M=v.height(),D=0,L=this.usePaths();_.save();var I=v.pstyle("stripe-direction").value,N=v.pstyle("stripe-size");switch(I){case"vertical":break;case"righward":_.rotate(-Math.PI/2);break}var F=q,H=M;N.units==="%"?(F=F*N.pfValue,H=H*N.pfValue):N.pfValue!==void 0&&(F=N.pfValue,H=N.pfValue),L&&(A=0,k=0),k-=F/2,A-=H/2;for(var G=1;G<=T.stripeBackgroundN;G++){var V=v.pstyle("stripe-"+G+"-background-size").value,j=v.pstyle("stripe-"+G+"-background-color").value,W=v.pstyle("stripe-"+G+"-background-opacity").value*S,X=V/100;X+D>1&&(X=1-D),!(V===0||D>=1||D+X>1)&&(_.beginPath(),_.rect(A,k+H*D,F,H*X),_.closePath(),this.colorFillStyle(_,j[0],j[1],j[2],W),_.fill(),D+=X)}_.restore()};var CRp$5={},motionBlurDelay=100;CRp$5.getPixelRatio=function(){var _=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var v=this.cy.window(),S=_.backingStorePixelRatio||_.webkitBackingStorePixelRatio||_.mozBackingStorePixelRatio||_.msBackingStorePixelRatio||_.oBackingStorePixelRatio||_.backingStorePixelRatio||1;return(v.devicePixelRatio||1)/S};CRp$5.paintCache=function(_){for(var v=this.paintCaches=this.paintCaches||[],S=!0,R,T=0;T<v.length;T++)if(R=v[T],R.context===_){S=!1;break}return S&&(R={context:_},v.push(R)),R};CRp$5.createGradientStyleFor=function(_,v,S,R,T){var A,k=this.usePaths(),q=S.pstyle(v+"-gradient-stop-colors").value,M=S.pstyle(v+"-gradient-stop-positions").pfValue;if(R==="radial-gradient")if(S.isEdge()){var D=S.sourceEndpoint(),L=S.targetEndpoint(),I=S.midpoint(),N=dist$1(D,I),F=dist$1(L,I);A=_.createRadialGradient(I.x,I.y,0,I.x,I.y,Math.max(N,F))}else{var H=k?{x:0,y:0}:S.position(),G=S.paddedWidth(),V=S.paddedHeight();A=_.createRadialGradient(H.x,H.y,0,H.x,H.y,Math.max(G,V))}else if(S.isEdge()){var j=S.sourceEndpoint(),W=S.targetEndpoint();A=_.createLinearGradient(j.x,j.y,W.x,W.y)}else{var X=k?{x:0,y:0}:S.position(),J=S.paddedWidth(),te=S.paddedHeight(),re=J/2,ee=te/2,ne=S.pstyle("background-gradient-direction").value;switch(ne){case"to-bottom":A=_.createLinearGradient(X.x,X.y-ee,X.x,X.y+ee);break;case"to-top":A=_.createLinearGradient(X.x,X.y+ee,X.x,X.y-ee);break;case"to-left":A=_.createLinearGradient(X.x+re,X.y,X.x-re,X.y);break;case"to-right":A=_.createLinearGradient(X.x-re,X.y,X.x+re,X.y);break;case"to-bottom-right":case"to-right-bottom":A=_.createLinearGradient(X.x-re,X.y-ee,X.x+re,X.y+ee);break;case"to-top-right":case"to-right-top":A=_.createLinearGradient(X.x-re,X.y+ee,X.x+re,X.y-ee);break;case"to-bottom-left":case"to-left-bottom":A=_.createLinearGradient(X.x+re,X.y-ee,X.x-re,X.y+ee);break;case"to-top-left":case"to-left-top":A=_.createLinearGradient(X.x+re,X.y+ee,X.x-re,X.y-ee);break}}if(!A)return null;for(var oe=M.length===q.length,ue=q.length,ce=0;ce<ue;ce++)A.addColorStop(oe?M[ce]:ce/(ue-1),"rgba("+q[ce][0]+","+q[ce][1]+","+q[ce][2]+","+T+")");return A};CRp$5.gradientFillStyle=function(_,v,S,R){var T=this.createGradientStyleFor(_,"background",v,S,R);if(!T)return null;_.fillStyle=T};CRp$5.colorFillStyle=function(_,v,S,R,T){_.fillStyle="rgba("+v+","+S+","+R+","+T+")"};CRp$5.eleFillStyle=function(_,v,S){var R=v.pstyle("background-fill").value;if(R==="linear-gradient"||R==="radial-gradient")this.gradientFillStyle(_,v,R,S);else{var T=v.pstyle("background-color").value;this.colorFillStyle(_,T[0],T[1],T[2],S)}};CRp$5.gradientStrokeStyle=function(_,v,S,R){var T=this.createGradientStyleFor(_,"line",v,S,R);if(!T)return null;_.strokeStyle=T};CRp$5.colorStrokeStyle=function(_,v,S,R,T){_.strokeStyle="rgba("+v+","+S+","+R+","+T+")"};CRp$5.eleStrokeStyle=function(_,v,S){var R=v.pstyle("line-fill").value;if(R==="linear-gradient"||R==="radial-gradient")this.gradientStrokeStyle(_,v,R,S);else{var T=v.pstyle("line-color").value;this.colorStrokeStyle(_,T[0],T[1],T[2],S)}};CRp$5.matchCanvasSize=function(_){var v=this,S=v.data,R=v.findContainerClientCoords(),T=R[2],A=R[3],k=v.getPixelRatio(),q=v.motionBlurPxRatio;(_===v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_NODE]||_===v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_DRAG])&&(k=q);var M=T*k,D=A*k,L;if(!(M===v.canvasWidth&&D===v.canvasHeight)){v.fontCaches=null;var I=S.canvasContainer;I.style.width=T+"px",I.style.height=A+"px";for(var N=0;N<v.CANVAS_LAYERS;N++)L=S.canvases[N],L.width=M,L.height=D,L.style.width=T+"px",L.style.height=A+"px";for(var N=0;N<v.BUFFER_COUNT;N++)L=S.bufferCanvases[N],L.width=M,L.height=D,L.style.width=T+"px",L.style.height=A+"px";v.textureMult=1,k<=1&&(L=S.bufferCanvases[v.TEXTURE_BUFFER],v.textureMult=2,L.width=M*v.textureMult,L.height=D*v.textureMult),v.canvasWidth=M,v.canvasHeight=D,v.pixelRatio=k}};CRp$5.renderTo=function(_,v,S,R){this.render({forcedContext:_,forcedZoom:v,forcedPan:S,drawAllLayers:!0,forcedPxRatio:R})};CRp$5.clearCanvas=function(){var _=this,v=_.data;function S(R){R.clearRect(0,0,_.canvasWidth,_.canvasHeight)}S(v.contexts[_.NODE]),S(v.contexts[_.DRAG])};CRp$5.render=function(_){var v=this;_=_||staticEmptyObject();var S=v.cy,R=_.forcedContext,T=_.drawAllLayers,A=_.drawOnlyNodeLayer,k=_.forcedZoom,q=_.forcedPan,M=_.forcedPxRatio===void 0?this.getPixelRatio():_.forcedPxRatio,D=v.data,L=D.canvasNeedsRedraw,I=v.textureOnViewport&&!R&&(v.pinching||v.hoverData.dragging||v.swipePanning||v.data.wheelZooming),N=_.motionBlur!==void 0?_.motionBlur:v.motionBlur,F=v.motionBlurPxRatio,H=S.hasCompoundNodes(),G=v.hoverData.draggingEles,V=!!(v.hoverData.selecting||v.touchData.selecting);N=N&&!R&&v.motionBlurEnabled&&!V;var j=N;R||(v.prevPxRatio!==M&&(v.invalidateContainerClientCoordsCache(),v.matchCanvasSize(v.container),v.redrawHint("eles",!0),v.redrawHint("drag",!0)),v.prevPxRatio=M),!R&&v.motionBlurTimeout&&clearTimeout(v.motionBlurTimeout),N&&(v.mbFrames==null&&(v.mbFrames=0),v.mbFrames++,v.mbFrames<3&&(j=!1),v.mbFrames>v.minMbLowQualFrames&&(v.motionBlurPxRatio=v.mbPxRBlurry)),v.clearingMotionBlur&&(v.motionBlurPxRatio=1),v.textureDrawLastFrame&&!I&&(L[v.NODE]=!0,L[v.SELECT_BOX]=!0);var W=S.style(),X=S.zoom(),J=k!==void 0?k:X,te=S.pan(),re={x:te.x,y:te.y},ee={zoom:X,pan:{x:te.x,y:te.y}},ne=v.prevViewport,oe=ne===void 0||ee.zoom!==ne.zoom||ee.pan.x!==ne.pan.x||ee.pan.y!==ne.pan.y;!oe&&!(G&&!H)&&(v.motionBlurPxRatio=1),q&&(re=q),J*=M,re.x*=M,re.y*=M;var ue=v.getCachedZSortedEles();function ce(Ne,Pe,Me,Ie,Le){var nt=Ne.globalCompositeOperation;Ne.globalCompositeOperation="destination-out",v.colorFillStyle(Ne,255,255,255,v.motionBlurTransparency),Ne.fillRect(Pe,Me,Ie,Le),Ne.globalCompositeOperation=nt}function de(Ne,Pe){var Me,Ie,Le,nt;!v.clearingMotionBlur&&(Ne===D.bufferContexts[v.MOTIONBLUR_BUFFER_NODE]||Ne===D.bufferContexts[v.MOTIONBLUR_BUFFER_DRAG])?(Me={x:te.x*F,y:te.y*F},Ie=X*F,Le=v.canvasWidth*F,nt=v.canvasHeight*F):(Me=re,Ie=J,Le=v.canvasWidth,nt=v.canvasHeight),Ne.setTransform(1,0,0,1,0,0),Pe==="motionBlur"?ce(Ne,0,0,Le,nt):!R&&(Pe===void 0||Pe)&&Ne.clearRect(0,0,Le,nt),T||(Ne.translate(Me.x,Me.y),Ne.scale(Ie,Ie)),q&&Ne.translate(q.x,q.y),k&&Ne.scale(k,k)}if(I||(v.textureDrawLastFrame=!1),I){if(v.textureDrawLastFrame=!0,!v.textureCache){v.textureCache={},v.textureCache.bb=S.mutableElements().boundingBox(),v.textureCache.texture=v.data.bufferCanvases[v.TEXTURE_BUFFER];var pe=v.data.bufferContexts[v.TEXTURE_BUFFER];pe.setTransform(1,0,0,1,0,0),pe.clearRect(0,0,v.canvasWidth*v.textureMult,v.canvasHeight*v.textureMult),v.render({forcedContext:pe,drawOnlyNodeLayer:!0,forcedPxRatio:M*v.textureMult});var ee=v.textureCache.viewport={zoom:S.zoom(),pan:S.pan(),width:v.canvasWidth,height:v.canvasHeight};ee.mpan={x:(0-ee.pan.x)/ee.zoom,y:(0-ee.pan.y)/ee.zoom}}L[v.DRAG]=!1,L[v.NODE]=!1;var _e=D.contexts[v.NODE],Ee=v.textureCache.texture,ee=v.textureCache.viewport;_e.setTransform(1,0,0,1,0,0),N?ce(_e,0,0,ee.width,ee.height):_e.clearRect(0,0,ee.width,ee.height);var ge=W.core("outside-texture-bg-color").value,be=W.core("outside-texture-bg-opacity").value;v.colorFillStyle(_e,ge[0],ge[1],ge[2],be),_e.fillRect(0,0,ee.width,ee.height);var X=S.zoom();de(_e,!1),_e.clearRect(ee.mpan.x,ee.mpan.y,ee.width/ee.zoom/M,ee.height/ee.zoom/M),_e.drawImage(Ee,ee.mpan.x,ee.mpan.y,ee.width/ee.zoom/M,ee.height/ee.zoom/M)}else v.textureOnViewport&&!R&&(v.textureCache=null);var Ae=S.extent(),De=v.pinching||v.hoverData.dragging||v.swipePanning||v.data.wheelZooming||v.hoverData.draggingEles||v.cy.animated(),ve=v.hideEdgesOnViewport&&De,le=[];if(le[v.NODE]=!L[v.NODE]&&N&&!v.clearedForMotionBlur[v.NODE]||v.clearingMotionBlur,le[v.NODE]&&(v.clearedForMotionBlur[v.NODE]=!0),le[v.DRAG]=!L[v.DRAG]&&N&&!v.clearedForMotionBlur[v.DRAG]||v.clearingMotionBlur,le[v.DRAG]&&(v.clearedForMotionBlur[v.DRAG]=!0),L[v.NODE]||T||A||le[v.NODE]){var me=N&&!le[v.NODE]&&F!==1,_e=R||(me?v.data.bufferContexts[v.MOTIONBLUR_BUFFER_NODE]:D.contexts[v.NODE]),Te=N&&!me?"motionBlur":void 0;de(_e,Te),ve?v.drawCachedNodes(_e,ue.nondrag,M,Ae):v.drawLayeredElements(_e,ue.nondrag,M,Ae),v.debug&&v.drawDebugPoints(_e,ue.nondrag),!T&&!N&&(L[v.NODE]=!1)}if(!A&&(L[v.DRAG]||T||le[v.DRAG])){var me=N&&!le[v.DRAG]&&F!==1,_e=R||(me?v.data.bufferContexts[v.MOTIONBLUR_BUFFER_DRAG]:D.contexts[v.DRAG]);de(_e,N&&!me?"motionBlur":void 0),ve?v.drawCachedNodes(_e,ue.drag,M,Ae):v.drawCachedElements(_e,ue.drag,M,Ae),v.debug&&v.drawDebugPoints(_e,ue.drag),!T&&!N&&(L[v.DRAG]=!1)}if(this.drawSelectionRectangle(_,de),N&&F!==1){var ye=D.contexts[v.NODE],Re=v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_NODE],qe=D.contexts[v.DRAG],ke=v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_DRAG],ze=function(Pe,Me,Ie){Pe.setTransform(1,0,0,1,0,0),Ie||!j?Pe.clearRect(0,0,v.canvasWidth,v.canvasHeight):ce(Pe,0,0,v.canvasWidth,v.canvasHeight);var Le=F;Pe.drawImage(Me,0,0,v.canvasWidth*Le,v.canvasHeight*Le,0,0,v.canvasWidth,v.canvasHeight)};(L[v.NODE]||le[v.NODE])&&(ze(ye,Re,le[v.NODE]),L[v.NODE]=!1),(L[v.DRAG]||le[v.DRAG])&&(ze(qe,ke,le[v.DRAG]),L[v.DRAG]=!1)}v.prevViewport=ee,v.clearingMotionBlur&&(v.clearingMotionBlur=!1,v.motionBlurCleared=!0,v.motionBlur=!0),N&&(v.motionBlurTimeout=setTimeout(function(){v.motionBlurTimeout=null,v.clearedForMotionBlur[v.NODE]=!1,v.clearedForMotionBlur[v.DRAG]=!1,v.motionBlur=!1,v.clearingMotionBlur=!I,v.mbFrames=0,L[v.NODE]=!0,L[v.DRAG]=!0,v.redraw()},motionBlurDelay)),R||S.emit("render")};var fpsHeight;CRp$5.drawSelectionRectangle=function(_,v){var S=this,R=S.cy,T=S.data,A=R.style(),k=_.drawOnlyNodeLayer,q=_.drawAllLayers,M=T.canvasNeedsRedraw,D=_.forcedContext;if(S.showFps||!k&&M[S.SELECT_BOX]&&!q){var L=D||T.contexts[S.SELECT_BOX];if(v(L),S.selection[4]==1&&(S.hoverData.selecting||S.touchData.selecting)){var I=S.cy.zoom(),N=A.core("selection-box-border-width").value/I;L.lineWidth=N,L.fillStyle="rgba("+A.core("selection-box-color").value[0]+","+A.core("selection-box-color").value[1]+","+A.core("selection-box-color").value[2]+","+A.core("selection-box-opacity").value+")",L.fillRect(S.selection[0],S.selection[1],S.selection[2]-S.selection[0],S.selection[3]-S.selection[1]),N>0&&(L.strokeStyle="rgba("+A.core("selection-box-border-color").value[0]+","+A.core("selection-box-border-color").value[1]+","+A.core("selection-box-border-color").value[2]+","+A.core("selection-box-opacity").value+")",L.strokeRect(S.selection[0],S.selection[1],S.selection[2]-S.selection[0],S.selection[3]-S.selection[1]))}if(T.bgActivePosistion&&!S.hoverData.selecting){var I=S.cy.zoom(),F=T.bgActivePosistion;L.fillStyle="rgba("+A.core("active-bg-color").value[0]+","+A.core("active-bg-color").value[1]+","+A.core("active-bg-color").value[2]+","+A.core("active-bg-opacity").value+")",L.beginPath(),L.arc(F.x,F.y,A.core("active-bg-size").pfValue/I,0,2*Math.PI),L.fill()}var H=S.lastRedrawTime;if(S.showFps&&H){H=Math.round(H);var G=Math.round(1e3/H),V="1 frame = "+H+" ms = "+G+" fps";if(L.setTransform(1,0,0,1,0,0),L.fillStyle="rgba(255, 0, 0, 0.75)",L.strokeStyle="rgba(255, 0, 0, 0.75)",L.font="30px Arial",!fpsHeight){var j=L.measureText(V);fpsHeight=j.actualBoundingBoxAscent}L.fillText(V,0,fpsHeight);var W=60;L.strokeRect(0,fpsHeight+10,250,20),L.fillRect(0,fpsHeight+10,250*Math.min(G/W,1),20)}q||(M[S.SELECT_BOX]=!1)}};function compileShader(_,v,S){var R=_.createShader(v);if(_.shaderSource(R,S),_.compileShader(R),!_.getShaderParameter(R,_.COMPILE_STATUS))throw new Error(_.getShaderInfoLog(R));return R}function createProgram(_,v,S){var R=compileShader(_,_.VERTEX_SHADER,v),T=compileShader(_,_.FRAGMENT_SHADER,S),A=_.createProgram();if(_.attachShader(A,R),_.attachShader(A,T),_.linkProgram(A),!_.getProgramParameter(A,_.LINK_STATUS))throw new Error("Could not initialize shaders");return A}function createTextureCanvas(_,v,S){S===void 0&&(S=v);var R=_.makeOffscreenCanvas(v,S),T=R.context=R.getContext("2d");return R.clear=function(){return T.clearRect(0,0,R.width,R.height)},R.clear(),R}function getEffectivePanZoom(_){var v=_.pixelRatio,S=_.cy.zoom(),R=_.cy.pan();return{zoom:S*v,pan:{x:R.x*v,y:R.y*v}}}function getEffectiveZoom(_){var v=_.pixelRatio,S=_.cy.zoom();return S*v}function modelToRenderedPosition(_,v,S,R,T){var A=R*S+v.x,k=T*S+v.y;return k=Math.round(_.canvasHeight-k),[A,k]}function isSimpleShape(_){return _.pstyle("background-fill").value!=="solid"||_.pstyle("background-image").strValue!=="none"?!1:_.pstyle("border-width").value===0||_.pstyle("border-opacity").value===0?!0:_.pstyle("border-style").value==="solid"}function arrayEqual(_,v){if(_.length!==v.length)return!1;for(var S=0;S<_.length;S++)if(_[S]!==v[S])return!1;return!0}function toWebGLColor(_,v,S){var R=_[0]/255,T=_[1]/255,A=_[2]/255,k=v,q=S||new Array(4);return q[0]=R*k,q[1]=T*k,q[2]=A*k,q[3]=k,q}function indexToVec4(_,v){var S=v||new Array(4);return S[0]=(_>>0&255)/255,S[1]=(_>>8&255)/255,S[2]=(_>>16&255)/255,S[3]=(_>>24&255)/255,S}function vec4ToIndex(_){return _[0]+(_[1]<<8)+(_[2]<<16)+(_[3]<<24)}function createTexture(_,v){var S=_.createTexture();return S.buffer=function(R){_.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR_MIPMAP_NEAREST),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,R),_.generateMipmap(_.TEXTURE_2D),_.bindTexture(_.TEXTURE_2D,null)},S.deleteTexture=function(){_.deleteTexture(S)},S}function getTypeInfo(_,v){switch(v){case"float":return[1,_.FLOAT,4];case"vec2":return[2,_.FLOAT,4];case"vec3":return[3,_.FLOAT,4];case"vec4":return[4,_.FLOAT,4];case"int":return[1,_.INT,4];case"ivec2":return[2,_.INT,4]}}function createTypedArray(_,v,S){switch(v){case _.FLOAT:return new Float32Array(S);case _.INT:return new Int32Array(S)}}function createTypedArrayView(_,v,S,R,T,A){switch(v){case _.FLOAT:return new Float32Array(S.buffer,A*R,T);case _.INT:return new Int32Array(S.buffer,A*R,T)}}function createBufferStaticDraw(_,v,S,R){var T=getTypeInfo(_,v),A=_slicedToArray(T,2),k=A[0],q=A[1],M=createTypedArray(_,q,R),D=_.createBuffer();return _.bindBuffer(_.ARRAY_BUFFER,D),_.bufferData(_.ARRAY_BUFFER,M,_.STATIC_DRAW),q===_.FLOAT?_.vertexAttribPointer(S,k,q,!1,0,0):q===_.INT&&_.vertexAttribIPointer(S,k,q,0,0),_.enableVertexAttribArray(S),_.bindBuffer(_.ARRAY_BUFFER,null),D}function createBufferDynamicDraw(_,v,S,R){var T=getTypeInfo(_,S),A=_slicedToArray(T,3),k=A[0],q=A[1],M=A[2],D=createTypedArray(_,q,v*k),L=k*M,I=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,I),_.bufferData(_.ARRAY_BUFFER,v*L,_.DYNAMIC_DRAW),_.enableVertexAttribArray(R),q===_.FLOAT?_.vertexAttribPointer(R,k,q,!1,L,0):q===_.INT&&_.vertexAttribIPointer(R,k,q,L,0),_.vertexAttribDivisor(R,1),_.bindBuffer(_.ARRAY_BUFFER,null);for(var N=new Array(v),F=0;F<v;F++)N[F]=createTypedArrayView(_,q,D,L,k,F);return I.dataArray=D,I.stride=L,I.size=k,I.getView=function(H){return N[H]},I.setPoint=function(H,G,V){var j=N[H];j[0]=G,j[1]=V},I.bufferSubData=function(H){_.bindBuffer(_.ARRAY_BUFFER,I),H?_.bufferSubData(_.ARRAY_BUFFER,0,D,0,H*k):_.bufferSubData(_.ARRAY_BUFFER,0,D)},I}function create3x3MatrixBufferDynamicDraw(_,v,S){for(var R=9,T=new Float32Array(v*R),A=new Array(v),k=0;k<v;k++){var q=k*R*4;A[k]=new Float32Array(T.buffer,q,R)}var M=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,M),_.bufferData(_.ARRAY_BUFFER,T.byteLength,_.DYNAMIC_DRAW);for(var D=0;D<3;D++){var L=S+D;_.enableVertexAttribArray(L),_.vertexAttribPointer(L,3,_.FLOAT,!1,36,D*12),_.vertexAttribDivisor(L,1)}return _.bindBuffer(_.ARRAY_BUFFER,null),M.getMatrixView=function(I){return A[I]},M.setData=function(I,N){A[N].set(I,0)},M.bufferSubData=function(){_.bindBuffer(_.ARRAY_BUFFER,M),_.bufferSubData(_.ARRAY_BUFFER,0,T)},M}function createPickingFrameBuffer(_){var v=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,v);var S=_.createTexture();return _.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,S,0),_.bindFramebuffer(_.FRAMEBUFFER,null),v.setFramebufferAttachmentSizes=function(R,T){_.bindTexture(_.TEXTURE_2D,S),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,R,T,0,_.RGBA,_.UNSIGNED_BYTE,null)},v}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var _=0,v=arguments.length;v--;)_+=arguments[v]*arguments[v];return Math.sqrt(_)});function create(){var _=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_}function identity(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=1,_[5]=0,_[6]=0,_[7]=0,_[8]=1,_}function multiply(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],q=v[4],M=v[5],D=v[6],L=v[7],I=v[8],N=S[0],F=S[1],H=S[2],G=S[3],V=S[4],j=S[5],W=S[6],X=S[7],J=S[8];return _[0]=N*R+F*k+H*D,_[1]=N*T+F*q+H*L,_[2]=N*A+F*M+H*I,_[3]=G*R+V*k+j*D,_[4]=G*T+V*q+j*L,_[5]=G*A+V*M+j*I,_[6]=W*R+X*k+J*D,_[7]=W*T+X*q+J*L,_[8]=W*A+X*M+J*I,_}function translate(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],q=v[4],M=v[5],D=v[6],L=v[7],I=v[8],N=S[0],F=S[1];return _[0]=R,_[1]=T,_[2]=A,_[3]=k,_[4]=q,_[5]=M,_[6]=N*R+F*k+D,_[7]=N*T+F*q+L,_[8]=N*A+F*M+I,_}function rotate(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],q=v[4],M=v[5],D=v[6],L=v[7],I=v[8],N=Math.sin(S),F=Math.cos(S);return _[0]=F*R+N*k,_[1]=F*T+N*q,_[2]=F*A+N*M,_[3]=F*k-N*R,_[4]=F*q-N*T,_[5]=F*M-N*A,_[6]=D,_[7]=L,_[8]=I,_}function scale(_,v,S){var R=S[0],T=S[1];return _[0]=R*v[0],_[1]=R*v[1],_[2]=R*v[2],_[3]=T*v[3],_[4]=T*v[4],_[5]=T*v[5],_[6]=v[6],_[7]=v[7],_[8]=v[8],_}function projection(_,v,S){return _[0]=2/v,_[1]=0,_[2]=0,_[3]=0,_[4]=-2/S,_[5]=0,_[6]=-1,_[7]=1,_[8]=1,_}var Atlas=(function(){function _(v,S,R,T){_classCallCheck(this,_),this.debugID=Math.floor(Math.random()*1e4),this.r=v,this.texSize=S,this.texRows=R,this.texHeight=Math.floor(S/R),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=T(v,S,S),this.scratch=T(v,S,this.texHeight,"scratch")}return _createClass(_,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(S){var R=S.w,T=S.h,A=this.texHeight,k=this.texSize,q=A/T,M=R*q,D=T*q;return M>k&&(q=k/R,M=R*q,D=T*q),{scale:q,texW:M,texH:D}}},{key:"draw",value:function(S,R,T){var A=this;if(this.locked)throw new Error("can't draw, atlas is locked");var k=this.texSize,q=this.texRows,M=this.texHeight,D=this.getScale(R),L=D.scale,I=D.texW,N=D.texH,F=function(X,J){if(T&&J){var te=J.context,re=X.x,ee=X.row,ne=re,oe=M*ee;te.save(),te.translate(ne,oe),te.scale(L,L),T(te,R),te.restore()}},H=[null,null],G=function(){F(A.freePointer,A.canvas),H[0]={x:A.freePointer.x,y:A.freePointer.row*M,w:I,h:N},H[1]={x:A.freePointer.x+I,y:A.freePointer.row*M,w:0,h:N},A.freePointer.x+=I,A.freePointer.x==k&&(A.freePointer.x=0,A.freePointer.row++)},V=function(){var X=A.scratch,J=A.canvas;X.clear(),F({x:0,row:0},X);var te=k-A.freePointer.x,re=I-te,ee=M;{var ne=A.freePointer.x,oe=A.freePointer.row*M,ue=te;J.context.drawImage(X,0,0,ue,ee,ne,oe,ue,ee),H[0]={x:ne,y:oe,w:ue,h:N}}{var ce=te,de=(A.freePointer.row+1)*M,pe=re;J&&J.context.drawImage(X,ce,0,pe,ee,0,de,pe,ee),H[1]={x:0,y:de,w:pe,h:N}}A.freePointer.x=re,A.freePointer.row++},j=function(){A.freePointer.x=0,A.freePointer.row++};if(this.freePointer.x+I<=k)G();else{if(this.freePointer.row>=q-1)return!1;this.freePointer.x===k?(j(),G()):this.enableWrapping?V():(j(),G())}return this.keyToLocation.set(S,H),this.needsBuffer=!0,H}},{key:"getOffsets",value:function(S){return this.keyToLocation.get(S)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(S){if(this.locked)return!1;var R=this.texSize,T=this.texRows,A=this.getScale(S),k=A.texW;return this.freePointer.x+k>R?this.freePointer.row<T-1:!0}},{key:"bufferIfNeeded",value:function(S){this.texture||(this.texture=createTexture(S,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),AtlasCollection=(function(){function _(v,S,R,T){_classCallCheck(this,_),this.r=v,this.texSize=S,this.texRows=R,this.createTextureCanvas=T,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return _createClass(_,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var S=this.r,R=this.texSize,T=this.texRows,A=this.createTextureCanvas;return new Atlas(S,R,T,A)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var S=this.r,R=this.texSize,T=this.texRows,A=this.createTextureCanvas,k=Math.floor(R/T);this.scratch=A(S,R,k,"scratch")}return this.scratch}},{key:"draw",value:function(S,R,T){var A=this.styleKeyToAtlas.get(S);return A||(A=this.atlases[this.atlases.length-1],(!A||!A.canFit(R))&&(A&&A.lock(),A=this._createAtlas(),this.atlases.push(A)),A.draw(S,R,T),this.styleKeyToAtlas.set(S,A)),A}},{key:"getAtlas",value:function(S){return this.styleKeyToAtlas.get(S)}},{key:"hasAtlas",value:function(S){return this.styleKeyToAtlas.has(S)}},{key:"markKeyForGC",value:function(S){this.markedKeys.add(S)}},{key:"gc",value:function(){var S=this,R=this.markedKeys;if(R.size===0){console.log("nothing to garbage collect");return}var T=[],A=new Map,k=null,q=_createForOfIteratorHelper(this.atlases),M;try{var D=function(){var I=M.value,N=I.getKeys(),F=intersection(R,N);if(F.size===0)return T.push(I),N.forEach(function(te){return A.set(te,I)}),1;k||(k=S._createAtlas(),T.push(k));var H=_createForOfIteratorHelper(N),G;try{for(H.s();!(G=H.n()).done;){var V=G.value;if(!F.has(V)){var j=I.getOffsets(V),W=_slicedToArray(j,2),X=W[0],J=W[1];k.canFit({w:X.w+J.w,h:X.h})||(k.lock(),k=S._createAtlas(),T.push(k)),I.canvas&&(S._copyTextureToNewAtlas(V,I,k),A.set(V,k))}}}catch(te){H.e(te)}finally{H.f()}I.dispose()};for(q.s();!(M=q.n()).done;)D()}catch(L){q.e(L)}finally{q.f()}this.atlases=T,this.styleKeyToAtlas=A,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(S,R,T){var A=R.getOffsets(S),k=_slicedToArray(A,2),q=k[0],M=k[1];if(M.w===0)T.draw(S,q,function(N){N.drawImage(R.canvas,q.x,q.y,q.w,q.h,0,0,q.w,q.h)});else{var D=this._getScratchCanvas();D.clear(),D.context.drawImage(R.canvas,q.x,q.y,q.w,q.h,0,0,q.w,q.h),D.context.drawImage(R.canvas,M.x,M.y,M.w,M.h,q.w,0,M.w,M.h);var L=q.w+M.w,I=q.h;T.draw(S,{w:L,h:I},function(N){N.drawImage(D,0,0,L,I,0,0,L,I)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function intersection(_,v){return _.intersection?_.intersection(v):new Set(_toConsumableArray(_).filter(function(S){return v.has(S)}))}var AtlasManager=(function(){function _(v,S){_classCallCheck(this,_),this.r=v,this.globalOptions=S,this.atlasSize=S.webglTexSize,this.maxAtlasesPerBatch=S.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return _createClass(_,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(S,R){var T=this.globalOptions,A=T.webglTexSize,k=T.createTextureCanvas,q=R.texRows,M=this._cacheScratchCanvas(k),D=new AtlasCollection(this.r,A,q,M);this.collections.set(S,D)}},{key:"addRenderType",value:function(S,R){var T=R.collection;if(!this.collections.has(T))throw new Error("invalid atlas collection name '".concat(T,"'"));var A=this.collections.get(T),k=extend({type:S,atlasCollection:A},R);this.renderTypes.set(S,k)}},{key:"getRenderTypeOpts",value:function(S){return this.renderTypes.get(S)}},{key:"getAtlasCollection",value:function(S){return this.collections.get(S)}},{key:"_cacheScratchCanvas",value:function(S){var R=-1,T=-1,A=null;return function(k,q,M,D){return D?((!A||q!=R||M!=T)&&(R=q,T=M,A=S(k,q,M)),A):S(k,q,M)}}},{key:"_key",value:function(S,R){return"".concat(S,"-").concat(R)}},{key:"invalidate",value:function(S){var R=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=T.forceRedraw,k=A===void 0?!1:A,q=T.filterEle,M=q===void 0?function(){return!0}:q,D=T.filterType,L=D===void 0?function(){return!0}:D,I=!1,N=!1,F=_createForOfIteratorHelper(S),H;try{for(F.s();!(H=F.n()).done;){var G=H.value;if(M(G)){var V=_createForOfIteratorHelper(this.renderTypes.values()),j;try{var W=function(){var J=j.value,te=J.type;if(L(te)){var re=R.collections.get(J.collection),ee=J.getKey(G),ne=Array.isArray(ee)?ee:[ee];if(k)ne.forEach(function(de){return re.markKeyForGC(de)}),N=!0;else{var oe=J.getID?J.getID(G):G.id(),ue=R._key(te,oe),ce=R.typeAndIdToKey.get(ue);ce!==void 0&&!arrayEqual(ne,ce)&&(I=!0,R.typeAndIdToKey.delete(ue),ce.forEach(function(de){return re.markKeyForGC(de)}))}}};for(V.s();!(j=V.n()).done;)W()}catch(X){V.e(X)}finally{V.f()}}}}catch(X){F.e(X)}finally{F.f()}return N&&(this.gc(),I=!1),I}},{key:"gc",value:function(){var S=_createForOfIteratorHelper(this.collections.values()),R;try{for(S.s();!(R=S.n()).done;){var T=R.value;T.gc()}}catch(A){S.e(A)}finally{S.f()}}},{key:"getOrCreateAtlas",value:function(S,R,T,A){var k=this.renderTypes.get(R),q=this.collections.get(k.collection),M=!1,D=q.draw(A,T,function(N){k.drawClipped?(N.save(),N.beginPath(),N.rect(0,0,T.w,T.h),N.clip(),k.drawElement(N,S,T,!0,!0),N.restore()):k.drawElement(N,S,T,!0,!0),M=!0});if(M){var L=k.getID?k.getID(S):S.id(),I=this._key(R,L);this.typeAndIdToKey.has(I)?this.typeAndIdToKey.get(I).push(A):this.typeAndIdToKey.set(I,[A])}return D}},{key:"getAtlasInfo",value:function(S,R){var T=this,A=this.renderTypes.get(R),k=A.getKey(S),q=Array.isArray(k)?k:[k];return q.map(function(M){var D=A.getBoundingBox(S,M),L=T.getOrCreateAtlas(S,R,D,M),I=L.getOffsets(M),N=_slicedToArray(I,2),F=N[0],H=N[1];return{atlas:L,tex:F,tex1:F,tex2:H,bb:D}})}},{key:"getDebugInfo",value:function(){var S=[],R=_createForOfIteratorHelper(this.collections),T;try{for(R.s();!(T=R.n()).done;){var A=_slicedToArray(T.value,2),k=A[0],q=A[1],M=q.getCounts(),D=M.keyCount,L=M.atlasCount;S.push({type:k,keyCount:D,atlasCount:L})}}catch(I){R.e(I)}finally{R.f()}return S}}])})(),AtlasBatchManager=(function(){function _(v){_classCallCheck(this,_),this.globalOptions=v,this.atlasSize=v.webglTexSize,this.maxAtlasesPerBatch=v.webglTexPerBatch,this.batchAtlases=[]}return _createClass(_,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(S,R){return R})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(S){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(S):!0}},{key:"getAtlasIndexForBatch",value:function(S){var R=this.batchAtlases.indexOf(S);if(R<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(S),R=this.batchAtlases.length-1}return R}}])})(),circleSD=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,rectangleSD=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,roundRectangleSD=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,ellipseSD=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,RENDER_TARGET={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},TEX_PICKING_MODE={IGNORE:1,USE_BB:2},TEXTURE=0,EDGE_STRAIGHT=1,EDGE_CURVE_SEGMENT=2,EDGE_ARROW=3,RECTANGLE=4,ROUND_RECTANGLE=5,BOTTOM_ROUND_RECTANGLE=6,ELLIPSE=7,ElementDrawingWebGL=(function(){function _(v,S,R){_classCallCheck(this,_),this.r=v,this.gl=S,this.maxInstances=R.webglBatchSize,this.atlasSize=R.webglTexSize,this.bgColor=R.bgColor,this.debug=R.webglDebug,this.batchDebugInfo=[],R.enableWrapping=!0,R.createTextureCanvas=createTextureCanvas,this.atlasManager=new AtlasManager(v,R),this.batchManager=new AtlasBatchManager(R),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(RENDER_TARGET.SCREEN),this.pickingProgram=this._createShaderProgram(RENDER_TARGET.PICKING),this.vao=this._createVAO()}return _createClass(_,[{key:"addAtlasCollection",value:function(S,R){this.atlasManager.addAtlasCollection(S,R)}},{key:"addTextureAtlasRenderType",value:function(S,R){this.atlasManager.addRenderType(S,R)}},{key:"addSimpleShapeRenderType",value:function(S,R){this.simpleShapeOptions.set(S,R)}},{key:"invalidate",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=R.type,A=this.atlasManager;return T?A.invalidate(S,{filterType:function(q){return q===T},forceRedraw:!0}):A.invalidate(S)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(S){var R=this.gl,T=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(TEXTURE,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(RECTANGLE," || aVertType == ").concat(ELLIPSE,` 
             || aVertType == `).concat(ROUND_RECTANGLE," || aVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(EDGE_STRAIGHT,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_CURVE_SEGMENT,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_ARROW,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),A=this.batchManager.getIndexArray(),k=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(A.map(function(D){return"uniform sampler2D uTexture".concat(D,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(circleSD,`
      `).concat(rectangleSD,`
      `).concat(roundRectangleSD,`
      `).concat(ellipseSD,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(TEXTURE,`) {
          // look up the texel from the texture unit
          `).concat(A.map(function(D){return"if(vAtlasId == ".concat(D,") outColor = texture(uTexture").concat(D,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(EDGE_ARROW,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(RECTANGLE,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(RECTANGLE," || vVertType == ").concat(ELLIPSE,` 
          || vVertType == `).concat(ROUND_RECTANGLE," || vVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(RECTANGLE,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ELLIPSE,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ELLIPSE,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(S.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),q=createProgram(R,T,k);q.aPosition=R.getAttribLocation(q,"aPosition"),q.aIndex=R.getAttribLocation(q,"aIndex"),q.aVertType=R.getAttribLocation(q,"aVertType"),q.aTransform=R.getAttribLocation(q,"aTransform"),q.aAtlasId=R.getAttribLocation(q,"aAtlasId"),q.aTex=R.getAttribLocation(q,"aTex"),q.aPointAPointB=R.getAttribLocation(q,"aPointAPointB"),q.aPointCPointD=R.getAttribLocation(q,"aPointCPointD"),q.aLineWidth=R.getAttribLocation(q,"aLineWidth"),q.aColor=R.getAttribLocation(q,"aColor"),q.aCornerRadius=R.getAttribLocation(q,"aCornerRadius"),q.aBorderColor=R.getAttribLocation(q,"aBorderColor"),q.uPanZoomMatrix=R.getUniformLocation(q,"uPanZoomMatrix"),q.uAtlasSize=R.getUniformLocation(q,"uAtlasSize"),q.uBGColor=R.getUniformLocation(q,"uBGColor"),q.uZoom=R.getUniformLocation(q,"uZoom"),q.uTextures=[];for(var M=0;M<this.batchManager.getMaxAtlasesPerBatch();M++)q.uTextures.push(R.getUniformLocation(q,"uTexture".concat(M)));return q}},{key:"_createVAO",value:function(){var S=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=S.length/2;var R=this.maxInstances,T=this.gl,A=this.program,k=T.createVertexArray();return T.bindVertexArray(k),createBufferStaticDraw(T,"vec2",A.aPosition,S),this.transformBuffer=create3x3MatrixBufferDynamicDraw(T,R,A.aTransform),this.indexBuffer=createBufferDynamicDraw(T,R,"vec4",A.aIndex),this.vertTypeBuffer=createBufferDynamicDraw(T,R,"int",A.aVertType),this.atlasIdBuffer=createBufferDynamicDraw(T,R,"int",A.aAtlasId),this.texBuffer=createBufferDynamicDraw(T,R,"vec4",A.aTex),this.pointAPointBBuffer=createBufferDynamicDraw(T,R,"vec4",A.aPointAPointB),this.pointCPointDBuffer=createBufferDynamicDraw(T,R,"vec4",A.aPointCPointD),this.lineWidthBuffer=createBufferDynamicDraw(T,R,"vec2",A.aLineWidth),this.colorBuffer=createBufferDynamicDraw(T,R,"vec4",A.aColor),this.cornerRadiusBuffer=createBufferDynamicDraw(T,R,"vec4",A.aCornerRadius),this.borderColorBuffer=createBufferDynamicDraw(T,R,"vec4",A.aBorderColor),T.bindVertexArray(null),k}},{key:"buffers",get:function(){var S=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(R){return endsWith(R,"Buffer")}).map(function(R){return S[R]})),this._buffers}},{key:"startFrame",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RENDER_TARGET.SCREEN;this.panZoomMatrix=S,this.renderTarget=R,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(S,R){return S.visible()?R&&R.isVisible?R.isVisible(S):!0:!1}},{key:"drawTexture",value:function(S,R,T){var A=this.atlasManager,k=this.batchManager,q=A.getRenderTypeOpts(T);if(this._isVisible(S,q)&&!(S.isEdge()&&!this._isValidEdge(S))){if(this.renderTarget.picking&&q.getTexPickingMode){var M=q.getTexPickingMode(S);if(M===TEX_PICKING_MODE.IGNORE)return;if(M==TEX_PICKING_MODE.USE_BB){this.drawPickingRectangle(S,R,T);return}}var D=A.getAtlasInfo(S,T),L=_createForOfIteratorHelper(D),I;try{for(L.s();!(I=L.n()).done;){var N=I.value,F=N.atlas,H=N.tex1,G=N.tex2;k.canAddToCurrentBatch(F)||this.endBatch();for(var V=k.getAtlasIndexForBatch(F),j=0,W=[[H,!0],[G,!1]];j<W.length;j++){var X=_slicedToArray(W[j],2),J=X[0],te=X[1];if(J.w!=0){var re=this.instanceCount;this.vertTypeBuffer.getView(re)[0]=TEXTURE;var ee=this.indexBuffer.getView(re);indexToVec4(R,ee);var ne=this.atlasIdBuffer.getView(re);ne[0]=V;var oe=this.texBuffer.getView(re);oe[0]=J.x,oe[1]=J.y,oe[2]=J.w,oe[3]=J.h;var ue=this.transformBuffer.getMatrixView(re);this.setTransformMatrix(S,ue,q,N,te),this.instanceCount++,te||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(ce){L.e(ce)}finally{L.f()}}}},{key:"setTransformMatrix",value:function(S,R,T,A){var k=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,q=0;if(T.shapeProps&&T.shapeProps.padding&&(q=S.pstyle(T.shapeProps.padding).pfValue),A){var M=A.bb,D=A.tex1,L=A.tex2,I=D.w/(D.w+L.w);k||(I=1-I);var N=this._getAdjustedBB(M,q,k,I);this._applyTransformMatrix(R,N,T,S)}else{var F=T.getBoundingBox(S),H=this._getAdjustedBB(F,q,!0,1);this._applyTransformMatrix(R,H,T,S)}}},{key:"_applyTransformMatrix",value:function(S,R,T,A){var k,q;identity(S);var M=T.getRotation?T.getRotation(A):0;if(M!==0){var D=T.getRotationPoint(A),L=D.x,I=D.y;translate(S,S,[L,I]),rotate(S,S,M);var N=T.getRotationOffset(A);k=N.x+(R.xOffset||0),q=N.y+(R.yOffset||0)}else k=R.x1,q=R.y1;translate(S,S,[k,q]),scale(S,S,[R.w,R.h])}},{key:"_getAdjustedBB",value:function(S,R,T,A){var k=S.x1,q=S.y1,M=S.w,D=S.h,L=S.yOffset;R&&(k-=R,q-=R,M+=2*R,D+=2*R);var I=0,N=M*A;return T&&A<1?M=N:!T&&A<1&&(I=M-N,k+=I,M=N),{x1:k,y1:q,w:M,h:D,xOffset:I,yOffset:L}}},{key:"drawPickingRectangle",value:function(S,R,T){var A=this.atlasManager.getRenderTypeOpts(T),k=this.instanceCount;this.vertTypeBuffer.getView(k)[0]=RECTANGLE;var q=this.indexBuffer.getView(k);indexToVec4(R,q);var M=this.colorBuffer.getView(k);toWebGLColor([0,0,0],1,M);var D=this.transformBuffer.getMatrixView(k);this.setTransformMatrix(S,D,A),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(S,R,T){var A=this.simpleShapeOptions.get(T);if(this._isVisible(S,A)){var k=A.shapeProps,q=this._getVertTypeForShape(S,k.shape);if(q===void 0||A.isSimple&&!A.isSimple(S)){this.drawTexture(S,R,T);return}var M=this.instanceCount;if(this.vertTypeBuffer.getView(M)[0]=q,q===ROUND_RECTANGLE||q===BOTTOM_ROUND_RECTANGLE){var D=A.getBoundingBox(S),L=this._getCornerRadius(S,k.radius,D),I=this.cornerRadiusBuffer.getView(M);I[0]=L,I[1]=L,I[2]=L,I[3]=L,q===BOTTOM_ROUND_RECTANGLE&&(I[0]=0,I[2]=0)}var N=this.indexBuffer.getView(M);indexToVec4(R,N);var F=S.pstyle(k.color).value,H=S.pstyle(k.opacity).value,G=this.colorBuffer.getView(M);toWebGLColor(F,H,G);var V=this.lineWidthBuffer.getView(M);if(V[0]=0,V[1]=0,k.border){var j=S.pstyle("border-width").value;if(j>0){var W=S.pstyle("border-color").value,X=S.pstyle("border-opacity").value,J=this.borderColorBuffer.getView(M);toWebGLColor(W,X,J);var te=S.pstyle("border-position").value;if(te==="inside")V[0]=0,V[1]=-j;else if(te==="outside")V[0]=j,V[1]=0;else{var re=j/2;V[0]=re,V[1]=-re}}}var ee=this.transformBuffer.getMatrixView(M);this.setTransformMatrix(S,ee,A),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(S,R){var T=S.pstyle(R).value;switch(T){case"rectangle":return RECTANGLE;case"ellipse":return ELLIPSE;case"roundrectangle":case"round-rectangle":return ROUND_RECTANGLE;case"bottom-round-rectangle":return BOTTOM_ROUND_RECTANGLE;default:return}}},{key:"_getCornerRadius",value:function(S,R,T){var A=T.w,k=T.h;if(S.pstyle(R).value==="auto")return getRoundRectangleRadius(A,k);var q=S.pstyle(R).pfValue,M=A/2,D=k/2;return Math.min(q,D,M)}},{key:"drawEdgeArrow",value:function(S,R,T){if(S.visible()){var A=S._private.rscratch,k,q,M;if(T==="source"?(k=A.arrowStartX,q=A.arrowStartY,M=A.srcArrowAngle):(k=A.arrowEndX,q=A.arrowEndY,M=A.tgtArrowAngle),!(isNaN(k)||k==null||isNaN(q)||q==null||isNaN(M)||M==null)){var D=S.pstyle(T+"-arrow-shape").value;if(D!=="none"){var L=S.pstyle(T+"-arrow-color").value,I=S.pstyle("opacity").value,N=S.pstyle("line-opacity").value,F=I*N,H=S.pstyle("width").pfValue,G=S.pstyle("arrow-scale").value,V=this.r.getArrowWidth(H,G),j=this.instanceCount,W=this.transformBuffer.getMatrixView(j);identity(W),translate(W,W,[k,q]),scale(W,W,[V,V]),rotate(W,W,M),this.vertTypeBuffer.getView(j)[0]=EDGE_ARROW;var X=this.indexBuffer.getView(j);indexToVec4(R,X);var J=this.colorBuffer.getView(j);toWebGLColor(L,F,J),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(S,R){if(S.visible()){var T=this._getEdgePoints(S);if(T){var A=S.pstyle("opacity").value,k=S.pstyle("line-opacity").value,q=S.pstyle("width").pfValue,M=S.pstyle("line-color").value,D=A*k;if(T.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),T.length==4){var L=this.instanceCount;this.vertTypeBuffer.getView(L)[0]=EDGE_STRAIGHT;var I=this.indexBuffer.getView(L);indexToVec4(R,I);var N=this.colorBuffer.getView(L);toWebGLColor(M,D,N);var F=this.lineWidthBuffer.getView(L);F[0]=q;var H=this.pointAPointBBuffer.getView(L);H[0]=T[0],H[1]=T[1],H[2]=T[2],H[3]=T[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var G=0;G<T.length-2;G+=2){var V=this.instanceCount;this.vertTypeBuffer.getView(V)[0]=EDGE_CURVE_SEGMENT;var j=this.indexBuffer.getView(V);indexToVec4(R,j);var W=this.colorBuffer.getView(V);toWebGLColor(M,D,W);var X=this.lineWidthBuffer.getView(V);X[0]=q;var J=T[G-2],te=T[G-1],re=T[G],ee=T[G+1],ne=T[G+2],oe=T[G+3],ue=T[G+4],ce=T[G+5];G==0&&(J=2*re-ne+.001,te=2*ee-oe+.001),G==T.length-4&&(ue=2*ne-re+.001,ce=2*oe-ee+.001);var de=this.pointAPointBBuffer.getView(V);de[0]=J,de[1]=te,de[2]=re,de[3]=ee;var pe=this.pointCPointDBuffer.getView(V);pe[0]=ne,pe[1]=oe,pe[2]=ue,pe[3]=ce,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(S){var R=S._private.rscratch;return!(R.badLine||R.allpts==null||isNaN(R.allpts[0]))}},{key:"_getEdgePoints",value:function(S){var R=S._private.rscratch;if(this._isValidEdge(S)){var T=R.allpts;if(T.length==4)return T;var A=this._getNumSegments(S);return this._getCurveSegmentPoints(T,A)}}},{key:"_getNumSegments",value:function(S){var R=15;return Math.min(Math.max(R,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(S,R){if(S.length==4)return S;for(var T=Array((R+1)*2),A=0;A<=R;A++)if(A==0)T[0]=S[0],T[1]=S[1];else if(A==R)T[A*2]=S[S.length-2],T[A*2+1]=S[S.length-1];else{var k=A/R;this._setCurvePoint(S,k,T,A*2)}return T}},{key:"_setCurvePoint",value:function(S,R,T,A){if(S.length<=2)T[A]=S[0],T[A+1]=S[1];else{for(var k=Array(S.length-2),q=0;q<k.length;q+=2){var M=(1-R)*S[q]+R*S[q+2],D=(1-R)*S[q+1]+R*S[q+3];k[q]=M,k[q+1]=D}return this._setCurvePoint(k,R,T,A)}}},{key:"endBatch",value:function(){var S=this.gl,R=this.vao,T=this.vertexCount,A=this.instanceCount;if(A!==0){var k=this.renderTarget.picking?this.pickingProgram:this.program;S.useProgram(k),S.bindVertexArray(R);var q=_createForOfIteratorHelper(this.buffers),M;try{for(q.s();!(M=q.n()).done;){var D=M.value;D.bufferSubData(A)}}catch(H){q.e(H)}finally{q.f()}for(var L=this.batchManager.getAtlases(),I=0;I<L.length;I++)L[I].bufferIfNeeded(S);for(var N=0;N<L.length;N++)S.activeTexture(S.TEXTURE0+N),S.bindTexture(S.TEXTURE_2D,L[N].texture),S.uniform1i(k.uTextures[N],N);S.uniform1f(k.uZoom,getEffectiveZoom(this.r)),S.uniformMatrix3fv(k.uPanZoomMatrix,!1,this.panZoomMatrix),S.uniform1i(k.uAtlasSize,this.batchManager.getAtlasSize());var F=toWebGLColor(this.bgColor,1);S.uniform4fv(k.uBGColor,F),S.drawArraysInstanced(S.TRIANGLES,0,T,A),S.bindVertexArray(null),S.bindTexture(S.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:A,atlasCount:L.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var S=this.atlasManager.getDebugInfo(),R=S.reduce(function(k,q){return k+q.atlasCount},0),T=this.batchDebugInfo,A=T.reduce(function(k,q){return k+q.count},0);return{atlasInfo:S,totalAtlases:R,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:T.length,batchInfo:T,totalInstances:A}}}])})(),CRp$4={};CRp$4.initWebgl=function(_,v){var S=this,R=S.data.contexts[S.WEBGL];_.bgColor=getBGColor(S),_.webglTexSize=Math.min(_.webglTexSize,R.getParameter(R.MAX_TEXTURE_SIZE)),_.webglTexRows=Math.min(_.webglTexRows,54),_.webglTexRowsNodes=Math.min(_.webglTexRowsNodes,54),_.webglBatchSize=Math.min(_.webglBatchSize,16384),_.webglTexPerBatch=Math.min(_.webglTexPerBatch,R.getParameter(R.MAX_TEXTURE_IMAGE_UNITS)),S.webglDebug=_.webglDebug,S.webglDebugShowAtlases=_.webglDebugShowAtlases,S.pickingFrameBuffer=createPickingFrameBuffer(R),S.pickingFrameBuffer.needsDraw=!0,S.drawing=new ElementDrawingWebGL(S,R,_);var T=function(I){return function(N){return S.getTextAngle(N,I)}},A=function(I){return function(N){var F=N.pstyle(I);return F&&F.value}},k=function(I){return function(N){return N.pstyle("".concat(I,"-opacity")).value>0}},q=function(I){var N=I.pstyle("text-events").strValue==="yes";return N?TEX_PICKING_MODE.USE_BB:TEX_PICKING_MODE.IGNORE},M=function(I){var N=I.position(),F=N.x,H=N.y,G=I.outerWidth(),V=I.outerHeight();return{w:G,h:V,x1:F-G/2,y1:H-V/2}};S.drawing.addAtlasCollection("node",{texRows:_.webglTexRowsNodes}),S.drawing.addAtlasCollection("label",{texRows:_.webglTexRows}),S.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:v.getStyleKey,getBoundingBox:v.getElementBox,drawElement:v.drawElement}),S.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:M,isSimple:isSimpleShape,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),S.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:M,isVisible:k("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),S.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:M,isVisible:k("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),S.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:q,getKey:getStyleKeysForLabel(v.getLabelKey,null),getBoundingBox:getBoundingBoxForLabel(v.getLabelBox,null),drawClipped:!0,drawElement:v.drawLabel,getRotation:T(null),getRotationPoint:v.getLabelRotationPoint,getRotationOffset:v.getLabelRotationOffset,isVisible:A("label")}),S.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:q,getKey:getStyleKeysForLabel(v.getSourceLabelKey,"source"),getBoundingBox:getBoundingBoxForLabel(v.getSourceLabelBox,"source"),drawClipped:!0,drawElement:v.drawSourceLabel,getRotation:T("source"),getRotationPoint:v.getSourceLabelRotationPoint,getRotationOffset:v.getSourceLabelRotationOffset,isVisible:A("source-label")}),S.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:q,getKey:getStyleKeysForLabel(v.getTargetLabelKey,"target"),getBoundingBox:getBoundingBoxForLabel(v.getTargetLabelBox,"target"),drawClipped:!0,drawElement:v.drawTargetLabel,getRotation:T("target"),getRotationPoint:v.getTargetLabelRotationPoint,getRotationOffset:v.getTargetLabelRotationOffset,isVisible:A("target-label")});var D=debounce(function(){console.log("garbage collect flag set"),S.data.gc=!0},1e4);S.onUpdateEleCalcs(function(L,I){var N=!1;I&&I.length>0&&(N|=S.drawing.invalidate(I)),N&&D()}),overrideCanvasRendererFunctions(S)};function getBGColor(_){var v=_.cy.container(),S=v&&v.style&&v.style.backgroundColor||"white";return color2tuple(S)}function getLabelLines(_,v){var S=_._private.rscratch;return getPrefixedProperty(S,"labelWrapCachedLines",v)||[]}var getStyleKeysForLabel=function(v,S){return function(R){var T=v(R),A=getLabelLines(R,S);return A.length>1?A.map(function(k,q){return"".concat(T,"_").concat(q)}):T}},getBoundingBoxForLabel=function(v,S){return function(R,T){var A=v(R);if(typeof T=="string"){var k=T.indexOf("_");if(k>0){var q=Number(T.substring(k+1)),M=getLabelLines(R,S),D=A.h/M.length,L=D*q,I=A.y1+L;return{x1:A.x1,w:A.w,y1:I,h:D,yOffset:L}}}return A}};function overrideCanvasRendererFunctions(_){{var v=_.render;_.render=function(A){A=A||{};var k=_.cy;_.webgl&&(k.zoom()>maxZoom$1?(clearWebgl(_),v.call(_,A)):(clearCanvas(_),renderWebgl(_,A,RENDER_TARGET.SCREEN)))}}{var S=_.matchCanvasSize;_.matchCanvasSize=function(A){S.call(_,A),_.pickingFrameBuffer.setFramebufferAttachmentSizes(_.canvasWidth,_.canvasHeight),_.pickingFrameBuffer.needsDraw=!0}}_.findNearestElements=function(A,k,q,M){return findNearestElementsWebgl(_,A,k)};{var R=_.invalidateCachedZSortedEles;_.invalidateCachedZSortedEles=function(){R.call(_),_.pickingFrameBuffer.needsDraw=!0}}{var T=_.notify;_.notify=function(A,k){T.call(_,A,k),A==="viewport"||A==="bounds"?_.pickingFrameBuffer.needsDraw=!0:A==="background"&&_.drawing.invalidate(k,{type:"node-body"})}}}function clearWebgl(_){var v=_.data.contexts[_.WEBGL];v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}function clearCanvas(_){var v=function(R){R.save(),R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,_.canvasWidth,_.canvasHeight),R.restore()};v(_.data.contexts[_.NODE]),v(_.data.contexts[_.DRAG])}function createPanZoomMatrix(_){var v=_.canvasWidth,S=_.canvasHeight,R=getEffectivePanZoom(_),T=R.pan,A=R.zoom,k=create();translate(k,k,[T.x,T.y]),scale(k,k,[A,A]);var q=create();projection(q,v,S);var M=create();return multiply(M,q,k),M}function setContextTransform(_,v){var S=_.canvasWidth,R=_.canvasHeight,T=getEffectivePanZoom(_),A=T.pan,k=T.zoom;v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,S,R),v.translate(A.x,A.y),v.scale(k,k)}function drawSelectionRectangle(_,v){_.drawSelectionRectangle(v,function(S){return setContextTransform(_,S)})}function drawAxes(_){var v=_.data.contexts[_.NODE];v.save(),setContextTransform(_,v),v.strokeStyle="rgba(0, 0, 0, 0.3)",v.beginPath(),v.moveTo(-1e3,0),v.lineTo(1e3,0),v.stroke(),v.beginPath(),v.moveTo(0,-1e3),v.lineTo(0,1e3),v.stroke(),v.restore()}function drawAtlases(_){var v=function(T,A,k){for(var q=T.atlasManager.getAtlasCollection(A),M=_.data.contexts[_.NODE],D=q.atlases,L=0;L<D.length;L++){var I=D[L],N=I.canvas;if(N){var F=N.width,H=N.height,G=F*L,V=N.height*k,j=.4;M.save(),M.scale(j,j),M.drawImage(N,G,V),M.strokeStyle="black",M.rect(G,V,F,H),M.stroke(),M.restore()}}},S=0;v(_.drawing,"node",S++),v(_.drawing,"label",S++)}function getPickingIndexes(_,v,S,R,T){var A,k,q,M,D=getEffectivePanZoom(_),L=D.pan,I=D.zoom;{var N=modelToRenderedPosition(_,L,I,v,S),F=_slicedToArray(N,2),H=F[0],G=F[1],V=6;A=H-V/2,k=G-V/2,q=V,M=V}if(q===0||M===0)return[];var j=_.data.contexts[_.WEBGL];j.bindFramebuffer(j.FRAMEBUFFER,_.pickingFrameBuffer),_.pickingFrameBuffer.needsDraw&&(j.viewport(0,0,j.canvas.width,j.canvas.height),renderWebgl(_,null,RENDER_TARGET.PICKING),_.pickingFrameBuffer.needsDraw=!1);var W=q*M,X=new Uint8Array(W*4);j.readPixels(A,k,q,M,j.RGBA,j.UNSIGNED_BYTE,X),j.bindFramebuffer(j.FRAMEBUFFER,null);for(var J=new Set,te=0;te<W;te++){var re=X.slice(te*4,te*4+4),ee=vec4ToIndex(re)-1;ee>=0&&J.add(ee)}return J}function findNearestElementsWebgl(_,v,S){var R=getPickingIndexes(_,v,S),T=_.getCachedZSortedEles(),A,k,q=_createForOfIteratorHelper(R),M;try{for(q.s();!(M=q.n()).done;){var D=M.value,L=T[D];if(!A&&L.isNode()&&(A=L),!k&&L.isEdge()&&(k=L),A&&k)break}}catch(I){q.e(I)}finally{q.f()}return[A,k].filter(Boolean)}function drawEle(_,v,S){var R=_.drawing;v+=1,S.isNode()?(R.drawNode(S,v,"node-underlay"),R.drawNode(S,v,"node-body"),R.drawTexture(S,v,"label"),R.drawNode(S,v,"node-overlay")):(R.drawEdgeLine(S,v),R.drawEdgeArrow(S,v,"source"),R.drawEdgeArrow(S,v,"target"),R.drawTexture(S,v,"label"),R.drawTexture(S,v,"edge-source-label"),R.drawTexture(S,v,"edge-target-label"))}function renderWebgl(_,v,S){var R;_.webglDebug&&(R=performance.now());var T=_.drawing,A=0;if(S.screen&&_.data.canvasNeedsRedraw[_.SELECT_BOX]&&drawSelectionRectangle(_,v),_.data.canvasNeedsRedraw[_.NODE]||S.picking){var k=_.data.contexts[_.WEBGL];S.screen?(k.clearColor(0,0,0,0),k.enable(k.BLEND),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA)):k.disable(k.BLEND),k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT),k.viewport(0,0,k.canvas.width,k.canvas.height);var q=createPanZoomMatrix(_),M=_.getCachedZSortedEles();if(A=M.length,T.startFrame(q,S),S.screen){for(var D=0;D<M.nondrag.length;D++)drawEle(_,D,M.nondrag[D]);for(var L=0;L<M.drag.length;L++)drawEle(_,L,M.drag[L])}else if(S.picking)for(var I=0;I<M.length;I++)drawEle(_,I,M[I]);T.endFrame(),S.screen&&_.webglDebugShowAtlases&&(drawAxes(_),drawAtlases(_)),_.data.canvasNeedsRedraw[_.NODE]=!1,_.data.canvasNeedsRedraw[_.DRAG]=!1}if(_.webglDebug){var N=performance.now(),F=!1,H=Math.ceil(N-R),G=T.getDebugInfo(),V=["".concat(A," elements"),"".concat(G.totalInstances," instances"),"".concat(G.batchCount," batches"),"".concat(G.totalAtlases," atlases"),"".concat(G.wrappedCount," wrapped textures"),"".concat(G.simpleCount," simple shapes")].join(", ");if(F)console.log("WebGL (".concat(S.name,") - time ").concat(H,"ms, ").concat(V));else{console.log("WebGL (".concat(S.name,") - frame time ").concat(H,"ms")),console.log("Totals:"),console.log("  ".concat(V)),console.log("Texture Atlases Used:");var j=G.atlasInfo,W=_createForOfIteratorHelper(j),X;try{for(W.s();!(X=W.n()).done;){var J=X.value;console.log("  ".concat(J.type,": ").concat(J.keyCount," keys, ").concat(J.atlasCount," atlases"))}}catch(te){W.e(te)}finally{W.f()}console.log("")}}_.data.gc&&(console.log("Garbage Collect!"),_.data.gc=!1,T.gc())}var CRp$3={};CRp$3.drawPolygonPath=function(_,v,S,R,T,A){var k=R/2,q=T/2;_.beginPath&&_.beginPath(),_.moveTo(v+k*A[0],S+q*A[1]);for(var M=1;M<A.length/2;M++)_.lineTo(v+k*A[M*2],S+q*A[M*2+1]);_.closePath()};CRp$3.drawRoundPolygonPath=function(_,v,S,R,T,A,k){k.forEach(function(q){return drawPreparedRoundCorner(_,q)}),_.closePath()};CRp$3.drawRoundRectanglePath=function(_,v,S,R,T,A){var k=R/2,q=T/2,M=A==="auto"?getRoundRectangleRadius(R,T):Math.min(A,q,k);_.beginPath&&_.beginPath(),_.moveTo(v,S-q),_.arcTo(v+k,S-q,v+k,S,M),_.arcTo(v+k,S+q,v,S+q,M),_.arcTo(v-k,S+q,v-k,S,M),_.arcTo(v-k,S-q,v,S-q,M),_.lineTo(v,S-q),_.closePath()};CRp$3.drawBottomRoundRectanglePath=function(_,v,S,R,T,A){var k=R/2,q=T/2,M=A==="auto"?getRoundRectangleRadius(R,T):A;_.beginPath&&_.beginPath(),_.moveTo(v,S-q),_.lineTo(v+k,S-q),_.lineTo(v+k,S),_.arcTo(v+k,S+q,v,S+q,M),_.arcTo(v-k,S+q,v-k,S,M),_.lineTo(v-k,S-q),_.lineTo(v,S-q),_.closePath()};CRp$3.drawCutRectanglePath=function(_,v,S,R,T,A,k){var q=R/2,M=T/2,D=k==="auto"?getCutRectangleCornerLength():k;_.beginPath&&_.beginPath(),_.moveTo(v-q+D,S-M),_.lineTo(v+q-D,S-M),_.lineTo(v+q,S-M+D),_.lineTo(v+q,S+M-D),_.lineTo(v+q-D,S+M),_.lineTo(v-q+D,S+M),_.lineTo(v-q,S+M-D),_.lineTo(v-q,S-M+D),_.closePath()};CRp$3.drawBarrelPath=function(_,v,S,R,T){var A=R/2,k=T/2,q=v-A,M=v+A,D=S-k,L=S+k,I=getBarrelCurveConstants(R,T),N=I.widthOffset,F=I.heightOffset,H=I.ctrlPtOffsetPct*N;_.beginPath&&_.beginPath(),_.moveTo(q,D+F),_.lineTo(q,L-F),_.quadraticCurveTo(q+H,L,q+N,L),_.lineTo(M-N,L),_.quadraticCurveTo(M-H,L,M,L-F),_.lineTo(M,D+F),_.quadraticCurveTo(M-H,D,M-N,D),_.lineTo(q+N,D),_.quadraticCurveTo(q+H,D,q,D+F),_.closePath()};var sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40;for(var i$2=0*Math.PI;i$2<2*Math.PI;i$2+=ellipseStepSize)sin[i$2]=Math.sin(i$2),cos[i$2]=Math.cos(i$2);CRp$3.drawEllipsePath=function(_,v,S,R,T){if(_.beginPath&&_.beginPath(),_.ellipse)_.ellipse(v,S,R/2,T/2,0,0,2*Math.PI);else for(var A,k,q=R/2,M=T/2,D=0*Math.PI;D<2*Math.PI;D+=ellipseStepSize)A=v-q*sin[D]*sin0+q*cos[D]*cos0,k=S+M*cos[D]*sin0+M*sin[D]*cos0,D===0?_.moveTo(A,k):_.lineTo(A,k);_.closePath()};var CRp$2={};CRp$2.createBuffer=function(_,v){var S=document.createElement("canvas");return S.width=_,S.height=v,[S,S.getContext("2d")]};CRp$2.bufferCanvasImage=function(_){var v=this.cy,S=v.mutableElements(),R=S.boundingBox(),T=this.findContainerClientCoords(),A=_.full?Math.ceil(R.w):T[2],k=_.full?Math.ceil(R.h):T[3],q=number$1(_.maxWidth)||number$1(_.maxHeight),M=this.getPixelRatio(),D=1;if(_.scale!==void 0)A*=_.scale,k*=_.scale,D=_.scale;else if(q){var L=1/0,I=1/0;number$1(_.maxWidth)&&(L=D*_.maxWidth/A),number$1(_.maxHeight)&&(I=D*_.maxHeight/k),D=Math.min(L,I),A*=D,k*=D}q||(A*=M,k*=M,D*=M);var N=document.createElement("canvas");N.width=A,N.height=k,N.style.width=A+"px",N.style.height=k+"px";var F=N.getContext("2d");if(A>0&&k>0){F.clearRect(0,0,A,k),F.globalCompositeOperation="source-over";var H=this.getCachedZSortedEles();if(_.full)F.translate(-R.x1*D,-R.y1*D),F.scale(D,D),this.drawElements(F,H),F.scale(1/D,1/D),F.translate(R.x1*D,R.y1*D);else{var G=v.pan(),V={x:G.x*D,y:G.y*D};D*=v.zoom(),F.translate(V.x,V.y),F.scale(D,D),this.drawElements(F,H),F.scale(1/D,1/D),F.translate(-V.x,-V.y)}_.bg&&(F.globalCompositeOperation="destination-over",F.fillStyle=_.bg,F.rect(0,0,A,k),F.fill())}return N};function b64ToBlob(_,v){for(var S=atob(_),R=new ArrayBuffer(S.length),T=new Uint8Array(R),A=0;A<S.length;A++)T[A]=S.charCodeAt(A);return new Blob([R],{type:v})}function b64UriToB64(_){var v=_.indexOf(",");return _.substr(v+1)}function output(_,v,S){var R=function(){return v.toDataURL(S,_.quality)};switch(_.output){case"blob-promise":return new Promise$1(function(T,A){try{v.toBlob(function(k){k!=null?T(k):A(new Error("`canvas.toBlob()` sent a null value in its callback"))},S,_.quality)}catch(k){A(k)}});case"blob":return b64ToBlob(b64UriToB64(R()),S);case"base64":return b64UriToB64(R());case"base64uri":default:return R()}}CRp$2.png=function(_){return output(_,this.bufferCanvasImage(_),"image/png")};CRp$2.jpg=function(_){return output(_,this.bufferCanvasImage(_),"image/jpeg")};var CRp$1={};CRp$1.nodeShapeImpl=function(_,v,S,R,T,A,k,q){switch(_){case"ellipse":return this.drawEllipsePath(v,S,R,T,A);case"polygon":return this.drawPolygonPath(v,S,R,T,A,k);case"round-polygon":return this.drawRoundPolygonPath(v,S,R,T,A,k,q);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(v,S,R,T,A,q);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(v,S,R,T,A,k,q);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(v,S,R,T,A,q);case"barrel":return this.drawBarrelPath(v,S,R,T,A)}};var CR=CanvasRenderer,CRp=CanvasRenderer.prototype;CRp.CANVAS_LAYERS=3;CRp.SELECT_BOX=0;CRp.DRAG=1;CRp.NODE=2;CRp.WEBGL=3;CRp.CANVAS_TYPES=["2d","2d","2d","webgl2"];CRp.BUFFER_COUNT=3;CRp.TEXTURE_BUFFER=0;CRp.MOTIONBLUR_BUFFER_NODE=1;CRp.MOTIONBLUR_BUFFER_DRAG=2;function CanvasRenderer(_){var v=this,S=v.cy.window(),R=S.document;_.webgl&&(CRp.CANVAS_LAYERS=v.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),v.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};var T="-webkit-tap-highlight-color",A="rgba(0,0,0,0)";v.data.canvasContainer=R.createElement("div");var k=v.data.canvasContainer.style;v.data.canvasContainer.style[T]=A,k.position="relative",k.zIndex="0",k.overflow="hidden";var q=_.cy.container();q.appendChild(v.data.canvasContainer),q.style[T]=A;var M={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(M["-ms-touch-action"]="none",M["touch-action"]="none");for(var D=0;D<CRp.CANVAS_LAYERS;D++){var L=v.data.canvases[D]=R.createElement("canvas"),I=CRp.CANVAS_TYPES[D];v.data.contexts[D]=L.getContext(I),v.data.contexts[D]||error("Could not create canvas of type "+I),Object.keys(M).forEach(function(Ne){L.style[Ne]=M[Ne]}),L.style.position="absolute",L.setAttribute("data-id","layer"+D),L.style.zIndex=String(CRp.CANVAS_LAYERS-D),v.data.canvasContainer.appendChild(L),v.data.canvasNeedsRedraw[D]=!1}v.data.topCanvas=v.data.canvases[0],v.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),v.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),v.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag"),v.data.canvases[CRp.WEBGL]&&v.data.canvases[CRp.WEBGL].setAttribute("data-id","layer"+CRp.WEBGL+"-webgl");for(var D=0;D<CRp.BUFFER_COUNT;D++)v.data.bufferCanvases[D]=R.createElement("canvas"),v.data.bufferContexts[D]=v.data.bufferCanvases[D].getContext("2d"),v.data.bufferCanvases[D].style.position="absolute",v.data.bufferCanvases[D].setAttribute("data-id","buffer"+D),v.data.bufferCanvases[D].style.zIndex=String(-D-1),v.data.bufferCanvases[D].style.visibility="hidden";v.pathsEnabled=!0;var N=makeBoundingBox(),F=function(Pe){return{x:(Pe.x1+Pe.x2)/2,y:(Pe.y1+Pe.y2)/2}},H=function(Pe){return{x:-Pe.w/2,y:-Pe.h/2}},G=function(Pe){var Me=Pe[0]._private,Ie=Me.oldBackgroundTimestamp===Me.backgroundTimestamp;return!Ie},V=function(Pe){return Pe[0]._private.nodeKey},j=function(Pe){return Pe[0]._private.labelStyleKey},W=function(Pe){return Pe[0]._private.sourceLabelStyleKey},X=function(Pe){return Pe[0]._private.targetLabelStyleKey},J=function(Pe,Me,Ie,Le,nt){return v.drawElement(Pe,Me,Ie,!1,!1,nt)},te=function(Pe,Me,Ie,Le,nt){return v.drawElementText(Pe,Me,Ie,Le,"main",nt)},re=function(Pe,Me,Ie,Le,nt){return v.drawElementText(Pe,Me,Ie,Le,"source",nt)},ee=function(Pe,Me,Ie,Le,nt){return v.drawElementText(Pe,Me,Ie,Le,"target",nt)},ne=function(Pe){return Pe.boundingBox(),Pe[0]._private.bodyBounds},oe=function(Pe){return Pe.boundingBox(),Pe[0]._private.labelBounds.main||N},ue=function(Pe){return Pe.boundingBox(),Pe[0]._private.labelBounds.source||N},ce=function(Pe){return Pe.boundingBox(),Pe[0]._private.labelBounds.target||N},de=function(Pe,Me){return Me},pe=function(Pe){return F(ne(Pe))},_e=function(Pe,Me,Ie){var Le=Pe?Pe+"-":"";return{x:Me.x+Ie.pstyle(Le+"text-margin-x").pfValue,y:Me.y+Ie.pstyle(Le+"text-margin-y").pfValue}},Ee=function(Pe,Me,Ie){var Le=Pe[0]._private.rscratch;return{x:Le[Me],y:Le[Ie]}},ge=function(Pe){return _e("",Ee(Pe,"labelX","labelY"),Pe)},be=function(Pe){return _e("source",Ee(Pe,"sourceLabelX","sourceLabelY"),Pe)},Ae=function(Pe){return _e("target",Ee(Pe,"targetLabelX","targetLabelY"),Pe)},De=function(Pe){return H(ne(Pe))},ve=function(Pe){return H(ue(Pe))},le=function(Pe){return H(ce(Pe))},me=function(Pe){var Me=oe(Pe),Ie=H(oe(Pe));if(Pe.isNode()){switch(Pe.pstyle("text-halign").value){case"left":Ie.x=-Me.w-(Me.leftPad||0);break;case"right":Ie.x=-(Me.rightPad||0);break}switch(Pe.pstyle("text-valign").value){case"top":Ie.y=-Me.h-(Me.topPad||0);break;case"bottom":Ie.y=-(Me.botPad||0);break}}return Ie},Te=v.data.eleTxrCache=new ElementTextureCache(v,{getKey:V,doesEleInvalidateKey:G,drawElement:J,getBoundingBox:ne,getRotationPoint:pe,getRotationOffset:De,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ye=v.data.lblTxrCache=new ElementTextureCache(v,{getKey:j,drawElement:te,getBoundingBox:oe,getRotationPoint:ge,getRotationOffset:me,isVisible:de}),Re=v.data.slbTxrCache=new ElementTextureCache(v,{getKey:W,drawElement:re,getBoundingBox:ue,getRotationPoint:be,getRotationOffset:ve,isVisible:de}),qe=v.data.tlbTxrCache=new ElementTextureCache(v,{getKey:X,drawElement:ee,getBoundingBox:ce,getRotationPoint:Ae,getRotationOffset:le,isVisible:de}),ke=v.data.lyrTxrCache=new LayeredTextureCache(v);v.onUpdateEleCalcs(function(Pe,Me){Te.invalidateElements(Me),ye.invalidateElements(Me),Re.invalidateElements(Me),qe.invalidateElements(Me),ke.invalidateElements(Me);for(var Ie=0;Ie<Me.length;Ie++){var Le=Me[Ie]._private;Le.oldBackgroundTimestamp=Le.backgroundTimestamp}});var ze=function(Pe){for(var Me=0;Me<Pe.length;Me++)ke.enqueueElementRefinement(Pe[Me].ele)};Te.onDequeue(ze),ye.onDequeue(ze),Re.onDequeue(ze),qe.onDequeue(ze),_.webgl&&v.initWebgl(_,{getStyleKey:V,getLabelKey:j,getSourceLabelKey:W,getTargetLabelKey:X,drawElement:J,drawLabel:te,drawSourceLabel:re,drawTargetLabel:ee,getElementBox:ne,getLabelBox:oe,getSourceLabelBox:ue,getTargetLabelBox:ce,getElementRotationPoint:pe,getElementRotationOffset:De,getLabelRotationPoint:ge,getSourceLabelRotationPoint:be,getTargetLabelRotationPoint:Ae,getLabelRotationOffset:me,getSourceLabelRotationOffset:ve,getTargetLabelRotationOffset:le})}CRp.redrawHint=function(_,v){var S=this;switch(_){case"eles":S.data.canvasNeedsRedraw[CRp.NODE]=v;break;case"drag":S.data.canvasNeedsRedraw[CRp.DRAG]=v;break;case"select":S.data.canvasNeedsRedraw[CRp.SELECT_BOX]=v;break;case"gc":S.data.gc=!0;break}};var pathsImpld=typeof Path2D<"u";CRp.path2dEnabled=function(_){if(_===void 0)return this.pathsEnabled;this.pathsEnabled=!!_};CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled};CRp.setImgSmoothing=function(_,v){_.imageSmoothingEnabled!=null?_.imageSmoothingEnabled=v:(_.webkitImageSmoothingEnabled=v,_.mozImageSmoothingEnabled=v,_.msImageSmoothingEnabled=v)};CRp.getImgSmoothing=function(_){return _.imageSmoothingEnabled!=null?_.imageSmoothingEnabled:_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled};CRp.makeOffscreenCanvas=function(_,v){var S;if((typeof OffscreenCanvas>"u"?"undefined":_typeof(OffscreenCanvas))!=="undefined")S=new OffscreenCanvas(_,v);else{var R=this.cy.window(),T=R.document;S=T.createElement("canvas"),S.width=_,S.height=v}return S};[CRp$b,CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach(function(_){extend(CRp,_)});var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(_,v,S){var R=S,T=function(ne){warn("Can not register `"+v+"` for `"+_+"` since `"+ne+"` already exists in the prototype and can not be overridden")};if(_==="core"){if(Core.prototype[v])return T(v);Core.prototype[v]=S}else if(_==="collection"){if(Collection.prototype[v])return T(v);Collection.prototype[v]=S}else if(_==="layout"){for(var A=function(ne){this.options=ne,S.call(this,ne),plainObject(this._private)||(this._private={}),this._private.cy=ne.cy,this._private.listeners=[],this.createEmitter()},k=A.prototype=Object.create(S.prototype),q=[],M=0;M<q.length;M++){var D=q[M];k[D]=k[D]||function(){return this}}k.start&&!k.run?k.run=function(){return this.start(),this}:!k.start&&k.run&&(k.start=function(){return this.run(),this});var L=S.prototype.stop;k.stop=function(){var ee=this.options;if(ee&&ee.animate){var ne=this.animations;if(ne)for(var oe=0;oe<ne.length;oe++)ne[oe].stop()}return L?L.call(this):this.emit("layoutstop"),this},k.destroy||(k.destroy=function(){return this}),k.cy=function(){return this._private.cy};var I=function(ne){return ne._private.cy},N={addEventFields:function(ne,oe){oe.layout=ne,oe.cy=I(ne),oe.target=ne},bubble:function(){return!0},parent:function(ne){return I(ne)}};extend(k,{createEmitter:function(){return this._private.emitter=new Emitter(N,this),this},emitter:function(){return this._private.emitter},on:function(ne,oe){return this.emitter().on(ne,oe),this},one:function(ne,oe){return this.emitter().one(ne,oe),this},once:function(ne,oe){return this.emitter().one(ne,oe),this},removeListener:function(ne,oe){return this.emitter().removeListener(ne,oe),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(ne,oe){return this.emitter().emit(ne,oe),this}}),define.eventAliasesOn(k),R=A}else if(_==="renderer"&&v!=="null"&&v!=="base"){var F=getExtension("renderer","base"),H=F.prototype,G=S,V=S.prototype,j=function(){F.apply(this,arguments),G.apply(this,arguments)},W=j.prototype;for(var X in H){var J=H[X],te=V[X]!=null;if(te)return T(X);W[X]=J}for(var re in V)W[re]=V[re];H.clientFunctions.forEach(function(ee){W[ee]=W[ee]||function(){error("Renderer does not implement `renderer."+ee+"()` on its prototype")}}),R=j}else if(_==="__proto__"||_==="constructor"||_==="prototype")return error(_+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[_,v],value:R})}function getExtension(_,v){return getMap({map:extensions,keys:[_,v]})}function setModule(_,v,S,R,T){return setMap({map:modules,keys:[_,v,S,R],value:T})}function getModule(_,v,S,R){return getMap({map:modules,keys:[_,v,S,R]})}var extension=function(){if(arguments.length===2)return getExtension.apply(null,arguments);if(arguments.length===3)return setExtension.apply(null,arguments);if(arguments.length===4)return getModule.apply(null,arguments);if(arguments.length===5)return setModule.apply(null,arguments);error("Invalid extension access syntax")};Core.prototype.extension=extension;incExts.forEach(function(_){_.extensions.forEach(function(v){setExtension(_.type,v.name,v.impl)})});var _Stylesheet=function(){if(!(this instanceof _Stylesheet))return new _Stylesheet;this.length=0},sheetfn=_Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"};sheetfn.selector=function(_){var v=this.length++;return this[v]={selector:_,properties:[]},this};sheetfn.css=function(_,v){var S=this.length-1;if(string$1(_))this[S].properties.push({name:_,value:v});else if(plainObject(_))for(var R=_,T=Object.keys(R),A=0;A<T.length;A++){var k=T[A],q=R[k];if(q!=null){var M=_Style.properties[k]||_Style.properties[dash2camel(k)];if(M!=null){var D=M.name,L=q;this[S].properties.push({name:D,value:L})}}}return this};sheetfn.style=sheetfn.css;sheetfn.generateStyle=function(_){var v=new _Style(_);return this.appendToStyle(v)};sheetfn.appendToStyle=function(_){for(var v=0;v<this.length;v++){var S=this[v],R=S.selector,T=S.properties;_.selector(R);for(var A=0;A<T.length;A++){var k=T[A];_.css(k.name,k.value)}}return _};var version$2="3.33.1",cytoscape$1=function(v){if(v===void 0&&(v={}),plainObject(v))return new Core(v);if(string$1(v))return extension.apply(extension,arguments)};cytoscape$1.use=function(_){var v=Array.prototype.slice.call(arguments,1);return v.unshift(cytoscape$1),_.apply(null,v),this};cytoscape$1.warnings=function(_){return warnings(_)};cytoscape$1.version=version$2;cytoscape$1.stylesheet=cytoscape$1.Stylesheet=_Stylesheet;const{string:o,array:l,object:s,number:a,bool:i$1,oneOfType:r,any:c,func:u}=t$1,d={id:o,className:o,style:r([o,s]),elements:r([l,c]),stylesheet:r([l,c]),layout:r([s,c]),pan:r([s,c]),zoom:a,panningEnabled:i$1,userPanningEnabled:i$1,minZoom:a,maxZoom:a,zoomingEnabled:i$1,userZoomingEnabled:i$1,boxSelectionEnabled:i$1,autoungrabify:i$1,autolock:i$1,autounselectify:i$1,get:u,toJson:u,diff:u,forEach:u,cy:u,headless:i$1,styleEnabled:i$1,hideEdgesOnViewport:i$1,textureOnViewport:i$1,motionBlur:i$1,motionBlurOpacity:a,wheelSensitivity:a,pixelRatio:r([o,s])},p=(_,v)=>{if(((A,k)=>A==null||k==null)(_,v)&&(_!=null||v!=null))return!0;if(_===v)return!1;if(typeof _!="object"||typeof v!="object")return _!==v;const S=Object.keys(_),R=Object.keys(v),T=A=>_[A]!==v[A];return S.length!==R.length||!(!S.some(T)&&!R.some(T))},m=(_,v)=>_!=null?_[v]:null,y={diff:p,get:m,toJson:_=>_,forEach:(_,v)=>_.forEach(v),elements:[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}],stylesheet:[{selector:"node",style:{label:"data(label)"}}],zoom:1,pan:{x:0,y:0}},h=(_,v,S,R)=>S(m(_,R),m(v,R)),b=(_,v,S,R,T,A,k)=>{_.batch(()=>{(R===p||h(v,S,R,"elements"))&&x(_,m(v,"elements"),m(S,"elements"),T,A,k,R),h(v,S,R,"stylesheet")&&E(_,m(v,"stylesheet"),m(S,"stylesheet"),T),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach(q=>{h(v,S,R,q)&&f(_,q,m(v,q),m(S,q),T)})}),h(v,S,R,"layout")&&g(_,m(v,"layout"),m(S,"layout"),T)},f=(_,v,S,R,T)=>{_[v](T(R))},g=(_,v,S,R)=>{const T=R(S);T!=null&&_.layout(T).run()},E=(_,v,S,R)=>{const T=_.style();T?.fromJson(R(S)).update()},x=(_,v,S,R,T,A,k)=>{const q=[],M=_.collection(),D=[],L={},I={},N=F=>T(T(F,"data"),"id");A(S,F=>{const H=N(F);I[H]=F}),v!=null&&A(v,F=>{const H=N(F);L[H]=F,(G=>I[G]!=null)(H)||M.merge(_.getElementById(H))}),A(S,F=>{const H=N(F),G=(V=>L[V])(H);(V=>L[V]!=null)(H)?D.push({ele1:G,ele2:F}):q.push(R(F))}),M.length>0&&_.remove(M),q.length>0&&_.add(q),D.forEach(({ele1:F,ele2:H})=>O(_,F,H,R,T,k))},O=(_,v,S,R,T,A)=>{const k=T(T(S,"data"),"id"),q=_.getElementById(k),M={};["data","position","selected","selectable","locked","grabbable","classes"].forEach(L=>{const I=T(S,L);A(I,T(v,L))&&(M[L]=R(I))});const D=T(S,"scratch");A(D,T(v,"scratch"))&&q.scratch(R(D)),Object.keys(M).length>0&&q.json(M)};class w extends React.Component{static get propTypes(){return d}static get defaultProps(){return y}static normalizeElements(v){if(v.length!=null)return v;{let{nodes:S,edges:R}=v;return S==null&&(S=[]),R==null&&(R=[]),S.concat(R)}}constructor(v){super(v),this.displayName="CytoscapeComponent",this.containerRef=React.createRef()}componentDidMount(){const v=this.containerRef.current,{global:S,headless:R,styleEnabled:T,hideEdgesOnViewport:A,textureOnViewport:k,motionBlur:q,motionBlurOpacity:M,wheelSensitivity:D,pixelRatio:L}=this.props,I=this._cy=new cytoscape$1({container:v,headless:R,styleEnabled:T,hideEdgesOnViewport:A,textureOnViewport:k,motionBlur:q,motionBlurOpacity:M,wheelSensitivity:D,pixelRatio:L});S&&(window[S]=I),this.updateCytoscape(null,this.props)}updateCytoscape(v,S){const R=this._cy,{diff:T,toJson:A,get:k,forEach:q}=S;b(R,v,S,T,A,k,q),S.cy!=null&&S.cy(R)}componentDidUpdate(v){this.updateCytoscape(v,this.props)}componentWillUnmount(){this._cy.destroy()}render(){const{id:v,className:S,style:R}=this.props;return React.createElement("div",{ref:this.containerRef,id:v,className:S,style:R})}}var cytoscapeDagre$1={exports:{}};function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function _(){this.__data__=[],this.size=0}return _listCacheClear=_,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function _(v,S){return v===S||v!==v&&S!==S}return eq_1=_,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var _=requireEq();function v(S,R){for(var T=S.length;T--;)if(_(S[T][0],R))return T;return-1}return _assocIndexOf=v,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var _=require_assocIndexOf(),v=Array.prototype,S=v.splice;function R(T){var A=this.__data__,k=_(A,T);if(k<0)return!1;var q=A.length-1;return k==q?A.pop():S.call(A,k,1),--this.size,!0}return _listCacheDelete=R,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var _=require_assocIndexOf();function v(S){var R=this.__data__,T=_(R,S);return T<0?void 0:R[T][1]}return _listCacheGet=v,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var _=require_assocIndexOf();function v(S){return _(this.__data__,S)>-1}return _listCacheHas=v,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var _=require_assocIndexOf();function v(S,R){var T=this.__data__,A=_(T,S);return A<0?(++this.size,T.push([S,R])):T[A][1]=R,this}return _listCacheSet=v,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var _=require_listCacheClear(),v=require_listCacheDelete(),S=require_listCacheGet(),R=require_listCacheHas(),T=require_listCacheSet();function A(k){var q=-1,M=k==null?0:k.length;for(this.clear();++q<M;){var D=k[q];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_ListCache=A,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var _=require_ListCache();function v(){this.__data__=new _,this.size=0}return _stackClear=v,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function _(v){var S=this.__data__,R=S.delete(v);return this.size=S.size,R}return _stackDelete=_,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function _(v){return this.__data__.get(v)}return _stackGet=_,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function _(v){return this.__data__.has(v)}return _stackHas=_,_stackHas}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var _=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1;return _freeGlobal=_,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var _=require_freeGlobal(),v=typeof self=="object"&&self&&self.Object===Object&&self,S=_||v||Function("return this")();return _root=S,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var _=require_root(),v=_.Symbol;return _Symbol=v,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var _=require_Symbol(),v=Object.prototype,S=v.hasOwnProperty,R=v.toString,T=_?_.toStringTag:void 0;function A(k){var q=S.call(k,T),M=k[T];try{k[T]=void 0;var D=!0}catch{}var L=R.call(k);return D&&(q?k[T]=M:delete k[T]),L}return _getRawTag=A,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var _=Object.prototype,v=_.toString;function S(R){return v.call(R)}return _objectToString=S,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var _=require_Symbol(),v=require_getRawTag(),S=require_objectToString(),R="[object Null]",T="[object Undefined]",A=_?_.toStringTag:void 0;function k(q){return q==null?q===void 0?T:R:A&&A in Object(q)?v(q):S(q)}return _baseGetTag=k,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function _(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")}return isObject_1=_,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var _=require_baseGetTag(),v=requireIsObject(),S="[object AsyncFunction]",R="[object Function]",T="[object GeneratorFunction]",A="[object Proxy]";function k(q){if(!v(q))return!1;var M=_(q);return M==R||M==T||M==S||M==A}return isFunction_1=k,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var _=require_root(),v=_["__core-js_shared__"];return _coreJsData=v,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var _=require_coreJsData(),v=(function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""})();function S(R){return!!v&&v in R}return _isMasked=S,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var _=Function.prototype,v=_.toString;function S(R){if(R!=null){try{return v.call(R)}catch{}try{return R+""}catch{}}return""}return _toSource=S,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var _=requireIsFunction(),v=require_isMasked(),S=requireIsObject(),R=require_toSource(),T=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,k=Function.prototype,q=Object.prototype,M=k.toString,D=q.hasOwnProperty,L=RegExp("^"+M.call(D).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I(N){if(!S(N)||v(N))return!1;var F=_(N)?L:A;return F.test(R(N))}return _baseIsNative=I,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function _(v,S){return v?.[S]}return _getValue=_,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var _=require_baseIsNative(),v=require_getValue();function S(R,T){var A=v(R,T);return _(A)?A:void 0}return _getNative=S,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var _=require_getNative(),v=require_root(),S=_(v,"Map");return _Map=S,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var _=require_getNative(),v=_(Object,"create");return _nativeCreate=v,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var _=require_nativeCreate();function v(){this.__data__=_?_(null):{},this.size=0}return _hashClear=v,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function _(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S}return _hashDelete=_,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var _=require_nativeCreate(),v="__lodash_hash_undefined__",S=Object.prototype,R=S.hasOwnProperty;function T(A){var k=this.__data__;if(_){var q=k[A];return q===v?void 0:q}return R.call(k,A)?k[A]:void 0}return _hashGet=T,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var _=require_nativeCreate(),v=Object.prototype,S=v.hasOwnProperty;function R(T){var A=this.__data__;return _?A[T]!==void 0:S.call(A,T)}return _hashHas=R,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var _=require_nativeCreate(),v="__lodash_hash_undefined__";function S(R,T){var A=this.__data__;return this.size+=this.has(R)?0:1,A[R]=_&&T===void 0?v:T,this}return _hashSet=S,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var _=require_hashClear(),v=require_hashDelete(),S=require_hashGet(),R=require_hashHas(),T=require_hashSet();function A(k){var q=-1,M=k==null?0:k.length;for(this.clear();++q<M;){var D=k[q];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_Hash=A,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var _=require_Hash(),v=require_ListCache(),S=require_Map();function R(){this.size=0,this.__data__={hash:new _,map:new(S||v),string:new _}}return _mapCacheClear=R,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function _(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null}return _isKeyable=_,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var _=require_isKeyable();function v(S,R){var T=S.__data__;return _(R)?T[typeof R=="string"?"string":"hash"]:T.map}return _getMapData=v,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var _=require_getMapData();function v(S){var R=_(this,S).delete(S);return this.size-=R?1:0,R}return _mapCacheDelete=v,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var _=require_getMapData();function v(S){return _(this,S).get(S)}return _mapCacheGet=v,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var _=require_getMapData();function v(S){return _(this,S).has(S)}return _mapCacheHas=v,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var _=require_getMapData();function v(S,R){var T=_(this,S),A=T.size;return T.set(S,R),this.size+=T.size==A?0:1,this}return _mapCacheSet=v,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var _=require_mapCacheClear(),v=require_mapCacheDelete(),S=require_mapCacheGet(),R=require_mapCacheHas(),T=require_mapCacheSet();function A(k){var q=-1,M=k==null?0:k.length;for(this.clear();++q<M;){var D=k[q];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_MapCache=A,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var _=require_ListCache(),v=require_Map(),S=require_MapCache(),R=200;function T(A,k){var q=this.__data__;if(q instanceof _){var M=q.__data__;if(!v||M.length<R-1)return M.push([A,k]),this.size=++q.size,this;q=this.__data__=new S(M)}return q.set(A,k),this.size=q.size,this}return _stackSet=T,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var _=require_ListCache(),v=require_stackClear(),S=require_stackDelete(),R=require_stackGet(),T=require_stackHas(),A=require_stackSet();function k(q){var M=this.__data__=new _(q);this.size=M.size}return k.prototype.clear=v,k.prototype.delete=S,k.prototype.get=R,k.prototype.has=T,k.prototype.set=A,_Stack=k,_Stack}var _arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function _(v,S){for(var R=-1,T=v==null?0:v.length;++R<T&&S(v[R],R,v)!==!1;);return v}return _arrayEach=_,_arrayEach}var _defineProperty,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var _=require_getNative(),v=(function(){try{var S=_(Object,"defineProperty");return S({},"",{}),S}catch{}})();return _defineProperty=v,_defineProperty}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var _=require_defineProperty();function v(S,R,T){R=="__proto__"&&_?_(S,R,{configurable:!0,enumerable:!0,value:T,writable:!0}):S[R]=T}return _baseAssignValue=v,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var _=require_baseAssignValue(),v=requireEq(),S=Object.prototype,R=S.hasOwnProperty;function T(A,k,q){var M=A[k];(!(R.call(A,k)&&v(M,q))||q===void 0&&!(k in A))&&_(A,k,q)}return _assignValue=T,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var _=require_assignValue(),v=require_baseAssignValue();function S(R,T,A,k){var q=!A;A||(A={});for(var M=-1,D=T.length;++M<D;){var L=T[M],I=k?k(A[L],R[L],L,A,R):void 0;I===void 0&&(I=R[L]),q?v(A,L,I):_(A,L,I)}return A}return _copyObject=S,_copyObject}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function _(v,S){for(var R=-1,T=Array(v);++R<v;)T[R]=S(R);return T}return _baseTimes=_,_baseTimes}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function _(v){return v!=null&&typeof v=="object"}return isObjectLike_1=_,isObjectLike_1}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var _=require_baseGetTag(),v=requireIsObjectLike(),S="[object Arguments]";function R(T){return v(T)&&_(T)==S}return _baseIsArguments=R,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var _=require_baseIsArguments(),v=requireIsObjectLike(),S=Object.prototype,R=S.hasOwnProperty,T=S.propertyIsEnumerable,A=_((function(){return arguments})())?_:function(k){return v(k)&&R.call(k,"callee")&&!T.call(k,"callee")};return isArguments_1=A,isArguments_1}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var _=Array.isArray;return isArray_1=_,isArray_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function _(){return!1}return stubFalse_1=_,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(_,v){var S=require_root(),R=requireStubFalse(),T=v&&!v.nodeType&&v,A=T&&!0&&_&&!_.nodeType&&_,k=A&&A.exports===T,q=k?S.Buffer:void 0,M=q?q.isBuffer:void 0,D=M||R;_.exports=D})(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var _=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function S(R,T){var A=typeof R;return T=T??_,!!T&&(A=="number"||A!="symbol"&&v.test(R))&&R>-1&&R%1==0&&R<T}return _isIndex=S,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var _=9007199254740991;function v(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=_}return isLength_1=v,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var _=require_baseGetTag(),v=requireIsLength(),S=requireIsObjectLike(),R="[object Arguments]",T="[object Array]",A="[object Boolean]",k="[object Date]",q="[object Error]",M="[object Function]",D="[object Map]",L="[object Number]",I="[object Object]",N="[object RegExp]",F="[object Set]",H="[object String]",G="[object WeakMap]",V="[object ArrayBuffer]",j="[object DataView]",W="[object Float32Array]",X="[object Float64Array]",J="[object Int8Array]",te="[object Int16Array]",re="[object Int32Array]",ee="[object Uint8Array]",ne="[object Uint8ClampedArray]",oe="[object Uint16Array]",ue="[object Uint32Array]",ce={};ce[W]=ce[X]=ce[J]=ce[te]=ce[re]=ce[ee]=ce[ne]=ce[oe]=ce[ue]=!0,ce[R]=ce[T]=ce[V]=ce[A]=ce[j]=ce[k]=ce[q]=ce[M]=ce[D]=ce[L]=ce[I]=ce[N]=ce[F]=ce[H]=ce[G]=!1;function de(pe){return S(pe)&&v(pe.length)&&!!ce[_(pe)]}return _baseIsTypedArray=de,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function _(v){return function(S){return v(S)}}return _baseUnary=_,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(_,v){var S=require_freeGlobal(),R=v&&!v.nodeType&&v,T=R&&!0&&_&&!_.nodeType&&_,A=T&&T.exports===R,k=A&&S.process,q=(function(){try{var M=T&&T.require&&T.require("util").types;return M||k&&k.binding&&k.binding("util")}catch{}})();_.exports=q})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var _=require_baseIsTypedArray(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isTypedArray,T=R?v(R):_;return isTypedArray_1=T,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var _=require_baseTimes(),v=requireIsArguments(),S=requireIsArray(),R=requireIsBuffer(),T=require_isIndex(),A=requireIsTypedArray(),k=Object.prototype,q=k.hasOwnProperty;function M(D,L){var I=S(D),N=!I&&v(D),F=!I&&!N&&R(D),H=!I&&!N&&!F&&A(D),G=I||N||F||H,V=G?_(D.length,String):[],j=V.length;for(var W in D)(L||q.call(D,W))&&!(G&&(W=="length"||F&&(W=="offset"||W=="parent")||H&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||T(W,j)))&&V.push(W);return V}return _arrayLikeKeys=M,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var _=Object.prototype;function v(S){var R=S&&S.constructor,T=typeof R=="function"&&R.prototype||_;return S===T}return _isPrototype=v,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function _(v,S){return function(R){return v(S(R))}}return _overArg=_,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var _=require_overArg(),v=_(Object.keys,Object);return _nativeKeys=v,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var _=require_isPrototype(),v=require_nativeKeys(),S=Object.prototype,R=S.hasOwnProperty;function T(A){if(!_(A))return v(A);var k=[];for(var q in Object(A))R.call(A,q)&&q!="constructor"&&k.push(q);return k}return _baseKeys=T,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var _=requireIsFunction(),v=requireIsLength();function S(R){return R!=null&&v(R.length)&&!_(R)}return isArrayLike_1=S,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var _=require_arrayLikeKeys(),v=require_baseKeys(),S=requireIsArrayLike();function R(T){return S(T)?_(T):v(T)}return keys_1=R,keys_1}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var _=require_copyObject(),v=requireKeys();function S(R,T){return R&&_(T,v(T),R)}return _baseAssign=S,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function _(v){var S=[];if(v!=null)for(var R in Object(v))S.push(R);return S}return _nativeKeysIn=_,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var _=requireIsObject(),v=require_isPrototype(),S=require_nativeKeysIn(),R=Object.prototype,T=R.hasOwnProperty;function A(k){if(!_(k))return S(k);var q=v(k),M=[];for(var D in k)D=="constructor"&&(q||!T.call(k,D))||M.push(D);return M}return _baseKeysIn=A,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var _=require_arrayLikeKeys(),v=require_baseKeysIn(),S=requireIsArrayLike();function R(T){return S(T)?_(T,!0):v(T)}return keysIn_1=R,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var _=require_copyObject(),v=requireKeysIn();function S(R,T){return R&&_(T,v(T),R)}return _baseAssignIn=S,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,(function(_,v){var S=require_root(),R=v&&!v.nodeType&&v,T=R&&!0&&_&&!_.nodeType&&_,A=T&&T.exports===R,k=A?S.Buffer:void 0,q=k?k.allocUnsafe:void 0;function M(D,L){if(L)return D.slice();var I=D.length,N=q?q(I):new D.constructor(I);return D.copy(N),N}_.exports=M})(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function _(v,S){var R=-1,T=v.length;for(S||(S=Array(T));++R<T;)S[R]=v[R];return S}return _copyArray=_,_copyArray}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=0,k=[];++R<T;){var q=v[R];S(q,R,v)&&(k[A++]=q)}return k}return _arrayFilter=_,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function _(){return[]}return stubArray_1=_,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var _=require_arrayFilter(),v=requireStubArray(),S=Object.prototype,R=S.propertyIsEnumerable,T=Object.getOwnPropertySymbols,A=T?function(k){return k==null?[]:(k=Object(k),_(T(k),function(q){return R.call(k,q)}))}:v;return _getSymbols=A,_getSymbols}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var _=require_copyObject(),v=require_getSymbols();function S(R,T){return _(R,v(R),T)}return _copySymbols=S,_copySymbols}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function _(v,S){for(var R=-1,T=S.length,A=v.length;++R<T;)v[A+R]=S[R];return v}return _arrayPush=_,_arrayPush}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var _=require_overArg(),v=_(Object.getPrototypeOf,Object);return _getPrototype=v,_getPrototype}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var _=require_arrayPush(),v=require_getPrototype(),S=require_getSymbols(),R=requireStubArray(),T=Object.getOwnPropertySymbols,A=T?function(k){for(var q=[];k;)_(q,S(k)),k=v(k);return q}:R;return _getSymbolsIn=A,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var _=require_copyObject(),v=require_getSymbolsIn();function S(R,T){return _(R,v(R),T)}return _copySymbolsIn=S,_copySymbolsIn}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var _=require_arrayPush(),v=requireIsArray();function S(R,T,A){var k=T(R);return v(R)?k:_(k,A(R))}return _baseGetAllKeys=S,_baseGetAllKeys}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var _=require_baseGetAllKeys(),v=require_getSymbols(),S=requireKeys();function R(T){return _(T,S,v)}return _getAllKeys=R,_getAllKeys}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var _=require_baseGetAllKeys(),v=require_getSymbolsIn(),S=requireKeysIn();function R(T){return _(T,S,v)}return _getAllKeysIn=R,_getAllKeysIn}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var _=require_getNative(),v=require_root(),S=_(v,"DataView");return _DataView=S,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var _=require_getNative(),v=require_root(),S=_(v,"Promise");return _Promise=S,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var _=require_getNative(),v=require_root(),S=_(v,"Set");return _Set=S,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var _=require_getNative(),v=require_root(),S=_(v,"WeakMap");return _WeakMap=S,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var _=require_DataView(),v=require_Map(),S=require_Promise(),R=require_Set(),T=require_WeakMap(),A=require_baseGetTag(),k=require_toSource(),q="[object Map]",M="[object Object]",D="[object Promise]",L="[object Set]",I="[object WeakMap]",N="[object DataView]",F=k(_),H=k(v),G=k(S),V=k(R),j=k(T),W=A;return(_&&W(new _(new ArrayBuffer(1)))!=N||v&&W(new v)!=q||S&&W(S.resolve())!=D||R&&W(new R)!=L||T&&W(new T)!=I)&&(W=function(X){var J=A(X),te=J==M?X.constructor:void 0,re=te?k(te):"";if(re)switch(re){case F:return N;case H:return q;case G:return D;case V:return L;case j:return I}return J}),_getTag=W,_getTag}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var _=Object.prototype,v=_.hasOwnProperty;function S(R){var T=R.length,A=new R.constructor(T);return T&&typeof R[0]=="string"&&v.call(R,"index")&&(A.index=R.index,A.input=R.input),A}return _initCloneArray=S,_initCloneArray}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var _=require_root(),v=_.Uint8Array;return _Uint8Array=v,_Uint8Array}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var _=require_Uint8Array();function v(S){var R=new S.constructor(S.byteLength);return new _(R).set(new _(S)),R}return _cloneArrayBuffer=v,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var _=require_cloneArrayBuffer();function v(S,R){var T=R?_(S.buffer):S.buffer;return new S.constructor(T,S.byteOffset,S.byteLength)}return _cloneDataView=v,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var _=/\w*$/;function v(S){var R=new S.constructor(S.source,_.exec(S));return R.lastIndex=S.lastIndex,R}return _cloneRegExp=v,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var _=require_Symbol(),v=_?_.prototype:void 0,S=v?v.valueOf:void 0;function R(T){return S?Object(S.call(T)):{}}return _cloneSymbol=R,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var _=require_cloneArrayBuffer();function v(S,R){var T=R?_(S.buffer):S.buffer;return new S.constructor(T,S.byteOffset,S.length)}return _cloneTypedArray=v,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var _=require_cloneArrayBuffer(),v=require_cloneDataView(),S=require_cloneRegExp(),R=require_cloneSymbol(),T=require_cloneTypedArray(),A="[object Boolean]",k="[object Date]",q="[object Map]",M="[object Number]",D="[object RegExp]",L="[object Set]",I="[object String]",N="[object Symbol]",F="[object ArrayBuffer]",H="[object DataView]",G="[object Float32Array]",V="[object Float64Array]",j="[object Int8Array]",W="[object Int16Array]",X="[object Int32Array]",J="[object Uint8Array]",te="[object Uint8ClampedArray]",re="[object Uint16Array]",ee="[object Uint32Array]";function ne(oe,ue,ce){var de=oe.constructor;switch(ue){case F:return _(oe);case A:case k:return new de(+oe);case H:return v(oe,ce);case G:case V:case j:case W:case X:case J:case te:case re:case ee:return T(oe,ce);case q:return new de;case M:case I:return new de(oe);case D:return S(oe);case L:return new de;case N:return R(oe)}}return _initCloneByTag=ne,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var _=requireIsObject(),v=Object.create,S=(function(){function R(){}return function(T){if(!_(T))return{};if(v)return v(T);R.prototype=T;var A=new R;return R.prototype=void 0,A}})();return _baseCreate=S,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var _=require_baseCreate(),v=require_getPrototype(),S=require_isPrototype();function R(T){return typeof T.constructor=="function"&&!S(T)?_(v(T)):{}}return _initCloneObject=R,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var _=require_getTag(),v=requireIsObjectLike(),S="[object Map]";function R(T){return v(T)&&_(T)==S}return _baseIsMap=R,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var _=require_baseIsMap(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isMap,T=R?v(R):_;return isMap_1=T,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var _=require_getTag(),v=requireIsObjectLike(),S="[object Set]";function R(T){return v(T)&&_(T)==S}return _baseIsSet=R,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var _=require_baseIsSet(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isSet,T=R?v(R):_;return isSet_1=T,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var _=require_Stack(),v=require_arrayEach(),S=require_assignValue(),R=require_baseAssign(),T=require_baseAssignIn(),A=require_cloneBuffer(),k=require_copyArray(),q=require_copySymbols(),M=require_copySymbolsIn(),D=require_getAllKeys(),L=require_getAllKeysIn(),I=require_getTag(),N=require_initCloneArray(),F=require_initCloneByTag(),H=require_initCloneObject(),G=requireIsArray(),V=requireIsBuffer(),j=requireIsMap(),W=requireIsObject(),X=requireIsSet(),J=requireKeys(),te=requireKeysIn(),re=1,ee=2,ne=4,oe="[object Arguments]",ue="[object Array]",ce="[object Boolean]",de="[object Date]",pe="[object Error]",_e="[object Function]",Ee="[object GeneratorFunction]",ge="[object Map]",be="[object Number]",Ae="[object Object]",De="[object RegExp]",ve="[object Set]",le="[object String]",me="[object Symbol]",Te="[object WeakMap]",ye="[object ArrayBuffer]",Re="[object DataView]",qe="[object Float32Array]",ke="[object Float64Array]",ze="[object Int8Array]",Ne="[object Int16Array]",Pe="[object Int32Array]",Me="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Le="[object Uint16Array]",nt="[object Uint32Array]",lt={};lt[oe]=lt[ue]=lt[ye]=lt[Re]=lt[ce]=lt[de]=lt[qe]=lt[ke]=lt[ze]=lt[Ne]=lt[Pe]=lt[ge]=lt[be]=lt[Ae]=lt[De]=lt[ve]=lt[le]=lt[me]=lt[Me]=lt[Ie]=lt[Le]=lt[nt]=!0,lt[pe]=lt[_e]=lt[Te]=!1;function dt(pt,We,wt,st,St,gt){var Et,xt=We&re,Lt=We&ee,zt=We&ne;if(wt&&(Et=St?wt(pt,st,St,gt):wt(pt)),Et!==void 0)return Et;if(!W(pt))return pt;var jt=G(pt);if(jt){if(Et=N(pt),!xt)return k(pt,Et)}else{var At=I(pt),Ot=At==_e||At==Ee;if(V(pt))return A(pt,xt);if(At==Ae||At==oe||Ot&&!St){if(Et=Lt||Ot?{}:H(pt),!xt)return Lt?M(pt,T(Et,pt)):q(pt,R(Et,pt))}else{if(!lt[At])return St?pt:{};Et=F(pt,At,xt)}}gt||(gt=new _);var Ct=gt.get(pt);if(Ct)return Ct;gt.set(pt,Et),X(pt)?pt.forEach(function(we){Et.add(dt(we,We,wt,we,pt,gt))}):j(pt)&&pt.forEach(function(we,Fe){Et.set(Fe,dt(we,We,wt,Fe,pt,gt))});var bt=zt?Lt?L:D:Lt?te:J,et=jt?void 0:bt(pt);return v(et||pt,function(we,Fe){et&&(Fe=we,we=pt[Fe]),S(Et,Fe,dt(we,We,wt,Fe,pt,gt))}),Et}return _baseClone=dt,_baseClone}var clone_1,hasRequiredClone;function requireClone(){if(hasRequiredClone)return clone_1;hasRequiredClone=1;var _=require_baseClone(),v=4;function S(R){return _(R,v)}return clone_1=S,clone_1}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function _(v){return function(){return v}}return constant_1=_,constant_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function _(v){return function(S,R,T){for(var A=-1,k=Object(S),q=T(S),M=q.length;M--;){var D=q[v?M:++A];if(R(k[D],D,k)===!1)break}return S}}return _createBaseFor=_,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var _=require_createBaseFor(),v=_();return _baseFor=v,_baseFor}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var _=require_baseFor(),v=requireKeys();function S(R,T){return R&&_(R,T,v)}return _baseForOwn=S,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var _=requireIsArrayLike();function v(S,R){return function(T,A){if(T==null)return T;if(!_(T))return S(T,A);for(var k=T.length,q=R?k:-1,M=Object(T);(R?q--:++q<k)&&A(M[q],q,M)!==!1;);return T}}return _createBaseEach=v,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var _=require_baseForOwn(),v=require_createBaseEach(),S=v(_);return _baseEach=S,_baseEach}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function _(v){return v}return identity_1=_,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var _=requireIdentity();function v(S){return typeof S=="function"?S:_}return _castFunction=v,_castFunction}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var _=require_arrayEach(),v=require_baseEach(),S=require_castFunction(),R=requireIsArray();function T(A,k){var q=R(A)?_:v;return q(A,S(k))}return forEach_1=T,forEach_1}var each,hasRequiredEach;function requireEach(){return hasRequiredEach||(hasRequiredEach=1,each=requireForEach()),each}var _baseFilter,hasRequired_baseFilter;function require_baseFilter(){if(hasRequired_baseFilter)return _baseFilter;hasRequired_baseFilter=1;var _=require_baseEach();function v(S,R){var T=[];return _(S,function(A,k,q){R(A,k,q)&&T.push(A)}),T}return _baseFilter=v,_baseFilter}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var _="__lodash_hash_undefined__";function v(S){return this.__data__.set(S,_),this}return _setCacheAdd=v,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function _(v){return this.__data__.has(v)}return _setCacheHas=_,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var _=require_MapCache(),v=require_setCacheAdd(),S=require_setCacheHas();function R(T){var A=-1,k=T==null?0:T.length;for(this.__data__=new _;++A<k;)this.add(T[A])}return R.prototype.add=R.prototype.push=v,R.prototype.has=S,_SetCache=R,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function _(v,S){for(var R=-1,T=v==null?0:v.length;++R<T;)if(S(v[R],R,v))return!0;return!1}return _arraySome=_,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function _(v,S){return v.has(S)}return _cacheHas=_,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var _=require_SetCache(),v=require_arraySome(),S=require_cacheHas(),R=1,T=2;function A(k,q,M,D,L,I){var N=M&R,F=k.length,H=q.length;if(F!=H&&!(N&&H>F))return!1;var G=I.get(k),V=I.get(q);if(G&&V)return G==q&&V==k;var j=-1,W=!0,X=M&T?new _:void 0;for(I.set(k,q),I.set(q,k);++j<F;){var J=k[j],te=q[j];if(D)var re=N?D(te,J,j,q,k,I):D(J,te,j,k,q,I);if(re!==void 0){if(re)continue;W=!1;break}if(X){if(!v(q,function(ee,ne){if(!S(X,ne)&&(J===ee||L(J,ee,M,D,I)))return X.push(ne)})){W=!1;break}}else if(!(J===te||L(J,te,M,D,I))){W=!1;break}}return I.delete(k),I.delete(q),W}return _equalArrays=A,_equalArrays}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function _(v){var S=-1,R=Array(v.size);return v.forEach(function(T,A){R[++S]=[A,T]}),R}return _mapToArray=_,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function _(v){var S=-1,R=Array(v.size);return v.forEach(function(T){R[++S]=T}),R}return _setToArray=_,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var _=require_Symbol(),v=require_Uint8Array(),S=requireEq(),R=require_equalArrays(),T=require_mapToArray(),A=require_setToArray(),k=1,q=2,M="[object Boolean]",D="[object Date]",L="[object Error]",I="[object Map]",N="[object Number]",F="[object RegExp]",H="[object Set]",G="[object String]",V="[object Symbol]",j="[object ArrayBuffer]",W="[object DataView]",X=_?_.prototype:void 0,J=X?X.valueOf:void 0;function te(re,ee,ne,oe,ue,ce,de){switch(ne){case W:if(re.byteLength!=ee.byteLength||re.byteOffset!=ee.byteOffset)return!1;re=re.buffer,ee=ee.buffer;case j:return!(re.byteLength!=ee.byteLength||!ce(new v(re),new v(ee)));case M:case D:case N:return S(+re,+ee);case L:return re.name==ee.name&&re.message==ee.message;case F:case G:return re==ee+"";case I:var pe=T;case H:var _e=oe&k;if(pe||(pe=A),re.size!=ee.size&&!_e)return!1;var Ee=de.get(re);if(Ee)return Ee==ee;oe|=q,de.set(re,ee);var ge=R(pe(re),pe(ee),oe,ue,ce,de);return de.delete(re),ge;case V:if(J)return J.call(re)==J.call(ee)}return!1}return _equalByTag=te,_equalByTag}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var _=require_getAllKeys(),v=1,S=Object.prototype,R=S.hasOwnProperty;function T(A,k,q,M,D,L){var I=q&v,N=_(A),F=N.length,H=_(k),G=H.length;if(F!=G&&!I)return!1;for(var V=F;V--;){var j=N[V];if(!(I?j in k:R.call(k,j)))return!1}var W=L.get(A),X=L.get(k);if(W&&X)return W==k&&X==A;var J=!0;L.set(A,k),L.set(k,A);for(var te=I;++V<F;){j=N[V];var re=A[j],ee=k[j];if(M)var ne=I?M(ee,re,j,k,A,L):M(re,ee,j,A,k,L);if(!(ne===void 0?re===ee||D(re,ee,q,M,L):ne)){J=!1;break}te||(te=j=="constructor")}if(J&&!te){var oe=A.constructor,ue=k.constructor;oe!=ue&&"constructor"in A&&"constructor"in k&&!(typeof oe=="function"&&oe instanceof oe&&typeof ue=="function"&&ue instanceof ue)&&(J=!1)}return L.delete(A),L.delete(k),J}return _equalObjects=T,_equalObjects}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var _=require_Stack(),v=require_equalArrays(),S=require_equalByTag(),R=require_equalObjects(),T=require_getTag(),A=requireIsArray(),k=requireIsBuffer(),q=requireIsTypedArray(),M=1,D="[object Arguments]",L="[object Array]",I="[object Object]",N=Object.prototype,F=N.hasOwnProperty;function H(G,V,j,W,X,J){var te=A(G),re=A(V),ee=te?L:T(G),ne=re?L:T(V);ee=ee==D?I:ee,ne=ne==D?I:ne;var oe=ee==I,ue=ne==I,ce=ee==ne;if(ce&&k(G)){if(!k(V))return!1;te=!0,oe=!1}if(ce&&!oe)return J||(J=new _),te||q(G)?v(G,V,j,W,X,J):S(G,V,ee,j,W,X,J);if(!(j&M)){var de=oe&&F.call(G,"__wrapped__"),pe=ue&&F.call(V,"__wrapped__");if(de||pe){var _e=de?G.value():G,Ee=pe?V.value():V;return J||(J=new _),X(_e,Ee,j,W,J)}}return ce?(J||(J=new _),R(G,V,j,W,X,J)):!1}return _baseIsEqualDeep=H,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var _=require_baseIsEqualDeep(),v=requireIsObjectLike();function S(R,T,A,k,q){return R===T?!0:R==null||T==null||!v(R)&&!v(T)?R!==R&&T!==T:_(R,T,A,k,S,q)}return _baseIsEqual=S,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var _=require_Stack(),v=require_baseIsEqual(),S=1,R=2;function T(A,k,q,M){var D=q.length,L=D,I=!M;if(A==null)return!L;for(A=Object(A);D--;){var N=q[D];if(I&&N[2]?N[1]!==A[N[0]]:!(N[0]in A))return!1}for(;++D<L;){N=q[D];var F=N[0],H=A[F],G=N[1];if(I&&N[2]){if(H===void 0&&!(F in A))return!1}else{var V=new _;if(M)var j=M(H,G,F,A,k,V);if(!(j===void 0?v(G,H,S|R,M,V):j))return!1}}return!0}return _baseIsMatch=T,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var _=requireIsObject();function v(S){return S===S&&!_(S)}return _isStrictComparable=v,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var _=require_isStrictComparable(),v=requireKeys();function S(R){for(var T=v(R),A=T.length;A--;){var k=T[A],q=R[k];T[A]=[k,q,_(q)]}return T}return _getMatchData=S,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function _(v,S){return function(R){return R==null?!1:R[v]===S&&(S!==void 0||v in Object(R))}}return _matchesStrictComparable=_,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var _=require_baseIsMatch(),v=require_getMatchData(),S=require_matchesStrictComparable();function R(T){var A=v(T);return A.length==1&&A[0][2]?S(A[0][0],A[0][1]):function(k){return k===T||_(k,T,A)}}return _baseMatches=R,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var _=require_baseGetTag(),v=requireIsObjectLike(),S="[object Symbol]";function R(T){return typeof T=="symbol"||v(T)&&_(T)==S}return isSymbol_1=R,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var _=requireIsArray(),v=requireIsSymbol(),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function T(A,k){if(_(A))return!1;var q=typeof A;return q=="number"||q=="symbol"||q=="boolean"||A==null||v(A)?!0:R.test(A)||!S.test(A)||k!=null&&A in Object(k)}return _isKey=T,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var _=require_MapCache(),v="Expected a function";function S(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(v);var A=function(){var k=arguments,q=T?T.apply(this,k):k[0],M=A.cache;if(M.has(q))return M.get(q);var D=R.apply(this,k);return A.cache=M.set(q,D)||M,D};return A.cache=new(S.Cache||_),A}return S.Cache=_,memoize_1=S,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var _=requireMemoize(),v=500;function S(R){var T=_(R,function(k){return A.size===v&&A.clear(),k}),A=T.cache;return T}return _memoizeCapped=S,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var _=require_memoizeCapped(),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,R=_(function(T){var A=[];return T.charCodeAt(0)===46&&A.push(""),T.replace(v,function(k,q,M,D){A.push(M?D.replace(S,"$1"):q||k)}),A});return _stringToPath=R,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=Array(T);++R<T;)A[R]=S(v[R],R,v);return A}return _arrayMap=_,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var _=require_Symbol(),v=require_arrayMap(),S=requireIsArray(),R=requireIsSymbol(),T=_?_.prototype:void 0,A=T?T.toString:void 0;function k(q){if(typeof q=="string")return q;if(S(q))return v(q,k)+"";if(R(q))return A?A.call(q):"";var M=q+"";return M=="0"&&1/q==-1/0?"-0":M}return _baseToString=k,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var _=require_baseToString();function v(S){return S==null?"":_(S)}return toString_1=v,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var _=requireIsArray(),v=require_isKey(),S=require_stringToPath(),R=requireToString();function T(A,k){return _(A)?A:v(A,k)?[A]:S(R(A))}return _castPath=T,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var _=requireIsSymbol();function v(S){if(typeof S=="string"||_(S))return S;var R=S+"";return R=="0"&&1/S==-1/0?"-0":R}return _toKey=v,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var _=require_castPath(),v=require_toKey();function S(R,T){T=_(T,R);for(var A=0,k=T.length;R!=null&&A<k;)R=R[v(T[A++])];return A&&A==k?R:void 0}return _baseGet=S,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var _=require_baseGet();function v(S,R,T){var A=S==null?void 0:_(S,R);return A===void 0?T:A}return get_1=v,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function _(v,S){return v!=null&&S in Object(v)}return _baseHasIn=_,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var _=require_castPath(),v=requireIsArguments(),S=requireIsArray(),R=require_isIndex(),T=requireIsLength(),A=require_toKey();function k(q,M,D){M=_(M,q);for(var L=-1,I=M.length,N=!1;++L<I;){var F=A(M[L]);if(!(N=q!=null&&D(q,F)))break;q=q[F]}return N||++L!=I?N:(I=q==null?0:q.length,!!I&&T(I)&&R(F,I)&&(S(q)||v(q)))}return _hasPath=k,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var _=require_baseHasIn(),v=require_hasPath();function S(R,T){return R!=null&&v(R,T,_)}return hasIn_1=S,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var _=require_baseIsEqual(),v=requireGet(),S=requireHasIn(),R=require_isKey(),T=require_isStrictComparable(),A=require_matchesStrictComparable(),k=require_toKey(),q=1,M=2;function D(L,I){return R(L)&&T(I)?A(k(L),I):function(N){var F=v(N,L);return F===void 0&&F===I?S(N,L):_(I,F,q|M)}}return _baseMatchesProperty=D,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function _(v){return function(S){return S?.[v]}}return _baseProperty=_,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var _=require_baseGet();function v(S){return function(R){return _(R,S)}}return _basePropertyDeep=v,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var _=require_baseProperty(),v=require_basePropertyDeep(),S=require_isKey(),R=require_toKey();function T(A){return S(A)?_(R(A)):v(A)}return property_1=T,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var _=require_baseMatches(),v=require_baseMatchesProperty(),S=requireIdentity(),R=requireIsArray(),T=requireProperty();function A(k){return typeof k=="function"?k:k==null?S:typeof k=="object"?R(k)?v(k[0],k[1]):_(k):T(k)}return _baseIteratee=A,_baseIteratee}var filter_1,hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter_1;hasRequiredFilter=1;var _=require_arrayFilter(),v=require_baseFilter(),S=require_baseIteratee(),R=requireIsArray();function T(A,k){var q=R(A)?_:v;return q(A,S(k,3))}return filter_1=T,filter_1}var _baseHas,hasRequired_baseHas;function require_baseHas(){if(hasRequired_baseHas)return _baseHas;hasRequired_baseHas=1;var _=Object.prototype,v=_.hasOwnProperty;function S(R,T){return R!=null&&v.call(R,T)}return _baseHas=S,_baseHas}var has_1,hasRequiredHas;function requireHas(){if(hasRequiredHas)return has_1;hasRequiredHas=1;var _=require_baseHas(),v=require_hasPath();function S(R,T){return R!=null&&v(R,T,_)}return has_1=S,has_1}var isEmpty_1,hasRequiredIsEmpty;function requireIsEmpty(){if(hasRequiredIsEmpty)return isEmpty_1;hasRequiredIsEmpty=1;var _=require_baseKeys(),v=require_getTag(),S=requireIsArguments(),R=requireIsArray(),T=requireIsArrayLike(),A=requireIsBuffer(),k=require_isPrototype(),q=requireIsTypedArray(),M="[object Map]",D="[object Set]",L=Object.prototype,I=L.hasOwnProperty;function N(F){if(F==null)return!0;if(T(F)&&(R(F)||typeof F=="string"||typeof F.splice=="function"||A(F)||q(F)||S(F)))return!F.length;var H=v(F);if(H==M||H==D)return!F.size;if(k(F))return!_(F).length;for(var G in F)if(I.call(F,G))return!1;return!0}return isEmpty_1=N,isEmpty_1}var isUndefined_1,hasRequiredIsUndefined;function requireIsUndefined(){if(hasRequiredIsUndefined)return isUndefined_1;hasRequiredIsUndefined=1;function _(v){return v===void 0}return isUndefined_1=_,isUndefined_1}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var _=require_baseEach(),v=requireIsArrayLike();function S(R,T){var A=-1,k=v(R)?Array(R.length):[];return _(R,function(q,M,D){k[++A]=T(q,M,D)}),k}return _baseMap=S,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var _=require_arrayMap(),v=require_baseIteratee(),S=require_baseMap(),R=requireIsArray();function T(A,k){var q=R(A)?_:S;return q(A,v(k,3))}return map_1=T,map_1}var _arrayReduce,hasRequired_arrayReduce;function require_arrayReduce(){if(hasRequired_arrayReduce)return _arrayReduce;hasRequired_arrayReduce=1;function _(v,S,R,T){var A=-1,k=v==null?0:v.length;for(T&&k&&(R=v[++A]);++A<k;)R=S(R,v[A],A,v);return R}return _arrayReduce=_,_arrayReduce}var _baseReduce,hasRequired_baseReduce;function require_baseReduce(){if(hasRequired_baseReduce)return _baseReduce;hasRequired_baseReduce=1;function _(v,S,R,T,A){return A(v,function(k,q,M){R=T?(T=!1,k):S(R,k,q,M)}),R}return _baseReduce=_,_baseReduce}var reduce_1,hasRequiredReduce;function requireReduce(){if(hasRequiredReduce)return reduce_1;hasRequiredReduce=1;var _=require_arrayReduce(),v=require_baseEach(),S=require_baseIteratee(),R=require_baseReduce(),T=requireIsArray();function A(k,q,M){var D=T(k)?_:R,L=arguments.length<3;return D(k,S(q,4),M,L,v)}return reduce_1=A,reduce_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var _=require_baseGetTag(),v=requireIsArray(),S=requireIsObjectLike(),R="[object String]";function T(A){return typeof A=="string"||!v(A)&&S(A)&&_(A)==R}return isString_1=T,isString_1}var _asciiSize,hasRequired_asciiSize;function require_asciiSize(){if(hasRequired_asciiSize)return _asciiSize;hasRequired_asciiSize=1;var _=require_baseProperty(),v=_("length");return _asciiSize=v,_asciiSize}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var _="\\ud800-\\udfff",v="\\u0300-\\u036f",S="\\ufe20-\\ufe2f",R="\\u20d0-\\u20ff",T=v+S+R,A="\\ufe0e\\ufe0f",k="\\u200d",q=RegExp("["+k+_+T+A+"]");function M(D){return q.test(D)}return _hasUnicode=M,_hasUnicode}var _unicodeSize,hasRequired_unicodeSize;function require_unicodeSize(){if(hasRequired_unicodeSize)return _unicodeSize;hasRequired_unicodeSize=1;var _="\\ud800-\\udfff",v="\\u0300-\\u036f",S="\\ufe20-\\ufe2f",R="\\u20d0-\\u20ff",T=v+S+R,A="\\ufe0e\\ufe0f",k="["+_+"]",q="["+T+"]",M="\\ud83c[\\udffb-\\udfff]",D="(?:"+q+"|"+M+")",L="[^"+_+"]",I="(?:\\ud83c[\\udde6-\\uddff]){2}",N="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",H=D+"?",G="["+A+"]?",V="(?:"+F+"(?:"+[L,I,N].join("|")+")"+G+H+")*",j=G+H+V,W="(?:"+[L+q+"?",q,I,N,k].join("|")+")",X=RegExp(M+"(?="+M+")|"+W+j,"g");function J(te){for(var re=X.lastIndex=0;X.test(te);)++re;return re}return _unicodeSize=J,_unicodeSize}var _stringSize,hasRequired_stringSize;function require_stringSize(){if(hasRequired_stringSize)return _stringSize;hasRequired_stringSize=1;var _=require_asciiSize(),v=require_hasUnicode(),S=require_unicodeSize();function R(T){return v(T)?S(T):_(T)}return _stringSize=R,_stringSize}var size_1,hasRequiredSize;function requireSize(){if(hasRequiredSize)return size_1;hasRequiredSize=1;var _=require_baseKeys(),v=require_getTag(),S=requireIsArrayLike(),R=requireIsString(),T=require_stringSize(),A="[object Map]",k="[object Set]";function q(M){if(M==null)return 0;if(S(M))return R(M)?T(M):M.length;var D=v(M);return D==A||D==k?M.size:_(M).length}return size_1=q,size_1}var transform_1,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform_1;hasRequiredTransform=1;var _=require_arrayEach(),v=require_baseCreate(),S=require_baseForOwn(),R=require_baseIteratee(),T=require_getPrototype(),A=requireIsArray(),k=requireIsBuffer(),q=requireIsFunction(),M=requireIsObject(),D=requireIsTypedArray();function L(I,N,F){var H=A(I),G=H||k(I)||D(I);if(N=R(N,4),F==null){var V=I&&I.constructor;G?F=H?new V:[]:M(I)?F=q(V)?v(T(I)):{}:F={}}return(G?_:S)(I,function(j,W,X){return N(F,j,W,X)}),F}return transform_1=L,transform_1}var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var _=require_Symbol(),v=requireIsArguments(),S=requireIsArray(),R=_?_.isConcatSpreadable:void 0;function T(A){return S(A)||v(A)||!!(R&&A&&A[R])}return _isFlattenable=T,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var _=require_arrayPush(),v=require_isFlattenable();function S(R,T,A,k,q){var M=-1,D=R.length;for(A||(A=v),q||(q=[]);++M<D;){var L=R[M];T>0&&A(L)?T>1?S(L,T-1,A,k,q):_(q,L):k||(q[q.length]=L)}return q}return _baseFlatten=S,_baseFlatten}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function _(v,S,R){switch(R.length){case 0:return v.call(S);case 1:return v.call(S,R[0]);case 2:return v.call(S,R[0],R[1]);case 3:return v.call(S,R[0],R[1],R[2])}return v.apply(S,R)}return _apply=_,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var _=require_apply(),v=Math.max;function S(R,T,A){return T=v(T===void 0?R.length-1:T,0),function(){for(var k=arguments,q=-1,M=v(k.length-T,0),D=Array(M);++q<M;)D[q]=k[T+q];q=-1;for(var L=Array(T+1);++q<T;)L[q]=k[q];return L[T]=A(D),_(R,this,L)}}return _overRest=S,_overRest}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var _=requireConstant(),v=require_defineProperty(),S=requireIdentity(),R=v?function(T,A){return v(T,"toString",{configurable:!0,enumerable:!1,value:_(A),writable:!0})}:S;return _baseSetToString=R,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var _=800,v=16,S=Date.now;function R(T){var A=0,k=0;return function(){var q=S(),M=v-(q-k);if(k=q,M>0){if(++A>=_)return arguments[0]}else A=0;return T.apply(void 0,arguments)}}return _shortOut=R,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var _=require_baseSetToString(),v=require_shortOut(),S=v(_);return _setToString=S,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var _=requireIdentity(),v=require_overRest(),S=require_setToString();function R(T,A){return S(v(T,A,_),T+"")}return _baseRest=R,_baseRest}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function _(v,S,R,T){for(var A=v.length,k=R+(T?1:-1);T?k--:++k<A;)if(S(v[k],k,v))return k;return-1}return _baseFindIndex=_,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function _(v){return v!==v}return _baseIsNaN=_,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function _(v,S,R){for(var T=R-1,A=v.length;++T<A;)if(v[T]===S)return T;return-1}return _strictIndexOf=_,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var _=require_baseFindIndex(),v=require_baseIsNaN(),S=require_strictIndexOf();function R(T,A,k){return A===A?S(T,A,k):_(T,v,k)}return _baseIndexOf=R,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var _=require_baseIndexOf();function v(S,R){var T=S==null?0:S.length;return!!T&&_(S,R,0)>-1}return _arrayIncludes=v,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function _(v,S,R){for(var T=-1,A=v==null?0:v.length;++T<A;)if(R(S,v[T]))return!0;return!1}return _arrayIncludesWith=_,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function _(){}return noop_1=_,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var _=require_Set(),v=requireNoop(),S=require_setToArray(),R=1/0,T=_&&1/S(new _([,-0]))[1]==R?function(A){return new _(A)}:v;return _createSet=T,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var _=require_SetCache(),v=require_arrayIncludes(),S=require_arrayIncludesWith(),R=require_cacheHas(),T=require_createSet(),A=require_setToArray(),k=200;function q(M,D,L){var I=-1,N=v,F=M.length,H=!0,G=[],V=G;if(L)H=!1,N=S;else if(F>=k){var j=D?null:T(M);if(j)return A(j);H=!1,N=R,V=new _}else V=D?[]:G;e:for(;++I<F;){var W=M[I],X=D?D(W):W;if(W=L||W!==0?W:0,H&&X===X){for(var J=V.length;J--;)if(V[J]===X)continue e;D&&V.push(X),G.push(W)}else N(V,X,L)||(V!==G&&V.push(X),G.push(W))}return G}return _baseUniq=q,_baseUniq}var isArrayLikeObject_1,hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var _=requireIsArrayLike(),v=requireIsObjectLike();function S(R){return v(R)&&_(R)}return isArrayLikeObject_1=S,isArrayLikeObject_1}var union_1,hasRequiredUnion;function requireUnion(){if(hasRequiredUnion)return union_1;hasRequiredUnion=1;var _=require_baseFlatten(),v=require_baseRest(),S=require_baseUniq(),R=requireIsArrayLikeObject(),T=v(function(A){return S(_(A,1,R,!0))});return union_1=T,union_1}var _baseValues,hasRequired_baseValues;function require_baseValues(){if(hasRequired_baseValues)return _baseValues;hasRequired_baseValues=1;var _=require_arrayMap();function v(S,R){return _(R,function(T){return S[T]})}return _baseValues=v,_baseValues}var values_1,hasRequiredValues;function requireValues(){if(hasRequiredValues)return values_1;hasRequiredValues=1;var _=require_baseValues(),v=requireKeys();function S(R){return R==null?[]:_(R,v(R))}return values_1=S,values_1}var lodash_1$1,hasRequiredLodash$1;function requireLodash$1(){if(hasRequiredLodash$1)return lodash_1$1;hasRequiredLodash$1=1;var _;if(typeof commonjsRequire=="function")try{_={clone:requireClone(),constant:requireConstant(),each:requireEach(),filter:requireFilter(),has:requireHas(),isArray:requireIsArray(),isEmpty:requireIsEmpty(),isFunction:requireIsFunction(),isUndefined:requireIsUndefined(),keys:requireKeys(),map:requireMap(),reduce:requireReduce(),size:requireSize(),transform:requireTransform(),union:requireUnion(),values:requireValues()}}catch{}return _||(_=window._),lodash_1$1=_,lodash_1$1}var graph,hasRequiredGraph;function requireGraph(){if(hasRequiredGraph)return graph;hasRequiredGraph=1;var _=requireLodash$1();graph=T;var v="\0",S="\0",R="";function T(L){this._isDirected=_.has(L,"directed")?L.directed:!0,this._isMultigraph=_.has(L,"multigraph")?L.multigraph:!1,this._isCompound=_.has(L,"compound")?L.compound:!1,this._label=void 0,this._defaultNodeLabelFn=_.constant(void 0),this._defaultEdgeLabelFn=_.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}T.prototype._nodeCount=0,T.prototype._edgeCount=0,T.prototype.isDirected=function(){return this._isDirected},T.prototype.isMultigraph=function(){return this._isMultigraph},T.prototype.isCompound=function(){return this._isCompound},T.prototype.setGraph=function(L){return this._label=L,this},T.prototype.graph=function(){return this._label},T.prototype.setDefaultNodeLabel=function(L){return _.isFunction(L)||(L=_.constant(L)),this._defaultNodeLabelFn=L,this},T.prototype.nodeCount=function(){return this._nodeCount},T.prototype.nodes=function(){return _.keys(this._nodes)},T.prototype.sources=function(){var L=this;return _.filter(this.nodes(),function(I){return _.isEmpty(L._in[I])})},T.prototype.sinks=function(){var L=this;return _.filter(this.nodes(),function(I){return _.isEmpty(L._out[I])})},T.prototype.setNodes=function(L,I){var N=arguments,F=this;return _.each(L,function(H){N.length>1?F.setNode(H,I):F.setNode(H)}),this},T.prototype.setNode=function(L,I){return _.has(this._nodes,L)?(arguments.length>1&&(this._nodes[L]=I),this):(this._nodes[L]=arguments.length>1?I:this._defaultNodeLabelFn(L),this._isCompound&&(this._parent[L]=S,this._children[L]={},this._children[S][L]=!0),this._in[L]={},this._preds[L]={},this._out[L]={},this._sucs[L]={},++this._nodeCount,this)},T.prototype.node=function(L){return this._nodes[L]},T.prototype.hasNode=function(L){return _.has(this._nodes,L)},T.prototype.removeNode=function(L){var I=this;if(_.has(this._nodes,L)){var N=function(F){I.removeEdge(I._edgeObjs[F])};delete this._nodes[L],this._isCompound&&(this._removeFromParentsChildList(L),delete this._parent[L],_.each(this.children(L),function(F){I.setParent(F)}),delete this._children[L]),_.each(_.keys(this._in[L]),N),delete this._in[L],delete this._preds[L],_.each(_.keys(this._out[L]),N),delete this._out[L],delete this._sucs[L],--this._nodeCount}return this},T.prototype.setParent=function(L,I){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_.isUndefined(I))I=S;else{I+="";for(var N=I;!_.isUndefined(N);N=this.parent(N))if(N===L)throw new Error("Setting "+I+" as parent of "+L+" would create a cycle");this.setNode(I)}return this.setNode(L),this._removeFromParentsChildList(L),this._parent[L]=I,this._children[I][L]=!0,this},T.prototype._removeFromParentsChildList=function(L){delete this._children[this._parent[L]][L]},T.prototype.parent=function(L){if(this._isCompound){var I=this._parent[L];if(I!==S)return I}},T.prototype.children=function(L){if(_.isUndefined(L)&&(L=S),this._isCompound){var I=this._children[L];if(I)return _.keys(I)}else{if(L===S)return this.nodes();if(this.hasNode(L))return[]}},T.prototype.predecessors=function(L){var I=this._preds[L];if(I)return _.keys(I)},T.prototype.successors=function(L){var I=this._sucs[L];if(I)return _.keys(I)},T.prototype.neighbors=function(L){var I=this.predecessors(L);if(I)return _.union(I,this.successors(L))},T.prototype.isLeaf=function(L){var I;return this.isDirected()?I=this.successors(L):I=this.neighbors(L),I.length===0},T.prototype.filterNodes=function(L){var I=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});I.setGraph(this.graph());var N=this;_.each(this._nodes,function(G,V){L(V)&&I.setNode(V,G)}),_.each(this._edgeObjs,function(G){I.hasNode(G.v)&&I.hasNode(G.w)&&I.setEdge(G,N.edge(G))});var F={};function H(G){var V=N.parent(G);return V===void 0||I.hasNode(V)?(F[G]=V,V):V in F?F[V]:H(V)}return this._isCompound&&_.each(I.nodes(),function(G){I.setParent(G,H(G))}),I},T.prototype.setDefaultEdgeLabel=function(L){return _.isFunction(L)||(L=_.constant(L)),this._defaultEdgeLabelFn=L,this},T.prototype.edgeCount=function(){return this._edgeCount},T.prototype.edges=function(){return _.values(this._edgeObjs)},T.prototype.setPath=function(L,I){var N=this,F=arguments;return _.reduce(L,function(H,G){return F.length>1?N.setEdge(H,G,I):N.setEdge(H,G),G}),this},T.prototype.setEdge=function(){var L,I,N,F,H=!1,G=arguments[0];typeof G=="object"&&G!==null&&"v"in G?(L=G.v,I=G.w,N=G.name,arguments.length===2&&(F=arguments[1],H=!0)):(L=G,I=arguments[1],N=arguments[3],arguments.length>2&&(F=arguments[2],H=!0)),L=""+L,I=""+I,_.isUndefined(N)||(N=""+N);var V=q(this._isDirected,L,I,N);if(_.has(this._edgeLabels,V))return H&&(this._edgeLabels[V]=F),this;if(!_.isUndefined(N)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(L),this.setNode(I),this._edgeLabels[V]=H?F:this._defaultEdgeLabelFn(L,I,N);var j=M(this._isDirected,L,I,N);return L=j.v,I=j.w,Object.freeze(j),this._edgeObjs[V]=j,A(this._preds[I],L),A(this._sucs[L],I),this._in[I][V]=j,this._out[L][V]=j,this._edgeCount++,this},T.prototype.edge=function(L,I,N){var F=arguments.length===1?D(this._isDirected,arguments[0]):q(this._isDirected,L,I,N);return this._edgeLabels[F]},T.prototype.hasEdge=function(L,I,N){var F=arguments.length===1?D(this._isDirected,arguments[0]):q(this._isDirected,L,I,N);return _.has(this._edgeLabels,F)},T.prototype.removeEdge=function(L,I,N){var F=arguments.length===1?D(this._isDirected,arguments[0]):q(this._isDirected,L,I,N),H=this._edgeObjs[F];return H&&(L=H.v,I=H.w,delete this._edgeLabels[F],delete this._edgeObjs[F],k(this._preds[I],L),k(this._sucs[L],I),delete this._in[I][F],delete this._out[L][F],this._edgeCount--),this},T.prototype.inEdges=function(L,I){var N=this._in[L];if(N){var F=_.values(N);return I?_.filter(F,function(H){return H.v===I}):F}},T.prototype.outEdges=function(L,I){var N=this._out[L];if(N){var F=_.values(N);return I?_.filter(F,function(H){return H.w===I}):F}},T.prototype.nodeEdges=function(L,I){var N=this.inEdges(L,I);if(N)return N.concat(this.outEdges(L,I))};function A(L,I){L[I]?L[I]++:L[I]=1}function k(L,I){--L[I]||delete L[I]}function q(L,I,N,F){var H=""+I,G=""+N;if(!L&&H>G){var V=H;H=G,G=V}return H+R+G+R+(_.isUndefined(F)?v:F)}function M(L,I,N,F){var H=""+I,G=""+N;if(!L&&H>G){var V=H;H=G,G=V}var j={v:H,w:G};return F&&(j.name=F),j}function D(L,I){return q(L,I.v,I.w,I.name)}return graph}var version$1,hasRequiredVersion$1;function requireVersion$1(){return hasRequiredVersion$1||(hasRequiredVersion$1=1,version$1="2.1.8"),version$1}var lib,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib={Graph:requireGraph(),version:requireVersion$1()}),lib}var json,hasRequiredJson;function requireJson(){if(hasRequiredJson)return json;hasRequiredJson=1;var _=requireLodash$1(),v=requireGraph();json={write:S,read:A};function S(k){var q={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:R(k),edges:T(k)};return _.isUndefined(k.graph())||(q.value=_.clone(k.graph())),q}function R(k){return _.map(k.nodes(),function(q){var M=k.node(q),D=k.parent(q),L={v:q};return _.isUndefined(M)||(L.value=M),_.isUndefined(D)||(L.parent=D),L})}function T(k){return _.map(k.edges(),function(q){var M=k.edge(q),D={v:q.v,w:q.w};return _.isUndefined(q.name)||(D.name=q.name),_.isUndefined(M)||(D.value=M),D})}function A(k){var q=new v(k.options).setGraph(k.value);return _.each(k.nodes,function(M){q.setNode(M.v,M.value),M.parent&&q.setParent(M.v,M.parent)}),_.each(k.edges,function(M){q.setEdge({v:M.v,w:M.w,name:M.name},M.value)}),q}return json}var components_1,hasRequiredComponents;function requireComponents(){if(hasRequiredComponents)return components_1;hasRequiredComponents=1;var _=requireLodash$1();components_1=v;function v(S){var R={},T=[],A;function k(q){_.has(R,q)||(R[q]=!0,A.push(q),_.each(S.successors(q),k),_.each(S.predecessors(q),k))}return _.each(S.nodes(),function(q){A=[],k(q),A.length&&T.push(A)}),T}return components_1}var priorityQueue,hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1;var _=requireLodash$1();priorityQueue=v;function v(){this._arr=[],this._keyIndices={}}return v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(S){return S.key})},v.prototype.has=function(S){return _.has(this._keyIndices,S)},v.prototype.priority=function(S){var R=this._keyIndices[S];if(R!==void 0)return this._arr[R].priority},v.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(S,R){var T=this._keyIndices;if(S=String(S),!_.has(T,S)){var A=this._arr,k=A.length;return T[S]=k,A.push({key:S,priority:R}),this._decrease(k),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},v.prototype.decrease=function(S,R){var T=this._keyIndices[S];if(R>this._arr[T].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[T].priority+" New: "+R);this._arr[T].priority=R,this._decrease(T)},v.prototype._heapify=function(S){var R=this._arr,T=2*S,A=T+1,k=S;T<R.length&&(k=R[T].priority<R[k].priority?T:k,A<R.length&&(k=R[A].priority<R[k].priority?A:k),k!==S&&(this._swap(S,k),this._heapify(k)))},v.prototype._decrease=function(S){for(var R=this._arr,T=R[S].priority,A;S!==0&&(A=S>>1,!(R[A].priority<T));)this._swap(S,A),S=A},v.prototype._swap=function(S,R){var T=this._arr,A=this._keyIndices,k=T[S],q=T[R];T[S]=q,T[R]=k,A[q.key]=S,A[k.key]=R},priorityQueue}var dijkstra_1,hasRequiredDijkstra;function requireDijkstra(){if(hasRequiredDijkstra)return dijkstra_1;hasRequiredDijkstra=1;var _=requireLodash$1(),v=requirePriorityQueue();dijkstra_1=R;var S=_.constant(1);function R(A,k,q,M){return T(A,String(k),q||S,M||function(D){return A.outEdges(D)})}function T(A,k,q,M){var D={},L=new v,I,N,F=function(H){var G=H.v!==I?H.v:H.w,V=D[G],j=q(H),W=N.distance+j;if(j<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+H+" Weight: "+j);W<V.distance&&(V.distance=W,V.predecessor=I,L.decrease(G,W))};for(A.nodes().forEach(function(H){var G=H===k?0:Number.POSITIVE_INFINITY;D[H]={distance:G},L.add(H,G)});L.size()>0&&(I=L.removeMin(),N=D[I],N.distance!==Number.POSITIVE_INFINITY);)M(I).forEach(F);return D}return dijkstra_1}var dijkstraAll_1,hasRequiredDijkstraAll;function requireDijkstraAll(){if(hasRequiredDijkstraAll)return dijkstraAll_1;hasRequiredDijkstraAll=1;var _=requireDijkstra(),v=requireLodash$1();dijkstraAll_1=S;function S(R,T,A){return v.transform(R.nodes(),function(k,q){k[q]=_(R,q,T,A)},{})}return dijkstraAll_1}var tarjan_1,hasRequiredTarjan;function requireTarjan(){if(hasRequiredTarjan)return tarjan_1;hasRequiredTarjan=1;var _=requireLodash$1();tarjan_1=v;function v(S){var R=0,T=[],A={},k=[];function q(M){var D=A[M]={onStack:!0,lowlink:R,index:R++};if(T.push(M),S.successors(M).forEach(function(N){_.has(A,N)?A[N].onStack&&(D.lowlink=Math.min(D.lowlink,A[N].index)):(q(N),D.lowlink=Math.min(D.lowlink,A[N].lowlink))}),D.lowlink===D.index){var L=[],I;do I=T.pop(),A[I].onStack=!1,L.push(I);while(M!==I);k.push(L)}}return S.nodes().forEach(function(M){_.has(A,M)||q(M)}),k}return tarjan_1}var findCycles_1,hasRequiredFindCycles;function requireFindCycles(){if(hasRequiredFindCycles)return findCycles_1;hasRequiredFindCycles=1;var _=requireLodash$1(),v=requireTarjan();findCycles_1=S;function S(R){return _.filter(v(R),function(T){return T.length>1||T.length===1&&R.hasEdge(T[0],T[0])})}return findCycles_1}var floydWarshall_1,hasRequiredFloydWarshall;function requireFloydWarshall(){if(hasRequiredFloydWarshall)return floydWarshall_1;hasRequiredFloydWarshall=1;var _=requireLodash$1();floydWarshall_1=S;var v=_.constant(1);function S(T,A,k){return R(T,A||v,k||function(q){return T.outEdges(q)})}function R(T,A,k){var q={},M=T.nodes();return M.forEach(function(D){q[D]={},q[D][D]={distance:0},M.forEach(function(L){D!==L&&(q[D][L]={distance:Number.POSITIVE_INFINITY})}),k(D).forEach(function(L){var I=L.v===D?L.w:L.v,N=A(L);q[D][I]={distance:N,predecessor:D}})}),M.forEach(function(D){var L=q[D];M.forEach(function(I){var N=q[I];M.forEach(function(F){var H=N[D],G=L[F],V=N[F],j=H.distance+G.distance;j<V.distance&&(V.distance=j,V.predecessor=G.predecessor)})})}),q}return floydWarshall_1}var topsort_1,hasRequiredTopsort;function requireTopsort(){if(hasRequiredTopsort)return topsort_1;hasRequiredTopsort=1;var _=requireLodash$1();topsort_1=v,v.CycleException=S;function v(R){var T={},A={},k=[];function q(M){if(_.has(A,M))throw new S;_.has(T,M)||(A[M]=!0,T[M]=!0,_.each(R.predecessors(M),q),delete A[M],k.push(M))}if(_.each(R.sinks(),q),_.size(T)!==R.nodeCount())throw new S;return k}function S(){}return S.prototype=new Error,topsort_1}var isAcyclic_1,hasRequiredIsAcyclic;function requireIsAcyclic(){if(hasRequiredIsAcyclic)return isAcyclic_1;hasRequiredIsAcyclic=1;var _=requireTopsort();isAcyclic_1=v;function v(S){try{_(S)}catch(R){if(R instanceof _.CycleException)return!1;throw R}return!0}return isAcyclic_1}var dfs_1,hasRequiredDfs;function requireDfs(){if(hasRequiredDfs)return dfs_1;hasRequiredDfs=1;var _=requireLodash$1();dfs_1=v;function v(R,T,A){_.isArray(T)||(T=[T]);var k=(R.isDirected()?R.successors:R.neighbors).bind(R),q=[],M={};return _.each(T,function(D){if(!R.hasNode(D))throw new Error("Graph does not have node: "+D);S(R,D,A==="post",M,k,q)}),q}function S(R,T,A,k,q,M){_.has(k,T)||(k[T]=!0,A||M.push(T),_.each(q(T),function(D){S(R,D,A,k,q,M)}),A&&M.push(T))}return dfs_1}var postorder_1,hasRequiredPostorder;function requirePostorder(){if(hasRequiredPostorder)return postorder_1;hasRequiredPostorder=1;var _=requireDfs();postorder_1=v;function v(S,R){return _(S,R,"post")}return postorder_1}var preorder_1,hasRequiredPreorder;function requirePreorder(){if(hasRequiredPreorder)return preorder_1;hasRequiredPreorder=1;var _=requireDfs();preorder_1=v;function v(S,R){return _(S,R,"pre")}return preorder_1}var prim_1,hasRequiredPrim;function requirePrim(){if(hasRequiredPrim)return prim_1;hasRequiredPrim=1;var _=requireLodash$1(),v=requireGraph(),S=requirePriorityQueue();prim_1=R;function R(T,A){var k=new v,q={},M=new S,D;function L(N){var F=N.v===D?N.w:N.v,H=M.priority(F);if(H!==void 0){var G=A(N);G<H&&(q[F]=D,M.decrease(F,G))}}if(T.nodeCount()===0)return k;_.each(T.nodes(),function(N){M.add(N,Number.POSITIVE_INFINITY),k.setNode(N)}),M.decrease(T.nodes()[0],0);for(var I=!1;M.size()>0;){if(D=M.removeMin(),_.has(q,D))k.setEdge(D,q[D]);else{if(I)throw new Error("Input graph is not connected: "+T);I=!0}T.nodeEdges(D).forEach(L)}return k}return prim_1}var alg,hasRequiredAlg;function requireAlg(){return hasRequiredAlg||(hasRequiredAlg=1,alg={components:requireComponents(),dijkstra:requireDijkstra(),dijkstraAll:requireDijkstraAll(),findCycles:requireFindCycles(),floydWarshall:requireFloydWarshall(),isAcyclic:requireIsAcyclic(),postorder:requirePostorder(),preorder:requirePreorder(),prim:requirePrim(),tarjan:requireTarjan(),topsort:requireTopsort()}),alg}var graphlib,hasRequiredGraphlib$1;function requireGraphlib$1(){if(hasRequiredGraphlib$1)return graphlib;hasRequiredGraphlib$1=1;var _=requireLib();return graphlib={Graph:_.Graph,json:requireJson(),alg:requireAlg(),version:_.version},graphlib}var graphlib_1,hasRequiredGraphlib;function requireGraphlib(){if(hasRequiredGraphlib)return graphlib_1;hasRequiredGraphlib=1;var _;if(typeof commonjsRequire=="function")try{_=requireGraphlib$1()}catch{}return _||(_=window.graphlib),graphlib_1=_,graphlib_1}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var _=require_baseClone(),v=1,S=4;function R(T){return _(T,v|S)}return cloneDeep_1=R,cloneDeep_1}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var _=requireEq(),v=requireIsArrayLike(),S=require_isIndex(),R=requireIsObject();function T(A,k,q){if(!R(q))return!1;var M=typeof k;return(M=="number"?v(q)&&S(k,q.length):M=="string"&&k in q)?_(q[k],A):!1}return _isIterateeCall=T,_isIterateeCall}var defaults_1,hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults_1;hasRequiredDefaults=1;var _=require_baseRest(),v=requireEq(),S=require_isIterateeCall(),R=requireKeysIn(),T=Object.prototype,A=T.hasOwnProperty,k=_(function(q,M){q=Object(q);var D=-1,L=M.length,I=L>2?M[2]:void 0;for(I&&S(M[0],M[1],I)&&(L=1);++D<L;)for(var N=M[D],F=R(N),H=-1,G=F.length;++H<G;){var V=F[H],j=q[V];(j===void 0||v(j,T[V])&&!A.call(q,V))&&(q[V]=N[V])}return q});return defaults_1=k,defaults_1}var _createFind,hasRequired_createFind;function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var _=require_baseIteratee(),v=requireIsArrayLike(),S=requireKeys();function R(T){return function(A,k,q){var M=Object(A);if(!v(A)){var D=_(k,3);A=S(A),k=function(I){return D(M[I],I,M)}}var L=T(A,k,q);return L>-1?M[D?A[L]:L]:void 0}}return _createFind=R,_createFind}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var _=/\s/;function v(S){for(var R=S.length;R--&&_.test(S.charAt(R)););return R}return _trimmedEndIndex=v,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var _=require_trimmedEndIndex(),v=/^\s+/;function S(R){return R&&R.slice(0,_(R)+1).replace(v,"")}return _baseTrim=S,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var _=require_baseTrim(),v=requireIsObject(),S=requireIsSymbol(),R=NaN,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,q=parseInt;function M(D){if(typeof D=="number")return D;if(S(D))return R;if(v(D)){var L=typeof D.valueOf=="function"?D.valueOf():D;D=v(L)?L+"":L}if(typeof D!="string")return D===0?D:+D;D=_(D);var I=A.test(D);return I||k.test(D)?q(D.slice(2),I?2:8):T.test(D)?R:+D}return toNumber_1=M,toNumber_1}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var _=requireToNumber(),v=1/0,S=17976931348623157e292;function R(T){if(!T)return T===0?T:0;if(T=_(T),T===v||T===-v){var A=T<0?-1:1;return A*S}return T===T?T:0}return toFinite_1=R,toFinite_1}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var _=requireToFinite();function v(S){var R=_(S),T=R%1;return R===R?T?R-T:R:0}return toInteger_1=v,toInteger_1}var findIndex_1,hasRequiredFindIndex;function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var _=require_baseFindIndex(),v=require_baseIteratee(),S=requireToInteger(),R=Math.max;function T(A,k,q){var M=A==null?0:A.length;if(!M)return-1;var D=q==null?0:S(q);return D<0&&(D=R(M+D,0)),_(A,v(k,3),D)}return findIndex_1=T,findIndex_1}var find_1,hasRequiredFind;function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var _=require_createFind(),v=requireFindIndex(),S=_(v);return find_1=S,find_1}var flatten_1,hasRequiredFlatten;function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var _=require_baseFlatten();function v(S){var R=S==null?0:S.length;return R?_(S,1):[]}return flatten_1=v,flatten_1}var forIn_1,hasRequiredForIn;function requireForIn(){if(hasRequiredForIn)return forIn_1;hasRequiredForIn=1;var _=require_baseFor(),v=require_castFunction(),S=requireKeysIn();function R(T,A){return T==null?T:_(T,v(A),S)}return forIn_1=R,forIn_1}var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function _(v){var S=v==null?0:v.length;return S?v[S-1]:void 0}return last_1=_,last_1}var mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var _=require_baseAssignValue(),v=require_baseForOwn(),S=require_baseIteratee();function R(T,A){var k={};return A=S(A,3),v(T,function(q,M,D){_(k,M,A(q,M,D))}),k}return mapValues_1=R,mapValues_1}var _baseExtremum,hasRequired_baseExtremum;function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var _=requireIsSymbol();function v(S,R,T){for(var A=-1,k=S.length;++A<k;){var q=S[A],M=R(q);if(M!=null&&(D===void 0?M===M&&!_(M):T(M,D)))var D=M,L=q}return L}return _baseExtremum=v,_baseExtremum}var _baseGt,hasRequired_baseGt;function require_baseGt(){if(hasRequired_baseGt)return _baseGt;hasRequired_baseGt=1;function _(v,S){return v>S}return _baseGt=_,_baseGt}var max_1,hasRequiredMax;function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var _=require_baseExtremum(),v=require_baseGt(),S=requireIdentity();function R(T){return T&&T.length?_(T,S,v):void 0}return max_1=R,max_1}var _assignMergeValue,hasRequired_assignMergeValue;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var _=require_baseAssignValue(),v=requireEq();function S(R,T,A){(A!==void 0&&!v(R[T],A)||A===void 0&&!(T in R))&&_(R,T,A)}return _assignMergeValue=S,_assignMergeValue}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var _=require_baseGetTag(),v=require_getPrototype(),S=requireIsObjectLike(),R="[object Object]",T=Function.prototype,A=Object.prototype,k=T.toString,q=A.hasOwnProperty,M=k.call(Object);function D(L){if(!S(L)||_(L)!=R)return!1;var I=v(L);if(I===null)return!0;var N=q.call(I,"constructor")&&I.constructor;return typeof N=="function"&&N instanceof N&&k.call(N)==M}return isPlainObject_1=D,isPlainObject_1}var _safeGet,hasRequired_safeGet;function require_safeGet(){if(hasRequired_safeGet)return _safeGet;hasRequired_safeGet=1;function _(v,S){if(!(S==="constructor"&&typeof v[S]=="function")&&S!="__proto__")return v[S]}return _safeGet=_,_safeGet}var toPlainObject_1,hasRequiredToPlainObject;function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var _=require_copyObject(),v=requireKeysIn();function S(R){return _(R,v(R))}return toPlainObject_1=S,toPlainObject_1}var _baseMergeDeep,hasRequired_baseMergeDeep;function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var _=require_assignMergeValue(),v=require_cloneBuffer(),S=require_cloneTypedArray(),R=require_copyArray(),T=require_initCloneObject(),A=requireIsArguments(),k=requireIsArray(),q=requireIsArrayLikeObject(),M=requireIsBuffer(),D=requireIsFunction(),L=requireIsObject(),I=requireIsPlainObject(),N=requireIsTypedArray(),F=require_safeGet(),H=requireToPlainObject();function G(V,j,W,X,J,te,re){var ee=F(V,W),ne=F(j,W),oe=re.get(ne);if(oe){_(V,W,oe);return}var ue=te?te(ee,ne,W+"",V,j,re):void 0,ce=ue===void 0;if(ce){var de=k(ne),pe=!de&&M(ne),_e=!de&&!pe&&N(ne);ue=ne,de||pe||_e?k(ee)?ue=ee:q(ee)?ue=R(ee):pe?(ce=!1,ue=v(ne,!0)):_e?(ce=!1,ue=S(ne,!0)):ue=[]:I(ne)||A(ne)?(ue=ee,A(ee)?ue=H(ee):(!L(ee)||D(ee))&&(ue=T(ne))):ce=!1}ce&&(re.set(ne,ue),J(ue,ne,X,te,re),re.delete(ne)),_(V,W,ue)}return _baseMergeDeep=G,_baseMergeDeep}var _baseMerge,hasRequired_baseMerge;function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var _=require_Stack(),v=require_assignMergeValue(),S=require_baseFor(),R=require_baseMergeDeep(),T=requireIsObject(),A=requireKeysIn(),k=require_safeGet();function q(M,D,L,I,N){M!==D&&S(D,function(F,H){if(N||(N=new _),T(F))R(M,D,H,L,q,I,N);else{var G=I?I(k(M,H),F,H+"",M,D,N):void 0;G===void 0&&(G=F),v(M,H,G)}},A)}return _baseMerge=q,_baseMerge}var _createAssigner,hasRequired_createAssigner;function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var _=require_baseRest(),v=require_isIterateeCall();function S(R){return _(function(T,A){var k=-1,q=A.length,M=q>1?A[q-1]:void 0,D=q>2?A[2]:void 0;for(M=R.length>3&&typeof M=="function"?(q--,M):void 0,D&&v(A[0],A[1],D)&&(M=q<3?void 0:M,q=1),T=Object(T);++k<q;){var L=A[k];L&&R(T,L,k,M)}return T})}return _createAssigner=S,_createAssigner}var merge_1,hasRequiredMerge;function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var _=require_baseMerge(),v=require_createAssigner(),S=v(function(R,T,A){_(R,T,A)});return merge_1=S,merge_1}var _baseLt,hasRequired_baseLt;function require_baseLt(){if(hasRequired_baseLt)return _baseLt;hasRequired_baseLt=1;function _(v,S){return v<S}return _baseLt=_,_baseLt}var min_1,hasRequiredMin;function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var _=require_baseExtremum(),v=require_baseLt(),S=requireIdentity();function R(T){return T&&T.length?_(T,S,v):void 0}return min_1=R,min_1}var minBy_1,hasRequiredMinBy;function requireMinBy(){if(hasRequiredMinBy)return minBy_1;hasRequiredMinBy=1;var _=require_baseExtremum(),v=require_baseIteratee(),S=require_baseLt();function R(T,A){return T&&T.length?_(T,v(A,2),S):void 0}return minBy_1=R,minBy_1}var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var _=require_root(),v=function(){return _.Date.now()};return now_1=v,now_1}var _baseSet,hasRequired_baseSet;function require_baseSet(){if(hasRequired_baseSet)return _baseSet;hasRequired_baseSet=1;var _=require_assignValue(),v=require_castPath(),S=require_isIndex(),R=requireIsObject(),T=require_toKey();function A(k,q,M,D){if(!R(k))return k;q=v(q,k);for(var L=-1,I=q.length,N=I-1,F=k;F!=null&&++L<I;){var H=T(q[L]),G=M;if(H==="__proto__"||H==="constructor"||H==="prototype")return k;if(L!=N){var V=F[H];G=D?D(V,H,F):void 0,G===void 0&&(G=R(V)?V:S(q[L+1])?[]:{})}_(F,H,G),F=F[H]}return k}return _baseSet=A,_baseSet}var _basePickBy,hasRequired_basePickBy;function require_basePickBy(){if(hasRequired_basePickBy)return _basePickBy;hasRequired_basePickBy=1;var _=require_baseGet(),v=require_baseSet(),S=require_castPath();function R(T,A,k){for(var q=-1,M=A.length,D={};++q<M;){var L=A[q],I=_(T,L);k(I,L)&&v(D,S(L,T),I)}return D}return _basePickBy=R,_basePickBy}var _basePick,hasRequired_basePick;function require_basePick(){if(hasRequired_basePick)return _basePick;hasRequired_basePick=1;var _=require_basePickBy(),v=requireHasIn();function S(R,T){return _(R,T,function(A,k){return v(R,k)})}return _basePick=S,_basePick}var _flatRest,hasRequired_flatRest;function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var _=requireFlatten(),v=require_overRest(),S=require_setToString();function R(T){return S(v(T,void 0,_),T+"")}return _flatRest=R,_flatRest}var pick_1,hasRequiredPick;function requirePick(){if(hasRequiredPick)return pick_1;hasRequiredPick=1;var _=require_basePick(),v=require_flatRest(),S=v(function(R,T){return R==null?{}:_(R,T)});return pick_1=S,pick_1}var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var _=Math.ceil,v=Math.max;function S(R,T,A,k){for(var q=-1,M=v(_((T-R)/(A||1)),0),D=Array(M);M--;)D[k?M:++q]=R,R+=A;return D}return _baseRange=S,_baseRange}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var _=require_baseRange(),v=require_isIterateeCall(),S=requireToFinite();function R(T){return function(A,k,q){return q&&typeof q!="number"&&v(A,k,q)&&(k=q=void 0),A=S(A),k===void 0?(k=A,A=0):k=S(k),q=q===void 0?A<k?1:-1:S(q),_(A,k,q,T)}}return _createRange=R,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var _=require_createRange(),v=_();return range_1=v,range_1}var _baseSortBy,hasRequired_baseSortBy;function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;hasRequired_baseSortBy=1;function _(v,S){var R=v.length;for(v.sort(S);R--;)v[R]=v[R].value;return v}return _baseSortBy=_,_baseSortBy}var _compareAscending,hasRequired_compareAscending;function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var _=requireIsSymbol();function v(S,R){if(S!==R){var T=S!==void 0,A=S===null,k=S===S,q=_(S),M=R!==void 0,D=R===null,L=R===R,I=_(R);if(!D&&!I&&!q&&S>R||q&&M&&L&&!D&&!I||A&&M&&L||!T&&L||!k)return 1;if(!A&&!q&&!I&&S<R||I&&T&&k&&!A&&!q||D&&T&&k||!M&&k||!L)return-1}return 0}return _compareAscending=v,_compareAscending}var _compareMultiple,hasRequired_compareMultiple;function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var _=require_compareAscending();function v(S,R,T){for(var A=-1,k=S.criteria,q=R.criteria,M=k.length,D=T.length;++A<M;){var L=_(k[A],q[A]);if(L){if(A>=D)return L;var I=T[A];return L*(I=="desc"?-1:1)}}return S.index-R.index}return _compareMultiple=v,_compareMultiple}var _baseOrderBy,hasRequired_baseOrderBy;function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var _=require_arrayMap(),v=require_baseGet(),S=require_baseIteratee(),R=require_baseMap(),T=require_baseSortBy(),A=require_baseUnary(),k=require_compareMultiple(),q=requireIdentity(),M=requireIsArray();function D(L,I,N){I.length?I=_(I,function(G){return M(G)?function(V){return v(V,G.length===1?G[0]:G)}:G}):I=[q];var F=-1;I=_(I,A(S));var H=R(L,function(G,V,j){var W=_(I,function(X){return X(G)});return{criteria:W,index:++F,value:G}});return T(H,function(G,V){return k(G,V,N)})}return _baseOrderBy=D,_baseOrderBy}var sortBy_1,hasRequiredSortBy;function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var _=require_baseFlatten(),v=require_baseOrderBy(),S=require_baseRest(),R=require_isIterateeCall(),T=S(function(A,k){if(A==null)return[];var q=k.length;return q>1&&R(A,k[0],k[1])?k=[]:q>2&&R(k[0],k[1],k[2])&&(k=[k[0]]),v(A,_(k,1),[])});return sortBy_1=T,sortBy_1}var uniqueId_1,hasRequiredUniqueId;function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var _=requireToString(),v=0;function S(R){var T=++v;return _(R)+T}return uniqueId_1=S,uniqueId_1}var _baseZipObject,hasRequired_baseZipObject;function require_baseZipObject(){if(hasRequired_baseZipObject)return _baseZipObject;hasRequired_baseZipObject=1;function _(v,S,R){for(var T=-1,A=v.length,k=S.length,q={};++T<A;){var M=T<k?S[T]:void 0;R(q,v[T],M)}return q}return _baseZipObject=_,_baseZipObject}var zipObject_1,hasRequiredZipObject;function requireZipObject(){if(hasRequiredZipObject)return zipObject_1;hasRequiredZipObject=1;var _=require_assignValue(),v=require_baseZipObject();function S(R,T){return v(R||[],T||[],_)}return zipObject_1=S,zipObject_1}var lodash_1,hasRequiredLodash;function requireLodash(){if(hasRequiredLodash)return lodash_1;hasRequiredLodash=1;var _;if(typeof commonjsRequire=="function")try{_={cloneDeep:requireCloneDeep(),constant:requireConstant(),defaults:requireDefaults(),each:requireEach(),filter:requireFilter(),find:requireFind(),flatten:requireFlatten(),forEach:requireForEach(),forIn:requireForIn(),has:requireHas(),isUndefined:requireIsUndefined(),last:requireLast(),map:requireMap(),mapValues:requireMapValues(),max:requireMax(),merge:requireMerge(),min:requireMin(),minBy:requireMinBy(),now:requireNow(),pick:requirePick(),range:requireRange(),reduce:requireReduce(),sortBy:requireSortBy(),uniqueId:requireUniqueId(),values:requireValues(),zipObject:requireZipObject()}}catch{}return _||(_=window._),lodash_1=_,lodash_1}var list,hasRequiredList;function requireList(){if(hasRequiredList)return list;hasRequiredList=1,list=_;function _(){var R={};R._next=R._prev=R,this._sentinel=R}_.prototype.dequeue=function(){var R=this._sentinel,T=R._prev;if(T!==R)return v(T),T},_.prototype.enqueue=function(R){var T=this._sentinel;R._prev&&R._next&&v(R),R._next=T._next,T._next._prev=R,T._next=R,R._prev=T},_.prototype.toString=function(){for(var R=[],T=this._sentinel,A=T._prev;A!==T;)R.push(JSON.stringify(A,S)),A=A._prev;return"["+R.join(", ")+"]"};function v(R){R._prev._next=R._next,R._next._prev=R._prev,delete R._next,delete R._prev}function S(R,T){if(R!=="_next"&&R!=="_prev")return T}return list}var greedyFas,hasRequiredGreedyFas;function requireGreedyFas(){if(hasRequiredGreedyFas)return greedyFas;hasRequiredGreedyFas=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireList();greedyFas=T;var R=_.constant(1);function T(D,L){if(D.nodeCount()<=1)return[];var I=q(D,L||R),N=A(I.graph,I.buckets,I.zeroIdx);return _.flatten(_.map(N,function(F){return D.outEdges(F.v,F.w)}),!0)}function A(D,L,I){for(var N=[],F=L[L.length-1],H=L[0],G;D.nodeCount();){for(;G=H.dequeue();)k(D,L,I,G);for(;G=F.dequeue();)k(D,L,I,G);if(D.nodeCount()){for(var V=L.length-2;V>0;--V)if(G=L[V].dequeue(),G){N=N.concat(k(D,L,I,G,!0));break}}}return N}function k(D,L,I,N,F){var H=F?[]:void 0;return _.forEach(D.inEdges(N.v),function(G){var V=D.edge(G),j=D.node(G.v);F&&H.push({v:G.v,w:G.w}),j.out-=V,M(L,I,j)}),_.forEach(D.outEdges(N.v),function(G){var V=D.edge(G),j=G.w,W=D.node(j);W.in-=V,M(L,I,W)}),D.removeNode(N.v),H}function q(D,L){var I=new v,N=0,F=0;_.forEach(D.nodes(),function(V){I.setNode(V,{v:V,in:0,out:0})}),_.forEach(D.edges(),function(V){var j=I.edge(V.v,V.w)||0,W=L(V),X=j+W;I.setEdge(V.v,V.w,X),F=Math.max(F,I.node(V.v).out+=W),N=Math.max(N,I.node(V.w).in+=W)});var H=_.range(F+N+3).map(function(){return new S}),G=N+1;return _.forEach(I.nodes(),function(V){M(H,G,I.node(V))}),{graph:I,buckets:H,zeroIdx:G}}function M(D,L,I){I.out?I.in?D[I.out-I.in+L].enqueue(I):D[D.length-1].enqueue(I):D[0].enqueue(I)}return greedyFas}var acyclic,hasRequiredAcyclic;function requireAcyclic(){if(hasRequiredAcyclic)return acyclic;hasRequiredAcyclic=1;var _=requireLodash(),v=requireGreedyFas();acyclic={run:S,undo:T};function S(A){var k=A.graph().acyclicer==="greedy"?v(A,q(A)):R(A);_.forEach(k,function(M){var D=A.edge(M);A.removeEdge(M),D.forwardName=M.name,D.reversed=!0,A.setEdge(M.w,M.v,D,_.uniqueId("rev"))});function q(M){return function(D){return M.edge(D).weight}}}function R(A){var k=[],q={},M={};function D(L){_.has(M,L)||(M[L]=!0,q[L]=!0,_.forEach(A.outEdges(L),function(I){_.has(q,I.w)?k.push(I):D(I.w)}),delete q[L])}return _.forEach(A.nodes(),D),k}function T(A){_.forEach(A.edges(),function(k){var q=A.edge(k);if(q.reversed){A.removeEdge(k);var M=q.forwardName;delete q.reversed,delete q.forwardName,A.setEdge(k.w,k.v,q,M)}})}return acyclic}var util$1,hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;var _=requireLodash(),v=requireGraphlib().Graph;util$1={addDummyNode:S,simplify:R,asNonCompoundGraph:T,successorWeights:A,predecessorWeights:k,intersectRect:q,buildLayerMatrix:M,normalizeRanks:D,removeEmptyRanks:L,addBorderNode:I,maxRank:N,partition:F,time:H,notime:G};function S(V,j,W,X){var J;do J=_.uniqueId(X);while(V.hasNode(J));return W.dummy=j,V.setNode(J,W),J}function R(V){var j=new v().setGraph(V.graph());return _.forEach(V.nodes(),function(W){j.setNode(W,V.node(W))}),_.forEach(V.edges(),function(W){var X=j.edge(W.v,W.w)||{weight:0,minlen:1},J=V.edge(W);j.setEdge(W.v,W.w,{weight:X.weight+J.weight,minlen:Math.max(X.minlen,J.minlen)})}),j}function T(V){var j=new v({multigraph:V.isMultigraph()}).setGraph(V.graph());return _.forEach(V.nodes(),function(W){V.children(W).length||j.setNode(W,V.node(W))}),_.forEach(V.edges(),function(W){j.setEdge(W,V.edge(W))}),j}function A(V){var j=_.map(V.nodes(),function(W){var X={};return _.forEach(V.outEdges(W),function(J){X[J.w]=(X[J.w]||0)+V.edge(J).weight}),X});return _.zipObject(V.nodes(),j)}function k(V){var j=_.map(V.nodes(),function(W){var X={};return _.forEach(V.inEdges(W),function(J){X[J.v]=(X[J.v]||0)+V.edge(J).weight}),X});return _.zipObject(V.nodes(),j)}function q(V,j){var W=V.x,X=V.y,J=j.x-W,te=j.y-X,re=V.width/2,ee=V.height/2;if(!J&&!te)throw new Error("Not possible to find intersection inside of the rectangle");var ne,oe;return Math.abs(te)*re>Math.abs(J)*ee?(te<0&&(ee=-ee),ne=ee*J/te,oe=ee):(J<0&&(re=-re),ne=re,oe=re*te/J),{x:W+ne,y:X+oe}}function M(V){var j=_.map(_.range(N(V)+1),function(){return[]});return _.forEach(V.nodes(),function(W){var X=V.node(W),J=X.rank;_.isUndefined(J)||(j[J][X.order]=W)}),j}function D(V){var j=_.min(_.map(V.nodes(),function(W){return V.node(W).rank}));_.forEach(V.nodes(),function(W){var X=V.node(W);_.has(X,"rank")&&(X.rank-=j)})}function L(V){var j=_.min(_.map(V.nodes(),function(te){return V.node(te).rank})),W=[];_.forEach(V.nodes(),function(te){var re=V.node(te).rank-j;W[re]||(W[re]=[]),W[re].push(te)});var X=0,J=V.graph().nodeRankFactor;_.forEach(W,function(te,re){_.isUndefined(te)&&re%J!==0?--X:X&&_.forEach(te,function(ee){V.node(ee).rank+=X})})}function I(V,j,W,X){var J={width:0,height:0};return arguments.length>=4&&(J.rank=W,J.order=X),S(V,"border",J,j)}function N(V){return _.max(_.map(V.nodes(),function(j){var W=V.node(j).rank;if(!_.isUndefined(W))return W}))}function F(V,j){var W={lhs:[],rhs:[]};return _.forEach(V,function(X){j(X)?W.lhs.push(X):W.rhs.push(X)}),W}function H(V,j){var W=_.now();try{return j()}finally{console.log(V+" time: "+(_.now()-W)+"ms")}}function G(V,j){return j()}return util$1}var normalize,hasRequiredNormalize;function requireNormalize(){if(hasRequiredNormalize)return normalize;hasRequiredNormalize=1;var _=requireLodash(),v=requireUtil$1();normalize={run:S,undo:T};function S(A){A.graph().dummyChains=[],_.forEach(A.edges(),function(k){R(A,k)})}function R(A,k){var q=k.v,M=A.node(q).rank,D=k.w,L=A.node(D).rank,I=k.name,N=A.edge(k),F=N.labelRank;if(L!==M+1){A.removeEdge(k);var H,G,V;for(V=0,++M;M<L;++V,++M)N.points=[],G={width:0,height:0,edgeLabel:N,edgeObj:k,rank:M},H=v.addDummyNode(A,"edge",G,"_d"),M===F&&(G.width=N.width,G.height=N.height,G.dummy="edge-label",G.labelpos=N.labelpos),A.setEdge(q,H,{weight:N.weight},I),V===0&&A.graph().dummyChains.push(H),q=H;A.setEdge(q,D,{weight:N.weight},I)}}function T(A){_.forEach(A.graph().dummyChains,function(k){var q=A.node(k),M=q.edgeLabel,D;for(A.setEdge(q.edgeObj,M);q.dummy;)D=A.successors(k)[0],A.removeNode(k),M.points.push({x:q.x,y:q.y}),q.dummy==="edge-label"&&(M.x=q.x,M.y=q.y,M.width=q.width,M.height=q.height),k=D,q=A.node(k)})}return normalize}var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var _=requireLodash();util={longestPath:v,slack:S};function v(R){var T={};function A(k){var q=R.node(k);if(_.has(T,k))return q.rank;T[k]=!0;var M=_.min(_.map(R.outEdges(k),function(D){return A(D.w)-R.edge(D).minlen}));return(M===Number.POSITIVE_INFINITY||M===void 0||M===null)&&(M=0),q.rank=M}_.forEach(R.sources(),A)}function S(R,T){return R.node(T.w).rank-R.node(T.v).rank-R.edge(T).minlen}return util}var feasibleTree_1,hasRequiredFeasibleTree;function requireFeasibleTree(){if(hasRequiredFeasibleTree)return feasibleTree_1;hasRequiredFeasibleTree=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireUtil().slack;feasibleTree_1=R;function R(q){var M=new v({directed:!1}),D=q.nodes()[0],L=q.nodeCount();M.setNode(D,{});for(var I,N;T(M,q)<L;)I=A(M,q),N=M.hasNode(I.v)?S(q,I):-S(q,I),k(M,q,N);return M}function T(q,M){function D(L){_.forEach(M.nodeEdges(L),function(I){var N=I.v,F=L===N?I.w:N;!q.hasNode(F)&&!S(M,I)&&(q.setNode(F,{}),q.setEdge(L,F,{}),D(F))})}return _.forEach(q.nodes(),D),q.nodeCount()}function A(q,M){return _.minBy(M.edges(),function(D){if(q.hasNode(D.v)!==q.hasNode(D.w))return S(M,D)})}function k(q,M,D){_.forEach(q.nodes(),function(L){M.node(L).rank+=D})}return feasibleTree_1}var networkSimplex_1,hasRequiredNetworkSimplex;function requireNetworkSimplex(){if(hasRequiredNetworkSimplex)return networkSimplex_1;hasRequiredNetworkSimplex=1;var _=requireLodash(),v=requireFeasibleTree(),S=requireUtil().slack,R=requireUtil().longestPath,T=requireGraphlib().alg.preorder,A=requireGraphlib().alg.postorder,k=requireUtil$1().simplify;networkSimplex_1=q,q.initLowLimValues=I,q.initCutValues=M,q.calcCutValue=L,q.leaveEdge=F,q.enterEdge=H,q.exchangeEdges=G;function q(X){X=k(X),R(X);var J=v(X);I(J),M(J,X);for(var te,re;te=F(J);)re=H(J,X,te),G(J,X,te,re)}function M(X,J){var te=A(X,X.nodes());te=te.slice(0,te.length-1),_.forEach(te,function(re){D(X,J,re)})}function D(X,J,te){var re=X.node(te),ee=re.parent;X.edge(te,ee).cutvalue=L(X,J,te)}function L(X,J,te){var re=X.node(te),ee=re.parent,ne=!0,oe=J.edge(te,ee),ue=0;return oe||(ne=!1,oe=J.edge(ee,te)),ue=oe.weight,_.forEach(J.nodeEdges(te),function(ce){var de=ce.v===te,pe=de?ce.w:ce.v;if(pe!==ee){var _e=de===ne,Ee=J.edge(ce).weight;if(ue+=_e?Ee:-Ee,j(X,te,pe)){var ge=X.edge(te,pe).cutvalue;ue+=_e?-ge:ge}}}),ue}function I(X,J){arguments.length<2&&(J=X.nodes()[0]),N(X,{},1,J)}function N(X,J,te,re,ee){var ne=te,oe=X.node(re);return J[re]=!0,_.forEach(X.neighbors(re),function(ue){_.has(J,ue)||(te=N(X,J,te,ue,re))}),oe.low=ne,oe.lim=te++,ee?oe.parent=ee:delete oe.parent,te}function F(X){return _.find(X.edges(),function(J){return X.edge(J).cutvalue<0})}function H(X,J,te){var re=te.v,ee=te.w;J.hasEdge(re,ee)||(re=te.w,ee=te.v);var ne=X.node(re),oe=X.node(ee),ue=ne,ce=!1;ne.lim>oe.lim&&(ue=oe,ce=!0);var de=_.filter(J.edges(),function(pe){return ce===W(X,X.node(pe.v),ue)&&ce!==W(X,X.node(pe.w),ue)});return _.minBy(de,function(pe){return S(J,pe)})}function G(X,J,te,re){var ee=te.v,ne=te.w;X.removeEdge(ee,ne),X.setEdge(re.v,re.w,{}),I(X),M(X,J),V(X,J)}function V(X,J){var te=_.find(X.nodes(),function(ee){return!J.node(ee).parent}),re=T(X,te);re=re.slice(1),_.forEach(re,function(ee){var ne=X.node(ee).parent,oe=J.edge(ee,ne),ue=!1;oe||(oe=J.edge(ne,ee),ue=!0),J.node(ee).rank=J.node(ne).rank+(ue?oe.minlen:-oe.minlen)})}function j(X,J,te){return X.hasEdge(J,te)}function W(X,J,te){return te.low<=J.lim&&J.lim<=te.lim}return networkSimplex_1}var rank_1,hasRequiredRank;function requireRank(){if(hasRequiredRank)return rank_1;hasRequiredRank=1;var _=requireUtil(),v=_.longestPath,S=requireFeasibleTree(),R=requireNetworkSimplex();rank_1=T;function T(M){switch(M.graph().ranker){case"network-simplex":q(M);break;case"tight-tree":k(M);break;case"longest-path":A(M);break;default:q(M)}}var A=v;function k(M){v(M),S(M)}function q(M){R(M)}return rank_1}var parentDummyChains_1,hasRequiredParentDummyChains;function requireParentDummyChains(){if(hasRequiredParentDummyChains)return parentDummyChains_1;hasRequiredParentDummyChains=1;var _=requireLodash();parentDummyChains_1=v;function v(T){var A=R(T);_.forEach(T.graph().dummyChains,function(k){for(var q=T.node(k),M=q.edgeObj,D=S(T,A,M.v,M.w),L=D.path,I=D.lca,N=0,F=L[N],H=!0;k!==M.w;){if(q=T.node(k),H){for(;(F=L[N])!==I&&T.node(F).maxRank<q.rank;)N++;F===I&&(H=!1)}if(!H){for(;N<L.length-1&&T.node(F=L[N+1]).minRank<=q.rank;)N++;F=L[N]}T.setParent(k,F),k=T.successors(k)[0]}})}function S(T,A,k,q){var M=[],D=[],L=Math.min(A[k].low,A[q].low),I=Math.max(A[k].lim,A[q].lim),N,F;N=k;do N=T.parent(N),M.push(N);while(N&&(A[N].low>L||I>A[N].lim));for(F=N,N=q;(N=T.parent(N))!==F;)D.push(N);return{path:M.concat(D.reverse()),lca:F}}function R(T){var A={},k=0;function q(M){var D=k;_.forEach(T.children(M),q),A[M]={low:D,lim:k++}}return _.forEach(T.children(),q),A}return parentDummyChains_1}var nestingGraph,hasRequiredNestingGraph;function requireNestingGraph(){if(hasRequiredNestingGraph)return nestingGraph;hasRequiredNestingGraph=1;var _=requireLodash(),v=requireUtil$1();nestingGraph={run:S,cleanup:k};function S(q){var M=v.addDummyNode(q,"root",{},"_root"),D=T(q),L=_.max(_.values(D))-1,I=2*L+1;q.graph().nestingRoot=M,_.forEach(q.edges(),function(F){q.edge(F).minlen*=I});var N=A(q)+1;_.forEach(q.children(),function(F){R(q,M,I,N,L,D,F)}),q.graph().nodeRankFactor=I}function R(q,M,D,L,I,N,F){var H=q.children(F);if(!H.length){F!==M&&q.setEdge(M,F,{weight:0,minlen:D});return}var G=v.addBorderNode(q,"_bt"),V=v.addBorderNode(q,"_bb"),j=q.node(F);q.setParent(G,F),j.borderTop=G,q.setParent(V,F),j.borderBottom=V,_.forEach(H,function(W){R(q,M,D,L,I,N,W);var X=q.node(W),J=X.borderTop?X.borderTop:W,te=X.borderBottom?X.borderBottom:W,re=X.borderTop?L:2*L,ee=J!==te?1:I-N[F]+1;q.setEdge(G,J,{weight:re,minlen:ee,nestingEdge:!0}),q.setEdge(te,V,{weight:re,minlen:ee,nestingEdge:!0})}),q.parent(F)||q.setEdge(M,G,{weight:0,minlen:I+N[F]})}function T(q){var M={};function D(L,I){var N=q.children(L);N&&N.length&&_.forEach(N,function(F){D(F,I+1)}),M[L]=I}return _.forEach(q.children(),function(L){D(L,1)}),M}function A(q){return _.reduce(q.edges(),function(M,D){return M+q.edge(D).weight},0)}function k(q){var M=q.graph();q.removeNode(M.nestingRoot),delete M.nestingRoot,_.forEach(q.edges(),function(D){var L=q.edge(D);L.nestingEdge&&q.removeEdge(D)})}return nestingGraph}var addBorderSegments_1,hasRequiredAddBorderSegments;function requireAddBorderSegments(){if(hasRequiredAddBorderSegments)return addBorderSegments_1;hasRequiredAddBorderSegments=1;var _=requireLodash(),v=requireUtil$1();addBorderSegments_1=S;function S(T){function A(k){var q=T.children(k),M=T.node(k);if(q.length&&_.forEach(q,A),_.has(M,"minRank")){M.borderLeft=[],M.borderRight=[];for(var D=M.minRank,L=M.maxRank+1;D<L;++D)R(T,"borderLeft","_bl",k,M,D),R(T,"borderRight","_br",k,M,D)}}_.forEach(T.children(),A)}function R(T,A,k,q,M,D){var L={width:0,height:0,rank:D,borderType:A},I=M[A][D-1],N=v.addDummyNode(T,"border",L,k);M[A][D]=N,T.setParent(N,q),I&&T.setEdge(I,N,{weight:1})}return addBorderSegments_1}var coordinateSystem,hasRequiredCoordinateSystem;function requireCoordinateSystem(){if(hasRequiredCoordinateSystem)return coordinateSystem;hasRequiredCoordinateSystem=1;var _=requireLodash();coordinateSystem={adjust:v,undo:S};function v(D){var L=D.graph().rankdir.toLowerCase();(L==="lr"||L==="rl")&&R(D)}function S(D){var L=D.graph().rankdir.toLowerCase();(L==="bt"||L==="rl")&&A(D),(L==="lr"||L==="rl")&&(q(D),R(D))}function R(D){_.forEach(D.nodes(),function(L){T(D.node(L))}),_.forEach(D.edges(),function(L){T(D.edge(L))})}function T(D){var L=D.width;D.width=D.height,D.height=L}function A(D){_.forEach(D.nodes(),function(L){k(D.node(L))}),_.forEach(D.edges(),function(L){var I=D.edge(L);_.forEach(I.points,k),_.has(I,"y")&&k(I)})}function k(D){D.y=-D.y}function q(D){_.forEach(D.nodes(),function(L){M(D.node(L))}),_.forEach(D.edges(),function(L){var I=D.edge(L);_.forEach(I.points,M),_.has(I,"x")&&M(I)})}function M(D){var L=D.x;D.x=D.y,D.y=L}return coordinateSystem}var initOrder_1,hasRequiredInitOrder;function requireInitOrder(){if(hasRequiredInitOrder)return initOrder_1;hasRequiredInitOrder=1;var _=requireLodash();initOrder_1=v;function v(S){var R={},T=_.filter(S.nodes(),function(D){return!S.children(D).length}),A=_.max(_.map(T,function(D){return S.node(D).rank})),k=_.map(_.range(A+1),function(){return[]});function q(D){if(!_.has(R,D)){R[D]=!0;var L=S.node(D);k[L.rank].push(D),_.forEach(S.successors(D),q)}}var M=_.sortBy(T,function(D){return S.node(D).rank});return _.forEach(M,q),k}return initOrder_1}var crossCount_1,hasRequiredCrossCount;function requireCrossCount(){if(hasRequiredCrossCount)return crossCount_1;hasRequiredCrossCount=1;var _=requireLodash();crossCount_1=v;function v(R,T){for(var A=0,k=1;k<T.length;++k)A+=S(R,T[k-1],T[k]);return A}function S(R,T,A){for(var k=_.zipObject(A,_.map(A,function(N,F){return F})),q=_.flatten(_.map(T,function(N){return _.sortBy(_.map(R.outEdges(N),function(F){return{pos:k[F.w],weight:R.edge(F).weight}}),"pos")}),!0),M=1;M<A.length;)M<<=1;var D=2*M-1;M-=1;var L=_.map(new Array(D),function(){return 0}),I=0;return _.forEach(q.forEach(function(N){var F=N.pos+M;L[F]+=N.weight;for(var H=0;F>0;)F%2&&(H+=L[F+1]),F=F-1>>1,L[F]+=N.weight;I+=N.weight*H})),I}return crossCount_1}var barycenter_1,hasRequiredBarycenter;function requireBarycenter(){if(hasRequiredBarycenter)return barycenter_1;hasRequiredBarycenter=1;var _=requireLodash();barycenter_1=v;function v(S,R){return _.map(R,function(T){var A=S.inEdges(T);if(A.length){var k=_.reduce(A,function(q,M){var D=S.edge(M),L=S.node(M.v);return{sum:q.sum+D.weight*L.order,weight:q.weight+D.weight}},{sum:0,weight:0});return{v:T,barycenter:k.sum/k.weight,weight:k.weight}}else return{v:T}})}return barycenter_1}var resolveConflicts_1,hasRequiredResolveConflicts;function requireResolveConflicts(){if(hasRequiredResolveConflicts)return resolveConflicts_1;hasRequiredResolveConflicts=1;var _=requireLodash();resolveConflicts_1=v;function v(T,A){var k={};_.forEach(T,function(M,D){var L=k[M.v]={indegree:0,in:[],out:[],vs:[M.v],i:D};_.isUndefined(M.barycenter)||(L.barycenter=M.barycenter,L.weight=M.weight)}),_.forEach(A.edges(),function(M){var D=k[M.v],L=k[M.w];!_.isUndefined(D)&&!_.isUndefined(L)&&(L.indegree++,D.out.push(k[M.w]))});var q=_.filter(k,function(M){return!M.indegree});return S(q)}function S(T){var A=[];function k(D){return function(L){L.merged||(_.isUndefined(L.barycenter)||_.isUndefined(D.barycenter)||L.barycenter>=D.barycenter)&&R(D,L)}}function q(D){return function(L){L.in.push(D),--L.indegree===0&&T.push(L)}}for(;T.length;){var M=T.pop();A.push(M),_.forEach(M.in.reverse(),k(M)),_.forEach(M.out,q(M))}return _.map(_.filter(A,function(D){return!D.merged}),function(D){return _.pick(D,["vs","i","barycenter","weight"])})}function R(T,A){var k=0,q=0;T.weight&&(k+=T.barycenter*T.weight,q+=T.weight),A.weight&&(k+=A.barycenter*A.weight,q+=A.weight),T.vs=A.vs.concat(T.vs),T.barycenter=k/q,T.weight=q,T.i=Math.min(A.i,T.i),A.merged=!0}return resolveConflicts_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;var _=requireLodash(),v=requireUtil$1();sort_1=S;function S(A,k){var q=v.partition(A,function(G){return _.has(G,"barycenter")}),M=q.lhs,D=_.sortBy(q.rhs,function(G){return-G.i}),L=[],I=0,N=0,F=0;M.sort(T(!!k)),F=R(L,D,F),_.forEach(M,function(G){F+=G.vs.length,L.push(G.vs),I+=G.barycenter*G.weight,N+=G.weight,F=R(L,D,F)});var H={vs:_.flatten(L,!0)};return N&&(H.barycenter=I/N,H.weight=N),H}function R(A,k,q){for(var M;k.length&&(M=_.last(k)).i<=q;)k.pop(),A.push(M.vs),q++;return q}function T(A){return function(k,q){return k.barycenter<q.barycenter?-1:k.barycenter>q.barycenter?1:A?q.i-k.i:k.i-q.i}}return sort_1}var sortSubgraph_1,hasRequiredSortSubgraph;function requireSortSubgraph(){if(hasRequiredSortSubgraph)return sortSubgraph_1;hasRequiredSortSubgraph=1;var _=requireLodash(),v=requireBarycenter(),S=requireResolveConflicts(),R=requireSort();sortSubgraph_1=T;function T(q,M,D,L){var I=q.children(M),N=q.node(M),F=N?N.borderLeft:void 0,H=N?N.borderRight:void 0,G={};F&&(I=_.filter(I,function(te){return te!==F&&te!==H}));var V=v(q,I);_.forEach(V,function(te){if(q.children(te.v).length){var re=T(q,te.v,D,L);G[te.v]=re,_.has(re,"barycenter")&&k(te,re)}});var j=S(V,D);A(j,G);var W=R(j,L);if(F&&(W.vs=_.flatten([F,W.vs,H],!0),q.predecessors(F).length)){var X=q.node(q.predecessors(F)[0]),J=q.node(q.predecessors(H)[0]);_.has(W,"barycenter")||(W.barycenter=0,W.weight=0),W.barycenter=(W.barycenter*W.weight+X.order+J.order)/(W.weight+2),W.weight+=2}return W}function A(q,M){_.forEach(q,function(D){D.vs=_.flatten(D.vs.map(function(L){return M[L]?M[L].vs:L}),!0)})}function k(q,M){_.isUndefined(q.barycenter)?(q.barycenter=M.barycenter,q.weight=M.weight):(q.barycenter=(q.barycenter*q.weight+M.barycenter*M.weight)/(q.weight+M.weight),q.weight+=M.weight)}return sortSubgraph_1}var buildLayerGraph_1,hasRequiredBuildLayerGraph;function requireBuildLayerGraph(){if(hasRequiredBuildLayerGraph)return buildLayerGraph_1;hasRequiredBuildLayerGraph=1;var _=requireLodash(),v=requireGraphlib().Graph;buildLayerGraph_1=S;function S(T,A,k){var q=R(T),M=new v({compound:!0}).setGraph({root:q}).setDefaultNodeLabel(function(D){return T.node(D)});return _.forEach(T.nodes(),function(D){var L=T.node(D),I=T.parent(D);(L.rank===A||L.minRank<=A&&A<=L.maxRank)&&(M.setNode(D),M.setParent(D,I||q),_.forEach(T[k](D),function(N){var F=N.v===D?N.w:N.v,H=M.edge(F,D),G=_.isUndefined(H)?0:H.weight;M.setEdge(F,D,{weight:T.edge(N).weight+G})}),_.has(L,"minRank")&&M.setNode(D,{borderLeft:L.borderLeft[A],borderRight:L.borderRight[A]}))}),M}function R(T){for(var A;T.hasNode(A=_.uniqueId("_root")););return A}return buildLayerGraph_1}var addSubgraphConstraints_1,hasRequiredAddSubgraphConstraints;function requireAddSubgraphConstraints(){if(hasRequiredAddSubgraphConstraints)return addSubgraphConstraints_1;hasRequiredAddSubgraphConstraints=1;var _=requireLodash();addSubgraphConstraints_1=v;function v(S,R,T){var A={},k;_.forEach(T,function(q){for(var M=S.parent(q),D,L;M;){if(D=S.parent(M),D?(L=A[D],A[D]=M):(L=k,k=M),L&&L!==M){R.setEdge(L,M);return}M=D}})}return addSubgraphConstraints_1}var order_1,hasRequiredOrder;function requireOrder(){if(hasRequiredOrder)return order_1;hasRequiredOrder=1;var _=requireLodash(),v=requireInitOrder(),S=requireCrossCount(),R=requireSortSubgraph(),T=requireBuildLayerGraph(),A=requireAddSubgraphConstraints(),k=requireGraphlib().Graph,q=requireUtil$1();order_1=M;function M(N){var F=q.maxRank(N),H=D(N,_.range(1,F+1),"inEdges"),G=D(N,_.range(F-1,-1,-1),"outEdges"),V=v(N);I(N,V);for(var j=Number.POSITIVE_INFINITY,W,X=0,J=0;J<4;++X,++J){L(X%2?H:G,X%4>=2),V=q.buildLayerMatrix(N);var te=S(N,V);te<j&&(J=0,W=_.cloneDeep(V),j=te)}I(N,W)}function D(N,F,H){return _.map(F,function(G){return T(N,G,H)})}function L(N,F){var H=new k;_.forEach(N,function(G){var V=G.graph().root,j=R(G,V,H,F);_.forEach(j.vs,function(W,X){G.node(W).order=X}),A(G,H,j.vs)})}function I(N,F){_.forEach(F,function(H){_.forEach(H,function(G,V){N.node(G).order=V})})}return order_1}var bk,hasRequiredBk;function requireBk(){if(hasRequiredBk)return bk;hasRequiredBk=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireUtil$1();bk={positionX:H,findType1Conflicts:R,findType2Conflicts:T,addConflict:k,hasConflict:q,verticalAlignment:M,horizontalCompaction:D,alignCoordinates:N,findSmallestWidthAlignment:I,balance:F};function R(j,W){var X={};function J(te,re){var ee=0,ne=0,oe=te.length,ue=_.last(re);return _.forEach(re,function(ce,de){var pe=A(j,ce),_e=pe?j.node(pe).order:oe;(pe||ce===ue)&&(_.forEach(re.slice(ne,de+1),function(Ee){_.forEach(j.predecessors(Ee),function(ge){var be=j.node(ge),Ae=be.order;(Ae<ee||_e<Ae)&&!(be.dummy&&j.node(Ee).dummy)&&k(X,ge,Ee)})}),ne=de+1,ee=_e)}),re}return _.reduce(W,J),X}function T(j,W){var X={};function J(re,ee,ne,oe,ue){var ce;_.forEach(_.range(ee,ne),function(de){ce=re[de],j.node(ce).dummy&&_.forEach(j.predecessors(ce),function(pe){var _e=j.node(pe);_e.dummy&&(_e.order<oe||_e.order>ue)&&k(X,pe,ce)})})}function te(re,ee){var ne=-1,oe,ue=0;return _.forEach(ee,function(ce,de){if(j.node(ce).dummy==="border"){var pe=j.predecessors(ce);pe.length&&(oe=j.node(pe[0]).order,J(ee,ue,de,ne,oe),ue=de,ne=oe)}J(ee,ue,ee.length,oe,re.length)}),ee}return _.reduce(W,te),X}function A(j,W){if(j.node(W).dummy)return _.find(j.predecessors(W),function(X){return j.node(X).dummy})}function k(j,W,X){if(W>X){var J=W;W=X,X=J}var te=j[W];te||(j[W]=te={}),te[X]=!0}function q(j,W,X){if(W>X){var J=W;W=X,X=J}return _.has(j[W],X)}function M(j,W,X,J){var te={},re={},ee={};return _.forEach(W,function(ne){_.forEach(ne,function(oe,ue){te[oe]=oe,re[oe]=oe,ee[oe]=ue})}),_.forEach(W,function(ne){var oe=-1;_.forEach(ne,function(ue){var ce=J(ue);if(ce.length){ce=_.sortBy(ce,function(ge){return ee[ge]});for(var de=(ce.length-1)/2,pe=Math.floor(de),_e=Math.ceil(de);pe<=_e;++pe){var Ee=ce[pe];re[ue]===ue&&oe<ee[Ee]&&!q(X,ue,Ee)&&(re[Ee]=ue,re[ue]=te[ue]=te[Ee],oe=ee[Ee])}}})}),{root:te,align:re}}function D(j,W,X,J,te){var re={},ee=L(j,W,X,te),ne=te?"borderLeft":"borderRight";function oe(de,pe){for(var _e=ee.nodes(),Ee=_e.pop(),ge={};Ee;)ge[Ee]?de(Ee):(ge[Ee]=!0,_e.push(Ee),_e=_e.concat(pe(Ee))),Ee=_e.pop()}function ue(de){re[de]=ee.inEdges(de).reduce(function(pe,_e){return Math.max(pe,re[_e.v]+ee.edge(_e))},0)}function ce(de){var pe=ee.outEdges(de).reduce(function(Ee,ge){return Math.min(Ee,re[ge.w]-ee.edge(ge))},Number.POSITIVE_INFINITY),_e=j.node(de);pe!==Number.POSITIVE_INFINITY&&_e.borderType!==ne&&(re[de]=Math.max(re[de],pe))}return oe(ue,ee.predecessors.bind(ee)),oe(ce,ee.successors.bind(ee)),_.forEach(J,function(de){re[de]=re[X[de]]}),re}function L(j,W,X,J){var te=new v,re=j.graph(),ee=G(re.nodesep,re.edgesep,J);return _.forEach(W,function(ne){var oe;_.forEach(ne,function(ue){var ce=X[ue];if(te.setNode(ce),oe){var de=X[oe],pe=te.edge(de,ce);te.setEdge(de,ce,Math.max(ee(j,ue,oe),pe||0))}oe=ue})}),te}function I(j,W){return _.minBy(_.values(W),function(X){var J=Number.NEGATIVE_INFINITY,te=Number.POSITIVE_INFINITY;return _.forIn(X,function(re,ee){var ne=V(j,ee)/2;J=Math.max(re+ne,J),te=Math.min(re-ne,te)}),J-te})}function N(j,W){var X=_.values(W),J=_.min(X),te=_.max(X);_.forEach(["u","d"],function(re){_.forEach(["l","r"],function(ee){var ne=re+ee,oe=j[ne],ue;if(oe!==W){var ce=_.values(oe);ue=ee==="l"?J-_.min(ce):te-_.max(ce),ue&&(j[ne]=_.mapValues(oe,function(de){return de+ue}))}})})}function F(j,W){return _.mapValues(j.ul,function(X,J){if(W)return j[W.toLowerCase()][J];var te=_.sortBy(_.map(j,J));return(te[1]+te[2])/2})}function H(j){var W=S.buildLayerMatrix(j),X=_.merge(R(j,W),T(j,W)),J={},te;_.forEach(["u","d"],function(ee){te=ee==="u"?W:_.values(W).reverse(),_.forEach(["l","r"],function(ne){ne==="r"&&(te=_.map(te,function(de){return _.values(de).reverse()}));var oe=(ee==="u"?j.predecessors:j.successors).bind(j),ue=M(j,te,X,oe),ce=D(j,te,ue.root,ue.align,ne==="r");ne==="r"&&(ce=_.mapValues(ce,function(de){return-de})),J[ee+ne]=ce})});var re=I(j,J);return N(J,re),F(J,j.graph().align)}function G(j,W,X){return function(J,te,re){var ee=J.node(te),ne=J.node(re),oe=0,ue;if(oe+=ee.width/2,_.has(ee,"labelpos"))switch(ee.labelpos.toLowerCase()){case"l":ue=-ee.width/2;break;case"r":ue=ee.width/2;break}if(ue&&(oe+=X?ue:-ue),ue=0,oe+=(ee.dummy?W:j)/2,oe+=(ne.dummy?W:j)/2,oe+=ne.width/2,_.has(ne,"labelpos"))switch(ne.labelpos.toLowerCase()){case"l":ue=ne.width/2;break;case"r":ue=-ne.width/2;break}return ue&&(oe+=X?ue:-ue),ue=0,oe}}function V(j,W){return j.node(W).width}return bk}var position_1,hasRequiredPosition;function requirePosition(){if(hasRequiredPosition)return position_1;hasRequiredPosition=1;var _=requireLodash(),v=requireUtil$1(),S=requireBk().positionX;position_1=R;function R(A){A=v.asNonCompoundGraph(A),T(A),_.forEach(S(A),function(k,q){A.node(q).x=k})}function T(A){var k=v.buildLayerMatrix(A),q=A.graph().ranksep,M=0;_.forEach(k,function(D){var L=_.max(_.map(D,function(I){return A.node(I).height}));_.forEach(D,function(I){A.node(I).y=M+L/2}),M+=L+q})}return position_1}var layout_1,hasRequiredLayout;function requireLayout(){if(hasRequiredLayout)return layout_1;hasRequiredLayout=1;var _=requireLodash(),v=requireAcyclic(),S=requireNormalize(),R=requireRank(),T=requireUtil$1().normalizeRanks,A=requireParentDummyChains(),k=requireUtil$1().removeEmptyRanks,q=requireNestingGraph(),M=requireAddBorderSegments(),D=requireCoordinateSystem(),L=requireOrder(),I=requirePosition(),N=requireUtil$1(),F=requireGraphlib().Graph;layout_1=H;function H(ye,Re){var qe=Re&&Re.debugTiming?N.time:N.notime;qe("layout",function(){var ke=qe("  buildLayoutGraph",function(){return oe(ye)});qe("  runLayout",function(){G(ke,qe)}),qe("  updateInputGraph",function(){V(ye,ke)})})}function G(ye,Re){Re("    makeSpaceForEdgeLabels",function(){ue(ye)}),Re("    removeSelfEdges",function(){De(ye)}),Re("    acyclic",function(){v.run(ye)}),Re("    nestingGraph.run",function(){q.run(ye)}),Re("    rank",function(){R(N.asNonCompoundGraph(ye))}),Re("    injectEdgeLabelProxies",function(){ce(ye)}),Re("    removeEmptyRanks",function(){k(ye)}),Re("    nestingGraph.cleanup",function(){q.cleanup(ye)}),Re("    normalizeRanks",function(){T(ye)}),Re("    assignRankMinMax",function(){de(ye)}),Re("    removeEdgeLabelProxies",function(){pe(ye)}),Re("    normalize.run",function(){S.run(ye)}),Re("    parentDummyChains",function(){A(ye)}),Re("    addBorderSegments",function(){M(ye)}),Re("    order",function(){L(ye)}),Re("    insertSelfEdges",function(){ve(ye)}),Re("    adjustCoordinateSystem",function(){D.adjust(ye)}),Re("    position",function(){I(ye)}),Re("    positionSelfEdges",function(){le(ye)}),Re("    removeBorderNodes",function(){Ae(ye)}),Re("    normalize.undo",function(){S.undo(ye)}),Re("    fixupEdgeLabelCoords",function(){ge(ye)}),Re("    undoCoordinateSystem",function(){D.undo(ye)}),Re("    translateGraph",function(){_e(ye)}),Re("    assignNodeIntersects",function(){Ee(ye)}),Re("    reversePoints",function(){be(ye)}),Re("    acyclic.undo",function(){v.undo(ye)})}function V(ye,Re){_.forEach(ye.nodes(),function(qe){var ke=ye.node(qe),ze=Re.node(qe);ke&&(ke.x=ze.x,ke.y=ze.y,Re.children(qe).length&&(ke.width=ze.width,ke.height=ze.height))}),_.forEach(ye.edges(),function(qe){var ke=ye.edge(qe),ze=Re.edge(qe);ke.points=ze.points,_.has(ze,"x")&&(ke.x=ze.x,ke.y=ze.y)}),ye.graph().width=Re.graph().width,ye.graph().height=Re.graph().height}var j=["nodesep","edgesep","ranksep","marginx","marginy"],W={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X=["acyclicer","ranker","rankdir","align"],J=["width","height"],te={width:0,height:0},re=["minlen","weight","width","height","labeloffset"],ee={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ne=["labelpos"];function oe(ye){var Re=new F({multigraph:!0,compound:!0}),qe=Te(ye.graph());return Re.setGraph(_.merge({},W,me(qe,j),_.pick(qe,X))),_.forEach(ye.nodes(),function(ke){var ze=Te(ye.node(ke));Re.setNode(ke,_.defaults(me(ze,J),te)),Re.setParent(ke,ye.parent(ke))}),_.forEach(ye.edges(),function(ke){var ze=Te(ye.edge(ke));Re.setEdge(ke,_.merge({},ee,me(ze,re),_.pick(ze,ne)))}),Re}function ue(ye){var Re=ye.graph();Re.ranksep/=2,_.forEach(ye.edges(),function(qe){var ke=ye.edge(qe);ke.minlen*=2,ke.labelpos.toLowerCase()!=="c"&&(Re.rankdir==="TB"||Re.rankdir==="BT"?ke.width+=ke.labeloffset:ke.height+=ke.labeloffset)})}function ce(ye){_.forEach(ye.edges(),function(Re){var qe=ye.edge(Re);if(qe.width&&qe.height){var ke=ye.node(Re.v),ze=ye.node(Re.w),Ne={rank:(ze.rank-ke.rank)/2+ke.rank,e:Re};N.addDummyNode(ye,"edge-proxy",Ne,"_ep")}})}function de(ye){var Re=0;_.forEach(ye.nodes(),function(qe){var ke=ye.node(qe);ke.borderTop&&(ke.minRank=ye.node(ke.borderTop).rank,ke.maxRank=ye.node(ke.borderBottom).rank,Re=_.max(Re,ke.maxRank))}),ye.graph().maxRank=Re}function pe(ye){_.forEach(ye.nodes(),function(Re){var qe=ye.node(Re);qe.dummy==="edge-proxy"&&(ye.edge(qe.e).labelRank=qe.rank,ye.removeNode(Re))})}function _e(ye){var Re=Number.POSITIVE_INFINITY,qe=0,ke=Number.POSITIVE_INFINITY,ze=0,Ne=ye.graph(),Pe=Ne.marginx||0,Me=Ne.marginy||0;function Ie(Le){var nt=Le.x,lt=Le.y,dt=Le.width,pt=Le.height;Re=Math.min(Re,nt-dt/2),qe=Math.max(qe,nt+dt/2),ke=Math.min(ke,lt-pt/2),ze=Math.max(ze,lt+pt/2)}_.forEach(ye.nodes(),function(Le){Ie(ye.node(Le))}),_.forEach(ye.edges(),function(Le){var nt=ye.edge(Le);_.has(nt,"x")&&Ie(nt)}),Re-=Pe,ke-=Me,_.forEach(ye.nodes(),function(Le){var nt=ye.node(Le);nt.x-=Re,nt.y-=ke}),_.forEach(ye.edges(),function(Le){var nt=ye.edge(Le);_.forEach(nt.points,function(lt){lt.x-=Re,lt.y-=ke}),_.has(nt,"x")&&(nt.x-=Re),_.has(nt,"y")&&(nt.y-=ke)}),Ne.width=qe-Re+Pe,Ne.height=ze-ke+Me}function Ee(ye){_.forEach(ye.edges(),function(Re){var qe=ye.edge(Re),ke=ye.node(Re.v),ze=ye.node(Re.w),Ne,Pe;qe.points?(Ne=qe.points[0],Pe=qe.points[qe.points.length-1]):(qe.points=[],Ne=ze,Pe=ke),qe.points.unshift(N.intersectRect(ke,Ne)),qe.points.push(N.intersectRect(ze,Pe))})}function ge(ye){_.forEach(ye.edges(),function(Re){var qe=ye.edge(Re);if(_.has(qe,"x"))switch((qe.labelpos==="l"||qe.labelpos==="r")&&(qe.width-=qe.labeloffset),qe.labelpos){case"l":qe.x-=qe.width/2+qe.labeloffset;break;case"r":qe.x+=qe.width/2+qe.labeloffset;break}})}function be(ye){_.forEach(ye.edges(),function(Re){var qe=ye.edge(Re);qe.reversed&&qe.points.reverse()})}function Ae(ye){_.forEach(ye.nodes(),function(Re){if(ye.children(Re).length){var qe=ye.node(Re),ke=ye.node(qe.borderTop),ze=ye.node(qe.borderBottom),Ne=ye.node(_.last(qe.borderLeft)),Pe=ye.node(_.last(qe.borderRight));qe.width=Math.abs(Pe.x-Ne.x),qe.height=Math.abs(ze.y-ke.y),qe.x=Ne.x+qe.width/2,qe.y=ke.y+qe.height/2}}),_.forEach(ye.nodes(),function(Re){ye.node(Re).dummy==="border"&&ye.removeNode(Re)})}function De(ye){_.forEach(ye.edges(),function(Re){if(Re.v===Re.w){var qe=ye.node(Re.v);qe.selfEdges||(qe.selfEdges=[]),qe.selfEdges.push({e:Re,label:ye.edge(Re)}),ye.removeEdge(Re)}})}function ve(ye){var Re=N.buildLayerMatrix(ye);_.forEach(Re,function(qe){var ke=0;_.forEach(qe,function(ze,Ne){var Pe=ye.node(ze);Pe.order=Ne+ke,_.forEach(Pe.selfEdges,function(Me){N.addDummyNode(ye,"selfedge",{width:Me.label.width,height:Me.label.height,rank:Pe.rank,order:Ne+ ++ke,e:Me.e,label:Me.label},"_se")}),delete Pe.selfEdges})})}function le(ye){_.forEach(ye.nodes(),function(Re){var qe=ye.node(Re);if(qe.dummy==="selfedge"){var ke=ye.node(qe.e.v),ze=ke.x+ke.width/2,Ne=ke.y,Pe=qe.x-ze,Me=ke.height/2;ye.setEdge(qe.e,qe.label),ye.removeNode(Re),qe.label.points=[{x:ze+2*Pe/3,y:Ne-Me},{x:ze+5*Pe/6,y:Ne-Me},{x:ze+Pe,y:Ne},{x:ze+5*Pe/6,y:Ne+Me},{x:ze+2*Pe/3,y:Ne+Me}],qe.label.x=qe.x,qe.label.y=qe.y}})}function me(ye,Re){return _.mapValues(_.pick(ye,Re),Number)}function Te(ye){var Re={};return _.forEach(ye,function(qe,ke){Re[ke.toLowerCase()]=qe}),Re}return layout_1}var debug,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug;hasRequiredDebug=1;var _=requireLodash(),v=requireUtil$1(),S=requireGraphlib().Graph;debug={debugOrdering:R};function R(T){var A=v.buildLayerMatrix(T),k=new S({compound:!0,multigraph:!0}).setGraph({});return _.forEach(T.nodes(),function(q){k.setNode(q,{label:q}),k.setParent(q,"layer"+T.node(q).rank)}),_.forEach(T.edges(),function(q){k.setEdge(q.v,q.w,{},q.name)}),_.forEach(A,function(q,M){var D="layer"+M;k.setNode(D,{rank:"same"}),_.reduce(q,function(L,I){return k.setEdge(L,I,{style:"invis"}),I})}),k}return debug}var version,hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,version="0.8.5"),version}var dagre$1,hasRequiredDagre;function requireDagre(){return hasRequiredDagre||(hasRequiredDagre=1,dagre$1={graphlib:requireGraphlib(),layout:requireLayout(),debug:requireDebug(),util:{time:requireUtil$1().time,notime:requireUtil$1().notime},version:requireVersion()}),dagre$1}var cytoscapeDagre=cytoscapeDagre$1.exports,hasRequiredCytoscapeDagre;function requireCytoscapeDagre(){return hasRequiredCytoscapeDagre||(hasRequiredCytoscapeDagre=1,(function(_,v){(function(R,T){_.exports=T(requireDagre())})(cytoscapeDagre,function(S){return(function(R){var T={};function A(k){if(T[k])return T[k].exports;var q=T[k]={i:k,l:!1,exports:{}};return R[k].call(q.exports,q,q.exports,A),q.l=!0,q.exports}return A.m=R,A.c=T,A.d=function(k,q,M){A.o(k,q)||Object.defineProperty(k,q,{enumerable:!0,get:M})},A.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},A.t=function(k,q){if(q&1&&(k=A(k)),q&8||q&4&&typeof k=="object"&&k&&k.__esModule)return k;var M=Object.create(null);if(A.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:k}),q&2&&typeof k!="string")for(var D in k)A.d(M,D,(function(L){return k[L]}).bind(null,D));return M},A.n=function(k){var q=k&&k.__esModule?function(){return k.default}:function(){return k};return A.d(q,"a",q),q},A.o=function(k,q){return Object.prototype.hasOwnProperty.call(k,q)},A.p="",A(A.s=0)})([(function(R,T,A){var k=A(1),q=function(D){D&&D("layout","dagre",k)};typeof cytoscape<"u"&&q(cytoscape),R.exports=q}),(function(R,T,A){function k(N){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(H){return typeof H}:k=function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},k(N)}var q=function(F){return typeof F=="function"},M=A(2),D=A(3),L=A(4);function I(N){this.options=D({},M,N)}I.prototype.run=function(){var N=this.options,F=this,H=N.cy,G=N.eles,V=function(le,me){return q(me)?me.apply(le,[le]):me},j=N.boundingBox||{x1:0,y1:0,w:H.width(),h:H.height()};j.x2===void 0&&(j.x2=j.x1+j.w),j.w===void 0&&(j.w=j.x2-j.x1),j.y2===void 0&&(j.y2=j.y1+j.h),j.h===void 0&&(j.h=j.y2-j.y1);var W=new L.graphlib.Graph({multigraph:!0,compound:!0}),X={},J=function(le,me){me!=null&&(X[le]=me)};J("nodesep",N.nodeSep),J("edgesep",N.edgeSep),J("ranksep",N.rankSep),J("rankdir",N.rankDir),J("align",N.align),J("ranker",N.ranker),J("acyclicer",N.acyclicer),W.setGraph(X),W.setDefaultEdgeLabel(function(){return{}}),W.setDefaultNodeLabel(function(){return{}});var te=G.nodes();q(N.sort)&&(te=te.sort(N.sort));for(var re=0;re<te.length;re++){var ee=te[re],ne=ee.layoutDimensions(N);W.setNode(ee.id(),{width:ne.w,height:ne.h,name:ee.id()})}for(var oe=0;oe<te.length;oe++){var ue=te[oe];ue.isChild()&&W.setParent(ue.id(),ue.parent().id())}var ce=G.edges().stdFilter(function(ve){return!ve.source().isParent()&&!ve.target().isParent()});q(N.sort)&&(ce=ce.sort(N.sort));for(var de=0;de<ce.length;de++){var pe=ce[de];W.setEdge(pe.source().id(),pe.target().id(),{minlen:V(pe,N.minLen),weight:V(pe,N.edgeWeight),name:pe.id()},pe.id())}L.layout(W);for(var _e=W.nodes(),Ee=0;Ee<_e.length;Ee++){var ge=_e[Ee],be=W.node(ge);H.getElementById(ge).scratch().dagre=be}var Ae;N.boundingBox?(Ae={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},te.forEach(function(ve){var le=ve.scratch().dagre;Ae.x1=Math.min(Ae.x1,le.x),Ae.x2=Math.max(Ae.x2,le.x),Ae.y1=Math.min(Ae.y1,le.y),Ae.y2=Math.max(Ae.y2,le.y)}),Ae.w=Ae.x2-Ae.x1,Ae.h=Ae.y2-Ae.y1):Ae=j;var De=function(le){if(N.boundingBox){var me=Ae.w===0?0:(le.x-Ae.x1)/Ae.w,Te=Ae.h===0?0:(le.y-Ae.y1)/Ae.h;return{x:j.x1+me*j.w,y:j.y1+Te*j.h}}else return le};return te.layoutPositions(F,N,function(ve){ve=k(ve)==="object"?ve:this;var le=ve.scratch().dagre;return De({x:le.x,y:le.y})}),this},R.exports=I}),(function(R,T){var A={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(q){return 1},edgeWeight:function(q){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(q,M){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(q,M){return M},ready:function(){},sort:void 0,stop:function(){}};R.exports=A}),(function(R,T){R.exports=Object.assign!=null?Object.assign.bind(Object):function(A){for(var k=arguments.length,q=new Array(k>1?k-1:0),M=1;M<k;M++)q[M-1]=arguments[M];return q.forEach(function(D){Object.keys(D).forEach(function(L){return A[L]=D[L]})}),A}}),(function(R,T){R.exports=S})])})})(cytoscapeDagre$1)),cytoscapeDagre$1.exports}var cytoscapeDagreExports=requireCytoscapeDagre();const dagre=getDefaultExportFromCjs$1(cytoscapeDagreExports),graphStyle=[{selector:'node[type="process"], node[type="intermediate"]',style:{"background-color":"#FFD700",label:"data(label)",color:"#000","text-valign":"center","text-halign":"center",width:40,height:40,"border-width":1,"border-color":"#000"}},{selector:'node[type="nil"]',style:{"background-color":"#ddd",label:"0","text-valign":"center","text-halign":"center",width:25,height:25,"border-width":1,"border-color":"#888"}},{selector:'node[type="operator"]',style:{"background-color":"#fff",label:"data(label)",shape:"round-rectangle","border-width":1,"border-color":"#000","text-valign":"center","text-halign":"center"}},{selector:"edge",style:{width:2,"line-color":"#000","target-arrow-color":"#000","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(label)","font-size":14,"text-rotation":"autorotate","text-margin-y":-10}}];cytoscape$1.use(dagre);function CCSVisualizer({elements:_}){const v=reactExports.useRef(null);return reactExports.useEffect(()=>{v.current&&v.current.layout({name:"dagre",rankDir:"LR",animate:!0,animationDuration:500,nodeSep:50,rankSep:100}).run()},[_]),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-5",children:jsxRuntimeExports.jsx("div",{className:"w-full h-[500px] border border-gray-300 rounded-md overflow-hidden",children:jsxRuntimeExports.jsx(w,{elements:_??[],style:{width:"100%",height:"100%"},stylesheet:graphStyle,cy:S=>{v.current=S}})})})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var R in S)({}).hasOwnProperty.call(S,R)&&(_[R]=S[R])}return _},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(_,v){if(_==null)return{};var S={};for(var R in _)if({}.hasOwnProperty.call(_,R)){if(v.indexOf(R)!==-1)continue;S[R]=_[R]}return S}let rangeFrom=[],rangeTo=[];(()=>{let _="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(v=>v?parseInt(v,36):1);for(let v=0,S=0;v<_.length;v++)(v%2?rangeTo:rangeFrom).push(S=S+_[v])})();function isExtendingChar(_){if(_<768)return!1;for(let v=0,S=rangeFrom.length;;){let R=v+S>>1;if(_<rangeFrom[R])S=R;else if(_>=rangeTo[R])v=R+1;else return!0;if(v==S)return!1}}function isRegionalIndicator(_){return _>=127462&&_<=127487}const ZWJ=8205;function findClusterBreak$1(_,v,S=!0,R=!0){return(S?nextClusterBreak:prevClusterBreak)(_,v,R)}function nextClusterBreak(_,v,S){if(v==_.length)return v;v&&surrogateLow$1(_.charCodeAt(v))&&surrogateHigh$1(_.charCodeAt(v-1))&&v--;let R=codePointAt$1(_,v);for(v+=codePointSize$1(R);v<_.length;){let T=codePointAt$1(_,v);if(R==ZWJ||T==ZWJ||S&&isExtendingChar(T))v+=codePointSize$1(T),R=T;else if(isRegionalIndicator(T)){let A=0,k=v-2;for(;k>=0&&isRegionalIndicator(codePointAt$1(_,k));)A++,k-=2;if(A%2==0)break;v+=2}else break}return v}function prevClusterBreak(_,v,S){for(;v>0;){let R=nextClusterBreak(_,v-2,S);if(R<v)return R;v--}return 0}function codePointAt$1(_,v){let S=_.charCodeAt(v);if(!surrogateHigh$1(S)||v+1==_.length)return S;let R=_.charCodeAt(v+1);return surrogateLow$1(R)?(S-55296<<10)+(R-56320)+65536:S}function surrogateLow$1(_){return _>=56320&&_<57344}function surrogateHigh$1(_){return _>=55296&&_<56320}function codePointSize$1(_){return _<65536?1:2}class Text{lineAt(v){if(v<0||v>this.length)throw new RangeError(`Invalid position ${v} in document of length ${this.length}`);return this.lineInner(v,!1,1,0)}line(v){if(v<1||v>this.lines)throw new RangeError(`Invalid line number ${v} in ${this.lines}-line document`);return this.lineInner(v,!0,1,0)}replace(v,S,R){[v,S]=clip(this,v,S);let T=[];return this.decompose(0,v,T,2),R.length&&R.decompose(0,R.length,T,3),this.decompose(S,this.length,T,1),TextNode.from(T,this.length-(S-v)+R.length)}append(v){return this.replace(this.length,this.length,v)}slice(v,S=this.length){[v,S]=clip(this,v,S);let R=[];return this.decompose(v,S,R,0),TextNode.from(R,S-v)}eq(v){if(v==this)return!0;if(v.length!=this.length||v.lines!=this.lines)return!1;let S=this.scanIdentical(v,1),R=this.length-this.scanIdentical(v,-1),T=new RawTextCursor(this),A=new RawTextCursor(v);for(let k=S,q=S;;){if(T.next(k),A.next(k),k=0,T.lineBreak!=A.lineBreak||T.done!=A.done||T.value!=A.value)return!1;if(q+=T.value.length,T.done||q>=R)return!0}}iter(v=1){return new RawTextCursor(this,v)}iterRange(v,S=this.length){return new PartialTextCursor(this,v,S)}iterLines(v,S){let R;if(v==null)R=this.iter();else{S==null&&(S=this.lines+1);let T=this.line(v).from;R=this.iterRange(T,Math.max(T,S==this.lines+1?this.length:S<=1?0:this.line(S-1).to))}return new LineCursor(R)}toString(){return this.sliceString(0)}toJSON(){let v=[];return this.flatten(v),v}constructor(){}static of(v){if(v.length==0)throw new RangeError("A document must have at least one line");return v.length==1&&!v[0]?Text.empty:v.length<=32?new TextLeaf(v):TextNode.from(TextLeaf.split(v,[]))}}class TextLeaf extends Text{constructor(v,S=textLength(v)){super(),this.text=v,this.length=S}get lines(){return this.text.length}get children(){return null}lineInner(v,S,R,T){for(let A=0;;A++){let k=this.text[A],q=T+k.length;if((S?R:q)>=v)return new Line(T,q,R,k);T=q+1,R++}}decompose(v,S,R,T){let A=v<=0&&S>=this.length?this:new TextLeaf(sliceText(this.text,v,S),Math.min(S,this.length)-Math.max(0,v));if(T&1){let k=R.pop(),q=appendText(A.text,k.text.slice(),0,A.length);if(q.length<=32)R.push(new TextLeaf(q,k.length+A.length));else{let M=q.length>>1;R.push(new TextLeaf(q.slice(0,M)),new TextLeaf(q.slice(M)))}}else R.push(A)}replace(v,S,R){if(!(R instanceof TextLeaf))return super.replace(v,S,R);[v,S]=clip(this,v,S);let T=appendText(this.text,appendText(R.text,sliceText(this.text,0,v)),S),A=this.length+R.length-(S-v);return T.length<=32?new TextLeaf(T,A):TextNode.from(TextLeaf.split(T,[]),A)}sliceString(v,S=this.length,R=`
`){[v,S]=clip(this,v,S);let T="";for(let A=0,k=0;A<=S&&k<this.text.length;k++){let q=this.text[k],M=A+q.length;A>v&&k&&(T+=R),v<M&&S>A&&(T+=q.slice(Math.max(0,v-A),S-A)),A=M+1}return T}flatten(v){for(let S of this.text)v.push(S)}scanIdentical(){return 0}static split(v,S){let R=[],T=-1;for(let A of v)R.push(A),T+=A.length+1,R.length==32&&(S.push(new TextLeaf(R,T)),R=[],T=-1);return T>-1&&S.push(new TextLeaf(R,T)),S}}class TextNode extends Text{constructor(v,S){super(),this.children=v,this.length=S,this.lines=0;for(let R of v)this.lines+=R.lines}lineInner(v,S,R,T){for(let A=0;;A++){let k=this.children[A],q=T+k.length,M=R+k.lines-1;if((S?M:q)>=v)return k.lineInner(v,S,R,T);T=q+1,R=M+1}}decompose(v,S,R,T){for(let A=0,k=0;k<=S&&A<this.children.length;A++){let q=this.children[A],M=k+q.length;if(v<=M&&S>=k){let D=T&((k<=v?1:0)|(M>=S?2:0));k>=v&&M<=S&&!D?R.push(q):q.decompose(v-k,S-k,R,D)}k=M+1}}replace(v,S,R){if([v,S]=clip(this,v,S),R.lines<this.lines)for(let T=0,A=0;T<this.children.length;T++){let k=this.children[T],q=A+k.length;if(v>=A&&S<=q){let M=k.replace(v-A,S-A,R),D=this.lines-k.lines+M.lines;if(M.lines<D>>4&&M.lines>D>>6){let L=this.children.slice();return L[T]=M,new TextNode(L,this.length-(S-v)+R.length)}return super.replace(A,q,M)}A=q+1}return super.replace(v,S,R)}sliceString(v,S=this.length,R=`
`){[v,S]=clip(this,v,S);let T="";for(let A=0,k=0;A<this.children.length&&k<=S;A++){let q=this.children[A],M=k+q.length;k>v&&A&&(T+=R),v<M&&S>k&&(T+=q.sliceString(v-k,S-k,R)),k=M+1}return T}flatten(v){for(let S of this.children)S.flatten(v)}scanIdentical(v,S){if(!(v instanceof TextNode))return 0;let R=0,[T,A,k,q]=S>0?[0,0,this.children.length,v.children.length]:[this.children.length-1,v.children.length-1,-1,-1];for(;;T+=S,A+=S){if(T==k||A==q)return R;let M=this.children[T],D=v.children[A];if(M!=D)return R+M.scanIdentical(D,S);R+=M.length+1}}static from(v,S=v.reduce((R,T)=>R+T.length+1,-1)){let R=0;for(let F of v)R+=F.lines;if(R<32){let F=[];for(let H of v)H.flatten(F);return new TextLeaf(F,S)}let T=Math.max(32,R>>5),A=T<<1,k=T>>1,q=[],M=0,D=-1,L=[];function I(F){let H;if(F.lines>A&&F instanceof TextNode)for(let G of F.children)I(G);else F.lines>k&&(M>k||!M)?(N(),q.push(F)):F instanceof TextLeaf&&M&&(H=L[L.length-1])instanceof TextLeaf&&F.lines+H.lines<=32?(M+=F.lines,D+=F.length+1,L[L.length-1]=new TextLeaf(H.text.concat(F.text),H.length+1+F.length)):(M+F.lines>T&&N(),M+=F.lines,D+=F.length+1,L.push(F))}function N(){M!=0&&(q.push(L.length==1?L[0]:TextNode.from(L,D)),D=-1,M=L.length=0)}for(let F of v)I(F);return N(),q.length==1?q[0]:new TextNode(q,S)}}Text.empty=new TextLeaf([""],0);function textLength(_){let v=-1;for(let S of _)v+=S.length+1;return v}function appendText(_,v,S=0,R=1e9){for(let T=0,A=0,k=!0;A<_.length&&T<=R;A++){let q=_[A],M=T+q.length;M>=S&&(M>R&&(q=q.slice(0,R-T)),T<S&&(q=q.slice(S-T)),k?(v[v.length-1]+=q,k=!1):v.push(q)),T=M+1}return v}function sliceText(_,v,S){return appendText(_,[""],v,S)}class RawTextCursor{constructor(v,S=1){this.dir=S,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[v],this.offsets=[S>0?1:(v instanceof TextLeaf?v.text.length:v.children.length)<<1]}nextInner(v,S){for(this.done=this.lineBreak=!1;;){let R=this.nodes.length-1,T=this.nodes[R],A=this.offsets[R],k=A>>1,q=T instanceof TextLeaf?T.text.length:T.children.length;if(k==(S>0?q:0)){if(R==0)return this.done=!0,this.value="",this;S>0&&this.offsets[R-1]++,this.nodes.pop(),this.offsets.pop()}else if((A&1)==(S>0?0:1)){if(this.offsets[R]+=S,v==0)return this.lineBreak=!0,this.value=`
`,this;v--}else if(T instanceof TextLeaf){let M=T.text[k+(S<0?-1:0)];if(this.offsets[R]+=S,M.length>Math.max(0,v))return this.value=v==0?M:S>0?M.slice(v):M.slice(0,M.length-v),this;v-=M.length}else{let M=T.children[k+(S<0?-1:0)];v>M.length?(v-=M.length,this.offsets[R]+=S):(S<0&&this.offsets[R]--,this.nodes.push(M),this.offsets.push(S>0?1:(M instanceof TextLeaf?M.text.length:M.children.length)<<1))}}}next(v=0){return v<0&&(this.nextInner(-v,-this.dir),v=this.value.length),this.nextInner(v,this.dir)}}class PartialTextCursor{constructor(v,S,R){this.value="",this.done=!1,this.cursor=new RawTextCursor(v,S>R?-1:1),this.pos=S>R?v.length:0,this.from=Math.min(S,R),this.to=Math.max(S,R)}nextInner(v,S){if(S<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;v+=Math.max(0,S<0?this.pos-this.to:this.from-this.pos);let R=S<0?this.pos-this.from:this.to-this.pos;v>R&&(v=R),R-=v;let{value:T}=this.cursor.next(v);return this.pos+=(T.length+v)*S,this.value=T.length<=R?T:S<0?T.slice(T.length-R):T.slice(0,R),this.done=!this.value,this}next(v=0){return v<0?v=Math.max(v,this.from-this.pos):v>0&&(v=Math.min(v,this.to-this.pos)),this.nextInner(v,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(v){this.inner=v,this.afterBreak=!0,this.value="",this.done=!1}next(v=0){let{done:S,lineBreak:R,value:T}=this.inner.next(v);return S&&this.afterBreak?(this.value="",this.afterBreak=!1):S?(this.done=!0,this.value=""):R?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=T,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(v,S,R,T){this.from=v,this.to=S,this.number=R,this.text=T}get length(){return this.to-this.from}}function clip(_,v,S){return v=Math.max(0,Math.min(_.length,v)),[v,Math.max(v,Math.min(_.length,S))]}function findClusterBreak(_,v,S=!0,R=!0){return findClusterBreak$1(_,v,S,R)}function surrogateLow(_){return _>=56320&&_<57344}function surrogateHigh(_){return _>=55296&&_<56320}function codePointAt(_,v){let S=_.charCodeAt(v);if(!surrogateHigh(S)||v+1==_.length)return S;let R=_.charCodeAt(v+1);return surrogateLow(R)?(S-55296<<10)+(R-56320)+65536:S}function fromCodePoint(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}function codePointSize(_){return _<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=(function(_){return _[_.Simple=0]="Simple",_[_.TrackDel=1]="TrackDel",_[_.TrackBefore=2]="TrackBefore",_[_.TrackAfter=3]="TrackAfter",_})(MapMode||(MapMode={}));class ChangeDesc{constructor(v){this.sections=v}get length(){let v=0;for(let S=0;S<this.sections.length;S+=2)v+=this.sections[S];return v}get newLength(){let v=0;for(let S=0;S<this.sections.length;S+=2){let R=this.sections[S+1];v+=R<0?this.sections[S]:R}return v}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(v){for(let S=0,R=0,T=0;S<this.sections.length;){let A=this.sections[S++],k=this.sections[S++];k<0?(v(R,T,A),T+=A):T+=k,R+=A}}iterChangedRanges(v,S=!1){iterChanges(this,v,S)}get invertedDesc(){let v=[];for(let S=0;S<this.sections.length;){let R=this.sections[S++],T=this.sections[S++];T<0?v.push(R,T):v.push(T,R)}return new ChangeDesc(v)}composeDesc(v){return this.empty?v:v.empty?this:composeSets(this,v)}mapDesc(v,S=!1){return v.empty?this:mapSet(this,v,S)}mapPos(v,S=-1,R=MapMode.Simple){let T=0,A=0;for(let k=0;k<this.sections.length;){let q=this.sections[k++],M=this.sections[k++],D=T+q;if(M<0){if(D>v)return A+(v-T);A+=q}else{if(R!=MapMode.Simple&&D>=v&&(R==MapMode.TrackDel&&T<v&&D>v||R==MapMode.TrackBefore&&T<v||R==MapMode.TrackAfter&&D>v))return null;if(D>v||D==v&&S<0&&!q)return v==T||S<0?A:A+M;A+=M}T=D}if(v>T)throw new RangeError(`Position ${v} is out of range for changeset of length ${T}`);return A}touchesRange(v,S=v){for(let R=0,T=0;R<this.sections.length&&T<=S;){let A=this.sections[R++],k=this.sections[R++],q=T+A;if(k>=0&&T<=S&&q>=v)return T<v&&q>S?"cover":!0;T=q}return!1}toString(){let v="";for(let S=0;S<this.sections.length;){let R=this.sections[S++],T=this.sections[S++];v+=(v?" ":"")+R+(T>=0?":"+T:"")}return v}toJSON(){return this.sections}static fromJSON(v){if(!Array.isArray(v)||v.length%2||v.some(S=>typeof S!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(v)}static create(v){return new ChangeDesc(v)}}class ChangeSet extends ChangeDesc{constructor(v,S){super(v),this.inserted=S}apply(v){if(this.length!=v.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(S,R,T,A,k)=>v=v.replace(T,T+(R-S),k),!1),v}mapDesc(v,S=!1){return mapSet(this,v,S,!0)}invert(v){let S=this.sections.slice(),R=[];for(let T=0,A=0;T<S.length;T+=2){let k=S[T],q=S[T+1];if(q>=0){S[T]=q,S[T+1]=k;let M=T>>1;for(;R.length<M;)R.push(Text.empty);R.push(k?v.slice(A,A+k):Text.empty)}A+=k}return new ChangeSet(S,R)}compose(v){return this.empty?v:v.empty?this:composeSets(this,v,!0)}map(v,S=!1){return v.empty?this:mapSet(this,v,S,!0)}iterChanges(v,S=!1){iterChanges(this,v,S)}get desc(){return ChangeDesc.create(this.sections)}filter(v){let S=[],R=[],T=[],A=new SectionIter(this);e:for(let k=0,q=0;;){let M=k==v.length?1e9:v[k++];for(;q<M||q==M&&A.len==0;){if(A.done)break e;let L=Math.min(A.len,M-q);addSection(T,L,-1);let I=A.ins==-1?-1:A.off==0?A.ins:0;addSection(S,L,I),I>0&&addInsert(R,S,A.text),A.forward(L),q+=L}let D=v[k++];for(;q<D;){if(A.done)break e;let L=Math.min(A.len,D-q);addSection(S,L,-1),addSection(T,L,A.ins==-1?-1:A.off==0?A.ins:0),A.forward(L),q+=L}}return{changes:new ChangeSet(S,R),filtered:ChangeDesc.create(T)}}toJSON(){let v=[];for(let S=0;S<this.sections.length;S+=2){let R=this.sections[S],T=this.sections[S+1];T<0?v.push(R):T==0?v.push([R]):v.push([R].concat(this.inserted[S>>1].toJSON()))}return v}static of(v,S,R){let T=[],A=[],k=0,q=null;function M(L=!1){if(!L&&!T.length)return;k<S&&addSection(T,S-k,-1);let I=new ChangeSet(T,A);q=q?q.compose(I.map(q)):I,T=[],A=[],k=0}function D(L){if(Array.isArray(L))for(let I of L)D(I);else if(L instanceof ChangeSet){if(L.length!=S)throw new RangeError(`Mismatched change set length (got ${L.length}, expected ${S})`);M(),q=q?q.compose(L.map(q)):L}else{let{from:I,to:N=I,insert:F}=L;if(I>N||I<0||N>S)throw new RangeError(`Invalid change range ${I} to ${N} (in doc of length ${S})`);let H=F?typeof F=="string"?Text.of(F.split(R||DefaultSplit)):F:Text.empty,G=H.length;if(I==N&&G==0)return;I<k&&M(),I>k&&addSection(T,I-k,-1),addSection(T,N-I,G),addInsert(A,T,H),k=N}}return D(v),M(!q),q}static empty(v){return new ChangeSet(v?[v,-1]:[],[])}static fromJSON(v){if(!Array.isArray(v))throw new RangeError("Invalid JSON representation of ChangeSet");let S=[],R=[];for(let T=0;T<v.length;T++){let A=v[T];if(typeof A=="number")S.push(A,-1);else{if(!Array.isArray(A)||typeof A[0]!="number"||A.some((k,q)=>q&&typeof k!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(A.length==1)S.push(A[0],0);else{for(;R.length<T;)R.push(Text.empty);R[T]=Text.of(A.slice(1)),S.push(A[0],R[T].length)}}}return new ChangeSet(S,R)}static createSet(v,S){return new ChangeSet(v,S)}}function addSection(_,v,S,R=!1){if(v==0&&S<=0)return;let T=_.length-2;T>=0&&S<=0&&S==_[T+1]?_[T]+=v:T>=0&&v==0&&_[T]==0?_[T+1]+=S:R?(_[T]+=v,_[T+1]+=S):_.push(v,S)}function addInsert(_,v,S){if(S.length==0)return;let R=v.length-2>>1;if(R<_.length)_[_.length-1]=_[_.length-1].append(S);else{for(;_.length<R;)_.push(Text.empty);_.push(S)}}function iterChanges(_,v,S){let R=_.inserted;for(let T=0,A=0,k=0;k<_.sections.length;){let q=_.sections[k++],M=_.sections[k++];if(M<0)T+=q,A+=q;else{let D=T,L=A,I=Text.empty;for(;D+=q,L+=M,M&&R&&(I=I.append(R[k-2>>1])),!(S||k==_.sections.length||_.sections[k+1]<0);)q=_.sections[k++],M=_.sections[k++];v(T,D,A,L,I),T=D,A=L}}}function mapSet(_,v,S,R=!1){let T=[],A=R?[]:null,k=new SectionIter(_),q=new SectionIter(v);for(let M=-1;;){if(k.done&&q.len||q.done&&k.len)throw new Error("Mismatched change set lengths");if(k.ins==-1&&q.ins==-1){let D=Math.min(k.len,q.len);addSection(T,D,-1),k.forward(D),q.forward(D)}else if(q.ins>=0&&(k.ins<0||M==k.i||k.off==0&&(q.len<k.len||q.len==k.len&&!S))){let D=q.len;for(addSection(T,q.ins,-1);D;){let L=Math.min(k.len,D);k.ins>=0&&M<k.i&&k.len<=L&&(addSection(T,0,k.ins),A&&addInsert(A,T,k.text),M=k.i),k.forward(L),D-=L}q.next()}else if(k.ins>=0){let D=0,L=k.len;for(;L;)if(q.ins==-1){let I=Math.min(L,q.len);D+=I,L-=I,q.forward(I)}else if(q.ins==0&&q.len<L)L-=q.len,q.next();else break;addSection(T,D,M<k.i?k.ins:0),A&&M<k.i&&addInsert(A,T,k.text),M=k.i,k.forward(k.len-L)}else{if(k.done&&q.done)return A?ChangeSet.createSet(T,A):ChangeDesc.create(T);throw new Error("Mismatched change set lengths")}}}function composeSets(_,v,S=!1){let R=[],T=S?[]:null,A=new SectionIter(_),k=new SectionIter(v);for(let q=!1;;){if(A.done&&k.done)return T?ChangeSet.createSet(R,T):ChangeDesc.create(R);if(A.ins==0)addSection(R,A.len,0,q),A.next();else if(k.len==0&&!k.done)addSection(R,0,k.ins,q),T&&addInsert(T,R,k.text),k.next();else{if(A.done||k.done)throw new Error("Mismatched change set lengths");{let M=Math.min(A.len2,k.len),D=R.length;if(A.ins==-1){let L=k.ins==-1?-1:k.off?0:k.ins;addSection(R,M,L,q),T&&L&&addInsert(T,R,k.text)}else k.ins==-1?(addSection(R,A.off?0:A.len,M,q),T&&addInsert(T,R,A.textBit(M))):(addSection(R,A.off?0:A.len,k.off?0:k.ins,q),T&&!k.off&&addInsert(T,R,k.text));q=(A.ins>M||k.ins>=0&&k.len>M)&&(q||R.length>D),A.forward2(M),k.forward(M)}}}}class SectionIter{constructor(v){this.set=v,this.i=0,this.next()}next(){let{sections:v}=this.set;this.i<v.length?(this.len=v[this.i++],this.ins=v[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:v}=this.set,S=this.i-2>>1;return S>=v.length?Text.empty:v[S]}textBit(v){let{inserted:S}=this.set,R=this.i-2>>1;return R>=S.length&&!v?Text.empty:S[R].slice(this.off,v==null?void 0:this.off+v)}forward(v){v==this.len?this.next():(this.len-=v,this.off+=v)}forward2(v){this.ins==-1?this.forward(v):v==this.ins?this.next():(this.ins-=v,this.off+=v)}}class SelectionRange{constructor(v,S,R){this.from=v,this.to=S,this.flags=R}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let v=this.flags&7;return v==7?null:v}get goalColumn(){let v=this.flags>>6;return v==16777215?void 0:v}map(v,S=-1){let R,T;return this.empty?R=T=v.mapPos(this.from,S):(R=v.mapPos(this.from,1),T=v.mapPos(this.to,-1)),R==this.from&&T==this.to?this:new SelectionRange(R,T,this.flags)}extend(v,S=v){if(v<=this.anchor&&S>=this.anchor)return EditorSelection.range(v,S);let R=Math.abs(v-this.anchor)>Math.abs(S-this.anchor)?v:S;return EditorSelection.range(this.anchor,R)}eq(v,S=!1){return this.anchor==v.anchor&&this.head==v.head&&(!S||!this.empty||this.assoc==v.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(v){if(!v||typeof v.anchor!="number"||typeof v.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(v.anchor,v.head)}static create(v,S,R){return new SelectionRange(v,S,R)}}class EditorSelection{constructor(v,S){this.ranges=v,this.mainIndex=S}map(v,S=-1){return v.empty?this:EditorSelection.create(this.ranges.map(R=>R.map(v,S)),this.mainIndex)}eq(v,S=!1){if(this.ranges.length!=v.ranges.length||this.mainIndex!=v.mainIndex)return!1;for(let R=0;R<this.ranges.length;R++)if(!this.ranges[R].eq(v.ranges[R],S))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(v,S=!0){return EditorSelection.create([v].concat(this.ranges),S?0:this.mainIndex+1)}replaceRange(v,S=this.mainIndex){let R=this.ranges.slice();return R[S]=v,EditorSelection.create(R,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(v=>v.toJSON()),main:this.mainIndex}}static fromJSON(v){if(!v||!Array.isArray(v.ranges)||typeof v.main!="number"||v.main>=v.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(v.ranges.map(S=>SelectionRange.fromJSON(S)),v.main)}static single(v,S=v){return new EditorSelection([EditorSelection.range(v,S)],0)}static create(v,S=0){if(v.length==0)throw new RangeError("A selection needs at least one range");for(let R=0,T=0;T<v.length;T++){let A=v[T];if(A.empty?A.from<=R:A.from<R)return EditorSelection.normalized(v.slice(),S);R=A.to}return new EditorSelection(v,S)}static cursor(v,S=0,R,T){return SelectionRange.create(v,v,(S==0?0:S<0?8:16)|(R==null?7:Math.min(6,R))|(T??16777215)<<6)}static range(v,S,R,T){let A=(R??16777215)<<6|(T==null?7:Math.min(6,T));return S<v?SelectionRange.create(S,v,48|A):SelectionRange.create(v,S,(S>v?8:0)|A)}static normalized(v,S=0){let R=v[S];v.sort((T,A)=>T.from-A.from),S=v.indexOf(R);for(let T=1;T<v.length;T++){let A=v[T],k=v[T-1];if(A.empty?A.from<=k.to:A.from<k.to){let q=k.from,M=Math.max(A.to,k.to);T<=S&&S--,v.splice(--T,2,A.anchor>A.head?EditorSelection.range(M,q):EditorSelection.range(q,M))}}return new EditorSelection(v,S)}}function checkSelection(_,v){for(let S of _.ranges)if(S.to>v)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(v,S,R,T,A){this.combine=v,this.compareInput=S,this.compare=R,this.isStatic=T,this.id=nextID++,this.default=v([]),this.extensions=typeof A=="function"?A(this):A}get reader(){return this}static define(v={}){return new Facet(v.combine||(S=>S),v.compareInput||((S,R)=>S===R),v.compare||(v.combine?(S,R)=>S===R:sameArray$1),!!v.static,v.enables)}of(v){return new FacetProvider([],this,0,v)}compute(v,S){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(v,this,1,S)}computeN(v,S){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(v,this,2,S)}from(v,S){return S||(S=R=>R),this.compute([v],R=>S(R.field(v)))}}function sameArray$1(_,v){return _==v||_.length==v.length&&_.every((S,R)=>S===v[R])}class FacetProvider{constructor(v,S,R,T){this.dependencies=v,this.facet=S,this.type=R,this.value=T,this.id=nextID++}dynamicSlot(v){var S;let R=this.value,T=this.facet.compareInput,A=this.id,k=v[A]>>1,q=this.type==2,M=!1,D=!1,L=[];for(let I of this.dependencies)I=="doc"?M=!0:I=="selection"?D=!0:(((S=v[I.id])!==null&&S!==void 0?S:1)&1)==0&&L.push(v[I.id]);return{create(I){return I.values[k]=R(I),1},update(I,N){if(M&&N.docChanged||D&&(N.docChanged||N.selection)||ensureAll(I,L)){let F=R(I);if(q?!compareArray(F,I.values[k],T):!T(F,I.values[k]))return I.values[k]=F,1}return 0},reconfigure:(I,N)=>{let F,H=N.config.address[A];if(H!=null){let G=getAddr(N,H);if(this.dependencies.every(V=>V instanceof Facet?N.facet(V)===I.facet(V):V instanceof StateField?N.field(V,!1)==I.field(V,!1):!0)||(q?compareArray(F=R(I),G,T):T(F=R(I),G)))return I.values[k]=G,0}else F=R(I);return I.values[k]=F,1}}}}function compareArray(_,v,S){if(_.length!=v.length)return!1;for(let R=0;R<_.length;R++)if(!S(_[R],v[R]))return!1;return!0}function ensureAll(_,v){let S=!1;for(let R of v)ensureAddr(_,R)&1&&(S=!0);return S}function dynamicFacetSlot(_,v,S){let R=S.map(M=>_[M.id]),T=S.map(M=>M.type),A=R.filter(M=>!(M&1)),k=_[v.id]>>1;function q(M){let D=[];for(let L=0;L<R.length;L++){let I=getAddr(M,R[L]);if(T[L]==2)for(let N of I)D.push(N);else D.push(I)}return v.combine(D)}return{create(M){for(let D of R)ensureAddr(M,D);return M.values[k]=q(M),1},update(M,D){if(!ensureAll(M,A))return 0;let L=q(M);return v.compare(L,M.values[k])?0:(M.values[k]=L,1)},reconfigure(M,D){let L=ensureAll(M,R),I=D.config.facets[v.id],N=D.facet(v);if(I&&!L&&sameArray$1(S,I))return M.values[k]=N,0;let F=q(M);return v.compare(F,N)?(M.values[k]=N,0):(M.values[k]=F,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(v,S,R,T,A){this.id=v,this.createF=S,this.updateF=R,this.compareF=T,this.spec=A,this.provides=void 0}static define(v){let S=new StateField(nextID++,v.create,v.update,v.compare||((R,T)=>R===T),v);return v.provide&&(S.provides=v.provide(S)),S}create(v){let S=v.facet(initField).find(R=>R.field==this);return(S?.create||this.createF)(v)}slot(v){let S=v[this.id]>>1;return{create:R=>(R.values[S]=this.create(R),1),update:(R,T)=>{let A=R.values[S],k=this.updateF(A,T);return this.compareF(A,k)?0:(R.values[S]=k,1)},reconfigure:(R,T)=>{let A=R.facet(initField),k=T.facet(initField),q;return(q=A.find(M=>M.field==this))&&q!=k.find(M=>M.field==this)?(R.values[S]=q.create(R),1):T.config.address[this.id]!=null?(R.values[S]=T.field(this),0):(R.values[S]=this.create(R),1)}}}init(v){return[this,initField.of({field:this,create:v})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(_){return v=>new PrecExtension(v,_)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(v,S){this.inner=v,this.prec=S}}class Compartment{of(v){return new CompartmentInstance(this,v)}reconfigure(v){return Compartment.reconfigure.of({compartment:this,extension:v})}get(v){return v.config.compartments.get(this)}}class CompartmentInstance{constructor(v,S){this.compartment=v,this.inner=S}}class Configuration{constructor(v,S,R,T,A,k){for(this.base=v,this.compartments=S,this.dynamicSlots=R,this.address=T,this.staticValues=A,this.facets=k,this.statusTemplate=[];this.statusTemplate.length<R.length;)this.statusTemplate.push(0)}staticFacet(v){let S=this.address[v.id];return S==null?v.default:this.staticValues[S>>1]}static resolve(v,S,R){let T=[],A=Object.create(null),k=new Map;for(let N of flatten(v,S,k))N instanceof StateField?T.push(N):(A[N.facet.id]||(A[N.facet.id]=[])).push(N);let q=Object.create(null),M=[],D=[];for(let N of T)q[N.id]=D.length<<1,D.push(F=>N.slot(F));let L=R?.config.facets;for(let N in A){let F=A[N],H=F[0].facet,G=L&&L[N]||[];if(F.every(V=>V.type==0))if(q[H.id]=M.length<<1|1,sameArray$1(G,F))M.push(R.facet(H));else{let V=H.combine(F.map(j=>j.value));M.push(R&&H.compare(V,R.facet(H))?R.facet(H):V)}else{for(let V of F)V.type==0?(q[V.id]=M.length<<1|1,M.push(V.value)):(q[V.id]=D.length<<1,D.push(j=>V.dynamicSlot(j)));q[H.id]=D.length<<1,D.push(V=>dynamicFacetSlot(V,H,F))}}let I=D.map(N=>N(q));return new Configuration(v,k,I,q,M,A)}}function flatten(_,v,S){let R=[[],[],[],[],[]],T=new Map;function A(k,q){let M=T.get(k);if(M!=null){if(M<=q)return;let D=R[M].indexOf(k);D>-1&&R[M].splice(D,1),k instanceof CompartmentInstance&&S.delete(k.compartment)}if(T.set(k,q),Array.isArray(k))for(let D of k)A(D,q);else if(k instanceof CompartmentInstance){if(S.has(k.compartment))throw new RangeError("Duplicate use of compartment in extensions");let D=v.get(k.compartment)||k.inner;S.set(k.compartment,D),A(D,q)}else if(k instanceof PrecExtension)A(k.inner,k.prec);else if(k instanceof StateField)R[q].push(k),k.provides&&A(k.provides,q);else if(k instanceof FacetProvider)R[q].push(k),k.facet.extensions&&A(k.facet.extensions,Prec_.default);else{let D=k.extension;if(!D)throw new Error(`Unrecognized extension value in extension set (${k}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);A(D,q)}}return A(_,Prec_.default),R.reduce((k,q)=>k.concat(q))}function ensureAddr(_,v){if(v&1)return 2;let S=v>>1,R=_.status[S];if(R==4)throw new Error("Cyclic dependency between fields and/or facets");if(R&2)return R;_.status[S]=4;let T=_.computeSlot(_,_.config.dynamicSlots[S]);return _.status[S]=2|T}function getAddr(_,v){return v&1?_.config.staticValues[v>>1]:_.values[v>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:_=>_.some(v=>v),static:!0}),lineSeparator=Facet.define({combine:_=>_.length?_[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:_=>_.length?_[0]:!1});class Annotation{constructor(v,S){this.type=v,this.value=S}static define(){return new AnnotationType}}class AnnotationType{of(v){return new Annotation(this,v)}}class StateEffectType{constructor(v){this.map=v}of(v){return new StateEffect(this,v)}}class StateEffect{constructor(v,S){this.type=v,this.value=S}map(v){let S=this.type.map(this.value,v);return S===void 0?void 0:S==this.value?this:new StateEffect(this.type,S)}is(v){return this.type==v}static define(v={}){return new StateEffectType(v.map||(S=>S))}static mapEffects(v,S){if(!v.length)return v;let R=[];for(let T of v){let A=T.map(S);A&&R.push(A)}return R}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(v,S,R,T,A,k){this.startState=v,this.changes=S,this.selection=R,this.effects=T,this.annotations=A,this.scrollIntoView=k,this._doc=null,this._state=null,R&&checkSelection(R,S.newLength),A.some(q=>q.type==Transaction.time)||(this.annotations=A.concat(Transaction.time.of(Date.now())))}static create(v,S,R,T,A,k){return new Transaction(v,S,R,T,A,k)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(v){for(let S of this.annotations)if(S.type==v)return S.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(v){let S=this.annotation(Transaction.userEvent);return!!(S&&(S==v||S.length>v.length&&S.slice(0,v.length)==v&&S[v.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(_,v){let S=[];for(let R=0,T=0;;){let A,k;if(R<_.length&&(T==v.length||v[T]>=_[R]))A=_[R++],k=_[R++];else if(T<v.length)A=v[T++],k=v[T++];else return S;!S.length||S[S.length-1]<A?S.push(A,k):S[S.length-1]<k&&(S[S.length-1]=k)}}function mergeTransaction(_,v,S){var R;let T,A,k;return S?(T=v.changes,A=ChangeSet.empty(v.changes.length),k=_.changes.compose(v.changes)):(T=v.changes.map(_.changes),A=_.changes.mapDesc(v.changes,!0),k=_.changes.compose(T)),{changes:k,selection:v.selection?v.selection.map(A):(R=_.selection)===null||R===void 0?void 0:R.map(T),effects:StateEffect.mapEffects(_.effects,T).concat(StateEffect.mapEffects(v.effects,A)),annotations:_.annotations.length?_.annotations.concat(v.annotations):v.annotations,scrollIntoView:_.scrollIntoView||v.scrollIntoView}}function resolveTransactionInner(_,v,S){let R=v.selection,T=asArray$1(v.annotations);return v.userEvent&&(T=T.concat(Transaction.userEvent.of(v.userEvent))),{changes:v.changes instanceof ChangeSet?v.changes:ChangeSet.of(v.changes||[],S,_.facet(lineSeparator)),selection:R&&(R instanceof EditorSelection?R:EditorSelection.single(R.anchor,R.head)),effects:asArray$1(v.effects),annotations:T,scrollIntoView:!!v.scrollIntoView}}function resolveTransaction(_,v,S){let R=resolveTransactionInner(_,v.length?v[0]:{},_.doc.length);v.length&&v[0].filter===!1&&(S=!1);for(let A=1;A<v.length;A++){v[A].filter===!1&&(S=!1);let k=!!v[A].sequential;R=mergeTransaction(R,resolveTransactionInner(_,v[A],k?R.changes.newLength:_.doc.length),k)}let T=Transaction.create(_,R.changes,R.selection,R.effects,R.annotations,R.scrollIntoView);return extendTransaction(S?filterTransaction(T):T)}function filterTransaction(_){let v=_.startState,S=!0;for(let T of v.facet(changeFilter)){let A=T(_);if(A===!1){S=!1;break}Array.isArray(A)&&(S=S===!0?A:joinRanges(S,A))}if(S!==!0){let T,A;if(S===!1)A=_.changes.invertedDesc,T=ChangeSet.empty(v.doc.length);else{let k=_.changes.filter(S);T=k.changes,A=k.filtered.mapDesc(k.changes).invertedDesc}_=Transaction.create(v,T,_.selection&&_.selection.map(A),StateEffect.mapEffects(_.effects,A),_.annotations,_.scrollIntoView)}let R=v.facet(transactionFilter);for(let T=R.length-1;T>=0;T--){let A=R[T](_);A instanceof Transaction?_=A:Array.isArray(A)&&A.length==1&&A[0]instanceof Transaction?_=A[0]:_=resolveTransaction(v,asArray$1(A),!1)}return _}function extendTransaction(_){let v=_.startState,S=v.facet(transactionExtender),R=_;for(let T=S.length-1;T>=0;T--){let A=S[T](_);A&&Object.keys(A).length&&(R=mergeTransaction(R,resolveTransactionInner(v,A,_.changes.newLength),!0))}return R==_?_:Transaction.create(v,_.changes,_.selection,R.effects,R.annotations,R.scrollIntoView)}const none$2=[];function asArray$1(_){return _==null?none$2:Array.isArray(_)?_:[_]}var CharCategory=(function(_){return _[_.Word=0]="Word",_[_.Space=1]="Space",_[_.Other=2]="Other",_})(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(_){if(wordChar)return wordChar.test(_);for(let v=0;v<_.length;v++){let S=_[v];if(/\w/.test(S)||S>""&&(S.toUpperCase()!=S.toLowerCase()||nonASCIISingleCaseWordChar.test(S)))return!0}return!1}function makeCategorizer(_){return v=>{if(!/\S/.test(v))return CharCategory.Space;if(hasWordChar(v))return CharCategory.Word;for(let S=0;S<_.length;S++)if(v.indexOf(_[S])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(v,S,R,T,A,k){this.config=v,this.doc=S,this.selection=R,this.values=T,this.status=v.statusTemplate.slice(),this.computeSlot=A,k&&(k._state=this);for(let q=0;q<this.config.dynamicSlots.length;q++)ensureAddr(this,q<<1);this.computeSlot=null}field(v,S=!0){let R=this.config.address[v.id];if(R==null){if(S)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,R),getAddr(this,R)}update(...v){return resolveTransaction(this,v,!0)}applyTransaction(v){let S=this.config,{base:R,compartments:T}=S;for(let q of v.effects)q.is(Compartment.reconfigure)?(S&&(T=new Map,S.compartments.forEach((M,D)=>T.set(D,M)),S=null),T.set(q.value.compartment,q.value.extension)):q.is(StateEffect.reconfigure)?(S=null,R=q.value):q.is(StateEffect.appendConfig)&&(S=null,R=asArray$1(R).concat(q.value));let A;S?A=v.startState.values.slice():(S=Configuration.resolve(R,T,this),A=new EditorState(S,this.doc,this.selection,S.dynamicSlots.map(()=>null),(M,D)=>D.reconfigure(M,this),null).values);let k=v.startState.facet(allowMultipleSelections)?v.newSelection:v.newSelection.asSingle();new EditorState(S,v.newDoc,k,A,(q,M)=>M.update(q,v),v)}replaceSelection(v){return typeof v=="string"&&(v=this.toText(v)),this.changeByRange(S=>({changes:{from:S.from,to:S.to,insert:v},range:EditorSelection.cursor(S.from+v.length)}))}changeByRange(v){let S=this.selection,R=v(S.ranges[0]),T=this.changes(R.changes),A=[R.range],k=asArray$1(R.effects);for(let q=1;q<S.ranges.length;q++){let M=v(S.ranges[q]),D=this.changes(M.changes),L=D.map(T);for(let N=0;N<q;N++)A[N]=A[N].map(L);let I=T.mapDesc(D,!0);A.push(M.range.map(I)),T=T.compose(L),k=StateEffect.mapEffects(k,L).concat(StateEffect.mapEffects(asArray$1(M.effects),I))}return{changes:T,selection:EditorSelection.create(A,S.mainIndex),effects:k}}changes(v=[]){return v instanceof ChangeSet?v:ChangeSet.of(v,this.doc.length,this.facet(EditorState.lineSeparator))}toText(v){return Text.of(v.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(v=0,S=this.doc.length){return this.doc.sliceString(v,S,this.lineBreak)}facet(v){let S=this.config.address[v.id];return S==null?v.default:(ensureAddr(this,S),getAddr(this,S))}toJSON(v){let S={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(v)for(let R in v){let T=v[R];T instanceof StateField&&this.config.address[T.id]!=null&&(S[R]=T.spec.toJSON(this.field(v[R]),this))}return S}static fromJSON(v,S={},R){if(!v||typeof v.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let T=[];if(R){for(let A in R)if(Object.prototype.hasOwnProperty.call(v,A)){let k=R[A],q=v[A];T.push(k.init(M=>k.spec.fromJSON(q,M)))}}return EditorState.create({doc:v.doc,selection:EditorSelection.fromJSON(v.selection),extensions:S.extensions?T.concat([S.extensions]):T})}static create(v={}){let S=Configuration.resolve(v.extensions||[],new Map),R=v.doc instanceof Text?v.doc:Text.of((v.doc||"").split(S.staticFacet(EditorState.lineSeparator)||DefaultSplit)),T=v.selection?v.selection instanceof EditorSelection?v.selection:EditorSelection.single(v.selection.anchor,v.selection.head):EditorSelection.single(0);return checkSelection(T,R.length),S.staticFacet(allowMultipleSelections)||(T=T.asSingle()),new EditorState(S,R,T,S.dynamicSlots.map(()=>null),(A,k)=>k.create(A),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(v,...S){for(let R of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(R,v)){v=R[v];break}return S.length&&(v=v.replace(/\$(\$|\d*)/g,(R,T)=>{if(T=="$")return"$";let A=+(T||1);return!A||A>S.length?R:S[A-1]})),v}languageDataAt(v,S,R=-1){let T=[];for(let A of this.facet(languageData))for(let k of A(this,S,R))Object.prototype.hasOwnProperty.call(k,v)&&T.push(k[v]);return T}charCategorizer(v){return makeCategorizer(this.languageDataAt("wordChars",v).join(""))}wordAt(v){let{text:S,from:R,length:T}=this.doc.lineAt(v),A=this.charCategorizer(v),k=v-R,q=v-R;for(;k>0;){let M=findClusterBreak(S,k,!1);if(A(S.slice(M,k))!=CharCategory.Word)break;k=M}for(;q<T;){let M=findClusterBreak(S,q);if(A(S.slice(q,M))!=CharCategory.Word)break;q=M}return k==q?null:EditorSelection.range(k+R,q+R)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:_=>_.length?_[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(_,v){let S=Object.keys(_),R=Object.keys(v);return S.length==R.length&&S.every(T=>_[T]==v[T])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(_,v,S={}){let R={};for(let T of _)for(let A of Object.keys(T)){let k=T[A],q=R[A];if(q===void 0)R[A]=k;else if(!(q===k||k===void 0))if(Object.hasOwnProperty.call(S,A))R[A]=S[A](q,k);else throw new Error("Config merge conflict for field "+A)}for(let T in v)R[T]===void 0&&(R[T]=v[T]);return R}class RangeValue{eq(v){return this==v}range(v,S=v){return Range$1.create(v,S,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class qp{constructor(v,S,R){this.from=v,this.to=S,this.value=R}static create(v,S,R){return new qp(v,S,R)}};function cmpRange(_,v){return _.from-v.from||_.value.startSide-v.value.startSide}class Chunk{constructor(v,S,R,T){this.from=v,this.to=S,this.value=R,this.maxPoint=T}get length(){return this.to[this.to.length-1]}findIndex(v,S,R,T=0){let A=R?this.to:this.from;for(let k=T,q=A.length;;){if(k==q)return k;let M=k+q>>1,D=A[M]-v||(R?this.value[M].endSide:this.value[M].startSide)-S;if(M==k)return D>=0?k:q;D>=0?q=M:k=M+1}}between(v,S,R,T){for(let A=this.findIndex(S,-1e9,!0),k=this.findIndex(R,1e9,!1,A);A<k;A++)if(T(this.from[A]+v,this.to[A]+v,this.value[A])===!1)return!1}map(v,S){let R=[],T=[],A=[],k=-1,q=-1;for(let M=0;M<this.value.length;M++){let D=this.value[M],L=this.from[M]+v,I=this.to[M]+v,N,F;if(L==I){let H=S.mapPos(L,D.startSide,D.mapMode);if(H==null||(N=F=H,D.startSide!=D.endSide&&(F=S.mapPos(L,D.endSide),F<N)))continue}else if(N=S.mapPos(L,D.startSide),F=S.mapPos(I,D.endSide),N>F||N==F&&D.startSide>0&&D.endSide<=0)continue;(F-N||D.endSide-D.startSide)<0||(k<0&&(k=N),D.point&&(q=Math.max(q,F-N)),R.push(D),T.push(N-k),A.push(F-k))}return{mapped:R.length?new Chunk(T,A,R,q):null,pos:k}}}class RangeSet{constructor(v,S,R,T){this.chunkPos=v,this.chunk=S,this.nextLayer=R,this.maxPoint=T}static create(v,S,R,T){return new RangeSet(v,S,R,T)}get length(){let v=this.chunk.length-1;return v<0?0:Math.max(this.chunkEnd(v),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let v=this.nextLayer.size;for(let S of this.chunk)v+=S.value.length;return v}chunkEnd(v){return this.chunkPos[v]+this.chunk[v].length}update(v){let{add:S=[],sort:R=!1,filterFrom:T=0,filterTo:A=this.length}=v,k=v.filter;if(S.length==0&&!k)return this;if(R&&(S=S.slice().sort(cmpRange)),this.isEmpty)return S.length?RangeSet.of(S):this;let q=new LayerCursor(this,null,-1).goto(0),M=0,D=[],L=new RangeSetBuilder;for(;q.value||M<S.length;)if(M<S.length&&(q.from-S[M].from||q.startSide-S[M].value.startSide)>=0){let I=S[M++];L.addInner(I.from,I.to,I.value)||D.push(I)}else q.rangeIndex==1&&q.chunkIndex<this.chunk.length&&(M==S.length||this.chunkEnd(q.chunkIndex)<S[M].from)&&(!k||T>this.chunkEnd(q.chunkIndex)||A<this.chunkPos[q.chunkIndex])&&L.addChunk(this.chunkPos[q.chunkIndex],this.chunk[q.chunkIndex])?q.nextChunk():((!k||T>q.to||A<q.from||k(q.from,q.to,q.value))&&(L.addInner(q.from,q.to,q.value)||D.push(Range$1.create(q.from,q.to,q.value))),q.next());return L.finishInner(this.nextLayer.isEmpty&&!D.length?RangeSet.empty:this.nextLayer.update({add:D,filter:k,filterFrom:T,filterTo:A}))}map(v){if(v.empty||this.isEmpty)return this;let S=[],R=[],T=-1;for(let k=0;k<this.chunk.length;k++){let q=this.chunkPos[k],M=this.chunk[k],D=v.touchesRange(q,q+M.length);if(D===!1)T=Math.max(T,M.maxPoint),S.push(M),R.push(v.mapPos(q));else if(D===!0){let{mapped:L,pos:I}=M.map(q,v);L&&(T=Math.max(T,L.maxPoint),S.push(L),R.push(I))}}let A=this.nextLayer.map(v);return S.length==0?A:new RangeSet(R,S,A||RangeSet.empty,T)}between(v,S,R){if(!this.isEmpty){for(let T=0;T<this.chunk.length;T++){let A=this.chunkPos[T],k=this.chunk[T];if(S>=A&&v<=A+k.length&&k.between(A,v-A,S-A,R)===!1)return}this.nextLayer.between(v,S,R)}}iter(v=0){return HeapCursor.from([this]).goto(v)}get isEmpty(){return this.nextLayer==this}static iter(v,S=0){return HeapCursor.from(v).goto(S)}static compare(v,S,R,T,A=-1){let k=v.filter(I=>I.maxPoint>0||!I.isEmpty&&I.maxPoint>=A),q=S.filter(I=>I.maxPoint>0||!I.isEmpty&&I.maxPoint>=A),M=findSharedChunks(k,q,R),D=new SpanCursor(k,M,A),L=new SpanCursor(q,M,A);R.iterGaps((I,N,F)=>compare(D,I,L,N,F,T)),R.empty&&R.length==0&&compare(D,0,L,0,0,T)}static eq(v,S,R=0,T){T==null&&(T=999999999);let A=v.filter(L=>!L.isEmpty&&S.indexOf(L)<0),k=S.filter(L=>!L.isEmpty&&v.indexOf(L)<0);if(A.length!=k.length)return!1;if(!A.length)return!0;let q=findSharedChunks(A,k),M=new SpanCursor(A,q,0).goto(R),D=new SpanCursor(k,q,0).goto(R);for(;;){if(M.to!=D.to||!sameValues(M.active,D.active)||M.point&&(!D.point||!M.point.eq(D.point)))return!1;if(M.to>T)return!0;M.next(),D.next()}}static spans(v,S,R,T,A=-1){let k=new SpanCursor(v,null,A).goto(S),q=S,M=k.openStart;for(;;){let D=Math.min(k.to,R);if(k.point){let L=k.activeForPoint(k.to),I=k.pointFrom<S?L.length+1:k.point.startSide<0?L.length:Math.min(L.length,M);T.point(q,D,k.point,L,I,k.pointRank),M=Math.min(k.openEnd(D),L.length)}else D>q&&(T.span(q,D,k.active,M),M=k.openEnd(D));if(k.to>R)return M+(k.point&&k.to>R?1:0);q=k.to,k.next()}}static of(v,S=!1){let R=new RangeSetBuilder;for(let T of v instanceof Range$1?[v]:S?lazySort(v):v)R.add(T.from,T.to,T.value);return R.finish()}static join(v){if(!v.length)return RangeSet.empty;let S=v[v.length-1];for(let R=v.length-2;R>=0;R--)for(let T=v[R];T!=RangeSet.empty;T=T.nextLayer)S=new RangeSet(T.chunkPos,T.chunk,S,Math.max(T.maxPoint,S.maxPoint));return S}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(_){if(_.length>1)for(let v=_[0],S=1;S<_.length;S++){let R=_[S];if(cmpRange(v,R)>0)return _.slice().sort(cmpRange);v=R}return _}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(v){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,v&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(v,S,R){this.addInner(v,S,R)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(v,S,R)}addInner(v,S,R){let T=v-this.lastTo||R.startSide-this.last.endSide;if(T<=0&&(v-this.lastFrom||R.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return T<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=v),this.from.push(v-this.chunkStart),this.to.push(S-this.chunkStart),this.last=R,this.lastFrom=v,this.lastTo=S,this.value.push(R),R.point&&(this.maxPoint=Math.max(this.maxPoint,S-v)),!0)}addChunk(v,S){if((v-this.lastTo||S.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,S.maxPoint),this.chunks.push(S),this.chunkPos.push(v);let R=S.value.length-1;return this.last=S.value[R],this.lastFrom=S.from[R]+v,this.lastTo=S.to[R]+v,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(v){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return v;let S=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(v):v,this.setMaxPoint);return this.from=null,S}}function findSharedChunks(_,v,S){let R=new Map;for(let A of _)for(let k=0;k<A.chunk.length;k++)A.chunk[k].maxPoint<=0&&R.set(A.chunk[k],A.chunkPos[k]);let T=new Set;for(let A of v)for(let k=0;k<A.chunk.length;k++){let q=R.get(A.chunk[k]);q!=null&&(S?S.mapPos(q):q)==A.chunkPos[k]&&!S?.touchesRange(q,q+A.chunk[k].length)&&T.add(A.chunk[k])}return T}class LayerCursor{constructor(v,S,R,T=0){this.layer=v,this.skip=S,this.minPoint=R,this.rank=T}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(v,S=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(v,S,!1),this}gotoInner(v,S,R){for(;this.chunkIndex<this.layer.chunk.length;){let T=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(T)||this.layer.chunkEnd(this.chunkIndex)<v||T.maxPoint<this.minPoint))break;this.chunkIndex++,R=!1}if(this.chunkIndex<this.layer.chunk.length){let T=this.layer.chunk[this.chunkIndex].findIndex(v-this.layer.chunkPos[this.chunkIndex],S,!0);(!R||this.rangeIndex<T)&&this.setRangeIndex(T)}this.next()}forward(v,S){(this.to-v||this.endSide-S)<0&&this.gotoInner(v,S,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let v=this.layer.chunkPos[this.chunkIndex],S=this.layer.chunk[this.chunkIndex],R=v+S.from[this.rangeIndex];if(this.from=R,this.to=v+S.to[this.rangeIndex],this.value=S.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(v){if(v==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=v}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(v){return this.from-v.from||this.startSide-v.startSide||this.rank-v.rank||this.to-v.to||this.endSide-v.endSide}}class HeapCursor{constructor(v){this.heap=v}static from(v,S=null,R=-1){let T=[];for(let A=0;A<v.length;A++)for(let k=v[A];!k.isEmpty;k=k.nextLayer)k.maxPoint>=R&&T.push(new LayerCursor(k,S,R,A));return T.length==1?T[0]:new HeapCursor(T)}get startSide(){return this.value?this.value.startSide:0}goto(v,S=-1e9){for(let R of this.heap)R.goto(v,S);for(let R=this.heap.length>>1;R>=0;R--)heapBubble(this.heap,R);return this.next(),this}forward(v,S){for(let R of this.heap)R.forward(v,S);for(let R=this.heap.length>>1;R>=0;R--)heapBubble(this.heap,R);(this.to-v||this.value.endSide-S)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let v=this.heap[0];this.from=v.from,this.to=v.to,this.value=v.value,this.rank=v.rank,v.value&&v.next(),heapBubble(this.heap,0)}}}function heapBubble(_,v){for(let S=_[v];;){let R=(v<<1)+1;if(R>=_.length)break;let T=_[R];if(R+1<_.length&&T.compare(_[R+1])>=0&&(T=_[R+1],R++),S.compare(T)<0)break;_[R]=S,_[v]=T,v=R}}class SpanCursor{constructor(v,S,R){this.minPoint=R,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(v,S,R)}goto(v,S=-1e9){return this.cursor.goto(v,S),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=v,this.endSide=S,this.openStart=-1,this.next(),this}forward(v,S){for(;this.minActive>-1&&(this.activeTo[this.minActive]-v||this.active[this.minActive].endSide-S)<0;)this.removeActive(this.minActive);this.cursor.forward(v,S)}removeActive(v){remove(this.active,v),remove(this.activeTo,v),remove(this.activeRank,v),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(v){let S=0,{value:R,to:T,rank:A}=this.cursor;for(;S<this.activeRank.length&&(A-this.activeRank[S]||T-this.activeTo[S])>0;)S++;insert(this.active,S,R),insert(this.activeTo,S,T),insert(this.activeRank,S,A),v&&insert(v,S,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let v=this.to,S=this.point;this.point=null;let R=this.openStart<0?[]:null;for(;;){let T=this.minActive;if(T>-1&&(this.activeTo[T]-this.cursor.from||this.active[T].endSide-this.cursor.startSide)<0){if(this.activeTo[T]>v){this.to=this.activeTo[T],this.endSide=this.active[T].endSide;break}this.removeActive(T),R&&remove(R,T)}else if(this.cursor.value)if(this.cursor.from>v){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let A=this.cursor.value;if(!A.point)this.addActive(R),this.cursor.next();else if(S&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=A,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=A.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(R){this.openStart=0;for(let T=R.length-1;T>=0&&R[T]<v;T--)this.openStart++}}activeForPoint(v){if(!this.active.length)return this.active;let S=[];for(let R=this.active.length-1;R>=0&&!(this.activeRank[R]<this.pointRank);R--)(this.activeTo[R]>v||this.activeTo[R]==v&&this.active[R].endSide>=this.point.endSide)&&S.push(this.active[R]);return S.reverse()}openEnd(v){let S=0;for(let R=this.activeTo.length-1;R>=0&&this.activeTo[R]>v;R--)S++;return S}}function compare(_,v,S,R,T,A){_.goto(v),S.goto(R);let k=R+T,q=R,M=R-v;for(;;){let D=_.to+M-S.to,L=D||_.endSide-S.endSide,I=L<0?_.to+M:S.to,N=Math.min(I,k);if(_.point||S.point?_.point&&S.point&&(_.point==S.point||_.point.eq(S.point))&&sameValues(_.activeForPoint(_.to),S.activeForPoint(S.to))||A.comparePoint(q,N,_.point,S.point):N>q&&!sameValues(_.active,S.active)&&A.compareRange(q,N,_.active,S.active),I>k)break;(D||_.openEnd!=S.openEnd)&&A.boundChange&&A.boundChange(I),q=I,L<=0&&_.next(),L>=0&&S.next()}}function sameValues(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++)if(_[S]!=v[S]&&!_[S].eq(v[S]))return!1;return!0}function remove(_,v){for(let S=v,R=_.length-1;S<R;S++)_[S]=_[S+1];_.pop()}function insert(_,v,S){for(let R=_.length-1;R>=v;R--)_[R+1]=_[R];_[v]=S}function findMinIndex(_,v){let S=-1,R=1e9;for(let T=0;T<v.length;T++)(v[T]-R||_[T].endSide-_[S].endSide)<0&&(S=T,R=v[T]);return S}function countColumn(_,v,S=_.length){let R=0;for(let T=0;T<S&&T<_.length;)_.charCodeAt(T)==9?(R+=v-R%v,T++):(R++,T=findClusterBreak(_,T));return R}function findColumn(_,v,S,R){for(let T=0,A=0;;){if(A>=v)return T;if(T==_.length)break;A+=_.charCodeAt(T)==9?S-A%S:1,T=findClusterBreak(_,T)}return R===!0?-1:_.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(v,S){this.rules=[];let{finish:R}=S||{};function T(k){return/^@/.test(k)?[k]:k.split(/,\s*/)}function A(k,q,M,D){let L=[],I=/^@(\w+)\b/.exec(k[0]),N=I&&I[1]=="keyframes";if(I&&q==null)return M.push(k[0]+";");for(let F in q){let H=q[F];if(/&/.test(F))A(F.split(/,\s*/).map(G=>k.map(V=>G.replace(/&/,V))).reduce((G,V)=>G.concat(V)),H,M);else if(H&&typeof H=="object"){if(!I)throw new RangeError("The value of a property ("+F+") should be a primitive value.");A(T(F),H,L,N)}else H!=null&&L.push(F.replace(/_.*/,"").replace(/[A-Z]/g,G=>"-"+G.toLowerCase())+": "+H+";")}(L.length||N)&&M.push((R&&!I&&!D?k.map(R):k).join(", ")+" {"+L.join(" ")+"}")}for(let k in v)A(T(k),v[k],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let v=top[COUNT]||1;return top[COUNT]=v+1,C+v.toString(36)}static mount(v,S,R){let T=v[SET],A=R&&R.nonce;T?A&&T.setNonce(A):T=new StyleSet(v,A),T.mount(Array.isArray(S)?S:[S],v)}}let adoptedSet=new Map;class StyleSet{constructor(v,S){let R=v.ownerDocument||v,T=R.defaultView;if(!v.head&&v.adoptedStyleSheets&&T.CSSStyleSheet){let A=adoptedSet.get(R);if(A)return v[SET]=A;this.sheet=new T.CSSStyleSheet,adoptedSet.set(R,this)}else this.styleTag=R.createElement("style"),S&&this.styleTag.setAttribute("nonce",S);this.modules=[],v[SET]=this}mount(v,S){let R=this.sheet,T=0,A=0;for(let k=0;k<v.length;k++){let q=v[k],M=this.modules.indexOf(q);if(M<A&&M>-1&&(this.modules.splice(M,1),A--,M=-1),M==-1){if(this.modules.splice(A++,0,q),R)for(let D=0;D<q.rules.length;D++)R.insertRule(q.rules[D],T++)}else{for(;A<M;)T+=this.modules[A++].rules.length;T+=q.rules.length,A++}}if(R)S.adoptedStyleSheets.indexOf(this.sheet)<0&&(S.adoptedStyleSheets=[this.sheet,...S.adoptedStyleSheets]);else{let k="";for(let M=0;M<this.modules.length;M++)k+=this.modules[M].getRules()+`
`;this.styleTag.textContent=k;let q=S.head||S;this.styleTag.parentNode!=q&&q.insertBefore(this.styleTag,q.firstChild)}}setNonce(v){this.styleTag&&this.styleTag.getAttribute("nonce")!=v&&this.styleTag.setAttribute("nonce",v)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(_){var v=mac&&_.metaKey&&_.shiftKey&&!_.ctrlKey&&!_.altKey||ie$1&&_.shiftKey&&_.key&&_.key.length==1||_.key=="Unidentified",S=!v&&_.key||(_.shiftKey?shift:base)[_.keyCode]||_.key||"Unidentified";return S=="Esc"&&(S="Escape"),S=="Del"&&(S="Delete"),S=="Left"&&(S="ArrowLeft"),S=="Up"&&(S="ArrowUp"),S=="Right"&&(S="ArrowRight"),S=="Down"&&(S="ArrowDown"),S}function crelt(){var _=arguments[0];typeof _=="string"&&(_=document.createElement(_));var v=1,S=arguments[1];if(S&&typeof S=="object"&&S.nodeType==null&&!Array.isArray(S)){for(var R in S)if(Object.prototype.hasOwnProperty.call(S,R)){var T=S[R];typeof T=="string"?_.setAttribute(R,T):T!=null&&(_[R]=T)}v++}for(;v<arguments.length;v++)add(_,arguments[v]);return _}function add(_,v){if(typeof v=="string")_.appendChild(document.createTextNode(v));else if(v!=null)if(v.nodeType!=null)_.appendChild(v);else if(Array.isArray(v))for(var S=0;S<v.length;S++)add(_,v[S]);else throw new RangeError("Unsupported child node: "+v)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function getSelection(_){let v;return _.nodeType==11?v=_.getSelection?_:_.ownerDocument:v=_,v.getSelection()}function contains(_,v){return v?_==v||_.contains(v.nodeType!=1?v.parentNode:v):!1}function hasSelection(_,v){if(!v.anchorNode)return!1;try{return contains(_,v.anchorNode)}catch{return!1}}function clientRectsFor(_){return _.nodeType==3?textRange(_,0,_.nodeValue.length).getClientRects():_.nodeType==1?_.getClientRects():[]}function isEquivalentPosition(_,v,S,R){return S?scanFor(_,v,S,R,-1)||scanFor(_,v,S,R,1):!1}function domIndex(_){for(var v=0;;v++)if(_=_.previousSibling,!_)return v}function isBlockElement(_){return _.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(_.nodeName)}function scanFor(_,v,S,R,T){for(;;){if(_==S&&v==R)return!0;if(v==(T<0?0:maxOffset(_))){if(_.nodeName=="DIV")return!1;let A=_.parentNode;if(!A||A.nodeType!=1)return!1;v=domIndex(_)+(T<0?0:1),_=A}else if(_.nodeType==1){if(_=_.childNodes[v+(T<0?-1:0)],_.nodeType==1&&_.contentEditable=="false")return!1;v=T<0?maxOffset(_):0}else return!1}}function maxOffset(_){return _.nodeType==3?_.nodeValue.length:_.childNodes.length}function flattenRect(_,v){let S=v?_.left:_.right;return{left:S,right:S,top:_.top,bottom:_.bottom}}function windowRect(_){let v=_.visualViewport;return v?{left:0,right:v.width,top:0,bottom:v.height}:{left:0,right:_.innerWidth,top:0,bottom:_.innerHeight}}function getScale(_,v){let S=v.width/_.offsetWidth,R=v.height/_.offsetHeight;return(S>.995&&S<1.005||!isFinite(S)||Math.abs(v.width-_.offsetWidth)<1)&&(S=1),(R>.995&&R<1.005||!isFinite(R)||Math.abs(v.height-_.offsetHeight)<1)&&(R=1),{scaleX:S,scaleY:R}}function scrollRectIntoView(_,v,S,R,T,A,k,q){let M=_.ownerDocument,D=M.defaultView||window;for(let L=_,I=!1;L&&!I;)if(L.nodeType==1){let N,F=L==M.body,H=1,G=1;if(F)N=windowRect(D);else{if(/^(fixed|sticky)$/.test(getComputedStyle(L).position)&&(I=!0),L.scrollHeight<=L.clientHeight&&L.scrollWidth<=L.clientWidth){L=L.assignedSlot||L.parentNode;continue}let W=L.getBoundingClientRect();({scaleX:H,scaleY:G}=getScale(L,W)),N={left:W.left,right:W.left+L.clientWidth*H,top:W.top,bottom:W.top+L.clientHeight*G}}let V=0,j=0;if(T=="nearest")v.top<N.top?(j=v.top-(N.top+k),S>0&&v.bottom>N.bottom+j&&(j=v.bottom-N.bottom+k)):v.bottom>N.bottom&&(j=v.bottom-N.bottom+k,S<0&&v.top-j<N.top&&(j=v.top-(N.top+k)));else{let W=v.bottom-v.top,X=N.bottom-N.top;j=(T=="center"&&W<=X?v.top+W/2-X/2:T=="start"||T=="center"&&S<0?v.top-k:v.bottom-X+k)-N.top}if(R=="nearest"?v.left<N.left?(V=v.left-(N.left+A),S>0&&v.right>N.right+V&&(V=v.right-N.right+A)):v.right>N.right&&(V=v.right-N.right+A,S<0&&v.left<N.left+V&&(V=v.left-(N.left+A))):V=(R=="center"?v.left+(v.right-v.left)/2-(N.right-N.left)/2:R=="start"==q?v.left-A:v.right-(N.right-N.left)+A)-N.left,V||j)if(F)D.scrollBy(V,j);else{let W=0,X=0;if(j){let J=L.scrollTop;L.scrollTop+=j/G,X=(L.scrollTop-J)*G}if(V){let J=L.scrollLeft;L.scrollLeft+=V/H,W=(L.scrollLeft-J)*H}v={left:v.left-W,top:v.top-X,right:v.right-W,bottom:v.bottom-X},W&&Math.abs(W-V)<1&&(R="nearest"),X&&Math.abs(X-j)<1&&(T="nearest")}if(F)break;(v.top<N.top||v.bottom>N.bottom||v.left<N.left||v.right>N.right)&&(v={left:Math.max(v.left,N.left),right:Math.min(v.right,N.right),top:Math.max(v.top,N.top),bottom:Math.min(v.bottom,N.bottom)}),L=L.assignedSlot||L.parentNode}else if(L.nodeType==11)L=L.host;else break}function scrollableParents(_){let v=_.ownerDocument,S,R;for(let T=_.parentNode;T&&!(T==v.body||S&&R);)if(T.nodeType==1)!R&&T.scrollHeight>T.clientHeight&&(R=T),!S&&T.scrollWidth>T.clientWidth&&(S=T),T=T.assignedSlot||T.parentNode;else if(T.nodeType==11)T=T.host;else break;return{x:S,y:R}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(v){return this.anchorNode==v.anchorNode&&this.anchorOffset==v.anchorOffset&&this.focusNode==v.focusNode&&this.focusOffset==v.focusOffset}setRange(v){let{anchorNode:S,focusNode:R}=v;this.set(S,Math.min(v.anchorOffset,S?maxOffset(S):0),R,Math.min(v.focusOffset,R?maxOffset(R):0))}set(v,S,R,T){this.anchorNode=v,this.anchorOffset=S,this.focusNode=R,this.focusOffset=T}}let preventScrollSupported=null;browser.safari&&browser.safari_version>=26&&(preventScrollSupported=!1);function focusPreventScroll(_){if(_.setActive)return _.setActive();if(preventScrollSupported)return _.focus(preventScrollSupported);let v=[];for(let S=_;S&&(v.push(S,S.scrollTop,S.scrollLeft),S!=S.ownerDocument);S=S.parentNode);if(_.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let S=0;S<v.length;){let R=v[S++],T=v[S++],A=v[S++];R.scrollTop!=T&&(R.scrollTop=T),R.scrollLeft!=A&&(R.scrollLeft=A)}}}let scratchRange;function textRange(_,v,S=v){let R=scratchRange||(scratchRange=document.createRange());return R.setEnd(_,S),R.setStart(_,v),R}function dispatchKey(_,v,S,R){let T={key:v,code:v,keyCode:S,which:S,cancelable:!0};R&&({altKey:T.altKey,ctrlKey:T.ctrlKey,shiftKey:T.shiftKey,metaKey:T.metaKey}=R);let A=new KeyboardEvent("keydown",T);A.synthetic=!0,_.dispatchEvent(A);let k=new KeyboardEvent("keyup",T);return k.synthetic=!0,_.dispatchEvent(k),A.defaultPrevented||k.defaultPrevented}function getRoot(_){for(;_;){if(_&&(_.nodeType==9||_.nodeType==11&&_.host))return _;_=_.assignedSlot||_.parentNode}return null}function clearAttributes(_){for(;_.attributes.length;)_.removeAttributeNode(_.attributes[0])}function atElementStart(_,v){let S=v.focusNode,R=v.focusOffset;if(!S||v.anchorNode!=S||v.anchorOffset!=R)return!1;for(R=Math.min(R,maxOffset(S));;)if(R){if(S.nodeType!=1)return!1;let T=S.childNodes[R-1];T.contentEditable=="false"?R--:(S=T,R=maxOffset(S))}else{if(S==_)return!0;R=domIndex(S),S=S.parentNode}}function isScrolledToBottom(_){return _.scrollTop>Math.max(1,_.scrollHeight-_.clientHeight-4)}function textNodeBefore(_,v){for(let S=_,R=v;;){if(S.nodeType==3&&R>0)return{node:S,offset:R};if(S.nodeType==1&&R>0){if(S.contentEditable=="false")return null;S=S.childNodes[R-1],R=maxOffset(S)}else if(S.parentNode&&!isBlockElement(S))R=domIndex(S),S=S.parentNode;else return null}}function textNodeAfter(_,v){for(let S=_,R=v;;){if(S.nodeType==3&&R<S.nodeValue.length)return{node:S,offset:R};if(S.nodeType==1&&R<S.childNodes.length){if(S.contentEditable=="false")return null;S=S.childNodes[R],R=0}else if(S.parentNode&&!isBlockElement(S))R=domIndex(S)+1,S=S.parentNode;else return null}}class DOMPos{constructor(v,S,R=!0){this.node=v,this.offset=S,this.precise=R}static before(v,S){return new DOMPos(v.parentNode,domIndex(v),S)}static after(v,S){return new DOMPos(v.parentNode,domIndex(v)+1,S)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(v){let S=this.posAtStart;for(let R of this.children){if(R==v)return S;S+=R.length+R.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(v){return this.posBefore(v)+v.length}sync(v,S){if(this.flags&2){let R=this.dom,T=null,A;for(let k of this.children){if(k.flags&7){if(!k.dom&&(A=T?T.nextSibling:R.firstChild)){let q=ContentView.get(A);(!q||!q.parent&&q.canReuseDOM(k))&&k.reuseDOM(A)}k.sync(v,S),k.flags&=-8}if(A=T?T.nextSibling:R.firstChild,S&&!S.written&&S.node==R&&A!=k.dom&&(S.written=!0),k.dom.parentNode==R)for(;A&&A!=k.dom;)A=rm$1(A);else R.insertBefore(k.dom,A);T=k.dom}for(A=T?T.nextSibling:R.firstChild,A&&S&&S.node==R&&(S.written=!0);A;)A=rm$1(A)}else if(this.flags&1)for(let R of this.children)R.flags&7&&(R.sync(v,S),R.flags&=-8)}reuseDOM(v){}localPosFromDOM(v,S){let R;if(v==this.dom)R=this.dom.childNodes[S];else{let T=maxOffset(v)==0?0:S==0?-1:1;for(;;){let A=v.parentNode;if(A==this.dom)break;T==0&&A.firstChild!=A.lastChild&&(v==A.firstChild?T=-1:T=1),v=A}T<0?R=v:R=v.nextSibling}if(R==this.dom.firstChild)return 0;for(;R&&!ContentView.get(R);)R=R.nextSibling;if(!R)return this.length;for(let T=0,A=0;;T++){let k=this.children[T];if(k.dom==R)return A;A+=k.length+k.breakAfter}}domBoundsAround(v,S,R=0){let T=-1,A=-1,k=-1,q=-1;for(let M=0,D=R,L=R;M<this.children.length;M++){let I=this.children[M],N=D+I.length;if(D<v&&N>S)return I.domBoundsAround(v,S,D);if(N>=v&&T==-1&&(T=M,A=D),D>S&&I.dom.parentNode==this.dom){k=M,q=L;break}L=N,D=N+I.breakAfter}return{from:A,to:q<0?R+this.length:q,startDOM:(T?this.children[T-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:k<this.children.length&&k>=0?this.children[k].dom:null}}markDirty(v=!1){this.flags|=2,this.markParentsDirty(v)}markParentsDirty(v){for(let S=this.parent;S;S=S.parent){if(v&&(S.flags|=2),S.flags&1)return;S.flags|=1,v=!1}}setParent(v){this.parent!=v&&(this.parent=v,this.flags&7&&this.markParentsDirty(!0))}setDOM(v){this.dom!=v&&(this.dom&&(this.dom.cmView=null),this.dom=v,v.cmView=this)}get rootView(){for(let v=this;;){let S=v.parent;if(!S)return v;v=S}}replaceChildren(v,S,R=noChildren){this.markDirty();for(let T=v;T<S;T++){let A=this.children[T];A.parent==this&&R.indexOf(A)<0&&A.destroy()}R.length<250?this.children.splice(v,S-v,...R):this.children=[].concat(this.children.slice(0,v),R,this.children.slice(S));for(let T=0;T<R.length;T++)R[T].setParent(this)}ignoreMutation(v){return!1}ignoreEvent(v){return!1}childCursor(v=this.length){return new ChildCursor(this.children,v,this.children.length)}childPos(v,S=1){return this.childCursor().findPos(v,S)}toString(){let v=this.constructor.name.replace("View","");return v+(this.children.length?"("+this.children.join()+")":this.length?"["+(v=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(v){return v.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(v,S,R,T,A,k){return!1}become(v){return!1}canReuseDOM(v){return v.constructor==this.constructor&&!((this.flags|v.flags)&8)}getSide(){return 0}destroy(){for(let v of this.children)v.parent==this&&v.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(_){let v=_.nextSibling;return _.parentNode.removeChild(_),v}class ChildCursor{constructor(v,S,R){this.children=v,this.pos=S,this.i=R,this.off=0}findPos(v,S=1){for(;;){if(v>this.pos||v==this.pos&&(S>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=v-this.pos,this;let R=this.children[--this.i];this.pos-=R.length+R.breakAfter}}}function replaceRange(_,v,S,R,T,A,k,q,M){let{children:D}=_,L=D.length?D[v]:null,I=A.length?A[A.length-1]:null,N=I?I.breakAfter:k;if(!(v==R&&L&&!k&&!N&&A.length<2&&L.merge(S,T,A.length?I:null,S==0,q,M))){if(R<D.length){let F=D[R];F&&(T<F.length||F.breakAfter&&I?.breakAfter)?(v==R&&(F=F.split(T),T=0),!N&&I&&F.merge(0,T,I,!0,0,M)?A[A.length-1]=F:((T||F.children.length&&!F.children[0].length)&&F.merge(0,T,null,!1,0,M),A.push(F))):F?.breakAfter&&(I?I.breakAfter=1:k=1),R++}for(L&&(L.breakAfter=k,S>0&&(!k&&A.length&&L.merge(S,L.length,A[0],!1,q,0)?L.breakAfter=A.shift().breakAfter:(S<L.length||L.children.length&&L.children[L.children.length-1].length==0)&&L.merge(S,L.length,null,!1,q,0),v++));v<R&&A.length;)if(D[R-1].become(A[A.length-1]))R--,A.pop(),M=A.length?0:q;else if(D[v].become(A[0]))v++,A.shift(),q=A.length?0:M;else break;!A.length&&v&&R<D.length&&!D[v-1].breakAfter&&D[R].merge(0,0,D[v-1],!1,q,M)&&v--,(v<R||A.length)&&_.replaceChildren(v,R,A)}}function mergeChildrenInto(_,v,S,R,T,A){let k=_.childCursor(),{i:q,off:M}=k.findPos(S,1),{i:D,off:L}=k.findPos(v,-1),I=v-S;for(let N of R)I+=N.length;_.length+=I,replaceRange(_,D,L,q,M,R,0,T,A)}const MaxJoinLen=256;class TextView extends ContentView{constructor(v){super(),this.text=v}get length(){return this.text.length}createDOM(v){this.setDOM(v||document.createTextNode(this.text))}sync(v,S){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(S&&S.node==this.dom&&(S.written=!0),this.dom.nodeValue=this.text)}reuseDOM(v){v.nodeType==3&&this.createDOM(v)}merge(v,S,R){return this.flags&8||R&&(!(R instanceof TextView)||this.length-(S-v)+R.length>MaxJoinLen||R.flags&8)?!1:(this.text=this.text.slice(0,v)+(R?R.text:"")+this.text.slice(S),this.markDirty(),!0)}split(v){let S=new TextView(this.text.slice(v));return this.text=this.text.slice(0,v),this.markDirty(),S.flags|=this.flags&8,S}localPosFromDOM(v,S){return v==this.dom?S:S?this.text.length:0}domAtPos(v){return new DOMPos(this.dom,v)}domBoundsAround(v,S,R){return{from:R,to:R+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(v,S){return textCoords(this.dom,v,S)}}class MarkView extends ContentView{constructor(v,S=[],R=0){super(),this.mark=v,this.children=S,this.length=R;for(let T of S)T.setParent(this)}setAttrs(v){if(clearAttributes(v),this.mark.class&&(v.className=this.mark.class),this.mark.attrs)for(let S in this.mark.attrs)v.setAttribute(S,this.mark.attrs[S]);return v}canReuseDOM(v){return super.canReuseDOM(v)&&!((this.flags|v.flags)&8)}reuseDOM(v){v.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(v),this.flags|=6)}sync(v,S){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(v,S)}merge(v,S,R,T,A,k){return R&&(!(R instanceof MarkView&&R.mark.eq(this.mark))||v&&A<=0||S<this.length&&k<=0)?!1:(mergeChildrenInto(this,v,S,R?R.children.slice():[],A-1,k-1),this.markDirty(),!0)}split(v){let S=[],R=0,T=-1,A=0;for(let q of this.children){let M=R+q.length;M>v&&S.push(R<v?q.split(v-R):q),T<0&&R>=v&&(T=A),R=M,A++}let k=this.length-v;return this.length=v,T>-1&&(this.children.length=T,this.markDirty()),new MarkView(this.mark,S,k)}domAtPos(v){return inlineDOMAtPos(this,v)}coordsAt(v,S){return coordsInChildren(this,v,S)}}function textCoords(_,v,S){let R=_.nodeValue.length;v>R&&(v=R);let T=v,A=v,k=0;v==0&&S<0||v==R&&S>=0?browser.chrome||browser.gecko||(v?(T--,k=1):A<R&&(A++,k=-1)):S<0?T--:A<R&&A++;let q=textRange(_,T,A).getClientRects();if(!q.length)return null;let M=q[(k?k<0:S>=0)?0:q.length-1];return browser.safari&&!k&&M.width==0&&(M=Array.prototype.find.call(q,D=>D.width)||M),k?flattenRect(M,k<0):M||null}class WidgetView extends ContentView{static create(v,S,R){return new WidgetView(v,S,R)}constructor(v,S,R){super(),this.widget=v,this.length=S,this.side=R,this.prevWidget=null}split(v){let S=WidgetView.create(this.widget,this.length-v,this.side);return this.length-=v,S}sync(v){(!this.dom||!this.widget.updateDOM(this.dom,v))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(v)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(v,S,R,T,A,k){return R&&(!(R instanceof WidgetView)||!this.widget.compare(R.widget)||v>0&&A<=0||S<this.length&&k<=0)?!1:(this.length=v+(R?R.length:0)+(this.length-S),!0)}become(v){return v instanceof WidgetView&&v.side==this.side&&this.widget.constructor==v.widget.constructor?(this.widget.compare(v.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=v.widget,this.length=v.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(v){return this.widget.ignoreEvent(v)}get overrideDOMText(){if(this.length==0)return Text.empty;let v=this;for(;v.parent;)v=v.parent;let{view:S}=v,R=S&&S.state.doc,T=this.posAtStart;return R?R.slice(T,T+this.length):Text.empty}domAtPos(v){return(this.length?v==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,v==this.length)}domBoundsAround(){return null}coordsAt(v,S){let R=this.widget.coordsAt(this.dom,v,S);if(R)return R;let T=this.dom.getClientRects(),A=null;if(!T.length)return null;let k=this.side?this.side<0:v>0;for(let q=k?T.length-1:0;A=T[q],!(v>0?q==0:q==T.length-1||A.top<A.bottom);q+=k?-1:1);return flattenRect(A,!k)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(v){super(),this.side=v}get length(){return 0}merge(){return!1}become(v){return v instanceof WidgetBufferView&&v.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let v=document.createElement("img");v.className="cm-widgetBuffer",v.setAttribute("aria-hidden","true"),this.setDOM(v)}}getSide(){return this.side}domAtPos(v){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(v){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(_,v){let S=_.dom,{children:R}=_,T=0;for(let A=0;T<R.length;T++){let k=R[T],q=A+k.length;if(!(q==A&&k.getSide()<=0)){if(v>A&&v<q&&k.dom.parentNode==S)return k.domAtPos(v-A);if(v<=A)break;A=q}}for(let A=T;A>0;A--){let k=R[A-1];if(k.dom.parentNode==S)return k.domAtPos(k.length)}for(let A=T;A<R.length;A++){let k=R[A];if(k.dom.parentNode==S)return k.domAtPos(0)}return new DOMPos(S,0)}function joinInlineInto(_,v,S){let R,{children:T}=_;S>0&&v instanceof MarkView&&T.length&&(R=T[T.length-1])instanceof MarkView&&R.mark.eq(v.mark)?joinInlineInto(R,v.children[0],S-1):(T.push(v),v.setParent(_)),_.length+=v.length}function coordsInChildren(_,v,S){let R=null,T=-1,A=null,k=-1;function q(D,L){for(let I=0,N=0;I<D.children.length&&N<=L;I++){let F=D.children[I],H=N+F.length;H>=L&&(F.children.length?q(F,L-N):(!A||A.isHidden&&(S>0||onSameLine(A,F)))&&(H>L||N==H&&F.getSide()>0)?(A=F,k=L-N):(N<L||N==H&&F.getSide()<0&&!F.isHidden)&&(R=F,T=L-N)),N=H}}q(_,v);let M=(S<0?R:A)||R||A;return M?M.coordsAt(Math.max(0,M==R?T:k),S):fallbackRect(_)}function fallbackRect(_){let v=_.dom.lastChild;if(!v)return _.dom.getBoundingClientRect();let S=clientRectsFor(v);return S[S.length-1]||null}function onSameLine(_,v){let S=_.coordsAt(0,1),R=v.coordsAt(0,1);return S&&R&&R.top<S.bottom}function combineAttrs(_,v){for(let S in _)S=="class"&&v.class?v.class+=" "+_.class:S=="style"&&v.style?v.style+=";"+_.style:v[S]=_[S];return v}const noAttrs$1=Object.create(null);function attrsEq(_,v,S){if(_==v)return!0;_||(_=noAttrs$1),v||(v=noAttrs$1);let R=Object.keys(_),T=Object.keys(v);if(R.length-(S&&R.indexOf(S)>-1?1:0)!=T.length-(S&&T.indexOf(S)>-1?1:0))return!1;for(let A of R)if(A!=S&&(T.indexOf(A)==-1||_[A]!==v[A]))return!1;return!0}function updateAttrs(_,v,S){let R=!1;if(v)for(let T in v)S&&T in S||(R=!0,T=="style"?_.style.cssText="":_.removeAttribute(T));if(S)for(let T in S)v&&v[T]==S[T]||(R=!0,T=="style"?_.style.cssText=S[T]:_.setAttribute(T,S[T]));return R}function getAttrs(_){let v=Object.create(null);for(let S=0;S<_.attributes.length;S++){let R=_.attributes[S];v[R.name]=R.value}return v}class WidgetType{eq(v){return!1}updateDOM(v,S){return!1}compare(v){return this==v||this.constructor==v.constructor&&this.eq(v)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(v){return!0}coordsAt(v,S,R){return null}get isHidden(){return!1}get editable(){return!1}destroy(v){}}var BlockType=(function(_){return _[_.Text=0]="Text",_[_.WidgetBefore=1]="WidgetBefore",_[_.WidgetAfter=2]="WidgetAfter",_[_.WidgetRange=3]="WidgetRange",_})(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(v,S,R,T){super(),this.startSide=v,this.endSide=S,this.widget=R,this.spec=T}get heightRelevant(){return!1}static mark(v){return new MarkDecoration(v)}static widget(v){let S=Math.max(-1e4,Math.min(1e4,v.side||0)),R=!!v.block;return S+=R&&!v.inlineOrder?S>0?3e8:-4e8:S>0?1e8:-1e8,new PointDecoration(v,S,S,R,v.widget||null,!1)}static replace(v){let S=!!v.block,R,T;if(v.isBlockGap)R=-5e8,T=4e8;else{let{start:A,end:k}=getInclusive(v,S);R=(A?S?-3e8:-1:5e8)-1,T=(k?S?2e8:1:-6e8)+1}return new PointDecoration(v,R,T,S,v.widget||null,!0)}static line(v){return new LineDecoration(v)}static set(v,S=!1){return RangeSet.of(v,S)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(v){let{start:S,end:R}=getInclusive(v);super(S?-1:5e8,R?1:-6e8,null,v),this.tagName=v.tagName||"span",this.class=v.class||"",this.attrs=v.attributes||null}eq(v){var S,R;return this==v||v instanceof MarkDecoration&&this.tagName==v.tagName&&(this.class||((S=this.attrs)===null||S===void 0?void 0:S.class))==(v.class||((R=v.attrs)===null||R===void 0?void 0:R.class))&&attrsEq(this.attrs,v.attrs,"class")}range(v,S=v){if(v>=S)throw new RangeError("Mark decorations may not be empty");return super.range(v,S)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(v){super(-2e8,-2e8,null,v)}eq(v){return v instanceof LineDecoration&&this.spec.class==v.spec.class&&attrsEq(this.spec.attributes,v.spec.attributes)}range(v,S=v){if(S!=v)throw new RangeError("Line decoration ranges must be zero-length");return super.range(v,S)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(v,S,R,T,A,k){super(S,R,A,v),this.block=T,this.isReplace=k,this.mapMode=T?S<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(v){return v instanceof PointDecoration&&widgetsEq(this.widget,v.widget)&&this.block==v.block&&this.startSide==v.startSide&&this.endSide==v.endSide}range(v,S=v){if(this.isReplace&&(v>S||v==S&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&S!=v)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(v,S)}}PointDecoration.prototype.point=!0;function getInclusive(_,v=!1){let{inclusiveStart:S,inclusiveEnd:R}=_;return S==null&&(S=_.inclusive),R==null&&(R=_.inclusive),{start:S??v,end:R??v}}function widgetsEq(_,v){return _==v||!!(_&&v&&_.compare(v))}function addRange(_,v,S,R=0){let T=S.length-1;T>=0&&S[T]+R>=_?S[T]=Math.max(S[T],v):S.push(_,v)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(v,S,R,T,A,k){if(R){if(!(R instanceof LineView))return!1;this.dom||R.transferDOM(this)}return T&&this.setDeco(R?R.attrs:null),mergeChildrenInto(this,v,S,R?R.children.slice():[],A,k),!0}split(v){let S=new LineView;if(S.breakAfter=this.breakAfter,this.length==0)return S;let{i:R,off:T}=this.childPos(v);T&&(S.append(this.children[R].split(T),0),this.children[R].merge(T,this.children[R].length,null,!1,0,0),R++);for(let A=R;A<this.children.length;A++)S.append(this.children[A],0);for(;R>0&&this.children[R-1].length==0;)this.children[--R].destroy();return this.children.length=R,this.markDirty(),this.length=v,S}transferDOM(v){this.dom&&(this.markDirty(),v.setDOM(this.dom),v.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(v){attrsEq(this.attrs,v)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=v)}append(v,S){joinInlineInto(this,v,S)}addLineDeco(v){let S=v.spec.attributes,R=v.spec.class;S&&(this.attrs=combineAttrs(S,this.attrs||{})),R&&(this.attrs=combineAttrs({class:R},this.attrs||{}))}domAtPos(v){return inlineDOMAtPos(this,v)}reuseDOM(v){v.nodeName=="DIV"&&(this.setDOM(v),this.flags|=6)}sync(v,S){var R;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(v,S);let T=this.dom.lastChild;for(;T&&ContentView.get(T)instanceof MarkView;)T=T.lastChild;if(!T||!this.length||T.nodeName!="BR"&&((R=ContentView.get(T))===null||R===void 0?void 0:R.isEditable)==!1&&(!browser.ios||!this.children.some(A=>A instanceof TextView))){let A=document.createElement("BR");A.cmIgnore=!0,this.dom.appendChild(A)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let v=0,S;for(let R of this.children){if(!(R instanceof TextView)||/[^ -~]/.test(R.text))return null;let T=clientRectsFor(R.dom);if(T.length!=1)return null;v+=T[0].width,S=T[0].height}return v?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:v/this.length,textHeight:S}:null}coordsAt(v,S){let R=coordsInChildren(this,v,S);if(!this.children.length&&R&&this.parent){let{heightOracle:T}=this.parent.view.viewState,A=R.bottom-R.top;if(Math.abs(A-T.lineHeight)<2&&T.textHeight<A){let k=(A-T.textHeight)/2;return{top:R.top+k,bottom:R.bottom-k,left:R.left,right:R.left}}}return R}become(v){return v instanceof LineView&&this.children.length==0&&v.children.length==0&&attrsEq(this.attrs,v.attrs)&&this.breakAfter==v.breakAfter}covers(){return!0}static find(v,S){for(let R=0,T=0;R<v.children.length;R++){let A=v.children[R],k=T+A.length;if(k>=S){if(A instanceof LineView)return A;if(k>S)break}T=k+A.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(v,S,R){super(),this.widget=v,this.length=S,this.deco=R,this.breakAfter=0,this.prevWidget=null}merge(v,S,R,T,A,k){return R&&(!(R instanceof BlockWidgetView)||!this.widget.compare(R.widget)||v>0&&A<=0||S<this.length&&k<=0)?!1:(this.length=v+(R?R.length:0)+(this.length-S),!0)}domAtPos(v){return v==0?DOMPos.before(this.dom):DOMPos.after(this.dom,v==this.length)}split(v){let S=this.length-v;this.length=v;let R=new BlockWidgetView(this.widget,S,this.deco);return R.breakAfter=this.breakAfter,R}get children(){return noChildren}sync(v){(!this.dom||!this.widget.updateDOM(this.dom,v))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(v)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(v){return v instanceof BlockWidgetView&&v.widget.constructor==this.widget.constructor?(v.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=v.widget,this.length=v.length,this.deco=v.deco,this.breakAfter=v.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(v){return this.widget.ignoreEvent(v)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(v,S){let R=this.widget.coordsAt(this.dom,v,S);return R||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?v==0:S<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(v){let{startSide:S,endSide:R}=this.deco;return S==R?!1:v<0?S<0:R>0}}class BlockGapWidget extends WidgetType{constructor(v){super(),this.height=v}toDOM(){let v=document.createElement("div");return v.className="cm-gap",this.updateDOM(v),v}eq(v){return v.height==this.height}updateDOM(v){return v.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(v,S,R,T){this.doc=v,this.pos=S,this.end=R,this.disallowBlockEffectsFor=T,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=v.iter(),this.skip=S}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let v=this.content[this.content.length-1];return!(v.breakAfter||v instanceof BlockWidgetView&&v.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(v=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),v),v.length),this.pendingBuffer=0)}addBlockWidget(v){this.flushBuffer(),this.curLine=null,this.content.push(v)}finish(v){this.pendingBuffer&&v<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(v&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(v,S,R){for(;v>0;){if(this.textOff==this.text.length){let{value:k,lineBreak:q,done:M}=this.cursor.next(this.skip);if(this.skip=0,M)throw new Error("Ran out of text content when drawing inline views");if(q){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,v--;continue}else this.text=k,this.textOff=0}let T=Math.min(this.text.length-this.textOff,v),A=Math.min(T,512);this.flushBuffer(S.slice(S.length-R)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+A)),S),R),this.atCursorPos=!0,this.textOff+=A,v-=A,R=T<=A?0:S.length}}span(v,S,R,T){this.buildText(S-v,R,T),this.pos=S,this.openStart<0&&(this.openStart=T)}point(v,S,R,T,A,k){if(this.disallowBlockEffectsFor[k]&&R instanceof PointDecoration){if(R.block)throw new RangeError("Block decorations may not be specified via plugins");if(S>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let q=S-v;if(R instanceof PointDecoration)if(R.block)R.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(R.widget||NullWidget.block,q,R));else{let M=WidgetView.create(R.widget||NullWidget.inline,q,q?0:R.startSide),D=this.atCursorPos&&!M.isEditable&&A<=T.length&&(v<S||R.startSide>0),L=!M.isEditable&&(v<S||A>T.length||R.startSide<=0),I=this.getLine();this.pendingBuffer==2&&!D&&!M.isEditable&&(this.pendingBuffer=0),this.flushBuffer(T),D&&(I.append(wrapMarks(new WidgetBufferView(1),T),A),A=T.length+Math.max(0,A-T.length)),I.append(wrapMarks(M,T),A),this.atCursorPos=L,this.pendingBuffer=L?v<S||A>T.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=T.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(R);q&&(this.textOff+q<=this.text.length?this.textOff+=q:(this.skip+=q-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=S),this.openStart<0&&(this.openStart=A)}static build(v,S,R,T,A){let k=new ContentBuilder(v,S,R,A);return k.openEnd=RangeSet.spans(T,S,R,k),k.openStart<0&&(k.openStart=k.openEnd),k.finish(k.openEnd),k}}function wrapMarks(_,v){for(let S of v)_=new MarkView(S,[_],_.length);return _}class NullWidget extends WidgetType{constructor(v){super(),this.tag=v}eq(v){return v.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(v){return v.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=(function(_){return _[_.LTR=0]="LTR",_[_.RTL=1]="RTL",_})(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(_){let v=[];for(let S=0;S<_.length;S++)v.push(1<<+_[S]);return v}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let _ of["()","[]","{}"]){let v=_.charCodeAt(0),S=_.charCodeAt(1);Brackets[v]=S,Brackets[S]=-v}function charType(_){return _<=247?LowTypes[_]:1424<=_&&_<=1524?2:1536<=_&&_<=1785?ArabicTypes[_-1536]:1774<=_&&_<=2220?4:8192<=_&&_<=8204?256:64336<=_&&_<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(v,S,R){this.from=v,this.to=S,this.level=R}side(v,S){return this.dir==S==v?this.to:this.from}forward(v,S){return v==(this.dir==S)}static find(v,S,R,T){let A=-1;for(let k=0;k<v.length;k++){let q=v[k];if(q.from<=S&&q.to>=S){if(q.level==R)return k;(A<0||(T!=0?T<0?q.from<S:q.to>S:v[A].level>q.level))&&(A=k)}}if(A<0)throw new RangeError("Index out of range");return A}}function isolatesEq(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++){let R=_[S],T=v[S];if(R.from!=T.from||R.to!=T.to||R.direction!=T.direction||!isolatesEq(R.inner,T.inner))return!1}return!0}const types=[];function computeCharTypes(_,v,S,R,T){for(let A=0;A<=R.length;A++){let k=A?R[A-1].to:v,q=A<R.length?R[A].from:S,M=A?256:T;for(let D=k,L=M,I=M;D<q;D++){let N=charType(_.charCodeAt(D));N==512?N=L:N==8&&I==4&&(N=16),types[D]=N==4?2:N,N&7&&(I=N),L=N}for(let D=k,L=M,I=M;D<q;D++){let N=types[D];if(N==128)D<q-1&&L==types[D+1]&&L&24?N=types[D]=L:types[D]=256;else if(N==64){let F=D+1;for(;F<q&&types[F]==64;)F++;let H=D&&L==8||F<S&&types[F]==8?I==1?1:8:256;for(let G=D;G<F;G++)types[G]=H;D=F-1}else N==8&&I==1&&(types[D]=1);L=N,N&7&&(I=N)}}}function processBracketPairs(_,v,S,R,T){let A=T==1?2:1;for(let k=0,q=0,M=0;k<=R.length;k++){let D=k?R[k-1].to:v,L=k<R.length?R[k].from:S;for(let I=D,N,F,H;I<L;I++)if(F=Brackets[N=_.charCodeAt(I)])if(F<0){for(let G=q-3;G>=0;G-=3)if(BracketStack[G+1]==-F){let V=BracketStack[G+2],j=V&2?T:V&4?V&1?A:T:0;j&&(types[I]=types[BracketStack[G]]=j),q=G;break}}else{if(BracketStack.length==189)break;BracketStack[q++]=I,BracketStack[q++]=N,BracketStack[q++]=M}else if((H=types[I])==2||H==1){let G=H==T;M=G?0:1;for(let V=q-3;V>=0;V-=3){let j=BracketStack[V+2];if(j&2)break;if(G)BracketStack[V+2]|=2;else{if(j&4)break;BracketStack[V+2]|=4}}}}}function processNeutrals(_,v,S,R){for(let T=0,A=R;T<=S.length;T++){let k=T?S[T-1].to:_,q=T<S.length?S[T].from:v;for(let M=k;M<q;){let D=types[M];if(D==256){let L=M+1;for(;;)if(L==q){if(T==S.length)break;L=S[T++].to,q=T<S.length?S[T].from:v}else if(types[L]==256)L++;else break;let I=A==1,N=(L<v?types[L]:R)==1,F=I==N?I?1:2:R;for(let H=L,G=T,V=G?S[G-1].to:_;H>M;)H==V&&(H=S[--G].from,V=G?S[G-1].to:_),types[--H]=F;M=L}else A=D,M++}}}function emitSpans(_,v,S,R,T,A,k){let q=R%2?2:1;if(R%2==T%2)for(let M=v,D=0;M<S;){let L=!0,I=!1;if(D==A.length||M<A[D].from){let G=types[M];G!=q&&(L=!1,I=G==16)}let N=!L&&q==1?[]:null,F=L?R:R+1,H=M;e:for(;;)if(D<A.length&&H==A[D].from){if(I)break e;let G=A[D];if(!L)for(let V=G.to,j=D+1;;){if(V==S)break e;if(j<A.length&&A[j].from==V)V=A[j++].to;else{if(types[V]==q)break e;break}}if(D++,N)N.push(G);else{G.from>M&&k.push(new BidiSpan(M,G.from,F));let V=G.direction==LTR!=!(F%2);computeSectionOrder(_,V?R+1:R,T,G.inner,G.from,G.to,k),M=G.to}H=G.to}else{if(H==S||(L?types[H]!=q:types[H]==q))break;H++}N?emitSpans(_,M,H,R+1,T,N,k):M<H&&k.push(new BidiSpan(M,H,F)),M=H}else for(let M=S,D=A.length;M>v;){let L=!0,I=!1;if(!D||M>A[D-1].to){let G=types[M-1];G!=q&&(L=!1,I=G==16)}let N=!L&&q==1?[]:null,F=L?R:R+1,H=M;e:for(;;)if(D&&H==A[D-1].to){if(I)break e;let G=A[--D];if(!L)for(let V=G.from,j=D;;){if(V==v)break e;if(j&&A[j-1].to==V)V=A[--j].from;else{if(types[V-1]==q)break e;break}}if(N)N.push(G);else{G.to<M&&k.push(new BidiSpan(G.to,M,F));let V=G.direction==LTR!=!(F%2);computeSectionOrder(_,V?R+1:R,T,G.inner,G.from,G.to,k),M=G.from}H=G.from}else{if(H==v||(L?types[H-1]!=q:types[H-1]==q))break;H--}N?emitSpans(_,H,M,R+1,T,N,k):H<M&&k.push(new BidiSpan(H,M,F)),M=H}}function computeSectionOrder(_,v,S,R,T,A,k){let q=v%2?2:1;computeCharTypes(_,T,A,R,q),processBracketPairs(_,T,A,R,q),processNeutrals(T,A,R,q),emitSpans(_,T,A,v,S,R,k)}function computeOrder(_,v,S){if(!_)return[new BidiSpan(0,0,v==RTL?1:0)];if(v==LTR&&!S.length&&!BidiRE.test(_))return trivialOrder(_.length);if(S.length)for(;_.length>types.length;)types[types.length]=256;let R=[],T=v==LTR?0:1;return computeSectionOrder(_,T,T,S,0,_.length,R),R}function trivialOrder(_){return[new BidiSpan(0,_,0)]}let movedOver="";function moveVisually(_,v,S,R,T){var A;let k=R.head-_.from,q=BidiSpan.find(v,k,(A=R.bidiLevel)!==null&&A!==void 0?A:-1,R.assoc),M=v[q],D=M.side(T,S);if(k==D){let N=q+=T?1:-1;if(N<0||N>=v.length)return null;M=v[q=N],k=M.side(!T,S),D=M.side(T,S)}let L=findClusterBreak(_.text,k,M.forward(T,S));(L<M.from||L>M.to)&&(L=D),movedOver=_.text.slice(Math.min(k,L),Math.max(k,L));let I=q==(T?v.length-1:0)?null:v[q+(T?1:-1)];return I&&L==D&&I.level+(T?0:1)<M.level?EditorSelection.cursor(I.side(!T,S)+_.from,I.forward(T,S)?1:-1,I.level):EditorSelection.cursor(L+_.from,M.forward(T,S)?-1:1,M.level)}function autoDirection(_,v,S){for(let R=v;R<S;R++){let T=charType(_.charCodeAt(R));if(T==1)return LTR;if(T==2||T==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:_=>_.some(v=>v)}),nativeSelectionHidden=Facet.define({combine:_=>_.some(v=>v)}),scrollHandler=Facet.define();class ScrollTarget{constructor(v,S="nearest",R="nearest",T=5,A=5,k=!1){this.range=v,this.y=S,this.x=R,this.yMargin=T,this.xMargin=A,this.isSnapshot=k}map(v){return v.empty?this:new ScrollTarget(this.range.map(v),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(v){return this.range.to<=v.doc.length?this:new ScrollTarget(EditorSelection.cursor(v.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(_,v)=>_.map(v)}),setEditContextFormatting=StateEffect.define();function logException(_,v,S){let R=_.facet(exceptionSink);R.length?R[0](v):window.onerror&&window.onerror(String(v),S,void 0,void 0,v)||(S?console.error(S+":",v):console.error(v))}const editable=Facet.define({combine:_=>_.length?_[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define({combine(_){return _.filter((v,S)=>{for(let R=0;R<S;R++)if(_[R].plugin==v.plugin)return!1;return!0})}});class ViewPlugin{constructor(v,S,R,T,A){this.id=v,this.create=S,this.domEventHandlers=R,this.domEventObservers=T,this.baseExtensions=A(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(v){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:v}))}static define(v,S){const{eventHandlers:R,eventObservers:T,provide:A,decorations:k}=S||{};return new ViewPlugin(nextPluginID++,v,R,T,q=>{let M=[];return k&&M.push(decorations.of(D=>{let L=D.plugin(q);return L?k(L):Decoration.none})),A&&M.push(A(q)),M})}static fromClass(v,S){return ViewPlugin.define((R,T)=>new v(R,T),S)}}class PluginInstance{constructor(v){this.spec=v,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(v){if(this.value){if(this.mustUpdate){let S=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(S)}catch(R){if(logException(S.state,R,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(v,this.spec.arg)}catch(S){logException(v.state,S,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(v){var S;if(!((S=this.value)===null||S===void 0)&&S.destroy)try{this.value.destroy()}catch(R){logException(v.state,R,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(_,v){let S=_.state.facet(bidiIsolatedRanges);if(!S.length)return S;let R=S.map(A=>A instanceof Function?A(_):A),T=[];return RangeSet.spans(R,v.from,v.to,{point(){},span(A,k,q,M){let D=A-v.from,L=k-v.from,I=T;for(let N=q.length-1;N>=0;N--,M--){let F=q[N].spec.bidiIsolate,H;if(F==null&&(F=autoDirection(v.text,D,L)),M>0&&I.length&&(H=I[I.length-1]).to==D&&H.direction==F)H.to=L,I=H.inner;else{let G={from:D,to:L,direction:F,inner:[]};I.push(G),I=G.inner}}}}),T}const scrollMargins=Facet.define();function getScrollMargins(_){let v=0,S=0,R=0,T=0;for(let A of _.state.facet(scrollMargins)){let k=A(_);k&&(k.left!=null&&(v=Math.max(v,k.left)),k.right!=null&&(S=Math.max(S,k.right)),k.top!=null&&(R=Math.max(R,k.top)),k.bottom!=null&&(T=Math.max(T,k.bottom)))}return{left:v,right:S,top:R,bottom:T}}const styleModule=Facet.define();class ChangedRange{constructor(v,S,R,T){this.fromA=v,this.toA=S,this.fromB=R,this.toB=T}join(v){return new ChangedRange(Math.min(this.fromA,v.fromA),Math.max(this.toA,v.toA),Math.min(this.fromB,v.fromB),Math.max(this.toB,v.toB))}addToSet(v){let S=v.length,R=this;for(;S>0;S--){let T=v[S-1];if(!(T.fromA>R.toA)){if(T.toA<R.fromA)break;R=R.join(T),v.splice(S-1,1)}}return v.splice(S,0,R),v}static extendWithRanges(v,S){if(S.length==0)return v;let R=[];for(let T=0,A=0,k=0,q=0;;T++){let M=T==v.length?null:v[T],D=k-q,L=M?M.fromB:1e9;for(;A<S.length&&S[A]<L;){let I=S[A],N=S[A+1],F=Math.max(q,I),H=Math.min(L,N);if(F<=H&&new ChangedRange(F+D,H+D,F,H).addToSet(R),N>L)break;A+=2}if(!M)return R;new ChangedRange(M.fromA,M.toA,M.fromB,M.toB).addToSet(R),k=M.toA,q=M.toB}}}class ViewUpdate{constructor(v,S,R){this.view=v,this.state=S,this.transactions=R,this.flags=0,this.startState=v.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let A of R)this.changes=this.changes.compose(A.changes);let T=[];this.changes.iterChangedRanges((A,k,q,M)=>T.push(new ChangedRange(A,k,q,M))),this.changedRanges=T}static create(v,S,R){return new ViewUpdate(v,S,R)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(v=>v.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(v){super(),this.view=v,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(v.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,v.state.doc.length)],0,null)}update(v){var S;let R=v.changedRanges;this.minWidth>0&&R.length&&(R.every(({fromA:D,toA:L})=>L<this.minWidthFrom||D>this.minWidthTo)?(this.minWidthFrom=v.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=v.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(v);let T=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((S=this.domChanged)===null||S===void 0)&&S.newSel?T=this.domChanged.newSel.head:!touchesComposition(v.changes,this.hasComposition)&&!v.selectionSet&&(T=v.state.selection.main.head));let A=T>-1?findCompositionRange(this.view,v.changes,T):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:D,to:L}=this.hasComposition;R=new ChangedRange(D,L,v.changes.mapPos(D,-1),v.changes.mapPos(L,1)).addToSet(R.slice())}this.hasComposition=A?{from:A.range.fromB,to:A.range.toB}:null,(browser.ie||browser.chrome)&&!A&&v&&v.state.doc.lines!=v.startState.doc.lines&&(this.forceSelection=!0);let k=this.decorations,q=this.updateDeco(),M=findChangedDeco(k,q,v.changes);return R=ChangedRange.extendWithRanges(R,M),!(this.flags&7)&&R.length==0?!1:(this.updateInner(R,v.startState.doc.length,A),v.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(v,S,R){this.view.viewState.mustMeasureContent=!0,this.updateChildren(v,S,R);let{observer:T}=this.view;T.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let k=browser.chrome||browser.ios?{node:T.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,k),this.flags&=-8,k&&(k.written||T.selectionRange.focusNode!=k.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(k=>k.flags&=-9);let A=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let k of this.children)k instanceof BlockWidgetView&&k.widget instanceof BlockGapWidget&&A.push(k.dom);T.updateGaps(A)}updateChildren(v,S,R){let T=R?R.range.addToSet(v.slice()):v,A=this.childCursor(S);for(let k=T.length-1;;k--){let q=k>=0?T[k]:null;if(!q)break;let{fromA:M,toA:D,fromB:L,toB:I}=q,N,F,H,G;if(R&&R.range.fromB<I&&R.range.toB>L){let J=ContentBuilder.build(this.view.state.doc,L,R.range.fromB,this.decorations,this.dynamicDecorationMap),te=ContentBuilder.build(this.view.state.doc,R.range.toB,I,this.decorations,this.dynamicDecorationMap);F=J.breakAtStart,H=J.openStart,G=te.openEnd;let re=this.compositionView(R);te.breakAtStart?re.breakAfter=1:te.content.length&&re.merge(re.length,re.length,te.content[0],!1,te.openStart,0)&&(re.breakAfter=te.content[0].breakAfter,te.content.shift()),J.content.length&&re.merge(0,0,J.content[J.content.length-1],!0,0,J.openEnd)&&J.content.pop(),N=J.content.concat(re).concat(te.content)}else({content:N,breakAtStart:F,openStart:H,openEnd:G}=ContentBuilder.build(this.view.state.doc,L,I,this.decorations,this.dynamicDecorationMap));let{i:V,off:j}=A.findPos(D,1),{i:W,off:X}=A.findPos(M,-1);replaceRange(this,W,X,V,j,N,F,H,G)}R&&this.fixCompositionDOM(R)}updateEditContextFormatting(v){this.editContextFormatting=this.editContextFormatting.map(v.changes);for(let S of v.transactions)for(let R of S.effects)R.is(setEditContextFormatting)&&(this.editContextFormatting=R.value)}compositionView(v){let S=new TextView(v.text.nodeValue);S.flags|=8;for(let{deco:T}of v.marks)S=new MarkView(T,[S],S.length);let R=new LineView;return R.append(S,0),R}fixCompositionDOM(v){let S=(A,k)=>{k.flags|=8|(k.children.some(M=>M.flags&7)?1:0),this.markedForComposition.add(k);let q=ContentView.get(A);q&&q!=k&&(q.dom=null),k.setDOM(A)},R=this.childPos(v.range.fromB,1),T=this.children[R.i];S(v.line,T);for(let A=v.marks.length-1;A>=-1;A--)R=T.childPos(R.off,1),T=T.children[R.i],S(A>=0?v.marks[A].node:v.text,T)}updateSelection(v=!1,S=!1){(v||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let R=this.view.root.activeElement,T=R==this.dom,A=!T&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(R&&this.dom.contains(R));if(!(T||S||A))return;let k=this.forceSelection;this.forceSelection=!1;let q=this.view.state.selection.main,M=this.moveToLine(this.domAtPos(q.anchor)),D=q.empty?M:this.moveToLine(this.domAtPos(q.head));if(browser.gecko&&q.empty&&!this.hasComposition&&betweenUneditable(M)){let I=document.createTextNode("");this.view.observer.ignore(()=>M.node.insertBefore(I,M.node.childNodes[M.offset]||null)),M=D=new DOMPos(I,0),k=!0}let L=this.view.observer.selectionRange;(k||!L.focusNode||(!isEquivalentPosition(M.node,M.offset,L.anchorNode,L.anchorOffset)||!isEquivalentPosition(D.node,D.offset,L.focusNode,L.focusOffset))&&!this.suppressWidgetCursorChange(L,q))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(L.focusNode)&&inUneditable(L.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let I=getSelection(this.view.root);if(I)if(q.empty){if(browser.gecko){let N=nextToUneditable(M.node,M.offset);if(N&&N!=3){let F=(N==1?textNodeBefore:textNodeAfter)(M.node,M.offset);F&&(M=new DOMPos(F.node,F.offset))}}I.collapse(M.node,M.offset),q.bidiLevel!=null&&I.caretBidiLevel!==void 0&&(I.caretBidiLevel=q.bidiLevel)}else if(I.extend){I.collapse(M.node,M.offset);try{I.extend(D.node,D.offset)}catch{}}else{let N=document.createRange();q.anchor>q.head&&([M,D]=[D,M]),N.setEnd(D.node,D.offset),N.setStart(M.node,M.offset),I.removeAllRanges(),I.addRange(N)}A&&this.view.root.activeElement==this.dom&&(this.dom.blur(),R&&R.focus())}),this.view.observer.setSelectionRange(M,D)),this.impreciseAnchor=M.precise?null:new DOMPos(L.anchorNode,L.anchorOffset),this.impreciseHead=D.precise?null:new DOMPos(L.focusNode,L.focusOffset)}suppressWidgetCursorChange(v,S){return this.hasComposition&&S.empty&&isEquivalentPosition(v.focusNode,v.focusOffset,v.anchorNode,v.anchorOffset)&&this.posFromDOM(v.focusNode,v.focusOffset)==S.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:v}=this,S=v.state.selection.main,R=getSelection(v.root),{anchorNode:T,anchorOffset:A}=v.observer.selectionRange;if(!R||!S.empty||!S.assoc||!R.modify)return;let k=LineView.find(this,S.head);if(!k)return;let q=k.posAtStart;if(S.head==q||S.head==q+k.length)return;let M=this.coordsAt(S.head,-1),D=this.coordsAt(S.head,1);if(!M||!D||M.bottom>D.top)return;let L=this.domAtPos(S.head+S.assoc);R.collapse(L.node,L.offset),R.modify("move",S.assoc<0?"forward":"backward","lineboundary"),v.observer.readSelectionRange();let I=v.observer.selectionRange;v.docView.posFromDOM(I.anchorNode,I.anchorOffset)!=S.from&&R.collapse(T,A)}moveToLine(v){let S=this.dom,R;if(v.node!=S)return v;for(let T=v.offset;!R&&T<S.childNodes.length;T++){let A=ContentView.get(S.childNodes[T]);A instanceof LineView&&(R=A.domAtPos(0))}for(let T=v.offset-1;!R&&T>=0;T--){let A=ContentView.get(S.childNodes[T]);A instanceof LineView&&(R=A.domAtPos(A.length))}return R?new DOMPos(R.node,R.offset,!0):v}nearest(v){for(let S=v;S;){let R=ContentView.get(S);if(R&&R.rootView==this)return R;S=S.parentNode}return null}posFromDOM(v,S){let R=this.nearest(v);if(!R)throw new RangeError("Trying to find position for a DOM position outside of the document");return R.localPosFromDOM(v,S)+R.posAtStart}domAtPos(v){let{i:S,off:R}=this.childCursor().findPos(v,-1);for(;S<this.children.length-1;){let T=this.children[S];if(R<T.length||T instanceof LineView)break;S++,R=0}return this.children[S].domAtPos(R)}coordsAt(v,S){let R=null,T=0;for(let A=this.length,k=this.children.length-1;k>=0;k--){let q=this.children[k],M=A-q.breakAfter,D=M-q.length;if(M<v)break;if(D<=v&&(D<v||q.covers(-1))&&(M>v||q.covers(1))&&(!R||q instanceof LineView&&!(R instanceof LineView&&S>=0)))R=q,T=D;else if(R&&D==v&&M==v&&q instanceof BlockWidgetView&&Math.abs(S)<2){if(q.deco.startSide<0)break;k&&(R=null)}A=D}return R?R.coordsAt(v-T,S):null}coordsForChar(v){let{i:S,off:R}=this.childPos(v,1),T=this.children[S];if(!(T instanceof LineView))return null;for(;T.children.length;){let{i:q,off:M}=T.childPos(R,1);for(;;q++){if(q==T.children.length)return null;if((T=T.children[q]).length)break}R=M}if(!(T instanceof TextView))return null;let A=findClusterBreak(T.text,R);if(A==R)return null;let k=textRange(T.dom,R,A).getClientRects();for(let q=0;q<k.length;q++){let M=k[q];if(q==k.length-1||M.top<M.bottom&&M.left<M.right)return M}return null}measureVisibleLineHeights(v){let S=[],{from:R,to:T}=v,A=this.view.contentDOM.clientWidth,k=A>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,q=-1,M=this.view.textDirection==Direction.LTR;for(let D=0,L=0;L<this.children.length;L++){let I=this.children[L],N=D+I.length;if(N>T)break;if(D>=R){let F=I.dom.getBoundingClientRect();if(S.push(F.height),k){let H=I.dom.lastChild,G=H?clientRectsFor(H):[];if(G.length){let V=G[G.length-1],j=M?V.right-F.left:F.right-V.left;j>q&&(q=j,this.minWidth=A,this.minWidthFrom=D,this.minWidthTo=N)}}}D=N+I.breakAfter}return S}textDirectionAt(v){let{i:S}=this.childPos(v,1);return getComputedStyle(this.children[S].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let A of this.children)if(A instanceof LineView){let k=A.measureTextSize();if(k)return k}let v=document.createElement("div"),S,R,T;return v.className="cm-line",v.style.width="99999px",v.style.position="absolute",v.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(v);let A=clientRectsFor(v.firstChild)[0];S=v.getBoundingClientRect().height,R=A?A.width/27:7,T=A?A.height:S,v.remove()}),{lineHeight:S,charWidth:R,textHeight:T}}childCursor(v=this.length){let S=this.children.length;return S&&(v-=this.children[--S].length),new ChildCursor(this.children,v,S)}computeBlockGapDeco(){let v=[],S=this.view.viewState;for(let R=0,T=0;;T++){let A=T==S.viewports.length?null:S.viewports[T],k=A?A.from-1:this.length;if(k>R){let q=(S.lineBlockAt(k).bottom-S.lineBlockAt(R).top)/this.view.scaleY;v.push(Decoration.replace({widget:new BlockGapWidget(q),block:!0,inclusive:!0,isBlockGap:!0}).range(R,k))}if(!A)break;R=A.to+1}return Decoration.set(v)}updateDeco(){let v=1,S=this.view.state.facet(decorations).map(A=>(this.dynamicDecorationMap[v++]=typeof A=="function")?A(this.view):A),R=!1,T=this.view.state.facet(outerDecorations).map((A,k)=>{let q=typeof A=="function";return q&&(R=!0),q?A(this.view):A});for(T.length&&(this.dynamicDecorationMap[v++]=R,S.push(RangeSet.join(T))),this.decorations=[this.editContextFormatting,...S,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];v<this.decorations.length;)this.dynamicDecorationMap[v++]=!1;return this.decorations}scrollIntoView(v){if(v.isSnapshot){let D=this.view.viewState.lineBlockAt(v.range.head);this.view.scrollDOM.scrollTop=D.top-v.yMargin,this.view.scrollDOM.scrollLeft=v.xMargin;return}for(let D of this.view.state.facet(scrollHandler))try{if(D(this.view,v.range,v))return!0}catch(L){logException(this.view.state,L,"scroll handler")}let{range:S}=v,R=this.coordsAt(S.head,S.empty?S.assoc:S.head>S.anchor?-1:1),T;if(!R)return;!S.empty&&(T=this.coordsAt(S.anchor,S.anchor>S.head?-1:1))&&(R={left:Math.min(R.left,T.left),top:Math.min(R.top,T.top),right:Math.max(R.right,T.right),bottom:Math.max(R.bottom,T.bottom)});let A=getScrollMargins(this.view),k={left:R.left-A.left,top:R.top-A.top,right:R.right+A.right,bottom:R.bottom+A.bottom},{offsetWidth:q,offsetHeight:M}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,k,S.head<S.anchor?-1:1,v.x,v.y,Math.max(Math.min(v.xMargin,q),-q),Math.max(Math.min(v.yMargin,M),-M),this.view.textDirection==Direction.LTR)}lineHasWidget(v){let{i:S}=this.childCursor().findPos(v);if(S==this.children.length)return!1;let R=T=>T instanceof WidgetView||T.children.some(R);return R(this.children[S])}}function betweenUneditable(_){return _.node.nodeType==1&&_.node.firstChild&&(_.offset==0||_.node.childNodes[_.offset-1].contentEditable=="false")&&(_.offset==_.node.childNodes.length||_.node.childNodes[_.offset].contentEditable=="false")}function findCompositionNode(_,v){let S=_.observer.selectionRange;if(!S.focusNode)return null;let R=textNodeBefore(S.focusNode,S.focusOffset),T=textNodeAfter(S.focusNode,S.focusOffset),A=R||T;if(T&&R&&T.node!=R.node){let q=ContentView.get(T.node);if(!q||q instanceof TextView&&q.text!=T.node.nodeValue)A=T;else if(_.docView.lastCompositionAfterCursor){let M=ContentView.get(R.node);!M||M instanceof TextView&&M.text!=R.node.nodeValue||(A=T)}}if(_.docView.lastCompositionAfterCursor=A!=R,!A)return null;let k=v-A.offset;return{from:k,to:k+A.node.nodeValue.length,node:A.node}}function findCompositionRange(_,v,S){let R=findCompositionNode(_,S);if(!R)return null;let{node:T,from:A,to:k}=R,q=T.nodeValue;if(/[\n\r]/.test(q)||_.state.doc.sliceString(R.from,R.to)!=q)return null;let M=v.invertedDesc,D=new ChangedRange(M.mapPos(A),M.mapPos(k),A,k),L=[];for(let I=T.parentNode;;I=I.parentNode){let N=ContentView.get(I);if(N instanceof MarkView)L.push({node:I,deco:N.mark});else{if(N instanceof LineView||I.nodeName=="DIV"&&I.parentNode==_.contentDOM)return{range:D,text:T,marks:L,line:I};if(I!=_.contentDOM)L.push({node:I,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(I),tagName:I.tagName.toLowerCase()})});else return null}}}function nextToUneditable(_,v){return _.nodeType!=1?0:(v&&_.childNodes[v-1].contentEditable=="false"?1:0)|(v<_.childNodes.length&&_.childNodes[v].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(v,S){addRange(v,S,this.changes)}comparePoint(v,S){addRange(v,S,this.changes)}boundChange(v){addRange(v,v,this.changes)}};function findChangedDeco(_,v,S){let R=new DecorationComparator$1;return RangeSet.compare(_,v,S,R),R.changes}function inUneditable(_,v){for(let S=_;S&&S!=v;S=S.assignedSlot||S.parentNode)if(S.nodeType==1&&S.contentEditable=="false")return!0;return!1}function touchesComposition(_,v){let S=!1;return v&&_.iterChangedRanges((R,T)=>{R<v.to&&T>v.from&&(S=!0)}),S}function groupAt(_,v,S=1){let R=_.charCategorizer(v),T=_.doc.lineAt(v),A=v-T.from;if(T.length==0)return EditorSelection.cursor(v);A==0?S=1:A==T.length&&(S=-1);let k=A,q=A;S<0?k=findClusterBreak(T.text,A,!1):q=findClusterBreak(T.text,A);let M=R(T.text.slice(k,q));for(;k>0;){let D=findClusterBreak(T.text,k,!1);if(R(T.text.slice(D,k))!=M)break;k=D}for(;q<T.length;){let D=findClusterBreak(T.text,q);if(R(T.text.slice(q,D))!=M)break;q=D}return EditorSelection.range(k+T.from,q+T.from)}function getdx(_,v){return v.left>_?v.left-_:Math.max(0,_-v.right)}function getdy(_,v){return v.top>_?v.top-_:Math.max(0,_-v.bottom)}function yOverlap(_,v){return _.top<v.bottom-1&&_.bottom>v.top+1}function upTop(_,v){return v<_.top?{top:v,left:_.left,right:_.right,bottom:_.bottom}:_}function upBot(_,v){return v>_.bottom?{top:_.top,left:_.left,right:_.right,bottom:v}:_}function domPosAtCoords(_,v,S){let R,T,A,k,q=!1,M,D,L,I;for(let H=_.firstChild;H;H=H.nextSibling){let G=clientRectsFor(H);for(let V=0;V<G.length;V++){let j=G[V];T&&yOverlap(T,j)&&(j=upTop(upBot(j,T.bottom),T.top));let W=getdx(v,j),X=getdy(S,j);if(W==0&&X==0)return H.nodeType==3?domPosInText(H,v,S):domPosAtCoords(H,v,S);(!R||k>X||k==X&&A>W)&&(R=H,T=j,A=W,k=X,q=W?v<j.left?V>0:V<G.length-1:!0),W==0?S>j.bottom&&(!L||L.bottom<j.bottom)?(M=H,L=j):S<j.top&&(!I||I.top>j.top)&&(D=H,I=j):L&&yOverlap(L,j)?L=upBot(L,j.bottom):I&&yOverlap(I,j)&&(I=upTop(I,j.top))}}if(L&&L.bottom>=S?(R=M,T=L):I&&I.top<=S&&(R=D,T=I),!R)return{node:_,offset:0};let N=Math.max(T.left,Math.min(T.right,v));if(R.nodeType==3)return domPosInText(R,N,S);if(q&&R.contentEditable!="false")return domPosAtCoords(R,N,S);let F=Array.prototype.indexOf.call(_.childNodes,R)+(v>=(T.left+T.right)/2?1:0);return{node:_,offset:F}}function domPosInText(_,v,S){let R=_.nodeValue.length,T=-1,A=1e9,k=0;for(let q=0;q<R;q++){let M=textRange(_,q,q+1).getClientRects();for(let D=0;D<M.length;D++){let L=M[D];if(L.top==L.bottom)continue;k||(k=v-L.left);let I=(L.top>S?L.top-S:S-L.bottom)-1;if(L.left-1<=v&&L.right+1>=v&&I<A){let N=v>=(L.left+L.right)/2,F=N;if(browser.chrome||browser.gecko){let H=textRange(_,q).getBoundingClientRect();Math.abs(H.left-L.right)<.1&&(F=!N)}if(I<=0)return{node:_,offset:q+(F?1:0)};T=q+(F?1:0),A=I}}}return{node:_,offset:T>-1?T:k>0?_.nodeValue.length:0}}function posAtCoords(_,v,S,R=-1){var T,A;let k=_.contentDOM.getBoundingClientRect(),q=k.top+_.viewState.paddingTop,M,{docHeight:D}=_.viewState,{x:L,y:I}=v,N=I-q;if(N<0)return 0;if(N>D)return _.state.doc.length;for(let J=_.viewState.heightOracle.textHeight/2,te=!1;M=_.elementAtHeight(N),M.type!=BlockType.Text;)for(;N=R>0?M.bottom+J:M.top-J,!(N>=0&&N<=D);){if(te)return S?null:0;te=!0,R=-R}I=q+N;let F=M.from;if(F<_.viewport.from)return _.viewport.from==0?0:S?null:posAtCoordsImprecise(_,k,M,L,I);if(F>_.viewport.to)return _.viewport.to==_.state.doc.length?_.state.doc.length:S?null:posAtCoordsImprecise(_,k,M,L,I);let H=_.dom.ownerDocument,G=_.root.elementFromPoint?_.root:H,V=G.elementFromPoint(L,I);V&&!_.contentDOM.contains(V)&&(V=null),V||(L=Math.max(k.left+1,Math.min(k.right-1,L)),V=G.elementFromPoint(L,I),V&&!_.contentDOM.contains(V)&&(V=null));let j,W=-1;if(V&&((T=_.docView.nearest(V))===null||T===void 0?void 0:T.isEditable)!=!1){if(H.caretPositionFromPoint){let J=H.caretPositionFromPoint(L,I);J&&({offsetNode:j,offset:W}=J)}else if(H.caretRangeFromPoint){let J=H.caretRangeFromPoint(L,I);J&&({startContainer:j,startOffset:W}=J)}j&&(!_.contentDOM.contains(j)||browser.safari&&isSuspiciousSafariCaretResult(j,W,L)||browser.chrome&&isSuspiciousChromeCaretResult(j,W,L))&&(j=void 0),j&&(W=Math.min(maxOffset(j),W))}if(!j||!_.docView.dom.contains(j)){let J=LineView.find(_.docView,F);if(!J)return N>M.top+M.height/2?M.to:M.from;({node:j,offset:W}=domPosAtCoords(J.dom,L,I))}let X=_.docView.nearest(j);if(!X)return null;if(X.isWidget&&((A=X.dom)===null||A===void 0?void 0:A.nodeType)==1){let J=X.dom.getBoundingClientRect();return v.y<J.top||v.y<=J.bottom&&v.x<=(J.left+J.right)/2?X.posAtStart:X.posAtEnd}else return X.localPosFromDOM(j,W)+X.posAtStart}function posAtCoordsImprecise(_,v,S,R,T){let A=Math.round((R-v.left)*_.defaultCharacterWidth);if(_.lineWrapping&&S.height>_.defaultLineHeight*1.5){let q=_.viewState.heightOracle.textHeight,M=Math.floor((T-S.top-(_.defaultLineHeight-q)*.5)/q);A+=M*_.viewState.heightOracle.lineLength}let k=_.state.sliceDoc(S.from,S.to);return S.from+findColumn(k,A,_.state.tabSize)}function isEndOfLineBefore(_,v,S){let R,T=_;if(_.nodeType!=3||v!=(R=_.nodeValue.length))return!1;for(;;){let A=T.nextSibling;if(A){if(A.nodeName=="BR")break;return!1}else{let k=T.parentNode;if(!k||k.nodeName=="DIV")break;T=k}}return textRange(_,R-1,R).getBoundingClientRect().right>S}function isSuspiciousSafariCaretResult(_,v,S){return isEndOfLineBefore(_,v,S)}function isSuspiciousChromeCaretResult(_,v,S){if(v!=0)return isEndOfLineBefore(_,v,S);for(let T=_;;){let A=T.parentNode;if(!A||A.nodeType!=1||A.firstChild!=T)return!1;if(A.classList.contains("cm-line"))break;T=A}let R=_.nodeType==1?_.getBoundingClientRect():textRange(_,0,Math.max(_.nodeValue.length,1)).getBoundingClientRect();return S-R.left>5}function blockAt(_,v,S){let R=_.lineBlockAt(v);if(Array.isArray(R.type)){let T;for(let A of R.type){if(A.from>v)break;if(!(A.to<v)){if(A.from<v&&A.to>v)return A;(!T||A.type==BlockType.Text&&(T.type!=A.type||(S<0?A.from<v:A.to>v)))&&(T=A)}}return T||R}return R}function moveToLineBoundary(_,v,S,R){let T=blockAt(_,v.head,v.assoc||-1),A=!R||T.type!=BlockType.Text||!(_.lineWrapping||T.widgetLineBreaks)?null:_.coordsAtPos(v.assoc<0&&v.head>T.from?v.head-1:v.head);if(A){let k=_.dom.getBoundingClientRect(),q=_.textDirectionAt(T.from),M=_.posAtCoords({x:S==(q==Direction.LTR)?k.right-1:k.left+1,y:(A.top+A.bottom)/2});if(M!=null)return EditorSelection.cursor(M,S?-1:1)}return EditorSelection.cursor(S?T.to:T.from,S?-1:1)}function moveByChar(_,v,S,R){let T=_.state.doc.lineAt(v.head),A=_.bidiSpans(T),k=_.textDirectionAt(T.from);for(let q=v,M=null;;){let D=moveVisually(T,A,k,q,S),L=movedOver;if(!D){if(T.number==(S?_.state.doc.lines:1))return q;L=`
`,T=_.state.doc.line(T.number+(S?1:-1)),A=_.bidiSpans(T),D=_.visualLineSide(T,!S)}if(M){if(!M(L))return q}else{if(!R)return D;M=R(L)}q=D}}function byGroup(_,v,S){let R=_.state.charCategorizer(v),T=R(S);return A=>{let k=R(A);return T==CharCategory.Space&&(T=k),T==k}}function moveVertically(_,v,S,R){let T=v.head,A=S?1:-1;if(T==(S?_.state.doc.length:0))return EditorSelection.cursor(T,v.assoc);let k=v.goalColumn,q,M=_.contentDOM.getBoundingClientRect(),D=_.coordsAtPos(T,v.assoc||-1),L=_.documentTop;if(D)k==null&&(k=D.left-M.left),q=A<0?D.top:D.bottom;else{let F=_.viewState.lineBlockAt(T);k==null&&(k=Math.min(M.right-M.left,_.defaultCharacterWidth*(T-F.from))),q=(A<0?F.top:F.bottom)+L}let I=M.left+k,N=R??_.viewState.heightOracle.textHeight>>1;for(let F=0;;F+=10){let H=q+(N+F)*A,G=posAtCoords(_,{x:I,y:H},!1,A);if(H<M.top||H>M.bottom||(A<0?G<T:G>T)){let V=_.docView.coordsForChar(G),j=!V||H<V.top?-1:1;return EditorSelection.cursor(G,j,void 0,k)}}}function skipAtomicRanges(_,v,S){for(;;){let R=0;for(let T of _)T.between(v-1,v+1,(A,k,q)=>{if(v>A&&v<k){let M=R||S||(v-A<k-v?-1:1);v=M<0?A:k,R=M}});if(!R)return v}}function skipAtomsForSelection(_,v){let S=null;for(let R=0;R<v.ranges.length;R++){let T=v.ranges[R],A=null;if(T.empty){let k=skipAtomicRanges(_,T.from,0);k!=T.from&&(A=EditorSelection.cursor(k,-1))}else{let k=skipAtomicRanges(_,T.from,-1),q=skipAtomicRanges(_,T.to,1);(k!=T.from||q!=T.to)&&(A=EditorSelection.range(T.from==T.anchor?k:q,T.from==T.head?k:q))}A&&(S||(S=v.ranges.slice()),S[R]=A)}return S?EditorSelection.create(S,v.mainIndex):v}function skipAtoms(_,v,S){let R=skipAtomicRanges(_.state.facet(atomicRanges).map(T=>T(_)),S.from,v.head>S.from?-1:1);return R==S.from?S:EditorSelection.cursor(R,R<S.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(v,S){this.points=v,this.text="",this.lineSeparator=S.facet(EditorState.lineSeparator)}append(v){this.text+=v}lineBreak(){this.text+=LineBreakPlaceholder}readRange(v,S){if(!v)return this;let R=v.parentNode;for(let T=v;;){this.findPointBefore(R,T);let A=this.text.length;this.readNode(T);let k=T.nextSibling;if(k==S)break;let q=ContentView.get(T),M=ContentView.get(k);(q&&M?q.breakAfter:(q?q.breakAfter:isBlockElement(T))||isBlockElement(k)&&(T.nodeName!="BR"||T.cmIgnore)&&this.text.length>A)&&!isEmptyToEnd(k,S)&&this.lineBreak(),T=k}return this.findPointBefore(R,S),this}readTextNode(v){let S=v.nodeValue;for(let R of this.points)R.node==v&&(R.pos=this.text.length+Math.min(R.offset,S.length));for(let R=0,T=this.lineSeparator?null:/\r\n?|\n/g;;){let A=-1,k=1,q;if(this.lineSeparator?(A=S.indexOf(this.lineSeparator,R),k=this.lineSeparator.length):(q=T.exec(S))&&(A=q.index,k=q[0].length),this.append(S.slice(R,A<0?S.length:A)),A<0)break;if(this.lineBreak(),k>1)for(let M of this.points)M.node==v&&M.pos>this.text.length&&(M.pos-=k-1);R=A+k}}readNode(v){if(v.cmIgnore)return;let S=ContentView.get(v),R=S&&S.overrideDOMText;if(R!=null){this.findPointInside(v,R.length);for(let T=R.iter();!T.next().done;)T.lineBreak?this.lineBreak():this.append(T.value)}else v.nodeType==3?this.readTextNode(v):v.nodeName=="BR"?v.nextSibling&&this.lineBreak():v.nodeType==1&&this.readRange(v.firstChild,null)}findPointBefore(v,S){for(let R of this.points)R.node==v&&v.childNodes[R.offset]==S&&(R.pos=this.text.length)}findPointInside(v,S){for(let R of this.points)(v.nodeType==3?R.node==v:v.contains(R.node))&&(R.pos=this.text.length+(isAtEnd(v,R.node,R.offset)?S:0))}}function isAtEnd(_,v,S){for(;;){if(!v||S<maxOffset(v))return!1;if(v==_)return!0;S=domIndex(v)+1,v=v.parentNode}}function isEmptyToEnd(_,v){let S;for(;!(_==v||!_);_=_.nextSibling){let R=ContentView.get(_);if(!(R?.isWidget||_.cmIgnore))return!1;R&&(S||(S=[])).push(R)}if(S)for(let R of S){let T=R.overrideDOMText;if(T?.length)return!1}return!0}class DOMPoint{constructor(v,S){this.node=v,this.offset=S,this.pos=-1}}class DOMChange{constructor(v,S,R,T){this.typeOver=T,this.bounds=null,this.text="",this.domChanged=S>-1;let{impreciseHead:A,impreciseAnchor:k}=v.docView;if(v.state.readOnly&&S>-1)this.newSel=null;else if(S>-1&&(this.bounds=v.docView.domBoundsAround(S,R,0))){let q=A||k?[]:selectionPoints(v),M=new DOMReader(q,v.state);M.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=M.text,this.newSel=selectionFromPoints(q,this.bounds.from)}else{let q=v.observer.selectionRange,M=A&&A.node==q.focusNode&&A.offset==q.focusOffset||!contains(v.contentDOM,q.focusNode)?v.state.selection.main.head:v.docView.posFromDOM(q.focusNode,q.focusOffset),D=k&&k.node==q.anchorNode&&k.offset==q.anchorOffset||!contains(v.contentDOM,q.anchorNode)?v.state.selection.main.anchor:v.docView.posFromDOM(q.anchorNode,q.anchorOffset),L=v.viewport;if((browser.ios||browser.chrome)&&v.state.selection.main.empty&&M!=D&&(L.from>0||L.to<v.state.doc.length)){let I=Math.min(M,D),N=Math.max(M,D),F=L.from-I,H=L.to-N;(F==0||F==1||I==0)&&(H==0||H==-1||N==v.state.doc.length)&&(M=0,D=v.state.doc.length)}v.inputState.composing>-1&&v.state.selection.ranges.length>1?this.newSel=v.state.selection.replaceRange(EditorSelection.range(D,M)):this.newSel=EditorSelection.single(D,M)}}}function applyDOMChange(_,v){let S,{newSel:R}=v,T=_.state.selection.main,A=_.inputState.lastKeyTime>Date.now()-100?_.inputState.lastKeyCode:-1;if(v.bounds){let{from:k,to:q}=v.bounds,M=T.from,D=null;(A===8||browser.android&&v.text.length<q-k)&&(M=T.to,D="end");let L=findDiff(_.state.doc.sliceString(k,q,LineBreakPlaceholder),v.text,M-k,D);L&&(browser.chrome&&A==13&&L.toB==L.from+2&&v.text.slice(L.from,L.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&L.toB--,S={from:k+L.from,to:k+L.toA,insert:Text.of(v.text.slice(L.from,L.toB).split(LineBreakPlaceholder))})}else R&&(!_.hasFocus&&_.state.facet(editable)||R.main.eq(T))&&(R=null);if(!S&&!R)return!1;if(!S&&v.typeOver&&!T.empty&&R&&R.main.empty?S={from:T.from,to:T.to,insert:_.state.doc.slice(T.from,T.to)}:(browser.mac||browser.android)&&S&&S.from==S.to&&S.from==T.head-1&&/^\. ?$/.test(S.insert.toString())&&_.contentDOM.getAttribute("autocorrect")=="off"?(R&&S.insert.length==2&&(R=EditorSelection.single(R.main.anchor-1,R.main.head-1)),S={from:S.from,to:S.to,insert:Text.of([S.insert.toString().replace("."," ")])}):S&&S.from>=T.from&&S.to<=T.to&&(S.from!=T.from||S.to!=T.to)&&T.to-T.from-(S.to-S.from)<=4?S={from:T.from,to:T.to,insert:_.state.doc.slice(T.from,S.from).append(S.insert).append(_.state.doc.slice(S.to,T.to))}:_.state.doc.lineAt(T.from).to<T.to&&_.docView.lineHasWidget(T.to)&&_.inputState.insertingTextAt>Date.now()-50?S={from:T.from,to:T.to,insert:_.state.toText(_.inputState.insertingText)}:browser.chrome&&S&&S.from==S.to&&S.from==T.head&&S.insert.toString()==`
 `&&_.lineWrapping&&(R&&(R=EditorSelection.single(R.main.anchor-1,R.main.head-1)),S={from:T.from,to:T.to,insert:Text.of([" "])}),S)return applyDOMChangeInner(_,S,R,A);if(R&&!R.main.eq(T)){let k=!1,q="select";return _.inputState.lastSelectionTime>Date.now()-50&&(_.inputState.lastSelectionOrigin=="select"&&(k=!0),q=_.inputState.lastSelectionOrigin,q=="select.pointer"&&(R=skipAtomsForSelection(_.state.facet(atomicRanges).map(M=>M(_)),R))),_.dispatch({selection:R,scrollIntoView:k,userEvent:q}),!0}else return!1}function applyDOMChangeInner(_,v,S,R=-1){if(browser.ios&&_.inputState.flushIOSKey(v))return!0;let T=_.state.selection.main;if(browser.android&&(v.to==T.to&&(v.from==T.from||v.from==T.from-1&&_.state.sliceDoc(v.from,T.from)==" ")&&v.insert.length==1&&v.insert.lines==2&&dispatchKey(_.contentDOM,"Enter",13)||(v.from==T.from-1&&v.to==T.to&&v.insert.length==0||R==8&&v.insert.length<v.to-v.from&&v.to>T.head)&&dispatchKey(_.contentDOM,"Backspace",8)||v.from==T.from&&v.to==T.to+1&&v.insert.length==0&&dispatchKey(_.contentDOM,"Delete",46)))return!0;let A=v.insert.toString();_.inputState.composing>=0&&_.inputState.composing++;let k,q=()=>k||(k=applyDefaultInsert(_,v,S));return _.state.facet(inputHandler$1).some(M=>M(_,v.from,v.to,A,q))||_.dispatch(q()),!0}function applyDefaultInsert(_,v,S){let R,T=_.state,A=T.selection.main,k=-1;if(v.from==v.to&&v.from<A.from||v.from>A.to){let M=v.from<A.from?-1:1,D=M<0?A.from:A.to,L=skipAtomicRanges(T.facet(atomicRanges).map(I=>I(_)),D,M);v.from==L&&(k=L)}if(k>-1)R={changes:v,selection:EditorSelection.cursor(v.from+v.insert.length,-1)};else if(v.from>=A.from&&v.to<=A.to&&v.to-v.from>=(A.to-A.from)/3&&(!S||S.main.empty&&S.main.from==v.from+v.insert.length)&&_.inputState.composing<0){let M=A.from<v.from?T.sliceDoc(A.from,v.from):"",D=A.to>v.to?T.sliceDoc(v.to,A.to):"";R=T.replaceSelection(_.state.toText(M+v.insert.sliceString(0,void 0,_.state.lineBreak)+D))}else{let M=T.changes(v),D=S&&S.main.to<=M.newLength?S.main:void 0;if(T.selection.ranges.length>1&&(_.inputState.composing>=0||_.inputState.compositionPendingChange)&&v.to<=A.to+10&&v.to>=A.to-10){let L=_.state.sliceDoc(v.from,v.to),I,N=S&&findCompositionNode(_,S.main.head);if(N){let H=v.insert.length-(v.to-v.from);I={from:N.from,to:N.to-H}}else I=_.state.doc.lineAt(A.head);let F=A.to-v.to;R=T.changeByRange(H=>{if(H.from==A.from&&H.to==A.to)return{changes:M,range:D||H.map(M)};let G=H.to-F,V=G-L.length;if(_.state.sliceDoc(V,G)!=L||G>=I.from&&V<=I.to)return{range:H};let j=T.changes({from:V,to:G,insert:v.insert}),W=H.to-A.to;return{changes:j,range:D?EditorSelection.range(Math.max(0,D.anchor+W),Math.max(0,D.head+W)):H.map(j)}})}else R={changes:M,selection:D&&T.selection.replaceRange(D)}}let q="input.type";return(_.composing||_.inputState.compositionPendingChange&&_.inputState.compositionEndedAt>Date.now()-50)&&(_.inputState.compositionPendingChange=!1,q+=".compose",_.inputState.compositionFirstChange&&(q+=".start",_.inputState.compositionFirstChange=!1)),T.update(R,{userEvent:q,scrollIntoView:!0})}function findDiff(_,v,S,R){let T=Math.min(_.length,v.length),A=0;for(;A<T&&_.charCodeAt(A)==v.charCodeAt(A);)A++;if(A==T&&_.length==v.length)return null;let k=_.length,q=v.length;for(;k>0&&q>0&&_.charCodeAt(k-1)==v.charCodeAt(q-1);)k--,q--;if(R=="end"){let M=Math.max(0,A-Math.min(k,q));S-=k+M-A}if(k<A&&_.length<v.length){let M=S<=A&&S>=k?A-S:0;A-=M,q=A+(q-k),k=A}else if(q<A){let M=S<=A&&S>=q?A-S:0;A-=M,k=A+(k-q),q=A}return{from:A,toA:k,toB:q}}function selectionPoints(_){let v=[];if(_.root.activeElement!=_.contentDOM)return v;let{anchorNode:S,anchorOffset:R,focusNode:T,focusOffset:A}=_.observer.selectionRange;return S&&(v.push(new DOMPoint(S,R)),(T!=S||A!=R)&&v.push(new DOMPoint(T,A))),v}function selectionFromPoints(_,v){if(_.length==0)return null;let S=_[0].pos,R=_.length==2?_[1].pos:S;return S>-1&&R>-1?EditorSelection.single(S+v,R+v):null}class InputState{setSelectionOrigin(v){this.lastSelectionOrigin=v,this.lastSelectionTime=Date.now()}constructor(v){this.view=v,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=v.hasFocus,browser.safari&&v.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(v.contentDOM.ownerDocument)}handleEvent(v){!eventBelongsToEditor(this.view,v)||this.ignoreDuringComposition(v)||v.type=="keydown"&&this.keydown(v)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(v.type,v)):this.runHandlers(v.type,v))}runHandlers(v,S){let R=this.handlers[v];if(R){for(let T of R.observers)T(this.view,S);for(let T of R.handlers){if(S.defaultPrevented)break;if(T(this.view,S)){S.preventDefault();break}}}}ensureHandlers(v){let S=computeHandlers(v),R=this.handlers,T=this.view.contentDOM;for(let A in S)if(A!="scroll"){let k=!S[A].handlers.length,q=R[A];q&&k!=!q.handlers.length&&(T.removeEventListener(A,this.handleEvent),q=null),q||T.addEventListener(A,this.handleEvent,{passive:k})}for(let A in R)A!="scroll"&&!S[A]&&T.removeEventListener(A,this.handleEvent);this.handlers=S}keydown(v){if(this.lastKeyCode=v.keyCode,this.lastKeyTime=Date.now(),v.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&v.keyCode!=27&&modifierCodes.indexOf(v.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!v.synthetic&&(v.keyCode==13||v.keyCode==8))return this.view.observer.delayAndroidKey(v.key,v.keyCode),!0;let S;return browser.ios&&!v.synthetic&&!v.altKey&&!v.metaKey&&((S=PendingKeys.find(R=>R.keyCode==v.keyCode))&&!v.ctrlKey||EmacsyPendingKeys.indexOf(v.key)>-1&&v.ctrlKey&&!v.shiftKey)?(this.pendingIOSKey=S||v,setTimeout(()=>this.flushIOSKey(),250),!0):(v.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(v){let S=this.pendingIOSKey;return!S||S.key=="Enter"&&v&&v.from<v.to&&/^\S+$/.test(v.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,S.key,S.keyCode,S instanceof KeyboardEvent?S:void 0))}ignoreDuringComposition(v){return!/^key/.test(v.type)||v.synthetic?!1:this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(v){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=v}update(v){this.view.observer.update(v),this.mouseSelection&&this.mouseSelection.update(v),this.draggedContent&&v.docChanged&&(this.draggedContent=this.draggedContent.map(v.changes)),v.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(_,v){return(S,R)=>{try{return v.call(_,R,S)}catch(T){logException(S.state,T)}}}function computeHandlers(_){let v=Object.create(null);function S(R){return v[R]||(v[R]={observers:[],handlers:[]})}for(let R of _){let T=R.spec,A=T&&T.plugin.domEventHandlers,k=T&&T.plugin.domEventObservers;if(A)for(let q in A){let M=A[q];M&&S(q).handlers.push(bindHandler(R.value,M))}if(k)for(let q in k){let M=k[q];M&&S(q).observers.push(bindHandler(R.value,M))}}for(let R in handlers)S(R).handlers.push(handlers[R]);for(let R in observers)S(R).observers.push(observers[R]);return v}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(_){return Math.max(0,_)*.7+8}function dist(_,v){return Math.max(Math.abs(_.clientX-v.clientX),Math.abs(_.clientY-v.clientY))}class MouseSelection{constructor(v,S,R,T){this.view=v,this.startEvent=S,this.style=R,this.mustSelect=T,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=S,this.scrollParents=scrollableParents(v.contentDOM),this.atoms=v.state.facet(atomicRanges).map(k=>k(v));let A=v.contentDOM.ownerDocument;A.addEventListener("mousemove",this.move=this.move.bind(this)),A.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=S.shiftKey,this.multiple=v.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(v,S),this.dragging=isInPrimarySelection(v,S)&&getClickType(S)==1?null:!1}start(v){this.dragging===!1&&this.select(v)}move(v){if(v.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,v)<10)return;this.select(this.lastEvent=v);let S=0,R=0,T=0,A=0,k=this.view.win.innerWidth,q=this.view.win.innerHeight;this.scrollParents.x&&({left:T,right:k}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:A,bottom:q}=this.scrollParents.y.getBoundingClientRect());let M=getScrollMargins(this.view);v.clientX-M.left<=T+dragScrollMargin?S=-dragScrollSpeed(T-v.clientX):v.clientX+M.right>=k-dragScrollMargin&&(S=dragScrollSpeed(v.clientX-k)),v.clientY-M.top<=A+dragScrollMargin?R=-dragScrollSpeed(A-v.clientY):v.clientY+M.bottom>=q-dragScrollMargin&&(R=dragScrollSpeed(v.clientY-q)),this.setScrollSpeed(S,R)}up(v){this.dragging==null&&this.select(this.lastEvent),this.dragging||v.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let v=this.view.contentDOM.ownerDocument;v.removeEventListener("mousemove",this.move),v.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(v,S){this.scrollSpeed={x:v,y:S},v||S?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:v,y:S}=this.scrollSpeed;v&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=v,v=0),S&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=S,S=0),(v||S)&&this.view.win.scrollBy(v,S),this.dragging===!1&&this.select(this.lastEvent)}select(v){let{view:S}=this,R=skipAtomsForSelection(this.atoms,this.style.get(v,this.extend,this.multiple));(this.mustSelect||!R.eq(S.state.selection,this.dragging===!1))&&this.view.dispatch({selection:R,userEvent:"select.pointer"}),this.mustSelect=!1}update(v){v.transactions.some(S=>S.isUserEvent("input.type"))?this.destroy():this.style.update(v)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(_,v){let S=_.state.facet(clickAddsSelectionRange);return S.length?S[0](v):browser.mac?v.metaKey:v.ctrlKey}function dragMovesSelection(_,v){let S=_.state.facet(dragMovesSelection$1);return S.length?S[0](v):browser.mac?!v.altKey:!v.ctrlKey}function isInPrimarySelection(_,v){let{main:S}=_.state.selection;if(S.empty)return!1;let R=getSelection(_.root);if(!R||R.rangeCount==0)return!0;let T=R.getRangeAt(0).getClientRects();for(let A=0;A<T.length;A++){let k=T[A];if(k.left<=v.clientX&&k.right>=v.clientX&&k.top<=v.clientY&&k.bottom>=v.clientY)return!0}return!1}function eventBelongsToEditor(_,v){if(!v.bubbles)return!0;if(v.defaultPrevented)return!1;for(let S=v.target,R;S!=_.contentDOM;S=S.parentNode)if(!S||S.nodeType==11||(R=ContentView.get(S))&&R.ignoreEvent(v))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(_){let v=_.dom.parentNode;if(!v)return;let S=v.appendChild(document.createElement("textarea"));S.style.cssText="position: fixed; left: -10000px; top: 10px",S.focus(),setTimeout(()=>{_.focus(),S.remove(),doPaste(_,S.value)},50)}function textFilter(_,v,S){for(let R of _.facet(v))S=R(S,_);return S}function doPaste(_,v){v=textFilter(_.state,clipboardInputFilter,v);let{state:S}=_,R,T=1,A=S.toText(v),k=A.lines==S.selection.ranges.length;if(lastLinewiseCopy!=null&&S.selection.ranges.every(M=>M.empty)&&lastLinewiseCopy==A.toString()){let M=-1;R=S.changeByRange(D=>{let L=S.doc.lineAt(D.from);if(L.from==M)return{range:D};M=L.from;let I=S.toText((k?A.line(T++).text:v)+S.lineBreak);return{changes:{from:L.from,insert:I},range:EditorSelection.cursor(D.from+I.length)}})}else k?R=S.changeByRange(M=>{let D=A.line(T++);return{changes:{from:M.from,to:M.to,insert:D.text},range:EditorSelection.cursor(M.from+D.length)}}):R=S.replaceSelection(A);_.dispatch(R,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=_=>{_.inputState.lastScrollTop=_.scrollDOM.scrollTop,_.inputState.lastScrollLeft=_.scrollDOM.scrollLeft};handlers.keydown=(_,v)=>(_.inputState.setSelectionOrigin("select"),v.keyCode==27&&_.inputState.tabFocusMode!=0&&(_.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(_,v)=>{_.inputState.lastTouchTime=Date.now(),_.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=_=>{_.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(_,v)=>{if(_.observer.flush(),_.inputState.lastTouchTime>Date.now()-2e3)return!1;let S=null;for(let R of _.state.facet(mouseSelectionStyle))if(S=R(_,v),S)break;if(!S&&v.button==0&&(S=basicMouseSelection(_,v)),S){let R=!_.hasFocus;_.inputState.startMouseSelection(new MouseSelection(_,v,S,R)),R&&_.observer.ignore(()=>{focusPreventScroll(_.contentDOM);let A=_.root.activeElement;A&&!A.contains(_.contentDOM)&&A.blur()});let T=_.inputState.mouseSelection;if(T)return T.start(v),T.dragging===!1}else _.inputState.setSelectionOrigin("select.pointer");return!1};function rangeForClick(_,v,S,R){if(R==1)return EditorSelection.cursor(v,S);if(R==2)return groupAt(_.state,v,S);{let T=LineView.find(_.docView,v),A=_.state.doc.lineAt(T?T.posAtEnd:v),k=T?T.posAtStart:A.from,q=T?T.posAtEnd:A.to;return q<_.state.doc.length&&q==A.to&&q++,EditorSelection.range(k,q)}}let inside=(_,v,S)=>v>=S.top&&v<=S.bottom&&_>=S.left&&_<=S.right;function findPositionSide(_,v,S,R){let T=LineView.find(_.docView,v);if(!T)return 1;let A=v-T.posAtStart;if(A==0)return 1;if(A==T.length)return-1;let k=T.coordsAt(A,-1);if(k&&inside(S,R,k))return-1;let q=T.coordsAt(A,1);return q&&inside(S,R,q)?1:k&&k.bottom>=R?-1:1}function queryPos(_,v){let S=_.posAtCoords({x:v.clientX,y:v.clientY},!1);return{pos:S,bias:findPositionSide(_,S,v.clientX,v.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(_){if(!BadMouseDetail)return _.detail;let v=lastMouseDown,S=lastMouseDownTime;return lastMouseDown=_,lastMouseDownTime=Date.now(),lastMouseDownCount=!v||S>Date.now()-400&&Math.abs(v.clientX-_.clientX)<2&&Math.abs(v.clientY-_.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(_,v){let S=queryPos(_,v),R=getClickType(v),T=_.state.selection;return{update(A){A.docChanged&&(S.pos=A.changes.mapPos(S.pos),T=T.map(A.changes))},get(A,k,q){let M=queryPos(_,A),D,L=rangeForClick(_,M.pos,M.bias,R);if(S.pos!=M.pos&&!k){let I=rangeForClick(_,S.pos,S.bias,R),N=Math.min(I.from,L.from),F=Math.max(I.to,L.to);L=N<L.from?EditorSelection.range(N,F):EditorSelection.range(F,N)}return k?T.replaceRange(T.main.extend(L.from,L.to)):q&&R==1&&T.ranges.length>1&&(D=removeRangeAround(T,M.pos))?D:q?T.addRange(L):EditorSelection.create([L])}}}function removeRangeAround(_,v){for(let S=0;S<_.ranges.length;S++){let{from:R,to:T}=_.ranges[S];if(R<=v&&T>=v)return EditorSelection.create(_.ranges.slice(0,S).concat(_.ranges.slice(S+1)),_.mainIndex==S?0:_.mainIndex-(_.mainIndex>S?1:0))}return null}handlers.dragstart=(_,v)=>{let{selection:{main:S}}=_.state;if(v.target.draggable){let T=_.docView.nearest(v.target);if(T&&T.isWidget){let A=T.posAtStart,k=A+T.length;(A>=S.to||k<=S.from)&&(S=EditorSelection.range(A,k))}}let{inputState:R}=_;return R.mouseSelection&&(R.mouseSelection.dragging=!0),R.draggedContent=S,v.dataTransfer&&(v.dataTransfer.setData("Text",textFilter(_.state,clipboardOutputFilter,_.state.sliceDoc(S.from,S.to))),v.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=_=>(_.inputState.draggedContent=null,!1);function dropText(_,v,S,R){if(S=textFilter(_.state,clipboardInputFilter,S),!S)return;let T=_.posAtCoords({x:v.clientX,y:v.clientY},!1),{draggedContent:A}=_.inputState,k=R&&A&&dragMovesSelection(_,v)?{from:A.from,to:A.to}:null,q={from:T,insert:S},M=_.state.changes(k?[k,q]:q);_.focus(),_.dispatch({changes:M,selection:{anchor:M.mapPos(T,-1),head:M.mapPos(T,1)},userEvent:k?"move.drop":"input.drop"}),_.inputState.draggedContent=null}handlers.drop=(_,v)=>{if(!v.dataTransfer)return!1;if(_.state.readOnly)return!0;let S=v.dataTransfer.files;if(S&&S.length){let R=Array(S.length),T=0,A=()=>{++T==S.length&&dropText(_,v,R.filter(k=>k!=null).join(_.state.lineBreak),!1)};for(let k=0;k<S.length;k++){let q=new FileReader;q.onerror=A,q.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(q.result)||(R[k]=q.result),A()},q.readAsText(S[k])}return!0}else{let R=v.dataTransfer.getData("Text");if(R)return dropText(_,v,R,!0),!0}return!1};handlers.paste=(_,v)=>{if(_.state.readOnly)return!0;_.observer.flush();let S=brokenClipboardAPI?null:v.clipboardData;return S?(doPaste(_,S.getData("text/plain")||S.getData("text/uri-list")),!0):(capturePaste(_),!1)};function captureCopy(_,v){let S=_.dom.parentNode;if(!S)return;let R=S.appendChild(document.createElement("textarea"));R.style.cssText="position: fixed; left: -10000px; top: 10px",R.value=v,R.focus(),R.selectionEnd=v.length,R.selectionStart=0,setTimeout(()=>{R.remove(),_.focus()},50)}function copiedRange(_){let v=[],S=[],R=!1;for(let T of _.selection.ranges)T.empty||(v.push(_.sliceDoc(T.from,T.to)),S.push(T));if(!v.length){let T=-1;for(let{from:A}of _.selection.ranges){let k=_.doc.lineAt(A);k.number>T&&(v.push(k.text),S.push({from:k.from,to:Math.min(_.doc.length,k.to+1)})),T=k.number}R=!0}return{text:textFilter(_,clipboardOutputFilter,v.join(_.lineBreak)),ranges:S,linewise:R}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(_,v)=>{let{text:S,ranges:R,linewise:T}=copiedRange(_.state);if(!S&&!T)return!1;lastLinewiseCopy=T?S:null,v.type=="cut"&&!_.state.readOnly&&_.dispatch({changes:R,scrollIntoView:!0,userEvent:"delete.cut"});let A=brokenClipboardAPI?null:v.clipboardData;return A?(A.clearData(),A.setData("text/plain",S),!0):(captureCopy(_,S),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(_,v){let S=[];for(let R of _.facet(focusChangeEffect)){let T=R(_,v);T&&S.push(T)}return S.length?_.update({effects:S,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(_){setTimeout(()=>{let v=_.hasFocus;if(v!=_.inputState.notifiedFocused){let S=focusChangeTransaction(_.state,v);S?_.dispatch(S):_.update([])}},10)}observers.focus=_=>{_.inputState.lastFocusTime=Date.now(),!_.scrollDOM.scrollTop&&(_.inputState.lastScrollTop||_.inputState.lastScrollLeft)&&(_.scrollDOM.scrollTop=_.inputState.lastScrollTop,_.scrollDOM.scrollLeft=_.inputState.lastScrollLeft),updateForFocusChange(_)};observers.blur=_=>{_.observer.clearSelectionRange(),updateForFocusChange(_)};observers.compositionstart=observers.compositionupdate=_=>{_.observer.editContext||(_.inputState.compositionFirstChange==null&&(_.inputState.compositionFirstChange=!0),_.inputState.composing<0&&(_.inputState.composing=0))};observers.compositionend=_=>{_.observer.editContext||(_.inputState.composing=-1,_.inputState.compositionEndedAt=Date.now(),_.inputState.compositionPendingKey=!0,_.inputState.compositionPendingChange=_.observer.pendingRecords().length>0,_.inputState.compositionFirstChange=null,browser.chrome&&browser.android?_.observer.flushSoon():_.inputState.compositionPendingChange?Promise.resolve().then(()=>_.observer.flush()):setTimeout(()=>{_.inputState.composing<0&&_.docView.hasComposition&&_.update([])},50))};observers.contextmenu=_=>{_.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(_,v)=>{var S,R;if((v.inputType=="insertText"||v.inputType=="insertCompositionText")&&(_.inputState.insertingText=v.data,_.inputState.insertingTextAt=Date.now()),v.inputType=="insertReplacementText"&&_.observer.editContext){let A=(S=v.dataTransfer)===null||S===void 0?void 0:S.getData("text/plain"),k=v.getTargetRanges();if(A&&k.length){let q=k[0],M=_.posAtDOM(q.startContainer,q.startOffset),D=_.posAtDOM(q.endContainer,q.endOffset);return applyDOMChangeInner(_,{from:M,to:D,insert:_.state.toText(A)},null),!0}}let T;if(browser.chrome&&browser.android&&(T=PendingKeys.find(A=>A.inputType==v.inputType))&&(_.observer.delayAndroidKey(T.key,T.keyCode),T.key=="Backspace"||T.key=="Delete")){let A=((R=window.visualViewport)===null||R===void 0?void 0:R.height)||0;setTimeout(()=>{var k;(((k=window.visualViewport)===null||k===void 0?void 0:k.height)||0)>A+10&&_.hasFocus&&(_.contentDOM.blur(),_.focus())},100)}return browser.ios&&v.inputType=="deleteContentForward"&&_.observer.flushSoon(),browser.safari&&v.inputType=="insertText"&&_.inputState.composing>=0&&setTimeout(()=>observers.compositionend(_,v),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(_){appliedFirefoxHack.has(_)||(appliedFirefoxHack.add(_),_.addEventListener("copy",()=>{}),_.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(v){this.lineWrapping=v,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(v,S){let R=this.doc.lineAt(S).number-this.doc.lineAt(v).number+1;return this.lineWrapping&&(R+=Math.max(0,Math.ceil((S-v-R*this.lineLength*.5)/this.lineLength))),this.lineHeight*R}heightForLine(v){return this.lineWrapping?(1+Math.max(0,Math.ceil((v-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(v){return this.doc=v,this}mustRefreshForWrapping(v){return wrappingWhiteSpace.indexOf(v)>-1!=this.lineWrapping}mustRefreshForHeights(v){let S=!1;for(let R=0;R<v.length;R++){let T=v[R];T<0?R++:this.heightSamples[Math.floor(T*10)]||(S=!0,this.heightSamples[Math.floor(T*10)]=!0)}return S}refresh(v,S,R,T,A,k){let q=wrappingWhiteSpace.indexOf(v)>-1,M=Math.round(S)!=Math.round(this.lineHeight)||this.lineWrapping!=q;if(this.lineWrapping=q,this.lineHeight=S,this.charWidth=R,this.textHeight=T,this.lineLength=A,M){this.heightSamples={};for(let D=0;D<k.length;D++){let L=k[D];L<0?D++:this.heightSamples[Math.floor(L*10)]=!0}}return M}}class MeasuredHeights{constructor(v,S){this.from=v,this.heights=S,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(v,S,R,T,A){this.from=v,this.length=S,this.top=R,this.height=T,this._content=A}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(v){let S=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(v._content)?v._content:[v]);return new BlockInfo(this.from,this.length+v.length,this.top,this.height+v.height,S)}}var QueryType$1=(function(_){return _[_.ByPos=0]="ByPos",_[_.ByHeight=1]="ByHeight",_[_.ByPosNoHeight=2]="ByPosNoHeight",_})(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(v,S,R=2){this.length=v,this.height=S,this.flags=R}get outdated(){return(this.flags&2)>0}set outdated(v){this.flags=(v?2:0)|this.flags&-3}setHeight(v){this.height!=v&&(Math.abs(this.height-v)>Epsilon&&(heightChangeFlag=!0),this.height=v)}replace(v,S,R){return HeightMap.of(R)}decomposeLeft(v,S){S.push(this)}decomposeRight(v,S){S.push(this)}applyChanges(v,S,R,T){let A=this,k=R.doc;for(let q=T.length-1;q>=0;q--){let{fromA:M,toA:D,fromB:L,toB:I}=T[q],N=A.lineAt(M,QueryType$1.ByPosNoHeight,R.setDoc(S),0,0),F=N.to>=D?N:A.lineAt(D,QueryType$1.ByPosNoHeight,R,0,0);for(I+=F.to-D,D=F.to;q>0&&N.from<=T[q-1].toA;)M=T[q-1].fromA,L=T[q-1].fromB,q--,M<N.from&&(N=A.lineAt(M,QueryType$1.ByPosNoHeight,R,0,0));L+=N.from-M,M=N.from;let H=NodeBuilder.build(R.setDoc(k),v,L,I);A=replace(A,A.replace(M,D,H))}return A.updateHeight(R,0)}static empty(){return new HeightMapText(0,0)}static of(v){if(v.length==1)return v[0];let S=0,R=v.length,T=0,A=0;for(;;)if(S==R)if(T>A*2){let q=v[S-1];q.break?v.splice(--S,1,q.left,null,q.right):v.splice(--S,1,q.left,q.right),R+=1+q.break,T-=q.size}else if(A>T*2){let q=v[R];q.break?v.splice(R,1,q.left,null,q.right):v.splice(R,1,q.left,q.right),R+=2+q.break,A-=q.size}else break;else if(T<A){let q=v[S++];q&&(T+=q.size)}else{let q=v[--R];q&&(A+=q.size)}let k=0;return v[S-1]==null?(k=1,S--):v[S]==null&&(k=1,R++),new HeightMapBranch(HeightMap.of(v.slice(0,S)),k,HeightMap.of(v.slice(R)))}}function replace(_,v){return _==v?_:(_.constructor!=v.constructor&&(heightChangeFlag=!0),v)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(v,S,R){super(v,S),this.deco=R}blockAt(v,S,R,T){return new BlockInfo(T,this.length,R,this.height,this.deco||0)}lineAt(v,S,R,T,A){return this.blockAt(0,R,T,A)}forEachLine(v,S,R,T,A,k){v<=A+this.length&&S>=A&&k(this.blockAt(0,R,T,A))}updateHeight(v,S=0,R=!1,T){return T&&T.from<=S&&T.more&&this.setHeight(T.heights[T.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(v,S){super(v,S,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(v,S,R,T){return new BlockInfo(T,this.length,R,this.height,this.breaks)}replace(v,S,R){let T=R[0];return R.length==1&&(T instanceof HeightMapText||T instanceof HeightMapGap&&T.flags&4)&&Math.abs(this.length-T.length)<10?(T instanceof HeightMapGap?T=new HeightMapText(T.length,this.height):T.height=this.height,this.outdated||(T.outdated=!1),T):HeightMap.of(R)}updateHeight(v,S=0,R=!1,T){return T&&T.from<=S&&T.more?this.setHeight(T.heights[T.index++]):(R||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,v.heightForLine(this.length-this.collapsed))+this.breaks*v.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(v){super(v,0)}heightMetrics(v,S){let R=v.doc.lineAt(S).number,T=v.doc.lineAt(S+this.length).number,A=T-R+1,k,q=0;if(v.lineWrapping){let M=Math.min(this.height,v.lineHeight*A);k=M/A,this.length>A+1&&(q=(this.height-M)/(this.length-A-1))}else k=this.height/A;return{firstLine:R,lastLine:T,perLine:k,perChar:q}}blockAt(v,S,R,T){let{firstLine:A,lastLine:k,perLine:q,perChar:M}=this.heightMetrics(S,T);if(S.lineWrapping){let D=T+(v<S.lineHeight?0:Math.round(Math.max(0,Math.min(1,(v-R)/this.height))*this.length)),L=S.doc.lineAt(D),I=q+L.length*M,N=Math.max(R,v-I/2);return new BlockInfo(L.from,L.length,N,I,0)}else{let D=Math.max(0,Math.min(k-A,Math.floor((v-R)/q))),{from:L,length:I}=S.doc.line(A+D);return new BlockInfo(L,I,R+q*D,q,0)}}lineAt(v,S,R,T,A){if(S==QueryType$1.ByHeight)return this.blockAt(v,R,T,A);if(S==QueryType$1.ByPosNoHeight){let{from:F,to:H}=R.doc.lineAt(v);return new BlockInfo(F,H-F,0,0,0)}let{firstLine:k,perLine:q,perChar:M}=this.heightMetrics(R,A),D=R.doc.lineAt(v),L=q+D.length*M,I=D.number-k,N=T+q*I+M*(D.from-A-I);return new BlockInfo(D.from,D.length,Math.max(T,Math.min(N,T+this.height-L)),L,0)}forEachLine(v,S,R,T,A,k){v=Math.max(v,A),S=Math.min(S,A+this.length);let{firstLine:q,perLine:M,perChar:D}=this.heightMetrics(R,A);for(let L=v,I=T;L<=S;){let N=R.doc.lineAt(L);if(L==v){let H=N.number-q;I+=M*H+D*(v-A-H)}let F=M+D*N.length;k(new BlockInfo(N.from,N.length,I,F,0)),I+=F,L=N.to+1}}replace(v,S,R){let T=this.length-S;if(T>0){let A=R[R.length-1];A instanceof HeightMapGap?R[R.length-1]=new HeightMapGap(A.length+T):R.push(null,new HeightMapGap(T-1))}if(v>0){let A=R[0];A instanceof HeightMapGap?R[0]=new HeightMapGap(v+A.length):R.unshift(new HeightMapGap(v-1),null)}return HeightMap.of(R)}decomposeLeft(v,S){S.push(new HeightMapGap(v-1),null)}decomposeRight(v,S){S.push(null,new HeightMapGap(this.length-v-1))}updateHeight(v,S=0,R=!1,T){let A=S+this.length;if(T&&T.from<=S+this.length&&T.more){let k=[],q=Math.max(S,T.from),M=-1;for(T.from>S&&k.push(new HeightMapGap(T.from-S-1).updateHeight(v,S));q<=A&&T.more;){let L=v.doc.lineAt(q).length;k.length&&k.push(null);let I=T.heights[T.index++];M==-1?M=I:Math.abs(I-M)>=Epsilon&&(M=-2);let N=new HeightMapText(L,I);N.outdated=!1,k.push(N),q+=L+1}q<=A&&k.push(null,new HeightMapGap(A-q).updateHeight(v,q));let D=HeightMap.of(k);return(M<0||Math.abs(D.height-this.height)>=Epsilon||Math.abs(M-this.heightMetrics(v,S).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,D)}else(R||this.outdated)&&(this.setHeight(v.heightForGap(S,S+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(v,S,R){super(v.length+S+R.length,v.height+R.height,S|(v.outdated||R.outdated?2:0)),this.left=v,this.right=R,this.size=v.size+R.size}get break(){return this.flags&1}blockAt(v,S,R,T){let A=R+this.left.height;return v<A?this.left.blockAt(v,S,R,T):this.right.blockAt(v,S,A,T+this.left.length+this.break)}lineAt(v,S,R,T,A){let k=T+this.left.height,q=A+this.left.length+this.break,M=S==QueryType$1.ByHeight?v<k:v<q,D=M?this.left.lineAt(v,S,R,T,A):this.right.lineAt(v,S,R,k,q);if(this.break||(M?D.to<q:D.from>q))return D;let L=S==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return M?D.join(this.right.lineAt(q,L,R,k,q)):this.left.lineAt(q,L,R,T,A).join(D)}forEachLine(v,S,R,T,A,k){let q=T+this.left.height,M=A+this.left.length+this.break;if(this.break)v<M&&this.left.forEachLine(v,S,R,T,A,k),S>=M&&this.right.forEachLine(v,S,R,q,M,k);else{let D=this.lineAt(M,QueryType$1.ByPos,R,T,A);v<D.from&&this.left.forEachLine(v,D.from-1,R,T,A,k),D.to>=v&&D.from<=S&&k(D),S>D.to&&this.right.forEachLine(D.to+1,S,R,q,M,k)}}replace(v,S,R){let T=this.left.length+this.break;if(S<T)return this.balanced(this.left.replace(v,S,R),this.right);if(v>this.left.length)return this.balanced(this.left,this.right.replace(v-T,S-T,R));let A=[];v>0&&this.decomposeLeft(v,A);let k=A.length;for(let q of R)A.push(q);if(v>0&&mergeGaps(A,k-1),S<this.length){let q=A.length;this.decomposeRight(S,A),mergeGaps(A,q)}return HeightMap.of(A)}decomposeLeft(v,S){let R=this.left.length;if(v<=R)return this.left.decomposeLeft(v,S);S.push(this.left),this.break&&(R++,v>=R&&S.push(null)),v>R&&this.right.decomposeLeft(v-R,S)}decomposeRight(v,S){let R=this.left.length,T=R+this.break;if(v>=T)return this.right.decomposeRight(v-T,S);v<R&&this.left.decomposeRight(v,S),this.break&&v<T&&S.push(null),S.push(this.right)}balanced(v,S){return v.size>2*S.size||S.size>2*v.size?HeightMap.of(this.break?[v,null,S]:[v,S]):(this.left=replace(this.left,v),this.right=replace(this.right,S),this.setHeight(v.height+S.height),this.outdated=v.outdated||S.outdated,this.size=v.size+S.size,this.length=v.length+this.break+S.length,this)}updateHeight(v,S=0,R=!1,T){let{left:A,right:k}=this,q=S+A.length+this.break,M=null;return T&&T.from<=S+A.length&&T.more?M=A=A.updateHeight(v,S,R,T):A.updateHeight(v,S,R),T&&T.from<=q+k.length&&T.more?M=k=k.updateHeight(v,q,R,T):k.updateHeight(v,q,R),M?this.balanced(A,k):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(_,v){let S,R;_[v]==null&&(S=_[v-1])instanceof HeightMapGap&&(R=_[v+1])instanceof HeightMapGap&&_.splice(v-1,3,new HeightMapGap(S.length+1+R.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(v,S){this.pos=v,this.oracle=S,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=v}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(v,S){if(this.lineStart>-1){let R=Math.min(S,this.lineEnd),T=this.nodes[this.nodes.length-1];T instanceof HeightMapText?T.length+=R-this.pos:(R>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(R-this.pos,-1)),this.writtenTo=R,S>R&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=S}point(v,S,R){if(v<S||R.heightRelevant){let T=R.widget?R.widget.estimatedHeight:0,A=R.widget?R.widget.lineBreaks:0;T<0&&(T=this.oracle.lineHeight);let k=S-v;R.block?this.addBlock(new HeightMapBlock(k,T,R)):(k||A||T>=relevantWidgetHeight)&&this.addLineDeco(T,A,k)}else S>v&&this.span(v,S);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:v,to:S}=this.oracle.doc.lineAt(this.pos);this.lineStart=v,this.lineEnd=S,this.writtenTo<v&&((this.writtenTo<v-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,v-1)),this.nodes.push(null)),this.pos>v&&this.nodes.push(new HeightMapText(this.pos-v,-1)),this.writtenTo=this.pos}blankContent(v,S){let R=new HeightMapGap(S-v);return this.oracle.doc.lineAt(v).to==S&&(R.flags|=4),R}ensureLine(){this.enterLine();let v=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(v instanceof HeightMapText)return v;let S=new HeightMapText(0,-1);return this.nodes.push(S),S}addBlock(v){this.enterLine();let S=v.deco;S&&S.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(v),this.writtenTo=this.pos=this.pos+v.length,S&&S.endSide>0&&(this.covering=v)}addLineDeco(v,S,R){let T=this.ensureLine();T.length+=R,T.collapsed+=R,T.widgetHeight=Math.max(T.widgetHeight,v),T.breaks+=S,this.writtenTo=this.pos=this.pos+R}finish(v){let S=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(S instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||S==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let R=v;for(let T of this.nodes)T instanceof HeightMapText&&T.updateHeight(this.oracle,R),R+=T?T.length:1;return this.nodes}static build(v,S,R,T){let A=new NodeBuilder(R,v);return RangeSet.spans(S,R,T,A,0),A.finish(R)}}function heightRelevantDecoChanges(_,v,S){let R=new DecorationComparator;return RangeSet.compare(_,v,S,R,0),R.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(v,S,R,T){(v<S||R&&R.heightRelevant||T&&T.heightRelevant)&&addRange(v,S,this.changes,5)}}function visiblePixelRange(_,v){let S=_.getBoundingClientRect(),R=_.ownerDocument,T=R.defaultView||window,A=Math.max(0,S.left),k=Math.min(T.innerWidth,S.right),q=Math.max(0,S.top),M=Math.min(T.innerHeight,S.bottom);for(let D=_.parentNode;D&&D!=R.body;)if(D.nodeType==1){let L=D,I=window.getComputedStyle(L);if((L.scrollHeight>L.clientHeight||L.scrollWidth>L.clientWidth)&&I.overflow!="visible"){let N=L.getBoundingClientRect();A=Math.max(A,N.left),k=Math.min(k,N.right),q=Math.max(q,N.top),M=Math.min(D==_.parentNode?T.innerHeight:M,N.bottom)}D=I.position=="absolute"||I.position=="fixed"?L.offsetParent:L.parentNode}else if(D.nodeType==11)D=D.host;else break;return{left:A-S.left,right:Math.max(A,k)-S.left,top:q-(S.top+v),bottom:Math.max(q,M)-(S.top+v)}}function inWindow(_){let v=_.getBoundingClientRect(),S=_.ownerDocument.defaultView||window;return v.left<S.innerWidth&&v.right>0&&v.top<S.innerHeight&&v.bottom>0}function fullPixelRange(_,v){let S=_.getBoundingClientRect();return{left:0,right:S.right-S.left,top:v,bottom:S.bottom-(S.top+v)}}class LineGap{constructor(v,S,R,T){this.from=v,this.to=S,this.size=R,this.displaySize=T}static same(v,S){if(v.length!=S.length)return!1;for(let R=0;R<v.length;R++){let T=v[R],A=S[R];if(T.from!=A.from||T.to!=A.to||T.size!=A.size)return!1}return!0}draw(v,S){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(S?v.scaleY:v.scaleX),S)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(v,S){super(),this.size=v,this.vertical=S}eq(v){return v.size==this.size&&v.vertical==this.vertical}toDOM(){let v=document.createElement("div");return this.vertical?v.style.height=this.size+"px":(v.style.width=this.size+"px",v.style.height="2px",v.style.display="inline-block"),v}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(v){this.state=v,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let S=v.facet(contentAttributes).some(R=>typeof R!="function"&&R.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(S),this.stateDeco=v.facet(decorations).filter(R=>typeof R!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(v.doc),[new ChangedRange(0,0,0,v.doc.length)]);for(let R=0;R<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());R++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(R=>R.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let v=[this.viewport],{main:S}=this.state.selection;for(let R=0;R<=1;R++){let T=R?S.head:S.anchor;if(!v.some(({from:A,to:k})=>T>=A&&T<=k)){let{from:A,to:k}=this.lineBlockAt(T);v.push(new Viewport(A,k))}}return this.viewports=v.sort((R,T)=>R.from-T.from),this.updateScaler()}updateScaler(){let v=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),v.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,v=>{this.viewportLines.push(scaleBlock(v,this.scaler))})}update(v,S=null){this.state=v.state;let R=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(L=>typeof L!="function");let T=v.changedRanges,A=ChangedRange.extendWithRanges(T,heightRelevantDecoChanges(R,this.stateDeco,v?v.changes:ChangeSet.empty(this.state.doc.length))),k=this.heightMap.height,q=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,v.startState.doc,this.heightOracle.setDoc(this.state.doc),A),(this.heightMap.height!=k||heightChangeFlag)&&(v.flags|=2),q?(this.scrollAnchorPos=v.changes.mapPos(q.from,-1),this.scrollAnchorHeight=q.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=k);let M=A.length?this.mapViewport(this.viewport,v.changes):this.viewport;(S&&(S.range.head<M.from||S.range.head>M.to)||!this.viewportIsAppropriate(M))&&(M=this.getViewport(0,S));let D=M.from!=this.viewport.from||M.to!=this.viewport.to;this.viewport=M,v.flags|=this.updateForViewport(),(D||!v.changes.empty||v.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,v.changes))),v.flags|=this.computeVisibleRanges(v.changes),S&&(this.scrollTarget=S),!this.mustEnforceCursorAssoc&&v.selectionSet&&v.view.lineWrapping&&v.state.selection.main.empty&&v.state.selection.main.assoc&&!v.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(v){let S=v.contentDOM,R=window.getComputedStyle(S),T=this.heightOracle,A=R.whiteSpace;this.defaultTextDirection=R.direction=="rtl"?Direction.RTL:Direction.LTR;let k=this.heightOracle.mustRefreshForWrapping(A),q=S.getBoundingClientRect(),M=k||this.mustMeasureContent||this.contentDOMHeight!=q.height;this.contentDOMHeight=q.height,this.mustMeasureContent=!1;let D=0,L=0;if(q.width&&q.height){let{scaleX:J,scaleY:te}=getScale(S,q);(J>.005&&Math.abs(this.scaleX-J)>.005||te>.005&&Math.abs(this.scaleY-te)>.005)&&(this.scaleX=J,this.scaleY=te,D|=16,k=M=!0)}let I=(parseInt(R.paddingTop)||0)*this.scaleY,N=(parseInt(R.paddingBottom)||0)*this.scaleY;(this.paddingTop!=I||this.paddingBottom!=N)&&(this.paddingTop=I,this.paddingBottom=N,D|=18),this.editorWidth!=v.scrollDOM.clientWidth&&(T.lineWrapping&&(M=!0),this.editorWidth=v.scrollDOM.clientWidth,D|=16);let F=v.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=F&&(this.scrollAnchorHeight=-1,this.scrollTop=F),this.scrolledToBottom=isScrolledToBottom(v.scrollDOM);let H=(this.printing?fullPixelRange:visiblePixelRange)(S,this.paddingTop),G=H.top-this.pixelViewport.top,V=H.bottom-this.pixelViewport.bottom;this.pixelViewport=H;let j=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(j!=this.inView&&(this.inView=j,j&&(M=!0)),!this.inView&&!this.scrollTarget&&!inWindow(v.dom))return 0;let W=q.width;if((this.contentDOMWidth!=W||this.editorHeight!=v.scrollDOM.clientHeight)&&(this.contentDOMWidth=q.width,this.editorHeight=v.scrollDOM.clientHeight,D|=16),M){let J=v.docView.measureVisibleLineHeights(this.viewport);if(T.mustRefreshForHeights(J)&&(k=!0),k||T.lineWrapping&&Math.abs(W-this.contentDOMWidth)>T.charWidth){let{lineHeight:te,charWidth:re,textHeight:ee}=v.docView.measureTextSize();k=te>0&&T.refresh(A,te,re,ee,Math.max(5,W/re),J),k&&(v.docView.minWidth=0,D|=16)}G>0&&V>0?L=Math.max(G,V):G<0&&V<0&&(L=Math.min(G,V)),clearHeightChangeFlag();for(let te of this.viewports){let re=te.from==this.viewport.from?J:v.docView.measureVisibleLineHeights(te);this.heightMap=(k?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,v.state.doc.length)]):this.heightMap).updateHeight(T,0,k,new MeasuredHeights(te.from,re))}heightChangeFlag&&(D|=2)}let X=!this.viewportIsAppropriate(this.viewport,L)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return X&&(D&2&&(D|=this.updateScaler()),this.viewport=this.getViewport(L,this.scrollTarget),D|=this.updateForViewport()),(D&2||X)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(k?[]:this.lineGaps,v)),D|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,v.docView.enforceCursorAssoc()),D}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(v,S){let R=.5-Math.max(-.5,Math.min(.5,v/1e3/2)),T=this.heightMap,A=this.heightOracle,{visibleTop:k,visibleBottom:q}=this,M=new Viewport(T.lineAt(k-R*1e3,QueryType$1.ByHeight,A,0,0).from,T.lineAt(q+(1-R)*1e3,QueryType$1.ByHeight,A,0,0).to);if(S){let{head:D}=S.range;if(D<M.from||D>M.to){let L=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),I=T.lineAt(D,QueryType$1.ByPos,A,0,0),N;S.y=="center"?N=(I.top+I.bottom)/2-L/2:S.y=="start"||S.y=="nearest"&&D<M.from?N=I.top:N=I.bottom-L,M=new Viewport(T.lineAt(N-1e3/2,QueryType$1.ByHeight,A,0,0).from,T.lineAt(N+L+1e3/2,QueryType$1.ByHeight,A,0,0).to)}}return M}mapViewport(v,S){let R=S.mapPos(v.from,-1),T=S.mapPos(v.to,1);return new Viewport(this.heightMap.lineAt(R,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(T,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:v,to:S},R=0){if(!this.inView)return!0;let{top:T}=this.heightMap.lineAt(v,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:A}=this.heightMap.lineAt(S,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:k,visibleBottom:q}=this;return(v==0||T<=k-Math.max(10,Math.min(-R,250)))&&(S==this.state.doc.length||A>=q+Math.max(10,Math.min(R,250)))&&T>k-2*1e3&&A<q+2*1e3}mapLineGaps(v,S){if(!v.length||S.empty)return v;let R=[];for(let T of v)S.touchesRange(T.from,T.to)||R.push(new LineGap(S.mapPos(T.from),S.mapPos(T.to),T.size,T.displaySize));return R}ensureLineGaps(v,S){let R=this.heightOracle.lineWrapping,T=R?1e4:2e3,A=T>>1,k=T<<1;if(this.defaultTextDirection!=Direction.LTR&&!R)return[];let q=[],M=(L,I,N,F)=>{if(I-L<A)return;let H=this.state.selection.main,G=[H.from];H.empty||G.push(H.to);for(let j of G)if(j>L&&j<I){M(L,j-10,N,F),M(j+10,I,N,F);return}let V=find(v,j=>j.from>=N.from&&j.to<=N.to&&Math.abs(j.from-L)<A&&Math.abs(j.to-I)<A&&!G.some(W=>j.from<W&&j.to>W));if(!V){if(I<N.to&&S&&R&&S.visibleRanges.some(X=>X.from<=I&&X.to>=I)){let X=S.moveToLineBoundary(EditorSelection.cursor(I),!1,!0).head;X>L&&(I=X)}let j=this.gapSize(N,L,I,F),W=R||j<2e6?j:2e6;V=new LineGap(L,I,j,W)}q.push(V)},D=L=>{if(L.length<k||L.type!=BlockType.Text)return;let I=lineStructure(L.from,L.to,this.stateDeco);if(I.total<k)return;let N=this.scrollTarget?this.scrollTarget.range.head:null,F,H;if(R){let G=T/this.heightOracle.lineLength*this.heightOracle.lineHeight,V,j;if(N!=null){let W=findFraction(I,N),X=((this.visibleBottom-this.visibleTop)/2+G)/L.height;V=W-X,j=W+X}else V=(this.visibleTop-L.top-G)/L.height,j=(this.visibleBottom-L.top+G)/L.height;F=findPosition(I,V),H=findPosition(I,j)}else{let G=I.total*this.heightOracle.charWidth,V=T*this.heightOracle.charWidth,j=0;if(G>2e6)for(let re of v)re.from>=L.from&&re.from<L.to&&re.size!=re.displaySize&&re.from*this.heightOracle.charWidth+j<this.pixelViewport.left&&(j=re.size-re.displaySize);let W=this.pixelViewport.left+j,X=this.pixelViewport.right+j,J,te;if(N!=null){let re=findFraction(I,N),ee=((X-W)/2+V)/G;J=re-ee,te=re+ee}else J=(W-V)/G,te=(X+V)/G;F=findPosition(I,J),H=findPosition(I,te)}F>L.from&&M(L.from,F,L,I),H<L.to&&M(H,L.to,L,I)};for(let L of this.viewportLines)Array.isArray(L.type)?L.type.forEach(D):D(L);return q}gapSize(v,S,R,T){let A=findFraction(T,R)-findFraction(T,S);return this.heightOracle.lineWrapping?v.height*A:T.total*this.heightOracle.charWidth*A}updateLineGaps(v){LineGap.same(v,this.lineGaps)||(this.lineGaps=v,this.lineGapDeco=Decoration.set(v.map(S=>S.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(v){let S=this.stateDeco;this.lineGaps.length&&(S=S.concat(this.lineGapDeco));let R=[];RangeSet.spans(S,this.viewport.from,this.viewport.to,{span(A,k){R.push({from:A,to:k})},point(){}},20);let T=0;if(R.length!=this.visibleRanges.length)T=12;else for(let A=0;A<R.length&&!(T&8);A++){let k=this.visibleRanges[A],q=R[A];(k.from!=q.from||k.to!=q.to)&&(T|=4,v&&v.mapPos(k.from,-1)==q.from&&v.mapPos(k.to,1)==q.to||(T|=8))}return this.visibleRanges=R,T}lineBlockAt(v){return v>=this.viewport.from&&v<=this.viewport.to&&this.viewportLines.find(S=>S.from<=v&&S.to>=v)||scaleBlock(this.heightMap.lineAt(v,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(v){return v>=this.viewportLines[0].top&&v<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(S=>S.top<=v&&S.bottom>=v)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(v),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(v){let S=this.lineBlockAtHeight(v+8);return S.from>=this.viewport.from||this.viewportLines[0].top-v>200?S:this.viewportLines[0]}elementAtHeight(v){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(v),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(v,S){this.from=v,this.to=S}}function lineStructure(_,v,S){let R=[],T=_,A=0;return RangeSet.spans(S,_,v,{span(){},point(k,q){k>T&&(R.push({from:T,to:k}),A+=k-T),T=q}},20),T<v&&(R.push({from:T,to:v}),A+=v-T),{total:A,ranges:R}}function findPosition({total:_,ranges:v},S){if(S<=0)return v[0].from;if(S>=1)return v[v.length-1].to;let R=Math.floor(_*S);for(let T=0;;T++){let{from:A,to:k}=v[T],q=k-A;if(R<=q)return A+R;R-=q}}function findFraction(_,v){let S=0;for(let{from:R,to:T}of _.ranges){if(v<=T){S+=v-R;break}S+=T-R}return S/_.total}function find(_,v){for(let S of _)if(v(S))return S}const IdScaler={toDOM(_){return _},fromDOM(_){return _},scale:1,eq(_){return _==this}};class BigScaler{constructor(v,S,R){let T=0,A=0,k=0;this.viewports=R.map(({from:q,to:M})=>{let D=S.lineAt(q,QueryType$1.ByPos,v,0,0).top,L=S.lineAt(M,QueryType$1.ByPos,v,0,0).bottom;return T+=L-D,{from:q,to:M,top:D,bottom:L,domTop:0,domBottom:0}}),this.scale=(7e6-T)/(S.height-T);for(let q of this.viewports)q.domTop=k+(q.top-A)*this.scale,k=q.domBottom=q.domTop+(q.bottom-q.top),A=q.bottom}toDOM(v){for(let S=0,R=0,T=0;;S++){let A=S<this.viewports.length?this.viewports[S]:null;if(!A||v<A.top)return T+(v-R)*this.scale;if(v<=A.bottom)return A.domTop+(v-A.top);R=A.bottom,T=A.domBottom}}fromDOM(v){for(let S=0,R=0,T=0;;S++){let A=S<this.viewports.length?this.viewports[S]:null;if(!A||v<A.domTop)return R+(v-T)/this.scale;if(v<=A.domBottom)return A.top+(v-A.domTop);R=A.bottom,T=A.domBottom}}eq(v){return v instanceof BigScaler?this.scale==v.scale&&this.viewports.length==v.viewports.length&&this.viewports.every((S,R)=>S.from==v.viewports[R].from&&S.to==v.viewports[R].to):!1}}function scaleBlock(_,v){if(v.scale==1)return _;let S=v.toDOM(_.top),R=v.toDOM(_.bottom);return new BlockInfo(_.from,_.length,S,R-S,Array.isArray(_._content)?_._content.map(T=>scaleBlock(T,v)):_._content)}const theme=Facet.define({combine:_=>_.join(" ")}),darkTheme=Facet.define({combine:_=>_.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(_,v,S){return new StyleModule(v,{finish(R){return/&/.test(R)?R.replace(/&\w*/,T=>{if(T=="&")return _;if(!S||!S[T])throw new RangeError(`Unsupported selector: ${T}`);return S[T]}):_+" "+R}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(v){this.view=v,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=v.contentDOM,this.observer=new MutationObserver(S=>{for(let R of S)this.queue.push(R);(browser.ie&&browser.ie_version<=11||browser.ios&&v.composing)&&S.some(R=>R.type=="childList"&&R.removedNodes.length||R.type=="characterData"&&R.oldValue.length>R.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&browser.android&&v.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(v),v.state.facet(editable)&&(v.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=S=>{this.queue.push({target:S.target,type:"characterData",oldValue:S.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var S;((S=this.view.docView)===null||S===void 0?void 0:S.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(v.scrollDOM)),this.addWindowListeners(this.win=v.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(S=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),S.length>0&&S[S.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(S=>{S.length>0&&S[S.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(v){this.view.inputState.runHandlers("scroll",v),this.intersecting&&this.view.measure()}onScroll(v){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(v)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(v){(v.type=="change"||!v.type)&&!v.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(v){if(this.gapIntersection&&(v.length!=this.gaps.length||this.gaps.some((S,R)=>S!=v[R]))){this.gapIntersection.disconnect();for(let S of v)this.gapIntersection.observe(S);this.gaps=v}}onSelectionChange(v){let S=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:R}=this,T=this.selectionRange;if(R.state.facet(editable)?R.root.activeElement!=this.dom:!hasSelection(this.dom,T))return;let A=T.anchorNode&&R.docView.nearest(T.anchorNode);if(A&&A.ignoreEvent(v)){S||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!R.state.selection.main.empty&&T.focusNode&&isEquivalentPosition(T.focusNode,T.focusOffset,T.anchorNode,T.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:v}=this,S=getSelection(v.root);if(!S)return!1;let R=browser.safari&&v.root.nodeType==11&&v.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,S)||S;if(!R||this.selectionRange.eq(R))return!1;let T=hasSelection(this.dom,R);return T&&!this.selectionChanged&&v.inputState.lastFocusTime>Date.now()-200&&v.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,R)?(this.view.inputState.lastFocusTime=0,v.docView.updateSelection(),!1):(this.selectionRange.setRange(R),T&&(this.selectionChanged=!0),!0)}setSelectionRange(v,S){this.selectionRange.set(v.node,v.offset,S.node,S.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let v=0,S=null;for(let R=this.dom;R;)if(R.nodeType==1)!S&&v<this.scrollTargets.length&&this.scrollTargets[v]==R?v++:S||(S=this.scrollTargets.slice(0,v)),S&&S.push(R),R=R.assignedSlot||R.parentNode;else if(R.nodeType==11)R=R.host;else break;if(v<this.scrollTargets.length&&!S&&(S=this.scrollTargets.slice(0,v)),S){for(let R of this.scrollTargets)R.removeEventListener("scroll",this.onScroll);for(let R of this.scrollTargets=S)R.addEventListener("scroll",this.onScroll)}}ignore(v){if(!this.active)return v();try{return this.stop(),v()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(v,S){var R;if(!this.delayedAndroidKey){let T=()=>{let A=this.delayedAndroidKey;A&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=A.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&A.force&&dispatchKey(this.dom,A.key,A.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(T)}(!this.delayedAndroidKey||v=="Enter")&&(this.delayedAndroidKey={key:v,keyCode:S,force:this.lastChange<Date.now()-50||!!(!((R=this.delayedAndroidKey)===null||R===void 0)&&R.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let v of this.observer.takeRecords())this.queue.push(v);return this.queue}processRecords(){let v=this.pendingRecords();v.length&&(this.queue=[]);let S=-1,R=-1,T=!1;for(let A of v){let k=this.readMutation(A);k&&(k.typeOver&&(T=!0),S==-1?{from:S,to:R}=k:(S=Math.min(k.from,S),R=Math.max(k.to,R)))}return{from:S,to:R,typeOver:T}}readChange(){let{from:v,to:S,typeOver:R}=this.processRecords(),T=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(v<0&&!T)return null;v>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let A=new DOMChange(this.view,v,S,R);return this.view.docView.domChanged={newSel:A.newSel?A.newSel.main:null},A}flush(v=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;v&&this.readSelectionRange();let S=this.readChange();if(!S)return this.view.requestMeasure(),!1;let R=this.view.state,T=applyDOMChange(this.view,S);return this.view.state==R&&(S.domChanged||S.newSel&&!S.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),T}readMutation(v){let S=this.view.docView.nearest(v.target);if(!S||S.ignoreMutation(v))return null;if(S.markDirty(v.type=="attributes"),v.type=="attributes"&&(S.flags|=4),v.type=="childList"){let R=findChild(S,v.previousSibling||v.target.previousSibling,-1),T=findChild(S,v.nextSibling||v.target.nextSibling,1);return{from:R?S.posAfter(R):S.posAtStart,to:T?S.posBefore(T):S.posAtEnd,typeOver:!1}}else return v.type=="characterData"?{from:S.posAtStart,to:S.posAtEnd,typeOver:v.target.nodeValue==v.oldValue}:null}setWindow(v){v!=this.win&&(this.removeWindowListeners(this.win),this.win=v,this.addWindowListeners(this.win))}addWindowListeners(v){v.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):v.addEventListener("beforeprint",this.onPrint),v.addEventListener("scroll",this.onScroll),v.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(v){v.removeEventListener("scroll",this.onScroll),v.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):v.removeEventListener("beforeprint",this.onPrint),v.document.removeEventListener("selectionchange",this.onSelectionChange)}update(v){this.editContext&&(this.editContext.update(v),v.startState.facet(editable)!=v.state.facet(editable)&&(v.view.contentDOM.editContext=v.state.facet(editable)?this.editContext.editContext:null))}destroy(){var v,S,R;this.stop(),(v=this.intersection)===null||v===void 0||v.disconnect(),(S=this.gapIntersection)===null||S===void 0||S.disconnect(),(R=this.resizeScroll)===null||R===void 0||R.disconnect();for(let T of this.scrollTargets)T.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(_,v,S){for(;v;){let R=ContentView.get(v);if(R&&R.parent==_)return R;let T=v.parentNode;v=T!=_.dom?T:S>0?v.nextSibling:v.previousSibling}return null}function buildSelectionRangeFromRange(_,v){let S=v.startContainer,R=v.startOffset,T=v.endContainer,A=v.endOffset,k=_.docView.domAtPos(_.state.selection.main.anchor);return isEquivalentPosition(k.node,k.offset,T,A)&&([S,R,T,A]=[T,A,S,R]),{anchorNode:S,anchorOffset:R,focusNode:T,focusOffset:A}}function safariSelectionRangeHack(_,v){if(v.getComposedRanges){let T=v.getComposedRanges(_.root)[0];if(T)return buildSelectionRangeFromRange(_,T)}let S=null;function R(T){T.preventDefault(),T.stopImmediatePropagation(),S=T.getTargetRanges()[0]}return _.contentDOM.addEventListener("beforeinput",R,!0),_.dom.ownerDocument.execCommand("indent"),_.contentDOM.removeEventListener("beforeinput",R,!0),S?buildSelectionRangeFromRange(_,S):null}class EditContextManager{constructor(v){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(v.state);let S=this.editContext=new window.EditContext({text:v.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,v.state.selection.main.anchor))),selectionEnd:this.toContextPos(v.state.selection.main.head)});this.handlers.textupdate=R=>{let T=v.state.selection.main,{anchor:A,head:k}=T,q=this.toEditorPos(R.updateRangeStart),M=this.toEditorPos(R.updateRangeEnd);v.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:R.updateRangeStart,editorBase:q,drifted:!1});let D=M-q>R.text.length;q==this.from&&A<this.from?q=A:M==this.to&&A>this.to&&(M=A);let L=findDiff(v.state.sliceDoc(q,M),R.text,(D?T.from:T.to)-q,D?"end":null);if(!L){let N=EditorSelection.single(this.toEditorPos(R.selectionStart),this.toEditorPos(R.selectionEnd));N.main.eq(T)||v.dispatch({selection:N,userEvent:"select"});return}let I={from:L.from+q,to:L.toA+q,insert:Text.of(R.text.slice(L.from,L.toB).split(`
`))};if((browser.mac||browser.android)&&I.from==k-1&&/^\. ?$/.test(R.text)&&v.contentDOM.getAttribute("autocorrect")=="off"&&(I={from:q,to:M,insert:Text.of([R.text.replace("."," ")])}),this.pendingContextChange=I,!v.state.readOnly){let N=this.to-this.from+(I.to-I.from+I.insert.length);applyDOMChangeInner(v,I,EditorSelection.single(this.toEditorPos(R.selectionStart,N),this.toEditorPos(R.selectionEnd,N)))}this.pendingContextChange&&(this.revertPending(v.state),this.setSelection(v.state)),I.from<I.to&&!I.insert.length&&v.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(S.text.slice(Math.max(0,R.updateRangeStart-1),Math.min(S.text.length,R.updateRangeStart+1)))&&this.handlers.compositionend(R)},this.handlers.characterboundsupdate=R=>{let T=[],A=null;for(let k=this.toEditorPos(R.rangeStart),q=this.toEditorPos(R.rangeEnd);k<q;k++){let M=v.coordsForChar(k);A=M&&new DOMRect(M.left,M.top,M.right-M.left,M.bottom-M.top)||A||new DOMRect,T.push(A)}S.updateCharacterBounds(R.rangeStart,T)},this.handlers.textformatupdate=R=>{let T=[];for(let A of R.getTextFormats()){let k=A.underlineStyle,q=A.underlineThickness;if(!/none/i.test(k)&&!/none/i.test(q)){let M=this.toEditorPos(A.rangeStart),D=this.toEditorPos(A.rangeEnd);if(M<D){let L=`text-decoration: underline ${/^[a-z]/.test(k)?k+" ":k=="Dashed"?"dashed ":k=="Squiggle"?"wavy ":""}${/thin/i.test(q)?1:2}px`;T.push(Decoration.mark({attributes:{style:L}}).range(M,D))}}}v.dispatch({effects:setEditContextFormatting.of(Decoration.set(T))})},this.handlers.compositionstart=()=>{v.inputState.composing<0&&(v.inputState.composing=0,v.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(v.inputState.composing=-1,v.inputState.compositionFirstChange=null,this.composing){let{drifted:R}=this.composing;this.composing=null,R&&this.reset(v.state)}};for(let R in this.handlers)S.addEventListener(R,this.handlers[R]);this.measureReq={read:R=>{this.editContext.updateControlBounds(R.contentDOM.getBoundingClientRect());let T=getSelection(R.root);T&&T.rangeCount&&this.editContext.updateSelectionBounds(T.getRangeAt(0).getBoundingClientRect())}}}applyEdits(v){let S=0,R=!1,T=this.pendingContextChange;return v.changes.iterChanges((A,k,q,M,D)=>{if(R)return;let L=D.length-(k-A);if(T&&k>=T.to)if(T.from==A&&T.to==k&&T.insert.eq(D)){T=this.pendingContextChange=null,S+=L,this.to+=L;return}else T=null,this.revertPending(v.state);if(A+=S,k+=S,k<=this.from)this.from+=L,this.to+=L;else if(A<this.to){if(A<this.from||k>this.to||this.to-this.from+D.length>3e4){R=!0;return}this.editContext.updateText(this.toContextPos(A),this.toContextPos(k),D.toString()),this.to+=L}S+=L}),T&&!R&&this.revertPending(v.state),!R}update(v){let S=this.pendingContextChange,R=v.startState.selection.main;this.composing&&(this.composing.drifted||!v.changes.touchesRange(R.from,R.to)&&v.transactions.some(T=>!T.isUserEvent("input.type")&&T.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=v.changes.mapPos(this.composing.editorBase)):!this.applyEdits(v)||!this.rangeIsValid(v.state)?(this.pendingContextChange=null,this.reset(v.state)):(v.docChanged||v.selectionSet||S)&&this.setSelection(v.state),(v.geometryChanged||v.docChanged||v.selectionSet)&&v.view.requestMeasure(this.measureReq)}resetRange(v){let{head:S}=v.selection.main;this.from=Math.max(0,S-1e4),this.to=Math.min(v.doc.length,S+1e4)}reset(v){this.resetRange(v),this.editContext.updateText(0,this.editContext.text.length,v.doc.sliceString(this.from,this.to)),this.setSelection(v)}revertPending(v){let S=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(S.from),this.toContextPos(S.from+S.insert.length),v.doc.sliceString(S.from,S.to))}setSelection(v){let{main:S}=v.selection,R=this.toContextPos(Math.max(this.from,Math.min(this.to,S.anchor))),T=this.toContextPos(S.head);(this.editContext.selectionStart!=R||this.editContext.selectionEnd!=T)&&this.editContext.updateSelection(R,T)}rangeIsValid(v){let{head:S}=v.selection.main;return!(this.from>0&&S-this.from<500||this.to<v.doc.length&&this.to-S<500||this.to-this.from>1e4*3)}toEditorPos(v,S=this.to-this.from){v=Math.min(v,S);let R=this.composing;return R&&R.drifted?R.editorBase+(v-R.contextBase):v+this.from}toContextPos(v){let S=this.composing;return S&&S.drifted?S.contextBase+(v-S.editorBase):v-this.from}destroy(){for(let v in this.handlers)this.editContext.removeEventListener(v,this.handlers[v])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(v={}){var S;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),v.parent&&v.parent.appendChild(this.dom);let{dispatch:R}=v;this.dispatchTransactions=v.dispatchTransactions||R&&(T=>T.forEach(A=>R(A,this)))||(T=>this.update(T)),this.dispatch=this.dispatch.bind(this),this._root=v.root||getRoot(v.parent)||document,this.viewState=new ViewState(v.state||EditorState.create(v)),v.scrollTo&&v.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=v.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(T=>new PluginInstance(T));for(let T of this.plugins)T.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((S=document.fonts)===null||S===void 0)&&S.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...v){let S=v.length==1&&v[0]instanceof Transaction?v:v.length==1&&Array.isArray(v[0])?v[0]:[this.state.update(...v)];this.dispatchTransactions(S,this)}update(v){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let S=!1,R=!1,T,A=this.state;for(let N of v){if(N.startState!=A)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");A=N.state}if(this.destroyed){this.viewState.state=A;return}let k=this.hasFocus,q=0,M=null;v.some(N=>N.annotation(isFocusChange))?(this.inputState.notifiedFocused=k,q=1):k!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=k,M=focusChangeTransaction(A,k),M||(q=1));let D=this.observer.delayedAndroidKey,L=null;if(D?(this.observer.clearDelayedAndroidKey(),L=this.observer.readChange(),(L&&!this.state.doc.eq(A.doc)||!this.state.selection.eq(A.selection))&&(L=null)):this.observer.clear(),A.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(A);T=ViewUpdate.create(this,A,v),T.flags|=q;let I=this.viewState.scrollTarget;try{this.updateState=2;for(let N of v){if(I&&(I=I.map(N.changes)),N.scrollIntoView){let{main:F}=N.state.selection;I=new ScrollTarget(F.empty?F:EditorSelection.cursor(F.head,F.head>F.anchor?-1:1))}for(let F of N.effects)F.is(scrollIntoView$1)&&(I=F.value.clip(this.state))}this.viewState.update(T,I),this.bidiCache=CachedOrder.update(this.bidiCache,T.changes),T.empty||(this.updatePlugins(T),this.inputState.update(T)),S=this.docView.update(T),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),R=this.updateAttrs(),this.showAnnouncements(v),this.docView.updateSelection(S,v.some(N=>N.isUserEvent("select.pointer")))}finally{this.updateState=0}if(T.startState.facet(theme)!=T.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(S||R||I||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),S&&this.docViewUpdate(),!T.empty)for(let N of this.state.facet(updateListener))try{N(T)}catch(F){logException(this.state,F,"update listener")}(M||L)&&Promise.resolve().then(()=>{M&&this.state==M.startState&&this.dispatch(M),L&&!applyDOMChange(this,L)&&D.force&&dispatchKey(this.contentDOM,D.key,D.keyCode)})}setState(v){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=v;return}this.updateState=2;let S=this.hasFocus;try{for(let R of this.plugins)R.destroy(this);this.viewState=new ViewState(v),this.plugins=v.facet(viewPlugin).map(R=>new PluginInstance(R)),this.pluginMap.clear();for(let R of this.plugins)R.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}S&&this.focus(),this.requestMeasure()}updatePlugins(v){let S=v.startState.facet(viewPlugin),R=v.state.facet(viewPlugin);if(S!=R){let T=[];for(let A of R){let k=S.indexOf(A);if(k<0)T.push(new PluginInstance(A));else{let q=this.plugins[k];q.mustUpdate=v,T.push(q)}}for(let A of this.plugins)A.mustUpdate!=v&&A.destroy(this);this.plugins=T,this.pluginMap.clear()}else for(let T of this.plugins)T.mustUpdate=v;for(let T=0;T<this.plugins.length;T++)this.plugins[T].update(this);S!=R&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let v of this.plugins){let S=v.value;if(S&&S.docViewUpdate)try{S.docViewUpdate(this)}catch(R){logException(this.state,R,"doc view update listener")}}}measure(v=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,v&&this.observer.forceFlush();let S=null,R=this.scrollDOM,T=R.scrollTop*this.scaleY,{scrollAnchorPos:A,scrollAnchorHeight:k}=this.viewState;Math.abs(T-this.viewState.scrollTop)>1&&(k=-1),this.viewState.scrollAnchorHeight=-1;try{for(let q=0;;q++){if(k<0)if(isScrolledToBottom(R))A=-1,k=this.viewState.heightMap.height;else{let F=this.viewState.scrollAnchorAt(T);A=F.from,k=F.top}this.updateState=1;let M=this.viewState.measure(this);if(!M&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(q>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let D=[];M&4||([this.measureRequests,D]=[D,this.measureRequests]);let L=D.map(F=>{try{return F.read(this)}catch(H){return logException(this.state,H),BadMeasure}}),I=ViewUpdate.create(this,this.state,[]),N=!1;I.flags|=M,S?S.flags|=M:S=I,this.updateState=2,I.empty||(this.updatePlugins(I),this.inputState.update(I),this.updateAttrs(),N=this.docView.update(I),N&&this.docViewUpdate());for(let F=0;F<D.length;F++)if(L[F]!=BadMeasure)try{let H=D[F];H.write&&H.write(L[F],this)}catch(H){logException(this.state,H)}if(N&&this.docView.updateSelection(!0),!I.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,k=-1;continue}else{let H=(A<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(A).top)-k;if(H>1||H<-1){T=T+H,R.scrollTop=T/this.scaleY,k=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(S&&!S.empty)for(let q of this.state.facet(updateListener))q(S)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let v=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),S={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(S["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,S);let R=this.observer.ignore(()=>{let T=updateAttrs(this.contentDOM,this.contentAttrs,S),A=updateAttrs(this.dom,this.editorAttrs,v);return T||A});return this.editorAttrs=v,this.contentAttrs=S,R}showAnnouncements(v){let S=!0;for(let R of v)for(let T of R.effects)if(T.is(EditorView.announce)){S&&(this.announceDOM.textContent=""),S=!1;let A=this.announceDOM.appendChild(document.createElement("div"));A.textContent=T.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let v=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),v?{nonce:v}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(v){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),v){if(this.measureRequests.indexOf(v)>-1)return;if(v.key!=null){for(let S=0;S<this.measureRequests.length;S++)if(this.measureRequests[S].key===v.key){this.measureRequests[S]=v;return}}this.measureRequests.push(v)}}plugin(v){let S=this.pluginMap.get(v);return(S===void 0||S&&S.plugin!=v)&&this.pluginMap.set(v,S=this.plugins.find(R=>R.plugin==v)||null),S&&S.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(v){return this.readMeasured(),this.viewState.elementAtHeight(v)}lineBlockAtHeight(v){return this.readMeasured(),this.viewState.lineBlockAtHeight(v)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(v){return this.viewState.lineBlockAt(v)}get contentHeight(){return this.viewState.contentHeight}moveByChar(v,S,R){return skipAtoms(this,v,moveByChar(this,v,S,R))}moveByGroup(v,S){return skipAtoms(this,v,moveByChar(this,v,S,R=>byGroup(this,v.head,R)))}visualLineSide(v,S){let R=this.bidiSpans(v),T=this.textDirectionAt(v.from),A=R[S?R.length-1:0];return EditorSelection.cursor(A.side(S,T)+v.from,A.forward(!S,T)?1:-1)}moveToLineBoundary(v,S,R=!0){return moveToLineBoundary(this,v,S,R)}moveVertically(v,S,R){return skipAtoms(this,v,moveVertically(this,v,S,R))}domAtPos(v){return this.docView.domAtPos(v)}posAtDOM(v,S=0){return this.docView.posFromDOM(v,S)}posAtCoords(v,S=!0){return this.readMeasured(),posAtCoords(this,v,S)}coordsAtPos(v,S=1){this.readMeasured();let R=this.docView.coordsAt(v,S);if(!R||R.left==R.right)return R;let T=this.state.doc.lineAt(v),A=this.bidiSpans(T),k=A[BidiSpan.find(A,v-T.from,-1,S)];return flattenRect(R,k.dir==Direction.LTR==S>0)}coordsForChar(v){return this.readMeasured(),this.docView.coordsForChar(v)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(v){return!this.state.facet(perLineTextDirection)||v<this.viewport.from||v>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(v))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(v){if(v.length>MaxBidiLine)return trivialOrder(v.length);let S=this.textDirectionAt(v.from),R;for(let A of this.bidiCache)if(A.from==v.from&&A.dir==S&&(A.fresh||isolatesEq(A.isolates,R=getIsolatedRanges(this,v))))return A.order;R||(R=getIsolatedRanges(this,v));let T=computeOrder(v.text,S,R);return this.bidiCache.push(new CachedOrder(v.from,v.to,S,R,!0,T)),T}get hasFocus(){var v;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((v=this.inputState)===null||v===void 0?void 0:v.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(v){this._root!=v&&(this._root=v,this.observer.setWindow((v.nodeType==9?v:v.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let v of this.plugins)v.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(v,S={}){return scrollIntoView$1.of(new ScrollTarget(typeof v=="number"?EditorSelection.cursor(v):v,S.y,S.x,S.yMargin,S.xMargin))}scrollSnapshot(){let{scrollTop:v,scrollLeft:S}=this.scrollDOM,R=this.viewState.scrollAnchorAt(v);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(R.from),"start","start",R.top-v,S,!0))}setTabFocusMode(v){v==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof v=="boolean"?this.inputState.tabFocusMode=v?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+v)}static domEventHandlers(v){return ViewPlugin.define(()=>({}),{eventHandlers:v})}static domEventObservers(v){return ViewPlugin.define(()=>({}),{eventObservers:v})}static theme(v,S){let R=StyleModule.newName(),T=[theme.of(R),styleModule.of(buildTheme(`.${R}`,v))];return S&&S.dark&&T.push(darkTheme.of(!0)),T}static baseTheme(v){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,v,lightDarkIDs)))}static findFromDOM(v){var S;let R=v.querySelector(".cm-content"),T=R&&ContentView.get(R)||ContentView.get(v);return((S=T?.rootView)===null||S===void 0?void 0:S.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:_=>_.length?_[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(v,S,R,T,A,k){this.from=v,this.to=S,this.dir=R,this.isolates=T,this.fresh=A,this.order=k}static update(v,S){if(S.empty&&!v.some(A=>A.fresh))return v;let R=[],T=v.length?v[v.length-1].dir:Direction.LTR;for(let A=Math.max(0,v.length-10);A<v.length;A++){let k=v[A];k.dir==T&&!S.touchesRange(k.from,k.to)&&R.push(new CachedOrder(S.mapPos(k.from,1),S.mapPos(k.to,-1),k.dir,k.isolates,!1,k.order))}return R}}function attrsFromFacet(_,v,S){for(let R=_.state.facet(v),T=R.length-1;T>=0;T--){let A=R[T],k=typeof A=="function"?A(_):A;k&&combineAttrs(k,S)}return S}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(_,v){const S=_.split(/-(?!$)/);let R=S[S.length-1];R=="Space"&&(R=" ");let T,A,k,q;for(let M=0;M<S.length-1;++M){const D=S[M];if(/^(cmd|meta|m)$/i.test(D))q=!0;else if(/^a(lt)?$/i.test(D))T=!0;else if(/^(c|ctrl|control)$/i.test(D))A=!0;else if(/^s(hift)?$/i.test(D))k=!0;else if(/^mod$/i.test(D))v=="mac"?q=!0:A=!0;else throw new Error("Unrecognized modifier name: "+D)}return T&&(R="Alt-"+R),A&&(R="Ctrl-"+R),q&&(R="Meta-"+R),k&&(R="Shift-"+R),R}function modifiers(_,v,S){return v.altKey&&(_="Alt-"+_),v.ctrlKey&&(_="Ctrl-"+_),v.metaKey&&(_="Meta-"+_),S!==!1&&v.shiftKey&&(_="Shift-"+_),_}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(_,v){return runHandlers(getKeymap(v.state),_,v,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(_){let v=_.facet(keymap),S=Keymaps.get(v);return S||Keymaps.set(v,S=buildKeymap(v.reduce((R,T)=>R.concat(T),[]))),S}function runScopeHandlers(_,v,S){return runHandlers(getKeymap(_.state),v,_,S)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(_,v=currentPlatform){let S=Object.create(null),R=Object.create(null),T=(k,q)=>{let M=R[k];if(M==null)R[k]=q;else if(M!=q)throw new Error("Key binding "+k+" is used both as a regular binding and as a multi-stroke prefix")},A=(k,q,M,D,L)=>{var I,N;let F=S[k]||(S[k]=Object.create(null)),H=q.split(/ (?!$)/).map(j=>normalizeKeyName(j,v));for(let j=1;j<H.length;j++){let W=H.slice(0,j).join(" ");T(W,!0),F[W]||(F[W]={preventDefault:!0,stopPropagation:!1,run:[X=>{let J=storedPrefix={view:X,prefix:W,scope:k};return setTimeout(()=>{storedPrefix==J&&(storedPrefix=null)},PrefixTimeout),!0}]})}let G=H.join(" ");T(G,!1);let V=F[G]||(F[G]={preventDefault:!1,stopPropagation:!1,run:((N=(I=F._any)===null||I===void 0?void 0:I.run)===null||N===void 0?void 0:N.slice())||[]});M&&V.run.push(M),D&&(V.preventDefault=!0),L&&(V.stopPropagation=!0)};for(let k of _){let q=k.scope?k.scope.split(" "):["editor"];if(k.any)for(let D of q){let L=S[D]||(S[D]=Object.create(null));L._any||(L._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:I}=k;for(let N in L)L[N].run.push(F=>I(F,currentKeyEvent))}let M=k[v]||k.key;if(M)for(let D of q)A(D,M,k.run,k.preventDefault,k.stopPropagation),k.shift&&A(D,"Shift-"+M,k.shift,k.preventDefault,k.stopPropagation)}return S}let currentKeyEvent=null;function runHandlers(_,v,S,R){currentKeyEvent=v;let T=keyName(v),A=codePointAt(T,0),k=codePointSize(A)==T.length&&T!=" ",q="",M=!1,D=!1,L=!1;storedPrefix&&storedPrefix.view==S&&storedPrefix.scope==R&&(q=storedPrefix.prefix+" ",modifierCodes.indexOf(v.keyCode)<0&&(D=!0,storedPrefix=null));let I=new Set,N=V=>{if(V){for(let j of V.run)if(!I.has(j)&&(I.add(j),j(S)))return V.stopPropagation&&(L=!0),!0;V.preventDefault&&(V.stopPropagation&&(L=!0),D=!0)}return!1},F=_[R],H,G;return F&&(N(F[q+modifiers(T,v,!k)])?M=!0:k&&(v.altKey||v.metaKey||v.ctrlKey)&&!(browser.windows&&v.ctrlKey&&v.altKey)&&!(browser.mac&&v.altKey&&!(v.ctrlKey||v.metaKey))&&(H=base[v.keyCode])&&H!=T?(N(F[q+modifiers(H,v,!0)])||v.shiftKey&&(G=shift[v.keyCode])!=T&&G!=H&&N(F[q+modifiers(G,v,!1)]))&&(M=!0):k&&v.shiftKey&&N(F[q+modifiers(T,v,!0)])&&(M=!0),!M&&N(F._any)&&(M=!0)),D&&(M=!0),M&&L&&v.stopPropagation(),currentKeyEvent=null,M}class RectangleMarker{constructor(v,S,R,T,A){this.className=v,this.left=S,this.top=R,this.width=T,this.height=A}draw(){let v=document.createElement("div");return v.className=this.className,this.adjust(v),v}update(v,S){return S.className!=this.className?!1:(this.adjust(v),!0)}adjust(v){v.style.left=this.left+"px",v.style.top=this.top+"px",this.width!=null&&(v.style.width=this.width+"px"),v.style.height=this.height+"px"}eq(v){return this.left==v.left&&this.top==v.top&&this.width==v.width&&this.height==v.height&&this.className==v.className}static forRange(v,S,R){if(R.empty){let T=v.coordsAtPos(R.head,R.assoc||1);if(!T)return[];let A=getBase(v);return[new RectangleMarker(S,T.left-A.left,T.top-A.top,null,T.bottom-T.top)]}else return rectanglesForRange(v,S,R)}}function getBase(_){let v=_.scrollDOM.getBoundingClientRect();return{left:(_.textDirection==Direction.LTR?v.left:v.right-_.scrollDOM.clientWidth*_.scaleX)-_.scrollDOM.scrollLeft*_.scaleX,top:v.top-_.scrollDOM.scrollTop*_.scaleY}}function wrappedLine(_,v,S,R){let T=_.coordsAtPos(v,S*2);if(!T)return R;let A=_.dom.getBoundingClientRect(),k=(T.top+T.bottom)/2,q=_.posAtCoords({x:A.left+1,y:k}),M=_.posAtCoords({x:A.right-1,y:k});return q==null||M==null?R:{from:Math.max(R.from,Math.min(q,M)),to:Math.min(R.to,Math.max(q,M))}}function rectanglesForRange(_,v,S){if(S.to<=_.viewport.from||S.from>=_.viewport.to)return[];let R=Math.max(S.from,_.viewport.from),T=Math.min(S.to,_.viewport.to),A=_.textDirection==Direction.LTR,k=_.contentDOM,q=k.getBoundingClientRect(),M=getBase(_),D=k.querySelector(".cm-line"),L=D&&window.getComputedStyle(D),I=q.left+(L?parseInt(L.paddingLeft)+Math.min(0,parseInt(L.textIndent)):0),N=q.right-(L?parseInt(L.paddingRight):0),F=blockAt(_,R,1),H=blockAt(_,T,-1),G=F.type==BlockType.Text?F:null,V=H.type==BlockType.Text?H:null;if(G&&(_.lineWrapping||F.widgetLineBreaks)&&(G=wrappedLine(_,R,1,G)),V&&(_.lineWrapping||H.widgetLineBreaks)&&(V=wrappedLine(_,T,-1,V)),G&&V&&G.from==V.from&&G.to==V.to)return W(X(S.from,S.to,G));{let te=G?X(S.from,null,G):J(F,!1),re=V?X(null,S.to,V):J(H,!0),ee=[];return(G||F).to<(V||H).from-(G&&V?1:0)||F.widgetLineBreaks>1&&te.bottom+_.defaultLineHeight/2<re.top?ee.push(j(I,te.bottom,N,re.top)):te.bottom<re.top&&_.elementAtHeight((te.bottom+re.top)/2).type==BlockType.Text&&(te.bottom=re.top=(te.bottom+re.top)/2),W(te).concat(ee).concat(W(re))}function j(te,re,ee,ne){return new RectangleMarker(v,te-M.left,re-M.top,ee-te,ne-re)}function W({top:te,bottom:re,horizontal:ee}){let ne=[];for(let oe=0;oe<ee.length;oe+=2)ne.push(j(ee[oe],te,ee[oe+1],re));return ne}function X(te,re,ee){let ne=1e9,oe=-1e9,ue=[];function ce(_e,Ee,ge,be,Ae){let De=_.coordsAtPos(_e,_e==ee.to?-2:2),ve=_.coordsAtPos(ge,ge==ee.from?2:-2);!De||!ve||(ne=Math.min(De.top,ve.top,ne),oe=Math.max(De.bottom,ve.bottom,oe),Ae==Direction.LTR?ue.push(A&&Ee?I:De.left,A&&be?N:ve.right):ue.push(!A&&be?I:ve.left,!A&&Ee?N:De.right))}let de=te??ee.from,pe=re??ee.to;for(let _e of _.visibleRanges)if(_e.to>de&&_e.from<pe)for(let Ee=Math.max(_e.from,de),ge=Math.min(_e.to,pe);;){let be=_.state.doc.lineAt(Ee);for(let Ae of _.bidiSpans(be)){let De=Ae.from+be.from,ve=Ae.to+be.from;if(De>=ge)break;ve>Ee&&ce(Math.max(De,Ee),te==null&&De<=de,Math.min(ve,ge),re==null&&ve>=pe,Ae.dir)}if(Ee=be.to+1,Ee>=ge)break}return ue.length==0&&ce(de,te==null,pe,re==null,_.textDirection),{top:ne,bottom:oe,horizontal:ue}}function J(te,re){let ee=q.top+(re?te.top:te.bottom);return{top:ee,bottom:ee,horizontal:[]}}}function sameMarker(_,v){return _.constructor==v.constructor&&_.eq(v)}class LayerView{constructor(v,S){this.view=v,this.layer=S,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=v.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),S.above&&this.dom.classList.add("cm-layer-above"),S.class&&this.dom.classList.add(S.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(v.state),v.requestMeasure(this.measureReq),S.mount&&S.mount(this.dom,v)}update(v){v.startState.facet(layerOrder)!=v.state.facet(layerOrder)&&this.setOrder(v.state),(this.layer.update(v,this.dom)||v.geometryChanged)&&(this.scale(),v.view.requestMeasure(this.measureReq))}docViewUpdate(v){this.layer.updateOnDocViewUpdate!==!1&&v.requestMeasure(this.measureReq)}setOrder(v){let S=0,R=v.facet(layerOrder);for(;S<R.length&&R[S]!=this.layer;)S++;this.dom.style.zIndex=String((this.layer.above?150:-1)-S)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:v,scaleY:S}=this.view;(v!=this.scaleX||S!=this.scaleY)&&(this.scaleX=v,this.scaleY=S,this.dom.style.transform=`scale(${1/v}, ${1/S})`)}draw(v){if(v.length!=this.drawn.length||v.some((S,R)=>!sameMarker(S,this.drawn[R]))){let S=this.dom.firstChild,R=0;for(let T of v)T.update&&S&&T.constructor&&this.drawn[R].constructor&&T.update(S,this.drawn[R])?(S=S.nextSibling,R++):this.dom.insertBefore(T.draw(),S);for(;S;){let T=S.nextSibling;S.remove(),S=T}this.drawn=v,browser.safari&&browser.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(_){return[ViewPlugin.define(v=>new LayerView(v,_)),layerOrder.of(_)]}const selectionConfig=Facet.define({combine(_){return combineConfig(_,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(v,S)=>Math.min(v,S),drawRangeCursor:(v,S)=>v||S})}});function drawSelection(_={}){return[selectionConfig.of(_),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(_){return _.startState.facet(selectionConfig)!=_.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(_){let{state:v}=_,S=v.facet(selectionConfig),R=[];for(let T of v.selection.ranges){let A=T==v.selection.main;if(T.empty||S.drawRangeCursor){let k=A?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",q=T.empty?T:EditorSelection.cursor(T.head,T.head>T.anchor?-1:1);for(let M of RectangleMarker.forRange(_,k,q))R.push(M)}}return R},update(_,v){_.transactions.some(R=>R.selection)&&(v.style.animationName=v.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let S=configChanged(_);return S&&setBlinkRate(_.state,v),_.docChanged||_.selectionSet||S},mount(_,v){setBlinkRate(v.state,_)},class:"cm-cursorLayer"});function setBlinkRate(_,v){v.style.animationDuration=_.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(_){return _.state.selection.ranges.map(v=>v.empty?[]:RectangleMarker.forRange(_,"cm-selectionBackground",v)).reduce((v,S)=>v.concat(S))},update(_,v){return _.docChanged||_.selectionSet||_.viewportChanged||configChanged(_)},class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=StateEffect.define({map(_,v){return _==null?null:v.mapPos(_)}}),dropCursorPos=StateField.define({create(){return null},update(_,v){return _!=null&&(_=v.changes.mapPos(_)),v.effects.reduce((S,R)=>R.is(setDropCursorPos)?R.value:S,_)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(_){var v;let S=_.state.field(dropCursorPos);S==null?this.cursor!=null&&((v=this.cursor)===null||v===void 0||v.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(_.startState.field(dropCursorPos)!=S||_.docChanged||_.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:_}=this,v=_.state.field(dropCursorPos),S=v!=null&&_.coordsAtPos(v);if(!S)return null;let R=_.scrollDOM.getBoundingClientRect();return{left:S.left-R.left+_.scrollDOM.scrollLeft*_.scaleX,top:S.top-R.top+_.scrollDOM.scrollTop*_.scaleY,height:S.bottom-S.top}}drawCursor(_){if(this.cursor){let{scaleX:v,scaleY:S}=this.view;_?(this.cursor.style.left=_.left/v+"px",this.cursor.style.top=_.top/S+"px",this.cursor.style.height=_.height/S+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(_){this.view.state.field(dropCursorPos)!=_&&this.view.dispatch({effects:setDropCursorPos.of(_)})}},{eventObservers:{dragover(_){this.setDropPos(this.view.posAtCoords({x:_.clientX,y:_.clientY}))},dragleave(_){(_.target==this.view.contentDOM||!this.view.contentDOM.contains(_.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(_,v,S,R,T){v.lastIndex=0;for(let A=_.iterRange(S,R),k=S,q;!A.next().done;k+=A.value.length)if(!A.lineBreak)for(;q=v.exec(A.value);)T(k+q.index,q)}function matchRanges(_,v){let S=_.visibleRanges;if(S.length==1&&S[0].from==_.viewport.from&&S[0].to==_.viewport.to)return S;let R=[];for(let{from:T,to:A}of S)T=Math.max(_.state.doc.lineAt(T).from,T-v),A=Math.min(_.state.doc.lineAt(A).to,A+v),R.length&&R[R.length-1].to>=T?R[R.length-1].to=A:R.push({from:T,to:A});return R}class MatchDecorator{constructor(v){const{regexp:S,decoration:R,decorate:T,boundary:A,maxLength:k=1e3}=v;if(!S.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=S,T)this.addMatch=(q,M,D,L)=>T(L,D,D+q[0].length,q,M);else if(typeof R=="function")this.addMatch=(q,M,D,L)=>{let I=R(q,M,D);I&&L(D,D+q[0].length,I)};else if(R)this.addMatch=(q,M,D,L)=>L(D,D+q[0].length,R);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=A,this.maxLength=k}createDeco(v){let S=new RangeSetBuilder,R=S.add.bind(S);for(let{from:T,to:A}of matchRanges(v,this.maxLength))iterMatches(v.state.doc,this.regexp,T,A,(k,q)=>this.addMatch(q,v,k,R));return S.finish()}updateDeco(v,S){let R=1e9,T=-1;return v.docChanged&&v.changes.iterChanges((A,k,q,M)=>{M>=v.view.viewport.from&&q<=v.view.viewport.to&&(R=Math.min(q,R),T=Math.max(M,T))}),v.viewportMoved||T-R>1e3?this.createDeco(v.view):T>-1?this.updateRange(v.view,S.map(v.changes),R,T):S}updateRange(v,S,R,T){for(let A of v.visibleRanges){let k=Math.max(A.from,R),q=Math.min(A.to,T);if(q>=k){let M=v.state.doc.lineAt(k),D=M.to<q?v.state.doc.lineAt(q):M,L=Math.max(A.from,M.from),I=Math.min(A.to,D.to);if(this.boundary){for(;k>M.from;k--)if(this.boundary.test(M.text[k-1-M.from])){L=k;break}for(;q<D.to;q++)if(this.boundary.test(D.text[q-D.from])){I=q;break}}let N=[],F,H=(G,V,j)=>N.push(j.range(G,V));if(M==D)for(this.regexp.lastIndex=L-M.from;(F=this.regexp.exec(M.text))&&F.index<I-M.from;)this.addMatch(F,v,F.index+M.from,H);else iterMatches(v.state.doc,this.regexp,L,I,(G,V)=>this.addMatch(V,v,G,H));S=S.update({filterFrom:L,filterTo:I,filter:(G,V)=>G<L||V>I,add:N})}}return S}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var _;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let v=document.body.style;_supportsTabSize=((_=v.tabSize)!==null&&_!==void 0?_:v.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(_){let v=combineConfig(_,{render:null,specialChars:Specials,addSpecialChars:null});return(v.replaceTabs=!supportsTabSize())&&(v.specialChars=new RegExp("	|"+v.specialChars.source,UnicodeRegexpSupport)),v.addSpecialChars&&(v.specialChars=new RegExp(v.specialChars.source+"|"+v.addSpecialChars.source,UnicodeRegexpSupport)),v}});function highlightSpecialChars(_={}){return[specialCharConfig.of(_),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(_.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(_)}makeDecorator(_){return new MatchDecorator({regexp:_.specialChars,decoration:(v,S,R)=>{let{doc:T}=S.state,A=codePointAt(v[0],0);if(A==9){let k=T.lineAt(R),q=S.state.tabSize,M=countColumn(k.text,q,R-k.from);return Decoration.replace({widget:new TabWidget((q-M%q)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[A]||(this.decorationCache[A]=Decoration.replace({widget:new SpecialCharWidget(_,A)}))},boundary:_.replaceTabs?void 0:/[^]/})}update(_){let v=_.state.facet(specialCharConfig);_.startState.facet(specialCharConfig)!=v?(this.decorator=this.makeDecorator(v),this.decorations=this.decorator.createDeco(_.view)):this.decorations=this.decorator.updateDeco(_,this.decorations)}},{decorations:_=>_.decorations}))}const DefaultPlaceholder="";function placeholder$1(_){return _>=32?DefaultPlaceholder:_==10?"":String.fromCharCode(9216+_)}class SpecialCharWidget extends WidgetType{constructor(v,S){super(),this.options=v,this.code=S}eq(v){return v.code==this.code}toDOM(v){let S=placeholder$1(this.code),R=v.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),T=this.options.render&&this.options.render(this.code,R,S);if(T)return T;let A=document.createElement("span");return A.textContent=S,A.title=R,A.setAttribute("aria-label",R),A.className="cm-specialChar",A}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(v){super(),this.width=v}eq(v){return v.width==this.width}toDOM(){let v=document.createElement("span");return v.textContent="	",v.className="cm-tab",v.style.width=this.width+"px",v}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.docChanged||_.selectionSet)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let v=-1,S=[];for(let R of _.state.selection.ranges){let T=_.lineBlockAt(R.head);T.from>v&&(S.push(lineDeco.range(T.from)),v=T.from)}return Decoration.set(S)}},{decorations:_=>_.decorations});class Placeholder extends WidgetType{constructor(v){super(),this.content=v}toDOM(v){let S=document.createElement("span");return S.className="cm-placeholder",S.style.pointerEvents="none",S.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(v):this.content.cloneNode(!0)),S.setAttribute("aria-hidden","true"),S}coordsAt(v){let S=v.firstChild?clientRectsFor(v.firstChild):[];if(!S.length)return null;let R=window.getComputedStyle(v.parentNode),T=flattenRect(S[0],R.direction!="rtl"),A=parseInt(R.lineHeight);return T.bottom-T.top>A*1.5?{left:T.left,right:T.right,top:T.top,bottom:T.top+A}:T}ignoreEvent(){return!1}}function placeholder(_){let v=ViewPlugin.fromClass(class{constructor(S){this.view=S,this.placeholder=_?Decoration.set([Decoration.widget({widget:new Placeholder(_),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:S=>S.decorations});return typeof _=="string"?[v,EditorView.contentAttributes.of({"aria-placeholder":_})]:v}const MaxOff=2e3;function rectangleFor(_,v,S){let R=Math.min(v.line,S.line),T=Math.max(v.line,S.line),A=[];if(v.off>MaxOff||S.off>MaxOff||v.col<0||S.col<0){let k=Math.min(v.off,S.off),q=Math.max(v.off,S.off);for(let M=R;M<=T;M++){let D=_.doc.line(M);D.length<=q&&A.push(EditorSelection.range(D.from+k,D.to+q))}}else{let k=Math.min(v.col,S.col),q=Math.max(v.col,S.col);for(let M=R;M<=T;M++){let D=_.doc.line(M),L=findColumn(D.text,k,_.tabSize,!0);if(L<0)A.push(EditorSelection.cursor(D.to));else{let I=findColumn(D.text,q,_.tabSize);A.push(EditorSelection.range(D.from+L,D.from+I))}}}return A}function absoluteColumn(_,v){let S=_.coordsAtPos(_.viewport.from);return S?Math.round(Math.abs((S.left-v)/_.defaultCharacterWidth)):-1}function getPos(_,v){let S=_.posAtCoords({x:v.clientX,y:v.clientY},!1),R=_.state.doc.lineAt(S),T=S-R.from,A=T>MaxOff?-1:T==R.length?absoluteColumn(_,v.clientX):countColumn(R.text,_.state.tabSize,S-R.from);return{line:R.number,col:A,off:T}}function rectangleSelectionStyle(_,v){let S=getPos(_,v),R=_.state.selection;return S?{update(T){if(T.docChanged){let A=T.changes.mapPos(T.startState.doc.line(S.line).from),k=T.state.doc.lineAt(A);S={line:k.number,col:S.col,off:Math.min(S.off,k.length)},R=R.map(T.changes)}},get(T,A,k){let q=getPos(_,T);if(!q)return R;let M=rectangleFor(_.state,S,q);return M.length?k?EditorSelection.create(M.concat(R.ranges)):EditorSelection.create(M):R}}:null}function rectangularSelection(_){let v=(S=>S.altKey&&S.button==0);return EditorView.mouseSelectionStyle.of((S,R)=>v(R)?rectangleSelectionStyle(S,R):null)}const keys={Alt:[18,_=>!!_.altKey],Control:[17,_=>!!_.ctrlKey],Shift:[16,_=>!!_.shiftKey],Meta:[91,_=>!!_.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(_={}){let[v,S]=keys[_.key||"Alt"],R=ViewPlugin.fromClass(class{constructor(T){this.view=T,this.isDown=!1}set(T){this.isDown!=T&&(this.isDown=T,this.view.update([]))}},{eventObservers:{keydown(T){this.set(T.keyCode==v||S(T))},keyup(T){(T.keyCode==v||!S(T))&&this.set(!1)},mousemove(T){this.set(S(T))}}});return[R,EditorView.contentAttributes.of(T=>{var A;return!((A=T.plugin(R))===null||A===void 0)&&A.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(v,S,R,T){this.facet=S,this.createTooltipView=R,this.removeTooltipView=T,this.input=v.state.facet(S),this.tooltips=this.input.filter(k=>k);let A=null;this.tooltipViews=this.tooltips.map(k=>A=R(k,A))}update(v,S){var R;let T=v.state.facet(this.facet),A=T.filter(M=>M);if(T===this.input){for(let M of this.tooltipViews)M.update&&M.update(v);return!1}let k=[],q=S?[]:null;for(let M=0;M<A.length;M++){let D=A[M],L=-1;if(D){for(let I=0;I<this.tooltips.length;I++){let N=this.tooltips[I];N&&N.create==D.create&&(L=I)}if(L<0)k[M]=this.createTooltipView(D,M?k[M-1]:null),q&&(q[M]=!!D.above);else{let I=k[M]=this.tooltipViews[L];q&&(q[M]=S[L]),I.update&&I.update(v)}}}for(let M of this.tooltipViews)k.indexOf(M)<0&&(this.removeTooltipView(M),(R=M.destroy)===null||R===void 0||R.call(M));return S&&(q.forEach((M,D)=>S[D]=M),S.length=q.length),this.input=T,this.tooltips=A,this.tooltipViews=k,!0}}function windowSpace(_){let v=_.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:v.clientHeight,right:v.clientWidth}}const tooltipConfig=Facet.define({combine:_=>{var v,S,R;return{position:browser.ios?"absolute":((v=_.find(T=>T.position))===null||v===void 0?void 0:v.position)||"fixed",parent:((S=_.find(T=>T.parent))===null||S===void 0?void 0:S.parent)||null,tooltipSpace:((R=_.find(T=>T.tooltipSpace))===null||R===void 0?void 0:R.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let v=_.state.facet(tooltipConfig);this.position=v.position,this.parent=v.parent,this.classes=_.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(_,showTooltip,(S,R)=>this.createTooltip(S,R),S=>{this.resizeObserver&&this.resizeObserver.unobserve(S.dom),S.dom.remove()}),this.above=this.manager.tooltips.map(S=>!!S.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(S=>{Date.now()>this.lastTransaction-50&&S.length>0&&S[S.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),_.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let _ of this.manager.tooltipViews)this.intersectionObserver.observe(_.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(_){_.transactions.length&&(this.lastTransaction=Date.now());let v=this.manager.update(_,this.above);v&&this.observeIntersection();let S=v||_.geometryChanged,R=_.state.facet(tooltipConfig);if(R.position!=this.position&&!this.madeAbsolute){this.position=R.position;for(let T of this.manager.tooltipViews)T.dom.style.position=this.position;S=!0}if(R.parent!=this.parent){this.parent&&this.container.remove(),this.parent=R.parent,this.createContainer();for(let T of this.manager.tooltipViews)this.container.appendChild(T.dom);S=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);S&&this.maybeMeasure()}createTooltip(_,v){let S=_.create(this.view),R=v?v.dom:null;if(S.dom.classList.add("cm-tooltip"),_.arrow&&!S.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let T=document.createElement("div");T.className="cm-tooltip-arrow",S.dom.appendChild(T)}return S.dom.style.position=this.position,S.dom.style.top=Outside,S.dom.style.left="0px",this.container.insertBefore(S.dom,R),S.mount&&S.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(S.dom),S}destroy(){var _,v,S;this.view.win.removeEventListener("resize",this.measureSoon);for(let R of this.manager.tooltipViews)R.dom.remove(),(_=R.destroy)===null||_===void 0||_.call(R);this.parent&&this.container.remove(),(v=this.resizeObserver)===null||v===void 0||v.disconnect(),(S=this.intersectionObserver)===null||S===void 0||S.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let _=1,v=1,S=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:A}=this.manager.tooltipViews[0];if(browser.safari){let k=A.getBoundingClientRect();S=Math.abs(k.top+1e4)>1||Math.abs(k.left)>1}else S=!!A.offsetParent&&A.offsetParent!=this.container.ownerDocument.body}if(S||this.position=="absolute")if(this.parent){let A=this.parent.getBoundingClientRect();A.width&&A.height&&(_=A.width/this.parent.offsetWidth,v=A.height/this.parent.offsetHeight)}else({scaleX:_,scaleY:v}=this.view.viewState);let R=this.view.scrollDOM.getBoundingClientRect(),T=getScrollMargins(this.view);return{visible:{left:R.left+T.left,top:R.top+T.top,right:R.right-T.right,bottom:R.bottom-T.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((A,k)=>{let q=this.manager.tooltipViews[k];return q.getCoords?q.getCoords(A.pos):this.view.coordsAtPos(A.pos)}),size:this.manager.tooltipViews.map(({dom:A})=>A.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:_,scaleY:v,makeAbsolute:S}}writeMeasure(_){var v;if(_.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let q of this.manager.tooltipViews)q.dom.style.position="absolute"}let{visible:S,space:R,scaleX:T,scaleY:A}=_,k=[];for(let q=0;q<this.manager.tooltips.length;q++){let M=this.manager.tooltips[q],D=this.manager.tooltipViews[q],{dom:L}=D,I=_.pos[q],N=_.size[q];if(!I||M.clip!==!1&&(I.bottom<=Math.max(S.top,R.top)||I.top>=Math.min(S.bottom,R.bottom)||I.right<Math.max(S.left,R.left)-.1||I.left>Math.min(S.right,R.right)+.1)){L.style.top=Outside;continue}let F=M.arrow?D.dom.querySelector(".cm-tooltip-arrow"):null,H=F?7:0,G=N.right-N.left,V=(v=knownHeight.get(D))!==null&&v!==void 0?v:N.bottom-N.top,j=D.offset||noOffset,W=this.view.textDirection==Direction.LTR,X=N.width>R.right-R.left?W?R.left:R.right-N.width:W?Math.max(R.left,Math.min(I.left-(F?14:0)+j.x,R.right-G)):Math.min(Math.max(R.left,I.left-G+(F?14:0)-j.x),R.right-G),J=this.above[q];!M.strictSide&&(J?I.top-V-H-j.y<R.top:I.bottom+V+H+j.y>R.bottom)&&J==R.bottom-I.bottom>I.top-R.top&&(J=this.above[q]=!J);let te=(J?I.top-R.top:R.bottom-I.bottom)-H;if(te<V&&D.resize!==!1){if(te<this.view.defaultLineHeight){L.style.top=Outside;continue}knownHeight.set(D,V),L.style.height=(V=te)/A+"px"}else L.style.height&&(L.style.height="");let re=J?I.top-V-H-j.y:I.bottom+H+j.y,ee=X+G;if(D.overlap!==!0)for(let ne of k)ne.left<ee&&ne.right>X&&ne.top<re+V&&ne.bottom>re&&(re=J?ne.top-V-2-H:ne.bottom+H+2);if(this.position=="absolute"?(L.style.top=(re-_.parent.top)/A+"px",setLeftStyle(L,(X-_.parent.left)/T)):(L.style.top=re/A+"px",setLeftStyle(L,X/T)),F){let ne=I.left+(W?j.x:-j.x)-(X+14-7);F.style.left=ne/T+"px"}D.overlap!==!0&&k.push({left:X,top:re,right:ee,bottom:re+V}),L.classList.toggle("cm-tooltip-above",J),L.classList.toggle("cm-tooltip-below",!J),D.positioned&&D.positioned(_.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let _ of this.manager.tooltipViews)_.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(_,v){let S=parseInt(_.style.left,10);(isNaN(S)||Math.abs(v-S)>1)&&(_.style.left=v+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:_=>_.reduce((v,S)=>v.concat(S),[])});class HoverTooltipHost{static create(v){return new HoverTooltipHost(v)}constructor(v){this.view=v,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(v,showHoverTooltip,(S,R)=>this.createHostedView(S,R),S=>S.dom.remove())}createHostedView(v,S){let R=v.create(this.view);return R.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(R.dom,S?S.dom.nextSibling:this.dom.firstChild),this.mounted&&R.mount&&R.mount(this.view),R}mount(v){for(let S of this.manager.tooltipViews)S.mount&&S.mount(v);this.mounted=!0}positioned(v){for(let S of this.manager.tooltipViews)S.positioned&&S.positioned(v)}update(v){this.manager.update(v)}destroy(){var v;for(let S of this.manager.tooltipViews)(v=S.destroy)===null||v===void 0||v.call(S)}passProp(v){let S;for(let R of this.manager.tooltipViews){let T=R[v];if(T!==void 0){if(S===void 0)S=T;else if(S!==T)return}}return S}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],_=>{let v=_.facet(showHoverTooltip);return v.length===0?null:{pos:Math.min(...v.map(S=>S.pos)),end:Math.max(...v.map(S=>{var R;return(R=S.end)!==null&&R!==void 0?R:S.pos})),create:HoverTooltipHost.create,above:v[0].above,arrow:v.some(S=>S.arrow)}});class HoverPlugin{constructor(v,S,R,T,A){this.view=v,this.source=S,this.field=R,this.setHover=T,this.hoverTime=A,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:v.dom,time:0},this.checkHover=this.checkHover.bind(this),v.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),v.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let v=Date.now()-this.lastMove.time;v<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-v):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:v,lastMove:S}=this,R=v.docView.nearest(S.target);if(!R)return;let T,A=1;if(R instanceof WidgetView)T=R.posAtStart;else{if(T=v.posAtCoords(S),T==null)return;let q=v.coordsAtPos(T);if(!q||S.y<q.top||S.y>q.bottom||S.x<q.left-v.defaultCharacterWidth||S.x>q.right+v.defaultCharacterWidth)return;let M=v.bidiSpans(v.state.doc.lineAt(T)).find(L=>L.from<=T&&L.to>=T),D=M&&M.dir==Direction.RTL?-1:1;A=S.x<q.left?-D:D}let k=this.source(v,T,A);if(k?.then){let q=this.pending={pos:T};k.then(M=>{this.pending==q&&(this.pending=null,M&&!(Array.isArray(M)&&!M.length)&&v.dispatch({effects:this.setHover.of(Array.isArray(M)?M:[M])}))},M=>logException(v.state,M,"hover tooltip"))}else k&&!(Array.isArray(k)&&!k.length)&&v.dispatch({effects:this.setHover.of(Array.isArray(k)?k:[k])})}get tooltip(){let v=this.view.plugin(tooltipPlugin),S=v?v.manager.tooltips.findIndex(R=>R.create==HoverTooltipHost.create):-1;return S>-1?v.manager.tooltipViews[S]:null}mousemove(v){var S,R;this.lastMove={x:v.clientX,y:v.clientY,target:v.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:T,tooltip:A}=this;if(T.length&&A&&!isInTooltip(A.dom,v)||this.pending){let{pos:k}=T[0]||this.pending,q=(R=(S=T[0])===null||S===void 0?void 0:S.end)!==null&&R!==void 0?R:k;(k==q?this.view.posAtCoords(this.lastMove)!=k:!isOverRange(this.view,k,q,v.clientX,v.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(v){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:S}=this;if(S.length){let{tooltip:R}=this;R&&R.dom.contains(v.relatedTarget)?this.watchTooltipLeave(R.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(v){let S=R=>{v.removeEventListener("mouseleave",S),this.active.length&&!this.view.dom.contains(R.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};v.addEventListener("mouseleave",S)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(_,v){let{left:S,right:R,top:T,bottom:A}=_.getBoundingClientRect(),k;if(k=_.querySelector(".cm-tooltip-arrow")){let q=k.getBoundingClientRect();T=Math.min(q.top,T),A=Math.max(q.bottom,A)}return v.clientX>=S-tooltipMargin&&v.clientX<=R+tooltipMargin&&v.clientY>=T-tooltipMargin&&v.clientY<=A+tooltipMargin}function isOverRange(_,v,S,R,T,A){let k=_.scrollDOM.getBoundingClientRect(),q=_.documentTop+_.documentPadding.top+_.contentHeight;if(k.left>R||k.right<R||k.top>T||Math.min(k.bottom,q)<T)return!1;let M=_.posAtCoords({x:R,y:T},!1);return M>=v&&M<=S}function hoverTooltip(_,v={}){let S=StateEffect.define(),R=StateField.define({create(){return[]},update(T,A){if(T.length&&(v.hideOnChange&&(A.docChanged||A.selection)?T=[]:v.hideOn&&(T=T.filter(k=>!v.hideOn(A,k))),A.docChanged)){let k=[];for(let q of T){let M=A.changes.mapPos(q.pos,-1,MapMode.TrackDel);if(M!=null){let D=Object.assign(Object.create(null),q);D.pos=M,D.end!=null&&(D.end=A.changes.mapPos(D.end)),k.push(D)}}T=k}for(let k of A.effects)k.is(S)&&(T=k.value),k.is(closeHoverTooltipEffect)&&(T=[]);return T},provide:T=>showHoverTooltip.from(T)});return{active:R,extension:[R,ViewPlugin.define(T=>new HoverPlugin(T,_,R,S,v.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(_,v){let S=_.plugin(tooltipPlugin);if(!S)return null;let R=S.manager.tooltips.indexOf(v);return R<0?null:S.manager.tooltipViews[R]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(_){let v,S;for(let R of _)v=v||R.topContainer,S=S||R.bottomContainer;return{topContainer:v,bottomContainer:S}}});function getPanel(_,v){let S=_.plugin(panelPlugin),R=S?S.specs.indexOf(v):-1;return R>-1?S.panels[R]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(_){this.input=_.state.facet(showPanel),this.specs=this.input.filter(S=>S),this.panels=this.specs.map(S=>S(_));let v=_.state.facet(panelConfig);this.top=new PanelGroup(_,!0,v.topContainer),this.bottom=new PanelGroup(_,!1,v.bottomContainer),this.top.sync(this.panels.filter(S=>S.top)),this.bottom.sync(this.panels.filter(S=>!S.top));for(let S of this.panels)S.dom.classList.add("cm-panel"),S.mount&&S.mount()}update(_){let v=_.state.facet(panelConfig);this.top.container!=v.topContainer&&(this.top.sync([]),this.top=new PanelGroup(_.view,!0,v.topContainer)),this.bottom.container!=v.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(_.view,!1,v.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let S=_.state.facet(showPanel);if(S!=this.input){let R=S.filter(M=>M),T=[],A=[],k=[],q=[];for(let M of R){let D=this.specs.indexOf(M),L;D<0?(L=M(_.view),q.push(L)):(L=this.panels[D],L.update&&L.update(_)),T.push(L),(L.top?A:k).push(L)}this.specs=R,this.panels=T,this.top.sync(A),this.bottom.sync(k);for(let M of q)M.dom.classList.add("cm-panel"),M.mount&&M.mount()}else for(let R of this.panels)R.update&&R.update(_)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:_=>EditorView.scrollMargins.of(v=>{let S=v.plugin(_);return S&&{top:S.top.scrollMargin(),bottom:S.bottom.scrollMargin()}})});class PanelGroup{constructor(v,S,R){this.view=v,this.top=S,this.container=R,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(v){for(let S of this.panels)S.destroy&&v.indexOf(S)<0&&S.destroy();this.panels=v,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let S=this.container||this.view.dom;S.insertBefore(this.dom,this.top?S.firstChild:null)}let v=this.dom.firstChild;for(let S of this.panels)if(S.dom.parentNode==this.dom){for(;v!=S.dom;)v=rm(v);v=v.nextSibling}else this.dom.insertBefore(S.dom,v);for(;v;)v=rm(v)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let v of this.classes.split(" "))v&&this.container.classList.remove(v);for(let v of(this.classes=this.view.themeClasses).split(" "))v&&this.container.classList.add(v)}}}function rm(_){let v=_.nextSibling;return _.remove(),v}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(v){return this==v||this.constructor==v.constructor&&this.eq(v)}eq(v){return!1}destroy(v){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},activeGutters=Facet.define();function gutter(_){return[gutters(),activeGutters.of({...defaults$1,..._})]}const unfixGutters=Facet.define({combine:_=>_.some(v=>v)});function gutters(_){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.domAfter=null,this.prevViewport=_.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=_.state.facet(activeGutters).map(v=>new SingleGutterView(_,v)),this.fixed=!_.state.facet(unfixGutters);for(let v of this.gutters)v.config.side=="after"?this.getDOMAfter().appendChild(v.dom):this.dom.appendChild(v.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),_.scrollDOM.insertBefore(this.dom,_.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(_){if(this.updateGutters(_)){let v=this.prevViewport,S=_.view.viewport,R=Math.min(v.to,S.to)-Math.max(v.from,S.from);this.syncGutters(R<(S.to-S.from)*.8)}if(_.geometryChanged){let v=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=v,this.domAfter&&(this.domAfter.style.minHeight=v)}this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=_.view.viewport}syncGutters(_){let v=this.dom.nextSibling;_&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let S=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),R=[],T=this.gutters.map(A=>new UpdateContext(A,this.view.viewport,-this.view.documentPadding.top));for(let A of this.view.viewportLineBlocks)if(R.length&&(R=[]),Array.isArray(A.type)){let k=!0;for(let q of A.type)if(q.type==BlockType.Text&&k){advanceCursor(S,R,q.from);for(let M of T)M.line(this.view,q,R);k=!1}else if(q.widget)for(let M of T)M.widget(this.view,q)}else if(A.type==BlockType.Text){advanceCursor(S,R,A.from);for(let k of T)k.line(this.view,A,R)}else if(A.widget)for(let k of T)k.widget(this.view,A);for(let A of T)A.finish();_&&(this.view.scrollDOM.insertBefore(this.dom,v),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(_){let v=_.startState.facet(activeGutters),S=_.state.facet(activeGutters),R=_.docChanged||_.heightChanged||_.viewportChanged||!RangeSet.eq(_.startState.facet(gutterLineClass),_.state.facet(gutterLineClass),_.view.viewport.from,_.view.viewport.to);if(v==S)for(let T of this.gutters)T.update(_)&&(R=!0);else{R=!0;let T=[];for(let A of S){let k=v.indexOf(A);k<0?T.push(new SingleGutterView(this.view,A)):(this.gutters[k].update(_),T.push(this.gutters[k]))}for(let A of this.gutters)A.dom.remove(),T.indexOf(A)<0&&A.destroy();for(let A of T)A.config.side=="after"?this.getDOMAfter().appendChild(A.dom):this.dom.appendChild(A.dom);this.gutters=T}return R}destroy(){for(let _ of this.gutters)_.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:_=>EditorView.scrollMargins.of(v=>{let S=v.plugin(_);if(!S||S.gutters.length==0||!S.fixed)return null;let R=S.dom.offsetWidth*v.scaleX,T=S.domAfter?S.domAfter.offsetWidth*v.scaleX:0;return v.textDirection==Direction.LTR?{left:R,right:T}:{right:R,left:T}})});function asArray(_){return Array.isArray(_)?_:[_]}function advanceCursor(_,v,S){for(;_.value&&_.from<=S;)_.from==S&&v.push(_.value),_.next()}class UpdateContext{constructor(v,S,R){this.gutter=v,this.height=R,this.i=0,this.cursor=RangeSet.iter(v.markers,S.from)}addElement(v,S,R){let{gutter:T}=this,A=(S.top-this.height)/v.scaleY,k=S.height/v.scaleY;if(this.i==T.elements.length){let q=new GutterElement(v,k,A,R);T.elements.push(q),T.dom.appendChild(q.dom)}else T.elements[this.i].update(v,k,A,R);this.height=S.bottom,this.i++}line(v,S,R){let T=[];advanceCursor(this.cursor,T,S.from),R.length&&(T=T.concat(R));let A=this.gutter.config.lineMarker(v,S,T);A&&T.unshift(A);let k=this.gutter;T.length==0&&!k.config.renderEmptyElements||this.addElement(v,S,T)}widget(v,S){let R=this.gutter.config.widgetMarker(v,S.widget,S),T=R?[R]:null;for(let A of v.state.facet(gutterWidgetClass)){let k=A(v,S.widget,S);k&&(T||(T=[])).push(k)}T&&this.addElement(v,S,T)}finish(){let v=this.gutter;for(;v.elements.length>this.i;){let S=v.elements.pop();v.dom.removeChild(S.dom),S.destroy()}}}class SingleGutterView{constructor(v,S){this.view=v,this.config=S,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let R in S.domEventHandlers)this.dom.addEventListener(R,T=>{let A=T.target,k;if(A!=this.dom&&this.dom.contains(A)){for(;A.parentNode!=this.dom;)A=A.parentNode;let M=A.getBoundingClientRect();k=(M.top+M.bottom)/2}else k=T.clientY;let q=v.lineBlockAtHeight(k-v.documentTop);S.domEventHandlers[R](v,q,T)&&T.preventDefault()});this.markers=asArray(S.markers(v)),S.initialSpacer&&(this.spacer=new GutterElement(v,0,0,[S.initialSpacer(v)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(v){let S=this.markers;if(this.markers=asArray(this.config.markers(v.view)),this.spacer&&this.config.updateSpacer){let T=this.config.updateSpacer(this.spacer.markers[0],v);T!=this.spacer.markers[0]&&this.spacer.update(v.view,0,0,[T])}let R=v.view.viewport;return!RangeSet.eq(this.markers,S,R.from,R.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(v):!1)}destroy(){for(let v of this.elements)v.destroy()}}class GutterElement{constructor(v,S,R,T){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(v,S,R,T)}update(v,S,R,T){this.height!=S&&(this.height=S,this.dom.style.height=S+"px"),this.above!=R&&(this.dom.style.marginTop=(this.above=R)?R+"px":""),sameMarkers(this.markers,T)||this.setMarkers(v,T)}setMarkers(v,S){let R="cm-gutterElement",T=this.dom.firstChild;for(let A=0,k=0;;){let q=k,M=A<S.length?S[A++]:null,D=!1;if(M){let L=M.elementClass;L&&(R+=" "+L);for(let I=k;I<this.markers.length;I++)if(this.markers[I].compare(M)){q=I,D=!0;break}}else q=this.markers.length;for(;k<q;){let L=this.markers[k++];if(L.toDOM){L.destroy(T);let I=T.nextSibling;T.remove(),T=I}}if(!M)break;M.toDOM&&(D?T=T.nextSibling:this.dom.insertBefore(M.toDOM(v),T)),D&&k++}this.dom.className=R,this.markers=S}destroy(){this.setMarkers(null,[])}}function sameMarkers(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++)if(!_[S].compare(v[S]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(_){return combineConfig(_,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(v,S){let R=Object.assign({},v);for(let T in S){let A=R[T],k=S[T];R[T]=A?(q,M,D)=>A(q,M,D)||k(q,M,D):k}return R}})}});class NumberMarker extends GutterMarker{constructor(v){super(),this.number=v}eq(v){return this.number==v.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(_,v){return _.state.facet(lineNumberConfig).formatNumber(v,_.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],_=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(v){return v.state.facet(lineNumberMarkers)},lineMarker(v,S,R){return R.some(T=>T.toDOM)?null:new NumberMarker(formatNumber(v,v.state.doc.lineAt(S.from).number))},widgetMarker:(v,S,R)=>{for(let T of v.state.facet(lineNumberWidgetMarker)){let A=T(v,S,R);if(A)return A}return null},lineMarkerChange:v=>v.startState.facet(lineNumberConfig)!=v.state.facet(lineNumberConfig),initialSpacer(v){return new NumberMarker(formatNumber(v,maxLineNumber(v.state.doc.lines)))},updateSpacer(v,S){let R=formatNumber(S.view,maxLineNumber(S.view.state.doc.lines));return R==v.number?v:new NumberMarker(R)},domEventHandlers:_.facet(lineNumberConfig).domEventHandlers,side:"before"}));function lineNumbers(_={}){return[lineNumberConfig.of(_),gutters(),lineNumberGutter]}function maxLineNumber(_){let v=9;for(;v<_;)v=v*10+9;return v}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],_=>{let v=[],S=-1;for(let R of _.selection.ranges){let T=_.doc.lineAt(R.head).from;T>S&&(S=T,v.push(activeLineGutterMarker.range(T)))}return RangeSet.of(v)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(v,S){this.from=v,this.to=S}}class NodeProp{constructor(v={}){this.id=nextPropID++,this.perNode=!!v.perNode,this.deserialize=v.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=v.combine||null}add(v){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof v!="function"&&(v=NodeType.match(v)),S=>{let R=v(S);return R===void 0?null:[this,R]}}}NodeProp.closedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.group=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.isolate=new NodeProp({deserialize:_=>{if(_&&_!="rtl"&&_!="ltr"&&_!="auto")throw new RangeError("Invalid value for isolate: "+_);return _||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(v,S,R){this.tree=v,this.overlay=S,this.parser=R}static get(v){return v&&v.props&&v.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(v,S,R,T=0){this.name=v,this.props=S,this.id=R,this.flags=T}static define(v){let S=v.props&&v.props.length?Object.create(null):noProps,R=(v.top?1:0)|(v.skipped?2:0)|(v.error?4:0)|(v.name==null?8:0),T=new NodeType(v.name||"",S,v.id,R);if(v.props){for(let A of v.props)if(Array.isArray(A)||(A=A(T)),A){if(A[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");S[A[0].id]=A[1]}}return T}prop(v){return this.props[v.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(v){if(typeof v=="string"){if(this.name==v)return!0;let S=this.prop(NodeProp.group);return S?S.indexOf(v)>-1:!1}return this.id==v}static match(v){let S=Object.create(null);for(let R in v)for(let T of R.split(" "))S[T]=v[R];return R=>{for(let T=R.prop(NodeProp.group),A=-1;A<(T?T.length:0);A++){let k=S[A<0?R.name:T[A]];if(k)return k}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(v){this.types=v;for(let S=0;S<v.length;S++)if(v[S].id!=S)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...v){let S=[];for(let R of this.types){let T=null;for(let A of v){let k=A(R);if(k){T||(T=Object.assign({},R.props));let q=k[1],M=k[0];M.combine&&M.id in T&&(q=M.combine(T[M.id],q)),T[M.id]=q}}S.push(T?new NodeType(R.name,T,R.id,R.flags):R)}return new NodeSet(S)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(_){_[_.ExcludeBuffers=1]="ExcludeBuffers",_[_.IncludeAnonymous=2]="IncludeAnonymous",_[_.IgnoreMounts=4]="IgnoreMounts",_[_.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(v,S,R,T,A){if(this.type=v,this.children=S,this.positions=R,this.length=T,this.props=null,A&&A.length){this.props=Object.create(null);for(let[k,q]of A)this.props[typeof k=="number"?k:k.id]=q}}toString(){let v=MountedTree.get(this);if(v&&!v.overlay)return v.tree.toString();let S="";for(let R of this.children){let T=R.toString();T&&(S&&(S+=","),S+=T)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(S.length?"("+S+")":""):S}cursor(v=0){return new TreeCursor(this.topNode,v)}cursorAt(v,S=0,R=0){let T=CachedNode.get(this)||this.topNode,A=new TreeCursor(T);return A.moveTo(v,S),CachedNode.set(this,A._tree),A}get topNode(){return new TreeNode(this,0,0,null)}resolve(v,S=0){let R=resolveNode(CachedNode.get(this)||this.topNode,v,S,!1);return CachedNode.set(this,R),R}resolveInner(v,S=0){let R=resolveNode(CachedInnerNode.get(this)||this.topNode,v,S,!0);return CachedInnerNode.set(this,R),R}resolveStack(v,S=0){return stackIterator(this,v,S)}iterate(v){let{enter:S,leave:R,from:T=0,to:A=this.length}=v,k=v.mode||0,q=(k&IterMode.IncludeAnonymous)>0;for(let M=this.cursor(k|IterMode.IncludeAnonymous);;){let D=!1;if(M.from<=A&&M.to>=T&&(!q&&M.type.isAnonymous||S(M)!==!1)){if(M.firstChild())continue;D=!0}for(;D&&R&&(q||!M.type.isAnonymous)&&R(M),!M.nextSibling();){if(!M.parent())return;D=!0}}}prop(v){return v.perNode?this.props?this.props[v.id]:void 0:this.type.prop(v)}get propValues(){let v=[];if(this.props)for(let S in this.props)v.push([+S,this.props[S]]);return v}balance(v={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(S,R,T)=>new Tree(this.type,S,R,T,this.propValues),v.makeTree||((S,R,T)=>new Tree(NodeType.none,S,R,T)))}static build(v){return buildTree(v)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(v,S){this.buffer=v,this.index=S}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(v,S,R){this.buffer=v,this.length=S,this.set=R}get type(){return NodeType.none}toString(){let v=[];for(let S=0;S<this.buffer.length;)v.push(this.childString(S)),S=this.buffer[S+3];return v.join(",")}childString(v){let S=this.buffer[v],R=this.buffer[v+3],T=this.set.types[S],A=T.name;if(/\W/.test(A)&&!T.isError&&(A=JSON.stringify(A)),v+=4,R==v)return A;let k=[];for(;v<R;)k.push(this.childString(v)),v=this.buffer[v+3];return A+"("+k.join(",")+")"}findChild(v,S,R,T,A){let{buffer:k}=this,q=-1;for(let M=v;M!=S&&!(checkSide(A,T,k[M+1],k[M+2])&&(q=M,R>0));M=k[M+3]);return q}slice(v,S,R){let T=this.buffer,A=new Uint16Array(S-v),k=0;for(let q=v,M=0;q<S;){A[M++]=T[q++],A[M++]=T[q++]-R;let D=A[M++]=T[q++]-R;A[M++]=T[q++]-v,k=Math.max(k,D)}return new TreeBuffer(A,k,this.set)}}function checkSide(_,v,S,R){switch(_){case-2:return S<v;case-1:return R>=v&&S<v;case 0:return S<v&&R>v;case 1:return S<=v&&R>v;case 2:return R>v;case 4:return!0}}function resolveNode(_,v,S,R){for(var T;_.from==_.to||(S<1?_.from>=v:_.from>v)||(S>-1?_.to<=v:_.to<v);){let k=!R&&_ instanceof TreeNode&&_.index<0?null:_.parent;if(!k)return _;_=k}let A=R?0:IterMode.IgnoreOverlays;if(R)for(let k=_,q=k.parent;q;k=q,q=k.parent)k instanceof TreeNode&&k.index<0&&((T=q.enter(v,S,A))===null||T===void 0?void 0:T.from)!=k.from&&(_=q);for(;;){let k=_.enter(v,S,A);if(!k)return _;_=k}}class BaseNode{cursor(v=0){return new TreeCursor(this,v)}getChild(v,S=null,R=null){let T=getChildren(this,v,S,R);return T.length?T[0]:null}getChildren(v,S=null,R=null){return getChildren(this,v,S,R)}resolve(v,S=0){return resolveNode(this,v,S,!1)}resolveInner(v,S=0){return resolveNode(this,v,S,!0)}matchContext(v){return matchNodeContext(this.parent,v)}enterUnfinishedNodesBefore(v){let S=this.childBefore(v),R=this;for(;S;){let T=S.lastChild;if(!T||T.to!=S.to)break;T.type.isError&&T.from==T.to?(R=S,S=T.prevSibling):S=T}return R}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(v,S,R,T){super(),this._tree=v,this.from=S,this.index=R,this._parent=T}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(v,S,R,T,A=0){for(let k=this;;){for(let{children:q,positions:M}=k._tree,D=S>0?q.length:-1;v!=D;v+=S){let L=q[v],I=M[v]+k.from;if(checkSide(T,R,I,I+L.length)){if(L instanceof TreeBuffer){if(A&IterMode.ExcludeBuffers)continue;let N=L.findChild(0,L.buffer.length,S,R-I,T);if(N>-1)return new BufferNode(new BufferContext(k,L,v,I),null,N)}else if(A&IterMode.IncludeAnonymous||!L.type.isAnonymous||hasChild(L)){let N;if(!(A&IterMode.IgnoreMounts)&&(N=MountedTree.get(L))&&!N.overlay)return new TreeNode(N.tree,I,v,k);let F=new TreeNode(L,I,v,k);return A&IterMode.IncludeAnonymous||!F.type.isAnonymous?F:F.nextChild(S<0?L.children.length-1:0,S,R,T)}}}if(A&IterMode.IncludeAnonymous||!k.type.isAnonymous||(k.index>=0?v=k.index+S:v=S<0?-1:k._parent._tree.children.length,k=k._parent,!k))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(v){return this.nextChild(0,1,v,2)}childBefore(v){return this.nextChild(this._tree.children.length-1,-1,v,-2)}prop(v){return this._tree.prop(v)}enter(v,S,R=0){let T;if(!(R&IterMode.IgnoreOverlays)&&(T=MountedTree.get(this._tree))&&T.overlay){let A=v-this.from;for(let{from:k,to:q}of T.overlay)if((S>0?k<=A:k<A)&&(S<0?q>=A:q>A))return new TreeNode(T.tree,T.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,v,S,R)}nextSignificantParent(){let v=this;for(;v.type.isAnonymous&&v._parent;)v=v._parent;return v}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(_,v,S,R){let T=_.cursor(),A=[];if(!T.firstChild())return A;if(S!=null){for(let k=!1;!k;)if(k=T.type.is(S),!T.nextSibling())return A}for(;;){if(R!=null&&T.type.is(R))return A;if(T.type.is(v)&&A.push(T.node),!T.nextSibling())return R==null?A:[]}}function matchNodeContext(_,v,S=v.length-1){for(let R=_;S>=0;R=R.parent){if(!R)return!1;if(!R.type.isAnonymous){if(v[S]&&v[S]!=R.name)return!1;S--}}return!0}class BufferContext{constructor(v,S,R,T){this.parent=v,this.buffer=S,this.index=R,this.start=T}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(v,S,R){super(),this.context=v,this._parent=S,this.index=R,this.type=v.buffer.set.types[v.buffer.buffer[R]]}child(v,S,R){let{buffer:T}=this.context,A=T.findChild(this.index+4,T.buffer[this.index+3],v,S-this.context.start,R);return A<0?null:new BufferNode(this.context,this,A)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(v){return this.child(1,v,2)}childBefore(v){return this.child(-1,v,-2)}prop(v){return this.type.prop(v)}enter(v,S,R=0){if(R&IterMode.ExcludeBuffers)return null;let{buffer:T}=this.context,A=T.findChild(this.index+4,T.buffer[this.index+3],S>0?1:-1,v-this.context.start,S);return A<0?null:new BufferNode(this.context,this,A)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(v){return this._parent?null:this.context.parent.nextChild(this.context.index+v,v,0,4)}get nextSibling(){let{buffer:v}=this.context,S=v.buffer[this.index+3];return S<(this._parent?v.buffer[this._parent.index+3]:v.buffer.length)?new BufferNode(this.context,this._parent,S):this.externalSibling(1)}get prevSibling(){let{buffer:v}=this.context,S=this._parent?this._parent.index+4:0;return this.index==S?this.externalSibling(-1):new BufferNode(this.context,this._parent,v.findChild(S,this.index,-1,0,4))}get tree(){return null}toTree(){let v=[],S=[],{buffer:R}=this.context,T=this.index+4,A=R.buffer[this.index+3];if(A>T){let k=R.buffer[this.index+1];v.push(R.slice(T,A,k)),S.push(0)}return new Tree(this.type,v,S,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(_){if(!_.length)return null;let v=0,S=_[0];for(let A=1;A<_.length;A++){let k=_[A];(k.from>S.from||k.to<S.to)&&(S=k,v=A)}let R=S instanceof TreeNode&&S.index<0?null:S.parent,T=_.slice();return R?T[v]=R:T.splice(v,1),new StackIterator(T,S)}class StackIterator{constructor(v,S){this.heads=v,this.node=S}get next(){return iterStack(this.heads)}}function stackIterator(_,v,S){let R=_.resolveInner(v,S),T=null;for(let A=R instanceof TreeNode?R:R.context.parent;A;A=A.parent)if(A.index<0){let k=A.parent;(T||(T=[R])).push(k.resolve(v,S)),A=k}else{let k=MountedTree.get(A.tree);if(k&&k.overlay&&k.overlay[0].from<=v&&k.overlay[k.overlay.length-1].to>=v){let q=new TreeNode(k.tree,k.overlay[0].from+A.from,-1,A);(T||(T=[R])).push(resolveNode(q,v,S,!1))}}return T?iterStack(T):R}class TreeCursor{get name(){return this.type.name}constructor(v,S=0){if(this.mode=S,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,v instanceof TreeNode)this.yieldNode(v);else{this._tree=v.context.parent,this.buffer=v.context;for(let R=v._parent;R;R=R._parent)this.stack.unshift(R.index);this.bufferNode=v,this.yieldBuf(v.index)}}yieldNode(v){return v?(this._tree=v,this.type=v.type,this.from=v.from,this.to=v.to,!0):!1}yieldBuf(v,S){this.index=v;let{start:R,buffer:T}=this.buffer;return this.type=S||T.set.types[T.buffer[v]],this.from=R+T.buffer[v+1],this.to=R+T.buffer[v+2],!0}yield(v){return v?v instanceof TreeNode?(this.buffer=null,this.yieldNode(v)):(this.buffer=v.context,this.yieldBuf(v.index,v.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(v,S,R){if(!this.buffer)return this.yield(this._tree.nextChild(v<0?this._tree._tree.children.length-1:0,v,S,R,this.mode));let{buffer:T}=this.buffer,A=T.findChild(this.index+4,T.buffer[this.index+3],v,S-this.buffer.start,R);return A<0?!1:(this.stack.push(this.index),this.yieldBuf(A))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(v){return this.enterChild(1,v,2)}childBefore(v){return this.enterChild(-1,v,-2)}enter(v,S,R=this.mode){return this.buffer?R&IterMode.ExcludeBuffers?!1:this.enterChild(1,v,S):this.yield(this._tree.enter(v,S,R))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let v=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(v)}sibling(v){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+v,v,0,4,this.mode)):!1;let{buffer:S}=this.buffer,R=this.stack.length-1;if(v<0){let T=R<0?0:this.stack[R]+4;if(this.index!=T)return this.yieldBuf(S.findChild(T,this.index,-1,0,4))}else{let T=S.buffer[this.index+3];if(T<(R<0?S.buffer.length:S.buffer[this.stack[R]+3]))return this.yieldBuf(T)}return R<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+v,v,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(v){let S,R,{buffer:T}=this;if(T){if(v>0){if(this.index<T.buffer.buffer.length)return!1}else for(let A=0;A<this.index;A++)if(T.buffer.buffer[A+3]<this.index)return!1;({index:S,parent:R}=T)}else({index:S,_parent:R}=this._tree);for(;R;{index:S,_parent:R}=R)if(S>-1)for(let A=S+v,k=v<0?-1:R._tree.children.length;A!=k;A+=v){let q=R._tree.children[A];if(this.mode&IterMode.IncludeAnonymous||q instanceof TreeBuffer||!q.type.isAnonymous||hasChild(q))return!1}return!0}move(v,S){if(S&&this.enterChild(v,0,4))return!0;for(;;){if(this.sibling(v))return!0;if(this.atLastNode(v)||!this.parent())return!1}}next(v=!0){return this.move(1,v)}prev(v=!0){return this.move(-1,v)}moveTo(v,S=0){for(;(this.from==this.to||(S<1?this.from>=v:this.from>v)||(S>-1?this.to<=v:this.to<v))&&this.parent(););for(;this.enterChild(1,v,S););return this}get node(){if(!this.buffer)return this._tree;let v=this.bufferNode,S=null,R=0;if(v&&v.context==this.buffer)e:for(let T=this.index,A=this.stack.length;A>=0;){for(let k=v;k;k=k._parent)if(k.index==T){if(T==this.index)return k;S=k,R=A+1;break e}T=this.stack[--A]}for(let T=R;T<this.stack.length;T++)S=new BufferNode(this.buffer,S,this.stack[T]);return this.bufferNode=new BufferNode(this.buffer,S,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(v,S){for(let R=0;;){let T=!1;if(this.type.isAnonymous||v(this)!==!1){if(this.firstChild()){R++;continue}this.type.isAnonymous||(T=!0)}for(;;){if(T&&S&&S(this),T=this.type.isAnonymous,!R)return;if(this.nextSibling())break;this.parent(),R--,T=!0}}}matchContext(v){if(!this.buffer)return matchNodeContext(this.node.parent,v);let{buffer:S}=this.buffer,{types:R}=S.set;for(let T=v.length-1,A=this.stack.length-1;T>=0;A--){if(A<0)return matchNodeContext(this._tree,v,T);let k=R[S.buffer[this.stack[A]]];if(!k.isAnonymous){if(v[T]&&v[T]!=k.name)return!1;T--}}return!0}}function hasChild(_){return _.children.some(v=>v instanceof TreeBuffer||!v.type.isAnonymous||hasChild(v))}function buildTree(_){var v;let{buffer:S,nodeSet:R,maxBufferLength:T=DefaultBufferLength,reused:A=[],minRepeatType:k=R.types.length}=_,q=Array.isArray(S)?new FlatBufferCursor(S,S.length):S,M=R.types,D=0,L=0;function I(te,re,ee,ne,oe,ue){let{id:ce,start:de,end:pe,size:_e}=q,Ee=L,ge=D;if(_e<0)if(q.next(),_e==-1){let le=A[ce];ee.push(le),ne.push(de-te);return}else if(_e==-3){D=ce;return}else if(_e==-4){L=ce;return}else throw new RangeError(`Unrecognized record size: ${_e}`);let be=M[ce],Ae,De,ve=de-te;if(pe-de<=T&&(De=V(q.pos-re,oe))){let le=new Uint16Array(De.size-De.skip),me=q.pos-De.size,Te=le.length;for(;q.pos>me;)Te=j(De.start,le,Te);Ae=new TreeBuffer(le,pe-De.start,R),ve=De.start-te}else{let le=q.pos-_e;q.next();let me=[],Te=[],ye=ce>=k?ce:-1,Re=0,qe=pe;for(;q.pos>le;)ye>=0&&q.id==ye&&q.size>=0?(q.end<=qe-T&&(H(me,Te,de,Re,q.end,qe,ye,Ee,ge),Re=me.length,qe=q.end),q.next()):ue>2500?N(de,le,me,Te):I(de,le,me,Te,ye,ue+1);if(ye>=0&&Re>0&&Re<me.length&&H(me,Te,de,Re,de,qe,ye,Ee,ge),me.reverse(),Te.reverse(),ye>-1&&Re>0){let ke=F(be,ge);Ae=balanceRange(be,me,Te,0,me.length,0,pe-de,ke,ke)}else Ae=G(be,me,Te,pe-de,Ee-pe,ge)}ee.push(Ae),ne.push(ve)}function N(te,re,ee,ne){let oe=[],ue=0,ce=-1;for(;q.pos>re;){let{id:de,start:pe,end:_e,size:Ee}=q;if(Ee>4)q.next();else{if(ce>-1&&pe<ce)break;ce<0&&(ce=_e-T),oe.push(de,pe,_e),ue++,q.next()}}if(ue){let de=new Uint16Array(ue*4),pe=oe[oe.length-2];for(let _e=oe.length-3,Ee=0;_e>=0;_e-=3)de[Ee++]=oe[_e],de[Ee++]=oe[_e+1]-pe,de[Ee++]=oe[_e+2]-pe,de[Ee++]=Ee;ee.push(new TreeBuffer(de,oe[2]-pe,R)),ne.push(pe-te)}}function F(te,re){return(ee,ne,oe)=>{let ue=0,ce=ee.length-1,de,pe;if(ce>=0&&(de=ee[ce])instanceof Tree){if(!ce&&de.type==te&&de.length==oe)return de;(pe=de.prop(NodeProp.lookAhead))&&(ue=ne[ce]+de.length+pe)}return G(te,ee,ne,oe,ue,re)}}function H(te,re,ee,ne,oe,ue,ce,de,pe){let _e=[],Ee=[];for(;te.length>ne;)_e.push(te.pop()),Ee.push(re.pop()+ee-oe);te.push(G(R.types[ce],_e,Ee,ue-oe,de-ue,pe)),re.push(oe-ee)}function G(te,re,ee,ne,oe,ue,ce){if(ue){let de=[NodeProp.contextHash,ue];ce=ce?[de].concat(ce):[de]}if(oe>25){let de=[NodeProp.lookAhead,oe];ce=ce?[de].concat(ce):[de]}return new Tree(te,re,ee,ne,ce)}function V(te,re){let ee=q.fork(),ne=0,oe=0,ue=0,ce=ee.end-T,de={size:0,start:0,skip:0};e:for(let pe=ee.pos-te;ee.pos>pe;){let _e=ee.size;if(ee.id==re&&_e>=0){de.size=ne,de.start=oe,de.skip=ue,ue+=4,ne+=4,ee.next();continue}let Ee=ee.pos-_e;if(_e<0||Ee<pe||ee.start<ce)break;let ge=ee.id>=k?4:0,be=ee.start;for(ee.next();ee.pos>Ee;){if(ee.size<0)if(ee.size==-3||ee.size==-4)ge+=4;else break e;else ee.id>=k&&(ge+=4);ee.next()}oe=be,ne+=_e,ue+=ge}return(re<0||ne==te)&&(de.size=ne,de.start=oe,de.skip=ue),de.size>4?de:void 0}function j(te,re,ee){let{id:ne,start:oe,end:ue,size:ce}=q;if(q.next(),ce>=0&&ne<k){let de=ee;if(ce>4){let pe=q.pos-(ce-4);for(;q.pos>pe;)ee=j(te,re,ee)}re[--ee]=de,re[--ee]=ue-te,re[--ee]=oe-te,re[--ee]=ne}else ce==-3?D=ne:ce==-4&&(L=ne);return ee}let W=[],X=[];for(;q.pos>0;)I(_.start||0,_.bufferStart||0,W,X,-1,0);let J=(v=_.length)!==null&&v!==void 0?v:W.length?X[0]+W[0].length:0;return new Tree(M[_.topID],W.reverse(),X.reverse(),J)}const nodeSizeCache=new WeakMap;function nodeSize(_,v){if(!_.isAnonymous||v instanceof TreeBuffer||v.type!=_)return 1;let S=nodeSizeCache.get(v);if(S==null){S=1;for(let R of v.children){if(R.type!=_||!(R instanceof Tree)){S=1;break}S+=nodeSize(_,R)}nodeSizeCache.set(v,S)}return S}function balanceRange(_,v,S,R,T,A,k,q,M){let D=0;for(let H=R;H<T;H++)D+=nodeSize(_,v[H]);let L=Math.ceil(D*1.5/8),I=[],N=[];function F(H,G,V,j,W){for(let X=V;X<j;){let J=X,te=G[X],re=nodeSize(_,H[X]);for(X++;X<j;X++){let ee=nodeSize(_,H[X]);if(re+ee>=L)break;re+=ee}if(X==J+1){if(re>L){let ee=H[J];F(ee.children,ee.positions,0,ee.children.length,G[J]+W);continue}I.push(H[J])}else{let ee=G[X-1]+H[X-1].length-te;I.push(balanceRange(_,H,G,J,X,te,ee,null,M))}N.push(te+W-A)}}return F(v,S,R,T,0),(q||M)(I,N,k)}class TreeFragment{constructor(v,S,R,T,A=!1,k=!1){this.from=v,this.to=S,this.tree=R,this.offset=T,this.open=(A?1:0)|(k?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(v,S=[],R=!1){let T=[new TreeFragment(0,v.length,v,0,!1,R)];for(let A of S)A.to>v.length&&T.push(A);return T}static applyChanges(v,S,R=128){if(!S.length)return v;let T=[],A=1,k=v.length?v[0]:null;for(let q=0,M=0,D=0;;q++){let L=q<S.length?S[q]:null,I=L?L.fromA:1e9;if(I-M>=R)for(;k&&k.from<I;){let N=k;if(M>=N.from||I<=N.to||D){let F=Math.max(N.from,M)-D,H=Math.min(N.to,I)-D;N=F>=H?null:new TreeFragment(F,H,N.tree,N.offset+D,q>0,!!L)}if(N&&T.push(N),k.to>I)break;k=A<v.length?v[A++]:null}if(!L)break;M=L.toA,D=L.toA-L.toB}return T}}class Parser{startParse(v,S,R){return typeof v=="string"&&(v=new StringInput(v)),R=R?R.length?R.map(T=>new Range(T.from,T.to)):[new Range(0,0)]:[new Range(0,v.length)],this.createParse(v,S||[],R)}parse(v,S,R){let T=this.startParse(v,S,R);for(;;){let A=T.advance();if(A)return A}}}class StringInput{constructor(v){this.string=v}get length(){return this.string.length}chunk(v){return this.string.slice(v)}get lineChunks(){return!1}read(v,S){return this.string.slice(v,S)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(v,S,R,T){this.name=v,this.set=S,this.base=R,this.modified=T,this.id=nextTagID++}toString(){let{name:v}=this;for(let S of this.modified)S.name&&(v=`${S.name}(${v})`);return v}static define(v,S){let R=typeof v=="string"?v:"?";if(v instanceof Tag&&(S=v),S?.base)throw new Error("Can not derive from a modified tag");let T=new Tag(R,[],null,[]);if(T.set.push(T),S)for(let A of S.set)T.set.push(A);return T}static defineModifier(v){let S=new Modifier(v);return R=>R.modified.indexOf(S)>-1?R:Modifier.get(R.base||R,R.modified.concat(S).sort((T,A)=>T.id-A.id))}}let nextModifierID=0;class Modifier{constructor(v){this.name=v,this.instances=[],this.id=nextModifierID++}static get(v,S){if(!S.length)return v;let R=S[0].instances.find(q=>q.base==v&&sameArray(S,q.modified));if(R)return R;let T=[],A=new Tag(v.name,T,v,S);for(let q of S)q.instances.push(A);let k=powerSet(S);for(let q of v.set)if(!q.modified.length)for(let M of k)T.push(Modifier.get(q,M));return A}}function sameArray(_,v){return _.length==v.length&&_.every((S,R)=>S==v[R])}function powerSet(_){let v=[[]];for(let S=0;S<_.length;S++)for(let R=0,T=v.length;R<T;R++)v.push(v[R].concat(_[S]));return v.sort((S,R)=>R.length-S.length)}function styleTags(_){let v=Object.create(null);for(let S in _){let R=_[S];Array.isArray(R)||(R=[R]);for(let T of S.split(" "))if(T){let A=[],k=2,q=T;for(let I=0;;){if(q=="..."&&I>0&&I+3==T.length){k=1;break}let N=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(q);if(!N)throw new RangeError("Invalid path: "+T);if(A.push(N[0]=="*"?"":N[0][0]=='"'?JSON.parse(N[0]):N[0]),I+=N[0].length,I==T.length)break;let F=T[I++];if(I==T.length&&F=="!"){k=0;break}if(F!="/")throw new RangeError("Invalid path: "+T);q=T.slice(I)}let M=A.length-1,D=A[M];if(!D)throw new RangeError("Invalid path: "+T);let L=new Rule(R,k,M>0?A.slice(0,M):null);v[D]=L.sort(v[D])}}return ruleNodeProp.add(v)}const ruleNodeProp=new NodeProp({combine(_,v){let S,R,T;for(;_||v;){if(!_||v&&_.depth>=v.depth?(T=v,v=v.next):(T=_,_=_.next),S&&S.mode==T.mode&&!T.context&&!S.context)continue;let A=new Rule(T.tags,T.mode,T.context);S?S.next=A:R=A,S=A}return R}});class Rule{constructor(v,S,R,T){this.tags=v,this.mode=S,this.context=R,this.next=T}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(v){return!v||v.depth<this.depth?(this.next=v,this):(v.next=this.sort(v.next),v)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(_,v){let S=Object.create(null);for(let A of _)if(!Array.isArray(A.tag))S[A.tag.id]=A.class;else for(let k of A.tag)S[k.id]=A.class;let{scope:R,all:T=null}=v||{};return{style:A=>{let k=T;for(let q of A)for(let M of q.set){let D=S[M.id];if(D){k=k?k+" "+D:D;break}}return k},scope:R}}function highlightTags(_,v){let S=null;for(let R of _){let T=R.style(v);T&&(S=S?S+" "+T:T)}return S}function highlightTree(_,v,S,R=0,T=_.length){let A=new HighlightBuilder(R,Array.isArray(v)?v:[v],S);A.highlightRange(_.cursor(),R,T,"",A.highlighters),A.flush(T)}class HighlightBuilder{constructor(v,S,R){this.at=v,this.highlighters=S,this.span=R,this.class=""}startSpan(v,S){S!=this.class&&(this.flush(v),v>this.at&&(this.at=v),this.class=S)}flush(v){v>this.at&&this.class&&this.span(this.at,v,this.class)}highlightRange(v,S,R,T,A){let{type:k,from:q,to:M}=v;if(q>=R||M<=S)return;k.isTop&&(A=this.highlighters.filter(F=>!F.scope||F.scope(k)));let D=T,L=getStyleTags(v)||Rule.empty,I=highlightTags(A,L.tags);if(I&&(D&&(D+=" "),D+=I,L.mode==1&&(T+=(T?" ":"")+I)),this.startSpan(Math.max(S,q),D),L.opaque)return;let N=v.tree&&v.tree.prop(NodeProp.mounted);if(N&&N.overlay){let F=v.node.enter(N.overlay[0].from+q,1),H=this.highlighters.filter(V=>!V.scope||V.scope(N.tree.type)),G=v.firstChild();for(let V=0,j=q;;V++){let W=V<N.overlay.length?N.overlay[V]:null,X=W?W.from+q:M,J=Math.max(S,j),te=Math.min(R,X);if(J<te&&G)for(;v.from<te&&(this.highlightRange(v,J,te,T,A),this.startSpan(Math.min(te,v.to),D),!(v.to>=X||!v.nextSibling())););if(!W||X>R)break;j=W.to+q,j>S&&(this.highlightRange(F.cursor(),Math.max(S,W.from+q),Math.min(R,j),"",H),this.startSpan(Math.min(R,j),D))}G&&v.parent()}else if(v.firstChild()){N&&(T="");do if(!(v.to<=S)){if(v.from>=R)break;this.highlightRange(v,S,R,T,A),this.startSpan(Math.min(R,v.to),D)}while(v.nextSibling());v.parent()}}}function getStyleTags(_){let v=_.type.prop(ruleNodeProp);for(;v&&v.context&&!_.matchContext(v.context);)v=v.next;return v||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let _ in tags){let v=tags[_];v instanceof Tag&&(v.name=_)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(_){return Facet.define({combine:_?v=>v.concat(_):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(v,S,R=[],T=""){this.data=v,this.name=T,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=S,this.extension=[language.of(this),EditorState.languageData.of((A,k,q)=>{let M=topNodeAt(A,k,q),D=M.type.prop(languageDataProp);if(!D)return[];let L=A.facet(D),I=M.type.prop(sublanguageProp);if(I){let N=M.resolve(k-M.from,q);for(let F of I)if(F.test(N,A)){let H=A.facet(F.facet);return F.type=="replace"?H:H.concat(L)}}return L})].concat(R)}isActiveAt(v,S,R=-1){return topNodeAt(v,S,R).type.prop(languageDataProp)==this.data}findRegions(v){let S=v.facet(language);if(S?.data==this.data)return[{from:0,to:v.doc.length}];if(!S||!S.allowsNesting)return[];let R=[],T=(A,k)=>{if(A.prop(languageDataProp)==this.data){R.push({from:k,to:k+A.length});return}let q=A.prop(NodeProp.mounted);if(q){if(q.tree.prop(languageDataProp)==this.data){if(q.overlay)for(let M of q.overlay)R.push({from:M.from+k,to:M.to+k});else R.push({from:k,to:k+A.length});return}else if(q.overlay){let M=R.length;if(T(q.tree,q.overlay[0].from+k),R.length>M)return}}for(let M=0;M<A.children.length;M++){let D=A.children[M];D instanceof Tree&&T(D,A.positions[M]+k)}};return T(syntaxTree(v),0),R}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(_,v,S){let R=_.facet(language),T=syntaxTree(_).topNode;if(!R||R.allowsNesting)for(let A=T;A;A=A.enter(v,S,IterMode.ExcludeBuffers))A.type.isTop&&(T=A);return T}function syntaxTree(_){let v=_.field(Language.state,!1);return v?v.tree:Tree.empty}class DocInput{constructor(v){this.doc=v,this.cursorPos=0,this.string="",this.cursor=v.iter()}get length(){return this.doc.length}syncTo(v){return this.string=this.cursor.next(v-this.cursorPos).value,this.cursorPos=v+this.string.length,this.cursorPos-this.string.length}chunk(v){return this.syncTo(v),this.string}get lineChunks(){return!0}read(v,S){let R=this.cursorPos-this.string.length;return v<R||S>=this.cursorPos?this.doc.sliceString(v,S):this.string.slice(v-R,S-R)}}let currentContext=null;class ParseContext{constructor(v,S,R=[],T,A,k,q,M){this.parser=v,this.state=S,this.fragments=R,this.tree=T,this.treeLen=A,this.viewport=k,this.skipped=q,this.scheduleOn=M,this.parse=null,this.tempSkipped=[]}static create(v,S,R){return new ParseContext(v,S,[],Tree.empty,0,R,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(v,S){return S!=null&&S>=this.state.doc.length&&(S=void 0),this.tree!=Tree.empty&&this.isDone(S??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var R;if(typeof v=="number"){let T=Date.now()+v;v=()=>Date.now()>T}for(this.parse||(this.parse=this.startParse()),S!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>S)&&S<this.state.doc.length&&this.parse.stopAt(S);;){let T=this.parse.advance();if(T)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(T,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(R=this.parse.stoppedAt)!==null&&R!==void 0?R:this.state.doc.length,this.tree=T,this.parse=null,this.treeLen<(S??this.state.doc.length))this.parse=this.startParse();else return!0;if(v())return!1}})}takeTree(){let v,S;this.parse&&(v=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>v)&&this.parse.stopAt(v),this.withContext(()=>{for(;!(S=this.parse.advance()););}),this.treeLen=v,this.tree=S,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(v){let S=currentContext;currentContext=this;try{return v()}finally{currentContext=S}}withoutTempSkipped(v){for(let S;S=this.tempSkipped.pop();)v=cutFragments(v,S.from,S.to);return v}changes(v,S){let{fragments:R,tree:T,treeLen:A,viewport:k,skipped:q}=this;if(this.takeTree(),!v.empty){let M=[];if(v.iterChangedRanges((D,L,I,N)=>M.push({fromA:D,toA:L,fromB:I,toB:N})),R=TreeFragment.applyChanges(R,M),T=Tree.empty,A=0,k={from:v.mapPos(k.from,-1),to:v.mapPos(k.to,1)},this.skipped.length){q=[];for(let D of this.skipped){let L=v.mapPos(D.from,1),I=v.mapPos(D.to,-1);L<I&&q.push({from:L,to:I})}}}return new ParseContext(this.parser,S,R,T,A,k,q,this.scheduleOn)}updateViewport(v){if(this.viewport.from==v.from&&this.viewport.to==v.to)return!1;this.viewport=v;let S=this.skipped.length;for(let R=0;R<this.skipped.length;R++){let{from:T,to:A}=this.skipped[R];T<v.to&&A>v.from&&(this.fragments=cutFragments(this.fragments,T,A),this.skipped.splice(R--,1))}return this.skipped.length>=S?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(v,S){this.skipped.push({from:v,to:S})}static getSkippingParser(v){return new class extends Parser{createParse(S,R,T){let A=T[0].from,k=T[T.length-1].to;return{parsedPos:A,advance(){let M=currentContext;if(M){for(let D of T)M.tempSkipped.push(D);v&&(M.scheduleOn=M.scheduleOn?Promise.all([M.scheduleOn,v]):v)}return this.parsedPos=k,new Tree(NodeType.none,[],[],k-A)},stoppedAt:null,stopAt(){}}}}}isDone(v){v=Math.min(v,this.state.doc.length);let S=this.fragments;return this.treeLen>=v&&S.length&&S[0].from==0&&S[0].to>=v}static get(){return currentContext}}function cutFragments(_,v,S){return TreeFragment.applyChanges(_,[{fromA:v,toA:S,fromB:v,toB:S}])}class LanguageState{constructor(v){this.context=v,this.tree=v.tree}apply(v){if(!v.docChanged&&this.tree==this.context.tree)return this;let S=this.context.changes(v.changes,v.state),R=this.context.treeLen==v.startState.doc.length?void 0:Math.max(v.changes.mapPos(this.context.treeLen),S.viewport.to);return S.work(20,R)||S.takeTree(),new LanguageState(S)}static init(v){let S=Math.min(3e3,v.doc.length),R=ParseContext.create(v.facet(language).parser,v,{from:0,to:S});return R.work(20,S)||R.takeTree(),new LanguageState(R)}}Language.state=StateField.define({create:LanguageState.init,update(_,v){for(let S of v.effects)if(S.is(Language.setState))return S.value;return v.startState.facet(language)!=v.state.facet(language)?LanguageState.init(v.state):_.apply(v)}});let requestIdle=_=>{let v=setTimeout(()=>_(),500);return()=>clearTimeout(v)};typeof requestIdleCallback<"u"&&(requestIdle=_=>{let v=-1,S=setTimeout(()=>{v=requestIdleCallback(_,{timeout:400})},100);return()=>v<0?clearTimeout(S):cancelIdleCallback(v)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(v){this.view=v,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(v){let S=this.view.state.field(Language.state).context;(S.updateViewport(v.view.viewport)||this.view.viewport.to>S.treeLen)&&this.scheduleWork(),(v.docChanged||v.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(S)}scheduleWork(){if(this.working)return;let{state:v}=this.view,S=v.field(Language.state);(S.tree!=S.context.tree||!S.context.isDone(v.doc.length))&&(this.working=requestIdle(this.work))}work(v){this.working=null;let S=Date.now();if(this.chunkEnd<S&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=S+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:R,viewport:{to:T}}=this.view,A=R.field(Language.state);if(A.tree==A.context.tree&&A.context.isDone(T+1e5))return;let k=Date.now()+Math.min(this.chunkBudget,100,v&&!isInputPending?Math.max(25,v.timeRemaining()-5):1e9),q=A.context.treeLen<T&&R.doc.length>T+1e3,M=A.context.work(()=>isInputPending&&isInputPending()||Date.now()>k,T+(q?0:1e5));this.chunkBudget-=Date.now()-S,(M||this.chunkBudget<=0)&&(A.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(A.context))})),this.chunkBudget>0&&!(M&&!q)&&this.scheduleWork(),this.checkAsyncSchedule(A.context)}checkAsyncSchedule(v){v.scheduleOn&&(this.workScheduled++,v.scheduleOn.then(()=>this.scheduleWork()).catch(S=>logException(this.view.state,S)).then(()=>this.workScheduled--),v.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(_){return _.length?_[0]:null},enables:_=>[Language.state,parseWorker,EditorView.contentAttributes.compute([_],v=>{let S=v.facet(_);return S&&S.name?{"data-language":S.name}:{}})]}),indentService=Facet.define(),indentUnit=Facet.define({combine:_=>{if(!_.length)return"  ";let v=_[0];if(!v||/\S/.test(v)||Array.from(v).some(S=>S!=v[0]))throw new Error("Invalid indent unit: "+JSON.stringify(_[0]));return v}});function getIndentUnit(_){let v=_.facet(indentUnit);return v.charCodeAt(0)==9?_.tabSize*v.length:v.length}function indentString(_,v){let S="",R=_.tabSize,T=_.facet(indentUnit)[0];if(T=="	"){for(;v>=R;)S+="	",v-=R;T=" "}for(let A=0;A<v;A++)S+=T;return S}function getIndentation(_,v){_ instanceof EditorState&&(_=new IndentContext(_));for(let R of _.state.facet(indentService)){let T=R(_,v);if(T!==void 0)return T}let S=syntaxTree(_.state);return S.length>=v?syntaxIndentation(_,S,v):null}class IndentContext{constructor(v,S={}){this.state=v,this.options=S,this.unit=getIndentUnit(v)}lineAt(v,S=1){let R=this.state.doc.lineAt(v),{simulateBreak:T,simulateDoubleBreak:A}=this.options;return T!=null&&T>=R.from&&T<=R.to?A&&T==v?{text:"",from:v}:(S<0?T<v:T<=v)?{text:R.text.slice(T-R.from),from:T}:{text:R.text.slice(0,T-R.from),from:R.from}:R}textAfterPos(v,S=1){if(this.options.simulateDoubleBreak&&v==this.options.simulateBreak)return"";let{text:R,from:T}=this.lineAt(v,S);return R.slice(v-T,Math.min(R.length,v+100-T))}column(v,S=1){let{text:R,from:T}=this.lineAt(v,S),A=this.countColumn(R,v-T),k=this.options.overrideIndentation?this.options.overrideIndentation(T):-1;return k>-1&&(A+=k-this.countColumn(R,R.search(/\S|$/))),A}countColumn(v,S=v.length){return countColumn(v,this.state.tabSize,S)}lineIndent(v,S=1){let{text:R,from:T}=this.lineAt(v,S),A=this.options.overrideIndentation;if(A){let k=A(T);if(k>-1)return k}return this.countColumn(R,R.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(_,v,S){let R=v.resolveStack(S),T=v.resolveInner(S,-1).resolve(S,0).enterUnfinishedNodesBefore(S);if(T!=R.node){let A=[];for(let k=T;k&&!(k.from<R.node.from||k.to>R.node.to||k.from==R.node.from&&k.type==R.node.type);k=k.parent)A.push(k);for(let k=A.length-1;k>=0;k--)R={node:A[k],next:R}}return indentFor(R,_,S)}function indentFor(_,v,S){for(let R=_;R;R=R.next){let T=indentStrategy(R.node);if(T)return T(TreeIndentContext.create(v,S,R))}return 0}function ignoreClosed(_){return _.pos==_.options.simulateBreak&&_.options.simulateDoubleBreak}function indentStrategy(_){let v=_.type.prop(indentNodeProp);if(v)return v;let S=_.firstChild,R;if(S&&(R=S.type.prop(NodeProp.closedBy))){let T=_.lastChild,A=T&&R.indexOf(T.name)>-1;return k=>delimitedStrategy(k,!0,1,void 0,A&&!ignoreClosed(k)?T.from:void 0)}return _.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(v,S,R){super(v.state,v.options),this.base=v,this.pos=S,this.context=R}get node(){return this.context.node}static create(v,S,R){return new TreeIndentContext(v,S,R)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(v){let S=this.state.doc.lineAt(v.from);for(;;){let R=v.resolve(S.from);for(;R.parent&&R.parent.from==R.from;)R=R.parent;if(isParent(R,v))break;S=this.state.doc.lineAt(R.from)}return this.lineIndent(S.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(_,v){for(let S=v;S;S=S.parent)if(_==S)return!0;return!1}function bracketedAligned(_){let v=_.node,S=v.childAfter(v.from),R=v.lastChild;if(!S)return null;let T=_.options.simulateBreak,A=_.state.doc.lineAt(S.from),k=T==null||T<=A.from?A.to:Math.min(A.to,T);for(let q=S.to;;){let M=v.childAfter(q);if(!M||M==R)return null;if(!M.type.isSkipped){if(M.from>=k)return null;let D=/^ */.exec(A.text.slice(S.to-A.from))[0].length;return{from:S.from,to:S.to+D}}q=M.to}}function delimitedStrategy(_,v,S,R,T){let A=_.textAfter,k=A.match(/^\s*/)[0].length,q=R&&A.slice(k,k+R.length)==R||T==_.pos+k,M=bracketedAligned(_);return M?q?_.column(M.from):_.column(M.to):_.baseIndent+(q?0:_.unit*S)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(_=>{if(!_.docChanged||!_.isUserEvent("input.type")&&!_.isUserEvent("input.complete"))return _;let v=_.startState.languageDataAt("indentOnInput",_.startState.selection.main.head);if(!v.length)return _;let S=_.newDoc,{head:R}=_.newSelection.main,T=S.lineAt(R);if(R>T.from+DontIndentBeyond)return _;let A=S.sliceString(T.from,R);if(!v.some(D=>D.test(A)))return _;let{state:k}=_,q=-1,M=[];for(let{head:D}of k.selection.ranges){let L=k.doc.lineAt(D);if(L.from==q)continue;q=L.from;let I=getIndentation(k,L.from);if(I==null)continue;let N=/^\s*/.exec(L.text)[0],F=indentString(k,I);N!=F&&M.push({from:L.from,to:L.from+N.length,insert:F})}return M.length?[_,{changes:M,sequential:!0}]:_})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function syntaxFolding(_,v,S){let R=syntaxTree(_);if(R.length<S)return null;let T=R.resolveStack(S,1),A=null;for(let k=T;k;k=k.next){let q=k.node;if(q.to<=S||q.from>S)continue;if(A&&q.from<v)break;let M=q.type.prop(foldNodeProp);if(M&&(q.to<R.length-50||R.length==_.doc.length||!isUnfinished(q))){let D=M(q,_);D&&D.from<=S&&D.from>=v&&D.to>S&&(A=D)}}return A}function isUnfinished(_){let v=_.lastChild;return v&&v.to==_.to&&v.type.isError}function foldable(_,v,S){for(let R of _.facet(foldService)){let T=R(_,v,S);if(T)return T}return syntaxFolding(_,v,S)}function mapRange(_,v){let S=v.mapPos(_.from,1),R=v.mapPos(_.to,-1);return S>=R?void 0:{from:S,to:R}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(_){let v=[];for(let{head:S}of _.state.selection.ranges)v.some(R=>R.from<=S&&R.to>=S)||v.push(_.lineBlockAt(S));return v}const foldState=StateField.define({create(){return Decoration.none},update(_,v){v.isUserEvent("delete")&&v.changes.iterChangedRanges((S,R)=>_=clearTouchedFolds(_,S,R)),_=_.map(v.changes);for(let S of v.effects)if(S.is(foldEffect)&&!foldExists(_,S.value.from,S.value.to)){let{preparePlaceholder:R}=v.state.facet(foldConfig),T=R?Decoration.replace({widget:new PreparedFoldWidget(R(v.state,S.value))}):foldWidget;_=_.update({add:[T.range(S.value.from,S.value.to)]})}else S.is(unfoldEffect)&&(_=_.update({filter:(R,T)=>S.value.from!=R||S.value.to!=T,filterFrom:S.value.from,filterTo:S.value.to}));return v.selection&&(_=clearTouchedFolds(_,v.selection.main.head)),_},provide:_=>EditorView.decorations.from(_),toJSON(_,v){let S=[];return _.between(0,v.doc.length,(R,T)=>{S.push(R,T)}),S},fromJSON(_){if(!Array.isArray(_)||_.length%2)throw new RangeError("Invalid JSON for fold state");let v=[];for(let S=0;S<_.length;){let R=_[S++],T=_[S++];if(typeof R!="number"||typeof T!="number")throw new RangeError("Invalid JSON for fold state");v.push(foldWidget.range(R,T))}return Decoration.set(v,!0)}});function clearTouchedFolds(_,v,S=v){let R=!1;return _.between(v,S,(T,A)=>{T<S&&A>v&&(R=!0)}),R?_.update({filterFrom:v,filterTo:S,filter:(T,A)=>T>=S||A<=v}):_}function findFold(_,v,S){var R;let T=null;return(R=_.field(foldState,!1))===null||R===void 0||R.between(v,S,(A,k)=>{(!T||T.from>A)&&(T={from:A,to:k})}),T}function foldExists(_,v,S){let R=!1;return _.between(v,v,(T,A)=>{T==v&&A==S&&(R=!0)}),R}function maybeEnable(_,v){return _.field(foldState,!1)?v:v.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=_=>{for(let v of selectedLines(_)){let S=foldable(_.state,v.from,v.to);if(S)return _.dispatch({effects:maybeEnable(_.state,[foldEffect.of(S),announceFold(_,S)])}),!0}return!1},unfoldCode=_=>{if(!_.state.field(foldState,!1))return!1;let v=[];for(let S of selectedLines(_)){let R=findFold(_.state,S.from,S.to);R&&v.push(unfoldEffect.of(R),announceFold(_,R,!1))}return v.length&&_.dispatch({effects:v}),v.length>0};function announceFold(_,v,S=!0){let R=_.state.doc.lineAt(v.from).number,T=_.state.doc.lineAt(v.to).number;return EditorView.announce.of(`${_.state.phrase(S?"Folded lines":"Unfolded lines")} ${R} ${_.state.phrase("to")} ${T}.`)}const foldAll=_=>{let{state:v}=_,S=[];for(let R=0;R<v.doc.length;){let T=_.lineBlockAt(R),A=foldable(v,T.from,T.to);A&&S.push(foldEffect.of(A)),R=(A?_.lineBlockAt(A.to):T).to+1}return S.length&&_.dispatch({effects:maybeEnable(_.state,S)}),!!S.length},unfoldAll=_=>{let v=_.state.field(foldState,!1);if(!v||!v.size)return!1;let S=[];return v.between(0,_.state.doc.length,(R,T)=>{S.push(unfoldEffect.of({from:R,to:T}))}),_.dispatch({effects:S}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(_){return combineConfig(_,defaultConfig)}});function codeFolding(_){return[foldState,baseTheme$1$2]}function widgetToDOM(_,v){let{state:S}=_,R=S.facet(foldConfig),T=k=>{let q=_.lineBlockAt(_.posAtDOM(k.target)),M=findFold(_.state,q.from,q.to);M&&_.dispatch({effects:unfoldEffect.of(M)}),k.preventDefault()};if(R.placeholderDOM)return R.placeholderDOM(_,T,v);let A=document.createElement("span");return A.textContent=R.placeholderText,A.setAttribute("aria-label",S.phrase("folded code")),A.title=S.phrase("unfold"),A.className="cm-foldPlaceholder",A.onclick=T,A}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(_){return widgetToDOM(_,null)}}});class PreparedFoldWidget extends WidgetType{constructor(v){super(),this.value=v}eq(v){return this.value==v.value}toDOM(v){return widgetToDOM(v,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(v,S){super(),this.config=v,this.open=S}eq(v){return this.config==v.config&&this.open==v.open}toDOM(v){if(this.config.markerDOM)return this.config.markerDOM(this.open);let S=document.createElement("span");return S.textContent=this.open?this.config.openText:this.config.closedText,S.title=v.state.phrase(this.open?"Fold line":"Unfold line"),S}}function foldGutter(_={}){let v={...foldGutterDefaults,..._},S=new FoldMarker(v,!0),R=new FoldMarker(v,!1),T=ViewPlugin.fromClass(class{constructor(k){this.from=k.viewport.from,this.markers=this.buildMarkers(k)}update(k){(k.docChanged||k.viewportChanged||k.startState.facet(language)!=k.state.facet(language)||k.startState.field(foldState,!1)!=k.state.field(foldState,!1)||syntaxTree(k.startState)!=syntaxTree(k.state)||v.foldingChanged(k))&&(this.markers=this.buildMarkers(k.view))}buildMarkers(k){let q=new RangeSetBuilder;for(let M of k.viewportLineBlocks){let D=findFold(k.state,M.from,M.to)?R:foldable(k.state,M.from,M.to)?S:null;D&&q.add(M.from,M.from,D)}return q.finish()}}),{domEventHandlers:A}=v;return[T,gutter({class:"cm-foldGutter",markers(k){var q;return((q=k.plugin(T))===null||q===void 0?void 0:q.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(v,!1)},domEventHandlers:{...A,click:(k,q,M)=>{if(A.click&&A.click(k,q,M))return!0;let D=findFold(k.state,q.from,q.to);if(D)return k.dispatch({effects:unfoldEffect.of(D)}),!0;let L=foldable(k.state,q.from,q.to);return L?(k.dispatch({effects:foldEffect.of(L)}),!0):!1}}}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(v,S){this.specs=v;let R;function T(q){let M=StyleModule.newName();return(R||(R=Object.create(null)))["."+M]=q,M}const A=typeof S.all=="string"?S.all:S.all?T(S.all):void 0,k=S.scope;this.scope=k instanceof Language?q=>q.prop(languageDataProp)==k.data:k?q=>q==k:void 0,this.style=tagHighlighter(v.map(q=>({tag:q.tag,class:q.class||T(Object.assign({},q,{tag:null}))})),{all:A}).style,this.module=R?new StyleModule(R):null,this.themeType=S.themeType}static define(v,S){return new HighlightStyle(v,S||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(_){return _.length?[_[0]]:null}});function getHighlighters(_){let v=_.facet(highlighterFacet);return v.length?v:_.facet(fallbackHighlighter)}function syntaxHighlighting(_,v){let S=[treeHighlighter],R;return _ instanceof HighlightStyle&&(_.module&&S.push(EditorView.styleModule.of(_.module)),R=_.themeType),v?.fallback?S.push(fallbackHighlighter.of(_)):R?S.push(highlighterFacet.computeN([EditorView.darkTheme],T=>T.facet(EditorView.darkTheme)==(R=="dark")?[_]:[])):S.push(highlighterFacet.of(_)),S}class TreeHighlighter{constructor(v){this.markCache=Object.create(null),this.tree=syntaxTree(v.state),this.decorations=this.buildDeco(v,getHighlighters(v.state)),this.decoratedTo=v.viewport.to}update(v){let S=syntaxTree(v.state),R=getHighlighters(v.state),T=R!=getHighlighters(v.startState),{viewport:A}=v.view,k=v.changes.mapPos(this.decoratedTo,1);S.length<A.to&&!T&&S.type==this.tree.type&&k>=A.to?(this.decorations=this.decorations.map(v.changes),this.decoratedTo=k):(S!=this.tree||v.viewportChanged||T)&&(this.tree=S,this.decorations=this.buildDeco(v.view,R),this.decoratedTo=A.to)}buildDeco(v,S){if(!S||!this.tree.length)return Decoration.none;let R=new RangeSetBuilder;for(let{from:T,to:A}of v.visibleRanges)highlightTree(this.tree,S,(k,q,M)=>{R.add(k,q,this.markCache[M]||(this.markCache[M]=Decoration.mark({class:M})))},T,A);return R.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:_=>_.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(_){return combineConfig(_,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(_){let v=[],S=_.matched?matchingMark:nonmatchingMark;return v.push(S.range(_.start.from,_.start.to)),_.end&&v.push(S.range(_.end.from,_.end.to)),v}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(_,v){if(!v.docChanged&&!v.selection)return _;let S=[],R=v.state.facet(bracketMatchingConfig);for(let T of v.state.selection.ranges){if(!T.empty)continue;let A=matchBrackets(v.state,T.head,-1,R)||T.head>0&&matchBrackets(v.state,T.head-1,1,R)||R.afterCursor&&(matchBrackets(v.state,T.head,1,R)||T.head<v.state.doc.length&&matchBrackets(v.state,T.head+1,-1,R));A&&(S=S.concat(R.renderMatch(A,v.state)))}return Decoration.set(S,!0)},provide:_=>EditorView.decorations.from(_)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(_={}){return[bracketMatchingConfig.of(_),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(_,v,S){let R=_.prop(v<0?NodeProp.openedBy:NodeProp.closedBy);if(R)return R;if(_.name.length==1){let T=S.indexOf(_.name);if(T>-1&&T%2==(v<0?1:0))return[S[T+v]]}return null}function findHandle(_){let v=_.type.prop(bracketMatchingHandle);return v?v(_.node):_}function matchBrackets(_,v,S,R={}){let T=R.maxScanDistance||DefaultScanDist,A=R.brackets||DefaultBrackets,k=syntaxTree(_),q=k.resolveInner(v,S);for(let M=q;M;M=M.parent){let D=matchingNodes(M.type,S,A);if(D&&M.from<M.to){let L=findHandle(M);if(L&&(S>0?v>=L.from&&v<L.to:v>L.from&&v<=L.to))return matchMarkedBrackets(_,v,S,M,L,D,A)}}return matchPlainBrackets(_,v,S,k,q.type,T,A)}function matchMarkedBrackets(_,v,S,R,T,A,k){let q=R.parent,M={from:T.from,to:T.to},D=0,L=q?.cursor();if(L&&(S<0?L.childBefore(R.from):L.childAfter(R.to)))do if(S<0?L.to<=R.from:L.from>=R.to){if(D==0&&A.indexOf(L.type.name)>-1&&L.from<L.to){let I=findHandle(L);return{start:M,end:I?{from:I.from,to:I.to}:void 0,matched:!0}}else if(matchingNodes(L.type,S,k))D++;else if(matchingNodes(L.type,-S,k)){if(D==0){let I=findHandle(L);return{start:M,end:I&&I.from<I.to?{from:I.from,to:I.to}:void 0,matched:!1}}D--}}while(S<0?L.prevSibling():L.nextSibling());return{start:M,matched:!1}}function matchPlainBrackets(_,v,S,R,T,A,k){let q=S<0?_.sliceDoc(v-1,v):_.sliceDoc(v,v+1),M=k.indexOf(q);if(M<0||M%2==0!=S>0)return null;let D={from:S<0?v-1:v,to:S>0?v+1:v},L=_.doc.iterRange(v,S>0?_.doc.length:0),I=0;for(let N=0;!L.next().done&&N<=A;){let F=L.value;S<0&&(N+=F.length);let H=v+N*S;for(let G=S>0?0:F.length-1,V=S>0?F.length:-1;G!=V;G+=S){let j=k.indexOf(F[G]);if(!(j<0||R.resolveInner(H+G,1).type!=T))if(j%2==0==S>0)I++;else{if(I==1)return{start:D,end:{from:H+G,to:H+G+1},matched:j>>1==M>>1};I--}}S>0&&(N+=F.length)}return L.done?{start:D,matched:!1}:null}function countCol(_,v,S,R=0,T=0){v==null&&(v=_.search(/[^\s\u00a0]/),v==-1&&(v=_.length));let A=T;for(let k=R;k<v;k++)_.charCodeAt(k)==9?A+=S-A%S:A++;return A}class StringStream{constructor(v,S,R,T){this.string=v,this.tabSize=S,this.indentUnit=R,this.overrideIndent=T,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(v){let S=this.string.charAt(this.pos),R;if(typeof v=="string"?R=S==v:R=S&&(v instanceof RegExp?v.test(S):v(S)),R)return++this.pos,S}eatWhile(v){let S=this.pos;for(;this.eat(v););return this.pos>S}eatSpace(){let v=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>v}skipToEnd(){this.pos=this.string.length}skipTo(v){let S=this.string.indexOf(v,this.pos);if(S>-1)return this.pos=S,!0}backUp(v){this.pos-=v}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var v;return(v=this.overrideIndent)!==null&&v!==void 0?v:countCol(this.string,null,this.tabSize)}match(v,S,R){if(typeof v=="string"){let T=k=>R?k.toLowerCase():k,A=this.string.substr(this.pos,v.length);return T(A)==T(v)?(S!==!1&&(this.pos+=v.length),!0):null}else{let T=this.string.slice(this.pos).match(v);return T&&T.index>0?null:(T&&S!==!1&&(this.pos+=T[0].length),T)}}current(){return this.string.slice(this.start,this.pos)}}function fullParser(_){return{name:_.name||"",token:_.token,blankLine:_.blankLine||(()=>{}),startState:_.startState||(()=>!0),copyState:_.copyState||defaultCopyState,indent:_.indent||(()=>null),languageData:_.languageData||{},tokenTable:_.tokenTable||noTokens,mergeTokens:_.mergeTokens!==!1}}function defaultCopyState(_){if(typeof _!="object")return _;let v={};for(let S in _){let R=_[S];v[S]=R instanceof Array?R.slice():R}return v}const IndentedFrom=new WeakMap;class StreamLanguage extends Language{constructor(v){let S=defineLanguageFacet(v.languageData),R=fullParser(v),T,A=new class extends Parser{createParse(k,q,M){return new Parse(T,k,q,M)}};super(S,A,[],v.name),this.topNode=docID(S,this),T=this,this.streamParser=R,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=v.tokenTable?new TokenTable(R.tokenTable):defaultTokenTable}static define(v){return new StreamLanguage(v)}getIndent(v){let S,{overrideIndentation:R}=v.options;R&&(S=IndentedFrom.get(v.state),S!=null&&S<v.pos-1e4&&(S=void 0));let T=findState(this,v.node.tree,v.node.from,v.node.from,S??v.pos),A,k;if(T?(k=T.state,A=T.pos+1):(k=this.streamParser.startState(v.unit),A=v.node.from),v.pos-A>1e4)return null;for(;A<v.pos;){let M=v.state.doc.lineAt(A),D=Math.min(v.pos,M.to);if(M.length){let L=R?R(M.from):-1,I=new StringStream(M.text,v.state.tabSize,v.unit,L<0?void 0:L);for(;I.pos<D-M.from;)readToken(this.streamParser.token,I,k)}else this.streamParser.blankLine(k,v.unit);if(D==v.pos)break;A=M.to+1}let q=v.lineAt(v.pos);return R&&S==null&&IndentedFrom.set(v.state,q.from),this.streamParser.indent(k,/^\s*(.*)/.exec(q.text)[1],v)}get allowsNesting(){return!1}}function findState(_,v,S,R,T){let A=S>=R&&S+v.length<=T&&v.prop(_.stateAfter);if(A)return{state:_.streamParser.copyState(A),pos:S+v.length};for(let k=v.children.length-1;k>=0;k--){let q=v.children[k],M=S+v.positions[k],D=q instanceof Tree&&M<T&&findState(_,q,M,R,T);if(D)return D}return null}function cutTree(_,v,S,R,T){if(T&&S<=0&&R>=v.length)return v;!T&&S==0&&v.type==_.topNode&&(T=!0);for(let A=v.children.length-1;A>=0;A--){let k=v.positions[A],q=v.children[A],M;if(k<R&&q instanceof Tree){if(!(M=cutTree(_,q,S-k,R-k,T)))break;return T?new Tree(v.type,v.children.slice(0,A).concat(M),v.positions.slice(0,A+1),k+M.length):M}}return null}function findStartInFragments(_,v,S,R,T){for(let A of v){let k=A.from+(A.openStart?25:0),q=A.to-(A.openEnd?25:0),M=k<=S&&q>S&&findState(_,A.tree,0-A.offset,S,q),D;if(M&&M.pos<=R&&(D=cutTree(_,A.tree,S+A.offset,M.pos+A.offset,!1)))return{state:M.state,tree:D}}return{state:_.streamParser.startState(T?getIndentUnit(T):4),tree:Tree.empty}}class Parse{constructor(v,S,R,T){this.lang=v,this.input=S,this.fragments=R,this.ranges=T,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=T[T.length-1].to;let A=ParseContext.get(),k=T[0].from,{state:q,tree:M}=findStartInFragments(v,R,k,this.to,A?.state);this.state=q,this.parsedPos=this.chunkStart=k+M.length;for(let D=0;D<M.children.length;D++)this.chunks.push(M.children[D]),this.chunkPos.push(M.positions[D]);A&&this.parsedPos<A.viewport.from-1e5&&T.some(D=>D.from<=A.viewport.from&&D.to>=A.viewport.from)&&(this.state=this.lang.streamParser.startState(getIndentUnit(A.state)),A.skipUntilInView(this.parsedPos,A.viewport.from),this.parsedPos=A.viewport.from),this.moveRangeIndex()}advance(){let v=ParseContext.get(),S=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),R=Math.min(S,this.chunkStart+512);for(v&&(R=Math.min(R,v.viewport.to));this.parsedPos<R;)this.parseLine(v);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=S?this.finish():v&&this.parsedPos>=v.viewport.to?(v.skipUntilInView(this.parsedPos,S),this.finish()):null}stopAt(v){this.stoppedAt=v}lineAfter(v){let S=this.input.chunk(v);if(this.input.lineChunks)S==`
`&&(S="");else{let R=S.indexOf(`
`);R>-1&&(S=S.slice(0,R))}return v+S.length<=this.to?S:S.slice(0,this.to-v)}nextLine(){let v=this.parsedPos,S=this.lineAfter(v),R=v+S.length;for(let T=this.rangeIndex;;){let A=this.ranges[T].to;if(A>=R||(S=S.slice(0,A-(R-S.length)),T++,T==this.ranges.length))break;let k=this.ranges[T].from,q=this.lineAfter(k);S+=q,R=k+q.length}return{line:S,end:R}}skipGapsTo(v,S,R){for(;;){let T=this.ranges[this.rangeIndex].to,A=v+S;if(R>0?T>A:T>=A)break;let k=this.ranges[++this.rangeIndex].from;S+=k-T}return S}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(v,S,R,T){let A=4;if(this.ranges.length>1){T=this.skipGapsTo(S,T,1),S+=T;let q=this.chunk.length;T=this.skipGapsTo(R,T,-1),R+=T,A+=this.chunk.length-q}let k=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&A==4&&k>=0&&this.chunk[k]==v&&this.chunk[k+2]==S?this.chunk[k+2]=R:this.chunk.push(v,S,R,A),T}parseLine(v){let{line:S,end:R}=this.nextLine(),T=0,{streamParser:A}=this.lang,k=new StringStream(S,v?v.state.tabSize:4,v?getIndentUnit(v.state):2);if(k.eol())A.blankLine(this.state,k.indentUnit);else for(;!k.eol();){let q=readToken(A.token,k,this.state);if(q&&(T=this.emitToken(this.lang.tokenTable.resolve(q),this.parsedPos+k.start,this.parsedPos+k.pos,T)),k.start>1e4)break}this.parsedPos=R,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let v=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet,topID:0,maxBufferLength:512,reused:this.chunkReused});v=new Tree(v.type,v.children,v.positions,v.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(v),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function readToken(_,v,S){v.start=v.pos;for(let R=0;R<10;R++){let T=_(v,S);if(v.pos>v.start)return T}throw new Error("Stream parser failed to advance stream.")}const noTokens=Object.create(null),typeArray=[NodeType.none],nodeSet=new NodeSet(typeArray),warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[_,v]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[_]=createTokenType(noTokens,v);class TokenTable{constructor(v){this.extra=v,this.table=Object.assign(Object.create(null),defaultTable)}resolve(v){return v?this.table[v]||(this.table[v]=createTokenType(this.extra,v)):0}}const defaultTokenTable=new TokenTable(noTokens);function warnForPart(_,v){warned.indexOf(_)>-1||(warned.push(_),console.warn(v))}function createTokenType(_,v){let S=[];for(let q of v.split(" ")){let M=[];for(let D of q.split(".")){let L=_[D]||tags[D];L?typeof L=="function"?M.length?M=M.map(L):warnForPart(D,`Modifier ${D} used at start of tag`):M.length?warnForPart(D,`Tag ${D} used as modifier`):M=Array.isArray(L)?L:[L]:warnForPart(D,`Unknown highlighting tag ${D}`)}for(let D of M)S.push(D)}if(!S.length)return 0;let R=v.replace(/ /g,"_"),T=R+" "+S.map(q=>q.id),A=byTag[T];if(A)return A.id;let k=byTag[T]=NodeType.define({id:typeArray.length,name:R,props:[styleTags({[R]:S})]});return typeArray.push(k),k.id}function docID(_,v){let S=NodeType.define({id:typeArray.length,name:"Document",props:[languageDataProp.add(()=>_),indentNodeProp.add(()=>R=>v.getIndent(R))],top:!0});return typeArray.push(S),S}Direction.RTL,Direction.LTR;const toggleComment=_=>{let{state:v}=_,S=v.doc.lineAt(v.selection.main.from),R=getConfig(_.state,S.from);return R.line?toggleLineComment(_):R.block?toggleBlockCommentByLine(_):!1};function command(_,v){return({state:S,dispatch:R})=>{if(S.readOnly)return!1;let T=_(v,S);return T?(R(S.update(T)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((_,v)=>changeBlockComment(_,v,selectedLineRanges(v)),0);function getConfig(_,v){let S=_.languageDataAt("commentTokens",v,1);return S.length?S[0]:{}}const SearchMargin=50;function findBlockComment(_,{open:v,close:S},R,T){let A=_.sliceDoc(R-SearchMargin,R),k=_.sliceDoc(T,T+SearchMargin),q=/\s*$/.exec(A)[0].length,M=/^\s*/.exec(k)[0].length,D=A.length-q;if(A.slice(D-v.length,D)==v&&k.slice(M,M+S.length)==S)return{open:{pos:R-q,margin:q&&1},close:{pos:T+M,margin:M&&1}};let L,I;T-R<=2*SearchMargin?L=I=_.sliceDoc(R,T):(L=_.sliceDoc(R,R+SearchMargin),I=_.sliceDoc(T-SearchMargin,T));let N=/^\s*/.exec(L)[0].length,F=/\s*$/.exec(I)[0].length,H=I.length-F-S.length;return L.slice(N,N+v.length)==v&&I.slice(H,H+S.length)==S?{open:{pos:R+N+v.length,margin:/\s/.test(L.charAt(N+v.length))?1:0},close:{pos:T-F-S.length,margin:/\s/.test(I.charAt(H-1))?1:0}}:null}function selectedLineRanges(_){let v=[];for(let S of _.selection.ranges){let R=_.doc.lineAt(S.from),T=S.to<=R.to?R:_.doc.lineAt(S.to);T.from>R.from&&T.from==S.to&&(T=S.to==R.to+1?R:_.doc.lineAt(S.to-1));let A=v.length-1;A>=0&&v[A].to>R.from?v[A].to=T.to:v.push({from:R.from+/^\s*/.exec(R.text)[0].length,to:T.to})}return v}function changeBlockComment(_,v,S=v.selection.ranges){let R=S.map(A=>getConfig(v,A.from).block);if(!R.every(A=>A))return null;let T=S.map((A,k)=>findBlockComment(v,R[k],A.from,A.to));if(_!=2&&!T.every(A=>A))return{changes:v.changes(S.map((A,k)=>T[k]?[]:[{from:A.from,insert:R[k].open+" "},{from:A.to,insert:" "+R[k].close}]))};if(_!=1&&T.some(A=>A)){let A=[];for(let k=0,q;k<T.length;k++)if(q=T[k]){let M=R[k],{open:D,close:L}=q;A.push({from:D.pos-M.open.length,to:D.pos+D.margin},{from:L.pos-L.margin,to:L.pos+M.close.length})}return{changes:A}}return null}function changeLineComment(_,v,S=v.selection.ranges){let R=[],T=-1;for(let{from:A,to:k}of S){let q=R.length,M=1e9,D=getConfig(v,A).line;if(D){for(let L=A;L<=k;){let I=v.doc.lineAt(L);if(I.from>T&&(A==k||k>I.from)){T=I.from;let N=/^\s*/.exec(I.text)[0].length,F=N==I.length,H=I.text.slice(N,N+D.length)==D?N:-1;N<I.text.length&&N<M&&(M=N),R.push({line:I,comment:H,token:D,indent:N,empty:F,single:!1})}L=I.to+1}if(M<1e9)for(let L=q;L<R.length;L++)R[L].indent<R[L].line.text.length&&(R[L].indent=M);R.length==q+1&&(R[q].single=!0)}}if(_!=2&&R.some(A=>A.comment<0&&(!A.empty||A.single))){let A=[];for(let{line:q,token:M,indent:D,empty:L,single:I}of R)(I||!L)&&A.push({from:q.from+D,insert:M+" "});let k=v.changes(A);return{changes:k,selection:v.selection.map(k,1)}}else if(_!=1&&R.some(A=>A.comment>=0)){let A=[];for(let{line:k,comment:q,token:M}of R)if(q>=0){let D=k.from+q,L=D+M.length;k.text[L-k.from]==" "&&L++,A.push({from:D,to:L})}return{changes:A}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(_){return combineConfig(_,{minDepth:100,newGroupDelay:500,joinToEvent:(v,S)=>S},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(v,S)=>(R,T)=>v(R,T)||S(R,T)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(_,v){let S=v.state.facet(historyConfig),R=v.annotation(fromHistory);if(R){let M=HistEvent.fromTransaction(v,R.selection),D=R.side,L=D==0?_.undone:_.done;return M?L=updateBranch(L,L.length,S.minDepth,M):L=addSelection(L,v.startState.selection),new HistoryState(D==0?R.rest:L,D==0?L:R.rest)}let T=v.annotation(isolateHistory);if((T=="full"||T=="before")&&(_=_.isolate()),v.annotation(Transaction.addToHistory)===!1)return v.changes.empty?_:_.addMapping(v.changes.desc);let A=HistEvent.fromTransaction(v),k=v.annotation(Transaction.time),q=v.annotation(Transaction.userEvent);return A?_=_.addChanges(A,k,q,S,v):v.selection&&(_=_.addSelection(v.startState.selection,k,q,S.newGroupDelay)),(T=="full"||T=="after")&&(_=_.isolate()),_},toJSON(_){return{done:_.done.map(v=>v.toJSON()),undone:_.undone.map(v=>v.toJSON())}},fromJSON(_){return new HistoryState(_.done.map(HistEvent.fromJSON),_.undone.map(HistEvent.fromJSON))}});function history(_={}){return[historyField_,historyConfig.of(_),EditorView.domEventHandlers({beforeinput(v,S){let R=v.inputType=="historyUndo"?undo:v.inputType=="historyRedo"?redo:null;return R?(v.preventDefault(),R(S)):!1}})]}function cmd(_,v){return function({state:S,dispatch:R}){if(!v&&S.readOnly)return!1;let T=S.field(historyField_,!1);if(!T)return!1;let A=T.pop(_,S,v);return A?(R(A),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(v,S,R,T,A){this.changes=v,this.effects=S,this.mapped=R,this.startSelection=T,this.selectionsAfter=A}setSelAfter(v){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,v)}toJSON(){var v,S,R;return{changes:(v=this.changes)===null||v===void 0?void 0:v.toJSON(),mapped:(S=this.mapped)===null||S===void 0?void 0:S.toJSON(),startSelection:(R=this.startSelection)===null||R===void 0?void 0:R.toJSON(),selectionsAfter:this.selectionsAfter.map(T=>T.toJSON())}}static fromJSON(v){return new HistEvent(v.changes&&ChangeSet.fromJSON(v.changes),[],v.mapped&&ChangeDesc.fromJSON(v.mapped),v.startSelection&&EditorSelection.fromJSON(v.startSelection),v.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(v,S){let R=none$1;for(let T of v.startState.facet(invertedEffects)){let A=T(v);A.length&&(R=R.concat(A))}return!R.length&&v.changes.empty?null:new HistEvent(v.changes.invert(v.startState.doc),R,void 0,S||v.startState.selection,none$1)}static selection(v){return new HistEvent(void 0,none$1,void 0,void 0,v)}}function updateBranch(_,v,S,R){let T=v+1>S+20?v-S-1:0,A=_.slice(T,v);return A.push(R),A}function isAdjacent(_,v){let S=[],R=!1;return _.iterChangedRanges((T,A)=>S.push(T,A)),v.iterChangedRanges((T,A,k,q)=>{for(let M=0;M<S.length;){let D=S[M++],L=S[M++];q>=D&&k<=L&&(R=!0)}}),R}function eqSelectionShape(_,v){return _.ranges.length==v.ranges.length&&_.ranges.filter((S,R)=>S.empty!=v.ranges[R].empty).length===0}function conc(_,v){return _.length?v.length?_.concat(v):_:v}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(_,v){if(_.length){let S=_[_.length-1],R=S.selectionsAfter.slice(Math.max(0,S.selectionsAfter.length-MaxSelectionsPerEvent));return R.length&&R[R.length-1].eq(v)?_:(R.push(v),updateBranch(_,_.length-1,1e9,S.setSelAfter(R)))}else return[HistEvent.selection([v])]}function popSelection(_){let v=_[_.length-1],S=_.slice();return S[_.length-1]=v.setSelAfter(v.selectionsAfter.slice(0,v.selectionsAfter.length-1)),S}function addMappingToBranch(_,v){if(!_.length)return _;let S=_.length,R=none$1;for(;S;){let T=mapEvent(_[S-1],v,R);if(T.changes&&!T.changes.empty||T.effects.length){let A=_.slice(0,S);return A[S-1]=T,A}else v=T.mapped,S--,R=T.selectionsAfter}return R.length?[HistEvent.selection(R)]:none$1}function mapEvent(_,v,S){let R=conc(_.selectionsAfter.length?_.selectionsAfter.map(q=>q.map(v)):none$1,S);if(!_.changes)return HistEvent.selection(R);let T=_.changes.map(v),A=v.mapDesc(_.changes,!0),k=_.mapped?_.mapped.composeDesc(A):A;return new HistEvent(T,StateEffect.mapEffects(_.effects,v),k,_.startSelection.map(A),R)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(v,S,R=0,T=void 0){this.done=v,this.undone=S,this.prevTime=R,this.prevUserEvent=T}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(v,S,R,T,A){let k=this.done,q=k[k.length-1];return q&&q.changes&&!q.changes.empty&&v.changes&&(!R||joinableUserEvent.test(R))&&(!q.selectionsAfter.length&&S-this.prevTime<T.newGroupDelay&&T.joinToEvent(A,isAdjacent(q.changes,v.changes))||R=="input.type.compose")?k=updateBranch(k,k.length-1,T.minDepth,new HistEvent(v.changes.compose(q.changes),conc(StateEffect.mapEffects(v.effects,q.changes),q.effects),q.mapped,q.startSelection,none$1)):k=updateBranch(k,k.length,T.minDepth,v),new HistoryState(k,none$1,S,R)}addSelection(v,S,R,T){let A=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return A.length>0&&S-this.prevTime<T&&R==this.prevUserEvent&&R&&/^select($|\.)/.test(R)&&eqSelectionShape(A[A.length-1],v)?this:new HistoryState(addSelection(this.done,v),this.undone,S,R)}addMapping(v){return new HistoryState(addMappingToBranch(this.done,v),addMappingToBranch(this.undone,v),this.prevTime,this.prevUserEvent)}pop(v,S,R){let T=v==0?this.done:this.undone;if(T.length==0)return null;let A=T[T.length-1],k=A.selectionsAfter[0]||S.selection;if(R&&A.selectionsAfter.length)return S.update({selection:A.selectionsAfter[A.selectionsAfter.length-1],annotations:fromHistory.of({side:v,rest:popSelection(T),selection:k}),userEvent:v==0?"select.undo":"select.redo",scrollIntoView:!0});if(A.changes){let q=T.length==1?none$1:T.slice(0,T.length-1);return A.mapped&&(q=addMappingToBranch(q,A.mapped)),S.update({changes:A.changes,selection:A.startSelection,effects:A.effects,annotations:fromHistory.of({side:v,rest:q,selection:k}),filter:!1,userEvent:v==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(_,v){return EditorSelection.create(_.ranges.map(v),_.mainIndex)}function setSel(_,v){return _.update({selection:v,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:_,dispatch:v},S){let R=updateSel(_.selection,S);return R.eq(_.selection,!0)?!1:(v(setSel(_,R)),!0)}function rangeEnd(_,v){return EditorSelection.cursor(v?_.to:_.from)}function cursorByChar(_,v){return moveSel(_,S=>S.empty?_.moveByChar(S,v):rangeEnd(S,v))}function ltrAtCursor(_){return _.textDirectionAt(_.state.selection.main.head)==Direction.LTR}const cursorCharLeft=_=>cursorByChar(_,!ltrAtCursor(_)),cursorCharRight=_=>cursorByChar(_,ltrAtCursor(_));function cursorByGroup(_,v){return moveSel(_,S=>S.empty?_.moveByGroup(S,v):rangeEnd(S,v))}const cursorGroupLeft=_=>cursorByGroup(_,!ltrAtCursor(_)),cursorGroupRight=_=>cursorByGroup(_,ltrAtCursor(_));function interestingNode(_,v,S){if(v.type.prop(S))return!0;let R=v.to-v.from;return R&&(R>2||/[^\s,.;:]/.test(_.sliceDoc(v.from,v.to)))||v.firstChild}function moveBySyntax(_,v,S){let R=syntaxTree(_).resolveInner(v.head),T=S?NodeProp.closedBy:NodeProp.openedBy;for(let M=v.head;;){let D=S?R.childAfter(M):R.childBefore(M);if(!D)break;interestingNode(_,D,T)?R=D:M=S?D.to:D.from}let A=R.type.prop(T),k,q;return A&&(k=S?matchBrackets(_,R.from,1):matchBrackets(_,R.to,-1))&&k.matched?q=S?k.end.to:k.end.from:q=S?R.to:R.from,EditorSelection.cursor(q,S?-1:1)}const cursorSyntaxLeft=_=>moveSel(_,v=>moveBySyntax(_.state,v,!ltrAtCursor(_))),cursorSyntaxRight=_=>moveSel(_,v=>moveBySyntax(_.state,v,ltrAtCursor(_)));function cursorByLine(_,v){return moveSel(_,S=>{if(!S.empty)return rangeEnd(S,v);let R=_.moveVertically(S,v);return R.head!=S.head?R:_.moveToLineBoundary(S,v)})}const cursorLineUp=_=>cursorByLine(_,!1),cursorLineDown=_=>cursorByLine(_,!0);function pageInfo(_){let v=_.scrollDOM.clientHeight<_.scrollDOM.scrollHeight-2,S=0,R=0,T;if(v){for(let A of _.state.facet(EditorView.scrollMargins)){let k=A(_);k?.top&&(S=Math.max(k?.top,S)),k?.bottom&&(R=Math.max(k?.bottom,R))}T=_.scrollDOM.clientHeight-S-R}else T=(_.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:S,marginBottom:R,selfScroll:v,height:Math.max(_.defaultLineHeight,T-5)}}function cursorByPage(_,v){let S=pageInfo(_),{state:R}=_,T=updateSel(R.selection,k=>k.empty?_.moveVertically(k,v,S.height):rangeEnd(k,v));if(T.eq(R.selection))return!1;let A;if(S.selfScroll){let k=_.coordsAtPos(R.selection.main.head),q=_.scrollDOM.getBoundingClientRect(),M=q.top+S.marginTop,D=q.bottom-S.marginBottom;k&&k.top>M&&k.bottom<D&&(A=EditorView.scrollIntoView(T.main.head,{y:"start",yMargin:k.top-M}))}return _.dispatch(setSel(R,T),{effects:A}),!0}const cursorPageUp=_=>cursorByPage(_,!1),cursorPageDown=_=>cursorByPage(_,!0);function moveByLineBoundary(_,v,S){let R=_.lineBlockAt(v.head),T=_.moveToLineBoundary(v,S);if(T.head==v.head&&T.head!=(S?R.to:R.from)&&(T=_.moveToLineBoundary(v,S,!1)),!S&&T.head==R.from&&R.length){let A=/^\s*/.exec(_.state.sliceDoc(R.from,Math.min(R.from+100,R.to)))[0].length;A&&v.head!=R.from+A&&(T=EditorSelection.cursor(R.from+A))}return T}const cursorLineBoundaryForward=_=>moveSel(_,v=>moveByLineBoundary(_,v,!0)),cursorLineBoundaryBackward=_=>moveSel(_,v=>moveByLineBoundary(_,v,!1)),cursorLineBoundaryLeft=_=>moveSel(_,v=>moveByLineBoundary(_,v,!ltrAtCursor(_))),cursorLineBoundaryRight=_=>moveSel(_,v=>moveByLineBoundary(_,v,ltrAtCursor(_))),cursorLineStart=_=>moveSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).from,1)),cursorLineEnd=_=>moveSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).to,-1));function toMatchingBracket(_,v,S){let R=!1,T=updateSel(_.selection,A=>{let k=matchBrackets(_,A.head,-1)||matchBrackets(_,A.head,1)||A.head>0&&matchBrackets(_,A.head-1,1)||A.head<_.doc.length&&matchBrackets(_,A.head+1,-1);if(!k||!k.end)return A;R=!0;let q=k.start.from==A.head?k.end.to:k.end.from;return EditorSelection.cursor(q)});return R?(v(setSel(_,T)),!0):!1}const cursorMatchingBracket=({state:_,dispatch:v})=>toMatchingBracket(_,v);function extendSel(_,v){let S=updateSel(_.state.selection,R=>{let T=v(R);return EditorSelection.range(R.anchor,T.head,T.goalColumn,T.bidiLevel||void 0)});return S.eq(_.state.selection)?!1:(_.dispatch(setSel(_.state,S)),!0)}function selectByChar(_,v){return extendSel(_,S=>_.moveByChar(S,v))}const selectCharLeft=_=>selectByChar(_,!ltrAtCursor(_)),selectCharRight=_=>selectByChar(_,ltrAtCursor(_));function selectByGroup(_,v){return extendSel(_,S=>_.moveByGroup(S,v))}const selectGroupLeft=_=>selectByGroup(_,!ltrAtCursor(_)),selectGroupRight=_=>selectByGroup(_,ltrAtCursor(_)),selectSyntaxLeft=_=>extendSel(_,v=>moveBySyntax(_.state,v,!ltrAtCursor(_))),selectSyntaxRight=_=>extendSel(_,v=>moveBySyntax(_.state,v,ltrAtCursor(_)));function selectByLine(_,v){return extendSel(_,S=>_.moveVertically(S,v))}const selectLineUp=_=>selectByLine(_,!1),selectLineDown=_=>selectByLine(_,!0);function selectByPage(_,v){return extendSel(_,S=>_.moveVertically(S,v,pageInfo(_).height))}const selectPageUp=_=>selectByPage(_,!1),selectPageDown=_=>selectByPage(_,!0),selectLineBoundaryForward=_=>extendSel(_,v=>moveByLineBoundary(_,v,!0)),selectLineBoundaryBackward=_=>extendSel(_,v=>moveByLineBoundary(_,v,!1)),selectLineBoundaryLeft=_=>extendSel(_,v=>moveByLineBoundary(_,v,!ltrAtCursor(_))),selectLineBoundaryRight=_=>extendSel(_,v=>moveByLineBoundary(_,v,ltrAtCursor(_))),selectLineStart=_=>extendSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).from)),selectLineEnd=_=>extendSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).to)),cursorDocStart=({state:_,dispatch:v})=>(v(setSel(_,{anchor:0})),!0),cursorDocEnd=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.doc.length})),!0),selectDocStart=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.selection.main.anchor,head:0})),!0),selectDocEnd=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.selection.main.anchor,head:_.doc.length})),!0),selectAll=({state:_,dispatch:v})=>(v(_.update({selection:{anchor:0,head:_.doc.length},userEvent:"select"})),!0),selectLine=({state:_,dispatch:v})=>{let S=selectedLineBlocks(_).map(({from:R,to:T})=>EditorSelection.range(R,Math.min(T+1,_.doc.length)));return v(_.update({selection:EditorSelection.create(S),userEvent:"select"})),!0},selectParentSyntax=({state:_,dispatch:v})=>{let S=updateSel(_.selection,R=>{let T=syntaxTree(_),A=T.resolveStack(R.from,1);if(R.empty){let k=T.resolveStack(R.from,-1);k.node.from>=A.node.from&&k.node.to<=A.node.to&&(A=k)}for(let k=A;k;k=k.next){let{node:q}=k;if((q.from<R.from&&q.to>=R.to||q.to>R.to&&q.from<=R.from)&&k.next)return EditorSelection.range(q.to,q.from)}return R});return S.eq(_.selection)?!1:(v(setSel(_,S)),!0)};function addCursorVertically(_,v){let{state:S}=_,R=S.selection,T=S.selection.ranges.slice();for(let A of S.selection.ranges){let k=S.doc.lineAt(A.head);if(v?k.to<_.state.doc.length:k.from>0)for(let q=A;;){let M=_.moveVertically(q,v);if(M.head<k.from||M.head>k.to){T.some(D=>D.head==M.head)||T.push(M);break}else{if(M.head==q.head)break;q=M}}}return T.length==R.ranges.length?!1:(_.dispatch(setSel(S,EditorSelection.create(T,T.length-1))),!0)}const addCursorAbove=_=>addCursorVertically(_,!1),addCursorBelow=_=>addCursorVertically(_,!0),simplifySelection=({state:_,dispatch:v})=>{let S=_.selection,R=null;return S.ranges.length>1?R=EditorSelection.create([S.main]):S.main.empty||(R=EditorSelection.create([EditorSelection.cursor(S.main.head)])),R?(v(setSel(_,R)),!0):!1};function deleteBy(_,v){if(_.state.readOnly)return!1;let S="delete.selection",{state:R}=_,T=R.changeByRange(A=>{let{from:k,to:q}=A;if(k==q){let M=v(A);M<k?(S="delete.backward",M=skipAtomic(_,M,!1)):M>k&&(S="delete.forward",M=skipAtomic(_,M,!0)),k=Math.min(k,M),q=Math.max(q,M)}else k=skipAtomic(_,k,!1),q=skipAtomic(_,q,!0);return k==q?{range:A}:{changes:{from:k,to:q},range:EditorSelection.cursor(k,k<A.head?-1:1)}});return T.changes.empty?!1:(_.dispatch(R.update(T,{scrollIntoView:!0,userEvent:S,effects:S=="delete.selection"?EditorView.announce.of(R.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(_,v,S){if(_ instanceof EditorView)for(let R of _.state.facet(EditorView.atomicRanges).map(T=>T(_)))R.between(v,v,(T,A)=>{T<v&&A>v&&(v=S?A:T)});return v}const deleteByChar=(_,v,S)=>deleteBy(_,R=>{let T=R.from,{state:A}=_,k=A.doc.lineAt(T),q,M;if(S&&!v&&T>k.from&&T<k.from+200&&!/[^ \t]/.test(q=k.text.slice(0,T-k.from))){if(q[q.length-1]=="	")return T-1;let D=countColumn(q,A.tabSize),L=D%getIndentUnit(A)||getIndentUnit(A);for(let I=0;I<L&&q[q.length-1-I]==" ";I++)T--;M=T}else M=findClusterBreak(k.text,T-k.from,v,v)+k.from,M==T&&k.number!=(v?A.doc.lines:1)?M+=v?1:-1:!v&&/[\ufe00-\ufe0f]/.test(k.text.slice(M-k.from,T-k.from))&&(M=findClusterBreak(k.text,M-k.from,!1,!1)+k.from);return M}),deleteCharBackward=_=>deleteByChar(_,!1,!0),deleteCharForward=_=>deleteByChar(_,!0,!1),deleteByGroup=(_,v)=>deleteBy(_,S=>{let R=S.head,{state:T}=_,A=T.doc.lineAt(R),k=T.charCategorizer(R);for(let q=null;;){if(R==(v?A.to:A.from)){R==S.head&&A.number!=(v?T.doc.lines:1)&&(R+=v?1:-1);break}let M=findClusterBreak(A.text,R-A.from,v)+A.from,D=A.text.slice(Math.min(R,M)-A.from,Math.max(R,M)-A.from),L=k(D);if(q!=null&&L!=q)break;(D!=" "||R!=S.head)&&(q=L),R=M}return R}),deleteGroupBackward=_=>deleteByGroup(_,!1),deleteGroupForward=_=>deleteByGroup(_,!0),deleteToLineEnd=_=>deleteBy(_,v=>{let S=_.lineBlockAt(v.head).to;return v.head<S?S:Math.min(_.state.doc.length,v.head+1)}),deleteLineBoundaryBackward=_=>deleteBy(_,v=>{let S=_.moveToLineBoundary(v,!1).head;return v.head>S?S:Math.max(0,v.head-1)}),deleteLineBoundaryForward=_=>deleteBy(_,v=>{let S=_.moveToLineBoundary(v,!0).head;return v.head<S?S:Math.min(_.state.doc.length,v.head+1)}),splitLine=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=_.changeByRange(R=>({changes:{from:R.from,to:R.to,insert:Text.of(["",""])},range:EditorSelection.cursor(R.from)}));return v(_.update(S,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=_.changeByRange(R=>{if(!R.empty||R.from==0||R.from==_.doc.length)return{range:R};let T=R.from,A=_.doc.lineAt(T),k=T==A.from?T-1:findClusterBreak(A.text,T-A.from,!1)+A.from,q=T==A.to?T+1:findClusterBreak(A.text,T-A.from,!0)+A.from;return{changes:{from:k,to:q,insert:_.doc.slice(T,q).append(_.doc.slice(k,T))},range:EditorSelection.cursor(q)}});return S.changes.empty?!1:(v(_.update(S,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(_){let v=[],S=-1;for(let R of _.selection.ranges){let T=_.doc.lineAt(R.from),A=_.doc.lineAt(R.to);if(!R.empty&&R.to==A.from&&(A=_.doc.lineAt(R.to-1)),S>=T.number){let k=v[v.length-1];k.to=A.to,k.ranges.push(R)}else v.push({from:T.from,to:A.to,ranges:[R]});S=A.number+1}return v}function moveLine(_,v,S){if(_.readOnly)return!1;let R=[],T=[];for(let A of selectedLineBlocks(_)){if(S?A.to==_.doc.length:A.from==0)continue;let k=_.doc.lineAt(S?A.to+1:A.from-1),q=k.length+1;if(S){R.push({from:A.to,to:k.to},{from:A.from,insert:k.text+_.lineBreak});for(let M of A.ranges)T.push(EditorSelection.range(Math.min(_.doc.length,M.anchor+q),Math.min(_.doc.length,M.head+q)))}else{R.push({from:k.from,to:A.from},{from:A.to,insert:_.lineBreak+k.text});for(let M of A.ranges)T.push(EditorSelection.range(M.anchor-q,M.head-q))}}return R.length?(v(_.update({changes:R,scrollIntoView:!0,selection:EditorSelection.create(T,_.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:_,dispatch:v})=>moveLine(_,v,!1),moveLineDown=({state:_,dispatch:v})=>moveLine(_,v,!0);function copyLine(_,v,S){if(_.readOnly)return!1;let R=[];for(let T of selectedLineBlocks(_))S?R.push({from:T.from,insert:_.doc.slice(T.from,T.to)+_.lineBreak}):R.push({from:T.to,insert:_.lineBreak+_.doc.slice(T.from,T.to)});return v(_.update({changes:R,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:_,dispatch:v})=>copyLine(_,v,!1),copyLineDown=({state:_,dispatch:v})=>copyLine(_,v,!0),deleteLine=_=>{if(_.state.readOnly)return!1;let{state:v}=_,S=v.changes(selectedLineBlocks(v).map(({from:T,to:A})=>(T>0?T--:A<v.doc.length&&A++,{from:T,to:A}))),R=updateSel(v.selection,T=>{let A;if(_.lineWrapping){let k=_.lineBlockAt(T.head),q=_.coordsAtPos(T.head,T.assoc||1);q&&(A=k.bottom+_.documentTop-q.bottom+_.defaultLineHeight/2)}return _.moveVertically(T,!0,A)}).map(S);return _.dispatch({changes:S,selection:R,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(_,v){if(/\(\)|\[\]|\{\}/.test(_.sliceDoc(v-1,v+1)))return{from:v,to:v};let S=syntaxTree(_).resolveInner(v),R=S.childBefore(v),T=S.childAfter(v),A;return R&&T&&R.to<=v&&T.from>=v&&(A=R.type.prop(NodeProp.closedBy))&&A.indexOf(T.name)>-1&&_.doc.lineAt(R.to).from==_.doc.lineAt(T.from).from&&!/\S/.test(_.sliceDoc(R.to,T.from))?{from:R.to,to:T.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(_){return({state:v,dispatch:S})=>{if(v.readOnly)return!1;let R=v.changeByRange(T=>{let{from:A,to:k}=T,q=v.doc.lineAt(A),M=!_&&A==k&&isBetweenBrackets(v,A);_&&(A=k=(k<=q.to?q:v.doc.lineAt(k)).to);let D=new IndentContext(v,{simulateBreak:A,simulateDoubleBreak:!!M}),L=getIndentation(D,A);for(L==null&&(L=countColumn(/^\s*/.exec(v.doc.lineAt(A).text)[0],v.tabSize));k<q.to&&/\s/.test(q.text[k-q.from]);)k++;M?{from:A,to:k}=M:A>q.from&&A<q.from+100&&!/\S/.test(q.text.slice(0,A))&&(A=q.from);let I=["",indentString(v,L)];return M&&I.push(indentString(v,D.lineIndent(q.from,-1))),{changes:{from:A,to:k,insert:Text.of(I)},range:EditorSelection.cursor(A+1+I[1].length)}});return S(v.update(R,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(_,v){let S=-1;return _.changeByRange(R=>{let T=[];for(let k=R.from;k<=R.to;){let q=_.doc.lineAt(k);q.number>S&&(R.empty||R.to>q.from)&&(v(q,T,R),S=q.number),k=q.to+1}let A=_.changes(T);return{changes:T,range:EditorSelection.range(A.mapPos(R.anchor,1),A.mapPos(R.head,1))}})}const indentSelection=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=Object.create(null),R=new IndentContext(_,{overrideIndentation:A=>{let k=S[A];return k??-1}}),T=changeBySelectedLine(_,(A,k,q)=>{let M=getIndentation(R,A.from);if(M==null)return;/\S/.test(A.text)||(M=0);let D=/^\s*/.exec(A.text)[0],L=indentString(_,M);(D!=L||q.from<A.from+D.length)&&(S[A.from]=M,k.push({from:A.from,to:A.from+D.length,insert:L}))});return T.changes.empty||v(_.update(T,{userEvent:"indent"})),!0},indentMore=({state:_,dispatch:v})=>_.readOnly?!1:(v(_.update(changeBySelectedLine(_,(S,R)=>{R.push({from:S.from,insert:_.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:_,dispatch:v})=>_.readOnly?!1:(v(_.update(changeBySelectedLine(_,(S,R)=>{let T=/^\s*/.exec(S.text)[0];if(!T)return;let A=countColumn(T,_.tabSize),k=0,q=indentString(_,Math.max(0,A-getIndentUnit(_)));for(;k<T.length&&k<q.length&&T.charCodeAt(k)==q.charCodeAt(k);)k++;R.push({from:S.from+k,to:S.from+T.length,insert:q.slice(k)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=_=>(_.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(_=>({mac:_.key,run:_.run,shift:_.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess},basicNormalize=typeof String.prototype.normalize=="function"?_=>_.normalize("NFKD"):_=>_;class SearchCursor{constructor(v,S,R=0,T=v.length,A,k){this.test=k,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=v.iterRange(R,T),this.bufferStart=R,this.normalize=A?q=>A(basicNormalize(q)):basicNormalize,this.query=this.normalize(S)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let v=this.peek();if(v<0)return this.done=!0,this;let S=fromCodePoint(v),R=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(v);let T=this.normalize(S);if(T.length)for(let A=0,k=R;;A++){let q=T.charCodeAt(A),M=this.match(q,k,this.bufferPos+this.bufferStart);if(A==T.length-1){if(M)return this.value=M,this;break}k==R&&A<S.length&&S.charCodeAt(A)==q&&k++}}}match(v,S,R){let T=null;for(let A=0;A<this.matches.length;A+=2){let k=this.matches[A],q=!1;this.query.charCodeAt(k)==v&&(k==this.query.length-1?T={from:this.matches[A+1],to:R}:(this.matches[A]++,q=!0)),q||(this.matches.splice(A,2),A-=2)}return this.query.charCodeAt(0)==v&&(this.query.length==1?T={from:S,to:R}:this.matches.push(1,S)),T&&this.test&&!this.test(T.from,T.to,this.buffer,this.bufferStart)&&(T=null),T}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(v,S,R,T=0,A=v.length){if(this.text=v,this.to=A,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(S))return new MultilineRegExpCursor(v,S,R,T,A);this.re=new RegExp(S,baseFlags+(R?.ignoreCase?"i":"")),this.test=R?.test,this.iter=v.iter();let k=v.lineAt(T);this.curLineStart=k.from,this.matchPos=toCharEnd(v,T),this.getLine(this.curLineStart)}getLine(v){this.iter.next(v),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let v=this.matchPos-this.curLineStart;;){this.re.lastIndex=v;let S=this.matchPos<=this.to&&this.re.exec(this.curLine);if(S){let R=this.curLineStart+S.index,T=R+S[0].length;if(this.matchPos=toCharEnd(this.text,T+(R==T?1:0)),R==this.curLineStart+this.curLine.length&&this.nextLine(),(R<T||R>this.value.to)&&(!this.test||this.test(R,T,S)))return this.value={from:R,to:T,match:S},this;v=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),v=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(v,S){this.from=v,this.text=S}get to(){return this.from+this.text.length}static get(v,S,R){let T=flattened.get(v);if(!T||T.from>=R||T.to<=S){let q=new FlattenedDoc(S,v.sliceString(S,R));return flattened.set(v,q),q}if(T.from==S&&T.to==R)return T;let{text:A,from:k}=T;return k>S&&(A=v.sliceString(S,k)+A,k=S),T.to<R&&(A+=v.sliceString(T.to,R)),flattened.set(v,new FlattenedDoc(k,A)),new FlattenedDoc(S,A.slice(S-k,R-k))}}class MultilineRegExpCursor{constructor(v,S,R,T,A){this.text=v,this.to=A,this.done=!1,this.value=empty,this.matchPos=toCharEnd(v,T),this.re=new RegExp(S,baseFlags+(R?.ignoreCase?"i":"")),this.test=R?.test,this.flat=FlattenedDoc.get(v,T,this.chunkEnd(T+5e3))}chunkEnd(v){return v>=this.to?this.to:this.text.lineAt(v).to}next(){for(;;){let v=this.re.lastIndex=this.matchPos-this.flat.from,S=this.re.exec(this.flat.text);if(S&&!S[0]&&S.index==v&&(this.re.lastIndex=v+1,S=this.re.exec(this.flat.text)),S){let R=this.flat.from+S.index,T=R+S[0].length;if((this.flat.to>=this.to||S.index+S[0].length<=this.flat.text.length-10)&&(!this.test||this.test(R,T,S)))return this.value={from:R,to:T,match:S},this.matchPos=toCharEnd(this.text,T+(R==T?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(_){try{return new RegExp(_,baseFlags),!0}catch{return!1}}function toCharEnd(_,v){if(v>=_.length)return v;let S=_.lineAt(v),R;for(;v<S.to&&(R=S.text.charCodeAt(v-S.from))>=56320&&R<57344;)v++;return v}function createLineDialog(_){let v=String(_.state.doc.lineAt(_.state.selection.main.head).number),S=crelt("input",{class:"cm-textfield",name:"line",value:v}),R=crelt("form",{class:"cm-gotoLine",onkeydown:A=>{A.keyCode==27?(A.preventDefault(),_.dispatch({effects:dialogEffect.of(!1)}),_.focus()):A.keyCode==13&&(A.preventDefault(),T())},onsubmit:A=>{A.preventDefault(),T()}},crelt("label",_.state.phrase("Go to line"),": ",S)," ",crelt("button",{class:"cm-button",type:"submit"},_.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{_.dispatch({effects:dialogEffect.of(!1)}),_.focus()},"aria-label":_.state.phrase("close"),type:"button"},[""]));function T(){let A=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(S.value);if(!A)return;let{state:k}=_,q=k.doc.lineAt(k.selection.main.head),[,M,D,L,I]=A,N=L?+L.slice(1):0,F=D?+D:q.number;if(D&&I){let V=F/100;M&&(V=V*(M=="-"?-1:1)+q.number/k.doc.lines),F=Math.round(k.doc.lines*V)}else D&&M&&(F=F*(M=="-"?-1:1)+q.number);let H=k.doc.line(Math.max(1,Math.min(k.doc.lines,F))),G=EditorSelection.cursor(H.from+Math.max(0,Math.min(N,H.length)));_.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(G.from,{y:"center"})],selection:G}),_.focus()}return{dom:R}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(_,v){for(let S of v.effects)S.is(dialogEffect)&&(_=S.value);return _},provide:_=>showPanel.from(_,v=>v?createLineDialog:null)}),gotoLine=_=>{let v=getPanel(_,createLineDialog);if(!v){let S=[dialogEffect.of(!0)];_.state.field(dialogField,!1)==null&&S.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),_.dispatch({effects:S}),v=getPanel(_,createLineDialog)}return v&&v.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(_){return combineConfig(_,defaultHighlightOptions,{highlightWordAroundCursor:(v,S)=>v||S,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(_){return[defaultTheme,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(_,v,S,R){return(S==0||_(v.sliceDoc(S-1,S))!=CharCategory.Word)&&(R==v.doc.length||_(v.sliceDoc(R,R+1))!=CharCategory.Word)}function insideWord(_,v,S,R){return _(v.sliceDoc(S,S+1))==CharCategory.Word&&_(v.sliceDoc(R-1,R))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.selectionSet||_.docChanged||_.viewportChanged)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let v=_.state.facet(highlightConfig),{state:S}=_,R=S.selection;if(R.ranges.length>1)return Decoration.none;let T=R.main,A,k=null;if(T.empty){if(!v.highlightWordAroundCursor)return Decoration.none;let M=S.wordAt(T.head);if(!M)return Decoration.none;k=S.charCategorizer(T.head),A=S.sliceDoc(M.from,M.to)}else{let M=T.to-T.from;if(M<v.minSelectionLength||M>200)return Decoration.none;if(v.wholeWords){if(A=S.sliceDoc(T.from,T.to),k=S.charCategorizer(T.head),!(insideWordBoundaries(k,S,T.from,T.to)&&insideWord(k,S,T.from,T.to)))return Decoration.none}else if(A=S.sliceDoc(T.from,T.to),!A)return Decoration.none}let q=[];for(let M of _.visibleRanges){let D=new SearchCursor(S.doc,A,M.from,M.to);for(;!D.next().done;){let{from:L,to:I}=D.value;if((!k||insideWordBoundaries(k,S,L,I))&&(T.empty&&L<=T.from&&I>=T.to?q.push(mainMatchDeco.range(L,I)):(L>=T.to||I<=T.from)&&q.push(matchDeco.range(L,I)),q.length>v.maxMatches))return Decoration.none}}return Decoration.set(q)}},{decorations:_=>_.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:_,dispatch:v})=>{let{selection:S}=_,R=EditorSelection.create(S.ranges.map(T=>_.wordAt(T.head)||EditorSelection.cursor(T.head)),S.mainIndex);return R.eq(S)?!1:(v(_.update({selection:R})),!0)};function findNextOccurrence(_,v){let{main:S,ranges:R}=_.selection,T=_.wordAt(S.head),A=T&&T.from==S.from&&T.to==S.to;for(let k=!1,q=new SearchCursor(_.doc,v,R[R.length-1].to);;)if(q.next(),q.done){if(k)return null;q=new SearchCursor(_.doc,v,0,Math.max(0,R[R.length-1].from-1)),k=!0}else{if(k&&R.some(M=>M.from==q.value.from))continue;if(A){let M=_.wordAt(q.value.from);if(!M||M.from!=q.value.from||M.to!=q.value.to)continue}return q.value}}const selectNextOccurrence=({state:_,dispatch:v})=>{let{ranges:S}=_.selection;if(S.some(A=>A.from===A.to))return selectWord({state:_,dispatch:v});let R=_.sliceDoc(S[0].from,S[0].to);if(_.selection.ranges.some(A=>_.sliceDoc(A.from,A.to)!=R))return!1;let T=findNextOccurrence(_,R);return T?(v(_.update({selection:_.selection.addRange(EditorSelection.range(T.from,T.to),!1),effects:EditorView.scrollIntoView(T.to)})),!0):!1},searchConfigFacet=Facet.define({combine(_){return combineConfig(_,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:v=>new SearchPanel(v),scrollToMatch:v=>EditorView.scrollIntoView(v)})}});class SearchQuery{constructor(v){this.search=v.search,this.caseSensitive=!!v.caseSensitive,this.literal=!!v.literal,this.regexp=!!v.regexp,this.replace=v.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!v.wholeWord}unquote(v){return this.literal?v:v.replace(/\\([nrt\\])/g,(S,R)=>R=="n"?`
`:R=="r"?"\r":R=="t"?"	":"\\")}eq(v){return this.search==v.search&&this.replace==v.replace&&this.caseSensitive==v.caseSensitive&&this.regexp==v.regexp&&this.wholeWord==v.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(v,S=0,R){let T=v.doc?v:EditorState.create({doc:v});return R==null&&(R=T.doc.length),this.regexp?regexpCursor(this,T,S,R):stringCursor(this,T,S,R)}}class QueryType{constructor(v){this.spec=v}}function stringCursor(_,v,S,R){return new SearchCursor(v.doc,_.unquoted,S,R,_.caseSensitive?void 0:T=>T.toLowerCase(),_.wholeWord?stringWordTest(v.doc,v.charCategorizer(v.selection.main.head)):void 0)}function stringWordTest(_,v){return(S,R,T,A)=>((A>S||A+T.length<R)&&(A=Math.max(0,S-2),T=_.sliceString(A,Math.min(_.length,R+2))),(v(charBefore(T,S-A))!=CharCategory.Word||v(charAfter(T,S-A))!=CharCategory.Word)&&(v(charAfter(T,R-A))!=CharCategory.Word||v(charBefore(T,R-A))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(v){super(v)}nextMatch(v,S,R){let T=stringCursor(this.spec,v,R,v.doc.length).nextOverlapping();if(T.done){let A=Math.min(v.doc.length,S+this.spec.unquoted.length);T=stringCursor(this.spec,v,0,A).nextOverlapping()}return T.done||T.value.from==S&&T.value.to==R?null:T.value}prevMatchInRange(v,S,R){for(let T=R;;){let A=Math.max(S,T-1e4-this.spec.unquoted.length),k=stringCursor(this.spec,v,A,T),q=null;for(;!k.nextOverlapping().done;)q=k.value;if(q)return q;if(A==S)return null;T-=1e4}}prevMatch(v,S,R){let T=this.prevMatchInRange(v,0,S);return T||(T=this.prevMatchInRange(v,Math.max(0,R-this.spec.unquoted.length),v.doc.length)),T&&(T.from!=S||T.to!=R)?T:null}getReplacement(v){return this.spec.unquote(this.spec.replace)}matchAll(v,S){let R=stringCursor(this.spec,v,0,v.doc.length),T=[];for(;!R.next().done;){if(T.length>=S)return null;T.push(R.value)}return T}highlight(v,S,R,T){let A=stringCursor(this.spec,v,Math.max(0,S-this.spec.unquoted.length),Math.min(R+this.spec.unquoted.length,v.doc.length));for(;!A.next().done;)T(A.value.from,A.value.to)}}function regexpCursor(_,v,S,R){return new RegExpCursor(v.doc,_.search,{ignoreCase:!_.caseSensitive,test:_.wholeWord?regexpWordTest(v.charCategorizer(v.selection.main.head)):void 0},S,R)}function charBefore(_,v){return _.slice(findClusterBreak(_,v,!1),v)}function charAfter(_,v){return _.slice(v,findClusterBreak(_,v))}function regexpWordTest(_){return(v,S,R)=>!R[0].length||(_(charBefore(R.input,R.index))!=CharCategory.Word||_(charAfter(R.input,R.index))!=CharCategory.Word)&&(_(charAfter(R.input,R.index+R[0].length))!=CharCategory.Word||_(charBefore(R.input,R.index+R[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(v,S,R){let T=regexpCursor(this.spec,v,R,v.doc.length).next();return T.done&&(T=regexpCursor(this.spec,v,0,S).next()),T.done?null:T.value}prevMatchInRange(v,S,R){for(let T=1;;T++){let A=Math.max(S,R-T*1e4),k=regexpCursor(this.spec,v,A,R),q=null;for(;!k.next().done;)q=k.value;if(q&&(A==S||q.from>A+10))return q;if(A==S)return null}}prevMatch(v,S,R){return this.prevMatchInRange(v,0,S)||this.prevMatchInRange(v,R,v.doc.length)}getReplacement(v){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(S,R)=>{if(R=="&")return v.match[0];if(R=="$")return"$";for(let T=R.length;T>0;T--){let A=+R.slice(0,T);if(A>0&&A<v.match.length)return v.match[A]+R.slice(T)}return S})}matchAll(v,S){let R=regexpCursor(this.spec,v,0,v.doc.length),T=[];for(;!R.next().done;){if(T.length>=S)return null;T.push(R.value)}return T}highlight(v,S,R,T){let A=regexpCursor(this.spec,v,Math.max(0,S-250),Math.min(R+250,v.doc.length));for(;!A.next().done;)T(A.value.from,A.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(_){return new SearchState(defaultQuery(_).create(),null)},update(_,v){for(let S of v.effects)S.is(setSearchQuery)?_=new SearchState(S.value.create(),_.panel):S.is(togglePanel$1)&&(_=new SearchState(_.query,S.value?createSearchPanel:null));return _},provide:_=>showPanel.from(_,v=>v.panel)});class SearchState{constructor(v,S){this.query=v,this.panel=S}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=this.highlight(_.state.field(searchState))}update(_){let v=_.state.field(searchState);(v!=_.startState.field(searchState)||_.docChanged||_.selectionSet||_.viewportChanged)&&(this.decorations=this.highlight(v))}highlight({query:_,panel:v}){if(!v||!_.spec.valid)return Decoration.none;let{view:S}=this,R=new RangeSetBuilder;for(let T=0,A=S.visibleRanges,k=A.length;T<k;T++){let{from:q,to:M}=A[T];for(;T<k-1&&M>A[T+1].from-500;)M=A[++T].to;_.highlight(S.state,q,M,(D,L)=>{let I=S.state.selection.ranges.some(N=>N.from==D&&N.to==L);R.add(D,L,I?selectedMatchMark:matchMark)})}return R.finish()}},{decorations:_=>_.decorations});function searchCommand(_){return v=>{let S=v.state.field(searchState,!1);return S&&S.query.spec.valid?_(v,S):openSearchPanel(v)}}const findNext=searchCommand((_,{query:v})=>{let{to:S}=_.state.selection.main,R=v.nextMatch(_.state,S,S);if(!R)return!1;let T=EditorSelection.single(R.from,R.to),A=_.state.facet(searchConfigFacet);return _.dispatch({selection:T,effects:[announceMatch(_,R),A.scrollToMatch(T.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),findPrevious=searchCommand((_,{query:v})=>{let{state:S}=_,{from:R}=S.selection.main,T=v.prevMatch(S,R,R);if(!T)return!1;let A=EditorSelection.single(T.from,T.to),k=_.state.facet(searchConfigFacet);return _.dispatch({selection:A,effects:[announceMatch(_,T),k.scrollToMatch(A.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),selectMatches=searchCommand((_,{query:v})=>{let S=v.matchAll(_.state,1e3);return!S||!S.length?!1:(_.dispatch({selection:EditorSelection.create(S.map(R=>EditorSelection.range(R.from,R.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:_,dispatch:v})=>{let S=_.selection;if(S.ranges.length>1||S.main.empty)return!1;let{from:R,to:T}=S.main,A=[],k=0;for(let q=new SearchCursor(_.doc,_.sliceDoc(R,T));!q.next().done;){if(A.length>1e3)return!1;q.value.from==R&&(k=A.length),A.push(EditorSelection.range(q.value.from,q.value.to))}return v(_.update({selection:EditorSelection.create(A,k),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((_,{query:v})=>{let{state:S}=_,{from:R,to:T}=S.selection.main;if(S.readOnly)return!1;let A=v.nextMatch(S,R,R);if(!A)return!1;let k=A,q=[],M,D,L=[];k.from==R&&k.to==T&&(D=S.toText(v.getReplacement(k)),q.push({from:k.from,to:k.to,insert:D}),k=v.nextMatch(S,k.from,k.to),L.push(EditorView.announce.of(S.phrase("replaced match on line $",S.doc.lineAt(R).number)+".")));let I=_.state.changes(q);return k&&(M=EditorSelection.single(k.from,k.to).map(I),L.push(announceMatch(_,k)),L.push(S.facet(searchConfigFacet).scrollToMatch(M.main,_))),_.dispatch({changes:I,selection:M,effects:L,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((_,{query:v})=>{if(_.state.readOnly)return!1;let S=v.matchAll(_.state,1e9).map(T=>{let{from:A,to:k}=T;return{from:A,to:k,insert:v.getReplacement(T)}});if(!S.length)return!1;let R=_.state.phrase("replaced $ matches",S.length)+".";return _.dispatch({changes:S,effects:EditorView.announce.of(R),userEvent:"input.replace.all"}),!0});function createSearchPanel(_){return _.state.facet(searchConfigFacet).createPanel(_)}function defaultQuery(_,v){var S,R,T,A,k;let q=_.selection.main,M=q.empty||q.to>q.from+100?"":_.sliceDoc(q.from,q.to);if(v&&!M)return v;let D=_.facet(searchConfigFacet);return new SearchQuery({search:((S=v?.literal)!==null&&S!==void 0?S:D.literal)?M:M.replace(/\n/g,"\\n"),caseSensitive:(R=v?.caseSensitive)!==null&&R!==void 0?R:D.caseSensitive,literal:(T=v?.literal)!==null&&T!==void 0?T:D.literal,regexp:(A=v?.regexp)!==null&&A!==void 0?A:D.regexp,wholeWord:(k=v?.wholeWord)!==null&&k!==void 0?k:D.wholeWord})}function getSearchInput(_){let v=getPanel(_,createSearchPanel);return v&&v.dom.querySelector("[main-field]")}function selectSearchInput(_){let v=getSearchInput(_);v&&v==_.root.activeElement&&v.select()}const openSearchPanel=_=>{let v=_.state.field(searchState,!1);if(v&&v.panel){let S=getSearchInput(_);if(S&&S!=_.root.activeElement){let R=defaultQuery(_.state,v.query.spec);R.valid&&_.dispatch({effects:setSearchQuery.of(R)}),S.focus(),S.select()}}else _.dispatch({effects:[togglePanel$1.of(!0),v?setSearchQuery.of(defaultQuery(_.state,v.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=_=>{let v=_.state.field(searchState,!1);if(!v||!v.panel)return!1;let S=getPanel(_,createSearchPanel);return S&&S.dom.contains(_.root.activeElement)&&_.focus(),_.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(v){this.view=v;let S=this.query=v.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:S.search,placeholder:phrase(v,"Find"),"aria-label":phrase(v,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:S.replace,placeholder:phrase(v,"Replace"),"aria-label":phrase(v,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:S.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:S.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:S.wholeWord,onchange:this.commit});function R(T,A,k){return crelt("button",{class:"cm-button",name:T,onclick:A,type:"button"},k)}this.dom=crelt("div",{onkeydown:T=>this.keydown(T),class:"cm-search"},[this.searchField,R("next",()=>findNext(v),[phrase(v,"next")]),R("prev",()=>findPrevious(v),[phrase(v,"previous")]),R("select",()=>selectMatches(v),[phrase(v,"all")]),crelt("label",null,[this.caseField,phrase(v,"match case")]),crelt("label",null,[this.reField,phrase(v,"regexp")]),crelt("label",null,[this.wordField,phrase(v,"by word")]),...v.state.readOnly?[]:[crelt("br"),this.replaceField,R("replace",()=>replaceNext(v),[phrase(v,"replace")]),R("replaceAll",()=>replaceAll(v),[phrase(v,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(v),"aria-label":phrase(v,"close"),type:"button"},[""])])}commit(){let v=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});v.eq(this.query)||(this.query=v,this.view.dispatch({effects:setSearchQuery.of(v)}))}keydown(v){runScopeHandlers(this.view,v,"search-panel")?v.preventDefault():v.keyCode==13&&v.target==this.searchField?(v.preventDefault(),(v.shiftKey?findPrevious:findNext)(this.view)):v.keyCode==13&&v.target==this.replaceField&&(v.preventDefault(),replaceNext(this.view))}update(v){for(let S of v.transactions)for(let R of S.effects)R.is(setSearchQuery)&&!R.value.eq(this.query)&&this.setQuery(R.value)}setQuery(v){this.query=v,this.searchField.value=v.search,this.replaceField.value=v.replace,this.caseField.checked=v.caseSensitive,this.reField.checked=v.regexp,this.wordField.checked=v.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(_,v){return _.state.phrase(v)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(_,{from:v,to:S}){let R=_.state.doc.lineAt(v),T=_.state.doc.lineAt(S).to,A=Math.max(R.from,v-AnnounceMargin),k=Math.min(T,S+AnnounceMargin),q=_.state.sliceDoc(A,k);if(A!=R.from){for(let M=0;M<AnnounceMargin;M++)if(!Break.test(q[M+1])&&Break.test(q[M])){q=q.slice(M);break}}if(k!=T){for(let M=q.length-1;M>q.length-AnnounceMargin;M--)if(!Break.test(q[M-1])&&Break.test(q[M])){q=q.slice(0,M);break}}return EditorView.announce.of(`${_.state.phrase("current match")}. ${q} ${_.state.phrase("on line")} ${R.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(v,S,R,T){this.state=v,this.pos=S,this.explicit=R,this.view=T,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(v){let S=syntaxTree(this.state).resolveInner(this.pos,-1);for(;S&&v.indexOf(S.name)<0;)S=S.parent;return S?{from:S.from,to:this.pos,text:this.state.sliceDoc(S.from,this.pos),type:S.type}:null}matchBefore(v){let S=this.state.doc.lineAt(this.pos),R=Math.max(S.from,this.pos-250),T=S.text.slice(R-S.from,this.pos-S.from),A=T.search(ensureAnchor(v,!1));return A<0?null:{from:R+A,to:this.pos,text:T.slice(A)}}get aborted(){return this.abortListeners==null}addEventListener(v,S,R){v=="abort"&&this.abortListeners&&(this.abortListeners.push(S),R&&R.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(_){let v=Object.keys(_).join(""),S=/\w/.test(v);return S&&(v=v.replace(/\w/g,"")),`[${S?"\\w":""}${v.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(_){let v=Object.create(null),S=Object.create(null);for(let{label:T}of _){v[T[0]]=!0;for(let A=1;A<T.length;A++)S[T[A]]=!0}let R=toSet(v)+toSet(S)+"*$";return[new RegExp("^"+R),new RegExp(R)]}function completeFromList(_){let v=_.map(T=>typeof T=="string"?{label:T}:T),[S,R]=v.every(T=>/^\w+$/.test(T.label))?[/\w*$/,/\w+$/]:prefixMatch(v);return T=>{let A=T.matchBefore(R);return A||T.explicit?{from:A?A.from:T.pos,options:v,validFor:S}:null}}class Option{constructor(v,S,R,T){this.completion=v,this.source=S,this.match=R,this.score=T}}function cur(_){return _.selection.main.from}function ensureAnchor(_,v){var S;let{source:R}=_,T=v&&R[0]!="^",A=R[R.length-1]!="$";return!T&&!A?_:new RegExp(`${T?"^":""}(?:${R})${A?"$":""}`,(S=_.flags)!==null&&S!==void 0?S:_.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(_,v,S,R){let{main:T}=_.selection,A=S-T.from,k=R-T.from;return{..._.changeByRange(q=>{if(q!=T&&S!=R&&_.sliceDoc(q.from+A,q.from+k)!=_.sliceDoc(S,R))return{range:q};let M=_.toText(v);return{changes:{from:q.from+A,to:R==T.from?q.to:q.from+k,insert:M},range:EditorSelection.cursor(q.from+A+M.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(_){if(!Array.isArray(_))return _;let v=SourceCache.get(_);return v||SourceCache.set(_,v=completeFromList(_)),v}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(v){this.pattern=v,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let S=0;S<v.length;){let R=codePointAt(v,S),T=codePointSize(R);this.chars.push(R);let A=v.slice(S,S+T),k=A.toUpperCase();this.folded.push(codePointAt(k==A?A.toLowerCase():k,0)),S+=T}this.astral=v.length!=this.chars.length}ret(v,S){return this.score=v,this.matched=S,this}match(v){if(this.pattern.length==0)return this.ret(-100,[]);if(v.length<this.pattern.length)return null;let{chars:S,folded:R,any:T,precise:A,byWord:k}=this;if(S.length==1){let W=codePointAt(v,0),X=codePointSize(W),J=X==v.length?0:-100;if(W!=S[0])if(W==R[0])J+=-200;else return null;return this.ret(J,[0,X])}let q=v.indexOf(this.pattern);if(q==0)return this.ret(v.length==this.pattern.length?0:-100,[0,this.pattern.length]);let M=S.length,D=0;if(q<0){for(let W=0,X=Math.min(v.length,200);W<X&&D<M;){let J=codePointAt(v,W);(J==S[D]||J==R[D])&&(T[D++]=W),W+=codePointSize(J)}if(D<M)return null}let L=0,I=0,N=!1,F=0,H=-1,G=-1,V=/[a-z]/.test(v),j=!0;for(let W=0,X=Math.min(v.length,200),J=0;W<X&&I<M;){let te=codePointAt(v,W);q<0&&(L<M&&te==S[L]&&(A[L++]=W),F<M&&(te==S[F]||te==R[F]?(F==0&&(H=W),G=W+1,F++):F=0));let re,ee=te<255?te>=48&&te<=57||te>=97&&te<=122?2:te>=65&&te<=90?1:0:(re=fromCodePoint(te))!=re.toLowerCase()?1:re!=re.toUpperCase()?2:0;(!W||ee==1&&V||J==0&&ee!=0)&&(S[I]==te||R[I]==te&&(N=!0)?k[I++]=W:k.length&&(j=!1)),J=ee,W+=codePointSize(te)}return I==M&&k[0]==0&&j?this.result(-100+(N?-200:0),k,v):F==M&&H==0?this.ret(-200-v.length+(G==v.length?0:-100),[0,G]):q>-1?this.ret(-700-v.length,[q,q+this.pattern.length]):F==M?this.ret(-900-v.length,[H,G]):I==M?this.result(-100+(N?-200:0)+-700+(j?0:-1100),k,v):S.length==2?null:this.result((T[0]?-700:0)+-200+-1100,T,v)}result(v,S,R){let T=[],A=0;for(let k of S){let q=k+(this.astral?codePointSize(codePointAt(R,k)):1);A&&T[A-1]==k?T[A-1]=q:(T[A++]=k,T[A++]=q)}return this.ret(v-R.length,T)}}class StrictMatcher{constructor(v){this.pattern=v,this.matched=[],this.score=0,this.folded=v.toLowerCase()}match(v){if(v.length<this.pattern.length)return null;let S=v.slice(0,this.pattern.length),R=S==this.pattern?0:S.toLowerCase()==this.folded?-200:null;return R==null?null:(this.matched=[0,S.length],this.score=R+(v.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(_){return combineConfig(_,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(v,S)=>(v.sortText||v.label).localeCompare(S.sortText||S.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(v,S)=>v&&S,closeOnBlur:(v,S)=>v&&S,icons:(v,S)=>v&&S,tooltipClass:(v,S)=>R=>joinClass(v(R),S(R)),optionClass:(v,S)=>R=>joinClass(v(R),S(R)),addToOptions:(v,S)=>v.concat(S),filterStrict:(v,S)=>v||S})}});function joinClass(_,v){return _?v?_+" "+v:_:v}function defaultPositionInfo(_,v,S,R,T,A){let k=_.textDirection==Direction.RTL,q=k,M=!1,D="top",L,I,N=v.left-T.left,F=T.right-v.right,H=R.right-R.left,G=R.bottom-R.top;if(q&&N<Math.min(H,F)?q=!1:!q&&F<Math.min(H,N)&&(q=!0),H<=(q?N:F))L=Math.max(T.top,Math.min(S.top,T.bottom-G))-v.top,I=Math.min(400,q?N:F);else{M=!0,I=Math.min(400,(k?v.right:T.right-v.left)-30);let W=T.bottom-v.bottom;W>=G||W>v.top?L=S.bottom-v.top:(D="bottom",L=v.bottom-S.top)}let V=(v.bottom-v.top)/A.offsetHeight,j=(v.right-v.left)/A.offsetWidth;return{style:`${D}: ${L/V}px; max-width: ${I/j}px`,class:"cm-completionInfo-"+(M?k?"left-narrow":"right-narrow":q?"left":"right")}}function optionContent(_){let v=_.addToOptions.slice();return _.icons&&v.push({render(S){let R=document.createElement("div");return R.classList.add("cm-completionIcon"),S.type&&R.classList.add(...S.type.split(/\s+/g).map(T=>"cm-completionIcon-"+T)),R.setAttribute("aria-hidden","true"),R},position:20}),v.push({render(S,R,T,A){let k=document.createElement("span");k.className="cm-completionLabel";let q=S.displayLabel||S.label,M=0;for(let D=0;D<A.length;){let L=A[D++],I=A[D++];L>M&&k.appendChild(document.createTextNode(q.slice(M,L)));let N=k.appendChild(document.createElement("span"));N.appendChild(document.createTextNode(q.slice(L,I))),N.className="cm-completionMatchedText",M=I}return M<q.length&&k.appendChild(document.createTextNode(q.slice(M))),k},position:50},{render(S){if(!S.detail)return null;let R=document.createElement("span");return R.className="cm-completionDetail",R.textContent=S.detail,R},position:80}),v.sort((S,R)=>S.position-R.position).map(S=>S.render)}function rangeAroundSelected(_,v,S){if(_<=S)return{from:0,to:_};if(v<0&&(v=0),v<=_>>1){let T=Math.floor(v/S);return{from:T*S,to:(T+1)*S}}let R=Math.floor((_-v)/S);return{from:_-(R+1)*S,to:_-R*S}}class CompletionTooltip{constructor(v,S,R){this.view=v,this.stateField=S,this.applyCompletion=R,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:M=>this.placeInfo(M),key:this},this.space=null,this.currentClass="";let T=v.state.field(S),{options:A,selected:k}=T.open,q=v.state.facet(completionConfig);this.optionContent=optionContent(q),this.optionClass=q.optionClass,this.tooltipClass=q.tooltipClass,this.range=rangeAroundSelected(A.length,k,q.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(v.state),this.dom.addEventListener("mousedown",M=>{let{options:D}=v.state.field(S).open;for(let L=M.target,I;L&&L!=this.dom;L=L.parentNode)if(L.nodeName=="LI"&&(I=/-(\d+)$/.exec(L.id))&&+I[1]<D.length){this.applyCompletion(v,D[+I[1]]),M.preventDefault();return}}),this.dom.addEventListener("focusout",M=>{let D=v.state.field(this.stateField,!1);D&&D.tooltip&&v.state.facet(completionConfig).closeOnBlur&&M.relatedTarget!=v.contentDOM&&v.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(A,T.id)}mount(){this.updateSel()}showOptions(v,S){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(v,S,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(v){var S;let R=v.state.field(this.stateField),T=v.startState.field(this.stateField);if(this.updateTooltipClass(v.state),R!=T){let{options:A,selected:k,disabled:q}=R.open;(!T.open||T.open.options!=A)&&(this.range=rangeAroundSelected(A.length,k,v.state.facet(completionConfig).maxRenderedOptions),this.showOptions(A,R.id)),this.updateSel(),q!=((S=T.open)===null||S===void 0?void 0:S.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!q)}}updateTooltipClass(v){let S=this.tooltipClass(v);if(S!=this.currentClass){for(let R of this.currentClass.split(" "))R&&this.dom.classList.remove(R);for(let R of S.split(" "))R&&this.dom.classList.add(R);this.currentClass=S}}positioned(v){this.space=v,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let v=this.view.state.field(this.stateField),S=v.open;(S.selected>-1&&S.selected<this.range.from||S.selected>=this.range.to)&&(this.range=rangeAroundSelected(S.options.length,S.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(S.options,v.id));let R=this.updateSelectedOption(S.selected);if(R){this.destroyInfo();let{completion:T}=S.options[S.selected],{info:A}=T;if(!A)return;let k=typeof A=="string"?document.createTextNode(A):A(T);if(!k)return;"then"in k?k.then(q=>{q&&this.view.state.field(this.stateField,!1)==v&&this.addInfoPane(q,T)}).catch(q=>logException(this.view.state,q,"completion info")):(this.addInfoPane(k,T),R.setAttribute("aria-describedby",this.info.id))}}addInfoPane(v,S){this.destroyInfo();let R=this.info=document.createElement("div");if(R.className="cm-tooltip cm-completionInfo",R.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),v.nodeType!=null)R.appendChild(v),this.infoDestroy=null;else{let{dom:T,destroy:A}=v;R.appendChild(T),this.infoDestroy=A||null}this.dom.appendChild(R),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(v){let S=null;for(let R=this.list.firstChild,T=this.range.from;R;R=R.nextSibling,T++)R.nodeName!="LI"||!R.id?T--:T==v?R.hasAttribute("aria-selected")||(R.setAttribute("aria-selected","true"),S=R):R.hasAttribute("aria-selected")&&(R.removeAttribute("aria-selected"),R.removeAttribute("aria-describedby"));return S&&scrollIntoView(this.list,S),S}measureInfo(){let v=this.dom.querySelector("[aria-selected]");if(!v||!this.info)return null;let S=this.dom.getBoundingClientRect(),R=this.info.getBoundingClientRect(),T=v.getBoundingClientRect(),A=this.space;if(!A){let k=this.dom.ownerDocument.documentElement;A={left:0,top:0,right:k.clientWidth,bottom:k.clientHeight}}return T.top>Math.min(A.bottom,S.bottom)-10||T.bottom<Math.max(A.top,S.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,S,T,R,A,this.dom)}placeInfo(v){this.info&&(v?(v.style&&(this.info.style.cssText=v.style),this.info.className="cm-tooltip cm-completionInfo "+(v.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(v,S,R){const T=document.createElement("ul");T.id=S,T.setAttribute("role","listbox"),T.setAttribute("aria-expanded","true"),T.setAttribute("aria-label",this.view.state.phrase("Completions")),T.addEventListener("mousedown",k=>{k.target==T&&k.preventDefault()});let A=null;for(let k=R.from;k<R.to;k++){let{completion:q,match:M}=v[k],{section:D}=q;if(D){let N=typeof D=="string"?D:D.name;if(N!=A&&(k>R.from||R.from==0))if(A=N,typeof D!="string"&&D.header)T.appendChild(D.header(D));else{let F=T.appendChild(document.createElement("completion-section"));F.textContent=N}}const L=T.appendChild(document.createElement("li"));L.id=S+"-"+k,L.setAttribute("role","option");let I=this.optionClass(q);I&&(L.className=I);for(let N of this.optionContent){let F=N(q,this.view.state,this.view,M);F&&L.appendChild(F)}}return R.from&&T.classList.add("cm-completionListIncompleteTop"),R.to<v.length&&T.classList.add("cm-completionListIncompleteBottom"),T}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(_,v){return S=>new CompletionTooltip(S,_,v)}function scrollIntoView(_,v){let S=_.getBoundingClientRect(),R=v.getBoundingClientRect(),T=S.height/_.offsetHeight;R.top<S.top?_.scrollTop-=(S.top-R.top)/T:R.bottom>S.bottom&&(_.scrollTop+=(R.bottom-S.bottom)/T)}function score(_){return(_.boost||0)*100+(_.apply?10:0)+(_.info?5:0)+(_.type?1:0)}function sortOptions(_,v){let S=[],R=null,T=null,A=L=>{S.push(L);let{section:I}=L.completion;if(I){R||(R=[]);let N=typeof I=="string"?I:I.name;R.some(F=>F.name==N)||R.push(typeof I=="string"?{name:N}:I)}},k=v.facet(completionConfig);for(let L of _)if(L.hasResult()){let I=L.result.getMatch;if(L.result.filter===!1)for(let N of L.result.options)A(new Option(N,L.source,I?I(N):[],1e9-S.length));else{let N=v.sliceDoc(L.from,L.to),F,H=k.filterStrict?new StrictMatcher(N):new FuzzyMatcher(N);for(let G of L.result.options)if(F=H.match(G.label)){let V=G.displayLabel?I?I(G,F.matched):[]:F.matched,j=F.score+(G.boost||0);if(A(new Option(G,L.source,V,j)),typeof G.section=="object"&&G.section.rank==="dynamic"){let{name:W}=G.section;T||(T=Object.create(null)),T[W]=Math.max(j,T[W]||-1e9)}}}}if(R){let L=Object.create(null),I=0,N=(F,H)=>(F.rank==="dynamic"&&H.rank==="dynamic"?T[H.name]-T[F.name]:0)||(typeof F.rank=="number"?F.rank:1e9)-(typeof H.rank=="number"?H.rank:1e9)||(F.name<H.name?-1:1);for(let F of R.sort(N))I-=1e5,L[F.name]=I;for(let F of S){let{section:H}=F.completion;H&&(F.score+=L[typeof H=="string"?H:H.name])}}let q=[],M=null,D=k.compareCompletions;for(let L of S.sort((I,N)=>N.score-I.score||D(I.completion,N.completion))){let I=L.completion;!M||M.label!=I.label||M.detail!=I.detail||M.type!=null&&I.type!=null&&M.type!=I.type||M.apply!=I.apply||M.boost!=I.boost?q.push(L):score(L.completion)>score(M)&&(q[q.length-1]=L),M=L.completion}return q}class CompletionDialog{constructor(v,S,R,T,A,k){this.options=v,this.attrs=S,this.tooltip=R,this.timestamp=T,this.selected=A,this.disabled=k}setSelected(v,S){return v==this.selected||v>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(S,v),this.tooltip,this.timestamp,v,this.disabled)}static build(v,S,R,T,A,k){if(T&&!k&&v.some(D=>D.isPending))return T.setDisabled();let q=sortOptions(v,S);if(!q.length)return T&&v.some(D=>D.isPending)?T.setDisabled():null;let M=S.facet(completionConfig).selectOnOpen?0:-1;if(T&&T.selected!=M&&T.selected!=-1){let D=T.options[T.selected].completion;for(let L=0;L<q.length;L++)if(q[L].completion==D){M=L;break}}return new CompletionDialog(q,makeAttrs(R,M),{pos:v.reduce((D,L)=>L.hasResult()?Math.min(D,L.from):D,1e8),create:createTooltip,above:A.aboveCursor},T?T.timestamp:Date.now(),M,!1)}map(v){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:v.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(v,S,R){this.active=v,this.id=S,this.open=R}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(v){let{state:S}=v,R=S.facet(completionConfig),A=(R.override||S.languageDataAt("autocomplete",cur(S)).map(asSource)).map(M=>(this.active.find(L=>L.source==M)||new ActiveSource(M,this.active.some(L=>L.state!=0)?1:0)).update(v,R));A.length==this.active.length&&A.every((M,D)=>M==this.active[D])&&(A=this.active);let k=this.open,q=v.effects.some(M=>M.is(setActiveEffect));k&&v.docChanged&&(k=k.map(v.changes)),v.selection||A.some(M=>M.hasResult()&&v.changes.touchesRange(M.from,M.to))||!sameResults(A,this.active)||q?k=CompletionDialog.build(A,S,this.id,k,R,q):k&&k.disabled&&!A.some(M=>M.isPending)&&(k=null),!k&&A.every(M=>!M.isPending)&&A.some(M=>M.hasResult())&&(A=A.map(M=>M.hasResult()?new ActiveSource(M.source,0):M));for(let M of v.effects)M.is(setSelectedEffect)&&(k=k&&k.setSelected(M.value,this.id));return A==this.active&&k==this.open?this:new CompletionState(A,this.id,k)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(_,v){if(_==v)return!0;for(let S=0,R=0;;){for(;S<_.length&&!_[S].hasResult();)S++;for(;R<v.length&&!v[R].hasResult();)R++;let T=S==_.length,A=R==v.length;if(T||A)return T==A;if(_[S++].result!=v[R++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(_,v){let S={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":_};return v>-1&&(S["aria-activedescendant"]=_+"-"+v),S}const none=[];function getUpdateType(_,v){if(_.isUserEvent("input.complete")){let R=_.annotation(pickedCompletion);if(R&&v.activateOnCompletion(R))return 12}let S=_.isUserEvent("input.type");return S&&v.activateOnTyping?5:S?1:_.isUserEvent("delete.backward")?2:_.selection?8:_.docChanged?16:0}class ActiveSource{constructor(v,S,R=!1){this.source=v,this.state=S,this.explicit=R}hasResult(){return!1}get isPending(){return this.state==1}update(v,S){let R=getUpdateType(v,S),T=this;(R&8||R&16&&this.touches(v))&&(T=new ActiveSource(T.source,0)),R&4&&T.state==0&&(T=new ActiveSource(this.source,1)),T=T.updateFor(v,R);for(let A of v.effects)if(A.is(startCompletionEffect))T=new ActiveSource(T.source,1,A.value);else if(A.is(closeCompletionEffect))T=new ActiveSource(T.source,0);else if(A.is(setActiveEffect))for(let k of A.value)k.source==T.source&&(T=k);return T}updateFor(v,S){return this.map(v.changes)}map(v){return this}touches(v){return v.changes.touchesRange(cur(v.state))}}class ActiveResult extends ActiveSource{constructor(v,S,R,T,A,k){super(v,3,S),this.limit=R,this.result=T,this.from=A,this.to=k}hasResult(){return!0}updateFor(v,S){var R;if(!(S&3))return this.map(v.changes);let T=this.result;T.map&&!v.changes.empty&&(T=T.map(T,v.changes));let A=v.changes.mapPos(this.from),k=v.changes.mapPos(this.to,1),q=cur(v.state);if(q>k||!T||S&2&&(cur(v.startState)==this.from||q<this.limit))return new ActiveSource(this.source,S&4?1:0);let M=v.changes.mapPos(this.limit);return checkValid(T.validFor,v.state,A,k)?new ActiveResult(this.source,this.explicit,M,T,A,k):T.update&&(T=T.update(T,A,k,new CompletionContext(v.state,q,!1)))?new ActiveResult(this.source,this.explicit,M,T,T.from,(R=T.to)!==null&&R!==void 0?R:cur(v.state)):new ActiveSource(this.source,1,this.explicit)}map(v){return v.empty?this:(this.result.map?this.result.map(this.result,v):this.result)?new ActiveResult(this.source,this.explicit,v.mapPos(this.limit),this.result,v.mapPos(this.from),v.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(v){return v.changes.touchesRange(this.from,this.to)}}function checkValid(_,v,S,R){if(!_)return!1;let T=v.sliceDoc(S,R);return typeof _=="function"?_(T,S,R,v):ensureAnchor(_,!0).test(T)}const setActiveEffect=StateEffect.define({map(_,v){return _.map(S=>S.map(v))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(_,v){return _.update(v)},provide:_=>[showTooltip.from(_,v=>v.tooltip),EditorView.contentAttributes.from(_,v=>v.attrs)]});function applyCompletion(_,v){const S=v.completion.apply||v.completion.label;let R=_.state.field(completionState).active.find(T=>T.source==v.source);return R instanceof ActiveResult?(typeof S=="string"?_.dispatch({...insertCompletionText(_.state,S,R.from,R.to),annotations:pickedCompletion.of(v.completion)}):S(_,v.completion,R.from,R.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(_,v="option"){return S=>{let R=S.state.field(completionState,!1);if(!R||!R.open||R.open.disabled||Date.now()-R.open.timestamp<S.state.facet(completionConfig).interactionDelay)return!1;let T=1,A;v=="page"&&(A=getTooltip(S,R.open.tooltip))&&(T=Math.max(2,Math.floor(A.dom.offsetHeight/A.dom.querySelector("li").offsetHeight)-1));let{length:k}=R.open.options,q=R.open.selected>-1?R.open.selected+T*(_?1:-1):_?0:k-1;return q<0?q=v=="page"?0:k-1:q>=k&&(q=v=="page"?k-1:0),S.dispatch({effects:setSelectedEffect.of(q)}),!0}}const acceptCompletion=_=>{let v=_.state.field(completionState,!1);return _.state.readOnly||!v||!v.open||v.open.selected<0||v.open.disabled||Date.now()-v.open.timestamp<_.state.facet(completionConfig).interactionDelay?!1:applyCompletion(_,v.open.options[v.open.selected])},startCompletion=_=>_.state.field(completionState,!1)?(_.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=_=>{let v=_.state.field(completionState,!1);return!v||!v.active.some(S=>S.state!=0)?!1:(_.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(v,S){this.active=v,this.context=S,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let v of _.state.field(completionState).active)v.isPending&&this.startQuery(v)}update(_){let v=_.state.field(completionState),S=_.state.facet(completionConfig);if(!_.selectionSet&&!_.docChanged&&_.startState.field(completionState)==v)return;let R=_.transactions.some(A=>{let k=getUpdateType(A,S);return k&8||(A.selection||A.docChanged)&&!(k&3)});for(let A=0;A<this.running.length;A++){let k=this.running[A];if(R||k.context.abortOnDocChange&&_.docChanged||k.updates.length+_.transactions.length>MaxUpdateCount&&Date.now()-k.time>MinAbortTime){for(let q of k.context.abortListeners)try{q()}catch(M){logException(this.view.state,M)}k.context.abortListeners=null,this.running.splice(A--,1)}else k.updates.push(..._.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),_.transactions.some(A=>A.effects.some(k=>k.is(startCompletionEffect)))&&(this.pendingStart=!0);let T=this.pendingStart?50:S.activateOnTypingDelay;if(this.debounceUpdate=v.active.some(A=>A.isPending&&!this.running.some(k=>k.active.source==A.source))?setTimeout(()=>this.startUpdate(),T):-1,this.composing!=0)for(let A of _.transactions)A.isUserEvent("input.type")?this.composing=2:this.composing==2&&A.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:_}=this.view,v=_.field(completionState);for(let S of v.active)S.isPending&&!this.running.some(R=>R.active.source==S.source)&&this.startQuery(S);this.running.length&&v.open&&v.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(_){let{state:v}=this.view,S=cur(v),R=new CompletionContext(v,S,_.explicit,this.view),T=new RunningQuery(_,R);this.running.push(T),Promise.resolve(_.source(R)).then(A=>{T.context.aborted||(T.done=A||null,this.scheduleAccept())},A=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,A)})}scheduleAccept(){this.running.every(_=>_.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var _;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let v=[],S=this.view.state.facet(completionConfig),R=this.view.state.field(completionState);for(let T=0;T<this.running.length;T++){let A=this.running[T];if(A.done===void 0)continue;if(this.running.splice(T--,1),A.done){let q=cur(A.updates.length?A.updates[0].startState:this.view.state),M=Math.min(q,A.done.from+(A.active.explicit?0:1)),D=new ActiveResult(A.active.source,A.active.explicit,M,A.done,A.done.from,(_=A.done.to)!==null&&_!==void 0?_:q);for(let L of A.updates)D=D.update(L,S);if(D.hasResult()){v.push(D);continue}}let k=R.active.find(q=>q.source==A.active.source);if(k&&k.isPending)if(A.done==null){let q=new ActiveSource(A.active.source,0);for(let M of A.updates)q=q.update(M,S);q.isPending||v.push(q)}else this.startQuery(k)}(v.length||R.open&&R.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(v)})}},{eventHandlers:{blur(_){let v=this.view.state.field(completionState,!1);if(v&&v.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let S=v.open&&getTooltip(this.view,v.open.tooltip);(!S||!S.dom.contains(_.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(_,v){let S=v.state.field(completionState,!1);if(!S||!S.open||S.open.disabled||S.open.selected<0||_.key.length>1||_.ctrlKey&&!(windows&&_.altKey)||_.metaKey)return!1;let R=S.open.options[S.open.selected],T=S.active.find(k=>k.source==R.source),A=R.completion.commitCharacters||T.result.commitCharacters;return A&&A.indexOf(_.key)>-1&&applyCompletion(v,R),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(_,v){let S=v.mapPos(_,-1,MapMode.TrackAfter);return S??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(_,v){if(_=_.map(v.changes),v.selection){let S=v.state.doc.lineAt(v.selection.main.head);_=_.update({filter:R=>R>=S.from&&R<=S.to})}for(let S of v.effects)S.is(closeBracketEffect)&&(_=_.update({add:[closedBracket.range(S.value,S.value+1)]}));return _}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(_){for(let v=0;v<definedClosing.length;v+=2)if(definedClosing.charCodeAt(v)==_)return definedClosing.charAt(v+1);return fromCodePoint(_<128?_:_+1)}function config(_,v){return _.languageDataAt("closeBrackets",v)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((_,v,S,R)=>{if((android?_.composing:_.compositionStarted)||_.state.readOnly)return!1;let T=_.state.selection.main;if(R.length>2||R.length==2&&codePointSize(codePointAt(R,0))==1||v!=T.from||S!=T.to)return!1;let A=insertBracket(_.state,R);return A?(_.dispatch(A),!0):!1}),deleteBracketPair=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let R=config(_,_.selection.main.head).brackets||defaults.brackets,T=null,A=_.changeByRange(k=>{if(k.empty){let q=prevChar(_.doc,k.head);for(let M of R)if(M==q&&nextChar(_.doc,k.head)==closing(codePointAt(M,0)))return{changes:{from:k.head-M.length,to:k.head+M.length},range:EditorSelection.cursor(k.head-M.length)}}return{range:T=k}});return T||v(_.update(A,{scrollIntoView:!0,userEvent:"delete.backward"})),!T},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(_,v){let S=config(_,_.selection.main.head),R=S.brackets||defaults.brackets;for(let T of R){let A=closing(codePointAt(T,0));if(v==T)return A==T?handleSame(_,T,R.indexOf(T+T+T)>-1,S):handleOpen(_,T,A,S.before||defaults.before);if(v==A&&closedBracketAt(_,_.selection.main.from))return handleClose(_,T,A)}return null}function closedBracketAt(_,v){let S=!1;return _.field(bracketState).between(0,_.doc.length,R=>{R==v&&(S=!0)}),S}function nextChar(_,v){let S=_.sliceString(v,v+2);return S.slice(0,codePointSize(codePointAt(S,0)))}function prevChar(_,v){let S=_.sliceString(v-2,v);return codePointSize(codePointAt(S,0))==S.length?S:S.slice(1)}function handleOpen(_,v,S,R){let T=null,A=_.changeByRange(k=>{if(!k.empty)return{changes:[{insert:v,from:k.from},{insert:S,from:k.to}],effects:closeBracketEffect.of(k.to+v.length),range:EditorSelection.range(k.anchor+v.length,k.head+v.length)};let q=nextChar(_.doc,k.head);return!q||/\s/.test(q)||R.indexOf(q)>-1?{changes:{insert:v+S,from:k.head},effects:closeBracketEffect.of(k.head+v.length),range:EditorSelection.cursor(k.head+v.length)}:{range:T=k}});return T?null:_.update(A,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(_,v,S){let R=null,T=_.changeByRange(A=>A.empty&&nextChar(_.doc,A.head)==S?{changes:{from:A.head,to:A.head+S.length,insert:S},range:EditorSelection.cursor(A.head+S.length)}:R={range:A});return R?null:_.update(T,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(_,v,S,R){let T=R.stringPrefixes||defaults.stringPrefixes,A=null,k=_.changeByRange(q=>{if(!q.empty)return{changes:[{insert:v,from:q.from},{insert:v,from:q.to}],effects:closeBracketEffect.of(q.to+v.length),range:EditorSelection.range(q.anchor+v.length,q.head+v.length)};let M=q.head,D=nextChar(_.doc,M),L;if(D==v){if(nodeStart(_,M))return{changes:{insert:v+v,from:M},effects:closeBracketEffect.of(M+v.length),range:EditorSelection.cursor(M+v.length)};if(closedBracketAt(_,M)){let N=S&&_.sliceDoc(M,M+v.length*3)==v+v+v?v+v+v:v;return{changes:{from:M,to:M+N.length,insert:N},range:EditorSelection.cursor(M+N.length)}}}else{if(S&&_.sliceDoc(M-2*v.length,M)==v+v&&(L=canStartStringAt(_,M-2*v.length,T))>-1&&nodeStart(_,L))return{changes:{insert:v+v+v+v,from:M},effects:closeBracketEffect.of(M+v.length),range:EditorSelection.cursor(M+v.length)};if(_.charCategorizer(M)(D)!=CharCategory.Word&&canStartStringAt(_,M,T)>-1&&!probablyInString(_,M,v,T))return{changes:{insert:v+v,from:M},effects:closeBracketEffect.of(M+v.length),range:EditorSelection.cursor(M+v.length)}}return{range:A=q}});return A?null:_.update(k,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(_,v){let S=syntaxTree(_).resolveInner(v+1);return S.parent&&S.from==v}function probablyInString(_,v,S,R){let T=syntaxTree(_).resolveInner(v,-1),A=R.reduce((k,q)=>Math.max(k,q.length),0);for(let k=0;k<5;k++){let q=_.sliceDoc(T.from,Math.min(T.to,T.from+S.length+A)),M=q.indexOf(S);if(!M||M>-1&&R.indexOf(q.slice(0,M))>-1){let L=T.firstChild;for(;L&&L.from==T.from&&L.to-L.from>S.length+M;){if(_.sliceDoc(L.to-S.length,L.to)==S)return!1;L=L.firstChild}return!0}let D=T.to==v&&T.parent;if(!D)break;T=D}return!1}function canStartStringAt(_,v,S){let R=_.charCategorizer(v);if(R(_.sliceDoc(v-1,v))!=CharCategory.Word)return v;for(let T of S){let A=v-T.length;if(_.sliceDoc(A,v)==T&&R(_.sliceDoc(A-1,A))!=CharCategory.Word)return A}return-1}function autocompletion(_={}){return[commitCharacters,completionState,completionConfig.of(_),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],_=>_.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(v,S,R){this.from=v,this.to=S,this.diagnostic=R}}class LintState{constructor(v,S,R){this.diagnostics=v,this.panel=S,this.selected=R}static init(v,S,R){let T=R.facet(lintConfig).markerFilter;T&&(v=T(v,R));let A=v.slice().sort((F,H)=>F.from-H.from||F.to-H.to),k=new RangeSetBuilder,q=[],M=0,D=R.doc.iter(),L=0,I=R.doc.length;for(let F=0;;){let H=F==A.length?null:A[F];if(!H&&!q.length)break;let G,V;if(q.length)G=M,V=q.reduce((X,J)=>Math.min(X,J.to),H&&H.from>G?H.from:1e8);else{if(G=H.from,G>I)break;V=H.to,q.push(H),F++}for(;F<A.length;){let X=A[F];if(X.from==G&&(X.to>X.from||X.to==G))q.push(X),F++,V=Math.min(X.to,V);else{V=Math.min(X.from,V);break}}V=Math.min(V,I);let j=!1;if(q.some(X=>X.from==G&&(X.to==V||V==I))&&(j=G==V,!j&&V-G<10)){let X=G-(L+D.value.length);X>0&&(D.next(X),L=G);for(let J=G;;){if(J>=V){j=!0;break}if(!D.lineBreak&&L+D.value.length>J)break;J=L+D.value.length,L+=D.value.length,D.next()}}let W=maxSeverity(q);if(j)k.add(G,G,Decoration.widget({widget:new DiagnosticWidget(W),diagnostics:q.slice()}));else{let X=q.reduce((J,te)=>te.markClass?J+" "+te.markClass:J,"");k.add(G,V,Decoration.mark({class:"cm-lintRange cm-lintRange-"+W+X,diagnostics:q.slice(),inclusiveEnd:q.some(J=>J.to>V)}))}if(M=V,M==I)break;for(let X=0;X<q.length;X++)q[X].to<=M&&q.splice(X--,1)}let N=k.finish();return new LintState(N,S,findDiagnostic(N))}}function findDiagnostic(_,v=null,S=0){let R=null;return _.between(S,1e9,(T,A,{spec:k})=>{if(!(v&&k.diagnostics.indexOf(v)<0))if(!R)R=new SelectedDiagnostic(T,A,v||k.diagnostics[0]);else{if(k.diagnostics.indexOf(R.diagnostic)<0)return!1;R=new SelectedDiagnostic(R.from,A,R.diagnostic)}}),R}function hideTooltip(_,v){let S=v.pos,R=v.end||S,T=_.state.facet(lintConfig).hideOn(_,S,R);if(T!=null)return T;let A=_.startState.doc.lineAt(v.pos);return!!(_.effects.some(k=>k.is(setDiagnosticsEffect))||_.changes.touchesRange(A.from,Math.max(A.to,R)))}function maybeEnableLint(_,v){return _.field(lintState,!1)?v:v.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(_,v){if(v.docChanged&&_.diagnostics.size){let S=_.diagnostics.map(v.changes),R=null,T=_.panel;if(_.selected){let A=v.changes.mapPos(_.selected.from,1);R=findDiagnostic(S,_.selected.diagnostic,A)||findDiagnostic(S,null,A)}!S.size&&T&&v.state.facet(lintConfig).autoPanel&&(T=null),_=new LintState(S,T,R)}for(let S of v.effects)if(S.is(setDiagnosticsEffect)){let R=v.state.facet(lintConfig).autoPanel?S.value.length?LintPanel.open:null:_.panel;_=LintState.init(S.value,R,v.state)}else S.is(togglePanel)?_=new LintState(_.diagnostics,S.value?LintPanel.open:null,_.selected):S.is(movePanelSelection)&&(_=new LintState(_.diagnostics,_.panel,S.value));return _},provide:_=>[showPanel.from(_,v=>v.panel),EditorView.decorations.from(_,v=>v.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(_,v,S){let{diagnostics:R}=_.state.field(lintState),T,A=-1,k=-1;R.between(v-(S<0?1:0),v+(S>0?1:0),(M,D,{spec:L})=>{if(v>=M&&v<=D&&(M==D||(v>M||S>0)&&(v<D||S<0)))return T=L.diagnostics,A=M,k=D,!1});let q=_.state.facet(lintConfig).tooltipFilter;return T&&q&&(T=q(T,_.state)),T?{pos:A,end:k,above:_.state.doc.lineAt(A).to<k,create(){return{dom:diagnosticsTooltip(_,T)}}}:null}function diagnosticsTooltip(_,v){return crelt("ul",{class:"cm-tooltip-lint"},v.map(S=>renderDiagnostic(_,S,!1)))}const openLintPanel=_=>{let v=_.state.field(lintState,!1);(!v||!v.panel)&&_.dispatch({effects:maybeEnableLint(_.state,[togglePanel.of(!0)])});let S=getPanel(_,LintPanel.open);return S&&S.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=_=>{let v=_.state.field(lintState,!1);return!v||!v.panel?!1:(_.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=_=>{let v=_.state.field(lintState,!1);if(!v)return!1;let S=_.state.selection.main,R=v.diagnostics.iter(S.to+1);return!R.value&&(R=v.diagnostics.iter(0),!R.value||R.from==S.from&&R.to==S.to)?!1:(_.dispatch({selection:{anchor:R.from,head:R.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(_){return{sources:_.map(v=>v.source).filter(v=>v!=null),...combineConfig(_.map(v=>v.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:combineFilter,tooltipFilter:combineFilter,needsRefresh:(v,S)=>v?S?R=>v(R)||S(R):v:S,hideOn:(v,S)=>v?S?(R,T,A)=>v(R,T,A)||S(R,T,A):v:S,autoPanel:(v,S)=>v||S})}}});function combineFilter(_,v){return _?v?(S,R)=>v(_(S,R),R):_:v}function assignKeys(_){let v=[];if(_)e:for(let{name:S}of _){for(let R=0;R<S.length;R++){let T=S[R];if(/[a-zA-Z]/.test(T)&&!v.some(A=>A.toLowerCase()==T.toLowerCase())){v.push(T);continue e}}v.push("")}return v}function renderDiagnostic(_,v,S){var R;let T=S?assignKeys(v.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+v.severity},crelt("span",{class:"cm-diagnosticText"},v.renderMessage?v.renderMessage(_):v.message),(R=v.actions)===null||R===void 0?void 0:R.map((A,k)=>{let q=!1,M=F=>{if(F.preventDefault(),q)return;q=!0;let H=findDiagnostic(_.state.field(lintState).diagnostics,v);H&&A.apply(_,H.from,H.to)},{name:D}=A,L=T[k]?D.indexOf(T[k]):-1,I=L<0?D:[D.slice(0,L),crelt("u",D.slice(L,L+1)),D.slice(L+1)],N=A.markClass?" "+A.markClass:"";return crelt("button",{type:"button",class:"cm-diagnosticAction"+N,onclick:M,onmousedown:M,"aria-label":` Action: ${D}${L<0?"":` (access key "${T[k]})"`}.`},I)}),v.source&&crelt("div",{class:"cm-diagnosticSource"},v.source))}class DiagnosticWidget extends WidgetType{constructor(v){super(),this.sev=v}eq(v){return v.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(v,S){this.diagnostic=S,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(v,S,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(v){this.view=v,this.items=[];let S=T=>{if(T.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(T.keyCode==38||T.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(T.keyCode==40||T.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(T.keyCode==36)this.moveSelection(0);else if(T.keyCode==35)this.moveSelection(this.items.length-1);else if(T.keyCode==13)this.view.focus();else if(T.keyCode>=65&&T.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:A}=this.items[this.selectedIndex],k=assignKeys(A.actions);for(let q=0;q<k.length;q++)if(k[q].toUpperCase().charCodeAt(0)==T.keyCode){let M=findDiagnostic(this.view.state.field(lintState).diagnostics,A);M&&A.actions[q].apply(v,M.from,M.to)}}else return;T.preventDefault()},R=T=>{for(let A=0;A<this.items.length;A++)this.items[A].dom.contains(T.target)&&this.moveSelection(A)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:S,onclick:R}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let v=this.view.state.field(lintState).selected;if(!v)return-1;for(let S=0;S<this.items.length;S++)if(this.items[S].diagnostic==v.diagnostic)return S;return-1}update(){let{diagnostics:v,selected:S}=this.view.state.field(lintState),R=0,T=!1,A=null,k=new Set;for(v.between(0,this.view.state.doc.length,(q,M,{spec:D})=>{for(let L of D.diagnostics){if(k.has(L))continue;k.add(L);let I=-1,N;for(let F=R;F<this.items.length;F++)if(this.items[F].diagnostic==L){I=F;break}I<0?(N=new PanelItem(this.view,L),this.items.splice(R,0,N),T=!0):(N=this.items[I],I>R&&(this.items.splice(R,I-R),T=!0)),S&&N.diagnostic==S.diagnostic?N.dom.hasAttribute("aria-selected")||(N.dom.setAttribute("aria-selected","true"),A=N):N.dom.hasAttribute("aria-selected")&&N.dom.removeAttribute("aria-selected"),R++}});R<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)T=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),T=!0),A?(this.list.setAttribute("aria-activedescendant",A.id),this.view.requestMeasure({key:this,read:()=>({sel:A.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:q,panel:M})=>{let D=M.height/this.list.offsetHeight;q.top<M.top?this.list.scrollTop-=(M.top-q.top)/D:q.bottom>M.bottom&&(this.list.scrollTop+=(q.bottom-M.bottom)/D)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),T&&this.sync()}sync(){let v=this.list.firstChild;function S(){let R=v;v=R.nextSibling,R.remove()}for(let R of this.items)if(R.dom.parentNode==this.list){for(;v!=R.dom;)S();v=R.dom.nextSibling}else this.list.insertBefore(R.dom,v);for(;v;)S()}moveSelection(v){if(this.selectedIndex<0)return;let S=this.view.state.field(lintState),R=findDiagnostic(S.diagnostics,this.items[v].diagnostic);R&&this.view.dispatch({selection:{anchor:R.from,head:R.to},scrollIntoView:!0,effects:movePanelSelection.of(R)})}static open(v){return new LintPanel(v)}}function svg(_,v='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${v}>${encodeURIComponent(_)}</svg>')`}function underline(_){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${_}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(_){return _=="error"?4:_=="warning"?3:_=="info"?2:1}function maxSeverity(_){let v="hint",S=1;for(let R of _){let T=severityWeight(R.severity);T>S&&(S=T,v=R.severity)}return v}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],_=>{let{selected:v,panel:S}=_.field(lintState);return!v||!S||v.from==v.to?Decoration.none:Decoration.set([activeMark.range(v.from,v.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function(v){v===void 0&&(v={});var{crosshairCursor:S=!1}=v,R=[];v.closeBracketsKeymap!==!1&&(R=R.concat(closeBracketsKeymap)),v.defaultKeymap!==!1&&(R=R.concat(defaultKeymap)),v.searchKeymap!==!1&&(R=R.concat(searchKeymap)),v.historyKeymap!==!1&&(R=R.concat(historyKeymap)),v.foldKeymap!==!1&&(R=R.concat(foldKeymap)),v.completionKeymap!==!1&&(R=R.concat(completionKeymap)),v.lintKeymap!==!1&&(R=R.concat(lintKeymap));var T=[];return v.lineNumbers!==!1&&T.push(lineNumbers()),v.highlightActiveLineGutter!==!1&&T.push(highlightActiveLineGutter()),v.highlightSpecialChars!==!1&&T.push(highlightSpecialChars()),v.history!==!1&&T.push(history()),v.foldGutter!==!1&&T.push(foldGutter()),v.drawSelection!==!1&&T.push(drawSelection()),v.dropCursor!==!1&&T.push(dropCursor()),v.allowMultipleSelections!==!1&&T.push(EditorState.allowMultipleSelections.of(!0)),v.indentOnInput!==!1&&T.push(indentOnInput()),v.syntaxHighlighting!==!1&&T.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),v.bracketMatching!==!1&&T.push(bracketMatching()),v.closeBrackets!==!1&&T.push(closeBrackets()),v.autocompletion!==!1&&T.push(autocompletion()),v.rectangularSelection!==!1&&T.push(rectangularSelection()),S!==!1&&T.push(crosshairCursor()),v.highlightActiveLine!==!1&&T.push(highlightActiveLine()),v.highlightSelectionMatches!==!1&&T.push(highlightSelectionMatches()),v.tabSize&&typeof v.tabSize=="number"&&T.push(indentUnit.of(" ".repeat(v.tabSize))),T.concat([keymap.of(R.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function(v){v===void 0&&(v={});var{indentWithTab:S=!0,editable:R=!0,readOnly:T=!1,theme:A="light",placeholder:k="",basicSetup:q=!0}=v,M=[];switch(S&&M.unshift(keymap.of([indentWithTab])),q&&(typeof q=="boolean"?M.unshift(basicSetup()):M.unshift(basicSetup(q))),k&&M.unshift(placeholder(k)),A){case"light":M.push(defaultLightThemeOption);break;case"dark":M.push(oneDark);break;case"none":break;default:M.push(A);break}return R===!1&&M.push(EditorView.editable.of(!1)),T&&M.push(EditorState.readOnly.of(!0)),[...M]},getStatistics=_=>({line:_.state.doc.lineAt(_.state.selection.main.from),lineCount:_.state.doc.lines,lineBreak:_.state.lineBreak,length:_.state.doc.length,readOnly:_.state.readOnly,tabSize:_.state.tabSize,selection:_.state.selection,selectionAsSingle:_.state.selection.asSingle().main,ranges:_.state.selection.ranges,selectionCode:_.state.sliceDoc(_.state.selection.main.from,_.state.selection.main.to),selections:_.state.selection.ranges.map(v=>_.state.sliceDoc(v.from,v.to)),selectedText:_.state.selection.ranges.some(v=>!v.empty)});class TimeoutLatch{constructor(v,S){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=S,this.timeoutMS=S,this.callbacks.push(v)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var v=this.callbacks.slice();this.callbacks.length=0,v.forEach(S=>{try{S()}catch(R){console.error("TimeoutLatch callback error:",R)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Scheduler{constructor(){this.interval=null,this.latches=new Set}add(v){this.latches.add(v),this.start()}remove(v){this.latches.delete(v),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(v=>{v.tick(),v.isDone&&this.remove(v)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var globalScheduler=null,getScheduler=()=>typeof window>"u"?new Scheduler:(globalScheduler||(globalScheduler=new Scheduler),globalScheduler),ExternalChange=Annotation.define(),TYPING_TIMOUT=200,emptyExtensions=[];function useCodeMirror(_){var{value:v,selection:S,onChange:R,onStatistics:T,onCreateEditor:A,onUpdate:k,extensions:q=emptyExtensions,autoFocus:M,theme:D="light",height:L=null,minHeight:I=null,maxHeight:N=null,width:F=null,minWidth:H=null,maxWidth:G=null,placeholder:V="",editable:j=!0,readOnly:W=!1,indentWithTab:X=!0,basicSetup:J=!0,root:te,initialState:re}=_,[ee,ne]=reactExports.useState(),[oe,ue]=reactExports.useState(),[ce,de]=reactExports.useState(),pe=reactExports.useState(()=>({current:null}))[0],_e=reactExports.useState(()=>({current:null}))[0],Ee=EditorView.theme({"&":{height:L,minHeight:I,maxHeight:N,width:F,minWidth:H,maxWidth:G},"& .cm-scroller":{height:"100% !important"}}),ge=EditorView.updateListener.of(De=>{if(De.docChanged&&typeof R=="function"&&!De.transactions.some(me=>me.annotation(ExternalChange))){pe.current?pe.current.reset():(pe.current=new TimeoutLatch(()=>{if(_e.current){var me=_e.current;_e.current=null,me()}pe.current=null},TYPING_TIMOUT),getScheduler().add(pe.current));var ve=De.state.doc,le=ve.toString();R(le,De)}T&&T(getStatistics(De))}),be=getDefaultExtensions({theme:D,editable:j,readOnly:W,placeholder:V,indentWithTab:X,basicSetup:J}),Ae=[ge,Ee,...be];return k&&typeof k=="function"&&Ae.push(EditorView.updateListener.of(k)),Ae=Ae.concat(q),reactExports.useLayoutEffect(()=>{if(ee&&!ce){var De={doc:v,selection:S,extensions:Ae},ve=re?EditorState.fromJSON(re.json,De,re.fields):EditorState.create(De);if(de(ve),!oe){var le=new EditorView({state:ve,parent:ee,root:te});ue(le),A&&A(le,ve)}}return()=>{oe&&(de(void 0),ue(void 0))}},[ee,ce]),reactExports.useEffect(()=>{_.container&&ne(_.container)},[_.container]),reactExports.useEffect(()=>()=>{oe&&(oe.destroy(),ue(void 0)),pe.current&&(pe.current.cancel(),pe.current=null)},[oe]),reactExports.useEffect(()=>{M&&oe&&oe.focus()},[M,oe]),reactExports.useEffect(()=>{oe&&oe.dispatch({effects:StateEffect.reconfigure.of(Ae)})},[D,q,L,I,N,F,H,G,V,j,W,X,J,R,k]),reactExports.useEffect(()=>{if(v!==void 0){var De=oe?oe.state.doc.toString():"";if(oe&&v!==De){var ve=pe.current&&!pe.current.isDone,le=()=>{oe&&v!==oe.state.doc.toString()&&oe.dispatch({changes:{from:0,to:oe.state.doc.toString().length,insert:v||""},annotations:[ExternalChange.of(!0)]})};ve?_e.current=le:le()}}},[v,oe]),{state:ce,setState:de,view:oe,setView:ue,container:ee,setContainer:ne}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((_,v)=>{var{className:S,value:R="",selection:T,extensions:A=[],onChange:k,onStatistics:q,onCreateEditor:M,onUpdate:D,autoFocus:L,theme:I="light",height:N,minHeight:F,maxHeight:H,width:G,minWidth:V,maxWidth:j,basicSetup:W,placeholder:X,indentWithTab:J,editable:te,readOnly:re,root:ee,initialState:ne}=_,oe=_objectWithoutPropertiesLoose(_,_excluded),ue=reactExports.useRef(null),{state:ce,view:de,container:pe,setContainer:_e}=useCodeMirror({root:ee,value:R,autoFocus:L,theme:I,height:N,minHeight:F,maxHeight:H,width:G,minWidth:V,maxWidth:j,basicSetup:W,placeholder:X,indentWithTab:J,editable:te,readOnly:re,selection:T,onChange:k,onStatistics:q,onCreateEditor:M,onUpdate:D,extensions:A,initialState:ne});reactExports.useImperativeHandle(v,()=>({editor:ue.current,state:ce,view:de}),[ue,pe,ce,de]);var Ee=reactExports.useCallback(be=>{ue.current=be,_e(be)},[_e]);if(typeof R!="string")throw new Error("value must be typeof string but got "+typeof R);var ge=typeof I=="string"?"cm-theme-"+I:"cm-theme";return jsxRuntimeExports.jsx("div",_extends({ref:Ee,className:""+ge+(S?" "+S:"")},oe))});ReactCodeMirror.displayName="CodeMirror";const ccsHighlightStyle=HighlightStyle.define([{tag:tags.typeName,color:"#00796b",fontWeight:"bold"},{tag:tags.keyword,color:"#7e57c2"},{tag:tags.variableName,color:"#1976d2"},{tag:tags.labelName,color:"#d32f2f",textDecoration:"overline",textDecorationThickness:"2px"},{tag:tags.operator,color:"#546e7a"},{tag:tags.punctuation,color:"#546e7a"},{tag:tags.lineComment,color:"#90a4ae",fontStyle:"italic"},{tag:tags.invalid,color:"red",borderBottom:"1px dotted red"}]),ccsLanguage=StreamLanguage.define({token:_=>_.eatSpace()?null:_.match("//")?(_.skipToEnd(),"lineComment"):_.match(/^'[a-z][a-zA-Z0-9_]*/)?"labelName":_.match(/^tau\b/)?"atom":_.match(/^[a-z][a-zA-Z0-9_]*/)?"variableName":_.match(/^[A-Z][a-zA-Z0-9_]*/)?"typeName":_.match(/^(Nil|0|def)\b/)?"keyword":_.match(/^[.|=+\\\/]/)?"operator":_.match(/^[\(\)\{\}\[\],]/)?"punctuation":(_.next(),"invalid")});function TextEditor({initValue:_,onTextChange:v}){const[S,R]=reactExports.useState(_??""),T=reactExports.useCallback((A,k)=>{R(A),v&&v(A)},[v]);return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ReactCodeMirror,{value:S,height:"200px",style:{border:"1px solid #ccc",fontSize:"1.2em"},basicSetup:{closeBrackets:!1},extensions:[ccsLanguage,syntaxHighlighting(ccsHighlightStyle)],onChange:T})})}var peggy_min$1={exports:{}},peggy_min=peggy_min$1.exports,hasRequiredPeggy_min;function requirePeggy_min(){return hasRequiredPeggy_min||(hasRequiredPeggy_min=1,(function(module,exports){function _array_like_to_array(_,v){(v==null||v>_.length)&&(v=_.length);for(var S=0,R=new Array(v);S<v;S++)R[S]=_[S];return R}function _array_with_holes(_){if(Array.isArray(_))return _}function _array_without_holes(_){if(Array.isArray(_))return _array_like_to_array(_)}function _assert_this_initialized(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _call_super(_,v,S){return v=_get_prototype_of(v),_possible_constructor_return(_,_is_native_reflect_construct()?Reflect.construct(v,S||[],_get_prototype_of(_).constructor):v.apply(_,S))}function _class_call_check(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function _construct(_,v,S){return _is_native_reflect_construct()?_construct=Reflect.construct:_construct=function(R,T,A){var k=[null];k.push.apply(k,T);var q=Function.bind.apply(R,k),M=new q;return A&&_set_prototype_of(M,A.prototype),M},_construct.apply(null,arguments)}function _defineProperties(_,v){for(var S=0;S<v.length;S++){var R=v[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,R.key,R)}}function _create_class(_,v,S){return v&&_defineProperties(_.prototype,v),S&&_defineProperties(_,S),_}function _define_property(_,v,S){return v in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}function _get(_,v,S){return typeof Reflect<"u"&&Reflect.get?_get=Reflect.get:_get=function(R,T,A){var k=_super_prop_base(R,T);if(k){var q=Object.getOwnPropertyDescriptor(k,T);return q.get?q.get.call(A||R):q.value}},_get(_,v,S||_)}function _get_prototype_of(_){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},_get_prototype_of(_)}function _inherits(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&_set_prototype_of(_,v)}function _instanceof(_,v){return v!=null&&typeof Symbol<"u"&&v[Symbol.hasInstance]?!!v[Symbol.hasInstance](_):_ instanceof v}function _is_native_function(_){return Function.toString.call(_).indexOf("[native code]")!==-1}function _iterable_to_array(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _iterable_to_array_limit(_,v){var S=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(S!=null){var R=[],T=!0,A=!1,k,q;try{for(S=S.call(_);!(T=(k=S.next()).done)&&(R.push(k.value),!(v&&R.length===v));T=!0);}catch(M){A=!0,q=M}finally{try{!T&&S.return!=null&&S.return()}finally{if(A)throw q}}return R}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(_){for(var v=1;v<arguments.length;v++){var S=arguments[v]!=null?arguments[v]:{},R=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(S).filter(function(T){return Object.getOwnPropertyDescriptor(S,T).enumerable}))),R.forEach(function(T){_define_property(_,T,S[T])})}return _}function ownKeys(_,v){var S=Object.keys(_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(_);S.push.apply(S,R)}return S}function _object_spread_props(_,v){return v=v??{},Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(v)):ownKeys(Object(v)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(v,S))}),_}function _possible_constructor_return(_,v){return v&&(_type_of(v)==="object"||typeof v=="function")?v:_assert_this_initialized(_)}function _set_prototype_of(_,v){return _set_prototype_of=Object.setPrototypeOf||function(S,R){return S.__proto__=R,S},_set_prototype_of(_,v)}function _sliced_to_array(_,v){return _array_with_holes(_)||_iterable_to_array_limit(_,v)||_unsupported_iterable_to_array(_,v)||_non_iterable_rest()}function _super_prop_base(_,v){for(;!Object.prototype.hasOwnProperty.call(_,v)&&(_=_get_prototype_of(_),_!==null););return _}function _to_consumable_array(_){return _array_without_holes(_)||_iterable_to_array(_)||_unsupported_iterable_to_array(_)||_non_iterable_spread()}function _type_of(_){"@swc/helpers - typeof";return _&&typeof Symbol<"u"&&_.constructor===Symbol?"symbol":typeof _}function _unsupported_iterable_to_array(_,v){if(_){if(typeof _=="string")return _array_like_to_array(_,v);var S=Object.prototype.toString.call(_).slice(8,-1);if(S==="Object"&&_.constructor&&(S=_.constructor.name),S==="Map"||S==="Set")return Array.from(S);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return _array_like_to_array(_,v)}}function _wrap_native_super(_){var v=typeof Map=="function"?new Map:void 0;return _wrap_native_super=function(S){if(S===null||!_is_native_function(S))return S;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v<"u"){if(v.has(S))return v.get(S);v.set(S,R)}function R(){return _construct(S,arguments,_get_prototype_of(this).constructor)}return R.prototype=Object.create(S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(R,S)},_wrap_native_super(_)}function _is_native_reflect_construct(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_is_native_reflect_construct=function(){return!!_})()}(function(_,v){_type_of(exports)=="object"&&_type_of(module)<"u"?module.exports=v():_.peggy=v()})((typeof globalThis>"u"?"undefined":_type_of(globalThis))<"u"?globalThis:(typeof self>"u"?"undefined":_type_of(self))<"u"?self:peggy_min,function(){var exports={},__exports=exports,module={exports},U=function(_,v){return function(){return v||_((v={exports:{}}).exports,v),v.exports}},Ve=U(function(_,v){var S=(function(){function R(T,A){_class_call_check(this,R),this.source=T,this.start=A}return _create_class(R,[{key:"toString",value:function(){return String(this.source)}},{key:"offset",value:function(T){return{line:T.line+this.start.line-1,column:T.line===1?T.column+this.start.column-1:T.column,offset:T.offset+this.start.offset}}}],[{key:"offsetStart",value:function(T){return T.source&&typeof T.source.offset=="function"?T.source.offset(T.start):T.start}},{key:"offsetEnd",value:function(T){return T.source&&typeof T.source.offset=="function"?T.source.offset(T.end):T.end}}]),R})();v.exports=S}),ft=U(function(_,v){var S=Ve(),R=(function(T){_inherits(A,T);function A(k,q,M){_class_call_check(this,A);var D;return D=_call_super(this,A,[k]),D.name="GrammarError",D.location=q,M===void 0&&(M=[]),D.diagnostics=M,D.stage=null,D.problems=[["error",k,q,M]],D}return _create_class(A,[{key:"toString",value:function(){var q=_get(_get_prototype_of(A.prototype),"toString",this).call(this);this.location&&(q+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(q+="".concat(this.location.source,":")),q+="".concat(this.location.start.line,":").concat(this.location.start.column));var M=!0,D=!1,L=void 0;try{for(var I=this.diagnostics[Symbol.iterator](),N;!(M=(N=I.next()).done);M=!0){var F=N.value;q+=`
 from `,F.location.source!==void 0&&F.location.source!==null&&(q+="".concat(F.location.source,":")),q+="".concat(F.location.start.line,":").concat(F.location.start.column,": ").concat(F.message)}}catch(H){D=!0,L=H}finally{try{!M&&I.return!=null&&I.return()}finally{if(D)throw L}}return q}},{key:"format",value:function(k){var q=k.map(function(L){var I=L.source,N=L.text;return{source:I,text:N!=null?String(N).split(/\r\n|\n|\r/g):[]}});function M(L,I){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",F="",H=q.find(function(J){var te=J.source;return te===L.source}),G=L.start,V=S.offsetStart(L);if(H){var j=L.end,W=H.text[G.line-1],X=(G.line===j.line?j.column:W.length+1)-G.column||1;N&&(F+=`
note: `.concat(N)),F+=`
 --> `.concat(L.source,":").concat(V.line,":").concat(V.column,`
`).concat("".padEnd(I),` |
`).concat(V.line.toString().padStart(I)," | ").concat(W,`
`).concat("".padEnd(I)," | ").concat("".padEnd(G.column-1)).concat("".padEnd(X,"^"))}else F+=`
 at `.concat(L.source,":").concat(V.line,":").concat(V.column),N&&(F+=": ".concat(N));return F}function D(L,I,N){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],H=-1/0;N?H=F.reduce(function(re,ee){var ne=ee.location;return Math.max(re,S.offsetStart(ne).line)},N.start.line):H=Math.max.apply(null,F.map(function(re){return re.location.start.line})),H=H.toString().length;var G="".concat(L,": ").concat(I);N&&(G+=M(N,H));var V=!0,j=!1,W=void 0;try{for(var X=F[Symbol.iterator](),J;!(V=(J=X.next()).done);V=!0){var te=J.value;G+=M(te.location,H,te.message)}}catch(re){j=!0,W=re}finally{try{!V&&X.return!=null&&X.return()}finally{if(j)throw W}}return G}return this.problems.filter(function(L){return L[0]!=="info"}).map(function(L){return D.apply(void 0,_to_consumable_array(L))}).join(`

`)}}]),A})(_wrap_native_super(SyntaxError));v.exports=R}),K=U(function(_,v){var S={build:function(R){function T(D){for(var L=arguments.length,I=new Array(L>1?L-1:0),N=1;N<L;N++)I[N-1]=arguments[N];var F;return(F=R)[D.type].apply(F,[D].concat(_to_consumable_array(I)))}function A(){}function k(D){for(var L=arguments.length,I=new Array(L>1?L-1:0),N=1;N<L;N++)I[N-1]=arguments[N];return T.apply(void 0,[D.expression].concat(_to_consumable_array(I)))}function q(D){return function(L){for(var I=arguments.length,N=new Array(I>1?I-1:0),F=1;F<I;F++)N[F-1]=arguments[F];L[D].forEach(function(H){return T.apply(void 0,[H].concat(_to_consumable_array(N)))})}}var M={grammar:function(D){for(var L=arguments.length,I=new Array(L>1?L-1:0),N=1;N<L;N++)I[N-1]=arguments[N];var F=!0,H=!1,G=void 0;try{for(var V=D.imports[Symbol.iterator](),j;!(F=(j=V.next()).done);F=!0){var W=j.value;T.apply(void 0,[W].concat(_to_consumable_array(I)))}}catch(Ee){H=!0,G=Ee}finally{try{!F&&V.return!=null&&V.return()}finally{if(H)throw G}}var X=!0,J=!1,te=void 0;if(D.topLevelInitializer)if(Array.isArray(D.topLevelInitializer))try{for(var re=D.topLevelInitializer[Symbol.iterator](),ee;!(X=(ee=re.next()).done);X=!0){var ne=ee.value;T.apply(void 0,[ne].concat(_to_consumable_array(I)))}}catch(Ee){J=!0,te=Ee}finally{try{!X&&re.return!=null&&re.return()}finally{if(J)throw te}}else T.apply(void 0,[D.topLevelInitializer].concat(_to_consumable_array(I)));var oe=!0,ue=!1,ce=void 0;if(D.initializer)if(Array.isArray(D.initializer))try{for(var de=D.initializer[Symbol.iterator](),pe;!(oe=(pe=de.next()).done);oe=!0){var _e=pe.value;T.apply(void 0,[_e].concat(_to_consumable_array(I)))}}catch(Ee){ue=!0,ce=Ee}finally{try{!oe&&de.return!=null&&de.return()}finally{if(ue)throw ce}}else T.apply(void 0,[D.initializer].concat(_to_consumable_array(I)));D.rules.forEach(function(Ee){return T.apply(void 0,[Ee].concat(_to_consumable_array(I)))})},grammar_import:A,top_level_initializer:A,initializer:A,rule:k,named:k,choice:q("alternatives"),action:k,sequence:q("elements"),labeled:k,text:k,simple_and:k,simple_not:k,optional:k,zero_or_more:k,one_or_more:k,repeated:function(D){for(var L=arguments.length,I=new Array(L>1?L-1:0),N=1;N<L;N++)I[N-1]=arguments[N];return D.delimiter&&T.apply(void 0,[D.delimiter].concat(_to_consumable_array(I))),T.apply(void 0,[D.expression].concat(_to_consumable_array(I)))},group:k,semantic_and:A,semantic_not:A,rule_ref:A,library_ref:A,literal:A,class:A,any:A};return Object.keys(M).forEach(function(D){Object.prototype.hasOwnProperty.call(R,D)||(R[D]=M[D])}),T}};v.exports=S}),he=U(function(_,v){var S=function(A,k){if(!(A&&k))return A||k;var q=Array.isArray(A)?A:[A];return q.push(k),q},R=K(),T={findRule:function(A,k){for(var q=0;q<A.rules.length;q++)if(A.rules[q].name===k)return A.rules[q]},indexOfRule:function(A,k){for(var q=0;q<A.rules.length;q++)if(A.rules[q].name===k)return q;return-1},alwaysConsumesOnSuccess:function(A,k){function q(){return!0}function M(){return!1}var D=R.build({choice:function(L){return L.alternatives.every(D)},sequence:function(L){return L.elements.some(D)},simple_and:M,simple_not:M,optional:M,zero_or_more:M,repeated:function(L){var I=L.min?L.min:L.max;return I.type!=="constant"||I.value===0?!1:!!(D(L.expression)||I.value>1&&L.delimiter&&D(L.delimiter))},semantic_and:M,semantic_not:M,rule_ref:function(L){var I=T.findRule(A,L.name);return I?D(I):void 0},library_ref:M,literal:function(L){return L.value!==""},class:q,any:q});return D(k)},combine:function(A){return A.reduce(function(k,q){return k.topLevelInitializer=S(k.topLevelInitializer,q.topLevelInitializer),k.initializer=S(k.initializer,q.initializer),k.rules=k.rules.concat(q.rules),k})}};v.exports=T}),Xs=U(function(_,v){var S=function(R){var T=0,A=!0,k=!1,q=void 0;try{for(var M=R.imports[Symbol.iterator](),D;!(A=(D=M.next()).done);A=!0){var L=D.value,I=!0,N=!1,F=void 0;try{for(var H=L.what[Symbol.iterator](),G;!(I=(G=H.next()).done);I=!0){var V=G.value,j=void 0;switch(V.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":j=V.binding;break;case"import_binding_rename":j=V.rename;break;default:throw new TypeError("Unknown binding type")}R.rules.push({type:"rule",name:V.binding,nameLocation:V.location,expression:{type:"library_ref",name:j,library:L.from.module,libraryNumber:T,location:V.location},location:L.from.location})}}catch(W){N=!0,F=W}finally{try{!I&&H.return!=null&&H.return()}finally{if(N)throw F}}T++}}catch(W){k=!0,q=W}finally{try{!A&&M.return!=null&&M.return()}finally{if(k)throw q}}};v.exports=S}),Ks=U(function(_,v){var S=function(A,k){var q=0,M=!0,D=!1,L=void 0;try{for(var I=A.imports[Symbol.iterator](),N;!(M=(N=I.next()).done);M=!0){var F=N.value,H=!0,G=!1,V=void 0;try{for(var j=F.what[Symbol.iterator](),W;!(H=(W=j.next()).done);H=!0){var X=W.value;if(X.type==="import_binding_all"&&X.binding===k)return q}}catch(J){G=!0,V=J}finally{try{!H&&j.return!=null&&j.return()}finally{if(G)throw V}}q++}}catch(J){D=!0,L=J}finally{try{!M&&I.return!=null&&I.return()}finally{if(D)throw L}}return-1},R=function(A,k,q){T.build({library_ref:function(M){M.libraryNumber===-1&&(M.libraryNumber=S(A,M.library),M.libraryNumber===-1&&q.error('Unknown module "'.concat(M.library,'"'),M.location))}})(A)},T=K();v.exports=R}),Ht=U(function(_,v){var S={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};v.exports=S}),tr=U(function(_,v){var S=(function(){function R(T){_class_call_check(this,R),this.options=_object_spread({stringify:String,convert:function(A){return A}},T),this.items=[],this.offsets=Object.create(null)}return _create_class(R,[{key:"add",value:function(T){var A=this.options.convert(T);if(!A)return-1;var k=this.options.stringify(A),q=this.offsets[k];return q===void 0&&(q=this.items.push(A)-1,this.offsets[k]=q),q}},{key:"get",value:function(T){return this.items[T]}},{key:"map",value:function(T){return this.items.map(T)}}]),R})();v.exports=S}),ht=U(function(_,v){var S=function(D){function L(G){return G.match=q}function I(G){return H(G.expression),G.match=k}function N(G){return G.match=H(G.expression)}function F(G,V){for(var j=G.length,W=0,X=0,J=0;J<j;++J){var te=H(G[J]);te===k&&++W,te===M&&++X}return W===j?k:V?X===j?M:q:X>0?M:q}var H=R.build({rule:function(G){var V,j=0;if(_type_of(G.match)>"u"){G.match=q;do if(V=G.match,G.match=H(G.expression),++j>6)throw new A("Infinity cycle detected when trying to evaluate node match result",G.location);while(V!==G.match)}return G.match},named:N,choice:function(G){return G.match=F(G.alternatives,!0)},action:N,sequence:function(G){return G.match=F(G.elements,!1)},labeled:N,text:N,simple_and:N,simple_not:function(G){return G.match=-H(G.expression)},optional:I,zero_or_more:I,one_or_more:N,repeated:function(G){var V=H(G.expression),j=G.delimiter?H(G.delimiter):M,W=G.min?G.min:G.max;return W.type!=="constant"||G.max.type!=="constant"?G.match=q:G.max.value===0||G.max.value!==null&&W.value>G.max.value?G.match=M:V===M?G.match=W.value===0?k:M:V===k?G.delimiter&&W.value>=2?G.match=j:G.match=k:G.delimiter&&W.value>=2?G.match=j===M?M:q:G.match=W.value===0?k:q},group:N,semantic_and:L,semantic_not:L,rule_ref:function(G){var V=T.findRule(D,G.name);return V?G.match=H(V):q},library_ref:function(){return 0},literal:function(G){var V=G.value.length===0?k:q;return G.match=V},class:function(G){var V=G.parts.length===0?M:q;return G.match=V},any:L});H(D)},R=K(),T=he(),A=ft(),k=1,q=0,M=-1;S.ALWAYS_MATCH=k,S.SOMETIMES_MATCH=q,S.NEVER_MATCH=M,v.exports=S}),ir=U(function(_,v){var S=function(I,N){var F=new k,H=new k({stringify:JSON.stringify,convert:function(ve){return{value:ve.parts,inverted:ve.inverted,ignoreCase:ve.ignoreCase,unicode:ve.unicode}}}),G=new k({stringify:JSON.stringify}),V=new k,j=[],W=[];function X(ve,le,me){var Te={predicate:ve,params:le,body:me.code,location:me.codeLocation},ye=JSON.stringify(Te),Re=j.findIndex(function(qe){return JSON.stringify(qe)===ye});return Re===-1?j.push(Te)-1:Re}function J(ve){return W.push(ve)-1}function te(ve){var le={};return Object.keys(ve).forEach(function(me){le[me]=ve[me]}),le}function re(ve){for(var le=arguments.length,me=new Array(le>1?le-1:0),Te=1;Te<le;Te++)me[Te-1]=arguments[Te];var ye;return(ye=ve).concat.apply(ye,_to_consumable_array(me))}function ee(ve,le,me,Te){return ve===M?me:ve===L?Te:le.concat([me.length,Te.length],me,Te)}function ne(ve,le){return ve.concat([le.length],le)}function oe(ve,le,me,Te){var ye=Object.keys(me).map(function(Re){return Te-me[Re]});return[T.CALL,ve,le,ye.length].concat(ye)}function ue(ve,le,me){var Te=ve.match||0;return re([T.PUSH_CURR_POS],[T.SILENT_FAILS_ON],De(ve,{sp:me.sp+1,env:te(me.env),action:null}),[T.SILENT_FAILS_OFF],ee(le?-Te:Te,[le?T.IF_ERROR:T.IF_NOT_ERROR],re([T.POP],[le?T.POP:T.POP_CURR_POS],[T.PUSH_UNDEFINED]),re([T.POP],[le?T.POP_CURR_POS:T.POP],[T.PUSH_FAILED])))}function ce(ve,le,me){var Te=X(!0,Object.keys(me.env),ve);return re([T.UPDATE_SAVED_POS],oe(Te,0,me.env,me.sp),ee(ve.match||0,[T.IF],re([T.POP],le?[T.PUSH_FAILED]:[T.PUSH_UNDEFINED]),re([T.POP],le?[T.PUSH_UNDEFINED]:[T.PUSH_FAILED])))}function de(ve){return ne([T.WHILE_NOT_ERROR],re([T.APPEND],ve))}function pe(ve){var le=ve;return new Error('Unknown boundary type "'.concat(le.type,'" for the "repeated" node'))}function _e(ve,le,me,Te){switch(ve.type){case"constant":return{pre:[],post:[],sp:me};case"variable":return ve.sp=Te+me-le[ve.value],{pre:[],post:[],sp:me};case"function":{ve.sp=Te;var ye=X(!0,Object.keys(le),{code:ve.value,codeLocation:ve.codeLocation});return{pre:oe(ye,0,le,me),post:[T.NIP],sp:me+1}}default:throw pe(ve)}}function Ee(ve,le){if(le.value!==null){var me=le.type==="constant"?[T.IF_GE,le.value]:[T.IF_GE_DYNAMIC,le.sp||0];return ee(D,me,[T.PUSH_FAILED],ve)}return ve}function ge(ve,le){var me=le.type==="constant"?[T.IF_LT,le.value]:[T.IF_LT_DYNAMIC,le.sp||0];return re(ve,ee(D,me,[T.POP,T.POP_CURR_POS,T.PUSH_FAILED],[T.NIP]))}function be(ve,le,me,Te,ye){return ve?re([T.PUSH_CURR_POS],De(ve,{sp:Te.sp+ye+1,env:te(Te.env),action:null}),ee(ve.match||0,[T.IF_NOT_ERROR],re([T.POP],me,ee(-le,[T.IF_ERROR],[T.POP,T.POP_CURR_POS,T.PUSH_FAILED],[T.NIP])),[T.NIP])):me}function Ae(ve){return N&&N.output==="source-and-map"&&Object.keys(ve).forEach(function(le){var me=ve[le];ve[le]=function(Te){for(var ye=arguments.length,Re=new Array(ye>1?ye-1:0),qe=1;qe<ye;qe++)Re[qe-1]=arguments[qe];var ke=me.apply(void 0,[Te].concat(_to_consumable_array(Re)));return ke===void 0||!Te.location?ke:re([T.SOURCE_MAP_PUSH,J(Te.location)],ke,[T.SOURCE_MAP_POP])}}),A.build(ve)}var De=Ae({grammar:function(ve){ve.rules.forEach(De),ve.literals=F.items,ve.classes=H.items,ve.expectations=G.items,ve.importedNames=V.items,ve.functions=j,ve.locations=W},rule:function(ve){ve.bytecode=De(ve.expression,{sp:-1,env:{},pluck:[],action:null})},named:function(ve,le){var me=ve.match||0,Te=me===M?-1:G.add({type:"rule",value:ve.name});return re([T.SILENT_FAILS_ON],De(ve.expression,le),[T.SILENT_FAILS_OFF],ee(-me,[T.IF_ERROR],[T.FAIL,Te],[]))},choice:function(ve,le){function me(Te,ye){var Re=Te[0].match||0,qe=De(Te[0],{sp:ye.sp,env:te(ye.env),action:null});return Re===M?qe:re(qe,Te.length>1?ee(D,[T.IF_ERROR],re([T.POP],me(Te.slice(1),ye)),[]):[])}return me(ve.alternatives,le)},action:function(ve,le){var me=te(le.env),Te=ve.expression.type!=="sequence"||ve.expression.elements.length===0,ye=De(ve.expression,{sp:le.sp+(Te?1:0),env:me,action:ve}),Re=ve.expression.match||0,qe=Te&&Re!==L?X(!1,Object.keys(me),ve):-1;return Te?re([T.PUSH_CURR_POS],ye,ee(Re,[T.IF_NOT_ERROR],re([T.LOAD_SAVED_POS,1],oe(qe,1,me,le.sp+2)),[]),[T.NIP]):ye},sequence:function(ve,le){function me(Te,ye){if(Te.length>0){var Re=ve.elements.length-Te.length+1;return re(De(Te[0],{sp:ye.sp,env:ye.env,pluck:ye.pluck,action:null}),ee(Te[0].match||0,[T.IF_NOT_ERROR],me(Te.slice(1),{sp:ye.sp+1,env:ye.env,pluck:ye.pluck,action:ye.action}),re(Re>1?[T.POP_N,Re]:[T.POP],[T.POP_CURR_POS],[T.PUSH_FAILED])))}else{if(ye.pluck&&ye.pluck.length>0)return re([T.PLUCK,ve.elements.length+1,ye.pluck.length],ye.pluck.map(function(ke){return ye.sp-ke}));if(ye.action){var qe=X(!1,Object.keys(ye.env),ye.action);return re([T.LOAD_SAVED_POS,ve.elements.length],oe(qe,ve.elements.length+1,ye.env,ye.sp))}else return re([T.WRAP,ve.elements.length],[T.NIP])}}return re([T.PUSH_CURR_POS],me(ve.elements,{sp:le.sp+1,env:le.env,pluck:[],action:le.action}))},labeled:function(ve,le){var me=le.env,Te=ve.label,ye=le.sp+1;Te&&(me=te(le.env),le.env[Te]=ye),ve.pick&&le.pluck.push(ye);var Re=De(ve.expression,{sp:le.sp,env:me,action:null});return Te&&ve.labelLocation&&N&&N.output==="source-and-map"?re([T.SOURCE_MAP_LABEL_PUSH,ye,F.add(Te),J(ve.labelLocation)],Re,[T.SOURCE_MAP_LABEL_POP,ye]):Re},text:function(ve,le){return re([T.PUSH_CURR_POS],De(ve.expression,{sp:le.sp+1,env:te(le.env),action:null}),ee(ve.match||0,[T.IF_NOT_ERROR],re([T.POP],[T.TEXT]),[T.NIP]))},simple_and:function(ve,le){return ue(ve.expression,!1,le)},simple_not:function(ve,le){return ue(ve.expression,!0,le)},optional:function(ve,le){return re(De(ve.expression,{sp:le.sp,env:te(le.env),action:null}),ee(-(ve.expression.match||0),[T.IF_ERROR],re([T.POP],[T.PUSH_NULL]),[]))},zero_or_more:function(ve,le){var me=De(ve.expression,{sp:le.sp+1,env:te(le.env),action:null});return re([T.PUSH_EMPTY_ARRAY],me,de(me),[T.POP])},one_or_more:function(ve,le){var me=De(ve.expression,{sp:le.sp+1,env:te(le.env),action:null});return re([T.PUSH_EMPTY_ARRAY],me,ee(ve.expression.match||0,[T.IF_NOT_ERROR],re(de(me),[T.POP]),re([T.POP],[T.POP],[T.PUSH_FAILED])))},repeated:function(ve,le){var me=ve.min?ve.min:ve.max,Te=me.type!=="constant"||me.value>0,ye=ve.max.type!=="constant"&&ve.max.value!==null,Re=Te?2:1,qe=ve.min?_e(ve.min,le.env,le.sp,2+(ve.max.type==="function"?1:0)):{pre:[],post:[],sp:le.sp},ke=_e(ve.max,le.env,qe.sp,Re),ze=De(ve.expression,{sp:ke.sp+Re,env:te(le.env),action:null}),Ne=ve.delimiter!==null?De(ve.expression,{sp:ke.sp+Re+1,env:te(le.env),action:null}):ze,Pe=be(ve.delimiter,ve.expression.match||0,Ne,le,Re),Me=Ee(Pe,ve.max),Ie=ye?Ee(ze,ve.max):ze,Le=re(Te?[T.PUSH_CURR_POS]:[],[T.PUSH_EMPTY_ARRAY],Ie,de(Me),[T.POP]);return re(qe.pre,ke.pre,Te?ge(Le,me):Le,ke.post,qe.post)},group:function(ve,le){return De(ve.expression,{sp:le.sp,env:te(le.env),action:null})},semantic_and:function(ve,le){return ce(ve,!1,le)},semantic_not:function(ve,le){return ce(ve,!0,le)},rule_ref:function(ve){return[T.RULE,R.indexOfRule(I,ve.name)]},library_ref:function(ve){return[T.LIBRARY_RULE,ve.libraryNumber,V.add(ve.name)]},literal:function(ve){if(ve.value.length>0){var le=ve.match||0,me=le===D||le===M&&!ve.ignoreCase?F.add(ve.ignoreCase?ve.value.toLowerCase():ve.value):-1,Te=le!==M?G.add({type:"literal",value:ve.value,ignoreCase:ve.ignoreCase}):-1;return ee(le,ve.ignoreCase?[T.MATCH_STRING_IC,me]:[T.MATCH_STRING,me],ve.ignoreCase?[T.ACCEPT_N,ve.value.length]:[T.ACCEPT_STRING,me],[T.FAIL,Te])}return[T.PUSH_EMPTY_STRING]},class:function(ve){var le=ve.match||0,me=le===D?H.add(ve):-1,Te=le!==M?G.add({type:"class",value:ve.parts,inverted:ve.inverted,ignoreCase:ve.ignoreCase,unicode:ve.unicode}):-1;return ee(le,[ve.unicode?T.MATCH_UNICODE_CLASS:T.MATCH_CHAR_CLASS,me],[T.ACCEPT_N,ve.unicode?-1:1],[T.FAIL,Te])},any:function(ve){var le=ve.match||0,me=le!==M?G.add({type:"any"}):-1;return ee(le,[T.MATCH_ANY],[T.ACCEPT_N,1],[T.FAIL,me])}});De(I)},R=he(),T=Ht(),A=K(),k=tr(),q=ht(),M=q.ALWAYS_MATCH,D=q.SOMETIMES_MATCH,L=q.NEVER_MATCH;v.exports=S}),lr=U(function(_){var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_.encode=function(S){if(0<=S&&S<v.length)return v[S];throw new TypeError("Must be between 0 and 63: "+S)}}),pr=U(function(_){var v=function(q){return q<0?(-q<<1)+1:(q<<1)+0},S=lr(),R=5,T=1<<R,A=T-1,k=T;_.encode=function(q){var M="",D,L=v(q);do D=L&A,L>>>=R,L>0&&(D|=k),M+=S.encode(D);while(L>0);return M}}),mt=U(function(_){var v=function(ee,ne,oe){if(ne in ee)return ee[ne];if(arguments.length===3)return oe;throw new Error('"'+ne+'" is a required argument.')},S=function(ee){return ee},R=function(ee){return A(ee)?"$"+ee:ee},T=function(ee){return A(ee)?ee.slice(1):ee},A=function(ee){if(!ee)return!1;var ne=ee.length;if(ne<9||ee.charCodeAt(ne-1)!==95||ee.charCodeAt(ne-2)!==95||ee.charCodeAt(ne-3)!==111||ee.charCodeAt(ne-4)!==116||ee.charCodeAt(ne-5)!==111||ee.charCodeAt(ne-6)!==114||ee.charCodeAt(ne-7)!==112||ee.charCodeAt(ne-8)!==95||ee.charCodeAt(ne-9)!==95)return!1;for(var oe=ne-10;oe>=0;oe--)if(ee.charCodeAt(oe)!==36)return!1;return!0},k=function(ee,ne){return ee===ne?0:ee===null?1:ne===null?-1:ee>ne?1:-1},q=function(ee,ne){var oe=ee.generatedLine-ne.generatedLine;return oe!==0||(oe=ee.generatedColumn-ne.generatedColumn,oe!==0)||(oe=k(ee.source,ne.source),oe!==0)||(oe=ee.originalLine-ne.originalLine,oe!==0)||(oe=ee.originalColumn-ne.originalColumn,oe!==0)?oe:k(ee.name,ne.name)},M=function(ee){return function(ne){var oe=N(ne),ue=I(ne),ce=new URL(ne,ue);ee(ce);var de=ce.toString();return oe==="absolute"?de:oe==="scheme-relative"?de.slice(W.length):oe==="path-absolute"?de.slice(X.length):F(ue,de)}},D=function(ee,ne){return new URL(ee,ne).toString()},L=function(ee,ne){var oe=0;do{var ue=ee+oe++;if(ne.indexOf(ue)===-1)return ue}while(!0)},I=function(ee){for(var ne=ee.split("..").length-1,oe=L("p",ee),ue="".concat(X,"/"),ce=0;ce<ne;ce++)ue+="".concat(oe,"/");return ue},N=function(ee){return ee[0]==="/"?ee[1]==="/"?"scheme-relative":"path-absolute":J.test(ee)?"absolute":"path-relative"},F=function(ee,ne){typeof ee=="string"&&(ee=new URL(ee)),typeof ne=="string"&&(ne=new URL(ne));var oe=ne.pathname.split("/"),ue=ee.pathname.split("/");for(ue.length>0&&!ue[ue.length-1]&&ue.pop();oe.length>0&&ue.length>0&&oe[0]===ue[0];)oe.shift(),ue.shift();return ue.map(function(){return".."}).concat(oe).join("/")+ne.search+ne.hash},H=function(ee,ne){var oe=N(ne),ue=N(ee);if(ee=te(ee),oe==="absolute")return D(ne,void 0);if(ue==="absolute")return D(ne,ee);if(oe==="scheme-relative")return re(ne);if(ue==="scheme-relative")return D(ne,D(ee,X)).slice(W.length);if(oe==="path-absolute")return re(ne);if(ue==="path-absolute")return D(ne,D(ee,X)).slice(X.length);var ce=I(ne+ee),de=D(ne,D(ee,ce));return F(ce,de)},G=function(ee,ne){var oe=V(ee,ne);return typeof oe=="string"?oe:re(ne)},V=function(ee,ne){if(N(ee)!==N(ne))return null;var oe=I(ee+ne),ue=new URL(ee,oe),ce=new URL(ne,oe);try{new URL("",ce.toString())}catch{return null}return ce.protocol!==ue.protocol||ce.user!==ue.user||ce.password!==ue.password||ce.hostname!==ue.hostname||ce.port!==ue.port?null:F(ue,ce)};_.getArg=v;var j=(function(){return!("__proto__"in Object.create(null))})();_.toSetString=j?S:R,_.fromSetString=j?S:T,_.compareByGeneratedPositionsInflated=q;var W="http:",X="".concat(W,"//host"),J=/^[A-Za-z0-9\+\-\.]+:/,te=M(function(ee){ee.pathname=ee.pathname.replace(/\/?$/,"/")}),re=M(function(ee){});_.normalize=re,_.join=H,_.relative=G}),yr=U(function(_){var v=(function(){function S(){_class_call_check(this,S),this._array=[],this._set=new Map}return _create_class(S,[{key:"size",value:function(){return this._set.size}},{key:"add",value:function(R,T){var A=this.has(R),k=this._array.length;(!A||T)&&this._array.push(R),A||this._set.set(R,k)}},{key:"has",value:function(R){return this._set.has(R)}},{key:"indexOf",value:function(R){var T=this._set.get(R);if(T>=0)return T;throw new Error('"'+R+'" is not in the set.')}},{key:"at",value:function(R){if(R>=0&&R<this._array.length)return this._array[R];throw new Error("No element indexed by "+R)}},{key:"toArray",value:function(){return this._array.slice()}}],[{key:"fromArray",value:function(R,T){for(var A=new S,k=0,q=R.length;k<q;k++)A.add(R[k],T);return A}}]),S})();_.ArraySet=v}),xr=U(function(_){var v=function(T,A){var k=T.generatedLine,q=A.generatedLine,M=T.generatedColumn,D=A.generatedColumn;return q>k||q==k&&D>=M||S.compareByGeneratedPositionsInflated(T,A)<=0},S=mt(),R=(function(){function T(){_class_call_check(this,T),this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return _create_class(T,[{key:"unsortedForEach",value:function(A,k){this._array.forEach(A,k)}},{key:"add",value:function(A){v(this._last,A)?(this._last=A,this._array.push(A)):(this._sorted=!1,this._array.push(A))}},{key:"toArray",value:function(){return this._sorted||(this._array.sort(S.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}]),T})();_.MappingList=R}),Jt=U(function(_){var v=pr(),S=mt(),R=yr().ArraySet,T=xr().MappingList,A=(function(){function k(q){_class_call_check(this,k),q||(q={}),this._file=S.getArg(q,"file",null),this._sourceRoot=S.getArg(q,"sourceRoot",null),this._skipValidation=S.getArg(q,"skipValidation",!1),this._sources=new R,this._names=new R,this._mappings=new T,this._sourcesContents=null}return _create_class(k,[{key:"addMapping",value:function(q){var M=S.getArg(q,"generated"),D=S.getArg(q,"original",null),L=S.getArg(q,"source",null),I=S.getArg(q,"name",null);this._skipValidation||this._validateMapping(M,D,L,I),L!=null&&(L=String(L),this._sources.has(L)||this._sources.add(L)),I!=null&&(I=String(I),this._names.has(I)||this._names.add(I)),this._mappings.add({generatedLine:M.line,generatedColumn:M.column,originalLine:D&&D.line,originalColumn:D&&D.column,source:L,name:I})}},{key:"setSourceContent",value:function(q,M){var D=q;this._sourceRoot!=null&&(D=S.relative(this._sourceRoot,D)),M!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[S.toSetString(D)]=M):this._sourcesContents&&(delete this._sourcesContents[S.toSetString(D)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}},{key:"applySourceMap",value:function(q,M,D){var L=M;if(M==null){if(q.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);L=q.file}var I=this._sourceRoot;I!=null&&(L=S.relative(I,L));var N=this._mappings.toArray().length>0?new R:this._sources,F=new R;this._mappings.unsortedForEach(function(H){if(H.source===L&&H.originalLine!=null){var G=q.originalPositionFor({line:H.originalLine,column:H.originalColumn});G.source!=null&&(H.source=G.source,D!=null&&(H.source=S.join(D,H.source)),I!=null&&(H.source=S.relative(I,H.source)),H.originalLine=G.line,H.originalColumn=G.column,G.name!=null&&(H.name=G.name))}var V=H.source;V!=null&&!N.has(V)&&N.add(V);var j=H.name;j!=null&&!F.has(j)&&F.add(j)},this),this._sources=N,this._names=F,q.sources.forEach(function(H){var G=q.sourceContentFor(H);G!=null&&(D!=null&&(H=S.join(D,H)),I!=null&&(H=S.relative(I,H)),this.setSourceContent(H,G))},this)}},{key:"_validateMapping",value:function(q,M,D,L){if(M&&typeof M.line!="number"&&typeof M.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(q&&"line"in q&&"column"in q&&q.line>0&&q.column>=0&&!M&&!D&&!L)&&!(q&&"line"in q&&"column"in q&&M&&"line"in M&&"column"in M&&q.line>0&&q.column>=0&&M.line>0&&M.column>=0&&D))throw new Error("Invalid mapping: "+JSON.stringify({generated:q,source:D,original:M,name:L}))}},{key:"_serializeMappings",value:function(){for(var M=0,D=1,L=0,I=0,N=0,F=0,H="",G,V,j,W,X=this._mappings.toArray(),J=0,te=X.length;J<te;J++){if(V=X[J],G="",V.generatedLine!==D)for(M=0;V.generatedLine!==D;)G+=";",D++;else if(J>0){if(!S.compareByGeneratedPositionsInflated(V,X[J-1]))continue;G+=","}G+=v.encode(V.generatedColumn-M),M=V.generatedColumn,V.source!=null&&(W=this._sources.indexOf(V.source),G+=v.encode(W-F),F=W,G+=v.encode(V.originalLine-1-I),I=V.originalLine-1,G+=v.encode(V.originalColumn-L),L=V.originalColumn,V.name!=null&&(j=this._names.indexOf(V.name),G+=v.encode(j-N),N=j)),H+=G}return H}},{key:"_generateSourcesContent",value:function(q,M){return q.map(function(D){if(!this._sourcesContents)return null;M!=null&&(D=S.relative(M,D));var L=S.toSetString(D);return Object.prototype.hasOwnProperty.call(this._sourcesContents,L)?this._sourcesContents[L]:null},this)}},{key:"toJSON",value:function(){var M={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(M.file=this._file),this._sourceRoot!=null&&(M.sourceRoot=this._sourceRoot),this._sourcesContents&&(M.sourcesContent=this._generateSourcesContent(M.sources,M.sourceRoot)),M}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"fromSourceMap",value:function(q){var M=q.sourceRoot,D=new k({file:q.file,sourceRoot:M});return q.eachMapping(function(L){var I={generated:{line:L.generatedLine,column:L.generatedColumn}};L.source!=null&&(I.source=L.source,M!=null&&(I.source=S.relative(M,I.source)),I.original={line:L.originalLine,column:L.originalColumn},L.name!=null&&(I.name=L.name)),D.addMapping(I)}),q.sources.forEach(function(L){var I=L;M!=null&&(I=S.relative(M,L)),D._sources.has(I)||D._sources.add(I);var N=q.sourceContentFor(L);N!=null&&D.setSourceContent(L,N)}),D}}]),k})();A.prototype._version=3,_.SourceMapGenerator=A}),Ar=U(function(_){var v=Jt().SourceMapGenerator,S=mt(),R=/(\r?\n)/,T=10,A="$$$isSourceNode$$$",k=(function(){function q(M,D,L,I,N){_class_call_check(this,q),this.children=[],this.sourceContents={},this.line=M??null,this.column=D??null,this.source=L??null,this.name=N??null,this[A]=!0,I!=null&&this.add(I)}return _create_class(q,[{key:"add",value:function(M){if(Array.isArray(M))M.forEach(function(D){this.add(D)},this);else if(M[A]||typeof M=="string")M&&this.children.push(M);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+M);return this}},{key:"prepend",value:function(M){if(Array.isArray(M))for(var D=M.length-1;D>=0;D--)this.prepend(M[D]);else if(M[A]||typeof M=="string")this.children.unshift(M);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+M);return this}},{key:"walk",value:function(M){for(var D,L=0,I=this.children.length;L<I;L++)D=this.children[L],D[A]?D.walk(M):D!==""&&M(D,{source:this.source,line:this.line,column:this.column,name:this.name})}},{key:"join",value:function(M){var D,L,I=this.children.length;if(I>0){for(D=[],L=0;L<I-1;L++)D.push(this.children[L]),D.push(M);D.push(this.children[L]),this.children=D}return this}},{key:"replaceRight",value:function(M,D){var L=this.children[this.children.length-1];return L[A]?L.replaceRight(M,D):typeof L=="string"?this.children[this.children.length-1]=L.replace(M,D):this.children.push("".replace(M,D)),this}},{key:"setSourceContent",value:function(M,D){this.sourceContents[S.toSetString(M)]=D}},{key:"walkSourceContents",value:function(M){for(var D=0,L=this.children.length;D<L;D++)this.children[D][A]&&this.children[D].walkSourceContents(M);for(var I=Object.keys(this.sourceContents),N=0,F=I.length;N<F;N++)M(S.fromSetString(I[N]),this.sourceContents[I[N]])}},{key:"toString",value:function(){var D="";return this.walk(function(L){D+=L}),D}},{key:"toStringWithSourceMap",value:function(M){var D={code:"",line:1,column:0},L=new v(M),I=!1,N=null,F=null,H=null,G=null;return this.walk(function(V,j){D.code+=V,j.source!==null&&j.line!==null&&j.column!==null?((N!==j.source||F!==j.line||H!==j.column||G!==j.name)&&L.addMapping({source:j.source,original:{line:j.line,column:j.column},generated:{line:D.line,column:D.column},name:j.name}),N=j.source,F=j.line,H=j.column,G=j.name,I=!0):I&&(L.addMapping({generated:{line:D.line,column:D.column}}),N=null,I=!1);for(var W=0,X=V.length;W<X;W++)V.charCodeAt(W)===T?(D.line++,D.column=0,W+1===X?(N=null,I=!1):I&&L.addMapping({source:j.source,original:{line:j.line,column:j.column},generated:{line:D.line,column:D.column},name:j.name})):D.column++}),this.walkSourceContents(function(V,j){L.setSourceContent(V,j)}),{code:D.code,map:L}}}],[{key:"fromStringWithSourceMap",value:function(M,D,L){var I=new q,N=M.split(R),F=0,H=function(){var te=ee(),re=ee()||"";return te+re;function ee(){return F<N.length?N[F++]:void 0}},G=1,V=0,j=null,W;return D.eachMapping(function(J){if(j!==null)if(G<J.generatedLine)X(j,H()),G++,V=0;else{W=N[F]||"";var te=W.substr(0,J.generatedColumn-V);N[F]=W.substr(J.generatedColumn-V),V=J.generatedColumn,X(j,te),j=J;return}for(;G<J.generatedLine;)I.add(H()),G++;V<J.generatedColumn&&(W=N[F]||"",I.add(W.substr(0,J.generatedColumn)),N[F]=W.substr(J.generatedColumn),V=J.generatedColumn),j=J},this),F<N.length&&(j&&X(j,H()),I.add(N.splice(F).join(""))),D.sources.forEach(function(J){var te=D.sourceContentFor(J);te!=null&&(L!=null&&(J=S.join(L,J)),I.setSourceContent(J,te))}),I;function X(J,te){if(J===null||J.source===void 0)I.add(te);else{var re=L?S.join(L,J.source):J.source;I.add(new q(J.originalLine,J.originalColumn,re,te,J.name))}}}}]),q})();_.SourceNode=k}),Kt=U(function(_){_.SourceMapGenerator=Jt().SourceMapGenerator,_.SourceNode=Ar().SourceNode}),Rr=U(function(_,v){var S=Kt(),R=S.SourceNode,T=Ve(),A=(function(){function k(q,M,D,L){_class_call_check(this,k),this.sp=-1,this.maxSp=-1,this.varName=M,this.ruleName=q,this.type=D,this.bytecode=L,this.labels={},this.sourceMapStack=[]}return _create_class(k,[{key:"name",value:function(q){if(q<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack underflow: attempt to use a variable '").concat(this.varName,"<x>' at an index ").concat(q,`.
Bytecode: `).concat(this.bytecode));return this.varName+q}},{key:"push",value:function(q){++this.sp>this.maxSp&&(this.maxSp=this.sp);var M=this.labels[this.sp],D=[this.name(this.sp)," = ",q,";"];if(M)if(this.sourceMapStack.length){var L=k.sourceNode(M.location,D.splice(0,2),M.label),I=this.sourceMapPopInternal(),N=I.parts,F=I.location,H=F.start.offset<M.location.end.offset?{start:M.location.end,end:F.end,source:F.source}:F,G=k.sourceNode(H,D.concat(`
`));return this.sourceMapStack.push([N,N.length+1,F]),new R(null,null,M.location.source,[L,G])}else return k.sourceNode(M.location,D.concat(`
`));return D.join("")}},{key:"pop",value:function(q){var M=this;return q!==void 0?(this.sp-=q,Array.from({length:q},function(D,L){return M.name(M.sp+1+L)})):this.name(this.sp--)}},{key:"top",value:function(){return this.name(this.sp)}},{key:"index",value:function(q){if(q<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack overflow: attempt to get a variable at a negative index ").concat(q,`.
Bytecode: `).concat(this.bytecode));return this.name(this.sp-q)}},{key:"result",value:function(){if(this.maxSp<0)throw new RangeError("Rule '".concat(this.ruleName,`': The variable stack is empty, can't get the result.
Bytecode: `).concat(this.bytecode));return this.name(0)}},{key:"defines",value:function(){var M=this;return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},function(D,L){return M.name(L)}).join(", ")+";"}},{key:"checkedIf",value:function(q,M,D){var L=this.sp,I=M();if(!D)return[I];var N=this.sp;this.sp=L;var F=D();if(N!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+q+": Branches of a condition can't move the stack pointer differently (before: "+L+", after then: "+N+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[I,F]}},{key:"checkedLoop",value:function(q,M){var D=this.sp,L=M();if(D!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+q+": Body of a loop can't move the stack pointer (before: "+D+", after: "+this.sp+"). Bytecode: "+this.bytecode);return L}},{key:"sourceMapPush",value:function(q,M){if(this.sourceMapStack.length){var D=this.sourceMapStack[this.sourceMapStack.length-1];D[2].start.offset===M.start.offset&&D[2].end.offset>M.end.offset&&(D[2]={start:M.end,end:D[2].end,source:D[2].source})}this.sourceMapStack.push([q,q.length,M])}},{key:"sourceMapPopInternal",value:function(){var M=this.sourceMapStack.pop();if(!M)throw new RangeError("Rule '".concat(this.ruleName,`': Attempting to pop an empty source map stack.
Bytecode: `).concat(this.bytecode));var D=_sliced_to_array(M,3),L=D[0],I=D[1],N=D[2],F=L.splice(I).map(function(G){return _instanceof(G,R)?G:G+`
`});if(F.length){var H=T.offsetStart(N);L.push(new R(H.line,H.column-1,String(N.source),F))}return{parts:L,location:N}}},{key:"sourceMapPop",value:function(q){var M=this.sourceMapPopInternal(),D=M.location;if(this.sourceMapStack.length&&D.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){var L=this.sourceMapPopInternal(),I=L.parts,N=L.location,F=N.start.offset<D.end.offset?{start:D.end,end:N.end,source:N.source}:N;this.sourceMapStack.push([I,I.length+(q||0),F])}}}],[{key:"sourceNode",value:function(q,M,D){var L=T.offsetStart(q);return new R(L.line,L.column?L.column-1:null,String(q.source),M,D)}}]),k})();v.exports=A}),es=U(function(_){_.version="5.0.6"}),Qe=U(function(_){var v=function(k){return k.codePointAt(0).toString(16).toUpperCase()},S=function(k){return(typeof k>"u"?"undefined":_type_of(k))=="object"?"\\\\".concat(k.value):k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(q){return"\\u{".concat(v(q),"}")}).replace(/[\x00-\x0F]/g,function(q){return"\\x0"+v(q)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(q){return"\\x"+v(q)}).replace(/[\u0100-\u0FFF]/g,function(q){return"\\u0"+v(q)}).replace(/[\u1000-\uFFFF]/g,function(q){return"\\u"+v(q)})},R=function(k){return(typeof k>"u"?"undefined":_type_of(k))=="object"?"\\".concat(k.value):k.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(q){return"\\x0"+v(q)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(q){return"\\x"+v(q)}).replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(q){return"\\u{"+v(q)+"}"}).replace(/[\u0100-\u0FFF]/g,function(q){return"\\u0"+v(q)}).replace(/[\u1000-\uFFFF]/g,function(q){return"\\u"+v(q)})},T=function(k){for(var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=k.length%3,D=k.length-M,L="",I=0;I<D;I+=3)L+=q[k[I]>>2],L+=q[(k[I]&3)<<4|k[I+1]>>4],L+=q[(k[I+1]&15)<<2|k[I+2]>>6],L+=q[k[I+2]&63];return M===1?(L+=q[k[D]>>2],L+=q[(k[D]&3)<<4],L+="=="):M===2&&(L+=q[k[D]>>2],L+=q[(k[D]&3)<<4|k[D+1]>>4],L+=q[(k[D+1]&15)<<2],L+="="),L},A=function(k){var q=k[Symbol.iterator](),M=q.next();return M.done||!q.next().done?-1:M.value.codePointAt(0)};_.hex=v,_.stringEscape=S,_.regexpClassEscape=R,_.base64=T,_.codePointLen1=A}),ts=U(function(_,v){var S=function(q,M){M=M!==void 0?M:{};var D={},L=M.grammarSource,I={Grammar:_n,ImportsAndSource:Fi},N=_n,F="import",H=";",G=",",V="*",j="as",W="{",X="}",J="from",te="=",re="/",ee="@",ne=":",oe="|",ue="..",ce="(",de=")",pe=".",_e=`
`,Ee=`\r
`,ge="/*",be="*/",Ae="//",De="\\",ve="i",le='"',me="'",Te="[",ye="^",Re="]",qe="p",ke="_",ze="u",Ne="-",Pe="0",Me="b",Ie="f",Le="n",nt="r",lt="t",dt="v",pt="x",We=/^[!$&]/,wt=/^[*-+?]/,st=/^[!&]/,St=/^[\0-\uD7FF\uE000-\uFFFF]/,gt=/^[\uD800-\uDBFF]/,Et=/^[\uDC00-\uDFFF]/,xt=/^[\uD800-\uDFFF]/,Lt=RegExp("^[\\t\\v-\\f \\p{Zs}\\xA0\\uFEFF]","u"),zt=/^[\n\r\u2028\u2029]/,jt=/^[\r\u2028-\u2029]/,At=RegExp("^[\\p{ID_Start}_]","u"),Ot=RegExp("^[$\\p{ID_Continue}]","u"),Ct=/^[\n\r"\\\u2028-\u2029]/,bt=/^[\n\r'\\\u2028-\u2029]/,et=/^[a-z]/i,we=/^[\n\r\\-\]\u2028-\u2029]/,Fe=/^["'\\]/,Ge=/^[0-9pux]/,Ze=/^[0-9]/,rt=/^[0-9a-f]/i,_t=/^[{}]/,ot=vl(),Tt=Gt("import",!1),Rt=Gt(";",!1),qt=Gt(",",!1),Nt=Gt("*",!1),yt=Gt("as",!1),vt=Gt("{",!1),Dt=Gt("}",!1),It=Gt("from",!1),or=Gt("=",!1),Vt=Gt("/",!1),ur=Gt("@",!1),dr=Gt(":",!1),sr=qr(["!","$","&"],!1,!1,!1),rr=qr([["*","+"],"?"],!1,!1,!1),_r=Gt("|",!1),Pr=Gt("..",!1),Er=Gt("(",!1),kn=Gt(")",!1),Fr=Gt(".",!1),Tr=qr(["!","&"],!1,!1,!1),zr=qr([["\0",""],["",""]],!1,!1,!1),Sn=qr([["\uD800","\uDBFF"]],!1,!1,!1),Kr=qr([["\uDC00","\uDFFF"]],!1,!1,!1),Wr=qr([["\uD800","\uDFFF"]],!1,!1,!1),pn=da("whitespace"),wa=qr(["	",["\v","\f"]," ","\\p{Zs}","","\uFEFF"],!1,!1,!0),Xr=qr([`
`,"\r","\u2028","\u2029"],!1,!1,!1),ti=da("end of line"),Ca=Gt(`
`,!1),Ea=Gt(`\r
`,!1),Ia=qr(["\r",["\u2028","\u2029"]],!1,!1,!1),Ra=da("comment"),Lr=Gt("/*",!1),oa=Gt("*/",!1),is=Gt("//",!1),En=da("identifier"),Xn=qr(["\\p{ID_Start}","_"],!1,!1,!0),Hn=Gt("\\",!1),Di=qr(["$","\\p{ID_Continue}"],!1,!1,!0),Mi=da("literal"),ss=Gt("i",!1),gn=da("string"),la=Gt('"',!1),Rn=Gt("'",!1),en=qr([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),xn=qr([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),Us=da("character class"),os=Gt("[",!1),ls=Gt("^",!1),us=Gt("]",!1),Tu=Gt("p",!0),qn=Gt("_",!1),Gs=qr([["a","z"]],!1,!0,!1),cs=Gt("u",!1),js=Gt("-",!1),ri=qr([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),el=Gt("0",!1),tl=qr(['"',"'","\\"],!1,!1,!1),ni=Gt("b",!1),Au=Gt("f",!1),rl=Gt("n",!1),nl=Gt("r",!1),Ws=Gt("t",!1),ku=Gt("v",!1),qu=qr([["0","9"],"p","u","x"],!1,!1,!1),fs=Gt("x",!1),ua=qr([["0","9"]],!1,!1,!1),Ys=qr([["0","9"],["a","f"]],!1,!0,!1),Qs=da("code block"),ca=qr(["{","}"],!1,!1,!1);function ai(Q,se,Se,xe){return{type:"grammar",imports:Q,topLevelInitializer:se,initializer:Se,rules:xe,location:Xt()}}function al(Q,se){return[Q,se]}function Zs(Q){return{type:"top_level_initializer",code:Q,codeLocation:Xt()}}function il(Q){return{type:"top_level_initializer",code:Q,codeLocation:Xt()}}function Bi(Q,se){return{type:"grammar_import",what:Q,from:se,location:Xt()}}function fa(Q){return{type:"grammar_import",what:[],from:Q,location:Xt()}}function Js(Q,se){return se?(se.unshift(Q),se):[Q]}function Oi(Q){return{type:"import_binding_default",binding:Q[0],location:Q[1]}}function Ta(Q){return[{type:"import_binding_all",binding:Q[0],location:Q[1]}]}function eo(){return[]}function hs(Q,se){return{type:"import_binding_rename",rename:Q[0],renameLocation:Q[1],binding:se[0],location:se[1]}}function sl(Q){return{type:"import_binding",binding:Q[0],location:Q[1]}}function ds(Q){return{type:"import_module_specifier",module:Q,location:Xt()}}function ps(Q){return[Q,Xt()]}function ol(Q){return[Q,Xt()]}function wn(Q){return Oa.has(Q[0])&&Aa(`Binding identifier can't be a reserved word "`.concat(Q[0],'"'),Q[1]),Q[0]}function $a(Q){return{type:"top_level_initializer",code:Q[0],codeLocation:Q[1],location:Xt()}}function gs(Q){return{type:"initializer",code:Q[0],codeLocation:Q[1],location:Xt()}}function Li(Q,se,Se){return{type:"rule",name:Q[0],nameLocation:Q[1],expression:se!==null?{type:"named",name:se,expression:Se,location:Xt()}:Se,location:Xt()}}function Du(Q,se){return se.length>0?{type:"choice",alternatives:[Q].concat(se),location:Xt()}:Q}function to(Q,se){return se!==null?{type:"action",expression:Q,code:se[0],codeLocation:se[1],location:Xt()}:Q}function ro(Q,se){return se.length>0||Q.type==="labeled"&&Q.pick?{type:"sequence",elements:[Q].concat(se),location:Xt()}:Q}function Pi(Q,se,Se){return Se.type.startsWith("semantic_")&&Aa('"@" cannot be used on a semantic predicate',Q),{type:"labeled",label:se!==null?se[0]:null,labelLocation:se!==null?se[1]:Q,pick:!0,expression:Se,location:Xt()}}function vs(Q,se){return{type:"labeled",label:Q[0],labelLocation:Q[1],expression:se,location:Xt()}}function ll(){return Xt()}function Mu(Q){return Oa.has(Q[0])&&Aa(`Label can't be a reserved word "`.concat(Q[0],'"'),Q[1]),Q}function Bu(Q,se){return{type:R[Q],expression:se,location:Xt()}}function Ou(Q,se){return{type:T[se],expression:Q,location:Xt()}}function no(Q,se,Se){var xe=se[0],Be=se[1];return Be.type==="constant"&&Be.value===0&&Aa("The maximum count of repetitions of the rule must be > 0",Be.location),{type:"repeated",min:xe,max:Be,expression:Q,delimiter:Se,location:Xt()}}function Lu(Q,se){return[Q!==null?Q:{type:"constant",value:0},se!==null?se:{type:"constant",value:null}]}function Pu(Q){return[null,Q]}function Iu(Q){return{type:"constant",value:Q,location:Xt()}}function $u(Q){return{type:"variable",value:Q[0],location:Xt()}}function Nu(Q){return{type:"function",value:Q[0],codeLocation:Q[1],location:Xt()}}function ul(Q){return Q.type==="labeled"||Q.type==="sequence"?{type:"group",expression:Q,location:Xt()}:Q}function Fu(Q,se){return{type:"library_ref",name:se[0],library:Q[0],libraryNumber:-1,location:Xt()}}function zu(Q){return{type:"rule_ref",name:Q[0],location:Xt()}}function Hu(Q,se){return{type:A[Q],code:se[0],codeLocation:se[1],location:Xt()}}function Vu(Q,se){return[Q+se.join(""),Xt()]}function ao(Q,se){return{type:"literal",value:Q,ignoreCase:se!==null,location:Xt()}}function Uu(Q){return Q.join("")}function Gu(Q){return Q.join("")}function ju(Q,se,Se){if(Q&&se.length===0)if(Se.unicode)se=[["\uD800","\uDFFF"]];else return{type:"any",location:Xt()};return{type:"class",parts:se.filter(function(xe){return xe!==""}),inverted:!!Q,ignoreCase:!!Se.ignoreCase,location:Xt(),unicode:!!Se.unicode||se.flat().some(function(xe){return(typeof xe>"u"?"undefined":_type_of(xe))=="object"&&xe.unicode||xe.codePointAt(0)>65535})}}function cl(Q){try{new RegExp("[\\".concat(Q,"]"),"u")}catch{Aa("Invalid Unicode property escape")}return{type:"classEscape",value:Q,unicode:!0,location:Xt()}}function Ku(Q){var se=Object.fromEntries(Q);return Object.keys(se).length!==Q.length&&Aa("Invalid flags"),se}function Wu(){return["ignoreCase",!0]}function Yu(){return["unicode",!0]}function Xu(Q,se){return Q.codePointAt(0)>se.codePointAt(0)&&Aa("Invalid character range: "+nc()+"."),[Q,se]}function Qu(){return""}function Zu(){return"\0"}function Ju(){return"\b"}function ec(){return"\f"}function tc(){return`
`}function io(){return"\r"}function Ii(){return"	"}function rc(){return"\v"}function fl(Q){return String.fromCharCode(parseInt(Q,16))}function hl(Q){return String.fromCharCode(parseInt(Q,16))}function dl(Q){return String.fromCodePoint(parseInt(Q,16))}function pl(){return{type:"any",location:Xt()}}function gl(Q){return[Q,Xt()]}function ii(Q){return parseInt(Q,10)}var ae=M.peg$currPos|0,kt=ae,si=[{line:1,column:1}],Dn=ae,$i=M.peg$maxFailExpected||[],Ue=M.peg$silentFails|0,ha;if(M.startRule){if(!(M.startRule in I))throw new Error(`Can't start parsing from rule "`+M.startRule+'".');N=I[M.startRule]}function nc(){return q.substring(kt,ae)}function Xt(){return ys(kt,ae)}function Aa(Q,se){throw se=se!==void 0?se:ys(kt,ae),ac(Q,se)}function Ni(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ae,se=q.codePointAt(Q);return se===void 0?"":String.fromCodePoint(se)}function Gt(Q,se){return{type:"literal",text:Q,ignoreCase:se}}function qr(Q,se,Se,xe){return{type:"class",parts:Q,inverted:se,ignoreCase:Se,unicode:xe}}function vl(){return{type:"any"}}function ml(){return{type:"end"}}function da(Q){return{type:"other",description:Q}}function yl(Q){var se=si[Q],Se;if(se)return se;if(Q>=si.length)Se=si.length-1;else for(Se=Q;!si[--Se];);for(se=si[Se],se={line:se.line,column:se.column};Se<Q;)q.charCodeAt(Se)===10?(se.line++,se.column=1):se.column++,Se++;return si[Q]=se,se}function ys(Q,se,Se){var xe=yl(Q),Be=yl(se),Xe={source:L,start:{offset:Q,line:xe.line,column:xe.column},end:{offset:se,line:Be.line,column:Be.column}};return Xe}function it(Q){ae<Dn||(ae>Dn&&(Dn=ae,$i=[]),$i.push(Q))}function ac(Q,se){return new k(Q,null,null,se)}function ic(Q,se,Se){return new k(k.buildMessage(Q,se),Q,se,Se)}function _n(){var Q,se,Se,xe,Be,Xe,Ut,Mr;if(Q=ae,se=so(),Se=ae,xe=Pt(),Be=Fa(),Be!==D?Se=Be:(ae=Se,Se=D),Se===D&&(Se=null),xe=ae,Be=Pt(),Xe=wl(),Xe!==D?xe=Xe:(ae=xe,xe=D),xe===D&&(xe=null),Be=Pt(),Xe=[],Ut=ae,Mr=ho(),Mr!==D?(Pt(),Ut=Mr):(ae=Ut,Ut=D),Ut!==D)for(;Ut!==D;)Xe.push(Ut),Ut=ae,Mr=ho(),Mr!==D?(Pt(),Ut=Mr):(ae=Ut,Ut=D);else Xe=D;return Xe!==D?(kt=Q,Q=ai(se,Se,xe,Xe)):(ae=Q,Q=D),Q}function Fi(){var Q,se,Se;return Q=ae,se=Sl(),Se=bl(),kt=Q,Q=al(se,Se),Q}function bl(){var Q,se,Se,xe;for(Q=ae,se=ae,Se=[],q.length>ae?(xe=q.charAt(ae),ae++):(xe=D,Ue===0&&it(ot));xe!==D;)Se.push(xe),q.length>ae?(xe=q.charAt(ae),ae++):(xe=D,Ue===0&&it(ot));return se=q.substring(se,ae),kt=Q,se=Zs(se),Q=se,Q}function Sl(){var Q,se;return Q=ae,se=ae,so(),se=q.substring(se,ae),kt=Q,se=il(se),Q=se,Q}function so(){var Q,se;for(Q=[],se=oo();se!==D;)Q.push(se),se=oo();return Q}function oo(){var Q,se,Se,xe,Be,Xe,Ut,Mr;return Q=ae,Pt(),q.substr(ae,6)===F?(se=F,ae+=6):(se=D,Ue===0&&it(Tt)),se!==D?(Pt(),Se=lo(),Se!==D?(xe=Pt(),Be=zi(),Be!==D?(Xe=ae,Ut=Pt(),q.charCodeAt(ae)===59?(Mr=H,ae++):(Mr=D,Ue===0&&it(Rt)),Mr!==D?(Ut=[Ut,Mr],Xe=Ut):(ae=Xe,Xe=D),Xe===D&&(Xe=null),kt=Q,Q=Bi(Se,Be)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ae,Pt(),q.substr(ae,6)===F?(se=F,ae+=6):(se=D,Ue===0&&it(Tt)),se!==D?(Pt(),Se=ka(),Se!==D?(xe=ae,Be=Pt(),q.charCodeAt(ae)===59?(Xe=H,ae++):(Xe=D,Ue===0&&it(Rt)),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D),xe===D&&(xe=null),kt=Q,Q=fa(Se)):(ae=Q,Q=D)):(ae=Q,Q=D)),Q}function lo(){var Q,se,Se,xe,Be;return Q=Na(),Q===D&&(Q=bs(),Q===D&&(Q=ae,se=sc(),se!==D?(Se=ae,Pt(),q.charCodeAt(ae)===44?(xe=G,ae++):(xe=D,Ue===0&&it(qt)),xe!==D?(Pt(),Be=Na(),Be===D&&(Be=bs()),Be!==D?Se=Be:(ae=Se,Se=D)):(ae=Se,Se=D),Se===D&&(Se=null),kt=Q,Q=Js(se,Se)):(ae=Q,Q=D))),Q}function sc(){var Q,se;return Q=ae,se=pa(),se!==D&&(kt=Q,se=Oi(se)),Q=se,Q}function Na(){var Q,se,Se,xe;return Q=ae,q.charCodeAt(ae)===42?(se=V,ae++):(se=D,Ue===0&&it(Nt)),se!==D?(Pt(),q.substr(ae,2)===j?(Se=j,ae+=2):(Se=D,Ue===0&&it(yt)),Se!==D?(Pt(),xe=pa(),xe!==D?(kt=Q,Q=Ta(xe)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function bs(){var Q,se,Se,xe,Be,Xe;return Q=ae,q.charCodeAt(ae)===123?(se=W,ae++):(se=D,Ue===0&&it(vt)),se!==D?(Pt(),q.charCodeAt(ae)===125?(Se=X,ae++):(Se=D,Ue===0&&it(Dt)),Se!==D?(kt=Q,Q=eo()):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ae,q.charCodeAt(ae)===123?(se=W,ae++):(se=D,Ue===0&&it(vt)),se!==D?(Pt(),Se=uo(),Se!==D?(Pt(),xe=ae,q.charCodeAt(ae)===44?(Be=G,ae++):(Be=D,Ue===0&&it(qt)),Be!==D?(Xe=Pt(),Be=[Be,Xe],xe=Be):(ae=xe,xe=D),xe===D&&(xe=null),q.charCodeAt(ae)===125?(Be=X,ae++):(Be=D,Ue===0&&it(Dt)),Be!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D)),Q}function zi(){var Q,se,Se;return Q=ae,q.substr(ae,4)===J?(se=J,ae+=4):(se=D,Ue===0&&it(It)),se!==D?(Pt(),Se=ka(),Se!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D),Q}function uo(){var Q,se,Se,xe,Be,Xe,Ut;for(Q=ae,se=[],Se=co();Se!==D;)se.push(Se),Se=ae,xe=ae,Be=Pt(),q.charCodeAt(ae)===44?(Xe=G,ae++):(Xe=D,Ue===0&&it(qt)),Xe!==D?(Ut=Pt(),Be=[Be,Xe,Ut],xe=Be):(ae=xe,xe=D),xe!==D?(xe=co(),xe===D?(ae=Se,Se=D):Se=xe):Se=xe;return se.length<1?(ae=Q,Q=D):Q=se,Q}function co(){var Q,se,Se,xe;return Q=ae,se=fo(),se!==D?(Pt(),q.substr(ae,2)===j?(Se=j,ae+=2):(Se=D,Ue===0&&it(yt)),Se!==D?(Pt(),xe=pa(),xe!==D?(kt=Q,Q=hs(se,xe)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ae,se=pa(),se!==D&&(kt=Q,se=sl(se)),Q=se),Q}function ka(){var Q,se;return Q=ae,se=Qn(),se!==D&&(kt=Q,se=ds(se)),Q=se,Q}function pa(){var Q,se;return Q=ae,se=xl(),se!==D&&(kt=Q,se=ps(se)),Q=se,Q}function fo(){var Q,se;return Q=ga(),Q===D&&(Q=ae,se=Qn(),se!==D&&(kt=Q,se=ol(se)),Q=se),Q}function xl(){var Q,se;return Q=ae,se=ga(),se!==D&&(kt=Q,se=wn(se)),Q=se,Q}function Fa(){var Q,se,Se,xe,Be;return Q=ae,q.charCodeAt(ae)===123?(se=W,ae++):(se=D,Ue===0&&it(vt)),se!==D?(Se=Un(),Se!==D?(q.charCodeAt(ae)===125?(xe=X,ae++):(xe=D,Ue===0&&it(Dt)),xe!==D?(Be=Ba(),Be!==D?(kt=Q,Q=$a(Se)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function wl(){var Q,se,Se;return Q=ae,se=Un(),se!==D?(Se=Ba(),Se!==D?(kt=Q,Q=gs(se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function ho(){var Q,se,Se,xe,Be,Xe;return Q=ae,se=ga(),se!==D?(Pt(),Se=ae,xe=Qn(),xe!==D?(Pt(),Se=xe):(ae=Se,Se=D),Se===D&&(Se=null),q.charCodeAt(ae)===61?(xe=te,ae++):(xe=D,Ue===0&&it(or)),xe!==D?(Pt(),Be=Ss(),Be!==D?(Xe=Ba(),Xe!==D?(kt=Q,Q=Li(se,Se,Be)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Ss(){var Q,se,Se,xe,Be,Xe;if(Q=ae,se=po(),se!==D){for(Se=[],xe=ae,Pt(),q.charCodeAt(ae)===47?(Be=re,ae++):(Be=D,Ue===0&&it(Vt)),Be!==D?(Pt(),Xe=po(),Xe!==D?xe=Xe:(ae=xe,xe=D)):(ae=xe,xe=D);xe!==D;)Se.push(xe),xe=ae,Pt(),q.charCodeAt(ae)===47?(Be=re,ae++):(Be=D,Ue===0&&it(Vt)),Be!==D?(Pt(),Xe=po(),Xe!==D?xe=Xe:(ae=xe,xe=D)):(ae=xe,xe=D);kt=Q,Q=Du(se,Se)}else ae=Q,Q=D;return Q}function po(){var Q,se,Se,xe;return Q=ae,se=oc(),se!==D?(Se=ae,Pt(),xe=Un(),xe!==D?Se=xe:(ae=Se,Se=D),Se===D&&(Se=null),kt=Q,Q=to(se,Se)):(ae=Q,Q=D),Q}function oc(){var Q,se,Se,xe,Be;if(Q=ae,se=go(),se!==D){for(Se=[],xe=ae,Pt(),Be=go(),Be!==D?xe=Be:(ae=xe,xe=D);xe!==D;)Se.push(xe),xe=ae,Pt(),Be=go(),Be!==D?xe=Be:(ae=xe,xe=D);kt=Q,Q=ro(se,Se)}else ae=Q,Q=D;return Q}function go(){var Q,se,Se,xe;return Q=ae,se=_l(),se!==D?(Se=vo(),Se===D&&(Se=null),xe=Hi(),xe!==D?(kt=Q,Q=Pi(se,Se,xe)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ae,se=vo(),se!==D?(Se=Hi(),Se!==D?(kt=Q,Q=vs(se,Se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=Hi())),Q}function _l(){var Q,se;return Q=ae,q.charCodeAt(ae)===64?(se=ee,ae++):(se=D,Ue===0&&it(ur)),se!==D&&(kt=Q,se=ll()),Q=se,Q}function vo(){var Q,se,Se;return Q=ae,se=ga(),se!==D?(Pt(),q.charCodeAt(ae)===58?(Se=ne,ae++):(Se=D,Ue===0&&it(dr)),Se!==D?(Pt(),kt=Q,Q=Mu(se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Hi(){var Q,se,Se;return Q=ae,se=Vn(),se!==D?(Pt(),Se=Vi(),Se!==D?(kt=Q,Q=Bu(se,Se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=Vi()),Q}function Vn(){var Q;return Q=q.charAt(ae),We.test(Q)?ae++:(Q=D,Ue===0&&it(sr)),Q}function Vi(){var Q,se,Se;return Q=ae,se=ui(),se!==D?(Pt(),Se=Mn(),Se!==D?(kt=Q,Q=Ou(se,Se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=oi(),Q===D&&(Q=ui())),Q}function Mn(){var Q;return Q=q.charAt(ae),wt.test(Q)?ae++:(Q=D,Ue===0&&it(rr)),Q}function oi(){var Q,se,Se,xe,Be,Xe,Ut;return Q=ae,se=ui(),se!==D?(Pt(),q.charCodeAt(ae)===124?(Se=oe,ae++):(Se=D,Ue===0&&it(_r)),Se!==D?(Pt(),xe=mo(),xe!==D?(Pt(),Be=ae,q.charCodeAt(ae)===44?(Xe=G,ae++):(Xe=D,Ue===0&&it(qt)),Xe!==D?(Pt(),Ut=Ss(),Ut!==D?(Pt(),Be=Ut):(ae=Be,Be=D)):(ae=Be,Be=D),Be===D&&(Be=null),q.charCodeAt(ae)===124?(Xe=oe,ae++):(Xe=D,Ue===0&&it(_r)),Xe!==D?(kt=Q,Q=no(se,xe,Be)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function mo(){var Q,se,Se,xe;return Q=ae,se=li(),se===D&&(se=null),Pt(),q.substr(ae,2)===ue?(Se=ue,ae+=2):(Se=D,Ue===0&&it(Pr)),Se!==D?(Pt(),xe=li(),xe===D&&(xe=null),kt=Q,Q=Lu(se,xe)):(ae=Q,Q=D),Q===D&&(Q=ae,se=li(),se!==D&&(kt=Q,se=Pu(se)),Q=se),Q}function li(){var Q,se;return Q=ae,se=ba(),se!==D&&(kt=Q,se=Iu(se)),Q=se,Q===D&&(Q=ae,se=ga(),se!==D&&(kt=Q,se=$u(se)),Q=se,Q===D&&(Q=ae,se=Un(),se!==D&&(kt=Q,se=Nu(se)),Q=se)),Q}function ui(){var Q,se,Se,xe;return Q=On(),Q===D&&(Q=Gi(),Q===D&&(Q=Co(),Q===D&&(Q=yo(),Q===D&&(Q=za(),Q===D&&(Q=ae,q.charCodeAt(ae)===40?(se=ce,ae++):(se=D,Ue===0&&it(Er)),se!==D?(Pt(),Se=Ss(),Se!==D?(Pt(),q.charCodeAt(ae)===41?(xe=de,ae++):(xe=D,Ue===0&&it(kn)),xe!==D?(kt=Q,Q=ul(Se)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D)))))),Q}function yo(){var Q,se,Se,xe,Be,Xe,Ut,Mr;return Q=ae,se=ga(),se!==D?(q.charCodeAt(ae)===46?(Se=pe,ae++):(Se=D,Ue===0&&it(Fr)),Se!==D?(xe=ga(),xe!==D?(kt=Q,Q=Fu(se,xe)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ae,se=ga(),se!==D?(Se=ae,Ue++,xe=ae,Be=Pt(),Xe=ae,Ut=Qn(),Ut!==D?(Mr=Pt(),Ut=[Ut,Mr],Xe=Ut):(ae=Xe,Xe=D),Xe===D&&(Xe=null),q.charCodeAt(ae)===61?(Ut=te,ae++):(Ut=D,Ue===0&&it(or)),Ut!==D?(Be=[Be,Xe,Ut],xe=Be):(ae=xe,xe=D),Ue--,xe===D?Se=void 0:(ae=Se,Se=D),Se!==D?(kt=Q,Q=zu(se)):(ae=Q,Q=D)):(ae=Q,Q=D)),Q}function za(){var Q,se,Se;return Q=ae,se=Cl(),se!==D?(Pt(),Se=Un(),Se!==D?(kt=Q,Q=Hu(se,Se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Cl(){var Q;return Q=q.charAt(ae),st.test(Q)?ae++:(Q=D,Ue===0&&it(Tr)),Q}function hn(){var Q;return Q=ci(),Q===D&&(Q=lc()),Q}function ci(){var Q;return Q=q.charAt(ae),St.test(Q)?ae++:(Q=D,Ue===0&&it(zr)),Q}function lc(){var Q,se,Se,xe;return Q=ae,se=ae,Se=q.charAt(ae),gt.test(Se)?ae++:(Se=D,Ue===0&&it(Sn)),Se!==D?(xe=q.charAt(ae),Et.test(xe)?ae++:(xe=D,Ue===0&&it(Kr)),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D)):(ae=se,se=D),se!==D?Q=q.substring(Q,ae):Q=se,Q===D&&(Q=q.charAt(ae),xt.test(Q)?ae++:(Q=D,Ue===0&&it(Wr))),Q}function vn(){var Q;return Ue++,Q=Ni(),Lt.test(Q)?ae+=Q.length:(Q=D,Ue===0&&it(wa)),Ue--,Q===D&&Ue===0&&it(pn),Q}function Ha(){var Q;return Q=q.charAt(ae),zt.test(Q)?ae++:(Q=D,Ue===0&&it(Xr)),Q}function Bn(){var Q;return Ue++,q.charCodeAt(ae)===10?(Q=_e,ae++):(Q=D,Ue===0&&it(Ca)),Q===D&&(q.substr(ae,2)===Ee?(Q=Ee,ae+=2):(Q=D,Ue===0&&it(Ea)),Q===D&&(Q=q.charAt(ae),jt.test(Q)?ae++:(Q=D,Ue===0&&it(Ia)))),Ue--,Q===D&&Ue===0&&it(ti),Q}function bo(){var Q;return Ue++,Q=xs(),Q===D&&(Q=ws()),Ue--,Q===D&&Ue===0&&it(Ra),Q}function xs(){var Q,se,Se,xe,Be,Xe;if(Q=ae,q.substr(ae,2)===ge?(se=ge,ae+=2):(se=D,Ue===0&&it(Lr)),se!==D){for(Se=[],xe=ae,Be=ae,Ue++,q.substr(ae,2)===be?(Xe=be,ae+=2):(Xe=D,Ue===0&&it(oa)),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);xe!==D;)Se.push(xe),xe=ae,Be=ae,Ue++,q.substr(ae,2)===be?(Xe=be,ae+=2):(Xe=D,Ue===0&&it(oa)),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);q.substr(ae,2)===be?(xe=be,ae+=2):(xe=D,Ue===0&&it(oa)),xe!==D?(se=[se,Se,xe],Q=se):(ae=Q,Q=D)}else ae=Q,Q=D;return Q}function qa(){var Q,se,Se,xe,Be,Xe;if(Q=ae,q.substr(ae,2)===ge?(se=ge,ae+=2):(se=D,Ue===0&&it(Lr)),se!==D){for(Se=[],xe=ae,Be=ae,Ue++,q.substr(ae,2)===be?(Xe=be,ae+=2):(Xe=D,Ue===0&&it(oa)),Xe===D&&(Xe=Ha()),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);xe!==D;)Se.push(xe),xe=ae,Be=ae,Ue++,q.substr(ae,2)===be?(Xe=be,ae+=2):(Xe=D,Ue===0&&it(oa)),Xe===D&&(Xe=Ha()),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);q.substr(ae,2)===be?(xe=be,ae+=2):(xe=D,Ue===0&&it(oa)),xe!==D?(se=[se,Se,xe],Q=se):(ae=Q,Q=D)}else ae=Q,Q=D;return Q}function ws(){var Q,se,Se,xe,Be,Xe;if(Q=ae,q.substr(ae,2)===Ae?(se=Ae,ae+=2):(se=D,Ue===0&&it(is)),se!==D){for(Se=[],xe=ae,Be=ae,Ue++,Xe=Ha(),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);xe!==D;)Se.push(xe),xe=ae,Be=ae,Ue++,Xe=Ha(),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);se=[se,Se],Q=se}else ae=Q,Q=D;return Q}function ga(){var Q,se,Se,xe;if(Ue++,Q=ae,se=So(),se!==D){for(Se=[],xe=xo();xe!==D;)Se.push(xe),xe=xo();kt=Q,Q=Vu(se,Se)}else ae=Q,Q=D;return Ue--,Q===D&&(se=D,Ue===0&&it(En)),Q}function So(){var Q,se,Se;return Q=Ni(),At.test(Q)?ae+=Q.length:(Q=D,Ue===0&&it(Xn)),Q===D&&(Q=ae,q.charCodeAt(ae)===92?(se=De,ae++):(se=D,Ue===0&&it(Hn)),se!==D?(Se=Ma(),Se!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D)),Q}function xo(){var Q;return Q=Ni(),Ot.test(Q)?ae+=Q.length:(Q=D,Ue===0&&it(Di)),Q}function On(){var Q,se,Se;return Ue++,Q=ae,se=Qn(),se!==D?(q.charCodeAt(ae)===105?(Se=ve,ae++):(Se=D,Ue===0&&it(ss)),Se===D&&(Se=null),kt=Q,Q=ao(se,Se)):(ae=Q,Q=D),Ue--,Q===D&&(se=D,Ue===0&&it(Mi)),Q}function Qn(){var Q,se,Se,xe;if(Ue++,Q=ae,q.charCodeAt(ae)===34?(se=le,ae++):(se=D,Ue===0&&it(la)),se!==D){for(Se=[],xe=Va();xe!==D;)Se.push(xe),xe=Va();q.charCodeAt(ae)===34?(xe=le,ae++):(xe=D,Ue===0&&it(la)),xe!==D?(kt=Q,Q=Uu(Se)):(ae=Q,Q=D)}else ae=Q,Q=D;if(Q===D)if(Q=ae,q.charCodeAt(ae)===39?(se=me,ae++):(se=D,Ue===0&&it(Rn)),se!==D){for(Se=[],xe=Ui();xe!==D;)Se.push(xe),xe=Ui();q.charCodeAt(ae)===39?(xe=me,ae++):(xe=D,Ue===0&&it(Rn)),xe!==D?(kt=Q,Q=Gu(Se)):(ae=Q,Q=D)}else ae=Q,Q=D;return Ue--,Q===D&&(se=D,Ue===0&&it(gn)),Q}function Va(){var Q,se,Se,xe;return Q=ae,se=ae,Se=ae,Ue++,xe=q.charAt(ae),Ct.test(xe)?ae++:(xe=D,Ue===0&&it(en)),Ue--,xe===D?Se=void 0:(ae=Se,Se=D),Se!==D?(xe=hn(),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D)):(ae=se,se=D),se!==D?Q=q.substring(Q,ae):Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===92?(se=De,ae++):(se=D,Ue===0&&it(Hn)),se!==D?(Se=Cn(),Se!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ra())),Q}function Ui(){var Q,se,Se,xe;return Q=ae,se=ae,Se=ae,Ue++,xe=q.charAt(ae),bt.test(xe)?ae++:(xe=D,Ue===0&&it(xn)),Ue--,xe===D?Se=void 0:(ae=Se,Se=D),Se!==D?(xe=hn(),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D)):(ae=se,se=D),se!==D?Q=q.substring(Q,ae):Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===92?(se=De,ae++):(se=D,Ue===0&&it(Hn)),se!==D?(Se=Cn(),Se!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ra())),Q}function Gi(){var Q,se,Se,xe,Be,Xe;if(Ue++,Q=ae,q.charCodeAt(ae)===91?(se=Te,ae++):(se=D,Ue===0&&it(os)),se!==D){for(q.charCodeAt(ae)===94?(Se=ye,ae++):(Se=D,Ue===0&&it(ls)),Se===D&&(Se=null),xe=[],Be=Tn(),Be===D&&(Be=mr(),Be===D&&(Be=Qt()));Be!==D;)xe.push(Be),Be=Tn(),Be===D&&(Be=mr(),Be===D&&(Be=Qt()));q.charCodeAt(ae)===93?(Be=Re,ae++):(Be=D,Ue===0&&it(us)),Be!==D?(Xe=El(),kt=Q,Q=ju(Se,xe,Xe)):(ae=Q,Q=D)}else ae=Q,Q=D;return Ue--,Q===D&&(se=D,Ue===0&&it(Us)),Q}function Tn(){var Q,se,Se;return Q=ae,q.charCodeAt(ae)===92?(se=De,ae++):(se=D,Ue===0&&it(Hn)),se!==D?(Se=Ln(),Se!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Ln(){var Q,se,Se,xe,Be,Xe,Ut;return Q=ae,se=ae,Se=ae,xe=q.charAt(ae),xe.toLowerCase()===qe?ae++:(xe=D,Ue===0&&it(Tu)),xe!==D?(q.charCodeAt(ae)===123?(Be=W,ae++):(Be=D,Ue===0&&it(vt)),Be!==D?(Xe=Da(),Xe!==D?(q.charCodeAt(ae)===125?(Ut=X,ae++):(Ut=D,Ue===0&&it(Dt)),Ut!==D?(xe=[xe,Be,Xe,Ut],Se=xe):(ae=Se,Se=D)):(ae=Se,Se=D)):(ae=Se,Se=D)):(ae=Se,Se=D),Se!==D?se=q.substring(se,ae):se=Se,se!==D&&(kt=Q,se=cl(se)),Q=se,Q}function Da(){var Q,se,Se,xe;return Q=ae,se=Zn(),se!==D?(q.charCodeAt(ae)===61?(Se=te,ae++):(Se=D,Ue===0&&it(or)),Se!==D?(xe=Jn(),xe!==D?(se=[se,Se,xe],Q=se):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=va()),Q}function Zn(){var Q,se,Se;if(Q=ae,se=[],Se=Ki(),Se!==D)for(;Se!==D;)se.push(Se),Se=Ki();else se=D;return se!==D?Q=q.substring(Q,ae):Q=se,Q}function Jn(){var Q,se,Se;if(Q=ae,se=[],Se=ji(),Se!==D)for(;Se!==D;)se.push(Se),Se=ji();else se=D;return se!==D?Q=q.substring(Q,ae):Q=se,Q}function va(){var Q,se,Se;if(Q=ae,se=[],Se=ji(),Se!==D)for(;Se!==D;)se.push(Se),Se=ji();else se=D;return se!==D?Q=q.substring(Q,ae):Q=se,Q}function ji(){var Q;return Q=Ki(),Q===D&&(Q=hi()),Q}function Ki(){var Q;return Q=wo(),Q===D&&(q.charCodeAt(ae)===95?(Q=ke,ae++):(Q=D,Ue===0&&it(qn))),Q}function wo(){var Q;return Q=q.charAt(ae),et.test(Q)?ae++:(Q=D,Ue===0&&it(Gs)),Q}function El(){var Q,se,Se;for(Q=ae,se=[],Se=nn();Se!==D;)se.push(Se),Se=nn();return kt=Q,se=Ku(se),Q=se,Q}function nn(){var Q,se;return Q=ae,q.charCodeAt(ae)===105?(se=ve,ae++):(se=D,Ue===0&&it(ss)),se!==D&&(kt=Q,se=Wu()),Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===117?(se=ze,ae++):(se=D,Ue===0&&it(cs)),se!==D&&(kt=Q,se=Yu()),Q=se),Q}function mr(){var Q,se,Se,xe;return Q=ae,se=Qt(),se!==D?(q.charCodeAt(ae)===45?(Se=Ne,ae++):(Se=D,Ue===0&&it(js)),Se!==D?(xe=Qt(),xe!==D?(kt=Q,Q=Xu(se,xe)):(ae=Q,Q=D)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Qt(){var Q,se,Se,xe;return Q=ae,se=ae,Se=ae,Ue++,xe=q.charAt(ae),we.test(xe)?ae++:(xe=D,Ue===0&&it(ri)),Ue--,xe===D?Se=void 0:(ae=Se,Se=D),Se!==D?(xe=hn(),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D)):(ae=se,se=D),se!==D?Q=q.substring(Q,ae):Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===92?(se=De,ae++):(se=D,Ue===0&&it(Hn)),se!==D?(Se=Cn(),Se!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=ra())),Q}function ra(){var Q,se,Se;return Q=ae,q.charCodeAt(ae)===92?(se=De,ae++):(se=D,Ue===0&&it(Hn)),se!==D?(Se=Bn(),Se!==D?(kt=Q,Q=Qu()):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Cn(){var Q,se,Se,xe;return Q=_o(),Q===D&&(Q=ae,q.charCodeAt(ae)===48?(se=Pe,ae++):(se=D,Ue===0&&it(el)),se!==D?(Se=ae,Ue++,xe=hi(),Ue--,xe===D?Se=void 0:(ae=Se,Se=D),Se!==D?(kt=Q,Q=Zu()):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D&&(Q=fi(),Q===D&&(Q=Ma()))),Q}function _o(){var Q;return Q=ma(),Q===D&&(Q=Rl()),Q}function ma(){var Q,se;return Q=q.charAt(ae),Fe.test(Q)?ae++:(Q=D,Ue===0&&it(tl)),Q===D&&(Q=ae,q.charCodeAt(ae)===98?(se=Me,ae++):(se=D,Ue===0&&it(ni)),se!==D&&(kt=Q,se=Ju()),Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===102?(se=Ie,ae++):(se=D,Ue===0&&it(Au)),se!==D&&(kt=Q,se=ec()),Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===110?(se=Le,ae++):(se=D,Ue===0&&it(rl)),se!==D&&(kt=Q,se=tc()),Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===114?(se=nt,ae++):(se=D,Ue===0&&it(nl)),se!==D&&(kt=Q,se=io()),Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===116?(se=lt,ae++):(se=D,Ue===0&&it(Ws)),se!==D&&(kt=Q,se=Ii()),Q=se,Q===D&&(Q=ae,q.charCodeAt(ae)===118?(se=dt,ae++):(se=D,Ue===0&&it(ku)),se!==D&&(kt=Q,se=rc()),Q=se)))))),Q}function Rl(){var Q,se,Se,xe;return Q=ae,se=ae,Se=ae,Ue++,xe=Tl(),xe===D&&(xe=Ha()),Ue--,xe===D?Se=void 0:(ae=Se,Se=D),Se!==D?(xe=hn(),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D)):(ae=se,se=D),se!==D?Q=q.substring(Q,ae):Q=se,Q}function Tl(){var Q;return Q=ma(),Q===D&&(Q=q.charAt(ae),Ge.test(Q)?ae++:(Q=D,Ue===0&&it(qu))),Q}function fi(){var Q,se,Se,xe,Be,Xe;return Q=ae,q.charCodeAt(ae)===120?(se=pt,ae++):(se=D,Ue===0&&it(fs)),se!==D?(Se=ae,xe=ae,Be=Pn(),Be!==D?(Xe=Pn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D),xe!==D?Se=q.substring(Se,ae):Se=xe,Se!==D?(kt=Q,Q=fl(Se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q}function Ma(){var Q,se,Se,xe,Be,Xe,Ut,Mr;if(Q=ae,q.charCodeAt(ae)===117?(se=ze,ae++):(se=D,Ue===0&&it(cs)),se!==D?(Se=ae,xe=ae,Be=Pn(),Be!==D?(Xe=Pn(),Xe!==D?(Ut=Pn(),Ut!==D?(Mr=Pn(),Mr!==D?(Be=[Be,Xe,Ut,Mr],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D)):(ae=xe,xe=D)):(ae=xe,xe=D),xe!==D?Se=q.substring(Se,ae):Se=xe,Se!==D?(kt=Q,Q=hl(Se)):(ae=Q,Q=D)):(ae=Q,Q=D),Q===D)if(Q=ae,q.charCodeAt(ae)===117?(se=ze,ae++):(se=D,Ue===0&&it(cs)),se!==D)if(q.charCodeAt(ae)===123?(Se=W,ae++):(Se=D,Ue===0&&it(vt)),Se!==D){if(xe=ae,Be=[],Xe=Pn(),Xe!==D)for(;Xe!==D;)Be.push(Xe),Xe=Pn();else Be=D;Be!==D?xe=q.substring(xe,ae):xe=Be,xe!==D?(q.charCodeAt(ae)===125?(Be=X,ae++):(Be=D,Ue===0&&it(Dt)),Be!==D?(kt=Q,Q=dl(xe)):(ae=Q,Q=D)):(ae=Q,Q=D)}else ae=Q,Q=D;else ae=Q,Q=D;return Q}function hi(){var Q;return Q=q.charAt(ae),Ze.test(Q)?ae++:(Q=D,Ue===0&&it(ua)),Q}function Pn(){var Q;return Q=q.charAt(ae),rt.test(Q)?ae++:(Q=D,Ue===0&&it(Ys)),Q}function Co(){var Q,se;return Q=ae,q.charCodeAt(ae)===46?(se=pe,ae++):(se=D,Ue===0&&it(Fr)),se!==D&&(kt=Q,se=pl()),Q=se,Q}function Un(){var Q,se,Se,xe;return Ue++,Q=ae,q.charCodeAt(ae)===123?(se=W,ae++):(se=D,Ue===0&&it(vt)),se!==D?(Se=ya(),q.charCodeAt(ae)===125?(xe=X,ae++):(xe=D,Ue===0&&it(Dt)),xe!==D?Q=Se:(ae=Q,Q=D)):(ae=Q,Q=D),Ue--,Q===D&&(se=D,Ue===0&&it(Qs)),Q}function ya(){var Q,se;return Q=ae,se=na(),kt=Q,se=gl(se),Q=se,Q}function na(){var Q,se,Se,xe,Be,Xe;if(Q=ae,se=[],Se=[],xe=ae,Be=ae,Ue++,Xe=q.charAt(ae),_t.test(Xe)?ae++:(Xe=D,Ue===0&&it(ca)),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D),xe!==D)for(;xe!==D;)Se.push(xe),xe=ae,Be=ae,Ue++,Xe=q.charAt(ae),_t.test(Xe)?ae++:(Xe=D,Ue===0&&it(ca)),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);else Se=D;for(Se===D&&(Se=ae,q.charCodeAt(ae)===123?(xe=W,ae++):(xe=D,Ue===0&&it(vt)),xe!==D?(Be=na(),q.charCodeAt(ae)===125?(Xe=X,ae++):(Xe=D,Ue===0&&it(Dt)),Xe!==D?(xe=[xe,Be,Xe],Se=xe):(ae=Se,Se=D)):(ae=Se,Se=D));Se!==D;){if(se.push(Se),Se=[],xe=ae,Be=ae,Ue++,Xe=q.charAt(ae),_t.test(Xe)?ae++:(Xe=D,Ue===0&&it(ca)),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D),xe!==D)for(;xe!==D;)Se.push(xe),xe=ae,Be=ae,Ue++,Xe=q.charAt(ae),_t.test(Xe)?ae++:(Xe=D,Ue===0&&it(ca)),Ue--,Xe===D?Be=void 0:(ae=Be,Be=D),Be!==D?(Xe=hn(),Xe!==D?(Be=[Be,Xe],xe=Be):(ae=xe,xe=D)):(ae=xe,xe=D);else Se=D;Se===D&&(Se=ae,q.charCodeAt(ae)===123?(xe=W,ae++):(xe=D,Ue===0&&it(vt)),xe!==D?(Be=na(),q.charCodeAt(ae)===125?(Xe=X,ae++):(Xe=D,Ue===0&&it(Dt)),Xe!==D?(xe=[xe,Be,Xe],Se=xe):(ae=Se,Se=D)):(ae=Se,Se=D))}return Q=q.substring(Q,ae),Q}function ba(){var Q,se,Se,xe;if(Q=ae,se=ae,Se=[],xe=hi(),xe!==D)for(;xe!==D;)Se.push(xe),xe=hi();else Se=D;return Se!==D?se=q.substring(se,ae):se=Se,se!==D&&(kt=Q,se=ii(se)),Q=se,Q}function Pt(){var Q,se;for(Q=[],se=vn(),se===D&&(se=Bn(),se===D&&(se=bo()));se!==D;)Q.push(se),se=vn(),se===D&&(se=Bn(),se===D&&(se=bo()));return Q}function Eo(){var Q,se;for(Q=[],se=vn(),se===D&&(se=qa());se!==D;)Q.push(se),se=vn(),se===D&&(se=qa());return Q}function Ba(){var Q,se,Se,xe;if(Q=[],se=ae,Se=Pt(),q.charCodeAt(ae)===59?(xe=H,ae++):(xe=D,Ue===0&&it(Rt)),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D),se!==D)for(;se!==D;)Q.push(se),se=ae,Se=Pt(),q.charCodeAt(ae)===59?(xe=H,ae++):(xe=D,Ue===0&&it(Rt)),xe!==D?(Se=[Se,xe],se=Se):(ae=se,se=D);else Q=D;return Q===D&&(Q=ae,se=Eo(),Se=ws(),Se===D&&(Se=null),xe=Bn(),xe!==D?(se=[se,Se,xe],Q=se):(ae=Q,Q=D),Q===D&&(Q=ae,se=Pt(),Se=_s(),Se!==D?(se=[se,Se],Q=se):(ae=Q,Q=D))),Q}function _s(){var Q,se;return Q=ae,Ue++,q.length>ae?(se=q.charAt(ae),ae++):(se=D,Ue===0&&it(ot)),Ue--,se===D?Q=void 0:(ae=Q,Q=D),Q}var Oa=new Set(M.reservedWords);ha=N();var Hr=ha!==D&&ae===q.length;function Wi(){throw ha!==D&&ae<q.length&&it(ml()),ic($i,Dn<q.length?Ni(Dn):null,Dn<q.length?ys(Dn,Dn+1):ys(Dn,Dn))}if(M.peg$library)return{peg$result:ha,peg$currPos:ae,peg$FAILED:D,peg$maxFailExpected:$i,peg$maxFailPos:Dn,peg$success:Hr,peg$throw:Hr?void 0:Wi};if(Hr)return ha;Wi()},R={$:"text","&":"simple_and","!":"simple_not"},T={"?":"optional","*":"zero_or_more","+":"one_or_more"},A={"&":"semantic_and","!":"semantic_not"},k=(function(q){_inherits(M,q);function M(D,L,I,N){_class_call_check(this,M);var F;return F=_call_super(this,M,[D]),F.expected=L,F.found=I,F.location=N,F.name="SyntaxError",F}return _create_class(M,[{key:"format",value:function(D){var L=this,I="Error: "+this.message;if(this.location){var N=null,F=D.find(function(te){return te.source===L.location.source});F&&(N=F.text.split(/\r\n|\n|\r/g));var H=this.location.start,G=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(H):H,V=this.location.source+":"+G.line+":"+G.column;if(N){var j=this.location.end,W="".padEnd(G.line.toString().length," "),X=N[H.line-1],J=(H.line===j.line?j.column:X.length+1)-H.column||1;I+=`
 --> `+V+`
`+W+` |
`+G.line+" | "+X+`
`+W+" | "+"".padEnd(H.column-1," ")+"".padEnd(J,"^")}else I+=`
 at `+V}return I}}],[{key:"buildMessage",value:function(D,L){function I(J){return J.codePointAt(0).toString(16).toUpperCase()}var N=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function F(J){return N?J.replace(N,function(te){return"\\u{"+I(te)+"}"}):J}function H(J){return F(J.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(te){return"\\x0"+I(te)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(te){return"\\x"+I(te)}))}function G(J){return F(J.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(te){return"\\x0"+I(te)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(te){return"\\x"+I(te)}))}var V={literal:function(J){return'"'+H(J.text)+'"'},class:function(J){var te=J.parts.map(function(re){return Array.isArray(re)?G(re[0])+"-"+G(re[1]):G(re)});return"["+(J.inverted?"^":"")+te.join("")+"]"+(J.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(J){return J.description}};function j(J){return V[J.type](J)}function W(J){var te=J.map(j);if(te.sort(),te.length>0){for(var re=1,ee=1;ee<te.length;ee++)te[ee-1]!==te[ee]&&(te[re]=te[ee],re++);te.length=re}switch(te.length){case 1:return te[0];case 2:return te[0]+" or "+te[1];default:return te.slice(0,-1).join(", ")+", or "+te[te.length-1]}}function X(J){return J?'"'+H(J)+'"':"end of input"}return"Expected "+W(D)+" but "+X(L)+" found."}}]),M})(_wrap_native_super(SyntaxError));v.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:k,parse:S}}),Nr=U(function(_,v){var S=function(W,X,J){var te=G.offsetStart(X),re=te.line,ee=te.column-1,ne=W.split(`
`);return ne.length===1?new H(re,ee,String(X.source),W,J):new H(null,null,String(X.source),ne.map(function(oe,ue){return new H(re+ue,ue===0?ee:0,String(X.source),ue===ne.length-1?oe:[oe,`
`],J)}))},R=function(W,X,J,te,re){if(J){var ee=G.offsetEnd(J);return new H(null,null,String(J.source),[W,S(X,J,re),new H(ee.line,ee.column-1,String(J.source),te)])}return new H(null,null,null,[W,X,te])},T=function(W,X){if(!W.literals||!W.locations||!W.classes||!W.expectations||!W.functions||!W.importedNames)throw new Error("generateJS: generate bytecode was not called.");var J=W.literals,te=W.locations,re=W.classes,ee=W.expectations,ne=W.functions,oe=W.importedNames;if(!X.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");var ue=X.allowedStartRules,ce=X.dependencies||{};function de(ke){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ne=ke.match(/^\n*([ \t]+)/);return(Ne?ke.replace(new RegExp("^".concat(Ne[1]),"gm"),ze):ke).replace(/[ \t]+$/,"")}function pe(ke){var ze=!0,Ne=0;function Pe(Me){return Array.isArray(Me)?Me.map(function(Ie){return Pe(Ie)}):_instanceof(Me,H)?(Ne++,Me.children=Pe(Me.children),Ne--,Me):(ze?Me=Me.replace(/^(.+)$/gm,"  $1"):Me=Me.replace(/\n(\s*\S)/g,`
  $1`),ze=!Ne||Me.endsWith(`
`),Me)}return Pe(ke)}function _e(ke){return"peg$c"+ke}function Ee(ke){return"peg$r"+ke}function ge(ke){return"peg$e"+ke}function be(ke){return"peg$f"+ke}function Ae(ke){return"peg$import"+ke}function De(ke){return"peg$parse"+ke}function ve(){function ke(Me){return'"'+I(Me)+'"'}function ze(Me){return"/^["+(Me.inverted?"^":"")+Me.value.map(function(Ie){return Array.isArray(Ie)?N(Ie[0])+"-"+N(Ie[1]):N(Ie)}).join("")+"]/"+(Me.ignoreCase?"i":"")+(Me.unicode?"u":"")}function Ne(Me){switch(Me.type){case"rule":return'peg$otherExpectation("'+I(Me.value)+'")';case"literal":return'peg$literalExpectation("'+I(Me.value)+'", '+Me.ignoreCase+")";case"class":return"peg$classExpectation(["+Me.value.map(function(Ie){return Array.isArray(Ie)?'["'+I(Ie[0])+'", "'+I(Ie[1])+'"]':'"'+I(Ie)+'"'}).join(", ")+"], "+Me.inverted+", "+Me.ignoreCase+", "+Me.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(Me)+")")}}function Pe(Me,Ie){return R(`
  function `.concat(be(Ie),"(").concat(Me.params.join(", "),") {"),de(Me.body,"    "),Me.location,"  }")}return new H(null,null,X.grammarSource,[J.map(function(Me,Ie){return"  const "+_e(Ie)+" = "+ke(Me)+";"}).concat("",re.map(function(Me,Ie){return"  const "+Ee(Ie)+" = "+ze(Me)+";"})).concat("",ee.map(function(Me,Ie){return"  const "+ge(Ie)+" = "+Ne(Me)+";"})).concat("").join(`
`)].concat(_to_consumable_array(ne.map(Pe))))}function le(ke,ze){var Ne=[];return Ne.push(""),X.trace&&Ne.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+ke+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),X.cache&&(Ne.push("const key = peg$currPos * "+W.rules.length+" + "+ze+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),X.trace&&Ne.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ke+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ke+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),Ne.push("  return cached.result;","}","")),Ne}function me(ke,ze){var Ne=[];return X.cache&&Ne.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+ze+" };"),X.trace&&Ne.push("","if ("+ze+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ke+",","    result: "+ze+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ke+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),Ne.push("","return "+ze+";"),Ne}function Te(ke){var ze,Ne,Pe,Me=[],Ie=ke.bytecode,Le=new q(ke.name,"s","let",Ie);function nt(dt){var pt=function(){switch(dt[We]){case k.PUSH_EMPTY_STRING:st.push(Le.push("''")),We++;break;case k.PUSH_CURR_POS:st.push(Le.push("peg$currPos")),We++;break;case k.PUSH_UNDEFINED:st.push(Le.push("undefined")),We++;break;case k.PUSH_NULL:st.push(Le.push("null")),We++;break;case k.PUSH_FAILED:st.push(Le.push("peg$FAILED")),We++;break;case k.PUSH_EMPTY_ARRAY:st.push(Le.push("[]")),We++;break;case k.POP:Le.pop(),We++;break;case k.POP_CURR_POS:st.push("peg$currPos = "+Le.pop()+";"),We++;break;case k.POP_N:Le.pop(dt[We+1]),We+=2;break;case k.NIP:St=Le.pop(),Le.pop(),st.push(Le.push(St)),We++;break;case k.APPEND:St=Le.pop(),st.push(Le.top()+".push("+St+");"),We++;break;case k.WRAP:st.push(Le.push("["+Le.pop(dt[We+1]).join(", ")+"]")),We+=2;break;case k.TEXT:st.push(Le.push("input.substring("+Le.pop()+", peg$currPos)")),We++;break;case k.PLUCK:{var At=dt[We+3-1],Ot=3+At;St=dt.slice(We+3,We+Ot),St=At===1?Le.index(St[0]):"[ ".concat(St.map(function(rt){return Le.index(rt)}).join(", ")," ]"),Le.pop(dt[We+1]),st.push(Le.push(St)),We+=Ot;break}case k.IF:gt(Le.top(),0);break;case k.IF_ERROR:gt(Le.top()+" === peg$FAILED",0);break;case k.IF_NOT_ERROR:gt(Le.top()+" !== peg$FAILED",0);break;case k.IF_LT:gt(Le.top()+".length < "+dt[We+1],1);break;case k.IF_GE:gt(Le.top()+".length >= "+dt[We+1],1);break;case k.IF_LT_DYNAMIC:gt(Le.top()+".length < ("+Le.index(dt[We+1])+"|0)",1);break;case k.IF_GE_DYNAMIC:gt(Le.top()+".length >= ("+Le.index(dt[We+1])+"|0)",1);break;case k.WHILE_NOT_ERROR:zt(Le.top()+" !== peg$FAILED");break;case k.MATCH_ANY:gt("input.length > peg$currPos",0);break;case k.MATCH_STRING:{var Ct=dt[We+1],bt=J[Ct];Lt(function(rt,_t){return bt.length>1?"".concat(rt," === ").concat(_e(Ct)):(rt=_t?"".concat(rt,".charCodeAt(0)"):"input.charCodeAt(peg$currPos)","".concat(rt," === ").concat(bt.charCodeAt(0)))},1,bt.length);break}case k.MATCH_STRING_IC:{var et=dt[We+1];Lt(function(rt){return"".concat(rt,".toLowerCase() === ").concat(_e(et))},1,J[et].length);break}case k.MATCH_CHAR_CLASS:{var we=dt[We+1];Lt(function(rt){return"".concat(Ee(we),".test(").concat(rt,")")},1,1);break}case k.MATCH_UNICODE_CLASS:{var Fe=dt[We+1];Lt(function(rt){return"".concat(Ee(Fe),".test(").concat(rt,")")},1,-1);break}case k.ACCEPT_N:st.push(Le.push(Et(dt[We+1]))),st.push(xt(dt[We+1],Le.top())),We+=2;break;case k.ACCEPT_STRING:st.push(Le.push(_e(dt[We+1]))),st.push(J[dt[We+1]].length>1?"peg$currPos += "+J[dt[We+1]].length+";":"peg$currPos++;"),We+=2;break;case k.FAIL:st.push(Le.push("peg$FAILED")),st.push("if (peg$silentFails === 0) { peg$fail("+ge(dt[We+1])+"); }"),We+=2;break;case k.LOAD_SAVED_POS:st.push("peg$savedPos = "+Le.index(dt[We+1])+";"),We+=2;break;case k.UPDATE_SAVED_POS:st.push("peg$savedPos = peg$currPos;"),We++;break;case k.CALL:St=jt(4),Le.pop(dt[We+2]),st.push(Le.push(St)),We+=4+dt[We+3];break;case k.RULE:st.push(Le.push(De(W.rules[dt[We+1]].name)+"()")),We+=2;break;case k.LIBRARY_RULE:{var Ge=dt[We+2],Ze=Ge===-1?"":', "'+oe[Ge]+'"';st.push(Le.push("peg$callLibrary("+Ae(dt[We+1])+Ze+")")),We+=3;break}case k.SILENT_FAILS_ON:st.push("peg$silentFails++;"),We++;break;case k.SILENT_FAILS_OFF:st.push("peg$silentFails--;"),We++;break;case k.SOURCE_MAP_PUSH:Le.sourceMapPush(st,te[dt[We+1]]),We+=2;break;case k.SOURCE_MAP_POP:{Le.sourceMapPop(),We++;break}case k.SOURCE_MAP_LABEL_PUSH:Le.labels[dt[We+1]]={label:J[dt[We+2]],location:te[dt[We+3]]},We+=4;break;case k.SOURCE_MAP_LABEL_POP:delete Le.labels[dt[We+1]],We+=2;break;default:throw new Error("Invalid opcode: "+dt[We]+".")}},We=0,wt=dt.length,st=[],St;function gt(At,Ot,Ct){var bt,et,we=Ot+3,Fe=dt[We+we-2],Ge=dt[We+we-1],Ze=_sliced_to_array(Le.checkedIf(We,function(){return We+=we+Fe,(Ct||nt)(dt.slice(We-Fe,We))},Ge>0?function(){return We+=Ge,nt(dt.slice(We-Ge,We))}:null),2),rt=Ze[0],_t=Ze[1];st.push("if ("+At+") {"),(bt=st).push.apply(bt,_to_consumable_array(pe(rt))),Ge>0&&(st.push("} else {"),(et=st).push.apply(et,_to_consumable_array(pe(_t)))),st.push("}")}function Et(At){switch(At){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return"input.substr(peg$currPos, ".concat(At,")")}}function xt(At,Ot){switch(At){case-1:return"peg$currPos += ".concat(Ot,".length;");case 1:return"peg$currPos++;";default:return"peg$currPos += ("+At+");"}}function Lt(At,Ot,Ct){var bt=Ot+3,et=Et(Ct),we=null;dt[We+bt]===k.ACCEPT_N&&dt[We+bt+1]===Ct&&(st.push(Le.push(et)),et=Le.pop(),we=function(Fe){Le.sp++;var Ge=nt(Fe.slice(2));return Ge.unshift(xt(Ct,et)),Ge}),gt(At(et,we!==null),Ot,we)}function zt(At){var Ot,Ct=dt[We+2-1],bt=Le.checkedLoop(We,function(){return We+=2+Ct,nt(dt.slice(We-Ct,We))});st.push("while ("+At+") {"),(Ot=st).push.apply(Ot,_to_consumable_array(pe(bt))),st.push("}")}function jt(At){var Ot=dt[We+At-1];return be(dt[We+1])+"("+dt.slice(We+At,We+At+Ot).map(function(Ct){return Le.index(Ct)}).join(", ")+")"}for(;We<wt;)pt();return st}var lt=nt(Ie);return Me.push(R("function ",De(ke.name),ke.nameLocation,`() {
`,ke.name)),X.trace&&Me.push("  var startPos = peg$currPos;"),Me.push(pe(Le.defines())),(ze=Me).push.apply(ze,_to_consumable_array(pe(le('"'+I(ke.name)+'"',A.indexOfRule(W,ke.name))))),(Ne=Me).push.apply(Ne,_to_consumable_array(pe(lt))),(Pe=Me).push.apply(Pe,_to_consumable_array(pe(me('"'+I(ke.name)+'"',Le.result())))),Me.push("}"),Me.push(""),Me}function ye(ke){return ke.codeLocation?S(ke.code,ke.codeLocation,"$"+ke.type):ke.code}function Re(){var ke=[],ze=W.topLevelInitializer;if(ze)if(Array.isArray(ze)){if(X.format==="es"){var Ne=[],Pe=[],Me=!0,Ie=!1,Le=void 0;try{for(var nt=ze[Symbol.iterator](),lt;!(Me=(lt=nt.next()).done);Me=!0){var dt=lt.value,pt=_sliced_to_array(j(dt.code,{startRule:"ImportsAndSource",grammarSource:new G(dt.codeLocation.source,dt.codeLocation.start)}),2),We=pt[0],wt=pt[1];We.code?(Ne.push(We),Pe.push(wt)):Pe.push(dt)}}catch(Ge){Ie=!0,Le=Ge}finally{try{!Me&&nt.return!=null&&nt.return()}finally{if(Ie)throw Le}}ze=Pe.concat(Ne)}var st=ze.slice(0).reverse(),St=!0,gt=!1,Et=void 0;try{for(var xt=st[Symbol.iterator](),Lt;!(St=(Lt=xt.next()).done);St=!0){var zt=Lt.value;ke.push(ye(zt)),ke.push("")}}catch(Ge){gt=!0,Et=Ge}finally{try{!St&&xt.return!=null&&xt.return()}finally{if(gt)throw Et}}}else ke.push(ye(ze)),ke.push("");ke.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),X.trace&&ke.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");var jt=`{
`+ue.map(function(Ge){return"    ".concat(Ge,": ").concat(De(Ge),`,
`)}).join("")+"  }",At=De(ue[0]),Ot=!0,Ct=!1,bt=void 0;if(ke.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+jt+";","  let peg$startRuleFunction = "+At+";","",ve(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),X.cache&&ke.push("  let peg$resultsCache = {};",""),X.trace&&ke.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),ke.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),W.imports.length>0&&ke.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),W.rules.forEach(function(Ge){var Ze;(Ze=ke).push.apply(Ze,_to_consumable_array(pe(Te(Ge))))}),W.initializer)if(Array.isArray(W.initializer))try{for(var et=W.initializer[Symbol.iterator](),we;!(Ot=(we=et.next()).done);Ot=!0){var Fe=we.value;ke.push(ye(Fe)),ke.push("")}}catch(Ge){Ct=!0,bt=Ge}finally{try{!Ot&&et.return!=null&&et.return()}finally{if(Ct)throw bt}}else ke.push(ye(W.initializer)),ke.push("");return ke.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new H(null,null,X.grammarSource,ke.map(function(Ge){return _instanceof(Ge,H)?Ge:Ge+`
`}))}function qe(ke){function ze(){return["// @generated by Peggy ".concat(D,"."),"//","// https://peggyjs.org/"]}function Ne(){var Me=["{"];return X.trace&&Me.push("  DefaultTracer: peg$DefaultTracer,"),X.allowedStartRules&&Me.push("  StartRules: ["+X.allowedStartRules.map(function(Ie){return'"'+Ie+'"'}).join(", ")+"],"),Me.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),Me.push("}"),Me.join(`
`)}var Pe={bare:function(){if(Object.keys(ce).length>0||W.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return _to_consumable_array(ze()).concat(["(function() {",'  "use strict";',ke,pe("return "+Ne()+";"),"})()"])},commonjs:function(){var Ie=Object.keys(ce),Le=ze();Le.push("",'"use strict";'),Ie.length>0&&(Ie.forEach(function(dt){Le.push("const "+dt+' = require("'+I(ce[dt])+'");')}),Le.push(""));for(var nt=W.imports.length,lt=0;lt<nt;lt++)Le.push("const "+Ae(lt)+' = require("'+I(W.imports[lt].from.module)+'");');return Le.push("",ke,"","module.exports = "+Ne()+";"),Le},es:function(){var Ie=Object.keys(ce),Le=ze();Le.push(""),Ie.length>0&&(Ie.forEach(function(lt){Le.push("import "+lt+' from "'+I(ce[lt])+'";')}),Le.push(""));for(var nt=0;nt<W.imports.length;nt++)Le.push("import * as "+Ae(nt)+' from "'+I(W.imports[nt].from.module)+'";');return Le.push("",ke,""),Le.push("const peg$allowedStartRules = [","  "+(X.allowedStartRules?X.allowedStartRules.map(function(lt){return'"'+lt+'"'}).join(`,
  `):""),"];",""),Le.push("export {"),X.trace&&Le.push("  peg$DefaultTracer as DefaultTracer,"),Le.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),Le},amd:function(){if(W.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");var Ie=Object.keys(ce),Le="["+Ie.map(function(lt){return ce[lt]}).map(function(lt){return'"'+I(lt)+'"'}).join(", ")+"]",nt=Ie.join(", ");return _to_consumable_array(ze()).concat(["define("+Le+", function("+nt+") {",'  "use strict";',ke,"",pe("return "+Ne()+";"),"});"])},globals:function(){if(Object.keys(ce).length>0||W.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!X.exportVar)throw new Error("No export variable defined for format 'globals'.");return _to_consumable_array(ze()).concat(["(function(root) {",'  "use strict";',ke,"",pe("root."+X.exportVar+" = "+Ne()+";"),"})(this);"])},umd:function(){if(W.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");var Ie=Object.keys(ce),Le=Ie.map(function(We){return ce[We]}),nt="["+Le.map(function(We){return'"'+I(We)+'"'}).join(", ")+"]",lt=Le.map(function(We){return'require("'+I(We)+'")'}).join(", "),dt=Ie.join(", "),pt=ze();return pt.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+nt+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+lt+");"),X.exportVar&&pt.push("  } else {","    root."+X.exportVar+" = factory();"),pt.push("  }","})(this, function("+dt+") {",'  "use strict";',ke,"",pe("return "+Ne()+";"),"});"),pt}}[X.format||"bare"]();return new H(null,null,X.grammarSource,Pe.map(function(Me){return _instanceof(Me,H)?Me:Me+`
`}))}W.code=qe(Re())},A=he(),k=Ht(),q=Rr(),M=es(),D=M.version,L=Qe(),I=L.stringEscape,N=L.regexpClassEscape,F=Kt(),H=F.SourceNode,G=Ve(),V=ts(),j=V.parse;v.exports=T}),kr=U(function(_,v){var S=function(A,k,q){function M(L){return L.type==="rule"&&L.expression.type==="rule_ref"}function D(L,I,N){T.build({rule_ref:function(F){F.name===I&&(F.name=N,q.info('Proxy rule "'.concat(I,'" replaced by the rule "').concat(N,'"'),F.location,[{message:"This rule will be used",location:R.findRule(L,N).nameLocation}]))}})(L)}A.rules.forEach(function(L){M(L)&&D(A,L.name,L.expression.name)})},R=he(),T=K();v.exports=S}),jr=U(function(_,v){var S=function(G,V){var j=G,W=V;Object.keys(j).forEach(function(X){return delete j[X]}),Object.keys(W).forEach(function(X){j[X]=W[X]})},R=function(G){G.sort(function(ee,ne){var oe=_sliced_to_array(Array.isArray(ee)?ee:[ee,ee],2),ue=oe[0],ce=oe[1],de=_sliced_to_array(Array.isArray(ne)?ne:[ne,ne],2),pe=de[0],_e=de[1];return ue!==pe?ue<pe?-1:1:ce!==_e?ce>_e?-1:1:0});for(var V="",j="",W=0;W<G.length;W++){var X=G[W],J=_sliced_to_array(Array.isArray(X)?X:[X,X],2),te=J[0],re=J[1];if(typeof te=="string"&&typeof re=="string"&&typeof V=="string"&&typeof j=="string"){if(re<=j){G.splice(W--,1);continue}if(j.charCodeAt(0)+1>=te.charCodeAt(0)){G.splice(W--,1),G[W]=[V,j=re];continue}}V=te,j=re}return G},T=function(G,V){M.build({class:function(j){var W;if(j.unicode){var X=[],J=!0,te=!1,re=void 0;try{for(var ee=j.parts[Symbol.iterator](),ne;!(J=(ne=ee.next()).done);J=!0){var oe=ne.value;if(Array.isArray(oe)){var ue=_sliced_to_array(oe.map(function(pe){return pe.codePointAt(0)}),2),ce=ue[0],de=ue[1];ce<N&&de>F&&(V.info("Removing surrogate range from [".concat(q(oe[0]),"-").concat(q(oe[1]),"]"),j.location),X.push([H,oe[1]]),oe[1]=I)}}}catch(pe){te=!0,re=pe}finally{try{!J&&ee.return!=null&&ee.return()}finally{if(te)throw re}}(W=j.parts).push.apply(W,_to_consumable_array(X))}}})(G)},A=function(G,V,j){var W=Object.create(null);G.rules.forEach(function(ee){return W[ee.name]=ee.expression});var X=new Set;T(G,j);var J=[function(ee){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(ee.type){case"class":if(ee.inverted)break;return ne?_object_spread_props(_object_spread({},ee),{parts:_to_consumable_array(ee.parts)}):ee;case"literal":{var oe=L(ee.value);if(oe<0)break;return{type:"class",parts:[ee.value],inverted:!1,ignoreCase:ee.ignoreCase,location:ee.location,unicode:oe>65535}}case"rule_ref":{var ue=W[ee.name];if(!ue)break;X.has(ee.name)||(X.add(ee.name),re(ue));var ce=te(ue,!0);return ce&&(ce.location=ee.location),ce}}return null},M.build({choice:function(ee){var ne=null,oe=!1;ee.alternatives.forEach(function(ue,ce){var de;re(ue);var pe=te(ue);if(!pe){ne=null;return}ne&&ne.ignoreCase===pe.ignoreCase?((de=ne.parts).push.apply(de,_to_consumable_array(pe.parts)),ee.alternatives[ce-1]=ne,ee.alternatives[ce]=ne,ne.unicode=ne.unicode||pe.unicode,ne.location={source:ne.location.source,start:ne.location.start,end:pe.location.end},oe=!0):ne=pe}),oe&&(ee.alternatives=ee.alternatives.filter(function(ue,ce,de){return!ce||ue!==de[ce-1]}),ee.alternatives.forEach(function(ue,ce){ue.type==="class"&&(ue.parts=R(ue.parts),ue.parts.length===1&&!Array.isArray(ue.parts[0])&&typeof ue.parts[0]=="string"&&!ue.inverted&&(ee.alternatives[ce]={type:"literal",value:ue.parts[0],ignoreCase:ue.ignoreCase,location:ue.location}))}),ee.alternatives.length===1&&S(ee,ee.alternatives[0]))},text:function(ee){if(re(ee.expression),ee.expression.type==="class"||ee.expression.type==="literal"){var ne=ee.location;S(ee,ee.expression),ee.location=ne}}})],te=J[0],re=J[1];G.rules.forEach(function(ee){X.add(ee.name),re(ee.expression)})},k=Qe(),q=k.stringEscape,M=K(),D=Qe(),L=D.codePointLen1,I=String.fromCodePoint(55295),N=55296,F=57343,H=String.fromCodePoint(57344);v.exports=A}),Br=U(function(_,v){var S=function(T,A,k){var q=Object.create(null);T.rules.forEach(function(N){q[N.name]=N});for(var M=_to_consumable_array(A.allowedStartRules),D=new Set,L=R.build({rule_ref:function(N){M.push(N.name)}});M.length;){var I=M.shift();D.has(I)||(D.add(I),L(q[I]))}T.rules=T.rules.filter(function(N){return D.has(N.name)?!0:(k.info('Removing unused rule: "'.concat(N.name,'"'),N.location),!1)})},R=K();v.exports=S}),Gr=U(function(_,v){var S=function(R,T,A){var k={},q=!0,M=!1,D=void 0,L=!0,I=!1,N=void 0;try{for(var F=R.imports[Symbol.iterator](),H;!(L=(H=F.next()).done);L=!0){var G=H.value;try{for(var V=G.what[Symbol.iterator](),j;!(q=(j=V.next()).done);q=!0){var W=j.value;W.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(k,W.binding)&&A.error('Module "'.concat(W.binding,'" is already imported'),W.location,[{message:"Original module location",location:k[W.binding]}]),k[W.binding]=W.location)}}catch(X){M=!0,D=X}finally{try{!q&&V.return!=null&&V.return()}finally{if(M)throw D}}}}catch(X){I=!0,N=X}finally{try{!L&&F.return!=null&&F.return()}finally{if(I)throw N}}};v.exports=S}),Yr=U(function(_,v){var S=function(T,A,k){function q(L){var I={};return Object.keys(L).forEach(function(N){I[N]=L[N]}),I}function M(L,I){D(L.expression,q(I))}var D=R.build({rule:function(L){D(L.expression,{})},choice:function(L,I){L.alternatives.forEach(function(N){D(N,q(I))})},action:M,labeled:function(L,I){var N=L.label;N&&Object.prototype.hasOwnProperty.call(I,N)&&k.error('Label "'.concat(L.label,'" is already defined'),L.labelLocation,[{message:"Original label location",location:I[N]}]),D(L.expression,I),I[L.label]=L.labelLocation},text:M,simple_and:M,simple_not:M,optional:M,zero_or_more:M,one_or_more:M,repeated:function(L,I){L.delimiter&&D(L.delimiter,q(I)),D(L.expression,q(I))},group:M});D(T)},R=K();v.exports=S}),Jr=U(function(_,v){var S=function(T,A,k){var q={};R.build({rule:function(M){if(Object.prototype.hasOwnProperty.call(q,M.name)){k.error('Rule "'.concat(M.name,'" is already defined'),M.nameLocation,[{message:"Original rule location",location:q[M.name]}]);return}q[M.name]=M.nameLocation}})(T)},R=K();v.exports=S}),Qr=U(function(_,v){var S=function(A,k,q){var M=[],D=[],L=new Set,I=T.build({rule:function(N){q.errors>0||L.has(N.name)||(L.add(N.name),M.push(N.name),I(N.expression),M.pop())},sequence:function(N){q.errors>0||N.elements.every(function(F){return I(F),q.errors>0?!1:!R.alwaysConsumesOnSuccess(A,F)})},repeated:function(N){q.errors>0||(I(N.expression),N.delimiter&&!R.alwaysConsumesOnSuccess(A,N.expression)&&I(N.delimiter))},rule_ref:function(N){if(!(q.errors>0)){D.push(N);var F=R.findRule(A,N.name);if(M.indexOf(N.name)!==-1){M.push(N.name),q.error("Possible infinite loop when parsing (left recursion: "+M.join(" -> ")+")",F.nameLocation,D.map(function(H,G,V){return{message:G+1!==V.length?"Step ".concat(G+1,': call of the rule "').concat(H.name,'" without input consumption'):"Step ".concat(G+1,": calls itself without input consumption - left recursion"),location:H.location}}));return}F&&I(F),D.pop()}}});I(A)},R=he(),T=K();v.exports=S}),Zr=U(function(_,v){var S=function(A,k,q){var M=T.build({zero_or_more:function(D){R.alwaysConsumesOnSuccess(A,D.expression)||q.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",D.location)},one_or_more:function(D){R.alwaysConsumesOnSuccess(A,D.expression)||q.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",D.location)},repeated:function(D){if(D.delimiter&&M(D.delimiter),!(R.alwaysConsumesOnSuccess(A,D.expression)||D.delimiter&&R.alwaysConsumesOnSuccess(A,D.delimiter)))if(D.max.value===null)q.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",D.location);else{var L=D.min?D.min:D.max;q.warning(L.type==="constant"&&D.max.type==="constant"?"An expression may not consume any input and may always match ".concat(D.max.value," times"):"An expression may not consume any input and may always match with a maximum repetition count",D.location)}}});M(A)},R=he(),T=K();v.exports=S}),tn=U(function(_,v){var S=function(A,k,q){T.build({rule_ref:function(M){R.findRule(A,M.name)||q.error('Rule "'.concat(M.name,'" is not defined'),M.location)}})(A)},R=he(),T=K();v.exports=S}),rn=U(function(_,v){var S=function(T,A,k){var q=R.build({action:function(M){q(M.expression,M)},labeled:function(M,D){M.pick&&D&&k.error('"@" cannot be used with an action block',M.labelLocation,[{message:"Action block location",location:D.codeLocation}]),q(M.expression)}});q(T)},R=K();v.exports=S}),cn=U(function(_,v){var S=function(q,M,D){var L=R.build({choice:function(I){I.alternatives.forEach(function(H){return L(H)});for(var N=0;N<I.alternatives.length-1;N++){var F=I.alternatives[N];F.match===A&&D.warning("Always matches.  Following alternatives may not be reachable.",F.location)}},simple_and:function(I){L(I.expression),I.expression.match===A?D.warning("Always matches, making the & predicate redundant.",I.expression.location):I.expression.match===k&&D.warning("Never matches, making the & predicate always fail.",I.expression.location)},simple_not:function(I){L(I.expression),I.expression.match===A?D.warning("Always matches, making the ! predicate always fail.",I.expression.location):I.expression.match===k&&D.warning("Never matches, making the ! predicate redundant.",I.expression.location)}});L(q)},R=K(),T=ht(),A=T.ALWAYS_MATCH,k=T.NEVER_MATCH;v.exports=S}),an=U(function(_,v){var S=ft(),R=(function(){function A(k){_class_call_check(this,A),k=(typeof k>"u"?"undefined":_type_of(k))<"u"?k:{},typeof k.error=="function"&&(this.error=k.error),typeof k.warning=="function"&&(this.warning=k.warning),typeof k.info=="function"&&(this.info=k.info)}return _create_class(A,[{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}}]),A})(),T=(function(){function A(k){_class_call_check(this,A),this._callbacks=new R(k),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}return _create_class(A,[{key:"error",value:function(){for(var q=arguments.length,M=new Array(q),D=0;D<q;D++)M[D]=arguments[D];var L;++this.errors,this._firstError===null&&(this._firstError=_construct(S,_to_consumable_array(M)),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error"].concat(_to_consumable_array(M))),(L=this._callbacks).error.apply(L,[this.stage].concat(_to_consumable_array(M)))}},{key:"warning",value:function(){for(var q=arguments.length,M=new Array(q),D=0;D<q;D++)M[D]=arguments[D];var L;this.problems.push(["warning"].concat(_to_consumable_array(M))),(L=this._callbacks).warning.apply(L,[this.stage].concat(_to_consumable_array(M)))}},{key:"info",value:function(){for(var q=arguments.length,M=new Array(q),D=0;D<q;D++)M[D]=arguments[D];var L;this.problems.push(["info"].concat(_to_consumable_array(M))),(L=this._callbacks).info.apply(L,[this.stage].concat(_to_consumable_array(M)))}},{key:"checkErrors",value:function(){if(this.errors!==0)throw this._firstError}}]),A})();v.exports=T}),un=U(function(exports,module){var processOptions=function(_,v){var S={};return Object.keys(_).forEach(function(R){S[R]=_[R]}),Object.keys(v).forEach(function(R){Object.prototype.hasOwnProperty.call(S,R)||(S[R]=v[R])}),S},isSourceMapCapable=function(_){return typeof _=="string"?_.length>0:_&&typeof _.offset=="function"},addImportedRules=Xs(),fixLibraryNumbers=Ks(),generateBytecode=ir(),generateJS=Nr(),inferenceMatchResult=ht(),removeProxyRules=kr(),mergeCharacterClasses=jr(),removeUnusedRules=Br(),reportDuplicateImports=Gr(),reportDuplicateLabels=Yr(),reportDuplicateRules=Jr(),reportInfiniteRecursion=Qr(),reportInfiniteRepetition=Zr(),reportUndefinedRules=tn(),reportIncorrectPlucking=rn(),reportUnreachable=cn(),Session=an(),visitor=K(),base64=Qe().base64,compiler={visitor,passes:{prepare:[addImportedRules,reportInfiniteRecursion],check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRepetition,reportIncorrectPlucking,reportDuplicateImports],transform:[fixLibraryNumbers,removeProxyRules,mergeCharacterClasses,removeUnusedRules,inferenceMatchResult],semantic:[reportUnreachable],generate:[generateBytecode,generateJS]},compile:function compile(ast,passes,options){options=options!==void 0?options:{};var defaultStartRules=[ast.rules[0].name];if(options=processOptions(options,{allowedStartRules:defaultStartRules,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(options.allowedStartRules===null||options.allowedStartRules===void 0)&&(options.allowedStartRules=defaultStartRules),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");options.allowedStartRules.length===0&&(options.allowedStartRules=defaultStartRules);var allRules=ast.rules.map(function(_){return _.name}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(options.allowedStartRules.some(function(_){return _==="*"}))options.allowedStartRules=allRules;else try{for(var _iterator=options.allowedStartRules[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;if(allRules.indexOf(i)===-1)throw new Error('Unknown start rule "'.concat(i,'"'))}}catch(_){_didIteratorError=!0,_iteratorError=_}finally{try{!_iteratorNormalCompletion&&_iterator.return!=null&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");var session=new Session(options);switch(Object.keys(passes).forEach(function(_){session.stage=_,session.info("Process stage ".concat(_)),passes[_].forEach(function(v){session.info("Process pass ".concat(_,".").concat(v.name)),v(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if((typeof TextEncoder>"u"?"undefined":_type_of(TextEncoder))>"u")throw new Error("TextEncoder is not supported by this platform");var i=ast.code.toStringWithSourceMap(),n=new TextEncoder,e=base64(n.encode(JSON.stringify(i.map.toJSON())));return i.code+"//# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e,`
`)}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),Jl=ft(),Xl=Ve(),Ql=he(),Kl=un(),Zl=ts(),_es=es(),ea=_es.version,ta=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],Ke={VERSION:ea,RESERVED_WORDS:ta,GrammarError:Jl,GrammarLocation:Xl,parser:Zl,compiler:Kl,generate:function _(_,v){v=v!==void 0?v:{};function S(k){var q={};return Object.keys(k).forEach(function(M){q[M]=k[M].slice()}),q}var R="plugins"in v?v.plugins:[],T={parser:Ke.parser,passes:S(Ke.compiler.passes),reservedWords:Ke.RESERVED_WORDS.slice()};R.forEach(function(k){k.use(T,v)}),Array.isArray(_)||(_=[{source:v.grammarSource,text:_}]);var A=Ql.combine(_.map(function(k){var q=k.source,M=k.text;return T.parser.parse(M,{grammarSource:q,reservedWords:T.reservedWords})}));return Ke.compiler.compile(A,T.passes,v)}};return module.exports=Ke,__exports!=exports&&(module.exports=exports),module.exports})})(peggy_min$1,peggy_min$1.exports)),peggy_min$1.exports}var peggy_minExports=requirePeggy_min();const peggy=getDefaultExportFromCjs$1(peggy_minExports),grammarSource=`/*\r
 * CCS Grammar pro Peggy.js\r
 */\r
\r
{\r
  function node(type, props) {\r
    return { type, ...props, loc: location() };\r
  }\r
}\r
\r
Start\r
  = _ prog:Program _ { return prog; }\r
\r
Program\r
  = head:Definition tail:(_ Definition)* {\r
      return [head, ...tail.map(t => t[1])];\r
    }\r
\r
Definition\r
  = name:ProcessId _ "=" _ expr:Expression {\r
      return node("Definition", { name, process: expr });\r
    }\r
\r
\r
\r
Expression\r
  = head:ParallelComponent tail:(_ "+" _ ParallelComponent)* {\r
      if(tail.length === 0) {\r
        return head;\r
      }\r
      return tail.reduce((acc, curr) => \r
        node("Summation", { left: acc, right: curr[3] }), head);\r
    }\r
\r
\r
ParallelComponent\r
  = head:ActionComponent tail:(_ "|" _ ActionComponent)* {\r
      if(tail.length === 0) {\r
        return head;\r
      }\r
      return tail.reduce((acc, curr) => \r
        node("Parallel", { left: acc, right: curr[3] }), head);\r
    }\r
\r
\r
ActionComponent\r
  = action:Action _ "." _ next:ActionComponent {\r
      return node("Prefix", { action, next });\r
    }\r
  / TightComponent\r
\r
\r
\r
TightComponent\r
  = base:Primary ops:(_ (Restriction / Relabeling))* {\r
      return ops.reduce((acc, op) => {\r
        const operation = op[1];\r
        if(operation.type === "Restriction") {\r
          return node("Restriction", { process: acc, labels: operation.labels });\r
        } \r
        else {\r
          return node("Relabeling", { process: acc, relabels: operation.relabels });\r
        }\r
      }, base);\r
    }\r
\r
Restriction\r
  = "\\\\" _ "{" _ labels:LabelList _ "}" { return { type: "Restriction", labels }; }\r
\r
Relabeling\r
  = "[" _ relabels:RelabelList _ "]" { return { type: "Relabeling", relabels }; }\r
\r
\r
\r
Primary\r
  = "(" _ expr:Expression _ ")" { return expr; }\r
  / "0" { return node("Nil"); }\r
  / "Nil" { return node("Nil"); }\r
  / id:ProcessId { return node("ProcessRef", { name: id }); }\r
\r
\r
\r
Action\r
  = "tau" { return { label: "tau", isOutput: false }; }\r
  / "'" name:LabelName { return { label: name, isOutput: true }; } \r
  / name:LabelName { return { label: name, isOutput: false }; }\r
\r
LabelName "label"\r
  = head:[a-z] tail:[a-zA-Z0-9_]* { return head + tail.join(""); }\r
\r
ProcessId "process identifier"\r
  = head:[A-Z] tail:[a-zA-Z0-9_]* { return head + tail.join(""); }\r
\r
LabelList\r
  = head:LabelName tail:(_ "," _ LabelName)* { return [head, ...tail.map(t => t[3])]; }\r
\r
RelabelList\r
  = head:RelabelPair tail:(_ "," _ RelabelPair)* { return [head, ...tail.map(t => t[3])]; }\r
\r
RelabelPair\r
  = newLabel:LabelName _ "/" _ oldLabel:LabelName { return { new: newLabel, old: oldLabel }; }\r
\r
_ "whitespace"\r
  = (White / Comment)*\r
\r
White\r
  = [ \\t\\n\\r]+\r
\r
Comment\r
  = "//" [^\\n]*\r
  / "/*" (!"*/" .)* "*/"`;function ccsParser(){try{return peggy.generate(grammarSource)}catch(_){return console.error("Chyba pi generovn parseru: ",_),null}}function TextCCSParser({onInputChange:_,initValue:v}){const[S,R]=reactExports.useState(v??""),[T,A]=reactExports.useState(null),k=reactExports.useMemo(()=>{const M=ccsParser();return M===null&&A("CCS parser was not initialized."),M},[]),q=M=>{R(M)};return reactExports.useEffect(()=>{if(!k)return;const M=setTimeout(()=>{try{const D=k.parse(S);_?.(D),A(null)}catch(D){D.location?A(`Line ${D.location.start.line}, Col ${D.location.start.column}: ${D.message}`):A(D.message)}},300);return()=>{clearTimeout(M)}},[S,k]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{children:"CCS Parser"}),jsxRuntimeExports.jsx(TextEditor,{onTextChange:q,initValue:S}),T&&jsxRuntimeExports.jsxs("div",{className:"text-red-500 mt-2 text-sm",children:[" ",T]})]})}function generateId(){return"_"+Math.random().toString(36).substr(2,9)}function getActionLabel(_){return typeof _=="string"?_:_.name||_.label||_.value||"unknown"}function transformAstToCytoscape(_){const v=[],S=[],R=new Set;let T=0;_.forEach(k=>{R.has(k.name)||(v.push({data:{id:k.name,label:k.name,type:"process"}}),R.add(k.name))}),_.forEach(k=>{A(k.process,k.name)});function A(k,q){if(k)switch(k.type){case"Prefix":{const{action:M,next:D}=k,L=getActionLabel(M);if(D.type==="ProcessRef")S.push({data:{source:q,target:D.name,label:L}});else if(D.type==="Nil")R.has("Nil")||(v.push({data:{id:"Nil",label:"0",type:"nil"}}),R.add("Nil")),S.push({data:{source:q,target:"Nil",label:L}});else{const I=T++,N=`${q}_${k.type}_${I}`;v.push({data:{id:N,label:"",type:"intermediate"}}),S.push({data:{source:q,target:N,label:L}}),A(D,N)}break}case"Summation":{A(k.left,q),A(k.right,q);break}case"ProcessRef":break;case"Parallel":case"Restriction":case"Relabeling":{const M=generateId();let D="";k.type==="Parallel"?D="|":k.type==="Restriction"?D="\\":D="[]",v.push({data:{id:M,label:D,type:"operator"}}),S.push({data:{source:q,target:M,label:""}});break}case"Nil":{R.has("Nil")||(v.push({data:{id:"Nil",label:"0",type:"nil"}}),R.add("Nil"));break}}}return[...v,...S]}function Homepage(){const[_,v]=reactExports.useState(null),S=R=>{v(R)};return jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"Home"}),jsxRuntimeExports.jsx(TextCCSParser,{onInputChange:S,initValue:"P = a.'b.0 + c.P"}),jsxRuntimeExports.jsx(CCSVisualizer,{elements:_?transformAstToCytoscape(_):[]})]})}function Aboutpage(){return jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"About"})})}function Header(){return jsxRuntimeExports.jsx("header",{className:"hidden",children:jsxRuntimeExports.jsxs("div",{className:"max-w-[1280px] m-auto w-full px-2 flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-16",children:jsxRuntimeExports.jsx("img",{className:"h-full",src:"/logo.svg"})}),jsxRuntimeExports.jsxs("nav",{className:"",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"",children:"Home"}),jsxRuntimeExports.jsx(Link,{to:"/about",children:"About"})]})]})})}function Footer(){return jsxRuntimeExports.jsx("footer",{className:"",children:jsxRuntimeExports.jsx("div",{className:"max-w-[1280px] m-auto w-full px-6 pb-4 text-primary/65",children:" Jakub Kobrsk - Diplomov prce - Kalkulus komunikujcch systm"})})}function __insertCSS(_){if(typeof document>"u")return;let v=document.head||document.getElementsByTagName("head")[0],S=document.createElement("style");S.type="text/css",v.appendChild(S),S.styleSheet?S.styleSheet.cssText=_:S.appendChild(document.createTextNode(_))}const getAsset=_=>{switch(_){case"success":return SuccessIcon;case"info":return InfoIcon;case"warning":return WarningIcon;case"error":return ErrorIcon;default:return null}},bars=Array(12).fill(0),Loader=({visible:_,className:v})=>React.createElement("div",{className:["sonner-loading-wrapper",v].filter(Boolean).join(" "),"data-visible":_},React.createElement("div",{className:"sonner-spinner"},bars.map((S,R)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${R}`})))),SuccessIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WarningIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),InfoIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ErrorIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CloseIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),useIsDocumentHidden=()=>{const[_,v]=React.useState(document.hidden);return React.useEffect(()=>{const S=()=>{v(document.hidden)};return document.addEventListener("visibilitychange",S),()=>window.removeEventListener("visibilitychange",S)},[]),_};let toastsCounter=1;class Observer{constructor(){this.subscribe=v=>(this.subscribers.push(v),()=>{const S=this.subscribers.indexOf(v);this.subscribers.splice(S,1)}),this.publish=v=>{this.subscribers.forEach(S=>S(v))},this.addToast=v=>{this.publish(v),this.toasts=[...this.toasts,v]},this.create=v=>{var S;const{message:R,...T}=v,A=typeof v?.id=="number"||((S=v.id)==null?void 0:S.length)>0?v.id:toastsCounter++,k=this.toasts.find(M=>M.id===A),q=v.dismissible===void 0?!0:v.dismissible;return this.dismissedToasts.has(A)&&this.dismissedToasts.delete(A),k?this.toasts=this.toasts.map(M=>M.id===A?(this.publish({...M,...v,id:A,title:R}),{...M,...v,id:A,dismissible:q,title:R}):M):this.addToast({title:R,...T,dismissible:q,id:A}),A},this.dismiss=v=>(v?(this.dismissedToasts.add(v),requestAnimationFrame(()=>this.subscribers.forEach(S=>S({id:v,dismiss:!0})))):this.toasts.forEach(S=>{this.subscribers.forEach(R=>R({id:S.id,dismiss:!0}))}),v),this.message=(v,S)=>this.create({...S,message:v}),this.error=(v,S)=>this.create({...S,message:v,type:"error"}),this.success=(v,S)=>this.create({...S,type:"success",message:v}),this.info=(v,S)=>this.create({...S,type:"info",message:v}),this.warning=(v,S)=>this.create({...S,type:"warning",message:v}),this.loading=(v,S)=>this.create({...S,type:"loading",message:v}),this.promise=(v,S)=>{if(!S)return;let R;S.loading!==void 0&&(R=this.create({...S,promise:v,type:"loading",message:S.loading,description:typeof S.description!="function"?S.description:void 0}));const T=Promise.resolve(v instanceof Function?v():v);let A=R!==void 0,k;const q=T.then(async D=>{if(k=["resolve",D],React.isValidElement(D))A=!1,this.create({id:R,type:"default",message:D});else if(isHttpResponse(D)&&!D.ok){A=!1;const I=typeof S.error=="function"?await S.error(`HTTP error! status: ${D.status}`):S.error,N=typeof S.description=="function"?await S.description(`HTTP error! status: ${D.status}`):S.description,H=typeof I=="object"&&!React.isValidElement(I)?I:{message:I};this.create({id:R,type:"error",description:N,...H})}else if(D instanceof Error){A=!1;const I=typeof S.error=="function"?await S.error(D):S.error,N=typeof S.description=="function"?await S.description(D):S.description,H=typeof I=="object"&&!React.isValidElement(I)?I:{message:I};this.create({id:R,type:"error",description:N,...H})}else if(S.success!==void 0){A=!1;const I=typeof S.success=="function"?await S.success(D):S.success,N=typeof S.description=="function"?await S.description(D):S.description,H=typeof I=="object"&&!React.isValidElement(I)?I:{message:I};this.create({id:R,type:"success",description:N,...H})}}).catch(async D=>{if(k=["reject",D],S.error!==void 0){A=!1;const L=typeof S.error=="function"?await S.error(D):S.error,I=typeof S.description=="function"?await S.description(D):S.description,F=typeof L=="object"&&!React.isValidElement(L)?L:{message:L};this.create({id:R,type:"error",description:I,...F})}}).finally(()=>{A&&(this.dismiss(R),R=void 0),S.finally==null||S.finally.call(S)}),M=()=>new Promise((D,L)=>q.then(()=>k[0]==="reject"?L(k[1]):D(k[1])).catch(L));return typeof R!="string"&&typeof R!="number"?{unwrap:M}:Object.assign(R,{unwrap:M})},this.custom=(v,S)=>{const R=S?.id||toastsCounter++;return this.create({jsx:v(R),id:R,...S}),R},this.getActiveToasts=()=>this.toasts.filter(v=>!this.dismissedToasts.has(v.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ToastState=new Observer,toastFunction=(_,v)=>{const S=v?.id||toastsCounter++;return ToastState.addToast({title:_,...v,id:S}),S},isHttpResponse=_=>_&&typeof _=="object"&&"ok"in _&&typeof _.ok=="boolean"&&"status"in _&&typeof _.status=="number",basicToast=toastFunction,getHistory=()=>ToastState.toasts,getToasts=()=>ToastState.getActiveToasts();Object.assign(basicToast,{success:ToastState.success,info:ToastState.info,warning:ToastState.warning,error:ToastState.error,custom:ToastState.custom,message:ToastState.message,promise:ToastState.promise,dismiss:ToastState.dismiss,loading:ToastState.loading},{getHistory,getToasts});__insertCSS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function isAction(_){return _.label!==void 0}const VISIBLE_TOASTS_AMOUNT=3,VIEWPORT_OFFSET="24px",MOBILE_VIEWPORT_OFFSET="16px",TOAST_LIFETIME=4e3,TOAST_WIDTH=356,GAP=14,SWIPE_THRESHOLD=45,TIME_BEFORE_UNMOUNT=200;function cn(..._){return _.filter(Boolean).join(" ")}function getDefaultSwipeDirections(_){const[v,S]=_.split("-"),R=[];return v&&R.push(v),S&&R.push(S),R}const Toast=_=>{var v,S,R,T,A,k,q,M,D;const{invert:L,toast:I,unstyled:N,interacting:F,setHeights:H,visibleToasts:G,heights:V,index:j,toasts:W,expanded:X,removeToast:J,defaultRichColors:te,closeButton:re,style:ee,cancelButtonStyle:ne,actionButtonStyle:oe,className:ue="",descriptionClassName:ce="",duration:de,position:pe,gap:_e,expandByDefault:Ee,classNames:ge,icons:be,closeButtonAriaLabel:Ae="Close toast"}=_,[De,ve]=React.useState(null),[le,me]=React.useState(null),[Te,ye]=React.useState(!1),[Re,qe]=React.useState(!1),[ke,ze]=React.useState(!1),[Ne,Pe]=React.useState(!1),[Me,Ie]=React.useState(!1),[Le,nt]=React.useState(0),[lt,dt]=React.useState(0),pt=React.useRef(I.duration||de||TOAST_LIFETIME),We=React.useRef(null),wt=React.useRef(null),st=j===0,St=j+1<=G,gt=I.type,Et=I.dismissible!==!1,xt=I.className||"",Lt=I.descriptionClassName||"",zt=React.useMemo(()=>V.findIndex(yt=>yt.toastId===I.id)||0,[V,I.id]),jt=React.useMemo(()=>{var yt;return(yt=I.closeButton)!=null?yt:re},[I.closeButton,re]),At=React.useMemo(()=>I.duration||de||TOAST_LIFETIME,[I.duration,de]),Ot=React.useRef(0),Ct=React.useRef(0),bt=React.useRef(0),et=React.useRef(null),[we,Fe]=pe.split("-"),Ge=React.useMemo(()=>V.reduce((yt,vt,Dt)=>Dt>=zt?yt:yt+vt.height,0),[V,zt]),Ze=useIsDocumentHidden(),rt=I.invert||L,_t=gt==="loading";Ct.current=React.useMemo(()=>zt*_e+Ge,[zt,Ge]),React.useEffect(()=>{pt.current=At},[At]),React.useEffect(()=>{ye(!0)},[]),React.useEffect(()=>{const yt=wt.current;if(yt){const vt=yt.getBoundingClientRect().height;return dt(vt),H(Dt=>[{toastId:I.id,height:vt,position:I.position},...Dt]),()=>H(Dt=>Dt.filter(It=>It.toastId!==I.id))}},[H,I.id]),React.useLayoutEffect(()=>{if(!Te)return;const yt=wt.current,vt=yt.style.height;yt.style.height="auto";const Dt=yt.getBoundingClientRect().height;yt.style.height=vt,dt(Dt),H(It=>It.find(Vt=>Vt.toastId===I.id)?It.map(Vt=>Vt.toastId===I.id?{...Vt,height:Dt}:Vt):[{toastId:I.id,height:Dt,position:I.position},...It])},[Te,I.title,I.description,H,I.id,I.jsx,I.action,I.cancel]);const ot=React.useCallback(()=>{qe(!0),nt(Ct.current),H(yt=>yt.filter(vt=>vt.toastId!==I.id)),setTimeout(()=>{J(I)},TIME_BEFORE_UNMOUNT)},[I,J,H,Ct]);React.useEffect(()=>{if(I.promise&&gt==="loading"||I.duration===1/0||I.type==="loading")return;let yt;return X||F||Ze?(()=>{if(bt.current<Ot.current){const It=new Date().getTime()-Ot.current;pt.current=pt.current-It}bt.current=new Date().getTime()})():(()=>{pt.current!==1/0&&(Ot.current=new Date().getTime(),yt=setTimeout(()=>{I.onAutoClose==null||I.onAutoClose.call(I,I),ot()},pt.current))})(),()=>clearTimeout(yt)},[X,F,I,gt,Ze,ot]),React.useEffect(()=>{I.delete&&(ot(),I.onDismiss==null||I.onDismiss.call(I,I))},[ot,I.delete]);function Tt(){var yt;if(be?.loading){var vt;return React.createElement("div",{className:cn(ge?.loader,I==null||(vt=I.classNames)==null?void 0:vt.loader,"sonner-loader"),"data-visible":gt==="loading"},be.loading)}return React.createElement(Loader,{className:cn(ge?.loader,I==null||(yt=I.classNames)==null?void 0:yt.loader),visible:gt==="loading"})}const Rt=I.icon||be?.[gt]||getAsset(gt);var qt,Nt;return React.createElement("li",{tabIndex:0,ref:wt,className:cn(ue,xt,ge?.toast,I==null||(v=I.classNames)==null?void 0:v.toast,ge?.default,ge?.[gt],I==null||(S=I.classNames)==null?void 0:S[gt]),"data-sonner-toast":"","data-rich-colors":(qt=I.richColors)!=null?qt:te,"data-styled":!(I.jsx||I.unstyled||N),"data-mounted":Te,"data-promise":!!I.promise,"data-swiped":Me,"data-removed":Re,"data-visible":St,"data-y-position":we,"data-x-position":Fe,"data-index":j,"data-front":st,"data-swiping":ke,"data-dismissible":Et,"data-type":gt,"data-invert":rt,"data-swipe-out":Ne,"data-swipe-direction":le,"data-expanded":!!(X||Ee&&Te),"data-testid":I.testId,style:{"--index":j,"--toasts-before":j,"--z-index":W.length-j,"--offset":`${Re?Le:Ct.current}px`,"--initial-height":Ee?"auto":`${lt}px`,...ee,...I.style},onDragEnd:()=>{ze(!1),ve(null),et.current=null},onPointerDown:yt=>{yt.button!==2&&(_t||!Et||(We.current=new Date,nt(Ct.current),yt.target.setPointerCapture(yt.pointerId),yt.target.tagName!=="BUTTON"&&(ze(!0),et.current={x:yt.clientX,y:yt.clientY})))},onPointerUp:()=>{var yt,vt,Dt;if(Ne||!Et)return;et.current=null;const It=Number(((yt=wt.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),or=Number(((vt=wt.current)==null?void 0:vt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Vt=new Date().getTime()-((Dt=We.current)==null?void 0:Dt.getTime()),ur=De==="x"?It:or,dr=Math.abs(ur)/Vt;if(Math.abs(ur)>=SWIPE_THRESHOLD||dr>.11){nt(Ct.current),I.onDismiss==null||I.onDismiss.call(I,I),me(De==="x"?It>0?"right":"left":or>0?"down":"up"),ot(),Pe(!0);return}else{var sr,rr;(sr=wt.current)==null||sr.style.setProperty("--swipe-amount-x","0px"),(rr=wt.current)==null||rr.style.setProperty("--swipe-amount-y","0px")}Ie(!1),ze(!1),ve(null)},onPointerMove:yt=>{var vt,Dt,It;if(!et.current||!Et||((vt=window.getSelection())==null?void 0:vt.toString().length)>0)return;const Vt=yt.clientY-et.current.y,ur=yt.clientX-et.current.x;var dr;const sr=(dr=_.swipeDirections)!=null?dr:getDefaultSwipeDirections(pe);!De&&(Math.abs(ur)>1||Math.abs(Vt)>1)&&ve(Math.abs(ur)>Math.abs(Vt)?"x":"y");let rr={x:0,y:0};const _r=Pr=>1/(1.5+Math.abs(Pr)/20);if(De==="y"){if(sr.includes("top")||sr.includes("bottom"))if(sr.includes("top")&&Vt<0||sr.includes("bottom")&&Vt>0)rr.y=Vt;else{const Pr=Vt*_r(Vt);rr.y=Math.abs(Pr)<Math.abs(Vt)?Pr:Vt}}else if(De==="x"&&(sr.includes("left")||sr.includes("right")))if(sr.includes("left")&&ur<0||sr.includes("right")&&ur>0)rr.x=ur;else{const Pr=ur*_r(ur);rr.x=Math.abs(Pr)<Math.abs(ur)?Pr:ur}(Math.abs(rr.x)>0||Math.abs(rr.y)>0)&&Ie(!0),(Dt=wt.current)==null||Dt.style.setProperty("--swipe-amount-x",`${rr.x}px`),(It=wt.current)==null||It.style.setProperty("--swipe-amount-y",`${rr.y}px`)}},jt&&!I.jsx&&gt!=="loading"?React.createElement("button",{"aria-label":Ae,"data-disabled":_t,"data-close-button":!0,onClick:_t||!Et?()=>{}:()=>{ot(),I.onDismiss==null||I.onDismiss.call(I,I)},className:cn(ge?.closeButton,I==null||(R=I.classNames)==null?void 0:R.closeButton)},(Nt=be?.close)!=null?Nt:CloseIcon):null,(gt||I.icon||I.promise)&&I.icon!==null&&(be?.[gt]!==null||I.icon)?React.createElement("div",{"data-icon":"",className:cn(ge?.icon,I==null||(T=I.classNames)==null?void 0:T.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||Tt():null,I.type!=="loading"?Rt:null):null,React.createElement("div",{"data-content":"",className:cn(ge?.content,I==null||(A=I.classNames)==null?void 0:A.content)},React.createElement("div",{"data-title":"",className:cn(ge?.title,I==null||(k=I.classNames)==null?void 0:k.title)},I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title),I.description?React.createElement("div",{"data-description":"",className:cn(ce,Lt,ge?.description,I==null||(q=I.classNames)==null?void 0:q.description)},typeof I.description=="function"?I.description():I.description):null),React.isValidElement(I.cancel)?I.cancel:I.cancel&&isAction(I.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||ne,onClick:yt=>{isAction(I.cancel)&&Et&&(I.cancel.onClick==null||I.cancel.onClick.call(I.cancel,yt),ot())},className:cn(ge?.cancelButton,I==null||(M=I.classNames)==null?void 0:M.cancelButton)},I.cancel.label):null,React.isValidElement(I.action)?I.action:I.action&&isAction(I.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||oe,onClick:yt=>{isAction(I.action)&&(I.action.onClick==null||I.action.onClick.call(I.action,yt),!yt.defaultPrevented&&ot())},className:cn(ge?.actionButton,I==null||(D=I.classNames)==null?void 0:D.actionButton)},I.action.label):null)};function getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";const _=document.documentElement.getAttribute("dir");return _==="auto"||!_?window.getComputedStyle(document.documentElement).direction:_}function assignOffset(_,v){const S={};return[_,v].forEach((R,T)=>{const A=T===1,k=A?"--mobile-offset":"--offset",q=A?MOBILE_VIEWPORT_OFFSET:VIEWPORT_OFFSET;function M(D){["top","right","bottom","left"].forEach(L=>{S[`${k}-${L}`]=typeof D=="number"?`${D}px`:D})}typeof R=="number"||typeof R=="string"?M(R):typeof R=="object"?["top","right","bottom","left"].forEach(D=>{R[D]===void 0?S[`${k}-${D}`]=q:S[`${k}-${D}`]=typeof R[D]=="number"?`${R[D]}px`:R[D]}):M(q)}),S}const Toaster=React.forwardRef(function _(v,S){const{id:R,invert:T,position:A="bottom-right",hotkey:k=["altKey","KeyT"],expand:q,closeButton:M,className:D,offset:L,mobileOffset:I,theme:N="light",richColors:F,duration:H,style:G,visibleToasts:V=VISIBLE_TOASTS_AMOUNT,toastOptions:j,dir:W=getDocumentDirection(),gap:X=GAP,icons:J,containerAriaLabel:te="Notifications"}=v,[re,ee]=React.useState([]),ne=React.useMemo(()=>R?re.filter(Te=>Te.toasterId===R):re.filter(Te=>!Te.toasterId),[re,R]),oe=React.useMemo(()=>Array.from(new Set([A].concat(ne.filter(Te=>Te.position).map(Te=>Te.position)))),[ne,A]),[ue,ce]=React.useState([]),[de,pe]=React.useState(!1),[_e,Ee]=React.useState(!1),[ge,be]=React.useState(N!=="system"?N:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ae=React.useRef(null),De=k.join("+").replace(/Key/g,"").replace(/Digit/g,""),ve=React.useRef(null),le=React.useRef(!1),me=React.useCallback(Te=>{ee(ye=>{var Re;return(Re=ye.find(qe=>qe.id===Te.id))!=null&&Re.delete||ToastState.dismiss(Te.id),ye.filter(({id:qe})=>qe!==Te.id)})},[]);return React.useEffect(()=>ToastState.subscribe(Te=>{if(Te.dismiss){requestAnimationFrame(()=>{ee(ye=>ye.map(Re=>Re.id===Te.id?{...Re,delete:!0}:Re))});return}setTimeout(()=>{ReactDOM.flushSync(()=>{ee(ye=>{const Re=ye.findIndex(qe=>qe.id===Te.id);return Re!==-1?[...ye.slice(0,Re),{...ye[Re],...Te},...ye.slice(Re+1)]:[Te,...ye]})})})}),[re]),React.useEffect(()=>{if(N!=="system"){be(N);return}if(N==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?be("dark"):be("light")),typeof window>"u")return;const Te=window.matchMedia("(prefers-color-scheme: dark)");try{Te.addEventListener("change",({matches:ye})=>{be(ye?"dark":"light")})}catch{Te.addListener(({matches:Re})=>{try{be(Re?"dark":"light")}catch(qe){console.error(qe)}})}},[N]),React.useEffect(()=>{re.length<=1&&pe(!1)},[re]),React.useEffect(()=>{const Te=ye=>{var Re;if(k.every(ze=>ye[ze]||ye.code===ze)){var ke;pe(!0),(ke=Ae.current)==null||ke.focus()}ye.code==="Escape"&&(document.activeElement===Ae.current||(Re=Ae.current)!=null&&Re.contains(document.activeElement))&&pe(!1)};return document.addEventListener("keydown",Te),()=>document.removeEventListener("keydown",Te)},[k]),React.useEffect(()=>{if(Ae.current)return()=>{ve.current&&(ve.current.focus({preventScroll:!0}),ve.current=null,le.current=!1)}},[Ae.current]),React.createElement("section",{ref:S,"aria-label":`${te} ${De}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},oe.map((Te,ye)=>{var Re;const[qe,ke]=Te.split("-");return ne.length?React.createElement("ol",{key:Te,dir:W==="auto"?getDocumentDirection():W,tabIndex:-1,ref:Ae,className:D,"data-sonner-toaster":!0,"data-sonner-theme":ge,"data-y-position":qe,"data-x-position":ke,style:{"--front-toast-height":`${((Re=ue[0])==null?void 0:Re.height)||0}px`,"--width":`${TOAST_WIDTH}px`,"--gap":`${X}px`,...G,...assignOffset(L,I)},onBlur:ze=>{le.current&&!ze.currentTarget.contains(ze.relatedTarget)&&(le.current=!1,ve.current&&(ve.current.focus({preventScroll:!0}),ve.current=null))},onFocus:ze=>{ze.target instanceof HTMLElement&&ze.target.dataset.dismissible==="false"||le.current||(le.current=!0,ve.current=ze.relatedTarget)},onMouseEnter:()=>pe(!0),onMouseMove:()=>pe(!0),onMouseLeave:()=>{_e||pe(!1)},onDragEnd:()=>pe(!1),onPointerDown:ze=>{ze.target instanceof HTMLElement&&ze.target.dataset.dismissible==="false"||Ee(!0)},onPointerUp:()=>Ee(!1)},ne.filter(ze=>!ze.position&&ye===0||ze.position===Te).map((ze,Ne)=>{var Pe,Me;return React.createElement(Toast,{key:ze.id,icons:J,index:Ne,toast:ze,defaultRichColors:F,duration:(Pe=j?.duration)!=null?Pe:H,className:j?.className,descriptionClassName:j?.descriptionClassName,invert:T,visibleToasts:V,closeButton:(Me=j?.closeButton)!=null?Me:M,interacting:_e,position:Te,style:j?.style,unstyled:j?.unstyled,classNames:j?.classNames,cancelButtonStyle:j?.cancelButtonStyle,actionButtonStyle:j?.actionButtonStyle,closeButtonAriaLabel:j?.closeButtonAriaLabel,removeToast:me,toasts:ne.filter(Ie=>Ie.position==ze.position),heights:ue.filter(Ie=>Ie.position==ze.position),setHeights:ce,expandByDefault:q,gap:X,expanded:de,swipeDirections:v.swipeDirections})})):null}))});function RouteList(){return jsxRuntimeExports.jsx("div",{className:"max-w-[1280px] m-auto w-full px-2 flex-grow-1",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Homepage,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(Aboutpage,{})})]})})}function App(){return jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-background text-foreground min-h-svh antialiased flex flex-col",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(RouteList,{}),jsxRuntimeExports.jsx(Footer,{})]}),jsxRuntimeExports.jsx(Toaster,{richColors:!0})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
