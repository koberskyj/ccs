function _mergeNamespaces(_,v){for(var S=0;S<v.length;S++){const R=v[S];if(typeof R!="string"&&!Array.isArray(R)){for(const T in R)if(T!=="default"&&!(T in _)){const A=Object.getOwnPropertyDescriptor(R,T);A&&Object.defineProperty(_,T,A.get?A:{enumerable:!0,get:()=>R[T]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))R(T);new MutationObserver(T=>{for(const A of T)if(A.type==="childList")for(const k of A.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&R(k)}).observe(document,{childList:!0,subtree:!0});function S(T){const A={};return T.integrity&&(A.integrity=T.integrity),T.referrerPolicy&&(A.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?A.credentials="include":T.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function R(T){if(T.ep)return;T.ep=!0;const A=S(T);fetch(T.href,A)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),v=Symbol.for("react.fragment");function S(R,T,A){var k=null;if(A!==void 0&&(k=""+A),T.key!==void 0&&(k=""+T.key),"key"in T){A={};for(var M in T)M!=="key"&&(A[M]=T[M])}else A=T;return T=A.ref,{$$typeof:_,type:R,key:k,ref:T!==void 0?T:null,props:A}}return reactJsxRuntime_production.Fragment=v,reactJsxRuntime_production.jsx=S,reactJsxRuntime_production.jsxs=S,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),B=Symbol.iterator;function z(pe){return pe===null||typeof pe!="object"?null:(pe=B&&pe[B]||pe["@@iterator"],typeof pe=="function"?pe:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,H={};function W(pe,we,Oe){this.props=pe,this.context=we,this.refs=H,this.updater=Oe||F}W.prototype.isReactComponent={},W.prototype.setState=function(pe,we){if(typeof pe!="object"&&typeof pe!="function"&&pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pe,we,"setState")},W.prototype.forceUpdate=function(pe){this.updater.enqueueForceUpdate(this,pe,"forceUpdate")};function Y(){}Y.prototype=W.prototype;function Z(pe,we,Oe){this.props=pe,this.context=we,this.refs=H,this.updater=Oe||F}var J=Z.prototype=new Y;J.constructor=Z,V(J,W.prototype),J.isPureReactComponent=!0;var ne=Array.isArray;function oe(){}var te={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function le(pe,we,Oe){var Ce=Oe.ref;return{$$typeof:_,type:pe,key:we,ref:Ce!==void 0?Ce:null,props:Oe}}function ue(pe,we){return le(pe.type,we,pe.props)}function ce(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===_}function ge(pe){var we={"=":"=0",":":"=2"};return"$"+pe.replace(/[=:]/g,function(Oe){return we[Oe]})}var me=/\/+/g;function Ee(pe,we){return typeof pe=="object"&&pe!==null&&pe.key!=null?ge(""+pe.key):we.toString(36)}function _e(pe){switch(pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason;default:switch(typeof pe.status=="string"?pe.then(oe,oe):(pe.status="pending",pe.then(function(we){pe.status==="pending"&&(pe.status="fulfilled",pe.value=we)},function(we){pe.status==="pending"&&(pe.status="rejected",pe.reason=we)})),pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason}}throw pe}function ye(pe,we,Oe,Ce,Pe){var Ne=typeof pe;(Ne==="undefined"||Ne==="boolean")&&(pe=null);var Te=!1;if(pe===null)Te=!0;else switch(Ne){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(pe.$$typeof){case _:case v:Te=!0;break;case I:return Te=pe._init,ye(Te(pe._payload),we,Oe,Ce,Pe)}}if(Te)return Pe=Pe(pe),Te=Ce===""?"."+Ee(pe,0):Ce,ne(Pe)?(Oe="",Te!=null&&(Oe=Te.replace(me,"$&/")+"/"),ye(Pe,we,Oe,"",function(Ie){return Ie})):Pe!=null&&(ce(Pe)&&(Pe=ue(Pe,Oe+(Pe.key==null||pe&&pe.key===Pe.key?"":(""+Pe.key).replace(me,"$&/")+"/")+Te)),we.push(Pe)),1;Te=0;var ze=Ce===""?".":Ce+":";if(ne(pe))for(var Fe=0;Fe<pe.length;Fe++)Ce=pe[Fe],Ne=ze+Ee(Ce,Fe),Te+=ye(Ce,we,Oe,Ne,Pe);else if(Fe=z(pe),typeof Fe=="function")for(pe=Fe.call(pe),Fe=0;!(Ce=pe.next()).done;)Ce=Ce.value,Ne=ze+Ee(Ce,Fe++),Te+=ye(Ce,we,Oe,Ne,Pe);else if(Ne==="object"){if(typeof pe.then=="function")return ye(_e(pe),we,Oe,Ce,Pe);throw we=String(pe),Error("Objects are not valid as a React child (found: "+(we==="[object Object]"?"object with keys {"+Object.keys(pe).join(", ")+"}":we)+"). If you meant to render a collection of children, use an array instead.")}return Te}function be(pe,we,Oe){if(pe==null)return pe;var Ce=[],Pe=0;return ye(pe,Ce,"","",function(Ne){return we.call(Oe,Ne,Pe++)}),Ce}function Se(pe){if(pe._status===-1){var we=pe._result;we=we(),we.then(function(Oe){(pe._status===0||pe._status===-1)&&(pe._status=1,pe._result=Oe)},function(Oe){(pe._status===0||pe._status===-1)&&(pe._status=2,pe._result=Oe)}),pe._status===-1&&(pe._status=0,pe._result=we)}if(pe._status===1)return pe._result.default;throw pe._result}var De=typeof reportError=="function"?reportError:function(pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var we=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pe=="object"&&pe!==null&&typeof pe.message=="string"?String(pe.message):String(pe),error:pe});if(!window.dispatchEvent(we))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pe);return}console.error(pe)},xe={map:be,forEach:function(pe,we,Oe){be(pe,function(){we.apply(this,arguments)},Oe)},count:function(pe){var we=0;return be(pe,function(){we++}),we},toArray:function(pe){return be(pe,function(we){return we})||[]},only:function(pe){if(!ce(pe))throw Error("React.Children.only expected to receive a single React element child.");return pe}};return react_production.Activity=q,react_production.Children=xe,react_production.Component=W,react_production.Fragment=S,react_production.Profiler=T,react_production.PureComponent=Z,react_production.StrictMode=R,react_production.Suspense=N,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(pe){return te.H.useMemoCache(pe)}},react_production.cache=function(pe){return function(){return pe.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(pe,we,Oe){if(pe==null)throw Error("The argument must be a React element, but you passed "+pe+".");var Ce=V({},pe.props),Pe=pe.key;if(we!=null)for(Ne in we.key!==void 0&&(Pe=""+we.key),we)!se.call(we,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&we.ref===void 0||(Ce[Ne]=we[Ne]);var Ne=arguments.length-2;if(Ne===1)Ce.children=Oe;else if(1<Ne){for(var Te=Array(Ne),ze=0;ze<Ne;ze++)Te[ze]=arguments[ze+2];Ce.children=Te}return le(pe.type,Pe,Ce)},react_production.createContext=function(pe){return pe={$$typeof:k,_currentValue:pe,_currentValue2:pe,_threadCount:0,Provider:null,Consumer:null},pe.Provider=pe,pe.Consumer={$$typeof:A,_context:pe},pe},react_production.createElement=function(pe,we,Oe){var Ce,Pe={},Ne=null;if(we!=null)for(Ce in we.key!==void 0&&(Ne=""+we.key),we)se.call(we,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(Pe[Ce]=we[Ce]);var Te=arguments.length-2;if(Te===1)Pe.children=Oe;else if(1<Te){for(var ze=Array(Te),Fe=0;Fe<Te;Fe++)ze[Fe]=arguments[Fe+2];Pe.children=ze}if(pe&&pe.defaultProps)for(Ce in Te=pe.defaultProps,Te)Pe[Ce]===void 0&&(Pe[Ce]=Te[Ce]);return le(pe,Ne,Pe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(pe){return{$$typeof:M,render:pe}},react_production.isValidElement=ce,react_production.lazy=function(pe){return{$$typeof:I,_payload:{_status:-1,_result:pe},_init:Se}},react_production.memo=function(pe,we){return{$$typeof:D,type:pe,compare:we===void 0?null:we}},react_production.startTransition=function(pe){var we=te.T,Oe={};te.T=Oe;try{var Ce=pe(),Pe=te.S;Pe!==null&&Pe(Oe,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then(oe,De)}catch(Ne){De(Ne)}finally{we!==null&&Oe.types!==null&&(we.types=Oe.types),te.T=we}},react_production.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},react_production.use=function(pe){return te.H.use(pe)},react_production.useActionState=function(pe,we,Oe){return te.H.useActionState(pe,we,Oe)},react_production.useCallback=function(pe,we){return te.H.useCallback(pe,we)},react_production.useContext=function(pe){return te.H.useContext(pe)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(pe,we){return te.H.useDeferredValue(pe,we)},react_production.useEffect=function(pe,we){return te.H.useEffect(pe,we)},react_production.useEffectEvent=function(pe){return te.H.useEffectEvent(pe)},react_production.useId=function(){return te.H.useId()},react_production.useImperativeHandle=function(pe,we,Oe){return te.H.useImperativeHandle(pe,we,Oe)},react_production.useInsertionEffect=function(pe,we){return te.H.useInsertionEffect(pe,we)},react_production.useLayoutEffect=function(pe,we){return te.H.useLayoutEffect(pe,we)},react_production.useMemo=function(pe,we){return te.H.useMemo(pe,we)},react_production.useOptimistic=function(pe,we){return te.H.useOptimistic(pe,we)},react_production.useReducer=function(pe,we,Oe){return te.H.useReducer(pe,we,Oe)},react_production.useRef=function(pe){return te.H.useRef(pe)},react_production.useState=function(pe){return te.H.useState(pe)},react_production.useSyncExternalStore=function(pe,we,Oe){return te.H.useSyncExternalStore(pe,we,Oe)},react_production.useTransition=function(){return te.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React2=getDefaultExportFromCjs$1(reactExports),React=_mergeNamespaces({__proto__:null,default:React2},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(_){function v(ye,be){var Se=ye.length;ye.push(be);e:for(;0<Se;){var De=Se-1>>>1,xe=ye[De];if(0<T(xe,be))ye[De]=be,ye[Se]=xe,Se=De;else break e}}function S(ye){return ye.length===0?null:ye[0]}function R(ye){if(ye.length===0)return null;var be=ye[0],Se=ye.pop();if(Se!==be){ye[0]=Se;e:for(var De=0,xe=ye.length,pe=xe>>>1;De<pe;){var we=2*(De+1)-1,Oe=ye[we],Ce=we+1,Pe=ye[Ce];if(0>T(Oe,Se))Ce<xe&&0>T(Pe,Oe)?(ye[De]=Pe,ye[Ce]=Se,De=Ce):(ye[De]=Oe,ye[we]=Se,De=we);else if(Ce<xe&&0>T(Pe,Se))ye[De]=Pe,ye[Ce]=Se,De=Ce;else break e}}return be}function T(ye,be){var Se=ye.sortIndex-be.sortIndex;return Se!==0?Se:ye.id-be.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;_.unstable_now=function(){return A.now()}}else{var k=Date,M=k.now();_.unstable_now=function(){return k.now()-M}}var N=[],D=[],I=1,q=null,B=3,z=!1,F=!1,V=!1,H=!1,W=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function J(ye){for(var be=S(D);be!==null;){if(be.callback===null)R(D);else if(be.startTime<=ye)R(D),be.sortIndex=be.expirationTime,v(N,be);else break;be=S(D)}}function ne(ye){if(V=!1,J(ye),!F)if(S(N)!==null)F=!0,oe||(oe=!0,ge());else{var be=S(D);be!==null&&_e(ne,be.startTime-ye)}}var oe=!1,te=-1,se=5,le=-1;function ue(){return H?!0:!(_.unstable_now()-le<se)}function ce(){if(H=!1,oe){var ye=_.unstable_now();le=ye;var be=!0;try{e:{F=!1,V&&(V=!1,Y(te),te=-1),z=!0;var Se=B;try{t:{for(J(ye),q=S(N);q!==null&&!(q.expirationTime>ye&&ue());){var De=q.callback;if(typeof De=="function"){q.callback=null,B=q.priorityLevel;var xe=De(q.expirationTime<=ye);if(ye=_.unstable_now(),typeof xe=="function"){q.callback=xe,J(ye),be=!0;break t}q===S(N)&&R(N),J(ye)}else R(N);q=S(N)}if(q!==null)be=!0;else{var pe=S(D);pe!==null&&_e(ne,pe.startTime-ye),be=!1}}break e}finally{q=null,B=Se,z=!1}be=void 0}}finally{be?ge():oe=!1}}}var ge;if(typeof Z=="function")ge=function(){Z(ce)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ee=me.port2;me.port1.onmessage=ce,ge=function(){Ee.postMessage(null)}}else ge=function(){W(ce,0)};function _e(ye,be){te=W(function(){ye(_.unstable_now())},be)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(ye){ye.callback=null},_.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<ye?Math.floor(1e3/ye):5},_.unstable_getCurrentPriorityLevel=function(){return B},_.unstable_next=function(ye){switch(B){case 1:case 2:case 3:var be=3;break;default:be=B}var Se=B;B=be;try{return ye()}finally{B=Se}},_.unstable_requestPaint=function(){H=!0},_.unstable_runWithPriority=function(ye,be){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Se=B;B=ye;try{return be()}finally{B=Se}},_.unstable_scheduleCallback=function(ye,be,Se){var De=_.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?De+Se:De):Se=De,ye){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Se+xe,ye={id:I++,callback:be,priorityLevel:ye,startTime:Se,expirationTime:xe,sortIndex:-1},Se>De?(ye.sortIndex=Se,v(D,ye),S(N)===null&&ye===S(D)&&(V?(Y(te),te=-1):V=!0,_e(ne,Se-De))):(ye.sortIndex=xe,v(N,ye),F||z||(F=!0,oe||(oe=!0,ge()))),ye},_.unstable_shouldYield=ue,_.unstable_wrapCallback=function(ye){var be=B;return function(){var Se=B;B=be;try{return ye.apply(this,arguments)}finally{B=Se}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function v(N){var D="https://react.dev/errors/"+N;if(1<arguments.length){D+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)D+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+N+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(){}var R={d:{f:S,r:function(){throw Error(v(522))},D:S,C:S,L:S,m:S,X:S,S,M:S},p:0,findDOMNode:null},T=Symbol.for("react.portal");function A(N,D,I){var q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:q==null?null:""+q,children:N,containerInfo:D,implementation:I}}var k=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function M(N,D){if(N==="font")return"";if(typeof D=="string")return D==="use-credentials"?D:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,reactDom_production.createPortal=function(N,D){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)throw Error(v(299));return A(N,D,null,I)},reactDom_production.flushSync=function(N){var D=k.T,I=R.p;try{if(k.T=null,R.p=2,N)return N()}finally{k.T=D,R.p=I,R.d.f()}},reactDom_production.preconnect=function(N,D){typeof N=="string"&&(D?(D=D.crossOrigin,D=typeof D=="string"?D==="use-credentials"?D:"":void 0):D=null,R.d.C(N,D))},reactDom_production.prefetchDNS=function(N){typeof N=="string"&&R.d.D(N)},reactDom_production.preinit=function(N,D){if(typeof N=="string"&&D&&typeof D.as=="string"){var I=D.as,q=M(I,D.crossOrigin),B=typeof D.integrity=="string"?D.integrity:void 0,z=typeof D.fetchPriority=="string"?D.fetchPriority:void 0;I==="style"?R.d.S(N,typeof D.precedence=="string"?D.precedence:void 0,{crossOrigin:q,integrity:B,fetchPriority:z}):I==="script"&&R.d.X(N,{crossOrigin:q,integrity:B,fetchPriority:z,nonce:typeof D.nonce=="string"?D.nonce:void 0})}},reactDom_production.preinitModule=function(N,D){if(typeof N=="string")if(typeof D=="object"&&D!==null){if(D.as==null||D.as==="script"){var I=M(D.as,D.crossOrigin);R.d.M(N,{crossOrigin:I,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0})}}else D==null&&R.d.M(N)},reactDom_production.preload=function(N,D){if(typeof N=="string"&&typeof D=="object"&&D!==null&&typeof D.as=="string"){var I=D.as,q=M(I,D.crossOrigin);R.d.L(N,I,{crossOrigin:q,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0,type:typeof D.type=="string"?D.type:void 0,fetchPriority:typeof D.fetchPriority=="string"?D.fetchPriority:void 0,referrerPolicy:typeof D.referrerPolicy=="string"?D.referrerPolicy:void 0,imageSrcSet:typeof D.imageSrcSet=="string"?D.imageSrcSet:void 0,imageSizes:typeof D.imageSizes=="string"?D.imageSizes:void 0,media:typeof D.media=="string"?D.media:void 0})}},reactDom_production.preloadModule=function(N,D){if(typeof N=="string")if(D){var I=M(D.as,D.crossOrigin);R.d.m(N,{as:typeof D.as=="string"&&D.as!=="script"?D.as:void 0,crossOrigin:I,integrity:typeof D.integrity=="string"?D.integrity:void 0})}else R.d.m(N)},reactDom_production.requestFormReset=function(N){R.d.r(N)},reactDom_production.unstable_batchedUpdates=function(N,D){return N(D)},reactDom_production.useFormState=function(N,D,I){return k.H.useFormState(N,D,I)},reactDom_production.useFormStatus=function(){return k.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(v){console.error(v)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler(),v=requireReact(),S=requireReactDom();function R(L){var $="https://react.dev/errors/"+L;if(1<arguments.length){$+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)$+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+L+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(L){return!(!L||L.nodeType!==1&&L.nodeType!==9&&L.nodeType!==11)}function A(L){var $=L,j=L;if(L.alternate)for(;$.return;)$=$.return;else{L=$;do $=L,($.flags&4098)!==0&&(j=$.return),L=$.return;while(L)}return $.tag===3?j:null}function k(L){if(L.tag===13){var $=L.memoizedState;if($===null&&(L=L.alternate,L!==null&&($=L.memoizedState)),$!==null)return $.dehydrated}return null}function M(L){if(L.tag===31){var $=L.memoizedState;if($===null&&(L=L.alternate,L!==null&&($=L.memoizedState)),$!==null)return $.dehydrated}return null}function N(L){if(A(L)!==L)throw Error(R(188))}function D(L){var $=L.alternate;if(!$){if($=A(L),$===null)throw Error(R(188));return $!==L?null:L}for(var j=L,G=$;;){var ee=j.return;if(ee===null)break;var ae=ee.alternate;if(ae===null){if(G=ee.return,G!==null){j=G;continue}break}if(ee.child===ae.child){for(ae=ee.child;ae;){if(ae===j)return N(ee),L;if(ae===G)return N(ee),$;ae=ae.sibling}throw Error(R(188))}if(j.return!==G.return)j=ee,G=ae;else{for(var ve=!1,Me=ee.child;Me;){if(Me===j){ve=!0,j=ee,G=ae;break}if(Me===G){ve=!0,G=ee,j=ae;break}Me=Me.sibling}if(!ve){for(Me=ae.child;Me;){if(Me===j){ve=!0,j=ae,G=ee;break}if(Me===G){ve=!0,G=ae,j=ee;break}Me=Me.sibling}if(!ve)throw Error(R(189))}}if(j.alternate!==G)throw Error(R(190))}if(j.tag!==3)throw Error(R(188));return j.stateNode.current===j?L:$}function I(L){var $=L.tag;if($===5||$===26||$===27||$===6)return L;for(L=L.child;L!==null;){if($=I(L),$!==null)return $;L=L.sibling}return null}var q=Object.assign,B=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function ge(L){return L===null||typeof L!="object"?null:(L=ce&&L[ce]||L["@@iterator"],typeof L=="function"?L:null)}var me=Symbol.for("react.client.reference");function Ee(L){if(L==null)return null;if(typeof L=="function")return L.$$typeof===me?null:L.displayName||L.name||null;if(typeof L=="string")return L;switch(L){case V:return"Fragment";case W:return"Profiler";case H:return"StrictMode";case ne:return"Suspense";case oe:return"SuspenseList";case le:return"Activity"}if(typeof L=="object")switch(L.$$typeof){case F:return"Portal";case Z:return L.displayName||"Context";case Y:return(L._context.displayName||"Context")+".Consumer";case J:var $=L.render;return L=L.displayName,L||(L=$.displayName||$.name||"",L=L!==""?"ForwardRef("+L+")":"ForwardRef"),L;case te:return $=L.displayName||null,$!==null?$:Ee(L.type)||"Memo";case se:$=L._payload,L=L._init;try{return Ee(L($))}catch{}}return null}var _e=Array.isArray,ye=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=S.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},De=[],xe=-1;function pe(L){return{current:L}}function we(L){0>xe||(L.current=De[xe],De[xe]=null,xe--)}function Oe(L,$){xe++,De[xe]=L.current,L.current=$}var Ce=pe(null),Pe=pe(null),Ne=pe(null),Te=pe(null);function ze(L,$){switch(Oe(Ne,$),Oe(Pe,L),Oe(Ce,null),$.nodeType){case 9:case 11:L=(L=$.documentElement)&&(L=L.namespaceURI)?rp(L):0;break;default:if(L=$.tagName,$=$.namespaceURI)$=rp($),L=np($,L);else switch(L){case"svg":L=1;break;case"math":L=2;break;default:L=0}}we(Ce),Oe(Ce,L)}function Fe(){we(Ce),we(Pe),we(Ne)}function Ie(L){L.memoizedState!==null&&Oe(Te,L);var $=Ce.current,j=np($,L.type);$!==j&&(Oe(Pe,L),Oe(Ce,j))}function Le(L){Pe.current===L&&(we(Ce),we(Pe)),Te.current===L&&(we(Te),Js._currentValue=Se)}var $e,qe;function at(L){if($e===void 0)try{throw Error()}catch(j){var $=j.stack.trim().match(/\n( *(at )?)/);$e=$&&$[1]||"",qe=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+L+qe}var lt=!1;function vt(L,$){if(!L||lt)return"";lt=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var G={DetermineComponentFrameRoot:function(){try{if($){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(it){var rt=it}Reflect.construct(L,[],gt)}else{try{gt.call()}catch(it){rt=it}L.call(gt.prototype)}}else{try{throw Error()}catch(it){rt=it}(gt=L())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(it){if(it&&rt&&typeof it.stack=="string")return[it.stack,rt.stack]}return[null,null]}};G.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ee=Object.getOwnPropertyDescriptor(G.DetermineComponentFrameRoot,"name");ee&&ee.configurable&&Object.defineProperty(G.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ae=G.DetermineComponentFrameRoot(),ve=ae[0],Me=ae[1];if(ve&&Me){var je=ve.split(`
`),Je=Me.split(`
`);for(ee=G=0;G<je.length&&!je[G].includes("DetermineComponentFrameRoot");)G++;for(;ee<Je.length&&!Je[ee].includes("DetermineComponentFrameRoot");)ee++;if(G===je.length||ee===Je.length)for(G=je.length-1,ee=Je.length-1;1<=G&&0<=ee&&je[G]!==Je[ee];)ee--;for(;1<=G&&0<=ee;G--,ee--)if(je[G]!==Je[ee]){if(G!==1||ee!==1)do if(G--,ee--,0>ee||je[G]!==Je[ee]){var st=`
`+je[G].replace(" at new "," at ");return L.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",L.displayName)),st}while(1<=G&&0<=ee);break}}}finally{lt=!1,Error.prepareStackTrace=j}return(j=L?L.displayName||L.name:"")?at(j):""}function yt(L,$){switch(L.tag){case 26:case 27:case 5:return at(L.type);case 16:return at("Lazy");case 13:return L.child!==$&&$!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return vt(L.type,!1);case 11:return vt(L.type.render,!1);case 1:return vt(L.type,!0);case 31:return at("Activity");default:return""}}function Ze(L){try{var $="",j=null;do $+=yt(L,j),j=L,L=L.return;while(L);return $}catch(G){return`
Error generating stack: `+G.message+`
`+G.stack}}var _t=Object.prototype.hasOwnProperty,ct=_.unstable_scheduleCallback,wt=_.unstable_cancelCallback,xt=_.unstable_shouldYield,At=_.unstable_requestPaint,Ct=_.unstable_now,$t=_.unstable_getCurrentPriorityLevel,Ut=_.unstable_ImmediatePriority,Xt=_.unstable_UserBlockingPriority,Ot=_.unstable_NormalPriority,qt=_.unstable_LowPriority,Tt=_.unstable_IdlePriority,St=_.log,nt=_.unstable_setDisableYieldValue,ke=null,Ue=null;function Ye(L){if(typeof St=="function"&&nt(L),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(ke,L)}catch{}}var tt=Math.clz32?Math.clz32:dt,ot=Math.log,Rt=Math.LN2;function dt(L){return L>>>=0,L===0?32:31-(ot(L)/Rt|0)|0}var Mt=256,kt=262144,Pt=4194304;function zt(L){var $=L&42;if($!==0)return $;switch(L&-L){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return L&261888;case 262144:case 524288:case 1048576:case 2097152:return L&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return L&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return L}}function Et(L,$,j){var G=L.pendingLanes;if(G===0)return 0;var ee=0,ae=L.suspendedLanes,ve=L.pingedLanes;L=L.warmLanes;var Me=G&134217727;return Me!==0?(G=Me&~ae,G!==0?ee=zt(G):(ve&=Me,ve!==0?ee=zt(ve):j||(j=Me&~L,j!==0&&(ee=zt(j))))):(Me=G&~ae,Me!==0?ee=zt(Me):ve!==0?ee=zt(ve):j||(j=G&~L,j!==0&&(ee=zt(j)))),ee===0?0:$!==0&&$!==ee&&($&ae)===0&&(ae=ee&-ee,j=$&-$,ae>=j||ae===32&&(j&4194048)!==0)?$:ee}function bt(L,$){return(L.pendingLanes&~(L.suspendedLanes&~L.pingedLanes)&$)===0}function Nt(L,$){switch(L){case 1:case 2:case 4:case 8:case 64:return $+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var L=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),L}function fr(L){for(var $=[],j=0;31>j;j++)$.push(L);return $}function Gt(L,$){L.pendingLanes|=$,$!==268435456&&(L.suspendedLanes=0,L.pingedLanes=0,L.warmLanes=0)}function dr(L,$,j,G,ee,ae){var ve=L.pendingLanes;L.pendingLanes=j,L.suspendedLanes=0,L.pingedLanes=0,L.warmLanes=0,L.expiredLanes&=j,L.entangledLanes&=j,L.errorRecoveryDisabledLanes&=j,L.shellSuspendCounter=0;var Me=L.entanglements,je=L.expirationTimes,Je=L.hiddenUpdates;for(j=ve&~j;0<j;){var st=31-tt(j),gt=1<<st;Me[st]=0,je[st]=-1;var rt=Je[st];if(rt!==null)for(Je[st]=null,st=0;st<rt.length;st++){var it=rt[st];it!==null&&(it.lane&=-536870913)}j&=~gt}G!==0&&vr(L,G,0),ae!==0&&ee===0&&L.tag!==0&&(L.suspendedLanes|=ae&~(ve&~$))}function vr(L,$,j){L.pendingLanes|=$,L.suspendedLanes&=~$;var G=31-tt($);L.entangledLanes|=$,L.entanglements[G]=L.entanglements[G]|1073741824|j&261930}function cr(L,$){var j=L.entangledLanes|=$;for(L=L.entanglements;j;){var G=31-tt(j),ee=1<<G;ee&$|L[G]&$&&(L[G]|=$),j&=~ee}}function or(L,$){var j=$&-$;return j=(j&42)!==0?1:Tr(j),(j&(L.suspendedLanes|$))!==0?0:j}function Tr(L){switch(L){case 2:L=1;break;case 8:L=4;break;case 32:L=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:L=128;break;case 268435456:L=134217728;break;default:L=0}return L}function Fr(L){return L&=-L,2<L?8<L?(L&134217727)!==0?32:268435456:8:2}function Or(){var L=be.p;return L!==0?L:(L=window.event,L===void 0?32:Rp(L.type))}function Dn(L,$){var j=be.p;try{return be.p=L,$()}finally{be.p=j}}var Hr=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Hr,Ur="__reactProps$"+Hr,wn="__reactContainer$"+Hr,en="__reactEvents$"+Hr,nn="__reactListeners$"+Hr,vn="__reactHandles$"+Hr,Ra="__reactResources$"+Hr,on="__reactMarker$"+Hr;function ai(L){delete L[Dr],delete L[Ur],delete L[en],delete L[nn],delete L[vn]}function Ta(L){var $=L[Dr];if($)return $;for(var j=L.parentNode;j;){if($=j[wn]||j[Dr]){if(j=$.alternate,$.child!==null||j!==null&&j.child!==null)for(L=cp(L);L!==null;){if(j=L[Dr])return j;L=cp(L)}return $}L=j,j=L.parentNode}return null}function Aa(L){if(L=L[Dr]||L[wn]){var $=L.tag;if($===5||$===6||$===13||$===31||$===26||$===27||$===3)return L}return null}function ja(L){var $=L.tag;if($===5||$===26||$===27||$===6)return L.stateNode;throw Error(R(33))}function ka(L){var $=L[Ra];return $||($=L[Ra]={hoistableStyles:new Map,hoistableScripts:new Map}),$}function $r(L){L[on]=!0}var ca=new Set,oo={};function An(L,$){Jn(L,$),Jn(L+"Capture",$)}function Jn(L,$){for(oo[L]=$,L=0;L<$.length;L++)ca.add($[L])}var Un=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ni={},Li={};function so(L){return _t.call(Li,L)?!0:_t.call(Ni,L)?!1:Un.test(L)?Li[L]=!0:(Ni[L]=!0,!1)}function yn(L,$,j){if(so($))if(j===null)L.removeAttribute($);else{switch(typeof j){case"undefined":case"function":case"symbol":L.removeAttribute($);return;case"boolean":var G=$.toLowerCase().slice(0,5);if(G!=="data-"&&G!=="aria-"){L.removeAttribute($);return}}L.setAttribute($,""+j)}}function fa(L,$,j){if(j===null)L.removeAttribute($);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":L.removeAttribute($);return}L.setAttribute($,""+j)}}function kn(L,$,j,G){if(G===null)L.removeAttribute(j);else{switch(typeof G){case"undefined":case"function":case"symbol":case"boolean":L.removeAttribute(j);return}L.setAttributeNS($,j,""+G)}}function sn(L){switch(typeof L){case"bigint":case"boolean":case"number":case"string":case"undefined":return L;case"object":return L;default:return""}}function Cn(L){var $=L.type;return(L=L.nodeName)&&L.toLowerCase()==="input"&&($==="checkbox"||$==="radio")}function Uo(L,$,j){var G=Object.getOwnPropertyDescriptor(L.constructor.prototype,$);if(!L.hasOwnProperty($)&&typeof G<"u"&&typeof G.get=="function"&&typeof G.set=="function"){var ee=G.get,ae=G.set;return Object.defineProperty(L,$,{configurable:!0,get:function(){return ee.call(this)},set:function(ve){j=""+ve,ae.call(this,ve)}}),Object.defineProperty(L,$,{enumerable:G.enumerable}),{getValue:function(){return j},setValue:function(ve){j=""+ve},stopTracking:function(){L._valueTracker=null,delete L[$]}}}}function lo(L){if(!L._valueTracker){var $=Cn(L)?"checked":"value";L._valueTracker=Uo(L,$,""+L[$])}}function uo(L){if(!L)return!1;var $=L._valueTracker;if(!$)return!0;var j=$.getValue(),G="";return L&&(G=Cn(L)?L.checked?"true":"false":L.value),L=G,L!==j?($.setValue(L),!0):!1}function co(L){if(L=L||(typeof document<"u"?document:void 0),typeof L>"u")return null;try{return L.activeElement||L.body}catch{return L.body}}var Mu=/[\n"\\]/g;function Pn(L){return L.replace(Mu,function($){return"\\"+$.charCodeAt(0).toString(16)+" "})}function Go(L,$,j,G,ee,ae,ve,Me){L.name="",ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?L.type=ve:L.removeAttribute("type"),$!=null?ve==="number"?($===0&&L.value===""||L.value!=$)&&(L.value=""+sn($)):L.value!==""+sn($)&&(L.value=""+sn($)):ve!=="submit"&&ve!=="reset"||L.removeAttribute("value"),$!=null?Ko(L,ve,sn($)):j!=null?Ko(L,ve,sn(j)):G!=null&&L.removeAttribute("value"),ee==null&&ae!=null&&(L.defaultChecked=!!ae),ee!=null&&(L.checked=ee&&typeof ee!="function"&&typeof ee!="symbol"),Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"?L.name=""+sn(Me):L.removeAttribute("name")}function fo(L,$,j,G,ee,ae,ve,Me){if(ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(L.type=ae),$!=null||j!=null){if(!(ae!=="submit"&&ae!=="reset"||$!=null)){lo(L);return}j=j!=null?""+sn(j):"",$=$!=null?""+sn($):j,Me||$===L.value||(L.value=$),L.defaultValue=$}G=G??ee,G=typeof G!="function"&&typeof G!="symbol"&&!!G,L.checked=Me?L.checked:!!G,L.defaultChecked=!!G,ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"&&(L.name=ve),lo(L)}function Ko(L,$,j){$==="number"&&co(L.ownerDocument)===L||L.defaultValue===""+j||(L.defaultValue=""+j)}function ii(L,$,j,G){if(L=L.options,$){$={};for(var ee=0;ee<j.length;ee++)$["$"+j[ee]]=!0;for(j=0;j<L.length;j++)ee=$.hasOwnProperty("$"+L[j].value),L[j].selected!==ee&&(L[j].selected=ee),ee&&G&&(L[j].defaultSelected=!0)}else{for(j=""+sn(j),$=null,ee=0;ee<L.length;ee++){if(L[ee].value===j){L[ee].selected=!0,G&&(L[ee].defaultSelected=!0);return}$!==null||L[ee].disabled||($=L[ee])}$!==null&&($.selected=!0)}}function nl(L,$,j){if($!=null&&($=""+sn($),$!==L.value&&(L.value=$),j==null)){L.defaultValue!==$&&(L.defaultValue=$);return}L.defaultValue=j!=null?""+sn(j):""}function al(L,$,j,G){if($==null){if(G!=null){if(j!=null)throw Error(R(92));if(_e(G)){if(1<G.length)throw Error(R(93));G=G[0]}j=G}j==null&&(j=""),$=j}j=sn($),L.defaultValue=j,G=L.textContent,G===j&&G!==""&&G!==null&&(L.value=G),lo(L)}function oi(L,$){if($){var j=L.firstChild;if(j&&j===L.lastChild&&j.nodeType===3){j.nodeValue=$;return}}L.textContent=$}var Ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function il(L,$,j){var G=$.indexOf("--")===0;j==null||typeof j=="boolean"||j===""?G?L.setProperty($,""):$==="float"?L.cssFloat="":L[$]="":G?L.setProperty($,j):typeof j!="number"||j===0||Ou.has($)?$==="float"?L.cssFloat=j:L[$]=(""+j).trim():L[$]=j+"px"}function ol(L,$,j){if($!=null&&typeof $!="object")throw Error(R(62));if(L=L.style,j!=null){for(var G in j)!j.hasOwnProperty(G)||$!=null&&$.hasOwnProperty(G)||(G.indexOf("--")===0?L.setProperty(G,""):G==="float"?L.cssFloat="":L[G]="");for(var ee in $)G=$[ee],$.hasOwnProperty(ee)&&j[ee]!==G&&il(L,ee,G)}else for(var ae in $)$.hasOwnProperty(ae)&&il(L,ae,$[ae])}function Wo(L){if(L.indexOf("-")===-1)return!1;switch(L){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(L){return Pu.test(""+L)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":L}function da(){}var Yo=null;function Xo(L){return L=L.target||L.srcElement||window,L.correspondingUseElement&&(L=L.correspondingUseElement),L.nodeType===3?L.parentNode:L}var ha=null,si=null;function sl(L){var $=Aa(L);if($&&(L=$.stateNode)){var j=L[Ur]||null;e:switch(L=$.stateNode,$.type){case"input":if(Go(L,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name),$=j.name,j.type==="radio"&&$!=null){for(j=L;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll('input[name="'+Pn(""+$)+'"][type="radio"]'),$=0;$<j.length;$++){var G=j[$];if(G!==L&&G.form===L.form){var ee=G[Ur]||null;if(!ee)throw Error(R(90));Go(G,ee.value,ee.defaultValue,ee.defaultValue,ee.checked,ee.defaultChecked,ee.type,ee.name)}}for($=0;$<j.length;$++)G=j[$],G.form===L.form&&uo(G)}break e;case"textarea":nl(L,j.value,j.defaultValue);break e;case"select":$=j.value,$!=null&&ii(L,!!j.multiple,$,!1)}}}var Qo=!1;function ll(L,$,j){if(Qo)return L($,j);Qo=!0;try{var G=L($);return G}finally{if(Qo=!1,(ha!==null||si!==null)&&(lu(),ha&&($=ha,L=si,si=ha=null,sl($),L)))for($=0;$<L.length;$++)sl(L[$])}}function Ii(L,$){var j=L.stateNode;if(j===null)return null;var G=j[Ur]||null;if(G===null)return null;j=G[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(G=!G.disabled)||(L=L.type,G=!(L==="button"||L==="input"||L==="select"||L==="textarea")),L=!G;break e;default:L=!1}if(L)return null;if(j&&typeof j!="function")throw Error(R(231,$,typeof j));return j}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=!1;if(pa)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Zo=!1}var Ma=null,Jo=null,po=null;function ul(){if(po)return po;var L,$=Jo,j=$.length,G,ee="value"in Ma?Ma.value:Ma.textContent,ae=ee.length;for(L=0;L<j&&$[L]===ee[L];L++);var ve=j-L;for(G=1;G<=ve&&$[j-G]===ee[ae-G];G++);return po=ee.slice(L,1<G?1-G:void 0)}function go(L){var $=L.keyCode;return"charCode"in L?(L=L.charCode,L===0&&$===13&&(L=13)):L=$,L===10&&(L=13),32<=L||L===13?L:0}function mo(){return!0}function cl(){return!1}function _n(L){function $(j,G,ee,ae,ve){this._reactName=j,this._targetInst=ee,this.type=G,this.nativeEvent=ae,this.target=ve,this.currentTarget=null;for(var Me in L)L.hasOwnProperty(Me)&&(j=L[Me],this[Me]=j?j(ae):ae[Me]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?mo:cl,this.isPropagationStopped=cl,this}return q($.prototype,{preventDefault:function(){this.defaultPrevented=!0;var j=this.nativeEvent;j&&(j.preventDefault?j.preventDefault():typeof j.returnValue!="unknown"&&(j.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var j=this.nativeEvent;j&&(j.stopPropagation?j.stopPropagation():typeof j.cancelBubble!="unknown"&&(j.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),$}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(L){return L.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=_n(Fa),$i=q({},Fa,{view:0,detail:0}),Nu=_n($i),rs,ns,Bi,yo=q({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(L){return L.relatedTarget===void 0?L.fromElement===L.srcElement?L.toElement:L.fromElement:L.relatedTarget},movementX:function(L){return"movementX"in L?L.movementX:(L!==Bi&&(Bi&&L.type==="mousemove"?(rs=L.screenX-Bi.screenX,ns=L.screenY-Bi.screenY):ns=rs=0,Bi=L),rs)},movementY:function(L){return"movementY"in L?L.movementY:ns}}),fl=_n(yo),Lu=q({},yo,{dataTransfer:0}),Iu=_n(Lu),qu=q({},$i,{relatedTarget:0}),as=_n(qu),$u=q({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=_n($u),ju=q({},Fa,{clipboardData:function(L){return"clipboardData"in L?L.clipboardData:window.clipboardData}}),Fu=_n(ju),zu=q({},Fa,{data:0}),dl=_n(zu),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gu(L){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(L):(L=Uu[L])?!!$[L]:!1}function is(){return Gu}var Ku=q({},$i,{key:function(L){if(L.key){var $=Vu[L.key]||L.key;if($!=="Unidentified")return $}return L.type==="keypress"?(L=go(L),L===13?"Enter":String.fromCharCode(L)):L.type==="keydown"||L.type==="keyup"?Hu[L.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(L){return L.type==="keypress"?go(L):0},keyCode:function(L){return L.type==="keydown"||L.type==="keyup"?L.keyCode:0},which:function(L){return L.type==="keypress"?go(L):L.type==="keydown"||L.type==="keyup"?L.keyCode:0}}),Wu=_n(Ku),Yu=q({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=_n(Yu),Xu=q({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),Qu=_n(Xu),Zu=q({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ju=_n(Zu),ec=q({},yo,{deltaX:function(L){return"deltaX"in L?L.deltaX:"wheelDeltaX"in L?-L.wheelDeltaX:0},deltaY:function(L){return"deltaY"in L?L.deltaY:"wheelDeltaY"in L?-L.wheelDeltaY:"wheelDelta"in L?-L.wheelDelta:0},deltaZ:0,deltaMode:0}),tc=_n(ec),rc=q({},Fa,{newState:0,oldState:0}),nc=_n(rc),ac=[9,13,27,32],os=pa&&"CompositionEvent"in window,ji=null;pa&&"documentMode"in document&&(ji=document.documentMode);var ic=pa&&"TextEvent"in window&&!ji,pl=pa&&(!os||ji&&8<ji&&11>=ji),gl=" ",ml=!1;function vl(L,$){switch(L){case"keyup":return ac.indexOf($.keyCode)!==-1;case"keydown":return $.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(L){return L=L.detail,typeof L=="object"&&"data"in L?L.data:null}var li=!1;function fe(L,$){switch(L){case"compositionend":return yl($);case"keypress":return $.which!==32?null:(ml=!0,gl);case"textInput":return L=$.data,L===gl&&ml?null:L;default:return null}}function Dt(L,$){if(li)return L==="compositionend"||!os&&vl(L,$)?(L=ul(),po=Jo=Ma=null,li=!1,L):null;switch(L){case"paste":return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return pl&&$.locale!=="ko"?null:$.data;default:return null}}var ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(L){var $=L&&L.nodeName&&L.nodeName.toLowerCase();return $==="input"?!!ui[L.type]:$==="textarea"}function Fi(L,$,j,G){ha?si?si.push(G):si=[G]:ha=G,$=gu($,"onChange"),0<$.length&&(j=new vo("onChange","change",null,j,G),L.push({event:j,listeners:$}))}var We=null,ga=null;function oc(L){Xh(L,0)}function er(L){var $=ja(L);if(uo($))return L}function Oa(L,$){if(L==="change")return $}var zi=!1;if(pa){var Yt;if(pa){var Pr="oninput"in document;if(!Pr){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),Pr=typeof xl.oninput=="function"}Yt=Pr}else Yt=!1;zi=Yt&&(!document.documentMode||9<document.documentMode)}function bl(){We&&(We.detachEvent("onpropertychange",ma),ga=We=null)}function ma(L){if(L.propertyName==="value"&&er(ga)){var $=[];Fi($,ga,L,Xo(L)),ll(oc,$)}}function El(L,$,j){L==="focusin"?(bl(),We=$,ga=j,We.attachEvent("onpropertychange",ma)):L==="focusout"&&bl()}function xo(L){if(L==="selectionchange"||L==="keyup"||L==="keydown")return er(ga)}function ut(L,$){if(L==="click")return er($)}function sc(L,$){if(L==="input"||L==="change")return er($)}function lc(L,$){return L===$&&(L!==0||1/L===1/$)||L!==L&&$!==$}var Rn=typeof Object.is=="function"?Object.is:lc;function Vi(L,$){if(Rn(L,$))return!0;if(typeof L!="object"||L===null||typeof $!="object"||$===null)return!1;var j=Object.keys(L),G=Object.keys($);if(j.length!==G.length)return!1;for(G=0;G<j.length;G++){var ee=j[G];if(!_t.call($,ee)||!Rn(L[ee],$[ee]))return!1}return!0}function Sl(L){for(;L&&L.firstChild;)L=L.firstChild;return L}function wl(L,$){var j=Sl(L);L=0;for(var G;j;){if(j.nodeType===3){if(G=L+j.textContent.length,L<=$&&G>=$)return{node:j,offset:$-L};L=G}e:{for(;j;){if(j.nextSibling){j=j.nextSibling;break e}j=j.parentNode}j=void 0}j=Sl(j)}}function ss(L,$){return L&&$?L===$?!0:L&&L.nodeType===3?!1:$&&$.nodeType===3?ss(L,$.parentNode):"contains"in L?L.contains($):L.compareDocumentPosition?!!(L.compareDocumentPosition($)&16):!1:!1}function ls(L){L=L!=null&&L.ownerDocument!=null&&L.ownerDocument.defaultView!=null?L.ownerDocument.defaultView:window;for(var $=co(L.document);$ instanceof L.HTMLIFrameElement;){try{var j=typeof $.contentWindow.location.href=="string"}catch{j=!1}if(j)L=$.contentWindow;else break;$=co(L.document)}return $}function us(L){var $=L&&L.nodeName&&L.nodeName.toLowerCase();return $&&($==="input"&&(L.type==="text"||L.type==="search"||L.type==="tel"||L.type==="url"||L.type==="password")||$==="textarea"||L.contentEditable==="true")}var uc=pa&&"documentMode"in document&&11>=document.documentMode,za=null,bo=null,Hi=null,cs=!1;function fs(L,$,j){var G=j.window===j?j.document:j.nodeType===9?j:j.ownerDocument;cs||za==null||za!==co(G)||(G=za,"selectionStart"in G&&us(G)?G={start:G.selectionStart,end:G.selectionEnd}:(G=(G.ownerDocument&&G.ownerDocument.defaultView||window).getSelection(),G={anchorNode:G.anchorNode,anchorOffset:G.anchorOffset,focusNode:G.focusNode,focusOffset:G.focusOffset}),Hi&&Vi(Hi,G)||(Hi=G,G=gu(bo,"onSelect"),0<G.length&&($=new vo("onSelect","select",null,$,j),L.push({event:$,listeners:G}),$.target=za)))}function Da(L,$){var j={};return j[L.toLowerCase()]=$.toLowerCase(),j["Webkit"+L]="webkit"+$,j["Moz"+L]="moz"+$,j}var va={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},ds={},Cl={};pa&&(Cl=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Va(L){if(ds[L])return ds[L];if(!va[L])return L;var $=va[L],j;for(j in $)if($.hasOwnProperty(j)&&j in Cl)return ds[L]=$[j];return L}var _l=Va("animationend"),hs=Va("animationiteration"),Eo=Va("animationstart"),ps=Va("transitionrun"),cc=Va("transitionstart"),gs=Va("transitioncancel"),Rl=Va("transitionend"),vs=new Map,Ui="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ui.push("scrollEnd");function Gn(L,$){vs.set(L,$),An($,[L])}var Gi=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Ln=[],ci=0,ys=0;function fi(){for(var L=ci,$=ys=ci=0;$<L;){var j=Ln[$];Ln[$++]=null;var G=Ln[$];Ln[$++]=null;var ee=Ln[$];Ln[$++]=null;var ae=Ln[$];if(Ln[$++]=null,G!==null&&ee!==null){var ve=G.pending;ve===null?ee.next=ee:(ee.next=ve.next,ve.next=ee),G.pending=ee}ae!==0&&Tl(j,ee,ae)}}function di(L,$,j,G){Ln[ci++]=L,Ln[ci++]=$,Ln[ci++]=j,Ln[ci++]=G,ys|=G,L.lanes|=G,L=L.alternate,L!==null&&(L.lanes|=G)}function xs(L,$,j,G){return di(L,$,j,G),gn(L)}function Ha(L,$){return di(L,null,null,$),gn(L)}function Tl(L,$,j){L.lanes|=j;var G=L.alternate;G!==null&&(G.lanes|=j);for(var ee=!1,ae=L.return;ae!==null;)ae.childLanes|=j,G=ae.alternate,G!==null&&(G.childLanes|=j),ae.tag===22&&(L=ae.stateNode,L===null||L._visibility&1||(ee=!0)),L=ae,ae=ae.return;return L.tag===3?(ae=L.stateNode,ee&&$!==null&&(ee=31-tt(j),L=ae.hiddenUpdates,G=L[ee],G===null?L[ee]=[$]:G.push($),$.lane=j|536870912),ae):null}function gn(L){if(50<Hs)throw Hs=0,cf=null,Error(R(185));for(var $=L.return;$!==null;)L=$,$=L.return;return L.tag===3?L.stateNode:null}var hi={};function fc(L,$,j,G){this.tag=L,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=G,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(L,$,j,G){return new fc(L,$,j,G)}function Ua(L){return L=L.prototype,!(!L||!L.isReactComponent)}function In(L,$){var j=L.alternate;return j===null?(j=xn(L.tag,$,L.key,L.mode),j.elementType=L.elementType,j.type=L.type,j.stateNode=L.stateNode,j.alternate=L,L.alternate=j):(j.pendingProps=$,j.type=L.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=L.flags&65011712,j.childLanes=L.childLanes,j.lanes=L.lanes,j.child=L.child,j.memoizedProps=L.memoizedProps,j.memoizedState=L.memoizedState,j.updateQueue=L.updateQueue,$=L.dependencies,j.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},j.sibling=L.sibling,j.index=L.index,j.ref=L.ref,j.refCleanup=L.refCleanup,j}function bs(L,$){L.flags&=65011714;var j=L.alternate;return j===null?(L.childLanes=0,L.lanes=$,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=j.childLanes,L.lanes=j.lanes,L.child=j.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=j.memoizedProps,L.memoizedState=j.memoizedState,L.updateQueue=j.updateQueue,L.type=j.type,$=j.dependencies,L.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),L}function So(L,$,j,G,ee,ae){var ve=0;if(G=L,typeof L=="function")Ua(L)&&(ve=1);else if(typeof L=="string")ve=Lg(L,j,Ce.current)?26:L==="html"||L==="head"||L==="body"?27:5;else e:switch(L){case le:return L=xn(31,j,$,ee),L.elementType=le,L.lanes=ae,L;case V:return Pa(j.children,ee,ae,$);case H:ve=8,ee|=24;break;case W:return L=xn(12,j,$,ee|2),L.elementType=W,L.lanes=ae,L;case ne:return L=xn(13,j,$,ee),L.elementType=ne,L.lanes=ae,L;case oe:return L=xn(19,j,$,ee),L.elementType=oe,L.lanes=ae,L;default:if(typeof L=="object"&&L!==null)switch(L.$$typeof){case Z:ve=10;break e;case Y:ve=9;break e;case J:ve=11;break e;case te:ve=14;break e;case se:ve=16,G=null;break e}ve=29,j=Error(R(130,L===null?"null":typeof L,"")),G=null}return $=xn(ve,j,$,ee),$.elementType=L,$.type=G,$.lanes=ae,$}function Pa(L,$,j,G){return L=xn(7,L,G,$),L.lanes=j,L}function wo(L,$,j){return L=xn(6,L,null,$),L.lanes=j,L}function ya(L){var $=xn(18,null,null,0);return $.stateNode=L,$}function Es(L,$,j){return $=xn(4,L.children!==null?L.children:[],L.key,$),$.lanes=j,$.stateNode={containerInfo:L.containerInfo,pendingChildren:null,implementation:L.implementation},$}var Ss=new WeakMap;function qn(L,$){if(typeof L=="object"&&L!==null){var j=Ss.get(L);return j!==void 0?j:($={value:L,source:$,stack:Ze($)},Ss.set(L,$),$)}return{value:L,source:$,stack:Ze($)}}var ra=[],Ga=0,Ki=null,Wi=0,Mn=[],$n=0,Na=null,na=1,aa="";function xa(L,$){ra[Ga++]=Wi,ra[Ga++]=Ki,Ki=L,Wi=$}function Yi(L,$,j){Mn[$n++]=na,Mn[$n++]=aa,Mn[$n++]=Na,Na=L;var G=na;L=aa;var ee=32-tt(G)-1;G&=~(1<<ee),j+=1;var ae=32-tt($)+ee;if(30<ae){var ve=ee-ee%5;ae=(G&(1<<ve)-1).toString(32),G>>=ve,ee-=ve,na=1<<32-tt($)+ee|j<<ee|G,aa=ae+L}else na=1<<ae|j<<ee|G,aa=L}function Xi(L){L.return!==null&&(xa(L,1),Yi(L,1,0))}function ws(L){for(;L===Ki;)Ki=ra[--Ga],ra[Ga]=null,Wi=ra[--Ga],ra[Ga]=null;for(;L===Na;)Na=Mn[--$n],Mn[$n]=null,aa=Mn[--$n],Mn[$n]=null,na=Mn[--$n],Mn[$n]=null}function Al(L,$){Mn[$n++]=na,Mn[$n++]=aa,Mn[$n++]=Na,na=$.id,aa=$.overflow,Na=L}var ln=null,Sr=null,rr=!1,ia=null,Tn=!1,Cs=Error(R(519));function ba(L){var $=Error(R(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bn(qn($,L)),Cs}function kl(L){var $=L.stateNode,j=L.type,G=L.memoizedProps;switch($[Dr]=L,$[Ur]=G,j){case"dialog":ar("cancel",$),ar("close",$);break;case"iframe":case"object":case"embed":ar("load",$);break;case"video":case"audio":for(j=0;j<Gs.length;j++)ar(Gs[j],$);break;case"source":ar("error",$);break;case"img":case"image":case"link":ar("error",$),ar("load",$);break;case"details":ar("toggle",$);break;case"input":ar("invalid",$),fo($,G.value,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name,!0);break;case"select":ar("invalid",$);break;case"textarea":ar("invalid",$),al($,G.value,G.defaultValue,G.children)}j=G.children,typeof j!="string"&&typeof j!="number"&&typeof j!="bigint"||$.textContent===""+j||G.suppressHydrationWarning===!0||ep($.textContent,j)?(G.popover!=null&&(ar("beforetoggle",$),ar("toggle",$)),G.onScroll!=null&&ar("scroll",$),G.onScrollEnd!=null&&ar("scrollend",$),G.onClick!=null&&($.onclick=da),$=!0):$=!1,$||ba(L,!0)}function Ml(L){for(ln=L.return;ln;)switch(ln.tag){case 5:case 31:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:ln=ln.return}}function pi(L){if(L!==ln)return!1;if(!rr)return Ml(L),rr=!0,!1;var $=L.tag,j;if((j=$!==3&&$!==27)&&((j=$===5)&&(j=L.type,j=!(j!=="form"&&j!=="button")||_f(L.type,L.memoizedProps)),j=!j),j&&Sr&&ba(L),Ml(L),$===13){if(L=L.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(R(317));Sr=up(L)}else if($===31){if(L=L.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(R(317));Sr=up(L)}else $===27?($=Sr,Ai(L.type)?(L=Mf,Mf=null,Sr=L):Sr=$):Sr=ln?la(L.stateNode.nextSibling):null;return!0}function La(){Sr=ln=null,rr=!1}function gi(){var L=ia;return L!==null&&(Vn===null?Vn=L:Vn.push.apply(Vn,L),ia=null),L}function Bn(L){ia===null?ia=[L]:ia.push(L)}var _s=pe(null),Kn=null,Ea=null;function oa(L,$,j){Oe(_s,$._currentValue),$._currentValue=j}function Sa(L){L._currentValue=_s.current,we(_s)}function Bt(L,$,j){for(;L!==null;){var G=L.alternate;if((L.childLanes&$)!==$?(L.childLanes|=$,G!==null&&(G.childLanes|=$)):G!==null&&(G.childLanes&$)!==$&&(G.childLanes|=$),L===j)break;L=L.return}}function Rs(L,$,j,G){var ee=L.child;for(ee!==null&&(ee.return=L);ee!==null;){var ae=ee.dependencies;if(ae!==null){var ve=ee.child;ae=ae.firstContext;e:for(;ae!==null;){var Me=ae;ae=ee;for(var je=0;je<$.length;je++)if(Me.context===$[je]){ae.lanes|=j,Me=ae.alternate,Me!==null&&(Me.lanes|=j),Bt(ae.return,j,L),G||(ve=null);break e}ae=Me.next}}else if(ee.tag===18){if(ve=ee.return,ve===null)throw Error(R(341));ve.lanes|=j,ae=ve.alternate,ae!==null&&(ae.lanes|=j),Bt(ve,j,L),ve=null}else ve=ee.child;if(ve!==null)ve.return=ee;else for(ve=ee;ve!==null;){if(ve===L){ve=null;break}if(ee=ve.sibling,ee!==null){ee.return=ve.return,ve=ee;break}ve=ve.return}ee=ve}}function Ia(L,$,j,G){L=null;for(var ee=$,ae=!1;ee!==null;){if(!ae){if((ee.flags&524288)!==0)ae=!0;else if((ee.flags&262144)!==0)break}if(ee.tag===10){var ve=ee.alternate;if(ve===null)throw Error(R(387));if(ve=ve.memoizedProps,ve!==null){var Me=ee.type;Rn(ee.pendingProps.value,ve.value)||(L!==null?L.push(Me):L=[Me])}}else if(ee===Te.current){if(ve=ee.alternate,ve===null)throw Error(R(387));ve.memoizedState.memoizedState!==ee.memoizedState.memoizedState&&(L!==null?L.push(Js):L=[Js])}ee=ee.return}L!==null&&Rs($,L,j,G),$.flags|=262144}function Co(L){for(L=L.firstContext;L!==null;){if(!Rn(L.context._currentValue,L.memoizedValue))return!0;L=L.next}return!1}function qa(L){Kn=L,Ea=null,L=L.dependencies,L!==null&&(L.firstContext=null)}function Kr(L){return re(Kn,L)}function Qi(L,$){return Kn===null&&qa(L),re(L,$)}function re(L,$){var j=$._currentValue;if($={context:$,memoizedValue:j,next:null},Ea===null){if(L===null)throw Error(R(308));Ea=$,L.dependencies={lanes:0,firstContext:$},L.flags|=524288}else Ea=Ea.next=$;return j}var de=typeof AbortController<"u"?AbortController:function(){var L=[],$=this.signal={aborted:!1,addEventListener:function(j,G){L.push(G)}};this.abort=function(){$.aborted=!0,L.forEach(function(j){return j()})}},Re=_.unstable_scheduleCallback,Ae=_.unstable_NormalPriority,Be={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function et(){return{controller:new de,data:new Map,refCount:0}}function Wt(L){L.refCount--,L.refCount===0&&Re(Ae,function(){L.controller.abort()})}var Ir=null,dc=0,_o=0,Ro=null;function Np(L,$){if(Ir===null){var j=Ir=[];dc=0,_o=mf(),Ro={status:"pending",value:void 0,then:function(G){j.push(G)}}}return dc++,$.then(jf,jf),$}function jf(){if(--dc===0&&Ir!==null){Ro!==null&&(Ro.status="fulfilled");var L=Ir;Ir=null,_o=0,Ro=null;for(var $=0;$<L.length;$++)(0,L[$])()}}function Lp(L,$){var j=[],G={status:"pending",value:null,reason:null,then:function(ee){j.push(ee)}};return L.then(function(){G.status="fulfilled",G.value=$;for(var ee=0;ee<j.length;ee++)(0,j[ee])($)},function(ee){for(G.status="rejected",G.reason=ee,ee=0;ee<j.length;ee++)(0,j[ee])(void 0)}),G}var Ff=ye.S;ye.S=function(L,$){Ch=Ct(),typeof $=="object"&&$!==null&&typeof $.then=="function"&&Np(L,$),Ff!==null&&Ff(L,$)};var Zi=pe(null);function hc(){var L=Zi.current;return L!==null?L:Mr.pooledCache}function Ol(L,$){$===null?Oe(Zi,Zi.current):Oe(Zi,$.pool)}function zf(){var L=hc();return L===null?null:{parent:Be._currentValue,pool:L}}var To=Error(R(460)),pc=Error(R(474)),Dl=Error(R(542)),Pl={then:function(){}};function Vf(L){return L=L.status,L==="fulfilled"||L==="rejected"}function Hf(L,$,j){switch(j=L[j],j===void 0?L.push($):j!==$&&($.then(da,da),$=j),$.status){case"fulfilled":return $.value;case"rejected":throw L=$.reason,Gf(L),L;default:if(typeof $.status=="string")$.then(da,da);else{if(L=Mr,L!==null&&100<L.shellSuspendCounter)throw Error(R(482));L=$,L.status="pending",L.then(function(G){if($.status==="pending"){var ee=$;ee.status="fulfilled",ee.value=G}},function(G){if($.status==="pending"){var ee=$;ee.status="rejected",ee.reason=G}})}switch($.status){case"fulfilled":return $.value;case"rejected":throw L=$.reason,Gf(L),L}throw eo=$,To}}function Ji(L){try{var $=L._init;return $(L._payload)}catch(j){throw j!==null&&typeof j=="object"&&typeof j.then=="function"?(eo=j,To):j}}var eo=null;function Uf(){if(eo===null)throw Error(R(459));var L=eo;return eo=null,L}function Gf(L){if(L===To||L===Dl)throw Error(R(483))}var Ao=null,Ts=0;function Nl(L){var $=Ts;return Ts+=1,Ao===null&&(Ao=[]),Hf(Ao,L,$)}function As(L,$){$=$.props.ref,L.ref=$!==void 0?$:null}function Ll(L,$){throw $.$$typeof===B?Error(R(525)):(L=Object.prototype.toString.call($),Error(R(31,L==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":L)))}function Kf(L){function $(Ge,He){if(L){var Xe=Ge.deletions;Xe===null?(Ge.deletions=[He],Ge.flags|=16):Xe.push(He)}}function j(Ge,He){if(!L)return null;for(;He!==null;)$(Ge,He),He=He.sibling;return null}function G(Ge){for(var He=new Map;Ge!==null;)Ge.key!==null?He.set(Ge.key,Ge):He.set(Ge.index,Ge),Ge=Ge.sibling;return He}function ee(Ge,He){return Ge=In(Ge,He),Ge.index=0,Ge.sibling=null,Ge}function ae(Ge,He,Xe){return Ge.index=Xe,L?(Xe=Ge.alternate,Xe!==null?(Xe=Xe.index,Xe<He?(Ge.flags|=67108866,He):Xe):(Ge.flags|=67108866,He)):(Ge.flags|=1048576,He)}function ve(Ge){return L&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function Me(Ge,He,Xe,pt){return He===null||He.tag!==6?(He=wo(Xe,Ge.mode,pt),He.return=Ge,He):(He=ee(He,Xe),He.return=Ge,He)}function je(Ge,He,Xe,pt){var Ft=Xe.type;return Ft===V?st(Ge,He,Xe.props.children,pt,Xe.key):He!==null&&(He.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===se&&Ji(Ft)===He.type)?(He=ee(He,Xe.props),As(He,Xe),He.return=Ge,He):(He=So(Xe.type,Xe.key,Xe.props,null,Ge.mode,pt),As(He,Xe),He.return=Ge,He)}function Je(Ge,He,Xe,pt){return He===null||He.tag!==4||He.stateNode.containerInfo!==Xe.containerInfo||He.stateNode.implementation!==Xe.implementation?(He=Es(Xe,Ge.mode,pt),He.return=Ge,He):(He=ee(He,Xe.children||[]),He.return=Ge,He)}function st(Ge,He,Xe,pt,Ft){return He===null||He.tag!==7?(He=Pa(Xe,Ge.mode,pt,Ft),He.return=Ge,He):(He=ee(He,Xe),He.return=Ge,He)}function gt(Ge,He,Xe){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=wo(""+He,Ge.mode,Xe),He.return=Ge,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case z:return Xe=So(He.type,He.key,He.props,null,Ge.mode,Xe),As(Xe,He),Xe.return=Ge,Xe;case F:return He=Es(He,Ge.mode,Xe),He.return=Ge,He;case se:return He=Ji(He),gt(Ge,He,Xe)}if(_e(He)||ge(He))return He=Pa(He,Ge.mode,Xe,null),He.return=Ge,He;if(typeof He.then=="function")return gt(Ge,Nl(He),Xe);if(He.$$typeof===Z)return gt(Ge,Qi(Ge,He),Xe);Ll(Ge,He)}return null}function rt(Ge,He,Xe,pt){var Ft=He!==null?He.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Ft!==null?null:Me(Ge,He,""+Xe,pt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case z:return Xe.key===Ft?je(Ge,He,Xe,pt):null;case F:return Xe.key===Ft?Je(Ge,He,Xe,pt):null;case se:return Xe=Ji(Xe),rt(Ge,He,Xe,pt)}if(_e(Xe)||ge(Xe))return Ft!==null?null:st(Ge,He,Xe,pt,null);if(typeof Xe.then=="function")return rt(Ge,He,Nl(Xe),pt);if(Xe.$$typeof===Z)return rt(Ge,He,Qi(Ge,Xe),pt);Ll(Ge,Xe)}return null}function it(Ge,He,Xe,pt,Ft){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ge=Ge.get(Xe)||null,Me(He,Ge,""+pt,Ft);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case z:return Ge=Ge.get(pt.key===null?Xe:pt.key)||null,je(He,Ge,pt,Ft);case F:return Ge=Ge.get(pt.key===null?Xe:pt.key)||null,Je(He,Ge,pt,Ft);case se:return pt=Ji(pt),it(Ge,He,Xe,pt,Ft)}if(_e(pt)||ge(pt))return Ge=Ge.get(Xe)||null,st(He,Ge,pt,Ft,null);if(typeof pt.then=="function")return it(Ge,He,Xe,Nl(pt),Ft);if(pt.$$typeof===Z)return it(Ge,He,Xe,Qi(He,pt),Ft);Ll(He,pt)}return null}function Lt(Ge,He,Xe,pt){for(var Ft=null,hr=null,It=He,Zt=He=0,ur=null;It!==null&&Zt<Xe.length;Zt++){It.index>Zt?(ur=It,It=null):ur=It.sibling;var gr=rt(Ge,It,Xe[Zt],pt);if(gr===null){It===null&&(It=ur);break}L&&It&&gr.alternate===null&&$(Ge,It),He=ae(gr,He,Zt),hr===null?Ft=gr:hr.sibling=gr,hr=gr,It=ur}if(Zt===Xe.length)return j(Ge,It),rr&&xa(Ge,Zt),Ft;if(It===null){for(;Zt<Xe.length;Zt++)It=gt(Ge,Xe[Zt],pt),It!==null&&(He=ae(It,He,Zt),hr===null?Ft=It:hr.sibling=It,hr=It);return rr&&xa(Ge,Zt),Ft}for(It=G(It);Zt<Xe.length;Zt++)ur=it(It,Ge,Zt,Xe[Zt],pt),ur!==null&&(L&&ur.alternate!==null&&It.delete(ur.key===null?Zt:ur.key),He=ae(ur,He,Zt),hr===null?Ft=ur:hr.sibling=ur,hr=ur);return L&&It.forEach(function(Pi){return $(Ge,Pi)}),rr&&xa(Ge,Zt),Ft}function Vt(Ge,He,Xe,pt){if(Xe==null)throw Error(R(151));for(var Ft=null,hr=null,It=He,Zt=He=0,ur=null,gr=Xe.next();It!==null&&!gr.done;Zt++,gr=Xe.next()){It.index>Zt?(ur=It,It=null):ur=It.sibling;var Pi=rt(Ge,It,gr.value,pt);if(Pi===null){It===null&&(It=ur);break}L&&It&&Pi.alternate===null&&$(Ge,It),He=ae(Pi,He,Zt),hr===null?Ft=Pi:hr.sibling=Pi,hr=Pi,It=ur}if(gr.done)return j(Ge,It),rr&&xa(Ge,Zt),Ft;if(It===null){for(;!gr.done;Zt++,gr=Xe.next())gr=gt(Ge,gr.value,pt),gr!==null&&(He=ae(gr,He,Zt),hr===null?Ft=gr:hr.sibling=gr,hr=gr);return rr&&xa(Ge,Zt),Ft}for(It=G(It);!gr.done;Zt++,gr=Xe.next())gr=it(It,Ge,Zt,gr.value,pt),gr!==null&&(L&&gr.alternate!==null&&It.delete(gr.key===null?Zt:gr.key),He=ae(gr,He,Zt),hr===null?Ft=gr:hr.sibling=gr,hr=gr);return L&&It.forEach(function(Gg){return $(Ge,Gg)}),rr&&xa(Ge,Zt),Ft}function _r(Ge,He,Xe,pt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===V&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case z:e:{for(var Ft=Xe.key;He!==null;){if(He.key===Ft){if(Ft=Xe.type,Ft===V){if(He.tag===7){j(Ge,He.sibling),pt=ee(He,Xe.props.children),pt.return=Ge,Ge=pt;break e}}else if(He.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===se&&Ji(Ft)===He.type){j(Ge,He.sibling),pt=ee(He,Xe.props),As(pt,Xe),pt.return=Ge,Ge=pt;break e}j(Ge,He);break}else $(Ge,He);He=He.sibling}Xe.type===V?(pt=Pa(Xe.props.children,Ge.mode,pt,Xe.key),pt.return=Ge,Ge=pt):(pt=So(Xe.type,Xe.key,Xe.props,null,Ge.mode,pt),As(pt,Xe),pt.return=Ge,Ge=pt)}return ve(Ge);case F:e:{for(Ft=Xe.key;He!==null;){if(He.key===Ft)if(He.tag===4&&He.stateNode.containerInfo===Xe.containerInfo&&He.stateNode.implementation===Xe.implementation){j(Ge,He.sibling),pt=ee(He,Xe.children||[]),pt.return=Ge,Ge=pt;break e}else{j(Ge,He);break}else $(Ge,He);He=He.sibling}pt=Es(Xe,Ge.mode,pt),pt.return=Ge,Ge=pt}return ve(Ge);case se:return Xe=Ji(Xe),_r(Ge,He,Xe,pt)}if(_e(Xe))return Lt(Ge,He,Xe,pt);if(ge(Xe)){if(Ft=ge(Xe),typeof Ft!="function")throw Error(R(150));return Xe=Ft.call(Xe),Vt(Ge,He,Xe,pt)}if(typeof Xe.then=="function")return _r(Ge,He,Nl(Xe),pt);if(Xe.$$typeof===Z)return _r(Ge,He,Qi(Ge,Xe),pt);Ll(Ge,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,He!==null&&He.tag===6?(j(Ge,He.sibling),pt=ee(He,Xe),pt.return=Ge,Ge=pt):(j(Ge,He),pt=wo(Xe,Ge.mode,pt),pt.return=Ge,Ge=pt),ve(Ge)):j(Ge,He)}return function(Ge,He,Xe,pt){try{Ts=0;var Ft=_r(Ge,He,Xe,pt);return Ao=null,Ft}catch(It){if(It===To||It===Dl)throw It;var hr=xn(29,It,null,Ge.mode);return hr.lanes=pt,hr.return=Ge,hr}finally{}}}var to=Kf(!0),Wf=Kf(!1),mi=!1;function gc(L){L.updateQueue={baseState:L.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mc(L,$){L=L.updateQueue,$.updateQueue===L&&($.updateQueue={baseState:L.baseState,firstBaseUpdate:L.firstBaseUpdate,lastBaseUpdate:L.lastBaseUpdate,shared:L.shared,callbacks:null})}function vi(L){return{lane:L,tag:0,payload:null,callback:null,next:null}}function yi(L,$,j){var G=L.updateQueue;if(G===null)return null;if(G=G.shared,(mr&2)!==0){var ee=G.pending;return ee===null?$.next=$:($.next=ee.next,ee.next=$),G.pending=$,$=gn(L),Tl(L,null,j),$}return di(L,G,$,j),gn(L)}function ks(L,$,j){if($=$.updateQueue,$!==null&&($=$.shared,(j&4194048)!==0)){var G=$.lanes;G&=L.pendingLanes,j|=G,$.lanes=j,cr(L,j)}}function vc(L,$){var j=L.updateQueue,G=L.alternate;if(G!==null&&(G=G.updateQueue,j===G)){var ee=null,ae=null;if(j=j.firstBaseUpdate,j!==null){do{var ve={lane:j.lane,tag:j.tag,payload:j.payload,callback:null,next:null};ae===null?ee=ae=ve:ae=ae.next=ve,j=j.next}while(j!==null);ae===null?ee=ae=$:ae=ae.next=$}else ee=ae=$;j={baseState:G.baseState,firstBaseUpdate:ee,lastBaseUpdate:ae,shared:G.shared,callbacks:G.callbacks},L.updateQueue=j;return}L=j.lastBaseUpdate,L===null?j.firstBaseUpdate=$:L.next=$,j.lastBaseUpdate=$}var yc=!1;function Ms(){if(yc){var L=Ro;if(L!==null)throw L}}function Os(L,$,j,G){yc=!1;var ee=L.updateQueue;mi=!1;var ae=ee.firstBaseUpdate,ve=ee.lastBaseUpdate,Me=ee.shared.pending;if(Me!==null){ee.shared.pending=null;var je=Me,Je=je.next;je.next=null,ve===null?ae=Je:ve.next=Je,ve=je;var st=L.alternate;st!==null&&(st=st.updateQueue,Me=st.lastBaseUpdate,Me!==ve&&(Me===null?st.firstBaseUpdate=Je:Me.next=Je,st.lastBaseUpdate=je))}if(ae!==null){var gt=ee.baseState;ve=0,st=Je=je=null,Me=ae;do{var rt=Me.lane&-536870913,it=rt!==Me.lane;if(it?(sr&rt)===rt:(G&rt)===rt){rt!==0&&rt===_o&&(yc=!0),st!==null&&(st=st.next={lane:0,tag:Me.tag,payload:Me.payload,callback:null,next:null});e:{var Lt=L,Vt=Me;rt=$;var _r=j;switch(Vt.tag){case 1:if(Lt=Vt.payload,typeof Lt=="function"){gt=Lt.call(_r,gt,rt);break e}gt=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Vt.payload,rt=typeof Lt=="function"?Lt.call(_r,gt,rt):Lt,rt==null)break e;gt=q({},gt,rt);break e;case 2:mi=!0}}rt=Me.callback,rt!==null&&(L.flags|=64,it&&(L.flags|=8192),it=ee.callbacks,it===null?ee.callbacks=[rt]:it.push(rt))}else it={lane:rt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},st===null?(Je=st=it,je=gt):st=st.next=it,ve|=rt;if(Me=Me.next,Me===null){if(Me=ee.shared.pending,Me===null)break;it=Me,Me=it.next,it.next=null,ee.lastBaseUpdate=it,ee.shared.pending=null}}while(!0);st===null&&(je=gt),ee.baseState=je,ee.firstBaseUpdate=Je,ee.lastBaseUpdate=st,ae===null&&(ee.shared.lanes=0),wi|=ve,L.lanes=ve,L.memoizedState=gt}}function Yf(L,$){if(typeof L!="function")throw Error(R(191,L));L.call($)}function Xf(L,$){var j=L.callbacks;if(j!==null)for(L.callbacks=null,L=0;L<j.length;L++)Yf(j[L],$)}var ko=pe(null),Il=pe(0);function Qf(L,$){L=ti,Oe(Il,L),Oe(ko,$),ti=L|$.baseLanes}function xc(){Oe(Il,ti),Oe(ko,ko.current)}function bc(){ti=Il.current,we(ko),we(Il)}var Wn=pe(null),sa=null;function xi(L){var $=L.alternate;Oe(Wr,Wr.current&1),Oe(Wn,L),sa===null&&($===null||ko.current!==null||$.memoizedState!==null)&&(sa=L)}function Ec(L){Oe(Wr,Wr.current),Oe(Wn,L),sa===null&&(sa=L)}function Zf(L){L.tag===22?(Oe(Wr,Wr.current),Oe(Wn,L),sa===null&&(sa=L)):bi()}function bi(){Oe(Wr,Wr.current),Oe(Wn,Wn.current)}function Yn(L){we(Wn),sa===L&&(sa=null),we(Wr)}var Wr=pe(0);function ql(L){for(var $=L;$!==null;){if($.tag===13){var j=$.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||Af(j)||kf(j)))return $}else if($.tag===19&&($.memoizedProps.revealOrder==="forwards"||$.memoizedProps.revealOrder==="backwards"||$.memoizedProps.revealOrder==="unstable_legacy-backwards"||$.memoizedProps.revealOrder==="together")){if(($.flags&128)!==0)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===L)break;for(;$.sibling===null;){if($.return===null||$.return===L)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Ka=0,Qt=null,wr=null,dn=null,$l=!1,Mo=!1,ro=!1,Bl=0,Ds=0,Oo=null,Ip=0;function zr(){throw Error(R(321))}function Sc(L,$){if($===null)return!1;for(var j=0;j<$.length&&j<L.length;j++)if(!Rn(L[j],$[j]))return!1;return!0}function wc(L,$,j,G,ee,ae){return Ka=ae,Qt=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,ye.H=L===null||L.memoizedState===null?Ld:$c,ro=!1,ae=j(G,ee),ro=!1,Mo&&(ae=ed($,j,G,ee)),Jf(L),ae}function Jf(L){ye.H=Ls;var $=wr!==null&&wr.next!==null;if(Ka=0,dn=wr=Qt=null,$l=!1,Ds=0,Oo=null,$)throw Error(R(300));L===null||hn||(L=L.dependencies,L!==null&&Co(L)&&(hn=!0))}function ed(L,$,j,G){Qt=L;var ee=0;do{if(Mo&&(Oo=null),Ds=0,Mo=!1,25<=ee)throw Error(R(301));if(ee+=1,dn=wr=null,L.updateQueue!=null){var ae=L.updateQueue;ae.lastEffect=null,ae.events=null,ae.stores=null,ae.memoCache!=null&&(ae.memoCache.index=0)}ye.H=Id,ae=$(j,G)}while(Mo);return ae}function qp(){var L=ye.H,$=L.useState()[0];return $=typeof $.then=="function"?Ps($):$,L=L.useState()[0],(wr!==null?wr.memoizedState:null)!==L&&(Qt.flags|=1024),$}function Cc(){var L=Bl!==0;return Bl=0,L}function _c(L,$,j){$.updateQueue=L.updateQueue,$.flags&=-2053,L.lanes&=~j}function Rc(L){if($l){for(L=L.memoizedState;L!==null;){var $=L.queue;$!==null&&($.pending=null),L=L.next}$l=!1}Ka=0,dn=wr=Qt=null,Mo=!1,Ds=Bl=0,Oo=null}function On(){var L={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Qt.memoizedState=dn=L:dn=dn.next=L,dn}function Xr(){if(wr===null){var L=Qt.alternate;L=L!==null?L.memoizedState:null}else L=wr.next;var $=dn===null?Qt.memoizedState:dn.next;if($!==null)dn=$,wr=L;else{if(L===null)throw Qt.alternate===null?Error(R(467)):Error(R(310));wr=L,L={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},dn===null?Qt.memoizedState=dn=L:dn=dn.next=L}return dn}function jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ps(L){var $=Ds;return Ds+=1,Oo===null&&(Oo=[]),L=Hf(Oo,L,$),$=Qt,(dn===null?$.memoizedState:dn.next)===null&&($=$.alternate,ye.H=$===null||$.memoizedState===null?Ld:$c),L}function Fl(L){if(L!==null&&typeof L=="object"){if(typeof L.then=="function")return Ps(L);if(L.$$typeof===Z)return Kr(L)}throw Error(R(438,String(L)))}function Tc(L){var $=null,j=Qt.updateQueue;if(j!==null&&($=j.memoCache),$==null){var G=Qt.alternate;G!==null&&(G=G.updateQueue,G!==null&&(G=G.memoCache,G!=null&&($={data:G.data.map(function(ee){return ee.slice()}),index:0})))}if($==null&&($={data:[],index:0}),j===null&&(j=jl(),Qt.updateQueue=j),j.memoCache=$,j=$.data[$.index],j===void 0)for(j=$.data[$.index]=Array(L),G=0;G<L;G++)j[G]=ue;return $.index++,j}function Wa(L,$){return typeof $=="function"?$(L):$}function zl(L){var $=Xr();return Ac($,wr,L)}function Ac(L,$,j){var G=L.queue;if(G===null)throw Error(R(311));G.lastRenderedReducer=j;var ee=L.baseQueue,ae=G.pending;if(ae!==null){if(ee!==null){var ve=ee.next;ee.next=ae.next,ae.next=ve}$.baseQueue=ee=ae,G.pending=null}if(ae=L.baseState,ee===null)L.memoizedState=ae;else{$=ee.next;var Me=ve=null,je=null,Je=$,st=!1;do{var gt=Je.lane&-536870913;if(gt!==Je.lane?(sr&gt)===gt:(Ka&gt)===gt){var rt=Je.revertLane;if(rt===0)je!==null&&(je=je.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),gt===_o&&(st=!0);else if((Ka&rt)===rt){Je=Je.next,rt===_o&&(st=!0);continue}else gt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},je===null?(Me=je=gt,ve=ae):je=je.next=gt,Qt.lanes|=rt,wi|=rt;gt=Je.action,ro&&j(ae,gt),ae=Je.hasEagerState?Je.eagerState:j(ae,gt)}else rt={lane:gt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},je===null?(Me=je=rt,ve=ae):je=je.next=rt,Qt.lanes|=gt,wi|=gt;Je=Je.next}while(Je!==null&&Je!==$);if(je===null?ve=ae:je.next=Me,!Rn(ae,L.memoizedState)&&(hn=!0,st&&(j=Ro,j!==null)))throw j;L.memoizedState=ae,L.baseState=ve,L.baseQueue=je,G.lastRenderedState=ae}return ee===null&&(G.lanes=0),[L.memoizedState,G.dispatch]}function kc(L){var $=Xr(),j=$.queue;if(j===null)throw Error(R(311));j.lastRenderedReducer=L;var G=j.dispatch,ee=j.pending,ae=$.memoizedState;if(ee!==null){j.pending=null;var ve=ee=ee.next;do ae=L(ae,ve.action),ve=ve.next;while(ve!==ee);Rn(ae,$.memoizedState)||(hn=!0),$.memoizedState=ae,$.baseQueue===null&&($.baseState=ae),j.lastRenderedState=ae}return[ae,G]}function td(L,$,j){var G=Qt,ee=Xr(),ae=rr;if(ae){if(j===void 0)throw Error(R(407));j=j()}else j=$();var ve=!Rn((wr||ee).memoizedState,j);if(ve&&(ee.memoizedState=j,hn=!0),ee=ee.queue,Dc(ad.bind(null,G,ee,L),[L]),ee.getSnapshot!==$||ve||dn!==null&&dn.memoizedState.tag&1){if(G.flags|=2048,Do(9,{destroy:void 0},nd.bind(null,G,ee,j,$),null),Mr===null)throw Error(R(349));ae||(Ka&127)!==0||rd(G,$,j)}return j}function rd(L,$,j){L.flags|=16384,L={getSnapshot:$,value:j},$=Qt.updateQueue,$===null?($=jl(),Qt.updateQueue=$,$.stores=[L]):(j=$.stores,j===null?$.stores=[L]:j.push(L))}function nd(L,$,j,G){$.value=j,$.getSnapshot=G,id($)&&od(L)}function ad(L,$,j){return j(function(){id($)&&od(L)})}function id(L){var $=L.getSnapshot;L=L.value;try{var j=$();return!Rn(L,j)}catch{return!0}}function od(L){var $=Ha(L,2);$!==null&&Hn($,L,2)}function Mc(L){var $=On();if(typeof L=="function"){var j=L;if(L=j(),ro){Ye(!0);try{j()}finally{Ye(!1)}}}return $.memoizedState=$.baseState=L,$.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:L},$}function sd(L,$,j,G){return L.baseState=j,Ac(L,wr,typeof G=="function"?G:Wa)}function $p(L,$,j,G,ee){if(Ul(L))throw Error(R(485));if(L=$.action,L!==null){var ae={payload:ee,action:L,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ve){ae.listeners.push(ve)}};ye.T!==null?j(!0):ae.isTransition=!1,G(ae),j=$.pending,j===null?(ae.next=$.pending=ae,ld($,ae)):(ae.next=j.next,$.pending=j.next=ae)}}function ld(L,$){var j=$.action,G=$.payload,ee=L.state;if($.isTransition){var ae=ye.T,ve={};ye.T=ve;try{var Me=j(ee,G),je=ye.S;je!==null&&je(ve,Me),ud(L,$,Me)}catch(Je){Oc(L,$,Je)}finally{ae!==null&&ve.types!==null&&(ae.types=ve.types),ye.T=ae}}else try{ae=j(ee,G),ud(L,$,ae)}catch(Je){Oc(L,$,Je)}}function ud(L,$,j){j!==null&&typeof j=="object"&&typeof j.then=="function"?j.then(function(G){cd(L,$,G)},function(G){return Oc(L,$,G)}):cd(L,$,j)}function cd(L,$,j){$.status="fulfilled",$.value=j,fd($),L.state=j,$=L.pending,$!==null&&(j=$.next,j===$?L.pending=null:(j=j.next,$.next=j,ld(L,j)))}function Oc(L,$,j){var G=L.pending;if(L.pending=null,G!==null){G=G.next;do $.status="rejected",$.reason=j,fd($),$=$.next;while($!==G)}L.action=null}function fd(L){L=L.listeners;for(var $=0;$<L.length;$++)(0,L[$])()}function dd(L,$){return $}function hd(L,$){if(rr){var j=Mr.formState;if(j!==null){e:{var G=Qt;if(rr){if(Sr){t:{for(var ee=Sr,ae=Tn;ee.nodeType!==8;){if(!ae){ee=null;break t}if(ee=la(ee.nextSibling),ee===null){ee=null;break t}}ae=ee.data,ee=ae==="F!"||ae==="F"?ee:null}if(ee){Sr=la(ee.nextSibling),G=ee.data==="F!";break e}}ba(G)}G=!1}G&&($=j[0])}}return j=On(),j.memoizedState=j.baseState=$,G={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dd,lastRenderedState:$},j.queue=G,j=Dd.bind(null,Qt,G),G.dispatch=j,G=Mc(!1),ae=qc.bind(null,Qt,!1,G.queue),G=On(),ee={state:$,dispatch:null,action:L,pending:null},G.queue=ee,j=$p.bind(null,Qt,ee,ae,j),ee.dispatch=j,G.memoizedState=L,[$,j,!1]}function pd(L){var $=Xr();return gd($,wr,L)}function gd(L,$,j){if($=Ac(L,$,dd)[0],L=zl(Wa)[0],typeof $=="object"&&$!==null&&typeof $.then=="function")try{var G=Ps($)}catch(ve){throw ve===To?Dl:ve}else G=$;$=Xr();var ee=$.queue,ae=ee.dispatch;return j!==$.memoizedState&&(Qt.flags|=2048,Do(9,{destroy:void 0},Bp.bind(null,ee,j),null)),[G,ae,L]}function Bp(L,$){L.action=$}function md(L){var $=Xr(),j=wr;if(j!==null)return gd($,j,L);Xr(),$=$.memoizedState,j=Xr();var G=j.queue.dispatch;return j.memoizedState=L,[$,G,!1]}function Do(L,$,j,G){return L={tag:L,create:j,deps:G,inst:$,next:null},$=Qt.updateQueue,$===null&&($=jl(),Qt.updateQueue=$),j=$.lastEffect,j===null?$.lastEffect=L.next=L:(G=j.next,j.next=L,L.next=G,$.lastEffect=L),L}function vd(){return Xr().memoizedState}function Vl(L,$,j,G){var ee=On();Qt.flags|=L,ee.memoizedState=Do(1|$,{destroy:void 0},j,G===void 0?null:G)}function Hl(L,$,j,G){var ee=Xr();G=G===void 0?null:G;var ae=ee.memoizedState.inst;wr!==null&&G!==null&&Sc(G,wr.memoizedState.deps)?ee.memoizedState=Do($,ae,j,G):(Qt.flags|=L,ee.memoizedState=Do(1|$,ae,j,G))}function yd(L,$){Vl(8390656,8,L,$)}function Dc(L,$){Hl(2048,8,L,$)}function jp(L){Qt.flags|=4;var $=Qt.updateQueue;if($===null)$=jl(),Qt.updateQueue=$,$.events=[L];else{var j=$.events;j===null?$.events=[L]:j.push(L)}}function xd(L){var $=Xr().memoizedState;return jp({ref:$,nextImpl:L}),function(){if((mr&2)!==0)throw Error(R(440));return $.impl.apply(void 0,arguments)}}function bd(L,$){return Hl(4,2,L,$)}function Ed(L,$){return Hl(4,4,L,$)}function Sd(L,$){if(typeof $=="function"){L=L();var j=$(L);return function(){typeof j=="function"?j():$(null)}}if($!=null)return L=L(),$.current=L,function(){$.current=null}}function wd(L,$,j){j=j!=null?j.concat([L]):null,Hl(4,4,Sd.bind(null,$,L),j)}function Pc(){}function Cd(L,$){var j=Xr();$=$===void 0?null:$;var G=j.memoizedState;return $!==null&&Sc($,G[1])?G[0]:(j.memoizedState=[L,$],L)}function _d(L,$){var j=Xr();$=$===void 0?null:$;var G=j.memoizedState;if($!==null&&Sc($,G[1]))return G[0];if(G=L(),ro){Ye(!0);try{L()}finally{Ye(!1)}}return j.memoizedState=[G,$],G}function Nc(L,$,j){return j===void 0||(Ka&1073741824)!==0&&(sr&261930)===0?L.memoizedState=$:(L.memoizedState=j,L=Rh(),Qt.lanes|=L,wi|=L,j)}function Rd(L,$,j,G){return Rn(j,$)?j:ko.current!==null?(L=Nc(L,j,G),Rn(L,$)||(hn=!0),L):(Ka&42)===0||(Ka&1073741824)!==0&&(sr&261930)===0?(hn=!0,L.memoizedState=j):(L=Rh(),Qt.lanes|=L,wi|=L,$)}function Td(L,$,j,G,ee){var ae=be.p;be.p=ae!==0&&8>ae?ae:8;var ve=ye.T,Me={};ye.T=Me,qc(L,!1,$,j);try{var je=ee(),Je=ye.S;if(Je!==null&&Je(Me,je),je!==null&&typeof je=="object"&&typeof je.then=="function"){var st=Lp(je,G);Ns(L,$,st,Zn(L))}else Ns(L,$,G,Zn(L))}catch(gt){Ns(L,$,{then:function(){},status:"rejected",reason:gt},Zn())}finally{be.p=ae,ve!==null&&Me.types!==null&&(ve.types=Me.types),ye.T=ve}}function Fp(){}function Lc(L,$,j,G){if(L.tag!==5)throw Error(R(476));var ee=Ad(L).queue;Td(L,ee,$,Se,j===null?Fp:function(){return kd(L),j(G)})}function Ad(L){var $=L.memoizedState;if($!==null)return $;$={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:Se},next:null};var j={};return $.next={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:j},next:null},L.memoizedState=$,L=L.alternate,L!==null&&(L.memoizedState=$),$}function kd(L){var $=Ad(L);$.next===null&&($=L.alternate.memoizedState),Ns(L,$.next.queue,{},Zn())}function Ic(){return Kr(Js)}function Md(){return Xr().memoizedState}function Od(){return Xr().memoizedState}function zp(L){for(var $=L.return;$!==null;){switch($.tag){case 24:case 3:var j=Zn();L=vi(j);var G=yi($,L,j);G!==null&&(Hn(G,$,j),ks(G,$,j)),$={cache:et()},L.payload=$;return}$=$.return}}function Vp(L,$,j){var G=Zn();j={lane:G,revertLane:0,gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},Ul(L)?Pd($,j):(j=xs(L,$,j,G),j!==null&&(Hn(j,L,G),Nd(j,$,G)))}function Dd(L,$,j){var G=Zn();Ns(L,$,j,G)}function Ns(L,$,j,G){var ee={lane:G,revertLane:0,gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null};if(Ul(L))Pd($,ee);else{var ae=L.alternate;if(L.lanes===0&&(ae===null||ae.lanes===0)&&(ae=$.lastRenderedReducer,ae!==null))try{var ve=$.lastRenderedState,Me=ae(ve,j);if(ee.hasEagerState=!0,ee.eagerState=Me,Rn(Me,ve))return di(L,$,ee,0),Mr===null&&fi(),!1}catch{}finally{}if(j=xs(L,$,ee,G),j!==null)return Hn(j,L,G),Nd(j,$,G),!0}return!1}function qc(L,$,j,G){if(G={lane:2,revertLane:mf(),gesture:null,action:G,hasEagerState:!1,eagerState:null,next:null},Ul(L)){if($)throw Error(R(479))}else $=xs(L,j,G,2),$!==null&&Hn($,L,2)}function Ul(L){var $=L.alternate;return L===Qt||$!==null&&$===Qt}function Pd(L,$){Mo=$l=!0;var j=L.pending;j===null?$.next=$:($.next=j.next,j.next=$),L.pending=$}function Nd(L,$,j){if((j&4194048)!==0){var G=$.lanes;G&=L.pendingLanes,j|=G,$.lanes=j,cr(L,j)}}var Ls={readContext:Kr,use:Fl,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useInsertionEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useSyncExternalStore:zr,useId:zr,useHostTransitionStatus:zr,useFormState:zr,useActionState:zr,useOptimistic:zr,useMemoCache:zr,useCacheRefresh:zr};Ls.useEffectEvent=zr;var Ld={readContext:Kr,use:Fl,useCallback:function(L,$){return On().memoizedState=[L,$===void 0?null:$],L},useContext:Kr,useEffect:yd,useImperativeHandle:function(L,$,j){j=j!=null?j.concat([L]):null,Vl(4194308,4,Sd.bind(null,$,L),j)},useLayoutEffect:function(L,$){return Vl(4194308,4,L,$)},useInsertionEffect:function(L,$){Vl(4,2,L,$)},useMemo:function(L,$){var j=On();$=$===void 0?null:$;var G=L();if(ro){Ye(!0);try{L()}finally{Ye(!1)}}return j.memoizedState=[G,$],G},useReducer:function(L,$,j){var G=On();if(j!==void 0){var ee=j($);if(ro){Ye(!0);try{j($)}finally{Ye(!1)}}}else ee=$;return G.memoizedState=G.baseState=ee,L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L,lastRenderedState:ee},G.queue=L,L=L.dispatch=Vp.bind(null,Qt,L),[G.memoizedState,L]},useRef:function(L){var $=On();return L={current:L},$.memoizedState=L},useState:function(L){L=Mc(L);var $=L.queue,j=Dd.bind(null,Qt,$);return $.dispatch=j,[L.memoizedState,j]},useDebugValue:Pc,useDeferredValue:function(L,$){var j=On();return Nc(j,L,$)},useTransition:function(){var L=Mc(!1);return L=Td.bind(null,Qt,L.queue,!0,!1),On().memoizedState=L,[!1,L]},useSyncExternalStore:function(L,$,j){var G=Qt,ee=On();if(rr){if(j===void 0)throw Error(R(407));j=j()}else{if(j=$(),Mr===null)throw Error(R(349));(sr&127)!==0||rd(G,$,j)}ee.memoizedState=j;var ae={value:j,getSnapshot:$};return ee.queue=ae,yd(ad.bind(null,G,ae,L),[L]),G.flags|=2048,Do(9,{destroy:void 0},nd.bind(null,G,ae,j,$),null),j},useId:function(){var L=On(),$=Mr.identifierPrefix;if(rr){var j=aa,G=na;j=(G&~(1<<32-tt(G)-1)).toString(32)+j,$="_"+$+"R_"+j,j=Bl++,0<j&&($+="H"+j.toString(32)),$+="_"}else j=Ip++,$="_"+$+"r_"+j.toString(32)+"_";return L.memoizedState=$},useHostTransitionStatus:Ic,useFormState:hd,useActionState:hd,useOptimistic:function(L){var $=On();$.memoizedState=$.baseState=L;var j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return $.queue=j,$=qc.bind(null,Qt,!0,j),j.dispatch=$,[L,$]},useMemoCache:Tc,useCacheRefresh:function(){return On().memoizedState=zp.bind(null,Qt)},useEffectEvent:function(L){var $=On(),j={impl:L};return $.memoizedState=j,function(){if((mr&2)!==0)throw Error(R(440));return j.impl.apply(void 0,arguments)}}},$c={readContext:Kr,use:Fl,useCallback:Cd,useContext:Kr,useEffect:Dc,useImperativeHandle:wd,useInsertionEffect:bd,useLayoutEffect:Ed,useMemo:_d,useReducer:zl,useRef:vd,useState:function(){return zl(Wa)},useDebugValue:Pc,useDeferredValue:function(L,$){var j=Xr();return Rd(j,wr.memoizedState,L,$)},useTransition:function(){var L=zl(Wa)[0],$=Xr().memoizedState;return[typeof L=="boolean"?L:Ps(L),$]},useSyncExternalStore:td,useId:Md,useHostTransitionStatus:Ic,useFormState:pd,useActionState:pd,useOptimistic:function(L,$){var j=Xr();return sd(j,wr,L,$)},useMemoCache:Tc,useCacheRefresh:Od};$c.useEffectEvent=xd;var Id={readContext:Kr,use:Fl,useCallback:Cd,useContext:Kr,useEffect:Dc,useImperativeHandle:wd,useInsertionEffect:bd,useLayoutEffect:Ed,useMemo:_d,useReducer:kc,useRef:vd,useState:function(){return kc(Wa)},useDebugValue:Pc,useDeferredValue:function(L,$){var j=Xr();return wr===null?Nc(j,L,$):Rd(j,wr.memoizedState,L,$)},useTransition:function(){var L=kc(Wa)[0],$=Xr().memoizedState;return[typeof L=="boolean"?L:Ps(L),$]},useSyncExternalStore:td,useId:Md,useHostTransitionStatus:Ic,useFormState:md,useActionState:md,useOptimistic:function(L,$){var j=Xr();return wr!==null?sd(j,wr,L,$):(j.baseState=L,[L,j.queue.dispatch])},useMemoCache:Tc,useCacheRefresh:Od};Id.useEffectEvent=xd;function Bc(L,$,j,G){$=L.memoizedState,j=j(G,$),j=j==null?$:q({},$,j),L.memoizedState=j,L.lanes===0&&(L.updateQueue.baseState=j)}var jc={enqueueSetState:function(L,$,j){L=L._reactInternals;var G=Zn(),ee=vi(G);ee.payload=$,j!=null&&(ee.callback=j),$=yi(L,ee,G),$!==null&&(Hn($,L,G),ks($,L,G))},enqueueReplaceState:function(L,$,j){L=L._reactInternals;var G=Zn(),ee=vi(G);ee.tag=1,ee.payload=$,j!=null&&(ee.callback=j),$=yi(L,ee,G),$!==null&&(Hn($,L,G),ks($,L,G))},enqueueForceUpdate:function(L,$){L=L._reactInternals;var j=Zn(),G=vi(j);G.tag=2,$!=null&&(G.callback=$),$=yi(L,G,j),$!==null&&(Hn($,L,j),ks($,L,j))}};function qd(L,$,j,G,ee,ae,ve){return L=L.stateNode,typeof L.shouldComponentUpdate=="function"?L.shouldComponentUpdate(G,ae,ve):$.prototype&&$.prototype.isPureReactComponent?!Vi(j,G)||!Vi(ee,ae):!0}function $d(L,$,j,G){L=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(j,G),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(j,G),$.state!==L&&jc.enqueueReplaceState($,$.state,null)}function no(L,$){var j=$;if("ref"in $){j={};for(var G in $)G!=="ref"&&(j[G]=$[G])}if(L=L.defaultProps){j===$&&(j=q({},j));for(var ee in L)j[ee]===void 0&&(j[ee]=L[ee])}return j}function Bd(L){Gi(L)}function jd(L){console.error(L)}function Fd(L){Gi(L)}function Gl(L,$){try{var j=L.onUncaughtError;j($.value,{componentStack:$.stack})}catch(G){setTimeout(function(){throw G})}}function zd(L,$,j){try{var G=L.onCaughtError;G(j.value,{componentStack:j.stack,errorBoundary:$.tag===1?$.stateNode:null})}catch(ee){setTimeout(function(){throw ee})}}function Fc(L,$,j){return j=vi(j),j.tag=3,j.payload={element:null},j.callback=function(){Gl(L,$)},j}function Vd(L){return L=vi(L),L.tag=3,L}function Hd(L,$,j,G){var ee=j.type.getDerivedStateFromError;if(typeof ee=="function"){var ae=G.value;L.payload=function(){return ee(ae)},L.callback=function(){zd($,j,G)}}var ve=j.stateNode;ve!==null&&typeof ve.componentDidCatch=="function"&&(L.callback=function(){zd($,j,G),typeof ee!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var Me=G.stack;this.componentDidCatch(G.value,{componentStack:Me!==null?Me:""})})}function Hp(L,$,j,G,ee){if(j.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){if($=j.alternate,$!==null&&Ia($,j,ee,!0),j=Wn.current,j!==null){switch(j.tag){case 31:case 13:return sa===null?uu():j.alternate===null&&Vr===0&&(Vr=3),j.flags&=-257,j.flags|=65536,j.lanes=ee,G===Pl?j.flags|=16384:($=j.updateQueue,$===null?j.updateQueue=new Set([G]):$.add(G),hf(L,G,ee)),!1;case 22:return j.flags|=65536,G===Pl?j.flags|=16384:($=j.updateQueue,$===null?($={transitions:null,markerInstances:null,retryQueue:new Set([G])},j.updateQueue=$):(j=$.retryQueue,j===null?$.retryQueue=new Set([G]):j.add(G)),hf(L,G,ee)),!1}throw Error(R(435,j.tag))}return hf(L,G,ee),uu(),!1}if(rr)return $=Wn.current,$!==null?(($.flags&65536)===0&&($.flags|=256),$.flags|=65536,$.lanes=ee,G!==Cs&&(L=Error(R(422),{cause:G}),Bn(qn(L,j)))):(G!==Cs&&($=Error(R(423),{cause:G}),Bn(qn($,j))),L=L.current.alternate,L.flags|=65536,ee&=-ee,L.lanes|=ee,G=qn(G,j),ee=Fc(L.stateNode,G,ee),vc(L,ee),Vr!==4&&(Vr=2)),!1;var ae=Error(R(520),{cause:G});if(ae=qn(ae,j),Vs===null?Vs=[ae]:Vs.push(ae),Vr!==4&&(Vr=2),$===null)return!0;G=qn(G,j),j=$;do{switch(j.tag){case 3:return j.flags|=65536,L=ee&-ee,j.lanes|=L,L=Fc(j.stateNode,G,L),vc(j,L),!1;case 1:if($=j.type,ae=j.stateNode,(j.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Ci===null||!Ci.has(ae))))return j.flags|=65536,ee&=-ee,j.lanes|=ee,ee=Vd(ee),Hd(ee,L,j,G),vc(j,ee),!1}j=j.return}while(j!==null);return!1}var zc=Error(R(461)),hn=!1;function En(L,$,j,G){$.child=L===null?Wf($,null,j,G):to($,L.child,j,G)}function Ud(L,$,j,G,ee){j=j.render;var ae=$.ref;if("ref"in G){var ve={};for(var Me in G)Me!=="ref"&&(ve[Me]=G[Me])}else ve=G;return qa($),G=wc(L,$,j,ve,ae,ee),Me=Cc(),L!==null&&!hn?(_c(L,$,ee),Ya(L,$,ee)):(rr&&Me&&Xi($),$.flags|=1,En(L,$,G,ee),$.child)}function Gd(L,$,j,G,ee){if(L===null){var ae=j.type;return typeof ae=="function"&&!Ua(ae)&&ae.defaultProps===void 0&&j.compare===null?($.tag=15,$.type=ae,Kd(L,$,ae,G,ee)):(L=So(j.type,null,G,$,$.mode,ee),L.ref=$.ref,L.return=$,$.child=L)}if(ae=L.child,!Xc(L,ee)){var ve=ae.memoizedProps;if(j=j.compare,j=j!==null?j:Vi,j(ve,G)&&L.ref===$.ref)return Ya(L,$,ee)}return $.flags|=1,L=In(ae,G),L.ref=$.ref,L.return=$,$.child=L}function Kd(L,$,j,G,ee){if(L!==null){var ae=L.memoizedProps;if(Vi(ae,G)&&L.ref===$.ref)if(hn=!1,$.pendingProps=G=ae,Xc(L,ee))(L.flags&131072)!==0&&(hn=!0);else return $.lanes=L.lanes,Ya(L,$,ee)}return Vc(L,$,j,G,ee)}function Wd(L,$,j,G){var ee=G.children,ae=L!==null?L.memoizedState:null;if(L===null&&$.stateNode===null&&($.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),G.mode==="hidden"){if(($.flags&128)!==0){if(ae=ae!==null?ae.baseLanes|j:j,L!==null){for(G=$.child=L.child,ee=0;G!==null;)ee=ee|G.lanes|G.childLanes,G=G.sibling;G=ee&~ae}else G=0,$.child=null;return Yd(L,$,ae,j,G)}if((j&536870912)!==0)$.memoizedState={baseLanes:0,cachePool:null},L!==null&&Ol($,ae!==null?ae.cachePool:null),ae!==null?Qf($,ae):xc(),Zf($);else return G=$.lanes=536870912,Yd(L,$,ae!==null?ae.baseLanes|j:j,j,G)}else ae!==null?(Ol($,ae.cachePool),Qf($,ae),bi(),$.memoizedState=null):(L!==null&&Ol($,null),xc(),bi());return En(L,$,ee,j),$.child}function Is(L,$){return L!==null&&L.tag===22||$.stateNode!==null||($.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),$.sibling}function Yd(L,$,j,G,ee){var ae=hc();return ae=ae===null?null:{parent:Be._currentValue,pool:ae},$.memoizedState={baseLanes:j,cachePool:ae},L!==null&&Ol($,null),xc(),Zf($),L!==null&&Ia(L,$,G,!0),$.childLanes=ee,null}function Wl(L,$){return $=eu({mode:$.mode,children:$.children},L.mode),$.ref=L.ref,L.child=$,$.return=L,$}function Xd(L,$,j){return to($,L.child,null,j),L=Wl($,$.pendingProps),L.flags|=2,Yn($),$.memoizedState=null,L}function Up(L,$,j){var G=$.pendingProps,ee=($.flags&128)!==0;if($.flags&=-129,L===null){if(rr){if(G.mode==="hidden")return L=Wl($,G),$.lanes=536870912,Is(null,L);if(Ec($),(L=Sr)?(L=lp(L,Tn),L=L!==null&&L.data==="&"?L:null,L!==null&&($.memoizedState={dehydrated:L,treeContext:Na!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},j=ya(L),j.return=$,$.child=j,ln=$,Sr=null)):L=null,L===null)throw ba($);return $.lanes=536870912,null}return Wl($,G)}var ae=L.memoizedState;if(ae!==null){var ve=ae.dehydrated;if(Ec($),ee)if($.flags&256)$.flags&=-257,$=Xd(L,$,j);else if($.memoizedState!==null)$.child=L.child,$.flags|=128,$=null;else throw Error(R(558));else if(hn||Ia(L,$,j,!1),ee=(j&L.childLanes)!==0,hn||ee){if(G=Mr,G!==null&&(ve=or(G,j),ve!==0&&ve!==ae.retryLane))throw ae.retryLane=ve,Ha(L,ve),Hn(G,L,ve),zc;uu(),$=Xd(L,$,j)}else L=ae.treeContext,Sr=la(ve.nextSibling),ln=$,rr=!0,ia=null,Tn=!1,L!==null&&Al($,L),$=Wl($,G),$.flags|=4096;return $}return L=In(L.child,{mode:G.mode,children:G.children}),L.ref=$.ref,$.child=L,L.return=$,L}function Yl(L,$){var j=$.ref;if(j===null)L!==null&&L.ref!==null&&($.flags|=4194816);else{if(typeof j!="function"&&typeof j!="object")throw Error(R(284));(L===null||L.ref!==j)&&($.flags|=4194816)}}function Vc(L,$,j,G,ee){return qa($),j=wc(L,$,j,G,void 0,ee),G=Cc(),L!==null&&!hn?(_c(L,$,ee),Ya(L,$,ee)):(rr&&G&&Xi($),$.flags|=1,En(L,$,j,ee),$.child)}function Qd(L,$,j,G,ee,ae){return qa($),$.updateQueue=null,j=ed($,G,j,ee),Jf(L),G=Cc(),L!==null&&!hn?(_c(L,$,ae),Ya(L,$,ae)):(rr&&G&&Xi($),$.flags|=1,En(L,$,j,ae),$.child)}function Zd(L,$,j,G,ee){if(qa($),$.stateNode===null){var ae=hi,ve=j.contextType;typeof ve=="object"&&ve!==null&&(ae=Kr(ve)),ae=new j(G,ae),$.memoizedState=ae.state!==null&&ae.state!==void 0?ae.state:null,ae.updater=jc,$.stateNode=ae,ae._reactInternals=$,ae=$.stateNode,ae.props=G,ae.state=$.memoizedState,ae.refs={},gc($),ve=j.contextType,ae.context=typeof ve=="object"&&ve!==null?Kr(ve):hi,ae.state=$.memoizedState,ve=j.getDerivedStateFromProps,typeof ve=="function"&&(Bc($,j,ve,G),ae.state=$.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof ae.getSnapshotBeforeUpdate=="function"||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(ve=ae.state,typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount(),ve!==ae.state&&jc.enqueueReplaceState(ae,ae.state,null),Os($,G,ae,ee),Ms(),ae.state=$.memoizedState),typeof ae.componentDidMount=="function"&&($.flags|=4194308),G=!0}else if(L===null){ae=$.stateNode;var Me=$.memoizedProps,je=no(j,Me);ae.props=je;var Je=ae.context,st=j.contextType;ve=hi,typeof st=="object"&&st!==null&&(ve=Kr(st));var gt=j.getDerivedStateFromProps;st=typeof gt=="function"||typeof ae.getSnapshotBeforeUpdate=="function",Me=$.pendingProps!==Me,st||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Me||Je!==ve)&&$d($,ae,G,ve),mi=!1;var rt=$.memoizedState;ae.state=rt,Os($,G,ae,ee),Ms(),Je=$.memoizedState,Me||rt!==Je||mi?(typeof gt=="function"&&(Bc($,j,gt,G),Je=$.memoizedState),(je=mi||qd($,j,je,G,rt,Je,ve))?(st||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&($.flags|=4194308)):(typeof ae.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=G,$.memoizedState=Je),ae.props=G,ae.state=Je,ae.context=ve,G=je):(typeof ae.componentDidMount=="function"&&($.flags|=4194308),G=!1)}else{ae=$.stateNode,mc(L,$),ve=$.memoizedProps,st=no(j,ve),ae.props=st,gt=$.pendingProps,rt=ae.context,Je=j.contextType,je=hi,typeof Je=="object"&&Je!==null&&(je=Kr(Je)),Me=j.getDerivedStateFromProps,(Je=typeof Me=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ve!==gt||rt!==je)&&$d($,ae,G,je),mi=!1,rt=$.memoizedState,ae.state=rt,Os($,G,ae,ee),Ms();var it=$.memoizedState;ve!==gt||rt!==it||mi||L!==null&&L.dependencies!==null&&Co(L.dependencies)?(typeof Me=="function"&&(Bc($,j,Me,G),it=$.memoizedState),(st=mi||qd($,j,st,G,rt,it,je)||L!==null&&L.dependencies!==null&&Co(L.dependencies))?(Je||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(G,it,je),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(G,it,je)),typeof ae.componentDidUpdate=="function"&&($.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof ae.componentDidUpdate!="function"||ve===L.memoizedProps&&rt===L.memoizedState||($.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ve===L.memoizedProps&&rt===L.memoizedState||($.flags|=1024),$.memoizedProps=G,$.memoizedState=it),ae.props=G,ae.state=it,ae.context=je,G=st):(typeof ae.componentDidUpdate!="function"||ve===L.memoizedProps&&rt===L.memoizedState||($.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ve===L.memoizedProps&&rt===L.memoizedState||($.flags|=1024),G=!1)}return ae=G,Yl(L,$),G=($.flags&128)!==0,ae||G?(ae=$.stateNode,j=G&&typeof j.getDerivedStateFromError!="function"?null:ae.render(),$.flags|=1,L!==null&&G?($.child=to($,L.child,null,ee),$.child=to($,null,j,ee)):En(L,$,j,ee),$.memoizedState=ae.state,L=$.child):L=Ya(L,$,ee),L}function Jd(L,$,j,G){return La(),$.flags|=256,En(L,$,j,G),$.child}var Hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uc(L){return{baseLanes:L,cachePool:zf()}}function Gc(L,$,j){return L=L!==null?L.childLanes&~j:0,$&&(L|=Qn),L}function eh(L,$,j){var G=$.pendingProps,ee=!1,ae=($.flags&128)!==0,ve;if((ve=ae)||(ve=L!==null&&L.memoizedState===null?!1:(Wr.current&2)!==0),ve&&(ee=!0,$.flags&=-129),ve=($.flags&32)!==0,$.flags&=-33,L===null){if(rr){if(ee?xi($):bi(),(L=Sr)?(L=lp(L,Tn),L=L!==null&&L.data!=="&"?L:null,L!==null&&($.memoizedState={dehydrated:L,treeContext:Na!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},j=ya(L),j.return=$,$.child=j,ln=$,Sr=null)):L=null,L===null)throw ba($);return kf(L)?$.lanes=32:$.lanes=536870912,null}var Me=G.children;return G=G.fallback,ee?(bi(),ee=$.mode,Me=eu({mode:"hidden",children:Me},ee),G=Pa(G,ee,j,null),Me.return=$,G.return=$,Me.sibling=G,$.child=Me,G=$.child,G.memoizedState=Uc(j),G.childLanes=Gc(L,ve,j),$.memoizedState=Hc,Is(null,G)):(xi($),Kc($,Me))}var je=L.memoizedState;if(je!==null&&(Me=je.dehydrated,Me!==null)){if(ae)$.flags&256?(xi($),$.flags&=-257,$=Wc(L,$,j)):$.memoizedState!==null?(bi(),$.child=L.child,$.flags|=128,$=null):(bi(),Me=G.fallback,ee=$.mode,G=eu({mode:"visible",children:G.children},ee),Me=Pa(Me,ee,j,null),Me.flags|=2,G.return=$,Me.return=$,G.sibling=Me,$.child=G,to($,L.child,null,j),G=$.child,G.memoizedState=Uc(j),G.childLanes=Gc(L,ve,j),$.memoizedState=Hc,$=Is(null,G));else if(xi($),kf(Me)){if(ve=Me.nextSibling&&Me.nextSibling.dataset,ve)var Je=ve.dgst;ve=Je,G=Error(R(419)),G.stack="",G.digest=ve,Bn({value:G,source:null,stack:null}),$=Wc(L,$,j)}else if(hn||Ia(L,$,j,!1),ve=(j&L.childLanes)!==0,hn||ve){if(ve=Mr,ve!==null&&(G=or(ve,j),G!==0&&G!==je.retryLane))throw je.retryLane=G,Ha(L,G),Hn(ve,L,G),zc;Af(Me)||uu(),$=Wc(L,$,j)}else Af(Me)?($.flags|=192,$.child=L.child,$=null):(L=je.treeContext,Sr=la(Me.nextSibling),ln=$,rr=!0,ia=null,Tn=!1,L!==null&&Al($,L),$=Kc($,G.children),$.flags|=4096);return $}return ee?(bi(),Me=G.fallback,ee=$.mode,je=L.child,Je=je.sibling,G=In(je,{mode:"hidden",children:G.children}),G.subtreeFlags=je.subtreeFlags&65011712,Je!==null?Me=In(Je,Me):(Me=Pa(Me,ee,j,null),Me.flags|=2),Me.return=$,G.return=$,G.sibling=Me,$.child=G,Is(null,G),G=$.child,Me=L.child.memoizedState,Me===null?Me=Uc(j):(ee=Me.cachePool,ee!==null?(je=Be._currentValue,ee=ee.parent!==je?{parent:je,pool:je}:ee):ee=zf(),Me={baseLanes:Me.baseLanes|j,cachePool:ee}),G.memoizedState=Me,G.childLanes=Gc(L,ve,j),$.memoizedState=Hc,Is(L.child,G)):(xi($),j=L.child,L=j.sibling,j=In(j,{mode:"visible",children:G.children}),j.return=$,j.sibling=null,L!==null&&(ve=$.deletions,ve===null?($.deletions=[L],$.flags|=16):ve.push(L)),$.child=j,$.memoizedState=null,j)}function Kc(L,$){return $=eu({mode:"visible",children:$},L.mode),$.return=L,L.child=$}function eu(L,$){return L=xn(22,L,null,$),L.lanes=0,L}function Wc(L,$,j){return to($,L.child,null,j),L=Kc($,$.pendingProps.children),L.flags|=2,$.memoizedState=null,L}function th(L,$,j){L.lanes|=$;var G=L.alternate;G!==null&&(G.lanes|=$),Bt(L.return,$,j)}function Yc(L,$,j,G,ee,ae){var ve=L.memoizedState;ve===null?L.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:G,tail:j,tailMode:ee,treeForkCount:ae}:(ve.isBackwards=$,ve.rendering=null,ve.renderingStartTime=0,ve.last=G,ve.tail=j,ve.tailMode=ee,ve.treeForkCount=ae)}function rh(L,$,j){var G=$.pendingProps,ee=G.revealOrder,ae=G.tail;G=G.children;var ve=Wr.current,Me=(ve&2)!==0;if(Me?(ve=ve&1|2,$.flags|=128):ve&=1,Oe(Wr,ve),En(L,$,G,j),G=rr?Wi:0,!Me&&L!==null&&(L.flags&128)!==0)e:for(L=$.child;L!==null;){if(L.tag===13)L.memoizedState!==null&&th(L,j,$);else if(L.tag===19)th(L,j,$);else if(L.child!==null){L.child.return=L,L=L.child;continue}if(L===$)break e;for(;L.sibling===null;){if(L.return===null||L.return===$)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}switch(ee){case"forwards":for(j=$.child,ee=null;j!==null;)L=j.alternate,L!==null&&ql(L)===null&&(ee=j),j=j.sibling;j=ee,j===null?(ee=$.child,$.child=null):(ee=j.sibling,j.sibling=null),Yc($,!1,ee,j,ae,G);break;case"backwards":case"unstable_legacy-backwards":for(j=null,ee=$.child,$.child=null;ee!==null;){if(L=ee.alternate,L!==null&&ql(L)===null){$.child=ee;break}L=ee.sibling,ee.sibling=j,j=ee,ee=L}Yc($,!0,j,null,ae,G);break;case"together":Yc($,!1,null,null,void 0,G);break;default:$.memoizedState=null}return $.child}function Ya(L,$,j){if(L!==null&&($.dependencies=L.dependencies),wi|=$.lanes,(j&$.childLanes)===0)if(L!==null){if(Ia(L,$,j,!1),(j&$.childLanes)===0)return null}else return null;if(L!==null&&$.child!==L.child)throw Error(R(153));if($.child!==null){for(L=$.child,j=In(L,L.pendingProps),$.child=j,j.return=$;L.sibling!==null;)L=L.sibling,j=j.sibling=In(L,L.pendingProps),j.return=$;j.sibling=null}return $.child}function Xc(L,$){return(L.lanes&$)!==0?!0:(L=L.dependencies,!!(L!==null&&Co(L)))}function Gp(L,$,j){switch($.tag){case 3:ze($,$.stateNode.containerInfo),oa($,Be,L.memoizedState.cache),La();break;case 27:case 5:Ie($);break;case 4:ze($,$.stateNode.containerInfo);break;case 10:oa($,$.type,$.memoizedProps.value);break;case 31:if($.memoizedState!==null)return $.flags|=128,Ec($),null;break;case 13:var G=$.memoizedState;if(G!==null)return G.dehydrated!==null?(xi($),$.flags|=128,null):(j&$.child.childLanes)!==0?eh(L,$,j):(xi($),L=Ya(L,$,j),L!==null?L.sibling:null);xi($);break;case 19:var ee=(L.flags&128)!==0;if(G=(j&$.childLanes)!==0,G||(Ia(L,$,j,!1),G=(j&$.childLanes)!==0),ee){if(G)return rh(L,$,j);$.flags|=128}if(ee=$.memoizedState,ee!==null&&(ee.rendering=null,ee.tail=null,ee.lastEffect=null),Oe(Wr,Wr.current),G)break;return null;case 22:return $.lanes=0,Wd(L,$,j,$.pendingProps);case 24:oa($,Be,L.memoizedState.cache)}return Ya(L,$,j)}function nh(L,$,j){if(L!==null)if(L.memoizedProps!==$.pendingProps)hn=!0;else{if(!Xc(L,j)&&($.flags&128)===0)return hn=!1,Gp(L,$,j);hn=(L.flags&131072)!==0}else hn=!1,rr&&($.flags&1048576)!==0&&Yi($,Wi,$.index);switch($.lanes=0,$.tag){case 16:e:{var G=$.pendingProps;if(L=Ji($.elementType),$.type=L,typeof L=="function")Ua(L)?(G=no(L,G),$.tag=1,$=Zd(null,$,L,G,j)):($.tag=0,$=Vc(null,$,L,G,j));else{if(L!=null){var ee=L.$$typeof;if(ee===J){$.tag=11,$=Ud(null,$,L,G,j);break e}else if(ee===te){$.tag=14,$=Gd(null,$,L,G,j);break e}}throw $=Ee(L)||L,Error(R(306,$,""))}}return $;case 0:return Vc(L,$,$.type,$.pendingProps,j);case 1:return G=$.type,ee=no(G,$.pendingProps),Zd(L,$,G,ee,j);case 3:e:{if(ze($,$.stateNode.containerInfo),L===null)throw Error(R(387));G=$.pendingProps;var ae=$.memoizedState;ee=ae.element,mc(L,$),Os($,G,null,j);var ve=$.memoizedState;if(G=ve.cache,oa($,Be,G),G!==ae.cache&&Rs($,[Be],j,!0),Ms(),G=ve.element,ae.isDehydrated)if(ae={element:G,isDehydrated:!1,cache:ve.cache},$.updateQueue.baseState=ae,$.memoizedState=ae,$.flags&256){$=Jd(L,$,G,j);break e}else if(G!==ee){ee=qn(Error(R(424)),$),Bn(ee),$=Jd(L,$,G,j);break e}else{switch(L=$.stateNode.containerInfo,L.nodeType){case 9:L=L.body;break;default:L=L.nodeName==="HTML"?L.ownerDocument.body:L}for(Sr=la(L.firstChild),ln=$,rr=!0,ia=null,Tn=!0,j=Wf($,null,G,j),$.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling}else{if(La(),G===ee){$=Ya(L,$,j);break e}En(L,$,G,j)}$=$.child}return $;case 26:return Yl(L,$),L===null?(j=pp($.type,null,$.pendingProps,null))?$.memoizedState=j:rr||(j=$.type,L=$.pendingProps,G=mu(Ne.current).createElement(j),G[Dr]=$,G[Ur]=L,Sn(G,j,L),$r(G),$.stateNode=G):$.memoizedState=pp($.type,L.memoizedProps,$.pendingProps,L.memoizedState),null;case 27:return Ie($),L===null&&rr&&(G=$.stateNode=fp($.type,$.pendingProps,Ne.current),ln=$,Tn=!0,ee=Sr,Ai($.type)?(Mf=ee,Sr=la(G.firstChild)):Sr=ee),En(L,$,$.pendingProps.children,j),Yl(L,$),L===null&&($.flags|=4194304),$.child;case 5:return L===null&&rr&&((ee=G=Sr)&&(G=Sg(G,$.type,$.pendingProps,Tn),G!==null?($.stateNode=G,ln=$,Sr=la(G.firstChild),Tn=!1,ee=!0):ee=!1),ee||ba($)),Ie($),ee=$.type,ae=$.pendingProps,ve=L!==null?L.memoizedProps:null,G=ae.children,_f(ee,ae)?G=null:ve!==null&&_f(ee,ve)&&($.flags|=32),$.memoizedState!==null&&(ee=wc(L,$,qp,null,null,j),Js._currentValue=ee),Yl(L,$),En(L,$,G,j),$.child;case 6:return L===null&&rr&&((L=j=Sr)&&(j=wg(j,$.pendingProps,Tn),j!==null?($.stateNode=j,ln=$,Sr=null,L=!0):L=!1),L||ba($)),null;case 13:return eh(L,$,j);case 4:return ze($,$.stateNode.containerInfo),G=$.pendingProps,L===null?$.child=to($,null,G,j):En(L,$,G,j),$.child;case 11:return Ud(L,$,$.type,$.pendingProps,j);case 7:return En(L,$,$.pendingProps,j),$.child;case 8:return En(L,$,$.pendingProps.children,j),$.child;case 12:return En(L,$,$.pendingProps.children,j),$.child;case 10:return G=$.pendingProps,oa($,$.type,G.value),En(L,$,G.children,j),$.child;case 9:return ee=$.type._context,G=$.pendingProps.children,qa($),ee=Kr(ee),G=G(ee),$.flags|=1,En(L,$,G,j),$.child;case 14:return Gd(L,$,$.type,$.pendingProps,j);case 15:return Kd(L,$,$.type,$.pendingProps,j);case 19:return rh(L,$,j);case 31:return Up(L,$,j);case 22:return Wd(L,$,j,$.pendingProps);case 24:return qa($),G=Kr(Be),L===null?(ee=hc(),ee===null&&(ee=Mr,ae=et(),ee.pooledCache=ae,ae.refCount++,ae!==null&&(ee.pooledCacheLanes|=j),ee=ae),$.memoizedState={parent:G,cache:ee},gc($),oa($,Be,ee)):((L.lanes&j)!==0&&(mc(L,$),Os($,null,null,j),Ms()),ee=L.memoizedState,ae=$.memoizedState,ee.parent!==G?(ee={parent:G,cache:G},$.memoizedState=ee,$.lanes===0&&($.memoizedState=$.updateQueue.baseState=ee),oa($,Be,G)):(G=ae.cache,oa($,Be,G),G!==ee.cache&&Rs($,[Be],j,!0))),En(L,$,$.pendingProps.children,j),$.child;case 29:throw $.pendingProps}throw Error(R(156,$.tag))}function Xa(L){L.flags|=4}function Qc(L,$,j,G,ee){if(($=(L.mode&32)!==0)&&($=!1),$){if(L.flags|=16777216,(ee&335544128)===ee)if(L.stateNode.complete)L.flags|=8192;else if(Mh())L.flags|=8192;else throw eo=Pl,pc}else L.flags&=-16777217}function ah(L,$){if($.type!=="stylesheet"||($.state.loading&4)!==0)L.flags&=-16777217;else if(L.flags|=16777216,!xp($))if(Mh())L.flags|=8192;else throw eo=Pl,pc}function tu(L,$){$!==null&&(L.flags|=4),L.flags&16384&&($=L.tag!==22?jt():536870912,L.lanes|=$,Io|=$)}function qs(L,$){if(!rr)switch(L.tailMode){case"hidden":$=L.tail;for(var j=null;$!==null;)$.alternate!==null&&(j=$),$=$.sibling;j===null?L.tail=null:j.sibling=null;break;case"collapsed":j=L.tail;for(var G=null;j!==null;)j.alternate!==null&&(G=j),j=j.sibling;G===null?$||L.tail===null?L.tail=null:L.tail.sibling=null:G.sibling=null}}function Lr(L){var $=L.alternate!==null&&L.alternate.child===L.child,j=0,G=0;if($)for(var ee=L.child;ee!==null;)j|=ee.lanes|ee.childLanes,G|=ee.subtreeFlags&65011712,G|=ee.flags&65011712,ee.return=L,ee=ee.sibling;else for(ee=L.child;ee!==null;)j|=ee.lanes|ee.childLanes,G|=ee.subtreeFlags,G|=ee.flags,ee.return=L,ee=ee.sibling;return L.subtreeFlags|=G,L.childLanes=j,$}function Kp(L,$,j){var G=$.pendingProps;switch(ws($),$.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr($),null;case 1:return Lr($),null;case 3:return j=$.stateNode,G=null,L!==null&&(G=L.memoizedState.cache),$.memoizedState.cache!==G&&($.flags|=2048),Sa(Be),Fe(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(L===null||L.child===null)&&(pi($)?Xa($):L===null||L.memoizedState.isDehydrated&&($.flags&256)===0||($.flags|=1024,gi())),Lr($),null;case 26:var ee=$.type,ae=$.memoizedState;return L===null?(Xa($),ae!==null?(Lr($),ah($,ae)):(Lr($),Qc($,ee,null,G,j))):ae?ae!==L.memoizedState?(Xa($),Lr($),ah($,ae)):(Lr($),$.flags&=-16777217):(L=L.memoizedProps,L!==G&&Xa($),Lr($),Qc($,ee,L,G,j)),null;case 27:if(Le($),j=Ne.current,ee=$.type,L!==null&&$.stateNode!=null)L.memoizedProps!==G&&Xa($);else{if(!G){if($.stateNode===null)throw Error(R(166));return Lr($),null}L=Ce.current,pi($)?kl($):(L=fp(ee,G,j),$.stateNode=L,Xa($))}return Lr($),null;case 5:if(Le($),ee=$.type,L!==null&&$.stateNode!=null)L.memoizedProps!==G&&Xa($);else{if(!G){if($.stateNode===null)throw Error(R(166));return Lr($),null}if(ae=Ce.current,pi($))kl($);else{var ve=mu(Ne.current);switch(ae){case 1:ae=ve.createElementNS("http://www.w3.org/2000/svg",ee);break;case 2:ae=ve.createElementNS("http://www.w3.org/1998/Math/MathML",ee);break;default:switch(ee){case"svg":ae=ve.createElementNS("http://www.w3.org/2000/svg",ee);break;case"math":ae=ve.createElementNS("http://www.w3.org/1998/Math/MathML",ee);break;case"script":ae=ve.createElement("div"),ae.innerHTML="<script><\/script>",ae=ae.removeChild(ae.firstChild);break;case"select":ae=typeof G.is=="string"?ve.createElement("select",{is:G.is}):ve.createElement("select"),G.multiple?ae.multiple=!0:G.size&&(ae.size=G.size);break;default:ae=typeof G.is=="string"?ve.createElement(ee,{is:G.is}):ve.createElement(ee)}}ae[Dr]=$,ae[Ur]=G;e:for(ve=$.child;ve!==null;){if(ve.tag===5||ve.tag===6)ae.appendChild(ve.stateNode);else if(ve.tag!==4&&ve.tag!==27&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===$)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===$)break e;ve=ve.return}ve.sibling.return=ve.return,ve=ve.sibling}$.stateNode=ae;e:switch(Sn(ae,ee,G),ee){case"button":case"input":case"select":case"textarea":G=!!G.autoFocus;break e;case"img":G=!0;break e;default:G=!1}G&&Xa($)}}return Lr($),Qc($,$.type,L===null?null:L.memoizedProps,$.pendingProps,j),null;case 6:if(L&&$.stateNode!=null)L.memoizedProps!==G&&Xa($);else{if(typeof G!="string"&&$.stateNode===null)throw Error(R(166));if(L=Ne.current,pi($)){if(L=$.stateNode,j=$.memoizedProps,G=null,ee=ln,ee!==null)switch(ee.tag){case 27:case 5:G=ee.memoizedProps}L[Dr]=$,L=!!(L.nodeValue===j||G!==null&&G.suppressHydrationWarning===!0||ep(L.nodeValue,j)),L||ba($,!0)}else L=mu(L).createTextNode(G),L[Dr]=$,$.stateNode=L}return Lr($),null;case 31:if(j=$.memoizedState,L===null||L.memoizedState!==null){if(G=pi($),j!==null){if(L===null){if(!G)throw Error(R(318));if(L=$.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(R(557));L[Dr]=$}else La(),($.flags&128)===0&&($.memoizedState=null),$.flags|=4;Lr($),L=!1}else j=gi(),L!==null&&L.memoizedState!==null&&(L.memoizedState.hydrationErrors=j),L=!0;if(!L)return $.flags&256?(Yn($),$):(Yn($),null);if(($.flags&128)!==0)throw Error(R(558))}return Lr($),null;case 13:if(G=$.memoizedState,L===null||L.memoizedState!==null&&L.memoizedState.dehydrated!==null){if(ee=pi($),G!==null&&G.dehydrated!==null){if(L===null){if(!ee)throw Error(R(318));if(ee=$.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(R(317));ee[Dr]=$}else La(),($.flags&128)===0&&($.memoizedState=null),$.flags|=4;Lr($),ee=!1}else ee=gi(),L!==null&&L.memoizedState!==null&&(L.memoizedState.hydrationErrors=ee),ee=!0;if(!ee)return $.flags&256?(Yn($),$):(Yn($),null)}return Yn($),($.flags&128)!==0?($.lanes=j,$):(j=G!==null,L=L!==null&&L.memoizedState!==null,j&&(G=$.child,ee=null,G.alternate!==null&&G.alternate.memoizedState!==null&&G.alternate.memoizedState.cachePool!==null&&(ee=G.alternate.memoizedState.cachePool.pool),ae=null,G.memoizedState!==null&&G.memoizedState.cachePool!==null&&(ae=G.memoizedState.cachePool.pool),ae!==ee&&(G.flags|=2048)),j!==L&&j&&($.child.flags|=8192),tu($,$.updateQueue),Lr($),null);case 4:return Fe(),L===null&&bf($.stateNode.containerInfo),Lr($),null;case 10:return Sa($.type),Lr($),null;case 19:if(we(Wr),G=$.memoizedState,G===null)return Lr($),null;if(ee=($.flags&128)!==0,ae=G.rendering,ae===null)if(ee)qs(G,!1);else{if(Vr!==0||L!==null&&(L.flags&128)!==0)for(L=$.child;L!==null;){if(ae=ql(L),ae!==null){for($.flags|=128,qs(G,!1),L=ae.updateQueue,$.updateQueue=L,tu($,L),$.subtreeFlags=0,L=j,j=$.child;j!==null;)bs(j,L),j=j.sibling;return Oe(Wr,Wr.current&1|2),rr&&xa($,G.treeForkCount),$.child}L=L.sibling}G.tail!==null&&Ct()>ou&&($.flags|=128,ee=!0,qs(G,!1),$.lanes=4194304)}else{if(!ee)if(L=ql(ae),L!==null){if($.flags|=128,ee=!0,L=L.updateQueue,$.updateQueue=L,tu($,L),qs(G,!0),G.tail===null&&G.tailMode==="hidden"&&!ae.alternate&&!rr)return Lr($),null}else 2*Ct()-G.renderingStartTime>ou&&j!==536870912&&($.flags|=128,ee=!0,qs(G,!1),$.lanes=4194304);G.isBackwards?(ae.sibling=$.child,$.child=ae):(L=G.last,L!==null?L.sibling=ae:$.child=ae,G.last=ae)}return G.tail!==null?(L=G.tail,G.rendering=L,G.tail=L.sibling,G.renderingStartTime=Ct(),L.sibling=null,j=Wr.current,Oe(Wr,ee?j&1|2:j&1),rr&&xa($,G.treeForkCount),L):(Lr($),null);case 22:case 23:return Yn($),bc(),G=$.memoizedState!==null,L!==null?L.memoizedState!==null!==G&&($.flags|=8192):G&&($.flags|=8192),G?(j&536870912)!==0&&($.flags&128)===0&&(Lr($),$.subtreeFlags&6&&($.flags|=8192)):Lr($),j=$.updateQueue,j!==null&&tu($,j.retryQueue),j=null,L!==null&&L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(j=L.memoizedState.cachePool.pool),G=null,$.memoizedState!==null&&$.memoizedState.cachePool!==null&&(G=$.memoizedState.cachePool.pool),G!==j&&($.flags|=2048),L!==null&&we(Zi),null;case 24:return j=null,L!==null&&(j=L.memoizedState.cache),$.memoizedState.cache!==j&&($.flags|=2048),Sa(Be),Lr($),null;case 25:return null;case 30:return null}throw Error(R(156,$.tag))}function Wp(L,$){switch(ws($),$.tag){case 1:return L=$.flags,L&65536?($.flags=L&-65537|128,$):null;case 3:return Sa(Be),Fe(),L=$.flags,(L&65536)!==0&&(L&128)===0?($.flags=L&-65537|128,$):null;case 26:case 27:case 5:return Le($),null;case 31:if($.memoizedState!==null){if(Yn($),$.alternate===null)throw Error(R(340));La()}return L=$.flags,L&65536?($.flags=L&-65537|128,$):null;case 13:if(Yn($),L=$.memoizedState,L!==null&&L.dehydrated!==null){if($.alternate===null)throw Error(R(340));La()}return L=$.flags,L&65536?($.flags=L&-65537|128,$):null;case 19:return we(Wr),null;case 4:return Fe(),null;case 10:return Sa($.type),null;case 22:case 23:return Yn($),bc(),L!==null&&we(Zi),L=$.flags,L&65536?($.flags=L&-65537|128,$):null;case 24:return Sa(Be),null;case 25:return null;default:return null}}function ih(L,$){switch(ws($),$.tag){case 3:Sa(Be),Fe();break;case 26:case 27:case 5:Le($);break;case 4:Fe();break;case 31:$.memoizedState!==null&&Yn($);break;case 13:Yn($);break;case 19:we(Wr);break;case 10:Sa($.type);break;case 22:case 23:Yn($),bc(),L!==null&&we(Zi);break;case 24:Sa(Be)}}function $s(L,$){try{var j=$.updateQueue,G=j!==null?j.lastEffect:null;if(G!==null){var ee=G.next;j=ee;do{if((j.tag&L)===L){G=void 0;var ae=j.create,ve=j.inst;G=ae(),ve.destroy=G}j=j.next}while(j!==ee)}}catch(Me){Er($,$.return,Me)}}function Ei(L,$,j){try{var G=$.updateQueue,ee=G!==null?G.lastEffect:null;if(ee!==null){var ae=ee.next;G=ae;do{if((G.tag&L)===L){var ve=G.inst,Me=ve.destroy;if(Me!==void 0){ve.destroy=void 0,ee=$;var je=j,Je=Me;try{Je()}catch(st){Er(ee,je,st)}}}G=G.next}while(G!==ae)}}catch(st){Er($,$.return,st)}}function oh(L){var $=L.updateQueue;if($!==null){var j=L.stateNode;try{Xf($,j)}catch(G){Er(L,L.return,G)}}}function sh(L,$,j){j.props=no(L.type,L.memoizedProps),j.state=L.memoizedState;try{j.componentWillUnmount()}catch(G){Er(L,$,G)}}function Bs(L,$){try{var j=L.ref;if(j!==null){switch(L.tag){case 26:case 27:case 5:var G=L.stateNode;break;case 30:G=L.stateNode;break;default:G=L.stateNode}typeof j=="function"?L.refCleanup=j(G):j.current=G}}catch(ee){Er(L,$,ee)}}function $a(L,$){var j=L.ref,G=L.refCleanup;if(j!==null)if(typeof G=="function")try{G()}catch(ee){Er(L,$,ee)}finally{L.refCleanup=null,L=L.alternate,L!=null&&(L.refCleanup=null)}else if(typeof j=="function")try{j(null)}catch(ee){Er(L,$,ee)}else j.current=null}function lh(L){var $=L.type,j=L.memoizedProps,G=L.stateNode;try{e:switch($){case"button":case"input":case"select":case"textarea":j.autoFocus&&G.focus();break e;case"img":j.src?G.src=j.src:j.srcSet&&(G.srcset=j.srcSet)}}catch(ee){Er(L,L.return,ee)}}function Zc(L,$,j){try{var G=L.stateNode;mg(G,L.type,j,$),G[Ur]=$}catch(ee){Er(L,L.return,ee)}}function uh(L){return L.tag===5||L.tag===3||L.tag===26||L.tag===27&&Ai(L.type)||L.tag===4}function Jc(L){e:for(;;){for(;L.sibling===null;){if(L.return===null||uh(L.return))return null;L=L.return}for(L.sibling.return=L.return,L=L.sibling;L.tag!==5&&L.tag!==6&&L.tag!==18;){if(L.tag===27&&Ai(L.type)||L.flags&2||L.child===null||L.tag===4)continue e;L.child.return=L,L=L.child}if(!(L.flags&2))return L.stateNode}}function ef(L,$,j){var G=L.tag;if(G===5||G===6)L=L.stateNode,$?(j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j).insertBefore(L,$):($=j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j,$.appendChild(L),j=j._reactRootContainer,j!=null||$.onclick!==null||($.onclick=da));else if(G!==4&&(G===27&&Ai(L.type)&&(j=L.stateNode,$=null),L=L.child,L!==null))for(ef(L,$,j),L=L.sibling;L!==null;)ef(L,$,j),L=L.sibling}function ru(L,$,j){var G=L.tag;if(G===5||G===6)L=L.stateNode,$?j.insertBefore(L,$):j.appendChild(L);else if(G!==4&&(G===27&&Ai(L.type)&&(j=L.stateNode),L=L.child,L!==null))for(ru(L,$,j),L=L.sibling;L!==null;)ru(L,$,j),L=L.sibling}function ch(L){var $=L.stateNode,j=L.memoizedProps;try{for(var G=L.type,ee=$.attributes;ee.length;)$.removeAttributeNode(ee[0]);Sn($,G,j),$[Dr]=L,$[Ur]=j}catch(ae){Er(L,L.return,ae)}}var Qa=!1,pn=!1,tf=!1,fh=typeof WeakSet=="function"?WeakSet:Set,bn=null;function Yp(L,$){if(L=L.containerInfo,wf=wu,L=ls(L),us(L)){if("selectionStart"in L)var j={start:L.selectionStart,end:L.selectionEnd};else e:{j=(j=L.ownerDocument)&&j.defaultView||window;var G=j.getSelection&&j.getSelection();if(G&&G.rangeCount!==0){j=G.anchorNode;var ee=G.anchorOffset,ae=G.focusNode;G=G.focusOffset;try{j.nodeType,ae.nodeType}catch{j=null;break e}var ve=0,Me=-1,je=-1,Je=0,st=0,gt=L,rt=null;t:for(;;){for(var it;gt!==j||ee!==0&&gt.nodeType!==3||(Me=ve+ee),gt!==ae||G!==0&&gt.nodeType!==3||(je=ve+G),gt.nodeType===3&&(ve+=gt.nodeValue.length),(it=gt.firstChild)!==null;)rt=gt,gt=it;for(;;){if(gt===L)break t;if(rt===j&&++Je===ee&&(Me=ve),rt===ae&&++st===G&&(je=ve),(it=gt.nextSibling)!==null)break;gt=rt,rt=gt.parentNode}gt=it}j=Me===-1||je===-1?null:{start:Me,end:je}}else j=null}j=j||{start:0,end:0}}else j=null;for(Cf={focusedElem:L,selectionRange:j},wu=!1,bn=$;bn!==null;)if($=bn,L=$.child,($.subtreeFlags&1028)!==0&&L!==null)L.return=$,bn=L;else for(;bn!==null;){switch($=bn,ae=$.alternate,L=$.flags,$.tag){case 0:if((L&4)!==0&&(L=$.updateQueue,L=L!==null?L.events:null,L!==null))for(j=0;j<L.length;j++)ee=L[j],ee.ref.impl=ee.nextImpl;break;case 11:case 15:break;case 1:if((L&1024)!==0&&ae!==null){L=void 0,j=$,ee=ae.memoizedProps,ae=ae.memoizedState,G=j.stateNode;try{var Lt=no(j.type,ee);L=G.getSnapshotBeforeUpdate(Lt,ae),G.__reactInternalSnapshotBeforeUpdate=L}catch(Vt){Er(j,j.return,Vt)}}break;case 3:if((L&1024)!==0){if(L=$.stateNode.containerInfo,j=L.nodeType,j===9)Tf(L);else if(j===1)switch(L.nodeName){case"HEAD":case"HTML":case"BODY":Tf(L);break;default:L.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((L&1024)!==0)throw Error(R(163))}if(L=$.sibling,L!==null){L.return=$.return,bn=L;break}bn=$.return}}function dh(L,$,j){var G=j.flags;switch(j.tag){case 0:case 11:case 15:Ja(L,j),G&4&&$s(5,j);break;case 1:if(Ja(L,j),G&4)if(L=j.stateNode,$===null)try{L.componentDidMount()}catch(ve){Er(j,j.return,ve)}else{var ee=no(j.type,$.memoizedProps);$=$.memoizedState;try{L.componentDidUpdate(ee,$,L.__reactInternalSnapshotBeforeUpdate)}catch(ve){Er(j,j.return,ve)}}G&64&&oh(j),G&512&&Bs(j,j.return);break;case 3:if(Ja(L,j),G&64&&(L=j.updateQueue,L!==null)){if($=null,j.child!==null)switch(j.child.tag){case 27:case 5:$=j.child.stateNode;break;case 1:$=j.child.stateNode}try{Xf(L,$)}catch(ve){Er(j,j.return,ve)}}break;case 27:$===null&&G&4&&ch(j);case 26:case 5:Ja(L,j),$===null&&G&4&&lh(j),G&512&&Bs(j,j.return);break;case 12:Ja(L,j);break;case 31:Ja(L,j),G&4&&gh(L,j);break;case 13:Ja(L,j),G&4&&mh(L,j),G&64&&(L=j.memoizedState,L!==null&&(L=L.dehydrated,L!==null&&(j=ag.bind(null,j),Cg(L,j))));break;case 22:if(G=j.memoizedState!==null||Qa,!G){$=$!==null&&$.memoizedState!==null||pn,ee=Qa;var ae=pn;Qa=G,(pn=$)&&!ae?ei(L,j,(j.subtreeFlags&8772)!==0):Ja(L,j),Qa=ee,pn=ae}break;case 30:break;default:Ja(L,j)}}function hh(L){var $=L.alternate;$!==null&&(L.alternate=null,hh($)),L.child=null,L.deletions=null,L.sibling=null,L.tag===5&&($=L.stateNode,$!==null&&ai($)),L.stateNode=null,L.return=null,L.dependencies=null,L.memoizedProps=null,L.memoizedState=null,L.pendingProps=null,L.stateNode=null,L.updateQueue=null}var qr=null,jn=!1;function Za(L,$,j){for(j=j.child;j!==null;)ph(L,$,j),j=j.sibling}function ph(L,$,j){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(ke,j)}catch{}switch(j.tag){case 26:pn||$a(j,$),Za(L,$,j),j.memoizedState?j.memoizedState.count--:j.stateNode&&(j=j.stateNode,j.parentNode.removeChild(j));break;case 27:pn||$a(j,$);var G=qr,ee=jn;Ai(j.type)&&(qr=j.stateNode,jn=!1),Za(L,$,j),Ys(j.stateNode),qr=G,jn=ee;break;case 5:pn||$a(j,$);case 6:if(G=qr,ee=jn,qr=null,Za(L,$,j),qr=G,jn=ee,qr!==null)if(jn)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(j.stateNode)}catch(ae){Er(j,$,ae)}else try{qr.removeChild(j.stateNode)}catch(ae){Er(j,$,ae)}break;case 18:qr!==null&&(jn?(L=qr,op(L.nodeType===9?L.body:L.nodeName==="HTML"?L.ownerDocument.body:L,j.stateNode),Ho(L)):op(qr,j.stateNode));break;case 4:G=qr,ee=jn,qr=j.stateNode.containerInfo,jn=!0,Za(L,$,j),qr=G,jn=ee;break;case 0:case 11:case 14:case 15:Ei(2,j,$),pn||Ei(4,j,$),Za(L,$,j);break;case 1:pn||($a(j,$),G=j.stateNode,typeof G.componentWillUnmount=="function"&&sh(j,$,G)),Za(L,$,j);break;case 21:Za(L,$,j);break;case 22:pn=(G=pn)||j.memoizedState!==null,Za(L,$,j),pn=G;break;default:Za(L,$,j)}}function gh(L,$){if($.memoizedState===null&&(L=$.alternate,L!==null&&(L=L.memoizedState,L!==null))){L=L.dehydrated;try{Ho(L)}catch(j){Er($,$.return,j)}}}function mh(L,$){if($.memoizedState===null&&(L=$.alternate,L!==null&&(L=L.memoizedState,L!==null&&(L=L.dehydrated,L!==null))))try{Ho(L)}catch(j){Er($,$.return,j)}}function Xp(L){switch(L.tag){case 31:case 13:case 19:var $=L.stateNode;return $===null&&($=L.stateNode=new fh),$;case 22:return L=L.stateNode,$=L._retryCache,$===null&&($=L._retryCache=new fh),$;default:throw Error(R(435,L.tag))}}function nu(L,$){var j=Xp(L);$.forEach(function(G){if(!j.has(G)){j.add(G);var ee=ig.bind(null,L,G);G.then(ee,ee)}})}function Fn(L,$){var j=$.deletions;if(j!==null)for(var G=0;G<j.length;G++){var ee=j[G],ae=L,ve=$,Me=ve;e:for(;Me!==null;){switch(Me.tag){case 27:if(Ai(Me.type)){qr=Me.stateNode,jn=!1;break e}break;case 5:qr=Me.stateNode,jn=!1;break e;case 3:case 4:qr=Me.stateNode.containerInfo,jn=!0;break e}Me=Me.return}if(qr===null)throw Error(R(160));ph(ae,ve,ee),qr=null,jn=!1,ae=ee.alternate,ae!==null&&(ae.return=null),ee.return=null}if($.subtreeFlags&13886)for($=$.child;$!==null;)vh($,L),$=$.sibling}var wa=null;function vh(L,$){var j=L.alternate,G=L.flags;switch(L.tag){case 0:case 11:case 14:case 15:Fn($,L),zn(L),G&4&&(Ei(3,L,L.return),$s(3,L),Ei(5,L,L.return));break;case 1:Fn($,L),zn(L),G&512&&(pn||j===null||$a(j,j.return)),G&64&&Qa&&(L=L.updateQueue,L!==null&&(G=L.callbacks,G!==null&&(j=L.shared.hiddenCallbacks,L.shared.hiddenCallbacks=j===null?G:j.concat(G))));break;case 26:var ee=wa;if(Fn($,L),zn(L),G&512&&(pn||j===null||$a(j,j.return)),G&4){var ae=j!==null?j.memoizedState:null;if(G=L.memoizedState,j===null)if(G===null)if(L.stateNode===null){e:{G=L.type,j=L.memoizedProps,ee=ee.ownerDocument||ee;t:switch(G){case"title":ae=ee.getElementsByTagName("title")[0],(!ae||ae[on]||ae[Dr]||ae.namespaceURI==="http://www.w3.org/2000/svg"||ae.hasAttribute("itemprop"))&&(ae=ee.createElement(G),ee.head.insertBefore(ae,ee.querySelector("head > title"))),Sn(ae,G,j),ae[Dr]=L,$r(ae),G=ae;break e;case"link":var ve=vp("link","href",ee).get(G+(j.href||""));if(ve){for(var Me=0;Me<ve.length;Me++)if(ae=ve[Me],ae.getAttribute("href")===(j.href==null||j.href===""?null:j.href)&&ae.getAttribute("rel")===(j.rel==null?null:j.rel)&&ae.getAttribute("title")===(j.title==null?null:j.title)&&ae.getAttribute("crossorigin")===(j.crossOrigin==null?null:j.crossOrigin)){ve.splice(Me,1);break t}}ae=ee.createElement(G),Sn(ae,G,j),ee.head.appendChild(ae);break;case"meta":if(ve=vp("meta","content",ee).get(G+(j.content||""))){for(Me=0;Me<ve.length;Me++)if(ae=ve[Me],ae.getAttribute("content")===(j.content==null?null:""+j.content)&&ae.getAttribute("name")===(j.name==null?null:j.name)&&ae.getAttribute("property")===(j.property==null?null:j.property)&&ae.getAttribute("http-equiv")===(j.httpEquiv==null?null:j.httpEquiv)&&ae.getAttribute("charset")===(j.charSet==null?null:j.charSet)){ve.splice(Me,1);break t}}ae=ee.createElement(G),Sn(ae,G,j),ee.head.appendChild(ae);break;default:throw Error(R(468,G))}ae[Dr]=L,$r(ae),G=ae}L.stateNode=G}else yp(ee,L.type,L.stateNode);else L.stateNode=mp(ee,G,L.memoizedProps);else ae!==G?(ae===null?j.stateNode!==null&&(j=j.stateNode,j.parentNode.removeChild(j)):ae.count--,G===null?yp(ee,L.type,L.stateNode):mp(ee,G,L.memoizedProps)):G===null&&L.stateNode!==null&&Zc(L,L.memoizedProps,j.memoizedProps)}break;case 27:Fn($,L),zn(L),G&512&&(pn||j===null||$a(j,j.return)),j!==null&&G&4&&Zc(L,L.memoizedProps,j.memoizedProps);break;case 5:if(Fn($,L),zn(L),G&512&&(pn||j===null||$a(j,j.return)),L.flags&32){ee=L.stateNode;try{oi(ee,"")}catch(Lt){Er(L,L.return,Lt)}}G&4&&L.stateNode!=null&&(ee=L.memoizedProps,Zc(L,ee,j!==null?j.memoizedProps:ee)),G&1024&&(tf=!0);break;case 6:if(Fn($,L),zn(L),G&4){if(L.stateNode===null)throw Error(R(162));G=L.memoizedProps,j=L.stateNode;try{j.nodeValue=G}catch(Lt){Er(L,L.return,Lt)}}break;case 3:if(xu=null,ee=wa,wa=vu($.containerInfo),Fn($,L),wa=ee,zn(L),G&4&&j!==null&&j.memoizedState.isDehydrated)try{Ho($.containerInfo)}catch(Lt){Er(L,L.return,Lt)}tf&&(tf=!1,yh(L));break;case 4:G=wa,wa=vu(L.stateNode.containerInfo),Fn($,L),zn(L),wa=G;break;case 12:Fn($,L),zn(L);break;case 31:Fn($,L),zn(L),G&4&&(G=L.updateQueue,G!==null&&(L.updateQueue=null,nu(L,G)));break;case 13:Fn($,L),zn(L),L.child.flags&8192&&L.memoizedState!==null!=(j!==null&&j.memoizedState!==null)&&(iu=Ct()),G&4&&(G=L.updateQueue,G!==null&&(L.updateQueue=null,nu(L,G)));break;case 22:ee=L.memoizedState!==null;var je=j!==null&&j.memoizedState!==null,Je=Qa,st=pn;if(Qa=Je||ee,pn=st||je,Fn($,L),pn=st,Qa=Je,zn(L),G&8192)e:for($=L.stateNode,$._visibility=ee?$._visibility&-2:$._visibility|1,ee&&(j===null||je||Qa||pn||ao(L)),j=null,$=L;;){if($.tag===5||$.tag===26){if(j===null){je=j=$;try{if(ae=je.stateNode,ee)ve=ae.style,typeof ve.setProperty=="function"?ve.setProperty("display","none","important"):ve.display="none";else{Me=je.stateNode;var gt=je.memoizedProps.style,rt=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;Me.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Lt){Er(je,je.return,Lt)}}}else if($.tag===6){if(j===null){je=$;try{je.stateNode.nodeValue=ee?"":je.memoizedProps}catch(Lt){Er(je,je.return,Lt)}}}else if($.tag===18){if(j===null){je=$;try{var it=je.stateNode;ee?sp(it,!0):sp(je.stateNode,!1)}catch(Lt){Er(je,je.return,Lt)}}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===L)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===L)break e;for(;$.sibling===null;){if($.return===null||$.return===L)break e;j===$&&(j=null),$=$.return}j===$&&(j=null),$.sibling.return=$.return,$=$.sibling}G&4&&(G=L.updateQueue,G!==null&&(j=G.retryQueue,j!==null&&(G.retryQueue=null,nu(L,j))));break;case 19:Fn($,L),zn(L),G&4&&(G=L.updateQueue,G!==null&&(L.updateQueue=null,nu(L,G)));break;case 30:break;case 21:break;default:Fn($,L),zn(L)}}function zn(L){var $=L.flags;if($&2){try{for(var j,G=L.return;G!==null;){if(uh(G)){j=G;break}G=G.return}if(j==null)throw Error(R(160));switch(j.tag){case 27:var ee=j.stateNode,ae=Jc(L);ru(L,ae,ee);break;case 5:var ve=j.stateNode;j.flags&32&&(oi(ve,""),j.flags&=-33);var Me=Jc(L);ru(L,Me,ve);break;case 3:case 4:var je=j.stateNode.containerInfo,Je=Jc(L);ef(L,Je,je);break;default:throw Error(R(161))}}catch(st){Er(L,L.return,st)}L.flags&=-3}$&4096&&(L.flags&=-4097)}function yh(L){if(L.subtreeFlags&1024)for(L=L.child;L!==null;){var $=L;yh($),$.tag===5&&$.flags&1024&&$.stateNode.reset(),L=L.sibling}}function Ja(L,$){if($.subtreeFlags&8772)for($=$.child;$!==null;)dh(L,$.alternate,$),$=$.sibling}function ao(L){for(L=L.child;L!==null;){var $=L;switch($.tag){case 0:case 11:case 14:case 15:Ei(4,$,$.return),ao($);break;case 1:$a($,$.return);var j=$.stateNode;typeof j.componentWillUnmount=="function"&&sh($,$.return,j),ao($);break;case 27:Ys($.stateNode);case 26:case 5:$a($,$.return),ao($);break;case 22:$.memoizedState===null&&ao($);break;case 30:ao($);break;default:ao($)}L=L.sibling}}function ei(L,$,j){for(j=j&&($.subtreeFlags&8772)!==0,$=$.child;$!==null;){var G=$.alternate,ee=L,ae=$,ve=ae.flags;switch(ae.tag){case 0:case 11:case 15:ei(ee,ae,j),$s(4,ae);break;case 1:if(ei(ee,ae,j),G=ae,ee=G.stateNode,typeof ee.componentDidMount=="function")try{ee.componentDidMount()}catch(Je){Er(G,G.return,Je)}if(G=ae,ee=G.updateQueue,ee!==null){var Me=G.stateNode;try{var je=ee.shared.hiddenCallbacks;if(je!==null)for(ee.shared.hiddenCallbacks=null,ee=0;ee<je.length;ee++)Yf(je[ee],Me)}catch(Je){Er(G,G.return,Je)}}j&&ve&64&&oh(ae),Bs(ae,ae.return);break;case 27:ch(ae);case 26:case 5:ei(ee,ae,j),j&&G===null&&ve&4&&lh(ae),Bs(ae,ae.return);break;case 12:ei(ee,ae,j);break;case 31:ei(ee,ae,j),j&&ve&4&&gh(ee,ae);break;case 13:ei(ee,ae,j),j&&ve&4&&mh(ee,ae);break;case 22:ae.memoizedState===null&&ei(ee,ae,j),Bs(ae,ae.return);break;case 30:break;default:ei(ee,ae,j)}$=$.sibling}}function rf(L,$){var j=null;L!==null&&L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(j=L.memoizedState.cachePool.pool),L=null,$.memoizedState!==null&&$.memoizedState.cachePool!==null&&(L=$.memoizedState.cachePool.pool),L!==j&&(L!=null&&L.refCount++,j!=null&&Wt(j))}function nf(L,$){L=null,$.alternate!==null&&(L=$.alternate.memoizedState.cache),$=$.memoizedState.cache,$!==L&&($.refCount++,L!=null&&Wt(L))}function Ca(L,$,j,G){if($.subtreeFlags&10256)for($=$.child;$!==null;)xh(L,$,j,G),$=$.sibling}function xh(L,$,j,G){var ee=$.flags;switch($.tag){case 0:case 11:case 15:Ca(L,$,j,G),ee&2048&&$s(9,$);break;case 1:Ca(L,$,j,G);break;case 3:Ca(L,$,j,G),ee&2048&&(L=null,$.alternate!==null&&(L=$.alternate.memoizedState.cache),$=$.memoizedState.cache,$!==L&&($.refCount++,L!=null&&Wt(L)));break;case 12:if(ee&2048){Ca(L,$,j,G),L=$.stateNode;try{var ae=$.memoizedProps,ve=ae.id,Me=ae.onPostCommit;typeof Me=="function"&&Me(ve,$.alternate===null?"mount":"update",L.passiveEffectDuration,-0)}catch(je){Er($,$.return,je)}}else Ca(L,$,j,G);break;case 31:Ca(L,$,j,G);break;case 13:Ca(L,$,j,G);break;case 23:break;case 22:ae=$.stateNode,ve=$.alternate,$.memoizedState!==null?ae._visibility&2?Ca(L,$,j,G):js(L,$):ae._visibility&2?Ca(L,$,j,G):(ae._visibility|=2,Po(L,$,j,G,($.subtreeFlags&10256)!==0||!1)),ee&2048&&rf(ve,$);break;case 24:Ca(L,$,j,G),ee&2048&&nf($.alternate,$);break;default:Ca(L,$,j,G)}}function Po(L,$,j,G,ee){for(ee=ee&&(($.subtreeFlags&10256)!==0||!1),$=$.child;$!==null;){var ae=L,ve=$,Me=j,je=G,Je=ve.flags;switch(ve.tag){case 0:case 11:case 15:Po(ae,ve,Me,je,ee),$s(8,ve);break;case 23:break;case 22:var st=ve.stateNode;ve.memoizedState!==null?st._visibility&2?Po(ae,ve,Me,je,ee):js(ae,ve):(st._visibility|=2,Po(ae,ve,Me,je,ee)),ee&&Je&2048&&rf(ve.alternate,ve);break;case 24:Po(ae,ve,Me,je,ee),ee&&Je&2048&&nf(ve.alternate,ve);break;default:Po(ae,ve,Me,je,ee)}$=$.sibling}}function js(L,$){if($.subtreeFlags&10256)for($=$.child;$!==null;){var j=L,G=$,ee=G.flags;switch(G.tag){case 22:js(j,G),ee&2048&&rf(G.alternate,G);break;case 24:js(j,G),ee&2048&&nf(G.alternate,G);break;default:js(j,G)}$=$.sibling}}var Fs=8192;function No(L,$,j){if(L.subtreeFlags&Fs)for(L=L.child;L!==null;)bh(L,$,j),L=L.sibling}function bh(L,$,j){switch(L.tag){case 26:No(L,$,j),L.flags&Fs&&L.memoizedState!==null&&Ig(j,wa,L.memoizedState,L.memoizedProps);break;case 5:No(L,$,j);break;case 3:case 4:var G=wa;wa=vu(L.stateNode.containerInfo),No(L,$,j),wa=G;break;case 22:L.memoizedState===null&&(G=L.alternate,G!==null&&G.memoizedState!==null?(G=Fs,Fs=16777216,No(L,$,j),Fs=G):No(L,$,j));break;default:No(L,$,j)}}function Eh(L){var $=L.alternate;if($!==null&&(L=$.child,L!==null)){$.child=null;do $=L.sibling,L.sibling=null,L=$;while(L!==null)}}function zs(L){var $=L.deletions;if((L.flags&16)!==0){if($!==null)for(var j=0;j<$.length;j++){var G=$[j];bn=G,wh(G,L)}Eh(L)}if(L.subtreeFlags&10256)for(L=L.child;L!==null;)Sh(L),L=L.sibling}function Sh(L){switch(L.tag){case 0:case 11:case 15:zs(L),L.flags&2048&&Ei(9,L,L.return);break;case 3:zs(L);break;case 12:zs(L);break;case 22:var $=L.stateNode;L.memoizedState!==null&&$._visibility&2&&(L.return===null||L.return.tag!==13)?($._visibility&=-3,au(L)):zs(L);break;default:zs(L)}}function au(L){var $=L.deletions;if((L.flags&16)!==0){if($!==null)for(var j=0;j<$.length;j++){var G=$[j];bn=G,wh(G,L)}Eh(L)}for(L=L.child;L!==null;){switch($=L,$.tag){case 0:case 11:case 15:Ei(8,$,$.return),au($);break;case 22:j=$.stateNode,j._visibility&2&&(j._visibility&=-3,au($));break;default:au($)}L=L.sibling}}function wh(L,$){for(;bn!==null;){var j=bn;switch(j.tag){case 0:case 11:case 15:Ei(8,j,$);break;case 23:case 22:if(j.memoizedState!==null&&j.memoizedState.cachePool!==null){var G=j.memoizedState.cachePool.pool;G!=null&&G.refCount++}break;case 24:Wt(j.memoizedState.cache)}if(G=j.child,G!==null)G.return=j,bn=G;else e:for(j=L;bn!==null;){G=bn;var ee=G.sibling,ae=G.return;if(hh(G),G===j){bn=null;break e}if(ee!==null){ee.return=ae,bn=ee;break e}bn=ae}}}var Qp={getCacheForType:function(L){var $=Kr(Be),j=$.data.get(L);return j===void 0&&(j=L(),$.data.set(L,j)),j},cacheSignal:function(){return Kr(Be).controller.signal}},Zp=typeof WeakMap=="function"?WeakMap:Map,mr=0,Mr=null,nr=null,sr=0,br=0,Xn=null,Si=!1,Lo=!1,af=!1,ti=0,Vr=0,wi=0,io=0,of=0,Qn=0,Io=0,Vs=null,Vn=null,sf=!1,iu=0,Ch=0,ou=1/0,su=null,Ci=null,mn=0,_i=null,qo=null,ri=0,lf=0,uf=null,_h=null,Hs=0,cf=null;function Zn(){return(mr&2)!==0&&sr!==0?sr&-sr:ye.T!==null?mf():Or()}function Rh(){if(Qn===0)if((sr&536870912)===0||rr){var L=kt;kt<<=1,(kt&3932160)===0&&(kt=262144),Qn=L}else Qn=536870912;return L=Wn.current,L!==null&&(L.flags|=32),Qn}function Hn(L,$,j){(L===Mr&&(br===2||br===9)||L.cancelPendingCommit!==null)&&($o(L,0),Ri(L,sr,Qn,!1)),Gt(L,j),((mr&2)===0||L!==Mr)&&(L===Mr&&((mr&2)===0&&(io|=j),Vr===4&&Ri(L,sr,Qn,!1)),Ba(L))}function Th(L,$,j){if((mr&6)!==0)throw Error(R(327));var G=!j&&($&127)===0&&($&L.expiredLanes)===0||bt(L,$),ee=G?tg(L,$):df(L,$,!0),ae=G;do{if(ee===0){Lo&&!G&&Ri(L,$,0,!1);break}else{if(j=L.current.alternate,ae&&!Jp(j)){ee=df(L,$,!1),ae=!1;continue}if(ee===2){if(ae=$,L.errorRecoveryDisabledLanes&ae)var ve=0;else ve=L.pendingLanes&-536870913,ve=ve!==0?ve:ve&536870912?536870912:0;if(ve!==0){$=ve;e:{var Me=L;ee=Vs;var je=Me.current.memoizedState.isDehydrated;if(je&&($o(Me,ve).flags|=256),ve=df(Me,ve,!1),ve!==2){if(af&&!je){Me.errorRecoveryDisabledLanes|=ae,io|=ae,ee=4;break e}ae=Vn,Vn=ee,ae!==null&&(Vn===null?Vn=ae:Vn.push.apply(Vn,ae))}ee=ve}if(ae=!1,ee!==2)continue}}if(ee===1){$o(L,0),Ri(L,$,0,!0);break}e:{switch(G=L,ae=ee,ae){case 0:case 1:throw Error(R(345));case 4:if(($&4194048)!==$)break;case 6:Ri(G,$,Qn,!Si);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(R(329))}if(($&62914560)===$&&(ee=iu+300-Ct(),10<ee)){if(Ri(G,$,Qn,!Si),Et(G,0,!0)!==0)break e;ri=$,G.timeoutHandle=ap(Ah.bind(null,G,j,Vn,su,sf,$,Qn,io,Io,Si,ae,"Throttled",-0,0),ee);break e}Ah(G,j,Vn,su,sf,$,Qn,io,Io,Si,ae,null,-0,0)}}break}while(!0);Ba(L)}function Ah(L,$,j,G,ee,ae,ve,Me,je,Je,st,gt,rt,it){if(L.timeoutHandle=-1,gt=$.subtreeFlags,gt&8192||(gt&16785408)===16785408){gt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:da},bh($,ae,gt);var Lt=(ae&62914560)===ae?iu-Ct():(ae&4194048)===ae?Ch-Ct():0;if(Lt=qg(gt,Lt),Lt!==null){ri=ae,L.cancelPendingCommit=Lt(Ih.bind(null,L,$,ae,j,G,ee,ve,Me,je,st,gt,null,rt,it)),Ri(L,ae,ve,!Je);return}}Ih(L,$,ae,j,G,ee,ve,Me,je)}function Jp(L){for(var $=L;;){var j=$.tag;if((j===0||j===11||j===15)&&$.flags&16384&&(j=$.updateQueue,j!==null&&(j=j.stores,j!==null)))for(var G=0;G<j.length;G++){var ee=j[G],ae=ee.getSnapshot;ee=ee.value;try{if(!Rn(ae(),ee))return!1}catch{return!1}}if(j=$.child,$.subtreeFlags&16384&&j!==null)j.return=$,$=j;else{if($===L)break;for(;$.sibling===null;){if($.return===null||$.return===L)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Ri(L,$,j,G){$&=~of,$&=~io,L.suspendedLanes|=$,L.pingedLanes&=~$,G&&(L.warmLanes|=$),G=L.expirationTimes;for(var ee=$;0<ee;){var ae=31-tt(ee),ve=1<<ae;G[ae]=-1,ee&=~ve}j!==0&&vr(L,j,$)}function lu(){return(mr&6)===0?(Us(0),!1):!0}function ff(){if(nr!==null){if(br===0)var L=nr.return;else L=nr,Ea=Kn=null,Rc(L),Ao=null,Ts=0,L=nr;for(;L!==null;)ih(L.alternate,L),L=L.return;nr=null}}function $o(L,$){var j=L.timeoutHandle;j!==-1&&(L.timeoutHandle=-1,xg(j)),j=L.cancelPendingCommit,j!==null&&(L.cancelPendingCommit=null,j()),ri=0,ff(),Mr=L,nr=j=In(L.current,null),sr=$,br=0,Xn=null,Si=!1,Lo=bt(L,$),af=!1,Io=Qn=of=io=wi=Vr=0,Vn=Vs=null,sf=!1,($&8)!==0&&($|=$&32);var G=L.entangledLanes;if(G!==0)for(L=L.entanglements,G&=$;0<G;){var ee=31-tt(G),ae=1<<ee;$|=L[ee],G&=~ae}return ti=$,fi(),j}function kh(L,$){Qt=null,ye.H=Ls,$===To||$===Dl?($=Uf(),br=3):$===pc?($=Uf(),br=4):br=$===zc?8:$!==null&&typeof $=="object"&&typeof $.then=="function"?6:1,Xn=$,nr===null&&(Vr=1,Gl(L,qn($,L.current)))}function Mh(){var L=Wn.current;return L===null?!0:(sr&4194048)===sr?sa===null:(sr&62914560)===sr||(sr&536870912)!==0?L===sa:!1}function Oh(){var L=ye.H;return ye.H=Ls,L===null?Ls:L}function Dh(){var L=ye.A;return ye.A=Qp,L}function uu(){Vr=4,Si||(sr&4194048)!==sr&&Wn.current!==null||(Lo=!0),(wi&134217727)===0&&(io&134217727)===0||Mr===null||Ri(Mr,sr,Qn,!1)}function df(L,$,j){var G=mr;mr|=2;var ee=Oh(),ae=Dh();(Mr!==L||sr!==$)&&(su=null,$o(L,$)),$=!1;var ve=Vr;e:do try{if(br!==0&&nr!==null){var Me=nr,je=Xn;switch(br){case 8:ff(),ve=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&($=!0);var Je=br;if(br=0,Xn=null,Bo(L,Me,je,Je),j&&Lo){ve=0;break e}break;default:Je=br,br=0,Xn=null,Bo(L,Me,je,Je)}}eg(),ve=Vr;break}catch(st){kh(L,st)}while(!0);return $&&L.shellSuspendCounter++,Ea=Kn=null,mr=G,ye.H=ee,ye.A=ae,nr===null&&(Mr=null,sr=0,fi()),ve}function eg(){for(;nr!==null;)Ph(nr)}function tg(L,$){var j=mr;mr|=2;var G=Oh(),ee=Dh();Mr!==L||sr!==$?(su=null,ou=Ct()+500,$o(L,$)):Lo=bt(L,$);e:do try{if(br!==0&&nr!==null){$=nr;var ae=Xn;t:switch(br){case 1:br=0,Xn=null,Bo(L,$,ae,1);break;case 2:case 9:if(Vf(ae)){br=0,Xn=null,Nh($);break}$=function(){br!==2&&br!==9||Mr!==L||(br=7),Ba(L)},ae.then($,$);break e;case 3:br=7;break e;case 4:br=5;break e;case 7:Vf(ae)?(br=0,Xn=null,Nh($)):(br=0,Xn=null,Bo(L,$,ae,7));break;case 5:var ve=null;switch(nr.tag){case 26:ve=nr.memoizedState;case 5:case 27:var Me=nr;if(ve?xp(ve):Me.stateNode.complete){br=0,Xn=null;var je=Me.sibling;if(je!==null)nr=je;else{var Je=Me.return;Je!==null?(nr=Je,cu(Je)):nr=null}break t}}br=0,Xn=null,Bo(L,$,ae,5);break;case 6:br=0,Xn=null,Bo(L,$,ae,6);break;case 8:ff(),Vr=6;break e;default:throw Error(R(462))}}rg();break}catch(st){kh(L,st)}while(!0);return Ea=Kn=null,ye.H=G,ye.A=ee,mr=j,nr!==null?0:(Mr=null,sr=0,fi(),Vr)}function rg(){for(;nr!==null&&!xt();)Ph(nr)}function Ph(L){var $=nh(L.alternate,L,ti);L.memoizedProps=L.pendingProps,$===null?cu(L):nr=$}function Nh(L){var $=L,j=$.alternate;switch($.tag){case 15:case 0:$=Qd(j,$,$.pendingProps,$.type,void 0,sr);break;case 11:$=Qd(j,$,$.pendingProps,$.type.render,$.ref,sr);break;case 5:Rc($);default:ih(j,$),$=nr=bs($,ti),$=nh(j,$,ti)}L.memoizedProps=L.pendingProps,$===null?cu(L):nr=$}function Bo(L,$,j,G){Ea=Kn=null,Rc($),Ao=null,Ts=0;var ee=$.return;try{if(Hp(L,ee,$,j,sr)){Vr=1,Gl(L,qn(j,L.current)),nr=null;return}}catch(ae){if(ee!==null)throw nr=ee,ae;Vr=1,Gl(L,qn(j,L.current)),nr=null;return}$.flags&32768?(rr||G===1?L=!0:Lo||(sr&536870912)!==0?L=!1:(Si=L=!0,(G===2||G===9||G===3||G===6)&&(G=Wn.current,G!==null&&G.tag===13&&(G.flags|=16384))),Lh($,L)):cu($)}function cu(L){var $=L;do{if(($.flags&32768)!==0){Lh($,Si);return}L=$.return;var j=Kp($.alternate,$,ti);if(j!==null){nr=j;return}if($=$.sibling,$!==null){nr=$;return}nr=$=L}while($!==null);Vr===0&&(Vr=5)}function Lh(L,$){do{var j=Wp(L.alternate,L);if(j!==null){j.flags&=32767,nr=j;return}if(j=L.return,j!==null&&(j.flags|=32768,j.subtreeFlags=0,j.deletions=null),!$&&(L=L.sibling,L!==null)){nr=L;return}nr=L=j}while(L!==null);Vr=6,nr=null}function Ih(L,$,j,G,ee,ae,ve,Me,je){L.cancelPendingCommit=null;do fu();while(mn!==0);if((mr&6)!==0)throw Error(R(327));if($!==null){if($===L.current)throw Error(R(177));if(ae=$.lanes|$.childLanes,ae|=ys,dr(L,j,ae,ve,Me,je),L===Mr&&(nr=Mr=null,sr=0),qo=$,_i=L,ri=j,lf=ae,uf=ee,_h=G,($.subtreeFlags&10256)!==0||($.flags&10256)!==0?(L.callbackNode=null,L.callbackPriority=0,og(Ot,function(){return Fh(),null})):(L.callbackNode=null,L.callbackPriority=0),G=($.flags&13878)!==0,($.subtreeFlags&13878)!==0||G){G=ye.T,ye.T=null,ee=be.p,be.p=2,ve=mr,mr|=4;try{Yp(L,$,j)}finally{mr=ve,be.p=ee,ye.T=G}}mn=1,qh(),$h(),Bh()}}function qh(){if(mn===1){mn=0;var L=_i,$=qo,j=($.flags&13878)!==0;if(($.subtreeFlags&13878)!==0||j){j=ye.T,ye.T=null;var G=be.p;be.p=2;var ee=mr;mr|=4;try{vh($,L);var ae=Cf,ve=ls(L.containerInfo),Me=ae.focusedElem,je=ae.selectionRange;if(ve!==Me&&Me&&Me.ownerDocument&&ss(Me.ownerDocument.documentElement,Me)){if(je!==null&&us(Me)){var Je=je.start,st=je.end;if(st===void 0&&(st=Je),"selectionStart"in Me)Me.selectionStart=Je,Me.selectionEnd=Math.min(st,Me.value.length);else{var gt=Me.ownerDocument||document,rt=gt&&gt.defaultView||window;if(rt.getSelection){var it=rt.getSelection(),Lt=Me.textContent.length,Vt=Math.min(je.start,Lt),_r=je.end===void 0?Vt:Math.min(je.end,Lt);!it.extend&&Vt>_r&&(ve=_r,_r=Vt,Vt=ve);var Ge=wl(Me,Vt),He=wl(Me,_r);if(Ge&&He&&(it.rangeCount!==1||it.anchorNode!==Ge.node||it.anchorOffset!==Ge.offset||it.focusNode!==He.node||it.focusOffset!==He.offset)){var Xe=gt.createRange();Xe.setStart(Ge.node,Ge.offset),it.removeAllRanges(),Vt>_r?(it.addRange(Xe),it.extend(He.node,He.offset)):(Xe.setEnd(He.node,He.offset),it.addRange(Xe))}}}}for(gt=[],it=Me;it=it.parentNode;)it.nodeType===1&&gt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof Me.focus=="function"&&Me.focus(),Me=0;Me<gt.length;Me++){var pt=gt[Me];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}wu=!!wf,Cf=wf=null}finally{mr=ee,be.p=G,ye.T=j}}L.current=$,mn=2}}function $h(){if(mn===2){mn=0;var L=_i,$=qo,j=($.flags&8772)!==0;if(($.subtreeFlags&8772)!==0||j){j=ye.T,ye.T=null;var G=be.p;be.p=2;var ee=mr;mr|=4;try{dh(L,$.alternate,$)}finally{mr=ee,be.p=G,ye.T=j}}mn=3}}function Bh(){if(mn===4||mn===3){mn=0,At();var L=_i,$=qo,j=ri,G=_h;($.subtreeFlags&10256)!==0||($.flags&10256)!==0?mn=5:(mn=0,qo=_i=null,jh(L,L.pendingLanes));var ee=L.pendingLanes;if(ee===0&&(Ci=null),Fr(j),$=$.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(ke,$,void 0,($.current.flags&128)===128)}catch{}if(G!==null){$=ye.T,ee=be.p,be.p=2,ye.T=null;try{for(var ae=L.onRecoverableError,ve=0;ve<G.length;ve++){var Me=G[ve];ae(Me.value,{componentStack:Me.stack})}}finally{ye.T=$,be.p=ee}}(ri&3)!==0&&fu(),Ba(L),ee=L.pendingLanes,(j&261930)!==0&&(ee&42)!==0?L===cf?Hs++:(Hs=0,cf=L):Hs=0,Us(0)}}function jh(L,$){(L.pooledCacheLanes&=$)===0&&($=L.pooledCache,$!=null&&(L.pooledCache=null,Wt($)))}function fu(){return qh(),$h(),Bh(),Fh()}function Fh(){if(mn!==5)return!1;var L=_i,$=lf;lf=0;var j=Fr(ri),G=ye.T,ee=be.p;try{be.p=32>j?32:j,ye.T=null,j=uf,uf=null;var ae=_i,ve=ri;if(mn=0,qo=_i=null,ri=0,(mr&6)!==0)throw Error(R(331));var Me=mr;if(mr|=4,Sh(ae.current),xh(ae,ae.current,ve,j),mr=Me,Us(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(ke,ae)}catch{}return!0}finally{be.p=ee,ye.T=G,jh(L,$)}}function zh(L,$,j){$=qn(j,$),$=Fc(L.stateNode,$,2),L=yi(L,$,2),L!==null&&(Gt(L,2),Ba(L))}function Er(L,$,j){if(L.tag===3)zh(L,L,j);else for(;$!==null;){if($.tag===3){zh($,L,j);break}else if($.tag===1){var G=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof G.componentDidCatch=="function"&&(Ci===null||!Ci.has(G))){L=qn(j,L),j=Vd(2),G=yi($,j,2),G!==null&&(Hd(j,G,$,L),Gt(G,2),Ba(G));break}}$=$.return}}function hf(L,$,j){var G=L.pingCache;if(G===null){G=L.pingCache=new Zp;var ee=new Set;G.set($,ee)}else ee=G.get($),ee===void 0&&(ee=new Set,G.set($,ee));ee.has(j)||(af=!0,ee.add(j),L=ng.bind(null,L,$,j),$.then(L,L))}function ng(L,$,j){var G=L.pingCache;G!==null&&G.delete($),L.pingedLanes|=L.suspendedLanes&j,L.warmLanes&=~j,Mr===L&&(sr&j)===j&&(Vr===4||Vr===3&&(sr&62914560)===sr&&300>Ct()-iu?(mr&2)===0&&$o(L,0):of|=j,Io===sr&&(Io=0)),Ba(L)}function Vh(L,$){$===0&&($=jt()),L=Ha(L,$),L!==null&&(Gt(L,$),Ba(L))}function ag(L){var $=L.memoizedState,j=0;$!==null&&(j=$.retryLane),Vh(L,j)}function ig(L,$){var j=0;switch(L.tag){case 31:case 13:var G=L.stateNode,ee=L.memoizedState;ee!==null&&(j=ee.retryLane);break;case 19:G=L.stateNode;break;case 22:G=L.stateNode._retryCache;break;default:throw Error(R(314))}G!==null&&G.delete($),Vh(L,j)}function og(L,$){return ct(L,$)}var du=null,jo=null,pf=!1,hu=!1,gf=!1,Ti=0;function Ba(L){L!==jo&&L.next===null&&(jo===null?du=jo=L:jo=jo.next=L),hu=!0,pf||(pf=!0,lg())}function Us(L,$){if(!gf&&hu){gf=!0;do for(var j=!1,G=du;G!==null;){if(L!==0){var ee=G.pendingLanes;if(ee===0)var ae=0;else{var ve=G.suspendedLanes,Me=G.pingedLanes;ae=(1<<31-tt(42|L)+1)-1,ae&=ee&~(ve&~Me),ae=ae&201326741?ae&201326741|1:ae?ae|2:0}ae!==0&&(j=!0,Kh(G,ae))}else ae=sr,ae=Et(G,G===Mr?ae:0,G.cancelPendingCommit!==null||G.timeoutHandle!==-1),(ae&3)===0||bt(G,ae)||(j=!0,Kh(G,ae));G=G.next}while(j);gf=!1}}function sg(){Hh()}function Hh(){hu=pf=!1;var L=0;Ti!==0&&yg()&&(L=Ti);for(var $=Ct(),j=null,G=du;G!==null;){var ee=G.next,ae=Uh(G,$);ae===0?(G.next=null,j===null?du=ee:j.next=ee,ee===null&&(jo=j)):(j=G,(L!==0||(ae&3)!==0)&&(hu=!0)),G=ee}mn!==0&&mn!==5||Us(L),Ti!==0&&(Ti=0)}function Uh(L,$){for(var j=L.suspendedLanes,G=L.pingedLanes,ee=L.expirationTimes,ae=L.pendingLanes&-62914561;0<ae;){var ve=31-tt(ae),Me=1<<ve,je=ee[ve];je===-1?((Me&j)===0||(Me&G)!==0)&&(ee[ve]=Nt(Me,$)):je<=$&&(L.expiredLanes|=Me),ae&=~Me}if($=Mr,j=sr,j=Et(L,L===$?j:0,L.cancelPendingCommit!==null||L.timeoutHandle!==-1),G=L.callbackNode,j===0||L===$&&(br===2||br===9)||L.cancelPendingCommit!==null)return G!==null&&G!==null&&wt(G),L.callbackNode=null,L.callbackPriority=0;if((j&3)===0||bt(L,j)){if($=j&-j,$===L.callbackPriority)return $;switch(G!==null&&wt(G),Fr(j)){case 2:case 8:j=Xt;break;case 32:j=Ot;break;case 268435456:j=Tt;break;default:j=Ot}return G=Gh.bind(null,L),j=ct(j,G),L.callbackPriority=$,L.callbackNode=j,$}return G!==null&&G!==null&&wt(G),L.callbackPriority=2,L.callbackNode=null,2}function Gh(L,$){if(mn!==0&&mn!==5)return L.callbackNode=null,L.callbackPriority=0,null;var j=L.callbackNode;if(fu()&&L.callbackNode!==j)return null;var G=sr;return G=Et(L,L===Mr?G:0,L.cancelPendingCommit!==null||L.timeoutHandle!==-1),G===0?null:(Th(L,G,$),Uh(L,Ct()),L.callbackNode!=null&&L.callbackNode===j?Gh.bind(null,L):null)}function Kh(L,$){if(fu())return null;Th(L,$,!0)}function lg(){bg(function(){(mr&6)!==0?ct(Ut,sg):Hh()})}function mf(){if(Ti===0){var L=_o;L===0&&(L=Mt,Mt<<=1,(Mt&261888)===0&&(Mt=256)),Ti=L}return Ti}function Wh(L){return L==null||typeof L=="symbol"||typeof L=="boolean"?null:typeof L=="function"?L:ho(""+L)}function Yh(L,$){var j=$.ownerDocument.createElement("input");return j.name=$.name,j.value=$.value,L.id&&j.setAttribute("form",L.id),$.parentNode.insertBefore(j,$),L=new FormData(L),j.parentNode.removeChild(j),L}function ug(L,$,j,G,ee){if($==="submit"&&j&&j.stateNode===ee){var ae=Wh((ee[Ur]||null).action),ve=G.submitter;ve&&($=($=ve[Ur]||null)?Wh($.formAction):ve.getAttribute("formAction"),$!==null&&(ae=$,ve=null));var Me=new vo("action","action",null,G,ee);L.push({event:Me,listeners:[{instance:null,listener:function(){if(G.defaultPrevented){if(Ti!==0){var je=ve?Yh(ee,ve):new FormData(ee);Lc(j,{pending:!0,data:je,method:ee.method,action:ae},null,je)}}else typeof ae=="function"&&(Me.preventDefault(),je=ve?Yh(ee,ve):new FormData(ee),Lc(j,{pending:!0,data:je,method:ee.method,action:ae},ae,je))},currentTarget:ee}]})}}for(var vf=0;vf<Ui.length;vf++){var yf=Ui[vf],cg=yf.toLowerCase(),fg=yf[0].toUpperCase()+yf.slice(1);Gn(cg,"on"+fg)}Gn(_l,"onAnimationEnd"),Gn(hs,"onAnimationIteration"),Gn(Eo,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(ps,"onTransitionRun"),Gn(cc,"onTransitionStart"),Gn(gs,"onTransitionCancel"),Gn(Rl,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),An("onBeforeInput",["compositionend","keypress","textInput","paste"]),An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gs));function Xh(L,$){$=($&4)!==0;for(var j=0;j<L.length;j++){var G=L[j],ee=G.event;G=G.listeners;e:{var ae=void 0;if($)for(var ve=G.length-1;0<=ve;ve--){var Me=G[ve],je=Me.instance,Je=Me.currentTarget;if(Me=Me.listener,je!==ae&&ee.isPropagationStopped())break e;ae=Me,ee.currentTarget=Je;try{ae(ee)}catch(st){Gi(st)}ee.currentTarget=null,ae=je}else for(ve=0;ve<G.length;ve++){if(Me=G[ve],je=Me.instance,Je=Me.currentTarget,Me=Me.listener,je!==ae&&ee.isPropagationStopped())break e;ae=Me,ee.currentTarget=Je;try{ae(ee)}catch(st){Gi(st)}ee.currentTarget=null,ae=je}}}}function ar(L,$){var j=$[en];j===void 0&&(j=$[en]=new Set);var G=L+"__bubble";j.has(G)||(Qh($,L,2,!1),j.add(G))}function xf(L,$,j){var G=0;$&&(G|=4),Qh(j,L,G,$)}var pu="_reactListening"+Math.random().toString(36).slice(2);function bf(L){if(!L[pu]){L[pu]=!0,ca.forEach(function(j){j!=="selectionchange"&&(dg.has(j)||xf(j,!1,L),xf(j,!0,L))});var $=L.nodeType===9?L:L.ownerDocument;$===null||$[pu]||($[pu]=!0,xf("selectionchange",!1,$))}}function Qh(L,$,j,G){switch(Rp($)){case 2:var ee=jg;break;case 8:ee=Fg;break;default:ee=Lf}j=ee.bind(null,$,j,L),ee=void 0,!Zo||$!=="touchstart"&&$!=="touchmove"&&$!=="wheel"||(ee=!0),G?ee!==void 0?L.addEventListener($,j,{capture:!0,passive:ee}):L.addEventListener($,j,!0):ee!==void 0?L.addEventListener($,j,{passive:ee}):L.addEventListener($,j,!1)}function Ef(L,$,j,G,ee){var ae=G;if(($&1)===0&&($&2)===0&&G!==null)e:for(;;){if(G===null)return;var ve=G.tag;if(ve===3||ve===4){var Me=G.stateNode.containerInfo;if(Me===ee)break;if(ve===4)for(ve=G.return;ve!==null;){var je=ve.tag;if((je===3||je===4)&&ve.stateNode.containerInfo===ee)return;ve=ve.return}for(;Me!==null;){if(ve=Ta(Me),ve===null)return;if(je=ve.tag,je===5||je===6||je===26||je===27){G=ae=ve;continue e}Me=Me.parentNode}}G=G.return}ll(function(){var Je=ae,st=Xo(j),gt=[];e:{var rt=vs.get(L);if(rt!==void 0){var it=vo,Lt=L;switch(L){case"keypress":if(go(j)===0)break e;case"keydown":case"keyup":it=Wu;break;case"focusin":Lt="focus",it=as;break;case"focusout":Lt="blur",it=as;break;case"beforeblur":case"afterblur":it=as;break;case"click":if(j.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Qu;break;case _l:case hs:case Eo:it=Bu;break;case Rl:it=Ju;break;case"scroll":case"scrollend":it=Nu;break;case"wheel":it=tc;break;case"copy":case"cut":case"paste":it=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=hl;break;case"toggle":case"beforetoggle":it=nc}var Vt=($&4)!==0,_r=!Vt&&(L==="scroll"||L==="scrollend"),Ge=Vt?rt!==null?rt+"Capture":null:rt;Vt=[];for(var He=Je,Xe;He!==null;){var pt=He;if(Xe=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||Xe===null||Ge===null||(pt=Ii(He,Ge),pt!=null&&Vt.push(Ws(He,pt,Xe))),_r)break;He=He.return}0<Vt.length&&(rt=new it(rt,Lt,null,j,st),gt.push({event:rt,listeners:Vt}))}}if(($&7)===0){e:{if(rt=L==="mouseover"||L==="pointerover",it=L==="mouseout"||L==="pointerout",rt&&j!==Yo&&(Lt=j.relatedTarget||j.fromElement)&&(Ta(Lt)||Lt[wn]))break e;if((it||rt)&&(rt=st.window===st?st:(rt=st.ownerDocument)?rt.defaultView||rt.parentWindow:window,it?(Lt=j.relatedTarget||j.toElement,it=Je,Lt=Lt?Ta(Lt):null,Lt!==null&&(_r=A(Lt),Vt=Lt.tag,Lt!==_r||Vt!==5&&Vt!==27&&Vt!==6)&&(Lt=null)):(it=null,Lt=Je),it!==Lt)){if(Vt=fl,pt="onMouseLeave",Ge="onMouseEnter",He="mouse",(L==="pointerout"||L==="pointerover")&&(Vt=hl,pt="onPointerLeave",Ge="onPointerEnter",He="pointer"),_r=it==null?rt:ja(it),Xe=Lt==null?rt:ja(Lt),rt=new Vt(pt,He+"leave",it,j,st),rt.target=_r,rt.relatedTarget=Xe,pt=null,Ta(st)===Je&&(Vt=new Vt(Ge,He+"enter",Lt,j,st),Vt.target=Xe,Vt.relatedTarget=_r,pt=Vt),_r=pt,it&&Lt)t:{for(Vt=hg,Ge=it,He=Lt,Xe=0,pt=Ge;pt;pt=Vt(pt))Xe++;pt=0;for(var Ft=He;Ft;Ft=Vt(Ft))pt++;for(;0<Xe-pt;)Ge=Vt(Ge),Xe--;for(;0<pt-Xe;)He=Vt(He),pt--;for(;Xe--;){if(Ge===He||He!==null&&Ge===He.alternate){Vt=Ge;break t}Ge=Vt(Ge),He=Vt(He)}Vt=null}else Vt=null;it!==null&&Zh(gt,rt,it,Vt,!1),Lt!==null&&_r!==null&&Zh(gt,_r,Lt,Vt,!0)}}e:{if(rt=Je?ja(Je):window,it=rt.nodeName&&rt.nodeName.toLowerCase(),it==="select"||it==="input"&&rt.type==="file")var hr=Oa;else if(Nn(rt))if(zi)hr=sc;else{hr=xo;var It=El}else it=rt.nodeName,!it||it.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?Je&&Wo(Je.elementType)&&(hr=Oa):hr=ut;if(hr&&(hr=hr(L,Je))){Fi(gt,hr,j,st);break e}It&&It(L,rt,Je),L==="focusout"&&Je&&rt.type==="number"&&Je.memoizedProps.value!=null&&Ko(rt,"number",rt.value)}switch(It=Je?ja(Je):window,L){case"focusin":(Nn(It)||It.contentEditable==="true")&&(za=It,bo=Je,Hi=null);break;case"focusout":Hi=bo=za=null;break;case"mousedown":cs=!0;break;case"contextmenu":case"mouseup":case"dragend":cs=!1,fs(gt,j,st);break;case"selectionchange":if(uc)break;case"keydown":case"keyup":fs(gt,j,st)}var Zt;if(os)e:{switch(L){case"compositionstart":var ur="onCompositionStart";break e;case"compositionend":ur="onCompositionEnd";break e;case"compositionupdate":ur="onCompositionUpdate";break e}ur=void 0}else li?vl(L,j)&&(ur="onCompositionEnd"):L==="keydown"&&j.keyCode===229&&(ur="onCompositionStart");ur&&(pl&&j.locale!=="ko"&&(li||ur!=="onCompositionStart"?ur==="onCompositionEnd"&&li&&(Zt=ul()):(Ma=st,Jo="value"in Ma?Ma.value:Ma.textContent,li=!0)),It=gu(Je,ur),0<It.length&&(ur=new dl(ur,L,null,j,st),gt.push({event:ur,listeners:It}),Zt?ur.data=Zt:(Zt=yl(j),Zt!==null&&(ur.data=Zt)))),(Zt=ic?fe(L,j):Dt(L,j))&&(ur=gu(Je,"onBeforeInput"),0<ur.length&&(It=new dl("onBeforeInput","beforeinput",null,j,st),gt.push({event:It,listeners:ur}),It.data=Zt)),ug(gt,L,Je,j,st)}Xh(gt,$)})}function Ws(L,$,j){return{instance:L,listener:$,currentTarget:j}}function gu(L,$){for(var j=$+"Capture",G=[];L!==null;){var ee=L,ae=ee.stateNode;if(ee=ee.tag,ee!==5&&ee!==26&&ee!==27||ae===null||(ee=Ii(L,j),ee!=null&&G.unshift(Ws(L,ee,ae)),ee=Ii(L,$),ee!=null&&G.push(Ws(L,ee,ae))),L.tag===3)return G;L=L.return}return[]}function hg(L){if(L===null)return null;do L=L.return;while(L&&L.tag!==5&&L.tag!==27);return L||null}function Zh(L,$,j,G,ee){for(var ae=$._reactName,ve=[];j!==null&&j!==G;){var Me=j,je=Me.alternate,Je=Me.stateNode;if(Me=Me.tag,je!==null&&je===G)break;Me!==5&&Me!==26&&Me!==27||Je===null||(je=Je,ee?(Je=Ii(j,ae),Je!=null&&ve.unshift(Ws(j,Je,je))):ee||(Je=Ii(j,ae),Je!=null&&ve.push(Ws(j,Je,je)))),j=j.return}ve.length!==0&&L.push({event:$,listeners:ve})}var pg=/\r\n?/g,gg=/\u0000|\uFFFD/g;function Jh(L){return(typeof L=="string"?L:""+L).replace(pg,`
`).replace(gg,"")}function ep(L,$){return $=Jh($),Jh(L)===$}function Cr(L,$,j,G,ee,ae){switch(j){case"children":typeof G=="string"?$==="body"||$==="textarea"&&G===""||oi(L,G):(typeof G=="number"||typeof G=="bigint")&&$!=="body"&&oi(L,""+G);break;case"className":fa(L,"class",G);break;case"tabIndex":fa(L,"tabindex",G);break;case"dir":case"role":case"viewBox":case"width":case"height":fa(L,j,G);break;case"style":ol(L,G,ae);break;case"data":if($!=="object"){fa(L,"data",G);break}case"src":case"href":if(G===""&&($!=="a"||j!=="href")){L.removeAttribute(j);break}if(G==null||typeof G=="function"||typeof G=="symbol"||typeof G=="boolean"){L.removeAttribute(j);break}G=ho(""+G),L.setAttribute(j,G);break;case"action":case"formAction":if(typeof G=="function"){L.setAttribute(j,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ae=="function"&&(j==="formAction"?($!=="input"&&Cr(L,$,"name",ee.name,ee,null),Cr(L,$,"formEncType",ee.formEncType,ee,null),Cr(L,$,"formMethod",ee.formMethod,ee,null),Cr(L,$,"formTarget",ee.formTarget,ee,null)):(Cr(L,$,"encType",ee.encType,ee,null),Cr(L,$,"method",ee.method,ee,null),Cr(L,$,"target",ee.target,ee,null)));if(G==null||typeof G=="symbol"||typeof G=="boolean"){L.removeAttribute(j);break}G=ho(""+G),L.setAttribute(j,G);break;case"onClick":G!=null&&(L.onclick=da);break;case"onScroll":G!=null&&ar("scroll",L);break;case"onScrollEnd":G!=null&&ar("scrollend",L);break;case"dangerouslySetInnerHTML":if(G!=null){if(typeof G!="object"||!("__html"in G))throw Error(R(61));if(j=G.__html,j!=null){if(ee.children!=null)throw Error(R(60));L.innerHTML=j}}break;case"multiple":L.multiple=G&&typeof G!="function"&&typeof G!="symbol";break;case"muted":L.muted=G&&typeof G!="function"&&typeof G!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(G==null||typeof G=="function"||typeof G=="boolean"||typeof G=="symbol"){L.removeAttribute("xlink:href");break}j=ho(""+G),L.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":G!=null&&typeof G!="function"&&typeof G!="symbol"?L.setAttribute(j,""+G):L.removeAttribute(j);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":G&&typeof G!="function"&&typeof G!="symbol"?L.setAttribute(j,""):L.removeAttribute(j);break;case"capture":case"download":G===!0?L.setAttribute(j,""):G!==!1&&G!=null&&typeof G!="function"&&typeof G!="symbol"?L.setAttribute(j,G):L.removeAttribute(j);break;case"cols":case"rows":case"size":case"span":G!=null&&typeof G!="function"&&typeof G!="symbol"&&!isNaN(G)&&1<=G?L.setAttribute(j,G):L.removeAttribute(j);break;case"rowSpan":case"start":G==null||typeof G=="function"||typeof G=="symbol"||isNaN(G)?L.removeAttribute(j):L.setAttribute(j,G);break;case"popover":ar("beforetoggle",L),ar("toggle",L),yn(L,"popover",G);break;case"xlinkActuate":kn(L,"http://www.w3.org/1999/xlink","xlink:actuate",G);break;case"xlinkArcrole":kn(L,"http://www.w3.org/1999/xlink","xlink:arcrole",G);break;case"xlinkRole":kn(L,"http://www.w3.org/1999/xlink","xlink:role",G);break;case"xlinkShow":kn(L,"http://www.w3.org/1999/xlink","xlink:show",G);break;case"xlinkTitle":kn(L,"http://www.w3.org/1999/xlink","xlink:title",G);break;case"xlinkType":kn(L,"http://www.w3.org/1999/xlink","xlink:type",G);break;case"xmlBase":kn(L,"http://www.w3.org/XML/1998/namespace","xml:base",G);break;case"xmlLang":kn(L,"http://www.w3.org/XML/1998/namespace","xml:lang",G);break;case"xmlSpace":kn(L,"http://www.w3.org/XML/1998/namespace","xml:space",G);break;case"is":yn(L,"is",G);break;case"innerText":case"textContent":break;default:(!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(j=Du.get(j)||j,yn(L,j,G))}}function Sf(L,$,j,G,ee,ae){switch(j){case"style":ol(L,G,ae);break;case"dangerouslySetInnerHTML":if(G!=null){if(typeof G!="object"||!("__html"in G))throw Error(R(61));if(j=G.__html,j!=null){if(ee.children!=null)throw Error(R(60));L.innerHTML=j}}break;case"children":typeof G=="string"?oi(L,G):(typeof G=="number"||typeof G=="bigint")&&oi(L,""+G);break;case"onScroll":G!=null&&ar("scroll",L);break;case"onScrollEnd":G!=null&&ar("scrollend",L);break;case"onClick":G!=null&&(L.onclick=da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oo.hasOwnProperty(j))e:{if(j[0]==="o"&&j[1]==="n"&&(ee=j.endsWith("Capture"),$=j.slice(2,ee?j.length-7:void 0),ae=L[Ur]||null,ae=ae!=null?ae[j]:null,typeof ae=="function"&&L.removeEventListener($,ae,ee),typeof G=="function")){typeof ae!="function"&&ae!==null&&(j in L?L[j]=null:L.hasAttribute(j)&&L.removeAttribute(j)),L.addEventListener($,G,ee);break e}j in L?L[j]=G:G===!0?L.setAttribute(j,""):yn(L,j,G)}}}function Sn(L,$,j){switch($){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ar("error",L),ar("load",L);var G=!1,ee=!1,ae;for(ae in j)if(j.hasOwnProperty(ae)){var ve=j[ae];if(ve!=null)switch(ae){case"src":G=!0;break;case"srcSet":ee=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(R(137,$));default:Cr(L,$,ae,ve,j,null)}}ee&&Cr(L,$,"srcSet",j.srcSet,j,null),G&&Cr(L,$,"src",j.src,j,null);return;case"input":ar("invalid",L);var Me=ae=ve=ee=null,je=null,Je=null;for(G in j)if(j.hasOwnProperty(G)){var st=j[G];if(st!=null)switch(G){case"name":ee=st;break;case"type":ve=st;break;case"checked":je=st;break;case"defaultChecked":Je=st;break;case"value":ae=st;break;case"defaultValue":Me=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(R(137,$));break;default:Cr(L,$,G,st,j,null)}}fo(L,ae,Me,je,Je,ve,ee,!1);return;case"select":ar("invalid",L),G=ve=ae=null;for(ee in j)if(j.hasOwnProperty(ee)&&(Me=j[ee],Me!=null))switch(ee){case"value":ae=Me;break;case"defaultValue":ve=Me;break;case"multiple":G=Me;default:Cr(L,$,ee,Me,j,null)}$=ae,j=ve,L.multiple=!!G,$!=null?ii(L,!!G,$,!1):j!=null&&ii(L,!!G,j,!0);return;case"textarea":ar("invalid",L),ae=ee=G=null;for(ve in j)if(j.hasOwnProperty(ve)&&(Me=j[ve],Me!=null))switch(ve){case"value":G=Me;break;case"defaultValue":ee=Me;break;case"children":ae=Me;break;case"dangerouslySetInnerHTML":if(Me!=null)throw Error(R(91));break;default:Cr(L,$,ve,Me,j,null)}al(L,G,ee,ae);return;case"option":for(je in j)if(j.hasOwnProperty(je)&&(G=j[je],G!=null))switch(je){case"selected":L.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Cr(L,$,je,G,j,null)}return;case"dialog":ar("beforetoggle",L),ar("toggle",L),ar("cancel",L),ar("close",L);break;case"iframe":case"object":ar("load",L);break;case"video":case"audio":for(G=0;G<Gs.length;G++)ar(Gs[G],L);break;case"image":ar("error",L),ar("load",L);break;case"details":ar("toggle",L);break;case"embed":case"source":case"link":ar("error",L),ar("load",L);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in j)if(j.hasOwnProperty(Je)&&(G=j[Je],G!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(R(137,$));default:Cr(L,$,Je,G,j,null)}return;default:if(Wo($)){for(st in j)j.hasOwnProperty(st)&&(G=j[st],G!==void 0&&Sf(L,$,st,G,j,void 0));return}}for(Me in j)j.hasOwnProperty(Me)&&(G=j[Me],G!=null&&Cr(L,$,Me,G,j,null))}function mg(L,$,j,G){switch($){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ee=null,ae=null,ve=null,Me=null,je=null,Je=null,st=null;for(it in j){var gt=j[it];if(j.hasOwnProperty(it)&&gt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":je=gt;default:G.hasOwnProperty(it)||Cr(L,$,it,null,G,gt)}}for(var rt in G){var it=G[rt];if(gt=j[rt],G.hasOwnProperty(rt)&&(it!=null||gt!=null))switch(rt){case"type":ae=it;break;case"name":ee=it;break;case"checked":Je=it;break;case"defaultChecked":st=it;break;case"value":ve=it;break;case"defaultValue":Me=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(R(137,$));break;default:it!==gt&&Cr(L,$,rt,it,G,gt)}}Go(L,ve,Me,je,Je,st,ae,ee);return;case"select":it=ve=Me=rt=null;for(ae in j)if(je=j[ae],j.hasOwnProperty(ae)&&je!=null)switch(ae){case"value":break;case"multiple":it=je;default:G.hasOwnProperty(ae)||Cr(L,$,ae,null,G,je)}for(ee in G)if(ae=G[ee],je=j[ee],G.hasOwnProperty(ee)&&(ae!=null||je!=null))switch(ee){case"value":rt=ae;break;case"defaultValue":Me=ae;break;case"multiple":ve=ae;default:ae!==je&&Cr(L,$,ee,ae,G,je)}$=Me,j=ve,G=it,rt!=null?ii(L,!!j,rt,!1):!!G!=!!j&&($!=null?ii(L,!!j,$,!0):ii(L,!!j,j?[]:"",!1));return;case"textarea":it=rt=null;for(Me in j)if(ee=j[Me],j.hasOwnProperty(Me)&&ee!=null&&!G.hasOwnProperty(Me))switch(Me){case"value":break;case"children":break;default:Cr(L,$,Me,null,G,ee)}for(ve in G)if(ee=G[ve],ae=j[ve],G.hasOwnProperty(ve)&&(ee!=null||ae!=null))switch(ve){case"value":rt=ee;break;case"defaultValue":it=ee;break;case"children":break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(R(91));break;default:ee!==ae&&Cr(L,$,ve,ee,G,ae)}nl(L,rt,it);return;case"option":for(var Lt in j)if(rt=j[Lt],j.hasOwnProperty(Lt)&&rt!=null&&!G.hasOwnProperty(Lt))switch(Lt){case"selected":L.selected=!1;break;default:Cr(L,$,Lt,null,G,rt)}for(je in G)if(rt=G[je],it=j[je],G.hasOwnProperty(je)&&rt!==it&&(rt!=null||it!=null))switch(je){case"selected":L.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Cr(L,$,je,rt,G,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in j)rt=j[Vt],j.hasOwnProperty(Vt)&&rt!=null&&!G.hasOwnProperty(Vt)&&Cr(L,$,Vt,null,G,rt);for(Je in G)if(rt=G[Je],it=j[Je],G.hasOwnProperty(Je)&&rt!==it&&(rt!=null||it!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(R(137,$));break;default:Cr(L,$,Je,rt,G,it)}return;default:if(Wo($)){for(var _r in j)rt=j[_r],j.hasOwnProperty(_r)&&rt!==void 0&&!G.hasOwnProperty(_r)&&Sf(L,$,_r,void 0,G,rt);for(st in G)rt=G[st],it=j[st],!G.hasOwnProperty(st)||rt===it||rt===void 0&&it===void 0||Sf(L,$,st,rt,G,it);return}}for(var Ge in j)rt=j[Ge],j.hasOwnProperty(Ge)&&rt!=null&&!G.hasOwnProperty(Ge)&&Cr(L,$,Ge,null,G,rt);for(gt in G)rt=G[gt],it=j[gt],!G.hasOwnProperty(gt)||rt===it||rt==null&&it==null||Cr(L,$,gt,rt,G,it)}function tp(L){switch(L){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vg(){if(typeof performance.getEntriesByType=="function"){for(var L=0,$=0,j=performance.getEntriesByType("resource"),G=0;G<j.length;G++){var ee=j[G],ae=ee.transferSize,ve=ee.initiatorType,Me=ee.duration;if(ae&&Me&&tp(ve)){for(ve=0,Me=ee.responseEnd,G+=1;G<j.length;G++){var je=j[G],Je=je.startTime;if(Je>Me)break;var st=je.transferSize,gt=je.initiatorType;st&&tp(gt)&&(je=je.responseEnd,ve+=st*(je<Me?1:(Me-Je)/(je-Je)))}if(--G,$+=8*(ae+ve)/(ee.duration/1e3),L++,10<L)break}}if(0<L)return $/L/1e6}return navigator.connection&&(L=navigator.connection.downlink,typeof L=="number")?L:5}var wf=null,Cf=null;function mu(L){return L.nodeType===9?L:L.ownerDocument}function rp(L){switch(L){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function np(L,$){if(L===0)switch($){case"svg":return 1;case"math":return 2;default:return 0}return L===1&&$==="foreignObject"?0:L}function _f(L,$){return L==="textarea"||L==="noscript"||typeof $.children=="string"||typeof $.children=="number"||typeof $.children=="bigint"||typeof $.dangerouslySetInnerHTML=="object"&&$.dangerouslySetInnerHTML!==null&&$.dangerouslySetInnerHTML.__html!=null}var Rf=null;function yg(){var L=window.event;return L&&L.type==="popstate"?L===Rf?!1:(Rf=L,!0):(Rf=null,!1)}var ap=typeof setTimeout=="function"?setTimeout:void 0,xg=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,bg=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(L){return ip.resolve(null).then(L).catch(Eg)}:ap;function Eg(L){setTimeout(function(){throw L})}function Ai(L){return L==="head"}function op(L,$){var j=$,G=0;do{var ee=j.nextSibling;if(L.removeChild(j),ee&&ee.nodeType===8)if(j=ee.data,j==="/$"||j==="/&"){if(G===0){L.removeChild(ee),Ho($);return}G--}else if(j==="$"||j==="$?"||j==="$~"||j==="$!"||j==="&")G++;else if(j==="html")Ys(L.ownerDocument.documentElement);else if(j==="head"){j=L.ownerDocument.head,Ys(j);for(var ae=j.firstChild;ae;){var ve=ae.nextSibling,Me=ae.nodeName;ae[on]||Me==="SCRIPT"||Me==="STYLE"||Me==="LINK"&&ae.rel.toLowerCase()==="stylesheet"||j.removeChild(ae),ae=ve}}else j==="body"&&Ys(L.ownerDocument.body);j=ee}while(j);Ho($)}function sp(L,$){var j=L;L=0;do{var G=j.nextSibling;if(j.nodeType===1?$?(j._stashedDisplay=j.style.display,j.style.display="none"):(j.style.display=j._stashedDisplay||"",j.getAttribute("style")===""&&j.removeAttribute("style")):j.nodeType===3&&($?(j._stashedText=j.nodeValue,j.nodeValue=""):j.nodeValue=j._stashedText||""),G&&G.nodeType===8)if(j=G.data,j==="/$"){if(L===0)break;L--}else j!=="$"&&j!=="$?"&&j!=="$~"&&j!=="$!"||L++;j=G}while(j)}function Tf(L){var $=L.firstChild;for($&&$.nodeType===10&&($=$.nextSibling);$;){var j=$;switch($=$.nextSibling,j.nodeName){case"HTML":case"HEAD":case"BODY":Tf(j),ai(j);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(j.rel.toLowerCase()==="stylesheet")continue}L.removeChild(j)}}function Sg(L,$,j,G){for(;L.nodeType===1;){var ee=j;if(L.nodeName.toLowerCase()!==$.toLowerCase()){if(!G&&(L.nodeName!=="INPUT"||L.type!=="hidden"))break}else if(G){if(!L[on])switch($){case"meta":if(!L.hasAttribute("itemprop"))break;return L;case"link":if(ae=L.getAttribute("rel"),ae==="stylesheet"&&L.hasAttribute("data-precedence"))break;if(ae!==ee.rel||L.getAttribute("href")!==(ee.href==null||ee.href===""?null:ee.href)||L.getAttribute("crossorigin")!==(ee.crossOrigin==null?null:ee.crossOrigin)||L.getAttribute("title")!==(ee.title==null?null:ee.title))break;return L;case"style":if(L.hasAttribute("data-precedence"))break;return L;case"script":if(ae=L.getAttribute("src"),(ae!==(ee.src==null?null:ee.src)||L.getAttribute("type")!==(ee.type==null?null:ee.type)||L.getAttribute("crossorigin")!==(ee.crossOrigin==null?null:ee.crossOrigin))&&ae&&L.hasAttribute("async")&&!L.hasAttribute("itemprop"))break;return L;default:return L}}else if($==="input"&&L.type==="hidden"){var ae=ee.name==null?null:""+ee.name;if(ee.type==="hidden"&&L.getAttribute("name")===ae)return L}else return L;if(L=la(L.nextSibling),L===null)break}return null}function wg(L,$,j){if($==="")return null;for(;L.nodeType!==3;)if((L.nodeType!==1||L.nodeName!=="INPUT"||L.type!=="hidden")&&!j||(L=la(L.nextSibling),L===null))return null;return L}function lp(L,$){for(;L.nodeType!==8;)if((L.nodeType!==1||L.nodeName!=="INPUT"||L.type!=="hidden")&&!$||(L=la(L.nextSibling),L===null))return null;return L}function Af(L){return L.data==="$?"||L.data==="$~"}function kf(L){return L.data==="$!"||L.data==="$?"&&L.ownerDocument.readyState!=="loading"}function Cg(L,$){var j=L.ownerDocument;if(L.data==="$~")L._reactRetry=$;else if(L.data!=="$?"||j.readyState!=="loading")$();else{var G=function(){$(),j.removeEventListener("DOMContentLoaded",G)};j.addEventListener("DOMContentLoaded",G),L._reactRetry=G}}function la(L){for(;L!=null;L=L.nextSibling){var $=L.nodeType;if($===1||$===3)break;if($===8){if($=L.data,$==="$"||$==="$!"||$==="$?"||$==="$~"||$==="&"||$==="F!"||$==="F")break;if($==="/$"||$==="/&")return null}}return L}var Mf=null;function up(L){L=L.nextSibling;for(var $=0;L;){if(L.nodeType===8){var j=L.data;if(j==="/$"||j==="/&"){if($===0)return la(L.nextSibling);$--}else j!=="$"&&j!=="$!"&&j!=="$?"&&j!=="$~"&&j!=="&"||$++}L=L.nextSibling}return null}function cp(L){L=L.previousSibling;for(var $=0;L;){if(L.nodeType===8){var j=L.data;if(j==="$"||j==="$!"||j==="$?"||j==="$~"||j==="&"){if($===0)return L;$--}else j!=="/$"&&j!=="/&"||$++}L=L.previousSibling}return null}function fp(L,$,j){switch($=mu(j),L){case"html":if(L=$.documentElement,!L)throw Error(R(452));return L;case"head":if(L=$.head,!L)throw Error(R(453));return L;case"body":if(L=$.body,!L)throw Error(R(454));return L;default:throw Error(R(451))}}function Ys(L){for(var $=L.attributes;$.length;)L.removeAttributeNode($[0]);ai(L)}var ua=new Map,dp=new Set;function vu(L){return typeof L.getRootNode=="function"?L.getRootNode():L.nodeType===9?L:L.ownerDocument}var ni=be.d;be.d={f:_g,r:Rg,D:Tg,C:Ag,L:kg,m:Mg,X:Dg,S:Og,M:Pg};function _g(){var L=ni.f(),$=lu();return L||$}function Rg(L){var $=Aa(L);$!==null&&$.tag===5&&$.type==="form"?kd($):ni.r(L)}var Fo=typeof document>"u"?null:document;function hp(L,$,j){var G=Fo;if(G&&typeof $=="string"&&$){var ee=Pn($);ee='link[rel="'+L+'"][href="'+ee+'"]',typeof j=="string"&&(ee+='[crossorigin="'+j+'"]'),dp.has(ee)||(dp.add(ee),L={rel:L,crossOrigin:j,href:$},G.querySelector(ee)===null&&($=G.createElement("link"),Sn($,"link",L),$r($),G.head.appendChild($)))}}function Tg(L){ni.D(L),hp("dns-prefetch",L,null)}function Ag(L,$){ni.C(L,$),hp("preconnect",L,$)}function kg(L,$,j){ni.L(L,$,j);var G=Fo;if(G&&L&&$){var ee='link[rel="preload"][as="'+Pn($)+'"]';$==="image"&&j&&j.imageSrcSet?(ee+='[imagesrcset="'+Pn(j.imageSrcSet)+'"]',typeof j.imageSizes=="string"&&(ee+='[imagesizes="'+Pn(j.imageSizes)+'"]')):ee+='[href="'+Pn(L)+'"]';var ae=ee;switch($){case"style":ae=zo(L);break;case"script":ae=Vo(L)}ua.has(ae)||(L=q({rel:"preload",href:$==="image"&&j&&j.imageSrcSet?void 0:L,as:$},j),ua.set(ae,L),G.querySelector(ee)!==null||$==="style"&&G.querySelector(Qs(ae))||$==="script"&&G.querySelector(Zs(ae))||($=G.createElement("link"),Sn($,"link",L),$r($),G.head.appendChild($)))}}function Mg(L,$){ni.m(L,$);var j=Fo;if(j&&L){var G=$&&typeof $.as=="string"?$.as:"script",ee='link[rel="modulepreload"][as="'+Pn(G)+'"][href="'+Pn(L)+'"]',ae=ee;switch(G){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ae=Vo(L)}if(!ua.has(ae)&&(L=q({rel:"modulepreload",href:L},$),ua.set(ae,L),j.querySelector(ee)===null)){switch(G){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(j.querySelector(Zs(ae)))return}G=j.createElement("link"),Sn(G,"link",L),$r(G),j.head.appendChild(G)}}}function Og(L,$,j){ni.S(L,$,j);var G=Fo;if(G&&L){var ee=ka(G).hoistableStyles,ae=zo(L);$=$||"default";var ve=ee.get(ae);if(!ve){var Me={loading:0,preload:null};if(ve=G.querySelector(Qs(ae)))Me.loading=5;else{L=q({rel:"stylesheet",href:L,"data-precedence":$},j),(j=ua.get(ae))&&Of(L,j);var je=ve=G.createElement("link");$r(je),Sn(je,"link",L),je._p=new Promise(function(Je,st){je.onload=Je,je.onerror=st}),je.addEventListener("load",function(){Me.loading|=1}),je.addEventListener("error",function(){Me.loading|=2}),Me.loading|=4,yu(ve,$,G)}ve={type:"stylesheet",instance:ve,count:1,state:Me},ee.set(ae,ve)}}}function Dg(L,$){ni.X(L,$);var j=Fo;if(j&&L){var G=ka(j).hoistableScripts,ee=Vo(L),ae=G.get(ee);ae||(ae=j.querySelector(Zs(ee)),ae||(L=q({src:L,async:!0},$),($=ua.get(ee))&&Df(L,$),ae=j.createElement("script"),$r(ae),Sn(ae,"link",L),j.head.appendChild(ae)),ae={type:"script",instance:ae,count:1,state:null},G.set(ee,ae))}}function Pg(L,$){ni.M(L,$);var j=Fo;if(j&&L){var G=ka(j).hoistableScripts,ee=Vo(L),ae=G.get(ee);ae||(ae=j.querySelector(Zs(ee)),ae||(L=q({src:L,async:!0,type:"module"},$),($=ua.get(ee))&&Df(L,$),ae=j.createElement("script"),$r(ae),Sn(ae,"link",L),j.head.appendChild(ae)),ae={type:"script",instance:ae,count:1,state:null},G.set(ee,ae))}}function pp(L,$,j,G){var ee=(ee=Ne.current)?vu(ee):null;if(!ee)throw Error(R(446));switch(L){case"meta":case"title":return null;case"style":return typeof j.precedence=="string"&&typeof j.href=="string"?($=zo(j.href),j=ka(ee).hoistableStyles,G=j.get($),G||(G={type:"style",instance:null,count:0,state:null},j.set($,G)),G):{type:"void",instance:null,count:0,state:null};case"link":if(j.rel==="stylesheet"&&typeof j.href=="string"&&typeof j.precedence=="string"){L=zo(j.href);var ae=ka(ee).hoistableStyles,ve=ae.get(L);if(ve||(ee=ee.ownerDocument||ee,ve={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ae.set(L,ve),(ae=ee.querySelector(Qs(L)))&&!ae._p&&(ve.instance=ae,ve.state.loading=5),ua.has(L)||(j={rel:"preload",as:"style",href:j.href,crossOrigin:j.crossOrigin,integrity:j.integrity,media:j.media,hrefLang:j.hrefLang,referrerPolicy:j.referrerPolicy},ua.set(L,j),ae||Ng(ee,L,j,ve.state))),$&&G===null)throw Error(R(528,""));return ve}if($&&G!==null)throw Error(R(529,""));return null;case"script":return $=j.async,j=j.src,typeof j=="string"&&$&&typeof $!="function"&&typeof $!="symbol"?($=Vo(j),j=ka(ee).hoistableScripts,G=j.get($),G||(G={type:"script",instance:null,count:0,state:null},j.set($,G)),G):{type:"void",instance:null,count:0,state:null};default:throw Error(R(444,L))}}function zo(L){return'href="'+Pn(L)+'"'}function Qs(L){return'link[rel="stylesheet"]['+L+"]"}function gp(L){return q({},L,{"data-precedence":L.precedence,precedence:null})}function Ng(L,$,j,G){L.querySelector('link[rel="preload"][as="style"]['+$+"]")?G.loading=1:($=L.createElement("link"),G.preload=$,$.addEventListener("load",function(){return G.loading|=1}),$.addEventListener("error",function(){return G.loading|=2}),Sn($,"link",j),$r($),L.head.appendChild($))}function Vo(L){return'[src="'+Pn(L)+'"]'}function Zs(L){return"script[async]"+L}function mp(L,$,j){if($.count++,$.instance===null)switch($.type){case"style":var G=L.querySelector('style[data-href~="'+Pn(j.href)+'"]');if(G)return $.instance=G,$r(G),G;var ee=q({},j,{"data-href":j.href,"data-precedence":j.precedence,href:null,precedence:null});return G=(L.ownerDocument||L).createElement("style"),$r(G),Sn(G,"style",ee),yu(G,j.precedence,L),$.instance=G;case"stylesheet":ee=zo(j.href);var ae=L.querySelector(Qs(ee));if(ae)return $.state.loading|=4,$.instance=ae,$r(ae),ae;G=gp(j),(ee=ua.get(ee))&&Of(G,ee),ae=(L.ownerDocument||L).createElement("link"),$r(ae);var ve=ae;return ve._p=new Promise(function(Me,je){ve.onload=Me,ve.onerror=je}),Sn(ae,"link",G),$.state.loading|=4,yu(ae,j.precedence,L),$.instance=ae;case"script":return ae=Vo(j.src),(ee=L.querySelector(Zs(ae)))?($.instance=ee,$r(ee),ee):(G=j,(ee=ua.get(ae))&&(G=q({},j),Df(G,ee)),L=L.ownerDocument||L,ee=L.createElement("script"),$r(ee),Sn(ee,"link",G),L.head.appendChild(ee),$.instance=ee);case"void":return null;default:throw Error(R(443,$.type))}else $.type==="stylesheet"&&($.state.loading&4)===0&&(G=$.instance,$.state.loading|=4,yu(G,j.precedence,L));return $.instance}function yu(L,$,j){for(var G=j.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ee=G.length?G[G.length-1]:null,ae=ee,ve=0;ve<G.length;ve++){var Me=G[ve];if(Me.dataset.precedence===$)ae=Me;else if(ae!==ee)break}ae?ae.parentNode.insertBefore(L,ae.nextSibling):($=j.nodeType===9?j.head:j,$.insertBefore(L,$.firstChild))}function Of(L,$){L.crossOrigin==null&&(L.crossOrigin=$.crossOrigin),L.referrerPolicy==null&&(L.referrerPolicy=$.referrerPolicy),L.title==null&&(L.title=$.title)}function Df(L,$){L.crossOrigin==null&&(L.crossOrigin=$.crossOrigin),L.referrerPolicy==null&&(L.referrerPolicy=$.referrerPolicy),L.integrity==null&&(L.integrity=$.integrity)}var xu=null;function vp(L,$,j){if(xu===null){var G=new Map,ee=xu=new Map;ee.set(j,G)}else ee=xu,G=ee.get(j),G||(G=new Map,ee.set(j,G));if(G.has(L))return G;for(G.set(L,null),j=j.getElementsByTagName(L),ee=0;ee<j.length;ee++){var ae=j[ee];if(!(ae[on]||ae[Dr]||L==="link"&&ae.getAttribute("rel")==="stylesheet")&&ae.namespaceURI!=="http://www.w3.org/2000/svg"){var ve=ae.getAttribute($)||"";ve=L+ve;var Me=G.get(ve);Me?Me.push(ae):G.set(ve,[ae])}}return G}function yp(L,$,j){L=L.ownerDocument||L,L.head.insertBefore(j,$==="title"?L.querySelector("head > title"):null)}function Lg(L,$,j){if(j===1||$.itemProp!=null)return!1;switch(L){case"meta":case"title":return!0;case"style":if(typeof $.precedence!="string"||typeof $.href!="string"||$.href==="")break;return!0;case"link":if(typeof $.rel!="string"||typeof $.href!="string"||$.href===""||$.onLoad||$.onError)break;switch($.rel){case"stylesheet":return L=$.disabled,typeof $.precedence=="string"&&L==null;default:return!0}case"script":if($.async&&typeof $.async!="function"&&typeof $.async!="symbol"&&!$.onLoad&&!$.onError&&$.src&&typeof $.src=="string")return!0}return!1}function xp(L){return!(L.type==="stylesheet"&&(L.state.loading&3)===0)}function Ig(L,$,j,G){if(j.type==="stylesheet"&&(typeof G.media!="string"||matchMedia(G.media).matches!==!1)&&(j.state.loading&4)===0){if(j.instance===null){var ee=zo(G.href),ae=$.querySelector(Qs(ee));if(ae){$=ae._p,$!==null&&typeof $=="object"&&typeof $.then=="function"&&(L.count++,L=bu.bind(L),$.then(L,L)),j.state.loading|=4,j.instance=ae,$r(ae);return}ae=$.ownerDocument||$,G=gp(G),(ee=ua.get(ee))&&Of(G,ee),ae=ae.createElement("link"),$r(ae);var ve=ae;ve._p=new Promise(function(Me,je){ve.onload=Me,ve.onerror=je}),Sn(ae,"link",G),j.instance=ae}L.stylesheets===null&&(L.stylesheets=new Map),L.stylesheets.set(j,$),($=j.state.preload)&&(j.state.loading&3)===0&&(L.count++,j=bu.bind(L),$.addEventListener("load",j),$.addEventListener("error",j))}}var Pf=0;function qg(L,$){return L.stylesheets&&L.count===0&&Su(L,L.stylesheets),0<L.count||0<L.imgCount?function(j){var G=setTimeout(function(){if(L.stylesheets&&Su(L,L.stylesheets),L.unsuspend){var ae=L.unsuspend;L.unsuspend=null,ae()}},6e4+$);0<L.imgBytes&&Pf===0&&(Pf=62500*vg());var ee=setTimeout(function(){if(L.waitingForImages=!1,L.count===0&&(L.stylesheets&&Su(L,L.stylesheets),L.unsuspend)){var ae=L.unsuspend;L.unsuspend=null,ae()}},(L.imgBytes>Pf?50:800)+$);return L.unsuspend=j,function(){L.unsuspend=null,clearTimeout(G),clearTimeout(ee)}}:null}function bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Su(this,this.stylesheets);else if(this.unsuspend){var L=this.unsuspend;this.unsuspend=null,L()}}}var Eu=null;function Su(L,$){L.stylesheets=null,L.unsuspend!==null&&(L.count++,Eu=new Map,$.forEach($g,L),Eu=null,bu.call(L))}function $g(L,$){if(!($.state.loading&4)){var j=Eu.get(L);if(j)var G=j.get(null);else{j=new Map,Eu.set(L,j);for(var ee=L.querySelectorAll("link[data-precedence],style[data-precedence]"),ae=0;ae<ee.length;ae++){var ve=ee[ae];(ve.nodeName==="LINK"||ve.getAttribute("media")!=="not all")&&(j.set(ve.dataset.precedence,ve),G=ve)}G&&j.set(null,G)}ee=$.instance,ve=ee.getAttribute("data-precedence"),ae=j.get(ve)||G,ae===G&&j.set(null,ee),j.set(ve,ee),this.count++,G=bu.bind(this),ee.addEventListener("load",G),ee.addEventListener("error",G),ae?ae.parentNode.insertBefore(ee,ae.nextSibling):(L=L.nodeType===9?L.head:L,L.insertBefore(ee,L.firstChild)),$.state.loading|=4}}var Js={$$typeof:Z,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function Bg(L,$,j,G,ee,ae,ve,Me,je){this.tag=1,this.containerInfo=L,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=G,this.onUncaughtError=ee,this.onCaughtError=ae,this.onRecoverableError=ve,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=je,this.incompleteTransitions=new Map}function bp(L,$,j,G,ee,ae,ve,Me,je,Je,st,gt){return L=new Bg(L,$,j,ve,je,Je,st,gt,Me),$=1,ae===!0&&($|=24),ae=xn(3,null,null,$),L.current=ae,ae.stateNode=L,$=et(),$.refCount++,L.pooledCache=$,$.refCount++,ae.memoizedState={element:G,isDehydrated:j,cache:$},gc(ae),L}function Ep(L){return L?(L=hi,L):hi}function Sp(L,$,j,G,ee,ae){ee=Ep(ee),G.context===null?G.context=ee:G.pendingContext=ee,G=vi($),G.payload={element:j},ae=ae===void 0?null:ae,ae!==null&&(G.callback=ae),j=yi(L,G,$),j!==null&&(Hn(j,L,$),ks(j,L,$))}function wp(L,$){if(L=L.memoizedState,L!==null&&L.dehydrated!==null){var j=L.retryLane;L.retryLane=j!==0&&j<$?j:$}}function Nf(L,$){wp(L,$),(L=L.alternate)&&wp(L,$)}function Cp(L){if(L.tag===13||L.tag===31){var $=Ha(L,67108864);$!==null&&Hn($,L,67108864),Nf(L,67108864)}}function _p(L){if(L.tag===13||L.tag===31){var $=Zn();$=Tr($);var j=Ha(L,$);j!==null&&Hn(j,L,$),Nf(L,$)}}var wu=!0;function jg(L,$,j,G){var ee=ye.T;ye.T=null;var ae=be.p;try{be.p=2,Lf(L,$,j,G)}finally{be.p=ae,ye.T=ee}}function Fg(L,$,j,G){var ee=ye.T;ye.T=null;var ae=be.p;try{be.p=8,Lf(L,$,j,G)}finally{be.p=ae,ye.T=ee}}function Lf(L,$,j,G){if(wu){var ee=If(G);if(ee===null)Ef(L,$,G,Cu,j),Tp(L,G);else if(Vg(ee,L,$,j,G))G.stopPropagation();else if(Tp(L,G),$&4&&-1<zg.indexOf(L)){for(;ee!==null;){var ae=Aa(ee);if(ae!==null)switch(ae.tag){case 3:if(ae=ae.stateNode,ae.current.memoizedState.isDehydrated){var ve=zt(ae.pendingLanes);if(ve!==0){var Me=ae;for(Me.pendingLanes|=2,Me.entangledLanes|=2;ve;){var je=1<<31-tt(ve);Me.entanglements[1]|=je,ve&=~je}Ba(ae),(mr&6)===0&&(ou=Ct()+500,Us(0))}}break;case 31:case 13:Me=Ha(ae,2),Me!==null&&Hn(Me,ae,2),lu(),Nf(ae,2)}if(ae=If(G),ae===null&&Ef(L,$,G,Cu,j),ae===ee)break;ee=ae}ee!==null&&G.stopPropagation()}else Ef(L,$,G,null,j)}}function If(L){return L=Xo(L),qf(L)}var Cu=null;function qf(L){if(Cu=null,L=Ta(L),L!==null){var $=A(L);if($===null)L=null;else{var j=$.tag;if(j===13){if(L=k($),L!==null)return L;L=null}else if(j===31){if(L=M($),L!==null)return L;L=null}else if(j===3){if($.stateNode.current.memoizedState.isDehydrated)return $.tag===3?$.stateNode.containerInfo:null;L=null}else $!==L&&(L=null)}}return Cu=L,null}function Rp(L){switch(L){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case Ut:return 2;case Xt:return 8;case Ot:case qt:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var $f=!1,ki=null,Mi=null,Oi=null,el=new Map,tl=new Map,Di=[],zg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tp(L,$){switch(L){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":el.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete($.pointerId)}}function rl(L,$,j,G,ee,ae){return L===null||L.nativeEvent!==ae?(L={blockedOn:$,domEventName:j,eventSystemFlags:G,nativeEvent:ae,targetContainers:[ee]},$!==null&&($=Aa($),$!==null&&Cp($)),L):(L.eventSystemFlags|=G,$=L.targetContainers,ee!==null&&$.indexOf(ee)===-1&&$.push(ee),L)}function Vg(L,$,j,G,ee){switch($){case"focusin":return ki=rl(ki,L,$,j,G,ee),!0;case"dragenter":return Mi=rl(Mi,L,$,j,G,ee),!0;case"mouseover":return Oi=rl(Oi,L,$,j,G,ee),!0;case"pointerover":var ae=ee.pointerId;return el.set(ae,rl(el.get(ae)||null,L,$,j,G,ee)),!0;case"gotpointercapture":return ae=ee.pointerId,tl.set(ae,rl(tl.get(ae)||null,L,$,j,G,ee)),!0}return!1}function Ap(L){var $=Ta(L.target);if($!==null){var j=A($);if(j!==null){if($=j.tag,$===13){if($=k(j),$!==null){L.blockedOn=$,Dn(L.priority,function(){_p(j)});return}}else if($===31){if($=M(j),$!==null){L.blockedOn=$,Dn(L.priority,function(){_p(j)});return}}else if($===3&&j.stateNode.current.memoizedState.isDehydrated){L.blockedOn=j.tag===3?j.stateNode.containerInfo:null;return}}}L.blockedOn=null}function _u(L){if(L.blockedOn!==null)return!1;for(var $=L.targetContainers;0<$.length;){var j=If(L.nativeEvent);if(j===null){j=L.nativeEvent;var G=new j.constructor(j.type,j);Yo=G,j.target.dispatchEvent(G),Yo=null}else return $=Aa(j),$!==null&&Cp($),L.blockedOn=j,!1;$.shift()}return!0}function kp(L,$,j){_u(L)&&j.delete($)}function Hg(){$f=!1,ki!==null&&_u(ki)&&(ki=null),Mi!==null&&_u(Mi)&&(Mi=null),Oi!==null&&_u(Oi)&&(Oi=null),el.forEach(kp),tl.forEach(kp)}function Ru(L,$){L.blockedOn===$&&(L.blockedOn=null,$f||($f=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Hg)))}var Tu=null;function Mp(L){Tu!==L&&(Tu=L,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){Tu===L&&(Tu=null);for(var $=0;$<L.length;$+=3){var j=L[$],G=L[$+1],ee=L[$+2];if(typeof G!="function"){if(qf(G||j)===null)continue;break}var ae=Aa(j);ae!==null&&(L.splice($,3),$-=3,Lc(ae,{pending:!0,data:ee,method:j.method,action:G},G,ee))}}))}function Ho(L){function $(je){return Ru(je,L)}ki!==null&&Ru(ki,L),Mi!==null&&Ru(Mi,L),Oi!==null&&Ru(Oi,L),el.forEach($),tl.forEach($);for(var j=0;j<Di.length;j++){var G=Di[j];G.blockedOn===L&&(G.blockedOn=null)}for(;0<Di.length&&(j=Di[0],j.blockedOn===null);)Ap(j),j.blockedOn===null&&Di.shift();if(j=(L.ownerDocument||L).$$reactFormReplay,j!=null)for(G=0;G<j.length;G+=3){var ee=j[G],ae=j[G+1],ve=ee[Ur]||null;if(typeof ae=="function")ve||Mp(j);else if(ve){var Me=null;if(ae&&ae.hasAttribute("formAction")){if(ee=ae,ve=ae[Ur]||null)Me=ve.formAction;else if(qf(ee)!==null)continue}else Me=ve.action;typeof Me=="function"?j[G+1]=Me:(j.splice(G,3),G-=3),Mp(j)}}}function Op(){function L(ae){ae.canIntercept&&ae.info==="react-transition"&&ae.intercept({handler:function(){return new Promise(function(ve){return ee=ve})},focusReset:"manual",scroll:"manual"})}function $(){ee!==null&&(ee(),ee=null),G||setTimeout(j,20)}function j(){if(!G&&!navigation.transition){var ae=navigation.currentEntry;ae&&ae.url!=null&&navigation.navigate(ae.url,{state:ae.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var G=!1,ee=null;return navigation.addEventListener("navigate",L),navigation.addEventListener("navigatesuccess",$),navigation.addEventListener("navigateerror",$),setTimeout(j,100),function(){G=!0,navigation.removeEventListener("navigate",L),navigation.removeEventListener("navigatesuccess",$),navigation.removeEventListener("navigateerror",$),ee!==null&&(ee(),ee=null)}}}function Bf(L){this._internalRoot=L}Au.prototype.render=Bf.prototype.render=function(L){var $=this._internalRoot;if($===null)throw Error(R(409));var j=$.current,G=Zn();Sp(j,G,L,$,null,null)},Au.prototype.unmount=Bf.prototype.unmount=function(){var L=this._internalRoot;if(L!==null){this._internalRoot=null;var $=L.containerInfo;Sp(L.current,2,null,L,null,null),lu(),$[wn]=null}};function Au(L){this._internalRoot=L}Au.prototype.unstable_scheduleHydration=function(L){if(L){var $=Or();L={blockedOn:null,target:L,priority:$};for(var j=0;j<Di.length&&$!==0&&$<Di[j].priority;j++);Di.splice(j,0,L),j===0&&Ap(L)}};var Dp=v.version;if(Dp!=="19.2.0")throw Error(R(527,Dp,"19.2.0"));be.findDOMNode=function(L){var $=L._reactInternals;if($===void 0)throw typeof L.render=="function"?Error(R(188)):(L=Object.keys(L).join(","),Error(R(268,L)));return L=D($),L=L!==null?I(L):null,L=L===null?null:L.stateNode,L};var Ug={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{ke=ku.inject(Ug),Ue=ku}catch{}}return reactDomClient_production.createRoot=function(L,$){if(!T(L))throw Error(R(299));var j=!1,G="",ee=Bd,ae=jd,ve=Fd;return $!=null&&($.unstable_strictMode===!0&&(j=!0),$.identifierPrefix!==void 0&&(G=$.identifierPrefix),$.onUncaughtError!==void 0&&(ee=$.onUncaughtError),$.onCaughtError!==void 0&&(ae=$.onCaughtError),$.onRecoverableError!==void 0&&(ve=$.onRecoverableError)),$=bp(L,1,!1,null,null,j,G,null,ee,ae,ve,Op),L[wn]=$.current,bf(L),new Bf($)},reactDomClient_production.hydrateRoot=function(L,$,j){if(!T(L))throw Error(R(299));var G=!1,ee="",ae=Bd,ve=jd,Me=Fd,je=null;return j!=null&&(j.unstable_strictMode===!0&&(G=!0),j.identifierPrefix!==void 0&&(ee=j.identifierPrefix),j.onUncaughtError!==void 0&&(ae=j.onUncaughtError),j.onCaughtError!==void 0&&(ve=j.onCaughtError),j.onRecoverableError!==void 0&&(Me=j.onRecoverableError),j.formState!==void 0&&(je=j.formState)),$=bp(L,1,!0,$,j??null,G,ee,je,ae,ve,Me,Op),$.context=Ep(null),j=$.current,G=Zn(),G=Tr(G),ee=vi(G),ee.callback=null,yi(j,ee,G),j=G,$.current.lanes=j,Gt($,j),Ba($),L[wn]=$.current,bf(L),new Au($)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(v){console.error(v)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createBrowserHistory(_={}){function v(R,T){let{pathname:A,search:k,hash:M}=R.location;return createLocation("",{pathname:A,search:k,hash:M},T.state&&T.state.usr||null,T.state&&T.state.key||"default")}function S(R,T){return typeof T=="string"?T:createPath(T)}return getUrlBasedHistory(v,S,null,_)}function invariant(_,v){if(_===!1||_===null||typeof _>"u")throw new Error(v)}function warning(_,v){if(!_){typeof console<"u"&&console.warn(v);try{throw new Error(v)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(_,v){return{usr:_.state,key:_.key,idx:v}}function createLocation(_,v,S=null,R){return{pathname:typeof _=="string"?_:_.pathname,search:"",hash:"",...typeof v=="string"?parsePath(v):v,state:S,key:v&&v.key||R||createKey()}}function createPath({pathname:_="/",search:v="",hash:S=""}){return v&&v!=="?"&&(_+=v.charAt(0)==="?"?v:"?"+v),S&&S!=="#"&&(_+=S.charAt(0)==="#"?S:"#"+S),_}function parsePath(_){let v={};if(_){let S=_.indexOf("#");S>=0&&(v.hash=_.substring(S),_=_.substring(0,S));let R=_.indexOf("?");R>=0&&(v.search=_.substring(R),_=_.substring(0,R)),_&&(v.pathname=_)}return v}function getUrlBasedHistory(_,v,S,R={}){let{window:T=document.defaultView,v5Compat:A=!1}=R,k=T.history,M="POP",N=null,D=I();D==null&&(D=0,k.replaceState({...k.state,idx:D},""));function I(){return(k.state||{idx:null}).idx}function q(){M="POP";let H=I(),W=H==null?null:H-D;D=H,N&&N({action:M,location:V.location,delta:W})}function B(H,W){M="PUSH";let Y=createLocation(V.location,H,W);D=I()+1;let Z=getHistoryState(Y,D),J=V.createHref(Y);try{k.pushState(Z,"",J)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;T.location.assign(J)}A&&N&&N({action:M,location:V.location,delta:1})}function z(H,W){M="REPLACE";let Y=createLocation(V.location,H,W);D=I();let Z=getHistoryState(Y,D),J=V.createHref(Y);k.replaceState(Z,"",J),A&&N&&N({action:M,location:V.location,delta:0})}function F(H){return createBrowserURLImpl(H)}let V={get action(){return M},get location(){return _(T,k)},listen(H){if(N)throw new Error("A history only accepts one active listener");return T.addEventListener(PopStateEventType,q),N=H,()=>{T.removeEventListener(PopStateEventType,q),N=null}},createHref(H){return v(T,H)},createURL:F,encodeLocation(H){let W=F(H);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:B,replace:z,go(H){return k.go(H)}};return V}function createBrowserURLImpl(_,v=!1){let S="http://localhost";typeof window<"u"&&(S=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(S,"No window.location.(origin|href) available to create URL");let R=typeof _=="string"?_:createPath(_);return R=R.replace(/ $/,"%20"),!v&&R.startsWith("//")&&(R=S+R),new URL(R,S)}function matchRoutes(_,v,S="/"){return matchRoutesImpl(_,v,S,!1)}function matchRoutesImpl(_,v,S,R){let T=typeof v=="string"?parsePath(v):v,A=stripBasename(T.pathname||"/",S);if(A==null)return null;let k=flattenRoutes(_);rankRouteBranches(k);let M=null;for(let N=0;M==null&&N<k.length;++N){let D=decodePath(A);M=matchRouteBranch(k[N],D,R)}return M}function flattenRoutes(_,v=[],S=[],R="",T=!1){let A=(k,M,N=T,D)=>{let I={relativePath:D===void 0?k.path||"":D,caseSensitive:k.caseSensitive===!0,childrenIndex:M,route:k};if(I.relativePath.startsWith("/")){if(!I.relativePath.startsWith(R)&&N)return;invariant(I.relativePath.startsWith(R),`Absolute route path "${I.relativePath}" nested under path "${R}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),I.relativePath=I.relativePath.slice(R.length)}let q=joinPaths([R,I.relativePath]),B=S.concat(I);k.children&&k.children.length>0&&(invariant(k.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${q}".`),flattenRoutes(k.children,v,B,q,N)),!(k.path==null&&!k.index)&&v.push({path:q,score:computeScore(q,k.index),routesMeta:B})};return _.forEach((k,M)=>{if(k.path===""||!k.path?.includes("?"))A(k,M);else for(let N of explodeOptionalSegments(k.path))A(k,M,!0,N)}),v}function explodeOptionalSegments(_){let v=_.split("/");if(v.length===0)return[];let[S,...R]=v,T=S.endsWith("?"),A=S.replace(/\?$/,"");if(R.length===0)return T?[A,""]:[A];let k=explodeOptionalSegments(R.join("/")),M=[];return M.push(...k.map(N=>N===""?A:[A,N].join("/"))),T&&M.push(...k),M.map(N=>_.startsWith("/")&&N===""?"/":N)}function rankRouteBranches(_){_.sort((v,S)=>v.score!==S.score?S.score-v.score:compareIndexes(v.routesMeta.map(R=>R.childrenIndex),S.routesMeta.map(R=>R.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_=>_==="*";function computeScore(_,v){let S=_.split("/"),R=S.length;return S.some(isSplat)&&(R+=splatPenalty),v&&(R+=indexRouteValue),S.filter(T=>!isSplat(T)).reduce((T,A)=>T+(paramRe.test(A)?dynamicSegmentValue:A===""?emptySegmentValue:staticSegmentValue),R)}function compareIndexes(_,v){return _.length===v.length&&_.slice(0,-1).every((R,T)=>R===v[T])?_[_.length-1]-v[v.length-1]:0}function matchRouteBranch(_,v,S=!1){let{routesMeta:R}=_,T={},A="/",k=[];for(let M=0;M<R.length;++M){let N=R[M],D=M===R.length-1,I=A==="/"?v:v.slice(A.length)||"/",q=matchPath({path:N.relativePath,caseSensitive:N.caseSensitive,end:D},I),B=N.route;if(!q&&D&&S&&!R[R.length-1].route.index&&(q=matchPath({path:N.relativePath,caseSensitive:N.caseSensitive,end:!1},I)),!q)return null;Object.assign(T,q.params),k.push({params:T,pathname:joinPaths([A,q.pathname]),pathnameBase:normalizePathname(joinPaths([A,q.pathnameBase])),route:B}),q.pathnameBase!=="/"&&(A=joinPaths([A,q.pathnameBase]))}return k}function matchPath(_,v){typeof _=="string"&&(_={path:_,caseSensitive:!1,end:!0});let[S,R]=compilePath(_.path,_.caseSensitive,_.end),T=v.match(S);if(!T)return null;let A=T[0],k=A.replace(/(.)\/+$/,"$1"),M=T.slice(1);return{params:R.reduce((D,{paramName:I,isOptional:q},B)=>{if(I==="*"){let F=M[B]||"";k=A.slice(0,A.length-F.length).replace(/(.)\/+$/,"$1")}const z=M[B];return q&&!z?D[I]=void 0:D[I]=(z||"").replace(/%2F/g,"/"),D},{}),pathname:A,pathnameBase:k,pattern:_}}function compilePath(_,v=!1,S=!0){warning(_==="*"||!_.endsWith("*")||_.endsWith("/*"),`Route path "${_}" will be treated as if it were "${_.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${_.replace(/\*$/,"/*")}".`);let R=[],T="^"+_.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(k,M,N)=>(R.push({paramName:M,isOptional:N!=null}),N?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return _.endsWith("*")?(R.push({paramName:"*"}),T+=_==="*"||_==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):S?T+="\\/*$":_!==""&&_!=="/"&&(T+="(?:(?=\\/|$))"),[new RegExp(T,v?void 0:"i"),R]}function decodePath(_){try{return _.split("/").map(v=>decodeURIComponent(v).replace(/\//g,"%2F")).join("/")}catch(v){return warning(!1,`The URL path "${_}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${v}).`),_}}function stripBasename(_,v){if(v==="/")return _;if(!_.toLowerCase().startsWith(v.toLowerCase()))return null;let S=v.endsWith("/")?v.length-1:v.length,R=_.charAt(S);return R&&R!=="/"?null:_.slice(S)||"/"}function resolvePath(_,v="/"){let{pathname:S,search:R="",hash:T=""}=typeof _=="string"?parsePath(_):_;return{pathname:S?S.startsWith("/")?S:resolvePathname(S,v):v,search:normalizeSearch(R),hash:normalizeHash(T)}}function resolvePathname(_,v){let S=v.replace(/\/+$/,"").split("/");return _.split("/").forEach(T=>{T===".."?S.length>1&&S.pop():T!=="."&&S.push(T)}),S.length>1?S.join("/"):"/"}function getInvalidPathError(_,v,S,R){return`Cannot include a '${_}' character in a manually specified \`to.${v}\` field [${JSON.stringify(R)}].  Please separate it out to the \`to.${S}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(_){return _.filter((v,S)=>S===0||v.route.path&&v.route.path.length>0)}function getResolveToMatches(_){let v=getPathContributingMatches(_);return v.map((S,R)=>R===v.length-1?S.pathname:S.pathnameBase)}function resolveTo(_,v,S,R=!1){let T;typeof _=="string"?T=parsePath(_):(T={..._},invariant(!T.pathname||!T.pathname.includes("?"),getInvalidPathError("?","pathname","search",T)),invariant(!T.pathname||!T.pathname.includes("#"),getInvalidPathError("#","pathname","hash",T)),invariant(!T.search||!T.search.includes("#"),getInvalidPathError("#","search","hash",T)));let A=_===""||T.pathname==="",k=A?"/":T.pathname,M;if(k==null)M=S;else{let q=v.length-1;if(!R&&k.startsWith("..")){let B=k.split("/");for(;B[0]==="..";)B.shift(),q-=1;T.pathname=B.join("/")}M=q>=0?v[q]:"/"}let N=resolvePath(T,M),D=k&&k!=="/"&&k.endsWith("/"),I=(A||k===".")&&S.endsWith("/");return!N.pathname.endsWith("/")&&(D||I)&&(N.pathname+="/"),N}var joinPaths=_=>_.join("/").replace(/\/\/+/g,"/"),normalizePathname=_=>_.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_=>!_||_==="?"?"":_.startsWith("?")?_:"?"+_,normalizeHash=_=>!_||_==="#"?"":_.startsWith("#")?_:"#"+_;function isRouteErrorResponse(_){return _!=null&&typeof _.status=="number"&&typeof _.statusText=="string"&&typeof _.internal=="boolean"&&"data"in _}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(_,{relative:v}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:S,navigator:R}=reactExports.useContext(NavigationContext),{hash:T,pathname:A,search:k}=useResolvedPath(_,{relative:v}),M=A;return S!=="/"&&(M=A==="/"?S:joinPaths([S,A])),R.createHref({pathname:M,search:k,hash:T})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(_){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_)}function useNavigate(){let{isDataRoute:_}=reactExports.useContext(RouteContext);return _?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let _=reactExports.useContext(DataRouterContext),{basename:v,navigator:S}=reactExports.useContext(NavigationContext),{matches:R}=reactExports.useContext(RouteContext),{pathname:T}=useLocation(),A=JSON.stringify(getResolveToMatches(R)),k=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{k.current=!0}),reactExports.useCallback((N,D={})=>{if(warning(k.current,navigateEffectWarning),!k.current)return;if(typeof N=="number"){S.go(N);return}let I=resolveTo(N,JSON.parse(A),T,D.relative==="path");_==null&&v!=="/"&&(I.pathname=I.pathname==="/"?v:joinPaths([v,I.pathname])),(D.replace?S.replace:S.push)(I,D.state,D)},[v,S,A,T,_])}reactExports.createContext(null);function useResolvedPath(_,{relative:v}={}){let{matches:S}=reactExports.useContext(RouteContext),{pathname:R}=useLocation(),T=JSON.stringify(getResolveToMatches(S));return reactExports.useMemo(()=>resolveTo(_,JSON.parse(T),R,v==="path"),[_,T,R,v])}function useRoutes(_,v){return useRoutesImpl(_,v)}function useRoutesImpl(_,v,S,R,T){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:A}=reactExports.useContext(NavigationContext),{matches:k}=reactExports.useContext(RouteContext),M=k[k.length-1],N=M?M.params:{},D=M?M.pathname:"/",I=M?M.pathnameBase:"/",q=M&&M.route;{let Y=q&&q.path||"";warningOnce(D,!q||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${D}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let B=useLocation(),z;if(v){let Y=typeof v=="string"?parsePath(v):v;invariant(I==="/"||Y.pathname?.startsWith(I),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${I}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),z=Y}else z=B;let F=z.pathname||"/",V=F;if(I!=="/"){let Y=I.replace(/^\//,"").split("/");V="/"+F.replace(/^\//,"").split("/").slice(Y.length).join("/")}let H=matchRoutes(_,{pathname:V});warning(q||H!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),warning(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=_renderMatches(H&&H.map(Y=>Object.assign({},Y,{params:Object.assign({},N,Y.params),pathname:joinPaths([I,A.encodeLocation?A.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?I:joinPaths([I,A.encodeLocation?A.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),k,S,R,T);return v&&W?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},W):W}function DefaultErrorComponent(){let _=useRouteError(),v=isRouteErrorResponse(_)?`${_.status} ${_.statusText}`:_ instanceof Error?_.message:JSON.stringify(_),S=_ instanceof Error?_.stack:null,R="rgba(200,200,200, 0.5)",T={padding:"0.5rem",backgroundColor:R},A={padding:"2px 4px",backgroundColor:R},k=null;return console.error("Error handled by React Router default ErrorBoundary:",_),k=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:A},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:A},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},v),S?reactExports.createElement("pre",{style:T},S):null,k)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(_){super(_),this.state={location:_.location,revalidation:_.revalidation,error:_.error}}static getDerivedStateFromError(_){return{error:_}}static getDerivedStateFromProps(_,v){return v.location!==_.location||v.revalidation!=="idle"&&_.revalidation==="idle"?{error:_.error,location:_.location,revalidation:_.revalidation}:{error:_.error!==void 0?_.error:v.error,location:v.location,revalidation:_.revalidation||v.revalidation}}componentDidCatch(_,v){this.props.unstable_onError?this.props.unstable_onError(_,v):console.error("React Router caught the following error during render",_)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:_,match:v,children:S}){let R=reactExports.useContext(DataRouterContext);return R&&R.static&&R.staticContext&&(v.route.errorElement||v.route.ErrorBoundary)&&(R.staticContext._deepestRenderedBoundaryId=v.route.id),reactExports.createElement(RouteContext.Provider,{value:_},S)}function _renderMatches(_,v=[],S=null,R=null,T=null){if(_==null){if(!S)return null;if(S.errors)_=S.matches;else if(v.length===0&&!S.initialized&&S.matches.length>0)_=S.matches;else return null}let A=_,k=S?.errors;if(k!=null){let D=A.findIndex(I=>I.route.id&&k?.[I.route.id]!==void 0);invariant(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(k).join(",")}`),A=A.slice(0,Math.min(A.length,D+1))}let M=!1,N=-1;if(S)for(let D=0;D<A.length;D++){let I=A[D];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(N=D),I.route.id){let{loaderData:q,errors:B}=S,z=I.route.loader&&!q.hasOwnProperty(I.route.id)&&(!B||B[I.route.id]===void 0);if(I.route.lazy||z){M=!0,N>=0?A=A.slice(0,N+1):A=[A[0]];break}}}return A.reduceRight((D,I,q)=>{let B,z=!1,F=null,V=null;S&&(B=k&&I.route.id?k[I.route.id]:void 0,F=I.route.errorElement||defaultErrorElement,M&&(N<0&&q===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,V=null):N===q&&(z=!0,V=I.route.hydrateFallbackElement||null)));let H=v.concat(A.slice(0,q+1)),W=()=>{let Y;return B?Y=F:z?Y=V:I.route.Component?Y=reactExports.createElement(I.route.Component,null):I.route.element?Y=I.route.element:Y=D,reactExports.createElement(RenderedRoute,{match:I,routeContext:{outlet:D,matches:H,isDataRoute:S!=null},children:Y})};return S&&(I.route.ErrorBoundary||I.route.errorElement||q===0)?reactExports.createElement(RenderErrorBoundary,{location:S.location,revalidation:S.revalidation,component:F,error:B,children:W(),routeContext:{outlet:null,matches:H,isDataRoute:!0},unstable_onError:R}):W()},null)}function getDataRouterConsoleError(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(_){let v=reactExports.useContext(DataRouterContext);return invariant(v,getDataRouterConsoleError(_)),v}function useDataRouterState(_){let v=reactExports.useContext(DataRouterStateContext);return invariant(v,getDataRouterConsoleError(_)),v}function useRouteContext(_){let v=reactExports.useContext(RouteContext);return invariant(v,getDataRouterConsoleError(_)),v}function useCurrentRouteId(_){let v=useRouteContext(_),S=v.matches[v.matches.length-1];return invariant(S.route.id,`${_} can only be used on routes that contain a unique "id"`),S.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let _=reactExports.useContext(RouteErrorContext),v=useDataRouterState("useRouteError"),S=useCurrentRouteId("useRouteError");return _!==void 0?_:v.errors?.[S]}function useNavigateStable(){let{router:_}=useDataRouterContext("useNavigate"),v=useCurrentRouteId("useNavigate"),S=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{S.current=!0}),reactExports.useCallback(async(T,A={})=>{warning(S.current,navigateEffectWarning),S.current&&(typeof T=="number"?_.navigate(T):await _.navigate(T,{fromRouteId:v,...A}))},[_,v])}var alreadyWarned$1={};function warningOnce(_,v,S){!v&&!alreadyWarned$1[_]&&(alreadyWarned$1[_]=!0,warning(!1,S))}reactExports.memo(DataRoutes);function DataRoutes({routes:_,future:v,state:S,unstable_onError:R}){return useRoutesImpl(_,void 0,S,R,v)}function Route(_){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:_="/",children:v=null,location:S,navigationType:R="POP",navigator:T,static:A=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let k=_.replace(/^\/*/,"/"),M=reactExports.useMemo(()=>({basename:k,navigator:T,static:A,future:{}}),[k,T,A]);typeof S=="string"&&(S=parsePath(S));let{pathname:N="/",search:D="",hash:I="",state:q=null,key:B="default"}=S,z=reactExports.useMemo(()=>{let F=stripBasename(N,k);return F==null?null:{location:{pathname:F,search:D,hash:I,state:q,key:B},navigationType:R}},[k,N,D,I,q,B,R]);return warning(z!=null,`<Router basename="${k}"> is not able to match the URL "${N}${D}${I}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:reactExports.createElement(NavigationContext.Provider,{value:M},reactExports.createElement(LocationContext.Provider,{children:v,value:z}))}function Routes({children:_,location:v}){return useRoutes(createRoutesFromChildren(_),v)}function createRoutesFromChildren(_,v=[]){let S=[];return reactExports.Children.forEach(_,(R,T)=>{if(!reactExports.isValidElement(R))return;let A=[...v,T];if(R.type===reactExports.Fragment){S.push.apply(S,createRoutesFromChildren(R.props.children,A));return}invariant(R.type===Route,`[${typeof R.type=="string"?R.type:R.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!R.props.index||!R.props.children,"An index route cannot have child routes.");let k={id:R.props.id||A.join("-"),caseSensitive:R.props.caseSensitive,element:R.props.element,Component:R.props.Component,index:R.props.index,path:R.props.path,middleware:R.props.middleware,loader:R.props.loader,action:R.props.action,hydrateFallbackElement:R.props.hydrateFallbackElement,HydrateFallback:R.props.HydrateFallback,errorElement:R.props.errorElement,ErrorBoundary:R.props.ErrorBoundary,hasErrorBoundary:R.props.hasErrorBoundary===!0||R.props.ErrorBoundary!=null||R.props.errorElement!=null,shouldRevalidate:R.props.shouldRevalidate,handle:R.props.handle,lazy:R.props.lazy};R.props.children&&(k.children=createRoutesFromChildren(R.props.children,A)),S.push(k)}),S}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(_){return _!=null&&typeof _.tagName=="string"}function isButtonElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="button"}function isFormElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="form"}function isInputElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="input"}function isModifiedEvent(_){return!!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)}function shouldProcessLinkClick(_,v){return _.button===0&&(!v||v==="_self")&&!isModifiedEvent(_)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(_){return _!=null&&!supportedFormEncTypes.has(_)?(warning(!1,`"${_}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):_}function getFormSubmissionInfo(_,v){let S,R,T,A,k;if(isFormElement(_)){let M=_.getAttribute("action");R=M?stripBasename(M,v):null,S=_.getAttribute("method")||defaultMethod,T=getFormEncType(_.getAttribute("enctype"))||defaultEncType,A=new FormData(_)}else if(isButtonElement(_)||isInputElement(_)&&(_.type==="submit"||_.type==="image")){let M=_.form;if(M==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let N=_.getAttribute("formaction")||M.getAttribute("action");if(R=N?stripBasename(N,v):null,S=_.getAttribute("formmethod")||M.getAttribute("method")||defaultMethod,T=getFormEncType(_.getAttribute("formenctype"))||getFormEncType(M.getAttribute("enctype"))||defaultEncType,A=new FormData(M,_),!isFormDataSubmitterSupported()){let{name:D,type:I,value:q}=_;if(I==="image"){let B=D?`${D}.`:"";A.append(`${B}x`,"0"),A.append(`${B}y`,"0")}else D&&A.append(D,q)}}else{if(isHtmlElement(_))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');S=defaultMethod,R=null,T=defaultEncType,k=_}return A&&T==="text/plain"&&(k=A,A=void 0),{action:R,method:S.toLowerCase(),encType:T,formData:A,body:k}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(_,v){if(_===!1||_===null||typeof _>"u")throw new Error(v)}function singleFetchUrl(_,v,S){let R=typeof _=="string"?new URL(_,typeof window>"u"?"server://singlefetch/":window.location.origin):_;return R.pathname==="/"?R.pathname=`_root.${S}`:v&&stripBasename(R.pathname,v)==="/"?R.pathname=`${v.replace(/\/$/,"")}/_root.${S}`:R.pathname=`${R.pathname.replace(/\/$/,"")}.${S}`,R}async function loadRouteModule(_,v){if(_.id in v)return v[_.id];try{let S=await import(_.module);return v[_.id]=S,S}catch(S){return console.error(`Error loading route module \`${_.module}\`, reloading page...`),console.error(S),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(_){return _==null?!1:_.href==null?_.rel==="preload"&&typeof _.imageSrcSet=="string"&&typeof _.imageSizes=="string":typeof _.rel=="string"&&typeof _.href=="string"}async function getKeyedPrefetchLinks(_,v,S){let R=await Promise.all(_.map(async T=>{let A=v.routes[T.route.id];if(A){let k=await loadRouteModule(A,S);return k.links?k.links():[]}return[]}));return dedupeLinkDescriptors(R.flat(1).filter(isHtmlLinkDescriptor).filter(T=>T.rel==="stylesheet"||T.rel==="preload").map(T=>T.rel==="stylesheet"?{...T,rel:"prefetch",as:"style"}:{...T,rel:"prefetch"}))}function getNewMatchesForLinks(_,v,S,R,T,A){let k=(N,D)=>S[D]?N.route.id!==S[D].route.id:!0,M=(N,D)=>S[D].pathname!==N.pathname||S[D].route.path?.endsWith("*")&&S[D].params["*"]!==N.params["*"];return A==="assets"?v.filter((N,D)=>k(N,D)||M(N,D)):A==="data"?v.filter((N,D)=>{let I=R.routes[N.route.id];if(!I||!I.hasLoader)return!1;if(k(N,D)||M(N,D))return!0;if(N.route.shouldRevalidate){let q=N.route.shouldRevalidate({currentUrl:new URL(T.pathname+T.search+T.hash,window.origin),currentParams:S[0]?.params||{},nextUrl:new URL(_,window.origin),nextParams:N.params,defaultShouldRevalidate:!0});if(typeof q=="boolean")return q}return!0}):[]}function getModuleLinkHrefs(_,v,{includeHydrateFallback:S}={}){return dedupeHrefs(_.map(R=>{let T=v.routes[R.route.id];if(!T)return[];let A=[T.module];return T.clientActionModule&&(A=A.concat(T.clientActionModule)),T.clientLoaderModule&&(A=A.concat(T.clientLoaderModule)),S&&T.hydrateFallbackModule&&(A=A.concat(T.hydrateFallbackModule)),T.imports&&(A=A.concat(T.imports)),A}).flat(1))}function dedupeHrefs(_){return[...new Set(_)]}function sortKeys(_){let v={},S=Object.keys(_).sort();for(let R of S)v[R]=_[R];return v}function dedupeLinkDescriptors(_,v){let S=new Set;return new Set(v),_.reduce((R,T)=>{let A=JSON.stringify(sortKeys(T));return S.has(A)||(S.add(A),R.push({key:A,link:T})),R},[])}function useDataRouterContext2(){let _=reactExports.useContext(DataRouterContext);return invariant2(_,"You must render this element inside a <DataRouterContext.Provider> element"),_}function useDataRouterStateContext(){let _=reactExports.useContext(DataRouterStateContext);return invariant2(_,"You must render this element inside a <DataRouterStateContext.Provider> element"),_}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let _=reactExports.useContext(FrameworkContext);return invariant2(_,"You must render this element inside a <HydratedRouter> element"),_}function usePrefetchBehavior(_,v){let S=reactExports.useContext(FrameworkContext),[R,T]=reactExports.useState(!1),[A,k]=reactExports.useState(!1),{onFocus:M,onBlur:N,onMouseEnter:D,onMouseLeave:I,onTouchStart:q}=v,B=reactExports.useRef(null);reactExports.useEffect(()=>{if(_==="render"&&k(!0),_==="viewport"){let V=W=>{W.forEach(Y=>{k(Y.isIntersecting)})},H=new IntersectionObserver(V,{threshold:.5});return B.current&&H.observe(B.current),()=>{H.disconnect()}}},[_]),reactExports.useEffect(()=>{if(R){let V=setTimeout(()=>{k(!0)},100);return()=>{clearTimeout(V)}}},[R]);let z=()=>{T(!0)},F=()=>{T(!1),k(!1)};return S?_!=="intent"?[A,B,{}]:[A,B,{onFocus:composeEventHandlers$1(M,z),onBlur:composeEventHandlers$1(N,F),onMouseEnter:composeEventHandlers$1(D,z),onMouseLeave:composeEventHandlers$1(I,F),onTouchStart:composeEventHandlers$1(q,z)}]:[!1,B,{}]}function composeEventHandlers$1(_,v){return S=>{_&&_(S),S.defaultPrevented||v(S)}}function PrefetchPageLinks({page:_,...v}){let{router:S}=useDataRouterContext2(),R=reactExports.useMemo(()=>matchRoutes(S.routes,_,S.basename),[S.routes,_,S.basename]);return R?reactExports.createElement(PrefetchPageLinksImpl,{page:_,matches:R,...v}):null}function useKeyedPrefetchLinks(_){let{manifest:v,routeModules:S}=useFrameworkContext(),[R,T]=reactExports.useState([]);return reactExports.useEffect(()=>{let A=!1;return getKeyedPrefetchLinks(_,v,S).then(k=>{A||T(k)}),()=>{A=!0}},[_,v,S]),R}function PrefetchPageLinksImpl({page:_,matches:v,...S}){let R=useLocation(),{manifest:T,routeModules:A}=useFrameworkContext(),{basename:k}=useDataRouterContext2(),{loaderData:M,matches:N}=useDataRouterStateContext(),D=reactExports.useMemo(()=>getNewMatchesForLinks(_,v,N,T,R,"data"),[_,v,N,T,R]),I=reactExports.useMemo(()=>getNewMatchesForLinks(_,v,N,T,R,"assets"),[_,v,N,T,R]),q=reactExports.useMemo(()=>{if(_===R.pathname+R.search+R.hash)return[];let F=new Set,V=!1;if(v.forEach(W=>{let Y=T.routes[W.route.id];!Y||!Y.hasLoader||(!D.some(Z=>Z.route.id===W.route.id)&&W.route.id in M&&A[W.route.id]?.shouldRevalidate||Y.hasClientLoader?V=!0:F.add(W.route.id))}),F.size===0)return[];let H=singleFetchUrl(_,k,"data");return V&&F.size>0&&H.searchParams.set("_routes",v.filter(W=>F.has(W.route.id)).map(W=>W.route.id).join(",")),[H.pathname+H.search]},[k,M,R,T,D,v,_,A]),B=reactExports.useMemo(()=>getModuleLinkHrefs(I,T),[I,T]),z=useKeyedPrefetchLinks(I);return reactExports.createElement(reactExports.Fragment,null,q.map(F=>reactExports.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...S})),B.map(F=>reactExports.createElement("link",{key:F,rel:"modulepreload",href:F,...S})),z.map(({key:F,link:V})=>reactExports.createElement("link",{key:F,nonce:S.nonce,...V})))}function mergeRefs(..._){return v=>{_.forEach(S=>{typeof S=="function"?S(v):S!=null&&(S.current=v)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function BrowserRouter({basename:_,children:v,window:S}){let R=reactExports.useRef();R.current==null&&(R.current=createBrowserHistory({window:S,v5Compat:!0}));let T=R.current,[A,k]=reactExports.useState({action:T.action,location:T.location}),M=reactExports.useCallback(N=>{reactExports.startTransition(()=>k(N))},[k]);return reactExports.useLayoutEffect(()=>T.listen(M),[T,M]),reactExports.createElement(Router,{basename:_,children:v,location:A.location,navigationType:A.action,navigator:T})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:v,discover:S="render",prefetch:R="none",relative:T,reloadDocument:A,replace:k,state:M,target:N,to:D,preventScrollReset:I,viewTransition:q,...B},z){let{basename:F}=reactExports.useContext(NavigationContext),V=typeof D=="string"&&ABSOLUTE_URL_REGEX2.test(D),H,W=!1;if(typeof D=="string"&&V&&(H=D,isBrowser))try{let le=new URL(window.location.href),ue=D.startsWith("//")?new URL(le.protocol+D):new URL(D),ce=stripBasename(ue.pathname,F);ue.origin===le.origin&&ce!=null?D=ce+ue.search+ue.hash:W=!0}catch{warning(!1,`<Link to="${D}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=useHref(D,{relative:T}),[Z,J,ne]=usePrefetchBehavior(R,B),oe=useLinkClickHandler(D,{replace:k,state:M,target:N,preventScrollReset:I,relative:T,viewTransition:q});function te(le){v&&v(le),le.defaultPrevented||oe(le)}let se=reactExports.createElement("a",{...B,...ne,href:H||Y,onClick:W||A?v:te,ref:mergeRefs(z,J),target:N,"data-discover":!V&&S==="render"?"true":void 0});return Z&&!V?reactExports.createElement(reactExports.Fragment,null,se,reactExports.createElement(PrefetchPageLinks,{page:Y})):se});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":v="page",caseSensitive:S=!1,className:R="",end:T=!1,style:A,to:k,viewTransition:M,children:N,...D},I){let q=useResolvedPath(k,{relative:D.relative}),B=useLocation(),z=reactExports.useContext(DataRouterStateContext),{navigator:F,basename:V}=reactExports.useContext(NavigationContext),H=z!=null&&useViewTransitionState(q)&&M===!0,W=F.encodeLocation?F.encodeLocation(q).pathname:q.pathname,Y=B.pathname,Z=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;S||(Y=Y.toLowerCase(),Z=Z?Z.toLowerCase():null,W=W.toLowerCase()),Z&&V&&(Z=stripBasename(Z,V)||Z);const J=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let ne=Y===W||!T&&Y.startsWith(W)&&Y.charAt(J)==="/",oe=Z!=null&&(Z===W||!T&&Z.startsWith(W)&&Z.charAt(W.length)==="/"),te={isActive:ne,isPending:oe,isTransitioning:H},se=ne?v:void 0,le;typeof R=="function"?le=R(te):le=[R,ne?"active":null,oe?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let ue=typeof A=="function"?A(te):A;return reactExports.createElement(Link,{...D,"aria-current":se,className:le,ref:I,style:ue,to:k,viewTransition:M},typeof N=="function"?N(te):N)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:_="render",fetcherKey:v,navigate:S,reloadDocument:R,replace:T,state:A,method:k=defaultMethod,action:M,onSubmit:N,relative:D,preventScrollReset:I,viewTransition:q,...B},z)=>{let F=useSubmit(),V=useFormAction(M,{relative:D}),H=k.toLowerCase()==="get"?"get":"post",W=typeof M=="string"&&ABSOLUTE_URL_REGEX2.test(M),Y=Z=>{if(N&&N(Z),Z.defaultPrevented)return;Z.preventDefault();let J=Z.nativeEvent.submitter,ne=J?.getAttribute("formmethod")||k;F(J||Z.currentTarget,{fetcherKey:v,method:ne,navigate:S,replace:T,state:A,relative:D,preventScrollReset:I,viewTransition:q})};return reactExports.createElement("form",{ref:z,method:H,action:V,onSubmit:R?N:Y,...B,"data-discover":!W&&_==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(_){let v=reactExports.useContext(DataRouterContext);return invariant(v,getDataRouterConsoleError2(_)),v}function useLinkClickHandler(_,{target:v,replace:S,state:R,preventScrollReset:T,relative:A,viewTransition:k}={}){let M=useNavigate(),N=useLocation(),D=useResolvedPath(_,{relative:A});return reactExports.useCallback(I=>{if(shouldProcessLinkClick(I,v)){I.preventDefault();let q=S!==void 0?S:createPath(N)===createPath(D);M(_,{replace:q,state:R,preventScrollReset:T,relative:A,viewTransition:k})}},[N,M,D,S,R,v,_,T,A,k])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:_}=useDataRouterContext3("useSubmit"),{basename:v}=reactExports.useContext(NavigationContext),S=useRouteId();return reactExports.useCallback(async(R,T={})=>{let{action:A,method:k,encType:M,formData:N,body:D}=getFormSubmissionInfo(R,v);if(T.navigate===!1){let I=T.fetcherKey||getUniqueFetcherId();await _.fetch(I,S,T.action||A,{preventScrollReset:T.preventScrollReset,formData:N,body:D,formMethod:T.method||k,formEncType:T.encType||M,flushSync:T.flushSync})}else await _.navigate(T.action||A,{preventScrollReset:T.preventScrollReset,formData:N,body:D,formMethod:T.method||k,formEncType:T.encType||M,replace:T.replace,state:T.state,fromRouteId:S,flushSync:T.flushSync,viewTransition:T.viewTransition})},[_,v,S])}function useFormAction(_,{relative:v}={}){let{basename:S}=reactExports.useContext(NavigationContext),R=reactExports.useContext(RouteContext);invariant(R,"useFormAction must be used inside a RouteContext");let[T]=R.matches.slice(-1),A={...useResolvedPath(_||".",{relative:v})},k=useLocation();if(_==null){A.search=k.search;let M=new URLSearchParams(A.search),N=M.getAll("index");if(N.some(I=>I==="")){M.delete("index"),N.filter(q=>q).forEach(q=>M.append("index",q));let I=M.toString();A.search=I?`?${I}`:""}}return(!_||_===".")&&T.route.index&&(A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index"),S!=="/"&&(A.pathname=A.pathname==="/"?S:joinPaths([S,A.pathname])),createPath(A)}function useViewTransitionState(_,{relative:v}={}){let S=reactExports.useContext(ViewTransitionContext);invariant(S!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:R}=useDataRouterContext3("useViewTransitionState"),T=useResolvedPath(_,{relative:v});if(!S.isTransitioning)return!1;let A=stripBasename(S.currentLocation.pathname,R)||S.currentLocation.pathname,k=stripBasename(S.nextLocation.pathname,R)||S.nextLocation.pathname;return matchPath(T.pathname,k)!=null||matchPath(T.pathname,A)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);function r$1(_){var v,S,R="";if(typeof _=="string"||typeof _=="number")R+=_;else if(typeof _=="object")if(Array.isArray(_)){var T=_.length;for(v=0;v<T;v++)_[v]&&(S=r$1(_[v]))&&(R&&(R+=" "),R+=S)}else for(S in _)_[S]&&(R&&(R+=" "),R+=S);return R}function clsx(){for(var _,v,S=0,R="",T=arguments.length;S<T;S++)(_=arguments[S])&&(v=r$1(_))&&(R&&(R+=" "),R+=v);return R}const concatArrays=(_,v)=>{const S=new Array(_.length+v.length);for(let R=0;R<_.length;R++)S[R]=_[R];for(let R=0;R<v.length;R++)S[_.length+R]=v[R];return S},createClassValidatorObject=(_,v)=>({classGroupId:_,validator:v}),createClassPartObject=(_=new Map,v=null,S)=>({nextPart:_,validators:v,classGroupId:S}),CLASS_PART_SEPARATOR="-",EMPTY_CONFLICTS=[],ARBITRARY_PROPERTY_PREFIX="arbitrary..",createClassGroupUtils=_=>{const v=createClassMap(_),{conflictingClassGroups:S,conflictingClassGroupModifiers:R}=_;return{getClassGroupId:k=>{if(k.startsWith("[")&&k.endsWith("]"))return getGroupIdForArbitraryProperty(k);const M=k.split(CLASS_PART_SEPARATOR),N=M[0]===""&&M.length>1?1:0;return getGroupRecursive(M,N,v)},getConflictingClassGroupIds:(k,M)=>{if(M){const N=R[k],D=S[k];return N?D?concatArrays(D,N):N:D||EMPTY_CONFLICTS}return S[k]||EMPTY_CONFLICTS}}},getGroupRecursive=(_,v,S)=>{if(_.length-v===0)return S.classGroupId;const T=_[v],A=S.nextPart.get(T);if(A){const D=getGroupRecursive(_,v+1,A);if(D)return D}const k=S.validators;if(k===null)return;const M=v===0?_.join(CLASS_PART_SEPARATOR):_.slice(v).join(CLASS_PART_SEPARATOR),N=k.length;for(let D=0;D<N;D++){const I=k[D];if(I.validator(M))return I.classGroupId}},getGroupIdForArbitraryProperty=_=>_.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const v=_.slice(1,-1),S=v.indexOf(":"),R=v.slice(0,S);return R?ARBITRARY_PROPERTY_PREFIX+R:void 0})(),createClassMap=_=>{const{theme:v,classGroups:S}=_;return processClassGroups(S,v)},processClassGroups=(_,v)=>{const S=createClassPartObject();for(const R in _){const T=_[R];processClassesRecursively(T,S,R,v)}return S},processClassesRecursively=(_,v,S,R)=>{const T=_.length;for(let A=0;A<T;A++){const k=_[A];processClassDefinition(k,v,S,R)}},processClassDefinition=(_,v,S,R)=>{if(typeof _=="string"){processStringDefinition(_,v,S);return}if(typeof _=="function"){processFunctionDefinition(_,v,S,R);return}processObjectDefinition(_,v,S,R)},processStringDefinition=(_,v,S)=>{const R=_===""?v:getPart(v,_);R.classGroupId=S},processFunctionDefinition=(_,v,S,R)=>{if(isThemeGetter(_)){processClassesRecursively(_(R),v,S,R);return}v.validators===null&&(v.validators=[]),v.validators.push(createClassValidatorObject(S,_))},processObjectDefinition=(_,v,S,R)=>{const T=Object.entries(_),A=T.length;for(let k=0;k<A;k++){const[M,N]=T[k];processClassesRecursively(N,getPart(v,M),S,R)}},getPart=(_,v)=>{let S=_;const R=v.split(CLASS_PART_SEPARATOR),T=R.length;for(let A=0;A<T;A++){const k=R[A];let M=S.nextPart.get(k);M||(M=createClassPartObject(),S.nextPart.set(k,M)),S=M}return S},isThemeGetter=_=>"isThemeGetter"in _&&_.isThemeGetter===!0,createLruCache=_=>{if(_<1)return{get:()=>{},set:()=>{}};let v=0,S=Object.create(null),R=Object.create(null);const T=(A,k)=>{S[A]=k,v++,v>_&&(v=0,R=S,S=Object.create(null))};return{get(A){let k=S[A];if(k!==void 0)return k;if((k=R[A])!==void 0)return T(A,k),k},set(A,k){A in S?S[A]=k:T(A,k)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",EMPTY_MODIFIERS=[],createResultObject=(_,v,S,R,T)=>({modifiers:_,hasImportantModifier:v,baseClassName:S,maybePostfixModifierPosition:R,isExternal:T}),createParseClassName=_=>{const{prefix:v,experimentalParseClassName:S}=_;let R=T=>{const A=[];let k=0,M=0,N=0,D;const I=T.length;for(let V=0;V<I;V++){const H=T[V];if(k===0&&M===0){if(H===MODIFIER_SEPARATOR){A.push(T.slice(N,V)),N=V+1;continue}if(H==="/"){D=V;continue}}H==="["?k++:H==="]"?k--:H==="("?M++:H===")"&&M--}const q=A.length===0?T:T.slice(N);let B=q,z=!1;q.endsWith(IMPORTANT_MODIFIER)?(B=q.slice(0,-1),z=!0):q.startsWith(IMPORTANT_MODIFIER)&&(B=q.slice(1),z=!0);const F=D&&D>N?D-N:void 0;return createResultObject(A,z,B,F)};if(v){const T=v+MODIFIER_SEPARATOR,A=R;R=k=>k.startsWith(T)?A(k.slice(T.length)):createResultObject(EMPTY_MODIFIERS,!1,k,void 0,!0)}if(S){const T=R;R=A=>S({className:A,parseClassName:T})}return R},createSortModifiers=_=>{const v=new Map;return _.orderSensitiveModifiers.forEach((S,R)=>{v.set(S,1e6+R)}),S=>{const R=[];let T=[];for(let A=0;A<S.length;A++){const k=S[A],M=k[0]==="[",N=v.has(k);M||N?(T.length>0&&(T.sort(),R.push(...T),T=[]),R.push(k)):T.push(k)}return T.length>0&&(T.sort(),R.push(...T)),R}},createConfigUtils=_=>({cache:createLruCache(_.cacheSize),parseClassName:createParseClassName(_),sortModifiers:createSortModifiers(_),...createClassGroupUtils(_)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_,v)=>{const{parseClassName:S,getClassGroupId:R,getConflictingClassGroupIds:T,sortModifiers:A}=v,k=[],M=_.trim().split(SPLIT_CLASSES_REGEX);let N="";for(let D=M.length-1;D>=0;D-=1){const I=M[D],{isExternal:q,modifiers:B,hasImportantModifier:z,baseClassName:F,maybePostfixModifierPosition:V}=S(I);if(q){N=I+(N.length>0?" "+N:N);continue}let H=!!V,W=R(H?F.substring(0,V):F);if(!W){if(!H){N=I+(N.length>0?" "+N:N);continue}if(W=R(F),!W){N=I+(N.length>0?" "+N:N);continue}H=!1}const Y=B.length===0?"":B.length===1?B[0]:A(B).join(":"),Z=z?Y+IMPORTANT_MODIFIER:Y,J=Z+W;if(k.indexOf(J)>-1)continue;k.push(J);const ne=T(W,H);for(let oe=0;oe<ne.length;++oe){const te=ne[oe];k.push(Z+te)}N=I+(N.length>0?" "+N:N)}return N},twJoin=(..._)=>{let v=0,S,R,T="";for(;v<_.length;)(S=_[v++])&&(R=toValue(S))&&(T&&(T+=" "),T+=R);return T},toValue=_=>{if(typeof _=="string")return _;let v,S="";for(let R=0;R<_.length;R++)_[R]&&(v=toValue(_[R]))&&(S&&(S+=" "),S+=v);return S},createTailwindMerge=(_,...v)=>{let S,R,T,A;const k=N=>{const D=v.reduce((I,q)=>q(I),_());return S=createConfigUtils(D),R=S.cache.get,T=S.cache.set,A=M,M(N)},M=N=>{const D=R(N);if(D)return D;const I=mergeClassList(N,S);return T(N,I),I};return A=k,(...N)=>A(twJoin(...N))},fallbackThemeArr=[],fromTheme=_=>{const v=S=>S[_]||fallbackThemeArr;return v.isThemeGetter=!0,v},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=_=>fractionRegex.test(_),isNumber=_=>!!_&&!Number.isNaN(Number(_)),isInteger=_=>!!_&&Number.isInteger(Number(_)),isPercent=_=>_.endsWith("%")&&isNumber(_.slice(0,-1)),isTshirtSize=_=>tshirtUnitRegex.test(_),isAny=()=>!0,isLengthOnly=_=>lengthUnitRegex.test(_)&&!colorFunctionRegex.test(_),isNever=()=>!1,isShadow=_=>shadowRegex.test(_),isImage=_=>imageRegex.test(_),isAnyNonArbitrary=_=>!isArbitraryValue(_)&&!isArbitraryVariable(_),isArbitrarySize=_=>getIsArbitraryValue(_,isLabelSize,isNever),isArbitraryValue=_=>arbitraryValueRegex.test(_),isArbitraryLength=_=>getIsArbitraryValue(_,isLabelLength,isLengthOnly),isArbitraryNumber=_=>getIsArbitraryValue(_,isLabelNumber,isNumber),isArbitraryPosition=_=>getIsArbitraryValue(_,isLabelPosition,isNever),isArbitraryImage=_=>getIsArbitraryValue(_,isLabelImage,isImage),isArbitraryShadow=_=>getIsArbitraryValue(_,isLabelShadow,isShadow),isArbitraryVariable=_=>arbitraryVariableRegex.test(_),isArbitraryVariableLength=_=>getIsArbitraryVariable(_,isLabelLength),isArbitraryVariableFamilyName=_=>getIsArbitraryVariable(_,isLabelFamilyName),isArbitraryVariablePosition=_=>getIsArbitraryVariable(_,isLabelPosition),isArbitraryVariableSize=_=>getIsArbitraryVariable(_,isLabelSize),isArbitraryVariableImage=_=>getIsArbitraryVariable(_,isLabelImage),isArbitraryVariableShadow=_=>getIsArbitraryVariable(_,isLabelShadow,!0),getIsArbitraryValue=(_,v,S)=>{const R=arbitraryValueRegex.exec(_);return R?R[1]?v(R[1]):S(R[2]):!1},getIsArbitraryVariable=(_,v,S=!1)=>{const R=arbitraryVariableRegex.exec(_);return R?R[1]?v(R[1]):S:!1},isLabelPosition=_=>_==="position"||_==="percentage",isLabelImage=_=>_==="image"||_==="url",isLabelSize=_=>_==="length"||_==="size"||_==="bg-size",isLabelLength=_=>_==="length",isLabelNumber=_=>_==="number",isLabelFamilyName=_=>_==="family-name",isLabelShadow=_=>_==="shadow",getDefaultConfig=()=>{const _=fromTheme("color"),v=fromTheme("font"),S=fromTheme("text"),R=fromTheme("font-weight"),T=fromTheme("tracking"),A=fromTheme("leading"),k=fromTheme("breakpoint"),M=fromTheme("container"),N=fromTheme("spacing"),D=fromTheme("radius"),I=fromTheme("shadow"),q=fromTheme("inset-shadow"),B=fromTheme("text-shadow"),z=fromTheme("drop-shadow"),F=fromTheme("blur"),V=fromTheme("perspective"),H=fromTheme("aspect"),W=fromTheme("ease"),Y=fromTheme("animate"),Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ne=()=>[...J(),isArbitraryVariable,isArbitraryValue],oe=()=>["auto","hidden","clip","visible","scroll"],te=()=>["auto","contain","none"],se=()=>[isArbitraryVariable,isArbitraryValue,N],le=()=>[isFraction,"full","auto",...se()],ue=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],ce=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],ge=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],me=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],Ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_e=()=>["start","end","center","stretch","center-safe","end-safe"],ye=()=>["auto",...se()],be=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...se()],Se=()=>[_,isArbitraryVariable,isArbitraryValue],De=()=>[...J(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],xe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],pe=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],we=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],Oe=()=>["","none","full",D,isArbitraryVariable,isArbitraryValue],Ce=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength],Pe=()=>["solid","dashed","dotted","double"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition],ze=()=>["","none",F,isArbitraryVariable,isArbitraryValue],Fe=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],Ie=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],Le=()=>[isNumber,isArbitraryVariable,isArbitraryValue],$e=()=>[isFraction,"full",...se()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,H]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,M]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ne()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:te()}],"overscroll-x":[{"overscroll-x":te()}],"overscroll-y":[{"overscroll-y":te()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:le()}],"inset-x":[{"inset-x":le()}],"inset-y":[{"inset-y":le()}],start:[{start:le()}],end:[{end:le()}],top:[{top:le()}],right:[{right:le()}],bottom:[{bottom:le()}],left:[{left:le()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",M,...se()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":ue()}],"col-start-end":[{col:ce()}],"col-start":[{"col-start":ge()}],"col-end":[{"col-end":ge()}],"grid-rows":[{"grid-rows":ue()}],"row-start-end":[{row:ce()}],"row-start":[{"row-start":ge()}],"row-end":[{"row-end":ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":me()}],"auto-rows":[{"auto-rows":me()}],gap:[{gap:se()}],"gap-x":[{"gap-x":se()}],"gap-y":[{"gap-y":se()}],"justify-content":[{justify:[...Ee(),"normal"]}],"justify-items":[{"justify-items":[..._e(),"normal"]}],"justify-self":[{"justify-self":["auto",..._e()]}],"align-content":[{content:["normal",...Ee()]}],"align-items":[{items:[..._e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._e(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ee()}],"place-items":[{"place-items":[..._e(),"baseline"]}],"place-self":[{"place-self":["auto",..._e()]}],p:[{p:se()}],px:[{px:se()}],py:[{py:se()}],ps:[{ps:se()}],pe:[{pe:se()}],pt:[{pt:se()}],pr:[{pr:se()}],pb:[{pb:se()}],pl:[{pl:se()}],m:[{m:ye()}],mx:[{mx:ye()}],my:[{my:ye()}],ms:[{ms:ye()}],me:[{me:ye()}],mt:[{mt:ye()}],mr:[{mr:ye()}],mb:[{mb:ye()}],ml:[{ml:ye()}],"space-x":[{"space-x":se()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":se()}],"space-y-reverse":["space-y-reverse"],size:[{size:be()}],w:[{w:[M,"screen",...be()]}],"min-w":[{"min-w":[M,"screen","none",...be()]}],"max-w":[{"max-w":[M,"screen","none","prose",{screen:[k]},...be()]}],h:[{h:["screen","lh",...be()]}],"min-h":[{"min-h":["screen","lh","none",...be()]}],"max-h":[{"max-h":["screen","lh",...be()]}],"font-size":[{text:["base",S,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[R,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,v]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[T,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[A,...se()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Se()}],"text-color":[{text:Se()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:Se()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:se()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:De()}],"bg-repeat":[{bg:xe()}],"bg-size":[{bg:pe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:Se()}],"gradient-from-pos":[{from:we()}],"gradient-via-pos":[{via:we()}],"gradient-to-pos":[{to:we()}],"gradient-from":[{from:Se()}],"gradient-via":[{via:Se()}],"gradient-to":[{to:Se()}],rounded:[{rounded:Oe()}],"rounded-s":[{"rounded-s":Oe()}],"rounded-e":[{"rounded-e":Oe()}],"rounded-t":[{"rounded-t":Oe()}],"rounded-r":[{"rounded-r":Oe()}],"rounded-b":[{"rounded-b":Oe()}],"rounded-l":[{"rounded-l":Oe()}],"rounded-ss":[{"rounded-ss":Oe()}],"rounded-se":[{"rounded-se":Oe()}],"rounded-ee":[{"rounded-ee":Oe()}],"rounded-es":[{"rounded-es":Oe()}],"rounded-tl":[{"rounded-tl":Oe()}],"rounded-tr":[{"rounded-tr":Oe()}],"rounded-br":[{"rounded-br":Oe()}],"rounded-bl":[{"rounded-bl":Oe()}],"border-w":[{border:Ce()}],"border-w-x":[{"border-x":Ce()}],"border-w-y":[{"border-y":Ce()}],"border-w-s":[{"border-s":Ce()}],"border-w-e":[{"border-e":Ce()}],"border-w-t":[{"border-t":Ce()}],"border-w-r":[{"border-r":Ce()}],"border-w-b":[{"border-b":Ce()}],"border-w-l":[{"border-l":Ce()}],"divide-x":[{"divide-x":Ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Pe(),"hidden","none"]}],"divide-style":[{divide:[...Pe(),"hidden","none"]}],"border-color":[{border:Se()}],"border-color-x":[{"border-x":Se()}],"border-color-y":[{"border-y":Se()}],"border-color-s":[{"border-s":Se()}],"border-color-e":[{"border-e":Se()}],"border-color-t":[{"border-t":Se()}],"border-color-r":[{"border-r":Se()}],"border-color-b":[{"border-b":Se()}],"border-color-l":[{"border-l":Se()}],"divide-color":[{divide:Se()}],"outline-style":[{outline:[...Pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:Se()}],shadow:[{shadow:["","none",I,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:Se()}],"inset-shadow":[{"inset-shadow":["none",q,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":Se()}],"ring-w":[{ring:Ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Se()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":Se()}],"inset-ring-w":[{"inset-ring":Ce()}],"inset-ring-color":[{"inset-ring":Se()}],"text-shadow":[{"text-shadow":["none",B,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":Se()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":Se()}],"mask-image-linear-to-color":[{"mask-linear-to":Se()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":Se()}],"mask-image-t-to-color":[{"mask-t-to":Se()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":Se()}],"mask-image-r-to-color":[{"mask-r-to":Se()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":Se()}],"mask-image-b-to-color":[{"mask-b-to":Se()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":Se()}],"mask-image-l-to-color":[{"mask-l-to":Se()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":Se()}],"mask-image-x-to-color":[{"mask-x-to":Se()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":Se()}],"mask-image-y-to-color":[{"mask-y-to":Se()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":Se()}],"mask-image-radial-to-color":[{"mask-radial-to":Se()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":J()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":Se()}],"mask-image-conic-to-color":[{"mask-conic-to":Se()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:De()}],"mask-repeat":[{mask:xe()}],"mask-size":[{mask:pe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:ze()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",z,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":Se()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":ze()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":se()}],"border-spacing-x":[{"border-spacing-x":se()}],"border-spacing-y":[{"border-spacing-y":se()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",W,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",Y,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[V,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":ne()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:Ie()}],"scale-x":[{"scale-x":Ie()}],"scale-y":[{"scale-y":Ie()}],"scale-z":[{"scale-z":Ie()}],"scale-3d":["scale-3d"],skew:[{skew:Le()}],"skew-x":[{"skew-x":Le()}],"skew-y":[{"skew-y":Le()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:ne()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:Se()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Se()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":se()}],"scroll-mx":[{"scroll-mx":se()}],"scroll-my":[{"scroll-my":se()}],"scroll-ms":[{"scroll-ms":se()}],"scroll-me":[{"scroll-me":se()}],"scroll-mt":[{"scroll-mt":se()}],"scroll-mr":[{"scroll-mr":se()}],"scroll-mb":[{"scroll-mb":se()}],"scroll-ml":[{"scroll-ml":se()}],"scroll-p":[{"scroll-p":se()}],"scroll-px":[{"scroll-px":se()}],"scroll-py":[{"scroll-py":se()}],"scroll-ps":[{"scroll-ps":se()}],"scroll-pe":[{"scroll-pe":se()}],"scroll-pt":[{"scroll-pt":se()}],"scroll-pr":[{"scroll-pr":se()}],"scroll-pb":[{"scroll-pb":se()}],"scroll-pl":[{"scroll-pl":se()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...Se()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...Se()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn$1(..._){return twMerge(clsx(_))}const Card=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("rounded-xl border bg-card text-card-foreground shadow",_),...v}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("flex flex-col space-y-1.5 p-6",_),...v}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("font-semibold leading-none tracking-tight",_),...v}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("text-sm text-muted-foreground",_),...v}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("p-6 pt-0",_),...v}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("flex items-center p-6 pt-0",_),...v}));CardFooter.displayName="CardFooter";const isString$1=_=>typeof _=="string",defer=()=>{let _,v;const S=new Promise((R,T)=>{_=R,v=T});return S.resolve=_,S.reject=v,S},makeString=_=>_==null?"":""+_,copy$1=(_,v,S)=>{_.forEach(R=>{v[R]&&(S[R]=v[R])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=_=>_&&_.indexOf("###")>-1?_.replace(lastOfPathSeparatorRegExp,"."):_,canNotTraverseDeeper=_=>!_||isString$1(_),getLastOfPath=(_,v,S)=>{const R=isString$1(v)?v.split("."):v;let T=0;for(;T<R.length-1;){if(canNotTraverseDeeper(_))return{};const A=cleanKey(R[T]);!_[A]&&S&&(_[A]=new S),Object.prototype.hasOwnProperty.call(_,A)?_=_[A]:_={},++T}return canNotTraverseDeeper(_)?{}:{obj:_,k:cleanKey(R[T])}},setPath=(_,v,S)=>{const{obj:R,k:T}=getLastOfPath(_,v,Object);if(R!==void 0||v.length===1){R[T]=S;return}let A=v[v.length-1],k=v.slice(0,v.length-1),M=getLastOfPath(_,k,Object);for(;M.obj===void 0&&k.length;)A=`${k[k.length-1]}.${A}`,k=k.slice(0,k.length-1),M=getLastOfPath(_,k,Object),M?.obj&&typeof M.obj[`${M.k}.${A}`]<"u"&&(M.obj=void 0);M.obj[`${M.k}.${A}`]=S},pushPath=(_,v,S,R)=>{const{obj:T,k:A}=getLastOfPath(_,v,Object);T[A]=T[A]||[],T[A].push(S)},getPath=(_,v)=>{const{obj:S,k:R}=getLastOfPath(_,v);if(S&&Object.prototype.hasOwnProperty.call(S,R))return S[R]},getPathWithDefaults=(_,v,S)=>{const R=getPath(_,S);return R!==void 0?R:getPath(v,S)},deepExtend=(_,v,S)=>{for(const R in v)R!=="__proto__"&&R!=="constructor"&&(R in _?isString$1(_[R])||_[R]instanceof String||isString$1(v[R])||v[R]instanceof String?S&&(_[R]=v[R]):deepExtend(_[R],v[R],S):_[R]=v[R]);return _},regexEscape=_=>_.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=_=>isString$1(_)?_.replace(/[&<>"'\/]/g,v=>_entityMap[v]):_;class RegExpCache{constructor(v){this.capacity=v,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(v){const S=this.regExpMap.get(v);if(S!==void 0)return S;const R=new RegExp(v);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(v,R),this.regExpQueue.push(v),R}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(_,v,S)=>{v=v||"",S=S||"";const R=chars.filter(k=>v.indexOf(k)<0&&S.indexOf(k)<0);if(R.length===0)return!0;const T=looksLikeObjectPathRegExpCache.getRegExp(`(${R.map(k=>k==="?"?"\\?":k).join("|")})`);let A=!T.test(_);if(!A){const k=_.indexOf(S);k>0&&!T.test(_.substring(0,k))&&(A=!0)}return A},deepFind=(_,v,S=".")=>{if(!_)return;if(_[v])return Object.prototype.hasOwnProperty.call(_,v)?_[v]:void 0;const R=v.split(S);let T=_;for(let A=0;A<R.length;){if(!T||typeof T!="object")return;let k,M="";for(let N=A;N<R.length;++N)if(N!==A&&(M+=S),M+=R[N],k=T[M],k!==void 0){if(["string","number","boolean"].indexOf(typeof k)>-1&&N<R.length-1)continue;A+=N-A+1;break}T=k}return T},getCleanedCode=_=>_?.replace("_","-"),consoleLogger={type:"logger",log(_){this.output("log",_)},warn(_){this.output("warn",_)},error(_){this.output("error",_)},output(_,v){console?.[_]?.apply?.(console,v)}};class Logger{constructor(v,S={}){this.init(v,S)}init(v,S={}){this.prefix=S.prefix||"i18next:",this.logger=v||consoleLogger,this.options=S,this.debug=S.debug}log(...v){return this.forward(v,"log","",!0)}warn(...v){return this.forward(v,"warn","",!0)}error(...v){return this.forward(v,"error","")}deprecate(...v){return this.forward(v,"warn","WARNING DEPRECATED: ",!0)}forward(v,S,R,T){return T&&!this.debug?null:(isString$1(v[0])&&(v[0]=`${R}${this.prefix} ${v[0]}`),this.logger[S](v))}create(v){return new Logger(this.logger,{prefix:`${this.prefix}:${v}:`,...this.options})}clone(v){return v=v||this.options,v.prefix=v.prefix||this.prefix,new Logger(this.logger,v)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(v,S){return v.split(" ").forEach(R=>{this.observers[R]||(this.observers[R]=new Map);const T=this.observers[R].get(S)||0;this.observers[R].set(S,T+1)}),this}off(v,S){if(this.observers[v]){if(!S){delete this.observers[v];return}this.observers[v].delete(S)}}emit(v,...S){this.observers[v]&&Array.from(this.observers[v].entries()).forEach(([T,A])=>{for(let k=0;k<A;k++)T(...S)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([T,A])=>{for(let k=0;k<A;k++)T.apply(T,[v,...S])})}}class ResourceStore extends EventEmitter{constructor(v,S={ns:["translation"],defaultNS:"translation"}){super(),this.data=v||{},this.options=S,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(v){this.options.ns.indexOf(v)<0&&this.options.ns.push(v)}removeNamespaces(v){const S=this.options.ns.indexOf(v);S>-1&&this.options.ns.splice(S,1)}getResource(v,S,R,T={}){const A=T.keySeparator!==void 0?T.keySeparator:this.options.keySeparator,k=T.ignoreJSONStructure!==void 0?T.ignoreJSONStructure:this.options.ignoreJSONStructure;let M;v.indexOf(".")>-1?M=v.split("."):(M=[v,S],R&&(Array.isArray(R)?M.push(...R):isString$1(R)&&A?M.push(...R.split(A)):M.push(R)));const N=getPath(this.data,M);return!N&&!S&&!R&&v.indexOf(".")>-1&&(v=M[0],S=M[1],R=M.slice(2).join(".")),N||!k||!isString$1(R)?N:deepFind(this.data?.[v]?.[S],R,A)}addResource(v,S,R,T,A={silent:!1}){const k=A.keySeparator!==void 0?A.keySeparator:this.options.keySeparator;let M=[v,S];R&&(M=M.concat(k?R.split(k):R)),v.indexOf(".")>-1&&(M=v.split("."),T=S,S=M[1]),this.addNamespaces(S),setPath(this.data,M,T),A.silent||this.emit("added",v,S,R,T)}addResources(v,S,R,T={silent:!1}){for(const A in R)(isString$1(R[A])||Array.isArray(R[A]))&&this.addResource(v,S,A,R[A],{silent:!0});T.silent||this.emit("added",v,S,R)}addResourceBundle(v,S,R,T,A,k={silent:!1,skipCopy:!1}){let M=[v,S];v.indexOf(".")>-1&&(M=v.split("."),T=R,R=S,S=M[1]),this.addNamespaces(S);let N=getPath(this.data,M)||{};k.skipCopy||(R=JSON.parse(JSON.stringify(R))),T?deepExtend(N,R,A):N={...N,...R},setPath(this.data,M,N),k.silent||this.emit("added",v,S,R)}removeResourceBundle(v,S){this.hasResourceBundle(v,S)&&delete this.data[v][S],this.removeNamespaces(S),this.emit("removed",v,S)}hasResourceBundle(v,S){return this.getResource(v,S)!==void 0}getResourceBundle(v,S){return S||(S=this.options.defaultNS),this.getResource(v,S)}getDataByLanguage(v){return this.data[v]}hasLanguageSomeTranslations(v){const S=this.getDataByLanguage(v);return!!(S&&Object.keys(S)||[]).find(T=>S[T]&&Object.keys(S[T]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(_){this.processors[_.name]=_},handle(_,v,S,R,T){return _.forEach(A=>{v=this.processors[A]?.process(v,S,R,T)??v}),v}};const PATH_KEY=Symbol("i18next/PATH_KEY");function createProxy(){const _=[],v=Object.create(null);let S;return v.get=(R,T)=>(S?.revoke?.(),T===PATH_KEY?_:(_.push(T),S=Proxy.revocable(R,v),S.proxy)),Proxy.revocable(Object.create(null),v).proxy}function keysFromSelector(_,v){const{[PATH_KEY]:S}=_(createProxy());return S.join(v?.keySeparator??".")}const checkedLoadedFor={},shouldHandleAsObject=_=>!isString$1(_)&&typeof _!="boolean"&&typeof _!="number";class Translator extends EventEmitter{constructor(v,S={}){super(),copy$1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],v,this),this.options=S,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(v){v&&(this.language=v)}exists(v,S={interpolation:{}}){const R={...S};if(v==null)return!1;const T=this.resolve(v,R);if(T?.res===void 0)return!1;const A=shouldHandleAsObject(T.res);return!(R.returnObjects===!1&&A)}extractFromKey(v,S){let R=S.nsSeparator!==void 0?S.nsSeparator:this.options.nsSeparator;R===void 0&&(R=":");const T=S.keySeparator!==void 0?S.keySeparator:this.options.keySeparator;let A=S.ns||this.options.defaultNS||[];const k=R&&v.indexOf(R)>-1,M=!this.options.userDefinedKeySeparator&&!S.keySeparator&&!this.options.userDefinedNsSeparator&&!S.nsSeparator&&!looksLikeObjectPath(v,R,T);if(k&&!M){const N=v.match(this.interpolator.nestingRegexp);if(N&&N.length>0)return{key:v,namespaces:isString$1(A)?[A]:A};const D=v.split(R);(R!==T||R===T&&this.options.ns.indexOf(D[0])>-1)&&(A=D.shift()),v=D.join(T)}return{key:v,namespaces:isString$1(A)?[A]:A}}translate(v,S,R){let T=typeof S=="object"?{...S}:S;if(typeof T!="object"&&this.options.overloadTranslationOptionHandler&&(T=this.options.overloadTranslationOptionHandler(arguments)),typeof T=="object"&&(T={...T}),T||(T={}),v==null)return"";typeof v=="function"&&(v=keysFromSelector(v,{...this.options,...T})),Array.isArray(v)||(v=[String(v)]);const A=T.returnDetails!==void 0?T.returnDetails:this.options.returnDetails,k=T.keySeparator!==void 0?T.keySeparator:this.options.keySeparator,{key:M,namespaces:N}=this.extractFromKey(v[v.length-1],T),D=N[N.length-1];let I=T.nsSeparator!==void 0?T.nsSeparator:this.options.nsSeparator;I===void 0&&(I=":");const q=T.lng||this.language,B=T.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(q?.toLowerCase()==="cimode")return B?A?{res:`${D}${I}${M}`,usedKey:M,exactUsedKey:M,usedLng:q,usedNS:D,usedParams:this.getUsedParamsDetails(T)}:`${D}${I}${M}`:A?{res:M,usedKey:M,exactUsedKey:M,usedLng:q,usedNS:D,usedParams:this.getUsedParamsDetails(T)}:M;const z=this.resolve(v,T);let F=z?.res;const V=z?.usedKey||M,H=z?.exactUsedKey||M,W=["[object Number]","[object Function]","[object RegExp]"],Y=T.joinArrays!==void 0?T.joinArrays:this.options.joinArrays,Z=!this.i18nFormat||this.i18nFormat.handleAsObject,J=T.count!==void 0&&!isString$1(T.count),ne=Translator.hasDefaultValue(T),oe=J?this.pluralResolver.getSuffix(q,T.count,T):"",te=T.ordinal&&J?this.pluralResolver.getSuffix(q,T.count,{ordinal:!1}):"",se=J&&!T.ordinal&&T.count===0,le=se&&T[`defaultValue${this.options.pluralSeparator}zero`]||T[`defaultValue${oe}`]||T[`defaultValue${te}`]||T.defaultValue;let ue=F;Z&&!F&&ne&&(ue=le);const ce=shouldHandleAsObject(ue),ge=Object.prototype.toString.apply(ue);if(Z&&ue&&ce&&W.indexOf(ge)<0&&!(isString$1(Y)&&Array.isArray(ue))){if(!T.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const me=this.options.returnedObjectHandler?this.options.returnedObjectHandler(V,ue,{...T,ns:N}):`key '${M} (${this.language})' returned an object instead of string.`;return A?(z.res=me,z.usedParams=this.getUsedParamsDetails(T),z):me}if(k){const me=Array.isArray(ue),Ee=me?[]:{},_e=me?H:V;for(const ye in ue)if(Object.prototype.hasOwnProperty.call(ue,ye)){const be=`${_e}${k}${ye}`;ne&&!F?Ee[ye]=this.translate(be,{...T,defaultValue:shouldHandleAsObject(le)?le[ye]:void 0,joinArrays:!1,ns:N}):Ee[ye]=this.translate(be,{...T,joinArrays:!1,ns:N}),Ee[ye]===be&&(Ee[ye]=ue[ye])}F=Ee}}else if(Z&&isString$1(Y)&&Array.isArray(F))F=F.join(Y),F&&(F=this.extendTranslation(F,v,T,R));else{let me=!1,Ee=!1;!this.isValidLookup(F)&&ne&&(me=!0,F=le),this.isValidLookup(F)||(Ee=!0,F=M);const ye=(T.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ee?void 0:F,be=ne&&le!==F&&this.options.updateMissing;if(Ee||me||be){if(this.logger.log(be?"updateKey":"missingKey",q,D,M,be?le:F),k){const pe=this.resolve(M,{...T,keySeparator:!1});pe&&pe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Se=[];const De=this.languageUtils.getFallbackCodes(this.options.fallbackLng,T.lng||this.language);if(this.options.saveMissingTo==="fallback"&&De&&De[0])for(let pe=0;pe<De.length;pe++)Se.push(De[pe]);else this.options.saveMissingTo==="all"?Se=this.languageUtils.toResolveHierarchy(T.lng||this.language):Se.push(T.lng||this.language);const xe=(pe,we,Oe)=>{const Ce=ne&&Oe!==F?Oe:ye;this.options.missingKeyHandler?this.options.missingKeyHandler(pe,D,we,Ce,be,T):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(pe,D,we,Ce,be,T),this.emit("missingKey",pe,D,we,F)};this.options.saveMissing&&(this.options.saveMissingPlurals&&J?Se.forEach(pe=>{const we=this.pluralResolver.getSuffixes(pe,T);se&&T[`defaultValue${this.options.pluralSeparator}zero`]&&we.indexOf(`${this.options.pluralSeparator}zero`)<0&&we.push(`${this.options.pluralSeparator}zero`),we.forEach(Oe=>{xe([pe],M+Oe,T[`defaultValue${Oe}`]||le)})}):xe(Se,M,le))}F=this.extendTranslation(F,v,T,z,R),Ee&&F===M&&this.options.appendNamespaceToMissingKey&&(F=`${D}${I}${M}`),(Ee||me)&&this.options.parseMissingKeyHandler&&(F=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${D}${I}${M}`:M,me?F:void 0,T))}return A?(z.res=F,z.usedParams=this.getUsedParamsDetails(T),z):F}extendTranslation(v,S,R,T,A){if(this.i18nFormat?.parse)v=this.i18nFormat.parse(v,{...this.options.interpolation.defaultVariables,...R},R.lng||this.language||T.usedLng,T.usedNS,T.usedKey,{resolved:T});else if(!R.skipInterpolation){R.interpolation&&this.interpolator.init({...R,interpolation:{...this.options.interpolation,...R.interpolation}});const N=isString$1(v)&&(R?.interpolation?.skipOnVariables!==void 0?R.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let D;if(N){const q=v.match(this.interpolator.nestingRegexp);D=q&&q.length}let I=R.replace&&!isString$1(R.replace)?R.replace:R;if(this.options.interpolation.defaultVariables&&(I={...this.options.interpolation.defaultVariables,...I}),v=this.interpolator.interpolate(v,I,R.lng||this.language||T.usedLng,R),N){const q=v.match(this.interpolator.nestingRegexp),B=q&&q.length;D<B&&(R.nest=!1)}!R.lng&&T&&T.res&&(R.lng=this.language||T.usedLng),R.nest!==!1&&(v=this.interpolator.nest(v,(...q)=>A?.[0]===q[0]&&!R.context?(this.logger.warn(`It seems you are nesting recursively key: ${q[0]} in key: ${S[0]}`),null):this.translate(...q,S),R)),R.interpolation&&this.interpolator.reset()}const k=R.postProcess||this.options.postProcess,M=isString$1(k)?[k]:k;return v!=null&&M?.length&&R.applyPostProcessor!==!1&&(v=postProcessor.handle(M,v,S,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...T,usedParams:this.getUsedParamsDetails(R)},...R}:R,this)),v}resolve(v,S={}){let R,T,A,k,M;return isString$1(v)&&(v=[v]),v.forEach(N=>{if(this.isValidLookup(R))return;const D=this.extractFromKey(N,S),I=D.key;T=I;let q=D.namespaces;this.options.fallbackNS&&(q=q.concat(this.options.fallbackNS));const B=S.count!==void 0&&!isString$1(S.count),z=B&&!S.ordinal&&S.count===0,F=S.context!==void 0&&(isString$1(S.context)||typeof S.context=="number")&&S.context!=="",V=S.lngs?S.lngs:this.languageUtils.toResolveHierarchy(S.lng||this.language,S.fallbackLng);q.forEach(H=>{this.isValidLookup(R)||(M=H,!checkedLoadedFor[`${V[0]}-${H}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(M)&&(checkedLoadedFor[`${V[0]}-${H}`]=!0,this.logger.warn(`key "${T}" for languages "${V.join(", ")}" won't get resolved as namespace "${M}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),V.forEach(W=>{if(this.isValidLookup(R))return;k=W;const Y=[I];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Y,I,W,H,S);else{let J;B&&(J=this.pluralResolver.getSuffix(W,S.count,S));const ne=`${this.options.pluralSeparator}zero`,oe=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(B&&(S.ordinal&&J.indexOf(oe)===0&&Y.push(I+J.replace(oe,this.options.pluralSeparator)),Y.push(I+J),z&&Y.push(I+ne)),F){const te=`${I}${this.options.contextSeparator||"_"}${S.context}`;Y.push(te),B&&(S.ordinal&&J.indexOf(oe)===0&&Y.push(te+J.replace(oe,this.options.pluralSeparator)),Y.push(te+J),z&&Y.push(te+ne))}}let Z;for(;Z=Y.pop();)this.isValidLookup(R)||(A=Z,R=this.getResource(W,H,Z,S))}))})}),{res:R,usedKey:T,exactUsedKey:A,usedLng:k,usedNS:M}}isValidLookup(v){return v!==void 0&&!(!this.options.returnNull&&v===null)&&!(!this.options.returnEmptyString&&v==="")}getResource(v,S,R,T={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(v,S,R,T):this.resourceStore.getResource(v,S,R,T)}getUsedParamsDetails(v={}){const S=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],R=v.replace&&!isString$1(v.replace);let T=R?v.replace:v;if(R&&typeof v.count<"u"&&(T.count=v.count),this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),!R){T={...T};for(const A of S)delete T[A]}return T}static hasDefaultValue(v){const S="defaultValue";for(const R in v)if(Object.prototype.hasOwnProperty.call(v,R)&&S===R.substring(0,S.length)&&v[R]!==void 0)return!0;return!1}}class LanguageUtil{constructor(v){this.options=v,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(v){if(v=getCleanedCode(v),!v||v.indexOf("-")<0)return null;const S=v.split("-");return S.length===2||(S.pop(),S[S.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(S.join("-"))}getLanguagePartFromCode(v){if(v=getCleanedCode(v),!v||v.indexOf("-")<0)return v;const S=v.split("-");return this.formatLanguageCode(S[0])}formatLanguageCode(v){if(isString$1(v)&&v.indexOf("-")>-1){let S;try{S=Intl.getCanonicalLocales(v)[0]}catch{}return S&&this.options.lowerCaseLng&&(S=S.toLowerCase()),S||(this.options.lowerCaseLng?v.toLowerCase():v)}return this.options.cleanCode||this.options.lowerCaseLng?v.toLowerCase():v}isSupportedCode(v){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(v=this.getLanguagePartFromCode(v)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(v)>-1}getBestMatchFromCodes(v){if(!v)return null;let S;return v.forEach(R=>{if(S)return;const T=this.formatLanguageCode(R);(!this.options.supportedLngs||this.isSupportedCode(T))&&(S=T)}),!S&&this.options.supportedLngs&&v.forEach(R=>{if(S)return;const T=this.getScriptPartFromCode(R);if(this.isSupportedCode(T))return S=T;const A=this.getLanguagePartFromCode(R);if(this.isSupportedCode(A))return S=A;S=this.options.supportedLngs.find(k=>{if(k===A)return k;if(!(k.indexOf("-")<0&&A.indexOf("-")<0)&&(k.indexOf("-")>0&&A.indexOf("-")<0&&k.substring(0,k.indexOf("-"))===A||k.indexOf(A)===0&&A.length>1))return k})}),S||(S=this.getFallbackCodes(this.options.fallbackLng)[0]),S}getFallbackCodes(v,S){if(!v)return[];if(typeof v=="function"&&(v=v(S)),isString$1(v)&&(v=[v]),Array.isArray(v))return v;if(!S)return v.default||[];let R=v[S];return R||(R=v[this.getScriptPartFromCode(S)]),R||(R=v[this.formatLanguageCode(S)]),R||(R=v[this.getLanguagePartFromCode(S)]),R||(R=v.default),R||[]}toResolveHierarchy(v,S){const R=this.getFallbackCodes((S===!1?[]:S)||this.options.fallbackLng||[],v),T=[],A=k=>{k&&(this.isSupportedCode(k)?T.push(k):this.logger.warn(`rejecting language code not found in supportedLngs: ${k}`))};return isString$1(v)&&(v.indexOf("-")>-1||v.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&A(this.formatLanguageCode(v)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&A(this.getScriptPartFromCode(v)),this.options.load!=="currentOnly"&&A(this.getLanguagePartFromCode(v))):isString$1(v)&&A(this.formatLanguageCode(v)),R.forEach(k=>{T.indexOf(k)<0&&A(this.formatLanguageCode(k))}),T}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:_=>_===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(v,S={}){this.languageUtils=v,this.options=S,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(v,S={}){const R=getCleanedCode(v==="dev"?"en":v),T=S.ordinal?"ordinal":"cardinal",A=JSON.stringify({cleanedCode:R,type:T});if(A in this.pluralRulesCache)return this.pluralRulesCache[A];let k;try{k=new Intl.PluralRules(R,{type:T})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!v.match(/-|_/))return dummyRule;const N=this.languageUtils.getLanguagePartFromCode(v);k=this.getRule(N,S)}return this.pluralRulesCache[A]=k,k}needsPlural(v,S={}){let R=this.getRule(v,S);return R||(R=this.getRule("dev",S)),R?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(v,S,R={}){return this.getSuffixes(v,R).map(T=>`${S}${T}`)}getSuffixes(v,S={}){let R=this.getRule(v,S);return R||(R=this.getRule("dev",S)),R?R.resolvedOptions().pluralCategories.sort((T,A)=>suffixesOrder[T]-suffixesOrder[A]).map(T=>`${this.options.prepend}${S.ordinal?`ordinal${this.options.prepend}`:""}${T}`):[]}getSuffix(v,S,R={}){const T=this.getRule(v,R);return T?`${this.options.prepend}${R.ordinal?`ordinal${this.options.prepend}`:""}${T.select(S)}`:(this.logger.warn(`no plural rule found for: ${v}`),this.getSuffix("dev",S,R))}}const deepFindWithDefaults=(_,v,S,R=".",T=!0)=>{let A=getPathWithDefaults(_,v,S);return!A&&T&&isString$1(S)&&(A=deepFind(_,S,R),A===void 0&&(A=deepFind(v,S,R))),A},regexSafe=_=>_.replace(/\$/g,"$$$$");class Interpolator{constructor(v={}){this.logger=baseLogger.create("interpolator"),this.options=v,this.format=v?.interpolation?.format||(S=>S),this.init(v)}init(v={}){v.interpolation||(v.interpolation={escapeValue:!0});const{escape:S,escapeValue:R,useRawValueToEscape:T,prefix:A,prefixEscaped:k,suffix:M,suffixEscaped:N,formatSeparator:D,unescapeSuffix:I,unescapePrefix:q,nestingPrefix:B,nestingPrefixEscaped:z,nestingSuffix:F,nestingSuffixEscaped:V,nestingOptionsSeparator:H,maxReplaces:W,alwaysFormat:Y}=v.interpolation;this.escape=S!==void 0?S:escape,this.escapeValue=R!==void 0?R:!0,this.useRawValueToEscape=T!==void 0?T:!1,this.prefix=A?regexEscape(A):k||"{{",this.suffix=M?regexEscape(M):N||"}}",this.formatSeparator=D||",",this.unescapePrefix=I?"":q||"-",this.unescapeSuffix=this.unescapePrefix?"":I||"",this.nestingPrefix=B?regexEscape(B):z||regexEscape("$t("),this.nestingSuffix=F?regexEscape(F):V||regexEscape(")"),this.nestingOptionsSeparator=H||",",this.maxReplaces=W||1e3,this.alwaysFormat=Y!==void 0?Y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const v=(S,R)=>S?.source===R?(S.lastIndex=0,S):new RegExp(R,"g");this.regexp=v(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=v(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=v(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(v,S,R,T){let A,k,M;const N=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},D=z=>{if(z.indexOf(this.formatSeparator)<0){const W=deepFindWithDefaults(S,N,z,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(W,void 0,R,{...T,...S,interpolationkey:z}):W}const F=z.split(this.formatSeparator),V=F.shift().trim(),H=F.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(S,N,V,this.options.keySeparator,this.options.ignoreJSONStructure),H,R,{...T,...S,interpolationkey:V})};this.resetRegExp();const I=T?.missingInterpolationHandler||this.options.missingInterpolationHandler,q=T?.interpolation?.skipOnVariables!==void 0?T.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:z=>regexSafe(z)},{regex:this.regexp,safeValue:z=>this.escapeValue?regexSafe(this.escape(z)):regexSafe(z)}].forEach(z=>{for(M=0;A=z.regex.exec(v);){const F=A[1].trim();if(k=D(F),k===void 0)if(typeof I=="function"){const H=I(v,A,T);k=isString$1(H)?H:""}else if(T&&Object.prototype.hasOwnProperty.call(T,F))k="";else if(q){k=A[0];continue}else this.logger.warn(`missed to pass in variable ${F} for interpolating ${v}`),k="";else!isString$1(k)&&!this.useRawValueToEscape&&(k=makeString(k));const V=z.safeValue(k);if(v=v.replace(A[0],V),q?(z.regex.lastIndex+=k.length,z.regex.lastIndex-=A[0].length):z.regex.lastIndex=0,M++,M>=this.maxReplaces)break}}),v}nest(v,S,R={}){let T,A,k;const M=(N,D)=>{const I=this.nestingOptionsSeparator;if(N.indexOf(I)<0)return N;const q=N.split(new RegExp(`${I}[ ]*{`));let B=`{${q[1]}`;N=q[0],B=this.interpolate(B,k);const z=B.match(/'/g),F=B.match(/"/g);((z?.length??0)%2===0&&!F||F.length%2!==0)&&(B=B.replace(/'/g,'"'));try{k=JSON.parse(B),D&&(k={...D,...k})}catch(V){return this.logger.warn(`failed parsing options string in nesting for key ${N}`,V),`${N}${I}${B}`}return k.defaultValue&&k.defaultValue.indexOf(this.prefix)>-1&&delete k.defaultValue,N};for(;T=this.nestingRegexp.exec(v);){let N=[];k={...R},k=k.replace&&!isString$1(k.replace)?k.replace:k,k.applyPostProcessor=!1,delete k.defaultValue;const D=/{.*}/.test(T[1])?T[1].lastIndexOf("}")+1:T[1].indexOf(this.formatSeparator);if(D!==-1&&(N=T[1].slice(D).split(this.formatSeparator).map(I=>I.trim()).filter(Boolean),T[1]=T[1].slice(0,D)),A=S(M.call(this,T[1].trim(),k),k),A&&T[0]===v&&!isString$1(A))return A;isString$1(A)||(A=makeString(A)),A||(this.logger.warn(`missed to resolve ${T[1]} for nesting ${v}`),A=""),N.length&&(A=N.reduce((I,q)=>this.format(I,q,R.lng,{...R,interpolationkey:T[1].trim()}),A.trim())),v=v.replace(T[0],A),this.regexp.lastIndex=0}return v}}const parseFormatStr=_=>{let v=_.toLowerCase().trim();const S={};if(_.indexOf("(")>-1){const R=_.split("(");v=R[0].toLowerCase().trim();const T=R[1].substring(0,R[1].length-1);v==="currency"&&T.indexOf(":")<0?S.currency||(S.currency=T.trim()):v==="relativetime"&&T.indexOf(":")<0?S.range||(S.range=T.trim()):T.split(";").forEach(k=>{if(k){const[M,...N]=k.split(":"),D=N.join(":").trim().replace(/^'+|'+$/g,""),I=M.trim();S[I]||(S[I]=D),D==="false"&&(S[I]=!1),D==="true"&&(S[I]=!0),isNaN(D)||(S[I]=parseInt(D,10))}})}return{formatName:v,formatOptions:S}},createCachedFormatter=_=>{const v={};return(S,R,T)=>{let A=T;T&&T.interpolationkey&&T.formatParams&&T.formatParams[T.interpolationkey]&&T[T.interpolationkey]&&(A={...A,[T.interpolationkey]:void 0});const k=R+JSON.stringify(A);let M=v[k];return M||(M=_(getCleanedCode(R),T),v[k]=M),M(S)}},createNonCachedFormatter=_=>(v,S,R)=>_(getCleanedCode(S),R)(v);class Formatter{constructor(v={}){this.logger=baseLogger.create("formatter"),this.options=v,this.init(v)}init(v,S={interpolation:{}}){this.formatSeparator=S.interpolation.formatSeparator||",";const R=S.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:R((T,A)=>{const k=new Intl.NumberFormat(T,{...A});return M=>k.format(M)}),currency:R((T,A)=>{const k=new Intl.NumberFormat(T,{...A,style:"currency"});return M=>k.format(M)}),datetime:R((T,A)=>{const k=new Intl.DateTimeFormat(T,{...A});return M=>k.format(M)}),relativetime:R((T,A)=>{const k=new Intl.RelativeTimeFormat(T,{...A});return M=>k.format(M,A.range||"day")}),list:R((T,A)=>{const k=new Intl.ListFormat(T,{...A});return M=>k.format(M)})}}add(v,S){this.formats[v.toLowerCase().trim()]=S}addCached(v,S){this.formats[v.toLowerCase().trim()]=createCachedFormatter(S)}format(v,S,R,T={}){const A=S.split(this.formatSeparator);if(A.length>1&&A[0].indexOf("(")>1&&A[0].indexOf(")")<0&&A.find(M=>M.indexOf(")")>-1)){const M=A.findIndex(N=>N.indexOf(")")>-1);A[0]=[A[0],...A.splice(1,M)].join(this.formatSeparator)}return A.reduce((M,N)=>{const{formatName:D,formatOptions:I}=parseFormatStr(N);if(this.formats[D]){let q=M;try{const B=T?.formatParams?.[T.interpolationkey]||{},z=B.locale||B.lng||T.locale||T.lng||R;q=this.formats[D](M,z,{...I,...T,...B})}catch(B){this.logger.warn(B)}return q}else this.logger.warn(`there was no format function for ${D}`);return M},v)}}const removePending=(_,v)=>{_.pending[v]!==void 0&&(delete _.pending[v],_.pendingCount--)};class Connector extends EventEmitter{constructor(v,S,R,T={}){super(),this.backend=v,this.store=S,this.services=R,this.languageUtils=R.languageUtils,this.options=T,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=T.maxParallelReads||10,this.readingCalls=0,this.maxRetries=T.maxRetries>=0?T.maxRetries:5,this.retryTimeout=T.retryTimeout>=1?T.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(R,T.backend,T)}queueLoad(v,S,R,T){const A={},k={},M={},N={};return v.forEach(D=>{let I=!0;S.forEach(q=>{const B=`${D}|${q}`;!R.reload&&this.store.hasResourceBundle(D,q)?this.state[B]=2:this.state[B]<0||(this.state[B]===1?k[B]===void 0&&(k[B]=!0):(this.state[B]=1,I=!1,k[B]===void 0&&(k[B]=!0),A[B]===void 0&&(A[B]=!0),N[q]===void 0&&(N[q]=!0)))}),I||(M[D]=!0)}),(Object.keys(A).length||Object.keys(k).length)&&this.queue.push({pending:k,pendingCount:Object.keys(k).length,loaded:{},errors:[],callback:T}),{toLoad:Object.keys(A),pending:Object.keys(k),toLoadLanguages:Object.keys(M),toLoadNamespaces:Object.keys(N)}}loaded(v,S,R){const T=v.split("|"),A=T[0],k=T[1];S&&this.emit("failedLoading",A,k,S),!S&&R&&this.store.addResourceBundle(A,k,R,void 0,void 0,{skipCopy:!0}),this.state[v]=S?-1:2,S&&R&&(this.state[v]=0);const M={};this.queue.forEach(N=>{pushPath(N.loaded,[A],k),removePending(N,v),S&&N.errors.push(S),N.pendingCount===0&&!N.done&&(Object.keys(N.loaded).forEach(D=>{M[D]||(M[D]={});const I=N.loaded[D];I.length&&I.forEach(q=>{M[D][q]===void 0&&(M[D][q]=!0)})}),N.done=!0,N.errors.length?N.callback(N.errors):N.callback())}),this.emit("loaded",M),this.queue=this.queue.filter(N=>!N.done)}read(v,S,R,T=0,A=this.retryTimeout,k){if(!v.length)return k(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:v,ns:S,fcName:R,tried:T,wait:A,callback:k});return}this.readingCalls++;const M=(D,I)=>{if(this.readingCalls--,this.waitingReads.length>0){const q=this.waitingReads.shift();this.read(q.lng,q.ns,q.fcName,q.tried,q.wait,q.callback)}if(D&&I&&T<this.maxRetries){setTimeout(()=>{this.read.call(this,v,S,R,T+1,A*2,k)},A);return}k(D,I)},N=this.backend[R].bind(this.backend);if(N.length===2){try{const D=N(v,S);D&&typeof D.then=="function"?D.then(I=>M(null,I)).catch(M):M(null,D)}catch(D){M(D)}return}return N(v,S,M)}prepareLoading(v,S,R={},T){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),T&&T();isString$1(v)&&(v=this.languageUtils.toResolveHierarchy(v)),isString$1(S)&&(S=[S]);const A=this.queueLoad(v,S,R,T);if(!A.toLoad.length)return A.pending.length||T(),null;A.toLoad.forEach(k=>{this.loadOne(k)})}load(v,S,R){this.prepareLoading(v,S,{},R)}reload(v,S,R){this.prepareLoading(v,S,{reload:!0},R)}loadOne(v,S=""){const R=v.split("|"),T=R[0],A=R[1];this.read(T,A,"read",void 0,void 0,(k,M)=>{k&&this.logger.warn(`${S}loading namespace ${A} for language ${T} failed`,k),!k&&M&&this.logger.log(`${S}loaded namespace ${A} for language ${T}`,M),this.loaded(v,k,M)})}saveMissing(v,S,R,T,A,k={},M=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(S)){this.logger.warn(`did not save key "${R}" as the namespace "${S}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(R==null||R==="")){if(this.backend?.create){const N={...k,isUpdate:A},D=this.backend.create.bind(this.backend);if(D.length<6)try{let I;D.length===5?I=D(v,S,R,T,N):I=D(v,S,R,T),I&&typeof I.then=="function"?I.then(q=>M(null,q)).catch(M):M(null,I)}catch(I){M(I)}else D(v,S,R,T,M,N)}!v||!v[0]||this.store.addResource(v[0],S,R,T)}}}const get$1=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:_=>{let v={};if(typeof _[1]=="object"&&(v=_[1]),isString$1(_[1])&&(v.defaultValue=_[1]),isString$1(_[2])&&(v.tDescription=_[2]),typeof _[2]=="object"||typeof _[3]=="object"){const S=_[3]||_[2];Object.keys(S).forEach(R=>{v[R]=S[R]})}return v},interpolation:{escapeValue:!0,format:_=>_,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=_=>(isString$1(_.ns)&&(_.ns=[_.ns]),isString$1(_.fallbackLng)&&(_.fallbackLng=[_.fallbackLng]),isString$1(_.fallbackNS)&&(_.fallbackNS=[_.fallbackNS]),_.supportedLngs?.indexOf?.("cimode")<0&&(_.supportedLngs=_.supportedLngs.concat(["cimode"])),typeof _.initImmediate=="boolean"&&(_.initAsync=_.initImmediate),_),noop$3=()=>{},bindMemberFunctions=_=>{Object.getOwnPropertyNames(Object.getPrototypeOf(_)).forEach(S=>{typeof _[S]=="function"&&(_[S]=_[S].bind(_))})},usesLocize=_=>!!(_?.modules?.backend?.name?.indexOf("Locize")>0||_?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||_?.options?.backend?.backends&&_.options.backend.backends.some(v=>v?.name?.indexOf("Locize")>0||v?.constructor?.name?.indexOf("Locize")>0));class I18n extends EventEmitter{constructor(v={},S){if(super(),this.options=transformOptions(v),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),S&&!this.isInitialized&&!v.isClone){if(!this.options.initAsync)return this.init(v,S),this;setTimeout(()=>{this.init(v,S)},0)}}init(v={},S){this.isInitializing=!0,typeof v=="function"&&(S=v,v={}),v.defaultNS==null&&v.ns&&(isString$1(v.ns)?v.defaultNS=v.ns:v.ns.indexOf("translation")<0&&(v.defaultNS=v.ns[0]));const R=get$1();this.options={...R,...this.options,...transformOptions(v)},this.options.interpolation={...R.interpolation,...this.options.interpolation},v.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=v.keySeparator),v.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=v.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=R.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!usesLocize(this)&&typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ");const T=D=>D?typeof D=="function"?new D:D:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(T(this.modules.logger),this.options):baseLogger.init(null,this.options);let D;this.modules.formatter?D=this.modules.formatter:D=Formatter;const I=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const q=this.services;q.logger=baseLogger,q.resourceStore=this.store,q.languageUtils=I,q.pluralResolver=new PluralResolver(I,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==R.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),D&&(!this.options.interpolation.format||this.options.interpolation.format===R.interpolation.format)&&(q.formatter=T(D),q.formatter.init&&q.formatter.init(q,this.options),this.options.interpolation.format=q.formatter.format.bind(q.formatter)),q.interpolator=new Interpolator(this.options),q.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},q.backendConnector=new Connector(T(this.modules.backend),q.resourceStore,q,this.options),q.backendConnector.on("*",(z,...F)=>{this.emit(z,...F)}),this.modules.languageDetector&&(q.languageDetector=T(this.modules.languageDetector),q.languageDetector.init&&q.languageDetector.init(q,this.options.detection,this.options)),this.modules.i18nFormat&&(q.i18nFormat=T(this.modules.i18nFormat),q.i18nFormat.init&&q.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",(z,...F)=>{this.emit(z,...F)}),this.modules.external.forEach(z=>{z.init&&z.init(this)})}if(this.format=this.options.interpolation.format,S||(S=noop$3),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const D=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);D.length>0&&D[0]!=="dev"&&(this.options.lng=D[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(D=>{this[D]=(...I)=>this.store[D](...I)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(D=>{this[D]=(...I)=>(this.store[D](...I),this)});const M=defer(),N=()=>{const D=(I,q)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),M.resolve(q),S(I,q)};if(this.languages&&!this.isInitialized)return D(null,this.t.bind(this));this.changeLanguage(this.options.lng,D)};return this.options.resources||!this.options.initAsync?N():setTimeout(N,0),M}loadResources(v,S=noop$3){let R=S;const T=isString$1(v)?v:this.language;if(typeof v=="function"&&(R=v),!this.options.resources||this.options.partialBundledLanguages){if(T?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return R();const A=[],k=M=>{if(!M||M==="cimode")return;this.services.languageUtils.toResolveHierarchy(M).forEach(D=>{D!=="cimode"&&A.indexOf(D)<0&&A.push(D)})};T?k(T):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(N=>k(N)),this.options.preload?.forEach?.(M=>k(M)),this.services.backendConnector.load(A,this.options.ns,M=>{!M&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),R(M)})}else R(null)}reloadResources(v,S,R){const T=defer();return typeof v=="function"&&(R=v,v=void 0),typeof S=="function"&&(R=S,S=void 0),v||(v=this.languages),S||(S=this.options.ns),R||(R=noop$3),this.services.backendConnector.reload(v,S,A=>{T.resolve(),R(A)}),T}use(v){if(!v)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!v.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return v.type==="backend"&&(this.modules.backend=v),(v.type==="logger"||v.log&&v.warn&&v.error)&&(this.modules.logger=v),v.type==="languageDetector"&&(this.modules.languageDetector=v),v.type==="i18nFormat"&&(this.modules.i18nFormat=v),v.type==="postProcessor"&&postProcessor.addPostProcessor(v),v.type==="formatter"&&(this.modules.formatter=v),v.type==="3rdParty"&&this.modules.external.push(v),this}setResolvedLanguage(v){if(!(!v||!this.languages)&&!(["cimode","dev"].indexOf(v)>-1)){for(let S=0;S<this.languages.length;S++){const R=this.languages[S];if(!(["cimode","dev"].indexOf(R)>-1)&&this.store.hasLanguageSomeTranslations(R)){this.resolvedLanguage=R;break}}!this.resolvedLanguage&&this.languages.indexOf(v)<0&&this.store.hasLanguageSomeTranslations(v)&&(this.resolvedLanguage=v,this.languages.unshift(v))}}changeLanguage(v,S){this.isLanguageChangingTo=v;const R=defer();this.emit("languageChanging",v);const T=M=>{this.language=M,this.languages=this.services.languageUtils.toResolveHierarchy(M),this.resolvedLanguage=void 0,this.setResolvedLanguage(M)},A=(M,N)=>{N?this.isLanguageChangingTo===v&&(T(N),this.translator.changeLanguage(N),this.isLanguageChangingTo=void 0,this.emit("languageChanged",N),this.logger.log("languageChanged",N)):this.isLanguageChangingTo=void 0,R.resolve((...D)=>this.t(...D)),S&&S(M,(...D)=>this.t(...D))},k=M=>{!v&&!M&&this.services.languageDetector&&(M=[]);const N=isString$1(M)?M:M&&M[0],D=this.store.hasLanguageSomeTranslations(N)?N:this.services.languageUtils.getBestMatchFromCodes(isString$1(M)?[M]:M);D&&(this.language||T(D),this.translator.language||this.translator.changeLanguage(D),this.services.languageDetector?.cacheUserLanguage?.(D)),this.loadResources(D,I=>{A(I,D)})};return!v&&this.services.languageDetector&&!this.services.languageDetector.async?k(this.services.languageDetector.detect()):!v&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(k):this.services.languageDetector.detect(k):k(v),R}getFixedT(v,S,R){const T=(A,k,...M)=>{let N;typeof k!="object"?N=this.options.overloadTranslationOptionHandler([A,k].concat(M)):N={...k},N.lng=N.lng||T.lng,N.lngs=N.lngs||T.lngs,N.ns=N.ns||T.ns,N.keyPrefix!==""&&(N.keyPrefix=N.keyPrefix||R||T.keyPrefix);const D=this.options.keySeparator||".";let I;return N.keyPrefix&&Array.isArray(A)?I=A.map(q=>(typeof q=="function"&&(q=keysFromSelector(q,{...this.options,...k})),`${N.keyPrefix}${D}${q}`)):(typeof A=="function"&&(A=keysFromSelector(A,{...this.options,...k})),I=N.keyPrefix?`${N.keyPrefix}${D}${A}`:A),this.t(I,N)};return isString$1(v)?T.lng=v:T.lngs=v,T.ns=S,T.keyPrefix=R,T}t(...v){return this.translator?.translate(...v)}exists(...v){return this.translator?.exists(...v)}setDefaultNamespace(v){this.options.defaultNS=v}hasLoadedNamespace(v,S={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const R=S.lng||this.resolvedLanguage||this.languages[0],T=this.options?this.options.fallbackLng:!1,A=this.languages[this.languages.length-1];if(R.toLowerCase()==="cimode")return!0;const k=(M,N)=>{const D=this.services.backendConnector.state[`${M}|${N}`];return D===-1||D===0||D===2};if(S.precheck){const M=S.precheck(this,k);if(M!==void 0)return M}return!!(this.hasResourceBundle(R,v)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||k(R,v)&&(!T||k(A,v)))}loadNamespaces(v,S){const R=defer();return this.options.ns?(isString$1(v)&&(v=[v]),v.forEach(T=>{this.options.ns.indexOf(T)<0&&this.options.ns.push(T)}),this.loadResources(T=>{R.resolve(),S&&S(T)}),R):(S&&S(),Promise.resolve())}loadLanguages(v,S){const R=defer();isString$1(v)&&(v=[v]);const T=this.options.preload||[],A=v.filter(k=>T.indexOf(k)<0&&this.services.languageUtils.isSupportedCode(k));return A.length?(this.options.preload=T.concat(A),this.loadResources(k=>{R.resolve(),S&&S(k)}),R):(S&&S(),Promise.resolve())}dir(v){if(v||(v=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!v)return"rtl";try{const T=new Intl.Locale(v);if(T&&T.getTextInfo){const A=T.getTextInfo();if(A&&A.direction)return A.direction}}catch{}const S=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],R=this.services?.languageUtils||new LanguageUtil(get$1());return v.toLowerCase().indexOf("-latn")>1?"ltr":S.indexOf(R.getLanguagePartFromCode(v))>-1||v.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(v={},S){const R=new I18n(v,S);return R.createInstance=I18n.createInstance,R}cloneInstance(v={},S=noop$3){const R=v.forkResourceStore;R&&delete v.forkResourceStore;const T={...this.options,...v,isClone:!0},A=new I18n(T);if((v.debug!==void 0||v.prefix!==void 0)&&(A.logger=A.logger.clone(v)),["store","services","language"].forEach(M=>{A[M]=this[M]}),A.services={...this.services},A.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},R){const M=Object.keys(this.store.data).reduce((N,D)=>(N[D]={...this.store.data[D]},N[D]=Object.keys(N[D]).reduce((I,q)=>(I[q]={...N[D][q]},I),N[D]),N),{});A.store=new ResourceStore(M,T),A.services.resourceStore=A.store}if(v.interpolation){const N={...get$1().interpolation,...this.options.interpolation,...v.interpolation},D={...T,interpolation:N};A.services.interpolator=new Interpolator(D)}return A.translator=new Translator(A.services,T),A.translator.on("*",(M,...N)=>{A.emit(M,...N)}),A.init(T,S),A.translator.options=T,A.translator.backendConnector.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},A}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const warn$1=(_,v,S,R)=>{const T=[S,{code:v,...R||{}}];if(_?.services?.logger?.forward)return _.services.logger.forward(T,"warn","react-i18next::",!0);isString(T[0])&&(T[0]=`react-i18next:: ${T[0]}`),_?.services?.logger?.warn?_.services.logger.warn(...T):console?.warn&&console.warn(...T)},alreadyWarned={},warnOnce=(_,v,S,R)=>{isString(S)&&alreadyWarned[S]||(isString(S)&&(alreadyWarned[S]=new Date),warn$1(_,v,S,R))},loadedClb=(_,v)=>()=>{if(_.isInitialized)v();else{const S=()=>{setTimeout(()=>{_.off("initialized",S)},0),v()};_.on("initialized",S)}},loadNamespaces=(_,v,S)=>{_.loadNamespaces(v,loadedClb(_,S))},loadLanguages=(_,v,S,R)=>{if(isString(S)&&(S=[S]),_.options.preload&&_.options.preload.indexOf(v)>-1)return loadNamespaces(_,S,R);S.forEach(T=>{_.options.ns.indexOf(T)<0&&_.options.ns.push(T)}),_.loadLanguages(v,loadedClb(_,R))},hasLoadedNamespace=(_,v,S={})=>!v.languages||!v.languages.length?(warnOnce(v,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:v.languages}),!0):v.hasLoadedNamespace(_,{lng:S.lng,precheck:(R,T)=>{if(S.bindI18n&&S.bindI18n.indexOf("languageChanging")>-1&&R.services.backendConnector.backend&&R.isLanguageChangingTo&&!T(R.isLanguageChangingTo,_))return!1}}),isString=_=>typeof _=="string",isObject=_=>typeof _=="object"&&_!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=_=>htmlEntities[_],unescape=_=>_.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape,transDefaultProps:void 0};const setDefaults=(_={})=>{defaultOptions={...defaultOptions,..._}},getDefaults$1=()=>defaultOptions;let i18nInstance;const setI18n=_=>{i18nInstance=_},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(_){setDefaults(_.options.react),setI18n(_)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(v){v.forEach(S=>{this.usedNamespaces[S]||(this.usedNamespaces[S]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var _=requireReact();function v(q,B){return q===B&&(q!==0||1/q===1/B)||q!==q&&B!==B}var S=typeof Object.is=="function"?Object.is:v,R=_.useState,T=_.useEffect,A=_.useLayoutEffect,k=_.useDebugValue;function M(q,B){var z=B(),F=R({inst:{value:z,getSnapshot:B}}),V=F[0].inst,H=F[1];return A(function(){V.value=z,V.getSnapshot=B,N(V)&&H({inst:V})},[q,z,B]),T(function(){return N(V)&&H({inst:V}),q(function(){N(V)&&H({inst:V})})},[q]),k(z),z}function N(q){var B=q.getSnapshot;q=q.value;try{var z=B();return!S(q,z)}catch{return!0}}function D(q,B){return B()}var I=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D:M;return useSyncExternalStoreShim_production.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:I,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var shimExports=requireShim();const notReadyT=(_,v)=>isString(v)?v:isObject(v)&&isString(v.defaultValue)?v.defaultValue:Array.isArray(_)?_[_.length-1]:_,notReadySnapshot={t:notReadyT,ready:!1},dummySubscribe=()=>()=>{},useTranslation=(_,v={})=>{const{i18n:S}=v,{i18n:R,defaultNS:T}=reactExports.useContext(I18nContext)||{},A=S||R||getI18n();A&&!A.reportNamespaces&&(A.reportNamespaces=new ReportNamespaces),A||warnOnce(A,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const k=reactExports.useMemo(()=>({...getDefaults$1(),...A?.options?.react,...v}),[A,v]),{useSuspense:M,keyPrefix:N}=k,D=T||A?.options?.defaultNS,I=isString(D)?[D]:D||["translation"],q=reactExports.useMemo(()=>I,I);A?.reportNamespaces?.addUsedNamespaces?.(q);const B=reactExports.useRef(0),z=reactExports.useCallback(le=>{if(!A)return dummySubscribe;const{bindI18n:ue,bindI18nStore:ce}=k,ge=()=>{B.current+=1,le()};return ue&&A.on(ue,ge),ce&&A.store.on(ce,ge),()=>{ue&&ue.split(" ").forEach(me=>A.off(me,ge)),ce&&ce.split(" ").forEach(me=>A.store.off(me,ge))}},[A,k]),F=reactExports.useRef(),V=reactExports.useCallback(()=>{if(!A)return notReadySnapshot;const le=!!(A.isInitialized||A.initializedStoreOnce)&&q.every(_e=>hasLoadedNamespace(_e,A,k)),ue=v.lng||A.language,ce=B.current,ge=F.current;if(ge&&ge.ready===le&&ge.lng===ue&&ge.keyPrefix===N&&ge.revision===ce)return ge;const Ee={t:A.getFixedT(ue,k.nsMode==="fallback"?q:q[0],N),ready:le,lng:ue,keyPrefix:N,revision:ce};return F.current=Ee,Ee},[A,q,N,k,v.lng]),[H,W]=reactExports.useState(0),{t:Y,ready:Z}=shimExports.useSyncExternalStore(z,V,V);reactExports.useEffect(()=>{if(A&&!Z&&!M){const le=()=>W(ue=>ue+1);v.lng?loadLanguages(A,v.lng,q,le):loadNamespaces(A,q,le)}},[A,v.lng,q,Z,M,H]);const J=A||{},ne=reactExports.useRef(null),oe=reactExports.useRef(),te=le=>{const ue=Object.getOwnPropertyDescriptors(le);ue.__original&&delete ue.__original;const ce=Object.create(Object.getPrototypeOf(le),ue);if(!Object.prototype.hasOwnProperty.call(ce,"__original"))try{Object.defineProperty(ce,"__original",{value:le,writable:!1,enumerable:!1,configurable:!1})}catch{}return ce},se=reactExports.useMemo(()=>{const le=J,ue=le?.language;let ce=le;le&&(ne.current&&ne.current.__original===le?oe.current!==ue?(ce=te(le),ne.current=ce,oe.current=ue):ce=ne.current:(ce=te(le),ne.current=ce,oe.current=ue));const ge=[Y,ce,Z];return ge.t=Y,ge.i18n=ce,ge.ready=Z,ge},[Y,J,Z,J.resolvedLanguage,J.language,J.languages]);if(A&&M&&!Z)throw new Promise(le=>{const ue=()=>le();v.lng?loadLanguages(A,v.lng,q,ue):loadNamespaces(A,q,ue)});return se},BASE_PROGRAMS=[{name:"Testovac program",description:"Prvn testovac program na otestovn funknosti.",definition:`A = a.A
B = ((A|'a.0)|b.0)[c/a]`,allowEdit:!0,cards:[{type:"sos",name:"SOS",processX:"B",processY:"B",action:"c",showHelp:!0},{type:"lts",name:"LTS",process:"B",useStructRed:!0,style:"mixed"}]}];function __insertCSS(_){if(typeof document>"u")return;let v=document.head||document.getElementsByTagName("head")[0],S=document.createElement("style");S.type="text/css",v.appendChild(S),S.styleSheet?S.styleSheet.cssText=_:S.appendChild(document.createTextNode(_))}const getAsset=_=>{switch(_){case"success":return SuccessIcon;case"info":return InfoIcon;case"warning":return WarningIcon;case"error":return ErrorIcon;default:return null}},bars=Array(12).fill(0),Loader=({visible:_,className:v})=>React2.createElement("div",{className:["sonner-loading-wrapper",v].filter(Boolean).join(" "),"data-visible":_},React2.createElement("div",{className:"sonner-spinner"},bars.map((S,R)=>React2.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${R}`})))),SuccessIcon=React2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React2.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WarningIcon=React2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React2.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),InfoIcon=React2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React2.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ErrorIcon=React2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React2.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CloseIcon=React2.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React2.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React2.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),useIsDocumentHidden=()=>{const[_,v]=React2.useState(document.hidden);return React2.useEffect(()=>{const S=()=>{v(document.hidden)};return document.addEventListener("visibilitychange",S),()=>window.removeEventListener("visibilitychange",S)},[]),_};let toastsCounter=1;class Observer{constructor(){this.subscribe=v=>(this.subscribers.push(v),()=>{const S=this.subscribers.indexOf(v);this.subscribers.splice(S,1)}),this.publish=v=>{this.subscribers.forEach(S=>S(v))},this.addToast=v=>{this.publish(v),this.toasts=[...this.toasts,v]},this.create=v=>{var S;const{message:R,...T}=v,A=typeof v?.id=="number"||((S=v.id)==null?void 0:S.length)>0?v.id:toastsCounter++,k=this.toasts.find(N=>N.id===A),M=v.dismissible===void 0?!0:v.dismissible;return this.dismissedToasts.has(A)&&this.dismissedToasts.delete(A),k?this.toasts=this.toasts.map(N=>N.id===A?(this.publish({...N,...v,id:A,title:R}),{...N,...v,id:A,dismissible:M,title:R}):N):this.addToast({title:R,...T,dismissible:M,id:A}),A},this.dismiss=v=>(v?(this.dismissedToasts.add(v),requestAnimationFrame(()=>this.subscribers.forEach(S=>S({id:v,dismiss:!0})))):this.toasts.forEach(S=>{this.subscribers.forEach(R=>R({id:S.id,dismiss:!0}))}),v),this.message=(v,S)=>this.create({...S,message:v}),this.error=(v,S)=>this.create({...S,message:v,type:"error"}),this.success=(v,S)=>this.create({...S,type:"success",message:v}),this.info=(v,S)=>this.create({...S,type:"info",message:v}),this.warning=(v,S)=>this.create({...S,type:"warning",message:v}),this.loading=(v,S)=>this.create({...S,type:"loading",message:v}),this.promise=(v,S)=>{if(!S)return;let R;S.loading!==void 0&&(R=this.create({...S,promise:v,type:"loading",message:S.loading,description:typeof S.description!="function"?S.description:void 0}));const T=Promise.resolve(v instanceof Function?v():v);let A=R!==void 0,k;const M=T.then(async D=>{if(k=["resolve",D],React2.isValidElement(D))A=!1,this.create({id:R,type:"default",message:D});else if(isHttpResponse(D)&&!D.ok){A=!1;const q=typeof S.error=="function"?await S.error(`HTTP error! status: ${D.status}`):S.error,B=typeof S.description=="function"?await S.description(`HTTP error! status: ${D.status}`):S.description,F=typeof q=="object"&&!React2.isValidElement(q)?q:{message:q};this.create({id:R,type:"error",description:B,...F})}else if(D instanceof Error){A=!1;const q=typeof S.error=="function"?await S.error(D):S.error,B=typeof S.description=="function"?await S.description(D):S.description,F=typeof q=="object"&&!React2.isValidElement(q)?q:{message:q};this.create({id:R,type:"error",description:B,...F})}else if(S.success!==void 0){A=!1;const q=typeof S.success=="function"?await S.success(D):S.success,B=typeof S.description=="function"?await S.description(D):S.description,F=typeof q=="object"&&!React2.isValidElement(q)?q:{message:q};this.create({id:R,type:"success",description:B,...F})}}).catch(async D=>{if(k=["reject",D],S.error!==void 0){A=!1;const I=typeof S.error=="function"?await S.error(D):S.error,q=typeof S.description=="function"?await S.description(D):S.description,z=typeof I=="object"&&!React2.isValidElement(I)?I:{message:I};this.create({id:R,type:"error",description:q,...z})}}).finally(()=>{A&&(this.dismiss(R),R=void 0),S.finally==null||S.finally.call(S)}),N=()=>new Promise((D,I)=>M.then(()=>k[0]==="reject"?I(k[1]):D(k[1])).catch(I));return typeof R!="string"&&typeof R!="number"?{unwrap:N}:Object.assign(R,{unwrap:N})},this.custom=(v,S)=>{const R=S?.id||toastsCounter++;return this.create({jsx:v(R),id:R,...S}),R},this.getActiveToasts=()=>this.toasts.filter(v=>!this.dismissedToasts.has(v.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ToastState=new Observer,toastFunction=(_,v)=>{const S=v?.id||toastsCounter++;return ToastState.addToast({title:_,...v,id:S}),S},isHttpResponse=_=>_&&typeof _=="object"&&"ok"in _&&typeof _.ok=="boolean"&&"status"in _&&typeof _.status=="number",basicToast=toastFunction,getHistory=()=>ToastState.toasts,getToasts=()=>ToastState.getActiveToasts(),toast=Object.assign(basicToast,{success:ToastState.success,info:ToastState.info,warning:ToastState.warning,error:ToastState.error,custom:ToastState.custom,message:ToastState.message,promise:ToastState.promise,dismiss:ToastState.dismiss,loading:ToastState.loading},{getHistory,getToasts});__insertCSS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function isAction(_){return _.label!==void 0}const VISIBLE_TOASTS_AMOUNT=3,VIEWPORT_OFFSET="24px",MOBILE_VIEWPORT_OFFSET="16px",TOAST_LIFETIME=4e3,TOAST_WIDTH=356,GAP$1=14,SWIPE_THRESHOLD=45,TIME_BEFORE_UNMOUNT=200;function cn(..._){return _.filter(Boolean).join(" ")}function getDefaultSwipeDirections(_){const[v,S]=_.split("-"),R=[];return v&&R.push(v),S&&R.push(S),R}const Toast=_=>{var v,S,R,T,A,k,M,N,D;const{invert:I,toast:q,unstyled:B,interacting:z,setHeights:F,visibleToasts:V,heights:H,index:W,toasts:Y,expanded:Z,removeToast:J,defaultRichColors:ne,closeButton:oe,style:te,cancelButtonStyle:se,actionButtonStyle:le,className:ue="",descriptionClassName:ce="",duration:ge,position:me,gap:Ee,expandByDefault:_e,classNames:ye,icons:be,closeButtonAriaLabel:Se="Close toast"}=_,[De,xe]=React2.useState(null),[pe,we]=React2.useState(null),[Oe,Ce]=React2.useState(!1),[Pe,Ne]=React2.useState(!1),[Te,ze]=React2.useState(!1),[Fe,Ie]=React2.useState(!1),[Le,$e]=React2.useState(!1),[qe,at]=React2.useState(0),[lt,vt]=React2.useState(0),yt=React2.useRef(q.duration||ge||TOAST_LIFETIME),Ze=React2.useRef(null),_t=React2.useRef(null),ct=W===0,wt=W+1<=V,xt=q.type,At=q.dismissible!==!1,Ct=q.className||"",$t=q.descriptionClassName||"",Ut=React2.useMemo(()=>H.findIndex(Et=>Et.toastId===q.id)||0,[H,q.id]),Xt=React2.useMemo(()=>{var Et;return(Et=q.closeButton)!=null?Et:oe},[q.closeButton,oe]),Ot=React2.useMemo(()=>q.duration||ge||TOAST_LIFETIME,[q.duration,ge]),qt=React2.useRef(0),Tt=React2.useRef(0),St=React2.useRef(0),nt=React2.useRef(null),[ke,Ue]=me.split("-"),Ye=React2.useMemo(()=>H.reduce((Et,bt,Nt)=>Nt>=Ut?Et:Et+bt.height,0),[H,Ut]),tt=useIsDocumentHidden(),ot=q.invert||I,Rt=xt==="loading";Tt.current=React2.useMemo(()=>Ut*Ee+Ye,[Ut,Ye]),React2.useEffect(()=>{yt.current=Ot},[Ot]),React2.useEffect(()=>{Ce(!0)},[]),React2.useEffect(()=>{const Et=_t.current;if(Et){const bt=Et.getBoundingClientRect().height;return vt(bt),F(Nt=>[{toastId:q.id,height:bt,position:q.position},...Nt]),()=>F(Nt=>Nt.filter(jt=>jt.toastId!==q.id))}},[F,q.id]),React2.useLayoutEffect(()=>{if(!Oe)return;const Et=_t.current,bt=Et.style.height;Et.style.height="auto";const Nt=Et.getBoundingClientRect().height;Et.style.height=bt,vt(Nt),F(jt=>jt.find(Gt=>Gt.toastId===q.id)?jt.map(Gt=>Gt.toastId===q.id?{...Gt,height:Nt}:Gt):[{toastId:q.id,height:Nt,position:q.position},...jt])},[Oe,q.title,q.description,F,q.id,q.jsx,q.action,q.cancel]);const dt=React2.useCallback(()=>{Ne(!0),at(Tt.current),F(Et=>Et.filter(bt=>bt.toastId!==q.id)),setTimeout(()=>{J(q)},TIME_BEFORE_UNMOUNT)},[q,J,F,Tt]);React2.useEffect(()=>{if(q.promise&&xt==="loading"||q.duration===1/0||q.type==="loading")return;let Et;return Z||z||tt?(()=>{if(St.current<qt.current){const jt=new Date().getTime()-qt.current;yt.current=yt.current-jt}St.current=new Date().getTime()})():(()=>{yt.current!==1/0&&(qt.current=new Date().getTime(),Et=setTimeout(()=>{q.onAutoClose==null||q.onAutoClose.call(q,q),dt()},yt.current))})(),()=>clearTimeout(Et)},[Z,z,q,xt,tt,dt]),React2.useEffect(()=>{q.delete&&(dt(),q.onDismiss==null||q.onDismiss.call(q,q))},[dt,q.delete]);function Mt(){var Et;if(be?.loading){var bt;return React2.createElement("div",{className:cn(ye?.loader,q==null||(bt=q.classNames)==null?void 0:bt.loader,"sonner-loader"),"data-visible":xt==="loading"},be.loading)}return React2.createElement(Loader,{className:cn(ye?.loader,q==null||(Et=q.classNames)==null?void 0:Et.loader),visible:xt==="loading"})}const kt=q.icon||be?.[xt]||getAsset(xt);var Pt,zt;return React2.createElement("li",{tabIndex:0,ref:_t,className:cn(ue,Ct,ye?.toast,q==null||(v=q.classNames)==null?void 0:v.toast,ye?.default,ye?.[xt],q==null||(S=q.classNames)==null?void 0:S[xt]),"data-sonner-toast":"","data-rich-colors":(Pt=q.richColors)!=null?Pt:ne,"data-styled":!(q.jsx||q.unstyled||B),"data-mounted":Oe,"data-promise":!!q.promise,"data-swiped":Le,"data-removed":Pe,"data-visible":wt,"data-y-position":ke,"data-x-position":Ue,"data-index":W,"data-front":ct,"data-swiping":Te,"data-dismissible":At,"data-type":xt,"data-invert":ot,"data-swipe-out":Fe,"data-swipe-direction":pe,"data-expanded":!!(Z||_e&&Oe),"data-testid":q.testId,style:{"--index":W,"--toasts-before":W,"--z-index":Y.length-W,"--offset":`${Pe?qe:Tt.current}px`,"--initial-height":_e?"auto":`${lt}px`,...te,...q.style},onDragEnd:()=>{ze(!1),xe(null),nt.current=null},onPointerDown:Et=>{Et.button!==2&&(Rt||!At||(Ze.current=new Date,at(Tt.current),Et.target.setPointerCapture(Et.pointerId),Et.target.tagName!=="BUTTON"&&(ze(!0),nt.current={x:Et.clientX,y:Et.clientY})))},onPointerUp:()=>{var Et,bt,Nt;if(Fe||!At)return;nt.current=null;const jt=Number(((Et=_t.current)==null?void 0:Et.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),fr=Number(((bt=_t.current)==null?void 0:bt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Gt=new Date().getTime()-((Nt=Ze.current)==null?void 0:Nt.getTime()),dr=De==="x"?jt:fr,vr=Math.abs(dr)/Gt;if(Math.abs(dr)>=SWIPE_THRESHOLD||vr>.11){at(Tt.current),q.onDismiss==null||q.onDismiss.call(q,q),we(De==="x"?jt>0?"right":"left":fr>0?"down":"up"),dt(),Ie(!0);return}else{var cr,or;(cr=_t.current)==null||cr.style.setProperty("--swipe-amount-x","0px"),(or=_t.current)==null||or.style.setProperty("--swipe-amount-y","0px")}$e(!1),ze(!1),xe(null)},onPointerMove:Et=>{var bt,Nt,jt;if(!nt.current||!At||((bt=window.getSelection())==null?void 0:bt.toString().length)>0)return;const Gt=Et.clientY-nt.current.y,dr=Et.clientX-nt.current.x;var vr;const cr=(vr=_.swipeDirections)!=null?vr:getDefaultSwipeDirections(me);!De&&(Math.abs(dr)>1||Math.abs(Gt)>1)&&xe(Math.abs(dr)>Math.abs(Gt)?"x":"y");let or={x:0,y:0};const Tr=Fr=>1/(1.5+Math.abs(Fr)/20);if(De==="y"){if(cr.includes("top")||cr.includes("bottom"))if(cr.includes("top")&&Gt<0||cr.includes("bottom")&&Gt>0)or.y=Gt;else{const Fr=Gt*Tr(Gt);or.y=Math.abs(Fr)<Math.abs(Gt)?Fr:Gt}}else if(De==="x"&&(cr.includes("left")||cr.includes("right")))if(cr.includes("left")&&dr<0||cr.includes("right")&&dr>0)or.x=dr;else{const Fr=dr*Tr(dr);or.x=Math.abs(Fr)<Math.abs(dr)?Fr:dr}(Math.abs(or.x)>0||Math.abs(or.y)>0)&&$e(!0),(Nt=_t.current)==null||Nt.style.setProperty("--swipe-amount-x",`${or.x}px`),(jt=_t.current)==null||jt.style.setProperty("--swipe-amount-y",`${or.y}px`)}},Xt&&!q.jsx&&xt!=="loading"?React2.createElement("button",{"aria-label":Se,"data-disabled":Rt,"data-close-button":!0,onClick:Rt||!At?()=>{}:()=>{dt(),q.onDismiss==null||q.onDismiss.call(q,q)},className:cn(ye?.closeButton,q==null||(R=q.classNames)==null?void 0:R.closeButton)},(zt=be?.close)!=null?zt:CloseIcon):null,(xt||q.icon||q.promise)&&q.icon!==null&&(be?.[xt]!==null||q.icon)?React2.createElement("div",{"data-icon":"",className:cn(ye?.icon,q==null||(T=q.classNames)==null?void 0:T.icon)},q.promise||q.type==="loading"&&!q.icon?q.icon||Mt():null,q.type!=="loading"?kt:null):null,React2.createElement("div",{"data-content":"",className:cn(ye?.content,q==null||(A=q.classNames)==null?void 0:A.content)},React2.createElement("div",{"data-title":"",className:cn(ye?.title,q==null||(k=q.classNames)==null?void 0:k.title)},q.jsx?q.jsx:typeof q.title=="function"?q.title():q.title),q.description?React2.createElement("div",{"data-description":"",className:cn(ce,$t,ye?.description,q==null||(M=q.classNames)==null?void 0:M.description)},typeof q.description=="function"?q.description():q.description):null),React2.isValidElement(q.cancel)?q.cancel:q.cancel&&isAction(q.cancel)?React2.createElement("button",{"data-button":!0,"data-cancel":!0,style:q.cancelButtonStyle||se,onClick:Et=>{isAction(q.cancel)&&At&&(q.cancel.onClick==null||q.cancel.onClick.call(q.cancel,Et),dt())},className:cn(ye?.cancelButton,q==null||(N=q.classNames)==null?void 0:N.cancelButton)},q.cancel.label):null,React2.isValidElement(q.action)?q.action:q.action&&isAction(q.action)?React2.createElement("button",{"data-button":!0,"data-action":!0,style:q.actionButtonStyle||le,onClick:Et=>{isAction(q.action)&&(q.action.onClick==null||q.action.onClick.call(q.action,Et),!Et.defaultPrevented&&dt())},className:cn(ye?.actionButton,q==null||(D=q.classNames)==null?void 0:D.actionButton)},q.action.label):null)};function getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";const _=document.documentElement.getAttribute("dir");return _==="auto"||!_?window.getComputedStyle(document.documentElement).direction:_}function assignOffset(_,v){const S={};return[_,v].forEach((R,T)=>{const A=T===1,k=A?"--mobile-offset":"--offset",M=A?MOBILE_VIEWPORT_OFFSET:VIEWPORT_OFFSET;function N(D){["top","right","bottom","left"].forEach(I=>{S[`${k}-${I}`]=typeof D=="number"?`${D}px`:D})}typeof R=="number"||typeof R=="string"?N(R):typeof R=="object"?["top","right","bottom","left"].forEach(D=>{R[D]===void 0?S[`${k}-${D}`]=M:S[`${k}-${D}`]=typeof R[D]=="number"?`${R[D]}px`:R[D]}):N(M)}),S}const Toaster=React2.forwardRef(function(v,S){const{id:R,invert:T,position:A="bottom-right",hotkey:k=["altKey","KeyT"],expand:M,closeButton:N,className:D,offset:I,mobileOffset:q,theme:B="light",richColors:z,duration:F,style:V,visibleToasts:H=VISIBLE_TOASTS_AMOUNT,toastOptions:W,dir:Y=getDocumentDirection(),gap:Z=GAP$1,icons:J,containerAriaLabel:ne="Notifications"}=v,[oe,te]=React2.useState([]),se=React2.useMemo(()=>R?oe.filter(Oe=>Oe.toasterId===R):oe.filter(Oe=>!Oe.toasterId),[oe,R]),le=React2.useMemo(()=>Array.from(new Set([A].concat(se.filter(Oe=>Oe.position).map(Oe=>Oe.position)))),[se,A]),[ue,ce]=React2.useState([]),[ge,me]=React2.useState(!1),[Ee,_e]=React2.useState(!1),[ye,be]=React2.useState(B!=="system"?B:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Se=React2.useRef(null),De=k.join("+").replace(/Key/g,"").replace(/Digit/g,""),xe=React2.useRef(null),pe=React2.useRef(!1),we=React2.useCallback(Oe=>{te(Ce=>{var Pe;return(Pe=Ce.find(Ne=>Ne.id===Oe.id))!=null&&Pe.delete||ToastState.dismiss(Oe.id),Ce.filter(({id:Ne})=>Ne!==Oe.id)})},[]);return React2.useEffect(()=>ToastState.subscribe(Oe=>{if(Oe.dismiss){requestAnimationFrame(()=>{te(Ce=>Ce.map(Pe=>Pe.id===Oe.id?{...Pe,delete:!0}:Pe))});return}setTimeout(()=>{ReactDOM.flushSync(()=>{te(Ce=>{const Pe=Ce.findIndex(Ne=>Ne.id===Oe.id);return Pe!==-1?[...Ce.slice(0,Pe),{...Ce[Pe],...Oe},...Ce.slice(Pe+1)]:[Oe,...Ce]})})})}),[oe]),React2.useEffect(()=>{if(B!=="system"){be(B);return}if(B==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?be("dark"):be("light")),typeof window>"u")return;const Oe=window.matchMedia("(prefers-color-scheme: dark)");try{Oe.addEventListener("change",({matches:Ce})=>{be(Ce?"dark":"light")})}catch{Oe.addListener(({matches:Pe})=>{try{be(Pe?"dark":"light")}catch(Ne){console.error(Ne)}})}},[B]),React2.useEffect(()=>{oe.length<=1&&me(!1)},[oe]),React2.useEffect(()=>{const Oe=Ce=>{var Pe;if(k.every(ze=>Ce[ze]||Ce.code===ze)){var Te;me(!0),(Te=Se.current)==null||Te.focus()}Ce.code==="Escape"&&(document.activeElement===Se.current||(Pe=Se.current)!=null&&Pe.contains(document.activeElement))&&me(!1)};return document.addEventListener("keydown",Oe),()=>document.removeEventListener("keydown",Oe)},[k]),React2.useEffect(()=>{if(Se.current)return()=>{xe.current&&(xe.current.focus({preventScroll:!0}),xe.current=null,pe.current=!1)}},[Se.current]),React2.createElement("section",{ref:S,"aria-label":`${ne} ${De}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},le.map((Oe,Ce)=>{var Pe;const[Ne,Te]=Oe.split("-");return se.length?React2.createElement("ol",{key:Oe,dir:Y==="auto"?getDocumentDirection():Y,tabIndex:-1,ref:Se,className:D,"data-sonner-toaster":!0,"data-sonner-theme":ye,"data-y-position":Ne,"data-x-position":Te,style:{"--front-toast-height":`${((Pe=ue[0])==null?void 0:Pe.height)||0}px`,"--width":`${TOAST_WIDTH}px`,"--gap":`${Z}px`,...V,...assignOffset(I,q)},onBlur:ze=>{pe.current&&!ze.currentTarget.contains(ze.relatedTarget)&&(pe.current=!1,xe.current&&(xe.current.focus({preventScroll:!0}),xe.current=null))},onFocus:ze=>{ze.target instanceof HTMLElement&&ze.target.dataset.dismissible==="false"||pe.current||(pe.current=!0,xe.current=ze.relatedTarget)},onMouseEnter:()=>me(!0),onMouseMove:()=>me(!0),onMouseLeave:()=>{Ee||me(!1)},onDragEnd:()=>me(!1),onPointerDown:ze=>{ze.target instanceof HTMLElement&&ze.target.dataset.dismissible==="false"||_e(!0)},onPointerUp:()=>_e(!1)},se.filter(ze=>!ze.position&&Ce===0||ze.position===Oe).map((ze,Fe)=>{var Ie,Le;return React2.createElement(Toast,{key:ze.id,icons:J,index:Fe,toast:ze,defaultRichColors:z,duration:(Ie=W?.duration)!=null?Ie:F,className:W?.className,descriptionClassName:W?.descriptionClassName,invert:T,visibleToasts:H,closeButton:(Le=W?.closeButton)!=null?Le:N,interacting:Ee,position:Oe,style:W?.style,unstyled:W?.unstyled,classNames:W?.classNames,cancelButtonStyle:W?.cancelButtonStyle,actionButtonStyle:W?.actionButtonStyle,closeButtonAriaLabel:W?.closeButtonAriaLabel,removeToast:we,toasts:se.filter($e=>$e.position==ze.position),heights:ue.filter($e=>$e.position==ze.position),setHeights:ce,expandByDefault:M,gap:Z,expanded:ge,swipeDirections:v.swipeDirections})})):null}))}),basePrograms=BASE_PROGRAMS,STORAGE_KEY="program-list",STORAGE_KEY_SELECTED="program-selected",ProgramsContext=reactExports.createContext(void 0);function ProgramsProvider({children:_}){const[v,S]=reactExports.useState([]),[R,T]=reactExports.useState(null),A=B=>{const z=localStorage.getItem(STORAGE_KEY),F=localStorage.getItem(STORAGE_KEY_SELECTED);if(z)try{S(JSON.parse(z)),B&&T(parseInt(F||"0"))}catch(V){toast.error("Chyba pi parsovn seznamu program, natm zkladn nastaven."),console.error(V),S(basePrograms)}else S(basePrograms),localStorage.setItem(STORAGE_KEY,JSON.stringify(basePrograms)),localStorage.setItem(STORAGE_KEY_SELECTED,"0")};reactExports.useEffect(()=>{A(!0);function B(z){z.key===STORAGE_KEY&&A(!1)}return window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)},[]);const k=B=>{S(B),localStorage.setItem(STORAGE_KEY,JSON.stringify(B))},M=B=>{const z=[...v,B];k(z)},N=(B,z)=>{const F=v.map((V,H)=>H===B?z:V);k(F)},D=B=>{const z=v.filter((F,V)=>V!==B);k(z),R===B&&T(null)},I=B=>{T(B),localStorage.setItem(STORAGE_KEY_SELECTED,JSON.stringify(B))},q=R!==null?v[R]:null;return jsxRuntimeExports.jsx(ProgramsContext.Provider,{value:{programs:v,activeProgram:q,selectedProgramIndex:R,addProgram:M,updateProgram:N,deleteProgram:D,selectProgram:I},children:_})}function usePrograms(){const _=reactExports.useContext(ProgramsContext);if(_===void 0)throw new Error("usePrograms must be used within a ProgramsProvider.");return _}function setRef(_,v){if(typeof _=="function")return _(v);_!=null&&(_.current=v)}function composeRefs(..._){return v=>{let S=!1;const R=_.map(T=>{const A=setRef(T,v);return!S&&typeof A=="function"&&(S=!0),A});if(S)return()=>{for(let T=0;T<R.length;T++){const A=R[T];typeof A=="function"?A():setRef(_[T],null)}}}}function useComposedRefs(..._){return reactExports.useCallback(composeRefs(..._),_)}var REACT_LAZY_TYPE=Symbol.for("react.lazy"),use=React[" use ".trim().toString()];function isPromiseLike(_){return typeof _=="object"&&_!==null&&"then"in _}function isLazyComponent(_){return _!=null&&typeof _=="object"&&"$$typeof"in _&&_.$$typeof===REACT_LAZY_TYPE&&"_payload"in _&&isPromiseLike(_._payload)}function createSlot$5(_){const v=createSlotClone$5(_),S=reactExports.forwardRef((R,T)=>{let{children:A,...k}=R;isLazyComponent(A)&&typeof use=="function"&&(A=use(A._payload));const M=reactExports.Children.toArray(A),N=M.find(isSlottable$5);if(N){const D=N.props.children,I=M.map(q=>q===N?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,I):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}var Slot$3=createSlot$5("Slot");function createSlotClone$5(_){const v=reactExports.forwardRef((S,R)=>{let{children:T,...A}=S;if(isLazyComponent(T)&&typeof use=="function"&&(T=use(T._payload)),reactExports.isValidElement(T)){const k=getElementRef$6(T),M=mergeProps$5(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$6=Symbol("radix.slottable");function isSlottable$5(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$6}function mergeProps$5(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const N=A(...M);return T(...M),N}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$6(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}const falsyToString=_=>typeof _=="boolean"?`${_}`:_===0?"0":_,cx=clsx,cva=(_,v)=>S=>{var R;if(v?.variants==null)return cx(_,S?.class,S?.className);const{variants:T,defaultVariants:A}=v,k=Object.keys(T).map(D=>{const I=S?.[D],q=A?.[D];if(I===null)return null;const B=falsyToString(I)||falsyToString(q);return T[D][B]}),M=S&&Object.entries(S).reduce((D,I)=>{let[q,B]=I;return B===void 0||(D[q]=B),D},{}),N=v==null||(R=v.compoundVariants)===null||R===void 0?void 0:R.reduce((D,I)=>{let{class:q,className:B,...z}=I;return Object.entries(z).every(F=>{let[V,H]=F;return Array.isArray(H)?H.includes({...A,...M}[V]):{...A,...M}[V]===H})?[...D,q,B]:D},[]);return cx(_,k,N,S?.class,S?.className)},buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_,variant:v,size:S,asChild:R=!1,...T},A)=>{const k=R?Slot$3:"button";return jsxRuntimeExports.jsx(k,{className:cn$1(buttonVariants({variant:v,size:S,className:_})),ref:A,...T})});Button.displayName="Button";function composeEventHandlers(_,v,{checkForDefaultPrevented:S=!0}={}){return function(T){if(_?.(T),S===!1||!T.defaultPrevented)return v?.(T)}}function createContext2(_,v){const S=reactExports.createContext(v),R=A=>{const{children:k,...M}=A,N=reactExports.useMemo(()=>M,Object.values(M));return jsxRuntimeExports.jsx(S.Provider,{value:N,children:k})};R.displayName=_+"Provider";function T(A){const k=reactExports.useContext(S);if(k)return k;if(v!==void 0)return v;throw new Error(`\`${A}\` must be used within \`${_}\``)}return[R,T]}function createContextScope(_,v=[]){let S=[];function R(A,k){const M=reactExports.createContext(k),N=S.length;S=[...S,k];const D=q=>{const{scope:B,children:z,...F}=q,V=B?.[_]?.[N]||M,H=reactExports.useMemo(()=>F,Object.values(F));return jsxRuntimeExports.jsx(V.Provider,{value:H,children:z})};D.displayName=A+"Provider";function I(q,B){const z=B?.[_]?.[N]||M,F=reactExports.useContext(z);if(F)return F;if(k!==void 0)return k;throw new Error(`\`${q}\` must be used within \`${A}\``)}return[D,I]}const T=()=>{const A=S.map(k=>reactExports.createContext(k));return function(M){const N=M?.[_]||A;return reactExports.useMemo(()=>({[`__scope${_}`]:{...M,[_]:N}}),[M,N])}};return T.scopeName=_,[R,composeContextScopes(T,...v)]}function composeContextScopes(..._){const v=_[0];if(_.length===1)return v;const S=()=>{const R=_.map(T=>({useScope:T(),scopeName:T.scopeName}));return function(A){const k=R.reduce((M,{useScope:N,scopeName:D})=>{const q=N(A)[`__scope${D}`];return{...M,...q}},{});return reactExports.useMemo(()=>({[`__scope${v.scopeName}`]:k}),[k])}};return S.scopeName=v.scopeName,S}function createSlot$4(_){const v=createSlotClone$4(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),N=M.find(isSlottable$4);if(N){const D=N.props.children,I=M.map(q=>q===N?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,I):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$4(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$5(T),M=mergeProps$4(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$5=Symbol("radix.slottable");function isSlottable$4(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$5}function mergeProps$4(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const N=A(...M);return T(...M),N}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$5(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((_,v)=>{const S=createSlot$4(`Primitive.${v}`),R=reactExports.forwardRef((T,A)=>{const{asChild:k,...M}=T,N=k?S:v;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(N,{...M,ref:A})});return R.displayName=`Primitive.${v}`,{..._,[v]:R}},{});function dispatchDiscreteCustomEvent(_,v){_&&reactDomExports.flushSync(()=>_.dispatchEvent(v))}function useCallbackRef$1(_){const v=reactExports.useRef(_);return reactExports.useEffect(()=>{v.current=_}),reactExports.useMemo(()=>(...S)=>v.current?.(...S),[])}function useEscapeKeydown(_,v=globalThis?.document){const S=useCallbackRef$1(_);reactExports.useEffect(()=>{const R=T=>{T.key==="Escape"&&S(T)};return v.addEventListener("keydown",R,{capture:!0}),()=>v.removeEventListener("keydown",R,{capture:!0})},[S,v])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_,v)=>{const{disableOutsidePointerEvents:S=!1,onEscapeKeyDown:R,onPointerDownOutside:T,onFocusOutside:A,onInteractOutside:k,onDismiss:M,...N}=_,D=reactExports.useContext(DismissableLayerContext),[I,q]=reactExports.useState(null),B=I?.ownerDocument??globalThis?.document,[,z]=reactExports.useState({}),F=useComposedRefs(v,te=>q(te)),V=Array.from(D.layers),[H]=[...D.layersWithOutsidePointerEventsDisabled].slice(-1),W=V.indexOf(H),Y=I?V.indexOf(I):-1,Z=D.layersWithOutsidePointerEventsDisabled.size>0,J=Y>=W,ne=usePointerDownOutside(te=>{const se=te.target,le=[...D.branches].some(ue=>ue.contains(se));!J||le||(T?.(te),k?.(te),te.defaultPrevented||M?.())},B),oe=useFocusOutside(te=>{const se=te.target;[...D.branches].some(ue=>ue.contains(se))||(A?.(te),k?.(te),te.defaultPrevented||M?.())},B);return useEscapeKeydown(te=>{Y===D.layers.size-1&&(R?.(te),!te.defaultPrevented&&M&&(te.preventDefault(),M()))},B),reactExports.useEffect(()=>{if(I)return S&&(D.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=B.body.style.pointerEvents,B.body.style.pointerEvents="none"),D.layersWithOutsidePointerEventsDisabled.add(I)),D.layers.add(I),dispatchUpdate(),()=>{S&&D.layersWithOutsidePointerEventsDisabled.size===1&&(B.body.style.pointerEvents=originalBodyPointerEvents)}},[I,B,S,D]),reactExports.useEffect(()=>()=>{I&&(D.layers.delete(I),D.layersWithOutsidePointerEventsDisabled.delete(I),dispatchUpdate())},[I,D]),reactExports.useEffect(()=>{const te=()=>z({});return document.addEventListener(CONTEXT_UPDATE,te),()=>document.removeEventListener(CONTEXT_UPDATE,te)},[]),jsxRuntimeExports.jsx(Primitive.div,{...N,ref:F,style:{pointerEvents:Z?J?"auto":"none":void 0,..._.style},onFocusCapture:composeEventHandlers(_.onFocusCapture,oe.onFocusCapture),onBlurCapture:composeEventHandlers(_.onBlurCapture,oe.onBlurCapture),onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,ne.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_,v)=>{const S=reactExports.useContext(DismissableLayerContext),R=reactExports.useRef(null),T=useComposedRefs(v,R);return reactExports.useEffect(()=>{const A=R.current;if(A)return S.branches.add(A),()=>{S.branches.delete(A)}},[S.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._,ref:T})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_,v=globalThis?.document){const S=useCallbackRef$1(_),R=reactExports.useRef(!1),T=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const A=M=>{if(M.target&&!R.current){let N=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,S,D,{discrete:!0})};const D={originalEvent:M};M.pointerType==="touch"?(v.removeEventListener("click",T.current),T.current=N,v.addEventListener("click",T.current,{once:!0})):N()}else v.removeEventListener("click",T.current);R.current=!1},k=window.setTimeout(()=>{v.addEventListener("pointerdown",A)},0);return()=>{window.clearTimeout(k),v.removeEventListener("pointerdown",A),v.removeEventListener("click",T.current)}},[v,S]),{onPointerDownCapture:()=>R.current=!0}}function useFocusOutside(_,v=globalThis?.document){const S=useCallbackRef$1(_),R=reactExports.useRef(!1);return reactExports.useEffect(()=>{const T=A=>{A.target&&!R.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,S,{originalEvent:A},{discrete:!1})};return v.addEventListener("focusin",T),()=>v.removeEventListener("focusin",T)},[v,S]),{onFocusCapture:()=>R.current=!0,onBlurCapture:()=>R.current=!1}}function dispatchUpdate(){const _=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_)}function handleAndDispatchCustomEvent(_,v,S,{discrete:R}){const T=S.originalEvent.target,A=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:S});v&&T.addEventListener(_,v,{once:!0}),R?dispatchDiscreteCustomEvent(T,A):T.dispatchEvent(A)}var useLayoutEffect2=globalThis?.document?reactExports.useLayoutEffect:()=>{},useReactId=React[" useId ".trim().toString()]||(()=>{}),count$1=0;function useId(_){const[v,S]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{S(R=>R??String(count$1++))},[_]),v?`radix-${v}`:""}const sides=["top","right","bottom","left"],min$1=Math.min,max$1=Math.max,round=Math.round,floor=Math.floor,createCoords=_=>({x:_,y:_}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_,v,S){return max$1(_,min$1(v,S))}function evaluate(_,v){return typeof _=="function"?_(v):_}function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getOppositeAxis(_){return _==="x"?"y":"x"}function getAxisLength(_){return _==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(_){return yAxisSides.has(getSide(_))?"y":"x"}function getAlignmentAxis(_){return getOppositeAxis(getSideAxis(_))}function getAlignmentSides(_,v,S){S===void 0&&(S=!1);const R=getAlignment(_),T=getAlignmentAxis(_),A=getAxisLength(T);let k=T==="x"?R===(S?"end":"start")?"right":"left":R==="start"?"bottom":"top";return v.reference[A]>v.floating[A]&&(k=getOppositePlacement(k)),[k,getOppositePlacement(k)]}function getExpandedPlacements(_){const v=getOppositePlacement(_);return[getOppositeAlignmentPlacement(_),v,getOppositeAlignmentPlacement(v)]}function getOppositeAlignmentPlacement(_){return _.replace(/start|end/g,v=>oppositeAlignmentMap[v])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(_,v,S){switch(_){case"top":case"bottom":return S?v?rlPlacement:lrPlacement:v?lrPlacement:rlPlacement;case"left":case"right":return v?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(_,v,S,R){const T=getAlignment(_);let A=getSideList(getSide(_),S==="start",R);return T&&(A=A.map(k=>k+"-"+T),v&&(A=A.concat(A.map(getOppositeAlignmentPlacement)))),A}function getOppositePlacement(_){return _.replace(/left|right|bottom|top/g,v=>oppositeSideMap[v])}function expandPaddingObject(_){return{top:0,right:0,bottom:0,left:0,..._}}function getPaddingObject(_){return typeof _!="number"?expandPaddingObject(_):{top:_,right:_,bottom:_,left:_}}function rectToClientRect(_){const{x:v,y:S,width:R,height:T}=_;return{width:R,height:T,top:S,left:v,right:v+R,bottom:S+T,x:v,y:S}}function computeCoordsFromPlacement(_,v,S){let{reference:R,floating:T}=_;const A=getSideAxis(v),k=getAlignmentAxis(v),M=getAxisLength(k),N=getSide(v),D=A==="y",I=R.x+R.width/2-T.width/2,q=R.y+R.height/2-T.height/2,B=R[M]/2-T[M]/2;let z;switch(N){case"top":z={x:I,y:R.y-T.height};break;case"bottom":z={x:I,y:R.y+R.height};break;case"right":z={x:R.x+R.width,y:q};break;case"left":z={x:R.x-T.width,y:q};break;default:z={x:R.x,y:R.y}}switch(getAlignment(v)){case"start":z[k]-=B*(S&&D?-1:1);break;case"end":z[k]+=B*(S&&D?-1:1);break}return z}const computePosition$1=async(_,v,S)=>{const{placement:R="bottom",strategy:T="absolute",middleware:A=[],platform:k}=S,M=A.filter(Boolean),N=await(k.isRTL==null?void 0:k.isRTL(v));let D=await k.getElementRects({reference:_,floating:v,strategy:T}),{x:I,y:q}=computeCoordsFromPlacement(D,R,N),B=R,z={},F=0;for(let V=0;V<M.length;V++){const{name:H,fn:W}=M[V],{x:Y,y:Z,data:J,reset:ne}=await W({x:I,y:q,initialPlacement:R,placement:B,strategy:T,middlewareData:z,rects:D,platform:k,elements:{reference:_,floating:v}});I=Y??I,q=Z??q,z={...z,[H]:{...z[H],...J}},ne&&F<=50&&(F++,typeof ne=="object"&&(ne.placement&&(B=ne.placement),ne.rects&&(D=ne.rects===!0?await k.getElementRects({reference:_,floating:v,strategy:T}):ne.rects),{x:I,y:q}=computeCoordsFromPlacement(D,B,N)),V=-1)}return{x:I,y:q,placement:B,strategy:T,middlewareData:z}};async function detectOverflow(_,v){var S;v===void 0&&(v={});const{x:R,y:T,platform:A,rects:k,elements:M,strategy:N}=_,{boundary:D="clippingAncestors",rootBoundary:I="viewport",elementContext:q="floating",altBoundary:B=!1,padding:z=0}=evaluate(v,_),F=getPaddingObject(z),H=M[B?q==="floating"?"reference":"floating":q],W=rectToClientRect(await A.getClippingRect({element:(S=await(A.isElement==null?void 0:A.isElement(H)))==null||S?H:H.contextElement||await(A.getDocumentElement==null?void 0:A.getDocumentElement(M.floating)),boundary:D,rootBoundary:I,strategy:N})),Y=q==="floating"?{x:R,y:T,width:k.floating.width,height:k.floating.height}:k.reference,Z=await(A.getOffsetParent==null?void 0:A.getOffsetParent(M.floating)),J=await(A.isElement==null?void 0:A.isElement(Z))?await(A.getScale==null?void 0:A.getScale(Z))||{x:1,y:1}:{x:1,y:1},ne=rectToClientRect(A.convertOffsetParentRelativeRectToViewportRelativeRect?await A.convertOffsetParentRelativeRectToViewportRelativeRect({elements:M,rect:Y,offsetParent:Z,strategy:N}):Y);return{top:(W.top-ne.top+F.top)/J.y,bottom:(ne.bottom-W.bottom+F.bottom)/J.y,left:(W.left-ne.left+F.left)/J.x,right:(ne.right-W.right+F.right)/J.x}}const arrow$3=_=>({name:"arrow",options:_,async fn(v){const{x:S,y:R,placement:T,rects:A,platform:k,elements:M,middlewareData:N}=v,{element:D,padding:I=0}=evaluate(_,v)||{};if(D==null)return{};const q=getPaddingObject(I),B={x:S,y:R},z=getAlignmentAxis(T),F=getAxisLength(z),V=await k.getDimensions(D),H=z==="y",W=H?"top":"left",Y=H?"bottom":"right",Z=H?"clientHeight":"clientWidth",J=A.reference[F]+A.reference[z]-B[z]-A.floating[F],ne=B[z]-A.reference[z],oe=await(k.getOffsetParent==null?void 0:k.getOffsetParent(D));let te=oe?oe[Z]:0;(!te||!await(k.isElement==null?void 0:k.isElement(oe)))&&(te=M.floating[Z]||A.floating[F]);const se=J/2-ne/2,le=te/2-V[F]/2-1,ue=min$1(q[W],le),ce=min$1(q[Y],le),ge=ue,me=te-V[F]-ce,Ee=te/2-V[F]/2+se,_e=clamp$1(ge,Ee,me),ye=!N.arrow&&getAlignment(T)!=null&&Ee!==_e&&A.reference[F]/2-(Ee<ge?ue:ce)-V[F]/2<0,be=ye?Ee<ge?Ee-ge:Ee-me:0;return{[z]:B[z]+be,data:{[z]:_e,centerOffset:Ee-_e-be,...ye&&{alignmentOffset:be}},reset:ye}}}),flip$2=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn(v){var S,R;const{placement:T,middlewareData:A,rects:k,initialPlacement:M,platform:N,elements:D}=v,{mainAxis:I=!0,crossAxis:q=!0,fallbackPlacements:B,fallbackStrategy:z="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:V=!0,...H}=evaluate(_,v);if((S=A.arrow)!=null&&S.alignmentOffset)return{};const W=getSide(T),Y=getSideAxis(M),Z=getSide(M)===M,J=await(N.isRTL==null?void 0:N.isRTL(D.floating)),ne=B||(Z||!V?[getOppositePlacement(M)]:getExpandedPlacements(M)),oe=F!=="none";!B&&oe&&ne.push(...getOppositeAxisPlacements(M,V,F,J));const te=[M,...ne],se=await detectOverflow(v,H),le=[];let ue=((R=A.flip)==null?void 0:R.overflows)||[];if(I&&le.push(se[W]),q){const Ee=getAlignmentSides(T,k,J);le.push(se[Ee[0]],se[Ee[1]])}if(ue=[...ue,{placement:T,overflows:le}],!le.every(Ee=>Ee<=0)){var ce,ge;const Ee=(((ce=A.flip)==null?void 0:ce.index)||0)+1,_e=te[Ee];if(_e&&(!(q==="alignment"?Y!==getSideAxis(_e):!1)||ue.every(Se=>getSideAxis(Se.placement)===Y?Se.overflows[0]>0:!0)))return{data:{index:Ee,overflows:ue},reset:{placement:_e}};let ye=(ge=ue.filter(be=>be.overflows[0]<=0).sort((be,Se)=>be.overflows[1]-Se.overflows[1])[0])==null?void 0:ge.placement;if(!ye)switch(z){case"bestFit":{var me;const be=(me=ue.filter(Se=>{if(oe){const De=getSideAxis(Se.placement);return De===Y||De==="y"}return!0}).map(Se=>[Se.placement,Se.overflows.filter(De=>De>0).reduce((De,xe)=>De+xe,0)]).sort((Se,De)=>Se[1]-De[1])[0])==null?void 0:me[0];be&&(ye=be);break}case"initialPlacement":ye=M;break}if(T!==ye)return{reset:{placement:ye}}}return{}}}};function getSideOffsets(_,v){return{top:_.top-v.height,right:_.right-v.width,bottom:_.bottom-v.height,left:_.left-v.width}}function isAnySideFullyClipped(_){return sides.some(v=>_[v]>=0)}const hide$2=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn(v){const{rects:S}=v,{strategy:R="referenceHidden",...T}=evaluate(_,v);switch(R){case"referenceHidden":{const A=await detectOverflow(v,{...T,elementContext:"reference"}),k=getSideOffsets(A,S.reference);return{data:{referenceHiddenOffsets:k,referenceHidden:isAnySideFullyClipped(k)}}}case"escaped":{const A=await detectOverflow(v,{...T,altBoundary:!0}),k=getSideOffsets(A,S.floating);return{data:{escapedOffsets:k,escaped:isAnySideFullyClipped(k)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(_,v){const{placement:S,platform:R,elements:T}=_,A=await(R.isRTL==null?void 0:R.isRTL(T.floating)),k=getSide(S),M=getAlignment(S),N=getSideAxis(S)==="y",D=originSides.has(k)?-1:1,I=A&&N?-1:1,q=evaluate(v,_);let{mainAxis:B,crossAxis:z,alignmentAxis:F}=typeof q=="number"?{mainAxis:q,crossAxis:0,alignmentAxis:null}:{mainAxis:q.mainAxis||0,crossAxis:q.crossAxis||0,alignmentAxis:q.alignmentAxis};return M&&typeof F=="number"&&(z=M==="end"?F*-1:F),N?{x:z*I,y:B*D}:{x:B*D,y:z*I}}const offset$2=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn(v){var S,R;const{x:T,y:A,placement:k,middlewareData:M}=v,N=await convertValueToCoords(v,_);return k===((S=M.offset)==null?void 0:S.placement)&&(R=M.arrow)!=null&&R.alignmentOffset?{}:{x:T+N.x,y:A+N.y,data:{...N,placement:k}}}}},shift$3=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn(v){const{x:S,y:R,placement:T}=v,{mainAxis:A=!0,crossAxis:k=!1,limiter:M={fn:H=>{let{x:W,y:Y}=H;return{x:W,y:Y}}},...N}=evaluate(_,v),D={x:S,y:R},I=await detectOverflow(v,N),q=getSideAxis(getSide(T)),B=getOppositeAxis(q);let z=D[B],F=D[q];if(A){const H=B==="y"?"top":"left",W=B==="y"?"bottom":"right",Y=z+I[H],Z=z-I[W];z=clamp$1(Y,z,Z)}if(k){const H=q==="y"?"top":"left",W=q==="y"?"bottom":"right",Y=F+I[H],Z=F-I[W];F=clamp$1(Y,F,Z)}const V=M.fn({...v,[B]:z,[q]:F});return{...V,data:{x:V.x-S,y:V.y-R,enabled:{[B]:A,[q]:k}}}}}},limitShift$2=function(_){return _===void 0&&(_={}),{options:_,fn(v){const{x:S,y:R,placement:T,rects:A,middlewareData:k}=v,{offset:M=0,mainAxis:N=!0,crossAxis:D=!0}=evaluate(_,v),I={x:S,y:R},q=getSideAxis(T),B=getOppositeAxis(q);let z=I[B],F=I[q];const V=evaluate(M,v),H=typeof V=="number"?{mainAxis:V,crossAxis:0}:{mainAxis:0,crossAxis:0,...V};if(N){const Z=B==="y"?"height":"width",J=A.reference[B]-A.floating[Z]+H.mainAxis,ne=A.reference[B]+A.reference[Z]-H.mainAxis;z<J?z=J:z>ne&&(z=ne)}if(D){var W,Y;const Z=B==="y"?"width":"height",J=originSides.has(getSide(T)),ne=A.reference[q]-A.floating[Z]+(J&&((W=k.offset)==null?void 0:W[q])||0)+(J?0:H.crossAxis),oe=A.reference[q]+A.reference[Z]+(J?0:((Y=k.offset)==null?void 0:Y[q])||0)-(J?H.crossAxis:0);F<ne?F=ne:F>oe&&(F=oe)}return{[B]:z,[q]:F}}}},size$2=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn(v){var S,R;const{placement:T,rects:A,platform:k,elements:M}=v,{apply:N=()=>{},...D}=evaluate(_,v),I=await detectOverflow(v,D),q=getSide(T),B=getAlignment(T),z=getSideAxis(T)==="y",{width:F,height:V}=A.floating;let H,W;q==="top"||q==="bottom"?(H=q,W=B===(await(k.isRTL==null?void 0:k.isRTL(M.floating))?"start":"end")?"left":"right"):(W=q,H=B==="end"?"top":"bottom");const Y=V-I.top-I.bottom,Z=F-I.left-I.right,J=min$1(V-I[H],Y),ne=min$1(F-I[W],Z),oe=!v.middlewareData.shift;let te=J,se=ne;if((S=v.middlewareData.shift)!=null&&S.enabled.x&&(se=Z),(R=v.middlewareData.shift)!=null&&R.enabled.y&&(te=Y),oe&&!B){const ue=max$1(I.left,0),ce=max$1(I.right,0),ge=max$1(I.top,0),me=max$1(I.bottom,0);z?se=F-2*(ue!==0||ce!==0?ue+ce:max$1(I.left,I.right)):te=V-2*(ge!==0||me!==0?ge+me:max$1(I.top,I.bottom))}await N({...v,availableWidth:se,availableHeight:te});const le=await k.getDimensions(M.floating);return F!==le.width||V!==le.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_){return isNode(_)?(_.nodeName||"").toLowerCase():"#document"}function getWindow(_){var v;return(_==null||(v=_.ownerDocument)==null?void 0:v.defaultView)||window}function getDocumentElement(_){var v;return(v=(isNode(_)?_.ownerDocument:_.document)||window.document)==null?void 0:v.documentElement}function isNode(_){return hasWindow()?_ instanceof Node||_ instanceof getWindow(_).Node:!1}function isElement(_){return hasWindow()?_ instanceof Element||_ instanceof getWindow(_).Element:!1}function isHTMLElement(_){return hasWindow()?_ instanceof HTMLElement||_ instanceof getWindow(_).HTMLElement:!1}function isShadowRoot(_){return!hasWindow()||typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof getWindow(_).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(_){const{overflow:v,overflowX:S,overflowY:R,display:T}=getComputedStyle$1(_);return/auto|scroll|overlay|hidden|clip/.test(v+R+S)&&!invalidOverflowDisplayValues.has(T)}const tableElements=new Set(["table","td","th"]);function isTableElement(_){return tableElements.has(getNodeName(_))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(_){return topLayerSelectors.some(v=>{try{return _.matches(v)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(_){const v=isWebKit(),S=isElement(_)?getComputedStyle$1(_):_;return transformProperties.some(R=>S[R]?S[R]!=="none":!1)||(S.containerType?S.containerType!=="normal":!1)||!v&&(S.backdropFilter?S.backdropFilter!=="none":!1)||!v&&(S.filter?S.filter!=="none":!1)||willChangeValues.some(R=>(S.willChange||"").includes(R))||containValues.some(R=>(S.contain||"").includes(R))}function getContainingBlock(_){let v=getParentNode(_);for(;isHTMLElement(v)&&!isLastTraversableNode(v);){if(isContainingBlock(v))return v;if(isTopLayer(v))return null;v=getParentNode(v)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(_){return lastTraversableNodeNames.has(getNodeName(_))}function getComputedStyle$1(_){return getWindow(_).getComputedStyle(_)}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function getParentNode(_){if(getNodeName(_)==="html")return _;const v=_.assignedSlot||_.parentNode||isShadowRoot(_)&&_.host||getDocumentElement(_);return isShadowRoot(v)?v.host:v}function getNearestOverflowAncestor(_){const v=getParentNode(_);return isLastTraversableNode(v)?_.ownerDocument?_.ownerDocument.body:_.body:isHTMLElement(v)&&isOverflowElement(v)?v:getNearestOverflowAncestor(v)}function getOverflowAncestors(_,v,S){var R;v===void 0&&(v=[]),S===void 0&&(S=!0);const T=getNearestOverflowAncestor(_),A=T===((R=_.ownerDocument)==null?void 0:R.body),k=getWindow(T);if(A){const M=getFrameElement(k);return v.concat(k,k.visualViewport||[],isOverflowElement(T)?T:[],M&&S?getOverflowAncestors(M):[])}return v.concat(T,getOverflowAncestors(T,[],S))}function getFrameElement(_){return _.parent&&Object.getPrototypeOf(_.parent)?_.frameElement:null}function getCssDimensions(_){const v=getComputedStyle$1(_);let S=parseFloat(v.width)||0,R=parseFloat(v.height)||0;const T=isHTMLElement(_),A=T?_.offsetWidth:S,k=T?_.offsetHeight:R,M=round(S)!==A||round(R)!==k;return M&&(S=A,R=k),{width:S,height:R,$:M}}function unwrapElement(_){return isElement(_)?_:_.contextElement}function getScale$1(_){const v=unwrapElement(_);if(!isHTMLElement(v))return createCoords(1);const S=v.getBoundingClientRect(),{width:R,height:T,$:A}=getCssDimensions(v);let k=(A?round(S.width):S.width)/R,M=(A?round(S.height):S.height)/T;return(!k||!Number.isFinite(k))&&(k=1),(!M||!Number.isFinite(M))&&(M=1),{x:k,y:M}}const noOffsets=createCoords(0);function getVisualOffsets(_){const v=getWindow(_);return!isWebKit()||!v.visualViewport?noOffsets:{x:v.visualViewport.offsetLeft,y:v.visualViewport.offsetTop}}function shouldAddVisualOffsets(_,v,S){return v===void 0&&(v=!1),!S||v&&S!==getWindow(_)?!1:v}function getBoundingClientRect(_,v,S,R){v===void 0&&(v=!1),S===void 0&&(S=!1);const T=_.getBoundingClientRect(),A=unwrapElement(_);let k=createCoords(1);v&&(R?isElement(R)&&(k=getScale$1(R)):k=getScale$1(_));const M=shouldAddVisualOffsets(A,S,R)?getVisualOffsets(A):createCoords(0);let N=(T.left+M.x)/k.x,D=(T.top+M.y)/k.y,I=T.width/k.x,q=T.height/k.y;if(A){const B=getWindow(A),z=R&&isElement(R)?getWindow(R):R;let F=B,V=getFrameElement(F);for(;V&&R&&z!==F;){const H=getScale$1(V),W=V.getBoundingClientRect(),Y=getComputedStyle$1(V),Z=W.left+(V.clientLeft+parseFloat(Y.paddingLeft))*H.x,J=W.top+(V.clientTop+parseFloat(Y.paddingTop))*H.y;N*=H.x,D*=H.y,I*=H.x,q*=H.y,N+=Z,D+=J,F=getWindow(V),V=getFrameElement(F)}}return rectToClientRect({width:I,height:q,x:N,y:D})}function getWindowScrollBarX(_,v){const S=getNodeScroll(_).scrollLeft;return v?v.left+S:getBoundingClientRect(getDocumentElement(_)).left+S}function getHTMLOffset(_,v){const S=_.getBoundingClientRect(),R=S.left+v.scrollLeft-getWindowScrollBarX(_,S),T=S.top+v.scrollTop;return{x:R,y:T}}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{elements:v,rect:S,offsetParent:R,strategy:T}=_;const A=T==="fixed",k=getDocumentElement(R),M=v?isTopLayer(v.floating):!1;if(R===k||M&&A)return S;let N={scrollLeft:0,scrollTop:0},D=createCoords(1);const I=createCoords(0),q=isHTMLElement(R);if((q||!q&&!A)&&((getNodeName(R)!=="body"||isOverflowElement(k))&&(N=getNodeScroll(R)),isHTMLElement(R))){const z=getBoundingClientRect(R);D=getScale$1(R),I.x=z.x+R.clientLeft,I.y=z.y+R.clientTop}const B=k&&!q&&!A?getHTMLOffset(k,N):createCoords(0);return{width:S.width*D.x,height:S.height*D.y,x:S.x*D.x-N.scrollLeft*D.x+I.x+B.x,y:S.y*D.y-N.scrollTop*D.y+I.y+B.y}}function getClientRects(_){return Array.from(_.getClientRects())}function getDocumentRect(_){const v=getDocumentElement(_),S=getNodeScroll(_),R=_.ownerDocument.body,T=max$1(v.scrollWidth,v.clientWidth,R.scrollWidth,R.clientWidth),A=max$1(v.scrollHeight,v.clientHeight,R.scrollHeight,R.clientHeight);let k=-S.scrollLeft+getWindowScrollBarX(_);const M=-S.scrollTop;return getComputedStyle$1(R).direction==="rtl"&&(k+=max$1(v.clientWidth,R.clientWidth)-T),{width:T,height:A,x:k,y:M}}const SCROLLBAR_MAX=25;function getViewportRect(_,v){const S=getWindow(_),R=getDocumentElement(_),T=S.visualViewport;let A=R.clientWidth,k=R.clientHeight,M=0,N=0;if(T){A=T.width,k=T.height;const I=isWebKit();(!I||I&&v==="fixed")&&(M=T.offsetLeft,N=T.offsetTop)}const D=getWindowScrollBarX(R);if(D<=0){const I=R.ownerDocument,q=I.body,B=getComputedStyle(q),z=I.compatMode==="CSS1Compat"&&parseFloat(B.marginLeft)+parseFloat(B.marginRight)||0,F=Math.abs(R.clientWidth-q.clientWidth-z);F<=SCROLLBAR_MAX&&(A-=F)}else D<=SCROLLBAR_MAX&&(A+=D);return{width:A,height:k,x:M,y:N}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(_,v){const S=getBoundingClientRect(_,!0,v==="fixed"),R=S.top+_.clientTop,T=S.left+_.clientLeft,A=isHTMLElement(_)?getScale$1(_):createCoords(1),k=_.clientWidth*A.x,M=_.clientHeight*A.y,N=T*A.x,D=R*A.y;return{width:k,height:M,x:N,y:D}}function getClientRectFromClippingAncestor(_,v,S){let R;if(v==="viewport")R=getViewportRect(_,S);else if(v==="document")R=getDocumentRect(getDocumentElement(_));else if(isElement(v))R=getInnerBoundingClientRect(v,S);else{const T=getVisualOffsets(_);R={x:v.x-T.x,y:v.y-T.y,width:v.width,height:v.height}}return rectToClientRect(R)}function hasFixedPositionAncestor(_,v){const S=getParentNode(_);return S===v||!isElement(S)||isLastTraversableNode(S)?!1:getComputedStyle$1(S).position==="fixed"||hasFixedPositionAncestor(S,v)}function getClippingElementAncestors(_,v){const S=v.get(_);if(S)return S;let R=getOverflowAncestors(_,[],!1).filter(M=>isElement(M)&&getNodeName(M)!=="body"),T=null;const A=getComputedStyle$1(_).position==="fixed";let k=A?getParentNode(_):_;for(;isElement(k)&&!isLastTraversableNode(k);){const M=getComputedStyle$1(k),N=isContainingBlock(k);!N&&M.position==="fixed"&&(T=null),(A?!N&&!T:!N&&M.position==="static"&&!!T&&absoluteOrFixed.has(T.position)||isOverflowElement(k)&&!N&&hasFixedPositionAncestor(_,k))?R=R.filter(I=>I!==k):T=M,k=getParentNode(k)}return v.set(_,R),R}function getClippingRect(_){let{element:v,boundary:S,rootBoundary:R,strategy:T}=_;const k=[...S==="clippingAncestors"?isTopLayer(v)?[]:getClippingElementAncestors(v,this._c):[].concat(S),R],M=k[0],N=k.reduce((D,I)=>{const q=getClientRectFromClippingAncestor(v,I,T);return D.top=max$1(q.top,D.top),D.right=min$1(q.right,D.right),D.bottom=min$1(q.bottom,D.bottom),D.left=max$1(q.left,D.left),D},getClientRectFromClippingAncestor(v,M,T));return{width:N.right-N.left,height:N.bottom-N.top,x:N.left,y:N.top}}function getDimensions(_){const{width:v,height:S}=getCssDimensions(_);return{width:v,height:S}}function getRectRelativeToOffsetParent(_,v,S){const R=isHTMLElement(v),T=getDocumentElement(v),A=S==="fixed",k=getBoundingClientRect(_,!0,A,v);let M={scrollLeft:0,scrollTop:0};const N=createCoords(0);function D(){N.x=getWindowScrollBarX(T)}if(R||!R&&!A)if((getNodeName(v)!=="body"||isOverflowElement(T))&&(M=getNodeScroll(v)),R){const z=getBoundingClientRect(v,!0,A,v);N.x=z.x+v.clientLeft,N.y=z.y+v.clientTop}else T&&D();A&&!R&&T&&D();const I=T&&!R&&!A?getHTMLOffset(T,M):createCoords(0),q=k.left+M.scrollLeft-N.x-I.x,B=k.top+M.scrollTop-N.y-I.y;return{x:q,y:B,width:k.width,height:k.height}}function isStaticPositioned(_){return getComputedStyle$1(_).position==="static"}function getTrueOffsetParent(_,v){if(!isHTMLElement(_)||getComputedStyle$1(_).position==="fixed")return null;if(v)return v(_);let S=_.offsetParent;return getDocumentElement(_)===S&&(S=S.ownerDocument.body),S}function getOffsetParent(_,v){const S=getWindow(_);if(isTopLayer(_))return S;if(!isHTMLElement(_)){let T=getParentNode(_);for(;T&&!isLastTraversableNode(T);){if(isElement(T)&&!isStaticPositioned(T))return T;T=getParentNode(T)}return S}let R=getTrueOffsetParent(_,v);for(;R&&isTableElement(R)&&isStaticPositioned(R);)R=getTrueOffsetParent(R,v);return R&&isLastTraversableNode(R)&&isStaticPositioned(R)&&!isContainingBlock(R)?S:R||getContainingBlock(_)||S}const getElementRects=async function(_){const v=this.getOffsetParent||getOffsetParent,S=this.getDimensions,R=await S(_.floating);return{reference:getRectRelativeToOffsetParent(_.reference,await v(_.floating),_.strategy),floating:{x:0,y:0,width:R.width,height:R.height}}};function isRTL(_){return getComputedStyle$1(_).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement,isRTL};function rectsAreEqual(_,v){return _.x===v.x&&_.y===v.y&&_.width===v.width&&_.height===v.height}function observeMove(_,v){let S=null,R;const T=getDocumentElement(_);function A(){var M;clearTimeout(R),(M=S)==null||M.disconnect(),S=null}function k(M,N){M===void 0&&(M=!1),N===void 0&&(N=1),A();const D=_.getBoundingClientRect(),{left:I,top:q,width:B,height:z}=D;if(M||v(),!B||!z)return;const F=floor(q),V=floor(T.clientWidth-(I+B)),H=floor(T.clientHeight-(q+z)),W=floor(I),Z={rootMargin:-F+"px "+-V+"px "+-H+"px "+-W+"px",threshold:max$1(0,min$1(1,N))||1};let J=!0;function ne(oe){const te=oe[0].intersectionRatio;if(te!==N){if(!J)return k();te?k(!1,te):R=setTimeout(()=>{k(!1,1e-7)},1e3)}te===1&&!rectsAreEqual(D,_.getBoundingClientRect())&&k(),J=!1}try{S=new IntersectionObserver(ne,{...Z,root:T.ownerDocument})}catch{S=new IntersectionObserver(ne,Z)}S.observe(_)}return k(!0),A}function autoUpdate(_,v,S,R){R===void 0&&(R={});const{ancestorScroll:T=!0,ancestorResize:A=!0,elementResize:k=typeof ResizeObserver=="function",layoutShift:M=typeof IntersectionObserver=="function",animationFrame:N=!1}=R,D=unwrapElement(_),I=T||A?[...D?getOverflowAncestors(D):[],...getOverflowAncestors(v)]:[];I.forEach(W=>{T&&W.addEventListener("scroll",S,{passive:!0}),A&&W.addEventListener("resize",S)});const q=D&&M?observeMove(D,S):null;let B=-1,z=null;k&&(z=new ResizeObserver(W=>{let[Y]=W;Y&&Y.target===D&&z&&(z.unobserve(v),cancelAnimationFrame(B),B=requestAnimationFrame(()=>{var Z;(Z=z)==null||Z.observe(v)})),S()}),D&&!N&&z.observe(D),z.observe(v));let F,V=N?getBoundingClientRect(_):null;N&&H();function H(){const W=getBoundingClientRect(_);V&&!rectsAreEqual(V,W)&&S(),V=W,F=requestAnimationFrame(H)}return S(),()=>{var W;I.forEach(Y=>{T&&Y.removeEventListener("scroll",S),A&&Y.removeEventListener("resize",S)}),q?.(),(W=z)==null||W.disconnect(),z=null,N&&cancelAnimationFrame(F)}}const offset$1=offset$2,shift$2=shift$3,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_,v,S)=>{const R=new Map,T={platform,...S},A={...T.platform,_c:R};return computePosition$1(_,v,{...T,platform:A})};var isClient=typeof document<"u",noop$2=function(){},index=isClient?reactExports.useLayoutEffect:noop$2;function deepEqual(_,v){if(_===v)return!0;if(typeof _!=typeof v)return!1;if(typeof _=="function"&&_.toString()===v.toString())return!0;let S,R,T;if(_&&v&&typeof _=="object"){if(Array.isArray(_)){if(S=_.length,S!==v.length)return!1;for(R=S;R--!==0;)if(!deepEqual(_[R],v[R]))return!1;return!0}if(T=Object.keys(_),S=T.length,S!==Object.keys(v).length)return!1;for(R=S;R--!==0;)if(!{}.hasOwnProperty.call(v,T[R]))return!1;for(R=S;R--!==0;){const A=T[R];if(!(A==="_owner"&&_.$$typeof)&&!deepEqual(_[A],v[A]))return!1}return!0}return _!==_&&v!==v}function getDPR(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_,v){const S=getDPR(_);return Math.round(v*S)/S}function useLatestRef(_){const v=reactExports.useRef(_);return index(()=>{v.current=_}),v}function useFloating(_){_===void 0&&(_={});const{placement:v="bottom",strategy:S="absolute",middleware:R=[],platform:T,elements:{reference:A,floating:k}={},transform:M=!0,whileElementsMounted:N,open:D}=_,[I,q]=reactExports.useState({x:0,y:0,strategy:S,placement:v,middlewareData:{},isPositioned:!1}),[B,z]=reactExports.useState(R);deepEqual(B,R)||z(R);const[F,V]=reactExports.useState(null),[H,W]=reactExports.useState(null),Y=reactExports.useCallback(Se=>{Se!==oe.current&&(oe.current=Se,V(Se))},[]),Z=reactExports.useCallback(Se=>{Se!==te.current&&(te.current=Se,W(Se))},[]),J=A||F,ne=k||H,oe=reactExports.useRef(null),te=reactExports.useRef(null),se=reactExports.useRef(I),le=N!=null,ue=useLatestRef(N),ce=useLatestRef(T),ge=useLatestRef(D),me=reactExports.useCallback(()=>{if(!oe.current||!te.current)return;const Se={placement:v,strategy:S,middleware:B};ce.current&&(Se.platform=ce.current),computePosition(oe.current,te.current,Se).then(De=>{const xe={...De,isPositioned:ge.current!==!1};Ee.current&&!deepEqual(se.current,xe)&&(se.current=xe,reactDomExports.flushSync(()=>{q(xe)}))})},[B,v,S,ce,ge]);index(()=>{D===!1&&se.current.isPositioned&&(se.current.isPositioned=!1,q(Se=>({...Se,isPositioned:!1})))},[D]);const Ee=reactExports.useRef(!1);index(()=>(Ee.current=!0,()=>{Ee.current=!1}),[]),index(()=>{if(J&&(oe.current=J),ne&&(te.current=ne),J&&ne){if(ue.current)return ue.current(J,ne,me);me()}},[J,ne,me,ue,le]);const _e=reactExports.useMemo(()=>({reference:oe,floating:te,setReference:Y,setFloating:Z}),[Y,Z]),ye=reactExports.useMemo(()=>({reference:J,floating:ne}),[J,ne]),be=reactExports.useMemo(()=>{const Se={position:S,left:0,top:0};if(!ye.floating)return Se;const De=roundByDPR(ye.floating,I.x),xe=roundByDPR(ye.floating,I.y);return M?{...Se,transform:"translate("+De+"px, "+xe+"px)",...getDPR(ye.floating)>=1.5&&{willChange:"transform"}}:{position:S,left:De,top:xe}},[S,M,ye.floating,I.x,I.y]);return reactExports.useMemo(()=>({...I,update:me,refs:_e,elements:ye,floatingStyles:be}),[I,me,_e,ye,be])}const arrow$1=_=>{function v(S){return{}.hasOwnProperty.call(S,"current")}return{name:"arrow",options:_,fn(S){const{element:R,padding:T}=typeof _=="function"?_(S):_;return R&&v(R)?R.current!=null?arrow$2({element:R.current,padding:T}).fn(S):{}:R?arrow$2({element:R,padding:T}).fn(S):{}}}},offset=(_,v)=>({...offset$1(_),options:[_,v]}),shift$1=(_,v)=>({...shift$2(_),options:[_,v]}),limitShift=(_,v)=>({...limitShift$1(_),options:[_,v]}),flip=(_,v)=>({...flip$1(_),options:[_,v]}),size=(_,v)=>({...size$1(_),options:[_,v]}),hide=(_,v)=>({...hide$1(_),options:[_,v]}),arrow=(_,v)=>({...arrow$1(_),options:[_,v]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((_,v)=>{const{children:S,width:R=10,height:T=5,...A}=_;return jsxRuntimeExports.jsx(Primitive.svg,{...A,ref:v,width:R,height:T,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?S:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$3=Arrow$1;function useSize(_){const[v,S]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_){S({width:_.offsetWidth,height:_.offsetHeight});const R=new ResizeObserver(T=>{if(!Array.isArray(T)||!T.length)return;const A=T[0];let k,M;if("borderBoxSize"in A){const N=A.borderBoxSize,D=Array.isArray(N)?N[0]:N;k=D.inlineSize,M=D.blockSize}else k=_.offsetWidth,M=_.offsetHeight;S({width:k,height:M})});return R.observe(_,{box:"border-box"}),()=>R.unobserve(_)}else S(void 0)},[_]),v}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_=>{const{__scopePopper:v,children:S}=_,[R,T]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:v,anchor:R,onAnchorChange:T,children:S})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((_,v)=>{const{__scopePopper:S,virtualRef:R,...T}=_,A=usePopperContext(ANCHOR_NAME$1,S),k=reactExports.useRef(null),M=useComposedRefs(v,k),N=reactExports.useRef(null);return reactExports.useEffect(()=>{const D=N.current;N.current=R?.current||k.current,D!==N.current&&A.onAnchorChange(N.current)}),R?null:jsxRuntimeExports.jsx(Primitive.div,{...T,ref:M})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$5="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$5),PopperContent=reactExports.forwardRef((_,v)=>{const{__scopePopper:S,side:R="bottom",sideOffset:T=0,align:A="center",alignOffset:k=0,arrowPadding:M=0,avoidCollisions:N=!0,collisionBoundary:D=[],collisionPadding:I=0,sticky:q="partial",hideWhenDetached:B=!1,updatePositionStrategy:z="optimized",onPlaced:F,...V}=_,H=usePopperContext(CONTENT_NAME$5,S),[W,Y]=reactExports.useState(null),Z=useComposedRefs(v,Te=>Y(Te)),[J,ne]=reactExports.useState(null),oe=useSize(J),te=oe?.width??0,se=oe?.height??0,le=R+(A!=="center"?"-"+A:""),ue=typeof I=="number"?I:{top:0,right:0,bottom:0,left:0,...I},ce=Array.isArray(D)?D:[D],ge=ce.length>0,me={padding:ue,boundary:ce.filter(isNotNull),altBoundary:ge},{refs:Ee,floatingStyles:_e,placement:ye,isPositioned:be,middlewareData:Se}=useFloating({strategy:"fixed",placement:le,whileElementsMounted:(...Te)=>autoUpdate(...Te,{animationFrame:z==="always"}),elements:{reference:H.anchor},middleware:[offset({mainAxis:T+se,alignmentAxis:k}),N&&shift$1({mainAxis:!0,crossAxis:!1,limiter:q==="partial"?limitShift():void 0,...me}),N&&flip({...me}),size({...me,apply:({elements:Te,rects:ze,availableWidth:Fe,availableHeight:Ie})=>{const{width:Le,height:$e}=ze.reference,qe=Te.floating.style;qe.setProperty("--radix-popper-available-width",`${Fe}px`),qe.setProperty("--radix-popper-available-height",`${Ie}px`),qe.setProperty("--radix-popper-anchor-width",`${Le}px`),qe.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),J&&arrow({element:J,padding:M}),transformOrigin({arrowWidth:te,arrowHeight:se}),B&&hide({strategy:"referenceHidden",...me})]}),[De,xe]=getSideAndAlignFromPlacement(ye),pe=useCallbackRef$1(F);useLayoutEffect2(()=>{be&&pe?.()},[be,pe]);const we=Se.arrow?.x,Oe=Se.arrow?.y,Ce=Se.arrow?.centerOffset!==0,[Pe,Ne]=reactExports.useState();return useLayoutEffect2(()=>{W&&Ne(window.getComputedStyle(W).zIndex)},[W]),jsxRuntimeExports.jsx("div",{ref:Ee.setFloating,"data-radix-popper-content-wrapper":"",style:{..._e,transform:be?_e.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[Se.transformOrigin?.x,Se.transformOrigin?.y].join(" "),...Se.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:S,placedSide:De,onArrowChange:ne,arrowX:we,arrowY:Oe,shouldHideArrow:Ce,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":De,"data-align":xe,...V,ref:Z,style:{...V.style,animation:be?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$5;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(v,S){const{__scopePopper:R,...T}=v,A=useContentContext(ARROW_NAME$4,R),k=OPPOSITE_SIDE[A.placedSide];return jsxRuntimeExports.jsx("span",{ref:A.onArrowChange,style:{position:"absolute",left:A.arrowX,top:A.arrowY,[k]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[A.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[A.placedSide],visibility:A.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$3,{...T,ref:S,style:{...T.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(_){return _!==null}var transformOrigin=_=>({name:"transformOrigin",options:_,fn(v){const{placement:S,rects:R,middlewareData:T}=v,k=T.arrow?.centerOffset!==0,M=k?0:_.arrowWidth,N=k?0:_.arrowHeight,[D,I]=getSideAndAlignFromPlacement(S),q={start:"0%",center:"50%",end:"100%"}[I],B=(T.arrow?.x??0)+M/2,z=(T.arrow?.y??0)+N/2;let F="",V="";return D==="bottom"?(F=k?q:`${B}px`,V=`${-N}px`):D==="top"?(F=k?q:`${B}px`,V=`${R.floating.height+N}px`):D==="right"?(F=`${-N}px`,V=k?q:`${z}px`):D==="left"&&(F=`${R.floating.width+N}px`,V=k?q:`${z}px`),{data:{x:F,y:V}}}});function getSideAndAlignFromPlacement(_){const[v,S="center"]=_.split("-");return[v,S]}var Root2$2=Popper,Anchor=PopperAnchor,Content$1=PopperContent,Arrow=PopperArrow,PORTAL_NAME$5="Portal",Portal$4=reactExports.forwardRef((_,v)=>{const{container:S,...R}=_,[T,A]=reactExports.useState(!1);useLayoutEffect2(()=>A(!0),[]);const k=S||T&&globalThis?.document?.body;return k?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...R,ref:v}),k):null});Portal$4.displayName=PORTAL_NAME$5;function useStateMachine(_,v){return reactExports.useReducer((S,R)=>v[S][R]??S,_)}var Presence=_=>{const{present:v,children:S}=_,R=usePresence(v),T=typeof S=="function"?S({present:R.isPresent}):reactExports.Children.only(S),A=useComposedRefs(R.ref,getElementRef$4(T));return typeof S=="function"||R.isPresent?reactExports.cloneElement(T,{ref:A}):null};Presence.displayName="Presence";function usePresence(_){const[v,S]=reactExports.useState(),R=reactExports.useRef(null),T=reactExports.useRef(_),A=reactExports.useRef("none"),k=_?"mounted":"unmounted",[M,N]=useStateMachine(k,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const D=getAnimationName(R.current);A.current=M==="mounted"?D:"none"},[M]),useLayoutEffect2(()=>{const D=R.current,I=T.current;if(I!==_){const B=A.current,z=getAnimationName(D);_?N("MOUNT"):z==="none"||D?.display==="none"?N("UNMOUNT"):N(I&&B!==z?"ANIMATION_OUT":"UNMOUNT"),T.current=_}},[_,N]),useLayoutEffect2(()=>{if(v){let D;const I=v.ownerDocument.defaultView??window,q=z=>{const V=getAnimationName(R.current).includes(CSS.escape(z.animationName));if(z.target===v&&V&&(N("ANIMATION_END"),!T.current)){const H=v.style.animationFillMode;v.style.animationFillMode="forwards",D=I.setTimeout(()=>{v.style.animationFillMode==="forwards"&&(v.style.animationFillMode=H)})}},B=z=>{z.target===v&&(A.current=getAnimationName(R.current))};return v.addEventListener("animationstart",B),v.addEventListener("animationcancel",q),v.addEventListener("animationend",q),()=>{I.clearTimeout(D),v.removeEventListener("animationstart",B),v.removeEventListener("animationcancel",q),v.removeEventListener("animationend",q)}}else N("ANIMATION_END")},[v,N]),{isPresent:["mounted","unmountSuspended"].includes(M),ref:reactExports.useCallback(D=>{R.current=D?getComputedStyle(D):null,S(D)},[])}}function getAnimationName(_){return _?.animationName||"none"}function getElementRef$4(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var SLOTTABLE_IDENTIFIER$4=Symbol("radix.slottable");function createSlottable(_){const v=({children:S})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:S});return v.displayName=`${_}.Slottable`,v.__radixId=SLOTTABLE_IDENTIFIER$4,v}var useInsertionEffect=React[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:_,defaultProp:v,onChange:S=()=>{},caller:R}){const[T,A,k]=useUncontrolledState({defaultProp:v,onChange:S}),M=_!==void 0,N=M?_:T;{const I=reactExports.useRef(_!==void 0);reactExports.useEffect(()=>{const q=I.current;q!==M&&console.warn(`${R} is changing from ${q?"controlled":"uncontrolled"} to ${M?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),I.current=M},[M,R])}const D=reactExports.useCallback(I=>{if(M){const q=isFunction$1(I)?I(_):I;q!==_&&k.current?.(q)}else A(I)},[M,_,A,k]);return[N,D]}function useUncontrolledState({defaultProp:_,onChange:v}){const[S,R]=reactExports.useState(_),T=reactExports.useRef(S),A=reactExports.useRef(v);return useInsertionEffect(()=>{A.current=v},[v]),reactExports.useEffect(()=>{T.current!==S&&(A.current?.(S),T.current=S)},[S,T]),[S,R,A]}function isFunction$1(_){return typeof _=="function"}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_,v)=>jsxRuntimeExports.jsx(Primitive.span,{..._,ref:v,style:{...VISUALLY_HIDDEN_STYLES,..._.style}}));VisuallyHidden.displayName=NAME;var Root$2=VisuallyHidden,[createTooltipContext]=createContextScope("Tooltip",[createPopperScope]),usePopperScope$2=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=_=>{const{__scopeTooltip:v,delayDuration:S=DEFAULT_DELAY_DURATION,skipDelayDuration:R=300,disableHoverableContent:T=!1,children:A}=_,k=reactExports.useRef(!0),M=reactExports.useRef(!1),N=reactExports.useRef(0);return reactExports.useEffect(()=>{const D=N.current;return()=>window.clearTimeout(D)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:v,isOpenDelayedRef:k,delayDuration:S,onOpen:reactExports.useCallback(()=>{window.clearTimeout(N.current),k.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(N.current),N.current=window.setTimeout(()=>k.current=!0,R)},[R]),isPointerInTransitRef:M,onPointerInTransitChange:reactExports.useCallback(D=>{M.current=D},[]),disableHoverableContent:T,children:A})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=_=>{const{__scopeTooltip:v,children:S,open:R,defaultOpen:T,onOpenChange:A,disableHoverableContent:k,delayDuration:M}=_,N=useTooltipProviderContext(TOOLTIP_NAME,_.__scopeTooltip),D=usePopperScope$2(v),[I,q]=reactExports.useState(null),B=useId(),z=reactExports.useRef(0),F=k??N.disableHoverableContent,V=M??N.delayDuration,H=reactExports.useRef(!1),[W,Y]=useControllableState({prop:R,defaultProp:T??!1,onChange:te=>{te?(N.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):N.onClose(),A?.(te)},caller:TOOLTIP_NAME}),Z=reactExports.useMemo(()=>W?H.current?"delayed-open":"instant-open":"closed",[W]),J=reactExports.useCallback(()=>{window.clearTimeout(z.current),z.current=0,H.current=!1,Y(!0)},[Y]),ne=reactExports.useCallback(()=>{window.clearTimeout(z.current),z.current=0,Y(!1)},[Y]),oe=reactExports.useCallback(()=>{window.clearTimeout(z.current),z.current=window.setTimeout(()=>{H.current=!0,Y(!0),z.current=0},V)},[V,Y]);return reactExports.useEffect(()=>()=>{z.current&&(window.clearTimeout(z.current),z.current=0)},[]),jsxRuntimeExports.jsx(Root2$2,{...D,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:v,contentId:B,open:W,stateAttribute:Z,trigger:I,onTriggerChange:q,onTriggerEnter:reactExports.useCallback(()=>{N.isOpenDelayedRef.current?oe():J()},[N.isOpenDelayedRef,oe,J]),onTriggerLeave:reactExports.useCallback(()=>{F?ne():(window.clearTimeout(z.current),z.current=0)},[ne,F]),onOpen:J,onClose:ne,disableHoverableContent:F,children:S})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME$4="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeTooltip:S,...R}=_,T=useTooltipContext(TRIGGER_NAME$4,S),A=useTooltipProviderContext(TRIGGER_NAME$4,S),k=usePopperScope$2(S),M=reactExports.useRef(null),N=useComposedRefs(v,M,T.onTriggerChange),D=reactExports.useRef(!1),I=reactExports.useRef(!1),q=reactExports.useCallback(()=>D.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",q),[q]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...k,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":T.open?T.contentId:void 0,"data-state":T.stateAttribute,...R,ref:N,onPointerMove:composeEventHandlers(_.onPointerMove,B=>{B.pointerType!=="touch"&&!I.current&&!A.isPointerInTransitRef.current&&(T.onTriggerEnter(),I.current=!0)}),onPointerLeave:composeEventHandlers(_.onPointerLeave,()=>{T.onTriggerLeave(),I.current=!1}),onPointerDown:composeEventHandlers(_.onPointerDown,()=>{T.open&&T.onClose(),D.current=!0,document.addEventListener("pointerup",q,{once:!0})}),onFocus:composeEventHandlers(_.onFocus,()=>{D.current||T.onOpen()}),onBlur:composeEventHandlers(_.onBlur,T.onClose),onClick:composeEventHandlers(_.onClick,T.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME$4;var PORTAL_NAME$4="TooltipPortal",[PortalProvider$2,usePortalContext$2]=createTooltipContext(PORTAL_NAME$4,{forceMount:void 0}),TooltipPortal=_=>{const{__scopeTooltip:v,forceMount:S,children:R,container:T}=_,A=useTooltipContext(PORTAL_NAME$4,v);return jsxRuntimeExports.jsx(PortalProvider$2,{scope:v,forceMount:S,children:jsxRuntimeExports.jsx(Presence,{present:S||A.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:T,children:R})})})};TooltipPortal.displayName=PORTAL_NAME$4;var CONTENT_NAME$4="TooltipContent",TooltipContent$1=reactExports.forwardRef((_,v)=>{const S=usePortalContext$2(CONTENT_NAME$4,_.__scopeTooltip),{forceMount:R=S.forceMount,side:T="top",...A}=_,k=useTooltipContext(CONTENT_NAME$4,_.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:R||k.open,children:k.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:T,...A,ref:v}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:T,...A,ref:v})})}),TooltipContentHoverable=reactExports.forwardRef((_,v)=>{const S=useTooltipContext(CONTENT_NAME$4,_.__scopeTooltip),R=useTooltipProviderContext(CONTENT_NAME$4,_.__scopeTooltip),T=reactExports.useRef(null),A=useComposedRefs(v,T),[k,M]=reactExports.useState(null),{trigger:N,onClose:D}=S,I=T.current,{onPointerInTransitChange:q}=R,B=reactExports.useCallback(()=>{M(null),q(!1)},[q]),z=reactExports.useCallback((F,V)=>{const H=F.currentTarget,W={x:F.clientX,y:F.clientY},Y=getExitSideFromRect(W,H.getBoundingClientRect()),Z=getPaddedExitPoints(W,Y),J=getPointsFromRect(V.getBoundingClientRect()),ne=getHull([...Z,...J]);M(ne),q(!0)},[q]);return reactExports.useEffect(()=>()=>B(),[B]),reactExports.useEffect(()=>{if(N&&I){const F=H=>z(H,I),V=H=>z(H,N);return N.addEventListener("pointerleave",F),I.addEventListener("pointerleave",V),()=>{N.removeEventListener("pointerleave",F),I.removeEventListener("pointerleave",V)}}},[N,I,z,B]),reactExports.useEffect(()=>{if(k){const F=V=>{const H=V.target,W={x:V.clientX,y:V.clientY},Y=N?.contains(H)||I?.contains(H),Z=!isPointInPolygon$1(W,k);Y?B():Z&&(B(),D())};return document.addEventListener("pointermove",F),()=>document.removeEventListener("pointermove",F)}},[N,I,k,D,B]),jsxRuntimeExports.jsx(TooltipContentImpl,{..._,ref:A})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeTooltip:S,children:R,"aria-label":T,onEscapeKeyDown:A,onPointerDownOutside:k,...M}=_,N=useTooltipContext(CONTENT_NAME$4,S),D=usePopperScope$2(S),{onClose:I}=N;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,I),()=>document.removeEventListener(TOOLTIP_OPEN,I)),[I]),reactExports.useEffect(()=>{if(N.trigger){const q=B=>{B.target?.contains(N.trigger)&&I()};return window.addEventListener("scroll",q,{capture:!0}),()=>window.removeEventListener("scroll",q,{capture:!0})}},[N.trigger,I]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:A,onPointerDownOutside:k,onFocusOutside:q=>q.preventDefault(),onDismiss:I,children:jsxRuntimeExports.jsxs(Content$1,{"data-state":N.stateAttribute,...D,...M,ref:v,style:{...M.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:R}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:S,isInside:!0,children:jsxRuntimeExports.jsx(Root$2,{id:N.contentId,role:"tooltip",children:T||R})})]})})});TooltipContent$1.displayName=CONTENT_NAME$4;var ARROW_NAME$3="TooltipArrow",TooltipArrow=reactExports.forwardRef((_,v)=>{const{__scopeTooltip:S,...R}=_,T=usePopperScope$2(S);return useVisuallyHiddenContentContext(ARROW_NAME$3,S).isInside?null:jsxRuntimeExports.jsx(Arrow,{...T,...R,ref:v})});TooltipArrow.displayName=ARROW_NAME$3;function getExitSideFromRect(_,v){const S=Math.abs(v.top-_.y),R=Math.abs(v.bottom-_.y),T=Math.abs(v.right-_.x),A=Math.abs(v.left-_.x);switch(Math.min(S,R,T,A)){case A:return"left";case T:return"right";case S:return"top";case R:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(_,v,S=5){const R=[];switch(v){case"top":R.push({x:_.x-S,y:_.y+S},{x:_.x+S,y:_.y+S});break;case"bottom":R.push({x:_.x-S,y:_.y-S},{x:_.x+S,y:_.y-S});break;case"left":R.push({x:_.x+S,y:_.y-S},{x:_.x+S,y:_.y+S});break;case"right":R.push({x:_.x-S,y:_.y-S},{x:_.x-S,y:_.y+S});break}return R}function getPointsFromRect(_){const{top:v,right:S,bottom:R,left:T}=_;return[{x:T,y:v},{x:S,y:v},{x:S,y:R},{x:T,y:R}]}function isPointInPolygon$1(_,v){const{x:S,y:R}=_;let T=!1;for(let A=0,k=v.length-1;A<v.length;k=A++){const M=v[A],N=v[k],D=M.x,I=M.y,q=N.x,B=N.y;I>R!=B>R&&S<(q-D)*(R-I)/(B-I)+D&&(T=!T)}return T}function getHull(_){const v=_.slice();return v.sort((S,R)=>S.x<R.x?-1:S.x>R.x?1:S.y<R.y?-1:S.y>R.y?1:0),getHullPresorted(v)}function getHullPresorted(_){if(_.length<=1)return _.slice();const v=[];for(let R=0;R<_.length;R++){const T=_[R];for(;v.length>=2;){const A=v[v.length-1],k=v[v.length-2];if((A.x-k.x)*(T.y-k.y)>=(A.y-k.y)*(T.x-k.x))v.pop();else break}v.push(T)}v.pop();const S=[];for(let R=_.length-1;R>=0;R--){const T=_[R];for(;S.length>=2;){const A=S[S.length-1],k=S[S.length-2];if((A.x-k.x)*(T.y-k.y)>=(A.y-k.y)*(T.x-k.x))S.pop();else break}S.push(T)}return S.pop(),v.length===1&&S.length===1&&v[0].x===S[0].x&&v[0].y===S[0].y?v:v.concat(S)}var Provider=TooltipProvider$1,Root3$1=Tooltip$1,Trigger$3=TooltipTrigger$1,Portal$3=TooltipPortal,Content2$3=TooltipContent$1;const TooltipProvider=Provider,Tooltip=Root3$1,TooltipTrigger=Trigger$3,TooltipContent=reactExports.forwardRef(({className:_,sideOffset:v=4,...S},R)=>jsxRuntimeExports.jsx(Portal$3,{children:jsxRuntimeExports.jsx(Content2$3,{ref:R,sideOffset:v,className:cn$1("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",_),...S})}));TooltipContent.displayName=Content2$3.displayName;function DivHover({hoverContent:_,children:v,className:S,delayDuration:R=250,...T}){return jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{delayDuration:R,disableHoverableContent:!0,children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:v}),jsxRuntimeExports.jsx(TooltipContent,{...T,className:cn$1("bg-popover text-popover-foreground border border-foreground/20 shadow-lg",S),children:_})]})})}function ButtonHover({hoverContent:_,...v}){return jsxRuntimeExports.jsx(DivHover,{hoverContent:_,children:jsxRuntimeExports.jsx(Button,{...v})})}const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=_=>_.replace(/^([A-Z])|[\s-_]+(\w)/g,(v,S,R)=>R?R.toUpperCase():S.toLowerCase()),toPascalCase=_=>{const v=toCamelCase(_);return v.charAt(0).toUpperCase()+v.slice(1)},mergeClasses=(..._)=>_.filter((v,S,R)=>!!v&&v.trim()!==""&&R.indexOf(v)===S).join(" ").trim(),hasA11yProp=_=>{for(const v in _)if(v.startsWith("aria-")||v==="role"||v==="title")return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon$1=reactExports.forwardRef(({color:_="currentColor",size:v=24,strokeWidth:S=2,absoluteStrokeWidth:R,className:T="",children:A,iconNode:k,...M},N)=>reactExports.createElement("svg",{ref:N,...defaultAttributes,width:v,height:v,stroke:_,strokeWidth:R?Number(S)*24/Number(v):S,className:mergeClasses("lucide",T),...!A&&!hasA11yProp(M)&&{"aria-hidden":"true"},...M},[...k.map(([D,I])=>reactExports.createElement(D,I)),...Array.isArray(A)?A:[A]]));const createLucideIcon=(_,v)=>{const S=reactExports.forwardRef(({className:R,...T},A)=>reactExports.createElement(Icon$1,{ref:A,iconNode:v,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(_))}`,`lucide-${_}`,R),...T}));return S.displayName=toPascalCase(_),S};const __iconNode$p=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$p);const __iconNode$o=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$o);const __iconNode$n=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$n);const __iconNode$m=[["path",{d:"M10 6h8",key:"zvc2xc"}],["path",{d:"M12 16h6",key:"yi5mkt"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 11h7",key:"wz2hg0"}]],ChartGantt=createLucideIcon("chart-gantt",__iconNode$m);const __iconNode$l=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$l);const __iconNode$k=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$k);const __iconNode$j=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$j);const __iconNode$i=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$i);const __iconNode$h=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$h);const __iconNode$g=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle=createLucideIcon("circle",__iconNode$g);const __iconNode$f=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$f);const __iconNode$e=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],CornerDownRight=createLucideIcon("corner-down-right",__iconNode$e);const __iconNode$d=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$d);const __iconNode$c=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Earth=createLucideIcon("earth",__iconNode$c);const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$b);const __iconNode$a=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$a);const __iconNode$9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$9);const __iconNode$8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$8);const __iconNode$7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$7);const __iconNode$6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Save=createLucideIcon("save",__iconNode$6);const __iconNode$5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings$1=createLucideIcon("settings",__iconNode$5);const __iconNode$4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$4);const __iconNode$3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$3);const __iconNode$2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$2);const __iconNode$1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$1);const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode);var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_,v)=>{const{loop:S=!1,trapped:R=!1,onMountAutoFocus:T,onUnmountAutoFocus:A,...k}=_,[M,N]=reactExports.useState(null),D=useCallbackRef$1(T),I=useCallbackRef$1(A),q=reactExports.useRef(null),B=useComposedRefs(v,V=>N(V)),z=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(R){let V=function(Z){if(z.paused||!M)return;const J=Z.target;M.contains(J)?q.current=J:focus(q.current,{select:!0})},H=function(Z){if(z.paused||!M)return;const J=Z.relatedTarget;J!==null&&(M.contains(J)||focus(q.current,{select:!0}))},W=function(Z){if(document.activeElement===document.body)for(const ne of Z)ne.removedNodes.length>0&&focus(M)};document.addEventListener("focusin",V),document.addEventListener("focusout",H);const Y=new MutationObserver(W);return M&&Y.observe(M,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",V),document.removeEventListener("focusout",H),Y.disconnect()}}},[R,M,z.paused]),reactExports.useEffect(()=>{if(M){focusScopesStack.add(z);const V=document.activeElement;if(!M.contains(V)){const W=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);M.addEventListener(AUTOFOCUS_ON_MOUNT,D),M.dispatchEvent(W),W.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(M)),{select:!0}),document.activeElement===V&&focus(M))}return()=>{M.removeEventListener(AUTOFOCUS_ON_MOUNT,D),setTimeout(()=>{const W=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);M.addEventListener(AUTOFOCUS_ON_UNMOUNT,I),M.dispatchEvent(W),W.defaultPrevented||focus(V??document.body,{select:!0}),M.removeEventListener(AUTOFOCUS_ON_UNMOUNT,I),focusScopesStack.remove(z)},0)}}},[M,D,I,z]);const F=reactExports.useCallback(V=>{if(!S&&!R||z.paused)return;const H=V.key==="Tab"&&!V.altKey&&!V.ctrlKey&&!V.metaKey,W=document.activeElement;if(H&&W){const Y=V.currentTarget,[Z,J]=getTabbableEdges(Y);Z&&J?!V.shiftKey&&W===J?(V.preventDefault(),S&&focus(Z,{select:!0})):V.shiftKey&&W===Z&&(V.preventDefault(),S&&focus(J,{select:!0})):W===Y&&V.preventDefault()}},[S,R,z.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...k,ref:B,onKeyDown:F})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(_,{select:v=!1}={}){const S=document.activeElement;for(const R of _)if(focus(R,{select:v}),document.activeElement!==S)return}function getTabbableEdges(_){const v=getTabbableCandidates(_),S=findVisible(v,_),R=findVisible(v.reverse(),_);return[S,R]}function getTabbableCandidates(_){const v=[],S=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:R=>{const T=R.tagName==="INPUT"&&R.type==="hidden";return R.disabled||R.hidden||T?NodeFilter.FILTER_SKIP:R.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;S.nextNode();)v.push(S.currentNode);return v}function findVisible(_,v){for(const S of _)if(!isHidden(S,{upTo:v}))return S}function isHidden(_,{upTo:v}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if(v!==void 0&&_===v)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function isSelectableInput(_){return _ instanceof HTMLInputElement&&"select"in _}function focus(_,{select:v=!1}={}){if(_&&_.focus){const S=document.activeElement;_.focus({preventScroll:!0}),_!==S&&isSelectableInput(_)&&v&&_.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _=[];return{add(v){const S=_[0];v!==S&&S?.pause(),_=arrayRemove(_,v),_.unshift(v)},remove(v){_=arrayRemove(_,v),_[0]?.resume()}}}function arrayRemove(_,v){const S=[..._],R=S.indexOf(v);return R!==-1&&S.splice(R,1),S}function removeLinks(_){return _.filter(v=>v.tagName!=="A")}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(v=>v.remove()),count--}},[])}function createFocusGuard(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.outline="none",_.style.opacity="0",_.style.position="fixed",_.style.pointerEvents="none",_}var __assign=function(){return __assign=Object.assign||function(v){for(var S,R=1,T=arguments.length;R<T;R++){S=arguments[R];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(v[A]=S[A])}return v},__assign.apply(this,arguments)};function __rest(_,v){var S={};for(var R in _)Object.prototype.hasOwnProperty.call(_,R)&&v.indexOf(R)<0&&(S[R]=_[R]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,R=Object.getOwnPropertySymbols(_);T<R.length;T++)v.indexOf(R[T])<0&&Object.prototype.propertyIsEnumerable.call(_,R[T])&&(S[R[T]]=_[R[T]]);return S}function __spreadArray(_,v,S){if(S||arguments.length===2)for(var R=0,T=v.length,A;R<T;R++)(A||!(R in v))&&(A||(A=Array.prototype.slice.call(v,0,R)),A[R]=v[R]);return _.concat(A||Array.prototype.slice.call(v))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_,v){return typeof _=="function"?_(v):_&&(_.current=v),_}function useCallbackRef(_,v){var S=reactExports.useState(function(){return{value:_,callback:v,facade:{get current(){return S.value},set current(R){var T=S.value;T!==R&&(S.value=R,S.callback(R,T))}}}})[0];return S.callback=v,S.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_,v){var S=useCallbackRef(null,function(R){return _.forEach(function(T){return assignRef(T,R)})});return useIsomorphicLayoutEffect(function(){var R=currentValues.get(S);if(R){var T=new Set(R),A=new Set(_),k=S.current;T.forEach(function(M){A.has(M)||assignRef(M,null)}),A.forEach(function(M){T.has(M)||assignRef(M,k)})}currentValues.set(S,_)},[_]),S}function ItoI(_){return _}function innerCreateMedium(_,v){v===void 0&&(v=ItoI);var S=[],R=!1,T={read:function(){if(R)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return S.length?S[S.length-1]:_},useMedium:function(A){var k=v(A,R);return S.push(k),function(){S=S.filter(function(M){return M!==k})}},assignSyncMedium:function(A){for(R=!0;S.length;){var k=S;S=[],k.forEach(A)}S={push:function(M){return A(M)},filter:function(){return S}}},assignMedium:function(A){R=!0;var k=[];if(S.length){var M=S;S=[],M.forEach(A),k=S}var N=function(){var I=k;k=[],I.forEach(A)},D=function(){return Promise.resolve().then(N)};D(),S={push:function(I){k.push(I),D()},filter:function(I){return k=k.filter(I),S}}}};return T}function createSidecarMedium(_){_===void 0&&(_={});var v=innerCreateMedium(null);return v.options=__assign({async:!0,ssr:!1},_),v}var SideCar$1=function(_){var v=_.sideCar,S=__rest(_,["sideCar"]);if(!v)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var R=v.read();if(!R)throw new Error("Sidecar medium not found");return reactExports.createElement(R,__assign({},S))};SideCar$1.isSideCarExport=!0;function exportSidecar(_,v){return _.useMedium(v),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_,v){var S=reactExports.useRef(null),R=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),T=R[0],A=R[1],k=_.forwardProps,M=_.children,N=_.className,D=_.removeScrollBar,I=_.enabled,q=_.shards,B=_.sideCar,z=_.noRelative,F=_.noIsolation,V=_.inert,H=_.allowPinchZoom,W=_.as,Y=W===void 0?"div":W,Z=_.gapMode,J=__rest(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ne=B,oe=useMergeRefs([S,v]),te=__assign(__assign({},J),T);return reactExports.createElement(reactExports.Fragment,null,I&&reactExports.createElement(ne,{sideCar:effectCar,removeScrollBar:D,shards:q,noRelative:z,noIsolation:F,inert:V,setCallbacks:A,allowPinchZoom:!!H,lockRef:S,gapMode:Z}),k?reactExports.cloneElement(reactExports.Children.only(M),__assign(__assign({},te),{ref:oe})):reactExports.createElement(Y,__assign({},te,{className:N,ref:oe}),M))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var v=getNonce();return v&&_.setAttribute("nonce",v),_}function injectStyles(_,v){_.styleSheet?_.styleSheet.cssText=v:_.appendChild(document.createTextNode(v))}function insertStyleTag(_){var v=document.head||document.getElementsByTagName("head")[0];v.appendChild(_)}var stylesheetSingleton=function(){var _=0,v=null;return{add:function(S){_==0&&(v=makeStyleTag())&&(injectStyles(v,S),insertStyleTag(v)),_++},remove:function(){_--,!_&&v&&(v.parentNode&&v.parentNode.removeChild(v),v=null)}}},styleHookSingleton=function(){var _=stylesheetSingleton();return function(v,S){reactExports.useEffect(function(){return _.add(v),function(){_.remove()}},[v&&S])}},styleSingleton=function(){var _=styleHookSingleton(),v=function(S){var R=S.styles,T=S.dynamic;return _(R,T),null};return v},zeroGap={left:0,top:0,right:0,gap:0},parse$2=function(_){return parseInt(_||"",10)||0},getOffset=function(_){var v=window.getComputedStyle(document.body),S=v[_==="padding"?"paddingLeft":"marginLeft"],R=v[_==="padding"?"paddingTop":"marginTop"],T=v[_==="padding"?"paddingRight":"marginRight"];return[parse$2(S),parse$2(R),parse$2(T)]},getGapWidth=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return zeroGap;var v=getOffset(_),S=document.documentElement.clientWidth,R=window.innerWidth;return{left:v[0],top:v[1],right:v[2],gap:Math.max(0,R-S+v[2]-v[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_,v,S,R){var T=_.left,A=_.top,k=_.right,M=_.gap;return S===void 0&&(S="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(R,`;
   padding-right: `).concat(M,"px ").concat(R,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(R,`;
    overscroll-behavior: contain;
    `).concat([v&&"position: relative ".concat(R,";"),S==="margin"&&`
    padding-left: `.concat(T,`px;
    padding-top: `).concat(A,`px;
    padding-right: `).concat(k,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(M,"px ").concat(R,`;
    `),S==="padding"&&"padding-right: ".concat(M,"px ").concat(R,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(M,"px ").concat(R,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(M,"px ").concat(R,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(R,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(R,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(M,`px;
  }
`)},getCurrentUseCounter=function(){var _=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_)?_:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _=getCurrentUseCounter()-1;_<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_.toString())}},[])},RemoveScrollBar=function(_){var v=_.noRelative,S=_.noImportant,R=_.gapMode,T=R===void 0?"margin":R;useLockAttribute();var A=reactExports.useMemo(function(){return getGapWidth(T)},[T]);return reactExports.createElement(Style,{styles:getStyles(A,!v,T,S?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_){return _.tagName==="TEXTAREA"},elementCanBeScrolled=function(_,v){if(!(_ instanceof Element))return!1;var S=window.getComputedStyle(_);return S[v]!=="hidden"&&!(S.overflowY===S.overflowX&&!alwaysContainsScroll(_)&&S[v]==="visible")},elementCouldBeVScrolled=function(_){return elementCanBeScrolled(_,"overflowY")},elementCouldBeHScrolled=function(_){return elementCanBeScrolled(_,"overflowX")},locationCouldBeScrolled=function(_,v){var S=v.ownerDocument,R=v;do{typeof ShadowRoot<"u"&&R instanceof ShadowRoot&&(R=R.host);var T=elementCouldBeScrolled(_,R);if(T){var A=getScrollVariables(_,R),k=A[1],M=A[2];if(k>M)return!0}R=R.parentNode}while(R&&R!==S.body);return!1},getVScrollVariables=function(_){var v=_.scrollTop,S=_.scrollHeight,R=_.clientHeight;return[v,S,R]},getHScrollVariables=function(_){var v=_.scrollLeft,S=_.scrollWidth,R=_.clientWidth;return[v,S,R]},elementCouldBeScrolled=function(_,v){return _==="v"?elementCouldBeVScrolled(v):elementCouldBeHScrolled(v)},getScrollVariables=function(_,v){return _==="v"?getVScrollVariables(v):getHScrollVariables(v)},getDirectionFactor=function(_,v){return _==="h"&&v==="rtl"?-1:1},handleScroll=function(_,v,S,R,T){var A=getDirectionFactor(_,window.getComputedStyle(v).direction),k=A*R,M=S.target,N=v.contains(M),D=!1,I=k>0,q=0,B=0;do{if(!M)break;var z=getScrollVariables(_,M),F=z[0],V=z[1],H=z[2],W=V-H-A*F;(F||W)&&elementCouldBeScrolled(_,M)&&(q+=W,B+=F);var Y=M.parentNode;M=Y&&Y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Y.host:Y}while(!N&&M!==document.body||N&&(v.contains(M)||v===M));return(I&&Math.abs(q)<1||!I&&Math.abs(B)<1)&&(D=!0),D},getTouchXY=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_){return[_.deltaX,_.deltaY]},extractRef=function(_){return _&&"current"in _?_.current:_},deltaCompare=function(_,v){return _[0]===v[0]&&_[1]===v[1]},generateStyle=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},idCounter$1=0,lockStack=[];function RemoveScrollSideCar(_){var v=reactExports.useRef([]),S=reactExports.useRef([0,0]),R=reactExports.useRef(),T=reactExports.useState(idCounter$1++)[0],A=reactExports.useState(styleSingleton)[0],k=reactExports.useRef(_);reactExports.useEffect(function(){k.current=_},[_]),reactExports.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat(T));var V=__spreadArray([_.lockRef.current],(_.shards||[]).map(extractRef),!0).filter(Boolean);return V.forEach(function(H){return H.classList.add("allow-interactivity-".concat(T))}),function(){document.body.classList.remove("block-interactivity-".concat(T)),V.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(T))})}}},[_.inert,_.lockRef.current,_.shards]);var M=reactExports.useCallback(function(V,H){if("touches"in V&&V.touches.length===2||V.type==="wheel"&&V.ctrlKey)return!k.current.allowPinchZoom;var W=getTouchXY(V),Y=S.current,Z="deltaX"in V?V.deltaX:Y[0]-W[0],J="deltaY"in V?V.deltaY:Y[1]-W[1],ne,oe=V.target,te=Math.abs(Z)>Math.abs(J)?"h":"v";if("touches"in V&&te==="h"&&oe.type==="range")return!1;var se=window.getSelection(),le=se&&se.anchorNode,ue=le?le===oe||le.contains(oe):!1;if(ue)return!1;var ce=locationCouldBeScrolled(te,oe);if(!ce)return!0;if(ce?ne=te:(ne=te==="v"?"h":"v",ce=locationCouldBeScrolled(te,oe)),!ce)return!1;if(!R.current&&"changedTouches"in V&&(Z||J)&&(R.current=ne),!ne)return!0;var ge=R.current||ne;return handleScroll(ge,H,V,ge==="h"?Z:J)},[]),N=reactExports.useCallback(function(V){var H=V;if(!(!lockStack.length||lockStack[lockStack.length-1]!==A)){var W="deltaY"in H?getDeltaXY(H):getTouchXY(H),Y=v.current.filter(function(ne){return ne.name===H.type&&(ne.target===H.target||H.target===ne.shadowParent)&&deltaCompare(ne.delta,W)})[0];if(Y&&Y.should){H.cancelable&&H.preventDefault();return}if(!Y){var Z=(k.current.shards||[]).map(extractRef).filter(Boolean).filter(function(ne){return ne.contains(H.target)}),J=Z.length>0?M(H,Z[0]):!k.current.noIsolation;J&&H.cancelable&&H.preventDefault()}}},[]),D=reactExports.useCallback(function(V,H,W,Y){var Z={name:V,delta:H,target:W,should:Y,shadowParent:getOutermostShadowParent(W)};v.current.push(Z),setTimeout(function(){v.current=v.current.filter(function(J){return J!==Z})},1)},[]),I=reactExports.useCallback(function(V){S.current=getTouchXY(V),R.current=void 0},[]),q=reactExports.useCallback(function(V){D(V.type,getDeltaXY(V),V.target,M(V,_.lockRef.current))},[]),B=reactExports.useCallback(function(V){D(V.type,getTouchXY(V),V.target,M(V,_.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(A),_.setCallbacks({onScrollCapture:q,onWheelCapture:q,onTouchMoveCapture:B}),document.addEventListener("wheel",N,nonPassive),document.addEventListener("touchmove",N,nonPassive),document.addEventListener("touchstart",I,nonPassive),function(){lockStack=lockStack.filter(function(V){return V!==A}),document.removeEventListener("wheel",N,nonPassive),document.removeEventListener("touchmove",N,nonPassive),document.removeEventListener("touchstart",I,nonPassive)}},[]);var z=_.removeScrollBar,F=_.inert;return reactExports.createElement(reactExports.Fragment,null,F?reactExports.createElement(A,{styles:generateStyle(T)}):null,z?reactExports.createElement(RemoveScrollBar,{noRelative:_.noRelative,gapMode:_.gapMode}):null)}function getOutermostShadowParent(_){for(var v=null;_!==null;)_ instanceof ShadowRoot&&(v=_.host,_=_.host),_=_.parentNode;return v}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_,v){return reactExports.createElement(RemoveScroll,__assign({},_,{ref:v,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(_){if(typeof document>"u")return null;var v=Array.isArray(_)?_[0]:_;return v.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_){return _&&(_.host||unwrapHost(_.parentNode))},correctTargets=function(_,v){return v.map(function(S){if(_.contains(S))return S;var R=unwrapHost(S);return R&&_.contains(R)?R:(console.error("aria-hidden",S,"in not contained inside",_,". Doing nothing"),null)}).filter(function(S){return!!S})},applyAttributeToOthers=function(_,v,S,R){var T=correctTargets(v,Array.isArray(_)?_:[_]);markerMap[S]||(markerMap[S]=new WeakMap);var A=markerMap[S],k=[],M=new Set,N=new Set(T),D=function(q){!q||M.has(q)||(M.add(q),D(q.parentNode))};T.forEach(D);var I=function(q){!q||N.has(q)||Array.prototype.forEach.call(q.children,function(B){if(M.has(B))I(B);else try{var z=B.getAttribute(R),F=z!==null&&z!=="false",V=(counterMap.get(B)||0)+1,H=(A.get(B)||0)+1;counterMap.set(B,V),A.set(B,H),k.push(B),V===1&&F&&uncontrolledNodes.set(B,!0),H===1&&B.setAttribute(S,"true"),F||B.setAttribute(R,"true")}catch(W){console.error("aria-hidden: cannot operate on ",B,W)}})};return I(v),M.clear(),lockCount++,function(){k.forEach(function(q){var B=counterMap.get(q)-1,z=A.get(q)-1;counterMap.set(q,B),A.set(q,z),B||(uncontrolledNodes.has(q)||q.removeAttribute(R),uncontrolledNodes.delete(q)),z||q.removeAttribute(S)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_,v,S){S===void 0&&(S="data-aria-hidden");var R=Array.from(Array.isArray(_)?_:[_]),T=getDefaultParent(_);return T?(R.push.apply(R,Array.from(T.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(R,T,S,"aria-hidden")):function(){return null}};function createSlot$3(_){const v=createSlotClone$3(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),N=M.find(isSlottable$3);if(N){const D=N.props.children,I=M.map(q=>q===N?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,I):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$3(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$3(T),M=mergeProps$3(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$3=Symbol("radix.slottable");function isSlottable$3(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$3}function mergeProps$3(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const N=A(...M);return T(...M),N}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$3(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var DIALOG_NAME="Dialog",[createDialogContext]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=_=>{const{__scopeDialog:v,children:S,open:R,defaultOpen:T,onOpenChange:A,modal:k=!0}=_,M=reactExports.useRef(null),N=reactExports.useRef(null),[D,I]=useControllableState({prop:R,defaultProp:T??!1,onChange:A,caller:DIALOG_NAME});return jsxRuntimeExports.jsx(DialogProvider,{scope:v,triggerRef:M,contentRef:N,contentId:useId(),titleId:useId(),descriptionId:useId(),open:D,onOpenChange:I,onOpenToggle:reactExports.useCallback(()=>I(q=>!q),[I]),modal:k,children:S})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$3="DialogTrigger",DialogTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeDialog:S,...R}=_,T=useDialogContext(TRIGGER_NAME$3,S),A=useComposedRefs(v,T.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":T.open,"aria-controls":T.contentId,"data-state":getState$1(T.open),...R,ref:A,onClick:composeEventHandlers(_.onClick,T.onOpenToggle)})});DialogTrigger$1.displayName=TRIGGER_NAME$3;var PORTAL_NAME$3="DialogPortal",[PortalProvider$1,usePortalContext$1]=createDialogContext(PORTAL_NAME$3,{forceMount:void 0}),DialogPortal$1=_=>{const{__scopeDialog:v,forceMount:S,children:R,container:T}=_,A=useDialogContext(PORTAL_NAME$3,v);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:v,forceMount:S,children:reactExports.Children.map(R,k=>jsxRuntimeExports.jsx(Presence,{present:S||A.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:T,children:k})}))})};DialogPortal$1.displayName=PORTAL_NAME$3;var OVERLAY_NAME="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((_,v)=>{const S=usePortalContext$1(OVERLAY_NAME,_.__scopeDialog),{forceMount:R=S.forceMount,...T}=_,A=useDialogContext(OVERLAY_NAME,_.__scopeDialog);return A.modal?jsxRuntimeExports.jsx(Presence,{present:R||A.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...T,ref:v})}):null});DialogOverlay$1.displayName=OVERLAY_NAME;var Slot$2=createSlot$3("DialogOverlay.RemoveScroll"),DialogOverlayImpl=reactExports.forwardRef((_,v)=>{const{__scopeDialog:S,...R}=_,T=useDialogContext(OVERLAY_NAME,S);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot$2,allowPinchZoom:!0,shards:[T.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(T.open),...R,ref:v,style:{pointerEvents:"auto",...R.style}})})}),CONTENT_NAME$3="DialogContent",DialogContent$1=reactExports.forwardRef((_,v)=>{const S=usePortalContext$1(CONTENT_NAME$3,_.__scopeDialog),{forceMount:R=S.forceMount,...T}=_,A=useDialogContext(CONTENT_NAME$3,_.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:R||A.open,children:A.modal?jsxRuntimeExports.jsx(DialogContentModal,{...T,ref:v}):jsxRuntimeExports.jsx(DialogContentNonModal,{...T,ref:v})})});DialogContent$1.displayName=CONTENT_NAME$3;var DialogContentModal=reactExports.forwardRef((_,v)=>{const S=useDialogContext(CONTENT_NAME$3,_.__scopeDialog),R=reactExports.useRef(null),T=useComposedRefs(v,S.contentRef,R);return reactExports.useEffect(()=>{const A=R.current;if(A)return hideOthers(A)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{..._,ref:T,trapFocus:S.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(_.onCloseAutoFocus,A=>{A.preventDefault(),S.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers(_.onPointerDownOutside,A=>{const k=A.detail.originalEvent,M=k.button===0&&k.ctrlKey===!0;(k.button===2||M)&&A.preventDefault()}),onFocusOutside:composeEventHandlers(_.onFocusOutside,A=>A.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((_,v)=>{const S=useDialogContext(CONTENT_NAME$3,_.__scopeDialog),R=reactExports.useRef(!1),T=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{..._,ref:v,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:A=>{_.onCloseAutoFocus?.(A),A.defaultPrevented||(R.current||S.triggerRef.current?.focus(),A.preventDefault()),R.current=!1,T.current=!1},onInteractOutside:A=>{_.onInteractOutside?.(A),A.defaultPrevented||(R.current=!0,A.detail.originalEvent.type==="pointerdown"&&(T.current=!0));const k=A.target;S.triggerRef.current?.contains(k)&&A.preventDefault(),A.detail.originalEvent.type==="focusin"&&T.current&&A.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeDialog:S,trapFocus:R,onOpenAutoFocus:T,onCloseAutoFocus:A,...k}=_,M=useDialogContext(CONTENT_NAME$3,S),N=reactExports.useRef(null),D=useComposedRefs(v,N);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:R,onMountAutoFocus:T,onUnmountAutoFocus:A,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:M.contentId,"aria-describedby":M.descriptionId,"aria-labelledby":M.titleId,"data-state":getState$1(M.open),...k,ref:D,onDismiss:()=>M.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:M.titleId}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:N,descriptionId:M.descriptionId})]})]})}),TITLE_NAME="DialogTitle",DialogTitle$1=reactExports.forwardRef((_,v)=>{const{__scopeDialog:S,...R}=_,T=useDialogContext(TITLE_NAME,S);return jsxRuntimeExports.jsx(Primitive.h2,{id:T.titleId,...R,ref:v})});DialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="DialogDescription",DialogDescription$1=reactExports.forwardRef((_,v)=>{const{__scopeDialog:S,...R}=_,T=useDialogContext(DESCRIPTION_NAME,S);return jsxRuntimeExports.jsx(Primitive.p,{id:T.descriptionId,...R,ref:v})});DialogDescription$1.displayName=DESCRIPTION_NAME;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((_,v)=>{const{__scopeDialog:S,...R}=_,T=useDialogContext(CLOSE_NAME,S);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...R,ref:v,onClick:composeEventHandlers(_.onClick,()=>T.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState$1(_){return _?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$3,titleName:TITLE_NAME,docsSlug:"dialog"}),TitleWarning=({titleId:_})=>{const v=useWarningContext(TITLE_WARNING_NAME),S=`\`${v.contentName}\` requires a \`${v.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${v.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${v.docsSlug}`;return reactExports.useEffect(()=>{_&&(document.getElementById(_)||console.error(S))},[S,_]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning=({contentRef:_,descriptionId:v})=>{const R=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{const T=_.current?.getAttribute("aria-describedby");v&&T&&(document.getElementById(v)||console.warn(R))},[R,_,v]),null},Root$1=Dialog$1,Trigger$2=DialogTrigger$1,Portal$2=DialogPortal$1,Overlay=DialogOverlay$1,Content=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$1,DialogTrigger=Trigger$2,DialogPortal=Portal$2,DialogOverlay=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Overlay,{ref:S,className:cn$1("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",_),...v}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content,{ref:R,className:cn$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",_),...S,children:[v,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(X,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content.displayName;const DialogHeader=({className:_,...v})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-1.5 text-center sm:text-left",_),...v});DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Title,{ref:S,className:cn$1("text-lg font-semibold leading-none tracking-tight",_),...v}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Description,{ref:S,className:cn$1("text-sm text-muted-foreground",_),...v}));DialogDescription.displayName=Description.displayName;const Textarea=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("textarea",{className:cn$1("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",_),ref:S,...v}));Textarea.displayName="Textarea";const alertStyles={warning:{container:"border-amber-200 bg-amber-50",icon:"text-amber-600",text:"text-amber-800",IconComponent:TriangleAlert},error:{container:"border-red-200 bg-red-50",icon:"text-red-600",text:"text-red-700",IconComponent:CircleX},success:{container:"border-green-200 bg-green-50",icon:"text-green-600",text:"text-green-700",IconComponent:Check},info:{container:"border-indigo-200 bg-indigo-50",icon:"text-indigo-600",text:"text-indigo-700",IconComponent:Info}};function AlertBox({type:_,className:v,children:S,...R}){const T=alertStyles[_],A=T.IconComponent;return jsxRuntimeExports.jsxs("div",{className:cn$1("border p-2 rounded-md flex w-fit gap-2 shadow-xs animate-in fade-in duration-300",T.container,v),...R,children:[jsxRuntimeExports.jsx(A,{className:cn$1("shrink-0 mt-0.5",T.icon),size:20}),jsxRuntimeExports.jsx("span",{className:cn$1("text-xs mt-0.5",T.text),children:S})]})}function validateProgramDefinition(_){if(!_||typeof _!="object")return"Importovan data nemaj sprvnou strukturu";if(typeof _.name!="string"||_.name.trim()==="")return"Chybn nzev programu";if(_.description!==void 0&&typeof _.description!="string")return"Popis programu mus bt etzec";if(typeof _.definition!="string")return"Definice CCS mus bt etzec";if(typeof _.allowEdit!="boolean")return"Povolen prav mus bt boolean";if(!Array.isArray(_.cards))return"Program mus obsahovat pole karet (SOS nebo LTS)";for(let v=0;v<_.cards.length;v++){const S=_.cards[v],R=`Chyba v kart . ${v+1}: `,T=validateCard(S);if(T!==!0)return R+T}return!0}function validateCard(_){return typeof _!="object"||_===null?"Karta nen platn objekt":typeof _.name!="string"||_.name.trim()===""?"Chyb nzev karty":"type"in _?_.type==="sos"?validateCardSOS(_):_.type==="lts"?validateCardLTS(_):"Neznm typ karty '"+_.type+"'":"Chyb typ karty"}function validateCardSOS(_){return typeof _.processX!="string"||typeof _.processY!="string"||typeof _.action!="string"||typeof _.showHelp!="boolean"?"Karta m chybnou strukturu":!0}function validateCardLTS(_){return typeof _.process!="string"||typeof _.useStructRed!="boolean"?"Karta m chybnou strukturu":["id","mixed","full"].includes(_.style)?!0:"Karta obsahuje neplatn styl zobrazen."}function ImportProgram({children:_,onUpdate:v}){const[S,R]=reactExports.useState(""),[T,A]=reactExports.useState(""),[k,M]=reactExports.useState(!1),N=reactExports.useRef(null),D=q=>{const B=q.target.files?.[0];if(!B)return;const z=new FileReader;z.onload=F=>{const V=F.target?.result;typeof V=="string"&&(R(V),A(""))},z.onerror=()=>{A("Chyba pi ten souboru.")},z.readAsText(B),q.target.value=""},I=()=>{try{const q=JSON.parse(S),B=validateProgramDefinition(q);if(B!==!0){A(B);return}A(""),M(!1),v(q),R("")}catch(q){A("Import se nezdail."),console.error(q)}};return jsxRuntimeExports.jsxs(Dialog,{open:k,onOpenChange:M,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:_}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"mb-4",children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:"Importovat program"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".json",ref:N,className:"hidden",onChange:D}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"sm",onClick:()=>N.current?.click(),className:"gap-2",children:[jsxRuntimeExports.jsx(Upload,{size:16})," Importovat ze souboru"]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-foreground/60 p-2",children:"--- NEBO ---"}),jsxRuntimeExports.jsx(Textarea,{value:S,onChange:q=>R(q.target.value),className:"h-50 font-mono text-sm",placeholder:"Zde vlote JSON definici programu..."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end gap-2 pt-6",children:[jsxRuntimeExports.jsx(Button,{onClick:I,className:"w-fit",children:"Importovat"}),T.length>0&&jsxRuntimeExports.jsx(AlertBox,{type:"error",children:T})]})]})]})]})}const Input=reactExports.forwardRef(({className:_,type:v,...S},R)=>jsxRuntimeExports.jsx("input",{type:v,className:cn$1("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",_),ref:R,...S}));Input.displayName="Input";function usePrevious(_){const v=reactExports.useRef({value:_,previous:_});return reactExports.useMemo(()=>(v.current.value!==_&&(v.current.previous=v.current.value,v.current.value=_),v.current.previous),[_])}var CHECKBOX_NAME="Checkbox",[createCheckboxContext]=createContextScope(CHECKBOX_NAME),[CheckboxProviderImpl,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME);function CheckboxProvider(_){const{__scopeCheckbox:v,checked:S,children:R,defaultChecked:T,disabled:A,form:k,name:M,onCheckedChange:N,required:D,value:I="on",internal_do_not_use_render:q}=_,[B,z]=useControllableState({prop:S,defaultProp:T??!1,onChange:N,caller:CHECKBOX_NAME}),[F,V]=reactExports.useState(null),[H,W]=reactExports.useState(null),Y=reactExports.useRef(!1),Z=F?!!k||!!F.closest("form"):!0,J={checked:B,disabled:A,setChecked:z,control:F,setControl:V,name:M,form:k,value:I,hasConsumerStoppedPropagationRef:Y,required:D,defaultChecked:isIndeterminate$1(T)?!1:T,isFormControl:Z,bubbleInput:H,setBubbleInput:W};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:v,...J,children:isFunction(q)?q(J):R})}var TRIGGER_NAME$2="CheckboxTrigger",CheckboxTrigger=reactExports.forwardRef(({__scopeCheckbox:_,onKeyDown:v,onClick:S,...R},T)=>{const{control:A,value:k,disabled:M,checked:N,required:D,setControl:I,setChecked:q,hasConsumerStoppedPropagationRef:B,isFormControl:z,bubbleInput:F}=useCheckboxContext(TRIGGER_NAME$2,_),V=useComposedRefs(T,I),H=reactExports.useRef(N);return reactExports.useEffect(()=>{const W=A?.form;if(W){const Y=()=>q(H.current);return W.addEventListener("reset",Y),()=>W.removeEventListener("reset",Y)}},[A,q]),jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate$1(N)?"mixed":N,"aria-required":D,"data-state":getState(N),"data-disabled":M?"":void 0,disabled:M,value:k,...R,ref:V,onKeyDown:composeEventHandlers(v,W=>{W.key==="Enter"&&W.preventDefault()}),onClick:composeEventHandlers(S,W=>{q(Y=>isIndeterminate$1(Y)?!0:!Y),F&&z&&(B.current=W.isPropagationStopped(),B.current||W.stopPropagation())})})});CheckboxTrigger.displayName=TRIGGER_NAME$2;var Checkbox$1=reactExports.forwardRef((_,v)=>{const{__scopeCheckbox:S,name:R,checked:T,defaultChecked:A,required:k,disabled:M,value:N,onCheckedChange:D,form:I,...q}=_;return jsxRuntimeExports.jsx(CheckboxProvider,{__scopeCheckbox:S,checked:T,defaultChecked:A,disabled:M,required:k,onCheckedChange:D,name:R,form:I,value:N,internal_do_not_use_render:({isFormControl:B})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckboxTrigger,{...q,ref:v,__scopeCheckbox:S}),B&&jsxRuntimeExports.jsx(CheckboxBubbleInput,{__scopeCheckbox:S})]})})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME$1="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((_,v)=>{const{__scopeCheckbox:S,forceMount:R,...T}=_,A=useCheckboxContext(INDICATOR_NAME$1,S);return jsxRuntimeExports.jsx(Presence,{present:R||isIndeterminate$1(A.checked)||A.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(A.checked),"data-disabled":A.disabled?"":void 0,...T,ref:v,style:{pointerEvents:"none",..._.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME$1;var BUBBLE_INPUT_NAME$1="CheckboxBubbleInput",CheckboxBubbleInput=reactExports.forwardRef(({__scopeCheckbox:_,...v},S)=>{const{control:R,hasConsumerStoppedPropagationRef:T,checked:A,defaultChecked:k,required:M,disabled:N,name:D,value:I,form:q,bubbleInput:B,setBubbleInput:z}=useCheckboxContext(BUBBLE_INPUT_NAME$1,_),F=useComposedRefs(S,z),V=usePrevious(A),H=useSize(R);reactExports.useEffect(()=>{const Y=B;if(!Y)return;const Z=window.HTMLInputElement.prototype,ne=Object.getOwnPropertyDescriptor(Z,"checked").set,oe=!T.current;if(V!==A&&ne){const te=new Event("click",{bubbles:oe});Y.indeterminate=isIndeterminate$1(A),ne.call(Y,isIndeterminate$1(A)?!1:A),Y.dispatchEvent(te)}},[B,V,A,T]);const W=reactExports.useRef(isIndeterminate$1(A)?!1:A);return jsxRuntimeExports.jsx(Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:k??W.current,required:M,disabled:N,name:D,value:I,form:q,...v,tabIndex:-1,ref:F,style:{...v.style,...H,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CheckboxBubbleInput.displayName=BUBBLE_INPUT_NAME$1;function isFunction(_){return typeof _=="function"}function isIndeterminate$1(_){return _==="indeterminate"}function getState(_){return isIndeterminate$1(_)?"indeterminate":_?"checked":"unchecked"}const Checkbox=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Checkbox$1,{ref:S,className:cn$1("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",_),...v,children:jsxRuntimeExports.jsx(CheckboxIndicator,{className:cn$1("grid place-content-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Checkbox$1.displayName;function ProgramCreator({children:_,onUpdate:v,program:S}){const[R,T]=reactExports.useState(S?.name??""),[A,k]=reactExports.useState(S?.description??""),[M,N]=reactExports.useState(S?.allowEdit??!0),[D,I]=reactExports.useState(!1),[q,B]=reactExports.useState(""),z=()=>{if(R.length<3){B("Nzev programu mus bt del ne 2 znaky.");return}let F;S?(F=S,F.name=R,F.description=A,F.allowEdit=M):F={name:R,description:A,allowEdit:M,definition:"",cards:[]};const V=validateProgramDefinition(F);if(V!==!0){B(V);return}B(""),I(!1),v(F)};return jsxRuntimeExports.jsxs(Dialog,{open:D,onOpenChange:I,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:_}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"mb-4",children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:S?"Upravit program "+S.name:"Vytvoit program"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"name",className:"font-semibold",children:["Nzev ",jsxRuntimeExports.jsx("span",{className:"text-muted-foreground text-sm font-normal"})]}),jsxRuntimeExports.jsx(Input,{type:"text",id:"name",placeholder:"Krtk vstin nzev",value:R,onChange:F=>T(F.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"description",className:"font-semibold",children:["Popisek ",jsxRuntimeExports.jsx("span",{className:"text-muted-foreground text-sm font-normal"})]}),jsxRuntimeExports.jsx(Input,{type:"text",id:"description",placeholder:"K emu program slou?",value:A,onChange:F=>k(F.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Checkbox,{id:"allowEdit",checked:M,onCheckedChange:F=>N(F),className:"inline"}),jsxRuntimeExports.jsxs("label",{htmlFor:"allowEdit",className:"text-sm font-semibold leading-none",children:["Povolit pravy ",jsxRuntimeExports.jsx("span",{className:"text-muted-foreground text-sm font-normal",children:"- povol pravy kartet a kdu programu. Toto nastaven lze kdykoli zmnit."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end gap-2 pt-2",children:[jsxRuntimeExports.jsx(Button,{onClick:z,className:"w-fit",children:"Uloit"}),q.length>0&&jsxRuntimeExports.jsx(AlertBox,{type:"error",children:q})]})]})]})}function ProgramList({..._}){const{programs:v,activeProgram:S,selectProgram:R,addProgram:T,updateProgram:A,deleteProgram:k}=usePrograms(),M=(q,B)=>{q.stopPropagation();const z=JSON.stringify(B,null,2),F=new Blob([z],{type:"application/json"}),V=URL.createObjectURL(F),H=document.createElement("a");H.href=V;const W=B.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();H.download=`${W}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(V),toast.info(`Definice programu ${B.name.toLocaleLowerCase()} byla staena.`)},N=(q,B)=>{q.stopPropagation();const z=v[B].name;window.confirm("Opravdu chcete program '"+z+"' odstranit? Tato akce je nevratn.")&&(k(B),R(0),toast.info(`Program ${z.toLocaleLowerCase()} byl odstrann.`))},D=q=>{navigator.clipboard.writeText(JSON.stringify(v[q])),toast.info(`Definice programu ${v[q].name.toLocaleLowerCase()} byla zkoprovna do schrnky`)},I=q=>{T(q),R(v.length-1),toast.info(`Program ${q.name.toLocaleLowerCase()} byl pidn.`)};return jsxRuntimeExports.jsx("div",{..._,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-md mb-6 max-h-[400px] overflow-auto",children:[v.length===0&&jsxRuntimeExports.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Nemte uloeny dn programy."}),v.map((q,B)=>jsxRuntimeExports.jsxs("div",{onClick:()=>R(B),className:cn$1("flex justify-between items-center flex-wrap pl-4 pr-2 border-b last:border-0 cursor-pointer transition-colors",S===q?"bg-primary/10 hover:bg-primary/15":"hover:bg-primary/5"),children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold grow-10 select-none",children:[q.name,q.description?jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground text-sm font-normal ml-1",children:["- ",q.description]}):""]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end grow",children:[jsxRuntimeExports.jsx(ProgramCreator,{program:q,onUpdate:z=>A(B,z),children:jsxRuntimeExports.jsx(ButtonHover,{hoverContent:jsxRuntimeExports.jsx("p",{children:"Upravit nzev a popis programu"}),variant:"ghost",size:"icon",className:"text-yellow-600 hover:text-yellow-600 hover:bg-yellow-600/10",children:jsxRuntimeExports.jsx(Pencil,{})})}),jsxRuntimeExports.jsx(ButtonHover,{hoverContent:jsxRuntimeExports.jsx("p",{children:"Sthnout program"}),variant:"ghost",size:"icon",onClick:z=>M(z,q),className:"text-blue-600 hover:text-blue-600 hover:bg-blue-600/10",children:jsxRuntimeExports.jsx(Download,{})}),jsxRuntimeExports.jsx(ButtonHover,{hoverContent:jsxRuntimeExports.jsx("p",{children:"Zkoprovat program do schrnky"}),variant:"ghost",size:"icon",onClick:()=>D(B),className:"text-stone-600 hover:text-stone-600 hover:bg-stone-600/10",children:jsxRuntimeExports.jsx(Copy,{})}),jsxRuntimeExports.jsx(ButtonHover,{hoverContent:jsxRuntimeExports.jsx("p",{children:"Odstranit program"}),variant:"ghost",size:"icon",onClick:z=>N(z,B),disabled:v.length<=1,className:"text-red-600 hover:text-red-600 hover:bg-red-600/10 disabled:opacity-30",children:jsxRuntimeExports.jsx(Trash2,{})})]})]},B))]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-between gap-3",children:[jsxRuntimeExports.jsx(ProgramCreator,{onUpdate:I,children:jsxRuntimeExports.jsx(Button,{children:"Definovat nov program"})}),jsxRuntimeExports.jsx(ImportProgram,{onUpdate:I,children:jsxRuntimeExports.jsx(Button,{variant:"secondary",children:"Importovat program"})})]})]})})}var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var _="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=_,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var _=requireReactPropTypesSecret();function v(){}function S(){}return S.resetWarningCache=v,factoryWithThrowingShims=function(){function R(k,M,N,D,I,q){if(q!==_){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}R.isRequired=R;function T(){return R}var A={array:R,bigint:R,bool:R,func:R,number:R,object:R,string:R,symbol:R,any:R,arrayOf:T,element:R,elementType:R,instanceOf:T,node:R,objectOf:T,oneOf:T,oneOfType:T,shape:T,exact:T,checkPropTypes:S,resetWarningCache:v};return A.PropTypes=A,A},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const t$1=getDefaultExportFromCjs$1(propTypesExports);function _arrayLikeToArray(_,v){(v==null||v>_.length)&&(v=_.length);for(var S=0,R=Array(v);S<v;S++)R[S]=_[S];return R}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _classCallCheck(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_,v){for(var S=0;S<v.length;S++){var R=v[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,_toPropertyKey(R.key),R)}}function _createClass(_,v,S){return v&&_defineProperties(_.prototype,v),Object.defineProperty(_,"prototype",{writable:!1}),_}function _createForOfIteratorHelper(_,v){var S=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!S){if(Array.isArray(_)||(S=_unsupportedIterableToArray(_))||v){S&&(_=S);var R=0,T=function(){};return{s:T,n:function(){return R>=_.length?{done:!0}:{done:!1,value:_[R++]}},e:function(N){throw N},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,k=!0,M=!1;return{s:function(){S=S.call(_)},n:function(){var N=S.next();return k=N.done,N},e:function(N){M=!0,A=N},f:function(){try{k||S.return==null||S.return()}finally{if(M)throw A}}}}function _defineProperty$1(_,v,S){return(v=_toPropertyKey(v))in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _iterableToArrayLimit(_,v){var S=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(S!=null){var R,T,A,k,M=[],N=!0,D=!1;try{if(A=(S=S.call(_)).next,v===0){if(Object(S)!==S)return;N=!1}else for(;!(N=(R=A.call(S)).done)&&(M.push(R.value),M.length!==v);N=!0);}catch(I){D=!0,T=I}finally{try{if(!N&&S.return!=null&&(k=S.return(),Object(k)!==k))return}finally{if(D)throw T}}return M}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(_,v){return _arrayWithHoles(_)||_iterableToArrayLimit(_,v)||_unsupportedIterableToArray(_,v)||_nonIterableRest()}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}function _toPrimitive(_,v){if(typeof _!="object"||!_)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var R=S.call(_,v);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}function _toPropertyKey(_){var v=_toPrimitive(_,"string");return typeof v=="symbol"?v:v+""}function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},_typeof(_)}function _unsupportedIterableToArray(_,v){if(_){if(typeof _=="string")return _arrayLikeToArray(_,v);var S={}.toString.call(_).slice(8,-1);return S==="Object"&&_.constructor&&(S=_.constructor.name),S==="Map"||S==="Set"?Array.from(_):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?_arrayLikeToArray(_,v):void 0}}var _window=typeof window>"u"?null:window,navigator$2=_window?_window.navigator:null;_window&&_window.document;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele=typeof HTMLElement>"u"?"undefined":_typeof(HTMLElement),instanceStr=function(v){return v&&v.instanceString&&fn$6(v.instanceString)?v.instanceString():null},string$1=function(v){return v!=null&&_typeof(v)==typeofstr},fn$6=function(v){return v!=null&&_typeof(v)===typeoffn},array=function(v){return!elementOrCollection(v)&&(Array.isArray?Array.isArray(v):v!=null&&v instanceof Array)},plainObject=function(v){return v!=null&&_typeof(v)===typeofobj&&!array(v)&&v.constructor===Object},object=function(v){return v!=null&&_typeof(v)===typeofobj},number$1=function(v){return v!=null&&_typeof(v)===_typeof(1)&&!isNaN(v)},integer=function(v){return number$1(v)&&Math.floor(v)===v},htmlElement=function(v){if(typeofhtmlele!=="undefined")return v!=null&&v instanceof HTMLElement},elementOrCollection=function(v){return element(v)||collection(v)},element=function(v){return instanceStr(v)==="collection"&&v._private.single},collection=function(v){return instanceStr(v)==="collection"&&!v._private.single},core$2=function(v){return instanceStr(v)==="core"},stylesheet=function(v){return instanceStr(v)==="stylesheet"},event=function(v){return instanceStr(v)==="event"},emptyString=function(v){return v==null?!0:!!(v===""||v.match(/^\s+$/))},domElement=function(v){return typeof HTMLElement>"u"?!1:v instanceof HTMLElement},boundingBox=function(v){return plainObject(v)&&number$1(v.x1)&&number$1(v.x2)&&number$1(v.y1)&&number$1(v.y2)},promise=function(v){return object(v)&&fn$6(v.then)},ms=function(){return navigator$2&&navigator$2.userAgent.match(/msie|trident|edge/i)},memoize=function(v,S){S||(S=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var A=[],k=0;k<arguments.length;k++)A.push(arguments[k]);return A.join("$")});var R=function(){var A=this,k=arguments,M,N=S.apply(A,k),D=R.cache;return(M=D[N])||(M=D[N]=v.apply(A,k)),M};return R.cache={},R},camel2dash=memoize(function(_){return _.replace(/([A-Z])/g,function(v){return"-"+v.toLowerCase()})}),dash2camel=memoize(function(_){return _.replace(/(-\w)/g,function(v){return v[1].toUpperCase()})}),prependCamel=memoize(function(_,v){return _+v[0].toUpperCase()+v.substring(1)},function(_,v){return _+"$"+v}),capitalize=function(v){return emptyString(v)?v:v.charAt(0).toUpperCase()+v.substring(1)},endsWith=function(v,S){return v.slice(-1*S.length)===S},number$2="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number$2+"[%]?)\\s*,\\s*("+number$2+"[%]?)\\s*,\\s*("+number$2+"[%]?)(?:\\s*,\\s*("+number$2+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number$2+"[%]?)\\s*,\\s*(?:"+number$2+"[%]?)\\s*,\\s*(?:"+number$2+"[%]?)(?:\\s*,\\s*(?:"+number$2+"))?\\)",hsla="hsl[a]?\\(("+number$2+")\\s*,\\s*("+number$2+"[%])\\s*,\\s*("+number$2+"[%])(?:\\s*,\\s*("+number$2+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number$2+")\\s*,\\s*(?:"+number$2+"[%])\\s*,\\s*(?:"+number$2+"[%])(?:\\s*,\\s*(?:"+number$2+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(v,S){return v<S?-1:v>S?1:0},descending=function(v,S){return-1*ascending(v,S)},extend=Object.assign!=null?Object.assign.bind(Object):function(_){for(var v=arguments,S=1;S<v.length;S++){var R=v[S];if(R!=null)for(var T=Object.keys(R),A=0;A<T.length;A++){var k=T[A];_[k]=R[k]}}return _},hex2tuple=function(v){if(!(!(v.length===4||v.length===7)||v[0]!=="#")){var S=v.length===4,R,T,A,k=16;return S?(R=parseInt(v[1]+v[1],k),T=parseInt(v[2]+v[2],k),A=parseInt(v[3]+v[3],k)):(R=parseInt(v[1]+v[2],k),T=parseInt(v[3]+v[4],k),A=parseInt(v[5]+v[6],k)),[R,T,A]}},hsl2tuple=function(v){var S,R,T,A,k,M,N,D;function I(F,V,H){return H<0&&(H+=1),H>1&&(H-=1),H<1/6?F+(V-F)*6*H:H<1/2?V:H<2/3?F+(V-F)*(2/3-H)*6:F}var q=new RegExp("^"+hsla+"$").exec(v);if(q){if(R=parseInt(q[1]),R<0?R=(360- -1*R%360)%360:R>360&&(R=R%360),R/=360,T=parseFloat(q[2]),T<0||T>100||(T=T/100,A=parseFloat(q[3]),A<0||A>100)||(A=A/100,k=q[4],k!==void 0&&(k=parseFloat(k),k<0||k>1)))return;if(T===0)M=N=D=Math.round(A*255);else{var B=A<.5?A*(1+T):A+T-A*T,z=2*A-B;M=Math.round(255*I(z,B,R+1/3)),N=Math.round(255*I(z,B,R)),D=Math.round(255*I(z,B,R-1/3))}S=[M,N,D,k]}return S},rgb2tuple=function(v){var S,R=new RegExp("^"+rgba+"$").exec(v);if(R){S=[];for(var T=[],A=1;A<=3;A++){var k=R[A];if(k[k.length-1]==="%"&&(T[A]=!0),k=parseFloat(k),T[A]&&(k=k/100*255),k<0||k>255)return;S.push(Math.floor(k))}var M=T[1]||T[2]||T[3],N=T[1]&&T[2]&&T[3];if(M&&!N)return;var D=R[4];if(D!==void 0){if(D=parseFloat(D),D<0||D>1)return;S.push(D)}}return S},colorname2tuple=function(v){return colors[v.toLowerCase()]},color2tuple=function(v){return(array(v)?v:null)||colorname2tuple(v)||hex2tuple(v)||rgb2tuple(v)||hsl2tuple(v)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(v){for(var S=v.map,R=v.keys,T=R.length,A=0;A<T;A++){var k=R[A];if(plainObject(k))throw Error("Tried to set map with object key");A<R.length-1?(S[k]==null&&(S[k]={}),S=S[k]):S[k]=v.value}},getMap=function(v){for(var S=v.map,R=v.keys,T=R.length,A=0;A<T;A++){var k=R[A];if(plainObject(k))throw Error("Tried to get map with object key");if(S=S[k],S==null)return S}return S},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var isObject_1$1,hasRequiredIsObject$1;function requireIsObject$1(){if(hasRequiredIsObject$1)return isObject_1$1;hasRequiredIsObject$1=1;function _(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")}return isObject_1$1=_,isObject_1$1}var _freeGlobal$1,hasRequired_freeGlobal$1;function require_freeGlobal$1(){if(hasRequired_freeGlobal$1)return _freeGlobal$1;hasRequired_freeGlobal$1=1;var _=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal$1=_,_freeGlobal$1}var _root$1,hasRequired_root$1;function require_root$1(){if(hasRequired_root$1)return _root$1;hasRequired_root$1=1;var _=require_freeGlobal$1(),v=typeof self=="object"&&self&&self.Object===Object&&self,S=_||v||Function("return this")();return _root$1=S,_root$1}var now_1$1,hasRequiredNow$1;function requireNow$1(){if(hasRequiredNow$1)return now_1$1;hasRequiredNow$1=1;var _=require_root$1(),v=function(){return _.Date.now()};return now_1$1=v,now_1$1}var _trimmedEndIndex$1,hasRequired_trimmedEndIndex$1;function require_trimmedEndIndex$1(){if(hasRequired_trimmedEndIndex$1)return _trimmedEndIndex$1;hasRequired_trimmedEndIndex$1=1;var _=/\s/;function v(S){for(var R=S.length;R--&&_.test(S.charAt(R)););return R}return _trimmedEndIndex$1=v,_trimmedEndIndex$1}var _baseTrim$1,hasRequired_baseTrim$1;function require_baseTrim$1(){if(hasRequired_baseTrim$1)return _baseTrim$1;hasRequired_baseTrim$1=1;var _=require_trimmedEndIndex$1(),v=/^\s+/;function S(R){return R&&R.slice(0,_(R)+1).replace(v,"")}return _baseTrim$1=S,_baseTrim$1}var _Symbol$1,hasRequired_Symbol$1;function require_Symbol$1(){if(hasRequired_Symbol$1)return _Symbol$1;hasRequired_Symbol$1=1;var _=require_root$1(),v=_.Symbol;return _Symbol$1=v,_Symbol$1}var _getRawTag$1,hasRequired_getRawTag$1;function require_getRawTag$1(){if(hasRequired_getRawTag$1)return _getRawTag$1;hasRequired_getRawTag$1=1;var _=require_Symbol$1(),v=Object.prototype,S=v.hasOwnProperty,R=v.toString,T=_?_.toStringTag:void 0;function A(k){var M=S.call(k,T),N=k[T];try{k[T]=void 0;var D=!0}catch{}var I=R.call(k);return D&&(M?k[T]=N:delete k[T]),I}return _getRawTag$1=A,_getRawTag$1}var _objectToString$1,hasRequired_objectToString$1;function require_objectToString$1(){if(hasRequired_objectToString$1)return _objectToString$1;hasRequired_objectToString$1=1;var _=Object.prototype,v=_.toString;function S(R){return v.call(R)}return _objectToString$1=S,_objectToString$1}var _baseGetTag$1,hasRequired_baseGetTag$1;function require_baseGetTag$1(){if(hasRequired_baseGetTag$1)return _baseGetTag$1;hasRequired_baseGetTag$1=1;var _=require_Symbol$1(),v=require_getRawTag$1(),S=require_objectToString$1(),R="[object Null]",T="[object Undefined]",A=_?_.toStringTag:void 0;function k(M){return M==null?M===void 0?T:R:A&&A in Object(M)?v(M):S(M)}return _baseGetTag$1=k,_baseGetTag$1}var isObjectLike_1$1,hasRequiredIsObjectLike$1;function requireIsObjectLike$1(){if(hasRequiredIsObjectLike$1)return isObjectLike_1$1;hasRequiredIsObjectLike$1=1;function _(v){return v!=null&&typeof v=="object"}return isObjectLike_1$1=_,isObjectLike_1$1}var isSymbol_1$1,hasRequiredIsSymbol$1;function requireIsSymbol$1(){if(hasRequiredIsSymbol$1)return isSymbol_1$1;hasRequiredIsSymbol$1=1;var _=require_baseGetTag$1(),v=requireIsObjectLike$1(),S="[object Symbol]";function R(T){return typeof T=="symbol"||v(T)&&_(T)==S}return isSymbol_1$1=R,isSymbol_1$1}var toNumber_1$1,hasRequiredToNumber$1;function requireToNumber$1(){if(hasRequiredToNumber$1)return toNumber_1$1;hasRequiredToNumber$1=1;var _=require_baseTrim$1(),v=requireIsObject$1(),S=requireIsSymbol$1(),R=NaN,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;function N(D){if(typeof D=="number")return D;if(S(D))return R;if(v(D)){var I=typeof D.valueOf=="function"?D.valueOf():D;D=v(I)?I+"":I}if(typeof D!="string")return D===0?D:+D;D=_(D);var q=A.test(D);return q||k.test(D)?M(D.slice(2),q?2:8):T.test(D)?R:+D}return toNumber_1$1=N,toNumber_1$1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var _=requireIsObject$1(),v=requireNow$1(),S=requireToNumber$1(),R="Expected a function",T=Math.max,A=Math.min;function k(M,N,D){var I,q,B,z,F,V,H=0,W=!1,Y=!1,Z=!0;if(typeof M!="function")throw new TypeError(R);N=S(N)||0,_(D)&&(W=!!D.leading,Y="maxWait"in D,B=Y?T(S(D.maxWait)||0,N):B,Z="trailing"in D?!!D.trailing:Z);function J(me){var Ee=I,_e=q;return I=q=void 0,H=me,z=M.apply(_e,Ee),z}function ne(me){return H=me,F=setTimeout(se,N),W?J(me):z}function oe(me){var Ee=me-V,_e=me-H,ye=N-Ee;return Y?A(ye,B-_e):ye}function te(me){var Ee=me-V,_e=me-H;return V===void 0||Ee>=N||Ee<0||Y&&_e>=B}function se(){var me=v();if(te(me))return le(me);F=setTimeout(se,oe(me))}function le(me){return F=void 0,Z&&I?J(me):(I=q=void 0,z)}function ue(){F!==void 0&&clearTimeout(F),H=0,I=V=q=F=void 0}function ce(){return F===void 0?z:le(v())}function ge(){var me=v(),Ee=te(me);if(I=arguments,q=this,V=me,Ee){if(F===void 0)return ne(V);if(Y)return clearTimeout(F),F=setTimeout(se,N),J(V)}return F===void 0&&(F=setTimeout(se,N)),z}return ge.cancel=ue,ge.flush=ce,ge}return debounce_1=k,debounce_1}var debounceExports=requireDebounce(),debounce=getDefaultExportFromCjs(debounceExports),performance$1=_window?_window.performance:null,pnow=performance$1&&performance$1.now?function(){return performance$1.now()}:function(){return Date.now()},raf=(function(){if(_window){if(_window.requestAnimationFrame)return function(_){_window.requestAnimationFrame(_)};if(_window.mozRequestAnimationFrame)return function(_){_window.mozRequestAnimationFrame(_)};if(_window.webkitRequestAnimationFrame)return function(_){_window.webkitRequestAnimationFrame(_)};if(_window.msRequestAnimationFrame)return function(_){_window.msRequestAnimationFrame(_)}}return function(_){_&&setTimeout(function(){_(pnow())},1e3/60)}})(),requestAnimationFrame$1=function(v){return raf(v)},performanceNow=pnow,DEFAULT_HASH_SEED=9261,K=65599,DEFAULT_HASH_SEED_ALT=5381,hashIterableInts=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED,R=S,T;T=v.next(),!T.done;)R=R*K+T.value|0;return R},hashInt=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED;return S*K+v|0},hashIntAlt=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED_ALT;return(S<<5)+S+v|0},combineHashes=function(v,S){return v*2097152+S},combineHashesArray=function(v){return v[0]*2097152+v[1]},hashArrays=function(v,S){return[hashInt(v[0],S[0]),hashIntAlt(v[1],S[1])]},hashIntsArray=function(v,S){var R={value:0,done:!1},T=0,A=v.length,k={next:function(){return T<A?R.value=v[T++]:R.done=!0,R}};return hashIterableInts(k,S)},hashString=function(v,S){var R={value:0,done:!1},T=0,A=v.length,k={next:function(){return T<A?R.value=v.charCodeAt(T++):R.done=!0,R}};return hashIterableInts(k,S)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(v){for(var S,R=0;R<v.length;R++){var T=v[R];R===0?S=hashString(T):S=hashString(T,S)}return S};function rotatePoint(_,v,S,R,T){var A=T*Math.PI/180,k=Math.cos(A)*(_-S)-Math.sin(A)*(v-R)+S,M=Math.sin(A)*(_-S)+Math.cos(A)*(v-R)+R;return{x:k,y:M}}var movePointByBoxAspect=function(v,S,R,T,A,k){return{x:(v-R)*A+R,y:(S-T)*k+T}};function rotatePosAndSkewByBox(_,v,S){if(S===0)return _;var R=(v.x1+v.x2)/2,T=(v.y1+v.y2)/2,A=v.w/v.h,k=1/A,M=rotatePoint(_.x,_.y,R,T,S),N=movePointByBoxAspect(M.x,M.y,R,T,A,k);return{x:N.x,y:N.y}}var warningsEnabled=!0,warnSupported=console.warn!=null,traceSupported=console.trace!=null,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1=function(){},error=function(v){throw new Error(v)},warnings=function(v){if(v!==void 0)warningsEnabled=!!v;else return warningsEnabled},warn=function(v){warnings()&&(warnSupported?console.warn(v):(console.log(v),traceSupported&&console.trace()))},clone=function(v){return extend({},v)},copy=function(v){return v==null?v:array(v)?v.slice():plainObject(v)?clone(v):v},copyArray=function(v){return v.slice()},uuid=function(v,S){for(S=v="";v++<36;S+=v*51&52?(v^15?8^Math.random()*(v^20?16:4):4).toString(16):"-");return S},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults$g=function(v){var S=Object.keys(v);return function(R){for(var T={},A=0;A<S.length;A++){var k=S[A],M=R?.[k];T[k]=M===void 0?v[k]:M}return T}},removeFromArray=function(v,S,R){for(var T=v.length-1;T>=0;T--)v[T]===S&&v.splice(T,1)},clearArray=function(v){v.splice(0,v.length)},push=function(v,S){for(var R=0;R<S.length;R++){var T=S[R];v.push(T)}},getPrefixedProperty=function(v,S,R){return R&&(S=prependCamel(R,S)),v[S]},setPrefixedProperty=function(v,S,R,T){R&&(S=prependCamel(R,S)),v[S]=T},ObjectMap=(function(){function _(){_classCallCheck(this,_),this._obj={}}return _createClass(_,[{key:"set",value:function(S,R){return this._obj[S]=R,this}},{key:"delete",value:function(S){return this._obj[S]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(S){return this._obj[S]!==void 0}},{key:"get",value:function(S){return this._obj[S]}}])})(),Map$1=typeof Map<"u"?Map:ObjectMap,undef="undefined",ObjectSet=(function(){function _(v){if(_classCallCheck(this,_),this._obj=Object.create(null),this.size=0,v!=null){var S;v.instanceString!=null&&v.instanceString()===this.instanceString()?S=v.toArray():S=v;for(var R=0;R<S.length;R++)this.add(S[R])}}return _createClass(_,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(S){var R=this._obj;R[S]!==1&&(R[S]=1,this.size++)}},{key:"delete",value:function(S){var R=this._obj;R[S]===1&&(R[S]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(S){return this._obj[S]===1}},{key:"toArray",value:function(){var S=this;return Object.keys(this._obj).filter(function(R){return S.has(R)})}},{key:"forEach",value:function(S,R){return this.toArray().forEach(S,R)}}])})(),Set$1=(typeof Set>"u"?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element$1=function(v,S){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(v===void 0||S===void 0||!core$2(v)){error("An element must have a core reference and parameters set");return}var T=S.group;if(T==null&&(S.data&&S.data.source!=null&&S.data.target!=null?T="edges":T="nodes"),T!=="nodes"&&T!=="edges"){error("An element must be of type `nodes` or `edges`; you specified `"+T+"`");return}this.length=1,this[0]=this;var A=this._private={cy:v,single:!0,data:S.data||{},position:S.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:T,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!S.selected,selectable:S.selectable===void 0?!0:!!S.selectable,locked:!!S.locked,grabbed:!1,grabbable:S.grabbable===void 0?!0:!!S.grabbable,pannable:S.pannable===void 0?T==="edges":!!S.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:S.scratch||{},edges:[],children:[],parent:S.parent&&S.parent.isNode()?S.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(A.position.x==null&&(A.position.x=0),A.position.y==null&&(A.position.y=0),S.renderedPosition){var k=S.renderedPosition,M=v.pan(),N=v.zoom();A.position={x:(k.x-M.x)/N,y:(k.y-M.y)/N}}var D=[];array(S.classes)?D=S.classes:string$1(S.classes)&&(D=S.classes.split(/\s+/));for(var I=0,q=D.length;I<q;I++){var B=D[I];!B||B===""||A.classes.add(B)}this.createEmitter(),(R===void 0||R)&&this.restore();var z=S.style||S.css;z&&(warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(z))},defineSearch=function(v){return v={bfs:v.bfs||!v.dfs,dfs:v.dfs||!v.bfs},function(R,T,A){var k;plainObject(R)&&!elementOrCollection(R)&&(k=R,R=k.roots||k.root,T=k.visit,A=k.directed),A=arguments.length===2&&!fn$6(T)?T:A,T=fn$6(T)?T:function(){};for(var M=this._private.cy,N=R=string$1(R)?this.filter(R):R,D=[],I=[],q={},B={},z={},F=0,V,H=this.byGroup(),W=H.nodes,Y=H.edges,Z=0;Z<N.length;Z++){var J=N[Z],ne=J.id();J.isNode()&&(D.unshift(J),v.bfs&&(z[ne]=!0,I.push(J)),B[ne]=0)}for(var oe=function(){var me=v.bfs?D.shift():D.pop(),Ee=me.id();if(v.dfs){if(z[Ee])return 0;z[Ee]=!0,I.push(me)}var _e=B[Ee],ye=q[Ee],be=ye!=null?ye.source():null,Se=ye!=null?ye.target():null,De=ye==null?void 0:me.same(be)?Se[0]:be[0],xe;if(xe=T(me,ye,De,F++,_e),xe===!0)return V=me,1;if(xe===!1)return 1;for(var pe=me.connectedEdges().filter(function(Ne){return(!A||Ne.source().same(me))&&Y.has(Ne)}),we=0;we<pe.length;we++){var Oe=pe[we],Ce=Oe.connectedNodes().filter(function(Ne){return!Ne.same(me)&&W.has(Ne)}),Pe=Ce.id();Ce.length!==0&&!z[Pe]&&(Ce=Ce[0],D.push(Ce),v.bfs&&(z[Pe]=!0,I.push(Ce)),q[Pe]=Oe,B[Pe]=B[Ee]+1)}},te;D.length!==0&&(te=oe(),!(te!==0&&te===1)););for(var se=M.collection(),le=0;le<I.length;le++){var ue=I[le],ce=q[ue.id()];ce!=null&&se.push(ce),se.push(ue)}return{path:M.collection(se),found:M.collection(V)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch;elesfn$v.dfs=elesfn$v.depthFirstSearch;var heap$2={exports:{}},heap$1=heap$2.exports,hasRequiredHeap$1;function requireHeap$1(){return hasRequiredHeap$1||(hasRequiredHeap$1=1,(function(_,v){(function(){var S,R,T,A,k,M,N,D,I,q,B,z,F,V,H;T=Math.floor,q=Math.min,R=function(W,Y){return W<Y?-1:W>Y?1:0},I=function(W,Y,Z,J,ne){var oe;if(Z==null&&(Z=0),ne==null&&(ne=R),Z<0)throw new Error("lo must be non-negative");for(J==null&&(J=W.length);Z<J;)oe=T((Z+J)/2),ne(Y,W[oe])<0?J=oe:Z=oe+1;return[].splice.apply(W,[Z,Z-Z].concat(Y)),Y},M=function(W,Y,Z){return Z==null&&(Z=R),W.push(Y),V(W,0,W.length-1,Z)},k=function(W,Y){var Z,J;return Y==null&&(Y=R),Z=W.pop(),W.length?(J=W[0],W[0]=Z,H(W,0,Y)):J=Z,J},D=function(W,Y,Z){var J;return Z==null&&(Z=R),J=W[0],W[0]=Y,H(W,0,Z),J},N=function(W,Y,Z){var J;return Z==null&&(Z=R),W.length&&Z(W[0],Y)<0&&(J=[W[0],Y],Y=J[0],W[0]=J[1],H(W,0,Z)),Y},A=function(W,Y){var Z,J,ne,oe,te,se;for(Y==null&&(Y=R),oe=(function(){se=[];for(var le=0,ue=T(W.length/2);0<=ue?le<ue:le>ue;0<=ue?le++:le--)se.push(le);return se}).apply(this).reverse(),te=[],J=0,ne=oe.length;J<ne;J++)Z=oe[J],te.push(H(W,Z,Y));return te},F=function(W,Y,Z){var J;if(Z==null&&(Z=R),J=W.indexOf(Y),J!==-1)return V(W,0,J,Z),H(W,J,Z)},B=function(W,Y,Z){var J,ne,oe,te,se;if(Z==null&&(Z=R),ne=W.slice(0,Y),!ne.length)return ne;for(A(ne,Z),se=W.slice(Y),oe=0,te=se.length;oe<te;oe++)J=se[oe],N(ne,J,Z);return ne.sort(Z).reverse()},z=function(W,Y,Z){var J,ne,oe,te,se,le,ue,ce,ge;if(Z==null&&(Z=R),Y*10<=W.length){if(oe=W.slice(0,Y).sort(Z),!oe.length)return oe;for(ne=oe[oe.length-1],ue=W.slice(Y),te=0,le=ue.length;te<le;te++)J=ue[te],Z(J,ne)<0&&(I(oe,J,0,null,Z),oe.pop(),ne=oe[oe.length-1]);return oe}for(A(W,Z),ge=[],se=0,ce=q(Y,W.length);0<=ce?se<ce:se>ce;0<=ce?++se:--se)ge.push(k(W,Z));return ge},V=function(W,Y,Z,J){var ne,oe,te;for(J==null&&(J=R),ne=W[Z];Z>Y;){if(te=Z-1>>1,oe=W[te],J(ne,oe)<0){W[Z]=oe,Z=te;continue}break}return W[Z]=ne},H=function(W,Y,Z){var J,ne,oe,te,se;for(Z==null&&(Z=R),ne=W.length,se=Y,oe=W[Y],J=2*Y+1;J<ne;)te=J+1,te<ne&&!(Z(W[J],W[te])<0)&&(J=te),W[Y]=W[J],Y=J,J=2*Y+1;return W[Y]=oe,V(W,se,Y,Z)},S=(function(){W.push=M,W.pop=k,W.replace=D,W.pushpop=N,W.heapify=A,W.updateItem=F,W.nlargest=B,W.nsmallest=z;function W(Y){this.cmp=Y??R,this.nodes=[]}return W.prototype.push=function(Y){return M(this.nodes,Y,this.cmp)},W.prototype.pop=function(){return k(this.nodes,this.cmp)},W.prototype.peek=function(){return this.nodes[0]},W.prototype.contains=function(Y){return this.nodes.indexOf(Y)!==-1},W.prototype.replace=function(Y){return D(this.nodes,Y,this.cmp)},W.prototype.pushpop=function(Y){return N(this.nodes,Y,this.cmp)},W.prototype.heapify=function(){return A(this.nodes,this.cmp)},W.prototype.updateItem=function(Y){return F(this.nodes,Y,this.cmp)},W.prototype.clear=function(){return this.nodes=[]},W.prototype.empty=function(){return this.nodes.length===0},W.prototype.size=function(){return this.nodes.length},W.prototype.clone=function(){var Y;return Y=new W,Y.nodes=this.nodes.slice(0),Y},W.prototype.toArray=function(){return this.nodes.slice(0)},W.prototype.insert=W.prototype.push,W.prototype.top=W.prototype.peek,W.prototype.front=W.prototype.peek,W.prototype.has=W.prototype.contains,W.prototype.copy=W.prototype.clone,W})(),(function(W,Y){return _.exports=Y()})(this,function(){return S})}).call(heap$1)})(heap$2)),heap$2.exports}var heap,hasRequiredHeap;function requireHeap(){return hasRequiredHeap||(hasRequiredHeap=1,heap=requireHeap$1()),heap}var heapExports=requireHeap(),Heap=getDefaultExportFromCjs(heapExports),dijkstraDefaults=defaults$g({root:null,weight:function(v){return 1},directed:!1}),elesfn$u={dijkstra:function(v){if(!plainObject(v)){var S=arguments;v={root:S[0],weight:S[1],directed:S[2]}}var R=dijkstraDefaults(v),T=R.root,A=R.weight,k=R.directed,M=this,N=A,D=string$1(T)?this.filter(T)[0]:T[0],I={},q={},B={},z=this.byGroup(),F=z.nodes,V=z.edges;V.unmergeBy(function(_e){return _e.isLoop()});for(var H=function(ye){return I[ye.id()]},W=function(ye,be){I[ye.id()]=be,Y.updateItem(ye)},Y=new Heap(function(_e,ye){return H(_e)-H(ye)}),Z=0;Z<F.length;Z++){var J=F[Z];I[J.id()]=J.same(D)?0:1/0,Y.push(J)}for(var ne=function(ye,be){for(var Se=(k?ye.edgesTo(be):ye.edgesWith(be)).intersect(V),De=1/0,xe,pe=0;pe<Se.length;pe++){var we=Se[pe],Oe=N(we);(Oe<De||!xe)&&(De=Oe,xe=we)}return{edge:xe,dist:De}};Y.size()>0;){var oe=Y.pop(),te=H(oe),se=oe.id();if(B[se]=te,te!==1/0)for(var le=oe.neighborhood().intersect(F),ue=0;ue<le.length;ue++){var ce=le[ue],ge=ce.id(),me=ne(oe,ce),Ee=te+me.dist;Ee<H(ce)&&(W(ce,Ee),q[ge]={node:oe,edge:me.edge})}}return{distanceTo:function(ye){var be=string$1(ye)?F.filter(ye)[0]:ye[0];return B[be.id()]},pathTo:function(ye){var be=string$1(ye)?F.filter(ye)[0]:ye[0],Se=[],De=be,xe=De.id();if(be.length>0)for(Se.unshift(be);q[xe];){var pe=q[xe];Se.unshift(pe.edge),Se.unshift(pe.node),De=pe.node,xe=De.id()}return M.spawn(Se)}}}},elesfn$t={kruskal:function(v){v=v||function(Z){return 1};for(var S=this.byGroup(),R=S.nodes,T=S.edges,A=R.length,k=new Array(A),M=R,N=function(J){for(var ne=0;ne<k.length;ne++){var oe=k[ne];if(oe.has(J))return ne}},D=0;D<A;D++)k[D]=this.spawn(R[D]);for(var I=T.sort(function(Z,J){return v(Z)-v(J)}),q=0;q<I.length;q++){var B=I[q],z=B.source()[0],F=B.target()[0],V=N(z),H=N(F),W=k[V],Y=k[H];V!==H&&(M.merge(B),W.merge(Y),k.splice(H,1))}return M}},aStarDefaults=defaults$g({root:null,goal:null,weight:function(v){return 1},heuristic:function(v){return 0},directed:!1}),elesfn$s={aStar:function(v){var S=this.cy(),R=aStarDefaults(v),T=R.root,A=R.goal,k=R.heuristic,M=R.directed,N=R.weight;T=S.collection(T)[0],A=S.collection(A)[0];var D=T.id(),I=A.id(),q={},B={},z={},F=new Heap(function(xe,pe){return B[xe.id()]-B[pe.id()]}),V=new Set$1,H={},W={},Y=function(pe,we){F.push(pe),V.add(we)},Z,J,ne=function(){Z=F.pop(),J=Z.id(),V.delete(J)},oe=function(pe){return V.has(pe)};Y(T,D),q[D]=0,B[D]=k(T);for(var te=0;F.size()>0;){if(ne(),te++,J===I){for(var se=[],le=A,ue=I,ce=W[ue];se.unshift(le),ce!=null&&se.unshift(ce),le=H[ue],le!=null;)ue=le.id(),ce=W[ue];return{found:!0,distance:q[J],path:this.spawn(se),steps:te}}z[J]=!0;for(var ge=Z._private.edges,me=0;me<ge.length;me++){var Ee=ge[me];if(this.hasElementWithId(Ee.id())&&!(M&&Ee.data("source")!==J)){var _e=Ee.source(),ye=Ee.target(),be=_e.id()!==J?_e:ye,Se=be.id();if(this.hasElementWithId(Se)&&!z[Se]){var De=q[J]+N(Ee);if(!oe(Se)){q[Se]=De,B[Se]=De+k(be),Y(be,Se),H[Se]=Z,W[Se]=Ee;continue}De<q[Se]&&(q[Se]=De,B[Se]=De+k(be),H[Se]=Z,W[Se]=Ee)}}}}return{found:!1,distance:void 0,path:void 0,steps:te}}},floydWarshallDefaults=defaults$g({weight:function(v){return 1},directed:!1}),elesfn$r={floydWarshall:function(v){for(var S=this.cy(),R=floydWarshallDefaults(v),T=R.weight,A=R.directed,k=T,M=this.byGroup(),N=M.nodes,D=M.edges,I=N.length,q=I*I,B=function(Oe){return N.indexOf(Oe)},z=function(Oe){return N[Oe]},F=new Array(q),V=0;V<q;V++){var H=V%I,W=(V-H)/I;W===H?F[V]=0:F[V]=1/0}for(var Y=new Array(q),Z=new Array(q),J=0;J<D.length;J++){var ne=D[J],oe=ne.source()[0],te=ne.target()[0];if(oe!==te){var se=B(oe),le=B(te),ue=se*I+le,ce=k(ne);if(F[ue]>ce&&(F[ue]=ce,Y[ue]=le,Z[ue]=ne),!A){var ge=le*I+se;!A&&F[ge]>ce&&(F[ge]=ce,Y[ge]=se,Z[ge]=ne)}}}for(var me=0;me<I;me++)for(var Ee=0;Ee<I;Ee++)for(var _e=Ee*I+me,ye=0;ye<I;ye++){var be=Ee*I+ye,Se=me*I+ye;F[_e]+F[Se]<F[be]&&(F[be]=F[_e]+F[Se],Y[be]=Y[_e])}var De=function(Oe){return(string$1(Oe)?S.filter(Oe):Oe)[0]},xe=function(Oe){return B(De(Oe))},pe={distance:function(Oe,Ce){var Pe=xe(Oe),Ne=xe(Ce);return F[Pe*I+Ne]},path:function(Oe,Ce){var Pe=xe(Oe),Ne=xe(Ce),Te=z(Pe);if(Pe===Ne)return Te.collection();if(Y[Pe*I+Ne]==null)return S.collection();var ze=S.collection(),Fe=Pe,Ie;for(ze.merge(Te);Pe!==Ne;)Fe=Pe,Pe=Y[Pe*I+Ne],Ie=Z[Fe*I+Pe],ze.merge(Ie),ze.merge(z(Pe));return ze}};return pe}},bellmanFordDefaults=defaults$g({weight:function(v){return 1},directed:!1,root:null}),elesfn$q={bellmanFord:function(v){var S=this,R=bellmanFordDefaults(v),T=R.weight,A=R.directed,k=R.root,M=T,N=this,D=this.cy(),I=this.byGroup(),q=I.edges,B=I.nodes,z=B.length,F=new Map$1,V=!1,H=[];k=D.collection(k)[0],q.unmergeBy(function(yt){return yt.isLoop()});for(var W=q.length,Y=function(Ze){var _t=F.get(Ze.id());return _t||(_t={},F.set(Ze.id(),_t)),_t},Z=function(Ze){return(string$1(Ze)?D.$(Ze):Ze)[0]},J=function(Ze){return Y(Z(Ze)).dist},ne=function(Ze){for(var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k,ct=Z(Ze),wt=[],xt=ct;;){if(xt==null)return S.spawn();var At=Y(xt),Ct=At.edge,$t=At.pred;if(wt.unshift(xt[0]),xt.same(_t)&&wt.length>0)break;Ct!=null&&wt.unshift(Ct),xt=$t}return N.spawn(wt)},oe=0;oe<z;oe++){var te=B[oe],se=Y(te);te.same(k)?se.dist=0:se.dist=1/0,se.pred=null,se.edge=null}for(var le=!1,ue=function(Ze,_t,ct,wt,xt,At){var Ct=wt.dist+At;Ct<xt.dist&&!ct.same(wt.edge)&&(xt.dist=Ct,xt.pred=Ze,xt.edge=ct,le=!0)},ce=1;ce<z;ce++){le=!1;for(var ge=0;ge<W;ge++){var me=q[ge],Ee=me.source(),_e=me.target(),ye=M(me),be=Y(Ee),Se=Y(_e);ue(Ee,_e,me,be,Se,ye),A||ue(_e,Ee,me,Se,be,ye)}if(!le)break}if(le)for(var De=[],xe=0;xe<W;xe++){var pe=q[xe],we=pe.source(),Oe=pe.target(),Ce=M(pe),Pe=Y(we).dist,Ne=Y(Oe).dist;if(Pe+Ce<Ne||!A&&Ne+Ce<Pe)if(V||(warn("Graph contains a negative weight cycle for Bellman-Ford"),V=!0),v.findNegativeWeightCycles!==!1){var Te=[];Pe+Ce<Ne&&Te.push(we),!A&&Ne+Ce<Pe&&Te.push(Oe);for(var ze=Te.length,Fe=0;Fe<ze;Fe++){var Ie=Te[Fe],Le=[Ie];Le.push(Y(Ie).edge);for(var $e=Y(Ie).pred;Le.indexOf($e)===-1;)Le.push($e),Le.push(Y($e).edge),$e=Y($e).pred;Le=Le.slice(Le.indexOf($e));for(var qe=Le[0].id(),at=0,lt=2;lt<Le.length;lt+=2)Le[lt].id()<qe&&(qe=Le[lt].id(),at=lt);Le=Le.slice(at).concat(Le.slice(0,at)),Le.push(Le[0]);var vt=Le.map(function(yt){return yt.id()}).join(",");De.indexOf(vt)===-1&&(H.push(N.spawn(Le)),De.push(vt))}}else break}return{distanceTo:J,pathTo:ne,hasNegativeWeightCycle:V,negativeWeightCycles:H}}},sqrt2=Math.sqrt(2),collapse=function(v,S,R){R.length===0&&error("Karger-Stein must be run on a connected (sub)graph");for(var T=R[v],A=T[1],k=T[2],M=S[A],N=S[k],D=R,I=D.length-1;I>=0;I--){var q=D[I],B=q[1],z=q[2];(S[B]===M&&S[z]===N||S[B]===N&&S[z]===M)&&D.splice(I,1)}for(var F=0;F<D.length;F++){var V=D[F];V[1]===N?(D[F]=V.slice(),D[F][1]=M):V[2]===N&&(D[F]=V.slice(),D[F][2]=M)}for(var H=0;H<S.length;H++)S[H]===N&&(S[H]=M);return D},contractUntil=function(v,S,R,T){for(;R>T;){var A=Math.floor(Math.random()*S.length);S=collapse(A,v,S),R--}return S},elesfn$p={kargerStein:function(){var v=this,S=this.byGroup(),R=S.nodes,T=S.edges;T.unmergeBy(function(Se){return Se.isLoop()});var A=R.length,k=T.length,M=Math.ceil(Math.pow(Math.log(A)/Math.LN2,2)),N=Math.floor(A/sqrt2);if(A<2){error("At least 2 nodes are required for Karger-Stein algorithm");return}for(var D=[],I=0;I<k;I++){var q=T[I];D.push([I,R.indexOf(q.source()),R.indexOf(q.target())])}for(var B=1/0,z=[],F=new Array(A),V=new Array(A),H=new Array(A),W=function(De,xe){for(var pe=0;pe<A;pe++)xe[pe]=De[pe]},Y=0;Y<=M;Y++){for(var Z=0;Z<A;Z++)V[Z]=Z;var J=contractUntil(V,D.slice(),A,N),ne=J.slice();W(V,H);var oe=contractUntil(V,J,N,2),te=contractUntil(H,ne,N,2);oe.length<=te.length&&oe.length<B?(B=oe.length,z=oe,W(V,F)):te.length<=oe.length&&te.length<B&&(B=te.length,z=te,W(H,F))}for(var se=this.spawn(z.map(function(Se){return T[Se[0]]})),le=this.spawn(),ue=this.spawn(),ce=F[0],ge=0;ge<F.length;ge++){var me=F[ge],Ee=R[ge];me===ce?le.merge(Ee):ue.merge(Ee)}var _e=function(De){var xe=v.spawn();return De.forEach(function(pe){xe.merge(pe),pe.connectedEdges().forEach(function(we){v.contains(we)&&!se.contains(we)&&xe.merge(we)})}),xe},ye=[_e(le),_e(ue)],be={cut:se,components:ye,partition1:le,partition2:ue};return be}},_Math$hypot,copyPosition=function(v){return{x:v.x,y:v.y}},modelToRenderedPosition$1=function(v,S,R){return{x:v.x*S+R.x,y:v.y*S+R.y}},renderedToModelPosition=function(v,S,R){return{x:(v.x-R.x)/S,y:(v.y-R.y)/S}},array2point=function(v){return{x:v[0],y:v[1]}},min=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=1/0,A=S;A<R;A++){var k=v[A];isFinite(k)&&(T=Math.min(k,T))}return T},max=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=-1/0,A=S;A<R;A++){var k=v[A];isFinite(k)&&(T=Math.max(k,T))}return T},mean=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=0,A=0,k=S;k<R;k++){var M=v[k];isFinite(M)&&(T+=M,A++)}return T/A},median=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;T?v=v.slice(S,R):(R<v.length&&v.splice(R,v.length-R),S>0&&v.splice(0,S));for(var M=0,N=v.length-1;N>=0;N--){var D=v[N];k?isFinite(D)||(v[N]=-1/0,M++):v.splice(N,1)}A&&v.sort(function(B,z){return B-z});var I=v.length,q=Math.floor(I/2);return I%2!==0?v[q+1+M]:(v[q-1+M]+v[q+M])/2},deg2rad=function(v){return Math.PI*v/180},getAngleFromDisp=function(v,S){return Math.atan2(S,v)-Math.PI/2},log2=Math.log2||function(_){return Math.log(_)/Math.log(2)},signum=function(v){return v>0?1:v<0?-1:0},dist$1=function(v,S){return Math.sqrt(sqdist(v,S))},sqdist=function(v,S){var R=S.x-v.x,T=S.y-v.y;return R*R+T*T},inPlaceSumNormalize=function(v){for(var S=v.length,R=0,T=0;T<S;T++)R+=v[T];for(var A=0;A<S;A++)v[A]=v[A]/R;return v},qbezierAt=function(v,S,R,T){return(1-T)*(1-T)*v+2*(1-T)*T*S+T*T*R},qbezierPtAt=function(v,S,R,T){return{x:qbezierAt(v.x,S.x,R.x,T),y:qbezierAt(v.y,S.y,R.y,T)}},lineAt=function(v,S,R,T){var A={x:S.x-v.x,y:S.y-v.y},k=dist$1(v,S),M={x:A.x/k,y:A.y/k};return R=R??0,T=T??R*k,{x:v.x+M.x*T,y:v.y+M.y*T}},bound=function(v,S,R){return Math.max(v,Math.min(R,S))},makeBoundingBox=function(v){if(v==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(v.x1!=null&&v.y1!=null){if(v.x2!=null&&v.y2!=null&&v.x2>=v.x1&&v.y2>=v.y1)return{x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,w:v.x2-v.x1,h:v.y2-v.y1};if(v.w!=null&&v.h!=null&&v.w>=0&&v.h>=0)return{x1:v.x1,y1:v.y1,x2:v.x1+v.w,y2:v.y1+v.h,w:v.w,h:v.h}}},copyBoundingBox=function(v){return{x1:v.x1,x2:v.x2,w:v.w,y1:v.y1,y2:v.y2,h:v.h}},clearBoundingBox=function(v){v.x1=1/0,v.y1=1/0,v.x2=-1/0,v.y2=-1/0,v.w=0,v.h=0},updateBoundingBox=function(v,S){v.x1=Math.min(v.x1,S.x1),v.x2=Math.max(v.x2,S.x2),v.w=v.x2-v.x1,v.y1=Math.min(v.y1,S.y1),v.y2=Math.max(v.y2,S.y2),v.h=v.y2-v.y1},expandBoundingBoxByPoint=function(v,S,R){v.x1=Math.min(v.x1,S),v.x2=Math.max(v.x2,S),v.w=v.x2-v.x1,v.y1=Math.min(v.y1,R),v.y2=Math.max(v.y2,R),v.h=v.y2-v.y1},expandBoundingBox=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return v.x1-=S,v.x2+=S,v.y1-=S,v.y2+=S,v.w=v.x2-v.x1,v.h=v.y2-v.y1,v},expandBoundingBoxSides=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],R,T,A,k;if(S.length===1)R=T=A=k=S[0];else if(S.length===2)R=A=S[0],k=T=S[1];else if(S.length===4){var M=_slicedToArray(S,4);R=M[0],T=M[1],A=M[2],k=M[3]}return v.x1-=k,v.x2+=T,v.y1-=R,v.y2+=A,v.w=v.x2-v.x1,v.h=v.y2-v.y1,v},assignBoundingBox=function(v,S){v.x1=S.x1,v.y1=S.y1,v.x2=S.x2,v.y2=S.y2,v.w=v.x2-v.x1,v.h=v.y2-v.y1},boundingBoxesIntersect=function(v,S){return!(v.x1>S.x2||S.x1>v.x2||v.x2<S.x1||S.x2<v.x1||v.y2<S.y1||S.y2<v.y1||v.y1>S.y2||S.y1>v.y2)},inBoundingBox=function(v,S,R){return v.x1<=S&&S<=v.x2&&v.y1<=R&&R<=v.y2},pointInBoundingBox=function(v,S){return inBoundingBox(v,S.x,S.y)},boundingBoxInBoundingBox=function(v,S){return inBoundingBox(v,S.x1,S.y1)&&inBoundingBox(v,S.x2,S.y2)},hypot=(_Math$hypot=Math.hypot)!==null&&_Math$hypot!==void 0?_Math$hypot:function(_,v){return Math.sqrt(_*_+v*v)};function inflatePolygon(_,v){if(_.length<3)throw new Error("Need at least 3 vertices");var S=function(se,le){return{x:se.x+le.x,y:se.y+le.y}},R=function(se,le){return{x:se.x-le.x,y:se.y-le.y}},T=function(se,le){return{x:se.x*le,y:se.y*le}},A=function(se,le){return se.x*le.y-se.y*le.x},k=function(se){var le=hypot(se.x,se.y);return le===0?{x:0,y:0}:{x:se.x/le,y:se.y/le}},M=function(se){for(var le=0,ue=0;ue<se.length;ue++){var ce=se[ue],ge=se[(ue+1)%se.length];le+=ce.x*ge.y-ge.x*ce.y}return le/2},N=function(se,le,ue,ce){var ge=R(le,se),me=R(ce,ue),Ee=A(ge,me);if(Math.abs(Ee)<1e-9)return S(se,T(ge,.5));var _e=A(R(ue,se),me)/Ee;return S(se,T(ge,_e))},D=_.map(function(te){return{x:te.x,y:te.y}});M(D)<0&&D.reverse();for(var I=D.length,q=[],B=0;B<I;B++){var z=D[B],F=D[(B+1)%I],V=R(F,z),H=k({x:V.y,y:-V.x});q.push(H)}for(var W=q.map(function(te,se){var le=S(D[se],T(te,v)),ue=S(D[(se+1)%I],T(te,v));return{p1:le,p2:ue}}),Y=[],Z=0;Z<I;Z++){var J=W[(Z-1+I)%I],ne=W[Z],oe=N(J.p1,J.p2,ne.p1,ne.p2);Y.push(oe)}return Y}function miterBox(_,v,S,R,T,A){var k=transformPoints(_,v,S,R,T),M=inflatePolygon(k,A),N=makeBoundingBox();return M.forEach(function(D){return expandBoundingBoxByPoint(N,D.x,D.y)}),N}var roundRectangleIntersectLine=function(v,S,R,T,A,k,M){var N=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",D=N==="auto"?getRoundRectangleRadius(A,k):N,I=A/2,q=k/2;D=Math.min(D,I,q);var B=D!==I,z=D!==q,F;if(B){var V=R-I+D-M,H=T-q-M,W=R+I-D+M,Y=H;if(F=finiteLinesIntersect(v,S,R,T,V,H,W,Y,!1),F.length>0)return F}if(z){var Z=R+I+M,J=T-q+D-M,ne=Z,oe=T+q-D+M;if(F=finiteLinesIntersect(v,S,R,T,Z,J,ne,oe,!1),F.length>0)return F}if(B){var te=R-I+D-M,se=T+q+M,le=R+I-D+M,ue=se;if(F=finiteLinesIntersect(v,S,R,T,te,se,le,ue,!1),F.length>0)return F}if(z){var ce=R-I-M,ge=T-q+D-M,me=ce,Ee=T+q-D+M;if(F=finiteLinesIntersect(v,S,R,T,ce,ge,me,Ee,!1),F.length>0)return F}var _e;{var ye=R-I+D,be=T-q+D;if(_e=intersectLineCircle(v,S,R,T,ye,be,D+M),_e.length>0&&_e[0]<=ye&&_e[1]<=be)return[_e[0],_e[1]]}{var Se=R+I-D,De=T-q+D;if(_e=intersectLineCircle(v,S,R,T,Se,De,D+M),_e.length>0&&_e[0]>=Se&&_e[1]<=De)return[_e[0],_e[1]]}{var xe=R+I-D,pe=T+q-D;if(_e=intersectLineCircle(v,S,R,T,xe,pe,D+M),_e.length>0&&_e[0]>=xe&&_e[1]>=pe)return[_e[0],_e[1]]}{var we=R-I+D,Oe=T+q-D;if(_e=intersectLineCircle(v,S,R,T,we,Oe,D+M),_e.length>0&&_e[0]<=we&&_e[1]>=Oe)return[_e[0],_e[1]]}return[]},inLineVicinity=function(v,S,R,T,A,k,M){var N=M,D=Math.min(R,A),I=Math.max(R,A),q=Math.min(T,k),B=Math.max(T,k);return D-N<=v&&v<=I+N&&q-N<=S&&S<=B+N},inBezierVicinity=function(v,S,R,T,A,k,M,N,D){var I={x1:Math.min(R,M,A)-D,x2:Math.max(R,M,A)+D,y1:Math.min(T,N,k)-D,y2:Math.max(T,N,k)+D};return!(v<I.x1||v>I.x2||S<I.y1||S>I.y2)},solveQuadratic=function(v,S,R,T){R-=T;var A=S*S-4*v*R;if(A<0)return[];var k=Math.sqrt(A),M=2*v,N=(-S+k)/M,D=(-S-k)/M;return[N,D]},solveCubic=function(v,S,R,T,A){var k=1e-5;v===0&&(v=k),S/=v,R/=v,T/=v;var M,N,D,I,q,B,z,F;if(N=(3*R-S*S)/9,D=-(27*T)+S*(9*R-2*(S*S)),D/=54,M=N*N*N+D*D,A[1]=0,z=S/3,M>0){q=D+Math.sqrt(M),q=q<0?-Math.pow(-q,1/3):Math.pow(q,1/3),B=D-Math.sqrt(M),B=B<0?-Math.pow(-B,1/3):Math.pow(B,1/3),A[0]=-z+q+B,z+=(q+B)/2,A[4]=A[2]=-z,z=Math.sqrt(3)*(-B+q)/2,A[3]=z,A[5]=-z;return}if(A[5]=A[3]=0,M===0){F=D<0?-Math.pow(-D,1/3):Math.pow(D,1/3),A[0]=-z+2*F,A[4]=A[2]=-(F+z);return}N=-N,I=N*N*N,I=Math.acos(D/Math.sqrt(I)),F=2*Math.sqrt(N),A[0]=-z+F*Math.cos(I/3),A[2]=-z+F*Math.cos((I+2*Math.PI)/3),A[4]=-z+F*Math.cos((I+4*Math.PI)/3)},sqdistToQuadraticBezier=function(v,S,R,T,A,k,M,N){var D=1*R*R-4*R*A+2*R*M+4*A*A-4*A*M+M*M+T*T-4*T*k+2*T*N+4*k*k-4*k*N+N*N,I=9*R*A-3*R*R-3*R*M-6*A*A+3*A*M+9*T*k-3*T*T-3*T*N-6*k*k+3*k*N,q=3*R*R-6*R*A+R*M-R*v+2*A*A+2*A*v-M*v+3*T*T-6*T*k+T*N-T*S+2*k*k+2*k*S-N*S,B=1*R*A-R*R+R*v-A*v+T*k-T*T+T*S-k*S,z=[];solveCubic(D,I,q,B,z);for(var F=1e-7,V=[],H=0;H<6;H+=2)Math.abs(z[H+1])<F&&z[H]>=0&&z[H]<=1&&V.push(z[H]);V.push(1),V.push(0);for(var W=-1,Y,Z,J,ne=0;ne<V.length;ne++)Y=Math.pow(1-V[ne],2)*R+2*(1-V[ne])*V[ne]*A+V[ne]*V[ne]*M,Z=Math.pow(1-V[ne],2)*T+2*(1-V[ne])*V[ne]*k+V[ne]*V[ne]*N,J=Math.pow(Y-v,2)+Math.pow(Z-S,2),W>=0?J<W&&(W=J):W=J;return W},sqdistToFiniteLine=function(v,S,R,T,A,k){var M=[v-R,S-T],N=[A-R,k-T],D=N[0]*N[0]+N[1]*N[1],I=M[0]*M[0]+M[1]*M[1],q=M[0]*N[0]+M[1]*N[1],B=q*q/D;return q<0?I:B>D?(v-A)*(v-A)+(S-k)*(S-k):I-B},pointInsidePolygonPoints=function(v,S,R){for(var T,A,k,M,N,D=0,I=0;I<R.length/2;I++)if(T=R[I*2],A=R[I*2+1],I+1<R.length/2?(k=R[(I+1)*2],M=R[(I+1)*2+1]):(k=R[(I+1-R.length/2)*2],M=R[(I+1-R.length/2)*2+1]),!(T==v&&k==v))if(T>=v&&v>=k||T<=v&&v<=k)N=(v-T)/(k-T)*(M-A)+A,N>S&&D++;else continue;return D%2!==0},pointInsidePolygon=function(v,S,R,T,A,k,M,N,D){var I=new Array(R.length),q;N[0]!=null?(q=Math.atan(N[1]/N[0]),N[0]<0?q=q+Math.PI/2:q=-q-Math.PI/2):q=N;for(var B=Math.cos(-q),z=Math.sin(-q),F=0;F<I.length/2;F++)I[F*2]=k/2*(R[F*2]*B-R[F*2+1]*z),I[F*2+1]=M/2*(R[F*2+1]*B+R[F*2]*z),I[F*2]+=T,I[F*2+1]+=A;var V;if(D>0){var H=expandPolygon(I,-D);V=joinLines(H)}else V=I;return pointInsidePolygonPoints(v,S,V)},pointInsideRoundPolygon=function(v,S,R,T,A,k,M,N){for(var D=new Array(R.length*2),I=0;I<N.length;I++){var q=N[I];D[I*4+0]=q.startX,D[I*4+1]=q.startY,D[I*4+2]=q.stopX,D[I*4+3]=q.stopY;var B=Math.pow(q.cx-v,2)+Math.pow(q.cy-S,2);if(B<=Math.pow(q.radius,2))return!0}return pointInsidePolygonPoints(v,S,D)},joinLines=function(v){for(var S=new Array(v.length/2),R,T,A,k,M,N,D,I,q=0;q<v.length/4;q++){R=v[q*4],T=v[q*4+1],A=v[q*4+2],k=v[q*4+3],q<v.length/4-1?(M=v[(q+1)*4],N=v[(q+1)*4+1],D=v[(q+1)*4+2],I=v[(q+1)*4+3]):(M=v[0],N=v[1],D=v[2],I=v[3]);var B=finiteLinesIntersect(R,T,A,k,M,N,D,I,!0);S[q*2]=B[0],S[q*2+1]=B[1]}return S},expandPolygon=function(v,S){for(var R=new Array(v.length*2),T,A,k,M,N=0;N<v.length/2;N++){T=v[N*2],A=v[N*2+1],N<v.length/2-1?(k=v[(N+1)*2],M=v[(N+1)*2+1]):(k=v[0],M=v[1]);var D=M-A,I=-(k-T),q=Math.sqrt(D*D+I*I),B=D/q,z=I/q;R[N*4]=T+B*S,R[N*4+1]=A+z*S,R[N*4+2]=k+B*S,R[N*4+3]=M+z*S}return R},intersectLineEllipse=function(v,S,R,T,A,k){var M=R-v,N=T-S;M/=A,N/=k;var D=Math.sqrt(M*M+N*N),I=D-1;if(I<0)return[];var q=I/D;return[(R-v)*q+v,(T-S)*q+S]},checkInEllipse=function(v,S,R,T,A,k,M){return v-=A,S-=k,v/=R/2+M,S/=T/2+M,v*v+S*S<=1},intersectLineCircle=function(v,S,R,T,A,k,M){var N=[R-v,T-S],D=[v-A,S-k],I=N[0]*N[0]+N[1]*N[1],q=2*(D[0]*N[0]+D[1]*N[1]),B=D[0]*D[0]+D[1]*D[1]-M*M,z=q*q-4*I*B;if(z<0)return[];var F=(-q+Math.sqrt(z))/(2*I),V=(-q-Math.sqrt(z))/(2*I),H=Math.min(F,V),W=Math.max(F,V),Y=[];if(H>=0&&H<=1&&Y.push(H),W>=0&&W<=1&&Y.push(W),Y.length===0)return[];var Z=Y[0]*N[0]+v,J=Y[0]*N[1]+S;if(Y.length>1){if(Y[0]==Y[1])return[Z,J];var ne=Y[1]*N[0]+v,oe=Y[1]*N[1]+S;return[Z,J,ne,oe]}else return[Z,J]},midOfThree=function(v,S,R){return S<=v&&v<=R||R<=v&&v<=S?v:v<=S&&S<=R||R<=S&&S<=v?S:R},finiteLinesIntersect=function(v,S,R,T,A,k,M,N,D){var I=v-A,q=R-v,B=M-A,z=S-k,F=T-S,V=N-k,H=B*z-V*I,W=q*z-F*I,Y=V*q-B*F;if(Y!==0){var Z=H/Y,J=W/Y,ne=.001,oe=0-ne,te=1+ne;return oe<=Z&&Z<=te&&oe<=J&&J<=te?[v+Z*q,S+Z*F]:D?[v+Z*q,S+Z*F]:[]}else return H===0||W===0?midOfThree(v,R,M)===M?[M,N]:midOfThree(v,R,A)===A?[A,k]:midOfThree(A,M,R)===R?[R,T]:[]:[]},transformPoints=function(v,S,R,T,A){var k=[],M=T/2,N=A/2,D=S,I=R;k.push({x:D+M*v[0],y:I+N*v[1]});for(var q=1;q<v.length/2;q++)k.push({x:D+M*v[q*2],y:I+N*v[q*2+1]});return k},polygonIntersectLine=function(v,S,R,T,A,k,M,N){var D=[],I,q=new Array(R.length),B=!0;k==null&&(B=!1);var z;if(B){for(var F=0;F<q.length/2;F++)q[F*2]=R[F*2]*k+T,q[F*2+1]=R[F*2+1]*M+A;if(N>0){var V=expandPolygon(q,-N);z=joinLines(V)}else z=q}else z=R;for(var H,W,Y,Z,J=0;J<z.length/2;J++)H=z[J*2],W=z[J*2+1],J<z.length/2-1?(Y=z[(J+1)*2],Z=z[(J+1)*2+1]):(Y=z[0],Z=z[1]),I=finiteLinesIntersect(v,S,T,A,H,W,Y,Z),I.length!==0&&D.push(I[0],I[1]);return D},roundPolygonIntersectLine=function(v,S,R,T,A,k,M,N,D){var I=[],q,B=new Array(R.length*2);D.forEach(function(Y,Z){Z===0?(B[B.length-2]=Y.startX,B[B.length-1]=Y.startY):(B[Z*4-2]=Y.startX,B[Z*4-1]=Y.startY),B[Z*4]=Y.stopX,B[Z*4+1]=Y.stopY,q=intersectLineCircle(v,S,T,A,Y.cx,Y.cy,Y.radius),q.length!==0&&I.push(q[0],q[1])});for(var z=0;z<B.length/4;z++)q=finiteLinesIntersect(v,S,T,A,B[z*4],B[z*4+1],B[z*4+2],B[z*4+3],!1),q.length!==0&&I.push(q[0],q[1]);if(I.length>2){for(var F=[I[0],I[1]],V=Math.pow(F[0]-v,2)+Math.pow(F[1]-S,2),H=1;H<I.length/2;H++){var W=Math.pow(I[H*2]-v,2)+Math.pow(I[H*2+1]-S,2);W<=V&&(F[0]=I[H*2],F[1]=I[H*2+1],V=W)}return F}return I},shortenIntersection=function(v,S,R){var T=[v[0]-S[0],v[1]-S[1]],A=Math.sqrt(T[0]*T[0]+T[1]*T[1]),k=(A-R)/A;return k<0&&(k=1e-5),[S[0]+k*T[0],S[1]+k*T[1]]},generateUnitNgonPointsFitToSquare=function(v,S){var R=generateUnitNgonPoints(v,S);return R=fitPolygonToSquare(R),R},fitPolygonToSquare=function(v){for(var S,R,T=v.length/2,A=1/0,k=1/0,M=-1/0,N=-1/0,D=0;D<T;D++)S=v[2*D],R=v[2*D+1],A=Math.min(A,S),M=Math.max(M,S),k=Math.min(k,R),N=Math.max(N,R);for(var I=2/(M-A),q=2/(N-k),B=0;B<T;B++)S=v[2*B]=v[2*B]*I,R=v[2*B+1]=v[2*B+1]*q,A=Math.min(A,S),M=Math.max(M,S),k=Math.min(k,R),N=Math.max(N,R);if(k<-1)for(var z=0;z<T;z++)R=v[2*z+1]=v[2*z+1]+(-1-k);return v},generateUnitNgonPoints=function(v,S){var R=1/v*2*Math.PI,T=v%2===0?Math.PI/2+R/2:Math.PI/2;T+=S;for(var A=new Array(v*2),k,M=0;M<v;M++)k=M*R+T,A[2*M]=Math.cos(k),A[2*M+1]=Math.sin(-k);return A},getRoundRectangleRadius=function(v,S){return Math.min(v/4,S/4,8)},getRoundPolygonRadius=function(v,S){return Math.min(v/10,S/10,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(v,S,R){return[v-2*S+R,2*(S-v),v]},getBarrelCurveConstants=function(v,S){return{heightOffset:Math.min(15,.05*S),widthOffset:Math.min(100,.25*v),ctrlPtOffsetPct:.05}};function satPolygonIntersection(_,v){function S(q){for(var B=[],z=0;z<q.length;z++){var F=q[z],V=q[(z+1)%q.length],H={x:V.x-F.x,y:V.y-F.y},W={x:-H.y,y:H.x},Y=Math.sqrt(W.x*W.x+W.y*W.y);B.push({x:W.x/Y,y:W.y/Y})}return B}function R(q,B){var z=1/0,F=-1/0,V=_createForOfIteratorHelper(q),H;try{for(V.s();!(H=V.n()).done;){var W=H.value,Y=W.x*B.x+W.y*B.y;z=Math.min(z,Y),F=Math.max(F,Y)}}catch(Z){V.e(Z)}finally{V.f()}return{min:z,max:F}}function T(q,B){return!(q.max<B.min||B.max<q.min)}var A=[].concat(_toConsumableArray(S(_)),_toConsumableArray(S(v))),k=_createForOfIteratorHelper(A),M;try{for(k.s();!(M=k.n()).done;){var N=M.value,D=R(_,N),I=R(v,N);if(!T(D,I))return!1}}catch(q){k.e(q)}finally{k.f()}return!0}var pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(v){return 1}}),elesfn$o={pageRank:function(v){for(var S=pageRankDefaults(v),R=S.dampingFactor,T=S.precision,A=S.iterations,k=S.weight,M=this._private.cy,N=this.byGroup(),D=N.nodes,I=N.edges,q=D.length,B=q*q,z=I.length,F=new Array(B),V=new Array(q),H=(1-R)/q,W=0;W<q;W++){for(var Y=0;Y<q;Y++){var Z=W*q+Y;F[Z]=0}V[W]=0}for(var J=0;J<z;J++){var ne=I[J],oe=ne.data("source"),te=ne.data("target");if(oe!==te){var se=D.indexOfId(oe),le=D.indexOfId(te),ue=k(ne),ce=le*q+se;F[ce]+=ue,V[se]+=ue}}for(var ge=1/q+H,me=0;me<q;me++)if(V[me]===0)for(var Ee=0;Ee<q;Ee++){var _e=Ee*q+me;F[_e]=ge}else for(var ye=0;ye<q;ye++){var be=ye*q+me;F[be]=F[be]/V[me]+H}for(var Se=new Array(q),De=new Array(q),xe,pe=0;pe<q;pe++)Se[pe]=1;for(var we=0;we<A;we++){for(var Oe=0;Oe<q;Oe++)De[Oe]=0;for(var Ce=0;Ce<q;Ce++)for(var Pe=0;Pe<q;Pe++){var Ne=Ce*q+Pe;De[Ce]+=F[Ne]*Se[Pe]}inPlaceSumNormalize(De),xe=Se,Se=De,De=xe;for(var Te=0,ze=0;ze<q;ze++){var Fe=xe[ze]-Se[ze];Te+=Fe*Fe}if(Te<T)break}var Ie={rank:function($e){return $e=M.collection($e)[0],Se[D.indexOf($e)]}};return Ie}},defaults$f=defaults$g({root:null,weight:function(v){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function(v){v=defaults$f(v);var S=this.cy(),R=this.nodes(),T=R.length;if(v.directed){for(var I={},q={},B=0,z=0,F=0;F<T;F++){var V=R[F],H=V.id();v.root=V;var W=this.degreeCentrality(v);B<W.indegree&&(B=W.indegree),z<W.outdegree&&(z=W.outdegree),I[H]=W.indegree,q[H]=W.outdegree}return{indegree:function(Z){return B==0?0:(string$1(Z)&&(Z=S.filter(Z)),I[Z.id()]/B)},outdegree:function(Z){return z===0?0:(string$1(Z)&&(Z=S.filter(Z)),q[Z.id()]/z)}}}else{for(var A={},k=0,M=0;M<T;M++){var N=R[M];v.root=N;var D=this.degreeCentrality(v);k<D.degree&&(k=D.degree),A[N.id()]=D.degree}return{degree:function(Z){return k===0?0:(string$1(Z)&&(Z=S.filter(Z)),A[Z.id()]/k)}}}},degreeCentrality:function(v){v=defaults$f(v);var S=this.cy(),R=this,T=v,A=T.root,k=T.weight,M=T.directed,N=T.alpha;if(A=S.collection(A)[0],M){for(var z=A.connectedEdges(),F=z.filter(function(oe){return oe.target().same(A)&&R.has(oe)}),V=z.filter(function(oe){return oe.source().same(A)&&R.has(oe)}),H=F.length,W=V.length,Y=0,Z=0,J=0;J<F.length;J++)Y+=k(F[J]);for(var ne=0;ne<V.length;ne++)Z+=k(V[ne]);return{indegree:Math.pow(H,1-N)*Math.pow(Y,N),outdegree:Math.pow(W,1-N)*Math.pow(Z,N)}}else{for(var D=A.connectedEdges().intersection(R),I=D.length,q=0,B=0;B<D.length;B++)q+=k(D[B]);return{degree:Math.pow(I,1-N)*Math.pow(q,N)}}}};elesfn$n.dc=elesfn$n.degreeCentrality;elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function(v){for(var S=defaults$e(v),R=S.harmonic,T=S.weight,A=S.directed,k=this.cy(),M={},N=0,D=this.nodes(),I=this.floydWarshall({weight:T,directed:A}),q=0;q<D.length;q++){for(var B=0,z=D[q],F=0;F<D.length;F++)if(q!==F){var V=I.distance(z,D[F]);R?B+=1/V:B+=V}R||(B=1/B),N<B&&(N=B),M[z.id()]=B}return{closeness:function(W){return N==0?0:(string$1(W)?W=k.filter(W)[0].id():W=W.id(),M[W]/N)}}},closenessCentrality:function(v){var S=defaults$e(v),R=S.root,T=S.weight,A=S.directed,k=S.harmonic;R=this.filter(R)[0];for(var M=this.dijkstra({root:R,weight:T,directed:A}),N=0,D=this.nodes(),I=0;I<D.length;I++){var q=D[I];if(!q.same(R)){var B=M.distanceTo(q);k?N+=1/B:N+=B}}return k?N:1/N}};elesfn$m.cc=elesfn$m.closenessCentrality;elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function(v){for(var S=defaults$d(v),R=S.directed,T=S.weight,A=T!=null,k=this.cy(),M=this.nodes(),N={},D={},I=0,q={set:function(Z,J){D[Z]=J,J>I&&(I=J)},get:function(Z){return D[Z]}},B=0;B<M.length;B++){var z=M[B],F=z.id();R?N[F]=z.outgoers().nodes():N[F]=z.openNeighborhood().nodes(),q.set(F,0)}for(var V=function(){for(var Z=M[H].id(),J=[],ne={},oe={},te={},se=new Heap(function(Ce,Pe){return te[Ce]-te[Pe]}),le=0;le<M.length;le++){var ue=M[le].id();ne[ue]=[],oe[ue]=0,te[ue]=1/0}for(oe[Z]=1,te[Z]=0,se.push(Z);!se.empty();){var ce=se.pop();if(J.push(ce),A)for(var ge=0;ge<N[ce].length;ge++){var me=N[ce][ge],Ee=k.getElementById(ce),_e=void 0;Ee.edgesTo(me).length>0?_e=Ee.edgesTo(me)[0]:_e=me.edgesTo(Ee)[0];var ye=T(_e);me=me.id(),te[me]>te[ce]+ye&&(te[me]=te[ce]+ye,se.nodes.indexOf(me)<0?se.push(me):se.updateItem(me),oe[me]=0,ne[me]=[]),te[me]==te[ce]+ye&&(oe[me]=oe[me]+oe[ce],ne[me].push(ce))}else for(var be=0;be<N[ce].length;be++){var Se=N[ce][be].id();te[Se]==1/0&&(se.push(Se),te[Se]=te[ce]+1),te[Se]==te[ce]+1&&(oe[Se]=oe[Se]+oe[ce],ne[Se].push(ce))}}for(var De={},xe=0;xe<M.length;xe++)De[M[xe].id()]=0;for(;J.length>0;){for(var pe=J.pop(),we=0;we<ne[pe].length;we++){var Oe=ne[pe][we];De[Oe]=De[Oe]+oe[Oe]/oe[pe]*(1+De[pe])}pe!=M[H].id()&&q.set(pe,q.get(pe)+De[pe])}},H=0;H<M.length;H++)V();var W={betweenness:function(Z){var J=k.collection(Z).id();return q.get(J)},betweennessNormalized:function(Z){if(I==0)return 0;var J=k.collection(Z).id();return q.get(J)/I}};return W.betweennessNormalised=W.betweennessNormalized,W}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(_){return 1}]}),setOptions$3=function(v){return defaults$c(v)},getSimilarity$1=function(v,S){for(var R=0,T=0;T<S.length;T++)R+=S[T](v);return R},addLoops=function(v,S,R){for(var T=0;T<S;T++)v[T*S+T]=R},normalize$2=function(v,S){for(var R,T=0;T<S;T++){R=0;for(var A=0;A<S;A++)R+=v[A*S+T];for(var k=0;k<S;k++)v[k*S+T]=v[k*S+T]/R}},mmult=function(v,S,R){for(var T=new Array(R*R),A=0;A<R;A++){for(var k=0;k<R;k++)T[A*R+k]=0;for(var M=0;M<R;M++)for(var N=0;N<R;N++)T[A*R+N]+=v[A*R+M]*S[M*R+N]}return T},expand=function(v,S,R){for(var T=v.slice(0),A=1;A<R;A++)v=mmult(v,T,S);return v},inflate=function(v,S,R){for(var T=new Array(S*S),A=0;A<S*S;A++)T[A]=Math.pow(v[A],R);return normalize$2(T,S),T},hasConverged=function(v,S,R,T){for(var A=0;A<R;A++){var k=Math.round(v[A]*Math.pow(10,T))/Math.pow(10,T),M=Math.round(S[A]*Math.pow(10,T))/Math.pow(10,T);if(k!==M)return!1}return!0},assign$2=function(v,S,R,T){for(var A=[],k=0;k<S;k++){for(var M=[],N=0;N<S;N++)Math.round(v[k*S+N]*1e3)/1e3>0&&M.push(R[N]);M.length!==0&&A.push(T.collection(M))}return A},isDuplicate=function(v,S){for(var R=0;R<v.length;R++)if(!S[R]||v[R].id()!==S[R].id())return!1;return!0},removeDuplicates=function(v){for(var S=0;S<v.length;S++)for(var R=0;R<v.length;R++)S!=R&&isDuplicate(v[S],v[R])&&v.splice(R,1);return v},markovClustering=function(v){for(var S=this.nodes(),R=this.edges(),T=this.cy(),A=setOptions$3(v),k={},M=0;M<S.length;M++)k[S[M].id()]=M;for(var N=S.length,D=N*N,I=new Array(D),q,B=0;B<D;B++)I[B]=0;for(var z=0;z<R.length;z++){var F=R[z],V=k[F.source().id()],H=k[F.target().id()],W=getSimilarity$1(F,A.attributes);I[V*N+H]+=W,I[H*N+V]+=W}addLoops(I,N,A.multFactor),normalize$2(I,N);for(var Y=!0,Z=0;Y&&Z<A.maxIterations;)Y=!1,q=expand(I,N,A.expandFactor),I=inflate(q,N,A.inflateFactor),hasConverged(I,q,D,4)||(Y=!0),Z++;var J=assign$2(I,N,S,T);return J=removeDuplicates(J),J},markovClustering$1={markovClustering,mcl:markovClustering},identity$1=function(v){return v},absDiff=function(v,S){return Math.abs(S-v)},addAbsDiff=function(v,S,R){return v+absDiff(S,R)},addSquaredDiff=function(v,S,R){return v+Math.pow(R-S,2)},sqrt=function(v){return Math.sqrt(v)},maxAbsDiff=function(v,S,R){return Math.max(v,absDiff(S,R))},getDistance=function(v,S,R,T,A){for(var k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:identity$1,M=T,N,D,I=0;I<v;I++)N=S(I),D=R(I),M=A(M,N,D);return k(M)},distances={euclidean:function(v,S,R){return v>=2?getDistance(v,S,R,0,addSquaredDiff,sqrt):getDistance(v,S,R,0,addAbsDiff)},squaredEuclidean:function(v,S,R){return getDistance(v,S,R,0,addSquaredDiff)},manhattan:function(v,S,R){return getDistance(v,S,R,0,addAbsDiff)},max:function(v,S,R){return getDistance(v,S,R,-1/0,maxAbsDiff)}};distances["squared-euclidean"]=distances.squaredEuclidean;distances.squaredeuclidean=distances.squaredEuclidean;function clusteringDistance(_,v,S,R,T,A){var k;return fn$6(_)?k=_:k=distances[_]||distances.euclidean,v===0&&fn$6(_)?k(T,A):k(v,S,R,T,A)}var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=function(v){return defaults$b(v)},getDist=function(v,S,R,T,A){var k=A!=="kMedoids",M=k?function(q){return R[q]}:function(q){return T[q](R)},N=function(B){return T[B](S)},D=R,I=S;return clusteringDistance(v,T.length,M,N,D,I)},randomCentroids=function(v,S,R){for(var T=R.length,A=new Array(T),k=new Array(T),M=new Array(S),N=null,D=0;D<T;D++)A[D]=v.min(R[D]).value,k[D]=v.max(R[D]).value;for(var I=0;I<S;I++){N=[];for(var q=0;q<T;q++)N[q]=Math.random()*(k[q]-A[q])+A[q];M[I]=N}return M},classify=function(v,S,R,T,A){for(var k=1/0,M=0,N=0;N<S.length;N++){var D=getDist(R,v,S[N],T,A);D<k&&(k=D,M=N)}return M},buildCluster=function(v,S,R){for(var T=[],A=null,k=0;k<S.length;k++)A=S[k],R[A.id()]===v&&T.push(A);return T},haveValuesConverged=function(v,S,R){return Math.abs(S-v)<=R},haveMatricesConverged=function(v,S,R){for(var T=0;T<v.length;T++)for(var A=0;A<v[T].length;A++){var k=Math.abs(v[T][A]-S[T][A]);if(k>R)return!1}return!0},seenBefore=function(v,S,R){for(var T=0;T<R;T++)if(v===S[T])return!0;return!1},randomMedoids=function(v,S){var R=new Array(S);if(v.length<50)for(var T=0;T<S;T++){for(var A=v[Math.floor(Math.random()*v.length)];seenBefore(A,R,T);)A=v[Math.floor(Math.random()*v.length)];R[T]=A}else for(var k=0;k<S;k++)R[k]=v[Math.floor(Math.random()*v.length)];return R},findCost=function(v,S,R){for(var T=0,A=0;A<S.length;A++)T+=getDist("manhattan",S[A],v,R,"kMedoids");return T},kMeans=function(v){var S=this.cy(),R=this.nodes(),T=null,A=setOptions$2(v),k=new Array(A.k),M={},N;A.testMode?typeof A.testCentroids=="number"?(A.testCentroids,N=randomCentroids(R,A.k,A.attributes)):_typeof(A.testCentroids)==="object"?N=A.testCentroids:N=randomCentroids(R,A.k,A.attributes):N=randomCentroids(R,A.k,A.attributes);for(var D=!0,I=0;D&&I<A.maxIterations;){for(var q=0;q<R.length;q++)T=R[q],M[T.id()]=classify(T,N,A.distance,A.attributes,"kMeans");D=!1;for(var B=0;B<A.k;B++){var z=buildCluster(B,R,M);if(z.length!==0){for(var F=A.attributes.length,V=N[B],H=new Array(F),W=new Array(F),Y=0;Y<F;Y++){W[Y]=0;for(var Z=0;Z<z.length;Z++)T=z[Z],W[Y]+=A.attributes[Y](T);H[Y]=W[Y]/z.length,haveValuesConverged(H[Y],V[Y],A.sensitivityThreshold)||(D=!0)}N[B]=H,k[B]=S.collection(z)}}I++}return k},kMedoids=function(v){var S=this.cy(),R=this.nodes(),T=null,A=setOptions$2(v),k=new Array(A.k),M,N={},D,I=new Array(A.k);A.testMode?typeof A.testCentroids=="number"||(_typeof(A.testCentroids)==="object"?M=A.testCentroids:M=randomMedoids(R,A.k)):M=randomMedoids(R,A.k);for(var q=!0,B=0;q&&B<A.maxIterations;){for(var z=0;z<R.length;z++)T=R[z],N[T.id()]=classify(T,M,A.distance,A.attributes,"kMedoids");q=!1;for(var F=0;F<M.length;F++){var V=buildCluster(F,R,N);if(V.length!==0){I[F]=findCost(M[F],V,A.attributes);for(var H=0;H<V.length;H++)D=findCost(V[H],V,A.attributes),D<I[F]&&(I[F]=D,M[F]=V[H],q=!0);k[F]=S.collection(V)}}B++}return k},updateCentroids=function(v,S,R,T,A){for(var k,M,N=0;N<S.length;N++)for(var D=0;D<v.length;D++)T[N][D]=Math.pow(R[N][D],A.m);for(var I=0;I<v.length;I++)for(var q=0;q<A.attributes.length;q++){k=0,M=0;for(var B=0;B<S.length;B++)k+=T[B][I]*A.attributes[q](S[B]),M+=T[B][I];v[I][q]=k/M}},updateMembership=function(v,S,R,T,A){for(var k=0;k<v.length;k++)S[k]=v[k].slice();for(var M,N,D,I=2/(A.m-1),q=0;q<R.length;q++)for(var B=0;B<T.length;B++){M=0;for(var z=0;z<R.length;z++)N=getDist(A.distance,T[B],R[q],A.attributes,"cmeans"),D=getDist(A.distance,T[B],R[z],A.attributes,"cmeans"),M+=Math.pow(N/D,I);v[B][q]=1/M}},assign$1=function(v,S,R,T){for(var A=new Array(R.k),k=0;k<A.length;k++)A[k]=[];for(var M,N,D=0;D<S.length;D++){M=-1/0,N=-1;for(var I=0;I<S[0].length;I++)S[D][I]>M&&(M=S[D][I],N=I);A[N].push(v[D])}for(var q=0;q<A.length;q++)A[q]=T.collection(A[q]);return A},fuzzyCMeans=function(v){var S=this.cy(),R=this.nodes(),T=setOptions$2(v),A,k,M,N,D;N=new Array(R.length);for(var I=0;I<R.length;I++)N[I]=new Array(T.k);M=new Array(R.length);for(var q=0;q<R.length;q++)M[q]=new Array(T.k);for(var B=0;B<R.length;B++){for(var z=0,F=0;F<T.k;F++)M[B][F]=Math.random(),z+=M[B][F];for(var V=0;V<T.k;V++)M[B][V]=M[B][V]/z}k=new Array(T.k);for(var H=0;H<T.k;H++)k[H]=new Array(T.attributes.length);D=new Array(R.length);for(var W=0;W<R.length;W++)D[W]=new Array(T.k);for(var Y=!0,Z=0;Y&&Z<T.maxIterations;)Y=!1,updateCentroids(k,R,M,D,T),updateMembership(M,N,k,R,T),haveMatricesConverged(M,N,T.sensitivityThreshold)||(Y=!0),Z++;return A=assign$1(R,M,T,S),{clusters:A,degreeOfMembership:M}},kClustering={kMeans,kMedoids,fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function(v){var S=defaults$a(v),R=linkageAliases[S.linkage];return R!=null&&(S.linkage=R),S},mergeClosest=function(v,S,R,T,A){for(var k=0,M=1/0,N,D=A.attributes,I=function(le,ue){return clusteringDistance(A.distance,D.length,function(ce){return D[ce](le)},function(ce){return D[ce](ue)},le,ue)},q=0;q<v.length;q++){var B=v[q].key,z=R[B][T[B]];z<M&&(k=B,M=z)}if(A.mode==="threshold"&&M>=A.threshold||A.mode==="dendrogram"&&v.length===1)return!1;var F=S[k],V=S[T[k]],H;A.mode==="dendrogram"?H={left:F,right:V,key:F.key}:H={value:F.value.concat(V.value),key:F.key},v[F.index]=H,v.splice(V.index,1),S[F.key]=H;for(var W=0;W<v.length;W++){var Y=v[W];F.key===Y.key?N=1/0:A.linkage==="min"?(N=R[F.key][Y.key],R[F.key][Y.key]>R[V.key][Y.key]&&(N=R[V.key][Y.key])):A.linkage==="max"?(N=R[F.key][Y.key],R[F.key][Y.key]<R[V.key][Y.key]&&(N=R[V.key][Y.key])):A.linkage==="mean"?N=(R[F.key][Y.key]*F.size+R[V.key][Y.key]*V.size)/(F.size+V.size):A.mode==="dendrogram"?N=I(Y.value,F.value):N=I(Y.value[0],F.value[0]),R[F.key][Y.key]=R[Y.key][F.key]=N}for(var Z=0;Z<v.length;Z++){var J=v[Z].key;if(T[J]===F.key||T[J]===V.key){for(var ne=J,oe=0;oe<v.length;oe++){var te=v[oe].key;R[J][te]<R[J][ne]&&(ne=te)}T[J]=ne}v[Z].index=Z}return F.key=V.key=F.index=V.index=null,!0},_getAllChildren=function(v,S,R){v&&(v.value?S.push(v.value):(v.left&&_getAllChildren(v.left,S),v.right&&_getAllChildren(v.right,S)))},_buildDendrogram=function(v,S){if(!v)return"";if(v.left&&v.right){var R=_buildDendrogram(v.left,S),T=_buildDendrogram(v.right,S),A=S.add({group:"nodes",data:{id:R+","+T}});return S.add({group:"edges",data:{source:R,target:A.id()}}),S.add({group:"edges",data:{source:T,target:A.id()}}),A.id()}else if(v.value)return v.value.id()},_buildClustersFromTree=function(v,S,R){if(!v)return[];var T=[],A=[],k=[];return S===0?(v.left&&_getAllChildren(v.left,T),v.right&&_getAllChildren(v.right,A),k=T.concat(A),[R.collection(k)]):S===1?v.value?[R.collection(v.value)]:(v.left&&_getAllChildren(v.left,T),v.right&&_getAllChildren(v.right,A),[R.collection(T),R.collection(A)]):v.value?[R.collection(v.value)]:(v.left&&(T=_buildClustersFromTree(v.left,S-1,R)),v.right&&(A=_buildClustersFromTree(v.right,S-1,R)),T.concat(A))},hierarchicalClustering=function(v){for(var S=this.cy(),R=this.nodes(),T=setOptions$1(v),A=T.attributes,k=function(Z,J){return clusteringDistance(T.distance,A.length,function(ne){return A[ne](Z)},function(ne){return A[ne](J)},Z,J)},M=[],N=[],D=[],I=[],q=0;q<R.length;q++){var B={value:T.mode==="dendrogram"?R[q]:[R[q]],key:q,index:q};M[q]=B,I[q]=B,N[q]=[],D[q]=0}for(var z=0;z<M.length;z++)for(var F=0;F<=z;F++){var V=void 0;T.mode==="dendrogram"?V=z===F?1/0:k(M[z].value,M[F].value):V=z===F?1/0:k(M[z].value[0],M[F].value[0]),N[z][F]=V,N[F][z]=V,V<N[z][D[z]]&&(D[z]=F)}for(var H=mergeClosest(M,I,N,D,T);H;)H=mergeClosest(M,I,N,D,T);var W;return T.mode==="dendrogram"?(W=_buildClustersFromTree(M[0],T.dendrogramDepth,S),T.addDendrogram&&_buildDendrogram(M[0],S)):(W=new Array(M.length),M.forEach(function(Y,Z){Y.key=Y.index=null,W[Z]=S.collection(Y.value)})),W},hierarchicalClustering$1={hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions=function(v){var S=v.damping,R=v.preference;.5<=S&&S<1||error("Damping must range on [0.5, 1).  Got: ".concat(S));var T=["median","mean","min","max"];return T.some(function(A){return A===R})||number$1(R)||error("Preference must be one of [".concat(T.map(function(A){return"'".concat(A,"'")}).join(", "),"] or a number.  Got: ").concat(R)),defaults$9(v)},getSimilarity=function(v,S,R,T){var A=function(M,N){return T[N](M)};return-clusteringDistance(v,T.length,function(k){return A(S,k)},function(k){return A(R,k)},S,R)},getPreference=function(v,S){var R=null;return S==="median"?R=median(v):S==="mean"?R=mean(v):S==="min"?R=min(v):S==="max"?R=max(v):R=S,R},findExemplars=function(v,S,R){for(var T=[],A=0;A<v;A++)S[A*v+A]+R[A*v+A]>0&&T.push(A);return T},assignClusters=function(v,S,R){for(var T=[],A=0;A<v;A++){for(var k=-1,M=-1/0,N=0;N<R.length;N++){var D=R[N];S[A*v+D]>M&&(k=D,M=S[A*v+D])}k>0&&T.push(k)}for(var I=0;I<R.length;I++)T[R[I]]=R[I];return T},assign=function(v,S,R){for(var T=assignClusters(v,S,R),A=0;A<R.length;A++){for(var k=[],M=0;M<T.length;M++)T[M]===R[A]&&k.push(M);for(var N=-1,D=-1/0,I=0;I<k.length;I++){for(var q=0,B=0;B<k.length;B++)q+=S[k[B]*v+k[I]];q>D&&(N=I,D=q)}R[A]=k[N]}return T=assignClusters(v,S,R),T},affinityPropagation=function(v){for(var S=this.cy(),R=this.nodes(),T=setOptions(v),A={},k=0;k<R.length;k++)A[R[k].id()]=k;var M,N,D,I,q,B;M=R.length,N=M*M,D=new Array(N);for(var z=0;z<N;z++)D[z]=-1/0;for(var F=0;F<M;F++)for(var V=0;V<M;V++)F!==V&&(D[F*M+V]=getSimilarity(T.distance,R[F],R[V],T.attributes));I=getPreference(D,T.preference);for(var H=0;H<M;H++)D[H*M+H]=I;q=new Array(N);for(var W=0;W<N;W++)q[W]=0;B=new Array(N);for(var Y=0;Y<N;Y++)B[Y]=0;for(var Z=new Array(M),J=new Array(M),ne=new Array(M),oe=0;oe<M;oe++)Z[oe]=0,J[oe]=0,ne[oe]=0;for(var te=new Array(M*T.minIterations),se=0;se<te.length;se++)te[se]=0;var le;for(le=0;le<T.maxIterations;le++){for(var ue=0;ue<M;ue++){for(var ce=-1/0,ge=-1/0,me=-1,Ee=0,_e=0;_e<M;_e++)Z[_e]=q[ue*M+_e],Ee=B[ue*M+_e]+D[ue*M+_e],Ee>=ce?(ge=ce,ce=Ee,me=_e):Ee>ge&&(ge=Ee);for(var ye=0;ye<M;ye++)q[ue*M+ye]=(1-T.damping)*(D[ue*M+ye]-ce)+T.damping*Z[ye];q[ue*M+me]=(1-T.damping)*(D[ue*M+me]-ge)+T.damping*Z[me]}for(var be=0;be<M;be++){for(var Se=0,De=0;De<M;De++)Z[De]=B[De*M+be],J[De]=Math.max(0,q[De*M+be]),Se+=J[De];Se-=J[be],J[be]=q[be*M+be],Se+=J[be];for(var xe=0;xe<M;xe++)B[xe*M+be]=(1-T.damping)*Math.min(0,Se-J[xe])+T.damping*Z[xe];B[be*M+be]=(1-T.damping)*(Se-J[be])+T.damping*Z[be]}for(var pe=0,we=0;we<M;we++){var Oe=B[we*M+we]+q[we*M+we]>0?1:0;te[le%T.minIterations*M+we]=Oe,pe+=Oe}if(pe>0&&(le>=T.minIterations-1||le==T.maxIterations-1)){for(var Ce=0,Pe=0;Pe<M;Pe++){ne[Pe]=0;for(var Ne=0;Ne<T.minIterations;Ne++)ne[Pe]+=te[Ne*M+Pe];(ne[Pe]===0||ne[Pe]===T.minIterations)&&Ce++}if(Ce===M)break}}for(var Te=findExemplars(M,q,B),ze=assign(M,D,Te),Fe={},Ie=0;Ie<Te.length;Ie++)Fe[Te[Ie]]=[];for(var Le=0;Le<R.length;Le++){var $e=A[R[Le].id()],qe=ze[$e];qe!=null&&Fe[qe].push(R[Le])}for(var at=new Array(Te.length),lt=0;lt<Te.length;lt++)at[lt]=S.collection(Fe[Te[lt]]);return at},affinityPropagation$1={affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:function(v){if(!plainObject(v)){var S=arguments;v={root:S[0],directed:S[1]}}var R=hierholzerDefaults(v),T=R.root,A=R.directed,k=this,M=!1,N,D,I;T&&(I=string$1(T)?this.filter(T)[0].id():T[0].id());var q={},B={};A?k.forEach(function(Y){var Z=Y.id();if(Y.isNode()){var J=Y.indegree(!0),ne=Y.outdegree(!0),oe=J-ne,te=ne-J;oe==1?N?M=!0:N=Z:te==1?D?M=!0:D=Z:(te>1||oe>1)&&(M=!0),q[Z]=[],Y.outgoers().forEach(function(se){se.isEdge()&&q[Z].push(se.id())})}else B[Z]=[void 0,Y.target().id()]}):k.forEach(function(Y){var Z=Y.id();if(Y.isNode()){var J=Y.degree(!0);J%2&&(N?D?M=!0:D=Z:N=Z),q[Z]=[],Y.connectedEdges().forEach(function(ne){return q[Z].push(ne.id())})}else B[Z]=[Y.source().id(),Y.target().id()]});var z={found:!1,trail:void 0};if(M)return z;if(D&&N)if(A){if(I&&D!=I)return z;I=D}else{if(I&&D!=I&&N!=I)return z;I||(I=D)}else I||(I=k[0].id());var F=function(Z){for(var J=Z,ne=[Z],oe,te,se;q[J].length;)oe=q[J].shift(),te=B[oe][0],se=B[oe][1],J!=se?(q[se]=q[se].filter(function(le){return le!=oe}),J=se):!A&&J!=te&&(q[te]=q[te].filter(function(le){return le!=oe}),J=te),ne.unshift(oe),ne.unshift(J);return ne},V=[],H=[];for(H=F(I);H.length!=1;)q[H[0]].length==0?(V.unshift(k.getElementById(H.shift())),V.unshift(k.getElementById(H.shift()))):H=F(H.shift()).concat(H);V.unshift(k.getElementById(H.shift()));for(var W in q)if(q[W].length)return z;return z.found=!0,z.trail=this.spawn(V,!0),z}},hopcroftTarjanBiconnected=function(){var v=this,S={},R=0,T=0,A=[],k=[],M={},N=function(B,z){for(var F=k.length-1,V=[],H=v.spawn();k[F].x!=B||k[F].y!=z;)V.push(k.pop().edge),F--;V.push(k.pop().edge),V.forEach(function(W){var Y=W.connectedNodes().intersection(v);H.merge(W),Y.forEach(function(Z){var J=Z.id(),ne=Z.connectedEdges().intersection(v);H.merge(Z),S[J].cutVertex?H.merge(ne.filter(function(oe){return oe.isLoop()})):H.merge(ne)})}),A.push(H)},D=function(B,z,F){B===F&&(T+=1),S[z]={id:R,low:R++,cutVertex:!1};var V=v.getElementById(z).connectedEdges().intersection(v);if(V.size()===0)A.push(v.spawn(v.getElementById(z)));else{var H,W,Y,Z;V.forEach(function(J){H=J.source().id(),W=J.target().id(),Y=H===z?W:H,Y!==F&&(Z=J.id(),M[Z]||(M[Z]=!0,k.push({x:z,y:Y,edge:J})),Y in S?S[z].low=Math.min(S[z].low,S[Y].id):(D(B,Y,z),S[z].low=Math.min(S[z].low,S[Y].low),S[z].id<=S[Y].low&&(S[z].cutVertex=!0,N(z,Y))))})}};v.forEach(function(q){if(q.isNode()){var B=q.id();B in S||(T=0,D(B,B),S[B].cutVertex=T>1)}});var I=Object.keys(S).filter(function(q){return S[q].cutVertex}).map(function(q){return v.getElementById(q)});return{cut:v.spawn(I),components:A}},hopcroftTarjanBiconnected$1={hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},tarjanStronglyConnected=function(){var v=this,S={},R=0,T=[],A=[],k=v.spawn(v),M=function(D){A.push(D),S[D]={index:R,low:R++,explored:!1};var I=v.getElementById(D).connectedEdges().intersection(v);if(I.forEach(function(V){var H=V.target().id();H!==D&&(H in S||M(H),S[H].explored||(S[D].low=Math.min(S[D].low,S[H].low)))}),S[D].index===S[D].low){for(var q=v.spawn();;){var B=A.pop();if(q.merge(v.getElementById(B)),S[B].low=S[D].index,S[B].explored=!0,B===D)break}var z=q.edgesWith(q),F=q.merge(z);T.push(F),k=k.difference(F)}};return v.forEach(function(N){if(N.isNode()){var D=N.id();D in S||M(D)}}),{cut:k,components:T}},tarjanStronglyConnected$1={tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected},elesfn$j={};[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,hopcroftTarjanBiconnected$1,tarjanStronglyConnected$1].forEach(function(_){extend(elesfn$j,_)});var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,_api=function(v){if(!(this instanceof _api))return new _api(v);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof v=="function"&&v.call(this,this.fulfill.bind(this),this.reject.bind(this))};_api.prototype={fulfill:function(v){return deliver(this,STATE_FULFILLED,"fulfillValue",v)},reject:function(v){return deliver(this,STATE_REJECTED,"rejectReason",v)},then:function(v,S){var R=this,T=new _api;return R.onFulfilled.push(resolver(v,T,"fulfill")),R.onRejected.push(resolver(S,T,"reject")),execute(R),T.proxy}};var deliver=function(v,S,R,T){return v.state===STATE_PENDING&&(v.state=S,v[R]=T,execute(v)),v},execute=function(v){v.state===STATE_FULFILLED?execute_handlers(v,"onFulfilled",v.fulfillValue):v.state===STATE_REJECTED&&execute_handlers(v,"onRejected",v.rejectReason)},execute_handlers=function(v,S,R){if(v[S].length!==0){var T=v[S];v[S]=[];var A=function(){for(var M=0;M<T.length;M++)T[M](R)};typeof setImmediate=="function"?setImmediate(A):setTimeout(A,0)}},resolver=function(v,S,R){return function(T){if(typeof v!="function")S[R].call(S,T);else{var A;try{A=v(T)}catch(k){S.reject(k);return}_resolve(S,A)}}},_resolve=function(v,S){if(v===S||v.proxy===S){v.reject(new TypeError("cannot resolve promise with itself"));return}var R;if(_typeof(S)==="object"&&S!==null||typeof S=="function")try{R=S.then}catch(A){v.reject(A);return}if(typeof R=="function"){var T=!1;try{R.call(S,function(A){T||(T=!0,A===S?v.reject(new TypeError("circular thenable chain")):_resolve(v,A))},function(A){T||(T=!0,v.reject(A))})}catch(A){T||v.reject(A)}return}v.fulfill(S)};_api.all=function(_){return new _api(function(v,S){for(var R=new Array(_.length),T=0,A=function(N,D){R[N]=D,T++,T===_.length&&v(R)},k=0;k<_.length;k++)(function(M){var N=_[M],D=N!=null&&N.then!=null;if(D)N.then(function(q){A(M,q)},function(q){S(q)});else{var I=N;A(M,I)}})(k)})};_api.resolve=function(_){return new _api(function(v,S){v(_)})};_api.reject=function(_){return new _api(function(v,S){S(_)})};var Promise$1=typeof Promise<"u"?Promise:_api,Animation=function(v,S,R){var T=core$2(v),A=!T,k=this._private=extend({duration:1e3},S,R);if(k.target=v,k.style=k.style||k.css,k.started=!1,k.playing=!1,k.hooked=!1,k.applying=!1,k.progress=0,k.completes=[],k.frames=[],k.complete&&fn$6(k.complete)&&k.completes.push(k.complete),A){var M=v.position();k.startPosition=k.startPosition||{x:M.x,y:M.y},k.startStyle=k.startStyle||v.cy().style().getAnimationStartStyle(v,k.style)}if(T){var N=v.pan();k.startPan={x:N.x,y:N.y},k.startZoom=v.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var v=this._private;if(!v.hooked){var S,R=v.target._private.animation;v.queue?S=R.queue:S=R.current,S.push(this),elementOrCollection(v.target)&&v.target.cy().addToAnimationPool(v.target),v.hooked=!0}return this},play:function(){var v=this._private;return v.progress===1&&(v.progress=0),v.playing=!0,v.started=!1,v.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var v=this._private;return v.applying=!0,v.started=!1,v.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var v=this._private;return v.playing=!1,v.started=!1,this},stop:function(){var v=this._private;return v.playing=!1,v.started=!1,v.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(v){var S=this._private;return v===void 0?S.progress*S.duration:this.progress(v/S.duration)},progress:function(v){var S=this._private,R=S.playing;return v===void 0?S.progress:(R&&this.pause(),S.progress=v,S.started=!1,R&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var v=this._private,S=v.playing;S&&this.pause(),v.progress=1-v.progress,v.started=!1;var R=function(D,I){var q=v[D];q!=null&&(v[D]=v[I],v[I]=q)};if(R("zoom","startZoom"),R("pan","startPan"),R("position","startPosition"),v.style)for(var T=0;T<v.style.length;T++){var A=v.style[T],k=A.name,M=v.startStyle[k];v.startStyle[k]=A,v.style[T]=M}return S&&this.play(),this},promise:function(v){var S=this._private,R;switch(v){case"frame":R=S.frames;break;default:case"complete":case"completed":R=S.completes}return new Promise$1(function(T,A){R.push(function(){T()})})}});anifn.complete=anifn.completed;anifn.run=anifn.play;anifn.running=anifn.playing;var define$3={animated:function(){return function(){var S=this,R=S.length!==void 0,T=R?S:[S],A=this._private.cy||this;if(!A.styleEnabled())return!1;var k=T[0];if(k)return k._private.animation.current.length>0}},clearQueue:function(){return function(){var S=this,R=S.length!==void 0,T=R?S:[S],A=this._private.cy||this;if(!A.styleEnabled())return this;for(var k=0;k<T.length;k++){var M=T[k];M._private.animation.queue=[]}return this}},delay:function(){return function(S,R){var T=this._private.cy||this;return T.styleEnabled()?this.animate({delay:S,duration:S,complete:R}):this}},delayAnimation:function(){return function(S,R){var T=this._private.cy||this;return T.styleEnabled()?this.animation({delay:S,duration:S,complete:R}):this}},animation:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],M=this._private.cy||this,N=!A,D=!N;if(!M.styleEnabled())return this;var I=M.style();S=extend({},S,R);var q=Object.keys(S).length===0;if(q)return new Animation(k[0],S);switch(S.duration===void 0&&(S.duration=400),S.duration){case"slow":S.duration=600;break;case"fast":S.duration=200;break}if(D&&(S.style=I.getPropsList(S.style||S.css),S.css=void 0),D&&S.renderedPosition!=null){var B=S.renderedPosition,z=M.pan(),F=M.zoom();S.position=renderedToModelPosition(B,F,z)}if(N&&S.panBy!=null){var V=S.panBy,H=M.pan();S.pan={x:H.x+V.x,y:H.y+V.y}}var W=S.center||S.centre;if(N&&W!=null){var Y=M.getCenterPan(W.eles,S.zoom);Y!=null&&(S.pan=Y)}if(N&&S.fit!=null){var Z=S.fit,J=M.getFitViewport(Z.eles||Z.boundingBox,Z.padding);J!=null&&(S.pan=J.pan,S.zoom=J.zoom)}if(N&&plainObject(S.zoom)){var ne=M.getZoomedViewport(S.zoom);ne!=null?(ne.zoomed&&(S.zoom=ne.zoom),ne.panned&&(S.pan=ne.pan)):S.zoom=null}return new Animation(k[0],S)}},animate:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],M=this._private.cy||this;if(!M.styleEnabled())return this;R&&(S=extend({},S,R));for(var N=0;N<k.length;N++){var D=k[N],I=D.animated()&&(S.queue===void 0||S.queue),q=D.animation(S,I?{queue:!0}:void 0);q.play()}return this}},stop:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],M=this._private.cy||this;if(!M.styleEnabled())return this;for(var N=0;N<k.length;N++){for(var D=k[N],I=D._private,q=I.animation.current,B=0;B<q.length;B++){var z=q[B],F=z._private;R&&(F.duration=0)}S&&(I.animation.queue=[]),R||(I.animation.current=[])}return M.notify("draw"),this}}},isArray_1$1,hasRequiredIsArray$1;function requireIsArray$1(){if(hasRequiredIsArray$1)return isArray_1$1;hasRequiredIsArray$1=1;var _=Array.isArray;return isArray_1$1=_,isArray_1$1}var _isKey$1,hasRequired_isKey$1;function require_isKey$1(){if(hasRequired_isKey$1)return _isKey$1;hasRequired_isKey$1=1;var _=requireIsArray$1(),v=requireIsSymbol$1(),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function T(A,k){if(_(A))return!1;var M=typeof A;return M=="number"||M=="symbol"||M=="boolean"||A==null||v(A)?!0:R.test(A)||!S.test(A)||k!=null&&A in Object(k)}return _isKey$1=T,_isKey$1}var isFunction_1$1,hasRequiredIsFunction$1;function requireIsFunction$1(){if(hasRequiredIsFunction$1)return isFunction_1$1;hasRequiredIsFunction$1=1;var _=require_baseGetTag$1(),v=requireIsObject$1(),S="[object AsyncFunction]",R="[object Function]",T="[object GeneratorFunction]",A="[object Proxy]";function k(M){if(!v(M))return!1;var N=_(M);return N==R||N==T||N==S||N==A}return isFunction_1$1=k,isFunction_1$1}var _coreJsData$1,hasRequired_coreJsData$1;function require_coreJsData$1(){if(hasRequired_coreJsData$1)return _coreJsData$1;hasRequired_coreJsData$1=1;var _=require_root$1(),v=_["__core-js_shared__"];return _coreJsData$1=v,_coreJsData$1}var _isMasked$1,hasRequired_isMasked$1;function require_isMasked$1(){if(hasRequired_isMasked$1)return _isMasked$1;hasRequired_isMasked$1=1;var _=require_coreJsData$1(),v=(function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""})();function S(R){return!!v&&v in R}return _isMasked$1=S,_isMasked$1}var _toSource$1,hasRequired_toSource$1;function require_toSource$1(){if(hasRequired_toSource$1)return _toSource$1;hasRequired_toSource$1=1;var _=Function.prototype,v=_.toString;function S(R){if(R!=null){try{return v.call(R)}catch{}try{return R+""}catch{}}return""}return _toSource$1=S,_toSource$1}var _baseIsNative$1,hasRequired_baseIsNative$1;function require_baseIsNative$1(){if(hasRequired_baseIsNative$1)return _baseIsNative$1;hasRequired_baseIsNative$1=1;var _=requireIsFunction$1(),v=require_isMasked$1(),S=requireIsObject$1(),R=require_toSource$1(),T=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,k=Function.prototype,M=Object.prototype,N=k.toString,D=M.hasOwnProperty,I=RegExp("^"+N.call(D).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q(B){if(!S(B)||v(B))return!1;var z=_(B)?I:A;return z.test(R(B))}return _baseIsNative$1=q,_baseIsNative$1}var _getValue$1,hasRequired_getValue$1;function require_getValue$1(){if(hasRequired_getValue$1)return _getValue$1;hasRequired_getValue$1=1;function _(v,S){return v?.[S]}return _getValue$1=_,_getValue$1}var _getNative$1,hasRequired_getNative$1;function require_getNative$1(){if(hasRequired_getNative$1)return _getNative$1;hasRequired_getNative$1=1;var _=require_baseIsNative$1(),v=require_getValue$1();function S(R,T){var A=v(R,T);return _(A)?A:void 0}return _getNative$1=S,_getNative$1}var _nativeCreate$1,hasRequired_nativeCreate$1;function require_nativeCreate$1(){if(hasRequired_nativeCreate$1)return _nativeCreate$1;hasRequired_nativeCreate$1=1;var _=require_getNative$1(),v=_(Object,"create");return _nativeCreate$1=v,_nativeCreate$1}var _hashClear$1,hasRequired_hashClear$1;function require_hashClear$1(){if(hasRequired_hashClear$1)return _hashClear$1;hasRequired_hashClear$1=1;var _=require_nativeCreate$1();function v(){this.__data__=_?_(null):{},this.size=0}return _hashClear$1=v,_hashClear$1}var _hashDelete$1,hasRequired_hashDelete$1;function require_hashDelete$1(){if(hasRequired_hashDelete$1)return _hashDelete$1;hasRequired_hashDelete$1=1;function _(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S}return _hashDelete$1=_,_hashDelete$1}var _hashGet$1,hasRequired_hashGet$1;function require_hashGet$1(){if(hasRequired_hashGet$1)return _hashGet$1;hasRequired_hashGet$1=1;var _=require_nativeCreate$1(),v="__lodash_hash_undefined__",S=Object.prototype,R=S.hasOwnProperty;function T(A){var k=this.__data__;if(_){var M=k[A];return M===v?void 0:M}return R.call(k,A)?k[A]:void 0}return _hashGet$1=T,_hashGet$1}var _hashHas$1,hasRequired_hashHas$1;function require_hashHas$1(){if(hasRequired_hashHas$1)return _hashHas$1;hasRequired_hashHas$1=1;var _=require_nativeCreate$1(),v=Object.prototype,S=v.hasOwnProperty;function R(T){var A=this.__data__;return _?A[T]!==void 0:S.call(A,T)}return _hashHas$1=R,_hashHas$1}var _hashSet$1,hasRequired_hashSet$1;function require_hashSet$1(){if(hasRequired_hashSet$1)return _hashSet$1;hasRequired_hashSet$1=1;var _=require_nativeCreate$1(),v="__lodash_hash_undefined__";function S(R,T){var A=this.__data__;return this.size+=this.has(R)?0:1,A[R]=_&&T===void 0?v:T,this}return _hashSet$1=S,_hashSet$1}var _Hash$1,hasRequired_Hash$1;function require_Hash$1(){if(hasRequired_Hash$1)return _Hash$1;hasRequired_Hash$1=1;var _=require_hashClear$1(),v=require_hashDelete$1(),S=require_hashGet$1(),R=require_hashHas$1(),T=require_hashSet$1();function A(k){var M=-1,N=k==null?0:k.length;for(this.clear();++M<N;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_Hash$1=A,_Hash$1}var _listCacheClear$1,hasRequired_listCacheClear$1;function require_listCacheClear$1(){if(hasRequired_listCacheClear$1)return _listCacheClear$1;hasRequired_listCacheClear$1=1;function _(){this.__data__=[],this.size=0}return _listCacheClear$1=_,_listCacheClear$1}var eq_1$1,hasRequiredEq$1;function requireEq$1(){if(hasRequiredEq$1)return eq_1$1;hasRequiredEq$1=1;function _(v,S){return v===S||v!==v&&S!==S}return eq_1$1=_,eq_1$1}var _assocIndexOf$1,hasRequired_assocIndexOf$1;function require_assocIndexOf$1(){if(hasRequired_assocIndexOf$1)return _assocIndexOf$1;hasRequired_assocIndexOf$1=1;var _=requireEq$1();function v(S,R){for(var T=S.length;T--;)if(_(S[T][0],R))return T;return-1}return _assocIndexOf$1=v,_assocIndexOf$1}var _listCacheDelete$1,hasRequired_listCacheDelete$1;function require_listCacheDelete$1(){if(hasRequired_listCacheDelete$1)return _listCacheDelete$1;hasRequired_listCacheDelete$1=1;var _=require_assocIndexOf$1(),v=Array.prototype,S=v.splice;function R(T){var A=this.__data__,k=_(A,T);if(k<0)return!1;var M=A.length-1;return k==M?A.pop():S.call(A,k,1),--this.size,!0}return _listCacheDelete$1=R,_listCacheDelete$1}var _listCacheGet$1,hasRequired_listCacheGet$1;function require_listCacheGet$1(){if(hasRequired_listCacheGet$1)return _listCacheGet$1;hasRequired_listCacheGet$1=1;var _=require_assocIndexOf$1();function v(S){var R=this.__data__,T=_(R,S);return T<0?void 0:R[T][1]}return _listCacheGet$1=v,_listCacheGet$1}var _listCacheHas$1,hasRequired_listCacheHas$1;function require_listCacheHas$1(){if(hasRequired_listCacheHas$1)return _listCacheHas$1;hasRequired_listCacheHas$1=1;var _=require_assocIndexOf$1();function v(S){return _(this.__data__,S)>-1}return _listCacheHas$1=v,_listCacheHas$1}var _listCacheSet$1,hasRequired_listCacheSet$1;function require_listCacheSet$1(){if(hasRequired_listCacheSet$1)return _listCacheSet$1;hasRequired_listCacheSet$1=1;var _=require_assocIndexOf$1();function v(S,R){var T=this.__data__,A=_(T,S);return A<0?(++this.size,T.push([S,R])):T[A][1]=R,this}return _listCacheSet$1=v,_listCacheSet$1}var _ListCache$1,hasRequired_ListCache$1;function require_ListCache$1(){if(hasRequired_ListCache$1)return _ListCache$1;hasRequired_ListCache$1=1;var _=require_listCacheClear$1(),v=require_listCacheDelete$1(),S=require_listCacheGet$1(),R=require_listCacheHas$1(),T=require_listCacheSet$1();function A(k){var M=-1,N=k==null?0:k.length;for(this.clear();++M<N;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_ListCache$1=A,_ListCache$1}var _Map$1,hasRequired_Map$1;function require_Map$1(){if(hasRequired_Map$1)return _Map$1;hasRequired_Map$1=1;var _=require_getNative$1(),v=require_root$1(),S=_(v,"Map");return _Map$1=S,_Map$1}var _mapCacheClear$1,hasRequired_mapCacheClear$1;function require_mapCacheClear$1(){if(hasRequired_mapCacheClear$1)return _mapCacheClear$1;hasRequired_mapCacheClear$1=1;var _=require_Hash$1(),v=require_ListCache$1(),S=require_Map$1();function R(){this.size=0,this.__data__={hash:new _,map:new(S||v),string:new _}}return _mapCacheClear$1=R,_mapCacheClear$1}var _isKeyable$1,hasRequired_isKeyable$1;function require_isKeyable$1(){if(hasRequired_isKeyable$1)return _isKeyable$1;hasRequired_isKeyable$1=1;function _(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null}return _isKeyable$1=_,_isKeyable$1}var _getMapData$1,hasRequired_getMapData$1;function require_getMapData$1(){if(hasRequired_getMapData$1)return _getMapData$1;hasRequired_getMapData$1=1;var _=require_isKeyable$1();function v(S,R){var T=S.__data__;return _(R)?T[typeof R=="string"?"string":"hash"]:T.map}return _getMapData$1=v,_getMapData$1}var _mapCacheDelete$1,hasRequired_mapCacheDelete$1;function require_mapCacheDelete$1(){if(hasRequired_mapCacheDelete$1)return _mapCacheDelete$1;hasRequired_mapCacheDelete$1=1;var _=require_getMapData$1();function v(S){var R=_(this,S).delete(S);return this.size-=R?1:0,R}return _mapCacheDelete$1=v,_mapCacheDelete$1}var _mapCacheGet$1,hasRequired_mapCacheGet$1;function require_mapCacheGet$1(){if(hasRequired_mapCacheGet$1)return _mapCacheGet$1;hasRequired_mapCacheGet$1=1;var _=require_getMapData$1();function v(S){return _(this,S).get(S)}return _mapCacheGet$1=v,_mapCacheGet$1}var _mapCacheHas$1,hasRequired_mapCacheHas$1;function require_mapCacheHas$1(){if(hasRequired_mapCacheHas$1)return _mapCacheHas$1;hasRequired_mapCacheHas$1=1;var _=require_getMapData$1();function v(S){return _(this,S).has(S)}return _mapCacheHas$1=v,_mapCacheHas$1}var _mapCacheSet$1,hasRequired_mapCacheSet$1;function require_mapCacheSet$1(){if(hasRequired_mapCacheSet$1)return _mapCacheSet$1;hasRequired_mapCacheSet$1=1;var _=require_getMapData$1();function v(S,R){var T=_(this,S),A=T.size;return T.set(S,R),this.size+=T.size==A?0:1,this}return _mapCacheSet$1=v,_mapCacheSet$1}var _MapCache$1,hasRequired_MapCache$1;function require_MapCache$1(){if(hasRequired_MapCache$1)return _MapCache$1;hasRequired_MapCache$1=1;var _=require_mapCacheClear$1(),v=require_mapCacheDelete$1(),S=require_mapCacheGet$1(),R=require_mapCacheHas$1(),T=require_mapCacheSet$1();function A(k){var M=-1,N=k==null?0:k.length;for(this.clear();++M<N;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_MapCache$1=A,_MapCache$1}var memoize_1$1,hasRequiredMemoize$1;function requireMemoize$1(){if(hasRequiredMemoize$1)return memoize_1$1;hasRequiredMemoize$1=1;var _=require_MapCache$1(),v="Expected a function";function S(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(v);var A=function(){var k=arguments,M=T?T.apply(this,k):k[0],N=A.cache;if(N.has(M))return N.get(M);var D=R.apply(this,k);return A.cache=N.set(M,D)||N,D};return A.cache=new(S.Cache||_),A}return S.Cache=_,memoize_1$1=S,memoize_1$1}var _memoizeCapped$1,hasRequired_memoizeCapped$1;function require_memoizeCapped$1(){if(hasRequired_memoizeCapped$1)return _memoizeCapped$1;hasRequired_memoizeCapped$1=1;var _=requireMemoize$1(),v=500;function S(R){var T=_(R,function(k){return A.size===v&&A.clear(),k}),A=T.cache;return T}return _memoizeCapped$1=S,_memoizeCapped$1}var _stringToPath$1,hasRequired_stringToPath$1;function require_stringToPath$1(){if(hasRequired_stringToPath$1)return _stringToPath$1;hasRequired_stringToPath$1=1;var _=require_memoizeCapped$1(),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,R=_(function(T){var A=[];return T.charCodeAt(0)===46&&A.push(""),T.replace(v,function(k,M,N,D){A.push(N?D.replace(S,"$1"):M||k)}),A});return _stringToPath$1=R,_stringToPath$1}var _arrayMap$1,hasRequired_arrayMap$1;function require_arrayMap$1(){if(hasRequired_arrayMap$1)return _arrayMap$1;hasRequired_arrayMap$1=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=Array(T);++R<T;)A[R]=S(v[R],R,v);return A}return _arrayMap$1=_,_arrayMap$1}var _baseToString$1,hasRequired_baseToString$1;function require_baseToString$1(){if(hasRequired_baseToString$1)return _baseToString$1;hasRequired_baseToString$1=1;var _=require_Symbol$1(),v=require_arrayMap$1(),S=requireIsArray$1(),R=requireIsSymbol$1(),T=_?_.prototype:void 0,A=T?T.toString:void 0;function k(M){if(typeof M=="string")return M;if(S(M))return v(M,k)+"";if(R(M))return A?A.call(M):"";var N=M+"";return N=="0"&&1/M==-1/0?"-0":N}return _baseToString$1=k,_baseToString$1}var toString_1$1,hasRequiredToString$1;function requireToString$1(){if(hasRequiredToString$1)return toString_1$1;hasRequiredToString$1=1;var _=require_baseToString$1();function v(S){return S==null?"":_(S)}return toString_1$1=v,toString_1$1}var _castPath$1,hasRequired_castPath$1;function require_castPath$1(){if(hasRequired_castPath$1)return _castPath$1;hasRequired_castPath$1=1;var _=requireIsArray$1(),v=require_isKey$1(),S=require_stringToPath$1(),R=requireToString$1();function T(A,k){return _(A)?A:v(A,k)?[A]:S(R(A))}return _castPath$1=T,_castPath$1}var _toKey$1,hasRequired_toKey$1;function require_toKey$1(){if(hasRequired_toKey$1)return _toKey$1;hasRequired_toKey$1=1;var _=requireIsSymbol$1();function v(S){if(typeof S=="string"||_(S))return S;var R=S+"";return R=="0"&&1/S==-1/0?"-0":R}return _toKey$1=v,_toKey$1}var _baseGet$1,hasRequired_baseGet$1;function require_baseGet$1(){if(hasRequired_baseGet$1)return _baseGet$1;hasRequired_baseGet$1=1;var _=require_castPath$1(),v=require_toKey$1();function S(R,T){T=_(T,R);for(var A=0,k=T.length;R!=null&&A<k;)R=R[v(T[A++])];return A&&A==k?R:void 0}return _baseGet$1=S,_baseGet$1}var get_1$1,hasRequiredGet$1;function requireGet$1(){if(hasRequiredGet$1)return get_1$1;hasRequiredGet$1=1;var _=require_baseGet$1();function v(S,R,T){var A=S==null?void 0:_(S,R);return A===void 0?T:A}return get_1$1=v,get_1$1}var getExports=requireGet$1(),get=getDefaultExportFromCjs(getExports),_defineProperty$2,hasRequired_defineProperty$1;function require_defineProperty$1(){if(hasRequired_defineProperty$1)return _defineProperty$2;hasRequired_defineProperty$1=1;var _=require_getNative$1(),v=(function(){try{var S=_(Object,"defineProperty");return S({},"",{}),S}catch{}})();return _defineProperty$2=v,_defineProperty$2}var _baseAssignValue$1,hasRequired_baseAssignValue$1;function require_baseAssignValue$1(){if(hasRequired_baseAssignValue$1)return _baseAssignValue$1;hasRequired_baseAssignValue$1=1;var _=require_defineProperty$1();function v(S,R,T){R=="__proto__"&&_?_(S,R,{configurable:!0,enumerable:!0,value:T,writable:!0}):S[R]=T}return _baseAssignValue$1=v,_baseAssignValue$1}var _assignValue$1,hasRequired_assignValue$1;function require_assignValue$1(){if(hasRequired_assignValue$1)return _assignValue$1;hasRequired_assignValue$1=1;var _=require_baseAssignValue$1(),v=requireEq$1(),S=Object.prototype,R=S.hasOwnProperty;function T(A,k,M){var N=A[k];(!(R.call(A,k)&&v(N,M))||M===void 0&&!(k in A))&&_(A,k,M)}return _assignValue$1=T,_assignValue$1}var _isIndex$1,hasRequired_isIndex$1;function require_isIndex$1(){if(hasRequired_isIndex$1)return _isIndex$1;hasRequired_isIndex$1=1;var _=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function S(R,T){var A=typeof R;return T=T??_,!!T&&(A=="number"||A!="symbol"&&v.test(R))&&R>-1&&R%1==0&&R<T}return _isIndex$1=S,_isIndex$1}var _baseSet$1,hasRequired_baseSet$1;function require_baseSet$1(){if(hasRequired_baseSet$1)return _baseSet$1;hasRequired_baseSet$1=1;var _=require_assignValue$1(),v=require_castPath$1(),S=require_isIndex$1(),R=requireIsObject$1(),T=require_toKey$1();function A(k,M,N,D){if(!R(k))return k;M=v(M,k);for(var I=-1,q=M.length,B=q-1,z=k;z!=null&&++I<q;){var F=T(M[I]),V=N;if(F==="__proto__"||F==="constructor"||F==="prototype")return k;if(I!=B){var H=z[F];V=D?D(H,F,z):void 0,V===void 0&&(V=R(H)?H:S(M[I+1])?[]:{})}_(z,F,V),z=z[F]}return k}return _baseSet$1=A,_baseSet$1}var set_1,hasRequiredSet;function requireSet(){if(hasRequiredSet)return set_1;hasRequiredSet=1;var _=require_baseSet$1();function v(S,R,T){return S==null?S:_(S,R,T)}return set_1=v,set_1}var setExports=requireSet(),set=getDefaultExportFromCjs(setExports),_copyArray$1,hasRequired_copyArray$1;function require_copyArray$1(){if(hasRequired_copyArray$1)return _copyArray$1;hasRequired_copyArray$1=1;function _(v,S){var R=-1,T=v.length;for(S||(S=Array(T));++R<T;)S[R]=v[R];return S}return _copyArray$1=_,_copyArray$1}var toPath_1,hasRequiredToPath;function requireToPath(){if(hasRequiredToPath)return toPath_1;hasRequiredToPath=1;var _=require_arrayMap$1(),v=require_copyArray$1(),S=requireIsArray$1(),R=requireIsSymbol$1(),T=require_stringToPath$1(),A=require_toKey$1(),k=requireToString$1();function M(N){return S(N)?_(N,A):R(N)?[N]:v(T(k(N)))}return toPath_1=M,toPath_1}var toPathExports=requireToPath(),toPath=getDefaultExportFromCjs(toPathExports),define$2={data:function(v){var S={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(T){},beforeSet:function(T,A){},onSet:function(T){},canSet:function(T){return!0}};return v=extend({},S,v),function(T,A){var k=v,M=this,N=M.length!==void 0,D=N?M:[M],I=N?M[0]:M;if(string$1(T)){var q=T.indexOf(".")!==-1,B=q&&toPath(T);if(k.allowGetting&&A===void 0){var z;return I&&(k.beforeGet(I),B&&I._private[k.field][T]===void 0?z=get(I._private[k.field],B):z=I._private[k.field][T]),z}else if(k.allowSetting&&A!==void 0){var F=!k.immutableKeys[T];if(F){var V=_defineProperty$1({},T,A);k.beforeSet(M,V);for(var H=0,W=D.length;H<W;H++){var Y=D[H];k.canSet(Y)&&(B&&I._private[k.field][T]===void 0?set(Y._private[k.field],B,A):Y._private[k.field][T]=A)}k.updateStyle&&M.updateStyle(),k.onSet(M),k.settingTriggersEvent&&M[k.triggerFnName](k.settingEvent)}}}else if(k.allowSetting&&plainObject(T)){var Z=T,J,ne,oe=Object.keys(Z);k.beforeSet(M,Z);for(var te=0;te<oe.length;te++){J=oe[te],ne=Z[J];var se=!k.immutableKeys[J];if(se)for(var le=0;le<D.length;le++){var ue=D[le];k.canSet(ue)&&(ue._private[k.field][J]=ne)}}k.updateStyle&&M.updateStyle(),k.onSet(M),k.settingTriggersEvent&&M[k.triggerFnName](k.settingEvent)}else if(k.allowBinding&&fn$6(T)){var ce=T;M.on(k.bindingEvent,ce)}else if(k.allowGetting&&T===void 0){var ge;return I&&(k.beforeGet(I),ge=I._private[k.field]),ge}return M}},removeData:function(v){var S={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return v=extend({},S,v),function(T){var A=v,k=this,M=k.length!==void 0,N=M?k:[k];if(string$1(T)){for(var D=T.split(/\s+/),I=D.length,q=0;q<I;q++){var B=D[q];if(!emptyString(B)){var z=!A.immutableKeys[B];if(z)for(var F=0,V=N.length;F<V;F++)N[F]._private[A.field][B]=void 0}}A.triggerEvent&&k[A.triggerFnName](A.event)}else if(T===void 0){for(var H=0,W=N.length;H<W;H++)for(var Y=N[H]._private[A.field],Z=Object.keys(Y),J=0;J<Z.length;J++){var ne=Z[J],oe=!A.immutableKeys[ne];oe&&(Y[ne]=void 0)}A.triggerEvent&&k[A.triggerFnName](A.event)}return k}}},define$1={eventAliasesOn:function(v){var S=v;S.addListener=S.listen=S.bind=S.on,S.unlisten=S.unbind=S.off=S.removeListener,S.trigger=S.emit,S.pon=S.promiseOn=function(R,T){var A=this,k=Array.prototype.slice.call(arguments,0);return new Promise$1(function(M,N){var D=function(z){A.off.apply(A,q),M(z)},I=k.concat([D]),q=I.concat([]);A.on.apply(A,I)})}}},define={};[define$3,define$2,define$1].forEach(function(_){extend(define,_)});var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function(v){var S=this;if(v===void 0){var R=[];return S[0]._private.classes.forEach(function(F){return R.push(F)}),R}else array(v)||(v=(v||"").match(/\S+/g)||[]);for(var T=[],A=new Set$1(v),k=0;k<S.length;k++){for(var M=S[k],N=M._private,D=N.classes,I=!1,q=0;q<v.length;q++){var B=v[q],z=D.has(B);if(!z){I=!0;break}}I||(I=D.size!==v.length),I&&(N.classes=A,T.push(M))}return T.length>0&&this.spawn(T).updateStyle().emit("class"),S},addClass:function(v){return this.toggleClass(v,!0)},hasClass:function(v){var S=this[0];return S!=null&&S._private.classes.has(v)},toggleClass:function(v,S){array(v)||(v=v.match(/\S+/g)||[]);for(var R=this,T=S===void 0,A=[],k=0,M=R.length;k<M;k++)for(var N=R[k],D=N._private.classes,I=!1,q=0;q<v.length;q++){var B=v[q],z=D.has(B),F=!1;S||T&&!z?(D.add(B),F=!0):(!S||T&&z)&&(D.delete(B),F=!0),!I&&F&&(A.push(N),I=!0)}return A.length>0&&this.spawn(A).updateStyle().emit("class"),R},removeClass:function(v){return this.toggleClass(v,!1)},flashClass:function(v,S){var R=this;if(S==null)S=250;else if(S===0)return R;return R.addClass(v),setTimeout(function(){R.removeClass(v)},S),R}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:number$2,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+";tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+";tokens.value=tokens.string+"|"+tokens.number;tokens.id=tokens.variable;(function(){var _,v,S;for(_=tokens.comparatorOp.split("|"),S=0;S<_.length;S++)v=_[S],tokens.comparatorOp+="|@"+v;for(_=tokens.comparatorOp.split("|"),S=0;S<_.length;S++)v=_[S],!(v.indexOf("!")>=0)&&v!=="="&&(tokens.comparatorOp+="|\\!"+v)})();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(v){return v.selected()}},{selector:":unselected",matches:function(v){return!v.selected()}},{selector:":selectable",matches:function(v){return v.selectable()}},{selector:":unselectable",matches:function(v){return!v.selectable()}},{selector:":locked",matches:function(v){return v.locked()}},{selector:":unlocked",matches:function(v){return!v.locked()}},{selector:":visible",matches:function(v){return v.visible()}},{selector:":hidden",matches:function(v){return!v.visible()}},{selector:":transparent",matches:function(v){return v.transparent()}},{selector:":grabbed",matches:function(v){return v.grabbed()}},{selector:":free",matches:function(v){return!v.grabbed()}},{selector:":removed",matches:function(v){return v.removed()}},{selector:":inside",matches:function(v){return!v.removed()}},{selector:":grabbable",matches:function(v){return v.grabbable()}},{selector:":ungrabbable",matches:function(v){return!v.grabbable()}},{selector:":animated",matches:function(v){return v.animated()}},{selector:":unanimated",matches:function(v){return!v.animated()}},{selector:":parent",matches:function(v){return v.isParent()}},{selector:":childless",matches:function(v){return v.isChildless()}},{selector:":child",matches:function(v){return v.isChild()}},{selector:":orphan",matches:function(v){return v.isOrphan()}},{selector:":nonorphan",matches:function(v){return v.isChild()}},{selector:":compound",matches:function(v){return v.isNode()?v.isParent():v.source().isParent()||v.target().isParent()}},{selector:":loop",matches:function(v){return v.isLoop()}},{selector:":simple",matches:function(v){return v.isSimple()}},{selector:":active",matches:function(v){return v.active()}},{selector:":inactive",matches:function(v){return!v.active()}},{selector:":backgrounding",matches:function(v){return v.backgrounding()}},{selector:":nonbackgrounding",matches:function(v){return!v.backgrounding()}}].sort(function(_,v){return descending(_.selector,v.selector)}),lookup=(function(){for(var _={},v,S=0;S<stateSelectors.length;S++)v=stateSelectors[S],_[v.selector]=v.matches;return _})(),stateSelectorMatches=function(v,S){return lookup[v](S)},stateSelectorRegex="("+stateSelectors.map(function(_){return _.selector}).join("|")+")",cleanMetaChars=function(v){return v.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(S,R){return R})},replaceLastQuery=function(v,S,R){v[v.length-1]=R},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.GROUP,value:A==="*"?A:A+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.STATE,value:A})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.ID,value:cleanMetaChars(A)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.CLASS,value:cleanMetaChars(A)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(A)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,3),A=T[0],k=T[1],M=T[2],N=new RegExp("^"+tokens.string+"$").exec(M)!=null;N?M=M.substring(1,M.length-1):M=parseFloat(M),S.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(A),operator:k,value:M})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,2),A=T[0],k=T[1];S.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(k),operator:A})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(v,S,R){var T=_slicedToArray(R,3),A=T[0],k=T[1],M=T[2];S.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(A),operator:k,value:parseFloat(M)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(v,S){var R=v.currentSubject,T=v.edgeCount,A=v.compoundCount,k=v[v.length-1];R!=null&&(k.subject=R,v.currentSubject=null),k.edgeCount=T,k.compoundCount=A,v.edgeCount=0,v.compoundCount=0;var M=v[v.length++]=newQuery();return M}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=S,A=newQuery();return R.checks.push({type:Type.DIRECTED_EDGE,source:T,target:A}),replaceLastQuery(v,S,R),v.edgeCount++,A}else{var k=newQuery(),M=S,N=newQuery();return k.checks.push({type:Type.NODE_SOURCE,source:M,target:N}),replaceLastQuery(v,S,k),v.edgeCount++,N}}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=S,A=newQuery();return R.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[T,A]}),replaceLastQuery(v,S,R),v.edgeCount++,A}else{var k=newQuery(),M=S,N=newQuery();return k.checks.push({type:Type.NODE_NEIGHBOR,node:M,neighbor:N}),replaceLastQuery(v,S,k),N}}},{name:"child",separator:!0,regex:tokens.child,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=newQuery(),A=v[v.length-1];return R.checks.push({type:Type.CHILD,parent:A,child:T}),replaceLastQuery(v,S,R),v.compoundCount++,T}else if(v.currentSubject===S){var k=newQuery(),M=v[v.length-1],N=newQuery(),D=newQuery(),I=newQuery(),q=newQuery();return k.checks.push({type:Type.COMPOUND_SPLIT,left:M,right:N,subject:D}),D.checks=S.checks,S.checks=[{type:Type.TRUE}],q.checks.push({type:Type.TRUE}),N.checks.push({type:Type.PARENT,parent:q,child:I}),replaceLastQuery(v,M,k),v.currentSubject=D,v.compoundCount++,I}else{var B=newQuery(),z=newQuery(),F=[{type:Type.PARENT,parent:B,child:z}];return B.checks=S.checks,S.checks=F,v.compoundCount++,z}}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=newQuery(),A=v[v.length-1];return R.checks.push({type:Type.DESCENDANT,ancestor:A,descendant:T}),replaceLastQuery(v,S,R),v.compoundCount++,T}else if(v.currentSubject===S){var k=newQuery(),M=v[v.length-1],N=newQuery(),D=newQuery(),I=newQuery(),q=newQuery();return k.checks.push({type:Type.COMPOUND_SPLIT,left:M,right:N,subject:D}),D.checks=S.checks,S.checks=[{type:Type.TRUE}],q.checks.push({type:Type.TRUE}),N.checks.push({type:Type.ANCESTOR,ancestor:q,descendant:I}),replaceLastQuery(v,M,k),v.currentSubject=D,v.compoundCount++,I}else{var B=newQuery(),z=newQuery(),F=[{type:Type.ANCESTOR,ancestor:B,descendant:z}];return B.checks=S.checks,S.checks=F,v.compoundCount++,z}}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(v,S){if(v.currentSubject!=null&&v.currentSubject!==S)return warn("Redefinition of subject in selector `"+v.toString()+"`"),!1;v.currentSubject=S;var R=v[v.length-1],T=R.checks[0],A=T==null?null:T.type;A===Type.DIRECTED_EDGE?T.type=Type.NODE_TARGET:A===Type.UNDIRECTED_EDGE&&(T.type=Type.NODE_NEIGHBOR,T.node=T.nodes[1],T.neighbor=T.nodes[0],T.nodes=null)}}];exprs.forEach(function(_){return _.regexObj=new RegExp("^"+_.regex)});var consumeExpr=function(v){for(var S,R,T,A=0;A<exprs.length;A++){var k=exprs[A],M=k.name,N=v.match(k.regexObj);if(N!=null){R=N,S=k,T=M;var D=N[0];v=v.substring(D.length);break}}return{expr:S,match:R,name:T,remaining:v}},consumeWhitespace=function(v){var S=v.match(/^\s+/);if(S){var R=S[0];v=v.substring(R.length)}return v},parse=function(v){var S=this,R=S.inputText=v,T=S[0]=newQuery();for(S.length=1,R=consumeWhitespace(R);;){var A=consumeExpr(R);if(A.expr==null)return warn("The selector `"+v+"`is invalid"),!1;var k=A.match.slice(1),M=A.expr.populate(S,T,k);if(M===!1)return!1;if(M!=null&&(T=M),R=A.remaining,R.match(/^\s*$/))break}var N=S[S.length-1];S.currentSubject!=null&&(N.subject=S.currentSubject),N.edgeCount=S.edgeCount,N.compoundCount=S.compoundCount;for(var D=0;D<S.length;D++){var I=S[D];if(I.compoundCount>0&&I.edgeCount>0)return warn("The selector `"+v+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(I.edgeCount>1)return warn("The selector `"+v+"` is invalid because it uses multiple edge selectors"),!1;I.edgeCount===1&&warn("The selector `"+v+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(this.toStringCache!=null)return this.toStringCache;for(var v=function(I){return I??""},S=function(I){return string$1(I)?'"'+I+'"':v(I)},R=function(I){return" "+I+" "},T=function(I,q){var B=I.type,z=I.value;switch(B){case Type.GROUP:{var F=v(z);return F.substring(0,F.length-1)}case Type.DATA_COMPARE:{var V=I.field,H=I.operator;return"["+V+R(v(H))+S(z)+"]"}case Type.DATA_BOOL:{var W=I.operator,Y=I.field;return"["+v(W)+Y+"]"}case Type.DATA_EXIST:{var Z=I.field;return"["+Z+"]"}case Type.META_COMPARE:{var J=I.operator,ne=I.field;return"[["+ne+R(v(J))+S(z)+"]]"}case Type.STATE:return z;case Type.ID:return"#"+z;case Type.CLASS:return"."+z;case Type.PARENT:case Type.CHILD:return A(I.parent,q)+R(">")+A(I.child,q);case Type.ANCESTOR:case Type.DESCENDANT:return A(I.ancestor,q)+" "+A(I.descendant,q);case Type.COMPOUND_SPLIT:{var oe=A(I.left,q),te=A(I.subject,q),se=A(I.right,q);return oe+(oe.length>0?" ":"")+te+se}case Type.TRUE:return""}},A=function(I,q){return I.checks.reduce(function(B,z,F){return B+(q===I&&F===0?"$":"")+T(z,q)},"")},k="",M=0;M<this.length;M++){var N=this[M];k+=A(N,N.subject),this.length>1&&M<this.length-1&&(k+=", ")}return this.toStringCache=k,k},parse$1={parse,toString},valCmp=function(v,S,R){var T,A=string$1(v),k=number$1(v),M=string$1(R),N,D,I=!1,q=!1,B=!1;switch(S.indexOf("!")>=0&&(S=S.replace("!",""),q=!0),S.indexOf("@")>=0&&(S=S.replace("@",""),I=!0),(A||M||I)&&(N=!A&&!k?"":""+v,D=""+R),I&&(v=N=N.toLowerCase(),R=D=D.toLowerCase()),S){case"*=":T=N.indexOf(D)>=0;break;case"$=":T=N.indexOf(D,N.length-D.length)>=0;break;case"^=":T=N.indexOf(D)===0;break;case"=":T=v===R;break;case">":B=!0,T=v>R;break;case">=":B=!0,T=v>=R;break;case"<":B=!0,T=v<R;break;case"<=":B=!0,T=v<=R;break;default:T=!1;break}return q&&(v!=null||!B)&&(T=!T),T},boolCmp=function(v,S){switch(S){case"?":return!!v;case"!":return!v;case"^":return v===void 0}},existCmp=function(v){return v!==void 0},data$1=function(v,S){return v.data(S)},meta$1=function(v,S){return v[S]()},match=[],matches$1=function(v,S){return v.checks.every(function(R){return match[R.type](R,S)})};match[Type.GROUP]=function(_,v){var S=_.value;return S==="*"||S===v.group()};match[Type.STATE]=function(_,v){var S=_.value;return stateSelectorMatches(S,v)};match[Type.ID]=function(_,v){var S=_.value;return v.id()===S};match[Type.CLASS]=function(_,v){var S=_.value;return v.hasClass(S)};match[Type.META_COMPARE]=function(_,v){var S=_.field,R=_.operator,T=_.value;return valCmp(meta$1(v,S),R,T)};match[Type.DATA_COMPARE]=function(_,v){var S=_.field,R=_.operator,T=_.value;return valCmp(data$1(v,S),R,T)};match[Type.DATA_BOOL]=function(_,v){var S=_.field,R=_.operator;return boolCmp(data$1(v,S),R)};match[Type.DATA_EXIST]=function(_,v){var S=_.field;return _.operator,existCmp(data$1(v,S))};match[Type.UNDIRECTED_EDGE]=function(_,v){var S=_.nodes[0],R=_.nodes[1],T=v.source(),A=v.target();return matches$1(S,T)&&matches$1(R,A)||matches$1(R,T)&&matches$1(S,A)};match[Type.NODE_NEIGHBOR]=function(_,v){return matches$1(_.node,v)&&v.neighborhood().some(function(S){return S.isNode()&&matches$1(_.neighbor,S)})};match[Type.DIRECTED_EDGE]=function(_,v){return matches$1(_.source,v.source())&&matches$1(_.target,v.target())};match[Type.NODE_SOURCE]=function(_,v){return matches$1(_.source,v)&&v.outgoers().some(function(S){return S.isNode()&&matches$1(_.target,S)})};match[Type.NODE_TARGET]=function(_,v){return matches$1(_.target,v)&&v.incomers().some(function(S){return S.isNode()&&matches$1(_.source,S)})};match[Type.CHILD]=function(_,v){return matches$1(_.child,v)&&matches$1(_.parent,v.parent())};match[Type.PARENT]=function(_,v){return matches$1(_.parent,v)&&v.children().some(function(S){return matches$1(_.child,S)})};match[Type.DESCENDANT]=function(_,v){return matches$1(_.descendant,v)&&v.ancestors().some(function(S){return matches$1(_.ancestor,S)})};match[Type.ANCESTOR]=function(_,v){return matches$1(_.ancestor,v)&&v.descendants().some(function(S){return matches$1(_.descendant,S)})};match[Type.COMPOUND_SPLIT]=function(_,v){return matches$1(_.subject,v)&&matches$1(_.left,v)&&matches$1(_.right,v)};match[Type.TRUE]=function(){return!0};match[Type.COLLECTION]=function(_,v){var S=_.value;return S.has(v)};match[Type.FILTER]=function(_,v){var S=_.value;return S(v)};var filter=function(v){var S=this;if(S.length===1&&S[0].checks.length===1&&S[0].checks[0].type===Type.ID)return v.getElementById(S[0].checks[0].value).collection();var R=function(A){for(var k=0;k<S.length;k++){var M=S[k];if(matches$1(M,A))return!0}return!1};return S.text()==null&&(R=function(){return!0}),v.filter(R)},matches=function(v){for(var S=this,R=0;R<S.length;R++){var T=S[R];if(matches$1(T,v))return!0}return!1},matching={matches,filter},Selector=function(v){this.inputText=v,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,v==null||string$1(v)&&v.match(/^\s*$/)||(elementOrCollection(v)?this.addQuery({checks:[{type:Type.COLLECTION,value:v.collection()}]}):fn$6(v)?this.addQuery({checks:[{type:Type.FILTER,value:v}]}):string$1(v)?this.parse(v)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach(function(_){return extend(selfn,_)});selfn.text=function(){return this.inputText};selfn.size=function(){return this.length};selfn.eq=function(_){return this[_]};selfn.sameText=function(_){return!this.invalid&&!_.invalid&&this.text()===_.text()};selfn.addQuery=function(_){this[this.length++]=_};selfn.selector=selfn.toString;var elesfn$g={allAre:function(v){var S=new Selector(v);return this.every(function(R){return S.matches(R)})},is:function(v){var S=new Selector(v);return this.some(function(R){return S.matches(R)})},some:function(v,S){for(var R=0;R<this.length;R++){var T=S?v.apply(S,[this[R],R,this]):v(this[R],R,this);if(T)return!0}return!1},every:function(v,S){for(var R=0;R<this.length;R++){var T=S?v.apply(S,[this[R],R,this]):v(this[R],R,this);if(!T)return!1}return!0},same:function(v){if(this===v)return!0;v=this.cy().collection(v);var S=this.length,R=v.length;return S!==R?!1:S===1?this[0]===v[0]:this.every(function(T){return v.hasElementWithId(T.id())})},anySame:function(v){return v=this.cy().collection(v),this.some(function(S){return v.hasElementWithId(S.id())})},allAreNeighbors:function(v){v=this.cy().collection(v);var S=this.neighborhood();return v.every(function(R){return S.hasElementWithId(R.id())})},contains:function(v){v=this.cy().collection(v);var S=this;return v.every(function(R){return S.hasElementWithId(R.id())})}};elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors;elesfn$g.has=elesfn$g.contains;elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var cache=function(v,S){return function(T,A,k,M){var N=T,D=this,I;if(N==null?I="":elementOrCollection(N)&&N.length===1&&(I=N.id()),D.length===1&&I){var q=D[0]._private,B=q.traversalCache=q.traversalCache||{},z=B[S]=B[S]||[],F=hashString(I),V=z[F];return V||(z[F]=v.call(D,T,A,k,M))}else return v.call(D,T,A,k,M)}},elesfn$f={parent:function(v){var S=[];if(this.length===1){var R=this[0]._private.parent;if(R)return R}for(var T=0;T<this.length;T++){var A=this[T],k=A._private.parent;k&&S.push(k)}return this.spawn(S,!0).filter(v)},parents:function(v){for(var S=[],R=this.parent();R.nonempty();){for(var T=0;T<R.length;T++){var A=R[T];S.push(A)}R=R.parent()}return this.spawn(S,!0).filter(v)},commonAncestors:function(v){for(var S,R=0;R<this.length;R++){var T=this[R],A=T.parents();S=S||A,S=S.intersect(A)}return S.filter(v)},orphans:function(v){return this.stdFilter(function(S){return S.isOrphan()}).filter(v)},nonorphans:function(v){return this.stdFilter(function(S){return S.isChild()}).filter(v)},children:cache(function(_){for(var v=[],S=0;S<this.length;S++)for(var R=this[S],T=R._private.children,A=0;A<T.length;A++)v.push(T[A]);return this.spawn(v,!0).filter(_)},"children"),siblings:function(v){return this.parent().children().not(this).filter(v)},isParent:function(){var v=this[0];if(v)return v.isNode()&&v._private.children.length!==0},isChildless:function(){var v=this[0];if(v)return v.isNode()&&v._private.children.length===0},isChild:function(){var v=this[0];if(v)return v.isNode()&&v._private.parent!=null},isOrphan:function(){var v=this[0];if(v)return v.isNode()&&v._private.parent==null},descendants:function(v){var S=[];function R(T){for(var A=0;A<T.length;A++){var k=T[A];S.push(k),k.children().nonempty()&&R(k.children())}}return R(this.children()),this.spawn(S,!0).filter(v)}};function forEachCompound(_,v,S,R){for(var T=[],A=new Set$1,k=_.cy(),M=k.hasCompoundNodes(),N=0;N<_.length;N++){var D=_[N];S?T.push(D):M&&R(T,A,D)}for(;T.length>0;){var I=T.shift();v(I),A.add(I.id()),M&&R(T,A,I)}return _}function addChildren(_,v,S){if(S.isParent())for(var R=S._private.children,T=0;T<R.length;T++){var A=R[T];v.has(A.id())||_.push(A)}}elesfn$f.forEachDown=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addChildren)};function addParent(_,v,S){if(S.isChild()){var R=S._private.parent;v.has(R.id())||_.push(R)}}elesfn$f.forEachUp=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addParent)};function addParentAndChildren(_,v,S){addParent(_,v,S),addChildren(_,v,S)}elesfn$f.forEachUpAndDown=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addParentAndChildren)};elesfn$f.ancestors=elesfn$f.parents;var fn$5,elesfn$e;fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var v=this[0];if(v)return v._private.data.id}};fn$5.attr=fn$5.data;fn$5.removeAttr=fn$5.removeData;var data=elesfn$e,elesfn$d={};function defineDegreeFunction(_){return function(v){var S=this;if(v===void 0&&(v=!0),S.length!==0)if(S.isNode()&&!S.removed()){for(var R=0,T=S[0],A=T._private.edges,k=0;k<A.length;k++){var M=A[k];!v&&M.isLoop()||(R+=_(T,M))}return R}else return}}extend(elesfn$d,{degree:defineDegreeFunction(function(_,v){return v.source().same(v.target())?2:1}),indegree:defineDegreeFunction(function(_,v){return v.target().same(_)?1:0}),outdegree:defineDegreeFunction(function(_,v){return v.source().same(_)?1:0})});function defineDegreeBoundsFunction(_,v){return function(S){for(var R,T=this.nodes(),A=0;A<T.length;A++){var k=T[A],M=k[_](S);M!==void 0&&(R===void 0||v(M,R))&&(R=M)}return R}}extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",function(_,v){return _<v}),maxDegree:defineDegreeBoundsFunction("degree",function(_,v){return _>v}),minIndegree:defineDegreeBoundsFunction("indegree",function(_,v){return _<v}),maxIndegree:defineDegreeBoundsFunction("indegree",function(_,v){return _>v}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(_,v){return _<v}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(_,v){return _>v})});extend(elesfn$d,{totalDegree:function(v){for(var S=0,R=this.nodes(),T=0;T<R.length;T++)S+=R[T].degree(v);return S}});var fn$4,elesfn$c,beforePositionSet=function(v,S,R){for(var T=0;T<v.length;T++){var A=v[T];if(!A.locked()){var k=A._private.position,M={x:S.x!=null?S.x-k.x:0,y:S.y!=null?S.y-k.y:0};A.isParent()&&!(M.x===0&&M.y===0)&&A.children().shift(M,R),A.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(v){v.updateCompoundBounds()},beforeSet:function(v,S){beforePositionSet(v,S,!1)},onSet:function(v){v.dirtyCompoundBoundsCache()},canSet:function(v){return!v.locked()}};fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(v,S){beforePositionSet(v,S,!0)},onSet:function(v){v.dirtyCompoundBoundsCache()}})),positions:function(v,S){if(plainObject(v))S?this.silentPosition(v):this.position(v);else if(fn$6(v)){var R=v,T=this.cy();T.startBatch();for(var A=0;A<this.length;A++){var k=this[A],M=void 0;(M=R(k,A))&&(S?k.silentPosition(M):k.position(M))}T.endBatch()}return this},silentPositions:function(v){return this.positions(v,!0)},shift:function(v,S,R){var T;if(plainObject(v)?(T={x:number$1(v.x)?v.x:0,y:number$1(v.y)?v.y:0},R=S):string$1(v)&&number$1(S)&&(T={x:0,y:0},T[v]=S),T!=null){var A=this.cy();A.startBatch();for(var k=0;k<this.length;k++){var M=this[k];if(!(A.hasCompoundNodes()&&M.isChild()&&M.ancestors().anySame(this))){var N=M.position(),D={x:N.x+T.x,y:N.y+T.y};R?M.silentPosition(D):M.position(D)}}A.endBatch()}return this},silentShift:function(v,S){return plainObject(v)?this.shift(v,!0):string$1(v)&&number$1(S)&&this.shift(v,S,!0),this},renderedPosition:function(v,S){var R=this[0],T=this.cy(),A=T.zoom(),k=T.pan(),M=plainObject(v)?v:void 0,N=M!==void 0||S!==void 0&&string$1(v);if(R&&R.isNode())if(N)for(var D=0;D<this.length;D++){var I=this[D];S!==void 0?I.position(v,(S-k[v])/A):M!==void 0&&I.position(renderedToModelPosition(M,A,k))}else{var q=R.position();return M=modelToRenderedPosition$1(q,A,k),v===void 0?M:M[v]}else if(!N)return;return this},relativePosition:function(v,S){var R=this[0],T=this.cy(),A=plainObject(v)?v:void 0,k=A!==void 0||S!==void 0&&string$1(v),M=T.hasCompoundNodes();if(R&&R.isNode())if(k)for(var N=0;N<this.length;N++){var D=this[N],I=M?D.parent():null,q=I&&I.length>0,B=q;q&&(I=I[0]);var z=B?I.position():{x:0,y:0};S!==void 0?D.position(v,S+z[v]):A!==void 0&&D.position({x:A.x+z.x,y:A.y+z.y})}else{var F=R.position(),V=M?R.parent():null,H=V&&V.length>0,W=H;H&&(V=V[0]);var Y=W?V.position():{x:0,y:0};return A={x:F.x-Y.x,y:F.y-Y.y},v===void 0?A:A[v]}else if(!k)return;return this}};fn$4.modelPosition=fn$4.point=fn$4.position;fn$4.modelPositions=fn$4.points=fn$4.positions;fn$4.renderedPoint=fn$4.renderedPosition;fn$4.relativePoint=fn$4.relativePosition;var position=elesfn$c,fn$3,elesfn$b;fn$3=elesfn$b={};elesfn$b.renderedBoundingBox=function(_){var v=this.boundingBox(_),S=this.cy(),R=S.zoom(),T=S.pan(),A=v.x1*R+T.x,k=v.x2*R+T.x,M=v.y1*R+T.y,N=v.y2*R+T.y;return{x1:A,x2:k,y1:M,y2:N,w:k-A,h:N-M}};elesfn$b.dirtyCompoundBoundsCache=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.cy();return!v.styleEnabled()||!v.hasCompoundNodes()?this:(this.forEachUp(function(S){if(S.isParent()){var R=S._private;R.compoundBoundsClean=!1,R.bbCache=null,_||S.emitAndNotify("bounds")}}),this)};elesfn$b.updateCompoundBounds=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.cy();if(!v.styleEnabled()||!v.hasCompoundNodes())return this;if(!_&&v.batching())return this;function S(k){if(!k.isParent())return;var M=k._private,N=k.children(),D=k.pstyle("compound-sizing-wrt-labels").value==="include",I={width:{val:k.pstyle("min-width").pfValue,left:k.pstyle("min-width-bias-left"),right:k.pstyle("min-width-bias-right")},height:{val:k.pstyle("min-height").pfValue,top:k.pstyle("min-height-bias-top"),bottom:k.pstyle("min-height-bias-bottom")}},q=N.boundingBox({includeLabels:D,includeOverlays:!1,useCache:!1}),B=M.position;(q.w===0||q.h===0)&&(q={w:k.pstyle("width").pfValue,h:k.pstyle("height").pfValue},q.x1=B.x-q.w/2,q.x2=B.x+q.w/2,q.y1=B.y-q.h/2,q.y2=B.y+q.h/2);function z(le,ue,ce){var ge=0,me=0,Ee=ue+ce;return le>0&&Ee>0&&(ge=ue/Ee*le,me=ce/Ee*le),{biasDiff:ge,biasComplementDiff:me}}function F(le,ue,ce,ge){if(ce.units==="%")switch(ge){case"width":return le>0?ce.pfValue*le:0;case"height":return ue>0?ce.pfValue*ue:0;case"average":return le>0&&ue>0?ce.pfValue*(le+ue)/2:0;case"min":return le>0&&ue>0?le>ue?ce.pfValue*ue:ce.pfValue*le:0;case"max":return le>0&&ue>0?le>ue?ce.pfValue*le:ce.pfValue*ue:0;default:return 0}else return ce.units==="px"?ce.pfValue:0}var V=I.width.left.value;I.width.left.units==="px"&&I.width.val>0&&(V=V*100/I.width.val);var H=I.width.right.value;I.width.right.units==="px"&&I.width.val>0&&(H=H*100/I.width.val);var W=I.height.top.value;I.height.top.units==="px"&&I.height.val>0&&(W=W*100/I.height.val);var Y=I.height.bottom.value;I.height.bottom.units==="px"&&I.height.val>0&&(Y=Y*100/I.height.val);var Z=z(I.width.val-q.w,V,H),J=Z.biasDiff,ne=Z.biasComplementDiff,oe=z(I.height.val-q.h,W,Y),te=oe.biasDiff,se=oe.biasComplementDiff;M.autoPadding=F(q.w,q.h,k.pstyle("padding"),k.pstyle("padding-relative-to").value),M.autoWidth=Math.max(q.w,I.width.val),B.x=(-J+q.x1+q.x2+ne)/2,M.autoHeight=Math.max(q.h,I.height.val),B.y=(-te+q.y1+q.y2+se)/2}for(var R=0;R<this.length;R++){var T=this[R],A=T._private;(!A.compoundBoundsClean||_)&&(S(T),v.batching()||(A.compoundBoundsClean=!0))}return this};var noninf=function(v){return v===1/0||v===-1/0?0:v},updateBounds=function(v,S,R,T,A){T-S===0||A-R===0||S==null||R==null||T==null||A==null||(v.x1=S<v.x1?S:v.x1,v.x2=T>v.x2?T:v.x2,v.y1=R<v.y1?R:v.y1,v.y2=A>v.y2?A:v.y2,v.w=v.x2-v.x1,v.h=v.y2-v.y1)},updateBoundsFromBox=function(v,S){return S==null?v:updateBounds(v,S.x1,S.y1,S.x2,S.y2)},prefixedProperty=function(v,S,R){return getPrefixedProperty(v,S,R)},updateBoundsFromArrow=function(v,S,R){if(!S.cy().headless()){var T=S._private,A=T.rstyle,k=A.arrowWidth/2,M=S.pstyle(R+"-arrow-shape").value,N,D;if(M!=="none"){R==="source"?(N=A.srcX,D=A.srcY):R==="target"?(N=A.tgtX,D=A.tgtY):(N=A.midX,D=A.midY);var I=T.arrowBounds=T.arrowBounds||{},q=I[R]=I[R]||{};q.x1=N-k,q.y1=D-k,q.x2=N+k,q.y2=D+k,q.w=q.x2-q.x1,q.h=q.y2-q.y1,expandBoundingBox(q,1),updateBounds(v,q.x1,q.y1,q.x2,q.y2)}}},updateBoundsFromLabel=function(v,S,R){if(!S.cy().headless()){var T;R?T=R+"-":T="";var A=S._private,k=A.rstyle,M=S.pstyle(T+"label").strValue;if(M){var N=S.pstyle("text-halign"),D=S.pstyle("text-valign"),I=prefixedProperty(k,"labelWidth",R),q=prefixedProperty(k,"labelHeight",R),B=prefixedProperty(k,"labelX",R),z=prefixedProperty(k,"labelY",R),F=S.pstyle(T+"text-margin-x").pfValue,V=S.pstyle(T+"text-margin-y").pfValue,H=S.isEdge(),W=S.pstyle(T+"text-rotation"),Y=S.pstyle("text-outline-width").pfValue,Z=S.pstyle("text-border-width").pfValue,J=Z/2,ne=S.pstyle("text-background-padding").pfValue,oe=2,te=q,se=I,le=se/2,ue=te/2,ce,ge,me,Ee;if(H)ce=B-le,ge=B+le,me=z-ue,Ee=z+ue;else{switch(N.value){case"left":ce=B-se,ge=B;break;case"center":ce=B-le,ge=B+le;break;case"right":ce=B,ge=B+se;break}switch(D.value){case"top":me=z-te,Ee=z;break;case"center":me=z-ue,Ee=z+ue;break;case"bottom":me=z,Ee=z+te;break}}var _e=F-Math.max(Y,J)-ne-oe,ye=F+Math.max(Y,J)+ne+oe,be=V-Math.max(Y,J)-ne-oe,Se=V+Math.max(Y,J)+ne+oe;ce+=_e,ge+=ye,me+=be,Ee+=Se;var De=R||"main",xe=A.labelBounds,pe=xe[De]=xe[De]||{};pe.x1=ce,pe.y1=me,pe.x2=ge,pe.y2=Ee,pe.w=ge-ce,pe.h=Ee-me,pe.leftPad=_e,pe.rightPad=ye,pe.topPad=be,pe.botPad=Se;var we=H&&W.strValue==="autorotate",Oe=W.pfValue!=null&&W.pfValue!==0;if(we||Oe){var Ce=we?prefixedProperty(A.rstyle,"labelAngle",R):W.pfValue,Pe=Math.cos(Ce),Ne=Math.sin(Ce),Te=(ce+ge)/2,ze=(me+Ee)/2;if(!H){switch(N.value){case"left":Te=ge;break;case"right":Te=ce;break}switch(D.value){case"top":ze=Ee;break;case"bottom":ze=me;break}}var Fe=function(yt,Ze){return yt=yt-Te,Ze=Ze-ze,{x:yt*Pe-Ze*Ne+Te,y:yt*Ne+Ze*Pe+ze}},Ie=Fe(ce,me),Le=Fe(ce,Ee),$e=Fe(ge,me),qe=Fe(ge,Ee);ce=Math.min(Ie.x,Le.x,$e.x,qe.x),ge=Math.max(Ie.x,Le.x,$e.x,qe.x),me=Math.min(Ie.y,Le.y,$e.y,qe.y),Ee=Math.max(Ie.y,Le.y,$e.y,qe.y)}var at=De+"Rot",lt=xe[at]=xe[at]||{};lt.x1=ce,lt.y1=me,lt.x2=ge,lt.y2=Ee,lt.w=ge-ce,lt.h=Ee-me,updateBounds(v,ce,me,ge,Ee),updateBounds(A.labelBounds.all,ce,me,ge,Ee)}return v}},updateBoundsFromOutline=function(v,S){if(!S.cy().headless()){var R=S.pstyle("outline-opacity").value,T=S.pstyle("outline-width").value,A=S.pstyle("outline-offset").value,k=T+A;updateBoundsFromMiter(v,S,R,k,"outside",k/2)}},updateBoundsFromMiter=function(v,S,R,T,A,k){if(!(R===0||T<=0||A==="inside")){var M=S.cy(),N=S.pstyle("shape").value,D=M.renderer().nodeShapes[N],I=S.position(),q=I.x,B=I.y,z=S.width(),F=S.height();if(D.hasMiterBounds){A==="center"&&(T/=2);var V=D.miterBounds(q,B,z,F,T);updateBoundsFromBox(v,V)}else k!=null&&k>0&&expandBoundingBoxSides(v,[k,k,k,k])}},updateBoundsFromMiterBorder=function(v,S){if(!S.cy().headless()){var R=S.pstyle("border-opacity").value,T=S.pstyle("border-width").pfValue,A=S.pstyle("border-position").value;updateBoundsFromMiter(v,S,R,T,A)}},boundingBoxImpl=function(v,S){var R=v._private.cy,T=R.styleEnabled(),A=R.headless(),k=makeBoundingBox(),M=v._private,N=v.isNode(),D=v.isEdge(),I,q,B,z,F,V,H=M.rstyle,W=N&&T?v.pstyle("bounds-expansion").pfValue:[0],Y=function(vt){return vt.pstyle("display").value!=="none"},Z=!T||Y(v)&&(!D||Y(v.source())&&Y(v.target()));if(Z){var J=0,ne=0;T&&S.includeOverlays&&(J=v.pstyle("overlay-opacity").value,J!==0&&(ne=v.pstyle("overlay-padding").value));var oe=0,te=0;T&&S.includeUnderlays&&(oe=v.pstyle("underlay-opacity").value,oe!==0&&(te=v.pstyle("underlay-padding").value));var se=Math.max(ne,te),le=0,ue=0;if(T&&(le=v.pstyle("width").pfValue,ue=le/2),N&&S.includeNodes){var ce=v.position();F=ce.x,V=ce.y;var ge=v.outerWidth(),me=ge/2,Ee=v.outerHeight(),_e=Ee/2;I=F-me,q=F+me,B=V-_e,z=V+_e,updateBounds(k,I,B,q,z),T&&updateBoundsFromOutline(k,v),T&&S.includeOutlines&&!A&&updateBoundsFromOutline(k,v),T&&updateBoundsFromMiterBorder(k,v)}else if(D&&S.includeEdges)if(T&&!A){var ye=v.pstyle("curve-style").strValue;if(I=Math.min(H.srcX,H.midX,H.tgtX),q=Math.max(H.srcX,H.midX,H.tgtX),B=Math.min(H.srcY,H.midY,H.tgtY),z=Math.max(H.srcY,H.midY,H.tgtY),I-=ue,q+=ue,B-=ue,z+=ue,updateBounds(k,I,B,q,z),ye==="haystack"){var be=H.haystackPts;if(be&&be.length===2){if(I=be[0].x,B=be[0].y,q=be[1].x,z=be[1].y,I>q){var Se=I;I=q,q=Se}if(B>z){var De=B;B=z,z=De}updateBounds(k,I-ue,B-ue,q+ue,z+ue)}}else if(ye==="bezier"||ye==="unbundled-bezier"||endsWith(ye,"segments")||endsWith(ye,"taxi")){var xe;switch(ye){case"bezier":case"unbundled-bezier":xe=H.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":xe=H.linePts;break}if(xe!=null)for(var pe=0;pe<xe.length;pe++){var we=xe[pe];I=we.x-ue,q=we.x+ue,B=we.y-ue,z=we.y+ue,updateBounds(k,I,B,q,z)}}}else{var Oe=v.source(),Ce=Oe.position(),Pe=v.target(),Ne=Pe.position();if(I=Ce.x,q=Ne.x,B=Ce.y,z=Ne.y,I>q){var Te=I;I=q,q=Te}if(B>z){var ze=B;B=z,z=ze}I-=ue,q+=ue,B-=ue,z+=ue,updateBounds(k,I,B,q,z)}if(T&&S.includeEdges&&D&&(updateBoundsFromArrow(k,v,"mid-source"),updateBoundsFromArrow(k,v,"mid-target"),updateBoundsFromArrow(k,v,"source"),updateBoundsFromArrow(k,v,"target")),T){var Fe=v.pstyle("ghost").value==="yes";if(Fe){var Ie=v.pstyle("ghost-offset-x").pfValue,Le=v.pstyle("ghost-offset-y").pfValue;updateBounds(k,k.x1+Ie,k.y1+Le,k.x2+Ie,k.y2+Le)}}var $e=M.bodyBounds=M.bodyBounds||{};assignBoundingBox($e,k),expandBoundingBoxSides($e,W),expandBoundingBox($e,1),T&&(I=k.x1,q=k.x2,B=k.y1,z=k.y2,updateBounds(k,I-se,B-se,q+se,z+se));var qe=M.overlayBounds=M.overlayBounds||{};assignBoundingBox(qe,k),expandBoundingBoxSides(qe,W),expandBoundingBox(qe,1);var at=M.labelBounds=M.labelBounds||{};at.all!=null?clearBoundingBox(at.all):at.all=makeBoundingBox(),T&&S.includeLabels&&(S.includeMainLabels&&updateBoundsFromLabel(k,v,null),D&&(S.includeSourceLabels&&updateBoundsFromLabel(k,v,"source"),S.includeTargetLabels&&updateBoundsFromLabel(k,v,"target")))}return k.x1=noninf(k.x1),k.y1=noninf(k.y1),k.x2=noninf(k.x2),k.y2=noninf(k.y2),k.w=noninf(k.x2-k.x1),k.h=noninf(k.y2-k.y1),k.w>0&&k.h>0&&Z&&(expandBoundingBoxSides(k,W),expandBoundingBox(k,1)),k},getKey=function(v){var S=0,R=function(k){return(k?1:0)<<S++},T=0;return T+=R(v.incudeNodes),T+=R(v.includeEdges),T+=R(v.includeLabels),T+=R(v.includeMainLabels),T+=R(v.includeSourceLabels),T+=R(v.includeTargetLabels),T+=R(v.includeOverlays),T+=R(v.includeOutlines),T},getBoundingBoxPosKey=function(v){var S=function(M){return Math.round(M)};if(v.isEdge()){var R=v.source().position(),T=v.target().position();return hashIntsArray([S(R.x),S(R.y),S(T.x),S(T.y)])}else{var A=v.position();return hashIntsArray([S(A.x),S(A.y)])}},cachedBoundingBoxImpl=function(v,S){var R=v._private,T,A=v.isEdge(),k=S==null?defBbOptsKey:getKey(S),M=k===defBbOptsKey;if(R.bbCache==null?(T=boundingBoxImpl(v,defBbOpts),R.bbCache=T,R.bbCachePosKey=getBoundingBoxPosKey(v)):T=R.bbCache,!M){var N=v.isNode();T=makeBoundingBox(),(S.includeNodes&&N||S.includeEdges&&!N)&&(S.includeOverlays?updateBoundsFromBox(T,R.overlayBounds):updateBoundsFromBox(T,R.bodyBounds)),S.includeLabels&&(S.includeMainLabels&&(!A||S.includeSourceLabels&&S.includeTargetLabels)?updateBoundsFromBox(T,R.labelBounds.all):(S.includeMainLabels&&updateBoundsFromBox(T,R.labelBounds.mainRot),S.includeSourceLabels&&updateBoundsFromBox(T,R.labelBounds.sourceRot),S.includeTargetLabels&&updateBoundsFromBox(T,R.labelBounds.targetRot))),T.w=T.x2-T.x1,T.h=T.y2-T.y1}return T},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(_){var v,S=_===void 0||_.useCache===void 0||_.useCache===!0,R=memoize(function(I){var q=I._private;return q.bbCache==null||q.styleDirty||q.bbCachePosKey!==getBoundingBoxPosKey(I)},function(I){return I.id()});if(S&&this.length===1&&!R(this[0]))_===void 0?_=defBbOpts:_=filledBbOpts(_),v=cachedBoundingBoxImpl(this[0],_);else{v=makeBoundingBox(),_=_||defBbOpts;var T=filledBbOpts(_),A=this,k=A.cy(),M=k.styleEnabled();this.edges().forEach(R),this.nodes().forEach(R),M&&this.recalculateRenderedStyle(S),this.updateCompoundBounds(!S);for(var N=0;N<A.length;N++){var D=A[N];R(D)&&D.dirtyBoundingBoxCache(),updateBoundsFromBox(v,cachedBoundingBoxImpl(D,T))}}return v.x1=noninf(v.x1),v.y1=noninf(v.y1),v.x2=noninf(v.x2),v.y2=noninf(v.y2),v.w=noninf(v.x2-v.x1),v.h=noninf(v.y2-v.y1),v};elesfn$b.dirtyBoundingBoxCache=function(){for(var _=0;_<this.length;_++){var v=this[_]._private;v.bbCache=null,v.bbCachePosKey=null,v.bodyBounds=null,v.overlayBounds=null,v.labelBounds.all=null,v.labelBounds.source=null,v.labelBounds.target=null,v.labelBounds.main=null,v.labelBounds.sourceRot=null,v.labelBounds.targetRot=null,v.labelBounds.mainRot=null,v.arrowBounds.source=null,v.arrowBounds.target=null,v.arrowBounds["mid-source"]=null,v.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};elesfn$b.boundingBoxAt=function(_){var v=this.nodes(),S=this.cy(),R=S.hasCompoundNodes(),T=S.collection();if(R&&(T=v.filter(function(D){return D.isParent()}),v=v.not(T)),plainObject(_)){var A=_;_=function(){return A}}var k=function(I,q){return I._private.bbAtOldPos=_(I,q)},M=function(I){return I._private.bbAtOldPos};S.startBatch(),v.forEach(k).silentPositions(_),R&&(T.dirtyCompoundBoundsCache(),T.dirtyBoundingBoxCache(),T.updateCompoundBounds(!0));var N=copyBoundingBox(this.boundingBox({useCache:!1}));return v.silentPositions(M),R&&(T.dirtyCompoundBoundsCache(),T.dirtyBoundingBoxCache(),T.updateCompoundBounds(!0)),S.endBatch(),N};fn$3.boundingbox=fn$3.bb=fn$3.boundingBox;fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$b,fn$2,elesfn$a;fn$2=elesfn$a={};var defineDimFns=function(v){v.uppercaseName=capitalize(v.name),v.autoName="auto"+v.uppercaseName,v.labelName="label"+v.uppercaseName,v.outerName="outer"+v.uppercaseName,v.uppercaseOuterName=capitalize(v.outerName),fn$2[v.name]=function(){var R=this[0],T=R._private,A=T.cy,k=A._private.styleEnabled;if(R)if(k){if(R.isParent())return R.updateCompoundBounds(),T[v.autoName]||0;var M=R.pstyle(v.name);switch(M.strValue){case"label":return R.recalculateRenderedStyle(),T.rstyle[v.labelName]||0;default:return M.pfValue}}else return 1},fn$2["outer"+v.uppercaseName]=function(){var R=this[0],T=R._private,A=T.cy,k=A._private.styleEnabled;if(R)if(k){var M=R[v.name](),N=R.pstyle("border-position").value,D;N==="center"?D=R.pstyle("border-width").pfValue:N==="outside"?D=2*R.pstyle("border-width").pfValue:D=0;var I=2*R.padding();return M+D+I}else return 1},fn$2["rendered"+v.uppercaseName]=function(){var R=this[0];if(R){var T=R[v.name]();return T*this.cy().zoom()}},fn$2["rendered"+v.uppercaseOuterName]=function(){var R=this[0];if(R){var T=R[v.outerName]();return T*this.cy().zoom()}}};defineDimFns({name:"width"});defineDimFns({name:"height"});elesfn$a.padding=function(){var _=this[0],v=_._private;return _.isParent()?(_.updateCompoundBounds(),v.autoPadding!==void 0?v.autoPadding:_.pstyle("padding").pfValue):_.pstyle("padding").pfValue};elesfn$a.paddedHeight=function(){var _=this[0];return _.height()+2*_.padding()};elesfn$a.paddedWidth=function(){var _=this[0];return _.width()+2*_.padding()};var widthHeight=elesfn$a,ifEdge=function(v,S){if(v.isEdge()&&v.takesUpSpace())return S(v)},ifEdgeRenderedPosition=function(v,S){if(v.isEdge()&&v.takesUpSpace()){var R=v.cy();return modelToRenderedPosition$1(S(v),R.zoom(),R.pan())}},ifEdgeRenderedPositions=function(v,S){if(v.isEdge()&&v.takesUpSpace()){var R=v.cy(),T=R.pan(),A=R.zoom();return S(v).map(function(k){return modelToRenderedPosition$1(k,A,T)})}},controlPoints=function(v){return v.renderer().getControlPoints(v)},segmentPoints=function(v){return v.renderer().getSegmentPoints(v)},sourceEndpoint=function(v){return v.renderer().getSourceEndpoint(v)},targetEndpoint=function(v){return v.renderer().getTargetEndpoint(v)},midpoint=function(v){return v.renderer().getEdgeMidpoint(v)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(v){return"rendered"+v[0].toUpperCase()+v.substr(1)},edgePoints=Object.keys(pts).reduce(function(_,v){var S=pts[v],R=renderedName(v);return _[v]=function(){return ifEdge(this,S.get)},S.mult?_[R]=function(){return ifEdgeRenderedPositions(this,S.get)}:_[R]=function(){return ifEdgeRenderedPosition(this,S.get)},_},{}),dimensions=extend({},position,bounds,widthHeight,edgePoints);var Event$1=function(v,S){this.recycle(v,S)};function returnFalse(){return!1}function returnTrue(){return!0}Event$1.prototype={instanceString:function(){return"event"},recycle:function(v,S){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,v!=null&&v.preventDefault?(this.type=v.type,this.isDefaultPrevented=v.defaultPrevented?returnTrue:returnFalse):v!=null&&v.type?S=v:this.type=v,S!=null&&(this.originalEvent=S.originalEvent,this.type=S.type!=null?S.type:this.type,this.cy=S.cy,this.target=S.target,this.position=S.position,this.renderedPosition=S.renderedPosition,this.namespace=S.namespace,this.layout=S.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var R=this.position,T=this.cy.zoom(),A=this.cy.pan();this.renderedPosition={x:R.x*T+A.x,y:R.y*T+A.y}}this.timeStamp=v&&v.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var v=this.originalEvent;v&&v.preventDefault&&v.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var v=this.originalEvent;v&&v.stopPropagation&&v.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(v,S){return v===S},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(v){return v},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:emptyOpts,v=arguments.length>1?arguments[1]:void 0,S=0;S<defaultsKeys.length;S++){var R=defaultsKeys[S];this[R]=_[R]||defaults$8[R]}this.context=v||this.context,this.listeners=[],this.emitting=0}var p$1=Emitter.prototype,forEachEvent=function(v,S,R,T,A,k,M){fn$6(T)&&(A=T,T=null),M&&(k==null?k=M:k=extend({},k,M));for(var N=array(R)?R:R.split(/\s+/),D=0;D<N.length;D++){var I=N[D];if(!emptyString(I)){var q=I.match(eventRegex);if(q){var B=q[1],z=q[2]?q[2]:null,F=S(v,I,B,z,T,A,k);if(F===!1)break}}}},makeEventObj=function(v,S){return v.addEventFields(v.context,S),new Event$1(S.type,S)},forEachEventObj=function(v,S,R){if(event(R)){S(v,R);return}else if(plainObject(R)){S(v,makeEventObj(v,R));return}for(var T=array(R)?R:R.split(/\s+/),A=0;A<T.length;A++){var k=T[A];if(!emptyString(k)){var M=k.match(eventRegex);if(M){var N=M[1],D=M[2]?M[2]:null,I=makeEventObj(v,{type:N,namespace:D,target:v.context});S(v,I)}}}};p$1.on=p$1.addListener=function(_,v,S,R,T){return forEachEvent(this,function(A,k,M,N,D,I,q){fn$6(I)&&A.listeners.push({event:k,callback:I,type:M,namespace:N,qualifier:D,conf:q})},_,v,S,R,T),this};p$1.one=function(_,v,S,R){return this.on(_,v,S,R,{one:!0})};p$1.removeListener=p$1.off=function(_,v,S,R){var T=this;this.emitting!==0&&(this.listeners=copyArray(this.listeners));for(var A=this.listeners,k=function(D){var I=A[D];forEachEvent(T,function(q,B,z,F,V,H){if((I.type===z||_==="*")&&(!F&&I.namespace!==".*"||I.namespace===F)&&(!V||q.qualifierCompare(I.qualifier,V))&&(!H||I.callback===H))return A.splice(D,1),!1},_,v,S,R)},M=A.length-1;M>=0;M--)k(M);return this};p$1.removeAllListeners=function(){return this.removeListener("*")};p$1.emit=p$1.trigger=function(_,v,S){var R=this.listeners,T=R.length;return this.emitting++,array(v)||(v=[v]),forEachEventObj(this,function(A,k){S!=null&&(R=[{event:k.event,type:k.type,namespace:k.namespace,callback:S}],T=R.length);for(var M=function(){var I=R[N];if(I.type===k.type&&(!I.namespace||I.namespace===k.namespace||I.namespace===universalNamespace)&&A.eventMatches(A.context,I,k)){var q=[k];v!=null&&push(q,v),A.beforeEmit(A.context,I,k),I.conf&&I.conf.one&&(A.listeners=A.listeners.filter(function(F){return F!==I}));var B=A.callbackContext(A.context,I,k),z=I.callback.apply(B,q);A.afterEmit(A.context,I,k),z===!1&&(k.stopPropagation(),k.preventDefault())}},N=0;N<T;N++)M();A.bubble(A.context)&&!k.isPropagationStopped()&&A.parent(A.context).emit(k,v)},_),this.emitting--,this};var emitterOptions$1={qualifierCompare:function(v,S){return v==null||S==null?v==null&&S==null:v.sameText(S)},eventMatches:function(v,S,R){var T=S.qualifier;return T!=null?v!==R.target&&element(R.target)&&T.matches(R.target):!0},addEventFields:function(v,S){S.cy=v.cy(),S.target=v},callbackContext:function(v,S,R){return S.qualifier!=null?R.target:v},beforeEmit:function(v,S){S.conf&&S.conf.once&&S.conf.onceCollection.removeListener(S.event,S.qualifier,S.callback)},bubble:function(){return!0},parent:function(v){return v.isChild()?v.parent():v.cy()}},argSelector$1=function(v){return string$1(v)?new Selector(v):v},elesfn$9={createEmitter:function(){for(var v=0;v<this.length;v++){var S=this[v],R=S._private;R.emitter||(R.emitter=new Emitter(emitterOptions$1,S))}return this},emitter:function(){return this._private.emitter},on:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().on(v,T,R)}return this},removeListener:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().removeListener(v,T,R)}return this},removeAllListeners:function(){for(var v=0;v<this.length;v++){var S=this[v];S.emitter().removeAllListeners()}return this},one:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().one(v,T,R)}return this},once:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().on(v,T,R,{once:!0,onceCollection:this})}},emit:function(v,S){for(var R=0;R<this.length;R++){var T=this[R];T.emitter().emit(v,S)}return this},emitAndNotify:function(v,S){if(this.length!==0)return this.cy().notify(v,this),this.emit(v,S),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function(v){return this.filter(function(S){return S.isNode()}).filter(v)},edges:function(v){return this.filter(function(S){return S.isEdge()}).filter(v)},byGroup:function(){for(var v=this.spawn(),S=this.spawn(),R=0;R<this.length;R++){var T=this[R];T.isNode()?v.push(T):S.push(T)}return{nodes:v,edges:S}},filter:function(v,S){if(v===void 0)return this;if(string$1(v)||elementOrCollection(v))return new Selector(v).filter(this);if(fn$6(v)){for(var R=this.spawn(),T=this,A=0;A<T.length;A++){var k=T[A],M=S?v.apply(S,[k,A,T]):v(k,A,T);M&&R.push(k)}return R}return this.spawn()},not:function(v){if(v){string$1(v)&&(v=this.filter(v));for(var S=this.spawn(),R=0;R<this.length;R++){var T=this[R],A=v.has(T);A||S.push(T)}return S}else return this},absoluteComplement:function(){var v=this.cy();return v.mutableElements().not(this)},intersect:function(v){if(string$1(v)){var S=v;return this.filter(S)}for(var R=this.spawn(),T=this,A=v,k=this.length<v.length,M=k?T:A,N=k?A:T,D=0;D<M.length;D++){var I=M[D];N.has(I)&&R.push(I)}return R},xor:function(v){var S=this._private.cy;string$1(v)&&(v=S.$(v));var R=this.spawn(),T=this,A=v,k=function(N,D){for(var I=0;I<N.length;I++){var q=N[I],B=q._private.data.id,z=D.hasElementWithId(B);z||R.push(q)}};return k(T,A),k(A,T),R},diff:function(v){var S=this._private.cy;string$1(v)&&(v=S.$(v));var R=this.spawn(),T=this.spawn(),A=this.spawn(),k=this,M=v,N=function(I,q,B){for(var z=0;z<I.length;z++){var F=I[z],V=F._private.data.id,H=q.hasElementWithId(V);H?A.merge(F):B.push(F)}};return N(k,M,R),N(M,k,T),{left:R,right:T,both:A}},add:function(v){var S=this._private.cy;if(!v)return this;if(string$1(v)){var R=v;v=S.mutableElements().filter(R)}for(var T=this.spawnSelf(),A=0;A<v.length;A++){var k=v[A],M=!this.has(k);M&&T.push(k)}return T},merge:function(v){var S=this._private,R=S.cy;if(!v)return this;if(v&&string$1(v)){var T=v;v=R.mutableElements().filter(T)}for(var A=S.map,k=0;k<v.length;k++){var M=v[k],N=M._private.data.id,D=!A.has(N);if(D){var I=this.length++;this[I]=M,A.set(N,{ele:M,index:I})}}return this},unmergeAt:function(v){var S=this[v],R=S.id(),T=this._private,A=T.map;this[v]=void 0,A.delete(R);var k=v===this.length-1;if(this.length>1&&!k){var M=this.length-1,N=this[M],D=N._private.data.id;this[M]=void 0,this[v]=N,A.set(D,{ele:N,index:v})}return this.length--,this},unmergeOne:function(v){v=v[0];var S=this._private,R=v._private.data.id,T=S.map,A=T.get(R);if(!A)return this;var k=A.index;return this.unmergeAt(k),this},unmerge:function(v){var S=this._private.cy;if(!v)return this;if(v&&string$1(v)){var R=v;v=S.mutableElements().filter(R)}for(var T=0;T<v.length;T++)this.unmergeOne(v[T]);return this},unmergeBy:function(v){for(var S=this.length-1;S>=0;S--){var R=this[S];v(R)&&this.unmergeAt(S)}return this},map:function(v,S){for(var R=[],T=this,A=0;A<T.length;A++){var k=T[A],M=S?v.apply(S,[k,A,T]):v(k,A,T);R.push(M)}return R},reduce:function(v,S){for(var R=S,T=this,A=0;A<T.length;A++)R=v(R,T[A],A,T);return R},max:function(v,S){for(var R=-1/0,T,A=this,k=0;k<A.length;k++){var M=A[k],N=S?v.apply(S,[M,k,A]):v(M,k,A);N>R&&(R=N,T=M)}return{value:R,ele:T}},min:function(v,S){for(var R=1/0,T,A=this,k=0;k<A.length;k++){var M=A[k],N=S?v.apply(S,[M,k,A]):v(M,k,A);N<R&&(R=N,T=M)}return{value:R,ele:T}}},fn$1=elesfn$8;fn$1.u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add;fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not;fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect;fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor;fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter;fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement;var elesfn$7={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var v=this[0];if(v)return v._private.group}},zIndexSort=function(v,S){var R=v.cy(),T=R.hasCompoundNodes();function A(I){var q=I.pstyle("z-compound-depth");return q.value==="auto"?T?I.zDepth():0:q.value==="bottom"?-1:q.value==="top"?MAX_INT$1:0}var k=A(v)-A(S);if(k!==0)return k;function M(I){var q=I.pstyle("z-index-compare");return q.value==="auto"&&I.isNode()?1:0}var N=M(v)-M(S);if(N!==0)return N;var D=v.pstyle("z-index").value-S.pstyle("z-index").value;return D!==0?D:v.poolIndex()-S.poolIndex()},elesfn$6={forEach:function(v,S){if(fn$6(v))for(var R=this.length,T=0;T<R;T++){var A=this[T],k=S?v.apply(S,[A,T,this]):v(A,T,this);if(k===!1)break}return this},toArray:function(){for(var v=[],S=0;S<this.length;S++)v.push(this[S]);return v},slice:function(v,S){var R=[],T=this.length;S==null&&(S=T),v==null&&(v=0),v<0&&(v=T+v),S<0&&(S=T+S);for(var A=v;A>=0&&A<S&&A<T;A++)R.push(this[A]);return this.spawn(R)},size:function(){return this.length},eq:function(v){return this[v]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(v){if(!fn$6(v))return this;var S=this.toArray().sort(v);return this.spawn(S)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var v=this[0];if(v){var S=v._private,R=S.group;if(R==="nodes"){var T=S.data.parent?v.parents().size():0;return v.isParent()?T:MAX_INT$1-1}else{var A=S.source,k=S.target,M=A.zDepth(),N=k.zDepth();return Math.max(M,N,0)}}}};elesfn$6.each=elesfn$6.forEach;var defineSymbolIterator=function(){var v="undefined",S=(typeof Symbol>"u"?"undefined":_typeof(Symbol))!=v&&_typeof(Symbol.iterator)!=v;S&&(elesfn$6[Symbol.iterator]=function(){var R=this,T={value:void 0,done:!1},A=0,k=this.length;return _defineProperty$1({next:function(){return A<k?T.value=R[A++]:(T.value=void 0,T.done=!0),T}},Symbol.iterator,function(){return this})})};defineSymbolIterator();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function(v){v=getLayoutDimensionOptions(v);var S;if(!this.takesUpSpace())S={w:0,h:0};else if(v.nodeDimensionsIncludeLabels){var R=this.boundingBox();S={w:R.w,h:R.h}}else S={w:this.outerWidth(),h:this.outerHeight()};return(S.w===0||S.h===0)&&(S.w=S.h=1),S},layoutPositions:function(v,S,R){var T=this.nodes().filter(function(ne){return!ne.isParent()}),A=this.cy(),k=S.eles,M=function(oe){return oe.id()},N=memoize(R,M);v.emit({type:"layoutstart",layout:v}),v.animations=[];var D=function(oe,te,se){var le={x:te.x1+te.w/2,y:te.y1+te.h/2},ue={x:(se.x-le.x)*oe,y:(se.y-le.y)*oe};return{x:le.x+ue.x,y:le.y+ue.y}},I=S.spacingFactor&&S.spacingFactor!==1,q=function(){if(!I)return null;for(var oe=makeBoundingBox(),te=0;te<T.length;te++){var se=T[te],le=N(se,te);expandBoundingBoxByPoint(oe,le.x,le.y)}return oe},B=q(),z=memoize(function(ne,oe){var te=N(ne,oe);if(I){var se=Math.abs(S.spacingFactor);te=D(se,B,te)}return S.transform!=null&&(te=S.transform(ne,te)),te},M);if(S.animate){for(var F=0;F<T.length;F++){var V=T[F],H=z(V,F),W=S.animateFilter==null||S.animateFilter(V,F);if(W){var Y=V.animation({position:H,duration:S.animationDuration,easing:S.animationEasing});v.animations.push(Y)}else V.position(H)}if(S.fit){var Z=A.animation({fit:{boundingBox:k.boundingBoxAt(z),padding:S.padding},duration:S.animationDuration,easing:S.animationEasing});v.animations.push(Z)}else if(S.zoom!==void 0&&S.pan!==void 0){var J=A.animation({zoom:S.zoom,pan:S.pan,duration:S.animationDuration,easing:S.animationEasing});v.animations.push(J)}v.animations.forEach(function(ne){return ne.play()}),v.one("layoutready",S.ready),v.emit({type:"layoutready",layout:v}),Promise$1.all(v.animations.map(function(ne){return ne.promise()})).then(function(){v.one("layoutstop",S.stop),v.emit({type:"layoutstop",layout:v})})}else T.positions(z),S.fit&&A.fit(S.eles,S.padding),S.zoom!=null&&A.zoom(S.zoom),S.pan&&A.pan(S.pan),v.one("layoutready",S.ready),v.emit({type:"layoutready",layout:v}),v.one("layoutstop",S.stop),v.emit({type:"layoutstop",layout:v});return this},layout:function(v){var S=this.cy();return S.makeLayout(extend({},v,{eles:this}))}};elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout;function styleCache(_,v,S){var R=S._private,T=R.styleCache=R.styleCache||[],A;return(A=T[_])!=null||(A=T[_]=v(S)),A}function cacheStyleFunction(_,v){return _=hashString(_),function(R){return styleCache(_,v,R)}}function cachePrototypeStyleFunction(_,v){_=hashString(_);var S=function(T){return v.call(T)};return function(){var T=this[0];if(T)return styleCache(_,S,T)}}var elesfn$4={recalculateRenderedStyle:function(v){var S=this.cy(),R=S.renderer(),T=S.styleEnabled();return R&&T&&R.recalculateRenderedStyle(this,v),this},dirtyStyleCache:function(){var v=this.cy(),S=function(A){return A._private.styleCache=null};if(v.hasCompoundNodes()){var R;R=this.spawnSelf().merge(this.descendants()).merge(this.parents()),R.merge(R.connectedEdges()),R.forEach(S)}else this.forEach(function(T){S(T),T.connectedEdges().forEach(S)});return this},updateStyle:function(v){var S=this._private.cy;if(!S.styleEnabled())return this;if(S.batching()){var R=S._private.batchStyleEles;return R.merge(this),this}var T=S.hasCompoundNodes(),A=this;v=!!(v||v===void 0),T&&(A=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var k=A;return v?k.emitAndNotify("style"):k.emit("style"),A.forEach(function(M){return M._private.styleDirty=!0}),this},cleanStyle:function(){var v=this.cy();if(v.styleEnabled())for(var S=0;S<this.length;S++){var R=this[S];R._private.styleDirty&&(R._private.styleDirty=!1,v.style().apply(R))}},parsedStyle:function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=this[0],T=R.cy();if(T.styleEnabled()&&R){R._private.styleDirty&&(R._private.styleDirty=!1,T.style().apply(R));var A=R._private.style[v];return A??(S?T.style().getDefaultProperty(v):null)}},numericStyle:function(v){var S=this[0];if(S.cy().styleEnabled()&&S){var R=S.pstyle(v);return R.pfValue!==void 0?R.pfValue:R.value}},numericStyleUnits:function(v){var S=this[0];if(S.cy().styleEnabled()&&S)return S.pstyle(v).units},renderedStyle:function(v){var S=this.cy();if(!S.styleEnabled())return this;var R=this[0];if(R)return S.style().getRenderedStyle(R,v)},style:function(v,S){var R=this.cy();if(!R.styleEnabled())return this;var T=!1,A=R.style();if(plainObject(v)){var k=v;A.applyBypass(this,k,T),this.emitAndNotify("style")}else if(string$1(v))if(S===void 0){var M=this[0];return M?A.getStylePropertyValue(M,v):void 0}else A.applyBypass(this,v,S,T),this.emitAndNotify("style");else if(v===void 0){var N=this[0];return N?A.getRawStyle(N):void 0}return this},removeStyle:function(v){var S=this.cy();if(!S.styleEnabled())return this;var R=!1,T=S.style(),A=this;if(v===void 0)for(var k=0;k<A.length;k++){var M=A[k];T.removeAllBypasses(M,R)}else{v=v.split(/\s+/);for(var N=0;N<A.length;N++){var D=A[N];T.removeBypasses(D,v,R)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var v=this.cy();if(!v.styleEnabled())return 1;var S=v.hasCompoundNodes(),R=this[0];if(R){var T=R._private,A=R.pstyle("opacity").value;if(!S)return A;var k=T.data.parent?R.parents():null;if(k)for(var M=0;M<k.length;M++){var N=k[M],D=N.pstyle("opacity").value;A=D*A}return A}},transparent:function(){var v=this.cy();if(!v.styleEnabled())return!1;var S=this[0],R=S.cy().hasCompoundNodes();if(S)return R?S.effectiveOpacity()===0:S.pstyle("opacity").value===0},backgrounding:function(){var v=this.cy();if(!v.styleEnabled())return!1;var S=this[0];return!!S._private.backgrounding}};function checkCompound(_,v){var S=_._private,R=S.data.parent?_.parents():null;if(R)for(var T=0;T<R.length;T++){var A=R[T];if(!v(A))return!1}return!0}function defineDerivedStateFunction(_){var v=_.ok,S=_.edgeOkViaNode||_.ok,R=_.parentOk||_.ok;return function(){var T=this.cy();if(!T.styleEnabled())return!0;var A=this[0],k=T.hasCompoundNodes();if(A){var M=A._private;if(!v(A))return!1;if(A.isNode())return!k||checkCompound(A,R);var N=M.source,D=M.target;return S(N)&&(!k||checkCompound(N,S))&&(N===D||S(D)&&(!k||checkCompound(D,S)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",function(_){return _.pstyle("display").value==="element"&&_.width()!==0&&(_.isNode()?_.height()!==0:!0)});elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",function(_){return _.pstyle("events").value==="yes"&&_.pstyle("visibility").value==="visible"&&eleTakesUpSpace(_)}),parentInteractive=cacheStyleFunction("parentInteractive",function(_){return _.pstyle("visibility").value==="visible"&&eleTakesUpSpace(_)});elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace}));elesfn$4.noninteractive=function(){var _=this[0];if(_)return!_.interactive()};var eleVisible=cacheStyleFunction("eleVisible",function(_){return _.pstyle("visibility").value==="visible"&&_.pstyle("opacity").pfValue!==0&&eleTakesUpSpace(_)}),edgeVisibleViaNode=eleTakesUpSpace;elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode}));elesfn$4.hidden=function(){var _=this[0];if(_)return!_.visible()};elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});elesfn$4.bypass=elesfn$4.css=elesfn$4.style;elesfn$4.renderedCss=elesfn$4.renderedStyle;elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle;elesfn$4.pstyle=elesfn$4.parsedStyle;var elesfn$3={};function defineSwitchFunction(_){return function(){var v=arguments,S=[];if(v.length===2){var R=v[0],T=v[1];this.on(_.event,R,T)}else if(v.length===1&&fn$6(v[0])){var A=v[0];this.on(_.event,A)}else if(v.length===0||v.length===1&&array(v[0])){for(var k=v.length===1?v[0]:null,M=0;M<this.length;M++){var N=this[M],D=!_.ableField||N._private[_.ableField],I=N._private[_.field]!=_.value;if(_.overrideAble){var q=_.overrideAble(N);if(q!==void 0&&(D=q,!q))return this}D&&(N._private[_.field]=_.value,I&&S.push(N))}var B=this.spawn(S);B.updateStyle(),B.emit(_.event),k&&B.emit(k)}return this}}function defineSwitchSet(_){elesfn$3[_.field]=function(){var v=this[0];if(v){if(_.overrideField){var S=_.overrideField(v);if(S!==void 0)return S}return v._private[_.field]}},elesfn$3[_.on]=defineSwitchFunction({event:_.on,field:_.field,ableField:_.ableField,overrideAble:_.overrideAble,value:!0}),elesfn$3[_.off]=defineSwitchFunction({event:_.off,field:_.field,ableField:_.ableField,overrideAble:_.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(v){return v.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});defineSwitchSet({field:"grabbable",overrideField:function(v){return v.cy().autoungrabify()||v.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(v){return v.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});defineSwitchSet({field:"selectable",overrideField:function(v){return v.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});elesfn$3.deselect=elesfn$3.unselect;elesfn$3.grabbed=function(){var _=this[0];if(_)return _._private.grabbed};defineSwitchSet({field:"active",on:"activate",off:"unactivate"});defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"});elesfn$3.inactive=function(){var _=this[0];if(_)return!_._private.active};var elesfn$2={},defineDagExtremity=function(v){return function(R){for(var T=this,A=[],k=0;k<T.length;k++){var M=T[k];if(M.isNode()){for(var N=!1,D=M.connectedEdges(),I=0;I<D.length;I++){var q=D[I],B=q.source(),z=q.target();if(v.noIncomingEdges&&z===M&&B!==M||v.noOutgoingEdges&&B===M&&z!==M){N=!0;break}}N||A.push(M)}}return this.spawn(A,!0).filter(R)}},defineDagOneHop=function(v){return function(S){for(var R=this,T=[],A=0;A<R.length;A++){var k=R[A];if(k.isNode())for(var M=k.connectedEdges(),N=0;N<M.length;N++){var D=M[N],I=D.source(),q=D.target();v.outgoing&&I===k?(T.push(D),T.push(q)):v.incoming&&q===k&&(T.push(D),T.push(I))}}return this.spawn(T,!0).filter(S)}},defineDagAllHops=function(v){return function(S){for(var R=this,T=[],A={};;){var k=v.outgoing?R.outgoers():R.incomers();if(k.length===0)break;for(var M=!1,N=0;N<k.length;N++){var D=k[N],I=D.id();A[I]||(A[I]=!0,T.push(D),M=!0)}if(!M)break;R=k}return this.spawn(T,!0).filter(S)}};elesfn$2.clearTraversalCache=function(){for(var _=0;_<this.length;_++)this[_]._private.traversalCache=null};extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({})});extend(elesfn$2,{neighborhood:cache(function(_){for(var v=[],S=this.nodes(),R=0;R<S.length;R++)for(var T=S[R],A=T.connectedEdges(),k=0;k<A.length;k++){var M=A[k],N=M.source(),D=M.target(),I=T===N?D:N;I.length>0&&v.push(I[0]),v.push(M[0])}return this.spawn(v,!0).filter(_)},"neighborhood"),closedNeighborhood:function(v){return this.neighborhood().add(this).filter(v)},openNeighborhood:function(v){return this.neighborhood(v)}});elesfn$2.neighbourhood=elesfn$2.neighborhood;elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood;elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood;extend(elesfn$2,{source:cache(function(v){var S=this[0],R;return S&&(R=S._private.source||S.cy().collection()),R&&v?R.filter(v):R},"source"),target:cache(function(v){var S=this[0],R;return S&&(R=S._private.target||S.cy().collection()),R&&v?R.filter(v):R},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})});function defineSourceFunction(_){return function(S){for(var R=[],T=0;T<this.length;T++){var A=this[T],k=A._private[_.attr];k&&R.push(k)}return this.spawn(R,!0).filter(S)}}extend(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")});function defineEdgesWithFunction(_){return function(S){var R=[],T=this._private.cy,A=_||{};string$1(S)&&(S=T.$(S));for(var k=0;k<S.length;k++)for(var M=S[k]._private.edges,N=0;N<M.length;N++){var D=M[N],I=D._private.data,q=this.hasElementWithId(I.source)&&S.hasElementWithId(I.target),B=S.hasElementWithId(I.source)&&this.hasElementWithId(I.target),z=q||B;z&&((A.thisIsSrc||A.thisIsTgt)&&(A.thisIsSrc&&!q||A.thisIsTgt&&!B)||R.push(D))}return this.spawn(R,!0)}}extend(elesfn$2,{connectedEdges:cache(function(_){for(var v=[],S=this,R=0;R<S.length;R++){var T=S[R];if(T.isNode())for(var A=T._private.edges,k=0;k<A.length;k++){var M=A[k];v.push(M)}}return this.spawn(v,!0).filter(_)},"connectedEdges"),connectedNodes:cache(function(_){for(var v=[],S=this,R=0;R<S.length;R++){var T=S[R];T.isEdge()&&(v.push(T.source()[0]),v.push(T.target()[0]))}return this.spawn(v,!0).filter(_)},"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")});function defineParallelEdgesFunction(_){var v={codirected:!1};return _=extend({},v,_),function(R){for(var T=[],A=this.edges(),k=_,M=0;M<A.length;M++)for(var N=A[M],D=N._private,I=D.source,q=I._private.data.id,B=D.data.target,z=I._private.edges,F=0;F<z.length;F++){var V=z[F],H=V._private.data,W=H.target,Y=H.source,Z=W===B&&Y===q,J=q===W&&B===Y;(k.codirected&&Z||!k.codirected&&(Z||J))&&T.push(V)}return this.spawn(T,!0).filter(R)}}extend(elesfn$2,{components:function(v){var S=this,R=S.cy(),T=R.collection(),A=v==null?S.nodes():v.nodes(),k=[];v!=null&&A.empty()&&(A=v.sources());var M=function(I,q){T.merge(I),A.unmerge(I),q.merge(I)};if(A.empty())return S.spawn();var N=function(){var I=R.collection();k.push(I);var q=A[0];M(q,I),S.bfs({directed:!1,roots:q,visit:function(z){return M(z,I)}}),I.forEach(function(B){B.connectedEdges().forEach(function(z){S.has(z)&&I.has(z.source())&&I.has(z.target())&&I.merge(z)})})};do N();while(A.length>0);return k},component:function(){var v=this[0];return v.cy().mutableElements().components(v)[0]}});elesfn$2.componentsOf=elesfn$2.components;var Collection$3=function(v,S){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(v===void 0){error("A collection must have a reference to the core");return}var A=new Map$1,k=!1;if(!S)S=[];else if(S.length>0&&plainObject(S[0])&&!element(S[0])){k=!0;for(var M=[],N=new Set$1,D=0,I=S.length;D<I;D++){var q=S[D];q.data==null&&(q.data={});var B=q.data;if(B.id==null)B.id=uuid();else if(v.hasElementWithId(B.id)||N.has(B.id))continue;var z=new Element$1(v,q,!1);M.push(z),N.add(B.id)}S=M}this.length=0;for(var F=0,V=S.length;F<V;F++){var H=S[F][0];if(H!=null){var W=H._private.data.id;(!R||!A.has(W))&&(R&&A.set(W,{index:this.length,ele:H}),this[this.length]=H,this.length++)}}this._private={eles:this,cy:v,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(Y){this.lazyMap=Y},rebuildMap:function(){for(var Z=this.lazyMap=new Map$1,J=this.eles,ne=0;ne<J.length;ne++){var oe=J[ne];Z.set(oe.id(),{index:ne,ele:oe})}}},R&&(this._private.map=A),k&&!T&&this.restore()},elesfn$1=Element$1.prototype=Collection$3.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"};elesfn$1.spawn=function(_,v){return new Collection$3(this.cy(),_,v)};elesfn$1.spawnSelf=function(){return this.spawn(this)};elesfn$1.cy=function(){return this._private.cy};elesfn$1.renderer=function(){return this._private.cy.renderer()};elesfn$1.element=function(){return this[0]};elesfn$1.collection=function(){return collection(this)?this:new Collection$3(this._private.cy,[this])};elesfn$1.unique=function(){return new Collection$3(this._private.cy,this,!0)};elesfn$1.hasElementWithId=function(_){return _=""+_,this._private.map.has(_)};elesfn$1.getElementById=function(_){_=""+_;var v=this._private.cy,S=this._private.map.get(_);return S?S.ele:new Collection$3(v)};elesfn$1.$id=elesfn$1.getElementById;elesfn$1.poolIndex=function(){var _=this._private.cy,v=_._private.elements,S=this[0]._private.data.id;return v._private.map.get(S).index};elesfn$1.indexOf=function(_){var v=_[0]._private.data.id;return this._private.map.get(v).index};elesfn$1.indexOfId=function(_){return _=""+_,this._private.map.get(_).index};elesfn$1.json=function(_){var v=this.element(),S=this.cy();if(v==null&&_)return this;if(v!=null){var R=v._private;if(plainObject(_)){if(S.startBatch(),_.data){v.data(_.data);var T=R.data;if(v.isEdge()){var A=!1,k={},M=_.data.source,N=_.data.target;M!=null&&M!=T.source&&(k.source=""+M,A=!0),N!=null&&N!=T.target&&(k.target=""+N,A=!0),A&&(v=v.move(k))}else{var D="parent"in _.data,I=_.data.parent;D&&(I!=null||T.parent!=null)&&I!=T.parent&&(I===void 0&&(I=null),I!=null&&(I=""+I),v=v.move({parent:I}))}}_.position&&v.position(_.position);var q=function(V,H,W){var Y=_[V];Y!=null&&Y!==R[V]&&(Y?v[H]():v[W]())};return q("removed","remove","restore"),q("selected","select","unselect"),q("selectable","selectify","unselectify"),q("locked","lock","unlock"),q("grabbable","grabify","ungrabify"),q("pannable","panify","unpanify"),_.classes!=null&&v.classes(_.classes),S.endBatch(),this}else if(_===void 0){var B={data:copy(R.data),position:copy(R.position),group:R.group,removed:R.removed,selected:R.selected,selectable:R.selectable,locked:R.locked,grabbable:R.grabbable,pannable:R.pannable,classes:null};B.classes="";var z=0;return R.classes.forEach(function(F){return B.classes+=z++===0?F:" "+F}),B}}};elesfn$1.jsons=function(){for(var _=[],v=0;v<this.length;v++){var S=this[v],R=S.json();_.push(R)}return _};elesfn$1.clone=function(){for(var _=this.cy(),v=[],S=0;S<this.length;S++){var R=this[S],T=R.json(),A=new Element$1(_,T,!1);v.push(A)}return new Collection$3(_,v)};elesfn$1.copy=elesfn$1.clone;elesfn$1.restore=function(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this,R=S.cy(),T=R._private,A=[],k=[],M,N=0,D=S.length;N<D;N++){var I=S[N];v&&!I.removed()||(I.isNode()?A.push(I):k.push(I))}M=A.concat(k);var q,B=function(){M.splice(q,1),q--};for(q=0;q<M.length;q++){var z=M[q],F=z._private,V=F.data;if(z.clearTraversalCache(),!(!v&&!F.removed)){if(V.id===void 0)V.id=uuid();else if(number$1(V.id))V.id=""+V.id;else if(emptyString(V.id)||!string$1(V.id)){error("Can not create element with invalid string ID `"+V.id+"`"),B();continue}else if(R.hasElementWithId(V.id)){error("Can not create second element with ID `"+V.id+"`"),B();continue}}var H=V.id;if(z.isNode()){var W=F.position;W.x==null&&(W.x=0),W.y==null&&(W.y=0)}if(z.isEdge()){for(var Y=z,Z=["source","target"],J=Z.length,ne=!1,oe=0;oe<J;oe++){var te=Z[oe],se=V[te];number$1(se)&&(se=V[te]=""+V[te]),se==null||se===""?(error("Can not create edge `"+H+"` with unspecified "+te),ne=!0):R.hasElementWithId(se)||(error("Can not create edge `"+H+"` with nonexistant "+te+" `"+se+"`"),ne=!0)}if(ne){B();continue}var le=R.getElementById(V.source),ue=R.getElementById(V.target);le.same(ue)?le._private.edges.push(Y):(le._private.edges.push(Y),ue._private.edges.push(Y)),Y._private.source=le,Y._private.target=ue}F.map=new Map$1,F.map.set(H,{ele:z,index:0}),F.removed=!1,v&&R.addToPool(z)}for(var ce=0;ce<A.length;ce++){var ge=A[ce],me=ge._private.data;number$1(me.parent)&&(me.parent=""+me.parent);var Ee=me.parent,_e=Ee!=null;if(_e||ge._private.parent){var ye=ge._private.parent?R.collection().merge(ge._private.parent):R.getElementById(Ee);if(ye.empty())me.parent=void 0;else if(ye[0].removed())warn("Node added with missing parent, reference to parent removed"),me.parent=void 0,ge._private.parent=null;else{for(var be=!1,Se=ye;!Se.empty();){if(ge.same(Se)){be=!0,me.parent=void 0;break}Se=Se.parent()}be||(ye[0]._private.children.push(ge),ge._private.parent=ye[0],T.hasCompoundNodes=!0)}}}if(M.length>0){for(var De=M.length===S.length?S:new Collection$3(R,M),xe=0;xe<De.length;xe++){var pe=De[xe];pe.isNode()||(pe.parallelEdges().clearTraversalCache(),pe.source().clearTraversalCache(),pe.target().clearTraversalCache())}var we;T.hasCompoundNodes?we=R.collection().merge(De).merge(De.connectedNodes()).merge(De.parent()):we=De,we.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(_),_?De.emitAndNotify("add"):v&&De.emit("add")}return S};elesfn$1.removed=function(){var _=this[0];return _&&_._private.removed};elesfn$1.inside=function(){var _=this[0];return _&&!_._private.removed};elesfn$1.remove=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this,R=[],T={},A=S._private.cy;function k(Ee){for(var _e=Ee._private.edges,ye=0;ye<_e.length;ye++)N(_e[ye])}function M(Ee){for(var _e=Ee._private.children,ye=0;ye<_e.length;ye++)N(_e[ye])}function N(Ee){var _e=T[Ee.id()];v&&Ee.removed()||_e||(T[Ee.id()]=!0,Ee.isNode()?(R.push(Ee),k(Ee),M(Ee)):R.unshift(Ee))}for(var D=0,I=S.length;D<I;D++){var q=S[D];N(q)}function B(Ee,_e){var ye=Ee._private.edges;removeFromArray(ye,_e),Ee.clearTraversalCache()}function z(Ee){Ee.clearTraversalCache()}var F=[];F.ids={};function V(Ee,_e){_e=_e[0],Ee=Ee[0];var ye=Ee._private.children,be=Ee.id();removeFromArray(ye,_e),_e._private.parent=null,F.ids[be]||(F.ids[be]=!0,F.push(Ee))}S.dirtyCompoundBoundsCache(),v&&A.removeFromPool(R);for(var H=0;H<R.length;H++){var W=R[H];if(W.isEdge()){var Y=W.source()[0],Z=W.target()[0];B(Y,W),B(Z,W);for(var J=W.parallelEdges(),ne=0;ne<J.length;ne++){var oe=J[ne];z(oe),oe.isBundledBezier()&&oe.dirtyBoundingBoxCache()}}else{var te=W.parent();te.length!==0&&V(te,W)}v&&(W._private.removed=!0)}var se=A._private.elements;A._private.hasCompoundNodes=!1;for(var le=0;le<se.length;le++){var ue=se[le];if(ue.isParent()){A._private.hasCompoundNodes=!0;break}}var ce=new Collection$3(this.cy(),R);ce.size()>0&&(_?ce.emitAndNotify("remove"):v&&ce.emit("remove"));for(var ge=0;ge<F.length;ge++){var me=F[ge];(!v||!me.removed())&&me.updateStyle()}return ce};elesfn$1.move=function(_){var v=this._private.cy,S=this,R=!1,T=!1,A=function(F){return F==null?F:""+F};if(_.source!==void 0||_.target!==void 0){var k=A(_.source),M=A(_.target),N=k!=null&&v.hasElementWithId(k),D=M!=null&&v.hasElementWithId(M);(N||D)&&(v.batch(function(){S.remove(R,T),S.emitAndNotify("moveout");for(var z=0;z<S.length;z++){var F=S[z],V=F._private.data;F.isEdge()&&(N&&(V.source=k),D&&(V.target=M))}S.restore(R,T)}),S.emitAndNotify("move"))}else if(_.parent!==void 0){var I=A(_.parent),q=I===null||v.hasElementWithId(I);if(q){var B=I===null?void 0:I;v.batch(function(){var z=S.remove(R,T);z.emitAndNotify("moveout");for(var F=0;F<S.length;F++){var V=S[F],H=V._private.data;V.isNode()&&(H.parent=B)}z.restore(R,T)}),S.emitAndNotify("move")}}return this};[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach(function(_){extend(elesfn$1,_)});var corefn$9={add:function(v){var S,R=this;if(elementOrCollection(v)){var T=v;if(T._private.cy===R)S=T.restore();else{for(var A=[],k=0;k<T.length;k++){var M=T[k];A.push(M.json())}S=new Collection$3(R,A)}}else if(array(v)){var N=v;S=new Collection$3(R,N)}else if(plainObject(v)&&(array(v.nodes)||array(v.edges))){for(var D=v,I=[],q=["nodes","edges"],B=0,z=q.length;B<z;B++){var F=q[B],V=D[F];if(array(V))for(var H=0,W=V.length;H<W;H++){var Y=extend({group:F},V[H]);I.push(Y)}}S=new Collection$3(R,I)}else{var Z=v;S=new Element$1(R,Z).collection()}return S},remove:function(v){if(!elementOrCollection(v)){if(string$1(v)){var S=v;v=this.$(S)}}return v.remove()}};function generateCubicBezier(_,v,S,R){var T=4,A=.001,k=1e-7,M=10,N=11,D=1/(N-1),I=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var q=0;q<4;++q)if(typeof arguments[q]!="number"||isNaN(arguments[q])||!isFinite(arguments[q]))return!1;_=Math.min(_,1),S=Math.min(S,1),_=Math.max(_,0),S=Math.max(S,0);var B=I?new Float32Array(N):new Array(N);function z(ue,ce){return 1-3*ce+3*ue}function F(ue,ce){return 3*ce-6*ue}function V(ue){return 3*ue}function H(ue,ce,ge){return((z(ce,ge)*ue+F(ce,ge))*ue+V(ce))*ue}function W(ue,ce,ge){return 3*z(ce,ge)*ue*ue+2*F(ce,ge)*ue+V(ce)}function Y(ue,ce){for(var ge=0;ge<T;++ge){var me=W(ce,_,S);if(me===0)return ce;var Ee=H(ce,_,S)-ue;ce-=Ee/me}return ce}function Z(){for(var ue=0;ue<N;++ue)B[ue]=H(ue*D,_,S)}function J(ue,ce,ge){var me,Ee,_e=0;do Ee=ce+(ge-ce)/2,me=H(Ee,_,S)-ue,me>0?ge=Ee:ce=Ee;while(Math.abs(me)>k&&++_e<M);return Ee}function ne(ue){for(var ce=0,ge=1,me=N-1;ge!==me&&B[ge]<=ue;++ge)ce+=D;--ge;var Ee=(ue-B[ge])/(B[ge+1]-B[ge]),_e=ce+Ee*D,ye=W(_e,_,S);return ye>=A?Y(ue,_e):ye===0?_e:J(ue,ce,ce+D)}var oe=!1;function te(){oe=!0,(_!==v||S!==R)&&Z()}var se=function(ce){return oe||te(),_===v&&S===R?ce:ce===0?0:ce===1?1:H(ne(ce),v,R)};se.getControlPoints=function(){return[{x:_,y:v},{x:S,y:R}]};var le="generateBezier("+[_,v,S,R]+")";return se.toString=function(){return le},se}var generateSpringRK4=(function(){function _(R){return-R.tension*R.x-R.friction*R.v}function v(R,T,A){var k={x:R.x+A.dx*T,v:R.v+A.dv*T,tension:R.tension,friction:R.friction};return{dx:k.v,dv:_(k)}}function S(R,T){var A={dx:R.v,dv:_(R)},k=v(R,T*.5,A),M=v(R,T*.5,k),N=v(R,T,M),D=1/6*(A.dx+2*(k.dx+M.dx)+N.dx),I=1/6*(A.dv+2*(k.dv+M.dv)+N.dv);return R.x=R.x+D*T,R.v=R.v+I*T,R}return function R(T,A,k){var M={x:-1,v:0,tension:null,friction:null},N=[0],D=0,I=1/1e4,q=16/1e3,B,z,F;for(T=parseFloat(T)||500,A=parseFloat(A)||20,k=k||null,M.tension=T,M.friction=A,B=k!==null,B?(D=R(T,A),z=D/k*q):z=q;F=S(F||M,z),N.push(1+F.x),D+=16,Math.abs(F.x)>I&&Math.abs(F.v)>I;);return B?function(V){return N[V*(N.length-1)|0]}:D}})(),cubicBezier=function(v,S,R,T){var A=generateCubicBezier(v,S,R,T);return function(k,M,N){return k+(M-k)*A(N)}},easings={linear:function(v,S,R){return v+(S-v)*R},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(v,S,R){if(R===0)return easings.linear;var T=generateSpringRK4(v,S,R);return function(A,k,M){return A+(k-A)*T(M)}},"cubic-bezier":cubicBezier};function getEasedValue(_,v,S,R,T){if(R===1||v===S)return S;var A=T(v,S,R);return _==null||((_.roundValue||_.color)&&(A=Math.round(A)),_.min!==void 0&&(A=Math.max(A,_.min)),_.max!==void 0&&(A=Math.min(A,_.max))),A}function getValue(_,v){return _.pfValue!=null||_.value!=null?_.pfValue!=null&&(v==null||v.type.units!=="%")?_.pfValue:_.value:_}function ease(_,v,S,R,T){var A=T!=null?T.type:null;S<0?S=0:S>1&&(S=1);var k=getValue(_,T),M=getValue(v,T);if(number$1(k)&&number$1(M))return getEasedValue(A,k,M,S,R);if(array(k)&&array(M)){for(var N=[],D=0;D<M.length;D++){var I=k[D],q=M[D];if(I!=null&&q!=null){var B=getEasedValue(A,I,q,S,R);N.push(B)}else N.push(q)}return N}}function step$1(_,v,S,R){var T=!R,A=_._private,k=v._private,M=k.easing,N=k.startTime,D=R?_:_.cy(),I=D.style();if(!k.easingImpl)if(M==null)k.easingImpl=easings.linear;else{var q;if(string$1(M)){var B=I.parse("transition-timing-function",M);q=B.value}else q=M;var z,F;string$1(q)?(z=q,F=[]):(z=q[1],F=q.slice(2).map(function(De){return+De})),F.length>0?(z==="spring"&&F.push(k.duration),k.easingImpl=easings[z].apply(null,F)):k.easingImpl=easings[z]}var V=k.easingImpl,H;if(k.duration===0?H=1:H=(S-N)/k.duration,k.applying&&(H=k.progress),H<0?H=0:H>1&&(H=1),k.delay==null){var W=k.startPosition,Y=k.position;if(Y&&T&&!_.locked()){var Z={};valid(W.x,Y.x)&&(Z.x=ease(W.x,Y.x,H,V)),valid(W.y,Y.y)&&(Z.y=ease(W.y,Y.y,H,V)),_.position(Z)}var J=k.startPan,ne=k.pan,oe=A.pan,te=ne!=null&&R;te&&(valid(J.x,ne.x)&&(oe.x=ease(J.x,ne.x,H,V)),valid(J.y,ne.y)&&(oe.y=ease(J.y,ne.y,H,V)),_.emit("pan"));var se=k.startZoom,le=k.zoom,ue=le!=null&&R;ue&&(valid(se,le)&&(A.zoom=bound(A.minZoom,ease(se,le,H,V),A.maxZoom)),_.emit("zoom")),(te||ue)&&_.emit("viewport");var ce=k.style;if(ce&&ce.length>0&&T){for(var ge=0;ge<ce.length;ge++){var me=ce[ge],Ee=me.name,_e=me,ye=k.startStyle[Ee],be=I.properties[ye.name],Se=ease(ye,_e,H,V,be);I.overrideBypass(_,Ee,Se)}_.emit("style")}}return k.progress=H,H}function valid(_,v){return _==null||v==null?!1:number$1(_)&&number$1(v)?!0:!!(_&&v)}function startAnimation(_,v,S,R){var T=v._private;T.started=!0,T.startTime=S-T.progress*T.duration}function stepAll(_,v){var S=v._private.aniEles,R=[];function T(I,q){var B=I._private,z=B.animation.current,F=B.animation.queue,V=!1;if(z.length===0){var H=F.shift();H&&z.push(H)}for(var W=function(oe){for(var te=oe.length-1;te>=0;te--){var se=oe[te];se()}oe.splice(0,oe.length)},Y=z.length-1;Y>=0;Y--){var Z=z[Y],J=Z._private;if(J.stopped){z.splice(Y,1),J.hooked=!1,J.playing=!1,J.started=!1,W(J.frames);continue}!J.playing&&!J.applying||(J.playing&&J.applying&&(J.applying=!1),J.started||startAnimation(I,Z,_),step$1(I,Z,_,q),J.applying&&(J.applying=!1),W(J.frames),J.step!=null&&J.step(_),Z.completed()&&(z.splice(Y,1),J.hooked=!1,J.playing=!1,J.started=!1,W(J.completes)),V=!0)}return!q&&z.length===0&&F.length===0&&R.push(I),V}for(var A=!1,k=0;k<S.length;k++){var M=S[k],N=T(M);A=A||N}var D=T(v,!0);(A||D)&&(S.length>0?v.notify("draw",S):v.notify("draw")),S.unmerge(R),v.emit("step")}var corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function(v){var S=this;S.styleEnabled()&&S._private.aniEles.merge(v)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var v=this;if(v._private.animationsRunning=!0,!v.styleEnabled())return;function S(){v._private.animationsRunning&&requestAnimationFrame$1(function(A){stepAll(A,v),S()})}var R=v.renderer();R&&R.beforeRender?R.beforeRender(function(A,k){stepAll(k,v)},R.beforeRenderPriorities.animations):S()}},emitterOptions={qualifierCompare:function(v,S){return v==null||S==null?v==null&&S==null:v.sameText(S)},eventMatches:function(v,S,R){var T=S.qualifier;return T!=null?v!==R.target&&element(R.target)&&T.matches(R.target):!0},addEventFields:function(v,S){S.cy=v,S.target=v},callbackContext:function(v,S,R){return S.qualifier!=null?R.target:v}},argSelector=function(v){return string$1(v)?new Selector(v):v},elesfn={createEmitter:function(){var v=this._private;return v.emitter||(v.emitter=new Emitter(emitterOptions,this)),this},emitter:function(){return this._private.emitter},on:function(v,S,R){return this.emitter().on(v,argSelector(S),R),this},removeListener:function(v,S,R){return this.emitter().removeListener(v,argSelector(S),R),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(v,S,R){return this.emitter().one(v,argSelector(S),R),this},once:function(v,S,R){return this.emitter().one(v,argSelector(S),R),this},emit:function(v,S){return this.emitter().emit(v,S),this},emitAndNotify:function(v,S){return this.emit(v),this.notify(v,S),this}};define.eventAliasesOn(elesfn);var corefn$7={png:function(v){var S=this._private.renderer;return v=v||{},S.png(v)},jpg:function(v){var S=this._private.renderer;return v=v||{},v.bg=v.bg||"#fff",S.jpg(v)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function(v){var S=this;if(v==null){error("Layout options must be specified to make a layout");return}if(v.name==null){error("A `name` must be specified to make a layout");return}var R=v.name,T=S.extension("layout",R);if(T==null){error("No such layout `"+R+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var A;string$1(v.eles)?A=S.$(v.eles):A=v.eles!=null?v.eles:S.$();var k=new T(extend({},v,{cy:S,eles:A}));return k}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var corefn$5={notify:function(v,S){var R=this._private;if(this.batching()){R.batchNotifications=R.batchNotifications||{};var T=R.batchNotifications[v]=R.batchNotifications[v]||this.collection();S!=null&&T.merge(S);return}if(R.notificationsEnabled){var A=this.renderer();this.destroyed()||!A||A.notify(v,S)}},notifications:function(v){var S=this._private;return v===void 0?S.notificationsEnabled:(S.notificationsEnabled=!!v,this)},noNotifications:function(v){this.notifications(!1),v(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var v=this._private;return v.batchCount==null&&(v.batchCount=0),v.batchCount===0&&(v.batchStyleEles=this.collection(),v.batchNotifications={}),v.batchCount++,this},endBatch:function(){var v=this._private;if(v.batchCount===0)return this;if(v.batchCount--,v.batchCount===0){v.batchStyleEles.updateStyle();var S=this.renderer();Object.keys(v.batchNotifications).forEach(function(R){var T=v.batchNotifications[R];T.empty()?S.notify(R):S.notify(R,T)})}return this},batch:function(v){return this.startBatch(),v(),this.endBatch(),this},batchData:function(v){var S=this;return this.batch(function(){for(var R=Object.keys(v),T=0;T<R.length;T++){var A=R[T],k=v[A],M=S.getElementById(A);M.data(k)}})}},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),corefn$4={renderTo:function(v,S,R,T){var A=this._private.renderer;return A.renderTo(v,S,R,T),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(v){var S=this,R=S.extension("renderer",v.name);if(R==null){error("Can not initialise: No such renderer `".concat(v.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}v.wheelSensitivity!==void 0&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var T=rendererDefaults(v);T.cy=S,S._private.renderer=new R(T),this.notify("init")},destroyRenderer:function(){var v=this;v.notify("destroy");var S=v.container();if(S)for(S._cyreg=null;S.childNodes.length>0;)S.removeChild(S.childNodes[0]);v._private.renderer=null,v.mutableElements().forEach(function(R){var T=R._private;T.rscratch={},T.rstyle={},T.animation.current=[],T.animation.queue=[]})},onRender:function(v){return this.on("render",v)},offRender:function(v){return this.off("render",v)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function(v,S){return string$1(v)?this.$(v):elementOrCollection(v)?v.collection():array(v)?(S||(S={}),new Collection$3(this,v,S.unique,S.removed)):new Collection$3(this)},nodes:function(v){var S=this.$(function(R){return R.isNode()});return v?S.filter(v):S},edges:function(v){var S=this.$(function(R){return R.isEdge()});return v?S.filter(v):S},$:function(v){var S=this._private.elements;return v?S.filter(v):S.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$8={},TRUE="t",FALSE="f";styfn$8.apply=function(_){for(var v=this,S=v._private,R=S.cy,T=R.collection(),A=0;A<_.length;A++){var k=_[A],M=v.getContextMeta(k);if(!M.empty){var N=v.getContextStyle(M),D=v.applyContextStyle(M,N,k);k._private.appliedInitStyle?v.updateTransitions(k,D.diffProps):k._private.appliedInitStyle=!0;var I=v.updateStyleHints(k);I&&T.push(k)}}return T};styfn$8.getPropertiesDiff=function(_,v){var S=this,R=S._private.propDiffs=S._private.propDiffs||{},T=_+"-"+v,A=R[T];if(A)return A;for(var k=[],M={},N=0;N<S.length;N++){var D=S[N],I=_[N]===TRUE,q=v[N]===TRUE,B=I!==q,z=D.mappedProperties.length>0;if(B||q&&z){var F=void 0;B&&z||B?F=D.properties:z&&(F=D.mappedProperties);for(var V=0;V<F.length;V++){for(var H=F[V],W=H.name,Y=!1,Z=N+1;Z<S.length;Z++){var J=S[Z],ne=v[Z]===TRUE;if(ne&&(Y=J.properties[H.name]!=null,Y))break}!M[W]&&!Y&&(M[W]=!0,k.push(W))}}}return R[T]=k,k};styfn$8.getContextMeta=function(_){for(var v=this,S="",R,T=_._private.styleCxtKey||"",A=0;A<v.length;A++){var k=v[A],M=k.selector&&k.selector.matches(_);M?S+=TRUE:S+=FALSE}return R=v.getPropertiesDiff(T,S),_._private.styleCxtKey=S,{key:S,diffPropNames:R,empty:R.length===0}};styfn$8.getContextStyle=function(_){var v=_.key,S=this,R=this._private.contextStyles=this._private.contextStyles||{};if(R[v])return R[v];for(var T={_private:{key:v}},A=0;A<S.length;A++){var k=S[A],M=v[A]===TRUE;if(M)for(var N=0;N<k.properties.length;N++){var D=k.properties[N];T[D.name]=D}}return R[v]=T,T};styfn$8.applyContextStyle=function(_,v,S){for(var R=this,T=_.diffPropNames,A={},k=R.types,M=0;M<T.length;M++){var N=T[M],D=v[N],I=S.pstyle(N);if(!D)if(I)I.bypass?D={name:N,deleteBypassed:!0}:D={name:N,delete:!0};else continue;if(I!==D){if(D.mapped===k.fn&&I!=null&&I.mapping!=null&&I.mapping.value===D.value){var q=I.mapping,B=q.fnValue=D.value(S);if(B===q.prevFnValue)continue}var z=A[N]={prev:I};R.applyParsedProperty(S,D),z.next=S.pstyle(N),z.next&&z.next.bypass&&(z.next=z.next.bypassed)}}return{diffProps:A}};styfn$8.updateStyleHints=function(_){var v=_._private,S=this,R=S.propertyGroupNames,T=S.propertyGroupKeys,A=function($e,qe,at){return S.getPropertiesHash($e,qe,at)},k=v.styleKey;if(_.removed())return!1;var M=v.group==="nodes",N=_._private.style;R=Object.keys(N);for(var D=0;D<T.length;D++){var I=T[D];v.styleKeys[I]=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]}for(var q=function($e,qe){return v.styleKeys[qe][0]=hashInt($e,v.styleKeys[qe][0])},B=function($e,qe){return v.styleKeys[qe][1]=hashIntAlt($e,v.styleKeys[qe][1])},z=function($e,qe){q($e,qe),B($e,qe)},F=function($e,qe){for(var at=0;at<$e.length;at++){var lt=$e.charCodeAt(at);q(lt,qe),B(lt,qe)}},V=2e9,H=function($e){return-128<$e&&$e<128&&Math.floor($e)!==$e?V-($e*1024|0):$e},W=0;W<R.length;W++){var Y=R[W],Z=N[Y];if(Z!=null){var J=this.properties[Y],ne=J.type,oe=J.groupKey,te=void 0;J.hashOverride!=null?te=J.hashOverride(_,Z):Z.pfValue!=null&&(te=Z.pfValue);var se=J.enums==null?Z.value:null,le=te!=null,ue=se!=null,ce=le||ue,ge=Z.units;if(ne.number&&ce&&!ne.multiple){var me=le?te:se;z(H(me),oe),!le&&ge!=null&&F(ge,oe)}else F(Z.strValue,oe)}}for(var Ee=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT],_e=0;_e<T.length;_e++){var ye=T[_e],be=v.styleKeys[ye];Ee[0]=hashInt(be[0],Ee[0]),Ee[1]=hashIntAlt(be[1],Ee[1])}v.styleKey=combineHashes(Ee[0],Ee[1]);var Se=v.styleKeys;v.labelDimsKey=combineHashesArray(Se.labelDimensions);var De=A(_,["label"],Se.labelDimensions);if(v.labelKey=combineHashesArray(De),v.labelStyleKey=combineHashesArray(hashArrays(Se.commonLabel,De)),!M){var xe=A(_,["source-label"],Se.labelDimensions);v.sourceLabelKey=combineHashesArray(xe),v.sourceLabelStyleKey=combineHashesArray(hashArrays(Se.commonLabel,xe));var pe=A(_,["target-label"],Se.labelDimensions);v.targetLabelKey=combineHashesArray(pe),v.targetLabelStyleKey=combineHashesArray(hashArrays(Se.commonLabel,pe))}if(M){var we=v.styleKeys,Oe=we.nodeBody,Ce=we.nodeBorder,Pe=we.nodeOutline,Ne=we.backgroundImage,Te=we.compound,ze=we.pie,Fe=we.stripe,Ie=[Oe,Ce,Pe,Ne,Te,ze,Fe].filter(function(Le){return Le!=null}).reduce(hashArrays,[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]);v.nodeKey=combineHashesArray(Ie),v.hasPie=ze!=null&&ze[0]!==DEFAULT_HASH_SEED&&ze[1]!==DEFAULT_HASH_SEED_ALT,v.hasStripe=Fe!=null&&Fe[0]!==DEFAULT_HASH_SEED&&Fe[1]!==DEFAULT_HASH_SEED_ALT}return k!==v.styleKey};styfn$8.clearStyleHints=function(_){var v=_._private;v.styleCxtKey="",v.styleKeys={},v.styleKey=null,v.labelKey=null,v.labelStyleKey=null,v.sourceLabelKey=null,v.sourceLabelStyleKey=null,v.targetLabelKey=null,v.targetLabelStyleKey=null,v.nodeKey=null,v.hasPie=null,v.hasStripe=null};styfn$8.applyParsedProperty=function(_,v){var S=this,R=v,T=_._private.style,A,k=S.types,M=S.properties[R.name].type,N=R.bypass,D=T[R.name],I=D&&D.bypass,q=_._private,B="mapping",z=function(Oe){return Oe==null?null:Oe.pfValue!=null?Oe.pfValue:Oe.value},F=function(){var Oe=z(D),Ce=z(R);S.checkTriggers(_,R.name,Oe,Ce)};if(v.name==="curve-style"&&_.isEdge()&&(v.value!=="bezier"&&_.isLoop()||v.value==="haystack"&&(_.source().isParent()||_.target().isParent()))&&(R=v=this.parse(v.name,"bezier",N)),R.delete)return T[R.name]=void 0,F(),!0;if(R.deleteBypassed)return D?D.bypass?(D.bypassed=void 0,F(),!0):!1:(F(),!0);if(R.deleteBypass)return D?D.bypass?(T[R.name]=D.bypassed,F(),!0):!1:(F(),!0);var V=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+_.id()+"` has no mapping for property `"+R.name+"` with data field `"+R.field+"`); try a `["+R.field+"]` selector to limit scope to elements with `"+R.field+"` defined")};switch(R.mapped){case k.mapData:{for(var H=R.field.split("."),W=q.data,Y=0;Y<H.length&&W;Y++){var Z=H[Y];W=W[Z]}if(W==null)return V(),!1;var J;if(number$1(W)){var ne=R.fieldMax-R.fieldMin;ne===0?J=0:J=(W-R.fieldMin)/ne}else return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+R.field+": "+W+"` for `"+_.id()+"` is non-numeric)"),!1;if(J<0?J=0:J>1&&(J=1),M.color){var oe=R.valueMin[0],te=R.valueMax[0],se=R.valueMin[1],le=R.valueMax[1],ue=R.valueMin[2],ce=R.valueMax[2],ge=R.valueMin[3]==null?1:R.valueMin[3],me=R.valueMax[3]==null?1:R.valueMax[3],Ee=[Math.round(oe+(te-oe)*J),Math.round(se+(le-se)*J),Math.round(ue+(ce-ue)*J),Math.round(ge+(me-ge)*J)];A={bypass:R.bypass,name:R.name,value:Ee,strValue:"rgb("+Ee[0]+", "+Ee[1]+", "+Ee[2]+")"}}else if(M.number){var _e=R.valueMin+(R.valueMax-R.valueMin)*J;A=this.parse(R.name,_e,R.bypass,B)}else return!1;if(!A)return V(),!1;A.mapping=R,R=A;break}case k.data:{for(var ye=R.field.split("."),be=q.data,Se=0;Se<ye.length&&be;Se++){var De=ye[Se];be=be[De]}if(be!=null&&(A=this.parse(R.name,be,R.bypass,B)),!A)return V(),!1;A.mapping=R,R=A;break}case k.fn:{var xe=R.value,pe=R.fnValue!=null?R.fnValue:xe(_);if(R.prevFnValue=pe,pe==null)return warn("Custom function mappers may not return null (i.e. `"+R.name+"` for ele `"+_.id()+"` is null)"),!1;if(A=this.parse(R.name,pe,R.bypass,B),!A)return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+R.name+"` for ele `"+_.id()+"` is invalid)"),!1;A.mapping=copy(R),R=A;break}case void 0:break;default:return!1}return N?(I?R.bypassed=D.bypassed:R.bypassed=D,T[R.name]=R):I?D.bypassed=R:T[R.name]=R,F(),!0};styfn$8.cleanElements=function(_,v){for(var S=0;S<_.length;S++){var R=_[S];if(this.clearStyleHints(R),R.dirtyCompoundBoundsCache(),R.dirtyBoundingBoxCache(),!v)R._private.style={};else for(var T=R._private.style,A=Object.keys(T),k=0;k<A.length;k++){var M=A[k],N=T[M];N!=null&&(N.bypass?N.bypassed=null:T[M]=null)}}};styfn$8.update=function(){var _=this._private.cy,v=_.mutableElements();v.updateStyle()};styfn$8.updateTransitions=function(_,v){var S=this,R=_._private,T=_.pstyle("transition-property").value,A=_.pstyle("transition-duration").pfValue,k=_.pstyle("transition-delay").pfValue;if(T.length>0&&A>0){for(var M={},N=!1,D=0;D<T.length;D++){var I=T[D],q=_.pstyle(I),B=v[I];if(B){var z=B.prev,F=z,V=B.next!=null?B.next:q,H=!1,W=void 0,Y=1e-6;F&&(number$1(F.pfValue)&&number$1(V.pfValue)?(H=V.pfValue-F.pfValue,W=F.pfValue+Y*H):number$1(F.value)&&number$1(V.value)?(H=V.value-F.value,W=F.value+Y*H):array(F.value)&&array(V.value)&&(H=F.value[0]!==V.value[0]||F.value[1]!==V.value[1]||F.value[2]!==V.value[2],W=F.strValue),H&&(M[I]=V.strValue,this.applyBypass(_,I,W),N=!0))}}if(!N)return;R.transitioning=!0,new Promise$1(function(Z){k>0?_.delayAnimation(k).play().promise().then(Z):Z()}).then(function(){return _.animation({style:M,duration:A,easing:_.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){S.removeBypasses(_,T),_.emitAndNotify("style"),R.transitioning=!1})}else R.transitioning&&(this.removeBypasses(_,T),_.emitAndNotify("style"),R.transitioning=!1)};styfn$8.checkTrigger=function(_,v,S,R,T,A){var k=this.properties[v],M=T(k);_.removed()||M!=null&&M(S,R,_)&&A(k)};styfn$8.checkZOrderTrigger=function(_,v,S,R){var T=this;this.checkTrigger(_,v,S,R,function(A){return A.triggersZOrder},function(){T._private.cy.notify("zorder",_)})};styfn$8.checkBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBounds},function(T){_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache()})};styfn$8.checkConnectedEdgesBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBoundsOfConnectedEdges},function(T){_.connectedEdges().forEach(function(A){A.dirtyBoundingBoxCache()})})};styfn$8.checkParallelEdgesBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBoundsOfParallelEdges},function(T){_.parallelEdges().forEach(function(A){A.dirtyBoundingBoxCache()})})};styfn$8.checkTriggers=function(_,v,S,R){_.dirtyStyleCache(),this.checkZOrderTrigger(_,v,S,R),this.checkBoundsTrigger(_,v,S,R),this.checkConnectedEdgesBoundsTrigger(_,v,S,R),this.checkParallelEdgesBoundsTrigger(_,v,S,R)};var styfn$7={};styfn$7.applyBypass=function(_,v,S,R){var T=this,A=[],k=!0;if(v==="*"||v==="**"){if(S!==void 0)for(var M=0;M<T.properties.length;M++){var N=T.properties[M],D=N.name,I=this.parse(D,S,!0);I&&A.push(I)}}else if(string$1(v)){var q=this.parse(v,S,!0);q&&A.push(q)}else if(plainObject(v)){var B=v;R=S;for(var z=Object.keys(B),F=0;F<z.length;F++){var V=z[F],H=B[V];if(H===void 0&&(H=B[dash2camel(V)]),H!==void 0){var W=this.parse(V,H,!0);W&&A.push(W)}}}else return!1;if(A.length===0)return!1;for(var Y=!1,Z=0;Z<_.length;Z++){for(var J=_[Z],ne={},oe=void 0,te=0;te<A.length;te++){var se=A[te];if(R){var le=J.pstyle(se.name);oe=ne[se.name]={prev:le}}Y=this.applyParsedProperty(J,copy(se))||Y,R&&(oe.next=J.pstyle(se.name))}Y&&this.updateStyleHints(J),R&&this.updateTransitions(J,ne,k)}return Y};styfn$7.overrideBypass=function(_,v,S){v=camel2dash(v);for(var R=0;R<_.length;R++){var T=_[R],A=T._private.style[v],k=this.properties[v].type,M=k.color,N=k.mutiple,D=A?A.pfValue!=null?A.pfValue:A.value:null;!A||!A.bypass?this.applyBypass(T,v,S):(A.value=S,A.pfValue!=null&&(A.pfValue=S),M?A.strValue="rgb("+S.join(",")+")":N?A.strValue=S.join(" "):A.strValue=""+S,this.updateStyleHints(T)),this.checkTriggers(T,v,D,S)}};styfn$7.removeAllBypasses=function(_,v){return this.removeBypasses(_,this.propertyNames,v)};styfn$7.removeBypasses=function(_,v,S){for(var R=!0,T=0;T<_.length;T++){for(var A=_[T],k={},M=0;M<v.length;M++){var N=v[M],D=this.properties[N],I=A.pstyle(D.name);if(!(!I||!I.bypass)){var q="",B=this.parse(N,q,!0),z=k[D.name]={prev:I};this.applyParsedProperty(A,B),z.next=A.pstyle(D.name)}}this.updateStyleHints(A),S&&this.updateTransitions(A,k,R)}};var styfn$6={};styfn$6.getEmSizeInPixels=function(){var _=this.containerCss("font-size");return _!=null?parseFloat(_):1};styfn$6.containerCss=function(_){var v=this._private.cy,S=v.container(),R=v.window();if(R&&S&&R.getComputedStyle)return R.getComputedStyle(S).getPropertyValue(_)};var styfn$5={};styfn$5.getRenderedStyle=function(_,v){return v?this.getStylePropertyValue(_,v,!0):this.getRawStyle(_,!0)};styfn$5.getRawStyle=function(_,v){var S=this;if(_=_[0],_){for(var R={},T=0;T<S.properties.length;T++){var A=S.properties[T],k=S.getStylePropertyValue(_,A.name,v);k!=null&&(R[A.name]=k,R[dash2camel(A.name)]=k)}return R}};styfn$5.getIndexedStyle=function(_,v,S,R){var T=_.pstyle(v)[S][R];return T??_.cy().style().getDefaultProperty(v)[S][0]};styfn$5.getStylePropertyValue=function(_,v,S){var R=this;if(_=_[0],_){var T=R.properties[v];T.alias&&(T=T.pointsTo);var A=T.type,k=_.pstyle(T.name);if(k){var M=k.value,N=k.units,D=k.strValue;if(S&&A.number&&M!=null&&number$1(M)){var I=_.cy().zoom(),q=function(H){return H*I},B=function(H,W){return q(H)+W},z=array(M),F=z?N.every(function(V){return V!=null}):N!=null;return F?z?M.map(function(V,H){return B(V,N[H])}).join(" "):B(M,N):z?M.map(function(V){return string$1(V)?V:""+q(V)}).join(" "):""+q(M)}else if(D!=null)return D}return null}};styfn$5.getAnimationStartStyle=function(_,v){for(var S={},R=0;R<v.length;R++){var T=v[R],A=T.name,k=_.pstyle(A);k!==void 0&&(plainObject(k)?k=this.parse(A,k.strValue):k=this.parse(A,k)),k&&(S[A]=k)}return S};styfn$5.getPropsList=function(_){var v=this,S=[],R=_,T=v.properties;if(R)for(var A=Object.keys(R),k=0;k<A.length;k++){var M=A[k],N=R[M],D=T[M]||T[camel2dash(M)],I=this.parse(D.name,N);I&&S.push(I)}return S};styfn$5.getNonDefaultPropertiesHash=function(_,v,S){var R=S.slice(),T,A,k,M,N,D;for(N=0;N<v.length;N++)if(T=v[N],A=_.pstyle(T,!1),A!=null)if(A.pfValue!=null)R[0]=hashInt(M,R[0]),R[1]=hashIntAlt(M,R[1]);else for(k=A.strValue,D=0;D<k.length;D++)M=k.charCodeAt(D),R[0]=hashInt(M,R[0]),R[1]=hashIntAlt(M,R[1]);return R};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$4={};styfn$4.appendFromJson=function(_){for(var v=this,S=0;S<_.length;S++){var R=_[S],T=R.selector,A=R.style||R.css,k=Object.keys(A);v.selector(T);for(var M=0;M<k.length;M++){var N=k[M],D=A[N];v.css(N,D)}}return v};styfn$4.fromJson=function(_){var v=this;return v.resetToDefault(),v.appendFromJson(_),v};styfn$4.json=function(){for(var _=[],v=this.defaultLength;v<this.length;v++){for(var S=this[v],R=S.selector,T=S.properties,A={},k=0;k<T.length;k++){var M=T[k];A[M.name]=M.strValue}_.push({selector:R?R.toString():"core",style:A})}return _};var styfn$3={};styfn$3.appendFromString=function(_){var v=this,S=this,R=""+_,T,A,k;R=R.replace(/[/][*](\s|.)+?[*][/]/g,"");function M(){R.length>T.length?R=R.substr(T.length):R=""}function N(){A.length>k.length?A=A.substr(k.length):A=""}for(;;){var D=R.match(/^\s*$/);if(D)break;var I=R.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!I){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+R);break}T=I[0];var q=I[1];if(q!=="core"){var B=new Selector(q);if(B.invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+q),M();continue}}var z=I[2],F=!1;A=z;for(var V=[];;){var H=A.match(/^\s*$/);if(H)break;var W=A.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!W){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+z),F=!0;break}k=W[0];var Y=W[1],Z=W[2],J=v.properties[Y];if(!J){warn("Skipping property: Invalid property name in: "+k),N();continue}var ne=S.parse(Y,Z);if(!ne){warn("Skipping property: Invalid property definition in: "+k),N();continue}V.push({name:Y,val:Z}),N()}if(F){M();break}S.selector(q);for(var oe=0;oe<V.length;oe++){var te=V[oe];S.css(te.name,te.val)}M()}return S};styfn$3.fromString=function(_){var v=this;return v.resetToDefault(),v.appendFromString(_),v};var styfn$2={};(function(){var _=number$2,v=rgbaNoBackRefs,S=hslaNoBackRefs,R=hex3,T=hex6,A=function(Le){return"^"+Le+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},k=function(Le){var $e=_+"|\\w+|"+v+"|"+S+"|"+R+"|"+T;return"^"+Le+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+_+")\\s*\\,\\s*("+_+")\\s*,\\s*("+$e+")\\s*\\,\\s*("+$e+")\\)$"},M=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:A("data")},layoutData:{mapping:!0,regex:A("layoutData")},scratch:{mapping:!0,regex:A("scratch")},mapData:{mapping:!0,regex:k("mapData")},mapLayoutData:{mapping:!0,regex:k("mapLayoutData")},mapScratch:{mapping:!0,regex:k("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:M,singleRegexMatchValue:!0},urls:{regexes:M,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Le,$e){switch(Le.length){case 2:return $e[0]!=="deg"&&$e[0]!=="rad"&&$e[1]!=="deg"&&$e[1]!=="rad";case 1:return string$1(Le[0])||$e[0]==="deg"||$e[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+_+")\\s*,\\s*("+_+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+_+")\\s*,\\s*("+_+")\\s*,\\s*("+_+")\\s*,\\s*("+_+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Le){var $e=Le.length;return $e===1||$e===2||$e===4}}};var N={zeroNonZero:function(Le,$e){return(Le==null||$e==null)&&Le!==$e||Le==0&&$e!=0?!0:Le!=0&&$e==0},any:function(Le,$e){return Le!=$e},emptyNonEmpty:function(Le,$e){var qe=emptyString(Le),at=emptyString($e);return qe&&!at||!qe&&at}},D=styfn$2.types,I=[{name:"label",type:D.text,triggersBounds:N.any,triggersZOrder:N.emptyNonEmpty},{name:"text-rotation",type:D.textRotation,triggersBounds:N.any},{name:"text-margin-x",type:D.bidirectionalSize,triggersBounds:N.any},{name:"text-margin-y",type:D.bidirectionalSize,triggersBounds:N.any}],q=[{name:"source-label",type:D.text,triggersBounds:N.any},{name:"source-text-rotation",type:D.textRotation,triggersBounds:N.any},{name:"source-text-margin-x",type:D.bidirectionalSize,triggersBounds:N.any},{name:"source-text-margin-y",type:D.bidirectionalSize,triggersBounds:N.any},{name:"source-text-offset",type:D.size,triggersBounds:N.any}],B=[{name:"target-label",type:D.text,triggersBounds:N.any},{name:"target-text-rotation",type:D.textRotation,triggersBounds:N.any},{name:"target-text-margin-x",type:D.bidirectionalSize,triggersBounds:N.any},{name:"target-text-margin-y",type:D.bidirectionalSize,triggersBounds:N.any},{name:"target-text-offset",type:D.size,triggersBounds:N.any}],z=[{name:"font-family",type:D.fontFamily,triggersBounds:N.any},{name:"font-style",type:D.fontStyle,triggersBounds:N.any},{name:"font-weight",type:D.fontWeight,triggersBounds:N.any},{name:"font-size",type:D.size,triggersBounds:N.any},{name:"text-transform",type:D.textTransform,triggersBounds:N.any},{name:"text-wrap",type:D.textWrap,triggersBounds:N.any},{name:"text-overflow-wrap",type:D.textOverflowWrap,triggersBounds:N.any},{name:"text-max-width",type:D.size,triggersBounds:N.any},{name:"text-outline-width",type:D.size,triggersBounds:N.any},{name:"line-height",type:D.positiveNumber,triggersBounds:N.any}],F=[{name:"text-valign",type:D.valign,triggersBounds:N.any},{name:"text-halign",type:D.halign,triggersBounds:N.any},{name:"color",type:D.color},{name:"text-outline-color",type:D.color},{name:"text-outline-opacity",type:D.zeroOneNumber},{name:"text-background-color",type:D.color},{name:"text-background-opacity",type:D.zeroOneNumber},{name:"text-background-padding",type:D.size,triggersBounds:N.any},{name:"text-border-opacity",type:D.zeroOneNumber},{name:"text-border-color",type:D.color},{name:"text-border-width",type:D.size,triggersBounds:N.any},{name:"text-border-style",type:D.borderStyle,triggersBounds:N.any},{name:"text-background-shape",type:D.textBackgroundShape,triggersBounds:N.any},{name:"text-justification",type:D.justification},{name:"box-select-labels",type:D.bool,triggersBounds:N.any}],V=[{name:"events",type:D.bool,triggersZOrder:N.any},{name:"text-events",type:D.bool,triggersZOrder:N.any},{name:"box-selection",type:D.boxSelection,triggersZOrder:N.any}],H=[{name:"display",type:D.display,triggersZOrder:N.any,triggersBounds:N.any,triggersBoundsOfConnectedEdges:N.any,triggersBoundsOfParallelEdges:function(Le,$e,qe){return Le===$e?!1:qe.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:D.visibility,triggersZOrder:N.any},{name:"opacity",type:D.zeroOneNumber,triggersZOrder:N.zeroNonZero},{name:"text-opacity",type:D.zeroOneNumber},{name:"min-zoomed-font-size",type:D.size},{name:"z-compound-depth",type:D.zCompoundDepth,triggersZOrder:N.any},{name:"z-index-compare",type:D.zIndexCompare,triggersZOrder:N.any},{name:"z-index",type:D.number,triggersZOrder:N.any}],W=[{name:"overlay-padding",type:D.size,triggersBounds:N.any},{name:"overlay-color",type:D.color},{name:"overlay-opacity",type:D.zeroOneNumber,triggersBounds:N.zeroNonZero},{name:"overlay-shape",type:D.overlayShape,triggersBounds:N.any},{name:"overlay-corner-radius",type:D.cornerRadius}],Y=[{name:"underlay-padding",type:D.size,triggersBounds:N.any},{name:"underlay-color",type:D.color},{name:"underlay-opacity",type:D.zeroOneNumber,triggersBounds:N.zeroNonZero},{name:"underlay-shape",type:D.overlayShape,triggersBounds:N.any},{name:"underlay-corner-radius",type:D.cornerRadius}],Z=[{name:"transition-property",type:D.propList},{name:"transition-duration",type:D.time},{name:"transition-delay",type:D.time},{name:"transition-timing-function",type:D.easing}],J=function(Le,$e){return $e.value==="label"?-Le.poolIndex():$e.pfValue},ne=[{name:"height",type:D.nodeSize,triggersBounds:N.any,hashOverride:J},{name:"width",type:D.nodeSize,triggersBounds:N.any,hashOverride:J},{name:"shape",type:D.nodeShape,triggersBounds:N.any},{name:"shape-polygon-points",type:D.polygonPointList,triggersBounds:N.any},{name:"corner-radius",type:D.cornerRadius},{name:"background-color",type:D.color},{name:"background-fill",type:D.fill},{name:"background-opacity",type:D.zeroOneNumber},{name:"background-blacken",type:D.nOneOneNumber},{name:"background-gradient-stop-colors",type:D.colors},{name:"background-gradient-stop-positions",type:D.percentages},{name:"background-gradient-direction",type:D.gradientDirection},{name:"padding",type:D.sizeMaybePercent,triggersBounds:N.any},{name:"padding-relative-to",type:D.paddingRelativeTo,triggersBounds:N.any},{name:"bounds-expansion",type:D.boundsExpansion,triggersBounds:N.any}],oe=[{name:"border-color",type:D.color},{name:"border-opacity",type:D.zeroOneNumber},{name:"border-width",type:D.size,triggersBounds:N.any},{name:"border-style",type:D.borderStyle},{name:"border-cap",type:D.lineCap},{name:"border-join",type:D.lineJoin},{name:"border-dash-pattern",type:D.numbers},{name:"border-dash-offset",type:D.number},{name:"border-position",type:D.linePosition}],te=[{name:"outline-color",type:D.color},{name:"outline-opacity",type:D.zeroOneNumber},{name:"outline-width",type:D.size,triggersBounds:N.any},{name:"outline-style",type:D.borderStyle},{name:"outline-offset",type:D.size,triggersBounds:N.any}],se=[{name:"background-image",type:D.urls},{name:"background-image-crossorigin",type:D.bgCrossOrigin},{name:"background-image-opacity",type:D.zeroOneNumbers},{name:"background-image-containment",type:D.bgContainment},{name:"background-image-smoothing",type:D.bools},{name:"background-position-x",type:D.bgPos},{name:"background-position-y",type:D.bgPos},{name:"background-width-relative-to",type:D.bgRelativeTo},{name:"background-height-relative-to",type:D.bgRelativeTo},{name:"background-repeat",type:D.bgRepeat},{name:"background-fit",type:D.bgFit},{name:"background-clip",type:D.bgClip},{name:"background-width",type:D.bgWH},{name:"background-height",type:D.bgWH},{name:"background-offset-x",type:D.bgPos},{name:"background-offset-y",type:D.bgPos}],le=[{name:"position",type:D.position,triggersBounds:N.any},{name:"compound-sizing-wrt-labels",type:D.compoundIncludeLabels,triggersBounds:N.any},{name:"min-width",type:D.size,triggersBounds:N.any},{name:"min-width-bias-left",type:D.sizeMaybePercent,triggersBounds:N.any},{name:"min-width-bias-right",type:D.sizeMaybePercent,triggersBounds:N.any},{name:"min-height",type:D.size,triggersBounds:N.any},{name:"min-height-bias-top",type:D.sizeMaybePercent,triggersBounds:N.any},{name:"min-height-bias-bottom",type:D.sizeMaybePercent,triggersBounds:N.any}],ue=[{name:"line-style",type:D.lineStyle},{name:"line-color",type:D.color},{name:"line-fill",type:D.fill},{name:"line-cap",type:D.lineCap},{name:"line-opacity",type:D.zeroOneNumber},{name:"line-dash-pattern",type:D.numbers},{name:"line-dash-offset",type:D.number},{name:"line-outline-width",type:D.size},{name:"line-outline-color",type:D.color},{name:"line-gradient-stop-colors",type:D.colors},{name:"line-gradient-stop-positions",type:D.percentages},{name:"curve-style",type:D.curveStyle,triggersBounds:N.any,triggersBoundsOfParallelEdges:function(Le,$e){return Le===$e?!1:Le==="bezier"||$e==="bezier"}},{name:"haystack-radius",type:D.zeroOneNumber,triggersBounds:N.any},{name:"source-endpoint",type:D.edgeEndpoint,triggersBounds:N.any},{name:"target-endpoint",type:D.edgeEndpoint,triggersBounds:N.any},{name:"control-point-step-size",type:D.size,triggersBounds:N.any},{name:"control-point-distances",type:D.bidirectionalSizes,triggersBounds:N.any},{name:"control-point-weights",type:D.numbers,triggersBounds:N.any},{name:"segment-distances",type:D.bidirectionalSizes,triggersBounds:N.any},{name:"segment-weights",type:D.numbers,triggersBounds:N.any},{name:"segment-radii",type:D.numbers,triggersBounds:N.any},{name:"radius-type",type:D.radiusType,triggersBounds:N.any},{name:"taxi-turn",type:D.bidirectionalSizeMaybePercent,triggersBounds:N.any},{name:"taxi-turn-min-distance",type:D.size,triggersBounds:N.any},{name:"taxi-direction",type:D.axisDirection,triggersBounds:N.any},{name:"taxi-radius",type:D.number,triggersBounds:N.any},{name:"edge-distances",type:D.edgeDistances,triggersBounds:N.any},{name:"arrow-scale",type:D.positiveNumber,triggersBounds:N.any},{name:"loop-direction",type:D.angle,triggersBounds:N.any},{name:"loop-sweep",type:D.angle,triggersBounds:N.any},{name:"source-distance-from-node",type:D.size,triggersBounds:N.any},{name:"target-distance-from-node",type:D.size,triggersBounds:N.any}],ce=[{name:"ghost",type:D.bool,triggersBounds:N.any},{name:"ghost-offset-x",type:D.bidirectionalSize,triggersBounds:N.any},{name:"ghost-offset-y",type:D.bidirectionalSize,triggersBounds:N.any},{name:"ghost-opacity",type:D.zeroOneNumber}],ge=[{name:"selection-box-color",type:D.color},{name:"selection-box-opacity",type:D.zeroOneNumber},{name:"selection-box-border-color",type:D.color},{name:"selection-box-border-width",type:D.size},{name:"active-bg-color",type:D.color},{name:"active-bg-opacity",type:D.zeroOneNumber},{name:"active-bg-size",type:D.size},{name:"outside-texture-bg-color",type:D.color},{name:"outside-texture-bg-opacity",type:D.zeroOneNumber}],me=[];styfn$2.pieBackgroundN=16,me.push({name:"pie-size",type:D.sizeMaybePercent}),me.push({name:"pie-hole",type:D.sizeMaybePercent}),me.push({name:"pie-start-angle",type:D.angle});for(var Ee=1;Ee<=styfn$2.pieBackgroundN;Ee++)me.push({name:"pie-"+Ee+"-background-color",type:D.color}),me.push({name:"pie-"+Ee+"-background-size",type:D.percent}),me.push({name:"pie-"+Ee+"-background-opacity",type:D.zeroOneNumber});var _e=[];styfn$2.stripeBackgroundN=16,_e.push({name:"stripe-size",type:D.sizeMaybePercent}),_e.push({name:"stripe-direction",type:D.axisDirectionPrimary});for(var ye=1;ye<=styfn$2.stripeBackgroundN;ye++)_e.push({name:"stripe-"+ye+"-background-color",type:D.color}),_e.push({name:"stripe-"+ye+"-background-size",type:D.percent}),_e.push({name:"stripe-"+ye+"-background-opacity",type:D.zeroOneNumber});var be=[],Se=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:D.arrowShape,triggersBounds:N.any},{name:"arrow-color",type:D.color},{name:"arrow-fill",type:D.arrowFill},{name:"arrow-width",type:D.arrowWidth}].forEach(function(Ie){Se.forEach(function(Le){var $e=Le+"-"+Ie.name,qe=Ie.type,at=Ie.triggersBounds;be.push({name:$e,type:qe,triggersBounds:at})})},{});var De=styfn$2.properties=[].concat(V,Z,H,W,Y,ce,F,z,I,q,B,ne,oe,te,se,me,_e,le,ue,be,ge),xe=styfn$2.propertyGroups={behavior:V,transition:Z,visibility:H,overlay:W,underlay:Y,ghost:ce,commonLabel:F,labelDimensions:z,mainLabel:I,sourceLabel:q,targetLabel:B,nodeBody:ne,nodeBorder:oe,nodeOutline:te,backgroundImage:se,pie:me,stripe:_e,compound:le,edgeLine:ue,edgeArrow:be,core:ge},pe=styfn$2.propertyGroupNames={},we=styfn$2.propertyGroupKeys=Object.keys(xe);we.forEach(function(Ie){pe[Ie]=xe[Ie].map(function(Le){return Le.name}),xe[Ie].forEach(function(Le){return Le.groupKey=Ie})});var Oe=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=De.map(function(Ie){return Ie.name});for(var Ce=0;Ce<De.length;Ce++){var Pe=De[Ce];De[Pe.name]=Pe}for(var Ne=0;Ne<Oe.length;Ne++){var Te=Oe[Ne],ze=De[Te.pointsTo],Fe={name:Te.name,alias:!0,pointsTo:ze};De.push(Fe),De[Te.name]=Fe}})();styfn$2.getDefaultProperty=function(_){return this.getDefaultProperties()[_]};styfn$2.getDefaultProperties=function(){var _=this._private;if(_.defaultProperties!=null)return _.defaultProperties;for(var v=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(N,D){for(var I=1;I<=styfn$2.pieBackgroundN;I++){var q=D.name.replace("{{i}}",I),B=D.value;N[q]=B}return N},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(N,D){for(var I=1;I<=styfn$2.stripeBackgroundN;I++){var q=D.name.replace("{{i}}",I),B=D.value;N[q]=B}return N},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(N,D){return styfn$2.arrowPrefixes.forEach(function(I){var q=I+"-"+D.name,B=D.value;N[q]=B}),N},{})),S={},R=0;R<this.properties.length;R++){var T=this.properties[R];if(!T.pointsTo){var A=T.name,k=v[A],M=this.parse(A,k);S[A]=M}}return _.defaultProperties=S,_.defaultProperties};styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$1={};styfn$1.parse=function(_,v,S,R){var T=this;if(fn$6(v))return T.parseImplWarn(_,v,S,R);var A=R==="mapping"||R===!0||R===!1||R==null?"dontcare":R,k=S?"t":"f",M=""+v,N=hashStrings(_,M,k,A),D=T.propCache=T.propCache||[],I;return(I=D[N])||(I=D[N]=T.parseImplWarn(_,v,S,R)),(S||R==="mapping")&&(I=copy(I),I&&(I.value=copy(I.value))),I};styfn$1.parseImplWarn=function(_,v,S,R){var T=this.parseImpl(_,v,S,R);return!T&&v!=null&&warn("The style property `".concat(_,": ").concat(v,"` is invalid")),T&&(T.name==="width"||T.name==="height")&&v==="label"&&warn("The style value of `label` is deprecated for `"+T.name+"`"),T};styfn$1.parseImpl=function(_,v,S,R){var T=this;_=camel2dash(_);var A=T.properties[_],k=v,M=T.types;if(!A||v===void 0)return null;A.alias&&(A=A.pointsTo,_=A.name);var N=string$1(v);N&&(v=v.trim());var D=A.type;if(!D)return null;if(S&&(v===""||v===null))return{name:_,value:v,bypass:!0,deleteBypass:!0};if(fn$6(v))return{name:_,value:v,strValue:"fn",mapped:M.fn,bypass:S};var I,q;if(!(!N||R||v.length<7||v[1]!=="a")){if(v.length>=7&&v[0]==="d"&&(I=new RegExp(M.data.regex).exec(v))){if(S)return!1;var B=M.data;return{name:_,value:I,strValue:""+v,mapped:B,field:I[1],bypass:S}}else if(v.length>=10&&v[0]==="m"&&(q=new RegExp(M.mapData.regex).exec(v))){if(S||D.multiple)return!1;var z=M.mapData;if(!(D.color||D.number))return!1;var F=this.parse(_,q[4]);if(!F||F.mapped)return!1;var V=this.parse(_,q[5]);if(!V||V.mapped)return!1;if(F.pfValue===V.pfValue||F.strValue===V.strValue)return warn("`"+_+": "+v+"` is not a valid mapper because the output range is zero; converting to `"+_+": "+F.strValue+"`"),this.parse(_,F.strValue);if(D.color){var H=F.value,W=V.value,Y=H[0]===W[0]&&H[1]===W[1]&&H[2]===W[2]&&(H[3]===W[3]||(H[3]==null||H[3]===1)&&(W[3]==null||W[3]===1));if(Y)return!1}return{name:_,value:q,strValue:""+v,mapped:z,field:q[1],fieldMin:parseFloat(q[2]),fieldMax:parseFloat(q[3]),valueMin:F.value,valueMax:V.value,bypass:S}}}if(D.multiple&&R!=="multiple"){var Z;if(N?Z=v.split(/\s+/):array(v)?Z=v:Z=[v],D.evenMultiple&&Z.length%2!==0)return null;for(var J=[],ne=[],oe=[],te="",se=!1,le=0;le<Z.length;le++){var ue=T.parse(_,Z[le],S,"multiple");se=se||string$1(ue.value),J.push(ue.value),oe.push(ue.pfValue!=null?ue.pfValue:ue.value),ne.push(ue.units),te+=(le>0?" ":"")+ue.strValue}return D.validate&&!D.validate(J,ne)?null:D.singleEnum&&se?J.length===1&&string$1(J[0])?{name:_,value:J[0],strValue:J[0],bypass:S}:null:{name:_,value:J,pfValue:oe,strValue:te,bypass:S,units:ne}}var ce=function(){for(var Fe=0;Fe<D.enums.length;Fe++){var Ie=D.enums[Fe];if(Ie===v)return{name:_,value:v,strValue:""+v,bypass:S}}return null};if(D.number){var ge,me="px";if(D.units&&(ge=D.units),D.implicitUnits&&(me=D.implicitUnits),!D.unitless)if(N){var Ee="px|em"+(D.allowPercent?"|\\%":"");ge&&(Ee=ge);var _e=v.match("^("+number$2+")("+Ee+")?$");_e&&(v=_e[1],ge=_e[2]||me)}else(!ge||D.implicitUnits)&&(ge=me);if(v=parseFloat(v),isNaN(v)&&D.enums===void 0)return null;if(isNaN(v)&&D.enums!==void 0)return v=k,ce();if(D.integer&&!integer(v)||D.min!==void 0&&(v<D.min||D.strictMin&&v===D.min)||D.max!==void 0&&(v>D.max||D.strictMax&&v===D.max))return null;var ye={name:_,value:v,strValue:""+v+(ge||""),units:ge,bypass:S};return D.unitless||ge!=="px"&&ge!=="em"?ye.pfValue=v:ye.pfValue=ge==="px"||!ge?v:this.getEmSizeInPixels()*v,(ge==="ms"||ge==="s")&&(ye.pfValue=ge==="ms"?v:1e3*v),(ge==="deg"||ge==="rad")&&(ye.pfValue=ge==="rad"?v:deg2rad(v)),ge==="%"&&(ye.pfValue=v/100),ye}else if(D.propList){var be=[],Se=""+v;if(Se!=="none"){for(var De=Se.split(/\s*,\s*|\s+/),xe=0;xe<De.length;xe++){var pe=De[xe].trim();T.properties[pe]?be.push(pe):warn("`"+pe+"` is not a valid property name")}if(be.length===0)return null}return{name:_,value:be,strValue:be.length===0?"none":be.join(" "),bypass:S}}else if(D.color){var we=color2tuple(v);return we?{name:_,value:we,pfValue:we,strValue:"rgb("+we[0]+","+we[1]+","+we[2]+")",bypass:S}:null}else if(D.regex||D.regexes){if(D.enums){var Oe=ce();if(Oe)return Oe}for(var Ce=D.regexes?D.regexes:[D.regex],Pe=0;Pe<Ce.length;Pe++){var Ne=new RegExp(Ce[Pe]),Te=Ne.exec(v);if(Te)return{name:_,value:D.singleRegexMatchValue?Te[1]:Te,strValue:""+v,bypass:S}}return null}else return D.string?{name:_,value:""+v,strValue:""+v,bypass:S}:D.enums?ce():null};var _Style=function(v){if(!(this instanceof _Style))return new _Style(v);if(!core$2(v)){error("A style must have a core reference");return}this._private={cy:v,coreStyle:{}},this.length=0,this.resetToDefault()},styfn=_Style.prototype;styfn.instanceString=function(){return"style"};styfn.clear=function(){for(var _=this._private,v=_.cy,S=v.elements(),R=0;R<this.length;R++)this[R]=void 0;return this.length=0,_.contextStyles={},_.propDiffs={},this.cleanElements(S,!0),S.forEach(function(T){var A=T[0]._private;A.styleDirty=!0,A.appliedInitStyle=!1}),this};styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};styfn.core=function(_){return this._private.coreStyle[_]||this.getDefaultProperty(_)};styfn.selector=function(_){var v=_==="core"?null:new Selector(_),S=this.length++;return this[S]={selector:v,properties:[],mappedProperties:[],index:S},this};styfn.css=function(){var _=this,v=arguments;if(v.length===1)for(var S=v[0],R=0;R<_.properties.length;R++){var T=_.properties[R],A=S[T.name];A===void 0&&(A=S[dash2camel(T.name)]),A!==void 0&&this.cssRule(T.name,A)}else v.length===2&&this.cssRule(v[0],v[1]);return this};styfn.style=styfn.css;styfn.cssRule=function(_,v){var S=this.parse(_,v);if(S){var R=this.length-1;this[R].properties.push(S),this[R].properties[S.name]=S,S.name.match(/pie-(\d+)-background-size/)&&S.value&&(this._private.hasPie=!0),S.name.match(/stripe-(\d+)-background-size/)&&S.value&&(this._private.hasStripe=!0),S.mapped&&this[R].mappedProperties.push(S);var T=!this[R].selector;T&&(this._private.coreStyle[S.name]=S)}return this};styfn.append=function(_){return stylesheet(_)?_.appendToStyle(this):array(_)?this.appendFromJson(_):string$1(_)&&this.appendFromString(_),this};_Style.fromJson=function(_,v){var S=new _Style(_);return S.fromJson(v),S};_Style.fromString=function(_,v){return new _Style(_).fromString(v)};[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach(function(_){extend(styfn,_)});_Style.types=styfn.types;_Style.properties=styfn.properties;_Style.propertyGroups=styfn.propertyGroups;_Style.propertyGroupNames=styfn.propertyGroupNames;_Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$2={style:function(v){if(v){var S=this.setStyle(v);S.update()}return this._private.style},setStyle:function(v){var S=this._private;return stylesheet(v)?S.style=v.generateStyle(this):array(v)?S.style=_Style.fromJson(this,v):string$1(v)?S.style=_Style.fromString(this,v):S.style=_Style(this),S.style},updateStyle:function(){this.mutableElements().updateStyle()}},defaultSelectionType="single",corefn$1={autolock:function(v){if(v!==void 0)this._private.autolock=!!v;else return this._private.autolock;return this},autoungrabify:function(v){if(v!==void 0)this._private.autoungrabify=!!v;else return this._private.autoungrabify;return this},autounselectify:function(v){if(v!==void 0)this._private.autounselectify=!!v;else return this._private.autounselectify;return this},selectionType:function(v){var S=this._private;if(S.selectionType==null&&(S.selectionType=defaultSelectionType),v!==void 0)(v==="additive"||v==="single")&&(S.selectionType=v);else return S.selectionType;return this},panningEnabled:function(v){if(v!==void 0)this._private.panningEnabled=!!v;else return this._private.panningEnabled;return this},userPanningEnabled:function(v){if(v!==void 0)this._private.userPanningEnabled=!!v;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(v){if(v!==void 0)this._private.zoomingEnabled=!!v;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(v){if(v!==void 0)this._private.userZoomingEnabled=!!v;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(v){if(v!==void 0)this._private.boxSelectionEnabled=!!v;else return this._private.boxSelectionEnabled;return this},pan:function(){var v=arguments,S=this._private.pan,R,T,A,k,M;switch(v.length){case 0:return S;case 1:if(string$1(v[0]))return R=v[0],S[R];if(plainObject(v[0])){if(!this._private.panningEnabled)return this;A=v[0],k=A.x,M=A.y,number$1(k)&&(S.x=k),number$1(M)&&(S.y=M),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;R=v[0],T=v[1],(R==="x"||R==="y")&&number$1(T)&&(S[R]=T),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(v,S){var R=arguments,T=this._private.pan,A,k,M,N,D;if(!this._private.panningEnabled)return this;switch(R.length){case 1:plainObject(v)&&(M=R[0],N=M.x,D=M.y,number$1(N)&&(T.x+=N),number$1(D)&&(T.y+=D),this.emit("pan viewport"));break;case 2:A=v,k=S,(A==="x"||A==="y")&&number$1(k)&&(T[A]+=k),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(v,S){var R=this.getFitViewport(v,S);if(R){var T=this._private;T.zoom=R.zoom,T.pan=R.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(v,S){if(number$1(v)&&S===void 0&&(S=v,v=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var R;if(string$1(v)){var T=v;v=this.$(T)}else if(boundingBox(v)){var A=v;R={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2},R.w=R.x2-R.x1,R.h=R.y2-R.y1}else elementOrCollection(v)||(v=this.mutableElements());if(!(elementOrCollection(v)&&v.empty())){R=R||v.boundingBox();var k=this.width(),M=this.height(),N;if(S=number$1(S)?S:0,!isNaN(k)&&!isNaN(M)&&k>0&&M>0&&!isNaN(R.w)&&!isNaN(R.h)&&R.w>0&&R.h>0){N=Math.min((k-2*S)/R.w,(M-2*S)/R.h),N=N>this._private.maxZoom?this._private.maxZoom:N,N=N<this._private.minZoom?this._private.minZoom:N;var D={x:(k-N*(R.x1+R.x2))/2,y:(M-N*(R.y1+R.y2))/2};return{zoom:N,pan:D}}}}},zoomRange:function(v,S){var R=this._private;if(S==null){var T=v;v=T.min,S=T.max}return number$1(v)&&number$1(S)&&v<=S?(R.minZoom=v,R.maxZoom=S):number$1(v)&&S===void 0&&v<=R.maxZoom?R.minZoom=v:number$1(S)&&v===void 0&&S>=R.minZoom&&(R.maxZoom=S),this},minZoom:function(v){return v===void 0?this._private.minZoom:this.zoomRange({min:v})},maxZoom:function(v){return v===void 0?this._private.maxZoom:this.zoomRange({max:v})},getZoomedViewport:function(v){var S=this._private,R=S.pan,T=S.zoom,A,k,M=!1;if(S.zoomingEnabled||(M=!0),number$1(v)?k=v:plainObject(v)&&(k=v.level,v.position!=null?A=modelToRenderedPosition$1(v.position,T,R):v.renderedPosition!=null&&(A=v.renderedPosition),A!=null&&!S.panningEnabled&&(M=!0)),k=k>S.maxZoom?S.maxZoom:k,k=k<S.minZoom?S.minZoom:k,M||!number$1(k)||k===T||A!=null&&(!number$1(A.x)||!number$1(A.y)))return null;if(A!=null){var N=R,D=T,I=k,q={x:-I/D*(A.x-N.x)+A.x,y:-I/D*(A.y-N.y)+A.y};return{zoomed:!0,panned:!0,zoom:I,pan:q}}else return{zoomed:!0,panned:!1,zoom:k,pan:R}},zoom:function(v){if(v===void 0)return this._private.zoom;var S=this.getZoomedViewport(v),R=this._private;return S==null||!S.zoomed?this:(R.zoom=S.zoom,S.panned&&(R.pan.x=S.pan.x,R.pan.y=S.pan.y),this.emit("zoom"+(S.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(v){var S=this._private,R=!0,T=!0,A=[],k=!1,M=!1;if(!v)return this;if(number$1(v.zoom)||(R=!1),plainObject(v.pan)||(T=!1),!R&&!T)return this;if(R){var N=v.zoom;N<S.minZoom||N>S.maxZoom||!S.zoomingEnabled?k=!0:(S.zoom=N,A.push("zoom"))}if(T&&(!k||!v.cancelOnFailedZoom)&&S.panningEnabled){var D=v.pan;number$1(D.x)&&(S.pan.x=D.x,M=!1),number$1(D.y)&&(S.pan.y=D.y,M=!1),M||A.push("pan")}return A.length>0&&(A.push("viewport"),this.emit(A.join(" ")),this.notify("viewport")),this},center:function(v){var S=this.getCenterPan(v);return S&&(this._private.pan=S,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(v,S){if(this._private.panningEnabled){if(string$1(v)){var R=v;v=this.mutableElements().filter(R)}else elementOrCollection(v)||(v=this.mutableElements());if(v.length!==0){var T=v.boundingBox(),A=this.width(),k=this.height();S=S===void 0?this._private.zoom:S;var M={x:(A-S*(T.x1+T.x2))/2,y:(k-S*(T.y1+T.y2))/2};return M}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var v=this._private,S=v.container,R=this;return v.sizeCache=v.sizeCache||(S?(function(){var T=R.window().getComputedStyle(S),A=function(M){return parseFloat(T.getPropertyValue(M))};return{width:S.clientWidth-A("padding-left")-A("padding-right"),height:S.clientHeight-A("padding-top")-A("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var v=this._private.pan,S=this._private.zoom,R=this.renderedExtent(),T={x1:(R.x1-v.x)/S,x2:(R.x2-v.x)/S,y1:(R.y1-v.y)/S,y2:(R.y2-v.y)/S};return T.w=T.x2-T.x1,T.h=T.y2-T.y1,T},renderedExtent:function(){var v=this.width(),S=this.height();return{x1:0,y1:0,x2:v,y2:S,w:v,h:S}},multiClickDebounceTime:function(v){if(v)this._private.multiClickDebounceTime=v;else return this._private.multiClickDebounceTime;return this}};corefn$1.centre=corefn$1.center;corefn$1.autolockNodes=corefn$1.autolock;corefn$1.autoungrabifyNodes=corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data;fn.removeAttr=fn.removeData;var Core=function(v){var S=this;v=extend({},v);var R=v.container;R&&!htmlElement(R)&&htmlElement(R[0])&&(R=R[0]);var T=R?R._cyreg:null;T=T||{},T&&T.cy&&(T.cy.destroy(),T={});var A=T.readies=T.readies||[];R&&(R._cyreg=T),T.cy=S;var k=_window!==void 0&&R!==void 0&&!v.headless,M=v;M.layout=extend({name:k?"grid":"null"},M.layout),M.renderer=extend({name:k?"canvas":"null"},M.renderer);var N=function(F,V,H){return V!==void 0?V:H!==void 0?H:F},D=this._private={container:R,ready:!1,options:M,elements:new Collection$3(this),listeners:[],aniEles:new Collection$3(this),data:M.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:N(!0,M.zoomingEnabled),userZoomingEnabled:N(!0,M.userZoomingEnabled),panningEnabled:N(!0,M.panningEnabled),userPanningEnabled:N(!0,M.userPanningEnabled),boxSelectionEnabled:N(!0,M.boxSelectionEnabled),autolock:N(!1,M.autolock,M.autolockNodes),autoungrabify:N(!1,M.autoungrabify,M.autoungrabifyNodes),autounselectify:N(!1,M.autounselectify),styleEnabled:M.styleEnabled===void 0?k:M.styleEnabled,zoom:number$1(M.zoom)?M.zoom:1,pan:{x:plainObject(M.pan)&&number$1(M.pan.x)?M.pan.x:0,y:plainObject(M.pan)&&number$1(M.pan.y)?M.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:N(250,M.multiClickDebounceTime)};this.createEmitter(),this.selectionType(M.selectionType),this.zoomRange({min:M.minZoom,max:M.maxZoom});var I=function(F,V){var H=F.some(promise);if(H)return Promise$1.all(F).then(V);V(F)};D.styleEnabled&&S.setStyle([]);var q=extend({},M,M.renderer);S.initRenderer(q);var B=function(F,V,H){S.notifications(!1);var W=S.mutableElements();W.length>0&&W.remove(),F!=null&&(plainObject(F)||array(F))&&S.add(F),S.one("layoutready",function(Z){S.notifications(!0),S.emit(Z),S.one("load",V),S.emitAndNotify("load")}).one("layoutstop",function(){S.one("done",H),S.emit("done")});var Y=extend({},S._private.options.layout);Y.eles=S.elements(),S.layout(Y).run()};I([M.style,M.elements],function(z){var F=z[0],V=z[1];D.styleEnabled&&S.style().append(F),B(V,function(){S.startAnimationLoop(),D.ready=!0,fn$6(M.ready)&&S.on("ready",M.ready);for(var H=0;H<A.length;H++){var W=A[H];S.on("ready",W)}T&&(T.readies=[]),S.emit("ready")},M.done)})},corefn=Core.prototype;extend(corefn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(v){return this.isReady()?this.emitter().emit("ready",[],v):this.on("ready",v),this},destroy:function(){var v=this;if(!v.destroyed())return v.stopAnimationLoop(),v.destroyRenderer(),this.emit("destroy"),v._private.destroyed=!0,v},hasElementWithId:function(v){return this._private.elements.hasElementWithId(v)},getElementById:function(v){return this._private.elements.getElementById(v)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(v){return this._private.elements.merge(v),this},removeFromPool:function(v){return this._private.elements.unmerge(v),this},container:function(){return this._private.container||null},window:function(){var v=this._private.container;if(v==null)return _window;var S=this._private.container.ownerDocument;return S===void 0||S==null?_window:S.defaultView||_window},mount:function(v){if(v!=null){var S=this,R=S._private,T=R.options;return!htmlElement(v)&&htmlElement(v[0])&&(v=v[0]),S.stopAnimationLoop(),S.destroyRenderer(),R.container=v,R.styleEnabled=!0,S.invalidateSize(),S.initRenderer(extend({},T,T.renderer,{name:T.renderer.name==="null"?"canvas":T.renderer.name})),S.startAnimationLoop(),S.style(T.style),S.emit("mount"),S}},unmount:function(){var v=this;return v.stopAnimationLoop(),v.destroyRenderer(),v.initRenderer({name:"null"}),v.emit("unmount"),v},options:function(){return copy(this._private.options)},json:function(v){var S=this,R=S._private,T=S.mutableElements(),A=function(J){return S.getElementById(J.id())};if(plainObject(v)){if(S.startBatch(),v.elements){var k={},M=function(J,ne){for(var oe=[],te=[],se=0;se<J.length;se++){var le=J[se];if(!le.data.id){warn("cy.json() cannot handle elements without an ID attribute");continue}var ue=""+le.data.id,ce=S.getElementById(ue);k[ue]=!0,ce.length!==0?te.push({ele:ce,json:le}):(ne&&(le.group=ne),oe.push(le))}S.add(oe);for(var ge=0;ge<te.length;ge++){var me=te[ge],Ee=me.ele,_e=me.json;Ee.json(_e)}};if(array(v.elements))M(v.elements);else for(var N=["nodes","edges"],D=0;D<N.length;D++){var I=N[D],q=v.elements[I];array(q)&&M(q,I)}var B=S.collection();T.filter(function(Z){return!k[Z.id()]}).forEach(function(Z){Z.isParent()?B.merge(Z):Z.remove()}),B.forEach(function(Z){return Z.children().move({parent:null})}),B.forEach(function(Z){return A(Z).remove()})}v.style&&S.style(v.style),v.zoom!=null&&v.zoom!==R.zoom&&S.zoom(v.zoom),v.pan&&(v.pan.x!==R.pan.x||v.pan.y!==R.pan.y)&&S.pan(v.pan),v.data&&S.data(v.data);for(var z=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],F=0;F<z.length;F++){var V=z[F];v[V]!=null&&S[V](v[V])}return S.endBatch(),this}else{var H=!!v,W={};H?W.elements=this.elements().map(function(Z){return Z.json()}):(W.elements={},T.forEach(function(Z){var J=Z.group();W.elements[J]||(W.elements[J]=[]),W.elements[J].push(Z.json())})),this._private.styleEnabled&&(W.style=S.style().json()),W.data=copy(S.data());var Y=R.options;return W.zoomingEnabled=R.zoomingEnabled,W.userZoomingEnabled=R.userZoomingEnabled,W.zoom=R.zoom,W.minZoom=R.minZoom,W.maxZoom=R.maxZoom,W.panningEnabled=R.panningEnabled,W.userPanningEnabled=R.userPanningEnabled,W.pan=copy(R.pan),W.boxSelectionEnabled=R.boxSelectionEnabled,W.renderer=copy(Y.renderer),W.hideEdgesOnViewport=Y.hideEdgesOnViewport,W.textureOnViewport=Y.textureOnViewport,W.wheelSensitivity=Y.wheelSensitivity,W.motionBlur=Y.motionBlur,W.multiClickDebounceTime=Y.multiClickDebounceTime,W}}});corefn.$id=corefn.getElementById;[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn].forEach(function(_){extend(corefn,_)});var defaults$7={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function(v){return v.scratch("breadthfirst")},setInfo=function(v,S){return v.scratch("breadthfirst",S)};function BreadthFirstLayout(_){this.options=extend({},defaults$7,deprecatedOptionDefaults,_)}BreadthFirstLayout.prototype.run=function(){var _=this.options,v=_.cy,S=_.eles,R=S.nodes().filter(function(_t){return _t.isChildless()}),T=S,A=_.directed,k=_.acyclic||_.maximal||_.maximalAdjustments>0,M=!!_.boundingBox,N=makeBoundingBox(M?_.boundingBox:structuredClone(v.extent())),D;if(elementOrCollection(_.roots))D=_.roots;else if(array(_.roots)){for(var I=[],q=0;q<_.roots.length;q++){var B=_.roots[q],z=v.getElementById(B);I.push(z)}D=v.collection(I)}else if(string$1(_.roots))D=v.$(_.roots);else if(A)D=R.roots();else{var F=S.components();D=v.collection();for(var V=function(){var ct=F[H],wt=ct.maxDegree(!1),xt=ct.filter(function(At){return At.degree(!1)===wt});D=D.add(xt)},H=0;H<F.length;H++)V()}var W=[],Y={},Z=function(ct,wt){W[wt]==null&&(W[wt]=[]);var xt=W[wt].length;W[wt].push(ct),setInfo(ct,{index:xt,depth:wt})},J=function(ct,wt){var xt=getInfo(ct),At=xt.depth,Ct=xt.index;W[At][Ct]=null,ct.isChildless()&&Z(ct,wt)};T.bfs({roots:D,directed:_.directed,visit:function(ct,wt,xt,At,Ct){var $t=ct[0],Ut=$t.id();$t.isChildless()&&Z($t,Ct),Y[Ut]=!0}});for(var ne=[],oe=0;oe<R.length;oe++){var te=R[oe];Y[te.id()]||ne.push(te)}var se=function(ct){for(var wt=W[ct],xt=0;xt<wt.length;xt++){var At=wt[xt];if(At==null){wt.splice(xt,1),xt--;continue}setInfo(At,{depth:ct,index:xt})}},le=function(ct,wt){for(var xt=getInfo(ct),At=ct.incomers().filter(function(Tt){return Tt.isNode()&&S.has(Tt)}),Ct=-1,$t=ct.id(),Ut=0;Ut<At.length;Ut++){var Xt=At[Ut],Ot=getInfo(Xt);Ct=Math.max(Ct,Ot.depth)}if(xt.depth<=Ct){if(!_.acyclic&&wt[$t])return null;var qt=Ct+1;return J(ct,qt),wt[$t]=qt,!0}return!1};if(A&&k){var ue=[],ce={},ge=function(ct){return ue.push(ct)},me=function(){return ue.shift()};for(R.forEach(function(_t){return ue.push(_t)});ue.length>0;){var Ee=me(),_e=le(Ee,ce);if(_e)Ee.outgoers().filter(function(_t){return _t.isNode()&&S.has(_t)}).forEach(ge);else if(_e===null){warn("Detected double maximal shift for node `"+Ee.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var ye=0;if(_.avoidOverlap)for(var be=0;be<R.length;be++){var Se=R[be],De=Se.layoutDimensions(_),xe=De.w,pe=De.h;ye=Math.max(ye,xe,pe)}var we={},Oe=function(ct){if(we[ct.id()])return we[ct.id()];for(var wt=getInfo(ct).depth,xt=ct.neighborhood(),At=0,Ct=0,$t=0;$t<xt.length;$t++){var Ut=xt[$t];if(!(Ut.isEdge()||Ut.isParent()||!R.has(Ut))){var Xt=getInfo(Ut);if(Xt!=null){var Ot=Xt.index,qt=Xt.depth;if(!(Ot==null||qt==null)){var Tt=W[qt].length;qt<wt&&(At+=Ot/Tt,Ct++)}}}}return Ct=Math.max(1,Ct),At=At/Ct,Ct===0&&(At=0),we[ct.id()]=At,At},Ce=function(ct,wt){var xt=Oe(ct),At=Oe(wt),Ct=xt-At;return Ct===0?ascending(ct.id(),wt.id()):Ct};_.depthSort!==void 0&&(Ce=_.depthSort);for(var Pe=W.length,Ne=0;Ne<Pe;Ne++)W[Ne].sort(Ce),se(Ne);for(var Te=[],ze=0;ze<ne.length;ze++)Te.push(ne[ze]);var Fe=function(){for(var ct=0;ct<Pe;ct++)se(ct)};Te.length&&(W.unshift(Te),Pe=W.length,Fe());for(var Ie=0,Le=0;Le<Pe;Le++)Ie=Math.max(W[Le].length,Ie);var $e={x:N.x1+N.w/2,y:N.y1+N.h/2},qe=R.reduce(function(_t,ct){return(function(wt){return{w:_t.w===-1?wt.w:(_t.w+wt.w)/2,h:_t.h===-1?wt.h:(_t.h+wt.h)/2}})(ct.boundingBox({includeLabels:_.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),at=Math.max(Pe===1?0:M?(N.h-_.padding*2-qe.h)/(Pe-1):(N.h-_.padding*2-qe.h)/(Pe+1),ye),lt=W.reduce(function(_t,ct){return Math.max(_t,ct.length)},0),vt=function(ct){var wt=getInfo(ct),xt=wt.depth,At=wt.index;if(_.circle){var Ct=Math.min(N.w/2/Pe,N.h/2/Pe);Ct=Math.max(Ct,ye);var $t=Ct*xt+Ct-(Pe>0&&W[0].length<=3?Ct/2:0),Ut=2*Math.PI/W[xt].length*At;return xt===0&&W[0].length===1&&($t=1),{x:$e.x+$t*Math.cos(Ut),y:$e.y+$t*Math.sin(Ut)}}else{var Xt=W[xt].length,Ot=Math.max(Xt===1?0:M?(N.w-_.padding*2-qe.w)/((_.grid?lt:Xt)-1):(N.w-_.padding*2-qe.w)/((_.grid?lt:Xt)+1),ye),qt={x:$e.x+(At+1-(Xt+1)/2)*Ot,y:$e.y+(xt+1-(Pe+1)/2)*at};return qt}},yt={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(yt).indexOf(_.direction)===-1&&error("Invalid direction '".concat(_.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(yt).join(", ")));var Ze=function(ct){return rotatePosAndSkewByBox(vt(ct),N,yt[_.direction])};return S.nodes().layoutPositions(this,_,Ze),this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function CircleLayout(_){this.options=extend({},defaults$6,_)}CircleLayout.prototype.run=function(){var _=this.options,v=_,S=_.cy,R=v.eles,T=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise,A=R.nodes().not(":parent");v.sort&&(A=A.sort(v.sort));for(var k=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:S.width(),h:S.height()}),M={x:k.x1+k.w/2,y:k.y1+k.h/2},N=v.sweep===void 0?2*Math.PI-2*Math.PI/A.length:v.sweep,D=N/Math.max(1,A.length-1),I,q=0,B=0;B<A.length;B++){var z=A[B],F=z.layoutDimensions(v),V=F.w,H=F.h;q=Math.max(q,V,H)}if(number$1(v.radius)?I=v.radius:A.length<=1?I=0:I=Math.min(k.h,k.w)/2-q,A.length>1&&v.avoidOverlap){q*=1.75;var W=Math.cos(D)-Math.cos(0),Y=Math.sin(D)-Math.sin(0),Z=Math.sqrt(q*q/(W*W+Y*Y));I=Math.max(Z,I)}var J=function(oe,te){var se=v.startAngle+te*D*(T?1:-1),le=I*Math.cos(se),ue=I*Math.sin(se),ce={x:M.x+le,y:M.y+ue};return ce};return R.nodes().layoutPositions(this,v,J),this};var defaults$5={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(v){return v.degree()},levelWidth:function(v){return v.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function ConcentricLayout(_){this.options=extend({},defaults$5,_)}ConcentricLayout.prototype.run=function(){for(var _=this.options,v=_,S=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise,R=_.cy,T=v.eles,A=T.nodes().not(":parent"),k=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:R.width(),h:R.height()}),M={x:k.x1+k.w/2,y:k.y1+k.h/2},N=[],D=0,I=0;I<A.length;I++){var q=A[I],B=void 0;B=v.concentric(q),N.push({value:B,node:q}),q._private.scratch.concentric=B}A.updateStyle();for(var z=0;z<A.length;z++){var F=A[z],V=F.layoutDimensions(v);D=Math.max(D,V.w,V.h)}N.sort(function(at,lt){return lt.value-at.value});for(var H=v.levelWidth(A),W=[[]],Y=W[0],Z=0;Z<N.length;Z++){var J=N[Z];if(Y.length>0){var ne=Math.abs(Y[0].value-J.value);ne>=H&&(Y=[],W.push(Y))}Y.push(J)}var oe=D+v.minNodeSpacing;if(!v.avoidOverlap){var te=W.length>0&&W[0].length>1,se=Math.min(k.w,k.h)/2-oe,le=se/(W.length+te?1:0);oe=Math.min(oe,le)}for(var ue=0,ce=0;ce<W.length;ce++){var ge=W[ce],me=v.sweep===void 0?2*Math.PI-2*Math.PI/ge.length:v.sweep,Ee=ge.dTheta=me/Math.max(1,ge.length-1);if(ge.length>1&&v.avoidOverlap){var _e=Math.cos(Ee)-Math.cos(0),ye=Math.sin(Ee)-Math.sin(0),be=Math.sqrt(oe*oe/(_e*_e+ye*ye));ue=Math.max(be,ue)}ge.r=ue,ue+=oe}if(v.equidistant){for(var Se=0,De=0,xe=0;xe<W.length;xe++){var pe=W[xe],we=pe.r-De;Se=Math.max(Se,we)}De=0;for(var Oe=0;Oe<W.length;Oe++){var Ce=W[Oe];Oe===0&&(De=Ce.r),Ce.r=De,De+=Se}}for(var Pe={},Ne=0;Ne<W.length;Ne++)for(var Te=W[Ne],ze=Te.dTheta,Fe=Te.r,Ie=0;Ie<Te.length;Ie++){var Le=Te[Ie],$e=v.startAngle+(S?1:-1)*ze*Ie,qe={x:M.x+Fe*Math.cos($e),y:M.y+Fe*Math.sin($e)};Pe[Le.node.id()]=qe}return T.nodes().layoutPositions(this,v,function(at){var lt=at.id();return Pe[lt]}),this};var DEBUG,defaults$4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(v,S){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(v){return 2048},nodeOverlap:4,idealEdgeLength:function(v){return 32},edgeElasticity:function(v){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(_){this.options=extend({},defaults$4,_),this.options.layout=this;var v=this.options.eles.nodes(),S=this.options.eles.edges(),R=S.filter(function(T){var A=T.source().data("id"),k=T.target().data("id"),M=v.some(function(D){return D.data("id")===A}),N=v.some(function(D){return D.data("id")===k});return!M||!N});this.options.eles=this.options.eles.not(R)}CoseLayout.prototype.run=function(){var _=this.options,v=_.cy,S=this;S.stopped=!1,(_.animate===!0||_.animate===!1)&&S.emit({type:"layoutstart",layout:S}),_.debug===!0?DEBUG=!0:DEBUG=!1;var R=createLayoutInfo(v,S,_);DEBUG&&printLayoutInfo(R),_.randomize&&randomizePositions(R);var T=performanceNow(),A=function(){refreshPositions(R,v,_),_.fit===!0&&v.fit(_.padding)},k=function(B){return!(S.stopped||B>=_.numIter||(step(R,_),R.temperature=R.temperature*_.coolingFactor,R.temperature<_.minTemp))},M=function(){if(_.animate===!0||_.animate===!1)A(),S.one("layoutstop",_.stop),S.emit({type:"layoutstop",layout:S});else{var B=_.eles.nodes(),z=getScaleInBoundsFn(R,_,B);B.layoutPositions(S,_,z)}},N=0,D=!0;if(_.animate===!0){var I=function(){for(var B=0;D&&B<_.refresh;)D=k(N),N++,B++;if(!D)separateComponents(R,_),M();else{var z=performanceNow();z-T>=_.animationThreshold&&A(),requestAnimationFrame$1(I)}};I()}else{for(;D;)D=k(N),N++;separateComponents(R,_),M()}return this};CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(v,S,R){for(var T=R.eles.edges(),A=R.eles.nodes(),k=makeBoundingBox(R.boundingBox?R.boundingBox:{x1:0,y1:0,w:v.width(),h:v.height()}),M={isCompound:v.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:A.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:T.size(),temperature:R.initialTemp,clientWidth:k.w,clientHeight:k.h,boundingBox:k},N=R.eles.components(),D={},I=0;I<N.length;I++)for(var q=N[I],B=0;B<q.length;B++){var z=q[B];D[z.id()]=I}for(var I=0;I<M.nodeSize;I++){var F=A[I],V=F.layoutDimensions(R),H={};H.isLocked=F.locked(),H.id=F.data("id"),H.parentId=F.data("parent"),H.cmptId=D[F.id()],H.children=[],H.positionX=F.position("x"),H.positionY=F.position("y"),H.offsetX=0,H.offsetY=0,H.height=V.w,H.width=V.h,H.maxX=H.positionX+H.width/2,H.minX=H.positionX-H.width/2,H.maxY=H.positionY+H.height/2,H.minY=H.positionY-H.height/2,H.padLeft=parseFloat(F.style("padding")),H.padRight=parseFloat(F.style("padding")),H.padTop=parseFloat(F.style("padding")),H.padBottom=parseFloat(F.style("padding")),H.nodeRepulsion=fn$6(R.nodeRepulsion)?R.nodeRepulsion(F):R.nodeRepulsion,M.layoutNodes.push(H),M.idToIndex[H.id]=I}for(var W=[],Y=0,Z=-1,J=[],I=0;I<M.nodeSize;I++){var F=M.layoutNodes[I],ne=F.parentId;ne!=null?M.layoutNodes[M.idToIndex[ne]].children.push(F.id):(W[++Z]=F.id,J.push(F.id))}for(M.graphSet.push(J);Y<=Z;){var oe=W[Y++],te=M.idToIndex[oe],z=M.layoutNodes[te],se=z.children;if(se.length>0){M.graphSet.push(se);for(var I=0;I<se.length;I++)W[++Z]=se[I]}}for(var I=0;I<M.graphSet.length;I++)for(var le=M.graphSet[I],B=0;B<le.length;B++){var ue=M.idToIndex[le[B]];M.indexToGraph[ue]=I}for(var I=0;I<M.edgeSize;I++){var ce=T[I],ge={};ge.id=ce.data("id"),ge.sourceId=ce.data("source"),ge.targetId=ce.data("target");var me=fn$6(R.idealEdgeLength)?R.idealEdgeLength(ce):R.idealEdgeLength,Ee=fn$6(R.edgeElasticity)?R.edgeElasticity(ce):R.edgeElasticity,_e=M.idToIndex[ge.sourceId],ye=M.idToIndex[ge.targetId],be=M.indexToGraph[_e],Se=M.indexToGraph[ye];if(be!=Se){for(var De=findLCA(ge.sourceId,ge.targetId,M),xe=M.graphSet[De],pe=0,H=M.layoutNodes[_e];xe.indexOf(H.id)===-1;)H=M.layoutNodes[M.idToIndex[H.parentId]],pe++;for(H=M.layoutNodes[ye];xe.indexOf(H.id)===-1;)H=M.layoutNodes[M.idToIndex[H.parentId]],pe++;me*=pe*R.nestingFactor}ge.idealLength=me,ge.elasticity=Ee,M.layoutEdges.push(ge)}return M},findLCA=function(v,S,R){var T=_findLCA_aux(v,S,0,R);return 2>T.count?0:T.graph},_findLCA_aux=function(v,S,R,T){var A=T.graphSet[R];if(-1<A.indexOf(v)&&-1<A.indexOf(S))return{count:2,graph:R};for(var k=0,M=0;M<A.length;M++){var N=A[M],D=T.idToIndex[N],I=T.layoutNodes[D].children;if(I.length!==0){var q=T.indexToGraph[T.idToIndex[I[0]]],B=_findLCA_aux(v,S,q,T);if(B.count!==0)if(B.count===1){if(k++,k===2)break}else return B}}return{count:k,graph:R}},printLayoutInfo,randomizePositions=function(v,S){for(var R=v.clientWidth,T=v.clientHeight,A=0;A<v.nodeSize;A++){var k=v.layoutNodes[A];k.children.length===0&&!k.isLocked&&(k.positionX=Math.random()*R,k.positionY=Math.random()*T)}},getScaleInBoundsFn=function(v,S,R){var T=v.boundingBox,A={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return S.boundingBox&&(R.forEach(function(k){var M=v.layoutNodes[v.idToIndex[k.data("id")]];A.x1=Math.min(A.x1,M.positionX),A.x2=Math.max(A.x2,M.positionX),A.y1=Math.min(A.y1,M.positionY),A.y2=Math.max(A.y2,M.positionY)}),A.w=A.x2-A.x1,A.h=A.y2-A.y1),function(k,M){var N=v.layoutNodes[v.idToIndex[k.data("id")]];if(S.boundingBox){var D=A.w===0?.5:(N.positionX-A.x1)/A.w,I=A.h===0?.5:(N.positionY-A.y1)/A.h;return{x:T.x1+D*T.w,y:T.y1+I*T.h}}else return{x:N.positionX,y:N.positionY}}},refreshPositions=function(v,S,R){var T=R.layout,A=R.eles.nodes(),k=getScaleInBoundsFn(v,R,A);A.positions(k),v.ready!==!0&&(v.ready=!0,T.one("layoutready",R.ready),T.emit({type:"layoutready",layout:this}))},step=function(v,S,R){calculateNodeForces(v,S),calculateEdgeForces(v),calculateGravityForces(v,S),propagateForces(v),updatePositions(v)},calculateNodeForces=function(v,S){for(var R=0;R<v.graphSet.length;R++)for(var T=v.graphSet[R],A=T.length,k=0;k<A;k++)for(var M=v.layoutNodes[v.idToIndex[T[k]]],N=k+1;N<A;N++){var D=v.layoutNodes[v.idToIndex[T[N]]];nodeRepulsion(M,D,v,S)}},randomDistance=function(v){return-1+2*v*Math.random()},nodeRepulsion=function(v,S,R,T){var A=v.cmptId,k=S.cmptId;if(!(A!==k&&!R.isCompound)){var M=S.positionX-v.positionX,N=S.positionY-v.positionY,D=1;M===0&&N===0&&(M=randomDistance(D),N=randomDistance(D));var I=nodesOverlap(v,S,M,N);if(I>0)var q=T.nodeOverlap*I,B=Math.sqrt(M*M+N*N),z=q*M/B,F=q*N/B;else var V=findClippingPoint(v,M,N),H=findClippingPoint(S,-1*M,-1*N),W=H.x-V.x,Y=H.y-V.y,Z=W*W+Y*Y,B=Math.sqrt(Z),q=(v.nodeRepulsion+S.nodeRepulsion)/Z,z=q*W/B,F=q*Y/B;v.isLocked||(v.offsetX-=z,v.offsetY-=F),S.isLocked||(S.offsetX+=z,S.offsetY+=F)}},nodesOverlap=function(v,S,R,T){if(R>0)var A=v.maxX-S.minX;else var A=S.maxX-v.minX;if(T>0)var k=v.maxY-S.minY;else var k=S.maxY-v.minY;return A>=0&&k>=0?Math.sqrt(A*A+k*k):0},findClippingPoint=function(v,S,R){var T=v.positionX,A=v.positionY,k=v.height||1,M=v.width||1,N=R/S,D=k/M,I={};return S===0&&0<R||S===0&&0>R?(I.x=T,I.y=A+k/2,I):0<S&&-1*D<=N&&N<=D?(I.x=T+M/2,I.y=A+M*R/2/S,I):0>S&&-1*D<=N&&N<=D?(I.x=T-M/2,I.y=A-M*R/2/S,I):0<R&&(N<=-1*D||N>=D)?(I.x=T+k*S/2/R,I.y=A+k/2,I):(0>R&&(N<=-1*D||N>=D)&&(I.x=T-k*S/2/R,I.y=A-k/2),I)},calculateEdgeForces=function(v,S){for(var R=0;R<v.edgeSize;R++){var T=v.layoutEdges[R],A=v.idToIndex[T.sourceId],k=v.layoutNodes[A],M=v.idToIndex[T.targetId],N=v.layoutNodes[M],D=N.positionX-k.positionX,I=N.positionY-k.positionY;if(!(D===0&&I===0)){var q=findClippingPoint(k,D,I),B=findClippingPoint(N,-1*D,-1*I),z=B.x-q.x,F=B.y-q.y,V=Math.sqrt(z*z+F*F),H=Math.pow(T.idealLength-V,2)/T.elasticity;if(V!==0)var W=H*z/V,Y=H*F/V;else var W=0,Y=0;k.isLocked||(k.offsetX+=W,k.offsetY+=Y),N.isLocked||(N.offsetX-=W,N.offsetY-=Y)}}},calculateGravityForces=function(v,S){if(S.gravity!==0)for(var R=1,T=0;T<v.graphSet.length;T++){var A=v.graphSet[T],k=A.length;if(T===0)var M=v.clientHeight/2,N=v.clientWidth/2;else var D=v.layoutNodes[v.idToIndex[A[0]]],I=v.layoutNodes[v.idToIndex[D.parentId]],M=I.positionX,N=I.positionY;for(var q=0;q<k;q++){var B=v.layoutNodes[v.idToIndex[A[q]]];if(!B.isLocked){var z=M-B.positionX,F=N-B.positionY,V=Math.sqrt(z*z+F*F);if(V>R){var H=S.gravity*z/V,W=S.gravity*F/V;B.offsetX+=H,B.offsetY+=W}}}}},propagateForces=function(v,S){var R=[],T=0,A=-1;for(R.push.apply(R,v.graphSet[0]),A+=v.graphSet[0].length;T<=A;){var k=R[T++],M=v.idToIndex[k],N=v.layoutNodes[M],D=N.children;if(0<D.length&&!N.isLocked){for(var I=N.offsetX,q=N.offsetY,B=0;B<D.length;B++){var z=v.layoutNodes[v.idToIndex[D[B]]];z.offsetX+=I,z.offsetY+=q,R[++A]=D[B]}N.offsetX=0,N.offsetY=0}}},updatePositions=function(v,S){for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];0<T.children.length&&(T.maxX=void 0,T.minX=void 0,T.maxY=void 0,T.minY=void 0)}for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];if(!(0<T.children.length||T.isLocked)){var A=limitForce(T.offsetX,T.offsetY,v.temperature);T.positionX+=A.x,T.positionY+=A.y,T.offsetX=0,T.offsetY=0,T.minX=T.positionX-T.width,T.maxX=T.positionX+T.width,T.minY=T.positionY-T.height,T.maxY=T.positionY+T.height,_updateAncestryBoundaries(T,v)}}for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];0<T.children.length&&!T.isLocked&&(T.positionX=(T.maxX+T.minX)/2,T.positionY=(T.maxY+T.minY)/2,T.width=T.maxX-T.minX,T.height=T.maxY-T.minY)}},limitForce=function(v,S,R){var T=Math.sqrt(v*v+S*S);if(T>R)var A={x:R*v/T,y:R*S/T};else var A={x:v,y:S};return A},_updateAncestryBoundaries=function(v,S){var R=v.parentId;if(R!=null){var T=S.layoutNodes[S.idToIndex[R]],A=!1;if((T.maxX==null||v.maxX+T.padRight>T.maxX)&&(T.maxX=v.maxX+T.padRight,A=!0),(T.minX==null||v.minX-T.padLeft<T.minX)&&(T.minX=v.minX-T.padLeft,A=!0),(T.maxY==null||v.maxY+T.padBottom>T.maxY)&&(T.maxY=v.maxY+T.padBottom,A=!0),(T.minY==null||v.minY-T.padTop<T.minY)&&(T.minY=v.minY-T.padTop,A=!0),A)return _updateAncestryBoundaries(T,S)}},separateComponents=function(v,S){for(var R=v.layoutNodes,T=[],A=0;A<R.length;A++){var k=R[A],M=k.cmptId,N=T[M]=T[M]||[];N.push(k)}for(var D=0,A=0;A<T.length;A++){var I=T[A];if(I){I.x1=1/0,I.x2=-1/0,I.y1=1/0,I.y2=-1/0;for(var q=0;q<I.length;q++){var B=I[q];I.x1=Math.min(I.x1,B.positionX-B.width/2),I.x2=Math.max(I.x2,B.positionX+B.width/2),I.y1=Math.min(I.y1,B.positionY-B.height/2),I.y2=Math.max(I.y2,B.positionY+B.height/2)}I.w=I.x2-I.x1,I.h=I.y2-I.y1,D+=I.w*I.h}}T.sort(function(Y,Z){return Z.w*Z.h-Y.w*Y.h});for(var z=0,F=0,V=0,H=0,W=Math.sqrt(D)*v.clientWidth/v.clientHeight,A=0;A<T.length;A++){var I=T[A];if(I){for(var q=0;q<I.length;q++){var B=I[q];B.isLocked||(B.positionX+=z-I.x1,B.positionY+=F-I.y1)}z+=I.w+S.componentSpacing,V+=I.w+S.componentSpacing,H=Math.max(H,I.h),V>W&&(F+=H+S.componentSpacing,z=0,V=0,H=0)}}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(v){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function GridLayout(_){this.options=extend({},defaults$3,_)}GridLayout.prototype.run=function(){var _=this.options,v=_,S=_.cy,R=v.eles,T=R.nodes().not(":parent");v.sort&&(T=T.sort(v.sort));var A=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:S.width(),h:S.height()});if(A.h===0||A.w===0)R.nodes().layoutPositions(this,v,function(Oe){return{x:A.x1,y:A.y1}});else{var k=T.size(),M=Math.sqrt(k*A.h/A.w),N=Math.round(M),D=Math.round(A.w/A.h*M),I=function(Ce){if(Ce==null)return Math.min(N,D);var Pe=Math.min(N,D);Pe==N?N=Ce:D=Ce},q=function(Ce){if(Ce==null)return Math.max(N,D);var Pe=Math.max(N,D);Pe==N?N=Ce:D=Ce},B=v.rows,z=v.cols!=null?v.cols:v.columns;if(B!=null&&z!=null)N=B,D=z;else if(B!=null&&z==null)N=B,D=Math.ceil(k/N);else if(B==null&&z!=null)D=z,N=Math.ceil(k/D);else if(D*N>k){var F=I(),V=q();(F-1)*V>=k?I(F-1):(V-1)*F>=k&&q(V-1)}else for(;D*N<k;){var H=I(),W=q();(W+1)*H>=k?q(W+1):I(H+1)}var Y=A.w/D,Z=A.h/N;if(v.condense&&(Y=0,Z=0),v.avoidOverlap)for(var J=0;J<T.length;J++){var ne=T[J],oe=ne._private.position;(oe.x==null||oe.y==null)&&(oe.x=0,oe.y=0);var te=ne.layoutDimensions(v),se=v.avoidOverlapPadding,le=te.w+se,ue=te.h+se;Y=Math.max(Y,le),Z=Math.max(Z,ue)}for(var ce={},ge=function(Ce,Pe){return!!ce["c-"+Ce+"-"+Pe]},me=function(Ce,Pe){ce["c-"+Ce+"-"+Pe]=!0},Ee=0,_e=0,ye=function(){_e++,_e>=D&&(_e=0,Ee++)},be={},Se=0;Se<T.length;Se++){var De=T[Se],xe=v.position(De);if(xe&&(xe.row!==void 0||xe.col!==void 0)){var pe={row:xe.row,col:xe.col};if(pe.col===void 0)for(pe.col=0;ge(pe.row,pe.col);)pe.col++;else if(pe.row===void 0)for(pe.row=0;ge(pe.row,pe.col);)pe.row++;be[De.id()]=pe,me(pe.row,pe.col)}}var we=function(Ce,Pe){var Ne,Te;if(Ce.locked()||Ce.isParent())return!1;var ze=be[Ce.id()];if(ze)Ne=ze.col*Y+Y/2+A.x1,Te=ze.row*Z+Z/2+A.y1;else{for(;ge(Ee,_e);)ye();Ne=_e*Y+Y/2+A.x1,Te=Ee*Z+Z/2+A.y1,me(Ee,_e),ye()}return{x:Ne,y:Te}};T.layoutPositions(this,v,we)}return this};var defaults$2$1={ready:function(){},stop:function(){}};function NullLayout(_){this.options=extend({},defaults$2$1,_)}NullLayout.prototype.run=function(){var _=this.options,v=_.eles,S=this;return _.cy,S.emit("layoutstart"),v.nodes().positions(function(){return{x:0,y:0}}),S.one("layoutready",_.ready),S.emit("layoutready"),S.one("layoutstop",_.stop),S.emit("layoutstop"),this};NullLayout.prototype.stop=function(){return this};var defaults$1$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function PresetLayout(_){this.options=extend({},defaults$1$1,_)}PresetLayout.prototype.run=function(){var _=this.options,v=_.eles,S=v.nodes(),R=fn$6(_.positions);function T(A){if(_.positions==null)return copyPosition(A.position());if(R)return _.positions(A);var k=_.positions[A._private.data.id];return k??null}return S.layoutPositions(this,_,function(A,k){var M=T(A);return A.locked()||M==null?!1:M}),this};var defaults$h={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function RandomLayout(_){this.options=extend({},defaults$h,_)}RandomLayout.prototype.run=function(){var _=this.options,v=_.cy,S=_.eles,R=makeBoundingBox(_.boundingBox?_.boundingBox:{x1:0,y1:0,w:v.width(),h:v.height()}),T=function(k,M){return{x:R.x1+Math.round(Math.random()*R.w),y:R.y1+Math.round(Math.random()*R.h)}};return S.nodes().layoutPositions(this,_,T),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(_){this.options=_,this.notifications=0}var noop=function(){},throwImgErr=function(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop,notify:function(){this.notifications++},init:noop,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$f={};BRp$f.arrowShapeWidth=.3;BRp$f.registerArrowShapes=function(){var _=this.arrowShapes={},v=this,S=function(D,I,q,B,z,F,V){var H=z.x-q/2-V,W=z.x+q/2+V,Y=z.y-q/2-V,Z=z.y+q/2+V,J=H<=D&&D<=W&&Y<=I&&I<=Z;return J},R=function(D,I,q,B,z){var F=D*Math.cos(B)-I*Math.sin(B),V=D*Math.sin(B)+I*Math.cos(B),H=F*q,W=V*q,Y=H+z.x,Z=W+z.y;return{x:Y,y:Z}},T=function(D,I,q,B){for(var z=[],F=0;F<D.length;F+=2){var V=D[F],H=D[F+1];z.push(R(V,H,I,q,B))}return z},A=function(D){for(var I=[],q=0;q<D.length;q++){var B=D[q];I.push(B.x,B.y)}return I},k=function(D){return D.pstyle("width").pfValue*D.pstyle("arrow-scale").pfValue*2},M=function(D,I){string$1(I)&&(I=_[I]),_[D]=extend({name:D,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(B,z,F,V,H,W){var Y=A(T(this.points,F+2*W,V,H)),Z=pointInsidePolygonPoints(B,z,Y);return Z},roughCollide:S,draw:function(B,z,F,V){var H=T(this.points,z,F,V);v.arrowShapeImpl("polygon")(B,H)},spacing:function(B){return 0},gap:k},I)};M("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),M("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),M("arrow","triangle"),M("triangle-backcurve",{points:_.triangle.points,controlPoint:[0,-.15],roughCollide:S,draw:function(D,I,q,B,z){var F=T(this.points,I,q,B),V=this.controlPoint,H=R(V[0],V[1],I,q,B);v.arrowShapeImpl(this.name)(D,F,H)},gap:function(D){return k(D)*.8}}),M("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(D,I,q,B,z,F,V){var H=A(T(this.points,q+2*V,B,z)),W=A(T(this.pointsTee,q+2*V,B,z)),Y=pointInsidePolygonPoints(D,I,H)||pointInsidePolygonPoints(D,I,W);return Y},draw:function(D,I,q,B,z){var F=T(this.points,I,q,B),V=T(this.pointsTee,I,q,B);v.arrowShapeImpl(this.name)(D,F,V)}}),M("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(D,I,q,B,z,F,V){var H=z,W=Math.pow(H.x-D,2)+Math.pow(H.y-I,2)<=Math.pow((q+2*V)*this.radius,2),Y=A(T(this.points,q+2*V,B,z));return pointInsidePolygonPoints(D,I,Y)||W},draw:function(D,I,q,B,z){var F=T(this.pointsTr,I,q,B);v.arrowShapeImpl(this.name)(D,F,B.x,B.y,this.radius*I)},spacing:function(D){return v.getArrowWidth(D.pstyle("width").pfValue,D.pstyle("arrow-scale").value)*this.radius}}),M("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(D,I){var q=this.baseCrossLinePts.slice(),B=I/D,z=3,F=5;return q[z]=q[z]-B,q[F]=q[F]-B,q},collide:function(D,I,q,B,z,F,V){var H=A(T(this.points,q+2*V,B,z)),W=A(T(this.crossLinePts(q,F),q+2*V,B,z)),Y=pointInsidePolygonPoints(D,I,H)||pointInsidePolygonPoints(D,I,W);return Y},draw:function(D,I,q,B,z){var F=T(this.points,I,q,B),V=T(this.crossLinePts(I,z),I,q,B);v.arrowShapeImpl(this.name)(D,F,V)}}),M("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(D){return k(D)*.525}}),M("circle",{radius:.15,collide:function(D,I,q,B,z,F,V){var H=z,W=Math.pow(H.x-D,2)+Math.pow(H.y-I,2)<=Math.pow((q+2*V)*this.radius,2);return W},draw:function(D,I,q,B,z){v.arrowShapeImpl(this.name)(D,B.x,B.y,this.radius*I)},spacing:function(D){return v.getArrowWidth(D.pstyle("width").pfValue,D.pstyle("arrow-scale").value)*this.radius}}),M("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(D){return 1},gap:function(D){return 1}}),M("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),M("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(D){return D.pstyle("width").pfValue*D.pstyle("arrow-scale").value}}),M("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(D){return .95*D.pstyle("width").pfValue*D.pstyle("arrow-scale").value}})};var BRp$e={};BRp$e.projectIntoViewport=function(_,v){var S=this.cy,R=this.findContainerClientCoords(),T=R[0],A=R[1],k=R[4],M=S.pan(),N=S.zoom(),D=((_-T)/k-M.x)/N,I=((v-A)/k-M.y)/N;return[D,I]};BRp$e.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var _=this.container,v=_.getBoundingClientRect(),S=this.cy.window().getComputedStyle(_),R=function(W){return parseFloat(S.getPropertyValue(W))},T={left:R("padding-left"),right:R("padding-right"),top:R("padding-top"),bottom:R("padding-bottom")},A={left:R("border-left-width"),right:R("border-right-width"),top:R("border-top-width"),bottom:R("border-bottom-width")},k=_.clientWidth,M=_.clientHeight,N=T.left+T.right,D=T.top+T.bottom,I=A.left+A.right,q=v.width/(k+I),B=k-N,z=M-D,F=v.left+T.left+A.left,V=v.top+T.top+A.top;return this.containerBB=[F,V,B,z,q]};BRp$e.invalidateContainerClientCoordsCache=function(){this.containerBB=null};BRp$e.findNearestElement=function(_,v,S,R){return this.findNearestElements(_,v,S,R)[0]};BRp$e.findNearestElements=function(_,v,S,R){var T=this,A=this,k=A.getCachedZSortedEles(),M=[],N=A.cy.zoom(),D=A.cy.hasCompoundNodes(),I=(R?24:8)/N,q=(R?8:2)/N,B=(R?8:2)/N,z=1/0,F,V;S&&(k=k.interactive);function H(te,se){if(te.isNode()){if(V)return;V=te,M.push(te)}if(te.isEdge()&&(se==null||se<z))if(F){if(F.pstyle("z-compound-depth").value===te.pstyle("z-compound-depth").value&&F.pstyle("z-compound-depth").value===te.pstyle("z-compound-depth").value){for(var le=0;le<M.length;le++)if(M[le].isEdge()){M[le]=te,F=te,z=se??z;break}}}else M.push(te),F=te,z=se??z}function W(te){var se=te.outerWidth()+2*q,le=te.outerHeight()+2*q,ue=se/2,ce=le/2,ge=te.position(),me=te.pstyle("corner-radius").value==="auto"?"auto":te.pstyle("corner-radius").pfValue,Ee=te._private.rscratch;if(ge.x-ue<=_&&_<=ge.x+ue&&ge.y-ce<=v&&v<=ge.y+ce){var _e=A.nodeShapes[T.getNodeShape(te)];if(_e.checkPoint(_,v,0,se,le,ge.x,ge.y,me,Ee))return H(te,0),!0}}function Y(te){var se=te._private,le=se.rscratch,ue=te.pstyle("width").pfValue,ce=te.pstyle("arrow-scale").value,ge=ue/2+I,me=ge*ge,Ee=ge*2,Se=se.source,De=se.target,_e;if(le.edgeType==="segments"||le.edgeType==="straight"||le.edgeType==="haystack"){for(var ye=le.allpts,be=0;be+3<ye.length;be+=2)if(inLineVicinity(_,v,ye[be],ye[be+1],ye[be+2],ye[be+3],Ee)&&me>(_e=sqdistToFiniteLine(_,v,ye[be],ye[be+1],ye[be+2],ye[be+3])))return H(te,_e),!0}else if(le.edgeType==="bezier"||le.edgeType==="multibezier"||le.edgeType==="self"||le.edgeType==="compound"){for(var ye=le.allpts,be=0;be+5<le.allpts.length;be+=4)if(inBezierVicinity(_,v,ye[be],ye[be+1],ye[be+2],ye[be+3],ye[be+4],ye[be+5],Ee)&&me>(_e=sqdistToQuadraticBezier(_,v,ye[be],ye[be+1],ye[be+2],ye[be+3],ye[be+4],ye[be+5])))return H(te,_e),!0}for(var Se=Se||se.source,De=De||se.target,xe=T.getArrowWidth(ue,ce),pe=[{name:"source",x:le.arrowStartX,y:le.arrowStartY,angle:le.srcArrowAngle},{name:"target",x:le.arrowEndX,y:le.arrowEndY,angle:le.tgtArrowAngle},{name:"mid-source",x:le.midX,y:le.midY,angle:le.midsrcArrowAngle},{name:"mid-target",x:le.midX,y:le.midY,angle:le.midtgtArrowAngle}],be=0;be<pe.length;be++){var we=pe[be],Oe=A.arrowShapes[te.pstyle(we.name+"-arrow-shape").value],Ce=te.pstyle("width").pfValue;if(Oe.roughCollide(_,v,xe,we.angle,{x:we.x,y:we.y},Ce,I)&&Oe.collide(_,v,xe,we.angle,{x:we.x,y:we.y},Ce,I))return H(te),!0}D&&M.length>0&&(W(Se),W(De))}function Z(te,se,le){return getPrefixedProperty(te,se,le)}function J(te,se){var le=te._private,ue=B,ce;se?ce=se+"-":ce="",te.boundingBox();var ge=le.labelBounds[se||"main"],me=te.pstyle(ce+"label").value,Ee=te.pstyle("text-events").strValue==="yes";if(!(!Ee||!me)){var _e=Z(le.rscratch,"labelX",se),ye=Z(le.rscratch,"labelY",se),be=Z(le.rscratch,"labelAngle",se),Se=te.pstyle(ce+"text-margin-x").pfValue,De=te.pstyle(ce+"text-margin-y").pfValue,xe=ge.x1-ue-Se,pe=ge.x2+ue-Se,we=ge.y1-ue-De,Oe=ge.y2+ue-De;if(be){var Ce=Math.cos(be),Pe=Math.sin(be),Ne=function(qe,at){return qe=qe-_e,at=at-ye,{x:qe*Ce-at*Pe+_e,y:qe*Pe+at*Ce+ye}},Te=Ne(xe,we),ze=Ne(xe,Oe),Fe=Ne(pe,we),Ie=Ne(pe,Oe),Le=[Te.x+Se,Te.y+De,Fe.x+Se,Fe.y+De,Ie.x+Se,Ie.y+De,ze.x+Se,ze.y+De];if(pointInsidePolygonPoints(_,v,Le))return H(te),!0}else if(inBoundingBox(ge,_,v))return H(te),!0}}for(var ne=k.length-1;ne>=0;ne--){var oe=k[ne];oe.isNode()?W(oe)||J(oe):Y(oe)||J(oe)||J(oe,"source")||J(oe,"target")}return M};BRp$e.getAllInBox=function(_,v,S,R){var T=this.getCachedZSortedEles().interactive,A=this.cy.zoom(),k=2/A,M=[],N=Math.min(_,S),D=Math.max(_,S),I=Math.min(v,R),q=Math.max(v,R);_=N,S=D,v=I,R=q;var B=makeBoundingBox({x1:_,y1:v,x2:S,y2:R}),z=[{x:B.x1,y:B.y1},{x:B.x2,y:B.y1},{x:B.x2,y:B.y2},{x:B.x1,y:B.y2}],F=[[z[0],z[1]],[z[1],z[2]],[z[2],z[3]],[z[3],z[0]]];function V(qe,at,lt){return getPrefixedProperty(qe,at,lt)}function H(qe,at){var lt=qe._private,vt=k,yt="";qe.boundingBox();var Ze=lt.labelBounds.main;if(!Ze)return null;var _t=V(lt.rscratch,"labelX",at),ct=V(lt.rscratch,"labelY",at),wt=V(lt.rscratch,"labelAngle",at),xt=qe.pstyle(yt+"text-margin-x").pfValue,At=qe.pstyle(yt+"text-margin-y").pfValue,Ct=Ze.x1-vt-xt,$t=Ze.x2+vt-xt,Ut=Ze.y1-vt-At,Xt=Ze.y2+vt-At;if(wt){var Ot=Math.cos(wt),qt=Math.sin(wt),Tt=function(nt,ke){return nt=nt-_t,ke=ke-ct,{x:nt*Ot-ke*qt+_t,y:nt*qt+ke*Ot+ct}};return[Tt(Ct,Ut),Tt($t,Ut),Tt($t,Xt),Tt(Ct,Xt)]}else return[{x:Ct,y:Ut},{x:$t,y:Ut},{x:$t,y:Xt},{x:Ct,y:Xt}]}function W(qe,at,lt,vt){function yt(Ze,_t,ct){return(ct.y-Ze.y)*(_t.x-Ze.x)>(_t.y-Ze.y)*(ct.x-Ze.x)}return yt(qe,lt,vt)!==yt(at,lt,vt)&&yt(qe,at,lt)!==yt(qe,at,vt)}for(var Y=0;Y<T.length;Y++){var Z=T[Y];if(Z.isNode()){var J=Z,ne=J.pstyle("text-events").strValue==="yes",oe=J.pstyle("box-selection").strValue,te=J.pstyle("box-select-labels").strValue==="yes";if(oe==="none")continue;var se=(oe==="overlap"||te)&&ne,le=J.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:se});if(oe==="contain"){var ue=!1;if(te&&ne){var ce=H(J);ce&&satPolygonIntersection(ce,z)&&(M.push(J),ue=!0)}!ue&&boundingBoxInBoundingBox(B,le)&&M.push(J)}else if(oe==="overlap"&&boundingBoxesIntersect(B,le)){var ge=J.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),me=[{x:ge.x1,y:ge.y1},{x:ge.x2,y:ge.y1},{x:ge.x2,y:ge.y2},{x:ge.x1,y:ge.y2}];if(satPolygonIntersection(me,z))M.push(J);else{var Ee=H(J);Ee&&satPolygonIntersection(Ee,z)&&M.push(J)}}}else{var _e=Z,ye=_e._private,be=ye.rscratch,Se=_e.pstyle("box-selection").strValue;if(Se==="none")continue;if(Se==="contain"){if(be.startX!=null&&be.startY!=null&&!inBoundingBox(B,be.startX,be.startY)||be.endX!=null&&be.endY!=null&&!inBoundingBox(B,be.endX,be.endY))continue;if(be.edgeType==="bezier"||be.edgeType==="multibezier"||be.edgeType==="self"||be.edgeType==="compound"||be.edgeType==="segments"||be.edgeType==="haystack"){for(var De=ye.rstyle.bezierPts||ye.rstyle.linePts||ye.rstyle.haystackPts,xe=!0,pe=0;pe<De.length;pe++)if(!pointInBoundingBox(B,De[pe])){xe=!1;break}xe&&M.push(_e)}else be.edgeType==="straight"&&M.push(_e)}else if(Se==="overlap"){var we=!1;if(be.startX!=null&&be.startY!=null&&be.endX!=null&&be.endY!=null&&(inBoundingBox(B,be.startX,be.startY)||inBoundingBox(B,be.endX,be.endY)))M.push(_e),we=!0;else if(!we&&be.edgeType==="haystack"){for(var Oe=ye.rstyle.haystackPts,Ce=0;Ce<Oe.length;Ce++)if(pointInBoundingBox(B,Oe[Ce])){M.push(_e),we=!0;break}}if(!we){var Pe=ye.rstyle.bezierPts||ye.rstyle.linePts||ye.rstyle.haystackPts;if((!Pe||Pe.length<2)&&be.edgeType==="straight"&&be.startX!=null&&be.startY!=null&&be.endX!=null&&be.endY!=null&&(Pe=[{x:be.startX,y:be.startY},{x:be.endX,y:be.endY}]),!Pe||Pe.length<2)continue;for(var Ne=0;Ne<Pe.length-1;Ne++){for(var Te=Pe[Ne],ze=Pe[Ne+1],Fe=0;Fe<F.length;Fe++){var Ie=_slicedToArray(F[Fe],2),Le=Ie[0],$e=Ie[1];if(W(Te,ze,Le,$e)){M.push(_e),we=!0;break}}if(we)break}}}}}return M};var BRp$d={};BRp$d.calculateArrowAngles=function(_){var v=_._private.rscratch,S=v.edgeType==="haystack",R=v.edgeType==="bezier",T=v.edgeType==="multibezier",A=v.edgeType==="segments",k=v.edgeType==="compound",M=v.edgeType==="self",N,D,I,q,B,z,W,Y;if(S?(I=v.haystackPts[0],q=v.haystackPts[1],B=v.haystackPts[2],z=v.haystackPts[3]):(I=v.arrowStartX,q=v.arrowStartY,B=v.arrowEndX,z=v.arrowEndY),W=v.midX,Y=v.midY,A)N=I-v.segpts[0],D=q-v.segpts[1];else if(T||k||M||R){var F=v.allpts,V=qbezierAt(F[0],F[2],F[4],.1),H=qbezierAt(F[1],F[3],F[5],.1);N=I-V,D=q-H}else N=I-W,D=q-Y;v.srcArrowAngle=getAngleFromDisp(N,D);var W=v.midX,Y=v.midY;if(S&&(W=(I+B)/2,Y=(q+z)/2),N=B-I,D=z-q,A){var F=v.allpts;if(F.length/2%2===0){var Z=F.length/2,J=Z-2;N=F[Z]-F[J],D=F[Z+1]-F[J+1]}else if(v.isRound)N=v.midVector[1],D=-v.midVector[0];else{var Z=F.length/2-1,J=Z-2;N=F[Z]-F[J],D=F[Z+1]-F[J+1]}}else if(T||k||M){var F=v.allpts,ne=v.ctrlpts,oe,te,se,le;if(ne.length/2%2===0){var ue=F.length/2-1,ce=ue+2,ge=ce+2;oe=qbezierAt(F[ue],F[ce],F[ge],0),te=qbezierAt(F[ue+1],F[ce+1],F[ge+1],0),se=qbezierAt(F[ue],F[ce],F[ge],1e-4),le=qbezierAt(F[ue+1],F[ce+1],F[ge+1],1e-4)}else{var ce=F.length/2-1,ue=ce-2,ge=ce+2;oe=qbezierAt(F[ue],F[ce],F[ge],.4999),te=qbezierAt(F[ue+1],F[ce+1],F[ge+1],.4999),se=qbezierAt(F[ue],F[ce],F[ge],.5),le=qbezierAt(F[ue+1],F[ce+1],F[ge+1],.5)}N=se-oe,D=le-te}if(v.midtgtArrowAngle=getAngleFromDisp(N,D),v.midDispX=N,v.midDispY=D,N*=-1,D*=-1,A){var F=v.allpts;if(F.length/2%2!==0){if(!v.isRound){var Z=F.length/2-1,me=Z+2;N=-(F[me]-F[Z]),D=-(F[me+1]-F[Z+1])}}}if(v.midsrcArrowAngle=getAngleFromDisp(N,D),A)N=B-v.segpts[v.segpts.length-2],D=z-v.segpts[v.segpts.length-1];else if(T||k||M||R){var F=v.allpts,Ee=F.length,V=qbezierAt(F[Ee-6],F[Ee-4],F[Ee-2],.9),H=qbezierAt(F[Ee-5],F[Ee-3],F[Ee-1],.9);N=B-V,D=z-H}else N=B-W,D=z-Y;v.tgtArrowAngle=getAngleFromDisp(N,D)};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(_,v){var S=this.arrowWidthCache=this.arrowWidthCache||{},R=S[_+", "+v];return R||(R=Math.max(Math.pow(_*13.37,.9),29)*v,S[_+", "+v]=R,R)};var x$1,y$1,v1={},v2={},sinA,sinA90,radDirection,drawDirection,angle,halfAngle,cRadius,lenOut,radius,limit,startX,startY,stopX,stopY,lastPoint,asVec=function(v,S,R){R.x=S.x-v.x,R.y=S.y-v.y,R.len=Math.sqrt(R.x*R.x+R.y*R.y),R.nx=R.x/R.len,R.ny=R.y/R.len,R.ang=Math.atan2(R.ny,R.nx)},invertVec=function(v,S){S.x=v.x*-1,S.y=v.y*-1,S.nx=v.nx*-1,S.ny=v.ny*-1,S.ang=v.ang>0?-(Math.PI-v.ang):Math.PI+v.ang},calcCornerArc=function(v,S,R,T,A){if(v!==lastPoint?asVec(S,v,v1):invertVec(v2,v1),asVec(S,R,v2),sinA=v1.nx*v2.ny-v1.ny*v2.nx,sinA90=v1.nx*v2.nx-v1.ny*-v2.ny,angle=Math.asin(Math.max(-1,Math.min(1,sinA))),Math.abs(angle)<1e-6){x$1=S.x,y$1=S.y,cRadius=radius=0;return}radDirection=1,drawDirection=!1,sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),S.radius!==void 0?radius=S.radius:radius=T,halfAngle=angle/2,limit=Math.min(v1.len/2,v2.len/2),A?(lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle)),lenOut>limit?(lenOut=limit,cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius):(lenOut=Math.min(limit,radius),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))),stopX=S.x+v2.nx*lenOut,stopY=S.y+v2.ny*lenOut,x$1=stopX-v2.ny*cRadius*radDirection,y$1=stopY+v2.nx*cRadius*radDirection,startX=S.x+v1.nx*lenOut,startY=S.y+v1.ny*lenOut,lastPoint=S};function drawPreparedRoundCorner(_,v){v.radius===0?_.lineTo(v.cx,v.cy):_.arc(v.cx,v.cy,v.radius,v.startAngle,v.endAngle,v.counterClockwise)}function getRoundCorner(_,v,S,R){var T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return R===0||v.radius===0?{cx:v.x,cy:v.y,radius:0,startX:v.x,startY:v.y,stopX:v.x,stopY:v.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(calcCornerArc(_,v,S,R,T),{cx:x$1,cy:y$1,radius:cRadius,startX,startY,stopX,stopY,startAngle:v1.ang+Math.PI/2*radDirection,endAngle:v2.ang-Math.PI/2*radDirection,counterClockwise:drawDirection})}var AVOID_IMPOSSIBLE_BEZIER_CONSTANT=.01,AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L=Math.sqrt(2*AVOID_IMPOSSIBLE_BEZIER_CONSTANT),BRp$c={};BRp$c.findMidptPtsEtc=function(_,v){var S=v.posPts,R=v.intersectionPts,T=v.vectorNormInverse,A,k=_.pstyle("source-endpoint"),M=_.pstyle("target-endpoint"),N=k.units!=null&&M.units!=null,D=function(ne,oe,te,se){var le=se-oe,ue=te-ne,ce=Math.sqrt(ue*ue+le*le);return{x:-le/ce,y:ue/ce}},I=_.pstyle("edge-distances").value;switch(I){case"node-position":A=S;break;case"intersection":A=R;break;case"endpoints":{if(N){var q=this.manualEndptToPx(_.source()[0],k),B=_slicedToArray(q,2),z=B[0],F=B[1],V=this.manualEndptToPx(_.target()[0],M),H=_slicedToArray(V,2),W=H[0],Y=H[1],Z={x1:z,y1:F,x2:W,y2:Y};T=D(z,F,W,Y),A=Z}else warn("Edge ".concat(_.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),A=R;break}}return{midptPts:A,vectorNormInverse:T}};BRp$c.findHaystackPoints=function(_){for(var v=0;v<_.length;v++){var S=_[v],R=S._private,T=R.rscratch;if(!T.haystack){var A=Math.random()*2*Math.PI;T.source={x:Math.cos(A),y:Math.sin(A)},A=Math.random()*2*Math.PI,T.target={x:Math.cos(A),y:Math.sin(A)}}var k=R.source,M=R.target,N=k.position(),D=M.position(),I=k.width(),q=M.width(),B=k.height(),z=M.height(),F=S.pstyle("haystack-radius").value,V=F/2;T.haystackPts=T.allpts=[T.source.x*I*V+N.x,T.source.y*B*V+N.y,T.target.x*q*V+D.x,T.target.y*z*V+D.y],T.midX=(T.allpts[0]+T.allpts[2])/2,T.midY=(T.allpts[1]+T.allpts[3])/2,T.edgeType="haystack",T.haystack=!0,this.storeEdgeProjections(S),this.calculateArrowAngles(S),this.recalculateEdgeLabelProjections(S),this.calculateLabelAngles(S)}};BRp$c.findSegmentsPoints=function(_,v){var S=_._private.rscratch,R=_.pstyle("segment-weights"),T=_.pstyle("segment-distances"),A=_.pstyle("segment-radii"),k=_.pstyle("radius-type"),M=Math.min(R.pfValue.length,T.pfValue.length),N=A.pfValue[A.pfValue.length-1],D=k.pfValue[k.pfValue.length-1];S.edgeType="segments",S.segpts=[],S.radii=[],S.isArcRadius=[];for(var I=0;I<M;I++){var q=R.pfValue[I],B=T.pfValue[I],z=1-q,F=q,V=this.findMidptPtsEtc(_,v),H=V.midptPts,W=V.vectorNormInverse,Y={x:H.x1*z+H.x2*F,y:H.y1*z+H.y2*F};S.segpts.push(Y.x+W.x*B,Y.y+W.y*B),S.radii.push(A.pfValue[I]!==void 0?A.pfValue[I]:N),S.isArcRadius.push((k.pfValue[I]!==void 0?k.pfValue[I]:D)==="arc-radius")}};BRp$c.findLoopPoints=function(_,v,S,R){var T=_._private.rscratch,A=v.dirCounts,k=v.srcPos,M=_.pstyle("control-point-distances"),N=M?M.pfValue[0]:void 0,D=_.pstyle("loop-direction").pfValue,I=_.pstyle("loop-sweep").pfValue,q=_.pstyle("control-point-step-size").pfValue;T.edgeType="self";var B=S,z=q;R&&(B=0,z=N);var F=D-Math.PI/2,V=F-I/2,H=F+I/2,W=D+"_"+I;B=A[W]===void 0?A[W]=0:++A[W],T.ctrlpts=[k.x+Math.cos(V)*1.4*z*(B/3+1),k.y+Math.sin(V)*1.4*z*(B/3+1),k.x+Math.cos(H)*1.4*z*(B/3+1),k.y+Math.sin(H)*1.4*z*(B/3+1)]};BRp$c.findCompoundLoopPoints=function(_,v,S,R){var T=_._private.rscratch;T.edgeType="compound";var A=v.srcPos,k=v.tgtPos,M=v.srcW,N=v.srcH,D=v.tgtW,I=v.tgtH,q=_.pstyle("control-point-step-size").pfValue,B=_.pstyle("control-point-distances"),z=B?B.pfValue[0]:void 0,F=S,V=q;R&&(F=0,V=z);var H=50,W={x:A.x-M/2,y:A.y-N/2},Y={x:k.x-D/2,y:k.y-I/2},Z={x:Math.min(W.x,Y.x),y:Math.min(W.y,Y.y)},J=.5,ne=Math.max(J,Math.log(M*AVOID_IMPOSSIBLE_BEZIER_CONSTANT)),oe=Math.max(J,Math.log(D*AVOID_IMPOSSIBLE_BEZIER_CONSTANT));T.ctrlpts=[Z.x,Z.y-(1+Math.pow(H,1.12)/100)*V*(F/3+1)*ne,Z.x-(1+Math.pow(H,1.12)/100)*V*(F/3+1)*oe,Z.y]};BRp$c.findStraightEdgePoints=function(_){_._private.rscratch.edgeType="straight"};BRp$c.findBezierPoints=function(_,v,S,R,T){var A=_._private.rscratch,k=_.pstyle("control-point-step-size").pfValue,M=_.pstyle("control-point-distances"),N=_.pstyle("control-point-weights"),D=M&&N?Math.min(M.value.length,N.value.length):1,I=M?M.pfValue[0]:void 0,q=N.value[0],B=R;A.edgeType=B?"multibezier":"bezier",A.ctrlpts=[];for(var z=0;z<D;z++){var F=(.5-v.eles.length/2+S)*k*(T?-1:1),V=void 0,H=signum(F);B&&(I=M?M.pfValue[z]:k,q=N.value[z]),R?V=I:V=I!==void 0?H*I:void 0;var W=V!==void 0?V:F,Y=1-q,Z=q,J=this.findMidptPtsEtc(_,v),ne=J.midptPts,oe=J.vectorNormInverse,te={x:ne.x1*Y+ne.x2*Z,y:ne.y1*Y+ne.y2*Z};A.ctrlpts.push(te.x+oe.x*W,te.y+oe.y*W)}};BRp$c.findTaxiPoints=function(_,v){var S=_._private.rscratch;S.edgeType="segments";var R="vertical",T="horizontal",A="leftward",k="rightward",M="downward",N="upward",D="auto",I=v.posPts,q=v.srcW,B=v.srcH,z=v.tgtW,F=v.tgtH,V=_.pstyle("edge-distances").value,H=V!=="node-position",W=_.pstyle("taxi-direction").value,Y=W,Z=_.pstyle("taxi-turn"),J=Z.units==="%",ne=Z.pfValue,oe=ne<0,te=_.pstyle("taxi-turn-min-distance").pfValue,se=H?(q+z)/2:0,le=H?(B+F)/2:0,ue=I.x2-I.x1,ce=I.y2-I.y1,ge=function(ke,Ue){return ke>0?Math.max(ke-Ue,0):Math.min(ke+Ue,0)},me=ge(ue,se),Ee=ge(ce,le),_e=!1;Y===D?W=Math.abs(me)>Math.abs(Ee)?T:R:Y===N||Y===M?(W=R,_e=!0):(Y===A||Y===k)&&(W=T,_e=!0);var ye=W===R,be=ye?Ee:me,Se=ye?ce:ue,De=signum(Se),xe=!1;!(_e&&(J||oe))&&(Y===M&&Se<0||Y===N&&Se>0||Y===A&&Se>0||Y===k&&Se<0)&&(De*=-1,be=De*Math.abs(be),xe=!0);var pe;if(J){var we=ne<0?1+ne:ne;pe=we*be}else{var Oe=ne<0?be:0;pe=Oe+ne*De}var Ce=function(ke){return Math.abs(ke)<te||Math.abs(ke)>=Math.abs(be)},Pe=Ce(pe),Ne=Ce(Math.abs(be)-Math.abs(pe)),Te=Pe||Ne;if(Te&&!xe)if(ye){var ze=Math.abs(Se)<=B/2,Fe=Math.abs(ue)<=z/2;if(ze){var Ie=(I.x1+I.x2)/2,Le=I.y1,$e=I.y2;S.segpts=[Ie,Le,Ie,$e]}else if(Fe){var qe=(I.y1+I.y2)/2,at=I.x1,lt=I.x2;S.segpts=[at,qe,lt,qe]}else S.segpts=[I.x1,I.y2]}else{var vt=Math.abs(Se)<=q/2,yt=Math.abs(ce)<=F/2;if(vt){var Ze=(I.y1+I.y2)/2,_t=I.x1,ct=I.x2;S.segpts=[_t,Ze,ct,Ze]}else if(yt){var wt=(I.x1+I.x2)/2,xt=I.y1,At=I.y2;S.segpts=[wt,xt,wt,At]}else S.segpts=[I.x2,I.y1]}else if(ye){var Ct=I.y1+pe+(H?B/2*De:0),$t=I.x1,Ut=I.x2;S.segpts=[$t,Ct,Ut,Ct]}else{var Xt=I.x1+pe+(H?q/2*De:0),Ot=I.y1,qt=I.y2;S.segpts=[Xt,Ot,Xt,qt]}if(S.isRound){var Tt=_.pstyle("taxi-radius").value,St=_.pstyle("radius-type").value[0]==="arc-radius";S.radii=new Array(S.segpts.length/2).fill(Tt),S.isArcRadius=new Array(S.segpts.length/2).fill(St)}};BRp$c.tryToCorrectInvalidPoints=function(_,v){var S=_._private.rscratch;if(S.edgeType==="bezier"){var R=v.srcPos,T=v.tgtPos,A=v.srcW,k=v.srcH,M=v.tgtW,N=v.tgtH,D=v.srcShape,I=v.tgtShape,q=v.srcCornerRadius,B=v.tgtCornerRadius,z=v.srcRs,F=v.tgtRs,V=!number$1(S.startX)||!number$1(S.startY),H=!number$1(S.arrowStartX)||!number$1(S.arrowStartY),W=!number$1(S.endX)||!number$1(S.endY),Y=!number$1(S.arrowEndX)||!number$1(S.arrowEndY),Z=3,J=this.getArrowWidth(_.pstyle("width").pfValue,_.pstyle("arrow-scale").value)*this.arrowShapeWidth,ne=Z*J,oe=dist$1({x:S.ctrlpts[0],y:S.ctrlpts[1]},{x:S.startX,y:S.startY}),te=oe<ne,se=dist$1({x:S.ctrlpts[0],y:S.ctrlpts[1]},{x:S.endX,y:S.endY}),le=se<ne,ue=!1;if(V||H||te){ue=!0;var ce={x:S.ctrlpts[0]-R.x,y:S.ctrlpts[1]-R.y},ge=Math.sqrt(ce.x*ce.x+ce.y*ce.y),me={x:ce.x/ge,y:ce.y/ge},Ee=Math.max(A,k),_e={x:S.ctrlpts[0]+me.x*2*Ee,y:S.ctrlpts[1]+me.y*2*Ee},ye=D.intersectLine(R.x,R.y,A,k,_e.x,_e.y,0,q,z);te?(S.ctrlpts[0]=S.ctrlpts[0]+me.x*(ne-oe),S.ctrlpts[1]=S.ctrlpts[1]+me.y*(ne-oe)):(S.ctrlpts[0]=ye[0]+me.x*ne,S.ctrlpts[1]=ye[1]+me.y*ne)}if(W||Y||le){ue=!0;var be={x:S.ctrlpts[0]-T.x,y:S.ctrlpts[1]-T.y},Se=Math.sqrt(be.x*be.x+be.y*be.y),De={x:be.x/Se,y:be.y/Se},xe=Math.max(A,k),pe={x:S.ctrlpts[0]+De.x*2*xe,y:S.ctrlpts[1]+De.y*2*xe},we=I.intersectLine(T.x,T.y,M,N,pe.x,pe.y,0,B,F);le?(S.ctrlpts[0]=S.ctrlpts[0]+De.x*(ne-se),S.ctrlpts[1]=S.ctrlpts[1]+De.y*(ne-se)):(S.ctrlpts[0]=we[0]+De.x*ne,S.ctrlpts[1]=we[1]+De.y*ne)}ue&&this.findEndpoints(_)}};BRp$c.storeAllpts=function(_){var v=_._private.rscratch;if(v.edgeType==="multibezier"||v.edgeType==="bezier"||v.edgeType==="self"||v.edgeType==="compound"){v.allpts=[],v.allpts.push(v.startX,v.startY);for(var S=0;S+1<v.ctrlpts.length;S+=2)v.allpts.push(v.ctrlpts[S],v.ctrlpts[S+1]),S+3<v.ctrlpts.length&&v.allpts.push((v.ctrlpts[S]+v.ctrlpts[S+2])/2,(v.ctrlpts[S+1]+v.ctrlpts[S+3])/2);v.allpts.push(v.endX,v.endY);var R,T;v.ctrlpts.length/2%2===0?(R=v.allpts.length/2-1,v.midX=v.allpts[R],v.midY=v.allpts[R+1]):(R=v.allpts.length/2-3,T=.5,v.midX=qbezierAt(v.allpts[R],v.allpts[R+2],v.allpts[R+4],T),v.midY=qbezierAt(v.allpts[R+1],v.allpts[R+3],v.allpts[R+5],T))}else if(v.edgeType==="straight")v.allpts=[v.startX,v.startY,v.endX,v.endY],v.midX=(v.startX+v.endX+v.arrowStartX+v.arrowEndX)/4,v.midY=(v.startY+v.endY+v.arrowStartY+v.arrowEndY)/4;else if(v.edgeType==="segments"){if(v.allpts=[],v.allpts.push(v.startX,v.startY),v.allpts.push.apply(v.allpts,v.segpts),v.allpts.push(v.endX,v.endY),v.isRound){v.roundCorners=[];for(var A=2;A+3<v.allpts.length;A+=2){var k=v.radii[A/2-1],M=v.isArcRadius[A/2-1];v.roundCorners.push(getRoundCorner({x:v.allpts[A-2],y:v.allpts[A-1]},{x:v.allpts[A],y:v.allpts[A+1],radius:k},{x:v.allpts[A+2],y:v.allpts[A+3]},k,M))}}if(v.segpts.length%4===0){var N=v.segpts.length/2,D=N-2;v.midX=(v.segpts[D]+v.segpts[N])/2,v.midY=(v.segpts[D+1]+v.segpts[N+1])/2}else{var I=v.segpts.length/2-1;if(!v.isRound)v.midX=v.segpts[I],v.midY=v.segpts[I+1];else{var q={x:v.segpts[I],y:v.segpts[I+1]},B=v.roundCorners[I/2];if(B.radius===0){var z={x:v.segpts[I+2],y:v.segpts[I+3]};v.midX=q.x,v.midY=q.y,v.midVector=[q.y-z.y,z.x-q.x]}else{var F=[q.x-B.cx,q.y-B.cy],V=B.radius/Math.sqrt(Math.pow(F[0],2)+Math.pow(F[1],2));F=F.map(function(H){return H*V}),v.midX=B.cx+F[0],v.midY=B.cy+F[1],v.midVector=F}}}}};BRp$c.checkForInvalidEdgeWarning=function(_){var v=_[0]._private.rscratch;v.nodesOverlap||number$1(v.startX)&&number$1(v.startY)&&number$1(v.endX)&&number$1(v.endY)?v.loggedErr=!1:v.loggedErr||(v.loggedErr=!0,warn("Edge `"+_.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};BRp$c.findEdgeControlPoints=function(_){var v=this;if(!(!_||_.length===0)){for(var S=this,R=S.cy,T=R.hasCompoundNodes(),A=new Map$1,k=function(le,ue){return[].concat(_toConsumableArray(le),[ue?1:0]).join("-")},M=[],N=[],D=0;D<_.length;D++){var I=_[D],q=I._private,B=I.pstyle("curve-style").value;if(!(I.removed()||!I.takesUpSpace())){if(B==="haystack"){N.push(I);continue}var z=B==="unbundled-bezier"||endsWith(B,"segments")||B==="straight"||B==="straight-triangle"||endsWith(B,"taxi"),F=B==="unbundled-bezier"||B==="bezier",V=q.source,H=q.target,W=V.poolIndex(),Y=H.poolIndex(),Z=[W,Y].sort(),J=k(Z,z),ne=A.get(J);ne==null&&(ne={eles:[]},M.push({pairId:Z,edgeIsUnbundled:z}),A.set(J,ne)),ne.eles.push(I),z&&(ne.hasUnbundled=!0),F&&(ne.hasBezier=!0)}}for(var oe=function(){var le=M[te],ue=le.pairId,ce=le.edgeIsUnbundled,ge=k(ue,ce),me=A.get(ge),Ee;if(!me.hasUnbundled){var _e=me.eles[0].parallelEdges().filter(function(St){return St.isBundledBezier()});clearArray(me.eles),_e.forEach(function(St){return me.eles.push(St)}),me.eles.sort(function(St,nt){return St.poolIndex()-nt.poolIndex()})}var ye=me.eles[0],be=ye.source(),Se=ye.target();if(be.poolIndex()>Se.poolIndex()){var De=be;be=Se,Se=De}var xe=me.srcPos=be.position(),pe=me.tgtPos=Se.position(),we=me.srcW=be.outerWidth(),Oe=me.srcH=be.outerHeight(),Ce=me.tgtW=Se.outerWidth(),Pe=me.tgtH=Se.outerHeight(),Ne=me.srcShape=S.nodeShapes[v.getNodeShape(be)],Te=me.tgtShape=S.nodeShapes[v.getNodeShape(Se)],ze=me.srcCornerRadius=be.pstyle("corner-radius").value==="auto"?"auto":be.pstyle("corner-radius").pfValue,Fe=me.tgtCornerRadius=Se.pstyle("corner-radius").value==="auto"?"auto":Se.pstyle("corner-radius").pfValue,Ie=me.tgtRs=Se._private.rscratch,Le=me.srcRs=be._private.rscratch;me.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $e=0;$e<me.eles.length;$e++){var qe=me.eles[$e],at=qe[0]._private.rscratch,lt=qe.pstyle("curve-style").value,vt=lt==="unbundled-bezier"||endsWith(lt,"segments")||endsWith(lt,"taxi"),yt=!be.same(qe.source());if(!me.calculatedIntersection&&be!==Se&&(me.hasBezier||me.hasUnbundled)){me.calculatedIntersection=!0;var Ze=Ne.intersectLine(xe.x,xe.y,we,Oe,pe.x,pe.y,0,ze,Le),_t=me.srcIntn=Ze,ct=Te.intersectLine(pe.x,pe.y,Ce,Pe,xe.x,xe.y,0,Fe,Ie),wt=me.tgtIntn=ct,xt=me.intersectionPts={x1:Ze[0],x2:ct[0],y1:Ze[1],y2:ct[1]},At=me.posPts={x1:xe.x,x2:pe.x,y1:xe.y,y2:pe.y},Ct=ct[1]-Ze[1],$t=ct[0]-Ze[0],Ut=Math.sqrt($t*$t+Ct*Ct);number$1(Ut)&&Ut>=AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L||(Ut=Math.sqrt(Math.max($t*$t,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)+Math.max(Ct*Ct,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)));var Xt=me.vector={x:$t,y:Ct},Ot=me.vectorNorm={x:Xt.x/Ut,y:Xt.y/Ut},qt={x:-Ot.y,y:Ot.x};me.nodesOverlap=!number$1(Ut)||Te.checkPoint(Ze[0],Ze[1],0,Ce,Pe,pe.x,pe.y,Fe,Ie)||Ne.checkPoint(ct[0],ct[1],0,we,Oe,xe.x,xe.y,ze,Le),me.vectorNormInverse=qt,Ee={nodesOverlap:me.nodesOverlap,dirCounts:me.dirCounts,calculatedIntersection:!0,hasBezier:me.hasBezier,hasUnbundled:me.hasUnbundled,eles:me.eles,srcPos:pe,srcRs:Ie,tgtPos:xe,tgtRs:Le,srcW:Ce,srcH:Pe,tgtW:we,tgtH:Oe,srcIntn:wt,tgtIntn:_t,srcShape:Te,tgtShape:Ne,posPts:{x1:At.x2,y1:At.y2,x2:At.x1,y2:At.y1},intersectionPts:{x1:xt.x2,y1:xt.y2,x2:xt.x1,y2:xt.y1},vector:{x:-Xt.x,y:-Xt.y},vectorNorm:{x:-Ot.x,y:-Ot.y},vectorNormInverse:{x:-qt.x,y:-qt.y}}}var Tt=yt?Ee:me;at.nodesOverlap=Tt.nodesOverlap,at.srcIntn=Tt.srcIntn,at.tgtIntn=Tt.tgtIntn,at.isRound=lt.startsWith("round"),T&&(be.isParent()||be.isChild()||Se.isParent()||Se.isChild())&&(be.parents().anySame(Se)||Se.parents().anySame(be)||be.same(Se)&&be.isParent())?v.findCompoundLoopPoints(qe,Tt,$e,vt):be===Se?v.findLoopPoints(qe,Tt,$e,vt):lt.endsWith("segments")?v.findSegmentsPoints(qe,Tt):lt.endsWith("taxi")?v.findTaxiPoints(qe,Tt):lt==="straight"||!vt&&me.eles.length%2===1&&$e===Math.floor(me.eles.length/2)?v.findStraightEdgePoints(qe):v.findBezierPoints(qe,Tt,$e,vt,yt),v.findEndpoints(qe),v.tryToCorrectInvalidPoints(qe,Tt),v.checkForInvalidEdgeWarning(qe),v.storeAllpts(qe),v.storeEdgeProjections(qe),v.calculateArrowAngles(qe),v.recalculateEdgeLabelProjections(qe),v.calculateLabelAngles(qe)}},te=0;te<M.length;te++)oe();this.findHaystackPoints(N)}};function getPts(_){var v=[];if(_!=null){for(var S=0;S<_.length;S+=2){var R=_[S],T=_[S+1];v.push({x:R,y:T})}return v}}BRp$c.getSegmentPoints=function(_){var v=_[0]._private.rscratch;this.recalculateRenderedStyle(_);var S=v.edgeType;if(S==="segments")return getPts(v.segpts)};BRp$c.getControlPoints=function(_){var v=_[0]._private.rscratch;this.recalculateRenderedStyle(_);var S=v.edgeType;if(S==="bezier"||S==="multibezier"||S==="self"||S==="compound")return getPts(v.ctrlpts)};BRp$c.getEdgeMidpoint=function(_){var v=_[0]._private.rscratch;return this.recalculateRenderedStyle(_),{x:v.midX,y:v.midY}};var BRp$b={};BRp$b.manualEndptToPx=function(_,v){var S=this,R=_.position(),T=_.outerWidth(),A=_.outerHeight(),k=_._private.rscratch;if(v.value.length===2){var M=[v.pfValue[0],v.pfValue[1]];return v.units[0]==="%"&&(M[0]=M[0]*T),v.units[1]==="%"&&(M[1]=M[1]*A),M[0]+=R.x,M[1]+=R.y,M}else{var N=v.pfValue[0];N=-Math.PI/2+N;var D=2*Math.max(T,A),I=[R.x+Math.cos(N)*D,R.y+Math.sin(N)*D];return S.nodeShapes[this.getNodeShape(_)].intersectLine(R.x,R.y,T,A,I[0],I[1],0,_.pstyle("corner-radius").value==="auto"?"auto":_.pstyle("corner-radius").pfValue,k)}};BRp$b.findEndpoints=function(_){var v,S,R,T,A=this,k,M=_.source()[0],N=_.target()[0],D=M.position(),I=N.position(),q=_.pstyle("target-arrow-shape").value,B=_.pstyle("source-arrow-shape").value,z=_.pstyle("target-distance-from-node").pfValue,F=_.pstyle("source-distance-from-node").pfValue,V=M._private.rscratch,H=N._private.rscratch,W=_.pstyle("curve-style").value,Y=_._private.rscratch,Z=Y.edgeType,J=endsWith(W,"taxi"),ne=Z==="self"||Z==="compound",oe=Z==="bezier"||Z==="multibezier"||ne,te=Z!=="bezier",se=Z==="straight"||Z==="segments",le=Z==="segments",ue=oe||te||se,ce=ne||J,ge=_.pstyle("source-endpoint"),me=ce?"outside-to-node":ge.value,Ee=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,_e=_.pstyle("target-endpoint"),ye=ce?"outside-to-node":_e.value,be=N.pstyle("corner-radius").value==="auto"?"auto":N.pstyle("corner-radius").pfValue;Y.srcManEndpt=ge,Y.tgtManEndpt=_e;var Se,De,xe,pe,we=(v=(_e==null||(S=_e.pfValue)===null||S===void 0?void 0:S.length)===2?_e.pfValue:null)!==null&&v!==void 0?v:[0,0],Oe=(R=(ge==null||(T=ge.pfValue)===null||T===void 0?void 0:T.length)===2?ge.pfValue:null)!==null&&R!==void 0?R:[0,0];if(oe){var Ce=[Y.ctrlpts[0],Y.ctrlpts[1]],Pe=te?[Y.ctrlpts[Y.ctrlpts.length-2],Y.ctrlpts[Y.ctrlpts.length-1]]:Ce;Se=Pe,De=Ce}else if(se){var Ne=le?Y.segpts.slice(0,2):[I.x+we[0],I.y+we[1]],Te=le?Y.segpts.slice(Y.segpts.length-2):[D.x+Oe[0],D.y+Oe[1]];Se=Te,De=Ne}if(ye==="inside-to-node")k=[I.x,I.y];else if(_e.units)k=this.manualEndptToPx(N,_e);else if(ye==="outside-to-line")k=Y.tgtIntn;else if(ye==="outside-to-node"||ye==="outside-to-node-or-label"?xe=Se:(ye==="outside-to-line"||ye==="outside-to-line-or-label")&&(xe=[D.x,D.y]),k=A.nodeShapes[this.getNodeShape(N)].intersectLine(I.x,I.y,N.outerWidth(),N.outerHeight(),xe[0],xe[1],0,be,H),ye==="outside-to-node-or-label"||ye==="outside-to-line-or-label"){var ze=N._private.rscratch,Fe=ze.labelWidth,Ie=ze.labelHeight,Le=ze.labelX,$e=ze.labelY,qe=Fe/2,at=Ie/2,lt=N.pstyle("text-valign").value;lt==="top"?$e-=at:lt==="bottom"&&($e+=at);var vt=N.pstyle("text-halign").value;vt==="left"?Le-=qe:vt==="right"&&(Le+=qe);var yt=polygonIntersectLine(xe[0],xe[1],[Le-qe,$e-at,Le+qe,$e-at,Le+qe,$e+at,Le-qe,$e+at],I.x,I.y);if(yt.length>0){var Ze=D,_t=sqdist(Ze,array2point(k)),ct=sqdist(Ze,array2point(yt)),wt=_t;if(ct<_t&&(k=yt,wt=ct),yt.length>2){var xt=sqdist(Ze,{x:yt[2],y:yt[3]});xt<wt&&(k=[yt[2],yt[3]])}}}var At=shortenIntersection(k,Se,A.arrowShapes[q].spacing(_)+z),Ct=shortenIntersection(k,Se,A.arrowShapes[q].gap(_)+z);if(Y.endX=Ct[0],Y.endY=Ct[1],Y.arrowEndX=At[0],Y.arrowEndY=At[1],me==="inside-to-node")k=[D.x,D.y];else if(ge.units)k=this.manualEndptToPx(M,ge);else if(me==="outside-to-line")k=Y.srcIntn;else if(me==="outside-to-node"||me==="outside-to-node-or-label"?pe=De:(me==="outside-to-line"||me==="outside-to-line-or-label")&&(pe=[I.x,I.y]),k=A.nodeShapes[this.getNodeShape(M)].intersectLine(D.x,D.y,M.outerWidth(),M.outerHeight(),pe[0],pe[1],0,Ee,V),me==="outside-to-node-or-label"||me==="outside-to-line-or-label"){var $t=M._private.rscratch,Ut=$t.labelWidth,Xt=$t.labelHeight,Ot=$t.labelX,qt=$t.labelY,Tt=Ut/2,St=Xt/2,nt=M.pstyle("text-valign").value;nt==="top"?qt-=St:nt==="bottom"&&(qt+=St);var ke=M.pstyle("text-halign").value;ke==="left"?Ot-=Tt:ke==="right"&&(Ot+=Tt);var Ue=polygonIntersectLine(pe[0],pe[1],[Ot-Tt,qt-St,Ot+Tt,qt-St,Ot+Tt,qt+St,Ot-Tt,qt+St],D.x,D.y);if(Ue.length>0){var Ye=I,tt=sqdist(Ye,array2point(k)),ot=sqdist(Ye,array2point(Ue)),Rt=tt;if(ot<tt&&(k=[Ue[0],Ue[1]],Rt=ot),Ue.length>2){var dt=sqdist(Ye,{x:Ue[2],y:Ue[3]});dt<Rt&&(k=[Ue[2],Ue[3]])}}}var Mt=shortenIntersection(k,De,A.arrowShapes[B].spacing(_)+F),kt=shortenIntersection(k,De,A.arrowShapes[B].gap(_)+F);Y.startX=kt[0],Y.startY=kt[1],Y.arrowStartX=Mt[0],Y.arrowStartY=Mt[1],ue&&(!number$1(Y.startX)||!number$1(Y.startY)||!number$1(Y.endX)||!number$1(Y.endY)?Y.badLine=!0:Y.badLine=!1)};BRp$b.getSourceEndpoint=function(_){var v=_[0]._private.rscratch;switch(this.recalculateRenderedStyle(_),v.edgeType){case"haystack":return{x:v.haystackPts[0],y:v.haystackPts[1]};default:return{x:v.arrowStartX,y:v.arrowStartY}}};BRp$b.getTargetEndpoint=function(_){var v=_[0]._private.rscratch;switch(this.recalculateRenderedStyle(_),v.edgeType){case"haystack":return{x:v.haystackPts[2],y:v.haystackPts[3]};default:return{x:v.arrowEndX,y:v.arrowEndY}}};var BRp$a={};function pushBezierPts(_,v,S){for(var R=function(D,I,q,B){return qbezierAt(D,I,q,B)},T=v._private,A=T.rstyle.bezierPts,k=0;k<_.bezierProjPcts.length;k++){var M=_.bezierProjPcts[k];A.push({x:R(S[0],S[2],S[4],M),y:R(S[1],S[3],S[5],M)})}}BRp$a.storeEdgeProjections=function(_){var v=_._private,S=v.rscratch,R=S.edgeType;if(v.rstyle.bezierPts=null,v.rstyle.linePts=null,v.rstyle.haystackPts=null,R==="multibezier"||R==="bezier"||R==="self"||R==="compound"){v.rstyle.bezierPts=[];for(var T=0;T+5<S.allpts.length;T+=4)pushBezierPts(this,_,S.allpts.slice(T,T+6))}else if(R==="segments")for(var A=v.rstyle.linePts=[],T=0;T+1<S.allpts.length;T+=2)A.push({x:S.allpts[T],y:S.allpts[T+1]});else if(R==="haystack"){var k=S.haystackPts;v.rstyle.haystackPts=[{x:k[0],y:k[1]},{x:k[2],y:k[3]}]}v.rstyle.arrowWidth=this.getArrowWidth(_.pstyle("width").pfValue,_.pstyle("arrow-scale").value)*this.arrowShapeWidth};BRp$a.recalculateEdgeProjections=function(_){this.findEdgeControlPoints(_)};var BRp$9={};BRp$9.recalculateNodeLabelProjection=function(_){var v=_.pstyle("label").strValue;if(!emptyString(v)){var S,R,T=_._private,A=_.width(),k=_.height(),M=_.padding(),N=_.position(),D=_.pstyle("text-halign").strValue,I=_.pstyle("text-valign").strValue,q=T.rscratch,B=T.rstyle;switch(D){case"left":S=N.x-A/2-M;break;case"right":S=N.x+A/2+M;break;default:S=N.x}switch(I){case"top":R=N.y-k/2-M;break;case"bottom":R=N.y+k/2+M;break;default:R=N.y}q.labelX=S,q.labelY=R,B.labelX=S,B.labelY=R,this.calculateLabelAngles(_),this.applyLabelDimensions(_)}};var lineAngleFromDelta=function(v,S){var R=Math.atan(S/v);return v===0&&R<0&&(R=R*-1),R},lineAngle=function(v,S){var R=S.x-v.x,T=S.y-v.y;return lineAngleFromDelta(R,T)},bezierAngle=function(v,S,R,T){var A=bound(0,T-.001,1),k=bound(0,T+.001,1),M=qbezierPtAt(v,S,R,A),N=qbezierPtAt(v,S,R,k);return lineAngle(M,N)};BRp$9.recalculateEdgeLabelProjections=function(_){var v,S=_._private,R=S.rscratch,T=this,A={mid:_.pstyle("label").strValue,source:_.pstyle("source-label").strValue,target:_.pstyle("target-label").strValue};if(A.mid||A.source||A.target){v={x:R.midX,y:R.midY};var k=function(q,B,z){setPrefixedProperty(S.rscratch,q,B,z),setPrefixedProperty(S.rstyle,q,B,z)};k("labelX",null,v.x),k("labelY",null,v.y);var M=lineAngleFromDelta(R.midDispX,R.midDispY);k("labelAutoAngle",null,M);var N=function(){if(N.cache)return N.cache;for(var q=[],B=0;B+5<R.allpts.length;B+=4){var z={x:R.allpts[B],y:R.allpts[B+1]},F={x:R.allpts[B+2],y:R.allpts[B+3]},V={x:R.allpts[B+4],y:R.allpts[B+5]};q.push({p0:z,p1:F,p2:V,startDist:0,length:0,segments:[]})}var H=S.rstyle.bezierPts,W=T.bezierProjPcts.length;function Y(te,se,le,ue,ce){var ge=dist$1(se,le),me=te.segments[te.segments.length-1],Ee={p0:se,p1:le,t0:ue,t1:ce,startDist:me?me.startDist+me.length:0,length:ge};te.segments.push(Ee),te.length+=ge}for(var Z=0;Z<q.length;Z++){var J=q[Z],ne=q[Z-1];ne&&(J.startDist=ne.startDist+ne.length),Y(J,J.p0,H[Z*W],0,T.bezierProjPcts[0]);for(var oe=0;oe<W-1;oe++)Y(J,H[Z*W+oe],H[Z*W+oe+1],T.bezierProjPcts[oe],T.bezierProjPcts[oe+1]);Y(J,H[Z*W+W-1],J.p2,T.bezierProjPcts[W-1],1)}return N.cache=q},D=function(q){var B,z=q==="source";if(A[q]){var F=_.pstyle(q+"-text-offset").pfValue;switch(R.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var V=N(),H,W=0,Y=0,Z=0;Z<V.length;Z++){for(var J=V[z?Z:V.length-1-Z],ne=0;ne<J.segments.length;ne++){var oe=J.segments[z?ne:J.segments.length-1-ne],te=Z===V.length-1&&ne===J.segments.length-1;if(W=Y,Y+=oe.length,Y>=F||te){H={cp:J,segment:oe};break}}if(H)break}var se=H.cp,le=H.segment,ue=(F-W)/le.length,ce=le.t1-le.t0,ge=z?le.t0+ce*ue:le.t1-ce*ue;ge=bound(0,ge,1),v=qbezierPtAt(se.p0,se.p1,se.p2,ge),B=bezierAngle(se.p0,se.p1,se.p2,ge);break}case"straight":case"segments":case"haystack":{for(var me=0,Ee,_e,ye,be,Se=R.allpts.length,De=0;De+3<Se&&(z?(ye={x:R.allpts[De],y:R.allpts[De+1]},be={x:R.allpts[De+2],y:R.allpts[De+3]}):(ye={x:R.allpts[Se-2-De],y:R.allpts[Se-1-De]},be={x:R.allpts[Se-4-De],y:R.allpts[Se-3-De]}),Ee=dist$1(ye,be),_e=me,me+=Ee,!(me>=F));De+=2);var xe=F-_e,pe=xe/Ee;pe=bound(0,pe,1),v=lineAt(ye,be,pe),B=lineAngle(ye,be);break}}k("labelX",q,v.x),k("labelY",q,v.y),k("labelAutoAngle",q,B)}};D("source"),D("target"),this.applyLabelDimensions(_)}};BRp$9.applyLabelDimensions=function(_){this.applyPrefixedLabelDimensions(_),_.isEdge()&&(this.applyPrefixedLabelDimensions(_,"source"),this.applyPrefixedLabelDimensions(_,"target"))};BRp$9.applyPrefixedLabelDimensions=function(_,v){var S=_._private,R=this.getLabelText(_,v),T=hashString(R,_._private.labelDimsKey);if(getPrefixedProperty(S.rscratch,"prefixedLabelDimsKey",v)!==T){setPrefixedProperty(S.rscratch,"prefixedLabelDimsKey",v,T);var A=this.calculateLabelDimensions(_,R),k=_.pstyle("line-height").pfValue,M=_.pstyle("text-wrap").strValue,N=getPrefixedProperty(S.rscratch,"labelWrapCachedLines",v)||[],D=M!=="wrap"?1:Math.max(N.length,1),I=A.height/D,q=I*k,B=A.width,z=A.height+(D-1)*(k-1)*I;setPrefixedProperty(S.rstyle,"labelWidth",v,B),setPrefixedProperty(S.rscratch,"labelWidth",v,B),setPrefixedProperty(S.rstyle,"labelHeight",v,z),setPrefixedProperty(S.rscratch,"labelHeight",v,z),setPrefixedProperty(S.rscratch,"labelLineHeight",v,q)}};BRp$9.getLabelText=function(_,v){var S=_._private,R=v?v+"-":"",T=_.pstyle(R+"label").strValue,A=_.pstyle("text-transform").value,k=function(Oe,Ce){return Ce?(setPrefixedProperty(S.rscratch,Oe,v,Ce),Ce):getPrefixedProperty(S.rscratch,Oe,v)};if(!T)return"";A=="none"||(A=="uppercase"?T=T.toUpperCase():A=="lowercase"&&(T=T.toLowerCase()));var M=_.pstyle("text-wrap").value;if(M==="wrap"){var N=k("labelKey");if(N!=null&&k("labelWrapKey")===N)return k("labelWrapCachedText");for(var D="",I=T.split(`
`),q=_.pstyle("text-max-width").pfValue,B=_.pstyle("text-overflow-wrap").value,z=B==="anywhere",F=[],V=/[\s\u200b]+|$/g,H=0;H<I.length;H++){var W=I[H],Y=this.calculateLabelDimensions(_,W),Z=Y.width;if(z){var J=W.split("").join(D);W=J}if(Z>q){var ne=W.matchAll(V),oe="",te=0,se=_createForOfIteratorHelper(ne),le;try{for(se.s();!(le=se.n()).done;){var ue=le.value,ce=ue[0],ge=W.substring(te,ue.index);te=ue.index+ce.length;var me=oe.length===0?ge:oe+ge+ce,Ee=this.calculateLabelDimensions(_,me),_e=Ee.width;_e<=q?oe+=ge+ce:(oe&&F.push(oe),oe=ge+ce)}}catch(we){se.e(we)}finally{se.f()}oe.match(/^[\s\u200b]+$/)||F.push(oe)}else F.push(W)}k("labelWrapCachedLines",F),T=k("labelWrapCachedText",F.join(`
`)),k("labelWrapKey",N)}else if(M==="ellipsis"){var ye=_.pstyle("text-max-width").pfValue,be="",Se="",De=!1;if(this.calculateLabelDimensions(_,T).width<ye)return T;for(var xe=0;xe<T.length;xe++){var pe=this.calculateLabelDimensions(_,be+T[xe]+Se).width;if(pe>ye)break;be+=T[xe],xe===T.length-1&&(De=!0)}return De||(be+=Se),be}return T};BRp$9.getLabelJustification=function(_){var v=_.pstyle("text-justification").strValue,S=_.pstyle("text-halign").strValue;if(v==="auto")if(_.isNode())switch(S){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return v};BRp$9.calculateLabelDimensions=function(_,v){var S=this,R=S.cy.window(),T=R.document,A=0,k=_.pstyle("font-style").strValue,M=_.pstyle("font-size").pfValue,N=_.pstyle("font-family").strValue,D=_.pstyle("font-weight").strValue,I=this.labelCalcCanvas,q=this.labelCalcCanvasContext;if(!I){I=this.labelCalcCanvas=T.createElement("canvas"),q=this.labelCalcCanvasContext=I.getContext("2d");var B=I.style;B.position="absolute",B.left="-9999px",B.top="-9999px",B.zIndex="-1",B.visibility="hidden",B.pointerEvents="none"}q.font="".concat(k," ").concat(D," ").concat(M,"px ").concat(N);for(var z=0,F=0,V=v.split(`
`),H=0;H<V.length;H++){var W=V[H],Y=q.measureText(W),Z=Math.ceil(Y.width),J=M;z=Math.max(Z,z),F+=J}return z+=A,F+=A,{width:z,height:F}};BRp$9.calculateLabelAngle=function(_,v){var S=_._private,R=S.rscratch,T=_.isEdge(),A=v?v+"-":"",k=_.pstyle(A+"text-rotation"),M=k.strValue;return M==="none"?0:T&&M==="autorotate"?R.labelAutoAngle:M==="autorotate"?0:k.pfValue};BRp$9.calculateLabelAngles=function(_){var v=this,S=_.isEdge(),R=_._private,T=R.rscratch;T.labelAngle=v.calculateLabelAngle(_),S&&(T.sourceLabelAngle=v.calculateLabelAngle(_,"source"),T.targetLabelAngle=v.calculateLabelAngle(_,"target"))};var BRp$8={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$8.getNodeShape=function(_){var v=this,S=_.pstyle("shape").value;if(S==="cutrectangle"&&(_.width()<TOO_SMALL_CUT_RECT||_.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(_.isParent())return S==="rectangle"||S==="roundrectangle"||S==="round-rectangle"||S==="cutrectangle"||S==="cut-rectangle"||S==="barrel"?S:"rectangle";if(S==="polygon"){var R=_.pstyle("shape-polygon-points").value;return v.nodeShapes.makePolygon(R).name}return S};var BRp$7={};BRp$7.registerCalculationListeners=function(){var _=this.cy,v=_.collection(),S=this,R=function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(v.merge(k),M)for(var N=0;N<k.length;N++){var D=k[N],I=D._private,q=I.rstyle;q.clean=!1,q.cleanConnected=!1}};S.binder(_).on("bounds.* dirty.*",function(k){var M=k.target;R(M)}).on("style.* background.*",function(k){var M=k.target;R(M,!1)});var T=function(k){if(k){var M=S.onUpdateEleCalcsFns;v.cleanStyle();for(var N=0;N<v.length;N++){var D=v[N],I=D._private.rstyle;D.isNode()&&!I.cleanConnected&&(R(D.connectedEdges()),I.cleanConnected=!0)}if(M)for(var q=0;q<M.length;q++){var B=M[q];B(k,v)}S.recalculateRenderedStyle(v),v=_.collection()}};S.flushRenderedStyleQueue=function(){T(!0)},S.beforeRender(T,S.beforeRenderPriorities.eleCalcs)};BRp$7.onUpdateEleCalcs=function(_){var v=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];v.push(_)};BRp$7.recalculateRenderedStyle=function(_,v){var S=function(J){return J._private.rstyle.cleanConnected};if(_.length!==0){var R=[],T=[];if(!this.destroyed){v===void 0&&(v=!0);for(var A=0;A<_.length;A++){var k=_[A],M=k._private,N=M.rstyle;k.isEdge()&&(!S(k.source())||!S(k.target()))&&(N.clean=!1),k.isEdge()&&k.isBundledBezier()&&k.parallelEdges().some(function(Z){return!Z._private.rstyle.clean&&Z.isBundledBezier()})&&(N.clean=!1),!(v&&N.clean||k.removed())&&k.pstyle("display").value!=="none"&&(M.group==="nodes"?T.push(k):R.push(k),N.clean=!0)}for(var D=0;D<T.length;D++){var I=T[D],q=I._private,B=q.rstyle,z=I.position();this.recalculateNodeLabelProjection(I),B.nodeX=z.x,B.nodeY=z.y,B.nodeW=I.pstyle("width").pfValue,B.nodeH=I.pstyle("height").pfValue}this.recalculateEdgeProjections(R);for(var F=0;F<R.length;F++){var V=R[F],H=V._private,W=H.rstyle,Y=H.rscratch;W.srcX=Y.arrowStartX,W.srcY=Y.arrowStartY,W.tgtX=Y.arrowEndX,W.tgtY=Y.arrowEndY,W.midX=Y.midX,W.midY=Y.midY,W.labelAngle=Y.labelAngle,W.sourceLabelAngle=Y.sourceLabelAngle,W.targetLabelAngle=Y.targetLabelAngle}}}};var BRp$6={};BRp$6.updateCachedGrabbedEles=function(){var _=this.cachedZSortedEles;if(_){_.drag=[],_.nondrag=[];for(var v=[],S=0;S<_.length;S++){var R=_[S],T=R._private.rscratch;R.grabbed()&&!R.isParent()?v.push(R):T.inDragLayer?_.drag.push(R):_.nondrag.push(R)}for(var S=0;S<v.length;S++){var R=v[S];_.drag.push(R)}}};BRp$6.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};BRp$6.getCachedZSortedEles=function(_){if(_||!this.cachedZSortedEles){var v=this.cy.mutableElements().toArray();v.sort(zIndexSort),v.interactive=v.filter(function(S){return S.interactive()}),this.cachedZSortedEles=v,this.updateCachedGrabbedEles()}else v=this.cachedZSortedEles;return v};var BRp$5={};[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach(function(_){extend(BRp$5,_)});var BRp$4={};BRp$4.getCachedImage=function(_,v,S){var R=this,T=R.imageCache=R.imageCache||{},A=T[_];if(A)return A.image.complete||A.image.addEventListener("load",S),A.image;A=T[_]=T[_]||{};var k=A.image=new Image;k.addEventListener("load",S),k.addEventListener("error",function(){k.error=!0});var M="data:",N=_.substring(0,M.length).toLowerCase()===M;return N||(v=v==="null"?null:v,k.crossOrigin=v),k.src=_,k};var BRp$3={};BRp$3.registerBinding=function(_,v,S,R){var T=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(_)){for(var A=[],k=0;k<_.length;k++){var M=_[k];if(M!==void 0){var N=this.binder(M);A.push(N.on.apply(N,T))}}return A}var N=this.binder(_);return N.on.apply(N,T)};BRp$3.binder=function(_){var v=this,S=v.cy.window(),R=_===S||_===S.document||_===S.document.body||domElement(_);if(v.supportsPassiveEvents==null){var T=!1;try{var A=Object.defineProperty({},"passive",{get:function(){return T=!0,!0}});S.addEventListener("test",null,A)}catch{}v.supportsPassiveEvents=T}var k=function(N,D,I){var q=Array.prototype.slice.call(arguments);return R&&v.supportsPassiveEvents&&(q[2]={capture:I??!1,passive:!1,once:!1}),v.bindings.push({target:_,args:q}),(_.addEventListener||_.on).apply(_,q),this};return{on:k,addEventListener:k,addListener:k,bind:k}};BRp$3.nodeIsDraggable=function(_){return _&&_.isNode()&&!_.locked()&&_.grabbable()};BRp$3.nodeIsGrabbable=function(_){return this.nodeIsDraggable(_)&&_.interactive()};BRp$3.load=function(){var _=this,v=_.cy.window(),S=function(ke){return ke.selected()},R=function(ke){var Ue=ke.getRootNode();if(Ue&&Ue.nodeType===11&&Ue.host!==void 0)return Ue},T=function(ke,Ue,Ye,tt){ke==null&&(ke=_.cy);for(var ot=0;ot<Ue.length;ot++){var Rt=Ue[ot];ke.emit({originalEvent:Ye,type:Rt,position:tt})}},A=function(ke){return ke.shiftKey||ke.metaKey||ke.ctrlKey},k=function(ke,Ue){var Ye=!0;if(_.cy.hasCompoundNodes()&&ke&&ke.pannable())for(var tt=0;Ue&&tt<Ue.length;tt++){var ke=Ue[tt];if(ke.isNode()&&ke.isParent()&&!ke.pannable()){Ye=!1;break}}else Ye=!0;return Ye},M=function(ke){ke[0]._private.grabbed=!0},N=function(ke){ke[0]._private.grabbed=!1},D=function(ke){ke[0]._private.rscratch.inDragLayer=!0},I=function(ke){ke[0]._private.rscratch.inDragLayer=!1},q=function(ke){ke[0]._private.rscratch.isGrabTarget=!0},B=function(ke){ke[0]._private.rscratch.isGrabTarget=!1},z=function(ke,Ue){var Ye=Ue.addToList,tt=Ye.has(ke);!tt&&ke.grabbable()&&!ke.locked()&&(Ye.merge(ke),M(ke))},F=function(ke,Ue){if(ke.cy().hasCompoundNodes()&&!(Ue.inDragLayer==null&&Ue.addToList==null)){var Ye=ke.descendants();Ue.inDragLayer&&(Ye.forEach(D),Ye.connectedEdges().forEach(D)),Ue.addToList&&z(Ye,Ue)}},V=function(ke,Ue){Ue=Ue||{};var Ye=ke.cy().hasCompoundNodes();Ue.inDragLayer&&(ke.forEach(D),ke.neighborhood().stdFilter(function(tt){return!Ye||tt.isEdge()}).forEach(D)),Ue.addToList&&ke.forEach(function(tt){z(tt,Ue)}),F(ke,Ue),Y(ke,{inDragLayer:Ue.inDragLayer}),_.updateCachedGrabbedEles()},H=V,W=function(ke){ke&&(_.getCachedZSortedEles().forEach(function(Ue){N(Ue),I(Ue),B(Ue)}),_.updateCachedGrabbedEles())},Y=function(ke,Ue){if(!(Ue.inDragLayer==null&&Ue.addToList==null)&&ke.cy().hasCompoundNodes()){var Ye=ke.ancestors().orphans();if(!Ye.same(ke)){var tt=Ye.descendants().spawnSelf().merge(Ye).unmerge(ke).unmerge(ke.descendants()),ot=tt.connectedEdges();Ue.inDragLayer&&(ot.forEach(D),tt.forEach(D)),Ue.addToList&&tt.forEach(function(Rt){z(Rt,Ue)})}}},Z=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},J=typeof MutationObserver<"u",ne=typeof ResizeObserver<"u";J?(_.removeObserver=new MutationObserver(function(nt){for(var ke=0;ke<nt.length;ke++){var Ue=nt[ke],Ye=Ue.removedNodes;if(Ye)for(var tt=0;tt<Ye.length;tt++){var ot=Ye[tt];if(ot===_.container){_.destroy();break}}}}),_.container.parentNode&&_.removeObserver.observe(_.container.parentNode,{childList:!0})):_.registerBinding(_.container,"DOMNodeRemoved",function(nt){_.destroy()});var oe=debounce(function(){_.cy.resize()},100);J&&(_.styleObserver=new MutationObserver(oe),_.styleObserver.observe(_.container,{attributes:!0})),_.registerBinding(v,"resize",oe),ne&&(_.resizeObserver=new ResizeObserver(oe),_.resizeObserver.observe(_.container));var te=function(ke,Ue){for(;ke!=null;)Ue(ke),ke=ke.parentNode},se=function(){_.invalidateContainerClientCoordsCache()};te(_.container,function(nt){_.registerBinding(nt,"transitionend",se),_.registerBinding(nt,"animationend",se),_.registerBinding(nt,"scroll",se)}),_.registerBinding(_.container,"contextmenu",function(nt){nt.preventDefault()});var le=function(){return _.selection[4]!==0},ue=function(ke){for(var Ue=_.findContainerClientCoords(),Ye=Ue[0],tt=Ue[1],ot=Ue[2],Rt=Ue[3],dt=ke.touches?ke.touches:[ke],Mt=!1,kt=0;kt<dt.length;kt++){var Pt=dt[kt];if(Ye<=Pt.clientX&&Pt.clientX<=Ye+ot&&tt<=Pt.clientY&&Pt.clientY<=tt+Rt){Mt=!0;break}}if(!Mt)return!1;for(var zt=_.container,Et=ke.target,bt=Et.parentNode,Nt=!1;bt;){if(bt===zt){Nt=!0;break}bt=bt.parentNode}return!!Nt};_.registerBinding(_.container,"mousedown",function(ke){if(ue(ke)&&!(_.hoverData.which===1&&ke.which!==1)){ke.preventDefault(),Z(),_.hoverData.capture=!0,_.hoverData.which=ke.which;var Ue=_.cy,Ye=[ke.clientX,ke.clientY],tt=_.projectIntoViewport(Ye[0],Ye[1]),ot=_.selection,Rt=_.findNearestElements(tt[0],tt[1],!0,!1),dt=Rt[0],Mt=_.dragData.possibleDragElements;_.hoverData.mdownPos=tt,_.hoverData.mdownGPos=Ye;var kt=function(jt){return{originalEvent:ke,type:jt,position:{x:tt[0],y:tt[1]}}},Pt=function(){_.hoverData.tapholdCancelled=!1,clearTimeout(_.hoverData.tapholdTimeout),_.hoverData.tapholdTimeout=setTimeout(function(){if(!_.hoverData.tapholdCancelled){var jt=_.hoverData.down;jt?jt.emit(kt("taphold")):Ue.emit(kt("taphold"))}},_.tapholdDuration)};if(ke.which==3){_.hoverData.cxtStarted=!0;var zt={originalEvent:ke,type:"cxttapstart",position:{x:tt[0],y:tt[1]}};dt?(dt.activate(),dt.emit(zt),_.hoverData.down=dt):Ue.emit(zt),_.hoverData.downTime=new Date().getTime(),_.hoverData.cxtDragged=!1}else if(ke.which==1){dt&&dt.activate();{if(dt!=null&&_.nodeIsGrabbable(dt)){var Et=function(jt){jt.emit(kt("grab"))};if(q(dt),!dt.selected())Mt=_.dragData.possibleDragElements=Ue.collection(),H(dt,{addToList:Mt}),dt.emit(kt("grabon")).emit(kt("grab"));else{Mt=_.dragData.possibleDragElements=Ue.collection();var bt=Ue.$(function(Nt){return Nt.isNode()&&Nt.selected()&&_.nodeIsGrabbable(Nt)});V(bt,{addToList:Mt}),dt.emit(kt("grabon")),bt.forEach(Et)}_.redrawHint("eles",!0),_.redrawHint("drag",!0)}_.hoverData.down=dt,_.hoverData.downs=Rt,_.hoverData.downTime=new Date().getTime()}T(dt,["mousedown","tapstart","vmousedown"],ke,{x:tt[0],y:tt[1]}),dt==null?(ot[4]=1,_.data.bgActivePosistion={x:tt[0],y:tt[1]},_.redrawHint("select",!0),_.redraw()):dt.pannable()&&(ot[4]=1),Pt()}ot[0]=ot[2]=tt[0],ot[1]=ot[3]=tt[1]}},!1);var ce=R(_.container);_.registerBinding([v,ce],"mousemove",function(ke){var Ue=_.hoverData.capture;if(!(!Ue&&!ue(ke))){var Ye=!1,tt=_.cy,ot=tt.zoom(),Rt=[ke.clientX,ke.clientY],dt=_.projectIntoViewport(Rt[0],Rt[1]),Mt=_.hoverData.mdownPos,kt=_.hoverData.mdownGPos,Pt=_.selection,zt=null;!_.hoverData.draggingEles&&!_.hoverData.dragging&&!_.hoverData.selecting&&(zt=_.findNearestElement(dt[0],dt[1],!0,!1));var Et=_.hoverData.last,bt=_.hoverData.down,Nt=[dt[0]-Pt[2],dt[1]-Pt[3]],jt=_.dragData.possibleDragElements,fr;if(kt){var Gt=Rt[0]-kt[0],dr=Gt*Gt,vr=Rt[1]-kt[1],cr=vr*vr,or=dr+cr;_.hoverData.isOverThresholdDrag=fr=or>=_.desktopTapThreshold2}var Tr=A(ke);fr&&(_.hoverData.tapholdCancelled=!0);var Fr=function(){var on=_.hoverData.dragDelta=_.hoverData.dragDelta||[];on.length===0?(on.push(Nt[0]),on.push(Nt[1])):(on[0]+=Nt[0],on[1]+=Nt[1])};Ye=!0,T(zt,["mousemove","vmousemove","tapdrag"],ke,{x:dt[0],y:dt[1]});var Or=function(on){return{originalEvent:ke,type:on,position:{x:dt[0],y:dt[1]}}},Dn=function(){_.data.bgActivePosistion=void 0,_.hoverData.selecting||tt.emit(Or("boxstart")),Pt[4]=1,_.hoverData.selecting=!0,_.redrawHint("select",!0),_.redraw()};if(_.hoverData.which===3){if(fr){var Hr=Or("cxtdrag");bt?bt.emit(Hr):tt.emit(Hr),_.hoverData.cxtDragged=!0,(!_.hoverData.cxtOver||zt!==_.hoverData.cxtOver)&&(_.hoverData.cxtOver&&_.hoverData.cxtOver.emit(Or("cxtdragout")),_.hoverData.cxtOver=zt,zt&&zt.emit(Or("cxtdragover")))}}else if(_.hoverData.dragging){if(Ye=!0,tt.panningEnabled()&&tt.userPanningEnabled()){var Dr;if(_.hoverData.justStartedPan){var Ur=_.hoverData.mdownPos;Dr={x:(dt[0]-Ur[0])*ot,y:(dt[1]-Ur[1])*ot},_.hoverData.justStartedPan=!1}else Dr={x:Nt[0]*ot,y:Nt[1]*ot};tt.panBy(Dr),tt.emit(Or("dragpan")),_.hoverData.dragged=!0}dt=_.projectIntoViewport(ke.clientX,ke.clientY)}else if(Pt[4]==1&&(bt==null||bt.pannable())){if(fr){if(!_.hoverData.dragging&&tt.boxSelectionEnabled()&&(Tr||!tt.panningEnabled()||!tt.userPanningEnabled()))Dn();else if(!_.hoverData.selecting&&tt.panningEnabled()&&tt.userPanningEnabled()){var wn=k(bt,_.hoverData.downs);wn&&(_.hoverData.dragging=!0,_.hoverData.justStartedPan=!0,Pt[4]=0,_.data.bgActivePosistion=array2point(Mt),_.redrawHint("select",!0),_.redraw())}bt&&bt.pannable()&&bt.active()&&bt.unactivate()}}else{if(bt&&bt.pannable()&&bt.active()&&bt.unactivate(),(!bt||!bt.grabbed())&&zt!=Et&&(Et&&T(Et,["mouseout","tapdragout"],ke,{x:dt[0],y:dt[1]}),zt&&T(zt,["mouseover","tapdragover"],ke,{x:dt[0],y:dt[1]}),_.hoverData.last=zt),bt)if(fr){if(tt.boxSelectionEnabled()&&Tr)bt&&bt.grabbed()&&(W(jt),bt.emit(Or("freeon")),jt.emit(Or("free")),_.dragData.didDrag&&(bt.emit(Or("dragfreeon")),jt.emit(Or("dragfree")))),Dn();else if(bt&&bt.grabbed()&&_.nodeIsDraggable(bt)){var en=!_.dragData.didDrag;en&&_.redrawHint("eles",!0),_.dragData.didDrag=!0,_.hoverData.draggingEles||V(jt,{inDragLayer:!0});var nn={x:0,y:0};if(number$1(Nt[0])&&number$1(Nt[1])&&(nn.x+=Nt[0],nn.y+=Nt[1],en)){var vn=_.hoverData.dragDelta;vn&&number$1(vn[0])&&number$1(vn[1])&&(nn.x+=vn[0],nn.y+=vn[1])}_.hoverData.draggingEles=!0,jt.silentShift(nn).emit(Or("position")).emit(Or("drag")),_.redrawHint("drag",!0),_.redraw()}}else Fr();Ye=!0}if(Pt[2]=dt[0],Pt[3]=dt[1],Ye)return ke.stopPropagation&&ke.stopPropagation(),ke.preventDefault&&ke.preventDefault(),!1}},!1);var ge,me,Ee;_.registerBinding(v,"mouseup",function(ke){if(!(_.hoverData.which===1&&ke.which!==1&&_.hoverData.capture)){var Ue=_.hoverData.capture;if(Ue){_.hoverData.capture=!1;var Ye=_.cy,tt=_.projectIntoViewport(ke.clientX,ke.clientY),ot=_.selection,Rt=_.findNearestElement(tt[0],tt[1],!0,!1),dt=_.dragData.possibleDragElements,Mt=_.hoverData.down,kt=A(ke);_.data.bgActivePosistion&&(_.redrawHint("select",!0),_.redraw()),_.hoverData.tapholdCancelled=!0,_.data.bgActivePosistion=void 0,Mt&&Mt.unactivate();var Pt=function(Gt){return{originalEvent:ke,type:Gt,position:{x:tt[0],y:tt[1]}}};if(_.hoverData.which===3){var zt=Pt("cxttapend");if(Mt?Mt.emit(zt):Ye.emit(zt),!_.hoverData.cxtDragged){var Et=Pt("cxttap");Mt?Mt.emit(Et):Ye.emit(Et)}_.hoverData.cxtDragged=!1,_.hoverData.which=null}else if(_.hoverData.which===1){if(T(Rt,["mouseup","tapend","vmouseup"],ke,{x:tt[0],y:tt[1]}),!_.dragData.didDrag&&!_.hoverData.dragged&&!_.hoverData.selecting&&!_.hoverData.isOverThresholdDrag&&(T(Mt,["click","tap","vclick"],ke,{x:tt[0],y:tt[1]}),me=!1,ke.timeStamp-Ee<=Ye.multiClickDebounceTime()?(ge&&clearTimeout(ge),me=!0,Ee=null,T(Mt,["dblclick","dbltap","vdblclick"],ke,{x:tt[0],y:tt[1]})):(ge=setTimeout(function(){me||T(Mt,["oneclick","onetap","voneclick"],ke,{x:tt[0],y:tt[1]})},Ye.multiClickDebounceTime()),Ee=ke.timeStamp)),Mt==null&&!_.dragData.didDrag&&!_.hoverData.selecting&&!_.hoverData.dragged&&!A(ke)&&(Ye.$(S).unselect(["tapunselect"]),dt.length>0&&_.redrawHint("eles",!0),_.dragData.possibleDragElements=dt=Ye.collection()),Rt==Mt&&!_.dragData.didDrag&&!_.hoverData.selecting&&Rt!=null&&Rt._private.selectable&&(_.hoverData.dragging||(Ye.selectionType()==="additive"||kt?Rt.selected()?Rt.unselect(["tapunselect"]):Rt.select(["tapselect"]):kt||(Ye.$(S).unmerge(Rt).unselect(["tapunselect"]),Rt.select(["tapselect"]))),_.redrawHint("eles",!0)),_.hoverData.selecting){var bt=Ye.collection(_.getAllInBox(ot[0],ot[1],ot[2],ot[3]));_.redrawHint("select",!0),bt.length>0&&_.redrawHint("eles",!0),Ye.emit(Pt("boxend"));var Nt=function(Gt){return Gt.selectable()&&!Gt.selected()};Ye.selectionType()==="additive"||kt||Ye.$(S).unmerge(bt).unselect(),bt.emit(Pt("box")).stdFilter(Nt).select().emit(Pt("boxselect")),_.redraw()}if(_.hoverData.dragging&&(_.hoverData.dragging=!1,_.redrawHint("select",!0),_.redrawHint("eles",!0),_.redraw()),!ot[4]){_.redrawHint("drag",!0),_.redrawHint("eles",!0);var jt=Mt&&Mt.grabbed();W(dt),jt&&(Mt.emit(Pt("freeon")),dt.emit(Pt("free")),_.dragData.didDrag&&(Mt.emit(Pt("dragfreeon")),dt.emit(Pt("dragfree"))))}}ot[4]=0,_.hoverData.down=null,_.hoverData.cxtStarted=!1,_.hoverData.draggingEles=!1,_.hoverData.selecting=!1,_.hoverData.isOverThresholdDrag=!1,_.dragData.didDrag=!1,_.hoverData.dragged=!1,_.hoverData.dragDelta=[],_.hoverData.mdownPos=null,_.hoverData.mdownGPos=null,_.hoverData.which=null}}},!1);var _e=[],ye=4,be,Se=1e5,De=function(ke,Ue){for(var Ye=0;Ye<ke.length;Ye++)if(ke[Ye]%Ue!==0)return!1;return!0},xe=function(ke){for(var Ue=Math.abs(ke[0]),Ye=1;Ye<ke.length;Ye++)if(Math.abs(ke[Ye])!==Ue)return!1;return!0},pe=function(ke){var Ue=!1,Ye=ke.deltaY;if(Ye==null&&(ke.wheelDeltaY!=null?Ye=ke.wheelDeltaY/4:ke.wheelDelta!=null&&(Ye=ke.wheelDelta/4)),Ye!==0){if(be==null)if(_e.length>=ye){var tt=_e;if(be=De(tt,5),!be){var ot=Math.abs(tt[0]);be=xe(tt)&&ot>5}if(be)for(var Rt=0;Rt<tt.length;Rt++)Se=Math.min(Math.abs(tt[Rt]),Se)}else _e.push(Ye),Ue=!0;else be&&(Se=Math.min(Math.abs(Ye),Se));if(!_.scrollingPage){var dt=_.cy,Mt=dt.zoom(),kt=dt.pan(),Pt=_.projectIntoViewport(ke.clientX,ke.clientY),zt=[Pt[0]*Mt+kt.x,Pt[1]*Mt+kt.y];if(_.hoverData.draggingEles||_.hoverData.dragging||_.hoverData.cxtStarted||le()){ke.preventDefault();return}if(dt.panningEnabled()&&dt.userPanningEnabled()&&dt.zoomingEnabled()&&dt.userZoomingEnabled()){ke.preventDefault(),_.data.wheelZooming=!0,clearTimeout(_.data.wheelTimeout),_.data.wheelTimeout=setTimeout(function(){_.data.wheelZooming=!1,_.redrawHint("eles",!0),_.redraw()},150);var Et;Ue&&Math.abs(Ye)>5&&(Ye=signum(Ye)*5),Et=Ye/-250,be&&(Et/=Se,Et*=3),Et=Et*_.wheelSensitivity;var bt=ke.deltaMode===1;bt&&(Et*=33);var Nt=dt.zoom()*Math.pow(10,Et);ke.type==="gesturechange"&&(Nt=_.gestureStartZoom*ke.scale),dt.zoom({level:Nt,renderedPosition:{x:zt[0],y:zt[1]}}),dt.emit({type:ke.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:ke,position:{x:Pt[0],y:Pt[1]}})}}}};_.registerBinding(_.container,"wheel",pe,!0),_.registerBinding(v,"scroll",function(ke){_.scrollingPage=!0,clearTimeout(_.scrollingPageTimeout),_.scrollingPageTimeout=setTimeout(function(){_.scrollingPage=!1},250)},!0),_.registerBinding(_.container,"gesturestart",function(ke){_.gestureStartZoom=_.cy.zoom(),_.hasTouchStarted||ke.preventDefault()},!0),_.registerBinding(_.container,"gesturechange",function(nt){_.hasTouchStarted||pe(nt)},!0),_.registerBinding(_.container,"mouseout",function(ke){var Ue=_.projectIntoViewport(ke.clientX,ke.clientY);_.cy.emit({originalEvent:ke,type:"mouseout",position:{x:Ue[0],y:Ue[1]}})},!1),_.registerBinding(_.container,"mouseover",function(ke){var Ue=_.projectIntoViewport(ke.clientX,ke.clientY);_.cy.emit({originalEvent:ke,type:"mouseover",position:{x:Ue[0],y:Ue[1]}})},!1);var we,Oe,Ce,Pe,Ne,Te,ze,Fe,Ie,Le,$e,qe,at,lt=function(ke,Ue,Ye,tt){return Math.sqrt((Ye-ke)*(Ye-ke)+(tt-Ue)*(tt-Ue))},vt=function(ke,Ue,Ye,tt){return(Ye-ke)*(Ye-ke)+(tt-Ue)*(tt-Ue)},yt;_.registerBinding(_.container,"touchstart",yt=function(ke){if(_.hasTouchStarted=!0,!!ue(ke)){Z(),_.touchData.capture=!0,_.data.bgActivePosistion=void 0;var Ue=_.cy,Ye=_.touchData.now,tt=_.touchData.earlier;if(ke.touches[0]){var ot=_.projectIntoViewport(ke.touches[0].clientX,ke.touches[0].clientY);Ye[0]=ot[0],Ye[1]=ot[1]}if(ke.touches[1]){var ot=_.projectIntoViewport(ke.touches[1].clientX,ke.touches[1].clientY);Ye[2]=ot[0],Ye[3]=ot[1]}if(ke.touches[2]){var ot=_.projectIntoViewport(ke.touches[2].clientX,ke.touches[2].clientY);Ye[4]=ot[0],Ye[5]=ot[1]}var Rt=function(Tr){return{originalEvent:ke,type:Tr,position:{x:Ye[0],y:Ye[1]}}};if(ke.touches[1]){_.touchData.singleTouchMoved=!0,W(_.dragData.touchDragEles);var dt=_.findContainerClientCoords();Ie=dt[0],Le=dt[1],$e=dt[2],qe=dt[3],we=ke.touches[0].clientX-Ie,Oe=ke.touches[0].clientY-Le,Ce=ke.touches[1].clientX-Ie,Pe=ke.touches[1].clientY-Le,at=0<=we&&we<=$e&&0<=Ce&&Ce<=$e&&0<=Oe&&Oe<=qe&&0<=Pe&&Pe<=qe;var Mt=Ue.pan(),kt=Ue.zoom();Ne=lt(we,Oe,Ce,Pe),Te=vt(we,Oe,Ce,Pe),ze=[(we+Ce)/2,(Oe+Pe)/2],Fe=[(ze[0]-Mt.x)/kt,(ze[1]-Mt.y)/kt];var Pt=200,zt=Pt*Pt;if(Te<zt&&!ke.touches[2]){var Et=_.findNearestElement(Ye[0],Ye[1],!0,!0),bt=_.findNearestElement(Ye[2],Ye[3],!0,!0);Et&&Et.isNode()?(Et.activate().emit(Rt("cxttapstart")),_.touchData.start=Et):bt&&bt.isNode()?(bt.activate().emit(Rt("cxttapstart")),_.touchData.start=bt):Ue.emit(Rt("cxttapstart")),_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxt=!0,_.touchData.cxtDragged=!1,_.data.bgActivePosistion=void 0,_.redraw();return}}if(ke.touches[2])Ue.boxSelectionEnabled()&&ke.preventDefault();else if(!ke.touches[1]){if(ke.touches[0]){var Nt=_.findNearestElements(Ye[0],Ye[1],!0,!0),jt=Nt[0];if(jt!=null&&(jt.activate(),_.touchData.start=jt,_.touchData.starts=Nt,_.nodeIsGrabbable(jt))){var fr=_.dragData.touchDragEles=Ue.collection(),Gt=null;_.redrawHint("eles",!0),_.redrawHint("drag",!0),jt.selected()?(Gt=Ue.$(function(or){return or.selected()&&_.nodeIsGrabbable(or)}),V(Gt,{addToList:fr})):H(jt,{addToList:fr}),q(jt),jt.emit(Rt("grabon")),Gt?Gt.forEach(function(or){or.emit(Rt("grab"))}):jt.emit(Rt("grab"))}T(jt,["touchstart","tapstart","vmousedown"],ke,{x:Ye[0],y:Ye[1]}),jt==null&&(_.data.bgActivePosistion={x:ot[0],y:ot[1]},_.redrawHint("select",!0),_.redraw()),_.touchData.singleTouchMoved=!1,_.touchData.singleTouchStartTime=+new Date,clearTimeout(_.touchData.tapholdTimeout),_.touchData.tapholdTimeout=setTimeout(function(){_.touchData.singleTouchMoved===!1&&!_.pinching&&!_.touchData.selecting&&T(_.touchData.start,["taphold"],ke,{x:Ye[0],y:Ye[1]})},_.tapholdDuration)}}if(ke.touches.length>=1){for(var dr=_.touchData.startPosition=[null,null,null,null,null,null],vr=0;vr<Ye.length;vr++)dr[vr]=tt[vr]=Ye[vr];var cr=ke.touches[0];_.touchData.startGPosition=[cr.clientX,cr.clientY]}}},!1);var Ze;_.registerBinding(v,"touchmove",Ze=function(ke){var Ue=_.touchData.capture;if(!(!Ue&&!ue(ke))){var Ye=_.selection,tt=_.cy,ot=_.touchData.now,Rt=_.touchData.earlier,dt=tt.zoom();if(ke.touches[0]){var Mt=_.projectIntoViewport(ke.touches[0].clientX,ke.touches[0].clientY);ot[0]=Mt[0],ot[1]=Mt[1]}if(ke.touches[1]){var Mt=_.projectIntoViewport(ke.touches[1].clientX,ke.touches[1].clientY);ot[2]=Mt[0],ot[3]=Mt[1]}if(ke.touches[2]){var Mt=_.projectIntoViewport(ke.touches[2].clientX,ke.touches[2].clientY);ot[4]=Mt[0],ot[5]=Mt[1]}var kt=function(uo){return{originalEvent:ke,type:uo,position:{x:ot[0],y:ot[1]}}},Pt=_.touchData.startGPosition,zt;if(Ue&&ke.touches[0]&&Pt){for(var Et=[],bt=0;bt<ot.length;bt++)Et[bt]=ot[bt]-Rt[bt];var Nt=ke.touches[0].clientX-Pt[0],jt=Nt*Nt,fr=ke.touches[0].clientY-Pt[1],Gt=fr*fr,dr=jt+Gt;zt=dr>=_.touchTapThreshold2}if(Ue&&_.touchData.cxt){ke.preventDefault();var vr=ke.touches[0].clientX-Ie,cr=ke.touches[0].clientY-Le,or=ke.touches[1].clientX-Ie,Tr=ke.touches[1].clientY-Le,Fr=vt(vr,cr,or,Tr),Or=Fr/Te,Dn=150,Hr=Dn*Dn,Dr=1.5,Ur=Dr*Dr;if(Or>=Ur||Fr>=Hr){_.touchData.cxt=!1,_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var wn=kt("cxttapend");_.touchData.start?(_.touchData.start.unactivate().emit(wn),_.touchData.start=null):tt.emit(wn)}}if(Ue&&_.touchData.cxt){var wn=kt("cxtdrag");_.data.bgActivePosistion=void 0,_.redrawHint("select",!0),_.touchData.start?_.touchData.start.emit(wn):tt.emit(wn),_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxtDragged=!0;var en=_.findNearestElement(ot[0],ot[1],!0,!0);(!_.touchData.cxtOver||en!==_.touchData.cxtOver)&&(_.touchData.cxtOver&&_.touchData.cxtOver.emit(kt("cxtdragout")),_.touchData.cxtOver=en,en&&en.emit(kt("cxtdragover")))}else if(Ue&&ke.touches[2]&&tt.boxSelectionEnabled())ke.preventDefault(),_.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,_.touchData.selecting||tt.emit(kt("boxstart")),_.touchData.selecting=!0,_.touchData.didSelect=!0,Ye[4]=1,!Ye||Ye.length===0||Ye[0]===void 0?(Ye[0]=(ot[0]+ot[2]+ot[4])/3,Ye[1]=(ot[1]+ot[3]+ot[5])/3,Ye[2]=(ot[0]+ot[2]+ot[4])/3+1,Ye[3]=(ot[1]+ot[3]+ot[5])/3+1):(Ye[2]=(ot[0]+ot[2]+ot[4])/3,Ye[3]=(ot[1]+ot[3]+ot[5])/3),_.redrawHint("select",!0),_.redraw();else if(Ue&&ke.touches[1]&&!_.touchData.didSelect&&tt.zoomingEnabled()&&tt.panningEnabled()&&tt.userZoomingEnabled()&&tt.userPanningEnabled()){ke.preventDefault(),_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var nn=_.dragData.touchDragEles;if(nn){_.redrawHint("drag",!0);for(var vn=0;vn<nn.length;vn++){var Ra=nn[vn]._private;Ra.grabbed=!1,Ra.rscratch.inDragLayer=!1}}var on=_.touchData.start,vr=ke.touches[0].clientX-Ie,cr=ke.touches[0].clientY-Le,or=ke.touches[1].clientX-Ie,Tr=ke.touches[1].clientY-Le,ai=lt(vr,cr,or,Tr),Ta=ai/Ne;if(at){var Aa=vr-we,ja=cr-Oe,ka=or-Ce,$r=Tr-Pe,ca=(Aa+ka)/2,oo=(ja+$r)/2,An=tt.zoom(),Jn=An*Ta,Un=tt.pan(),Ni=Fe[0]*An+Un.x,Li=Fe[1]*An+Un.y,so={x:-Jn/An*(Ni-Un.x-ca)+Ni,y:-Jn/An*(Li-Un.y-oo)+Li};if(on&&on.active()){var nn=_.dragData.touchDragEles;W(nn),_.redrawHint("drag",!0),_.redrawHint("eles",!0),on.unactivate().emit(kt("freeon")),nn.emit(kt("free")),_.dragData.didDrag&&(on.emit(kt("dragfreeon")),nn.emit(kt("dragfree")))}tt.viewport({zoom:Jn,pan:so,cancelOnFailedZoom:!0}),tt.emit(kt("pinchzoom")),Ne=ai,we=vr,Oe=cr,Ce=or,Pe=Tr,_.pinching=!0}if(ke.touches[0]){var Mt=_.projectIntoViewport(ke.touches[0].clientX,ke.touches[0].clientY);ot[0]=Mt[0],ot[1]=Mt[1]}if(ke.touches[1]){var Mt=_.projectIntoViewport(ke.touches[1].clientX,ke.touches[1].clientY);ot[2]=Mt[0],ot[3]=Mt[1]}if(ke.touches[2]){var Mt=_.projectIntoViewport(ke.touches[2].clientX,ke.touches[2].clientY);ot[4]=Mt[0],ot[5]=Mt[1]}}else if(ke.touches[0]&&!_.touchData.didSelect){var yn=_.touchData.start,fa=_.touchData.last,en;if(!_.hoverData.draggingEles&&!_.swipePanning&&(en=_.findNearestElement(ot[0],ot[1],!0,!0)),Ue&&yn!=null&&ke.preventDefault(),Ue&&yn!=null&&_.nodeIsDraggable(yn))if(zt){var nn=_.dragData.touchDragEles,kn=!_.dragData.didDrag;kn&&V(nn,{inDragLayer:!0}),_.dragData.didDrag=!0;var sn={x:0,y:0};if(number$1(Et[0])&&number$1(Et[1])&&(sn.x+=Et[0],sn.y+=Et[1],kn)){_.redrawHint("eles",!0);var Cn=_.touchData.dragDelta;Cn&&number$1(Cn[0])&&number$1(Cn[1])&&(sn.x+=Cn[0],sn.y+=Cn[1])}_.hoverData.draggingEles=!0,nn.silentShift(sn).emit(kt("position")).emit(kt("drag")),_.redrawHint("drag",!0),_.touchData.startPosition[0]==Rt[0]&&_.touchData.startPosition[1]==Rt[1]&&_.redrawHint("eles",!0),_.redraw()}else{var Cn=_.touchData.dragDelta=_.touchData.dragDelta||[];Cn.length===0?(Cn.push(Et[0]),Cn.push(Et[1])):(Cn[0]+=Et[0],Cn[1]+=Et[1])}if(T(yn||en,["touchmove","tapdrag","vmousemove"],ke,{x:ot[0],y:ot[1]}),(!yn||!yn.grabbed())&&en!=fa&&(fa&&fa.emit(kt("tapdragout")),en&&en.emit(kt("tapdragover"))),_.touchData.last=en,Ue)for(var vn=0;vn<ot.length;vn++)ot[vn]&&_.touchData.startPosition[vn]&&zt&&(_.touchData.singleTouchMoved=!0);if(Ue&&(yn==null||yn.pannable())&&tt.panningEnabled()&&tt.userPanningEnabled()){var Uo=k(yn,_.touchData.starts);Uo&&(ke.preventDefault(),_.data.bgActivePosistion||(_.data.bgActivePosistion=array2point(_.touchData.startPosition)),_.swipePanning?(tt.panBy({x:Et[0]*dt,y:Et[1]*dt}),tt.emit(kt("dragpan"))):zt&&(_.swipePanning=!0,tt.panBy({x:Nt*dt,y:fr*dt}),tt.emit(kt("dragpan")),yn&&(yn.unactivate(),_.redrawHint("select",!0),_.touchData.start=null)));var Mt=_.projectIntoViewport(ke.touches[0].clientX,ke.touches[0].clientY);ot[0]=Mt[0],ot[1]=Mt[1]}}for(var bt=0;bt<ot.length;bt++)Rt[bt]=ot[bt];Ue&&ke.touches.length>0&&!_.hoverData.draggingEles&&!_.swipePanning&&_.data.bgActivePosistion!=null&&(_.data.bgActivePosistion=void 0,_.redrawHint("select",!0),_.redraw())}},!1);var _t;_.registerBinding(v,"touchcancel",_t=function(ke){var Ue=_.touchData.start;_.touchData.capture=!1,Ue&&Ue.unactivate()});var ct,wt,xt,At;if(_.registerBinding(v,"touchend",ct=function(ke){var Ue=_.touchData.start,Ye=_.touchData.capture;if(Ye)ke.touches.length===0&&(_.touchData.capture=!1),ke.preventDefault();else return;var tt=_.selection;_.swipePanning=!1,_.hoverData.draggingEles=!1;var ot=_.cy,Rt=ot.zoom(),dt=_.touchData.now,Mt=_.touchData.earlier;if(ke.touches[0]){var kt=_.projectIntoViewport(ke.touches[0].clientX,ke.touches[0].clientY);dt[0]=kt[0],dt[1]=kt[1]}if(ke.touches[1]){var kt=_.projectIntoViewport(ke.touches[1].clientX,ke.touches[1].clientY);dt[2]=kt[0],dt[3]=kt[1]}if(ke.touches[2]){var kt=_.projectIntoViewport(ke.touches[2].clientX,ke.touches[2].clientY);dt[4]=kt[0],dt[5]=kt[1]}var Pt=function(Hr){return{originalEvent:ke,type:Hr,position:{x:dt[0],y:dt[1]}}};Ue&&Ue.unactivate();var zt;if(_.touchData.cxt){if(zt=Pt("cxttapend"),Ue?Ue.emit(zt):ot.emit(zt),!_.touchData.cxtDragged){var Et=Pt("cxttap");Ue?Ue.emit(Et):ot.emit(Et)}_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxt=!1,_.touchData.start=null,_.redraw();return}if(!ke.touches[2]&&ot.boxSelectionEnabled()&&_.touchData.selecting){_.touchData.selecting=!1;var bt=ot.collection(_.getAllInBox(tt[0],tt[1],tt[2],tt[3]));tt[0]=void 0,tt[1]=void 0,tt[2]=void 0,tt[3]=void 0,tt[4]=0,_.redrawHint("select",!0),ot.emit(Pt("boxend"));var Nt=function(Hr){return Hr.selectable()&&!Hr.selected()};bt.emit(Pt("box")).stdFilter(Nt).select().emit(Pt("boxselect")),bt.nonempty()&&_.redrawHint("eles",!0),_.redraw()}if(Ue?.unactivate(),ke.touches[2])_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);else if(!ke.touches[1]){if(!ke.touches[0]){if(!ke.touches[0]){_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var jt=_.dragData.touchDragEles;if(Ue!=null){var fr=Ue._private.grabbed;W(jt),_.redrawHint("drag",!0),_.redrawHint("eles",!0),fr&&(Ue.emit(Pt("freeon")),jt.emit(Pt("free")),_.dragData.didDrag&&(Ue.emit(Pt("dragfreeon")),jt.emit(Pt("dragfree")))),T(Ue,["touchend","tapend","vmouseup","tapdragout"],ke,{x:dt[0],y:dt[1]}),Ue.unactivate(),_.touchData.start=null}else{var Gt=_.findNearestElement(dt[0],dt[1],!0,!0);T(Gt,["touchend","tapend","vmouseup","tapdragout"],ke,{x:dt[0],y:dt[1]})}var dr=_.touchData.startPosition[0]-dt[0],vr=dr*dr,cr=_.touchData.startPosition[1]-dt[1],or=cr*cr,Tr=vr+or,Fr=Tr*Rt*Rt;_.touchData.singleTouchMoved||(Ue||ot.$(":selected").unselect(["tapunselect"]),T(Ue,["tap","vclick"],ke,{x:dt[0],y:dt[1]}),wt=!1,ke.timeStamp-At<=ot.multiClickDebounceTime()?(xt&&clearTimeout(xt),wt=!0,At=null,T(Ue,["dbltap","vdblclick"],ke,{x:dt[0],y:dt[1]})):(xt=setTimeout(function(){wt||T(Ue,["onetap","voneclick"],ke,{x:dt[0],y:dt[1]})},ot.multiClickDebounceTime()),At=ke.timeStamp)),Ue!=null&&!_.dragData.didDrag&&Ue._private.selectable&&Fr<_.touchTapThreshold2&&!_.pinching&&(ot.selectionType()==="single"?(ot.$(S).unmerge(Ue).unselect(["tapunselect"]),Ue.select(["tapselect"])):Ue.selected()?Ue.unselect(["tapunselect"]):Ue.select(["tapselect"]),_.redrawHint("eles",!0)),_.touchData.singleTouchMoved=!0}}}for(var Or=0;Or<dt.length;Or++)Mt[Or]=dt[Or];_.dragData.didDrag=!1,ke.touches.length===0&&(_.touchData.dragDelta=[],_.touchData.startPosition=[null,null,null,null,null,null],_.touchData.startGPosition=null,_.touchData.didSelect=!1),ke.touches.length<2&&(ke.touches.length===1&&(_.touchData.startGPosition=[ke.touches[0].clientX,ke.touches[0].clientY]),_.pinching=!1,_.redrawHint("eles",!0),_.redraw())},!1),typeof TouchEvent>"u"){var Ct=[],$t=function(ke){return{clientX:ke.clientX,clientY:ke.clientY,force:1,identifier:ke.pointerId,pageX:ke.pageX,pageY:ke.pageY,radiusX:ke.width/2,radiusY:ke.height/2,screenX:ke.screenX,screenY:ke.screenY,target:ke.target}},Ut=function(ke){return{event:ke,touch:$t(ke)}},Xt=function(ke){Ct.push(Ut(ke))},Ot=function(ke){for(var Ue=0;Ue<Ct.length;Ue++){var Ye=Ct[Ue];if(Ye.event.pointerId===ke.pointerId){Ct.splice(Ue,1);return}}},qt=function(ke){var Ue=Ct.filter(function(Ye){return Ye.event.pointerId===ke.pointerId})[0];Ue.event=ke,Ue.touch=$t(ke)},Tt=function(ke){ke.touches=Ct.map(function(Ue){return Ue.touch})},St=function(ke){return ke.pointerType==="mouse"||ke.pointerType===4};_.registerBinding(_.container,"pointerdown",function(nt){St(nt)||(nt.preventDefault(),Xt(nt),Tt(nt),yt(nt))}),_.registerBinding(_.container,"pointerup",function(nt){St(nt)||(Ot(nt),Tt(nt),ct(nt))}),_.registerBinding(_.container,"pointercancel",function(nt){St(nt)||(Ot(nt),Tt(nt),_t(nt))}),_.registerBinding(_.container,"pointermove",function(nt){St(nt)||(nt.preventDefault(),qt(nt),Tt(nt),Ze(nt))})}};var BRp$2={};BRp$2.generatePolygon=function(_,v){return this.nodeShapes[_]={renderer:this,name:_,points:v,draw:function(R,T,A,k,M,N){this.renderer.nodeShapeImpl("polygon",R,T,A,k,M,this.points)},intersectLine:function(R,T,A,k,M,N,D,I){return polygonIntersectLine(M,N,this.points,R,T,A/2,k/2,D)},checkPoint:function(R,T,A,k,M,N,D,I){return pointInsidePolygon(R,T,this.points,N,D,k,M,[0,-1],A)},hasMiterBounds:_!=="rectangle",miterBounds:function(R,T,A,k,M,N){return miterBox(this.points,R,T,A,k,M)}}};BRp$2.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A)},intersectLine:function(v,S,R,T,A,k,M,N){return intersectLineEllipse(A,k,v,S,R/2+M,T/2+M)},checkPoint:function(v,S,R,T,A,k,M,N){return checkInEllipse(v,S,T,A,k,M,R)}}};BRp$2.generateRoundPolygon=function(_,v){return this.nodeShapes[_]={renderer:this,name:_,points:v,getOrCreateCorners:function(R,T,A,k,M,N,D){if(N[D]!==void 0&&N[D+"-cx"]===R&&N[D+"-cy"]===T)return N[D];N[D]=new Array(v.length/2),N[D+"-cx"]=R,N[D+"-cy"]=T;var I=A/2,q=k/2;M=M==="auto"?getRoundPolygonRadius(A,k):M;for(var B=new Array(v.length/2),z=0;z<v.length/2;z++)B[z]={x:R+I*v[z*2],y:T+q*v[z*2+1]};var F,V,H,W,Y=B.length;for(V=B[Y-1],F=0;F<Y;F++)H=B[F%Y],W=B[(F+1)%Y],N[D][F]=getRoundCorner(V,H,W,M),V=H,H=W;return N[D]},draw:function(R,T,A,k,M,N,D){this.renderer.nodeShapeImpl("round-polygon",R,T,A,k,M,this.points,this.getOrCreateCorners(T,A,k,M,N,D,"drawCorners"))},intersectLine:function(R,T,A,k,M,N,D,I,q){return roundPolygonIntersectLine(M,N,this.points,R,T,A,k,D,this.getOrCreateCorners(R,T,A,k,I,q,"corners"))},checkPoint:function(R,T,A,k,M,N,D,I,q){return pointInsideRoundPolygon(R,T,this.points,N,D,k,M,this.getOrCreateCorners(N,D,k,M,I,q,"corners"))}}};BRp$2.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,this.points,k)},intersectLine:function(v,S,R,T,A,k,M,N){return roundRectangleIntersectLine(A,k,v,S,R,T,M,N)},checkPoint:function(v,S,R,T,A,k,M,N){var D=T/2,I=A/2;N=N==="auto"?getRoundRectangleRadius(T,A):N,N=Math.min(D,I,N);var q=N*2;return!!(pointInsidePolygon(v,S,this.points,k,M,T,A-q,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-q,A,[0,-1],R)||checkInEllipse(v,S,q,q,k-D+N,M-I+N,R)||checkInEllipse(v,S,q,q,k+D-N,M-I+N,R)||checkInEllipse(v,S,q,q,k+D-N,M+I-N,R)||checkInEllipse(v,S,q,q,k-D+N,M+I-N,R))}}};BRp$2.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,null,k)},generateCutTrianglePts:function(v,S,R,T,A){var k=A==="auto"?this.cornerLength:A,M=S/2,N=v/2,D=R-N,I=R+N,q=T-M,B=T+M;return{topLeft:[D,q+k,D+k,q,D+k,q+k],topRight:[I-k,q,I,q+k,I-k,q+k],bottomRight:[I,B-k,I-k,B,I-k,B-k],bottomLeft:[D+k,B,D,B-k,D+k,B-k]}},intersectLine:function(v,S,R,T,A,k,M,N){var D=this.generateCutTrianglePts(R+2*M,T+2*M,v,S,N),I=[].concat.apply([],[D.topLeft.splice(0,4),D.topRight.splice(0,4),D.bottomRight.splice(0,4),D.bottomLeft.splice(0,4)]);return polygonIntersectLine(A,k,I,v,S)},checkPoint:function(v,S,R,T,A,k,M,N){var D=N==="auto"?this.cornerLength:N;if(pointInsidePolygon(v,S,this.points,k,M,T,A-2*D,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-2*D,A,[0,-1],R))return!0;var I=this.generateCutTrianglePts(T,A,k,M);return pointInsidePolygonPoints(v,S,I.topLeft)||pointInsidePolygonPoints(v,S,I.topRight)||pointInsidePolygonPoints(v,S,I.bottomRight)||pointInsidePolygonPoints(v,S,I.bottomLeft)}}};BRp$2.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A)},intersectLine:function(v,S,R,T,A,k,M,N){var D=.15,I=.5,q=.85,B=this.generateBarrelBezierPts(R+2*M,T+2*M,v,S),z=function(H){var W=qbezierPtAt({x:H[0],y:H[1]},{x:H[2],y:H[3]},{x:H[4],y:H[5]},D),Y=qbezierPtAt({x:H[0],y:H[1]},{x:H[2],y:H[3]},{x:H[4],y:H[5]},I),Z=qbezierPtAt({x:H[0],y:H[1]},{x:H[2],y:H[3]},{x:H[4],y:H[5]},q);return[H[0],H[1],W.x,W.y,Y.x,Y.y,Z.x,Z.y,H[4],H[5]]},F=[].concat(z(B.topLeft),z(B.topRight),z(B.bottomRight),z(B.bottomLeft));return polygonIntersectLine(A,k,F,v,S)},generateBarrelBezierPts:function(v,S,R,T){var A=S/2,k=v/2,M=R-k,N=R+k,D=T-A,I=T+A,q=getBarrelCurveConstants(v,S),B=q.heightOffset,z=q.widthOffset,F=q.ctrlPtOffsetPct*v,V={topLeft:[M,D+B,M+F,D,M+z,D],topRight:[N-z,D,N-F,D,N,D+B],bottomRight:[N,I-B,N-F,I,N-z,I],bottomLeft:[M+z,I,M+F,I,M,I-B]};return V.topLeft.isTop=!0,V.topRight.isTop=!0,V.bottomLeft.isBottom=!0,V.bottomRight.isBottom=!0,V},checkPoint:function(v,S,R,T,A,k,M,N){var D=getBarrelCurveConstants(T,A),I=D.heightOffset,q=D.widthOffset;if(pointInsidePolygon(v,S,this.points,k,M,T,A-2*I,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-2*q,A,[0,-1],R))return!0;for(var B=this.generateBarrelBezierPts(T,A,k,M),z=function(se,le,ue){var ce=ue[4],ge=ue[2],me=ue[0],Ee=ue[5],_e=ue[1],ye=Math.min(ce,me),be=Math.max(ce,me),Se=Math.min(Ee,_e),De=Math.max(Ee,_e);if(ye<=se&&se<=be&&Se<=le&&le<=De){var xe=bezierPtsToQuadCoeff(ce,ge,me),pe=solveQuadratic(xe[0],xe[1],xe[2],se),we=pe.filter(function(Oe){return 0<=Oe&&Oe<=1});if(we.length>0)return we[0]}return null},F=Object.keys(B),V=0;V<F.length;V++){var H=F[V],W=B[H],Y=z(v,S,W);if(Y!=null){var Z=W[5],J=W[3],ne=W[1],oe=qbezierAt(Z,J,ne,Y);if(W.isTop&&oe<=S||W.isBottom&&S<=oe)return!0}}return!1}}};BRp$2.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,this.points,k)},intersectLine:function(v,S,R,T,A,k,M,N){var D=v-(R/2+M),I=S-(T/2+M),q=I,B=v+(R/2+M),z=finiteLinesIntersect(A,k,v,S,D,I,B,q,!1);return z.length>0?z:roundRectangleIntersectLine(A,k,v,S,R,T,M,N)},checkPoint:function(v,S,R,T,A,k,M,N){N=N==="auto"?getRoundRectangleRadius(T,A):N;var D=2*N;if(pointInsidePolygon(v,S,this.points,k,M,T,A-D,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-D,A,[0,-1],R))return!0;var I=T/2+2*R,q=A/2+2*R,B=[k-I,M-q,k-I,M,k+I,M,k+I,M-q];return!!(pointInsidePolygonPoints(v,S,B)||checkInEllipse(v,S,D,D,k+T/2-N,M+A/2-N,R)||checkInEllipse(v,S,D,D,k-T/2+N,M+A/2-N,R))}}};BRp$2.registerNodeShapes=function(){var _=this.nodeShapes={},v=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),_.square=_.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var S=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",S),this.generateRoundPolygon("round-diamond",S)}this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var R=new Array(20);{var T=generateUnitNgonPoints(5,0),A=generateUnitNgonPoints(5,Math.PI/5),k=.5*(3-Math.sqrt(5));k*=1.57;for(var M=0;M<A.length/2;M++)A[M*2]*=k,A[M*2+1]*=k;for(var M=0;M<20/4;M++)R[M*4]=T[M*2],R[M*4+1]=T[M*2+1],R[M*4+2]=A[M*2],R[M*4+3]=A[M*2+1]}R=fitPolygonToSquare(R),this.generatePolygon("star",R),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var N=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",N),this.generateRoundPolygon("round-tag",N)}_.makePolygon=function(D){var I=D.join("$"),q="polygon-"+I,B;return(B=this[q])?B:v.generatePolygon(q,D)}};var BRp$1={};BRp$1.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};BRp$1.redraw=function(_){_=_||staticEmptyObject();var v=this;v.averageRedrawTime===void 0&&(v.averageRedrawTime=0),v.lastRedrawTime===void 0&&(v.lastRedrawTime=0),v.lastDrawTime===void 0&&(v.lastDrawTime=0),v.requestedFrame=!0,v.renderOptions=_};BRp$1.beforeRender=function(_,v){if(!this.destroyed){v==null&&error("Priority is not optional for beforeRender");var S=this.beforeRenderCallbacks;S.push({fn:_,priority:v}),S.sort(function(R,T){return T.priority-R.priority})}};var beforeRenderCallbacks=function(v,S,R){for(var T=v.beforeRenderCallbacks,A=0;A<T.length;A++)T[A].fn(S,R)};BRp$1.startRenderLoop=function(){var _=this,v=_.cy;if(!_.renderLoopStarted){_.renderLoopStarted=!0;var S=function(T){if(!_.destroyed){if(!v.batching())if(_.requestedFrame&&!_.skipFrame){beforeRenderCallbacks(_,!0,T);var A=performanceNow();_.render(_.renderOptions);var k=_.lastDrawTime=performanceNow();_.averageRedrawTime===void 0&&(_.averageRedrawTime=k-A),_.redrawCount===void 0&&(_.redrawCount=0),_.redrawCount++,_.redrawTotalTime===void 0&&(_.redrawTotalTime=0);var M=k-A;_.redrawTotalTime+=M,_.lastRedrawTime=M,_.averageRedrawTime=_.averageRedrawTime/2+M/2,_.requestedFrame=!1}else beforeRenderCallbacks(_,!1,T);_.skipFrame=!1,requestAnimationFrame$1(S)}};requestAnimationFrame$1(S)}};var BaseRenderer=function(v){this.init(v)},BR=BaseRenderer,BRp=BR.prototype;BRp.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];BRp.init=function(_){var v=this;v.options=_,v.cy=_.cy;var S=v.container=_.cy.container(),R=v.cy.window();if(R){var T=R.document,A=T.head,k="__________cytoscape_stylesheet",M="__________cytoscape_container",N=T.getElementById(k)!=null;if(S.className.indexOf(M)<0&&(S.className=(S.className||"")+" "+M),!N){var D=T.createElement("style");D.id=k,D.textContent="."+M+" { position: relative; }",A.insertBefore(D,A.children[0])}var I=R.getComputedStyle(S),q=I.getPropertyValue("position");q==="static"&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}v.selection=[void 0,void 0,void 0,void 0,0],v.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],v.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},v.dragData={possibleDragElements:[]},v.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},v.redraws=0,v.showFps=_.showFps,v.debug=_.debug,v.webgl=_.webgl,v.hideEdgesOnViewport=_.hideEdgesOnViewport,v.textureOnViewport=_.textureOnViewport,v.wheelSensitivity=_.wheelSensitivity,v.motionBlurEnabled=_.motionBlur,v.forcedPixelRatio=number$1(_.pixelRatio)?_.pixelRatio:null,v.motionBlur=_.motionBlur,v.motionBlurOpacity=_.motionBlurOpacity,v.motionBlurTransparency=1-v.motionBlurOpacity,v.motionBlurPxRatio=1,v.mbPxRBlurry=1,v.minMbLowQualFrames=4,v.fullQualityMb=!1,v.clearedForMotionBlur=[],v.desktopTapThreshold=_.desktopTapThreshold,v.desktopTapThreshold2=_.desktopTapThreshold*_.desktopTapThreshold,v.touchTapThreshold=_.touchTapThreshold,v.touchTapThreshold2=_.touchTapThreshold*_.touchTapThreshold,v.tapholdDuration=500,v.bindings=[],v.beforeRenderCallbacks=[],v.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},v.registerNodeShapes(),v.registerArrowShapes(),v.registerCalculationListeners()};BRp.notify=function(_,v){var S=this,R=S.cy;if(!this.destroyed){if(_==="init"){S.load();return}if(_==="destroy"){S.destroy();return}(_==="add"||_==="remove"||_==="move"&&R.hasCompoundNodes()||_==="load"||_==="zorder"||_==="mount")&&S.invalidateCachedZSortedEles(),_==="viewport"&&S.redrawHint("select",!0),_==="gc"&&S.redrawHint("gc",!0),(_==="load"||_==="resize"||_==="mount")&&(S.invalidateContainerClientCoordsCache(),S.matchCanvasSize(S.container)),S.redrawHint("eles",!0),S.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};BRp.destroy=function(){var _=this;_.destroyed=!0,_.cy.stopAnimationLoop();for(var v=0;v<_.bindings.length;v++){var S=_.bindings[v],R=S,T=R.target;(T.off||T.removeEventListener).apply(T,R.args)}if(_.bindings=[],_.beforeRenderCallbacks=[],_.onUpdateEleCalcsFns=[],_.removeObserver&&_.removeObserver.disconnect(),_.styleObserver&&_.styleObserver.disconnect(),_.resizeObserver&&_.resizeObserver.disconnect(),_.labelCalcDiv)try{document.body.removeChild(_.labelCalcDiv)}catch{}};BRp.isHeadless=function(){return!1};[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach(function(_){extend(BRp,_)});var fullFpsTime=1e3/60,defs={setupDequeueing:function(v){return function(){var R=this,T=this.renderer;if(!R.dequeueingSetup){R.dequeueingSetup=!0;var A=debounce(function(){T.redrawHint("eles",!0),T.redrawHint("drag",!0),T.redraw()},v.deqRedrawThreshold),k=function(D,I){var q=performanceNow(),B=T.averageRedrawTime,z=T.lastRedrawTime,F=[],V=T.cy.extent(),H=T.getPixelRatio();for(D||T.flushRenderedStyleQueue();;){var W=performanceNow(),Y=W-q,Z=W-I;if(z<fullFpsTime){var J=fullFpsTime-(D?B:0);if(Z>=v.deqFastCost*J)break}else if(D){if(Y>=v.deqCost*z||Y>=v.deqAvgCost*B)break}else if(Z>=v.deqNoDrawCost*fullFpsTime)break;var ne=v.deq(R,H,V);if(ne.length>0)for(var oe=0;oe<ne.length;oe++)F.push(ne[oe]);else break}F.length>0&&(v.onDeqd(R,F),!D&&v.shouldRedraw(R,F,H,V)&&A())},M=v.priority||noop$1;T.beforeRender(k,M(R))}}}},ElementTextureCacheLookup=(function(){function _(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:falsify;_classCallCheck(this,_),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=v,this.doesEleInvalidateKey=S}return _createClass(_,[{key:"getIdsFor",value:function(S){S==null&&error("Can not get id list for null key");var R=this.idsByKey,T=this.idsByKey.get(S);return T||(T=new Set$1,R.set(S,T)),T}},{key:"addIdForKey",value:function(S,R){S!=null&&this.getIdsFor(S).add(R)}},{key:"deleteIdForKey",value:function(S,R){S!=null&&this.getIdsFor(S).delete(R)}},{key:"getNumberOfIdsForKey",value:function(S){return S==null?0:this.getIdsFor(S).size}},{key:"updateKeyMappingFor",value:function(S){var R=S.id(),T=this.keyForId.get(R),A=this.getKey(S);this.deleteIdForKey(T,R),this.addIdForKey(A,R),this.keyForId.set(R,A)}},{key:"deleteKeyMappingFor",value:function(S){var R=S.id(),T=this.keyForId.get(R);this.deleteIdForKey(T,R),this.keyForId.delete(R)}},{key:"keyHasChangedFor",value:function(S){var R=S.id(),T=this.keyForId.get(R),A=this.getKey(S);return T!==A}},{key:"isInvalid",value:function(S){return this.keyHasChangedFor(S)||this.doesEleInvalidateKey(S)}},{key:"getCachesAt",value:function(S){var R=this.cachesByLvl,T=this.lvls,A=R.get(S);return A||(A=new Map$1,R.set(S,A),T.push(S)),A}},{key:"getCache",value:function(S,R){return this.getCachesAt(R).get(S)}},{key:"get",value:function(S,R){var T=this.getKey(S),A=this.getCache(T,R);return A!=null&&this.updateKeyMappingFor(S),A}},{key:"getForCachedKey",value:function(S,R){var T=this.keyForId.get(S.id()),A=this.getCache(T,R);return A}},{key:"hasCache",value:function(S,R){return this.getCachesAt(R).has(S)}},{key:"has",value:function(S,R){var T=this.getKey(S);return this.hasCache(T,R)}},{key:"setCache",value:function(S,R,T){T.key=S,this.getCachesAt(R).set(S,T)}},{key:"set",value:function(S,R,T){var A=this.getKey(S);this.setCache(A,R,T),this.updateKeyMappingFor(S)}},{key:"deleteCache",value:function(S,R){this.getCachesAt(R).delete(S)}},{key:"delete",value:function(S,R){var T=this.getKey(S);this.deleteCache(T,R)}},{key:"invalidateKey",value:function(S){var R=this;this.lvls.forEach(function(T){return R.deleteCache(S,T)})}},{key:"invalidate",value:function(S){var R=S.id(),T=this.keyForId.get(R);this.deleteKeyMappingFor(S);var A=this.doesEleInvalidateKey(S);return A&&this.invalidateKey(T),A||this.getNumberOfIdsForKey(T)===0}}])})(),minTxrH=25,txrStepH=50,minLvl$1=-4,maxLvl$1=3,maxZoom$1=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,deqRedrawThreshold$1=100,maxDeqSize$1=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(v,S){var R=this;R.renderer=v,R.onDequeues=[];var T=initDefaults(S);extend(R,T),R.lookup=new ElementTextureCacheLookup(T.getKey,T.doesEleInvalidateKey),R.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons;ETCp.getTextureQueue=function(_){var v=this;return v.eleImgCaches=v.eleImgCaches||{},v.eleImgCaches[_]=v.eleImgCaches[_]||[]};ETCp.getRetiredTextureQueue=function(_){var v=this,S=v.eleImgCaches.retired=v.eleImgCaches.retired||{},R=S[_]=S[_]||[];return R};ETCp.getElementQueue=function(){var _=this,v=_.eleCacheQueue=_.eleCacheQueue||new Heap(function(S,R){return R.reqs-S.reqs});return v};ETCp.getElementKeyToQueue=function(){var _=this,v=_.eleKeyToCacheQueue=_.eleKeyToCacheQueue||{};return v};ETCp.getElement=function(_,v,S,R,T){var A=this,k=this.renderer,M=k.cy.zoom(),N=this.lookup;if(!v||v.w===0||v.h===0||isNaN(v.w)||isNaN(v.h)||!_.visible()||_.removed()||!A.allowEdgeTxrCaching&&_.isEdge()||!A.allowParentTxrCaching&&_.isParent())return null;if(R==null&&(R=Math.ceil(log2(M*S))),R<minLvl$1)R=minLvl$1;else if(M>=maxZoom$1||R>maxLvl$1)return null;var D=Math.pow(2,R),I=v.h*D,q=v.w*D,B=k.eleTextBiggerThanMin(_,D);if(!this.isVisible(_,B))return null;var z=N.get(_,R);if(z&&z.invalidated&&(z.invalidated=!1,z.texture.invalidatedWidth-=z.width),z)return z;var F;if(I<=minTxrH?F=minTxrH:I<=txrStepH?F=txrStepH:F=Math.ceil(I/txrStepH)*txrStepH,I>maxTxrH||q>maxTxrW)return null;var V=A.getTextureQueue(F),H=V[V.length-2],W=function(){return A.recycleTexture(F,q)||A.addTexture(F,q)};H||(H=V[V.length-1]),H||(H=W()),H.width-H.usedWidth<q&&(H=W());for(var Y=function(ye){return ye&&ye.scaledLabelShown===B},Z=T&&T===getTxrReasons.dequeue,J=T&&T===getTxrReasons.highQuality,ne=T&&T===getTxrReasons.downscale,oe,te=R+1;te<=maxLvl$1;te++){var se=N.get(_,te);if(se){oe=se;break}}var le=oe&&oe.level===R+1?oe:null,ue=function(){H.context.drawImage(le.texture.canvas,le.x,0,le.width,le.height,H.usedWidth,0,q,I)};if(H.context.setTransform(1,0,0,1,0,0),H.context.clearRect(H.usedWidth,0,q,F),Y(le))ue();else if(Y(oe))if(J){for(var ce=oe.level;ce>R;ce--)le=A.getElement(_,v,S,ce,getTxrReasons.downscale);ue()}else return A.queueElement(_,oe.level-1),oe;else{var ge;if(!Z&&!J&&!ne)for(var me=R-1;me>=minLvl$1;me--){var Ee=N.get(_,me);if(Ee){ge=Ee;break}}if(Y(ge))return A.queueElement(_,R),ge;H.context.translate(H.usedWidth,0),H.context.scale(D,D),this.drawElement(H.context,_,v,B,!1),H.context.scale(1/D,1/D),H.context.translate(-H.usedWidth,0)}return z={x:H.usedWidth,texture:H,level:R,scale:D,width:q,height:I,scaledLabelShown:B},H.usedWidth+=Math.ceil(q+eleTxrSpacing),H.eleCaches.push(z),N.set(_,R,z),A.checkTextureFullness(H),z};ETCp.invalidateElements=function(_){for(var v=0;v<_.length;v++)this.invalidateElement(_[v])};ETCp.invalidateElement=function(_){var v=this,S=v.lookup,R=[],T=S.isInvalid(_);if(T){for(var A=minLvl$1;A<=maxLvl$1;A++){var k=S.getForCachedKey(_,A);k&&R.push(k)}var M=S.invalidate(_);if(M)for(var N=0;N<R.length;N++){var D=R[N],I=D.texture;I.invalidatedWidth+=D.width,D.invalidated=!0,v.checkTextureUtility(I)}v.removeFromQueue(_)}};ETCp.checkTextureUtility=function(_){_.invalidatedWidth>=minUtility*_.width&&this.retireTexture(_)};ETCp.checkTextureFullness=function(_){var v=this,S=v.getTextureQueue(_.height);_.usedWidth/_.width>maxFullness&&_.fullnessChecks>=maxFullnessChecks?removeFromArray(S,_):_.fullnessChecks++};ETCp.retireTexture=function(_){var v=this,S=_.height,R=v.getTextureQueue(S),T=this.lookup;removeFromArray(R,_),_.retired=!0;for(var A=_.eleCaches,k=0;k<A.length;k++){var M=A[k];T.deleteCache(M.key,M.level)}clearArray(A);var N=v.getRetiredTextureQueue(S);N.push(_)};ETCp.addTexture=function(_,v){var S=this,R=S.getTextureQueue(_),T={};return R.push(T),T.eleCaches=[],T.height=_,T.width=Math.max(defTxrWidth,v),T.usedWidth=0,T.invalidatedWidth=0,T.fullnessChecks=0,T.canvas=S.renderer.makeOffscreenCanvas(T.width,T.height),T.context=T.canvas.getContext("2d"),T};ETCp.recycleTexture=function(_,v){for(var S=this,R=S.getTextureQueue(_),T=S.getRetiredTextureQueue(_),A=0;A<T.length;A++){var k=T[A];if(k.width>=v)return k.retired=!1,k.usedWidth=0,k.invalidatedWidth=0,k.fullnessChecks=0,clearArray(k.eleCaches),k.context.setTransform(1,0,0,1,0,0),k.context.clearRect(0,0,k.width,k.height),removeFromArray(T,k),R.push(k),k}};ETCp.queueElement=function(_,v){var S=this,R=S.getElementQueue(),T=S.getElementKeyToQueue(),A=this.getKey(_),k=T[A];if(k)k.level=Math.max(k.level,v),k.eles.merge(_),k.reqs++,R.updateItem(k);else{var M={eles:_.spawn().merge(_),level:v,reqs:1,key:A};R.push(M),T[A]=M}};ETCp.dequeue=function(_){for(var v=this,S=v.getElementQueue(),R=v.getElementKeyToQueue(),T=[],A=v.lookup,k=0;k<maxDeqSize$1&&S.size()>0;k++){var M=S.pop(),N=M.key,D=M.eles[0],I=A.hasCache(D,M.level);if(R[N]=null,I)continue;T.push(M);var q=v.getBoundingBox(D);v.getElement(D,q,_,M.level,getTxrReasons.dequeue)}return T};ETCp.removeFromQueue=function(_){var v=this,S=v.getElementQueue(),R=v.getElementKeyToQueue(),T=this.getKey(_),A=R[T];A!=null&&(A.eles.length===1?(A.reqs=MAX_INT$1,S.updateItem(A),S.pop(),R[T]=null):A.eles.unmerge(_))};ETCp.onDequeue=function(_){this.onDequeues.push(_)};ETCp.offDequeue=function(_){removeFromArray(this.onDequeues,_)};ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(v,S,R){return v.dequeue(S,R)},onDeqd:function(v,S){for(var R=0;R<v.onDequeues.length;R++){var T=v.onDequeues[R];T(S)}},shouldRedraw:function(v,S,R,T){for(var A=0;A<S.length;A++)for(var k=S[A].eles,M=0;M<k.length;M++){var N=k[M].boundingBox();if(boundingBoxesIntersect(N,T))return!0}return!1},priority:function(v){return v.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl=-4,maxLvl=2,maxZoom=3.99,deqRedrawThreshold=50,refineEleDebounceTime=50,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,maxDeqSize=1,invalidThreshold=250,maxLayerArea=4e3*4e3,maxLayerDim=32767,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(v){var S=this,R=S.renderer=v,T=R.cy;S.layersByLevel={},S.firstGet=!0,S.lastInvalidationTime=performanceNow()-2*invalidThreshold,S.skipping=!1,S.eleTxrDeqs=T.collection(),S.scheduleElementRefinement=debounce(function(){S.refineElementTextures(S.eleTxrDeqs),S.eleTxrDeqs.unmerge(S.eleTxrDeqs)},refineEleDebounceTime),R.beforeRender(function(k,M){M-S.lastInvalidationTime<=invalidThreshold?S.skipping=!0:S.skipping=!1},R.beforeRenderPriorities.lyrTxrSkip);var A=function(M,N){return N.reqs-M.reqs};S.layersQueue=new Heap(A),S.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(_,v){var S=Math.pow(2,v),R=Math.ceil(_.w*S),T=Math.ceil(_.h*S),A=this.renderer.makeOffscreenCanvas(R,T),k={id:layerIdPool=++layerIdPool%MAX_INT,bb:_,level:v,width:R,height:T,canvas:A,context:A.getContext("2d"),eles:[],elesQueue:[],reqs:0},M=k.context,N=-k.bb.x1,D=-k.bb.y1;return M.scale(S,S),M.translate(N,D),k};LTCp.getLayers=function(_,v,S){var R=this,T=R.renderer,A=T.cy,k=A.zoom(),M=R.firstGet;if(R.firstGet=!1,S==null){if(S=Math.ceil(log2(k*v)),S<minLvl)S=minLvl;else if(k>=maxZoom||S>maxLvl)return null}R.validateLayersElesOrdering(S,_);var N=R.layersByLevel,D=Math.pow(2,S),I=N[S]=N[S]||[],q,B=R.levelIsComplete(S,_),z,F=function(){var ue=function(_e){if(R.validateLayersElesOrdering(_e,_),R.levelIsComplete(_e,_))return z=N[_e],!0},ce=function(_e){if(!z)for(var ye=S+_e;minLvl<=ye&&ye<=maxLvl&&!ue(ye);ye+=_e);};ce(1),ce(-1);for(var ge=I.length-1;ge>=0;ge--){var me=I[ge];me.invalid&&removeFromArray(I,me)}};if(!B)F();else return I;var V=function(){if(!q){q=makeBoundingBox();for(var ue=0;ue<_.length;ue++)updateBoundingBox(q,_[ue].boundingBox())}return q},H=function(ue){ue=ue||{};var ce=ue.after;V();var ge=Math.ceil(q.w*D),me=Math.ceil(q.h*D);if(ge>maxLayerDim||me>maxLayerDim)return null;var Ee=ge*me;if(Ee>maxLayerArea)return null;var _e=R.makeLayer(q,S);if(ce!=null){var ye=I.indexOf(ce)+1;I.splice(ye,0,_e)}else(ue.insert===void 0||ue.insert)&&I.unshift(_e);return _e};if(R.skipping&&!M)return null;for(var W=null,Y=_.length/defNumLayers,Z=!M,J=0;J<_.length;J++){var ne=_[J],oe=ne._private.rscratch,te=oe.imgLayerCaches=oe.imgLayerCaches||{},se=te[S];if(se){W=se;continue}if((!W||W.eles.length>=Y||!boundingBoxInBoundingBox(W.bb,ne.boundingBox()))&&(W=H({insert:!0,after:W}),!W))return null;z||Z?R.queueLayer(W,ne):R.drawEleInLayer(W,ne,S,v),W.eles.push(ne),te[S]=W}return z||(Z?null:I)};LTCp.getEleLevelForLayerLevel=function(_,v){return _};LTCp.drawEleInLayer=function(_,v,S,R){var T=this,A=this.renderer,k=_.context,M=v.boundingBox();M.w===0||M.h===0||!v.visible()||(S=T.getEleLevelForLayerLevel(S,R),A.setImgSmoothing(k,!1),A.drawCachedElement(k,v,null,null,S,useHighQualityEleTxrReqs),A.setImgSmoothing(k,!0))};LTCp.levelIsComplete=function(_,v){var S=this,R=S.layersByLevel[_];if(!R||R.length===0)return!1;for(var T=0,A=0;A<R.length;A++){var k=R[A];if(k.reqs>0||k.invalid)return!1;T+=k.eles.length}return T===v.length};LTCp.validateLayersElesOrdering=function(_,v){var S=this.layersByLevel[_];if(S)for(var R=0;R<S.length;R++){for(var T=S[R],A=-1,k=0;k<v.length;k++)if(T.eles[0]===v[k]){A=k;break}if(A<0){this.invalidateLayer(T);continue}for(var M=A,k=0;k<T.eles.length;k++)if(T.eles[k]!==v[M+k]){this.invalidateLayer(T);break}}};LTCp.updateElementsInLayers=function(_,v){for(var S=this,R=element(_[0]),T=0;T<_.length;T++)for(var A=R?null:_[T],k=R?_[T]:_[T].ele,M=k._private.rscratch,N=M.imgLayerCaches=M.imgLayerCaches||{},D=minLvl;D<=maxLvl;D++){var I=N[D];I&&(A&&S.getEleLevelForLayerLevel(I.level)!==A.level||v(I,k,A))}};LTCp.haveLayers=function(){for(var _=this,v=!1,S=minLvl;S<=maxLvl;S++){var R=_.layersByLevel[S];if(R&&R.length>0){v=!0;break}}return v};LTCp.invalidateElements=function(_){var v=this;_.length!==0&&(v.lastInvalidationTime=performanceNow(),!(_.length===0||!v.haveLayers())&&v.updateElementsInLayers(_,function(R,T,A){v.invalidateLayer(R)}))};LTCp.invalidateLayer=function(_){if(this.lastInvalidationTime=performanceNow(),!_.invalid){var v=_.level,S=_.eles,R=this.layersByLevel[v];removeFromArray(R,_),_.elesQueue=[],_.invalid=!0,_.replacement&&(_.replacement.invalid=!0);for(var T=0;T<S.length;T++){var A=S[T]._private.rscratch.imgLayerCaches;A&&(A[v]=null)}}};LTCp.refineElementTextures=function(_){var v=this;v.updateElementsInLayers(_,function(R,T,A){var k=R.replacement;if(k||(k=R.replacement=v.makeLayer(R.bb,R.level),k.replaces=R,k.eles=R.eles),!k.reqs)for(var M=0;M<k.eles.length;M++)v.queueLayer(k,k.eles[M])})};LTCp.enqueueElementRefinement=function(_){this.eleTxrDeqs.merge(_),this.scheduleElementRefinement()};LTCp.queueLayer=function(_,v){var S=this,R=S.layersQueue,T=_.elesQueue,A=T.hasId=T.hasId||{};if(!_.replacement){if(v){if(A[v.id()])return;T.push(v),A[v.id()]=!0}_.reqs?(_.reqs++,R.updateItem(_)):(_.reqs=1,R.push(_))}};LTCp.dequeue=function(_){for(var v=this,S=v.layersQueue,R=[],T=0;T<maxDeqSize&&S.size()!==0;){var A=S.peek();if(A.replacement){S.pop();continue}if(A.replaces&&A!==A.replaces.replacement){S.pop();continue}if(A.invalid){S.pop();continue}var k=A.elesQueue.shift();k&&(v.drawEleInLayer(A,k,A.level,_),T++),R.length===0&&R.push(!0),A.elesQueue.length===0&&(S.pop(),A.reqs=0,A.replaces&&v.applyLayerReplacement(A),v.requestRedraw())}return R};LTCp.applyLayerReplacement=function(_){var v=this,S=v.layersByLevel[_.level],R=_.replaces,T=S.indexOf(R);if(!(T<0||R.invalid)){S[T]=_;for(var A=0;A<_.eles.length;A++){var k=_.eles[A]._private,M=k.imgLayerCaches=k.imgLayerCaches||{};M&&(M[_.level]=_)}v.requestRedraw()}};LTCp.requestRedraw=debounce(function(){var _=this.renderer;_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},100);LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold,deqCost,deqAvgCost,deqNoDrawCost,deqFastCost,deq:function(v,S){return v.dequeue(S)},onDeqd:noop$1,shouldRedraw:trueify,priority:function(v){return v.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp$b={},impl;function polygon(_,v){for(var S=0;S<v.length;S++){var R=v[S];_.lineTo(R.x,R.y)}}function triangleBackcurve(_,v,S){for(var R,T=0;T<v.length;T++){var A=v[T];T===0&&(R=A),_.lineTo(A.x,A.y)}_.quadraticCurveTo(S.x,S.y,R.x,R.y)}function triangleTee(_,v,S){_.beginPath&&_.beginPath();for(var R=v,T=0;T<R.length;T++){var A=R[T];_.lineTo(A.x,A.y)}var k=S,M=S[0];_.moveTo(M.x,M.y);for(var T=1;T<k.length;T++){var A=k[T];_.lineTo(A.x,A.y)}_.closePath&&_.closePath()}function circleTriangle(_,v,S,R,T){_.beginPath&&_.beginPath(),_.arc(S,R,T,0,Math.PI*2,!1);var A=v,k=A[0];_.moveTo(k.x,k.y);for(var M=0;M<A.length;M++){var N=A[M];_.lineTo(N.x,N.y)}_.closePath&&_.closePath()}function circle$1(_,v,S,R){_.arc(v,S,R,0,Math.PI*2,!1)}CRp$b.arrowShapeImpl=function(_){return(impl||(impl={polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle$1}))[_]};var CRp$a={};CRp$a.drawElement=function(_,v,S,R,T,A){var k=this;v.isNode()?k.drawNode(_,v,S,R,T,A):k.drawEdge(_,v,S,R,T,A)};CRp$a.drawElementOverlay=function(_,v){var S=this;v.isNode()?S.drawNodeOverlay(_,v):S.drawEdgeOverlay(_,v)};CRp$a.drawElementUnderlay=function(_,v){var S=this;v.isNode()?S.drawNodeUnderlay(_,v):S.drawEdgeUnderlay(_,v)};CRp$a.drawCachedElementPortion=function(_,v,S,R,T,A,k,M){var N=this,D=S.getBoundingBox(v);if(!(D.w===0||D.h===0)){var I=S.getElement(v,D,R,T,A);if(I!=null){var q=M(N,v);if(q===0)return;var B=k(N,v),z=D.x1,F=D.y1,V=D.w,H=D.h,W,Y,Z,J,ne;if(B!==0){var oe=S.getRotationPoint(v);Z=oe.x,J=oe.y,_.translate(Z,J),_.rotate(B),ne=N.getImgSmoothing(_),ne||N.setImgSmoothing(_,!0);var te=S.getRotationOffset(v);W=te.x,Y=te.y}else W=z,Y=F;var se;q!==1&&(se=_.globalAlpha,_.globalAlpha=se*q),_.drawImage(I.texture.canvas,I.x,0,I.width,I.height,W,Y,V,H),q!==1&&(_.globalAlpha=se),B!==0&&(_.rotate(-B),_.translate(-Z,-J),ne||N.setImgSmoothing(_,!1))}else S.drawElement(_,v)}};var getZeroRotation=function(){return 0},getLabelRotation=function(v,S){return v.getTextAngle(S,null)},getSourceLabelRotation=function(v,S){return v.getTextAngle(S,"source")},getTargetLabelRotation=function(v,S){return v.getTextAngle(S,"target")},getOpacity=function(v,S){return S.effectiveOpacity()},getTextOpacity=function(v,S){return S.pstyle("text-opacity").pfValue*S.effectiveOpacity()};CRp$a.drawCachedElement=function(_,v,S,R,T,A){var k=this,M=k.data,N=M.eleTxrCache,D=M.lblTxrCache,I=M.slbTxrCache,q=M.tlbTxrCache,B=v.boundingBox(),z=A===!0?N.reasons.highQuality:null;if(!(B.w===0||B.h===0||!v.visible())&&(!R||boundingBoxesIntersect(B,R))){var F=v.isEdge(),V=v.element()._private.rscratch.badLine;k.drawElementUnderlay(_,v),k.drawCachedElementPortion(_,v,N,S,T,z,getZeroRotation,getOpacity),(!F||!V)&&k.drawCachedElementPortion(_,v,D,S,T,z,getLabelRotation,getTextOpacity),F&&!V&&(k.drawCachedElementPortion(_,v,I,S,T,z,getSourceLabelRotation,getTextOpacity),k.drawCachedElementPortion(_,v,q,S,T,z,getTargetLabelRotation,getTextOpacity)),k.drawElementOverlay(_,v)}};CRp$a.drawElements=function(_,v){for(var S=this,R=0;R<v.length;R++){var T=v[R];S.drawElement(_,T)}};CRp$a.drawCachedElements=function(_,v,S,R){for(var T=this,A=0;A<v.length;A++){var k=v[A];T.drawCachedElement(_,k,S,R)}};CRp$a.drawCachedNodes=function(_,v,S,R){for(var T=this,A=0;A<v.length;A++){var k=v[A];k.isNode()&&T.drawCachedElement(_,k,S,R)}};CRp$a.drawLayeredElements=function(_,v,S,R){var T=this,A=T.data.lyrTxrCache.getLayers(v,S);if(A)for(var k=0;k<A.length;k++){var M=A[k],N=M.bb;N.w===0||N.h===0||_.drawImage(M.canvas,N.x1,N.y1,N.w,N.h)}else T.drawCachedElements(_,v,S,R)};var CRp$9={};CRp$9.drawEdge=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this,M=v._private.rscratch;if(!(A&&!v.visible())&&!(M.badLine||M.allpts==null||isNaN(M.allpts[0]))){var N;S&&(N=S,_.translate(-N.x1,-N.y1));var D=A?v.pstyle("opacity").value:1,I=A?v.pstyle("line-opacity").value:1,q=v.pstyle("curve-style").value,B=v.pstyle("line-style").value,z=v.pstyle("width").pfValue,F=v.pstyle("line-cap").value,V=v.pstyle("line-outline-width").value,H=v.pstyle("line-outline-color").value,W=D*I,Y=D*I,Z=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;q==="straight-triangle"?(k.eleStrokeStyle(_,v,_e),k.drawEdgeTrianglePath(v,_,M.allpts)):(_.lineWidth=z,_.lineCap=F,k.eleStrokeStyle(_,v,_e),k.drawEdgePath(v,_,M.allpts,B),_.lineCap="butt")},J=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;if(_.lineWidth=z+V,_.lineCap=F,V>0)k.colorStrokeStyle(_,H[0],H[1],H[2],_e);else{_.lineCap="butt";return}q==="straight-triangle"?k.drawEdgeTrianglePath(v,_,M.allpts):(k.drawEdgePath(v,_,M.allpts,B),_.lineCap="butt")},ne=function(){T&&k.drawEdgeOverlay(_,v)},oe=function(){T&&k.drawEdgeUnderlay(_,v)},te=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y;k.drawArrowheads(_,v,_e)},se=function(){k.drawElementText(_,v,null,R)};_.lineJoin="round";var le=v.pstyle("ghost").value==="yes";if(le){var ue=v.pstyle("ghost-offset-x").pfValue,ce=v.pstyle("ghost-offset-y").pfValue,ge=v.pstyle("ghost-opacity").value,me=W*ge;_.translate(ue,ce),Z(me),te(me),_.translate(-ue,-ce)}else J();oe(),Z(),te(),ne(),se(),S&&_.translate(N.x1,N.y1)}};var drawEdgeOverlayUnderlay=function(v){if(!["overlay","underlay"].includes(v))throw new Error("Invalid state");return function(S,R){if(R.visible()){var T=R.pstyle("".concat(v,"-opacity")).value;if(T!==0){var A=this,k=A.usePaths(),M=R._private.rscratch,N=R.pstyle("".concat(v,"-padding")).pfValue,D=2*N,I=R.pstyle("".concat(v,"-color")).value;S.lineWidth=D,M.edgeType==="self"&&!k?S.lineCap="butt":S.lineCap="round",A.colorStrokeStyle(S,I[0],I[1],I[2],T),A.drawEdgePath(R,S,M.allpts,"solid")}}}};CRp$9.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay");CRp$9.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay");CRp$9.drawEdgePath=function(_,v,S,R){var T=_._private.rscratch,A=v,k,M=!1,N=this.usePaths(),D=_.pstyle("line-dash-pattern").pfValue,I=_.pstyle("line-dash-offset").pfValue;if(N){var q=S.join("$"),B=T.pathCacheKey&&T.pathCacheKey===q;B?(k=v=T.pathCache,M=!0):(k=v=new Path2D,T.pathCacheKey=q,T.pathCache=k)}if(A.setLineDash)switch(R){case"dotted":A.setLineDash([1,1]);break;case"dashed":A.setLineDash(D),A.lineDashOffset=I;break;case"solid":A.setLineDash([]);break}if(!M&&!T.badLine)switch(v.beginPath&&v.beginPath(),v.moveTo(S[0],S[1]),T.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var z=2;z+3<S.length;z+=4)v.quadraticCurveTo(S[z],S[z+1],S[z+2],S[z+3]);break;case"straight":case"haystack":for(var F=2;F+1<S.length;F+=2)v.lineTo(S[F],S[F+1]);break;case"segments":if(T.isRound){var V=_createForOfIteratorHelper(T.roundCorners),H;try{for(V.s();!(H=V.n()).done;){var W=H.value;drawPreparedRoundCorner(v,W)}}catch(Z){V.e(Z)}finally{V.f()}v.lineTo(S[S.length-2],S[S.length-1])}else for(var Y=2;Y+1<S.length;Y+=2)v.lineTo(S[Y],S[Y+1]);break}v=A,N?v.stroke(k):v.stroke(),v.setLineDash&&v.setLineDash([])};CRp$9.drawEdgeTrianglePath=function(_,v,S){v.fillStyle=v.strokeStyle;for(var R=_.pstyle("width").pfValue,T=0;T+1<S.length;T+=2){var A=[S[T+2]-S[T],S[T+3]-S[T+1]],k=Math.sqrt(A[0]*A[0]+A[1]*A[1]),M=[A[1]/k,-A[0]/k],N=[M[0]*R/2,M[1]*R/2];v.beginPath(),v.moveTo(S[T]-N[0],S[T+1]-N[1]),v.lineTo(S[T]+N[0],S[T+1]+N[1]),v.lineTo(S[T+2],S[T+3]),v.closePath(),v.fill()}};CRp$9.drawArrowheads=function(_,v,S){var R=v._private.rscratch,T=R.edgeType==="haystack";T||this.drawArrowhead(_,v,"source",R.arrowStartX,R.arrowStartY,R.srcArrowAngle,S),this.drawArrowhead(_,v,"mid-target",R.midX,R.midY,R.midtgtArrowAngle,S),this.drawArrowhead(_,v,"mid-source",R.midX,R.midY,R.midsrcArrowAngle,S),T||this.drawArrowhead(_,v,"target",R.arrowEndX,R.arrowEndY,R.tgtArrowAngle,S)};CRp$9.drawArrowhead=function(_,v,S,R,T,A,k){if(!(isNaN(R)||R==null||isNaN(T)||T==null||isNaN(A)||A==null)){var M=this,N=v.pstyle(S+"-arrow-shape").value;if(N!=="none"){var D=v.pstyle(S+"-arrow-fill").value==="hollow"?"both":"filled",I=v.pstyle(S+"-arrow-fill").value,q=v.pstyle("width").pfValue,B=v.pstyle(S+"-arrow-width"),z=B.value==="match-line"?q:B.pfValue;B.units==="%"&&(z*=q);var F=v.pstyle("opacity").value;k===void 0&&(k=F);var V=_.globalCompositeOperation;(k!==1||I==="hollow")&&(_.globalCompositeOperation="destination-out",M.colorFillStyle(_,255,255,255,1),M.colorStrokeStyle(_,255,255,255,1),M.drawArrowShape(v,_,D,q,N,z,R,T,A),_.globalCompositeOperation=V);var H=v.pstyle(S+"-arrow-color").value;M.colorFillStyle(_,H[0],H[1],H[2],k),M.colorStrokeStyle(_,H[0],H[1],H[2],k),M.drawArrowShape(v,_,I,q,N,z,R,T,A)}}};CRp$9.drawArrowShape=function(_,v,S,R,T,A,k,M,N){var D=this,I=this.usePaths()&&T!=="triangle-cross",q=!1,B,z=v,F={x:k,y:M},V=_.pstyle("arrow-scale").value,H=this.getArrowWidth(R,V),W=D.arrowShapes[T];if(I){var Y=D.arrowPathCache=D.arrowPathCache||[],Z=hashString(T),J=Y[Z];J!=null?(B=v=J,q=!0):(B=v=new Path2D,Y[Z]=B)}q||(v.beginPath&&v.beginPath(),I?W.draw(v,1,0,{x:0,y:0},1):W.draw(v,H,N,F,R),v.closePath&&v.closePath()),v=z,I&&(v.translate(k,M),v.rotate(N),v.scale(H,H)),(S==="filled"||S==="both")&&(I?v.fill(B):v.fill()),(S==="hollow"||S==="both")&&(v.lineWidth=A/(I?H:1),v.lineJoin="miter",I?v.stroke(B):v.stroke()),I&&(v.scale(1/H,1/H),v.rotate(-N),v.translate(-k,-M))};var CRp$8={};CRp$8.safeDrawImage=function(_,v,S,R,T,A,k,M,N,D){if(!(T<=0||A<=0||N<=0||D<=0))try{_.drawImage(v,S,R,T,A,k,M,N,D)}catch(I){warn(I)}};CRp$8.drawInscribedImage=function(_,v,S,R,T){var A=this,k=S.position(),M=k.x,N=k.y,D=S.cy().style(),I=D.getIndexedStyle.bind(D),q=I(S,"background-fit","value",R),B=I(S,"background-repeat","value",R),z=S.width(),F=S.height(),V=S.padding()*2,H=z+(I(S,"background-width-relative-to","value",R)==="inner"?0:V),W=F+(I(S,"background-height-relative-to","value",R)==="inner"?0:V),Y=S._private.rscratch,Z=I(S,"background-clip","value",R),J=Z==="node",ne=I(S,"background-image-opacity","value",R)*T,oe=I(S,"background-image-smoothing","value",R),te=S.pstyle("corner-radius").value;te!=="auto"&&(te=S.pstyle("corner-radius").pfValue);var se=v.width||v.cachedW,le=v.height||v.cachedH;(se==null||le==null)&&(document.body.appendChild(v),se=v.cachedW=v.width||v.offsetWidth,le=v.cachedH=v.height||v.offsetHeight,document.body.removeChild(v));var ue=se,ce=le;if(I(S,"background-width","value",R)!=="auto"&&(I(S,"background-width","units",R)==="%"?ue=I(S,"background-width","pfValue",R)*H:ue=I(S,"background-width","pfValue",R)),I(S,"background-height","value",R)!=="auto"&&(I(S,"background-height","units",R)==="%"?ce=I(S,"background-height","pfValue",R)*W:ce=I(S,"background-height","pfValue",R)),!(ue===0||ce===0)){if(q==="contain"){var ge=Math.min(H/ue,W/ce);ue*=ge,ce*=ge}else if(q==="cover"){var ge=Math.max(H/ue,W/ce);ue*=ge,ce*=ge}var me=M-H/2,Ee=I(S,"background-position-x","units",R),_e=I(S,"background-position-x","pfValue",R);Ee==="%"?me+=(H-ue)*_e:me+=_e;var ye=I(S,"background-offset-x","units",R),be=I(S,"background-offset-x","pfValue",R);ye==="%"?me+=(H-ue)*be:me+=be;var Se=N-W/2,De=I(S,"background-position-y","units",R),xe=I(S,"background-position-y","pfValue",R);De==="%"?Se+=(W-ce)*xe:Se+=xe;var pe=I(S,"background-offset-y","units",R),we=I(S,"background-offset-y","pfValue",R);pe==="%"?Se+=(W-ce)*we:Se+=we,Y.pathCache&&(me-=M,Se-=N,M=0,N=0);var Oe=_.globalAlpha;_.globalAlpha=ne;var Ce=A.getImgSmoothing(_),Pe=!1;if(oe==="no"&&Ce?(A.setImgSmoothing(_,!1),Pe=!0):oe==="yes"&&!Ce&&(A.setImgSmoothing(_,!0),Pe=!0),B==="no-repeat")J&&(_.save(),Y.pathCache?_.clip(Y.pathCache):(A.nodeShapes[A.getNodeShape(S)].draw(_,M,N,H,W,te,Y),_.clip())),A.safeDrawImage(_,v,0,0,se,le,me,Se,ue,ce),J&&_.restore();else{var Ne=_.createPattern(v,B);_.fillStyle=Ne,A.nodeShapes[A.getNodeShape(S)].draw(_,M,N,H,W,te,Y),_.translate(me,Se),_.fill(),_.translate(-me,-Se)}_.globalAlpha=Oe,Pe&&A.setImgSmoothing(_,Ce)}};var CRp$7={};CRp$7.eleTextBiggerThanMin=function(_,v){if(!v){var S=_.cy().zoom(),R=this.getPixelRatio(),T=Math.ceil(log2(S*R));v=Math.pow(2,T)}var A=_.pstyle("font-size").pfValue*v,k=_.pstyle("min-zoomed-font-size").pfValue;return!(A<k)};CRp$7.drawElementText=function(_,v,S,R,T){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this;if(R==null){if(A&&!k.eleTextBiggerThanMin(v))return}else if(R===!1)return;if(v.isNode()){var M=v.pstyle("label");if(!M||!M.value)return;var N=k.getLabelJustification(v);_.textAlign=N,_.textBaseline="bottom"}else{var D=v.element()._private.rscratch.badLine,I=v.pstyle("label"),q=v.pstyle("source-label"),B=v.pstyle("target-label");if(D||(!I||!I.value)&&(!q||!q.value)&&(!B||!B.value))return;_.textAlign="center",_.textBaseline="bottom"}var z=!S,F;S&&(F=S,_.translate(-F.x1,-F.y1)),T==null?(k.drawText(_,v,null,z,A),v.isEdge()&&(k.drawText(_,v,"source",z,A),k.drawText(_,v,"target",z,A))):k.drawText(_,v,T,z,A),S&&_.translate(F.x1,F.y1)};CRp$7.getFontCache=function(_){var v;this.fontCaches=this.fontCaches||[];for(var S=0;S<this.fontCaches.length;S++)if(v=this.fontCaches[S],v.context===_)return v;return v={context:_},this.fontCaches.push(v),v};CRp$7.setupTextStyle=function(_,v){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,R=v.pstyle("font-style").strValue,T=v.pstyle("font-size").pfValue+"px",A=v.pstyle("font-family").strValue,k=v.pstyle("font-weight").strValue,M=S?v.effectiveOpacity()*v.pstyle("text-opacity").value:1,N=v.pstyle("text-outline-opacity").value*M,D=v.pstyle("color").value,I=v.pstyle("text-outline-color").value;_.font=R+" "+k+" "+T+" "+A,_.lineJoin="round",this.colorFillStyle(_,D[0],D[1],D[2],M),this.colorStrokeStyle(_,I[0],I[1],I[2],N)};function circle(_,v,S,R,T){var A=Math.min(R,T),k=A/2,M=v+R/2,N=S+T/2;_.beginPath(),_.arc(M,N,k,0,Math.PI*2),_.closePath()}function roundRect(_,v,S,R,T){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,k=Math.min(A,R/2,T/2);_.beginPath(),_.moveTo(v+k,S),_.lineTo(v+R-k,S),_.quadraticCurveTo(v+R,S,v+R,S+k),_.lineTo(v+R,S+T-k),_.quadraticCurveTo(v+R,S+T,v+R-k,S+T),_.lineTo(v+k,S+T),_.quadraticCurveTo(v,S+T,v,S+T-k),_.lineTo(v,S+k),_.quadraticCurveTo(v,S,v+k,S),_.closePath()}CRp$7.getTextAngle=function(_,v){var S,R=_._private,T=R.rscratch,A=v?v+"-":"",k=_.pstyle(A+"text-rotation");if(k.strValue==="autorotate"){var M=getPrefixedProperty(T,"labelAngle",v);S=_.isEdge()?M:0}else k.strValue==="none"?S=0:S=k.pfValue;return S};CRp$7.drawText=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=v._private,k=A.rscratch,M=T?v.effectiveOpacity():1;if(!(T&&(M===0||v.pstyle("text-opacity").value===0))){S==="main"&&(S=null);var N=getPrefixedProperty(k,"labelX",S),D=getPrefixedProperty(k,"labelY",S),I,q,B=this.getLabelText(v,S);if(B!=null&&B!==""&&!isNaN(N)&&!isNaN(D)){this.setupTextStyle(_,v,T);var z=S?S+"-":"",F=getPrefixedProperty(k,"labelWidth",S),V=getPrefixedProperty(k,"labelHeight",S),H=v.pstyle(z+"text-margin-x").pfValue,W=v.pstyle(z+"text-margin-y").pfValue,Y=v.isEdge(),Z=v.pstyle("text-halign").value,J=v.pstyle("text-valign").value;Y&&(Z="center",J="center"),N+=H,D+=W;var ne;switch(R?ne=this.getTextAngle(v,S):ne=0,ne!==0&&(I=N,q=D,_.translate(I,q),_.rotate(ne),N=0,D=0),J){case"top":break;case"center":D+=V/2;break;case"bottom":D+=V;break}var oe=v.pstyle("text-background-opacity").value,te=v.pstyle("text-border-opacity").value,se=v.pstyle("text-border-width").pfValue,le=v.pstyle("text-background-padding").pfValue,ue=v.pstyle("text-background-shape").strValue,ce=ue==="round-rectangle"||ue==="roundrectangle",ge=ue==="circle",me=2;if(oe>0||se>0&&te>0){var Ee=_.fillStyle,_e=_.strokeStyle,ye=_.lineWidth,be=v.pstyle("text-background-color").value,Se=v.pstyle("text-border-color").value,De=v.pstyle("text-border-style").value,xe=oe>0,pe=se>0&&te>0,we=N-le;switch(Z){case"left":we-=F;break;case"center":we-=F/2;break}var Oe=D-V-le,Ce=F+2*le,Pe=V+2*le;if(xe&&(_.fillStyle="rgba(".concat(be[0],",").concat(be[1],",").concat(be[2],",").concat(oe*M,")")),pe&&(_.strokeStyle="rgba(".concat(Se[0],",").concat(Se[1],",").concat(Se[2],",").concat(te*M,")"),_.lineWidth=se,_.setLineDash))switch(De){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash([4,2]);break;case"double":_.lineWidth=se/4,_.setLineDash([]);break;case"solid":default:_.setLineDash([]);break}if(ce?(_.beginPath(),roundRect(_,we,Oe,Ce,Pe,me)):ge?(_.beginPath(),circle(_,we,Oe,Ce,Pe)):(_.beginPath(),_.rect(we,Oe,Ce,Pe)),xe&&_.fill(),pe&&_.stroke(),pe&&De==="double"){var Ne=se/2;_.beginPath(),ce?roundRect(_,we+Ne,Oe+Ne,Ce-2*Ne,Pe-2*Ne,me):_.rect(we+Ne,Oe+Ne,Ce-2*Ne,Pe-2*Ne),_.stroke()}_.fillStyle=Ee,_.strokeStyle=_e,_.lineWidth=ye,_.setLineDash&&_.setLineDash([])}var Te=2*v.pstyle("text-outline-width").pfValue;if(Te>0&&(_.lineWidth=Te),v.pstyle("text-wrap").value==="wrap"){var ze=getPrefixedProperty(k,"labelWrapCachedLines",S),Fe=getPrefixedProperty(k,"labelLineHeight",S),Ie=F/2,Le=this.getLabelJustification(v);switch(Le==="auto"||(Z==="left"?Le==="left"?N+=-F:Le==="center"&&(N+=-Ie):Z==="center"?Le==="left"?N+=-Ie:Le==="right"&&(N+=Ie):Z==="right"&&(Le==="center"?N+=Ie:Le==="right"&&(N+=F))),J){case"top":D-=(ze.length-1)*Fe;break;case"center":case"bottom":D-=(ze.length-1)*Fe;break}for(var $e=0;$e<ze.length;$e++)Te>0&&_.strokeText(ze[$e],N,D),_.fillText(ze[$e],N,D),D+=Fe}else Te>0&&_.strokeText(B,N,D),_.fillText(B,N,D);ne!==0&&(_.rotate(-ne),_.translate(-I,-q))}}};var CRp$6={};CRp$6.drawNode=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this,M,N,D=v._private,I=D.rscratch,q=v.position();if(!(!number$1(q.x)||!number$1(q.y))&&!(A&&!v.visible())){var B=A?v.effectiveOpacity():1,z=k.usePaths(),F,V=!1,H=v.padding();M=v.width()+2*H,N=v.height()+2*H;var W;S&&(W=S,_.translate(-W.x1,-W.y1));for(var Y=v.pstyle("background-image"),Z=Y.value,J=new Array(Z.length),ne=new Array(Z.length),oe=0,te=0;te<Z.length;te++){var se=Z[te],le=J[te]=se!=null&&se!=="none";if(le){var ue=v.cy().style().getIndexedStyle(v,"background-image-crossorigin","value",te);oe++,ne[te]=k.getCachedImage(se,ue,function(){D.backgroundTimestamp=Date.now(),v.emitAndNotify("background")})}}var ce=v.pstyle("background-blacken").value,ge=v.pstyle("border-width").pfValue,me=v.pstyle("background-opacity").value*B,Ee=v.pstyle("border-color").value,_e=v.pstyle("border-style").value,ye=v.pstyle("border-join").value,be=v.pstyle("border-cap").value,Se=v.pstyle("border-position").value,De=v.pstyle("border-dash-pattern").pfValue,xe=v.pstyle("border-dash-offset").pfValue,pe=v.pstyle("border-opacity").value*B,we=v.pstyle("outline-width").pfValue,Oe=v.pstyle("outline-color").value,Ce=v.pstyle("outline-style").value,Pe=v.pstyle("outline-opacity").value*B,Ne=v.pstyle("outline-offset").value,Te=v.pstyle("corner-radius").value;Te!=="auto"&&(Te=v.pstyle("corner-radius").pfValue);var ze=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:me;k.eleFillStyle(_,v,St)},Fe=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pe;k.colorStrokeStyle(_,Ee[0],Ee[1],Ee[2],St)},Ie=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pe;k.colorStrokeStyle(_,Oe[0],Oe[1],Oe[2],St)},Le=function(St,nt,ke,Ue){var Ye=k.nodePathCache=k.nodePathCache||[],tt=hashStrings(ke==="polygon"?ke+","+Ue.join(","):ke,""+nt,""+St,""+Te),ot=Ye[tt],Rt,dt=!1;return ot!=null?(Rt=ot,dt=!0,I.pathCache=Rt):(Rt=new Path2D,Ye[tt]=I.pathCache=Rt),{path:Rt,cacheHit:dt}},$e=v.pstyle("shape").strValue,qe=v.pstyle("shape-polygon-points").pfValue;if(z){_.translate(q.x,q.y);var at=Le(M,N,$e,qe);F=at.path,V=at.cacheHit}var lt=function(){if(!V){var St=q;z&&(St={x:0,y:0}),k.nodeShapes[k.getNodeShape(v)].draw(F||_,St.x,St.y,M,N,Te,I)}z?_.fill(F):_.fill()},vt=function(){for(var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ke=D.backgrounding,Ue=0,Ye=0;Ye<ne.length;Ye++){var tt=v.cy().style().getIndexedStyle(v,"background-image-containment","value",Ye);if(nt&&tt==="over"||!nt&&tt==="inside"){Ue++;continue}J[Ye]&&ne[Ye].complete&&!ne[Ye].error&&(Ue++,k.drawInscribedImage(_,ne[Ye],v,Ye,St))}D.backgrounding=Ue!==oe,ke!==D.backgrounding&&v.updateStyle(!1)},yt=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B;k.hasPie(v)&&(k.drawPie(_,v,nt),St&&(z||k.nodeShapes[k.getNodeShape(v)].draw(_,q.x,q.y,M,N,Te,I)))},Ze=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B;k.hasStripe(v)&&(_.save(),z?_.clip(I.pathCache):(k.nodeShapes[k.getNodeShape(v)].draw(_,q.x,q.y,M,N,Te,I),_.clip()),k.drawStripe(_,v,nt),_.restore(),St&&(z||k.nodeShapes[k.getNodeShape(v)].draw(_,q.x,q.y,M,N,Te,I)))},_t=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B,nt=(ce>0?ce:-ce)*St,ke=ce>0?0:255;ce!==0&&(k.colorFillStyle(_,ke,ke,ke,nt),z?_.fill(F):_.fill())},ct=function(){if(ge>0){if(_.lineWidth=ge,_.lineCap=be,_.lineJoin=ye,_.setLineDash)switch(_e){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash(De),_.lineDashOffset=xe;break;case"solid":case"double":_.setLineDash([]);break}if(Se!=="center"){if(_.save(),_.lineWidth*=2,Se==="inside")z?_.clip(F):_.clip();else{var St=new Path2D;St.rect(-M/2-ge,-N/2-ge,M+2*ge,N+2*ge),St.addPath(F),_.clip(St,"evenodd")}z?_.stroke(F):_.stroke(),_.restore()}else z?_.stroke(F):_.stroke();if(_e==="double"){_.lineWidth=ge/3;var nt=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",z?_.stroke(F):_.stroke(),_.globalCompositeOperation=nt}_.setLineDash&&_.setLineDash([])}},wt=function(){if(we>0){if(_.lineWidth=we,_.lineCap="butt",_.setLineDash)switch(Ce){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash([4,2]);break;case"solid":case"double":_.setLineDash([]);break}var St=q;z&&(St={x:0,y:0});var nt=k.getNodeShape(v),ke=ge;Se==="inside"&&(ke=0),Se==="outside"&&(ke*=2);var Ue=(M+ke+(we+Ne))/M,Ye=(N+ke+(we+Ne))/N,tt=M*Ue,ot=N*Ye,Rt=k.nodeShapes[nt].points,dt;if(z){var Mt=Le(tt,ot,nt,Rt);dt=Mt.path}if(nt==="ellipse")k.drawEllipsePath(dt||_,St.x,St.y,tt,ot);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(nt)){var kt=0,Pt=0,zt=0;nt==="round-diamond"?kt=(ke+Ne+we)*1.4:nt==="round-heptagon"?(kt=(ke+Ne+we)*1.075,zt=-(ke/2+Ne+we)/35):nt==="round-hexagon"?kt=(ke+Ne+we)*1.12:nt==="round-pentagon"?(kt=(ke+Ne+we)*1.13,zt=-(ke/2+Ne+we)/15):nt==="round-tag"?(kt=(ke+Ne+we)*1.12,Pt=(ke/2+we+Ne)*.07):nt==="round-triangle"&&(kt=(ke+Ne+we)*(Math.PI/2),zt=-(ke+Ne/2+we)/Math.PI),kt!==0&&(Ue=(M+kt)/M,tt=M*Ue,["round-hexagon","round-tag"].includes(nt)||(Ye=(N+kt)/N,ot=N*Ye)),Te=Te==="auto"?getRoundPolygonRadius(tt,ot):Te;for(var Et=tt/2,bt=ot/2,Nt=Te+(ke+we+Ne)/2,jt=new Array(Rt.length/2),fr=new Array(Rt.length/2),Gt=0;Gt<Rt.length/2;Gt++)jt[Gt]={x:St.x+Pt+Et*Rt[Gt*2],y:St.y+zt+bt*Rt[Gt*2+1]};var dr,vr,cr,or,Tr=jt.length;for(vr=jt[Tr-1],dr=0;dr<Tr;dr++)cr=jt[dr%Tr],or=jt[(dr+1)%Tr],fr[dr]=getRoundCorner(vr,cr,or,Nt),vr=cr,cr=or;k.drawRoundPolygonPath(dt||_,St.x+Pt,St.y+zt,M*Ue,N*Ye,Rt,fr)}else if(["roundrectangle","round-rectangle"].includes(nt))Te=Te==="auto"?getRoundRectangleRadius(tt,ot):Te,k.drawRoundRectanglePath(dt||_,St.x,St.y,tt,ot,Te+(ke+we+Ne)/2);else if(["cutrectangle","cut-rectangle"].includes(nt))Te=Te==="auto"?getCutRectangleCornerLength():Te,k.drawCutRectanglePath(dt||_,St.x,St.y,tt,ot,null,Te+(ke+we+Ne)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(nt))Te=Te==="auto"?getRoundRectangleRadius(tt,ot):Te,k.drawBottomRoundRectanglePath(dt||_,St.x,St.y,tt,ot,Te+(ke+we+Ne)/2);else if(nt==="barrel")k.drawBarrelPath(dt||_,St.x,St.y,tt,ot);else if(nt.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(nt)){var Fr=(ke+we+Ne)/M;Rt=joinLines(expandPolygon(Rt,Fr)),k.drawPolygonPath(dt||_,St.x,St.y,M,N,Rt)}else{var Or=(ke+we+Ne)/M;Rt=joinLines(expandPolygon(Rt,-Or)),k.drawPolygonPath(dt||_,St.x,St.y,M,N,Rt)}if(z?_.stroke(dt):_.stroke(),Ce==="double"){_.lineWidth=ke/3;var Dn=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",z?_.stroke(dt):_.stroke(),_.globalCompositeOperation=Dn}_.setLineDash&&_.setLineDash([])}},xt=function(){T&&k.drawNodeOverlay(_,v,q,M,N)},At=function(){T&&k.drawNodeUnderlay(_,v,q,M,N)},Ct=function(){k.drawElementText(_,v,null,R)},$t=v.pstyle("ghost").value==="yes";if($t){var Ut=v.pstyle("ghost-offset-x").pfValue,Xt=v.pstyle("ghost-offset-y").pfValue,Ot=v.pstyle("ghost-opacity").value,qt=Ot*B;_.translate(Ut,Xt),Ie(),wt(),ze(Ot*me),lt(),vt(qt,!0),Fe(Ot*pe),ct(),yt(ce!==0||ge!==0),Ze(ce!==0||ge!==0),vt(qt,!1),_t(qt),_.translate(-Ut,-Xt)}z&&_.translate(-q.x,-q.y),At(),z&&_.translate(q.x,q.y),Ie(),wt(),ze(),lt(),vt(B,!0),Fe(),ct(),yt(ce!==0||ge!==0),Ze(ce!==0||ge!==0),vt(B,!1),_t(),z&&_.translate(-q.x,-q.y),Ct(),xt(),S&&_.translate(W.x1,W.y1)}};var drawNodeOverlayUnderlay=function(v){if(!["overlay","underlay"].includes(v))throw new Error("Invalid state");return function(S,R,T,A,k){var M=this;if(R.visible()){var N=R.pstyle("".concat(v,"-padding")).pfValue,D=R.pstyle("".concat(v,"-opacity")).value,I=R.pstyle("".concat(v,"-color")).value,q=R.pstyle("".concat(v,"-shape")).value,B=R.pstyle("".concat(v,"-corner-radius")).value;if(D>0){if(T=T||R.position(),A==null||k==null){var z=R.padding();A=R.width()+2*z,k=R.height()+2*z}M.colorFillStyle(S,I[0],I[1],I[2],D),M.nodeShapes[q].draw(S,T.x,T.y,A+N*2,k+N*2,B),S.fill()}}}};CRp$6.drawNodeOverlay=drawNodeOverlayUnderlay("overlay");CRp$6.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay");CRp$6.hasPie=function(_){return _=_[0],_._private.hasPie};CRp$6.hasStripe=function(_){return _=_[0],_._private.hasStripe};CRp$6.drawPie=function(_,v,S,R){v=v[0],R=R||v.position();var T=v.cy().style(),A=v.pstyle("pie-size"),k=v.pstyle("pie-hole"),M=v.pstyle("pie-start-angle").pfValue,N=R.x,D=R.y,I=v.width(),q=v.height(),B=Math.min(I,q)/2,z,F=0,V=this.usePaths();if(V&&(N=0,D=0),A.units==="%"?B=B*A.pfValue:A.pfValue!==void 0&&(B=A.pfValue/2),k.units==="%"?z=B*k.pfValue:k.pfValue!==void 0&&(z=k.pfValue/2),!(z>=B))for(var H=1;H<=T.pieBackgroundN;H++){var W=v.pstyle("pie-"+H+"-background-size").value,Y=v.pstyle("pie-"+H+"-background-color").value,Z=v.pstyle("pie-"+H+"-background-opacity").value*S,J=W/100;J+F>1&&(J=1-F);var ne=1.5*Math.PI+2*Math.PI*F;ne+=M;var oe=2*Math.PI*J,te=ne+oe;W===0||F>=1||F+J>1||(z===0?(_.beginPath(),_.moveTo(N,D),_.arc(N,D,B,ne,te),_.closePath()):(_.beginPath(),_.arc(N,D,B,ne,te),_.arc(N,D,z,te,ne,!0),_.closePath()),this.colorFillStyle(_,Y[0],Y[1],Y[2],Z),_.fill(),F+=J)}};CRp$6.drawStripe=function(_,v,S,R){v=v[0],R=R||v.position();var T=v.cy().style(),A=R.x,k=R.y,M=v.width(),N=v.height(),D=0,I=this.usePaths();_.save();var q=v.pstyle("stripe-direction").value,B=v.pstyle("stripe-size");switch(q){case"vertical":break;case"righward":_.rotate(-Math.PI/2);break}var z=M,F=N;B.units==="%"?(z=z*B.pfValue,F=F*B.pfValue):B.pfValue!==void 0&&(z=B.pfValue,F=B.pfValue),I&&(A=0,k=0),k-=z/2,A-=F/2;for(var V=1;V<=T.stripeBackgroundN;V++){var H=v.pstyle("stripe-"+V+"-background-size").value,W=v.pstyle("stripe-"+V+"-background-color").value,Y=v.pstyle("stripe-"+V+"-background-opacity").value*S,Z=H/100;Z+D>1&&(Z=1-D),!(H===0||D>=1||D+Z>1)&&(_.beginPath(),_.rect(A,k+F*D,z,F*Z),_.closePath(),this.colorFillStyle(_,W[0],W[1],W[2],Y),_.fill(),D+=Z)}_.restore()};var CRp$5={},motionBlurDelay=100;CRp$5.getPixelRatio=function(){var _=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var v=this.cy.window(),S=_.backingStorePixelRatio||_.webkitBackingStorePixelRatio||_.mozBackingStorePixelRatio||_.msBackingStorePixelRatio||_.oBackingStorePixelRatio||_.backingStorePixelRatio||1;return(v.devicePixelRatio||1)/S};CRp$5.paintCache=function(_){for(var v=this.paintCaches=this.paintCaches||[],S=!0,R,T=0;T<v.length;T++)if(R=v[T],R.context===_){S=!1;break}return S&&(R={context:_},v.push(R)),R};CRp$5.createGradientStyleFor=function(_,v,S,R,T){var A,k=this.usePaths(),M=S.pstyle(v+"-gradient-stop-colors").value,N=S.pstyle(v+"-gradient-stop-positions").pfValue;if(R==="radial-gradient")if(S.isEdge()){var D=S.sourceEndpoint(),I=S.targetEndpoint(),q=S.midpoint(),B=dist$1(D,q),z=dist$1(I,q);A=_.createRadialGradient(q.x,q.y,0,q.x,q.y,Math.max(B,z))}else{var F=k?{x:0,y:0}:S.position(),V=S.paddedWidth(),H=S.paddedHeight();A=_.createRadialGradient(F.x,F.y,0,F.x,F.y,Math.max(V,H))}else if(S.isEdge()){var W=S.sourceEndpoint(),Y=S.targetEndpoint();A=_.createLinearGradient(W.x,W.y,Y.x,Y.y)}else{var Z=k?{x:0,y:0}:S.position(),J=S.paddedWidth(),ne=S.paddedHeight(),oe=J/2,te=ne/2,se=S.pstyle("background-gradient-direction").value;switch(se){case"to-bottom":A=_.createLinearGradient(Z.x,Z.y-te,Z.x,Z.y+te);break;case"to-top":A=_.createLinearGradient(Z.x,Z.y+te,Z.x,Z.y-te);break;case"to-left":A=_.createLinearGradient(Z.x+oe,Z.y,Z.x-oe,Z.y);break;case"to-right":A=_.createLinearGradient(Z.x-oe,Z.y,Z.x+oe,Z.y);break;case"to-bottom-right":case"to-right-bottom":A=_.createLinearGradient(Z.x-oe,Z.y-te,Z.x+oe,Z.y+te);break;case"to-top-right":case"to-right-top":A=_.createLinearGradient(Z.x-oe,Z.y+te,Z.x+oe,Z.y-te);break;case"to-bottom-left":case"to-left-bottom":A=_.createLinearGradient(Z.x+oe,Z.y-te,Z.x-oe,Z.y+te);break;case"to-top-left":case"to-left-top":A=_.createLinearGradient(Z.x+oe,Z.y+te,Z.x-oe,Z.y-te);break}}if(!A)return null;for(var le=N.length===M.length,ue=M.length,ce=0;ce<ue;ce++)A.addColorStop(le?N[ce]:ce/(ue-1),"rgba("+M[ce][0]+","+M[ce][1]+","+M[ce][2]+","+T+")");return A};CRp$5.gradientFillStyle=function(_,v,S,R){var T=this.createGradientStyleFor(_,"background",v,S,R);if(!T)return null;_.fillStyle=T};CRp$5.colorFillStyle=function(_,v,S,R,T){_.fillStyle="rgba("+v+","+S+","+R+","+T+")"};CRp$5.eleFillStyle=function(_,v,S){var R=v.pstyle("background-fill").value;if(R==="linear-gradient"||R==="radial-gradient")this.gradientFillStyle(_,v,R,S);else{var T=v.pstyle("background-color").value;this.colorFillStyle(_,T[0],T[1],T[2],S)}};CRp$5.gradientStrokeStyle=function(_,v,S,R){var T=this.createGradientStyleFor(_,"line",v,S,R);if(!T)return null;_.strokeStyle=T};CRp$5.colorStrokeStyle=function(_,v,S,R,T){_.strokeStyle="rgba("+v+","+S+","+R+","+T+")"};CRp$5.eleStrokeStyle=function(_,v,S){var R=v.pstyle("line-fill").value;if(R==="linear-gradient"||R==="radial-gradient")this.gradientStrokeStyle(_,v,R,S);else{var T=v.pstyle("line-color").value;this.colorStrokeStyle(_,T[0],T[1],T[2],S)}};CRp$5.matchCanvasSize=function(_){var v=this,S=v.data,R=v.findContainerClientCoords(),T=R[2],A=R[3],k=v.getPixelRatio(),M=v.motionBlurPxRatio;(_===v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_NODE]||_===v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_DRAG])&&(k=M);var N=T*k,D=A*k,I;if(!(N===v.canvasWidth&&D===v.canvasHeight)){v.fontCaches=null;var q=S.canvasContainer;q.style.width=T+"px",q.style.height=A+"px";for(var B=0;B<v.CANVAS_LAYERS;B++)I=S.canvases[B],I.width=N,I.height=D,I.style.width=T+"px",I.style.height=A+"px";for(var B=0;B<v.BUFFER_COUNT;B++)I=S.bufferCanvases[B],I.width=N,I.height=D,I.style.width=T+"px",I.style.height=A+"px";v.textureMult=1,k<=1&&(I=S.bufferCanvases[v.TEXTURE_BUFFER],v.textureMult=2,I.width=N*v.textureMult,I.height=D*v.textureMult),v.canvasWidth=N,v.canvasHeight=D,v.pixelRatio=k}};CRp$5.renderTo=function(_,v,S,R){this.render({forcedContext:_,forcedZoom:v,forcedPan:S,drawAllLayers:!0,forcedPxRatio:R})};CRp$5.clearCanvas=function(){var _=this,v=_.data;function S(R){R.clearRect(0,0,_.canvasWidth,_.canvasHeight)}S(v.contexts[_.NODE]),S(v.contexts[_.DRAG])};CRp$5.render=function(_){var v=this;_=_||staticEmptyObject();var S=v.cy,R=_.forcedContext,T=_.drawAllLayers,A=_.drawOnlyNodeLayer,k=_.forcedZoom,M=_.forcedPan,N=_.forcedPxRatio===void 0?this.getPixelRatio():_.forcedPxRatio,D=v.data,I=D.canvasNeedsRedraw,q=v.textureOnViewport&&!R&&(v.pinching||v.hoverData.dragging||v.swipePanning||v.data.wheelZooming),B=_.motionBlur!==void 0?_.motionBlur:v.motionBlur,z=v.motionBlurPxRatio,F=S.hasCompoundNodes(),V=v.hoverData.draggingEles,H=!!(v.hoverData.selecting||v.touchData.selecting);B=B&&!R&&v.motionBlurEnabled&&!H;var W=B;R||(v.prevPxRatio!==N&&(v.invalidateContainerClientCoordsCache(),v.matchCanvasSize(v.container),v.redrawHint("eles",!0),v.redrawHint("drag",!0)),v.prevPxRatio=N),!R&&v.motionBlurTimeout&&clearTimeout(v.motionBlurTimeout),B&&(v.mbFrames==null&&(v.mbFrames=0),v.mbFrames++,v.mbFrames<3&&(W=!1),v.mbFrames>v.minMbLowQualFrames&&(v.motionBlurPxRatio=v.mbPxRBlurry)),v.clearingMotionBlur&&(v.motionBlurPxRatio=1),v.textureDrawLastFrame&&!q&&(I[v.NODE]=!0,I[v.SELECT_BOX]=!0);var Y=S.style(),Z=S.zoom(),J=k!==void 0?k:Z,ne=S.pan(),oe={x:ne.x,y:ne.y},te={zoom:Z,pan:{x:ne.x,y:ne.y}},se=v.prevViewport,le=se===void 0||te.zoom!==se.zoom||te.pan.x!==se.pan.x||te.pan.y!==se.pan.y;!le&&!(V&&!F)&&(v.motionBlurPxRatio=1),M&&(oe=M),J*=N,oe.x*=N,oe.y*=N;var ue=v.getCachedZSortedEles();function ce(Fe,Ie,Le,$e,qe){var at=Fe.globalCompositeOperation;Fe.globalCompositeOperation="destination-out",v.colorFillStyle(Fe,255,255,255,v.motionBlurTransparency),Fe.fillRect(Ie,Le,$e,qe),Fe.globalCompositeOperation=at}function ge(Fe,Ie){var Le,$e,qe,at;!v.clearingMotionBlur&&(Fe===D.bufferContexts[v.MOTIONBLUR_BUFFER_NODE]||Fe===D.bufferContexts[v.MOTIONBLUR_BUFFER_DRAG])?(Le={x:ne.x*z,y:ne.y*z},$e=Z*z,qe=v.canvasWidth*z,at=v.canvasHeight*z):(Le=oe,$e=J,qe=v.canvasWidth,at=v.canvasHeight),Fe.setTransform(1,0,0,1,0,0),Ie==="motionBlur"?ce(Fe,0,0,qe,at):!R&&(Ie===void 0||Ie)&&Fe.clearRect(0,0,qe,at),T||(Fe.translate(Le.x,Le.y),Fe.scale($e,$e)),M&&Fe.translate(M.x,M.y),k&&Fe.scale(k,k)}if(q||(v.textureDrawLastFrame=!1),q){if(v.textureDrawLastFrame=!0,!v.textureCache){v.textureCache={},v.textureCache.bb=S.mutableElements().boundingBox(),v.textureCache.texture=v.data.bufferCanvases[v.TEXTURE_BUFFER];var me=v.data.bufferContexts[v.TEXTURE_BUFFER];me.setTransform(1,0,0,1,0,0),me.clearRect(0,0,v.canvasWidth*v.textureMult,v.canvasHeight*v.textureMult),v.render({forcedContext:me,drawOnlyNodeLayer:!0,forcedPxRatio:N*v.textureMult});var te=v.textureCache.viewport={zoom:S.zoom(),pan:S.pan(),width:v.canvasWidth,height:v.canvasHeight};te.mpan={x:(0-te.pan.x)/te.zoom,y:(0-te.pan.y)/te.zoom}}I[v.DRAG]=!1,I[v.NODE]=!1;var Ee=D.contexts[v.NODE],_e=v.textureCache.texture,te=v.textureCache.viewport;Ee.setTransform(1,0,0,1,0,0),B?ce(Ee,0,0,te.width,te.height):Ee.clearRect(0,0,te.width,te.height);var ye=Y.core("outside-texture-bg-color").value,be=Y.core("outside-texture-bg-opacity").value;v.colorFillStyle(Ee,ye[0],ye[1],ye[2],be),Ee.fillRect(0,0,te.width,te.height);var Z=S.zoom();ge(Ee,!1),Ee.clearRect(te.mpan.x,te.mpan.y,te.width/te.zoom/N,te.height/te.zoom/N),Ee.drawImage(_e,te.mpan.x,te.mpan.y,te.width/te.zoom/N,te.height/te.zoom/N)}else v.textureOnViewport&&!R&&(v.textureCache=null);var Se=S.extent(),De=v.pinching||v.hoverData.dragging||v.swipePanning||v.data.wheelZooming||v.hoverData.draggingEles||v.cy.animated(),xe=v.hideEdgesOnViewport&&De,pe=[];if(pe[v.NODE]=!I[v.NODE]&&B&&!v.clearedForMotionBlur[v.NODE]||v.clearingMotionBlur,pe[v.NODE]&&(v.clearedForMotionBlur[v.NODE]=!0),pe[v.DRAG]=!I[v.DRAG]&&B&&!v.clearedForMotionBlur[v.DRAG]||v.clearingMotionBlur,pe[v.DRAG]&&(v.clearedForMotionBlur[v.DRAG]=!0),I[v.NODE]||T||A||pe[v.NODE]){var we=B&&!pe[v.NODE]&&z!==1,Ee=R||(we?v.data.bufferContexts[v.MOTIONBLUR_BUFFER_NODE]:D.contexts[v.NODE]),Oe=B&&!we?"motionBlur":void 0;ge(Ee,Oe),xe?v.drawCachedNodes(Ee,ue.nondrag,N,Se):v.drawLayeredElements(Ee,ue.nondrag,N,Se),v.debug&&v.drawDebugPoints(Ee,ue.nondrag),!T&&!B&&(I[v.NODE]=!1)}if(!A&&(I[v.DRAG]||T||pe[v.DRAG])){var we=B&&!pe[v.DRAG]&&z!==1,Ee=R||(we?v.data.bufferContexts[v.MOTIONBLUR_BUFFER_DRAG]:D.contexts[v.DRAG]);ge(Ee,B&&!we?"motionBlur":void 0),xe?v.drawCachedNodes(Ee,ue.drag,N,Se):v.drawCachedElements(Ee,ue.drag,N,Se),v.debug&&v.drawDebugPoints(Ee,ue.drag),!T&&!B&&(I[v.DRAG]=!1)}if(this.drawSelectionRectangle(_,ge),B&&z!==1){var Ce=D.contexts[v.NODE],Pe=v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_NODE],Ne=D.contexts[v.DRAG],Te=v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_DRAG],ze=function(Ie,Le,$e){Ie.setTransform(1,0,0,1,0,0),$e||!W?Ie.clearRect(0,0,v.canvasWidth,v.canvasHeight):ce(Ie,0,0,v.canvasWidth,v.canvasHeight);var qe=z;Ie.drawImage(Le,0,0,v.canvasWidth*qe,v.canvasHeight*qe,0,0,v.canvasWidth,v.canvasHeight)};(I[v.NODE]||pe[v.NODE])&&(ze(Ce,Pe,pe[v.NODE]),I[v.NODE]=!1),(I[v.DRAG]||pe[v.DRAG])&&(ze(Ne,Te,pe[v.DRAG]),I[v.DRAG]=!1)}v.prevViewport=te,v.clearingMotionBlur&&(v.clearingMotionBlur=!1,v.motionBlurCleared=!0,v.motionBlur=!0),B&&(v.motionBlurTimeout=setTimeout(function(){v.motionBlurTimeout=null,v.clearedForMotionBlur[v.NODE]=!1,v.clearedForMotionBlur[v.DRAG]=!1,v.motionBlur=!1,v.clearingMotionBlur=!q,v.mbFrames=0,I[v.NODE]=!0,I[v.DRAG]=!0,v.redraw()},motionBlurDelay)),R||S.emit("render")};var fpsHeight;CRp$5.drawSelectionRectangle=function(_,v){var S=this,R=S.cy,T=S.data,A=R.style(),k=_.drawOnlyNodeLayer,M=_.drawAllLayers,N=T.canvasNeedsRedraw,D=_.forcedContext;if(S.showFps||!k&&N[S.SELECT_BOX]&&!M){var I=D||T.contexts[S.SELECT_BOX];if(v(I),S.selection[4]==1&&(S.hoverData.selecting||S.touchData.selecting)){var q=S.cy.zoom(),B=A.core("selection-box-border-width").value/q;I.lineWidth=B,I.fillStyle="rgba("+A.core("selection-box-color").value[0]+","+A.core("selection-box-color").value[1]+","+A.core("selection-box-color").value[2]+","+A.core("selection-box-opacity").value+")",I.fillRect(S.selection[0],S.selection[1],S.selection[2]-S.selection[0],S.selection[3]-S.selection[1]),B>0&&(I.strokeStyle="rgba("+A.core("selection-box-border-color").value[0]+","+A.core("selection-box-border-color").value[1]+","+A.core("selection-box-border-color").value[2]+","+A.core("selection-box-opacity").value+")",I.strokeRect(S.selection[0],S.selection[1],S.selection[2]-S.selection[0],S.selection[3]-S.selection[1]))}if(T.bgActivePosistion&&!S.hoverData.selecting){var q=S.cy.zoom(),z=T.bgActivePosistion;I.fillStyle="rgba("+A.core("active-bg-color").value[0]+","+A.core("active-bg-color").value[1]+","+A.core("active-bg-color").value[2]+","+A.core("active-bg-opacity").value+")",I.beginPath(),I.arc(z.x,z.y,A.core("active-bg-size").pfValue/q,0,2*Math.PI),I.fill()}var F=S.lastRedrawTime;if(S.showFps&&F){F=Math.round(F);var V=Math.round(1e3/F),H="1 frame = "+F+" ms = "+V+" fps";if(I.setTransform(1,0,0,1,0,0),I.fillStyle="rgba(255, 0, 0, 0.75)",I.strokeStyle="rgba(255, 0, 0, 0.75)",I.font="30px Arial",!fpsHeight){var W=I.measureText(H);fpsHeight=W.actualBoundingBoxAscent}I.fillText(H,0,fpsHeight);var Y=60;I.strokeRect(0,fpsHeight+10,250,20),I.fillRect(0,fpsHeight+10,250*Math.min(V/Y,1),20)}M||(N[S.SELECT_BOX]=!1)}};function compileShader(_,v,S){var R=_.createShader(v);if(_.shaderSource(R,S),_.compileShader(R),!_.getShaderParameter(R,_.COMPILE_STATUS))throw new Error(_.getShaderInfoLog(R));return R}function createProgram(_,v,S){var R=compileShader(_,_.VERTEX_SHADER,v),T=compileShader(_,_.FRAGMENT_SHADER,S),A=_.createProgram();if(_.attachShader(A,R),_.attachShader(A,T),_.linkProgram(A),!_.getProgramParameter(A,_.LINK_STATUS))throw new Error("Could not initialize shaders");return A}function createTextureCanvas(_,v,S){S===void 0&&(S=v);var R=_.makeOffscreenCanvas(v,S),T=R.context=R.getContext("2d");return R.clear=function(){return T.clearRect(0,0,R.width,R.height)},R.clear(),R}function getEffectivePanZoom(_){var v=_.pixelRatio,S=_.cy.zoom(),R=_.cy.pan();return{zoom:S*v,pan:{x:R.x*v,y:R.y*v}}}function getEffectiveZoom(_){var v=_.pixelRatio,S=_.cy.zoom();return S*v}function modelToRenderedPosition(_,v,S,R,T){var A=R*S+v.x,k=T*S+v.y;return k=Math.round(_.canvasHeight-k),[A,k]}function isSimpleShape(_){return _.pstyle("background-fill").value!=="solid"||_.pstyle("background-image").strValue!=="none"?!1:_.pstyle("border-width").value===0||_.pstyle("border-opacity").value===0?!0:_.pstyle("border-style").value==="solid"}function arrayEqual(_,v){if(_.length!==v.length)return!1;for(var S=0;S<_.length;S++)if(_[S]!==v[S])return!1;return!0}function toWebGLColor(_,v,S){var R=_[0]/255,T=_[1]/255,A=_[2]/255,k=v,M=S||new Array(4);return M[0]=R*k,M[1]=T*k,M[2]=A*k,M[3]=k,M}function indexToVec4(_,v){var S=v||new Array(4);return S[0]=(_>>0&255)/255,S[1]=(_>>8&255)/255,S[2]=(_>>16&255)/255,S[3]=(_>>24&255)/255,S}function vec4ToIndex(_){return _[0]+(_[1]<<8)+(_[2]<<16)+(_[3]<<24)}function createTexture(_,v){var S=_.createTexture();return S.buffer=function(R){_.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR_MIPMAP_NEAREST),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,R),_.generateMipmap(_.TEXTURE_2D),_.bindTexture(_.TEXTURE_2D,null)},S.deleteTexture=function(){_.deleteTexture(S)},S}function getTypeInfo(_,v){switch(v){case"float":return[1,_.FLOAT,4];case"vec2":return[2,_.FLOAT,4];case"vec3":return[3,_.FLOAT,4];case"vec4":return[4,_.FLOAT,4];case"int":return[1,_.INT,4];case"ivec2":return[2,_.INT,4]}}function createTypedArray(_,v,S){switch(v){case _.FLOAT:return new Float32Array(S);case _.INT:return new Int32Array(S)}}function createTypedArrayView(_,v,S,R,T,A){switch(v){case _.FLOAT:return new Float32Array(S.buffer,A*R,T);case _.INT:return new Int32Array(S.buffer,A*R,T)}}function createBufferStaticDraw(_,v,S,R){var T=getTypeInfo(_,v),A=_slicedToArray(T,2),k=A[0],M=A[1],N=createTypedArray(_,M,R),D=_.createBuffer();return _.bindBuffer(_.ARRAY_BUFFER,D),_.bufferData(_.ARRAY_BUFFER,N,_.STATIC_DRAW),M===_.FLOAT?_.vertexAttribPointer(S,k,M,!1,0,0):M===_.INT&&_.vertexAttribIPointer(S,k,M,0,0),_.enableVertexAttribArray(S),_.bindBuffer(_.ARRAY_BUFFER,null),D}function createBufferDynamicDraw(_,v,S,R){var T=getTypeInfo(_,S),A=_slicedToArray(T,3),k=A[0],M=A[1],N=A[2],D=createTypedArray(_,M,v*k),I=k*N,q=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,q),_.bufferData(_.ARRAY_BUFFER,v*I,_.DYNAMIC_DRAW),_.enableVertexAttribArray(R),M===_.FLOAT?_.vertexAttribPointer(R,k,M,!1,I,0):M===_.INT&&_.vertexAttribIPointer(R,k,M,I,0),_.vertexAttribDivisor(R,1),_.bindBuffer(_.ARRAY_BUFFER,null);for(var B=new Array(v),z=0;z<v;z++)B[z]=createTypedArrayView(_,M,D,I,k,z);return q.dataArray=D,q.stride=I,q.size=k,q.getView=function(F){return B[F]},q.setPoint=function(F,V,H){var W=B[F];W[0]=V,W[1]=H},q.bufferSubData=function(F){_.bindBuffer(_.ARRAY_BUFFER,q),F?_.bufferSubData(_.ARRAY_BUFFER,0,D,0,F*k):_.bufferSubData(_.ARRAY_BUFFER,0,D)},q}function create3x3MatrixBufferDynamicDraw(_,v,S){for(var R=9,T=new Float32Array(v*R),A=new Array(v),k=0;k<v;k++){var M=k*R*4;A[k]=new Float32Array(T.buffer,M,R)}var N=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,N),_.bufferData(_.ARRAY_BUFFER,T.byteLength,_.DYNAMIC_DRAW);for(var D=0;D<3;D++){var I=S+D;_.enableVertexAttribArray(I),_.vertexAttribPointer(I,3,_.FLOAT,!1,36,D*12),_.vertexAttribDivisor(I,1)}return _.bindBuffer(_.ARRAY_BUFFER,null),N.getMatrixView=function(q){return A[q]},N.setData=function(q,B){A[B].set(q,0)},N.bufferSubData=function(){_.bindBuffer(_.ARRAY_BUFFER,N),_.bufferSubData(_.ARRAY_BUFFER,0,T)},N}function createPickingFrameBuffer(_){var v=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,v);var S=_.createTexture();return _.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,S,0),_.bindFramebuffer(_.FRAMEBUFFER,null),v.setFramebufferAttachmentSizes=function(R,T){_.bindTexture(_.TEXTURE_2D,S),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,R,T,0,_.RGBA,_.UNSIGNED_BYTE,null)},v}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var _=0,v=arguments.length;v--;)_+=arguments[v]*arguments[v];return Math.sqrt(_)});function create(){var _=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_}function identity(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=1,_[5]=0,_[6]=0,_[7]=0,_[8]=1,_}function multiply(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],M=v[4],N=v[5],D=v[6],I=v[7],q=v[8],B=S[0],z=S[1],F=S[2],V=S[3],H=S[4],W=S[5],Y=S[6],Z=S[7],J=S[8];return _[0]=B*R+z*k+F*D,_[1]=B*T+z*M+F*I,_[2]=B*A+z*N+F*q,_[3]=V*R+H*k+W*D,_[4]=V*T+H*M+W*I,_[5]=V*A+H*N+W*q,_[6]=Y*R+Z*k+J*D,_[7]=Y*T+Z*M+J*I,_[8]=Y*A+Z*N+J*q,_}function translate(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],M=v[4],N=v[5],D=v[6],I=v[7],q=v[8],B=S[0],z=S[1];return _[0]=R,_[1]=T,_[2]=A,_[3]=k,_[4]=M,_[5]=N,_[6]=B*R+z*k+D,_[7]=B*T+z*M+I,_[8]=B*A+z*N+q,_}function rotate(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],M=v[4],N=v[5],D=v[6],I=v[7],q=v[8],B=Math.sin(S),z=Math.cos(S);return _[0]=z*R+B*k,_[1]=z*T+B*M,_[2]=z*A+B*N,_[3]=z*k-B*R,_[4]=z*M-B*T,_[5]=z*N-B*A,_[6]=D,_[7]=I,_[8]=q,_}function scale(_,v,S){var R=S[0],T=S[1];return _[0]=R*v[0],_[1]=R*v[1],_[2]=R*v[2],_[3]=T*v[3],_[4]=T*v[4],_[5]=T*v[5],_[6]=v[6],_[7]=v[7],_[8]=v[8],_}function projection(_,v,S){return _[0]=2/v,_[1]=0,_[2]=0,_[3]=0,_[4]=-2/S,_[5]=0,_[6]=-1,_[7]=1,_[8]=1,_}var Atlas=(function(){function _(v,S,R,T){_classCallCheck(this,_),this.debugID=Math.floor(Math.random()*1e4),this.r=v,this.texSize=S,this.texRows=R,this.texHeight=Math.floor(S/R),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=T(v,S,S),this.scratch=T(v,S,this.texHeight,"scratch")}return _createClass(_,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(S){var R=S.w,T=S.h,A=this.texHeight,k=this.texSize,M=A/T,N=R*M,D=T*M;return N>k&&(M=k/R,N=R*M,D=T*M),{scale:M,texW:N,texH:D}}},{key:"draw",value:function(S,R,T){var A=this;if(this.locked)throw new Error("can't draw, atlas is locked");var k=this.texSize,M=this.texRows,N=this.texHeight,D=this.getScale(R),I=D.scale,q=D.texW,B=D.texH,z=function(Z,J){if(T&&J){var ne=J.context,oe=Z.x,te=Z.row,se=oe,le=N*te;ne.save(),ne.translate(se,le),ne.scale(I,I),T(ne,R),ne.restore()}},F=[null,null],V=function(){z(A.freePointer,A.canvas),F[0]={x:A.freePointer.x,y:A.freePointer.row*N,w:q,h:B},F[1]={x:A.freePointer.x+q,y:A.freePointer.row*N,w:0,h:B},A.freePointer.x+=q,A.freePointer.x==k&&(A.freePointer.x=0,A.freePointer.row++)},H=function(){var Z=A.scratch,J=A.canvas;Z.clear(),z({x:0,row:0},Z);var ne=k-A.freePointer.x,oe=q-ne,te=N;{var se=A.freePointer.x,le=A.freePointer.row*N,ue=ne;J.context.drawImage(Z,0,0,ue,te,se,le,ue,te),F[0]={x:se,y:le,w:ue,h:B}}{var ce=ne,ge=(A.freePointer.row+1)*N,me=oe;J&&J.context.drawImage(Z,ce,0,me,te,0,ge,me,te),F[1]={x:0,y:ge,w:me,h:B}}A.freePointer.x=oe,A.freePointer.row++},W=function(){A.freePointer.x=0,A.freePointer.row++};if(this.freePointer.x+q<=k)V();else{if(this.freePointer.row>=M-1)return!1;this.freePointer.x===k?(W(),V()):this.enableWrapping?H():(W(),V())}return this.keyToLocation.set(S,F),this.needsBuffer=!0,F}},{key:"getOffsets",value:function(S){return this.keyToLocation.get(S)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(S){if(this.locked)return!1;var R=this.texSize,T=this.texRows,A=this.getScale(S),k=A.texW;return this.freePointer.x+k>R?this.freePointer.row<T-1:!0}},{key:"bufferIfNeeded",value:function(S){this.texture||(this.texture=createTexture(S,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),AtlasCollection=(function(){function _(v,S,R,T){_classCallCheck(this,_),this.r=v,this.texSize=S,this.texRows=R,this.createTextureCanvas=T,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return _createClass(_,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var S=this.r,R=this.texSize,T=this.texRows,A=this.createTextureCanvas;return new Atlas(S,R,T,A)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var S=this.r,R=this.texSize,T=this.texRows,A=this.createTextureCanvas,k=Math.floor(R/T);this.scratch=A(S,R,k,"scratch")}return this.scratch}},{key:"draw",value:function(S,R,T){var A=this.styleKeyToAtlas.get(S);return A||(A=this.atlases[this.atlases.length-1],(!A||!A.canFit(R))&&(A&&A.lock(),A=this._createAtlas(),this.atlases.push(A)),A.draw(S,R,T),this.styleKeyToAtlas.set(S,A)),A}},{key:"getAtlas",value:function(S){return this.styleKeyToAtlas.get(S)}},{key:"hasAtlas",value:function(S){return this.styleKeyToAtlas.has(S)}},{key:"markKeyForGC",value:function(S){this.markedKeys.add(S)}},{key:"gc",value:function(){var S=this,R=this.markedKeys;if(R.size===0){console.log("nothing to garbage collect");return}var T=[],A=new Map,k=null,M=_createForOfIteratorHelper(this.atlases),N;try{var D=function(){var q=N.value,B=q.getKeys(),z=intersection(R,B);if(z.size===0)return T.push(q),B.forEach(function(ne){return A.set(ne,q)}),1;k||(k=S._createAtlas(),T.push(k));var F=_createForOfIteratorHelper(B),V;try{for(F.s();!(V=F.n()).done;){var H=V.value;if(!z.has(H)){var W=q.getOffsets(H),Y=_slicedToArray(W,2),Z=Y[0],J=Y[1];k.canFit({w:Z.w+J.w,h:Z.h})||(k.lock(),k=S._createAtlas(),T.push(k)),q.canvas&&(S._copyTextureToNewAtlas(H,q,k),A.set(H,k))}}}catch(ne){F.e(ne)}finally{F.f()}q.dispose()};for(M.s();!(N=M.n()).done;)D()}catch(I){M.e(I)}finally{M.f()}this.atlases=T,this.styleKeyToAtlas=A,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(S,R,T){var A=R.getOffsets(S),k=_slicedToArray(A,2),M=k[0],N=k[1];if(N.w===0)T.draw(S,M,function(B){B.drawImage(R.canvas,M.x,M.y,M.w,M.h,0,0,M.w,M.h)});else{var D=this._getScratchCanvas();D.clear(),D.context.drawImage(R.canvas,M.x,M.y,M.w,M.h,0,0,M.w,M.h),D.context.drawImage(R.canvas,N.x,N.y,N.w,N.h,M.w,0,N.w,N.h);var I=M.w+N.w,q=M.h;T.draw(S,{w:I,h:q},function(B){B.drawImage(D,0,0,I,q,0,0,I,q)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function intersection(_,v){return _.intersection?_.intersection(v):new Set(_toConsumableArray(_).filter(function(S){return v.has(S)}))}var AtlasManager=(function(){function _(v,S){_classCallCheck(this,_),this.r=v,this.globalOptions=S,this.atlasSize=S.webglTexSize,this.maxAtlasesPerBatch=S.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return _createClass(_,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(S,R){var T=this.globalOptions,A=T.webglTexSize,k=T.createTextureCanvas,M=R.texRows,N=this._cacheScratchCanvas(k),D=new AtlasCollection(this.r,A,M,N);this.collections.set(S,D)}},{key:"addRenderType",value:function(S,R){var T=R.collection;if(!this.collections.has(T))throw new Error("invalid atlas collection name '".concat(T,"'"));var A=this.collections.get(T),k=extend({type:S,atlasCollection:A},R);this.renderTypes.set(S,k)}},{key:"getRenderTypeOpts",value:function(S){return this.renderTypes.get(S)}},{key:"getAtlasCollection",value:function(S){return this.collections.get(S)}},{key:"_cacheScratchCanvas",value:function(S){var R=-1,T=-1,A=null;return function(k,M,N,D){return D?((!A||M!=R||N!=T)&&(R=M,T=N,A=S(k,M,N)),A):S(k,M,N)}}},{key:"_key",value:function(S,R){return"".concat(S,"-").concat(R)}},{key:"invalidate",value:function(S){var R=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=T.forceRedraw,k=A===void 0?!1:A,M=T.filterEle,N=M===void 0?function(){return!0}:M,D=T.filterType,I=D===void 0?function(){return!0}:D,q=!1,B=!1,z=_createForOfIteratorHelper(S),F;try{for(z.s();!(F=z.n()).done;){var V=F.value;if(N(V)){var H=_createForOfIteratorHelper(this.renderTypes.values()),W;try{var Y=function(){var J=W.value,ne=J.type;if(I(ne)){var oe=R.collections.get(J.collection),te=J.getKey(V),se=Array.isArray(te)?te:[te];if(k)se.forEach(function(ge){return oe.markKeyForGC(ge)}),B=!0;else{var le=J.getID?J.getID(V):V.id(),ue=R._key(ne,le),ce=R.typeAndIdToKey.get(ue);ce!==void 0&&!arrayEqual(se,ce)&&(q=!0,R.typeAndIdToKey.delete(ue),ce.forEach(function(ge){return oe.markKeyForGC(ge)}))}}};for(H.s();!(W=H.n()).done;)Y()}catch(Z){H.e(Z)}finally{H.f()}}}}catch(Z){z.e(Z)}finally{z.f()}return B&&(this.gc(),q=!1),q}},{key:"gc",value:function(){var S=_createForOfIteratorHelper(this.collections.values()),R;try{for(S.s();!(R=S.n()).done;){var T=R.value;T.gc()}}catch(A){S.e(A)}finally{S.f()}}},{key:"getOrCreateAtlas",value:function(S,R,T,A){var k=this.renderTypes.get(R),M=this.collections.get(k.collection),N=!1,D=M.draw(A,T,function(B){k.drawClipped?(B.save(),B.beginPath(),B.rect(0,0,T.w,T.h),B.clip(),k.drawElement(B,S,T,!0,!0),B.restore()):k.drawElement(B,S,T,!0,!0),N=!0});if(N){var I=k.getID?k.getID(S):S.id(),q=this._key(R,I);this.typeAndIdToKey.has(q)?this.typeAndIdToKey.get(q).push(A):this.typeAndIdToKey.set(q,[A])}return D}},{key:"getAtlasInfo",value:function(S,R){var T=this,A=this.renderTypes.get(R),k=A.getKey(S),M=Array.isArray(k)?k:[k];return M.map(function(N){var D=A.getBoundingBox(S,N),I=T.getOrCreateAtlas(S,R,D,N),q=I.getOffsets(N),B=_slicedToArray(q,2),z=B[0],F=B[1];return{atlas:I,tex:z,tex1:z,tex2:F,bb:D}})}},{key:"getDebugInfo",value:function(){var S=[],R=_createForOfIteratorHelper(this.collections),T;try{for(R.s();!(T=R.n()).done;){var A=_slicedToArray(T.value,2),k=A[0],M=A[1],N=M.getCounts(),D=N.keyCount,I=N.atlasCount;S.push({type:k,keyCount:D,atlasCount:I})}}catch(q){R.e(q)}finally{R.f()}return S}}])})(),AtlasBatchManager=(function(){function _(v){_classCallCheck(this,_),this.globalOptions=v,this.atlasSize=v.webglTexSize,this.maxAtlasesPerBatch=v.webglTexPerBatch,this.batchAtlases=[]}return _createClass(_,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(S,R){return R})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(S){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(S):!0}},{key:"getAtlasIndexForBatch",value:function(S){var R=this.batchAtlases.indexOf(S);if(R<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(S),R=this.batchAtlases.length-1}return R}}])})(),circleSD=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,rectangleSD=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,roundRectangleSD=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,ellipseSD=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,RENDER_TARGET={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},TEX_PICKING_MODE={IGNORE:1,USE_BB:2},TEXTURE=0,EDGE_STRAIGHT=1,EDGE_CURVE_SEGMENT=2,EDGE_ARROW=3,RECTANGLE=4,ROUND_RECTANGLE=5,BOTTOM_ROUND_RECTANGLE=6,ELLIPSE=7,ElementDrawingWebGL=(function(){function _(v,S,R){_classCallCheck(this,_),this.r=v,this.gl=S,this.maxInstances=R.webglBatchSize,this.atlasSize=R.webglTexSize,this.bgColor=R.bgColor,this.debug=R.webglDebug,this.batchDebugInfo=[],R.enableWrapping=!0,R.createTextureCanvas=createTextureCanvas,this.atlasManager=new AtlasManager(v,R),this.batchManager=new AtlasBatchManager(R),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(RENDER_TARGET.SCREEN),this.pickingProgram=this._createShaderProgram(RENDER_TARGET.PICKING),this.vao=this._createVAO()}return _createClass(_,[{key:"addAtlasCollection",value:function(S,R){this.atlasManager.addAtlasCollection(S,R)}},{key:"addTextureAtlasRenderType",value:function(S,R){this.atlasManager.addRenderType(S,R)}},{key:"addSimpleShapeRenderType",value:function(S,R){this.simpleShapeOptions.set(S,R)}},{key:"invalidate",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=R.type,A=this.atlasManager;return T?A.invalidate(S,{filterType:function(M){return M===T},forceRedraw:!0}):A.invalidate(S)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(S){var R=this.gl,T=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(TEXTURE,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(RECTANGLE," || aVertType == ").concat(ELLIPSE,` 
             || aVertType == `).concat(ROUND_RECTANGLE," || aVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(EDGE_STRAIGHT,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_CURVE_SEGMENT,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_ARROW,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),A=this.batchManager.getIndexArray(),k=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(A.map(function(D){return"uniform sampler2D uTexture".concat(D,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(circleSD,`
      `).concat(rectangleSD,`
      `).concat(roundRectangleSD,`
      `).concat(ellipseSD,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(TEXTURE,`) {
          // look up the texel from the texture unit
          `).concat(A.map(function(D){return"if(vAtlasId == ".concat(D,") outColor = texture(uTexture").concat(D,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(EDGE_ARROW,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(RECTANGLE,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(RECTANGLE," || vVertType == ").concat(ELLIPSE,` 
          || vVertType == `).concat(ROUND_RECTANGLE," || vVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(RECTANGLE,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ELLIPSE,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ELLIPSE,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(S.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),M=createProgram(R,T,k);M.aPosition=R.getAttribLocation(M,"aPosition"),M.aIndex=R.getAttribLocation(M,"aIndex"),M.aVertType=R.getAttribLocation(M,"aVertType"),M.aTransform=R.getAttribLocation(M,"aTransform"),M.aAtlasId=R.getAttribLocation(M,"aAtlasId"),M.aTex=R.getAttribLocation(M,"aTex"),M.aPointAPointB=R.getAttribLocation(M,"aPointAPointB"),M.aPointCPointD=R.getAttribLocation(M,"aPointCPointD"),M.aLineWidth=R.getAttribLocation(M,"aLineWidth"),M.aColor=R.getAttribLocation(M,"aColor"),M.aCornerRadius=R.getAttribLocation(M,"aCornerRadius"),M.aBorderColor=R.getAttribLocation(M,"aBorderColor"),M.uPanZoomMatrix=R.getUniformLocation(M,"uPanZoomMatrix"),M.uAtlasSize=R.getUniformLocation(M,"uAtlasSize"),M.uBGColor=R.getUniformLocation(M,"uBGColor"),M.uZoom=R.getUniformLocation(M,"uZoom"),M.uTextures=[];for(var N=0;N<this.batchManager.getMaxAtlasesPerBatch();N++)M.uTextures.push(R.getUniformLocation(M,"uTexture".concat(N)));return M}},{key:"_createVAO",value:function(){var S=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=S.length/2;var R=this.maxInstances,T=this.gl,A=this.program,k=T.createVertexArray();return T.bindVertexArray(k),createBufferStaticDraw(T,"vec2",A.aPosition,S),this.transformBuffer=create3x3MatrixBufferDynamicDraw(T,R,A.aTransform),this.indexBuffer=createBufferDynamicDraw(T,R,"vec4",A.aIndex),this.vertTypeBuffer=createBufferDynamicDraw(T,R,"int",A.aVertType),this.atlasIdBuffer=createBufferDynamicDraw(T,R,"int",A.aAtlasId),this.texBuffer=createBufferDynamicDraw(T,R,"vec4",A.aTex),this.pointAPointBBuffer=createBufferDynamicDraw(T,R,"vec4",A.aPointAPointB),this.pointCPointDBuffer=createBufferDynamicDraw(T,R,"vec4",A.aPointCPointD),this.lineWidthBuffer=createBufferDynamicDraw(T,R,"vec2",A.aLineWidth),this.colorBuffer=createBufferDynamicDraw(T,R,"vec4",A.aColor),this.cornerRadiusBuffer=createBufferDynamicDraw(T,R,"vec4",A.aCornerRadius),this.borderColorBuffer=createBufferDynamicDraw(T,R,"vec4",A.aBorderColor),T.bindVertexArray(null),k}},{key:"buffers",get:function(){var S=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(R){return endsWith(R,"Buffer")}).map(function(R){return S[R]})),this._buffers}},{key:"startFrame",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RENDER_TARGET.SCREEN;this.panZoomMatrix=S,this.renderTarget=R,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(S,R){return S.visible()?R&&R.isVisible?R.isVisible(S):!0:!1}},{key:"drawTexture",value:function(S,R,T){var A=this.atlasManager,k=this.batchManager,M=A.getRenderTypeOpts(T);if(this._isVisible(S,M)&&!(S.isEdge()&&!this._isValidEdge(S))){if(this.renderTarget.picking&&M.getTexPickingMode){var N=M.getTexPickingMode(S);if(N===TEX_PICKING_MODE.IGNORE)return;if(N==TEX_PICKING_MODE.USE_BB){this.drawPickingRectangle(S,R,T);return}}var D=A.getAtlasInfo(S,T),I=_createForOfIteratorHelper(D),q;try{for(I.s();!(q=I.n()).done;){var B=q.value,z=B.atlas,F=B.tex1,V=B.tex2;k.canAddToCurrentBatch(z)||this.endBatch();for(var H=k.getAtlasIndexForBatch(z),W=0,Y=[[F,!0],[V,!1]];W<Y.length;W++){var Z=_slicedToArray(Y[W],2),J=Z[0],ne=Z[1];if(J.w!=0){var oe=this.instanceCount;this.vertTypeBuffer.getView(oe)[0]=TEXTURE;var te=this.indexBuffer.getView(oe);indexToVec4(R,te);var se=this.atlasIdBuffer.getView(oe);se[0]=H;var le=this.texBuffer.getView(oe);le[0]=J.x,le[1]=J.y,le[2]=J.w,le[3]=J.h;var ue=this.transformBuffer.getMatrixView(oe);this.setTransformMatrix(S,ue,M,B,ne),this.instanceCount++,ne||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(ce){I.e(ce)}finally{I.f()}}}},{key:"setTransformMatrix",value:function(S,R,T,A){var k=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,M=0;if(T.shapeProps&&T.shapeProps.padding&&(M=S.pstyle(T.shapeProps.padding).pfValue),A){var N=A.bb,D=A.tex1,I=A.tex2,q=D.w/(D.w+I.w);k||(q=1-q);var B=this._getAdjustedBB(N,M,k,q);this._applyTransformMatrix(R,B,T,S)}else{var z=T.getBoundingBox(S),F=this._getAdjustedBB(z,M,!0,1);this._applyTransformMatrix(R,F,T,S)}}},{key:"_applyTransformMatrix",value:function(S,R,T,A){var k,M;identity(S);var N=T.getRotation?T.getRotation(A):0;if(N!==0){var D=T.getRotationPoint(A),I=D.x,q=D.y;translate(S,S,[I,q]),rotate(S,S,N);var B=T.getRotationOffset(A);k=B.x+(R.xOffset||0),M=B.y+(R.yOffset||0)}else k=R.x1,M=R.y1;translate(S,S,[k,M]),scale(S,S,[R.w,R.h])}},{key:"_getAdjustedBB",value:function(S,R,T,A){var k=S.x1,M=S.y1,N=S.w,D=S.h,I=S.yOffset;R&&(k-=R,M-=R,N+=2*R,D+=2*R);var q=0,B=N*A;return T&&A<1?N=B:!T&&A<1&&(q=N-B,k+=q,N=B),{x1:k,y1:M,w:N,h:D,xOffset:q,yOffset:I}}},{key:"drawPickingRectangle",value:function(S,R,T){var A=this.atlasManager.getRenderTypeOpts(T),k=this.instanceCount;this.vertTypeBuffer.getView(k)[0]=RECTANGLE;var M=this.indexBuffer.getView(k);indexToVec4(R,M);var N=this.colorBuffer.getView(k);toWebGLColor([0,0,0],1,N);var D=this.transformBuffer.getMatrixView(k);this.setTransformMatrix(S,D,A),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(S,R,T){var A=this.simpleShapeOptions.get(T);if(this._isVisible(S,A)){var k=A.shapeProps,M=this._getVertTypeForShape(S,k.shape);if(M===void 0||A.isSimple&&!A.isSimple(S)){this.drawTexture(S,R,T);return}var N=this.instanceCount;if(this.vertTypeBuffer.getView(N)[0]=M,M===ROUND_RECTANGLE||M===BOTTOM_ROUND_RECTANGLE){var D=A.getBoundingBox(S),I=this._getCornerRadius(S,k.radius,D),q=this.cornerRadiusBuffer.getView(N);q[0]=I,q[1]=I,q[2]=I,q[3]=I,M===BOTTOM_ROUND_RECTANGLE&&(q[0]=0,q[2]=0)}var B=this.indexBuffer.getView(N);indexToVec4(R,B);var z=S.pstyle(k.color).value,F=S.pstyle(k.opacity).value,V=this.colorBuffer.getView(N);toWebGLColor(z,F,V);var H=this.lineWidthBuffer.getView(N);if(H[0]=0,H[1]=0,k.border){var W=S.pstyle("border-width").value;if(W>0){var Y=S.pstyle("border-color").value,Z=S.pstyle("border-opacity").value,J=this.borderColorBuffer.getView(N);toWebGLColor(Y,Z,J);var ne=S.pstyle("border-position").value;if(ne==="inside")H[0]=0,H[1]=-W;else if(ne==="outside")H[0]=W,H[1]=0;else{var oe=W/2;H[0]=oe,H[1]=-oe}}}var te=this.transformBuffer.getMatrixView(N);this.setTransformMatrix(S,te,A),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(S,R){var T=S.pstyle(R).value;switch(T){case"rectangle":return RECTANGLE;case"ellipse":return ELLIPSE;case"roundrectangle":case"round-rectangle":return ROUND_RECTANGLE;case"bottom-round-rectangle":return BOTTOM_ROUND_RECTANGLE;default:return}}},{key:"_getCornerRadius",value:function(S,R,T){var A=T.w,k=T.h;if(S.pstyle(R).value==="auto")return getRoundRectangleRadius(A,k);var M=S.pstyle(R).pfValue,N=A/2,D=k/2;return Math.min(M,D,N)}},{key:"drawEdgeArrow",value:function(S,R,T){if(S.visible()){var A=S._private.rscratch,k,M,N;if(T==="source"?(k=A.arrowStartX,M=A.arrowStartY,N=A.srcArrowAngle):(k=A.arrowEndX,M=A.arrowEndY,N=A.tgtArrowAngle),!(isNaN(k)||k==null||isNaN(M)||M==null||isNaN(N)||N==null)){var D=S.pstyle(T+"-arrow-shape").value;if(D!=="none"){var I=S.pstyle(T+"-arrow-color").value,q=S.pstyle("opacity").value,B=S.pstyle("line-opacity").value,z=q*B,F=S.pstyle("width").pfValue,V=S.pstyle("arrow-scale").value,H=this.r.getArrowWidth(F,V),W=this.instanceCount,Y=this.transformBuffer.getMatrixView(W);identity(Y),translate(Y,Y,[k,M]),scale(Y,Y,[H,H]),rotate(Y,Y,N),this.vertTypeBuffer.getView(W)[0]=EDGE_ARROW;var Z=this.indexBuffer.getView(W);indexToVec4(R,Z);var J=this.colorBuffer.getView(W);toWebGLColor(I,z,J),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(S,R){if(S.visible()){var T=this._getEdgePoints(S);if(T){var A=S.pstyle("opacity").value,k=S.pstyle("line-opacity").value,M=S.pstyle("width").pfValue,N=S.pstyle("line-color").value,D=A*k;if(T.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),T.length==4){var I=this.instanceCount;this.vertTypeBuffer.getView(I)[0]=EDGE_STRAIGHT;var q=this.indexBuffer.getView(I);indexToVec4(R,q);var B=this.colorBuffer.getView(I);toWebGLColor(N,D,B);var z=this.lineWidthBuffer.getView(I);z[0]=M;var F=this.pointAPointBBuffer.getView(I);F[0]=T[0],F[1]=T[1],F[2]=T[2],F[3]=T[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var V=0;V<T.length-2;V+=2){var H=this.instanceCount;this.vertTypeBuffer.getView(H)[0]=EDGE_CURVE_SEGMENT;var W=this.indexBuffer.getView(H);indexToVec4(R,W);var Y=this.colorBuffer.getView(H);toWebGLColor(N,D,Y);var Z=this.lineWidthBuffer.getView(H);Z[0]=M;var J=T[V-2],ne=T[V-1],oe=T[V],te=T[V+1],se=T[V+2],le=T[V+3],ue=T[V+4],ce=T[V+5];V==0&&(J=2*oe-se+.001,ne=2*te-le+.001),V==T.length-4&&(ue=2*se-oe+.001,ce=2*le-te+.001);var ge=this.pointAPointBBuffer.getView(H);ge[0]=J,ge[1]=ne,ge[2]=oe,ge[3]=te;var me=this.pointCPointDBuffer.getView(H);me[0]=se,me[1]=le,me[2]=ue,me[3]=ce,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(S){var R=S._private.rscratch;return!(R.badLine||R.allpts==null||isNaN(R.allpts[0]))}},{key:"_getEdgePoints",value:function(S){var R=S._private.rscratch;if(this._isValidEdge(S)){var T=R.allpts;if(T.length==4)return T;var A=this._getNumSegments(S);return this._getCurveSegmentPoints(T,A)}}},{key:"_getNumSegments",value:function(S){var R=15;return Math.min(Math.max(R,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(S,R){if(S.length==4)return S;for(var T=Array((R+1)*2),A=0;A<=R;A++)if(A==0)T[0]=S[0],T[1]=S[1];else if(A==R)T[A*2]=S[S.length-2],T[A*2+1]=S[S.length-1];else{var k=A/R;this._setCurvePoint(S,k,T,A*2)}return T}},{key:"_setCurvePoint",value:function(S,R,T,A){if(S.length<=2)T[A]=S[0],T[A+1]=S[1];else{for(var k=Array(S.length-2),M=0;M<k.length;M+=2){var N=(1-R)*S[M]+R*S[M+2],D=(1-R)*S[M+1]+R*S[M+3];k[M]=N,k[M+1]=D}return this._setCurvePoint(k,R,T,A)}}},{key:"endBatch",value:function(){var S=this.gl,R=this.vao,T=this.vertexCount,A=this.instanceCount;if(A!==0){var k=this.renderTarget.picking?this.pickingProgram:this.program;S.useProgram(k),S.bindVertexArray(R);var M=_createForOfIteratorHelper(this.buffers),N;try{for(M.s();!(N=M.n()).done;){var D=N.value;D.bufferSubData(A)}}catch(F){M.e(F)}finally{M.f()}for(var I=this.batchManager.getAtlases(),q=0;q<I.length;q++)I[q].bufferIfNeeded(S);for(var B=0;B<I.length;B++)S.activeTexture(S.TEXTURE0+B),S.bindTexture(S.TEXTURE_2D,I[B].texture),S.uniform1i(k.uTextures[B],B);S.uniform1f(k.uZoom,getEffectiveZoom(this.r)),S.uniformMatrix3fv(k.uPanZoomMatrix,!1,this.panZoomMatrix),S.uniform1i(k.uAtlasSize,this.batchManager.getAtlasSize());var z=toWebGLColor(this.bgColor,1);S.uniform4fv(k.uBGColor,z),S.drawArraysInstanced(S.TRIANGLES,0,T,A),S.bindVertexArray(null),S.bindTexture(S.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:A,atlasCount:I.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var S=this.atlasManager.getDebugInfo(),R=S.reduce(function(k,M){return k+M.atlasCount},0),T=this.batchDebugInfo,A=T.reduce(function(k,M){return k+M.count},0);return{atlasInfo:S,totalAtlases:R,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:T.length,batchInfo:T,totalInstances:A}}}])})(),CRp$4={};CRp$4.initWebgl=function(_,v){var S=this,R=S.data.contexts[S.WEBGL];_.bgColor=getBGColor(S),_.webglTexSize=Math.min(_.webglTexSize,R.getParameter(R.MAX_TEXTURE_SIZE)),_.webglTexRows=Math.min(_.webglTexRows,54),_.webglTexRowsNodes=Math.min(_.webglTexRowsNodes,54),_.webglBatchSize=Math.min(_.webglBatchSize,16384),_.webglTexPerBatch=Math.min(_.webglTexPerBatch,R.getParameter(R.MAX_TEXTURE_IMAGE_UNITS)),S.webglDebug=_.webglDebug,S.webglDebugShowAtlases=_.webglDebugShowAtlases,S.pickingFrameBuffer=createPickingFrameBuffer(R),S.pickingFrameBuffer.needsDraw=!0,S.drawing=new ElementDrawingWebGL(S,R,_);var T=function(q){return function(B){return S.getTextAngle(B,q)}},A=function(q){return function(B){var z=B.pstyle(q);return z&&z.value}},k=function(q){return function(B){return B.pstyle("".concat(q,"-opacity")).value>0}},M=function(q){var B=q.pstyle("text-events").strValue==="yes";return B?TEX_PICKING_MODE.USE_BB:TEX_PICKING_MODE.IGNORE},N=function(q){var B=q.position(),z=B.x,F=B.y,V=q.outerWidth(),H=q.outerHeight();return{w:V,h:H,x1:z-V/2,y1:F-H/2}};S.drawing.addAtlasCollection("node",{texRows:_.webglTexRowsNodes}),S.drawing.addAtlasCollection("label",{texRows:_.webglTexRows}),S.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:v.getStyleKey,getBoundingBox:v.getElementBox,drawElement:v.drawElement}),S.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:N,isSimple:isSimpleShape,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),S.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:N,isVisible:k("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),S.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:N,isVisible:k("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),S.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:M,getKey:getStyleKeysForLabel(v.getLabelKey,null),getBoundingBox:getBoundingBoxForLabel(v.getLabelBox,null),drawClipped:!0,drawElement:v.drawLabel,getRotation:T(null),getRotationPoint:v.getLabelRotationPoint,getRotationOffset:v.getLabelRotationOffset,isVisible:A("label")}),S.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:M,getKey:getStyleKeysForLabel(v.getSourceLabelKey,"source"),getBoundingBox:getBoundingBoxForLabel(v.getSourceLabelBox,"source"),drawClipped:!0,drawElement:v.drawSourceLabel,getRotation:T("source"),getRotationPoint:v.getSourceLabelRotationPoint,getRotationOffset:v.getSourceLabelRotationOffset,isVisible:A("source-label")}),S.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:M,getKey:getStyleKeysForLabel(v.getTargetLabelKey,"target"),getBoundingBox:getBoundingBoxForLabel(v.getTargetLabelBox,"target"),drawClipped:!0,drawElement:v.drawTargetLabel,getRotation:T("target"),getRotationPoint:v.getTargetLabelRotationPoint,getRotationOffset:v.getTargetLabelRotationOffset,isVisible:A("target-label")});var D=debounce(function(){console.log("garbage collect flag set"),S.data.gc=!0},1e4);S.onUpdateEleCalcs(function(I,q){var B=!1;q&&q.length>0&&(B|=S.drawing.invalidate(q)),B&&D()}),overrideCanvasRendererFunctions(S)};function getBGColor(_){var v=_.cy.container(),S=v&&v.style&&v.style.backgroundColor||"white";return color2tuple(S)}function getLabelLines(_,v){var S=_._private.rscratch;return getPrefixedProperty(S,"labelWrapCachedLines",v)||[]}var getStyleKeysForLabel=function(v,S){return function(R){var T=v(R),A=getLabelLines(R,S);return A.length>1?A.map(function(k,M){return"".concat(T,"_").concat(M)}):T}},getBoundingBoxForLabel=function(v,S){return function(R,T){var A=v(R);if(typeof T=="string"){var k=T.indexOf("_");if(k>0){var M=Number(T.substring(k+1)),N=getLabelLines(R,S),D=A.h/N.length,I=D*M,q=A.y1+I;return{x1:A.x1,w:A.w,y1:q,h:D,yOffset:I}}}return A}};function overrideCanvasRendererFunctions(_){{var v=_.render;_.render=function(A){A=A||{};var k=_.cy;_.webgl&&(k.zoom()>maxZoom$1?(clearWebgl(_),v.call(_,A)):(clearCanvas(_),renderWebgl(_,A,RENDER_TARGET.SCREEN)))}}{var S=_.matchCanvasSize;_.matchCanvasSize=function(A){S.call(_,A),_.pickingFrameBuffer.setFramebufferAttachmentSizes(_.canvasWidth,_.canvasHeight),_.pickingFrameBuffer.needsDraw=!0}}_.findNearestElements=function(A,k,M,N){return findNearestElementsWebgl(_,A,k)};{var R=_.invalidateCachedZSortedEles;_.invalidateCachedZSortedEles=function(){R.call(_),_.pickingFrameBuffer.needsDraw=!0}}{var T=_.notify;_.notify=function(A,k){T.call(_,A,k),A==="viewport"||A==="bounds"?_.pickingFrameBuffer.needsDraw=!0:A==="background"&&_.drawing.invalidate(k,{type:"node-body"})}}}function clearWebgl(_){var v=_.data.contexts[_.WEBGL];v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}function clearCanvas(_){var v=function(R){R.save(),R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,_.canvasWidth,_.canvasHeight),R.restore()};v(_.data.contexts[_.NODE]),v(_.data.contexts[_.DRAG])}function createPanZoomMatrix(_){var v=_.canvasWidth,S=_.canvasHeight,R=getEffectivePanZoom(_),T=R.pan,A=R.zoom,k=create();translate(k,k,[T.x,T.y]),scale(k,k,[A,A]);var M=create();projection(M,v,S);var N=create();return multiply(N,M,k),N}function setContextTransform(_,v){var S=_.canvasWidth,R=_.canvasHeight,T=getEffectivePanZoom(_),A=T.pan,k=T.zoom;v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,S,R),v.translate(A.x,A.y),v.scale(k,k)}function drawSelectionRectangle(_,v){_.drawSelectionRectangle(v,function(S){return setContextTransform(_,S)})}function drawAxes(_){var v=_.data.contexts[_.NODE];v.save(),setContextTransform(_,v),v.strokeStyle="rgba(0, 0, 0, 0.3)",v.beginPath(),v.moveTo(-1e3,0),v.lineTo(1e3,0),v.stroke(),v.beginPath(),v.moveTo(0,-1e3),v.lineTo(0,1e3),v.stroke(),v.restore()}function drawAtlases(_){var v=function(T,A,k){for(var M=T.atlasManager.getAtlasCollection(A),N=_.data.contexts[_.NODE],D=M.atlases,I=0;I<D.length;I++){var q=D[I],B=q.canvas;if(B){var z=B.width,F=B.height,V=z*I,H=B.height*k,W=.4;N.save(),N.scale(W,W),N.drawImage(B,V,H),N.strokeStyle="black",N.rect(V,H,z,F),N.stroke(),N.restore()}}},S=0;v(_.drawing,"node",S++),v(_.drawing,"label",S++)}function getPickingIndexes(_,v,S,R,T){var A,k,M,N,D=getEffectivePanZoom(_),I=D.pan,q=D.zoom;{var B=modelToRenderedPosition(_,I,q,v,S),z=_slicedToArray(B,2),F=z[0],V=z[1],H=6;A=F-H/2,k=V-H/2,M=H,N=H}if(M===0||N===0)return[];var W=_.data.contexts[_.WEBGL];W.bindFramebuffer(W.FRAMEBUFFER,_.pickingFrameBuffer),_.pickingFrameBuffer.needsDraw&&(W.viewport(0,0,W.canvas.width,W.canvas.height),renderWebgl(_,null,RENDER_TARGET.PICKING),_.pickingFrameBuffer.needsDraw=!1);var Y=M*N,Z=new Uint8Array(Y*4);W.readPixels(A,k,M,N,W.RGBA,W.UNSIGNED_BYTE,Z),W.bindFramebuffer(W.FRAMEBUFFER,null);for(var J=new Set,ne=0;ne<Y;ne++){var oe=Z.slice(ne*4,ne*4+4),te=vec4ToIndex(oe)-1;te>=0&&J.add(te)}return J}function findNearestElementsWebgl(_,v,S){var R=getPickingIndexes(_,v,S),T=_.getCachedZSortedEles(),A,k,M=_createForOfIteratorHelper(R),N;try{for(M.s();!(N=M.n()).done;){var D=N.value,I=T[D];if(!A&&I.isNode()&&(A=I),!k&&I.isEdge()&&(k=I),A&&k)break}}catch(q){M.e(q)}finally{M.f()}return[A,k].filter(Boolean)}function drawEle(_,v,S){var R=_.drawing;v+=1,S.isNode()?(R.drawNode(S,v,"node-underlay"),R.drawNode(S,v,"node-body"),R.drawTexture(S,v,"label"),R.drawNode(S,v,"node-overlay")):(R.drawEdgeLine(S,v),R.drawEdgeArrow(S,v,"source"),R.drawEdgeArrow(S,v,"target"),R.drawTexture(S,v,"label"),R.drawTexture(S,v,"edge-source-label"),R.drawTexture(S,v,"edge-target-label"))}function renderWebgl(_,v,S){var R;_.webglDebug&&(R=performance.now());var T=_.drawing,A=0;if(S.screen&&_.data.canvasNeedsRedraw[_.SELECT_BOX]&&drawSelectionRectangle(_,v),_.data.canvasNeedsRedraw[_.NODE]||S.picking){var k=_.data.contexts[_.WEBGL];S.screen?(k.clearColor(0,0,0,0),k.enable(k.BLEND),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA)):k.disable(k.BLEND),k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT),k.viewport(0,0,k.canvas.width,k.canvas.height);var M=createPanZoomMatrix(_),N=_.getCachedZSortedEles();if(A=N.length,T.startFrame(M,S),S.screen){for(var D=0;D<N.nondrag.length;D++)drawEle(_,D,N.nondrag[D]);for(var I=0;I<N.drag.length;I++)drawEle(_,I,N.drag[I])}else if(S.picking)for(var q=0;q<N.length;q++)drawEle(_,q,N[q]);T.endFrame(),S.screen&&_.webglDebugShowAtlases&&(drawAxes(_),drawAtlases(_)),_.data.canvasNeedsRedraw[_.NODE]=!1,_.data.canvasNeedsRedraw[_.DRAG]=!1}if(_.webglDebug){var B=performance.now(),z=!1,F=Math.ceil(B-R),V=T.getDebugInfo(),H=["".concat(A," elements"),"".concat(V.totalInstances," instances"),"".concat(V.batchCount," batches"),"".concat(V.totalAtlases," atlases"),"".concat(V.wrappedCount," wrapped textures"),"".concat(V.simpleCount," simple shapes")].join(", ");if(z)console.log("WebGL (".concat(S.name,") - time ").concat(F,"ms, ").concat(H));else{console.log("WebGL (".concat(S.name,") - frame time ").concat(F,"ms")),console.log("Totals:"),console.log("  ".concat(H)),console.log("Texture Atlases Used:");var W=V.atlasInfo,Y=_createForOfIteratorHelper(W),Z;try{for(Y.s();!(Z=Y.n()).done;){var J=Z.value;console.log("  ".concat(J.type,": ").concat(J.keyCount," keys, ").concat(J.atlasCount," atlases"))}}catch(ne){Y.e(ne)}finally{Y.f()}console.log("")}}_.data.gc&&(console.log("Garbage Collect!"),_.data.gc=!1,T.gc())}var CRp$3={};CRp$3.drawPolygonPath=function(_,v,S,R,T,A){var k=R/2,M=T/2;_.beginPath&&_.beginPath(),_.moveTo(v+k*A[0],S+M*A[1]);for(var N=1;N<A.length/2;N++)_.lineTo(v+k*A[N*2],S+M*A[N*2+1]);_.closePath()};CRp$3.drawRoundPolygonPath=function(_,v,S,R,T,A,k){k.forEach(function(M){return drawPreparedRoundCorner(_,M)}),_.closePath()};CRp$3.drawRoundRectanglePath=function(_,v,S,R,T,A){var k=R/2,M=T/2,N=A==="auto"?getRoundRectangleRadius(R,T):Math.min(A,M,k);_.beginPath&&_.beginPath(),_.moveTo(v,S-M),_.arcTo(v+k,S-M,v+k,S,N),_.arcTo(v+k,S+M,v,S+M,N),_.arcTo(v-k,S+M,v-k,S,N),_.arcTo(v-k,S-M,v,S-M,N),_.lineTo(v,S-M),_.closePath()};CRp$3.drawBottomRoundRectanglePath=function(_,v,S,R,T,A){var k=R/2,M=T/2,N=A==="auto"?getRoundRectangleRadius(R,T):A;_.beginPath&&_.beginPath(),_.moveTo(v,S-M),_.lineTo(v+k,S-M),_.lineTo(v+k,S),_.arcTo(v+k,S+M,v,S+M,N),_.arcTo(v-k,S+M,v-k,S,N),_.lineTo(v-k,S-M),_.lineTo(v,S-M),_.closePath()};CRp$3.drawCutRectanglePath=function(_,v,S,R,T,A,k){var M=R/2,N=T/2,D=k==="auto"?getCutRectangleCornerLength():k;_.beginPath&&_.beginPath(),_.moveTo(v-M+D,S-N),_.lineTo(v+M-D,S-N),_.lineTo(v+M,S-N+D),_.lineTo(v+M,S+N-D),_.lineTo(v+M-D,S+N),_.lineTo(v-M+D,S+N),_.lineTo(v-M,S+N-D),_.lineTo(v-M,S-N+D),_.closePath()};CRp$3.drawBarrelPath=function(_,v,S,R,T){var A=R/2,k=T/2,M=v-A,N=v+A,D=S-k,I=S+k,q=getBarrelCurveConstants(R,T),B=q.widthOffset,z=q.heightOffset,F=q.ctrlPtOffsetPct*B;_.beginPath&&_.beginPath(),_.moveTo(M,D+z),_.lineTo(M,I-z),_.quadraticCurveTo(M+F,I,M+B,I),_.lineTo(N-B,I),_.quadraticCurveTo(N-F,I,N,I-z),_.lineTo(N,D+z),_.quadraticCurveTo(N-F,D,N-B,D),_.lineTo(M+B,D),_.quadraticCurveTo(M+F,D,M,D+z),_.closePath()};var sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40;for(var i$2=0*Math.PI;i$2<2*Math.PI;i$2+=ellipseStepSize)sin[i$2]=Math.sin(i$2),cos[i$2]=Math.cos(i$2);CRp$3.drawEllipsePath=function(_,v,S,R,T){if(_.beginPath&&_.beginPath(),_.ellipse)_.ellipse(v,S,R/2,T/2,0,0,2*Math.PI);else for(var A,k,M=R/2,N=T/2,D=0*Math.PI;D<2*Math.PI;D+=ellipseStepSize)A=v-M*sin[D]*sin0+M*cos[D]*cos0,k=S+N*cos[D]*sin0+N*sin[D]*cos0,D===0?_.moveTo(A,k):_.lineTo(A,k);_.closePath()};var CRp$2={};CRp$2.createBuffer=function(_,v){var S=document.createElement("canvas");return S.width=_,S.height=v,[S,S.getContext("2d")]};CRp$2.bufferCanvasImage=function(_){var v=this.cy,S=v.mutableElements(),R=S.boundingBox(),T=this.findContainerClientCoords(),A=_.full?Math.ceil(R.w):T[2],k=_.full?Math.ceil(R.h):T[3],M=number$1(_.maxWidth)||number$1(_.maxHeight),N=this.getPixelRatio(),D=1;if(_.scale!==void 0)A*=_.scale,k*=_.scale,D=_.scale;else if(M){var I=1/0,q=1/0;number$1(_.maxWidth)&&(I=D*_.maxWidth/A),number$1(_.maxHeight)&&(q=D*_.maxHeight/k),D=Math.min(I,q),A*=D,k*=D}M||(A*=N,k*=N,D*=N);var B=document.createElement("canvas");B.width=A,B.height=k,B.style.width=A+"px",B.style.height=k+"px";var z=B.getContext("2d");if(A>0&&k>0){z.clearRect(0,0,A,k),z.globalCompositeOperation="source-over";var F=this.getCachedZSortedEles();if(_.full)z.translate(-R.x1*D,-R.y1*D),z.scale(D,D),this.drawElements(z,F),z.scale(1/D,1/D),z.translate(R.x1*D,R.y1*D);else{var V=v.pan(),H={x:V.x*D,y:V.y*D};D*=v.zoom(),z.translate(H.x,H.y),z.scale(D,D),this.drawElements(z,F),z.scale(1/D,1/D),z.translate(-H.x,-H.y)}_.bg&&(z.globalCompositeOperation="destination-over",z.fillStyle=_.bg,z.rect(0,0,A,k),z.fill())}return B};function b64ToBlob(_,v){for(var S=atob(_),R=new ArrayBuffer(S.length),T=new Uint8Array(R),A=0;A<S.length;A++)T[A]=S.charCodeAt(A);return new Blob([R],{type:v})}function b64UriToB64(_){var v=_.indexOf(",");return _.substr(v+1)}function output(_,v,S){var R=function(){return v.toDataURL(S,_.quality)};switch(_.output){case"blob-promise":return new Promise$1(function(T,A){try{v.toBlob(function(k){k!=null?T(k):A(new Error("`canvas.toBlob()` sent a null value in its callback"))},S,_.quality)}catch(k){A(k)}});case"blob":return b64ToBlob(b64UriToB64(R()),S);case"base64":return b64UriToB64(R());case"base64uri":default:return R()}}CRp$2.png=function(_){return output(_,this.bufferCanvasImage(_),"image/png")};CRp$2.jpg=function(_){return output(_,this.bufferCanvasImage(_),"image/jpeg")};var CRp$1={};CRp$1.nodeShapeImpl=function(_,v,S,R,T,A,k,M){switch(_){case"ellipse":return this.drawEllipsePath(v,S,R,T,A);case"polygon":return this.drawPolygonPath(v,S,R,T,A,k);case"round-polygon":return this.drawRoundPolygonPath(v,S,R,T,A,k,M);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(v,S,R,T,A,M);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(v,S,R,T,A,k,M);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(v,S,R,T,A,M);case"barrel":return this.drawBarrelPath(v,S,R,T,A)}};var CR=CanvasRenderer,CRp=CanvasRenderer.prototype;CRp.CANVAS_LAYERS=3;CRp.SELECT_BOX=0;CRp.DRAG=1;CRp.NODE=2;CRp.WEBGL=3;CRp.CANVAS_TYPES=["2d","2d","2d","webgl2"];CRp.BUFFER_COUNT=3;CRp.TEXTURE_BUFFER=0;CRp.MOTIONBLUR_BUFFER_NODE=1;CRp.MOTIONBLUR_BUFFER_DRAG=2;function CanvasRenderer(_){var v=this,S=v.cy.window(),R=S.document;_.webgl&&(CRp.CANVAS_LAYERS=v.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),v.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};var T="-webkit-tap-highlight-color",A="rgba(0,0,0,0)";v.data.canvasContainer=R.createElement("div");var k=v.data.canvasContainer.style;v.data.canvasContainer.style[T]=A,k.position="relative",k.zIndex="0",k.overflow="hidden";var M=_.cy.container();M.appendChild(v.data.canvasContainer),M.style[T]=A;var N={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(N["-ms-touch-action"]="none",N["touch-action"]="none");for(var D=0;D<CRp.CANVAS_LAYERS;D++){var I=v.data.canvases[D]=R.createElement("canvas"),q=CRp.CANVAS_TYPES[D];v.data.contexts[D]=I.getContext(q),v.data.contexts[D]||error("Could not create canvas of type "+q),Object.keys(N).forEach(function(Fe){I.style[Fe]=N[Fe]}),I.style.position="absolute",I.setAttribute("data-id","layer"+D),I.style.zIndex=String(CRp.CANVAS_LAYERS-D),v.data.canvasContainer.appendChild(I),v.data.canvasNeedsRedraw[D]=!1}v.data.topCanvas=v.data.canvases[0],v.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),v.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),v.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag"),v.data.canvases[CRp.WEBGL]&&v.data.canvases[CRp.WEBGL].setAttribute("data-id","layer"+CRp.WEBGL+"-webgl");for(var D=0;D<CRp.BUFFER_COUNT;D++)v.data.bufferCanvases[D]=R.createElement("canvas"),v.data.bufferContexts[D]=v.data.bufferCanvases[D].getContext("2d"),v.data.bufferCanvases[D].style.position="absolute",v.data.bufferCanvases[D].setAttribute("data-id","buffer"+D),v.data.bufferCanvases[D].style.zIndex=String(-D-1),v.data.bufferCanvases[D].style.visibility="hidden";v.pathsEnabled=!0;var B=makeBoundingBox(),z=function(Ie){return{x:(Ie.x1+Ie.x2)/2,y:(Ie.y1+Ie.y2)/2}},F=function(Ie){return{x:-Ie.w/2,y:-Ie.h/2}},V=function(Ie){var Le=Ie[0]._private,$e=Le.oldBackgroundTimestamp===Le.backgroundTimestamp;return!$e},H=function(Ie){return Ie[0]._private.nodeKey},W=function(Ie){return Ie[0]._private.labelStyleKey},Y=function(Ie){return Ie[0]._private.sourceLabelStyleKey},Z=function(Ie){return Ie[0]._private.targetLabelStyleKey},J=function(Ie,Le,$e,qe,at){return v.drawElement(Ie,Le,$e,!1,!1,at)},ne=function(Ie,Le,$e,qe,at){return v.drawElementText(Ie,Le,$e,qe,"main",at)},oe=function(Ie,Le,$e,qe,at){return v.drawElementText(Ie,Le,$e,qe,"source",at)},te=function(Ie,Le,$e,qe,at){return v.drawElementText(Ie,Le,$e,qe,"target",at)},se=function(Ie){return Ie.boundingBox(),Ie[0]._private.bodyBounds},le=function(Ie){return Ie.boundingBox(),Ie[0]._private.labelBounds.main||B},ue=function(Ie){return Ie.boundingBox(),Ie[0]._private.labelBounds.source||B},ce=function(Ie){return Ie.boundingBox(),Ie[0]._private.labelBounds.target||B},ge=function(Ie,Le){return Le},me=function(Ie){return z(se(Ie))},Ee=function(Ie,Le,$e){var qe=Ie?Ie+"-":"";return{x:Le.x+$e.pstyle(qe+"text-margin-x").pfValue,y:Le.y+$e.pstyle(qe+"text-margin-y").pfValue}},_e=function(Ie,Le,$e){var qe=Ie[0]._private.rscratch;return{x:qe[Le],y:qe[$e]}},ye=function(Ie){return Ee("",_e(Ie,"labelX","labelY"),Ie)},be=function(Ie){return Ee("source",_e(Ie,"sourceLabelX","sourceLabelY"),Ie)},Se=function(Ie){return Ee("target",_e(Ie,"targetLabelX","targetLabelY"),Ie)},De=function(Ie){return F(se(Ie))},xe=function(Ie){return F(ue(Ie))},pe=function(Ie){return F(ce(Ie))},we=function(Ie){var Le=le(Ie),$e=F(le(Ie));if(Ie.isNode()){switch(Ie.pstyle("text-halign").value){case"left":$e.x=-Le.w-(Le.leftPad||0);break;case"right":$e.x=-(Le.rightPad||0);break}switch(Ie.pstyle("text-valign").value){case"top":$e.y=-Le.h-(Le.topPad||0);break;case"bottom":$e.y=-(Le.botPad||0);break}}return $e},Oe=v.data.eleTxrCache=new ElementTextureCache(v,{getKey:H,doesEleInvalidateKey:V,drawElement:J,getBoundingBox:se,getRotationPoint:me,getRotationOffset:De,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Ce=v.data.lblTxrCache=new ElementTextureCache(v,{getKey:W,drawElement:ne,getBoundingBox:le,getRotationPoint:ye,getRotationOffset:we,isVisible:ge}),Pe=v.data.slbTxrCache=new ElementTextureCache(v,{getKey:Y,drawElement:oe,getBoundingBox:ue,getRotationPoint:be,getRotationOffset:xe,isVisible:ge}),Ne=v.data.tlbTxrCache=new ElementTextureCache(v,{getKey:Z,drawElement:te,getBoundingBox:ce,getRotationPoint:Se,getRotationOffset:pe,isVisible:ge}),Te=v.data.lyrTxrCache=new LayeredTextureCache(v);v.onUpdateEleCalcs(function(Ie,Le){Oe.invalidateElements(Le),Ce.invalidateElements(Le),Pe.invalidateElements(Le),Ne.invalidateElements(Le),Te.invalidateElements(Le);for(var $e=0;$e<Le.length;$e++){var qe=Le[$e]._private;qe.oldBackgroundTimestamp=qe.backgroundTimestamp}});var ze=function(Ie){for(var Le=0;Le<Ie.length;Le++)Te.enqueueElementRefinement(Ie[Le].ele)};Oe.onDequeue(ze),Ce.onDequeue(ze),Pe.onDequeue(ze),Ne.onDequeue(ze),_.webgl&&v.initWebgl(_,{getStyleKey:H,getLabelKey:W,getSourceLabelKey:Y,getTargetLabelKey:Z,drawElement:J,drawLabel:ne,drawSourceLabel:oe,drawTargetLabel:te,getElementBox:se,getLabelBox:le,getSourceLabelBox:ue,getTargetLabelBox:ce,getElementRotationPoint:me,getElementRotationOffset:De,getLabelRotationPoint:ye,getSourceLabelRotationPoint:be,getTargetLabelRotationPoint:Se,getLabelRotationOffset:we,getSourceLabelRotationOffset:xe,getTargetLabelRotationOffset:pe})}CRp.redrawHint=function(_,v){var S=this;switch(_){case"eles":S.data.canvasNeedsRedraw[CRp.NODE]=v;break;case"drag":S.data.canvasNeedsRedraw[CRp.DRAG]=v;break;case"select":S.data.canvasNeedsRedraw[CRp.SELECT_BOX]=v;break;case"gc":S.data.gc=!0;break}};var pathsImpld=typeof Path2D<"u";CRp.path2dEnabled=function(_){if(_===void 0)return this.pathsEnabled;this.pathsEnabled=!!_};CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled};CRp.setImgSmoothing=function(_,v){_.imageSmoothingEnabled!=null?_.imageSmoothingEnabled=v:(_.webkitImageSmoothingEnabled=v,_.mozImageSmoothingEnabled=v,_.msImageSmoothingEnabled=v)};CRp.getImgSmoothing=function(_){return _.imageSmoothingEnabled!=null?_.imageSmoothingEnabled:_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled};CRp.makeOffscreenCanvas=function(_,v){var S;if((typeof OffscreenCanvas>"u"?"undefined":_typeof(OffscreenCanvas))!=="undefined")S=new OffscreenCanvas(_,v);else{var R=this.cy.window(),T=R.document;S=T.createElement("canvas"),S.width=_,S.height=v}return S};[CRp$b,CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach(function(_){extend(CRp,_)});var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(_,v,S){var R=S,T=function(se){warn("Can not register `"+v+"` for `"+_+"` since `"+se+"` already exists in the prototype and can not be overridden")};if(_==="core"){if(Core.prototype[v])return T(v);Core.prototype[v]=S}else if(_==="collection"){if(Collection$3.prototype[v])return T(v);Collection$3.prototype[v]=S}else if(_==="layout"){for(var A=function(se){this.options=se,S.call(this,se),plainObject(this._private)||(this._private={}),this._private.cy=se.cy,this._private.listeners=[],this.createEmitter()},k=A.prototype=Object.create(S.prototype),M=[],N=0;N<M.length;N++){var D=M[N];k[D]=k[D]||function(){return this}}k.start&&!k.run?k.run=function(){return this.start(),this}:!k.start&&k.run&&(k.start=function(){return this.run(),this});var I=S.prototype.stop;k.stop=function(){var te=this.options;if(te&&te.animate){var se=this.animations;if(se)for(var le=0;le<se.length;le++)se[le].stop()}return I?I.call(this):this.emit("layoutstop"),this},k.destroy||(k.destroy=function(){return this}),k.cy=function(){return this._private.cy};var q=function(se){return se._private.cy},B={addEventFields:function(se,le){le.layout=se,le.cy=q(se),le.target=se},bubble:function(){return!0},parent:function(se){return q(se)}};extend(k,{createEmitter:function(){return this._private.emitter=new Emitter(B,this),this},emitter:function(){return this._private.emitter},on:function(se,le){return this.emitter().on(se,le),this},one:function(se,le){return this.emitter().one(se,le),this},once:function(se,le){return this.emitter().one(se,le),this},removeListener:function(se,le){return this.emitter().removeListener(se,le),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(se,le){return this.emitter().emit(se,le),this}}),define.eventAliasesOn(k),R=A}else if(_==="renderer"&&v!=="null"&&v!=="base"){var z=getExtension("renderer","base"),F=z.prototype,V=S,H=S.prototype,W=function(){z.apply(this,arguments),V.apply(this,arguments)},Y=W.prototype;for(var Z in F){var J=F[Z],ne=H[Z]!=null;if(ne)return T(Z);Y[Z]=J}for(var oe in H)Y[oe]=H[oe];F.clientFunctions.forEach(function(te){Y[te]=Y[te]||function(){error("Renderer does not implement `renderer."+te+"()` on its prototype")}}),R=W}else if(_==="__proto__"||_==="constructor"||_==="prototype")return error(_+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[_,v],value:R})}function getExtension(_,v){return getMap({map:extensions,keys:[_,v]})}function setModule(_,v,S,R,T){return setMap({map:modules,keys:[_,v,S,R],value:T})}function getModule(_,v,S,R){return getMap({map:modules,keys:[_,v,S,R]})}var extension=function(){if(arguments.length===2)return getExtension.apply(null,arguments);if(arguments.length===3)return setExtension.apply(null,arguments);if(arguments.length===4)return getModule.apply(null,arguments);if(arguments.length===5)return setModule.apply(null,arguments);error("Invalid extension access syntax")};Core.prototype.extension=extension;incExts.forEach(function(_){_.extensions.forEach(function(v){setExtension(_.type,v.name,v.impl)})});var _Stylesheet=function(){if(!(this instanceof _Stylesheet))return new _Stylesheet;this.length=0},sheetfn=_Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"};sheetfn.selector=function(_){var v=this.length++;return this[v]={selector:_,properties:[]},this};sheetfn.css=function(_,v){var S=this.length-1;if(string$1(_))this[S].properties.push({name:_,value:v});else if(plainObject(_))for(var R=_,T=Object.keys(R),A=0;A<T.length;A++){var k=T[A],M=R[k];if(M!=null){var N=_Style.properties[k]||_Style.properties[dash2camel(k)];if(N!=null){var D=N.name,I=M;this[S].properties.push({name:D,value:I})}}}return this};sheetfn.style=sheetfn.css;sheetfn.generateStyle=function(_){var v=new _Style(_);return this.appendToStyle(v)};sheetfn.appendToStyle=function(_){for(var v=0;v<this.length;v++){var S=this[v],R=S.selector,T=S.properties;_.selector(R);for(var A=0;A<T.length;A++){var k=T[A];_.css(k.name,k.value)}}return _};var version$2="3.33.1",cytoscape$1=function(v){if(v===void 0&&(v={}),plainObject(v))return new Core(v);if(string$1(v))return extension.apply(extension,arguments)};cytoscape$1.use=function(_){var v=Array.prototype.slice.call(arguments,1);return v.unshift(cytoscape$1),_.apply(null,v),this};cytoscape$1.warnings=function(_){return warnings(_)};cytoscape$1.version=version$2;cytoscape$1.stylesheet=cytoscape$1.Stylesheet=_Stylesheet;const{string:o,array:l,object:s,number:a$1,bool:i$1,oneOfType:r,any:c,func:u}=t$1,d={id:o,className:o,style:r([o,s]),elements:r([l,c]),stylesheet:r([l,c]),layout:r([s,c]),pan:r([s,c]),zoom:a$1,panningEnabled:i$1,userPanningEnabled:i$1,minZoom:a$1,maxZoom:a$1,zoomingEnabled:i$1,userZoomingEnabled:i$1,boxSelectionEnabled:i$1,autoungrabify:i$1,autolock:i$1,autounselectify:i$1,get:u,toJson:u,diff:u,forEach:u,cy:u,headless:i$1,styleEnabled:i$1,hideEdgesOnViewport:i$1,textureOnViewport:i$1,motionBlur:i$1,motionBlurOpacity:a$1,wheelSensitivity:a$1,pixelRatio:r([o,s])},p=(_,v)=>{if(((A,k)=>A==null||k==null)(_,v)&&(_!=null||v!=null))return!0;if(_===v)return!1;if(typeof _!="object"||typeof v!="object")return _!==v;const S=Object.keys(_),R=Object.keys(v),T=A=>_[A]!==v[A];return S.length!==R.length||!(!S.some(T)&&!R.some(T))},m=(_,v)=>_!=null?_[v]:null,y={diff:p,get:m,toJson:_=>_,forEach:(_,v)=>_.forEach(v),elements:[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}],stylesheet:[{selector:"node",style:{label:"data(label)"}}],zoom:1,pan:{x:0,y:0}},h=(_,v,S,R)=>S(m(_,R),m(v,R)),b=(_,v,S,R,T,A,k)=>{_.batch(()=>{(R===p||h(v,S,R,"elements"))&&x(_,m(v,"elements"),m(S,"elements"),T,A,k,R),h(v,S,R,"stylesheet")&&E(_,m(v,"stylesheet"),m(S,"stylesheet"),T),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach(M=>{h(v,S,R,M)&&f(_,M,m(v,M),m(S,M),T)})}),h(v,S,R,"layout")&&g(_,m(v,"layout"),m(S,"layout"),T)},f=(_,v,S,R,T)=>{_[v](T(R))},g=(_,v,S,R)=>{const T=R(S);T!=null&&_.layout(T).run()},E=(_,v,S,R)=>{const T=_.style();T?.fromJson(R(S)).update()},x=(_,v,S,R,T,A,k)=>{const M=[],N=_.collection(),D=[],I={},q={},B=z=>T(T(z,"data"),"id");A(S,z=>{const F=B(z);q[F]=z}),v!=null&&A(v,z=>{const F=B(z);I[F]=z,(V=>q[V]!=null)(F)||N.merge(_.getElementById(F))}),A(S,z=>{const F=B(z),V=(H=>I[H])(F);(H=>I[H]!=null)(F)?D.push({ele1:V,ele2:z}):M.push(R(z))}),N.length>0&&_.remove(N),M.length>0&&_.add(M),D.forEach(({ele1:z,ele2:F})=>O(_,z,F,R,T,k))},O=(_,v,S,R,T,A)=>{const k=T(T(S,"data"),"id"),M=_.getElementById(k),N={};["data","position","selected","selectable","locked","grabbable","classes"].forEach(I=>{const q=T(S,I);A(q,T(v,I))&&(N[I]=R(q))});const D=T(S,"scratch");A(D,T(v,"scratch"))&&M.scratch(R(D)),Object.keys(N).length>0&&M.json(N)};class w extends React2.Component{static get propTypes(){return d}static get defaultProps(){return y}static normalizeElements(v){if(v.length!=null)return v;{let{nodes:S,edges:R}=v;return S==null&&(S=[]),R==null&&(R=[]),S.concat(R)}}constructor(v){super(v),this.displayName="CytoscapeComponent",this.containerRef=React2.createRef()}componentDidMount(){const v=this.containerRef.current,{global:S,headless:R,styleEnabled:T,hideEdgesOnViewport:A,textureOnViewport:k,motionBlur:M,motionBlurOpacity:N,wheelSensitivity:D,pixelRatio:I}=this.props,q=this._cy=new cytoscape$1({container:v,headless:R,styleEnabled:T,hideEdgesOnViewport:A,textureOnViewport:k,motionBlur:M,motionBlurOpacity:N,wheelSensitivity:D,pixelRatio:I});S&&(window[S]=q),this.updateCytoscape(null,this.props)}updateCytoscape(v,S){const R=this._cy,{diff:T,toJson:A,get:k,forEach:M}=S;b(R,v,S,T,A,k,M),S.cy!=null&&S.cy(R)}componentDidUpdate(v){this.updateCytoscape(v,this.props)}componentWillUnmount(){this._cy.destroy()}render(){const{id:v,className:S,style:R}=this.props;return React2.createElement("div",{ref:this.containerRef,id:v,className:S,style:R})}}var cytoscapeDagre$1={exports:{}};function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function _(){this.__data__=[],this.size=0}return _listCacheClear=_,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function _(v,S){return v===S||v!==v&&S!==S}return eq_1=_,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var _=requireEq();function v(S,R){for(var T=S.length;T--;)if(_(S[T][0],R))return T;return-1}return _assocIndexOf=v,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var _=require_assocIndexOf(),v=Array.prototype,S=v.splice;function R(T){var A=this.__data__,k=_(A,T);if(k<0)return!1;var M=A.length-1;return k==M?A.pop():S.call(A,k,1),--this.size,!0}return _listCacheDelete=R,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var _=require_assocIndexOf();function v(S){var R=this.__data__,T=_(R,S);return T<0?void 0:R[T][1]}return _listCacheGet=v,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var _=require_assocIndexOf();function v(S){return _(this.__data__,S)>-1}return _listCacheHas=v,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var _=require_assocIndexOf();function v(S,R){var T=this.__data__,A=_(T,S);return A<0?(++this.size,T.push([S,R])):T[A][1]=R,this}return _listCacheSet=v,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var _=require_listCacheClear(),v=require_listCacheDelete(),S=require_listCacheGet(),R=require_listCacheHas(),T=require_listCacheSet();function A(k){var M=-1,N=k==null?0:k.length;for(this.clear();++M<N;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_ListCache=A,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var _=require_ListCache();function v(){this.__data__=new _,this.size=0}return _stackClear=v,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function _(v){var S=this.__data__,R=S.delete(v);return this.size=S.size,R}return _stackDelete=_,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function _(v){return this.__data__.get(v)}return _stackGet=_,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function _(v){return this.__data__.has(v)}return _stackHas=_,_stackHas}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var _=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1;return _freeGlobal=_,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var _=require_freeGlobal(),v=typeof self=="object"&&self&&self.Object===Object&&self,S=_||v||Function("return this")();return _root=S,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var _=require_root(),v=_.Symbol;return _Symbol=v,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var _=require_Symbol(),v=Object.prototype,S=v.hasOwnProperty,R=v.toString,T=_?_.toStringTag:void 0;function A(k){var M=S.call(k,T),N=k[T];try{k[T]=void 0;var D=!0}catch{}var I=R.call(k);return D&&(M?k[T]=N:delete k[T]),I}return _getRawTag=A,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var _=Object.prototype,v=_.toString;function S(R){return v.call(R)}return _objectToString=S,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var _=require_Symbol(),v=require_getRawTag(),S=require_objectToString(),R="[object Null]",T="[object Undefined]",A=_?_.toStringTag:void 0;function k(M){return M==null?M===void 0?T:R:A&&A in Object(M)?v(M):S(M)}return _baseGetTag=k,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function _(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")}return isObject_1=_,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var _=require_baseGetTag(),v=requireIsObject(),S="[object AsyncFunction]",R="[object Function]",T="[object GeneratorFunction]",A="[object Proxy]";function k(M){if(!v(M))return!1;var N=_(M);return N==R||N==T||N==S||N==A}return isFunction_1=k,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var _=require_root(),v=_["__core-js_shared__"];return _coreJsData=v,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var _=require_coreJsData(),v=(function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""})();function S(R){return!!v&&v in R}return _isMasked=S,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var _=Function.prototype,v=_.toString;function S(R){if(R!=null){try{return v.call(R)}catch{}try{return R+""}catch{}}return""}return _toSource=S,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var _=requireIsFunction(),v=require_isMasked(),S=requireIsObject(),R=require_toSource(),T=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,k=Function.prototype,M=Object.prototype,N=k.toString,D=M.hasOwnProperty,I=RegExp("^"+N.call(D).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q(B){if(!S(B)||v(B))return!1;var z=_(B)?I:A;return z.test(R(B))}return _baseIsNative=q,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function _(v,S){return v?.[S]}return _getValue=_,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var _=require_baseIsNative(),v=require_getValue();function S(R,T){var A=v(R,T);return _(A)?A:void 0}return _getNative=S,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var _=require_getNative(),v=require_root(),S=_(v,"Map");return _Map=S,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var _=require_getNative(),v=_(Object,"create");return _nativeCreate=v,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var _=require_nativeCreate();function v(){this.__data__=_?_(null):{},this.size=0}return _hashClear=v,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function _(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S}return _hashDelete=_,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var _=require_nativeCreate(),v="__lodash_hash_undefined__",S=Object.prototype,R=S.hasOwnProperty;function T(A){var k=this.__data__;if(_){var M=k[A];return M===v?void 0:M}return R.call(k,A)?k[A]:void 0}return _hashGet=T,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var _=require_nativeCreate(),v=Object.prototype,S=v.hasOwnProperty;function R(T){var A=this.__data__;return _?A[T]!==void 0:S.call(A,T)}return _hashHas=R,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var _=require_nativeCreate(),v="__lodash_hash_undefined__";function S(R,T){var A=this.__data__;return this.size+=this.has(R)?0:1,A[R]=_&&T===void 0?v:T,this}return _hashSet=S,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var _=require_hashClear(),v=require_hashDelete(),S=require_hashGet(),R=require_hashHas(),T=require_hashSet();function A(k){var M=-1,N=k==null?0:k.length;for(this.clear();++M<N;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_Hash=A,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var _=require_Hash(),v=require_ListCache(),S=require_Map();function R(){this.size=0,this.__data__={hash:new _,map:new(S||v),string:new _}}return _mapCacheClear=R,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function _(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null}return _isKeyable=_,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var _=require_isKeyable();function v(S,R){var T=S.__data__;return _(R)?T[typeof R=="string"?"string":"hash"]:T.map}return _getMapData=v,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var _=require_getMapData();function v(S){var R=_(this,S).delete(S);return this.size-=R?1:0,R}return _mapCacheDelete=v,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var _=require_getMapData();function v(S){return _(this,S).get(S)}return _mapCacheGet=v,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var _=require_getMapData();function v(S){return _(this,S).has(S)}return _mapCacheHas=v,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var _=require_getMapData();function v(S,R){var T=_(this,S),A=T.size;return T.set(S,R),this.size+=T.size==A?0:1,this}return _mapCacheSet=v,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var _=require_mapCacheClear(),v=require_mapCacheDelete(),S=require_mapCacheGet(),R=require_mapCacheHas(),T=require_mapCacheSet();function A(k){var M=-1,N=k==null?0:k.length;for(this.clear();++M<N;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_MapCache=A,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var _=require_ListCache(),v=require_Map(),S=require_MapCache(),R=200;function T(A,k){var M=this.__data__;if(M instanceof _){var N=M.__data__;if(!v||N.length<R-1)return N.push([A,k]),this.size=++M.size,this;M=this.__data__=new S(N)}return M.set(A,k),this.size=M.size,this}return _stackSet=T,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var _=require_ListCache(),v=require_stackClear(),S=require_stackDelete(),R=require_stackGet(),T=require_stackHas(),A=require_stackSet();function k(M){var N=this.__data__=new _(M);this.size=N.size}return k.prototype.clear=v,k.prototype.delete=S,k.prototype.get=R,k.prototype.has=T,k.prototype.set=A,_Stack=k,_Stack}var _arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function _(v,S){for(var R=-1,T=v==null?0:v.length;++R<T&&S(v[R],R,v)!==!1;);return v}return _arrayEach=_,_arrayEach}var _defineProperty,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var _=require_getNative(),v=(function(){try{var S=_(Object,"defineProperty");return S({},"",{}),S}catch{}})();return _defineProperty=v,_defineProperty}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var _=require_defineProperty();function v(S,R,T){R=="__proto__"&&_?_(S,R,{configurable:!0,enumerable:!0,value:T,writable:!0}):S[R]=T}return _baseAssignValue=v,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var _=require_baseAssignValue(),v=requireEq(),S=Object.prototype,R=S.hasOwnProperty;function T(A,k,M){var N=A[k];(!(R.call(A,k)&&v(N,M))||M===void 0&&!(k in A))&&_(A,k,M)}return _assignValue=T,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var _=require_assignValue(),v=require_baseAssignValue();function S(R,T,A,k){var M=!A;A||(A={});for(var N=-1,D=T.length;++N<D;){var I=T[N],q=k?k(A[I],R[I],I,A,R):void 0;q===void 0&&(q=R[I]),M?v(A,I,q):_(A,I,q)}return A}return _copyObject=S,_copyObject}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function _(v,S){for(var R=-1,T=Array(v);++R<v;)T[R]=S(R);return T}return _baseTimes=_,_baseTimes}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function _(v){return v!=null&&typeof v=="object"}return isObjectLike_1=_,isObjectLike_1}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var _=require_baseGetTag(),v=requireIsObjectLike(),S="[object Arguments]";function R(T){return v(T)&&_(T)==S}return _baseIsArguments=R,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var _=require_baseIsArguments(),v=requireIsObjectLike(),S=Object.prototype,R=S.hasOwnProperty,T=S.propertyIsEnumerable,A=_((function(){return arguments})())?_:function(k){return v(k)&&R.call(k,"callee")&&!T.call(k,"callee")};return isArguments_1=A,isArguments_1}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var _=Array.isArray;return isArray_1=_,isArray_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function _(){return!1}return stubFalse_1=_,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(_,v){var S=require_root(),R=requireStubFalse(),T=v&&!v.nodeType&&v,A=T&&!0&&_&&!_.nodeType&&_,k=A&&A.exports===T,M=k?S.Buffer:void 0,N=M?M.isBuffer:void 0,D=N||R;_.exports=D})(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var _=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function S(R,T){var A=typeof R;return T=T??_,!!T&&(A=="number"||A!="symbol"&&v.test(R))&&R>-1&&R%1==0&&R<T}return _isIndex=S,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var _=9007199254740991;function v(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=_}return isLength_1=v,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var _=require_baseGetTag(),v=requireIsLength(),S=requireIsObjectLike(),R="[object Arguments]",T="[object Array]",A="[object Boolean]",k="[object Date]",M="[object Error]",N="[object Function]",D="[object Map]",I="[object Number]",q="[object Object]",B="[object RegExp]",z="[object Set]",F="[object String]",V="[object WeakMap]",H="[object ArrayBuffer]",W="[object DataView]",Y="[object Float32Array]",Z="[object Float64Array]",J="[object Int8Array]",ne="[object Int16Array]",oe="[object Int32Array]",te="[object Uint8Array]",se="[object Uint8ClampedArray]",le="[object Uint16Array]",ue="[object Uint32Array]",ce={};ce[Y]=ce[Z]=ce[J]=ce[ne]=ce[oe]=ce[te]=ce[se]=ce[le]=ce[ue]=!0,ce[R]=ce[T]=ce[H]=ce[A]=ce[W]=ce[k]=ce[M]=ce[N]=ce[D]=ce[I]=ce[q]=ce[B]=ce[z]=ce[F]=ce[V]=!1;function ge(me){return S(me)&&v(me.length)&&!!ce[_(me)]}return _baseIsTypedArray=ge,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function _(v){return function(S){return v(S)}}return _baseUnary=_,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(_,v){var S=require_freeGlobal(),R=v&&!v.nodeType&&v,T=R&&!0&&_&&!_.nodeType&&_,A=T&&T.exports===R,k=A&&S.process,M=(function(){try{var N=T&&T.require&&T.require("util").types;return N||k&&k.binding&&k.binding("util")}catch{}})();_.exports=M})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var _=require_baseIsTypedArray(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isTypedArray,T=R?v(R):_;return isTypedArray_1=T,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var _=require_baseTimes(),v=requireIsArguments(),S=requireIsArray(),R=requireIsBuffer(),T=require_isIndex(),A=requireIsTypedArray(),k=Object.prototype,M=k.hasOwnProperty;function N(D,I){var q=S(D),B=!q&&v(D),z=!q&&!B&&R(D),F=!q&&!B&&!z&&A(D),V=q||B||z||F,H=V?_(D.length,String):[],W=H.length;for(var Y in D)(I||M.call(D,Y))&&!(V&&(Y=="length"||z&&(Y=="offset"||Y=="parent")||F&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||T(Y,W)))&&H.push(Y);return H}return _arrayLikeKeys=N,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var _=Object.prototype;function v(S){var R=S&&S.constructor,T=typeof R=="function"&&R.prototype||_;return S===T}return _isPrototype=v,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function _(v,S){return function(R){return v(S(R))}}return _overArg=_,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var _=require_overArg(),v=_(Object.keys,Object);return _nativeKeys=v,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var _=require_isPrototype(),v=require_nativeKeys(),S=Object.prototype,R=S.hasOwnProperty;function T(A){if(!_(A))return v(A);var k=[];for(var M in Object(A))R.call(A,M)&&M!="constructor"&&k.push(M);return k}return _baseKeys=T,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var _=requireIsFunction(),v=requireIsLength();function S(R){return R!=null&&v(R.length)&&!_(R)}return isArrayLike_1=S,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var _=require_arrayLikeKeys(),v=require_baseKeys(),S=requireIsArrayLike();function R(T){return S(T)?_(T):v(T)}return keys_1=R,keys_1}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var _=require_copyObject(),v=requireKeys();function S(R,T){return R&&_(T,v(T),R)}return _baseAssign=S,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function _(v){var S=[];if(v!=null)for(var R in Object(v))S.push(R);return S}return _nativeKeysIn=_,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var _=requireIsObject(),v=require_isPrototype(),S=require_nativeKeysIn(),R=Object.prototype,T=R.hasOwnProperty;function A(k){if(!_(k))return S(k);var M=v(k),N=[];for(var D in k)D=="constructor"&&(M||!T.call(k,D))||N.push(D);return N}return _baseKeysIn=A,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var _=require_arrayLikeKeys(),v=require_baseKeysIn(),S=requireIsArrayLike();function R(T){return S(T)?_(T,!0):v(T)}return keysIn_1=R,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var _=require_copyObject(),v=requireKeysIn();function S(R,T){return R&&_(T,v(T),R)}return _baseAssignIn=S,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,(function(_,v){var S=require_root(),R=v&&!v.nodeType&&v,T=R&&!0&&_&&!_.nodeType&&_,A=T&&T.exports===R,k=A?S.Buffer:void 0,M=k?k.allocUnsafe:void 0;function N(D,I){if(I)return D.slice();var q=D.length,B=M?M(q):new D.constructor(q);return D.copy(B),B}_.exports=N})(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function _(v,S){var R=-1,T=v.length;for(S||(S=Array(T));++R<T;)S[R]=v[R];return S}return _copyArray=_,_copyArray}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=0,k=[];++R<T;){var M=v[R];S(M,R,v)&&(k[A++]=M)}return k}return _arrayFilter=_,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function _(){return[]}return stubArray_1=_,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var _=require_arrayFilter(),v=requireStubArray(),S=Object.prototype,R=S.propertyIsEnumerable,T=Object.getOwnPropertySymbols,A=T?function(k){return k==null?[]:(k=Object(k),_(T(k),function(M){return R.call(k,M)}))}:v;return _getSymbols=A,_getSymbols}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var _=require_copyObject(),v=require_getSymbols();function S(R,T){return _(R,v(R),T)}return _copySymbols=S,_copySymbols}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function _(v,S){for(var R=-1,T=S.length,A=v.length;++R<T;)v[A+R]=S[R];return v}return _arrayPush=_,_arrayPush}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var _=require_overArg(),v=_(Object.getPrototypeOf,Object);return _getPrototype=v,_getPrototype}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var _=require_arrayPush(),v=require_getPrototype(),S=require_getSymbols(),R=requireStubArray(),T=Object.getOwnPropertySymbols,A=T?function(k){for(var M=[];k;)_(M,S(k)),k=v(k);return M}:R;return _getSymbolsIn=A,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var _=require_copyObject(),v=require_getSymbolsIn();function S(R,T){return _(R,v(R),T)}return _copySymbolsIn=S,_copySymbolsIn}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var _=require_arrayPush(),v=requireIsArray();function S(R,T,A){var k=T(R);return v(R)?k:_(k,A(R))}return _baseGetAllKeys=S,_baseGetAllKeys}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var _=require_baseGetAllKeys(),v=require_getSymbols(),S=requireKeys();function R(T){return _(T,S,v)}return _getAllKeys=R,_getAllKeys}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var _=require_baseGetAllKeys(),v=require_getSymbolsIn(),S=requireKeysIn();function R(T){return _(T,S,v)}return _getAllKeysIn=R,_getAllKeysIn}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var _=require_getNative(),v=require_root(),S=_(v,"DataView");return _DataView=S,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var _=require_getNative(),v=require_root(),S=_(v,"Promise");return _Promise=S,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var _=require_getNative(),v=require_root(),S=_(v,"Set");return _Set=S,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var _=require_getNative(),v=require_root(),S=_(v,"WeakMap");return _WeakMap=S,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var _=require_DataView(),v=require_Map(),S=require_Promise(),R=require_Set(),T=require_WeakMap(),A=require_baseGetTag(),k=require_toSource(),M="[object Map]",N="[object Object]",D="[object Promise]",I="[object Set]",q="[object WeakMap]",B="[object DataView]",z=k(_),F=k(v),V=k(S),H=k(R),W=k(T),Y=A;return(_&&Y(new _(new ArrayBuffer(1)))!=B||v&&Y(new v)!=M||S&&Y(S.resolve())!=D||R&&Y(new R)!=I||T&&Y(new T)!=q)&&(Y=function(Z){var J=A(Z),ne=J==N?Z.constructor:void 0,oe=ne?k(ne):"";if(oe)switch(oe){case z:return B;case F:return M;case V:return D;case H:return I;case W:return q}return J}),_getTag=Y,_getTag}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var _=Object.prototype,v=_.hasOwnProperty;function S(R){var T=R.length,A=new R.constructor(T);return T&&typeof R[0]=="string"&&v.call(R,"index")&&(A.index=R.index,A.input=R.input),A}return _initCloneArray=S,_initCloneArray}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var _=require_root(),v=_.Uint8Array;return _Uint8Array=v,_Uint8Array}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var _=require_Uint8Array();function v(S){var R=new S.constructor(S.byteLength);return new _(R).set(new _(S)),R}return _cloneArrayBuffer=v,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var _=require_cloneArrayBuffer();function v(S,R){var T=R?_(S.buffer):S.buffer;return new S.constructor(T,S.byteOffset,S.byteLength)}return _cloneDataView=v,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var _=/\w*$/;function v(S){var R=new S.constructor(S.source,_.exec(S));return R.lastIndex=S.lastIndex,R}return _cloneRegExp=v,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var _=require_Symbol(),v=_?_.prototype:void 0,S=v?v.valueOf:void 0;function R(T){return S?Object(S.call(T)):{}}return _cloneSymbol=R,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var _=require_cloneArrayBuffer();function v(S,R){var T=R?_(S.buffer):S.buffer;return new S.constructor(T,S.byteOffset,S.length)}return _cloneTypedArray=v,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var _=require_cloneArrayBuffer(),v=require_cloneDataView(),S=require_cloneRegExp(),R=require_cloneSymbol(),T=require_cloneTypedArray(),A="[object Boolean]",k="[object Date]",M="[object Map]",N="[object Number]",D="[object RegExp]",I="[object Set]",q="[object String]",B="[object Symbol]",z="[object ArrayBuffer]",F="[object DataView]",V="[object Float32Array]",H="[object Float64Array]",W="[object Int8Array]",Y="[object Int16Array]",Z="[object Int32Array]",J="[object Uint8Array]",ne="[object Uint8ClampedArray]",oe="[object Uint16Array]",te="[object Uint32Array]";function se(le,ue,ce){var ge=le.constructor;switch(ue){case z:return _(le);case A:case k:return new ge(+le);case F:return v(le,ce);case V:case H:case W:case Y:case Z:case J:case ne:case oe:case te:return T(le,ce);case M:return new ge;case N:case q:return new ge(le);case D:return S(le);case I:return new ge;case B:return R(le)}}return _initCloneByTag=se,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var _=requireIsObject(),v=Object.create,S=(function(){function R(){}return function(T){if(!_(T))return{};if(v)return v(T);R.prototype=T;var A=new R;return R.prototype=void 0,A}})();return _baseCreate=S,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var _=require_baseCreate(),v=require_getPrototype(),S=require_isPrototype();function R(T){return typeof T.constructor=="function"&&!S(T)?_(v(T)):{}}return _initCloneObject=R,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var _=require_getTag(),v=requireIsObjectLike(),S="[object Map]";function R(T){return v(T)&&_(T)==S}return _baseIsMap=R,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var _=require_baseIsMap(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isMap,T=R?v(R):_;return isMap_1=T,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var _=require_getTag(),v=requireIsObjectLike(),S="[object Set]";function R(T){return v(T)&&_(T)==S}return _baseIsSet=R,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var _=require_baseIsSet(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isSet,T=R?v(R):_;return isSet_1=T,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var _=require_Stack(),v=require_arrayEach(),S=require_assignValue(),R=require_baseAssign(),T=require_baseAssignIn(),A=require_cloneBuffer(),k=require_copyArray(),M=require_copySymbols(),N=require_copySymbolsIn(),D=require_getAllKeys(),I=require_getAllKeysIn(),q=require_getTag(),B=require_initCloneArray(),z=require_initCloneByTag(),F=require_initCloneObject(),V=requireIsArray(),H=requireIsBuffer(),W=requireIsMap(),Y=requireIsObject(),Z=requireIsSet(),J=requireKeys(),ne=requireKeysIn(),oe=1,te=2,se=4,le="[object Arguments]",ue="[object Array]",ce="[object Boolean]",ge="[object Date]",me="[object Error]",Ee="[object Function]",_e="[object GeneratorFunction]",ye="[object Map]",be="[object Number]",Se="[object Object]",De="[object RegExp]",xe="[object Set]",pe="[object String]",we="[object Symbol]",Oe="[object WeakMap]",Ce="[object ArrayBuffer]",Pe="[object DataView]",Ne="[object Float32Array]",Te="[object Float64Array]",ze="[object Int8Array]",Fe="[object Int16Array]",Ie="[object Int32Array]",Le="[object Uint8Array]",$e="[object Uint8ClampedArray]",qe="[object Uint16Array]",at="[object Uint32Array]",lt={};lt[le]=lt[ue]=lt[Ce]=lt[Pe]=lt[ce]=lt[ge]=lt[Ne]=lt[Te]=lt[ze]=lt[Fe]=lt[Ie]=lt[ye]=lt[be]=lt[Se]=lt[De]=lt[xe]=lt[pe]=lt[we]=lt[Le]=lt[$e]=lt[qe]=lt[at]=!0,lt[me]=lt[Ee]=lt[Oe]=!1;function vt(yt,Ze,_t,ct,wt,xt){var At,Ct=Ze&oe,$t=Ze&te,Ut=Ze&se;if(_t&&(At=wt?_t(yt,ct,wt,xt):_t(yt)),At!==void 0)return At;if(!Y(yt))return yt;var Xt=V(yt);if(Xt){if(At=B(yt),!Ct)return k(yt,At)}else{var Ot=q(yt),qt=Ot==Ee||Ot==_e;if(H(yt))return A(yt,Ct);if(Ot==Se||Ot==le||qt&&!wt){if(At=$t||qt?{}:F(yt),!Ct)return $t?N(yt,T(At,yt)):M(yt,R(At,yt))}else{if(!lt[Ot])return wt?yt:{};At=z(yt,Ot,Ct)}}xt||(xt=new _);var Tt=xt.get(yt);if(Tt)return Tt;xt.set(yt,At),Z(yt)?yt.forEach(function(ke){At.add(vt(ke,Ze,_t,ke,yt,xt))}):W(yt)&&yt.forEach(function(ke,Ue){At.set(Ue,vt(ke,Ze,_t,Ue,yt,xt))});var St=Ut?$t?I:D:$t?ne:J,nt=Xt?void 0:St(yt);return v(nt||yt,function(ke,Ue){nt&&(Ue=ke,ke=yt[Ue]),S(At,Ue,vt(ke,Ze,_t,Ue,yt,xt))}),At}return _baseClone=vt,_baseClone}var clone_1,hasRequiredClone;function requireClone(){if(hasRequiredClone)return clone_1;hasRequiredClone=1;var _=require_baseClone(),v=4;function S(R){return _(R,v)}return clone_1=S,clone_1}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function _(v){return function(){return v}}return constant_1=_,constant_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function _(v){return function(S,R,T){for(var A=-1,k=Object(S),M=T(S),N=M.length;N--;){var D=M[v?N:++A];if(R(k[D],D,k)===!1)break}return S}}return _createBaseFor=_,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var _=require_createBaseFor(),v=_();return _baseFor=v,_baseFor}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var _=require_baseFor(),v=requireKeys();function S(R,T){return R&&_(R,T,v)}return _baseForOwn=S,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var _=requireIsArrayLike();function v(S,R){return function(T,A){if(T==null)return T;if(!_(T))return S(T,A);for(var k=T.length,M=R?k:-1,N=Object(T);(R?M--:++M<k)&&A(N[M],M,N)!==!1;);return T}}return _createBaseEach=v,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var _=require_baseForOwn(),v=require_createBaseEach(),S=v(_);return _baseEach=S,_baseEach}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function _(v){return v}return identity_1=_,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var _=requireIdentity();function v(S){return typeof S=="function"?S:_}return _castFunction=v,_castFunction}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var _=require_arrayEach(),v=require_baseEach(),S=require_castFunction(),R=requireIsArray();function T(A,k){var M=R(A)?_:v;return M(A,S(k))}return forEach_1=T,forEach_1}var each,hasRequiredEach;function requireEach(){return hasRequiredEach||(hasRequiredEach=1,each=requireForEach()),each}var _baseFilter,hasRequired_baseFilter;function require_baseFilter(){if(hasRequired_baseFilter)return _baseFilter;hasRequired_baseFilter=1;var _=require_baseEach();function v(S,R){var T=[];return _(S,function(A,k,M){R(A,k,M)&&T.push(A)}),T}return _baseFilter=v,_baseFilter}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var _="__lodash_hash_undefined__";function v(S){return this.__data__.set(S,_),this}return _setCacheAdd=v,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function _(v){return this.__data__.has(v)}return _setCacheHas=_,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var _=require_MapCache(),v=require_setCacheAdd(),S=require_setCacheHas();function R(T){var A=-1,k=T==null?0:T.length;for(this.__data__=new _;++A<k;)this.add(T[A])}return R.prototype.add=R.prototype.push=v,R.prototype.has=S,_SetCache=R,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function _(v,S){for(var R=-1,T=v==null?0:v.length;++R<T;)if(S(v[R],R,v))return!0;return!1}return _arraySome=_,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function _(v,S){return v.has(S)}return _cacheHas=_,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var _=require_SetCache(),v=require_arraySome(),S=require_cacheHas(),R=1,T=2;function A(k,M,N,D,I,q){var B=N&R,z=k.length,F=M.length;if(z!=F&&!(B&&F>z))return!1;var V=q.get(k),H=q.get(M);if(V&&H)return V==M&&H==k;var W=-1,Y=!0,Z=N&T?new _:void 0;for(q.set(k,M),q.set(M,k);++W<z;){var J=k[W],ne=M[W];if(D)var oe=B?D(ne,J,W,M,k,q):D(J,ne,W,k,M,q);if(oe!==void 0){if(oe)continue;Y=!1;break}if(Z){if(!v(M,function(te,se){if(!S(Z,se)&&(J===te||I(J,te,N,D,q)))return Z.push(se)})){Y=!1;break}}else if(!(J===ne||I(J,ne,N,D,q))){Y=!1;break}}return q.delete(k),q.delete(M),Y}return _equalArrays=A,_equalArrays}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function _(v){var S=-1,R=Array(v.size);return v.forEach(function(T,A){R[++S]=[A,T]}),R}return _mapToArray=_,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function _(v){var S=-1,R=Array(v.size);return v.forEach(function(T){R[++S]=T}),R}return _setToArray=_,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var _=require_Symbol(),v=require_Uint8Array(),S=requireEq(),R=require_equalArrays(),T=require_mapToArray(),A=require_setToArray(),k=1,M=2,N="[object Boolean]",D="[object Date]",I="[object Error]",q="[object Map]",B="[object Number]",z="[object RegExp]",F="[object Set]",V="[object String]",H="[object Symbol]",W="[object ArrayBuffer]",Y="[object DataView]",Z=_?_.prototype:void 0,J=Z?Z.valueOf:void 0;function ne(oe,te,se,le,ue,ce,ge){switch(se){case Y:if(oe.byteLength!=te.byteLength||oe.byteOffset!=te.byteOffset)return!1;oe=oe.buffer,te=te.buffer;case W:return!(oe.byteLength!=te.byteLength||!ce(new v(oe),new v(te)));case N:case D:case B:return S(+oe,+te);case I:return oe.name==te.name&&oe.message==te.message;case z:case V:return oe==te+"";case q:var me=T;case F:var Ee=le&k;if(me||(me=A),oe.size!=te.size&&!Ee)return!1;var _e=ge.get(oe);if(_e)return _e==te;le|=M,ge.set(oe,te);var ye=R(me(oe),me(te),le,ue,ce,ge);return ge.delete(oe),ye;case H:if(J)return J.call(oe)==J.call(te)}return!1}return _equalByTag=ne,_equalByTag}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var _=require_getAllKeys(),v=1,S=Object.prototype,R=S.hasOwnProperty;function T(A,k,M,N,D,I){var q=M&v,B=_(A),z=B.length,F=_(k),V=F.length;if(z!=V&&!q)return!1;for(var H=z;H--;){var W=B[H];if(!(q?W in k:R.call(k,W)))return!1}var Y=I.get(A),Z=I.get(k);if(Y&&Z)return Y==k&&Z==A;var J=!0;I.set(A,k),I.set(k,A);for(var ne=q;++H<z;){W=B[H];var oe=A[W],te=k[W];if(N)var se=q?N(te,oe,W,k,A,I):N(oe,te,W,A,k,I);if(!(se===void 0?oe===te||D(oe,te,M,N,I):se)){J=!1;break}ne||(ne=W=="constructor")}if(J&&!ne){var le=A.constructor,ue=k.constructor;le!=ue&&"constructor"in A&&"constructor"in k&&!(typeof le=="function"&&le instanceof le&&typeof ue=="function"&&ue instanceof ue)&&(J=!1)}return I.delete(A),I.delete(k),J}return _equalObjects=T,_equalObjects}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var _=require_Stack(),v=require_equalArrays(),S=require_equalByTag(),R=require_equalObjects(),T=require_getTag(),A=requireIsArray(),k=requireIsBuffer(),M=requireIsTypedArray(),N=1,D="[object Arguments]",I="[object Array]",q="[object Object]",B=Object.prototype,z=B.hasOwnProperty;function F(V,H,W,Y,Z,J){var ne=A(V),oe=A(H),te=ne?I:T(V),se=oe?I:T(H);te=te==D?q:te,se=se==D?q:se;var le=te==q,ue=se==q,ce=te==se;if(ce&&k(V)){if(!k(H))return!1;ne=!0,le=!1}if(ce&&!le)return J||(J=new _),ne||M(V)?v(V,H,W,Y,Z,J):S(V,H,te,W,Y,Z,J);if(!(W&N)){var ge=le&&z.call(V,"__wrapped__"),me=ue&&z.call(H,"__wrapped__");if(ge||me){var Ee=ge?V.value():V,_e=me?H.value():H;return J||(J=new _),Z(Ee,_e,W,Y,J)}}return ce?(J||(J=new _),R(V,H,W,Y,Z,J)):!1}return _baseIsEqualDeep=F,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var _=require_baseIsEqualDeep(),v=requireIsObjectLike();function S(R,T,A,k,M){return R===T?!0:R==null||T==null||!v(R)&&!v(T)?R!==R&&T!==T:_(R,T,A,k,S,M)}return _baseIsEqual=S,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var _=require_Stack(),v=require_baseIsEqual(),S=1,R=2;function T(A,k,M,N){var D=M.length,I=D,q=!N;if(A==null)return!I;for(A=Object(A);D--;){var B=M[D];if(q&&B[2]?B[1]!==A[B[0]]:!(B[0]in A))return!1}for(;++D<I;){B=M[D];var z=B[0],F=A[z],V=B[1];if(q&&B[2]){if(F===void 0&&!(z in A))return!1}else{var H=new _;if(N)var W=N(F,V,z,A,k,H);if(!(W===void 0?v(V,F,S|R,N,H):W))return!1}}return!0}return _baseIsMatch=T,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var _=requireIsObject();function v(S){return S===S&&!_(S)}return _isStrictComparable=v,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var _=require_isStrictComparable(),v=requireKeys();function S(R){for(var T=v(R),A=T.length;A--;){var k=T[A],M=R[k];T[A]=[k,M,_(M)]}return T}return _getMatchData=S,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function _(v,S){return function(R){return R==null?!1:R[v]===S&&(S!==void 0||v in Object(R))}}return _matchesStrictComparable=_,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var _=require_baseIsMatch(),v=require_getMatchData(),S=require_matchesStrictComparable();function R(T){var A=v(T);return A.length==1&&A[0][2]?S(A[0][0],A[0][1]):function(k){return k===T||_(k,T,A)}}return _baseMatches=R,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var _=require_baseGetTag(),v=requireIsObjectLike(),S="[object Symbol]";function R(T){return typeof T=="symbol"||v(T)&&_(T)==S}return isSymbol_1=R,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var _=requireIsArray(),v=requireIsSymbol(),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function T(A,k){if(_(A))return!1;var M=typeof A;return M=="number"||M=="symbol"||M=="boolean"||A==null||v(A)?!0:R.test(A)||!S.test(A)||k!=null&&A in Object(k)}return _isKey=T,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var _=require_MapCache(),v="Expected a function";function S(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(v);var A=function(){var k=arguments,M=T?T.apply(this,k):k[0],N=A.cache;if(N.has(M))return N.get(M);var D=R.apply(this,k);return A.cache=N.set(M,D)||N,D};return A.cache=new(S.Cache||_),A}return S.Cache=_,memoize_1=S,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var _=requireMemoize(),v=500;function S(R){var T=_(R,function(k){return A.size===v&&A.clear(),k}),A=T.cache;return T}return _memoizeCapped=S,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var _=require_memoizeCapped(),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,R=_(function(T){var A=[];return T.charCodeAt(0)===46&&A.push(""),T.replace(v,function(k,M,N,D){A.push(N?D.replace(S,"$1"):M||k)}),A});return _stringToPath=R,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=Array(T);++R<T;)A[R]=S(v[R],R,v);return A}return _arrayMap=_,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var _=require_Symbol(),v=require_arrayMap(),S=requireIsArray(),R=requireIsSymbol(),T=_?_.prototype:void 0,A=T?T.toString:void 0;function k(M){if(typeof M=="string")return M;if(S(M))return v(M,k)+"";if(R(M))return A?A.call(M):"";var N=M+"";return N=="0"&&1/M==-1/0?"-0":N}return _baseToString=k,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var _=require_baseToString();function v(S){return S==null?"":_(S)}return toString_1=v,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var _=requireIsArray(),v=require_isKey(),S=require_stringToPath(),R=requireToString();function T(A,k){return _(A)?A:v(A,k)?[A]:S(R(A))}return _castPath=T,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var _=requireIsSymbol();function v(S){if(typeof S=="string"||_(S))return S;var R=S+"";return R=="0"&&1/S==-1/0?"-0":R}return _toKey=v,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var _=require_castPath(),v=require_toKey();function S(R,T){T=_(T,R);for(var A=0,k=T.length;R!=null&&A<k;)R=R[v(T[A++])];return A&&A==k?R:void 0}return _baseGet=S,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var _=require_baseGet();function v(S,R,T){var A=S==null?void 0:_(S,R);return A===void 0?T:A}return get_1=v,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function _(v,S){return v!=null&&S in Object(v)}return _baseHasIn=_,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var _=require_castPath(),v=requireIsArguments(),S=requireIsArray(),R=require_isIndex(),T=requireIsLength(),A=require_toKey();function k(M,N,D){N=_(N,M);for(var I=-1,q=N.length,B=!1;++I<q;){var z=A(N[I]);if(!(B=M!=null&&D(M,z)))break;M=M[z]}return B||++I!=q?B:(q=M==null?0:M.length,!!q&&T(q)&&R(z,q)&&(S(M)||v(M)))}return _hasPath=k,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var _=require_baseHasIn(),v=require_hasPath();function S(R,T){return R!=null&&v(R,T,_)}return hasIn_1=S,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var _=require_baseIsEqual(),v=requireGet(),S=requireHasIn(),R=require_isKey(),T=require_isStrictComparable(),A=require_matchesStrictComparable(),k=require_toKey(),M=1,N=2;function D(I,q){return R(I)&&T(q)?A(k(I),q):function(B){var z=v(B,I);return z===void 0&&z===q?S(B,I):_(q,z,M|N)}}return _baseMatchesProperty=D,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function _(v){return function(S){return S?.[v]}}return _baseProperty=_,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var _=require_baseGet();function v(S){return function(R){return _(R,S)}}return _basePropertyDeep=v,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var _=require_baseProperty(),v=require_basePropertyDeep(),S=require_isKey(),R=require_toKey();function T(A){return S(A)?_(R(A)):v(A)}return property_1=T,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var _=require_baseMatches(),v=require_baseMatchesProperty(),S=requireIdentity(),R=requireIsArray(),T=requireProperty();function A(k){return typeof k=="function"?k:k==null?S:typeof k=="object"?R(k)?v(k[0],k[1]):_(k):T(k)}return _baseIteratee=A,_baseIteratee}var filter_1,hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter_1;hasRequiredFilter=1;var _=require_arrayFilter(),v=require_baseFilter(),S=require_baseIteratee(),R=requireIsArray();function T(A,k){var M=R(A)?_:v;return M(A,S(k,3))}return filter_1=T,filter_1}var _baseHas,hasRequired_baseHas;function require_baseHas(){if(hasRequired_baseHas)return _baseHas;hasRequired_baseHas=1;var _=Object.prototype,v=_.hasOwnProperty;function S(R,T){return R!=null&&v.call(R,T)}return _baseHas=S,_baseHas}var has_1,hasRequiredHas;function requireHas(){if(hasRequiredHas)return has_1;hasRequiredHas=1;var _=require_baseHas(),v=require_hasPath();function S(R,T){return R!=null&&v(R,T,_)}return has_1=S,has_1}var isEmpty_1,hasRequiredIsEmpty;function requireIsEmpty(){if(hasRequiredIsEmpty)return isEmpty_1;hasRequiredIsEmpty=1;var _=require_baseKeys(),v=require_getTag(),S=requireIsArguments(),R=requireIsArray(),T=requireIsArrayLike(),A=requireIsBuffer(),k=require_isPrototype(),M=requireIsTypedArray(),N="[object Map]",D="[object Set]",I=Object.prototype,q=I.hasOwnProperty;function B(z){if(z==null)return!0;if(T(z)&&(R(z)||typeof z=="string"||typeof z.splice=="function"||A(z)||M(z)||S(z)))return!z.length;var F=v(z);if(F==N||F==D)return!z.size;if(k(z))return!_(z).length;for(var V in z)if(q.call(z,V))return!1;return!0}return isEmpty_1=B,isEmpty_1}var isUndefined_1,hasRequiredIsUndefined;function requireIsUndefined(){if(hasRequiredIsUndefined)return isUndefined_1;hasRequiredIsUndefined=1;function _(v){return v===void 0}return isUndefined_1=_,isUndefined_1}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var _=require_baseEach(),v=requireIsArrayLike();function S(R,T){var A=-1,k=v(R)?Array(R.length):[];return _(R,function(M,N,D){k[++A]=T(M,N,D)}),k}return _baseMap=S,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var _=require_arrayMap(),v=require_baseIteratee(),S=require_baseMap(),R=requireIsArray();function T(A,k){var M=R(A)?_:S;return M(A,v(k,3))}return map_1=T,map_1}var _arrayReduce,hasRequired_arrayReduce;function require_arrayReduce(){if(hasRequired_arrayReduce)return _arrayReduce;hasRequired_arrayReduce=1;function _(v,S,R,T){var A=-1,k=v==null?0:v.length;for(T&&k&&(R=v[++A]);++A<k;)R=S(R,v[A],A,v);return R}return _arrayReduce=_,_arrayReduce}var _baseReduce,hasRequired_baseReduce;function require_baseReduce(){if(hasRequired_baseReduce)return _baseReduce;hasRequired_baseReduce=1;function _(v,S,R,T,A){return A(v,function(k,M,N){R=T?(T=!1,k):S(R,k,M,N)}),R}return _baseReduce=_,_baseReduce}var reduce_1,hasRequiredReduce;function requireReduce(){if(hasRequiredReduce)return reduce_1;hasRequiredReduce=1;var _=require_arrayReduce(),v=require_baseEach(),S=require_baseIteratee(),R=require_baseReduce(),T=requireIsArray();function A(k,M,N){var D=T(k)?_:R,I=arguments.length<3;return D(k,S(M,4),N,I,v)}return reduce_1=A,reduce_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var _=require_baseGetTag(),v=requireIsArray(),S=requireIsObjectLike(),R="[object String]";function T(A){return typeof A=="string"||!v(A)&&S(A)&&_(A)==R}return isString_1=T,isString_1}var _asciiSize,hasRequired_asciiSize;function require_asciiSize(){if(hasRequired_asciiSize)return _asciiSize;hasRequired_asciiSize=1;var _=require_baseProperty(),v=_("length");return _asciiSize=v,_asciiSize}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var _="\\ud800-\\udfff",v="\\u0300-\\u036f",S="\\ufe20-\\ufe2f",R="\\u20d0-\\u20ff",T=v+S+R,A="\\ufe0e\\ufe0f",k="\\u200d",M=RegExp("["+k+_+T+A+"]");function N(D){return M.test(D)}return _hasUnicode=N,_hasUnicode}var _unicodeSize,hasRequired_unicodeSize;function require_unicodeSize(){if(hasRequired_unicodeSize)return _unicodeSize;hasRequired_unicodeSize=1;var _="\\ud800-\\udfff",v="\\u0300-\\u036f",S="\\ufe20-\\ufe2f",R="\\u20d0-\\u20ff",T=v+S+R,A="\\ufe0e\\ufe0f",k="["+_+"]",M="["+T+"]",N="\\ud83c[\\udffb-\\udfff]",D="(?:"+M+"|"+N+")",I="[^"+_+"]",q="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",z="\\u200d",F=D+"?",V="["+A+"]?",H="(?:"+z+"(?:"+[I,q,B].join("|")+")"+V+F+")*",W=V+F+H,Y="(?:"+[I+M+"?",M,q,B,k].join("|")+")",Z=RegExp(N+"(?="+N+")|"+Y+W,"g");function J(ne){for(var oe=Z.lastIndex=0;Z.test(ne);)++oe;return oe}return _unicodeSize=J,_unicodeSize}var _stringSize,hasRequired_stringSize;function require_stringSize(){if(hasRequired_stringSize)return _stringSize;hasRequired_stringSize=1;var _=require_asciiSize(),v=require_hasUnicode(),S=require_unicodeSize();function R(T){return v(T)?S(T):_(T)}return _stringSize=R,_stringSize}var size_1,hasRequiredSize;function requireSize(){if(hasRequiredSize)return size_1;hasRequiredSize=1;var _=require_baseKeys(),v=require_getTag(),S=requireIsArrayLike(),R=requireIsString(),T=require_stringSize(),A="[object Map]",k="[object Set]";function M(N){if(N==null)return 0;if(S(N))return R(N)?T(N):N.length;var D=v(N);return D==A||D==k?N.size:_(N).length}return size_1=M,size_1}var transform_1,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform_1;hasRequiredTransform=1;var _=require_arrayEach(),v=require_baseCreate(),S=require_baseForOwn(),R=require_baseIteratee(),T=require_getPrototype(),A=requireIsArray(),k=requireIsBuffer(),M=requireIsFunction(),N=requireIsObject(),D=requireIsTypedArray();function I(q,B,z){var F=A(q),V=F||k(q)||D(q);if(B=R(B,4),z==null){var H=q&&q.constructor;V?z=F?new H:[]:N(q)?z=M(H)?v(T(q)):{}:z={}}return(V?_:S)(q,function(W,Y,Z){return B(z,W,Y,Z)}),z}return transform_1=I,transform_1}var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var _=require_Symbol(),v=requireIsArguments(),S=requireIsArray(),R=_?_.isConcatSpreadable:void 0;function T(A){return S(A)||v(A)||!!(R&&A&&A[R])}return _isFlattenable=T,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var _=require_arrayPush(),v=require_isFlattenable();function S(R,T,A,k,M){var N=-1,D=R.length;for(A||(A=v),M||(M=[]);++N<D;){var I=R[N];T>0&&A(I)?T>1?S(I,T-1,A,k,M):_(M,I):k||(M[M.length]=I)}return M}return _baseFlatten=S,_baseFlatten}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function _(v,S,R){switch(R.length){case 0:return v.call(S);case 1:return v.call(S,R[0]);case 2:return v.call(S,R[0],R[1]);case 3:return v.call(S,R[0],R[1],R[2])}return v.apply(S,R)}return _apply=_,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var _=require_apply(),v=Math.max;function S(R,T,A){return T=v(T===void 0?R.length-1:T,0),function(){for(var k=arguments,M=-1,N=v(k.length-T,0),D=Array(N);++M<N;)D[M]=k[T+M];M=-1;for(var I=Array(T+1);++M<T;)I[M]=k[M];return I[T]=A(D),_(R,this,I)}}return _overRest=S,_overRest}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var _=requireConstant(),v=require_defineProperty(),S=requireIdentity(),R=v?function(T,A){return v(T,"toString",{configurable:!0,enumerable:!1,value:_(A),writable:!0})}:S;return _baseSetToString=R,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var _=800,v=16,S=Date.now;function R(T){var A=0,k=0;return function(){var M=S(),N=v-(M-k);if(k=M,N>0){if(++A>=_)return arguments[0]}else A=0;return T.apply(void 0,arguments)}}return _shortOut=R,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var _=require_baseSetToString(),v=require_shortOut(),S=v(_);return _setToString=S,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var _=requireIdentity(),v=require_overRest(),S=require_setToString();function R(T,A){return S(v(T,A,_),T+"")}return _baseRest=R,_baseRest}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function _(v,S,R,T){for(var A=v.length,k=R+(T?1:-1);T?k--:++k<A;)if(S(v[k],k,v))return k;return-1}return _baseFindIndex=_,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function _(v){return v!==v}return _baseIsNaN=_,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function _(v,S,R){for(var T=R-1,A=v.length;++T<A;)if(v[T]===S)return T;return-1}return _strictIndexOf=_,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var _=require_baseFindIndex(),v=require_baseIsNaN(),S=require_strictIndexOf();function R(T,A,k){return A===A?S(T,A,k):_(T,v,k)}return _baseIndexOf=R,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var _=require_baseIndexOf();function v(S,R){var T=S==null?0:S.length;return!!T&&_(S,R,0)>-1}return _arrayIncludes=v,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function _(v,S,R){for(var T=-1,A=v==null?0:v.length;++T<A;)if(R(S,v[T]))return!0;return!1}return _arrayIncludesWith=_,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function _(){}return noop_1=_,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var _=require_Set(),v=requireNoop(),S=require_setToArray(),R=1/0,T=_&&1/S(new _([,-0]))[1]==R?function(A){return new _(A)}:v;return _createSet=T,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var _=require_SetCache(),v=require_arrayIncludes(),S=require_arrayIncludesWith(),R=require_cacheHas(),T=require_createSet(),A=require_setToArray(),k=200;function M(N,D,I){var q=-1,B=v,z=N.length,F=!0,V=[],H=V;if(I)F=!1,B=S;else if(z>=k){var W=D?null:T(N);if(W)return A(W);F=!1,B=R,H=new _}else H=D?[]:V;e:for(;++q<z;){var Y=N[q],Z=D?D(Y):Y;if(Y=I||Y!==0?Y:0,F&&Z===Z){for(var J=H.length;J--;)if(H[J]===Z)continue e;D&&H.push(Z),V.push(Y)}else B(H,Z,I)||(H!==V&&H.push(Z),V.push(Y))}return V}return _baseUniq=M,_baseUniq}var isArrayLikeObject_1,hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var _=requireIsArrayLike(),v=requireIsObjectLike();function S(R){return v(R)&&_(R)}return isArrayLikeObject_1=S,isArrayLikeObject_1}var union_1,hasRequiredUnion;function requireUnion(){if(hasRequiredUnion)return union_1;hasRequiredUnion=1;var _=require_baseFlatten(),v=require_baseRest(),S=require_baseUniq(),R=requireIsArrayLikeObject(),T=v(function(A){return S(_(A,1,R,!0))});return union_1=T,union_1}var _baseValues,hasRequired_baseValues;function require_baseValues(){if(hasRequired_baseValues)return _baseValues;hasRequired_baseValues=1;var _=require_arrayMap();function v(S,R){return _(R,function(T){return S[T]})}return _baseValues=v,_baseValues}var values_1,hasRequiredValues;function requireValues(){if(hasRequiredValues)return values_1;hasRequiredValues=1;var _=require_baseValues(),v=requireKeys();function S(R){return R==null?[]:_(R,v(R))}return values_1=S,values_1}var lodash_1$1,hasRequiredLodash$1;function requireLodash$1(){if(hasRequiredLodash$1)return lodash_1$1;hasRequiredLodash$1=1;var _;if(typeof commonjsRequire=="function")try{_={clone:requireClone(),constant:requireConstant(),each:requireEach(),filter:requireFilter(),has:requireHas(),isArray:requireIsArray(),isEmpty:requireIsEmpty(),isFunction:requireIsFunction(),isUndefined:requireIsUndefined(),keys:requireKeys(),map:requireMap(),reduce:requireReduce(),size:requireSize(),transform:requireTransform(),union:requireUnion(),values:requireValues()}}catch{}return _||(_=window._),lodash_1$1=_,lodash_1$1}var graph,hasRequiredGraph;function requireGraph(){if(hasRequiredGraph)return graph;hasRequiredGraph=1;var _=requireLodash$1();graph=T;var v="\0",S="\0",R="";function T(I){this._isDirected=_.has(I,"directed")?I.directed:!0,this._isMultigraph=_.has(I,"multigraph")?I.multigraph:!1,this._isCompound=_.has(I,"compound")?I.compound:!1,this._label=void 0,this._defaultNodeLabelFn=_.constant(void 0),this._defaultEdgeLabelFn=_.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}T.prototype._nodeCount=0,T.prototype._edgeCount=0,T.prototype.isDirected=function(){return this._isDirected},T.prototype.isMultigraph=function(){return this._isMultigraph},T.prototype.isCompound=function(){return this._isCompound},T.prototype.setGraph=function(I){return this._label=I,this},T.prototype.graph=function(){return this._label},T.prototype.setDefaultNodeLabel=function(I){return _.isFunction(I)||(I=_.constant(I)),this._defaultNodeLabelFn=I,this},T.prototype.nodeCount=function(){return this._nodeCount},T.prototype.nodes=function(){return _.keys(this._nodes)},T.prototype.sources=function(){var I=this;return _.filter(this.nodes(),function(q){return _.isEmpty(I._in[q])})},T.prototype.sinks=function(){var I=this;return _.filter(this.nodes(),function(q){return _.isEmpty(I._out[q])})},T.prototype.setNodes=function(I,q){var B=arguments,z=this;return _.each(I,function(F){B.length>1?z.setNode(F,q):z.setNode(F)}),this},T.prototype.setNode=function(I,q){return _.has(this._nodes,I)?(arguments.length>1&&(this._nodes[I]=q),this):(this._nodes[I]=arguments.length>1?q:this._defaultNodeLabelFn(I),this._isCompound&&(this._parent[I]=S,this._children[I]={},this._children[S][I]=!0),this._in[I]={},this._preds[I]={},this._out[I]={},this._sucs[I]={},++this._nodeCount,this)},T.prototype.node=function(I){return this._nodes[I]},T.prototype.hasNode=function(I){return _.has(this._nodes,I)},T.prototype.removeNode=function(I){var q=this;if(_.has(this._nodes,I)){var B=function(z){q.removeEdge(q._edgeObjs[z])};delete this._nodes[I],this._isCompound&&(this._removeFromParentsChildList(I),delete this._parent[I],_.each(this.children(I),function(z){q.setParent(z)}),delete this._children[I]),_.each(_.keys(this._in[I]),B),delete this._in[I],delete this._preds[I],_.each(_.keys(this._out[I]),B),delete this._out[I],delete this._sucs[I],--this._nodeCount}return this},T.prototype.setParent=function(I,q){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_.isUndefined(q))q=S;else{q+="";for(var B=q;!_.isUndefined(B);B=this.parent(B))if(B===I)throw new Error("Setting "+q+" as parent of "+I+" would create a cycle");this.setNode(q)}return this.setNode(I),this._removeFromParentsChildList(I),this._parent[I]=q,this._children[q][I]=!0,this},T.prototype._removeFromParentsChildList=function(I){delete this._children[this._parent[I]][I]},T.prototype.parent=function(I){if(this._isCompound){var q=this._parent[I];if(q!==S)return q}},T.prototype.children=function(I){if(_.isUndefined(I)&&(I=S),this._isCompound){var q=this._children[I];if(q)return _.keys(q)}else{if(I===S)return this.nodes();if(this.hasNode(I))return[]}},T.prototype.predecessors=function(I){var q=this._preds[I];if(q)return _.keys(q)},T.prototype.successors=function(I){var q=this._sucs[I];if(q)return _.keys(q)},T.prototype.neighbors=function(I){var q=this.predecessors(I);if(q)return _.union(q,this.successors(I))},T.prototype.isLeaf=function(I){var q;return this.isDirected()?q=this.successors(I):q=this.neighbors(I),q.length===0},T.prototype.filterNodes=function(I){var q=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});q.setGraph(this.graph());var B=this;_.each(this._nodes,function(V,H){I(H)&&q.setNode(H,V)}),_.each(this._edgeObjs,function(V){q.hasNode(V.v)&&q.hasNode(V.w)&&q.setEdge(V,B.edge(V))});var z={};function F(V){var H=B.parent(V);return H===void 0||q.hasNode(H)?(z[V]=H,H):H in z?z[H]:F(H)}return this._isCompound&&_.each(q.nodes(),function(V){q.setParent(V,F(V))}),q},T.prototype.setDefaultEdgeLabel=function(I){return _.isFunction(I)||(I=_.constant(I)),this._defaultEdgeLabelFn=I,this},T.prototype.edgeCount=function(){return this._edgeCount},T.prototype.edges=function(){return _.values(this._edgeObjs)},T.prototype.setPath=function(I,q){var B=this,z=arguments;return _.reduce(I,function(F,V){return z.length>1?B.setEdge(F,V,q):B.setEdge(F,V),V}),this},T.prototype.setEdge=function(){var I,q,B,z,F=!1,V=arguments[0];typeof V=="object"&&V!==null&&"v"in V?(I=V.v,q=V.w,B=V.name,arguments.length===2&&(z=arguments[1],F=!0)):(I=V,q=arguments[1],B=arguments[3],arguments.length>2&&(z=arguments[2],F=!0)),I=""+I,q=""+q,_.isUndefined(B)||(B=""+B);var H=M(this._isDirected,I,q,B);if(_.has(this._edgeLabels,H))return F&&(this._edgeLabels[H]=z),this;if(!_.isUndefined(B)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(I),this.setNode(q),this._edgeLabels[H]=F?z:this._defaultEdgeLabelFn(I,q,B);var W=N(this._isDirected,I,q,B);return I=W.v,q=W.w,Object.freeze(W),this._edgeObjs[H]=W,A(this._preds[q],I),A(this._sucs[I],q),this._in[q][H]=W,this._out[I][H]=W,this._edgeCount++,this},T.prototype.edge=function(I,q,B){var z=arguments.length===1?D(this._isDirected,arguments[0]):M(this._isDirected,I,q,B);return this._edgeLabels[z]},T.prototype.hasEdge=function(I,q,B){var z=arguments.length===1?D(this._isDirected,arguments[0]):M(this._isDirected,I,q,B);return _.has(this._edgeLabels,z)},T.prototype.removeEdge=function(I,q,B){var z=arguments.length===1?D(this._isDirected,arguments[0]):M(this._isDirected,I,q,B),F=this._edgeObjs[z];return F&&(I=F.v,q=F.w,delete this._edgeLabels[z],delete this._edgeObjs[z],k(this._preds[q],I),k(this._sucs[I],q),delete this._in[q][z],delete this._out[I][z],this._edgeCount--),this},T.prototype.inEdges=function(I,q){var B=this._in[I];if(B){var z=_.values(B);return q?_.filter(z,function(F){return F.v===q}):z}},T.prototype.outEdges=function(I,q){var B=this._out[I];if(B){var z=_.values(B);return q?_.filter(z,function(F){return F.w===q}):z}},T.prototype.nodeEdges=function(I,q){var B=this.inEdges(I,q);if(B)return B.concat(this.outEdges(I,q))};function A(I,q){I[q]?I[q]++:I[q]=1}function k(I,q){--I[q]||delete I[q]}function M(I,q,B,z){var F=""+q,V=""+B;if(!I&&F>V){var H=F;F=V,V=H}return F+R+V+R+(_.isUndefined(z)?v:z)}function N(I,q,B,z){var F=""+q,V=""+B;if(!I&&F>V){var H=F;F=V,V=H}var W={v:F,w:V};return z&&(W.name=z),W}function D(I,q){return M(I,q.v,q.w,q.name)}return graph}var version$1,hasRequiredVersion$1;function requireVersion$1(){return hasRequiredVersion$1||(hasRequiredVersion$1=1,version$1="2.1.8"),version$1}var lib,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib={Graph:requireGraph(),version:requireVersion$1()}),lib}var json,hasRequiredJson;function requireJson(){if(hasRequiredJson)return json;hasRequiredJson=1;var _=requireLodash$1(),v=requireGraph();json={write:S,read:A};function S(k){var M={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:R(k),edges:T(k)};return _.isUndefined(k.graph())||(M.value=_.clone(k.graph())),M}function R(k){return _.map(k.nodes(),function(M){var N=k.node(M),D=k.parent(M),I={v:M};return _.isUndefined(N)||(I.value=N),_.isUndefined(D)||(I.parent=D),I})}function T(k){return _.map(k.edges(),function(M){var N=k.edge(M),D={v:M.v,w:M.w};return _.isUndefined(M.name)||(D.name=M.name),_.isUndefined(N)||(D.value=N),D})}function A(k){var M=new v(k.options).setGraph(k.value);return _.each(k.nodes,function(N){M.setNode(N.v,N.value),N.parent&&M.setParent(N.v,N.parent)}),_.each(k.edges,function(N){M.setEdge({v:N.v,w:N.w,name:N.name},N.value)}),M}return json}var components_1,hasRequiredComponents;function requireComponents(){if(hasRequiredComponents)return components_1;hasRequiredComponents=1;var _=requireLodash$1();components_1=v;function v(S){var R={},T=[],A;function k(M){_.has(R,M)||(R[M]=!0,A.push(M),_.each(S.successors(M),k),_.each(S.predecessors(M),k))}return _.each(S.nodes(),function(M){A=[],k(M),A.length&&T.push(A)}),T}return components_1}var priorityQueue,hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1;var _=requireLodash$1();priorityQueue=v;function v(){this._arr=[],this._keyIndices={}}return v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(S){return S.key})},v.prototype.has=function(S){return _.has(this._keyIndices,S)},v.prototype.priority=function(S){var R=this._keyIndices[S];if(R!==void 0)return this._arr[R].priority},v.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(S,R){var T=this._keyIndices;if(S=String(S),!_.has(T,S)){var A=this._arr,k=A.length;return T[S]=k,A.push({key:S,priority:R}),this._decrease(k),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},v.prototype.decrease=function(S,R){var T=this._keyIndices[S];if(R>this._arr[T].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[T].priority+" New: "+R);this._arr[T].priority=R,this._decrease(T)},v.prototype._heapify=function(S){var R=this._arr,T=2*S,A=T+1,k=S;T<R.length&&(k=R[T].priority<R[k].priority?T:k,A<R.length&&(k=R[A].priority<R[k].priority?A:k),k!==S&&(this._swap(S,k),this._heapify(k)))},v.prototype._decrease=function(S){for(var R=this._arr,T=R[S].priority,A;S!==0&&(A=S>>1,!(R[A].priority<T));)this._swap(S,A),S=A},v.prototype._swap=function(S,R){var T=this._arr,A=this._keyIndices,k=T[S],M=T[R];T[S]=M,T[R]=k,A[M.key]=S,A[k.key]=R},priorityQueue}var dijkstra_1,hasRequiredDijkstra;function requireDijkstra(){if(hasRequiredDijkstra)return dijkstra_1;hasRequiredDijkstra=1;var _=requireLodash$1(),v=requirePriorityQueue();dijkstra_1=R;var S=_.constant(1);function R(A,k,M,N){return T(A,String(k),M||S,N||function(D){return A.outEdges(D)})}function T(A,k,M,N){var D={},I=new v,q,B,z=function(F){var V=F.v!==q?F.v:F.w,H=D[V],W=M(F),Y=B.distance+W;if(W<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+F+" Weight: "+W);Y<H.distance&&(H.distance=Y,H.predecessor=q,I.decrease(V,Y))};for(A.nodes().forEach(function(F){var V=F===k?0:Number.POSITIVE_INFINITY;D[F]={distance:V},I.add(F,V)});I.size()>0&&(q=I.removeMin(),B=D[q],B.distance!==Number.POSITIVE_INFINITY);)N(q).forEach(z);return D}return dijkstra_1}var dijkstraAll_1,hasRequiredDijkstraAll;function requireDijkstraAll(){if(hasRequiredDijkstraAll)return dijkstraAll_1;hasRequiredDijkstraAll=1;var _=requireDijkstra(),v=requireLodash$1();dijkstraAll_1=S;function S(R,T,A){return v.transform(R.nodes(),function(k,M){k[M]=_(R,M,T,A)},{})}return dijkstraAll_1}var tarjan_1,hasRequiredTarjan;function requireTarjan(){if(hasRequiredTarjan)return tarjan_1;hasRequiredTarjan=1;var _=requireLodash$1();tarjan_1=v;function v(S){var R=0,T=[],A={},k=[];function M(N){var D=A[N]={onStack:!0,lowlink:R,index:R++};if(T.push(N),S.successors(N).forEach(function(B){_.has(A,B)?A[B].onStack&&(D.lowlink=Math.min(D.lowlink,A[B].index)):(M(B),D.lowlink=Math.min(D.lowlink,A[B].lowlink))}),D.lowlink===D.index){var I=[],q;do q=T.pop(),A[q].onStack=!1,I.push(q);while(N!==q);k.push(I)}}return S.nodes().forEach(function(N){_.has(A,N)||M(N)}),k}return tarjan_1}var findCycles_1,hasRequiredFindCycles;function requireFindCycles(){if(hasRequiredFindCycles)return findCycles_1;hasRequiredFindCycles=1;var _=requireLodash$1(),v=requireTarjan();findCycles_1=S;function S(R){return _.filter(v(R),function(T){return T.length>1||T.length===1&&R.hasEdge(T[0],T[0])})}return findCycles_1}var floydWarshall_1,hasRequiredFloydWarshall;function requireFloydWarshall(){if(hasRequiredFloydWarshall)return floydWarshall_1;hasRequiredFloydWarshall=1;var _=requireLodash$1();floydWarshall_1=S;var v=_.constant(1);function S(T,A,k){return R(T,A||v,k||function(M){return T.outEdges(M)})}function R(T,A,k){var M={},N=T.nodes();return N.forEach(function(D){M[D]={},M[D][D]={distance:0},N.forEach(function(I){D!==I&&(M[D][I]={distance:Number.POSITIVE_INFINITY})}),k(D).forEach(function(I){var q=I.v===D?I.w:I.v,B=A(I);M[D][q]={distance:B,predecessor:D}})}),N.forEach(function(D){var I=M[D];N.forEach(function(q){var B=M[q];N.forEach(function(z){var F=B[D],V=I[z],H=B[z],W=F.distance+V.distance;W<H.distance&&(H.distance=W,H.predecessor=V.predecessor)})})}),M}return floydWarshall_1}var topsort_1,hasRequiredTopsort;function requireTopsort(){if(hasRequiredTopsort)return topsort_1;hasRequiredTopsort=1;var _=requireLodash$1();topsort_1=v,v.CycleException=S;function v(R){var T={},A={},k=[];function M(N){if(_.has(A,N))throw new S;_.has(T,N)||(A[N]=!0,T[N]=!0,_.each(R.predecessors(N),M),delete A[N],k.push(N))}if(_.each(R.sinks(),M),_.size(T)!==R.nodeCount())throw new S;return k}function S(){}return S.prototype=new Error,topsort_1}var isAcyclic_1,hasRequiredIsAcyclic;function requireIsAcyclic(){if(hasRequiredIsAcyclic)return isAcyclic_1;hasRequiredIsAcyclic=1;var _=requireTopsort();isAcyclic_1=v;function v(S){try{_(S)}catch(R){if(R instanceof _.CycleException)return!1;throw R}return!0}return isAcyclic_1}var dfs_1,hasRequiredDfs;function requireDfs(){if(hasRequiredDfs)return dfs_1;hasRequiredDfs=1;var _=requireLodash$1();dfs_1=v;function v(R,T,A){_.isArray(T)||(T=[T]);var k=(R.isDirected()?R.successors:R.neighbors).bind(R),M=[],N={};return _.each(T,function(D){if(!R.hasNode(D))throw new Error("Graph does not have node: "+D);S(R,D,A==="post",N,k,M)}),M}function S(R,T,A,k,M,N){_.has(k,T)||(k[T]=!0,A||N.push(T),_.each(M(T),function(D){S(R,D,A,k,M,N)}),A&&N.push(T))}return dfs_1}var postorder_1,hasRequiredPostorder;function requirePostorder(){if(hasRequiredPostorder)return postorder_1;hasRequiredPostorder=1;var _=requireDfs();postorder_1=v;function v(S,R){return _(S,R,"post")}return postorder_1}var preorder_1,hasRequiredPreorder;function requirePreorder(){if(hasRequiredPreorder)return preorder_1;hasRequiredPreorder=1;var _=requireDfs();preorder_1=v;function v(S,R){return _(S,R,"pre")}return preorder_1}var prim_1,hasRequiredPrim;function requirePrim(){if(hasRequiredPrim)return prim_1;hasRequiredPrim=1;var _=requireLodash$1(),v=requireGraph(),S=requirePriorityQueue();prim_1=R;function R(T,A){var k=new v,M={},N=new S,D;function I(B){var z=B.v===D?B.w:B.v,F=N.priority(z);if(F!==void 0){var V=A(B);V<F&&(M[z]=D,N.decrease(z,V))}}if(T.nodeCount()===0)return k;_.each(T.nodes(),function(B){N.add(B,Number.POSITIVE_INFINITY),k.setNode(B)}),N.decrease(T.nodes()[0],0);for(var q=!1;N.size()>0;){if(D=N.removeMin(),_.has(M,D))k.setEdge(D,M[D]);else{if(q)throw new Error("Input graph is not connected: "+T);q=!0}T.nodeEdges(D).forEach(I)}return k}return prim_1}var alg,hasRequiredAlg;function requireAlg(){return hasRequiredAlg||(hasRequiredAlg=1,alg={components:requireComponents(),dijkstra:requireDijkstra(),dijkstraAll:requireDijkstraAll(),findCycles:requireFindCycles(),floydWarshall:requireFloydWarshall(),isAcyclic:requireIsAcyclic(),postorder:requirePostorder(),preorder:requirePreorder(),prim:requirePrim(),tarjan:requireTarjan(),topsort:requireTopsort()}),alg}var graphlib,hasRequiredGraphlib$1;function requireGraphlib$1(){if(hasRequiredGraphlib$1)return graphlib;hasRequiredGraphlib$1=1;var _=requireLib();return graphlib={Graph:_.Graph,json:requireJson(),alg:requireAlg(),version:_.version},graphlib}var graphlib_1,hasRequiredGraphlib;function requireGraphlib(){if(hasRequiredGraphlib)return graphlib_1;hasRequiredGraphlib=1;var _;if(typeof commonjsRequire=="function")try{_=requireGraphlib$1()}catch{}return _||(_=window.graphlib),graphlib_1=_,graphlib_1}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var _=require_baseClone(),v=1,S=4;function R(T){return _(T,v|S)}return cloneDeep_1=R,cloneDeep_1}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var _=requireEq(),v=requireIsArrayLike(),S=require_isIndex(),R=requireIsObject();function T(A,k,M){if(!R(M))return!1;var N=typeof k;return(N=="number"?v(M)&&S(k,M.length):N=="string"&&k in M)?_(M[k],A):!1}return _isIterateeCall=T,_isIterateeCall}var defaults_1,hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults_1;hasRequiredDefaults=1;var _=require_baseRest(),v=requireEq(),S=require_isIterateeCall(),R=requireKeysIn(),T=Object.prototype,A=T.hasOwnProperty,k=_(function(M,N){M=Object(M);var D=-1,I=N.length,q=I>2?N[2]:void 0;for(q&&S(N[0],N[1],q)&&(I=1);++D<I;)for(var B=N[D],z=R(B),F=-1,V=z.length;++F<V;){var H=z[F],W=M[H];(W===void 0||v(W,T[H])&&!A.call(M,H))&&(M[H]=B[H])}return M});return defaults_1=k,defaults_1}var _createFind,hasRequired_createFind;function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var _=require_baseIteratee(),v=requireIsArrayLike(),S=requireKeys();function R(T){return function(A,k,M){var N=Object(A);if(!v(A)){var D=_(k,3);A=S(A),k=function(q){return D(N[q],q,N)}}var I=T(A,k,M);return I>-1?N[D?A[I]:I]:void 0}}return _createFind=R,_createFind}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var _=/\s/;function v(S){for(var R=S.length;R--&&_.test(S.charAt(R)););return R}return _trimmedEndIndex=v,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var _=require_trimmedEndIndex(),v=/^\s+/;function S(R){return R&&R.slice(0,_(R)+1).replace(v,"")}return _baseTrim=S,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var _=require_baseTrim(),v=requireIsObject(),S=requireIsSymbol(),R=NaN,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;function N(D){if(typeof D=="number")return D;if(S(D))return R;if(v(D)){var I=typeof D.valueOf=="function"?D.valueOf():D;D=v(I)?I+"":I}if(typeof D!="string")return D===0?D:+D;D=_(D);var q=A.test(D);return q||k.test(D)?M(D.slice(2),q?2:8):T.test(D)?R:+D}return toNumber_1=N,toNumber_1}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var _=requireToNumber(),v=1/0,S=17976931348623157e292;function R(T){if(!T)return T===0?T:0;if(T=_(T),T===v||T===-v){var A=T<0?-1:1;return A*S}return T===T?T:0}return toFinite_1=R,toFinite_1}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var _=requireToFinite();function v(S){var R=_(S),T=R%1;return R===R?T?R-T:R:0}return toInteger_1=v,toInteger_1}var findIndex_1,hasRequiredFindIndex;function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var _=require_baseFindIndex(),v=require_baseIteratee(),S=requireToInteger(),R=Math.max;function T(A,k,M){var N=A==null?0:A.length;if(!N)return-1;var D=M==null?0:S(M);return D<0&&(D=R(N+D,0)),_(A,v(k,3),D)}return findIndex_1=T,findIndex_1}var find_1,hasRequiredFind;function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var _=require_createFind(),v=requireFindIndex(),S=_(v);return find_1=S,find_1}var flatten_1,hasRequiredFlatten;function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var _=require_baseFlatten();function v(S){var R=S==null?0:S.length;return R?_(S,1):[]}return flatten_1=v,flatten_1}var forIn_1,hasRequiredForIn;function requireForIn(){if(hasRequiredForIn)return forIn_1;hasRequiredForIn=1;var _=require_baseFor(),v=require_castFunction(),S=requireKeysIn();function R(T,A){return T==null?T:_(T,v(A),S)}return forIn_1=R,forIn_1}var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function _(v){var S=v==null?0:v.length;return S?v[S-1]:void 0}return last_1=_,last_1}var mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var _=require_baseAssignValue(),v=require_baseForOwn(),S=require_baseIteratee();function R(T,A){var k={};return A=S(A,3),v(T,function(M,N,D){_(k,N,A(M,N,D))}),k}return mapValues_1=R,mapValues_1}var _baseExtremum,hasRequired_baseExtremum;function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var _=requireIsSymbol();function v(S,R,T){for(var A=-1,k=S.length;++A<k;){var M=S[A],N=R(M);if(N!=null&&(D===void 0?N===N&&!_(N):T(N,D)))var D=N,I=M}return I}return _baseExtremum=v,_baseExtremum}var _baseGt,hasRequired_baseGt;function require_baseGt(){if(hasRequired_baseGt)return _baseGt;hasRequired_baseGt=1;function _(v,S){return v>S}return _baseGt=_,_baseGt}var max_1,hasRequiredMax;function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var _=require_baseExtremum(),v=require_baseGt(),S=requireIdentity();function R(T){return T&&T.length?_(T,S,v):void 0}return max_1=R,max_1}var _assignMergeValue,hasRequired_assignMergeValue;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var _=require_baseAssignValue(),v=requireEq();function S(R,T,A){(A!==void 0&&!v(R[T],A)||A===void 0&&!(T in R))&&_(R,T,A)}return _assignMergeValue=S,_assignMergeValue}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var _=require_baseGetTag(),v=require_getPrototype(),S=requireIsObjectLike(),R="[object Object]",T=Function.prototype,A=Object.prototype,k=T.toString,M=A.hasOwnProperty,N=k.call(Object);function D(I){if(!S(I)||_(I)!=R)return!1;var q=v(I);if(q===null)return!0;var B=M.call(q,"constructor")&&q.constructor;return typeof B=="function"&&B instanceof B&&k.call(B)==N}return isPlainObject_1=D,isPlainObject_1}var _safeGet,hasRequired_safeGet;function require_safeGet(){if(hasRequired_safeGet)return _safeGet;hasRequired_safeGet=1;function _(v,S){if(!(S==="constructor"&&typeof v[S]=="function")&&S!="__proto__")return v[S]}return _safeGet=_,_safeGet}var toPlainObject_1,hasRequiredToPlainObject;function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var _=require_copyObject(),v=requireKeysIn();function S(R){return _(R,v(R))}return toPlainObject_1=S,toPlainObject_1}var _baseMergeDeep,hasRequired_baseMergeDeep;function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var _=require_assignMergeValue(),v=require_cloneBuffer(),S=require_cloneTypedArray(),R=require_copyArray(),T=require_initCloneObject(),A=requireIsArguments(),k=requireIsArray(),M=requireIsArrayLikeObject(),N=requireIsBuffer(),D=requireIsFunction(),I=requireIsObject(),q=requireIsPlainObject(),B=requireIsTypedArray(),z=require_safeGet(),F=requireToPlainObject();function V(H,W,Y,Z,J,ne,oe){var te=z(H,Y),se=z(W,Y),le=oe.get(se);if(le){_(H,Y,le);return}var ue=ne?ne(te,se,Y+"",H,W,oe):void 0,ce=ue===void 0;if(ce){var ge=k(se),me=!ge&&N(se),Ee=!ge&&!me&&B(se);ue=se,ge||me||Ee?k(te)?ue=te:M(te)?ue=R(te):me?(ce=!1,ue=v(se,!0)):Ee?(ce=!1,ue=S(se,!0)):ue=[]:q(se)||A(se)?(ue=te,A(te)?ue=F(te):(!I(te)||D(te))&&(ue=T(se))):ce=!1}ce&&(oe.set(se,ue),J(ue,se,Z,ne,oe),oe.delete(se)),_(H,Y,ue)}return _baseMergeDeep=V,_baseMergeDeep}var _baseMerge,hasRequired_baseMerge;function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var _=require_Stack(),v=require_assignMergeValue(),S=require_baseFor(),R=require_baseMergeDeep(),T=requireIsObject(),A=requireKeysIn(),k=require_safeGet();function M(N,D,I,q,B){N!==D&&S(D,function(z,F){if(B||(B=new _),T(z))R(N,D,F,I,M,q,B);else{var V=q?q(k(N,F),z,F+"",N,D,B):void 0;V===void 0&&(V=z),v(N,F,V)}},A)}return _baseMerge=M,_baseMerge}var _createAssigner,hasRequired_createAssigner;function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var _=require_baseRest(),v=require_isIterateeCall();function S(R){return _(function(T,A){var k=-1,M=A.length,N=M>1?A[M-1]:void 0,D=M>2?A[2]:void 0;for(N=R.length>3&&typeof N=="function"?(M--,N):void 0,D&&v(A[0],A[1],D)&&(N=M<3?void 0:N,M=1),T=Object(T);++k<M;){var I=A[k];I&&R(T,I,k,N)}return T})}return _createAssigner=S,_createAssigner}var merge_1,hasRequiredMerge;function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var _=require_baseMerge(),v=require_createAssigner(),S=v(function(R,T,A){_(R,T,A)});return merge_1=S,merge_1}var _baseLt,hasRequired_baseLt;function require_baseLt(){if(hasRequired_baseLt)return _baseLt;hasRequired_baseLt=1;function _(v,S){return v<S}return _baseLt=_,_baseLt}var min_1,hasRequiredMin;function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var _=require_baseExtremum(),v=require_baseLt(),S=requireIdentity();function R(T){return T&&T.length?_(T,S,v):void 0}return min_1=R,min_1}var minBy_1,hasRequiredMinBy;function requireMinBy(){if(hasRequiredMinBy)return minBy_1;hasRequiredMinBy=1;var _=require_baseExtremum(),v=require_baseIteratee(),S=require_baseLt();function R(T,A){return T&&T.length?_(T,v(A,2),S):void 0}return minBy_1=R,minBy_1}var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var _=require_root(),v=function(){return _.Date.now()};return now_1=v,now_1}var _baseSet,hasRequired_baseSet;function require_baseSet(){if(hasRequired_baseSet)return _baseSet;hasRequired_baseSet=1;var _=require_assignValue(),v=require_castPath(),S=require_isIndex(),R=requireIsObject(),T=require_toKey();function A(k,M,N,D){if(!R(k))return k;M=v(M,k);for(var I=-1,q=M.length,B=q-1,z=k;z!=null&&++I<q;){var F=T(M[I]),V=N;if(F==="__proto__"||F==="constructor"||F==="prototype")return k;if(I!=B){var H=z[F];V=D?D(H,F,z):void 0,V===void 0&&(V=R(H)?H:S(M[I+1])?[]:{})}_(z,F,V),z=z[F]}return k}return _baseSet=A,_baseSet}var _basePickBy,hasRequired_basePickBy;function require_basePickBy(){if(hasRequired_basePickBy)return _basePickBy;hasRequired_basePickBy=1;var _=require_baseGet(),v=require_baseSet(),S=require_castPath();function R(T,A,k){for(var M=-1,N=A.length,D={};++M<N;){var I=A[M],q=_(T,I);k(q,I)&&v(D,S(I,T),q)}return D}return _basePickBy=R,_basePickBy}var _basePick,hasRequired_basePick;function require_basePick(){if(hasRequired_basePick)return _basePick;hasRequired_basePick=1;var _=require_basePickBy(),v=requireHasIn();function S(R,T){return _(R,T,function(A,k){return v(R,k)})}return _basePick=S,_basePick}var _flatRest,hasRequired_flatRest;function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var _=requireFlatten(),v=require_overRest(),S=require_setToString();function R(T){return S(v(T,void 0,_),T+"")}return _flatRest=R,_flatRest}var pick_1,hasRequiredPick;function requirePick(){if(hasRequiredPick)return pick_1;hasRequiredPick=1;var _=require_basePick(),v=require_flatRest(),S=v(function(R,T){return R==null?{}:_(R,T)});return pick_1=S,pick_1}var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var _=Math.ceil,v=Math.max;function S(R,T,A,k){for(var M=-1,N=v(_((T-R)/(A||1)),0),D=Array(N);N--;)D[k?N:++M]=R,R+=A;return D}return _baseRange=S,_baseRange}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var _=require_baseRange(),v=require_isIterateeCall(),S=requireToFinite();function R(T){return function(A,k,M){return M&&typeof M!="number"&&v(A,k,M)&&(k=M=void 0),A=S(A),k===void 0?(k=A,A=0):k=S(k),M=M===void 0?A<k?1:-1:S(M),_(A,k,M,T)}}return _createRange=R,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var _=require_createRange(),v=_();return range_1=v,range_1}var _baseSortBy,hasRequired_baseSortBy;function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;hasRequired_baseSortBy=1;function _(v,S){var R=v.length;for(v.sort(S);R--;)v[R]=v[R].value;return v}return _baseSortBy=_,_baseSortBy}var _compareAscending,hasRequired_compareAscending;function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var _=requireIsSymbol();function v(S,R){if(S!==R){var T=S!==void 0,A=S===null,k=S===S,M=_(S),N=R!==void 0,D=R===null,I=R===R,q=_(R);if(!D&&!q&&!M&&S>R||M&&N&&I&&!D&&!q||A&&N&&I||!T&&I||!k)return 1;if(!A&&!M&&!q&&S<R||q&&T&&k&&!A&&!M||D&&T&&k||!N&&k||!I)return-1}return 0}return _compareAscending=v,_compareAscending}var _compareMultiple,hasRequired_compareMultiple;function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var _=require_compareAscending();function v(S,R,T){for(var A=-1,k=S.criteria,M=R.criteria,N=k.length,D=T.length;++A<N;){var I=_(k[A],M[A]);if(I){if(A>=D)return I;var q=T[A];return I*(q=="desc"?-1:1)}}return S.index-R.index}return _compareMultiple=v,_compareMultiple}var _baseOrderBy,hasRequired_baseOrderBy;function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var _=require_arrayMap(),v=require_baseGet(),S=require_baseIteratee(),R=require_baseMap(),T=require_baseSortBy(),A=require_baseUnary(),k=require_compareMultiple(),M=requireIdentity(),N=requireIsArray();function D(I,q,B){q.length?q=_(q,function(V){return N(V)?function(H){return v(H,V.length===1?V[0]:V)}:V}):q=[M];var z=-1;q=_(q,A(S));var F=R(I,function(V,H,W){var Y=_(q,function(Z){return Z(V)});return{criteria:Y,index:++z,value:V}});return T(F,function(V,H){return k(V,H,B)})}return _baseOrderBy=D,_baseOrderBy}var sortBy_1,hasRequiredSortBy;function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var _=require_baseFlatten(),v=require_baseOrderBy(),S=require_baseRest(),R=require_isIterateeCall(),T=S(function(A,k){if(A==null)return[];var M=k.length;return M>1&&R(A,k[0],k[1])?k=[]:M>2&&R(k[0],k[1],k[2])&&(k=[k[0]]),v(A,_(k,1),[])});return sortBy_1=T,sortBy_1}var uniqueId_1,hasRequiredUniqueId;function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var _=requireToString(),v=0;function S(R){var T=++v;return _(R)+T}return uniqueId_1=S,uniqueId_1}var _baseZipObject,hasRequired_baseZipObject;function require_baseZipObject(){if(hasRequired_baseZipObject)return _baseZipObject;hasRequired_baseZipObject=1;function _(v,S,R){for(var T=-1,A=v.length,k=S.length,M={};++T<A;){var N=T<k?S[T]:void 0;R(M,v[T],N)}return M}return _baseZipObject=_,_baseZipObject}var zipObject_1,hasRequiredZipObject;function requireZipObject(){if(hasRequiredZipObject)return zipObject_1;hasRequiredZipObject=1;var _=require_assignValue(),v=require_baseZipObject();function S(R,T){return v(R||[],T||[],_)}return zipObject_1=S,zipObject_1}var lodash_1,hasRequiredLodash;function requireLodash(){if(hasRequiredLodash)return lodash_1;hasRequiredLodash=1;var _;if(typeof commonjsRequire=="function")try{_={cloneDeep:requireCloneDeep(),constant:requireConstant(),defaults:requireDefaults(),each:requireEach(),filter:requireFilter(),find:requireFind(),flatten:requireFlatten(),forEach:requireForEach(),forIn:requireForIn(),has:requireHas(),isUndefined:requireIsUndefined(),last:requireLast(),map:requireMap(),mapValues:requireMapValues(),max:requireMax(),merge:requireMerge(),min:requireMin(),minBy:requireMinBy(),now:requireNow(),pick:requirePick(),range:requireRange(),reduce:requireReduce(),sortBy:requireSortBy(),uniqueId:requireUniqueId(),values:requireValues(),zipObject:requireZipObject()}}catch{}return _||(_=window._),lodash_1=_,lodash_1}var list,hasRequiredList;function requireList(){if(hasRequiredList)return list;hasRequiredList=1,list=_;function _(){var R={};R._next=R._prev=R,this._sentinel=R}_.prototype.dequeue=function(){var R=this._sentinel,T=R._prev;if(T!==R)return v(T),T},_.prototype.enqueue=function(R){var T=this._sentinel;R._prev&&R._next&&v(R),R._next=T._next,T._next._prev=R,T._next=R,R._prev=T},_.prototype.toString=function(){for(var R=[],T=this._sentinel,A=T._prev;A!==T;)R.push(JSON.stringify(A,S)),A=A._prev;return"["+R.join(", ")+"]"};function v(R){R._prev._next=R._next,R._next._prev=R._prev,delete R._next,delete R._prev}function S(R,T){if(R!=="_next"&&R!=="_prev")return T}return list}var greedyFas,hasRequiredGreedyFas;function requireGreedyFas(){if(hasRequiredGreedyFas)return greedyFas;hasRequiredGreedyFas=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireList();greedyFas=T;var R=_.constant(1);function T(D,I){if(D.nodeCount()<=1)return[];var q=M(D,I||R),B=A(q.graph,q.buckets,q.zeroIdx);return _.flatten(_.map(B,function(z){return D.outEdges(z.v,z.w)}),!0)}function A(D,I,q){for(var B=[],z=I[I.length-1],F=I[0],V;D.nodeCount();){for(;V=F.dequeue();)k(D,I,q,V);for(;V=z.dequeue();)k(D,I,q,V);if(D.nodeCount()){for(var H=I.length-2;H>0;--H)if(V=I[H].dequeue(),V){B=B.concat(k(D,I,q,V,!0));break}}}return B}function k(D,I,q,B,z){var F=z?[]:void 0;return _.forEach(D.inEdges(B.v),function(V){var H=D.edge(V),W=D.node(V.v);z&&F.push({v:V.v,w:V.w}),W.out-=H,N(I,q,W)}),_.forEach(D.outEdges(B.v),function(V){var H=D.edge(V),W=V.w,Y=D.node(W);Y.in-=H,N(I,q,Y)}),D.removeNode(B.v),F}function M(D,I){var q=new v,B=0,z=0;_.forEach(D.nodes(),function(H){q.setNode(H,{v:H,in:0,out:0})}),_.forEach(D.edges(),function(H){var W=q.edge(H.v,H.w)||0,Y=I(H),Z=W+Y;q.setEdge(H.v,H.w,Z),z=Math.max(z,q.node(H.v).out+=Y),B=Math.max(B,q.node(H.w).in+=Y)});var F=_.range(z+B+3).map(function(){return new S}),V=B+1;return _.forEach(q.nodes(),function(H){N(F,V,q.node(H))}),{graph:q,buckets:F,zeroIdx:V}}function N(D,I,q){q.out?q.in?D[q.out-q.in+I].enqueue(q):D[D.length-1].enqueue(q):D[0].enqueue(q)}return greedyFas}var acyclic,hasRequiredAcyclic;function requireAcyclic(){if(hasRequiredAcyclic)return acyclic;hasRequiredAcyclic=1;var _=requireLodash(),v=requireGreedyFas();acyclic={run:S,undo:T};function S(A){var k=A.graph().acyclicer==="greedy"?v(A,M(A)):R(A);_.forEach(k,function(N){var D=A.edge(N);A.removeEdge(N),D.forwardName=N.name,D.reversed=!0,A.setEdge(N.w,N.v,D,_.uniqueId("rev"))});function M(N){return function(D){return N.edge(D).weight}}}function R(A){var k=[],M={},N={};function D(I){_.has(N,I)||(N[I]=!0,M[I]=!0,_.forEach(A.outEdges(I),function(q){_.has(M,q.w)?k.push(q):D(q.w)}),delete M[I])}return _.forEach(A.nodes(),D),k}function T(A){_.forEach(A.edges(),function(k){var M=A.edge(k);if(M.reversed){A.removeEdge(k);var N=M.forwardName;delete M.reversed,delete M.forwardName,A.setEdge(k.w,k.v,M,N)}})}return acyclic}var util$1,hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;var _=requireLodash(),v=requireGraphlib().Graph;util$1={addDummyNode:S,simplify:R,asNonCompoundGraph:T,successorWeights:A,predecessorWeights:k,intersectRect:M,buildLayerMatrix:N,normalizeRanks:D,removeEmptyRanks:I,addBorderNode:q,maxRank:B,partition:z,time:F,notime:V};function S(H,W,Y,Z){var J;do J=_.uniqueId(Z);while(H.hasNode(J));return Y.dummy=W,H.setNode(J,Y),J}function R(H){var W=new v().setGraph(H.graph());return _.forEach(H.nodes(),function(Y){W.setNode(Y,H.node(Y))}),_.forEach(H.edges(),function(Y){var Z=W.edge(Y.v,Y.w)||{weight:0,minlen:1},J=H.edge(Y);W.setEdge(Y.v,Y.w,{weight:Z.weight+J.weight,minlen:Math.max(Z.minlen,J.minlen)})}),W}function T(H){var W=new v({multigraph:H.isMultigraph()}).setGraph(H.graph());return _.forEach(H.nodes(),function(Y){H.children(Y).length||W.setNode(Y,H.node(Y))}),_.forEach(H.edges(),function(Y){W.setEdge(Y,H.edge(Y))}),W}function A(H){var W=_.map(H.nodes(),function(Y){var Z={};return _.forEach(H.outEdges(Y),function(J){Z[J.w]=(Z[J.w]||0)+H.edge(J).weight}),Z});return _.zipObject(H.nodes(),W)}function k(H){var W=_.map(H.nodes(),function(Y){var Z={};return _.forEach(H.inEdges(Y),function(J){Z[J.v]=(Z[J.v]||0)+H.edge(J).weight}),Z});return _.zipObject(H.nodes(),W)}function M(H,W){var Y=H.x,Z=H.y,J=W.x-Y,ne=W.y-Z,oe=H.width/2,te=H.height/2;if(!J&&!ne)throw new Error("Not possible to find intersection inside of the rectangle");var se,le;return Math.abs(ne)*oe>Math.abs(J)*te?(ne<0&&(te=-te),se=te*J/ne,le=te):(J<0&&(oe=-oe),se=oe,le=oe*ne/J),{x:Y+se,y:Z+le}}function N(H){var W=_.map(_.range(B(H)+1),function(){return[]});return _.forEach(H.nodes(),function(Y){var Z=H.node(Y),J=Z.rank;_.isUndefined(J)||(W[J][Z.order]=Y)}),W}function D(H){var W=_.min(_.map(H.nodes(),function(Y){return H.node(Y).rank}));_.forEach(H.nodes(),function(Y){var Z=H.node(Y);_.has(Z,"rank")&&(Z.rank-=W)})}function I(H){var W=_.min(_.map(H.nodes(),function(ne){return H.node(ne).rank})),Y=[];_.forEach(H.nodes(),function(ne){var oe=H.node(ne).rank-W;Y[oe]||(Y[oe]=[]),Y[oe].push(ne)});var Z=0,J=H.graph().nodeRankFactor;_.forEach(Y,function(ne,oe){_.isUndefined(ne)&&oe%J!==0?--Z:Z&&_.forEach(ne,function(te){H.node(te).rank+=Z})})}function q(H,W,Y,Z){var J={width:0,height:0};return arguments.length>=4&&(J.rank=Y,J.order=Z),S(H,"border",J,W)}function B(H){return _.max(_.map(H.nodes(),function(W){var Y=H.node(W).rank;if(!_.isUndefined(Y))return Y}))}function z(H,W){var Y={lhs:[],rhs:[]};return _.forEach(H,function(Z){W(Z)?Y.lhs.push(Z):Y.rhs.push(Z)}),Y}function F(H,W){var Y=_.now();try{return W()}finally{console.log(H+" time: "+(_.now()-Y)+"ms")}}function V(H,W){return W()}return util$1}var normalize$1,hasRequiredNormalize;function requireNormalize(){if(hasRequiredNormalize)return normalize$1;hasRequiredNormalize=1;var _=requireLodash(),v=requireUtil$1();normalize$1={run:S,undo:T};function S(A){A.graph().dummyChains=[],_.forEach(A.edges(),function(k){R(A,k)})}function R(A,k){var M=k.v,N=A.node(M).rank,D=k.w,I=A.node(D).rank,q=k.name,B=A.edge(k),z=B.labelRank;if(I!==N+1){A.removeEdge(k);var F,V,H;for(H=0,++N;N<I;++H,++N)B.points=[],V={width:0,height:0,edgeLabel:B,edgeObj:k,rank:N},F=v.addDummyNode(A,"edge",V,"_d"),N===z&&(V.width=B.width,V.height=B.height,V.dummy="edge-label",V.labelpos=B.labelpos),A.setEdge(M,F,{weight:B.weight},q),H===0&&A.graph().dummyChains.push(F),M=F;A.setEdge(M,D,{weight:B.weight},q)}}function T(A){_.forEach(A.graph().dummyChains,function(k){var M=A.node(k),N=M.edgeLabel,D;for(A.setEdge(M.edgeObj,N);M.dummy;)D=A.successors(k)[0],A.removeNode(k),N.points.push({x:M.x,y:M.y}),M.dummy==="edge-label"&&(N.x=M.x,N.y=M.y,N.width=M.width,N.height=M.height),k=D,M=A.node(k)})}return normalize$1}var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var _=requireLodash();util={longestPath:v,slack:S};function v(R){var T={};function A(k){var M=R.node(k);if(_.has(T,k))return M.rank;T[k]=!0;var N=_.min(_.map(R.outEdges(k),function(D){return A(D.w)-R.edge(D).minlen}));return(N===Number.POSITIVE_INFINITY||N===void 0||N===null)&&(N=0),M.rank=N}_.forEach(R.sources(),A)}function S(R,T){return R.node(T.w).rank-R.node(T.v).rank-R.edge(T).minlen}return util}var feasibleTree_1,hasRequiredFeasibleTree;function requireFeasibleTree(){if(hasRequiredFeasibleTree)return feasibleTree_1;hasRequiredFeasibleTree=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireUtil().slack;feasibleTree_1=R;function R(M){var N=new v({directed:!1}),D=M.nodes()[0],I=M.nodeCount();N.setNode(D,{});for(var q,B;T(N,M)<I;)q=A(N,M),B=N.hasNode(q.v)?S(M,q):-S(M,q),k(N,M,B);return N}function T(M,N){function D(I){_.forEach(N.nodeEdges(I),function(q){var B=q.v,z=I===B?q.w:B;!M.hasNode(z)&&!S(N,q)&&(M.setNode(z,{}),M.setEdge(I,z,{}),D(z))})}return _.forEach(M.nodes(),D),M.nodeCount()}function A(M,N){return _.minBy(N.edges(),function(D){if(M.hasNode(D.v)!==M.hasNode(D.w))return S(N,D)})}function k(M,N,D){_.forEach(M.nodes(),function(I){N.node(I).rank+=D})}return feasibleTree_1}var networkSimplex_1,hasRequiredNetworkSimplex;function requireNetworkSimplex(){if(hasRequiredNetworkSimplex)return networkSimplex_1;hasRequiredNetworkSimplex=1;var _=requireLodash(),v=requireFeasibleTree(),S=requireUtil().slack,R=requireUtil().longestPath,T=requireGraphlib().alg.preorder,A=requireGraphlib().alg.postorder,k=requireUtil$1().simplify;networkSimplex_1=M,M.initLowLimValues=q,M.initCutValues=N,M.calcCutValue=I,M.leaveEdge=z,M.enterEdge=F,M.exchangeEdges=V;function M(Z){Z=k(Z),R(Z);var J=v(Z);q(J),N(J,Z);for(var ne,oe;ne=z(J);)oe=F(J,Z,ne),V(J,Z,ne,oe)}function N(Z,J){var ne=A(Z,Z.nodes());ne=ne.slice(0,ne.length-1),_.forEach(ne,function(oe){D(Z,J,oe)})}function D(Z,J,ne){var oe=Z.node(ne),te=oe.parent;Z.edge(ne,te).cutvalue=I(Z,J,ne)}function I(Z,J,ne){var oe=Z.node(ne),te=oe.parent,se=!0,le=J.edge(ne,te),ue=0;return le||(se=!1,le=J.edge(te,ne)),ue=le.weight,_.forEach(J.nodeEdges(ne),function(ce){var ge=ce.v===ne,me=ge?ce.w:ce.v;if(me!==te){var Ee=ge===se,_e=J.edge(ce).weight;if(ue+=Ee?_e:-_e,W(Z,ne,me)){var ye=Z.edge(ne,me).cutvalue;ue+=Ee?-ye:ye}}}),ue}function q(Z,J){arguments.length<2&&(J=Z.nodes()[0]),B(Z,{},1,J)}function B(Z,J,ne,oe,te){var se=ne,le=Z.node(oe);return J[oe]=!0,_.forEach(Z.neighbors(oe),function(ue){_.has(J,ue)||(ne=B(Z,J,ne,ue,oe))}),le.low=se,le.lim=ne++,te?le.parent=te:delete le.parent,ne}function z(Z){return _.find(Z.edges(),function(J){return Z.edge(J).cutvalue<0})}function F(Z,J,ne){var oe=ne.v,te=ne.w;J.hasEdge(oe,te)||(oe=ne.w,te=ne.v);var se=Z.node(oe),le=Z.node(te),ue=se,ce=!1;se.lim>le.lim&&(ue=le,ce=!0);var ge=_.filter(J.edges(),function(me){return ce===Y(Z,Z.node(me.v),ue)&&ce!==Y(Z,Z.node(me.w),ue)});return _.minBy(ge,function(me){return S(J,me)})}function V(Z,J,ne,oe){var te=ne.v,se=ne.w;Z.removeEdge(te,se),Z.setEdge(oe.v,oe.w,{}),q(Z),N(Z,J),H(Z,J)}function H(Z,J){var ne=_.find(Z.nodes(),function(te){return!J.node(te).parent}),oe=T(Z,ne);oe=oe.slice(1),_.forEach(oe,function(te){var se=Z.node(te).parent,le=J.edge(te,se),ue=!1;le||(le=J.edge(se,te),ue=!0),J.node(te).rank=J.node(se).rank+(ue?le.minlen:-le.minlen)})}function W(Z,J,ne){return Z.hasEdge(J,ne)}function Y(Z,J,ne){return ne.low<=J.lim&&J.lim<=ne.lim}return networkSimplex_1}var rank_1,hasRequiredRank;function requireRank(){if(hasRequiredRank)return rank_1;hasRequiredRank=1;var _=requireUtil(),v=_.longestPath,S=requireFeasibleTree(),R=requireNetworkSimplex();rank_1=T;function T(N){switch(N.graph().ranker){case"network-simplex":M(N);break;case"tight-tree":k(N);break;case"longest-path":A(N);break;default:M(N)}}var A=v;function k(N){v(N),S(N)}function M(N){R(N)}return rank_1}var parentDummyChains_1,hasRequiredParentDummyChains;function requireParentDummyChains(){if(hasRequiredParentDummyChains)return parentDummyChains_1;hasRequiredParentDummyChains=1;var _=requireLodash();parentDummyChains_1=v;function v(T){var A=R(T);_.forEach(T.graph().dummyChains,function(k){for(var M=T.node(k),N=M.edgeObj,D=S(T,A,N.v,N.w),I=D.path,q=D.lca,B=0,z=I[B],F=!0;k!==N.w;){if(M=T.node(k),F){for(;(z=I[B])!==q&&T.node(z).maxRank<M.rank;)B++;z===q&&(F=!1)}if(!F){for(;B<I.length-1&&T.node(z=I[B+1]).minRank<=M.rank;)B++;z=I[B]}T.setParent(k,z),k=T.successors(k)[0]}})}function S(T,A,k,M){var N=[],D=[],I=Math.min(A[k].low,A[M].low),q=Math.max(A[k].lim,A[M].lim),B,z;B=k;do B=T.parent(B),N.push(B);while(B&&(A[B].low>I||q>A[B].lim));for(z=B,B=M;(B=T.parent(B))!==z;)D.push(B);return{path:N.concat(D.reverse()),lca:z}}function R(T){var A={},k=0;function M(N){var D=k;_.forEach(T.children(N),M),A[N]={low:D,lim:k++}}return _.forEach(T.children(),M),A}return parentDummyChains_1}var nestingGraph,hasRequiredNestingGraph;function requireNestingGraph(){if(hasRequiredNestingGraph)return nestingGraph;hasRequiredNestingGraph=1;var _=requireLodash(),v=requireUtil$1();nestingGraph={run:S,cleanup:k};function S(M){var N=v.addDummyNode(M,"root",{},"_root"),D=T(M),I=_.max(_.values(D))-1,q=2*I+1;M.graph().nestingRoot=N,_.forEach(M.edges(),function(z){M.edge(z).minlen*=q});var B=A(M)+1;_.forEach(M.children(),function(z){R(M,N,q,B,I,D,z)}),M.graph().nodeRankFactor=q}function R(M,N,D,I,q,B,z){var F=M.children(z);if(!F.length){z!==N&&M.setEdge(N,z,{weight:0,minlen:D});return}var V=v.addBorderNode(M,"_bt"),H=v.addBorderNode(M,"_bb"),W=M.node(z);M.setParent(V,z),W.borderTop=V,M.setParent(H,z),W.borderBottom=H,_.forEach(F,function(Y){R(M,N,D,I,q,B,Y);var Z=M.node(Y),J=Z.borderTop?Z.borderTop:Y,ne=Z.borderBottom?Z.borderBottom:Y,oe=Z.borderTop?I:2*I,te=J!==ne?1:q-B[z]+1;M.setEdge(V,J,{weight:oe,minlen:te,nestingEdge:!0}),M.setEdge(ne,H,{weight:oe,minlen:te,nestingEdge:!0})}),M.parent(z)||M.setEdge(N,V,{weight:0,minlen:q+B[z]})}function T(M){var N={};function D(I,q){var B=M.children(I);B&&B.length&&_.forEach(B,function(z){D(z,q+1)}),N[I]=q}return _.forEach(M.children(),function(I){D(I,1)}),N}function A(M){return _.reduce(M.edges(),function(N,D){return N+M.edge(D).weight},0)}function k(M){var N=M.graph();M.removeNode(N.nestingRoot),delete N.nestingRoot,_.forEach(M.edges(),function(D){var I=M.edge(D);I.nestingEdge&&M.removeEdge(D)})}return nestingGraph}var addBorderSegments_1,hasRequiredAddBorderSegments;function requireAddBorderSegments(){if(hasRequiredAddBorderSegments)return addBorderSegments_1;hasRequiredAddBorderSegments=1;var _=requireLodash(),v=requireUtil$1();addBorderSegments_1=S;function S(T){function A(k){var M=T.children(k),N=T.node(k);if(M.length&&_.forEach(M,A),_.has(N,"minRank")){N.borderLeft=[],N.borderRight=[];for(var D=N.minRank,I=N.maxRank+1;D<I;++D)R(T,"borderLeft","_bl",k,N,D),R(T,"borderRight","_br",k,N,D)}}_.forEach(T.children(),A)}function R(T,A,k,M,N,D){var I={width:0,height:0,rank:D,borderType:A},q=N[A][D-1],B=v.addDummyNode(T,"border",I,k);N[A][D]=B,T.setParent(B,M),q&&T.setEdge(q,B,{weight:1})}return addBorderSegments_1}var coordinateSystem,hasRequiredCoordinateSystem;function requireCoordinateSystem(){if(hasRequiredCoordinateSystem)return coordinateSystem;hasRequiredCoordinateSystem=1;var _=requireLodash();coordinateSystem={adjust:v,undo:S};function v(D){var I=D.graph().rankdir.toLowerCase();(I==="lr"||I==="rl")&&R(D)}function S(D){var I=D.graph().rankdir.toLowerCase();(I==="bt"||I==="rl")&&A(D),(I==="lr"||I==="rl")&&(M(D),R(D))}function R(D){_.forEach(D.nodes(),function(I){T(D.node(I))}),_.forEach(D.edges(),function(I){T(D.edge(I))})}function T(D){var I=D.width;D.width=D.height,D.height=I}function A(D){_.forEach(D.nodes(),function(I){k(D.node(I))}),_.forEach(D.edges(),function(I){var q=D.edge(I);_.forEach(q.points,k),_.has(q,"y")&&k(q)})}function k(D){D.y=-D.y}function M(D){_.forEach(D.nodes(),function(I){N(D.node(I))}),_.forEach(D.edges(),function(I){var q=D.edge(I);_.forEach(q.points,N),_.has(q,"x")&&N(q)})}function N(D){var I=D.x;D.x=D.y,D.y=I}return coordinateSystem}var initOrder_1,hasRequiredInitOrder;function requireInitOrder(){if(hasRequiredInitOrder)return initOrder_1;hasRequiredInitOrder=1;var _=requireLodash();initOrder_1=v;function v(S){var R={},T=_.filter(S.nodes(),function(D){return!S.children(D).length}),A=_.max(_.map(T,function(D){return S.node(D).rank})),k=_.map(_.range(A+1),function(){return[]});function M(D){if(!_.has(R,D)){R[D]=!0;var I=S.node(D);k[I.rank].push(D),_.forEach(S.successors(D),M)}}var N=_.sortBy(T,function(D){return S.node(D).rank});return _.forEach(N,M),k}return initOrder_1}var crossCount_1,hasRequiredCrossCount;function requireCrossCount(){if(hasRequiredCrossCount)return crossCount_1;hasRequiredCrossCount=1;var _=requireLodash();crossCount_1=v;function v(R,T){for(var A=0,k=1;k<T.length;++k)A+=S(R,T[k-1],T[k]);return A}function S(R,T,A){for(var k=_.zipObject(A,_.map(A,function(B,z){return z})),M=_.flatten(_.map(T,function(B){return _.sortBy(_.map(R.outEdges(B),function(z){return{pos:k[z.w],weight:R.edge(z).weight}}),"pos")}),!0),N=1;N<A.length;)N<<=1;var D=2*N-1;N-=1;var I=_.map(new Array(D),function(){return 0}),q=0;return _.forEach(M.forEach(function(B){var z=B.pos+N;I[z]+=B.weight;for(var F=0;z>0;)z%2&&(F+=I[z+1]),z=z-1>>1,I[z]+=B.weight;q+=B.weight*F})),q}return crossCount_1}var barycenter_1,hasRequiredBarycenter;function requireBarycenter(){if(hasRequiredBarycenter)return barycenter_1;hasRequiredBarycenter=1;var _=requireLodash();barycenter_1=v;function v(S,R){return _.map(R,function(T){var A=S.inEdges(T);if(A.length){var k=_.reduce(A,function(M,N){var D=S.edge(N),I=S.node(N.v);return{sum:M.sum+D.weight*I.order,weight:M.weight+D.weight}},{sum:0,weight:0});return{v:T,barycenter:k.sum/k.weight,weight:k.weight}}else return{v:T}})}return barycenter_1}var resolveConflicts_1,hasRequiredResolveConflicts;function requireResolveConflicts(){if(hasRequiredResolveConflicts)return resolveConflicts_1;hasRequiredResolveConflicts=1;var _=requireLodash();resolveConflicts_1=v;function v(T,A){var k={};_.forEach(T,function(N,D){var I=k[N.v]={indegree:0,in:[],out:[],vs:[N.v],i:D};_.isUndefined(N.barycenter)||(I.barycenter=N.barycenter,I.weight=N.weight)}),_.forEach(A.edges(),function(N){var D=k[N.v],I=k[N.w];!_.isUndefined(D)&&!_.isUndefined(I)&&(I.indegree++,D.out.push(k[N.w]))});var M=_.filter(k,function(N){return!N.indegree});return S(M)}function S(T){var A=[];function k(D){return function(I){I.merged||(_.isUndefined(I.barycenter)||_.isUndefined(D.barycenter)||I.barycenter>=D.barycenter)&&R(D,I)}}function M(D){return function(I){I.in.push(D),--I.indegree===0&&T.push(I)}}for(;T.length;){var N=T.pop();A.push(N),_.forEach(N.in.reverse(),k(N)),_.forEach(N.out,M(N))}return _.map(_.filter(A,function(D){return!D.merged}),function(D){return _.pick(D,["vs","i","barycenter","weight"])})}function R(T,A){var k=0,M=0;T.weight&&(k+=T.barycenter*T.weight,M+=T.weight),A.weight&&(k+=A.barycenter*A.weight,M+=A.weight),T.vs=A.vs.concat(T.vs),T.barycenter=k/M,T.weight=M,T.i=Math.min(A.i,T.i),A.merged=!0}return resolveConflicts_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;var _=requireLodash(),v=requireUtil$1();sort_1=S;function S(A,k){var M=v.partition(A,function(V){return _.has(V,"barycenter")}),N=M.lhs,D=_.sortBy(M.rhs,function(V){return-V.i}),I=[],q=0,B=0,z=0;N.sort(T(!!k)),z=R(I,D,z),_.forEach(N,function(V){z+=V.vs.length,I.push(V.vs),q+=V.barycenter*V.weight,B+=V.weight,z=R(I,D,z)});var F={vs:_.flatten(I,!0)};return B&&(F.barycenter=q/B,F.weight=B),F}function R(A,k,M){for(var N;k.length&&(N=_.last(k)).i<=M;)k.pop(),A.push(N.vs),M++;return M}function T(A){return function(k,M){return k.barycenter<M.barycenter?-1:k.barycenter>M.barycenter?1:A?M.i-k.i:k.i-M.i}}return sort_1}var sortSubgraph_1,hasRequiredSortSubgraph;function requireSortSubgraph(){if(hasRequiredSortSubgraph)return sortSubgraph_1;hasRequiredSortSubgraph=1;var _=requireLodash(),v=requireBarycenter(),S=requireResolveConflicts(),R=requireSort();sortSubgraph_1=T;function T(M,N,D,I){var q=M.children(N),B=M.node(N),z=B?B.borderLeft:void 0,F=B?B.borderRight:void 0,V={};z&&(q=_.filter(q,function(ne){return ne!==z&&ne!==F}));var H=v(M,q);_.forEach(H,function(ne){if(M.children(ne.v).length){var oe=T(M,ne.v,D,I);V[ne.v]=oe,_.has(oe,"barycenter")&&k(ne,oe)}});var W=S(H,D);A(W,V);var Y=R(W,I);if(z&&(Y.vs=_.flatten([z,Y.vs,F],!0),M.predecessors(z).length)){var Z=M.node(M.predecessors(z)[0]),J=M.node(M.predecessors(F)[0]);_.has(Y,"barycenter")||(Y.barycenter=0,Y.weight=0),Y.barycenter=(Y.barycenter*Y.weight+Z.order+J.order)/(Y.weight+2),Y.weight+=2}return Y}function A(M,N){_.forEach(M,function(D){D.vs=_.flatten(D.vs.map(function(I){return N[I]?N[I].vs:I}),!0)})}function k(M,N){_.isUndefined(M.barycenter)?(M.barycenter=N.barycenter,M.weight=N.weight):(M.barycenter=(M.barycenter*M.weight+N.barycenter*N.weight)/(M.weight+N.weight),M.weight+=N.weight)}return sortSubgraph_1}var buildLayerGraph_1,hasRequiredBuildLayerGraph;function requireBuildLayerGraph(){if(hasRequiredBuildLayerGraph)return buildLayerGraph_1;hasRequiredBuildLayerGraph=1;var _=requireLodash(),v=requireGraphlib().Graph;buildLayerGraph_1=S;function S(T,A,k){var M=R(T),N=new v({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(D){return T.node(D)});return _.forEach(T.nodes(),function(D){var I=T.node(D),q=T.parent(D);(I.rank===A||I.minRank<=A&&A<=I.maxRank)&&(N.setNode(D),N.setParent(D,q||M),_.forEach(T[k](D),function(B){var z=B.v===D?B.w:B.v,F=N.edge(z,D),V=_.isUndefined(F)?0:F.weight;N.setEdge(z,D,{weight:T.edge(B).weight+V})}),_.has(I,"minRank")&&N.setNode(D,{borderLeft:I.borderLeft[A],borderRight:I.borderRight[A]}))}),N}function R(T){for(var A;T.hasNode(A=_.uniqueId("_root")););return A}return buildLayerGraph_1}var addSubgraphConstraints_1,hasRequiredAddSubgraphConstraints;function requireAddSubgraphConstraints(){if(hasRequiredAddSubgraphConstraints)return addSubgraphConstraints_1;hasRequiredAddSubgraphConstraints=1;var _=requireLodash();addSubgraphConstraints_1=v;function v(S,R,T){var A={},k;_.forEach(T,function(M){for(var N=S.parent(M),D,I;N;){if(D=S.parent(N),D?(I=A[D],A[D]=N):(I=k,k=N),I&&I!==N){R.setEdge(I,N);return}N=D}})}return addSubgraphConstraints_1}var order_1,hasRequiredOrder;function requireOrder(){if(hasRequiredOrder)return order_1;hasRequiredOrder=1;var _=requireLodash(),v=requireInitOrder(),S=requireCrossCount(),R=requireSortSubgraph(),T=requireBuildLayerGraph(),A=requireAddSubgraphConstraints(),k=requireGraphlib().Graph,M=requireUtil$1();order_1=N;function N(B){var z=M.maxRank(B),F=D(B,_.range(1,z+1),"inEdges"),V=D(B,_.range(z-1,-1,-1),"outEdges"),H=v(B);q(B,H);for(var W=Number.POSITIVE_INFINITY,Y,Z=0,J=0;J<4;++Z,++J){I(Z%2?F:V,Z%4>=2),H=M.buildLayerMatrix(B);var ne=S(B,H);ne<W&&(J=0,Y=_.cloneDeep(H),W=ne)}q(B,Y)}function D(B,z,F){return _.map(z,function(V){return T(B,V,F)})}function I(B,z){var F=new k;_.forEach(B,function(V){var H=V.graph().root,W=R(V,H,F,z);_.forEach(W.vs,function(Y,Z){V.node(Y).order=Z}),A(V,F,W.vs)})}function q(B,z){_.forEach(z,function(F){_.forEach(F,function(V,H){B.node(V).order=H})})}return order_1}var bk,hasRequiredBk;function requireBk(){if(hasRequiredBk)return bk;hasRequiredBk=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireUtil$1();bk={positionX:F,findType1Conflicts:R,findType2Conflicts:T,addConflict:k,hasConflict:M,verticalAlignment:N,horizontalCompaction:D,alignCoordinates:B,findSmallestWidthAlignment:q,balance:z};function R(W,Y){var Z={};function J(ne,oe){var te=0,se=0,le=ne.length,ue=_.last(oe);return _.forEach(oe,function(ce,ge){var me=A(W,ce),Ee=me?W.node(me).order:le;(me||ce===ue)&&(_.forEach(oe.slice(se,ge+1),function(_e){_.forEach(W.predecessors(_e),function(ye){var be=W.node(ye),Se=be.order;(Se<te||Ee<Se)&&!(be.dummy&&W.node(_e).dummy)&&k(Z,ye,_e)})}),se=ge+1,te=Ee)}),oe}return _.reduce(Y,J),Z}function T(W,Y){var Z={};function J(oe,te,se,le,ue){var ce;_.forEach(_.range(te,se),function(ge){ce=oe[ge],W.node(ce).dummy&&_.forEach(W.predecessors(ce),function(me){var Ee=W.node(me);Ee.dummy&&(Ee.order<le||Ee.order>ue)&&k(Z,me,ce)})})}function ne(oe,te){var se=-1,le,ue=0;return _.forEach(te,function(ce,ge){if(W.node(ce).dummy==="border"){var me=W.predecessors(ce);me.length&&(le=W.node(me[0]).order,J(te,ue,ge,se,le),ue=ge,se=le)}J(te,ue,te.length,le,oe.length)}),te}return _.reduce(Y,ne),Z}function A(W,Y){if(W.node(Y).dummy)return _.find(W.predecessors(Y),function(Z){return W.node(Z).dummy})}function k(W,Y,Z){if(Y>Z){var J=Y;Y=Z,Z=J}var ne=W[Y];ne||(W[Y]=ne={}),ne[Z]=!0}function M(W,Y,Z){if(Y>Z){var J=Y;Y=Z,Z=J}return _.has(W[Y],Z)}function N(W,Y,Z,J){var ne={},oe={},te={};return _.forEach(Y,function(se){_.forEach(se,function(le,ue){ne[le]=le,oe[le]=le,te[le]=ue})}),_.forEach(Y,function(se){var le=-1;_.forEach(se,function(ue){var ce=J(ue);if(ce.length){ce=_.sortBy(ce,function(ye){return te[ye]});for(var ge=(ce.length-1)/2,me=Math.floor(ge),Ee=Math.ceil(ge);me<=Ee;++me){var _e=ce[me];oe[ue]===ue&&le<te[_e]&&!M(Z,ue,_e)&&(oe[_e]=ue,oe[ue]=ne[ue]=ne[_e],le=te[_e])}}})}),{root:ne,align:oe}}function D(W,Y,Z,J,ne){var oe={},te=I(W,Y,Z,ne),se=ne?"borderLeft":"borderRight";function le(ge,me){for(var Ee=te.nodes(),_e=Ee.pop(),ye={};_e;)ye[_e]?ge(_e):(ye[_e]=!0,Ee.push(_e),Ee=Ee.concat(me(_e))),_e=Ee.pop()}function ue(ge){oe[ge]=te.inEdges(ge).reduce(function(me,Ee){return Math.max(me,oe[Ee.v]+te.edge(Ee))},0)}function ce(ge){var me=te.outEdges(ge).reduce(function(_e,ye){return Math.min(_e,oe[ye.w]-te.edge(ye))},Number.POSITIVE_INFINITY),Ee=W.node(ge);me!==Number.POSITIVE_INFINITY&&Ee.borderType!==se&&(oe[ge]=Math.max(oe[ge],me))}return le(ue,te.predecessors.bind(te)),le(ce,te.successors.bind(te)),_.forEach(J,function(ge){oe[ge]=oe[Z[ge]]}),oe}function I(W,Y,Z,J){var ne=new v,oe=W.graph(),te=V(oe.nodesep,oe.edgesep,J);return _.forEach(Y,function(se){var le;_.forEach(se,function(ue){var ce=Z[ue];if(ne.setNode(ce),le){var ge=Z[le],me=ne.edge(ge,ce);ne.setEdge(ge,ce,Math.max(te(W,ue,le),me||0))}le=ue})}),ne}function q(W,Y){return _.minBy(_.values(Y),function(Z){var J=Number.NEGATIVE_INFINITY,ne=Number.POSITIVE_INFINITY;return _.forIn(Z,function(oe,te){var se=H(W,te)/2;J=Math.max(oe+se,J),ne=Math.min(oe-se,ne)}),J-ne})}function B(W,Y){var Z=_.values(Y),J=_.min(Z),ne=_.max(Z);_.forEach(["u","d"],function(oe){_.forEach(["l","r"],function(te){var se=oe+te,le=W[se],ue;if(le!==Y){var ce=_.values(le);ue=te==="l"?J-_.min(ce):ne-_.max(ce),ue&&(W[se]=_.mapValues(le,function(ge){return ge+ue}))}})})}function z(W,Y){return _.mapValues(W.ul,function(Z,J){if(Y)return W[Y.toLowerCase()][J];var ne=_.sortBy(_.map(W,J));return(ne[1]+ne[2])/2})}function F(W){var Y=S.buildLayerMatrix(W),Z=_.merge(R(W,Y),T(W,Y)),J={},ne;_.forEach(["u","d"],function(te){ne=te==="u"?Y:_.values(Y).reverse(),_.forEach(["l","r"],function(se){se==="r"&&(ne=_.map(ne,function(ge){return _.values(ge).reverse()}));var le=(te==="u"?W.predecessors:W.successors).bind(W),ue=N(W,ne,Z,le),ce=D(W,ne,ue.root,ue.align,se==="r");se==="r"&&(ce=_.mapValues(ce,function(ge){return-ge})),J[te+se]=ce})});var oe=q(W,J);return B(J,oe),z(J,W.graph().align)}function V(W,Y,Z){return function(J,ne,oe){var te=J.node(ne),se=J.node(oe),le=0,ue;if(le+=te.width/2,_.has(te,"labelpos"))switch(te.labelpos.toLowerCase()){case"l":ue=-te.width/2;break;case"r":ue=te.width/2;break}if(ue&&(le+=Z?ue:-ue),ue=0,le+=(te.dummy?Y:W)/2,le+=(se.dummy?Y:W)/2,le+=se.width/2,_.has(se,"labelpos"))switch(se.labelpos.toLowerCase()){case"l":ue=se.width/2;break;case"r":ue=-se.width/2;break}return ue&&(le+=Z?ue:-ue),ue=0,le}}function H(W,Y){return W.node(Y).width}return bk}var position_1,hasRequiredPosition;function requirePosition(){if(hasRequiredPosition)return position_1;hasRequiredPosition=1;var _=requireLodash(),v=requireUtil$1(),S=requireBk().positionX;position_1=R;function R(A){A=v.asNonCompoundGraph(A),T(A),_.forEach(S(A),function(k,M){A.node(M).x=k})}function T(A){var k=v.buildLayerMatrix(A),M=A.graph().ranksep,N=0;_.forEach(k,function(D){var I=_.max(_.map(D,function(q){return A.node(q).height}));_.forEach(D,function(q){A.node(q).y=N+I/2}),N+=I+M})}return position_1}var layout_1,hasRequiredLayout;function requireLayout(){if(hasRequiredLayout)return layout_1;hasRequiredLayout=1;var _=requireLodash(),v=requireAcyclic(),S=requireNormalize(),R=requireRank(),T=requireUtil$1().normalizeRanks,A=requireParentDummyChains(),k=requireUtil$1().removeEmptyRanks,M=requireNestingGraph(),N=requireAddBorderSegments(),D=requireCoordinateSystem(),I=requireOrder(),q=requirePosition(),B=requireUtil$1(),z=requireGraphlib().Graph;layout_1=F;function F(Ce,Pe){var Ne=Pe&&Pe.debugTiming?B.time:B.notime;Ne("layout",function(){var Te=Ne("  buildLayoutGraph",function(){return le(Ce)});Ne("  runLayout",function(){V(Te,Ne)}),Ne("  updateInputGraph",function(){H(Ce,Te)})})}function V(Ce,Pe){Pe("    makeSpaceForEdgeLabels",function(){ue(Ce)}),Pe("    removeSelfEdges",function(){De(Ce)}),Pe("    acyclic",function(){v.run(Ce)}),Pe("    nestingGraph.run",function(){M.run(Ce)}),Pe("    rank",function(){R(B.asNonCompoundGraph(Ce))}),Pe("    injectEdgeLabelProxies",function(){ce(Ce)}),Pe("    removeEmptyRanks",function(){k(Ce)}),Pe("    nestingGraph.cleanup",function(){M.cleanup(Ce)}),Pe("    normalizeRanks",function(){T(Ce)}),Pe("    assignRankMinMax",function(){ge(Ce)}),Pe("    removeEdgeLabelProxies",function(){me(Ce)}),Pe("    normalize.run",function(){S.run(Ce)}),Pe("    parentDummyChains",function(){A(Ce)}),Pe("    addBorderSegments",function(){N(Ce)}),Pe("    order",function(){I(Ce)}),Pe("    insertSelfEdges",function(){xe(Ce)}),Pe("    adjustCoordinateSystem",function(){D.adjust(Ce)}),Pe("    position",function(){q(Ce)}),Pe("    positionSelfEdges",function(){pe(Ce)}),Pe("    removeBorderNodes",function(){Se(Ce)}),Pe("    normalize.undo",function(){S.undo(Ce)}),Pe("    fixupEdgeLabelCoords",function(){ye(Ce)}),Pe("    undoCoordinateSystem",function(){D.undo(Ce)}),Pe("    translateGraph",function(){Ee(Ce)}),Pe("    assignNodeIntersects",function(){_e(Ce)}),Pe("    reversePoints",function(){be(Ce)}),Pe("    acyclic.undo",function(){v.undo(Ce)})}function H(Ce,Pe){_.forEach(Ce.nodes(),function(Ne){var Te=Ce.node(Ne),ze=Pe.node(Ne);Te&&(Te.x=ze.x,Te.y=ze.y,Pe.children(Ne).length&&(Te.width=ze.width,Te.height=ze.height))}),_.forEach(Ce.edges(),function(Ne){var Te=Ce.edge(Ne),ze=Pe.edge(Ne);Te.points=ze.points,_.has(ze,"x")&&(Te.x=ze.x,Te.y=ze.y)}),Ce.graph().width=Pe.graph().width,Ce.graph().height=Pe.graph().height}var W=["nodesep","edgesep","ranksep","marginx","marginy"],Y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Z=["acyclicer","ranker","rankdir","align"],J=["width","height"],ne={width:0,height:0},oe=["minlen","weight","width","height","labeloffset"],te={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},se=["labelpos"];function le(Ce){var Pe=new z({multigraph:!0,compound:!0}),Ne=Oe(Ce.graph());return Pe.setGraph(_.merge({},Y,we(Ne,W),_.pick(Ne,Z))),_.forEach(Ce.nodes(),function(Te){var ze=Oe(Ce.node(Te));Pe.setNode(Te,_.defaults(we(ze,J),ne)),Pe.setParent(Te,Ce.parent(Te))}),_.forEach(Ce.edges(),function(Te){var ze=Oe(Ce.edge(Te));Pe.setEdge(Te,_.merge({},te,we(ze,oe),_.pick(ze,se)))}),Pe}function ue(Ce){var Pe=Ce.graph();Pe.ranksep/=2,_.forEach(Ce.edges(),function(Ne){var Te=Ce.edge(Ne);Te.minlen*=2,Te.labelpos.toLowerCase()!=="c"&&(Pe.rankdir==="TB"||Pe.rankdir==="BT"?Te.width+=Te.labeloffset:Te.height+=Te.labeloffset)})}function ce(Ce){_.forEach(Ce.edges(),function(Pe){var Ne=Ce.edge(Pe);if(Ne.width&&Ne.height){var Te=Ce.node(Pe.v),ze=Ce.node(Pe.w),Fe={rank:(ze.rank-Te.rank)/2+Te.rank,e:Pe};B.addDummyNode(Ce,"edge-proxy",Fe,"_ep")}})}function ge(Ce){var Pe=0;_.forEach(Ce.nodes(),function(Ne){var Te=Ce.node(Ne);Te.borderTop&&(Te.minRank=Ce.node(Te.borderTop).rank,Te.maxRank=Ce.node(Te.borderBottom).rank,Pe=_.max(Pe,Te.maxRank))}),Ce.graph().maxRank=Pe}function me(Ce){_.forEach(Ce.nodes(),function(Pe){var Ne=Ce.node(Pe);Ne.dummy==="edge-proxy"&&(Ce.edge(Ne.e).labelRank=Ne.rank,Ce.removeNode(Pe))})}function Ee(Ce){var Pe=Number.POSITIVE_INFINITY,Ne=0,Te=Number.POSITIVE_INFINITY,ze=0,Fe=Ce.graph(),Ie=Fe.marginx||0,Le=Fe.marginy||0;function $e(qe){var at=qe.x,lt=qe.y,vt=qe.width,yt=qe.height;Pe=Math.min(Pe,at-vt/2),Ne=Math.max(Ne,at+vt/2),Te=Math.min(Te,lt-yt/2),ze=Math.max(ze,lt+yt/2)}_.forEach(Ce.nodes(),function(qe){$e(Ce.node(qe))}),_.forEach(Ce.edges(),function(qe){var at=Ce.edge(qe);_.has(at,"x")&&$e(at)}),Pe-=Ie,Te-=Le,_.forEach(Ce.nodes(),function(qe){var at=Ce.node(qe);at.x-=Pe,at.y-=Te}),_.forEach(Ce.edges(),function(qe){var at=Ce.edge(qe);_.forEach(at.points,function(lt){lt.x-=Pe,lt.y-=Te}),_.has(at,"x")&&(at.x-=Pe),_.has(at,"y")&&(at.y-=Te)}),Fe.width=Ne-Pe+Ie,Fe.height=ze-Te+Le}function _e(Ce){_.forEach(Ce.edges(),function(Pe){var Ne=Ce.edge(Pe),Te=Ce.node(Pe.v),ze=Ce.node(Pe.w),Fe,Ie;Ne.points?(Fe=Ne.points[0],Ie=Ne.points[Ne.points.length-1]):(Ne.points=[],Fe=ze,Ie=Te),Ne.points.unshift(B.intersectRect(Te,Fe)),Ne.points.push(B.intersectRect(ze,Ie))})}function ye(Ce){_.forEach(Ce.edges(),function(Pe){var Ne=Ce.edge(Pe);if(_.has(Ne,"x"))switch((Ne.labelpos==="l"||Ne.labelpos==="r")&&(Ne.width-=Ne.labeloffset),Ne.labelpos){case"l":Ne.x-=Ne.width/2+Ne.labeloffset;break;case"r":Ne.x+=Ne.width/2+Ne.labeloffset;break}})}function be(Ce){_.forEach(Ce.edges(),function(Pe){var Ne=Ce.edge(Pe);Ne.reversed&&Ne.points.reverse()})}function Se(Ce){_.forEach(Ce.nodes(),function(Pe){if(Ce.children(Pe).length){var Ne=Ce.node(Pe),Te=Ce.node(Ne.borderTop),ze=Ce.node(Ne.borderBottom),Fe=Ce.node(_.last(Ne.borderLeft)),Ie=Ce.node(_.last(Ne.borderRight));Ne.width=Math.abs(Ie.x-Fe.x),Ne.height=Math.abs(ze.y-Te.y),Ne.x=Fe.x+Ne.width/2,Ne.y=Te.y+Ne.height/2}}),_.forEach(Ce.nodes(),function(Pe){Ce.node(Pe).dummy==="border"&&Ce.removeNode(Pe)})}function De(Ce){_.forEach(Ce.edges(),function(Pe){if(Pe.v===Pe.w){var Ne=Ce.node(Pe.v);Ne.selfEdges||(Ne.selfEdges=[]),Ne.selfEdges.push({e:Pe,label:Ce.edge(Pe)}),Ce.removeEdge(Pe)}})}function xe(Ce){var Pe=B.buildLayerMatrix(Ce);_.forEach(Pe,function(Ne){var Te=0;_.forEach(Ne,function(ze,Fe){var Ie=Ce.node(ze);Ie.order=Fe+Te,_.forEach(Ie.selfEdges,function(Le){B.addDummyNode(Ce,"selfedge",{width:Le.label.width,height:Le.label.height,rank:Ie.rank,order:Fe+ ++Te,e:Le.e,label:Le.label},"_se")}),delete Ie.selfEdges})})}function pe(Ce){_.forEach(Ce.nodes(),function(Pe){var Ne=Ce.node(Pe);if(Ne.dummy==="selfedge"){var Te=Ce.node(Ne.e.v),ze=Te.x+Te.width/2,Fe=Te.y,Ie=Ne.x-ze,Le=Te.height/2;Ce.setEdge(Ne.e,Ne.label),Ce.removeNode(Pe),Ne.label.points=[{x:ze+2*Ie/3,y:Fe-Le},{x:ze+5*Ie/6,y:Fe-Le},{x:ze+Ie,y:Fe},{x:ze+5*Ie/6,y:Fe+Le},{x:ze+2*Ie/3,y:Fe+Le}],Ne.label.x=Ne.x,Ne.label.y=Ne.y}})}function we(Ce,Pe){return _.mapValues(_.pick(Ce,Pe),Number)}function Oe(Ce){var Pe={};return _.forEach(Ce,function(Ne,Te){Pe[Te.toLowerCase()]=Ne}),Pe}return layout_1}var debug,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug;hasRequiredDebug=1;var _=requireLodash(),v=requireUtil$1(),S=requireGraphlib().Graph;debug={debugOrdering:R};function R(T){var A=v.buildLayerMatrix(T),k=new S({compound:!0,multigraph:!0}).setGraph({});return _.forEach(T.nodes(),function(M){k.setNode(M,{label:M}),k.setParent(M,"layer"+T.node(M).rank)}),_.forEach(T.edges(),function(M){k.setEdge(M.v,M.w,{},M.name)}),_.forEach(A,function(M,N){var D="layer"+N;k.setNode(D,{rank:"same"}),_.reduce(M,function(I,q){return k.setEdge(I,q,{style:"invis"}),q})}),k}return debug}var version,hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,version="0.8.5"),version}var dagre$1,hasRequiredDagre;function requireDagre(){return hasRequiredDagre||(hasRequiredDagre=1,dagre$1={graphlib:requireGraphlib(),layout:requireLayout(),debug:requireDebug(),util:{time:requireUtil$1().time,notime:requireUtil$1().notime},version:requireVersion()}),dagre$1}var cytoscapeDagre=cytoscapeDagre$1.exports,hasRequiredCytoscapeDagre;function requireCytoscapeDagre(){return hasRequiredCytoscapeDagre||(hasRequiredCytoscapeDagre=1,(function(_,v){(function(R,T){_.exports=T(requireDagre())})(cytoscapeDagre,function(S){return(function(R){var T={};function A(k){if(T[k])return T[k].exports;var M=T[k]={i:k,l:!1,exports:{}};return R[k].call(M.exports,M,M.exports,A),M.l=!0,M.exports}return A.m=R,A.c=T,A.d=function(k,M,N){A.o(k,M)||Object.defineProperty(k,M,{enumerable:!0,get:N})},A.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},A.t=function(k,M){if(M&1&&(k=A(k)),M&8||M&4&&typeof k=="object"&&k&&k.__esModule)return k;var N=Object.create(null);if(A.r(N),Object.defineProperty(N,"default",{enumerable:!0,value:k}),M&2&&typeof k!="string")for(var D in k)A.d(N,D,(function(I){return k[I]}).bind(null,D));return N},A.n=function(k){var M=k&&k.__esModule?function(){return k.default}:function(){return k};return A.d(M,"a",M),M},A.o=function(k,M){return Object.prototype.hasOwnProperty.call(k,M)},A.p="",A(A.s=0)})([(function(R,T,A){var k=A(1),M=function(D){D&&D("layout","dagre",k)};typeof cytoscape<"u"&&M(cytoscape),R.exports=M}),(function(R,T,A){function k(B){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(F){return typeof F}:k=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},k(B)}var M=function(z){return typeof z=="function"},N=A(2),D=A(3),I=A(4);function q(B){this.options=D({},N,B)}q.prototype.run=function(){var B=this.options,z=this,F=B.cy,V=B.eles,H=function(pe,we){return M(we)?we.apply(pe,[pe]):we},W=B.boundingBox||{x1:0,y1:0,w:F.width(),h:F.height()};W.x2===void 0&&(W.x2=W.x1+W.w),W.w===void 0&&(W.w=W.x2-W.x1),W.y2===void 0&&(W.y2=W.y1+W.h),W.h===void 0&&(W.h=W.y2-W.y1);var Y=new I.graphlib.Graph({multigraph:!0,compound:!0}),Z={},J=function(pe,we){we!=null&&(Z[pe]=we)};J("nodesep",B.nodeSep),J("edgesep",B.edgeSep),J("ranksep",B.rankSep),J("rankdir",B.rankDir),J("align",B.align),J("ranker",B.ranker),J("acyclicer",B.acyclicer),Y.setGraph(Z),Y.setDefaultEdgeLabel(function(){return{}}),Y.setDefaultNodeLabel(function(){return{}});var ne=V.nodes();M(B.sort)&&(ne=ne.sort(B.sort));for(var oe=0;oe<ne.length;oe++){var te=ne[oe],se=te.layoutDimensions(B);Y.setNode(te.id(),{width:se.w,height:se.h,name:te.id()})}for(var le=0;le<ne.length;le++){var ue=ne[le];ue.isChild()&&Y.setParent(ue.id(),ue.parent().id())}var ce=V.edges().stdFilter(function(xe){return!xe.source().isParent()&&!xe.target().isParent()});M(B.sort)&&(ce=ce.sort(B.sort));for(var ge=0;ge<ce.length;ge++){var me=ce[ge];Y.setEdge(me.source().id(),me.target().id(),{minlen:H(me,B.minLen),weight:H(me,B.edgeWeight),name:me.id()},me.id())}I.layout(Y);for(var Ee=Y.nodes(),_e=0;_e<Ee.length;_e++){var ye=Ee[_e],be=Y.node(ye);F.getElementById(ye).scratch().dagre=be}var Se;B.boundingBox?(Se={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},ne.forEach(function(xe){var pe=xe.scratch().dagre;Se.x1=Math.min(Se.x1,pe.x),Se.x2=Math.max(Se.x2,pe.x),Se.y1=Math.min(Se.y1,pe.y),Se.y2=Math.max(Se.y2,pe.y)}),Se.w=Se.x2-Se.x1,Se.h=Se.y2-Se.y1):Se=W;var De=function(pe){if(B.boundingBox){var we=Se.w===0?0:(pe.x-Se.x1)/Se.w,Oe=Se.h===0?0:(pe.y-Se.y1)/Se.h;return{x:W.x1+we*W.w,y:W.y1+Oe*W.h}}else return pe};return ne.layoutPositions(z,B,function(xe){xe=k(xe)==="object"?xe:this;var pe=xe.scratch().dagre;return De({x:pe.x,y:pe.y})}),this},R.exports=q}),(function(R,T){var A={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(M){return 1},edgeWeight:function(M){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(M,N){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(M,N){return N},ready:function(){},sort:void 0,stop:function(){}};R.exports=A}),(function(R,T){R.exports=Object.assign!=null?Object.assign.bind(Object):function(A){for(var k=arguments.length,M=new Array(k>1?k-1:0),N=1;N<k;N++)M[N-1]=arguments[N];return M.forEach(function(D){Object.keys(D).forEach(function(I){return A[I]=D[I]})}),A}}),(function(R,T){R.exports=S})])})})(cytoscapeDagre$1)),cytoscapeDagre$1.exports}var cytoscapeDagreExports=requireCytoscapeDagre();const dagre=getDefaultExportFromCjs$1(cytoscapeDagreExports);let idCounter=0;const getId=()=>`n_${idCounter++}`;function traverse(_,v=null){if(!_)return[];const S=getId(),R=[];let T="",A=_.type.toLowerCase();switch(_.type){case"Definition":T=_.name,A+=" process-name";break;case"Prefix":_.action.label==="tau"?(T="",A+=" keyword"):_.action.isOutput?(T=`'${_.action.label}`,A+=" output-action"):(T=_.action.label,A+=" input-action");break;case"Summation":T="+",A+=" operator";break;case"Parallel":T="|",A+=" operator";break;case"Nil":T="0",A+=" keyword";break;case"ProcessRef":T=_.name,A+=" process-name";break;case"Restriction":T="\\{}",A+=" operator";break;case"Relabeling":T="[f]",A+=" operator";break}switch(R.push({data:{id:S,label:T,type:_.type,locStart:_.loc?_.loc.start.offset:null,locEnd:_.loc?_.loc.end.offset:null},classes:A}),v&&R.push({data:{source:v,target:S}}),_.type){case"Definition":R.push(...traverse(_.process,S));break;case"Summation":case"Parallel":R.push(...traverse(_.left,S)),R.push(...traverse(_.right,S));break;case"Prefix":R.push(...traverse(_.next,S));break;case"Restriction":case"Relabeling":R.push(...traverse(_.process,S));break}return R}function transformAstToSyntaxTree(_){if(idCounter=0,!_)return[];const v=getId(),S=[];if(Array.isArray(_))S.push({data:{id:v,label:"Program"},classes:"root-node"}),_.forEach(R=>{S.push(...traverse(R,v))});else return traverse(_);return S}function downloadBlob(_,v){const S=URL.createObjectURL(_),R=document.createElement("a");R.href=S,R.download=v,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(S)}async function handleExport(_,v){if(_){if(v==="png"){const S=_.png({output:"blob",bg:"white",full:!0,scale:2});downloadBlob(S,"ccs-export.png")}else if(v==="svg"){const S=_.svg({full:!0,bg:"white",scale:1}),R=new Blob([S],{type:"image/svg+xml;charset=utf-8"});downloadBlob(R,"ccs-export.svg")}else if(v==="json"){const S=JSON.stringify(_.json(),null,2),R=new Blob([S],{type:"application/json"});downloadBlob(R,"ccs-export.json")}}}function createSlot$2(_){const v=createSlotClone$2(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),N=M.find(isSlottable$2);if(N){const D=N.props.children,I=M.map(q=>q===N?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,I):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$2(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$2(T),M=mergeProps$2(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$2=Symbol("radix.slottable");function isSlottable$2(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$2}function mergeProps$2(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const N=A(...M);return T(...M),N}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$2(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}function createCollection(_){const v=_+"CollectionProvider",[S,R]=createContextScope(v),[T,A]=S(v,{collectionRef:{current:null},itemMap:new Map}),k=V=>{const{scope:H,children:W}=V,Y=React2.useRef(null),Z=React2.useRef(new Map).current;return jsxRuntimeExports.jsx(T,{scope:H,itemMap:Z,collectionRef:Y,children:W})};k.displayName=v;const M=_+"CollectionSlot",N=createSlot$2(M),D=React2.forwardRef((V,H)=>{const{scope:W,children:Y}=V,Z=A(M,W),J=useComposedRefs(H,Z.collectionRef);return jsxRuntimeExports.jsx(N,{ref:J,children:Y})});D.displayName=M;const I=_+"CollectionItemSlot",q="data-radix-collection-item",B=createSlot$2(I),z=React2.forwardRef((V,H)=>{const{scope:W,children:Y,...Z}=V,J=React2.useRef(null),ne=useComposedRefs(H,J),oe=A(I,W);return React2.useEffect(()=>(oe.itemMap.set(J,{ref:J,...Z}),()=>void oe.itemMap.delete(J))),jsxRuntimeExports.jsx(B,{[q]:"",ref:ne,children:Y})});z.displayName=I;function F(V){const H=A(_+"CollectionConsumer",V);return React2.useCallback(()=>{const Y=H.collectionRef.current;if(!Y)return[];const Z=Array.from(Y.querySelectorAll(`[${q}]`));return Array.from(H.itemMap.values()).sort((oe,te)=>Z.indexOf(oe.ref.current)-Z.indexOf(te.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:k,Slot:D,ItemSlot:z},F,R]}var DirectionContext=reactExports.createContext(void 0);function useDirection(_){const v=reactExports.useContext(DirectionContext);return _||v||"ltr"}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$2]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((_,v)=>jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._,ref:v})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((_,v)=>{const{__scopeRovingFocusGroup:S,orientation:R,loop:T=!1,dir:A,currentTabStopId:k,defaultCurrentTabStopId:M,onCurrentTabStopIdChange:N,onEntryFocus:D,preventScrollOnEntryFocus:I=!1,...q}=_,B=reactExports.useRef(null),z=useComposedRefs(v,B),F=useDirection(A),[V,H]=useControllableState({prop:k,defaultProp:M??null,onChange:N,caller:GROUP_NAME$3}),[W,Y]=reactExports.useState(!1),Z=useCallbackRef$1(D),J=useCollection$2(S),ne=reactExports.useRef(!1),[oe,te]=reactExports.useState(0);return reactExports.useEffect(()=>{const se=B.current;if(se)return se.addEventListener(ENTRY_FOCUS,Z),()=>se.removeEventListener(ENTRY_FOCUS,Z)},[Z]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:S,orientation:R,dir:F,loop:T,currentTabStopId:V,onItemFocus:reactExports.useCallback(se=>H(se),[H]),onItemShiftTab:reactExports.useCallback(()=>Y(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>te(se=>se+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>te(se=>se-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:W||oe===0?-1:0,"data-orientation":R,...q,ref:z,style:{outline:"none",..._.style},onMouseDown:composeEventHandlers(_.onMouseDown,()=>{ne.current=!0}),onFocus:composeEventHandlers(_.onFocus,se=>{const le=!ne.current;if(se.target===se.currentTarget&&le&&!W){const ue=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(se.currentTarget.dispatchEvent(ue),!ue.defaultPrevented){const ce=J().filter(ye=>ye.focusable),ge=ce.find(ye=>ye.active),me=ce.find(ye=>ye.id===V),_e=[ge,me,...ce].filter(Boolean).map(ye=>ye.ref.current);focusFirst$1(_e,I)}}ne.current=!1}),onBlur:composeEventHandlers(_.onBlur,()=>Y(!1))})})}),ITEM_NAME$3="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_,v)=>{const{__scopeRovingFocusGroup:S,focusable:R=!0,active:T=!1,tabStopId:A,children:k,...M}=_,N=useId(),D=A||N,I=useRovingFocusContext(ITEM_NAME$3,S),q=I.currentTabStopId===D,B=useCollection$2(S),{onFocusableItemAdd:z,onFocusableItemRemove:F,currentTabStopId:V}=I;return reactExports.useEffect(()=>{if(R)return z(),()=>F()},[R,z,F]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:S,id:D,focusable:R,active:T,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:q?0:-1,"data-orientation":I.orientation,...M,ref:v,onMouseDown:composeEventHandlers(_.onMouseDown,H=>{R?I.onItemFocus(D):H.preventDefault()}),onFocus:composeEventHandlers(_.onFocus,()=>I.onItemFocus(D)),onKeyDown:composeEventHandlers(_.onKeyDown,H=>{if(H.key==="Tab"&&H.shiftKey){I.onItemShiftTab();return}if(H.target!==H.currentTarget)return;const W=getFocusIntent(H,I.orientation,I.dir);if(W!==void 0){if(H.metaKey||H.ctrlKey||H.altKey||H.shiftKey)return;H.preventDefault();let Z=B().filter(J=>J.focusable).map(J=>J.ref.current);if(W==="last")Z.reverse();else if(W==="prev"||W==="next"){W==="prev"&&Z.reverse();const J=Z.indexOf(H.currentTarget);Z=I.loop?wrapArray$2(Z,J+1):Z.slice(J+1)}setTimeout(()=>focusFirst$1(Z))}}),children:typeof k=="function"?k({isCurrentTabStop:q,hasTabStop:V!=null}):k})})});RovingFocusGroupItem.displayName=ITEM_NAME$3;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_,v){return v!=="rtl"?_:_==="ArrowLeft"?"ArrowRight":_==="ArrowRight"?"ArrowLeft":_}function getFocusIntent(_,v,S){const R=getDirectionAwareKey(_.key,S);if(!(v==="vertical"&&["ArrowLeft","ArrowRight"].includes(R))&&!(v==="horizontal"&&["ArrowUp","ArrowDown"].includes(R)))return MAP_KEY_TO_FOCUS_INTENT[R]}function focusFirst$1(_,v=!1){const S=document.activeElement;for(const R of _)if(R===S||(R.focus({preventScroll:v}),document.activeElement!==S))return}function wrapArray$2(_,v){return _.map((S,R)=>_[(v+R)%_.length])}var Root=RovingFocusGroup,Item$1=RovingFocusGroupItem;function createSlot$1(_){const v=createSlotClone$1(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),N=M.find(isSlottable$1);if(N){const D=N.props.children,I=M.map(q=>q===N?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,I):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$1(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$1(T),M=mergeProps$1(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$1=Symbol("radix.slottable");function isSlottable$1(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$1}function mergeProps$1(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const N=A(...M);return T(...M),N}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$1(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope$1,createPopperScope,createRovingFocusGroupScope]),usePopperScope$1=createPopperScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=_=>{const{__scopeMenu:v,open:S=!1,children:R,dir:T,onOpenChange:A,modal:k=!0}=_,M=usePopperScope$1(v),[N,D]=reactExports.useState(null),I=reactExports.useRef(!1),q=useCallbackRef$1(A),B=useDirection(T);return reactExports.useEffect(()=>{const z=()=>{I.current=!0,document.addEventListener("pointerdown",F,{capture:!0,once:!0}),document.addEventListener("pointermove",F,{capture:!0,once:!0})},F=()=>I.current=!1;return document.addEventListener("keydown",z,{capture:!0}),()=>{document.removeEventListener("keydown",z,{capture:!0}),document.removeEventListener("pointerdown",F,{capture:!0}),document.removeEventListener("pointermove",F,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$2,{...M,children:jsxRuntimeExports.jsx(MenuProvider,{scope:v,open:S,onOpenChange:q,content:N,onContentChange:D,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:v,onClose:reactExports.useCallback(()=>q(!1),[q]),isUsingKeyboardRef:I,dir:B,modal:k,children:R})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_,T=usePopperScope$1(S);return jsxRuntimeExports.jsx(Anchor,{...T,...R,ref:v})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$2="MenuPortal",[PortalProvider,usePortalContext]=createMenuContext(PORTAL_NAME$2,{forceMount:void 0}),MenuPortal=_=>{const{__scopeMenu:v,forceMount:S,children:R,container:T}=_,A=useMenuContext(PORTAL_NAME$2,v);return jsxRuntimeExports.jsx(PortalProvider,{scope:v,forceMount:S,children:jsxRuntimeExports.jsx(Presence,{present:S||A.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:T,children:R})})})};MenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$2="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$2),MenuContent=reactExports.forwardRef((_,v)=>{const S=usePortalContext(CONTENT_NAME$2,_.__scopeMenu),{forceMount:R=S.forceMount,...T}=_,A=useMenuContext(CONTENT_NAME$2,_.__scopeMenu),k=useMenuRootContext(CONTENT_NAME$2,_.__scopeMenu);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:R||A.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_.__scopeMenu,children:k.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...T,ref:v}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...T,ref:v})})})})}),MenuRootContentModal=reactExports.forwardRef((_,v)=>{const S=useMenuContext(CONTENT_NAME$2,_.__scopeMenu),R=reactExports.useRef(null),T=useComposedRefs(v,R);return reactExports.useEffect(()=>{const A=R.current;if(A)return hideOthers(A)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{..._,ref:T,trapFocus:S.open,disableOutsidePointerEvents:S.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(_.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>S.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((_,v)=>{const S=useMenuContext(CONTENT_NAME$2,_.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{..._,ref:v,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>S.onOpenChange(!1)})}),Slot$1=createSlot$1("MenuContent.ScrollLock"),MenuContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,loop:R=!1,trapFocus:T,onOpenAutoFocus:A,onCloseAutoFocus:k,disableOutsidePointerEvents:M,onEntryFocus:N,onEscapeKeyDown:D,onPointerDownOutside:I,onFocusOutside:q,onInteractOutside:B,onDismiss:z,disableOutsideScroll:F,...V}=_,H=useMenuContext(CONTENT_NAME$2,S),W=useMenuRootContext(CONTENT_NAME$2,S),Y=usePopperScope$1(S),Z=useRovingFocusGroupScope(S),J=useCollection$1(S),[ne,oe]=reactExports.useState(null),te=reactExports.useRef(null),se=useComposedRefs(v,te,H.onContentChange),le=reactExports.useRef(0),ue=reactExports.useRef(""),ce=reactExports.useRef(0),ge=reactExports.useRef(null),me=reactExports.useRef("right"),Ee=reactExports.useRef(0),_e=F?ReactRemoveScroll:reactExports.Fragment,ye=F?{as:Slot$1,allowPinchZoom:!0}:void 0,be=De=>{const xe=ue.current+De,pe=J().filter(Te=>!Te.disabled),we=document.activeElement,Oe=pe.find(Te=>Te.ref.current===we)?.textValue,Ce=pe.map(Te=>Te.textValue),Pe=getNextMatch(Ce,xe,Oe),Ne=pe.find(Te=>Te.textValue===Pe)?.ref.current;(function Te(ze){ue.current=ze,window.clearTimeout(le.current),ze!==""&&(le.current=window.setTimeout(()=>Te(""),1e3))})(xe),Ne&&setTimeout(()=>Ne.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(le.current),[]),useFocusGuards();const Se=reactExports.useCallback(De=>me.current===ge.current?.side&&isPointerInGraceArea(De,ge.current?.area),[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:S,searchRef:ue,onItemEnter:reactExports.useCallback(De=>{Se(De)&&De.preventDefault()},[Se]),onItemLeave:reactExports.useCallback(De=>{Se(De)||(te.current?.focus(),oe(null))},[Se]),onTriggerLeave:reactExports.useCallback(De=>{Se(De)&&De.preventDefault()},[Se]),pointerGraceTimerRef:ce,onPointerGraceIntentChange:reactExports.useCallback(De=>{ge.current=De},[]),children:jsxRuntimeExports.jsx(_e,{...ye,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:T,onMountAutoFocus:composeEventHandlers(A,De=>{De.preventDefault(),te.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:k,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:M,onEscapeKeyDown:D,onPointerDownOutside:I,onFocusOutside:q,onInteractOutside:B,onDismiss:z,children:jsxRuntimeExports.jsx(Root,{asChild:!0,...Z,dir:W.dir,orientation:"vertical",loop:R,currentTabStopId:ne,onCurrentTabStopIdChange:oe,onEntryFocus:composeEventHandlers(N,De=>{W.isUsingKeyboardRef.current||De.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$1,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(H.open),"data-radix-menu-content":"",dir:W.dir,...Y,...V,ref:se,style:{outline:"none",...V.style},onKeyDown:composeEventHandlers(V.onKeyDown,De=>{const pe=De.target.closest("[data-radix-menu-content]")===De.currentTarget,we=De.ctrlKey||De.altKey||De.metaKey,Oe=De.key.length===1;pe&&(De.key==="Tab"&&De.preventDefault(),!we&&Oe&&be(De.key));const Ce=te.current;if(De.target!==Ce||!FIRST_LAST_KEYS.includes(De.key))return;De.preventDefault();const Ne=J().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);LAST_KEYS.includes(De.key)&&Ne.reverse(),focusFirst(Ne)}),onBlur:composeEventHandlers(_.onBlur,De=>{De.currentTarget.contains(De.target)||(window.clearTimeout(le.current),ue.current="")}),onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(De=>{const xe=De.target,pe=Ee.current!==De.clientX;if(De.currentTarget.contains(xe)&&pe){const we=De.clientX>Ee.current?"right":"left";me.current=we,Ee.current=De.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$2;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...R,ref:v})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{...R,ref:v})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$2="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((_,v)=>{const{disabled:S=!1,onSelect:R,...T}=_,A=reactExports.useRef(null),k=useMenuRootContext(ITEM_NAME$2,_.__scopeMenu),M=useMenuContentContext(ITEM_NAME$2,_.__scopeMenu),N=useComposedRefs(v,A),D=reactExports.useRef(!1),I=()=>{const q=A.current;if(!S&&q){const B=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});q.addEventListener(ITEM_SELECT,z=>R?.(z),{once:!0}),dispatchDiscreteCustomEvent(q,B),B.defaultPrevented?D.current=!1:k.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...T,ref:N,disabled:S,onClick:composeEventHandlers(_.onClick,I),onPointerDown:q=>{_.onPointerDown?.(q),D.current=!0},onPointerUp:composeEventHandlers(_.onPointerUp,q=>{D.current||q.currentTarget?.click()}),onKeyDown:composeEventHandlers(_.onKeyDown,q=>{const B=M.searchRef.current!=="";S||B&&q.key===" "||SELECTION_KEYS$1.includes(q.key)&&(q.currentTarget.click(),q.preventDefault())})})});MenuItem.displayName=ITEM_NAME$2;var MenuItemImpl=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,disabled:R=!1,textValue:T,...A}=_,k=useMenuContentContext(ITEM_NAME$2,S),M=useRovingFocusGroupScope(S),N=reactExports.useRef(null),D=useComposedRefs(v,N),[I,q]=reactExports.useState(!1),[B,z]=reactExports.useState("");return reactExports.useEffect(()=>{const F=N.current;F&&z((F.textContent??"").trim())},[A.children]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:S,disabled:R,textValue:T??B,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,...M,focusable:!R,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":I?"":void 0,"aria-disabled":R||void 0,"data-disabled":R?"":void 0,...A,ref:D,onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(F=>{R?k.onItemLeave(F):(k.onItemEnter(F),F.defaultPrevented||F.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(_.onPointerLeave,whenMouse(F=>k.onItemLeave(F))),onFocus:composeEventHandlers(_.onFocus,()=>q(!0)),onBlur:composeEventHandlers(_.onBlur,()=>q(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((_,v)=>{const{checked:S=!1,onCheckedChange:R,...T}=_;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_.__scopeMenu,checked:S,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(S)?"mixed":S,...T,ref:v,"data-state":getCheckedState(S),onSelect:composeEventHandlers(T.onSelect,()=>R?.(isIndeterminate(S)?!0:!S),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((_,v)=>{const{value:S,onValueChange:R,...T}=_,A=useCallbackRef$1(R);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:_.__scopeMenu,value:S,onValueChange:A,children:jsxRuntimeExports.jsx(MenuGroup,{...T,ref:v})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((_,v)=>{const{value:S,...R}=_,T=useRadioGroupContext(RADIO_ITEM_NAME$1,_.__scopeMenu),A=S===T.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_.__scopeMenu,checked:A,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":A,...R,ref:v,"data-state":getCheckedState(A),onSelect:composeEventHandlers(R.onSelect,()=>T.onValueChange?.(S),{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,forceMount:R,...T}=_,A=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,S);return jsxRuntimeExports.jsx(Presence,{present:R||isIndeterminate(A.checked)||A.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...T,ref:v,"data-state":getCheckedState(A.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...R,ref:v})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$2="MenuArrow",MenuArrow=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_,T=usePopperScope$1(S);return jsxRuntimeExports.jsx(Arrow,{...T,...R,ref:v})});MenuArrow.displayName=ARROW_NAME$2;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((_,v)=>{const S=useMenuContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),R=useMenuRootContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),T=useMenuSubContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),A=useMenuContentContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),k=reactExports.useRef(null),{pointerGraceTimerRef:M,onPointerGraceIntentChange:N}=A,D={__scopeMenu:_.__scopeMenu},I=reactExports.useCallback(()=>{k.current&&window.clearTimeout(k.current),k.current=null},[]);return reactExports.useEffect(()=>I,[I]),reactExports.useEffect(()=>{const q=M.current;return()=>{window.clearTimeout(q),N(null)}},[M,N]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...D,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:T.triggerId,"aria-haspopup":"menu","aria-expanded":S.open,"aria-controls":T.contentId,"data-state":getOpenState(S.open),..._,ref:composeRefs(v,T.onTriggerChange),onClick:q=>{_.onClick?.(q),!(_.disabled||q.defaultPrevented)&&(q.currentTarget.focus(),S.open||S.onOpenChange(!0))},onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(q=>{A.onItemEnter(q),!q.defaultPrevented&&!_.disabled&&!S.open&&!k.current&&(A.onPointerGraceIntentChange(null),k.current=window.setTimeout(()=>{S.onOpenChange(!0),I()},100))})),onPointerLeave:composeEventHandlers(_.onPointerLeave,whenMouse(q=>{I();const B=S.content?.getBoundingClientRect();if(B){const z=S.content?.dataset.side,F=z==="right",V=F?-5:5,H=B[F?"left":"right"],W=B[F?"right":"left"];A.onPointerGraceIntentChange({area:[{x:q.clientX+V,y:q.clientY},{x:H,y:B.top},{x:W,y:B.top},{x:W,y:B.bottom},{x:H,y:B.bottom}],side:z}),window.clearTimeout(M.current),M.current=window.setTimeout(()=>A.onPointerGraceIntentChange(null),300)}else{if(A.onTriggerLeave(q),q.defaultPrevented)return;A.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(_.onKeyDown,q=>{const B=A.searchRef.current!=="";_.disabled||B&&q.key===" "||SUB_OPEN_KEYS[R.dir].includes(q.key)&&(S.onOpenChange(!0),S.content?.focus(),q.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((_,v)=>{const S=usePortalContext(CONTENT_NAME$2,_.__scopeMenu),{forceMount:R=S.forceMount,...T}=_,A=useMenuContext(CONTENT_NAME$2,_.__scopeMenu),k=useMenuRootContext(CONTENT_NAME$2,_.__scopeMenu),M=useMenuSubContext(SUB_CONTENT_NAME$1,_.__scopeMenu),N=reactExports.useRef(null),D=useComposedRefs(v,N);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:R||A.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:M.contentId,"aria-labelledby":M.triggerId,...T,ref:D,align:"start",side:k.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:I=>{k.isUsingKeyboardRef.current&&N.current?.focus(),I.preventDefault()},onCloseAutoFocus:I=>I.preventDefault(),onFocusOutside:composeEventHandlers(_.onFocusOutside,I=>{I.target!==M.trigger&&A.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(_.onEscapeKeyDown,I=>{k.onClose(),I.preventDefault()}),onKeyDown:composeEventHandlers(_.onKeyDown,I=>{const q=I.currentTarget.contains(I.target),B=SUB_CLOSE_KEYS[k.dir].includes(I.key);q&&B&&(A.onOpenChange(!1),M.trigger?.focus(),I.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(_){return _?"open":"closed"}function isIndeterminate(_){return _==="indeterminate"}function getCheckedState(_){return isIndeterminate(_)?"indeterminate":_?"checked":"unchecked"}function focusFirst(_){const v=document.activeElement;for(const S of _)if(S===v||(S.focus(),document.activeElement!==v))return}function wrapArray$1(_,v){return _.map((S,R)=>_[(v+R)%_.length])}function getNextMatch(_,v,S){const T=v.length>1&&Array.from(v).every(D=>D===v[0])?v[0]:v,A=S?_.indexOf(S):-1;let k=wrapArray$1(_,Math.max(A,0));T.length===1&&(k=k.filter(D=>D!==S));const N=k.find(D=>D.toLowerCase().startsWith(T.toLowerCase()));return N!==S?N:void 0}function isPointInPolygon(_,v){const{x:S,y:R}=_;let T=!1;for(let A=0,k=v.length-1;A<v.length;k=A++){const M=v[A],N=v[k],D=M.x,I=M.y,q=N.x,B=N.y;I>R!=B>R&&S<(q-D)*(R-I)/(B-I)+D&&(T=!T)}return T}function isPointerInGraceArea(_,v){if(!v)return!1;const S={x:_.clientX,y:_.clientY};return isPointInPolygon(S,v)}function whenMouse(_){return v=>v.pointerType==="mouse"?_(v):void 0}var Root3=Menu,Anchor2=MenuAnchor,Portal$1=MenuPortal,Content2$2=MenuContent,Group$1=MenuGroup,Label$1=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator$1=MenuSeparator,Arrow2=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=_=>{const{__scopeDropdownMenu:v,children:S,dir:R,open:T,defaultOpen:A,onOpenChange:k,modal:M=!0}=_,N=useMenuScope(v),D=reactExports.useRef(null),[I,q]=useControllableState({prop:T,defaultProp:A??!1,onChange:k,caller:DROPDOWN_MENU_NAME});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:v,triggerId:useId(),triggerRef:D,contentId:useId(),open:I,onOpenChange:q,onOpenToggle:reactExports.useCallback(()=>q(B=>!B),[q]),modal:M,children:jsxRuntimeExports.jsx(Root3,{...N,open:I,onOpenChange:q,dir:R,modal:M,children:S})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$1="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,disabled:R=!1,...T}=_,A=useDropdownMenuContext(TRIGGER_NAME$1,S),k=useMenuScope(S);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...k,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:A.triggerId,"aria-haspopup":"menu","aria-expanded":A.open,"aria-controls":A.open?A.contentId:void 0,"data-state":A.open?"open":"closed","data-disabled":R?"":void 0,disabled:R,...T,ref:composeRefs(v,A.triggerRef),onPointerDown:composeEventHandlers(_.onPointerDown,M=>{!R&&M.button===0&&M.ctrlKey===!1&&(A.onOpenToggle(),A.open||M.preventDefault())}),onKeyDown:composeEventHandlers(_.onKeyDown,M=>{R||(["Enter"," "].includes(M.key)&&A.onOpenToggle(),M.key==="ArrowDown"&&A.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(M.key)&&M.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="DropdownMenuPortal",DropdownMenuPortal=_=>{const{__scopeDropdownMenu:v,...S}=_,R=useMenuScope(v);return jsxRuntimeExports.jsx(Portal$1,{...R,...S})};DropdownMenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useDropdownMenuContext(CONTENT_NAME$1,S),A=useMenuScope(S),k=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$2,{id:T.contentId,"aria-labelledby":T.triggerId,...A,...R,ref:v,onCloseAutoFocus:composeEventHandlers(_.onCloseAutoFocus,M=>{k.current||T.triggerRef.current?.focus(),k.current=!1,M.preventDefault()}),onInteractOutside:composeEventHandlers(_.onInteractOutside,M=>{const N=M.detail.originalEvent,D=N.button===0&&N.ctrlKey===!0,I=N.button===2||D;(!T.modal||I)&&(k.current=!0)}),style:{..._.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$1;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Group$1,{...T,...R,ref:v})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Label$1,{...T,...R,ref:v})});DropdownMenuLabel$1.displayName=LABEL_NAME$1;var ITEM_NAME$1="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Item2$1,{...T,...R,ref:v})});DropdownMenuItem$1.displayName=ITEM_NAME$1;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(CheckboxItem,{...T,...R,ref:v})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(RadioGroup,{...T,...R,ref:v})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(RadioItem,{...T,...R,ref:v})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(ItemIndicator$1,{...T,...R,ref:v})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Separator$1,{...T,...R,ref:v})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Arrow2,{...T,...R,ref:v})});DropdownMenuArrow.displayName=ARROW_NAME$1;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(SubTrigger,{...T,...R,ref:v})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(SubContent,{...T,...R,ref:v,style:{..._.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$1=DropdownMenu$1,Trigger$1=DropdownMenuTrigger$1,Portal2=DropdownMenuPortal,Content2$1=DropdownMenuContent$1,Label2=DropdownMenuLabel$1,Item2=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$1,DropdownMenuTrigger=Trigger$1,DropdownMenuSubTrigger=reactExports.forwardRef(({className:_,inset:v,children:S,...R},T)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:T,className:cn$1("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",v&&"pl-8",_),...R,children:[S,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(SubContent2,{ref:S,className:cn$1("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",_),...v}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:_,sideOffset:v=4,...S},R)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2$1,{ref:R,sideOffset:v,className:cn$1("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",_),...S})}));DropdownMenuContent.displayName=Content2$1.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:_,inset:v,...S},R)=>jsxRuntimeExports.jsx(Item2,{ref:R,className:cn$1("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",v&&"pl-8",_),...S}));DropdownMenuItem.displayName=Item2.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:_,children:v,checked:S,...R},T)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:T,className:cn$1("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),checked:S,...R,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),v]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:R,className:cn$1("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...S,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),v]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:_,inset:v,...S},R)=>jsxRuntimeExports.jsx(Label2,{ref:R,className:cn$1("px-2 py-1.5 text-sm font-semibold",v&&"pl-8",_),...S}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Separator2,{ref:S,className:cn$1("-mx-1 my-1 h-px bg-muted",_),...v}));DropdownMenuSeparator.displayName=Separator2.displayName;var cytoscapeSvg={exports:{}},hasRequiredCytoscapeSvg;function requireCytoscapeSvg(){return hasRequiredCytoscapeSvg||(hasRequiredCytoscapeSvg=1,(function(_,v){(function(S,R){_.exports=R()})(window,(function(){return(function(S){var R={};function T(A){if(R[A])return R[A].exports;var k=R[A]={i:A,l:!1,exports:{}};return S[A].call(k.exports,k,k.exports,T),k.l=!0,k.exports}return T.m=S,T.c=R,T.d=function(A,k,M){T.o(A,k)||Object.defineProperty(A,k,{enumerable:!0,get:M})},T.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},T.t=function(A,k){if(1&k&&(A=T(A)),8&k||4&k&&typeof A=="object"&&A&&A.__esModule)return A;var M=Object.create(null);if(T.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:A}),2&k&&typeof A!="string")for(var N in A)T.d(M,N,(function(D){return A[D]}).bind(null,N));return M},T.n=function(A){var k=A&&A.__esModule?function(){return A.default}:function(){return A};return T.d(k,"a",k),k},T.o=function(A,k){return Object.prototype.hasOwnProperty.call(A,k)},T.p="",T(T.s=0)})([function(S,R,T){var A=T(1),k=function(M){M&&M("core","svg",A.svg)};typeof cytoscape<"u"&&k(cytoscape),S.exports=k},function(S,R,T){var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},k=T(2),M={},N={};N.number=function(D){return D!=null&&(D===void 0?"undefined":A(D))===A(1)&&!isNaN(D)},M.bufferCanvasImage=function(D,I){var q=I.renderer().usePaths;I.renderer().usePaths=function(){return!1},I.elements().forEach((function(ce){ce._private.rscratch.pathCacheKey=null,ce._private.rscratch.pathCache=null}));var B=I.renderer(),z=I.mutableElements().boundingBox(),F=B.findContainerClientCoords(),V=D.full?Math.ceil(z.w):F[2],H=D.full?Math.ceil(z.h):F[3],W=N.number(D.maxWidth)||N.number(D.maxHeight),Y=B.getPixelRatio(),Z=1;if(D.scale!==void 0)V*=D.scale,H*=D.scale,Z=D.scale;else if(W){var J=1/0,ne=1/0;N.number(D.maxWidth)&&(J=Z*D.maxWidth/V),N.number(D.maxHeight)&&(ne=Z*D.maxHeight/H),V*=Z=Math.min(J,ne),H*=Z}W||(V*=Y,H*=Y,Z*=Y);var oe=null,te=oe=new k(V,H);if(V>0&&H>0){oe.clearRect(0,0,V,H),D.bg&&(oe.globalCompositeOperation="destination-over",oe.fillStyle=D.bg,oe.fillRect(0,0,V,H)),oe.globalCompositeOperation="source-over";var se=B.getCachedZSortedEles();if(D.full)oe.translate(-z.x1*Z,-z.y1*Z),oe.scale(Z,Z),B.drawElements(oe,se),oe.scale(1/Z,1/Z),oe.translate(z.x1*Z,z.y1*Z);else{var le=I.pan(),ue={x:le.x*Z,y:le.y*Z};Z*=I.zoom(),oe.translate(ue.x,ue.y),oe.scale(Z,Z),B.drawElements(oe,se),oe.scale(1/Z,1/Z),oe.translate(-ue.x,-ue.y)}}return I.renderer().usePaths=q,te},M.svg=function(D){return M.bufferCanvasImage(D||{},this).getSerializedSvg()},S.exports=M},function(S,R,T){(function(){var A,k,M,N,D;function I(F,V){var H,W=Object.keys(V);for(H=0;H<W.length;H++)F=F.replace(new RegExp("\\{"+W[H]+"\\}","gi"),V[W[H]]);return F}function q(F){var V,H,W;if(!F)throw new Error("cannot create a random attribute name for an undefined object");V="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",H="";do for(H="",W=0;W<12;W++)H+=V[Math.floor(Math.random()*V.length)];while(F[H]);return H}function B(F){var V={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return V[F]||V.alphabetic}D=(function(F,V){var H,W,Y,Z={};for(F=F.split(","),V=V||10,H=0;H<F.length;H+=2)W="&"+F[H+1]+";",Y=parseInt(F[H],V),Z[W]="&#"+Y+";";return Z["\\xa0"]="&#160;",Z})("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),A={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(M=function(F,V){this.__root=F,this.__ctx=V}).prototype.addColorStop=function(F,V){var H,W=this.__ctx.__createElement("stop");W.setAttribute("offset",F),V.indexOf("rgba")!==-1?(H=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(V),W.setAttribute("stop-color",I("rgb({r},{g},{b})",{r:H[1],g:H[2],b:H[3]})),W.setAttribute("stop-opacity",H[4])):W.setAttribute("stop-color",V),this.__root.appendChild(W)},N=function(F,V){this.__root=F,this.__ctx=V},(k=function(F){var V,H={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((V=H).width=arguments[0],V.height=arguments[1]):V=F||H,!(this instanceof k))return new k(V);this.width=V.width||H.width,this.height=V.height||H.height,this.enableMirroring=V.enableMirroring!==void 0?V.enableMirroring:H.enableMirroring,this.canvas=this,this.__document=V.document||document,V.ctx?this.__ctx=V.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(F,V,H){V===void 0&&(V={});var W,Y,Z=this.__document.createElementNS("http://www.w3.org/2000/svg",F),J=Object.keys(V);for(H&&(Z.setAttribute("fill","none"),Z.setAttribute("stroke","none")),W=0;W<J.length;W++)Y=J[W],Z.setAttribute(Y,V[Y]);return Z},k.prototype.__setDefaultStyles=function(){var F,V,H=Object.keys(A);for(F=0;F<H.length;F++)this[V=H[F]]=A[V].canvas},k.prototype.__applyStyleState=function(F){if(F){var V,H,W=Object.keys(F);for(V=0;V<W.length;V++)this[H=W[V]]=F[H]}},k.prototype.__getStyleState=function(){var F,V,H={},W=Object.keys(A);for(F=0;F<W.length;F++)H[V=W[F]]=this[V];return H},k.prototype.__applyStyleToCurrentElement=function(F){var V=this.__currentElement;this.__currentElementsToStyle;var H,W,Y,Z,J,ne=Object.keys(A);for(H=0;H<ne.length;H++)if(W=A[ne[H]],Y=this[ne[H]],W.apply){if(Y instanceof N){if(Y.__ctx)for(;Y.__ctx.__defs.childNodes.length;)Z=Y.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[Z]=Z,this.__defs.appendChild(Y.__ctx.__defs.childNodes[0]);V.setAttribute(W.apply,I("url(#{id})",{id:Y.__root.getAttribute("id")}))}else if(Y instanceof M)V.setAttribute(W.apply,I("url(#{id})",{id:Y.__root.getAttribute("id")}));else if(W.apply.indexOf(F)!==-1&&W.svg!==Y)if(W.svgAttr!=="stroke"&&W.svgAttr!=="fill"||Y.indexOf("rgba")===-1){var oe=W.svgAttr;if(ne[H]==="globalAlpha"&&(oe=F+"-"+W.svgAttr,V.getAttribute(oe)))continue;V.setAttribute(oe,Y)}else{J=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(Y),V.setAttribute(W.svgAttr,I("rgb({r},{g},{b})",{r:J[1],g:J[2],b:J[3]}));var te=J[4],se=this.globalAlpha;se!=null&&(te*=se),V.setAttribute(W.svgAttr+"-opacity",te)}}},k.prototype.__closestGroupOrSvg=function(F){return(F=F||this.__currentElement).nodeName==="g"||F.nodeName==="svg"?F:this.__closestGroupOrSvg(F.parentNode)},k.prototype.getSerializedSvg=function(F){var V,H,W,Y,Z,J=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(J)&&(J=J.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),F)for(V=Object.keys(D),H=0;H<V.length;H++)W=V[H],Y=D[W],(Z=new RegExp(W,"gi")).test(J)&&(J=J.replace(Z,Y));return J},k.prototype.getSvg=function(){return this.__root},k.prototype.save=function(){var F=this.__createElement("g"),V=this.__closestGroupOrSvg();this.__groupStack.push(V),V.appendChild(F),this.__currentElement=F,this.__stack.push(this.__getStyleState())},k.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var F=this.__stack.pop();this.__applyStyleState(F)},k.prototype.__addTransform=function(F){var V=this.__closestGroupOrSvg();if(V.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:V,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var H=this.__createElement("g");V.appendChild(H),this.__currentElement=H}var W=this.__currentElement.getAttribute("transform");W?W+=" ":W="",W+=F,this.__currentElement.setAttribute("transform",W)},k.prototype.scale=function(F,V){V===void 0&&(V=F),this.__addTransform(I("scale({x},{y})",{x:F,y:V}))},k.prototype.rotate=function(F){var V=180*F/Math.PI;this.__addTransform(I("rotate({angle},{cx},{cy})",{angle:V,cx:0,cy:0}))},k.prototype.translate=function(F,V){this.__addTransform(I("translate({x},{y})",{x:F,y:V}))},k.prototype.transform=function(F,V,H,W,Y,Z){this.__addTransform(I("matrix({a},{b},{c},{d},{e},{f})",{a:F,b:V,c:H,d:W,e:Y,f:Z}))},k.prototype.beginPath=function(){var F;this.__currentDefaultPath="",this.__currentPosition={},F=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(F),this.__currentElement=F},k.prototype.__applyCurrentDefaultPath=function(){var F=this.__currentElement;F.nodeName==="path"?F.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",F.nodeName)},k.prototype.__addPathCommand=function(F){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=F},k.prototype.moveTo=function(F,V){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:F,y:V},this.__addPathCommand(I("M {x} {y}",{x:F,y:V}))},k.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},k.prototype.lineTo=function(F,V){this.__currentPosition={x:F,y:V},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(I("L {x} {y}",{x:F,y:V})):this.__addPathCommand(I("M {x} {y}",{x:F,y:V}))},k.prototype.bezierCurveTo=function(F,V,H,W,Y,Z){this.__currentPosition={x:Y,y:Z},this.__addPathCommand(I("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:F,cp1y:V,cp2x:H,cp2y:W,x:Y,y:Z}))},k.prototype.quadraticCurveTo=function(F,V,H,W){this.__currentPosition={x:H,y:W},this.__addPathCommand(I("Q {cpx} {cpy} {x} {y}",{cpx:F,cpy:V,x:H,y:W}))};var z=function(F){var V=Math.sqrt(F[0]*F[0]+F[1]*F[1]);return[F[0]/V,F[1]/V]};k.prototype.arcTo=function(F,V,H,W,Y){var Z=this.__currentPosition&&this.__currentPosition.x,J=this.__currentPosition&&this.__currentPosition.y;if(Z!==void 0&&J!==void 0){if(Y<0)throw new Error("IndexSizeError: The radius provided ("+Y+") is negative.");if(Z===F&&J===V||F===H&&V===W||Y===0)this.lineTo(F,V);else{var ne=z([Z-F,J-V]),oe=z([H-F,W-V]);if(ne[0]*oe[1]!=ne[1]*oe[0]){var te=ne[0]*oe[0]+ne[1]*oe[1],se=Math.acos(Math.abs(te)),le=z([ne[0]+oe[0],ne[1]+oe[1]]),ue=Y/Math.sin(se/2),ce=F+ue*le[0],ge=V+ue*le[1],me=[-ne[1],ne[0]],Ee=[oe[1],-oe[0]],_e=function(Se){var De=Se[0];return Se[1]>=0?Math.acos(De):-Math.acos(De)},ye=_e(me),be=_e(Ee);this.lineTo(ce+me[0]*Y,ge+me[1]*Y),this.arc(ce,ge,Y,ye,be)}else this.lineTo(F,V)}}},k.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},k.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},k.prototype.rect=function(F,V,H,W){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(F,V),this.lineTo(F+H,V),this.lineTo(F+H,V+W),this.lineTo(F,V+W),this.lineTo(F,V),this.closePath()},k.prototype.fillRect=function(F,V,H,W){var Y;Y=this.__createElement("rect",{x:F,y:V,width:H,height:W},!0),this.__closestGroupOrSvg().appendChild(Y),this.__currentElement=Y,this.__applyStyleToCurrentElement("fill")},k.prototype.strokeRect=function(F,V,H,W){var Y;Y=this.__createElement("rect",{x:F,y:V,width:H,height:W},!0),this.__closestGroupOrSvg().appendChild(Y),this.__currentElement=Y,this.__applyStyleToCurrentElement("stroke")},k.prototype.__clearCanvas=function(){for(var F=this.__closestGroupOrSvg().getAttribute("transform"),V=this.__root.childNodes[1],H=V.childNodes,W=H.length-1;W>=0;W--)H[W]&&V.removeChild(H[W]);this.__currentElement=V,this.__groupStack=[],F&&this.__addTransform(F)},k.prototype.clearRect=function(F,V,H,W){if(F!==0||V!==0||H!==this.width||W!==this.height){var Y,Z=this.__closestGroupOrSvg();Y=this.__createElement("rect",{x:F,y:V,width:H,height:W,fill:"#FFFFFF"},!0),Z.appendChild(Y)}else this.__clearCanvas()},k.prototype.createLinearGradient=function(F,V,H,W){var Y=this.__createElement("linearGradient",{id:q(this.__ids),x1:F+"px",x2:H+"px",y1:V+"px",y2:W+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(Y),new M(Y,this)},k.prototype.createRadialGradient=function(F,V,H,W,Y,Z){var J=this.__createElement("radialGradient",{id:q(this.__ids),cx:W+"px",cy:Y+"px",r:Z+"px",fx:F+"px",fy:V+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(J),new M(J,this)},k.prototype.__parseFont=function(){var F=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),V={style:F[1]||"normal",size:F[4]||"10px",family:F[6]||"sans-serif",weight:F[3]||"normal",decoration:F[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(V.decoration="underline"),this.__fontHref&&(V.href=this.__fontHref),V},k.prototype.__wrapTextLink=function(F,V){if(F.href){var H=this.__createElement("a");return H.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",F.href),H.appendChild(V),H}return V},k.prototype.__applyText=function(F,V,H,W){var Y,Z,J=this.__parseFont(),ne=this.__closestGroupOrSvg(),oe=this.__createElement("text",{"font-family":J.family,"font-size":J.size,"font-style":J.style,"font-weight":J.weight,"text-decoration":J.decoration,x:V,y:H,"text-anchor":(Y=this.textAlign,Z={left:"start",right:"end",center:"middle",start:"start",end:"end"},Z[Y]||Z.start),"dominant-baseline":B(this.textBaseline)},!0);oe.appendChild(this.__document.createTextNode(F)),this.__currentElement=oe,this.__applyStyleToCurrentElement(W),ne.appendChild(this.__wrapTextLink(J,oe))},k.prototype.fillText=function(F,V,H){this.__applyText(F,V,H,"fill")},k.prototype.strokeText=function(F,V,H){this.__applyText(F,V,H,"stroke")},k.prototype.measureText=function(F){return this.__ctx.font=this.font,this.__ctx.measureText(F)},k.prototype.arc=function(F,V,H,W,Y,Z){if(W!==Y){(W%=2*Math.PI)===(Y%=2*Math.PI)&&(Y=(Y+2*Math.PI-.001*(Z?-1:1))%(2*Math.PI));var J=F+H*Math.cos(Y),ne=V+H*Math.sin(Y),oe=F+H*Math.cos(W),te=V+H*Math.sin(W),se=Z?0:1,le=0,ue=Y-W;ue<0&&(ue+=2*Math.PI),le=Z?ue>Math.PI?0:1:ue>Math.PI?1:0,this.lineTo(oe,te),this.__addPathCommand(I("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:H,ry:H,xAxisRotation:0,largeArcFlag:le,sweepFlag:se,endX:J,endY:ne})),this.__currentPosition={x:J,y:ne}}},k.prototype.clip=function(){var F=this.__closestGroupOrSvg(),V=this.__createElement("clipPath"),H=q(this.__ids),W=this.__createElement("g");this.__applyCurrentDefaultPath(),F.removeChild(this.__currentElement),V.setAttribute("id",H),V.appendChild(this.__currentElement),this.__defs.appendChild(V),F.setAttribute("clip-path",I("url(#{id})",{id:H})),F.appendChild(W),this.__currentElement=W},k.prototype.drawImage=function(){var F,V,H,W,Y,Z,J,ne,oe,te,se,le,ue,ce=Array.prototype.slice.call(arguments),ge=ce[0],me=0,Ee=0;if(ce.length===3)F=ce[1],V=ce[2],H=Y=ge.width,W=Z=ge.height;else if(ce.length===5)F=ce[1],V=ce[2],H=ce[3],W=ce[4],Y=ge.width,Z=ge.height;else{if(ce.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);me=ce[1],Ee=ce[2],Y=ce[3],Z=ce[4],F=ce[5],V=ce[6],H=ce[7],W=ce[8]}J=this.__closestGroupOrSvg(),this.__currentElement;var _e="translate("+F+", "+V+")";if(ge instanceof k){if((ne=ge.getSvg().cloneNode(!0)).childNodes&&ne.childNodes.length>1){for(oe=ne.childNodes[0];oe.childNodes.length;)ue=oe.childNodes[0].getAttribute("id"),this.__ids[ue]=ue,this.__defs.appendChild(oe.childNodes[0]);if(te=ne.childNodes[1]){var ye,be=te.getAttribute("transform");ye=be?be+" "+_e:_e,te.setAttribute("transform",ye),J.appendChild(te)}}}else ge.nodeName!=="CANVAS"&&ge.nodeName!=="IMG"||((se=this.__createElement("image")).setAttribute("width",H),se.setAttribute("height",W),se.setAttribute("opacity",this.globalAlpha),se.setAttribute("preserveAspectRatio","none"),(le=this.__document.createElement("canvas")).width=H,le.height=W,le.getContext("2d").drawImage(ge,me,Ee,Y,Z,0,0,H,W),ge=le,se.setAttribute("transform",_e),se.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ge.nodeName==="CANVAS"?ge.toDataURL():ge.getAttribute("src")),J.appendChild(se))},k.prototype.createPattern=function(F,V){var H,W=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),Y=q(this.__ids);return W.setAttribute("id",Y),W.setAttribute("width",F.width),W.setAttribute("height",F.height),F.nodeName==="CANVAS"||F.nodeName==="IMG"?((H=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",F.width),H.setAttribute("height",F.height),H.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",F.nodeName==="CANVAS"?F.toDataURL():F.getAttribute("src")),W.appendChild(H),this.__defs.appendChild(W)):F instanceof k&&(W.appendChild(F.__root.childNodes[1]),this.__defs.appendChild(W)),new N(W,this)},k.prototype.setLineDash=function(F){F&&F.length>0?this.lineDash=F.join(","):this.lineDash=null},k.prototype.drawFocusRing=function(){},k.prototype.createImageData=function(){},k.prototype.getImageData=function(){},k.prototype.putImageData=function(){},k.prototype.globalCompositeOperation=function(){},k.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=k),typeof S.exports=="object"&&(S.exports=k)})()}])}))})(cytoscapeSvg)),cytoscapeSvg.exports}var cytoscapeSvgExports=requireCytoscapeSvg();const cysvg=getDefaultExportFromCjs$1(cytoscapeSvgExports);cytoscape$1.use(dagre);cytoscape$1.use(cysvg);const mainStylesheet=[{selector:"core",style:{"active-bg-size":0}},{selector:"node",style:{"background-opacity":0,"border-width":0,label:"data(label)","text-valign":"center","text-halign":"center","font-family":'Consolas, "Courier New", monospace',"font-size":"20px",events:"no"}},{selector:"edge",style:{width:1,"line-color":"#000","target-arrow-color":"#000","target-arrow-shape":"triangle","curve-style":"bezier","arrow-scale":.8,events:"no"}},{selector:".process-name",style:{color:"#00796b","font-weight":"bold"}},{selector:".keyword",style:{color:"#7e57c2","font-weight":"normal"}},{selector:".root-node",style:{color:"#7e57c2","font-size":"14px","text-transform":"uppercase"}},{selector:".input-action",style:{color:"#1976d2"}},{selector:".output-action",style:{color:"#1976d2"}},{selector:".operator",style:{color:"#546e7a","font-size":"24px","font-weight":"bold"}}];function SyntaxTree({parsedAst:_,onHoverNode:v,onContentResize:S,className:R,...T}){const A=reactExports.useRef(null),k=reactExports.useRef(null),M=reactExports.useMemo(()=>transformAstToSyntaxTree(_),[_]),N=D=>{D.resize(),D.fit(void 0,5),D.zoom()>1.15&&(D.zoom(1.15),D.center()),D.zoom()<.6&&(D.zoom(.6),D.center());const I=D.pan();D.pan({x:I.x,y:I.y})};return reactExports.useEffect(()=>{const D=A.current;if(D&&D){const I=D.layout({name:"dagre",rankDir:"TB",spacingFactor:.7,nodeSep:70,rankSep:70,fit:!1});I.on("layoutstop",()=>{const q=D.elements().boundingBox();S&&S({width:q.w+50,height:q.h+0}),N(D)}),I.run()}},[M,S]),reactExports.useEffect(()=>{if(!k.current)return;const D=new ResizeObserver(()=>{A.current&&requestAnimationFrame(()=>{A.current&&N(A.current)})});return D.observe(k.current),()=>D.disconnect()},[]),jsxRuntimeExports.jsxs("div",{ref:k,className:cn$1("relative",R),...T,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-0 z-10",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",className:"bg-stone-100/50 backdrop-blur-sm shadow-sm hover:bg-stone-50 cursor-pointer",children:jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(A.current,"png"),children:"Sthnout jako PNG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(A.current,"svg"),children:"Sthnout jako SVG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(A.current,"json"),children:"Sthnout jako JSON"})]})]})}),jsxRuntimeExports.jsx(w,{elements:M,style:{width:"100%",height:"100%"},stylesheet:mainStylesheet,textureOnViewport:!1,hideEdgesOnViewport:!1,pixelRatio:1.5,cy:D=>{A.current=D,D.container().style.cursor="grab",D.autoungrabify(!0),D.boxSelectionEnabled(!1),D.maxZoom(1.15),v&&(D.on("mousemove",I=>{const q=I.position,B=D.nodes().filter(z=>{const F=z.boundingBox();return q.x>=F.x1&&q.x<=F.x2&&q.y>=F.y1&&q.y<=F.y2}).first();if(B.length>0){const z=B.data("locStart"),F=B.data("locEnd");typeof z=="number"&&typeof F=="number"&&v({from:z,to:F})}else v(null)}),D.on("mouseout",()=>{v(null)}))}})]})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var R in S)({}).hasOwnProperty.call(S,R)&&(_[R]=S[R])}return _},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(_,v){if(_==null)return{};var S={};for(var R in _)if({}.hasOwnProperty.call(_,R)){if(v.indexOf(R)!==-1)continue;S[R]=_[R]}return S}let rangeFrom=[],rangeTo=[];(()=>{let _="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(v=>v?parseInt(v,36):1);for(let v=0,S=0;v<_.length;v++)(v%2?rangeTo:rangeFrom).push(S=S+_[v])})();function isExtendingChar(_){if(_<768)return!1;for(let v=0,S=rangeFrom.length;;){let R=v+S>>1;if(_<rangeFrom[R])S=R;else if(_>=rangeTo[R])v=R+1;else return!0;if(v==S)return!1}}function isRegionalIndicator(_){return _>=127462&&_<=127487}const ZWJ=8205;function findClusterBreak$1(_,v,S=!0,R=!0){return(S?nextClusterBreak:prevClusterBreak)(_,v,R)}function nextClusterBreak(_,v,S){if(v==_.length)return v;v&&surrogateLow$1(_.charCodeAt(v))&&surrogateHigh$1(_.charCodeAt(v-1))&&v--;let R=codePointAt$1(_,v);for(v+=codePointSize$1(R);v<_.length;){let T=codePointAt$1(_,v);if(R==ZWJ||T==ZWJ||S&&isExtendingChar(T))v+=codePointSize$1(T),R=T;else if(isRegionalIndicator(T)){let A=0,k=v-2;for(;k>=0&&isRegionalIndicator(codePointAt$1(_,k));)A++,k-=2;if(A%2==0)break;v+=2}else break}return v}function prevClusterBreak(_,v,S){for(;v>0;){let R=nextClusterBreak(_,v-2,S);if(R<v)return R;v--}return 0}function codePointAt$1(_,v){let S=_.charCodeAt(v);if(!surrogateHigh$1(S)||v+1==_.length)return S;let R=_.charCodeAt(v+1);return surrogateLow$1(R)?(S-55296<<10)+(R-56320)+65536:S}function surrogateLow$1(_){return _>=56320&&_<57344}function surrogateHigh$1(_){return _>=55296&&_<56320}function codePointSize$1(_){return _<65536?1:2}class Text{lineAt(v){if(v<0||v>this.length)throw new RangeError(`Invalid position ${v} in document of length ${this.length}`);return this.lineInner(v,!1,1,0)}line(v){if(v<1||v>this.lines)throw new RangeError(`Invalid line number ${v} in ${this.lines}-line document`);return this.lineInner(v,!0,1,0)}replace(v,S,R){[v,S]=clip(this,v,S);let T=[];return this.decompose(0,v,T,2),R.length&&R.decompose(0,R.length,T,3),this.decompose(S,this.length,T,1),TextNode.from(T,this.length-(S-v)+R.length)}append(v){return this.replace(this.length,this.length,v)}slice(v,S=this.length){[v,S]=clip(this,v,S);let R=[];return this.decompose(v,S,R,0),TextNode.from(R,S-v)}eq(v){if(v==this)return!0;if(v.length!=this.length||v.lines!=this.lines)return!1;let S=this.scanIdentical(v,1),R=this.length-this.scanIdentical(v,-1),T=new RawTextCursor(this),A=new RawTextCursor(v);for(let k=S,M=S;;){if(T.next(k),A.next(k),k=0,T.lineBreak!=A.lineBreak||T.done!=A.done||T.value!=A.value)return!1;if(M+=T.value.length,T.done||M>=R)return!0}}iter(v=1){return new RawTextCursor(this,v)}iterRange(v,S=this.length){return new PartialTextCursor(this,v,S)}iterLines(v,S){let R;if(v==null)R=this.iter();else{S==null&&(S=this.lines+1);let T=this.line(v).from;R=this.iterRange(T,Math.max(T,S==this.lines+1?this.length:S<=1?0:this.line(S-1).to))}return new LineCursor(R)}toString(){return this.sliceString(0)}toJSON(){let v=[];return this.flatten(v),v}constructor(){}static of(v){if(v.length==0)throw new RangeError("A document must have at least one line");return v.length==1&&!v[0]?Text.empty:v.length<=32?new TextLeaf(v):TextNode.from(TextLeaf.split(v,[]))}}class TextLeaf extends Text{constructor(v,S=textLength(v)){super(),this.text=v,this.length=S}get lines(){return this.text.length}get children(){return null}lineInner(v,S,R,T){for(let A=0;;A++){let k=this.text[A],M=T+k.length;if((S?R:M)>=v)return new Line(T,M,R,k);T=M+1,R++}}decompose(v,S,R,T){let A=v<=0&&S>=this.length?this:new TextLeaf(sliceText(this.text,v,S),Math.min(S,this.length)-Math.max(0,v));if(T&1){let k=R.pop(),M=appendText(A.text,k.text.slice(),0,A.length);if(M.length<=32)R.push(new TextLeaf(M,k.length+A.length));else{let N=M.length>>1;R.push(new TextLeaf(M.slice(0,N)),new TextLeaf(M.slice(N)))}}else R.push(A)}replace(v,S,R){if(!(R instanceof TextLeaf))return super.replace(v,S,R);[v,S]=clip(this,v,S);let T=appendText(this.text,appendText(R.text,sliceText(this.text,0,v)),S),A=this.length+R.length-(S-v);return T.length<=32?new TextLeaf(T,A):TextNode.from(TextLeaf.split(T,[]),A)}sliceString(v,S=this.length,R=`
`){[v,S]=clip(this,v,S);let T="";for(let A=0,k=0;A<=S&&k<this.text.length;k++){let M=this.text[k],N=A+M.length;A>v&&k&&(T+=R),v<N&&S>A&&(T+=M.slice(Math.max(0,v-A),S-A)),A=N+1}return T}flatten(v){for(let S of this.text)v.push(S)}scanIdentical(){return 0}static split(v,S){let R=[],T=-1;for(let A of v)R.push(A),T+=A.length+1,R.length==32&&(S.push(new TextLeaf(R,T)),R=[],T=-1);return T>-1&&S.push(new TextLeaf(R,T)),S}}class TextNode extends Text{constructor(v,S){super(),this.children=v,this.length=S,this.lines=0;for(let R of v)this.lines+=R.lines}lineInner(v,S,R,T){for(let A=0;;A++){let k=this.children[A],M=T+k.length,N=R+k.lines-1;if((S?N:M)>=v)return k.lineInner(v,S,R,T);T=M+1,R=N+1}}decompose(v,S,R,T){for(let A=0,k=0;k<=S&&A<this.children.length;A++){let M=this.children[A],N=k+M.length;if(v<=N&&S>=k){let D=T&((k<=v?1:0)|(N>=S?2:0));k>=v&&N<=S&&!D?R.push(M):M.decompose(v-k,S-k,R,D)}k=N+1}}replace(v,S,R){if([v,S]=clip(this,v,S),R.lines<this.lines)for(let T=0,A=0;T<this.children.length;T++){let k=this.children[T],M=A+k.length;if(v>=A&&S<=M){let N=k.replace(v-A,S-A,R),D=this.lines-k.lines+N.lines;if(N.lines<D>>4&&N.lines>D>>6){let I=this.children.slice();return I[T]=N,new TextNode(I,this.length-(S-v)+R.length)}return super.replace(A,M,N)}A=M+1}return super.replace(v,S,R)}sliceString(v,S=this.length,R=`
`){[v,S]=clip(this,v,S);let T="";for(let A=0,k=0;A<this.children.length&&k<=S;A++){let M=this.children[A],N=k+M.length;k>v&&A&&(T+=R),v<N&&S>k&&(T+=M.sliceString(v-k,S-k,R)),k=N+1}return T}flatten(v){for(let S of this.children)S.flatten(v)}scanIdentical(v,S){if(!(v instanceof TextNode))return 0;let R=0,[T,A,k,M]=S>0?[0,0,this.children.length,v.children.length]:[this.children.length-1,v.children.length-1,-1,-1];for(;;T+=S,A+=S){if(T==k||A==M)return R;let N=this.children[T],D=v.children[A];if(N!=D)return R+N.scanIdentical(D,S);R+=N.length+1}}static from(v,S=v.reduce((R,T)=>R+T.length+1,-1)){let R=0;for(let z of v)R+=z.lines;if(R<32){let z=[];for(let F of v)F.flatten(z);return new TextLeaf(z,S)}let T=Math.max(32,R>>5),A=T<<1,k=T>>1,M=[],N=0,D=-1,I=[];function q(z){let F;if(z.lines>A&&z instanceof TextNode)for(let V of z.children)q(V);else z.lines>k&&(N>k||!N)?(B(),M.push(z)):z instanceof TextLeaf&&N&&(F=I[I.length-1])instanceof TextLeaf&&z.lines+F.lines<=32?(N+=z.lines,D+=z.length+1,I[I.length-1]=new TextLeaf(F.text.concat(z.text),F.length+1+z.length)):(N+z.lines>T&&B(),N+=z.lines,D+=z.length+1,I.push(z))}function B(){N!=0&&(M.push(I.length==1?I[0]:TextNode.from(I,D)),D=-1,N=I.length=0)}for(let z of v)q(z);return B(),M.length==1?M[0]:new TextNode(M,S)}}Text.empty=new TextLeaf([""],0);function textLength(_){let v=-1;for(let S of _)v+=S.length+1;return v}function appendText(_,v,S=0,R=1e9){for(let T=0,A=0,k=!0;A<_.length&&T<=R;A++){let M=_[A],N=T+M.length;N>=S&&(N>R&&(M=M.slice(0,R-T)),T<S&&(M=M.slice(S-T)),k?(v[v.length-1]+=M,k=!1):v.push(M)),T=N+1}return v}function sliceText(_,v,S){return appendText(_,[""],v,S)}class RawTextCursor{constructor(v,S=1){this.dir=S,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[v],this.offsets=[S>0?1:(v instanceof TextLeaf?v.text.length:v.children.length)<<1]}nextInner(v,S){for(this.done=this.lineBreak=!1;;){let R=this.nodes.length-1,T=this.nodes[R],A=this.offsets[R],k=A>>1,M=T instanceof TextLeaf?T.text.length:T.children.length;if(k==(S>0?M:0)){if(R==0)return this.done=!0,this.value="",this;S>0&&this.offsets[R-1]++,this.nodes.pop(),this.offsets.pop()}else if((A&1)==(S>0?0:1)){if(this.offsets[R]+=S,v==0)return this.lineBreak=!0,this.value=`
`,this;v--}else if(T instanceof TextLeaf){let N=T.text[k+(S<0?-1:0)];if(this.offsets[R]+=S,N.length>Math.max(0,v))return this.value=v==0?N:S>0?N.slice(v):N.slice(0,N.length-v),this;v-=N.length}else{let N=T.children[k+(S<0?-1:0)];v>N.length?(v-=N.length,this.offsets[R]+=S):(S<0&&this.offsets[R]--,this.nodes.push(N),this.offsets.push(S>0?1:(N instanceof TextLeaf?N.text.length:N.children.length)<<1))}}}next(v=0){return v<0&&(this.nextInner(-v,-this.dir),v=this.value.length),this.nextInner(v,this.dir)}}class PartialTextCursor{constructor(v,S,R){this.value="",this.done=!1,this.cursor=new RawTextCursor(v,S>R?-1:1),this.pos=S>R?v.length:0,this.from=Math.min(S,R),this.to=Math.max(S,R)}nextInner(v,S){if(S<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;v+=Math.max(0,S<0?this.pos-this.to:this.from-this.pos);let R=S<0?this.pos-this.from:this.to-this.pos;v>R&&(v=R),R-=v;let{value:T}=this.cursor.next(v);return this.pos+=(T.length+v)*S,this.value=T.length<=R?T:S<0?T.slice(T.length-R):T.slice(0,R),this.done=!this.value,this}next(v=0){return v<0?v=Math.max(v,this.from-this.pos):v>0&&(v=Math.min(v,this.to-this.pos)),this.nextInner(v,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(v){this.inner=v,this.afterBreak=!0,this.value="",this.done=!1}next(v=0){let{done:S,lineBreak:R,value:T}=this.inner.next(v);return S&&this.afterBreak?(this.value="",this.afterBreak=!1):S?(this.done=!0,this.value=""):R?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=T,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(v,S,R,T){this.from=v,this.to=S,this.number=R,this.text=T}get length(){return this.to-this.from}}function clip(_,v,S){return v=Math.max(0,Math.min(_.length,v)),[v,Math.max(v,Math.min(_.length,S))]}function findClusterBreak(_,v,S=!0,R=!0){return findClusterBreak$1(_,v,S,R)}function surrogateLow(_){return _>=56320&&_<57344}function surrogateHigh(_){return _>=55296&&_<56320}function codePointAt(_,v){let S=_.charCodeAt(v);if(!surrogateHigh(S)||v+1==_.length)return S;let R=_.charCodeAt(v+1);return surrogateLow(R)?(S-55296<<10)+(R-56320)+65536:S}function fromCodePoint(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}function codePointSize(_){return _<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=(function(_){return _[_.Simple=0]="Simple",_[_.TrackDel=1]="TrackDel",_[_.TrackBefore=2]="TrackBefore",_[_.TrackAfter=3]="TrackAfter",_})(MapMode||(MapMode={}));class ChangeDesc{constructor(v){this.sections=v}get length(){let v=0;for(let S=0;S<this.sections.length;S+=2)v+=this.sections[S];return v}get newLength(){let v=0;for(let S=0;S<this.sections.length;S+=2){let R=this.sections[S+1];v+=R<0?this.sections[S]:R}return v}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(v){for(let S=0,R=0,T=0;S<this.sections.length;){let A=this.sections[S++],k=this.sections[S++];k<0?(v(R,T,A),T+=A):T+=k,R+=A}}iterChangedRanges(v,S=!1){iterChanges(this,v,S)}get invertedDesc(){let v=[];for(let S=0;S<this.sections.length;){let R=this.sections[S++],T=this.sections[S++];T<0?v.push(R,T):v.push(T,R)}return new ChangeDesc(v)}composeDesc(v){return this.empty?v:v.empty?this:composeSets(this,v)}mapDesc(v,S=!1){return v.empty?this:mapSet(this,v,S)}mapPos(v,S=-1,R=MapMode.Simple){let T=0,A=0;for(let k=0;k<this.sections.length;){let M=this.sections[k++],N=this.sections[k++],D=T+M;if(N<0){if(D>v)return A+(v-T);A+=M}else{if(R!=MapMode.Simple&&D>=v&&(R==MapMode.TrackDel&&T<v&&D>v||R==MapMode.TrackBefore&&T<v||R==MapMode.TrackAfter&&D>v))return null;if(D>v||D==v&&S<0&&!M)return v==T||S<0?A:A+N;A+=N}T=D}if(v>T)throw new RangeError(`Position ${v} is out of range for changeset of length ${T}`);return A}touchesRange(v,S=v){for(let R=0,T=0;R<this.sections.length&&T<=S;){let A=this.sections[R++],k=this.sections[R++],M=T+A;if(k>=0&&T<=S&&M>=v)return T<v&&M>S?"cover":!0;T=M}return!1}toString(){let v="";for(let S=0;S<this.sections.length;){let R=this.sections[S++],T=this.sections[S++];v+=(v?" ":"")+R+(T>=0?":"+T:"")}return v}toJSON(){return this.sections}static fromJSON(v){if(!Array.isArray(v)||v.length%2||v.some(S=>typeof S!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(v)}static create(v){return new ChangeDesc(v)}}class ChangeSet extends ChangeDesc{constructor(v,S){super(v),this.inserted=S}apply(v){if(this.length!=v.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(S,R,T,A,k)=>v=v.replace(T,T+(R-S),k),!1),v}mapDesc(v,S=!1){return mapSet(this,v,S,!0)}invert(v){let S=this.sections.slice(),R=[];for(let T=0,A=0;T<S.length;T+=2){let k=S[T],M=S[T+1];if(M>=0){S[T]=M,S[T+1]=k;let N=T>>1;for(;R.length<N;)R.push(Text.empty);R.push(k?v.slice(A,A+k):Text.empty)}A+=k}return new ChangeSet(S,R)}compose(v){return this.empty?v:v.empty?this:composeSets(this,v,!0)}map(v,S=!1){return v.empty?this:mapSet(this,v,S,!0)}iterChanges(v,S=!1){iterChanges(this,v,S)}get desc(){return ChangeDesc.create(this.sections)}filter(v){let S=[],R=[],T=[],A=new SectionIter(this);e:for(let k=0,M=0;;){let N=k==v.length?1e9:v[k++];for(;M<N||M==N&&A.len==0;){if(A.done)break e;let I=Math.min(A.len,N-M);addSection(T,I,-1);let q=A.ins==-1?-1:A.off==0?A.ins:0;addSection(S,I,q),q>0&&addInsert(R,S,A.text),A.forward(I),M+=I}let D=v[k++];for(;M<D;){if(A.done)break e;let I=Math.min(A.len,D-M);addSection(S,I,-1),addSection(T,I,A.ins==-1?-1:A.off==0?A.ins:0),A.forward(I),M+=I}}return{changes:new ChangeSet(S,R),filtered:ChangeDesc.create(T)}}toJSON(){let v=[];for(let S=0;S<this.sections.length;S+=2){let R=this.sections[S],T=this.sections[S+1];T<0?v.push(R):T==0?v.push([R]):v.push([R].concat(this.inserted[S>>1].toJSON()))}return v}static of(v,S,R){let T=[],A=[],k=0,M=null;function N(I=!1){if(!I&&!T.length)return;k<S&&addSection(T,S-k,-1);let q=new ChangeSet(T,A);M=M?M.compose(q.map(M)):q,T=[],A=[],k=0}function D(I){if(Array.isArray(I))for(let q of I)D(q);else if(I instanceof ChangeSet){if(I.length!=S)throw new RangeError(`Mismatched change set length (got ${I.length}, expected ${S})`);N(),M=M?M.compose(I.map(M)):I}else{let{from:q,to:B=q,insert:z}=I;if(q>B||q<0||B>S)throw new RangeError(`Invalid change range ${q} to ${B} (in doc of length ${S})`);let F=z?typeof z=="string"?Text.of(z.split(R||DefaultSplit)):z:Text.empty,V=F.length;if(q==B&&V==0)return;q<k&&N(),q>k&&addSection(T,q-k,-1),addSection(T,B-q,V),addInsert(A,T,F),k=B}}return D(v),N(!M),M}static empty(v){return new ChangeSet(v?[v,-1]:[],[])}static fromJSON(v){if(!Array.isArray(v))throw new RangeError("Invalid JSON representation of ChangeSet");let S=[],R=[];for(let T=0;T<v.length;T++){let A=v[T];if(typeof A=="number")S.push(A,-1);else{if(!Array.isArray(A)||typeof A[0]!="number"||A.some((k,M)=>M&&typeof k!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(A.length==1)S.push(A[0],0);else{for(;R.length<T;)R.push(Text.empty);R[T]=Text.of(A.slice(1)),S.push(A[0],R[T].length)}}}return new ChangeSet(S,R)}static createSet(v,S){return new ChangeSet(v,S)}}function addSection(_,v,S,R=!1){if(v==0&&S<=0)return;let T=_.length-2;T>=0&&S<=0&&S==_[T+1]?_[T]+=v:T>=0&&v==0&&_[T]==0?_[T+1]+=S:R?(_[T]+=v,_[T+1]+=S):_.push(v,S)}function addInsert(_,v,S){if(S.length==0)return;let R=v.length-2>>1;if(R<_.length)_[_.length-1]=_[_.length-1].append(S);else{for(;_.length<R;)_.push(Text.empty);_.push(S)}}function iterChanges(_,v,S){let R=_.inserted;for(let T=0,A=0,k=0;k<_.sections.length;){let M=_.sections[k++],N=_.sections[k++];if(N<0)T+=M,A+=M;else{let D=T,I=A,q=Text.empty;for(;D+=M,I+=N,N&&R&&(q=q.append(R[k-2>>1])),!(S||k==_.sections.length||_.sections[k+1]<0);)M=_.sections[k++],N=_.sections[k++];v(T,D,A,I,q),T=D,A=I}}}function mapSet(_,v,S,R=!1){let T=[],A=R?[]:null,k=new SectionIter(_),M=new SectionIter(v);for(let N=-1;;){if(k.done&&M.len||M.done&&k.len)throw new Error("Mismatched change set lengths");if(k.ins==-1&&M.ins==-1){let D=Math.min(k.len,M.len);addSection(T,D,-1),k.forward(D),M.forward(D)}else if(M.ins>=0&&(k.ins<0||N==k.i||k.off==0&&(M.len<k.len||M.len==k.len&&!S))){let D=M.len;for(addSection(T,M.ins,-1);D;){let I=Math.min(k.len,D);k.ins>=0&&N<k.i&&k.len<=I&&(addSection(T,0,k.ins),A&&addInsert(A,T,k.text),N=k.i),k.forward(I),D-=I}M.next()}else if(k.ins>=0){let D=0,I=k.len;for(;I;)if(M.ins==-1){let q=Math.min(I,M.len);D+=q,I-=q,M.forward(q)}else if(M.ins==0&&M.len<I)I-=M.len,M.next();else break;addSection(T,D,N<k.i?k.ins:0),A&&N<k.i&&addInsert(A,T,k.text),N=k.i,k.forward(k.len-I)}else{if(k.done&&M.done)return A?ChangeSet.createSet(T,A):ChangeDesc.create(T);throw new Error("Mismatched change set lengths")}}}function composeSets(_,v,S=!1){let R=[],T=S?[]:null,A=new SectionIter(_),k=new SectionIter(v);for(let M=!1;;){if(A.done&&k.done)return T?ChangeSet.createSet(R,T):ChangeDesc.create(R);if(A.ins==0)addSection(R,A.len,0,M),A.next();else if(k.len==0&&!k.done)addSection(R,0,k.ins,M),T&&addInsert(T,R,k.text),k.next();else{if(A.done||k.done)throw new Error("Mismatched change set lengths");{let N=Math.min(A.len2,k.len),D=R.length;if(A.ins==-1){let I=k.ins==-1?-1:k.off?0:k.ins;addSection(R,N,I,M),T&&I&&addInsert(T,R,k.text)}else k.ins==-1?(addSection(R,A.off?0:A.len,N,M),T&&addInsert(T,R,A.textBit(N))):(addSection(R,A.off?0:A.len,k.off?0:k.ins,M),T&&!k.off&&addInsert(T,R,k.text));M=(A.ins>N||k.ins>=0&&k.len>N)&&(M||R.length>D),A.forward2(N),k.forward(N)}}}}class SectionIter{constructor(v){this.set=v,this.i=0,this.next()}next(){let{sections:v}=this.set;this.i<v.length?(this.len=v[this.i++],this.ins=v[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:v}=this.set,S=this.i-2>>1;return S>=v.length?Text.empty:v[S]}textBit(v){let{inserted:S}=this.set,R=this.i-2>>1;return R>=S.length&&!v?Text.empty:S[R].slice(this.off,v==null?void 0:this.off+v)}forward(v){v==this.len?this.next():(this.len-=v,this.off+=v)}forward2(v){this.ins==-1?this.forward(v):v==this.ins?this.next():(this.ins-=v,this.off+=v)}}class SelectionRange{constructor(v,S,R){this.from=v,this.to=S,this.flags=R}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let v=this.flags&7;return v==7?null:v}get goalColumn(){let v=this.flags>>6;return v==16777215?void 0:v}map(v,S=-1){let R,T;return this.empty?R=T=v.mapPos(this.from,S):(R=v.mapPos(this.from,1),T=v.mapPos(this.to,-1)),R==this.from&&T==this.to?this:new SelectionRange(R,T,this.flags)}extend(v,S=v){if(v<=this.anchor&&S>=this.anchor)return EditorSelection.range(v,S);let R=Math.abs(v-this.anchor)>Math.abs(S-this.anchor)?v:S;return EditorSelection.range(this.anchor,R)}eq(v,S=!1){return this.anchor==v.anchor&&this.head==v.head&&(!S||!this.empty||this.assoc==v.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(v){if(!v||typeof v.anchor!="number"||typeof v.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(v.anchor,v.head)}static create(v,S,R){return new SelectionRange(v,S,R)}}class EditorSelection{constructor(v,S){this.ranges=v,this.mainIndex=S}map(v,S=-1){return v.empty?this:EditorSelection.create(this.ranges.map(R=>R.map(v,S)),this.mainIndex)}eq(v,S=!1){if(this.ranges.length!=v.ranges.length||this.mainIndex!=v.mainIndex)return!1;for(let R=0;R<this.ranges.length;R++)if(!this.ranges[R].eq(v.ranges[R],S))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(v,S=!0){return EditorSelection.create([v].concat(this.ranges),S?0:this.mainIndex+1)}replaceRange(v,S=this.mainIndex){let R=this.ranges.slice();return R[S]=v,EditorSelection.create(R,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(v=>v.toJSON()),main:this.mainIndex}}static fromJSON(v){if(!v||!Array.isArray(v.ranges)||typeof v.main!="number"||v.main>=v.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(v.ranges.map(S=>SelectionRange.fromJSON(S)),v.main)}static single(v,S=v){return new EditorSelection([EditorSelection.range(v,S)],0)}static create(v,S=0){if(v.length==0)throw new RangeError("A selection needs at least one range");for(let R=0,T=0;T<v.length;T++){let A=v[T];if(A.empty?A.from<=R:A.from<R)return EditorSelection.normalized(v.slice(),S);R=A.to}return new EditorSelection(v,S)}static cursor(v,S=0,R,T){return SelectionRange.create(v,v,(S==0?0:S<0?8:16)|(R==null?7:Math.min(6,R))|(T??16777215)<<6)}static range(v,S,R,T){let A=(R??16777215)<<6|(T==null?7:Math.min(6,T));return S<v?SelectionRange.create(S,v,48|A):SelectionRange.create(v,S,(S>v?8:0)|A)}static normalized(v,S=0){let R=v[S];v.sort((T,A)=>T.from-A.from),S=v.indexOf(R);for(let T=1;T<v.length;T++){let A=v[T],k=v[T-1];if(A.empty?A.from<=k.to:A.from<k.to){let M=k.from,N=Math.max(A.to,k.to);T<=S&&S--,v.splice(--T,2,A.anchor>A.head?EditorSelection.range(N,M):EditorSelection.range(M,N))}}return new EditorSelection(v,S)}}function checkSelection(_,v){for(let S of _.ranges)if(S.to>v)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(v,S,R,T,A){this.combine=v,this.compareInput=S,this.compare=R,this.isStatic=T,this.id=nextID++,this.default=v([]),this.extensions=typeof A=="function"?A(this):A}get reader(){return this}static define(v={}){return new Facet(v.combine||(S=>S),v.compareInput||((S,R)=>S===R),v.compare||(v.combine?(S,R)=>S===R:sameArray$1),!!v.static,v.enables)}of(v){return new FacetProvider([],this,0,v)}compute(v,S){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(v,this,1,S)}computeN(v,S){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(v,this,2,S)}from(v,S){return S||(S=R=>R),this.compute([v],R=>S(R.field(v)))}}function sameArray$1(_,v){return _==v||_.length==v.length&&_.every((S,R)=>S===v[R])}class FacetProvider{constructor(v,S,R,T){this.dependencies=v,this.facet=S,this.type=R,this.value=T,this.id=nextID++}dynamicSlot(v){var S;let R=this.value,T=this.facet.compareInput,A=this.id,k=v[A]>>1,M=this.type==2,N=!1,D=!1,I=[];for(let q of this.dependencies)q=="doc"?N=!0:q=="selection"?D=!0:(((S=v[q.id])!==null&&S!==void 0?S:1)&1)==0&&I.push(v[q.id]);return{create(q){return q.values[k]=R(q),1},update(q,B){if(N&&B.docChanged||D&&(B.docChanged||B.selection)||ensureAll(q,I)){let z=R(q);if(M?!compareArray(z,q.values[k],T):!T(z,q.values[k]))return q.values[k]=z,1}return 0},reconfigure:(q,B)=>{let z,F=B.config.address[A];if(F!=null){let V=getAddr(B,F);if(this.dependencies.every(H=>H instanceof Facet?B.facet(H)===q.facet(H):H instanceof StateField?B.field(H,!1)==q.field(H,!1):!0)||(M?compareArray(z=R(q),V,T):T(z=R(q),V)))return q.values[k]=V,0}else z=R(q);return q.values[k]=z,1}}}}function compareArray(_,v,S){if(_.length!=v.length)return!1;for(let R=0;R<_.length;R++)if(!S(_[R],v[R]))return!1;return!0}function ensureAll(_,v){let S=!1;for(let R of v)ensureAddr(_,R)&1&&(S=!0);return S}function dynamicFacetSlot(_,v,S){let R=S.map(N=>_[N.id]),T=S.map(N=>N.type),A=R.filter(N=>!(N&1)),k=_[v.id]>>1;function M(N){let D=[];for(let I=0;I<R.length;I++){let q=getAddr(N,R[I]);if(T[I]==2)for(let B of q)D.push(B);else D.push(q)}return v.combine(D)}return{create(N){for(let D of R)ensureAddr(N,D);return N.values[k]=M(N),1},update(N,D){if(!ensureAll(N,A))return 0;let I=M(N);return v.compare(I,N.values[k])?0:(N.values[k]=I,1)},reconfigure(N,D){let I=ensureAll(N,R),q=D.config.facets[v.id],B=D.facet(v);if(q&&!I&&sameArray$1(S,q))return N.values[k]=B,0;let z=M(N);return v.compare(z,B)?(N.values[k]=B,0):(N.values[k]=z,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(v,S,R,T,A){this.id=v,this.createF=S,this.updateF=R,this.compareF=T,this.spec=A,this.provides=void 0}static define(v){let S=new StateField(nextID++,v.create,v.update,v.compare||((R,T)=>R===T),v);return v.provide&&(S.provides=v.provide(S)),S}create(v){let S=v.facet(initField).find(R=>R.field==this);return(S?.create||this.createF)(v)}slot(v){let S=v[this.id]>>1;return{create:R=>(R.values[S]=this.create(R),1),update:(R,T)=>{let A=R.values[S],k=this.updateF(A,T);return this.compareF(A,k)?0:(R.values[S]=k,1)},reconfigure:(R,T)=>{let A=R.facet(initField),k=T.facet(initField),M;return(M=A.find(N=>N.field==this))&&M!=k.find(N=>N.field==this)?(R.values[S]=M.create(R),1):T.config.address[this.id]!=null?(R.values[S]=T.field(this),0):(R.values[S]=this.create(R),1)}}}init(v){return[this,initField.of({field:this,create:v})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(_){return v=>new PrecExtension(v,_)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(v,S){this.inner=v,this.prec=S}}class Compartment{of(v){return new CompartmentInstance(this,v)}reconfigure(v){return Compartment.reconfigure.of({compartment:this,extension:v})}get(v){return v.config.compartments.get(this)}}class CompartmentInstance{constructor(v,S){this.compartment=v,this.inner=S}}class Configuration{constructor(v,S,R,T,A,k){for(this.base=v,this.compartments=S,this.dynamicSlots=R,this.address=T,this.staticValues=A,this.facets=k,this.statusTemplate=[];this.statusTemplate.length<R.length;)this.statusTemplate.push(0)}staticFacet(v){let S=this.address[v.id];return S==null?v.default:this.staticValues[S>>1]}static resolve(v,S,R){let T=[],A=Object.create(null),k=new Map;for(let B of flatten$1(v,S,k))B instanceof StateField?T.push(B):(A[B.facet.id]||(A[B.facet.id]=[])).push(B);let M=Object.create(null),N=[],D=[];for(let B of T)M[B.id]=D.length<<1,D.push(z=>B.slot(z));let I=R?.config.facets;for(let B in A){let z=A[B],F=z[0].facet,V=I&&I[B]||[];if(z.every(H=>H.type==0))if(M[F.id]=N.length<<1|1,sameArray$1(V,z))N.push(R.facet(F));else{let H=F.combine(z.map(W=>W.value));N.push(R&&F.compare(H,R.facet(F))?R.facet(F):H)}else{for(let H of z)H.type==0?(M[H.id]=N.length<<1|1,N.push(H.value)):(M[H.id]=D.length<<1,D.push(W=>H.dynamicSlot(W)));M[F.id]=D.length<<1,D.push(H=>dynamicFacetSlot(H,F,z))}}let q=D.map(B=>B(M));return new Configuration(v,k,q,M,N,A)}}function flatten$1(_,v,S){let R=[[],[],[],[],[]],T=new Map;function A(k,M){let N=T.get(k);if(N!=null){if(N<=M)return;let D=R[N].indexOf(k);D>-1&&R[N].splice(D,1),k instanceof CompartmentInstance&&S.delete(k.compartment)}if(T.set(k,M),Array.isArray(k))for(let D of k)A(D,M);else if(k instanceof CompartmentInstance){if(S.has(k.compartment))throw new RangeError("Duplicate use of compartment in extensions");let D=v.get(k.compartment)||k.inner;S.set(k.compartment,D),A(D,M)}else if(k instanceof PrecExtension)A(k.inner,k.prec);else if(k instanceof StateField)R[M].push(k),k.provides&&A(k.provides,M);else if(k instanceof FacetProvider)R[M].push(k),k.facet.extensions&&A(k.facet.extensions,Prec_.default);else{let D=k.extension;if(!D)throw new Error(`Unrecognized extension value in extension set (${k}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);A(D,M)}}return A(_,Prec_.default),R.reduce((k,M)=>k.concat(M))}function ensureAddr(_,v){if(v&1)return 2;let S=v>>1,R=_.status[S];if(R==4)throw new Error("Cyclic dependency between fields and/or facets");if(R&2)return R;_.status[S]=4;let T=_.computeSlot(_,_.config.dynamicSlots[S]);return _.status[S]=2|T}function getAddr(_,v){return v&1?_.config.staticValues[v>>1]:_.values[v>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:_=>_.some(v=>v),static:!0}),lineSeparator=Facet.define({combine:_=>_.length?_[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:_=>_.length?_[0]:!1});class Annotation{constructor(v,S){this.type=v,this.value=S}static define(){return new AnnotationType}}class AnnotationType{of(v){return new Annotation(this,v)}}class StateEffectType{constructor(v){this.map=v}of(v){return new StateEffect(this,v)}}class StateEffect{constructor(v,S){this.type=v,this.value=S}map(v){let S=this.type.map(this.value,v);return S===void 0?void 0:S==this.value?this:new StateEffect(this.type,S)}is(v){return this.type==v}static define(v={}){return new StateEffectType(v.map||(S=>S))}static mapEffects(v,S){if(!v.length)return v;let R=[];for(let T of v){let A=T.map(S);A&&R.push(A)}return R}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(v,S,R,T,A,k){this.startState=v,this.changes=S,this.selection=R,this.effects=T,this.annotations=A,this.scrollIntoView=k,this._doc=null,this._state=null,R&&checkSelection(R,S.newLength),A.some(M=>M.type==Transaction.time)||(this.annotations=A.concat(Transaction.time.of(Date.now())))}static create(v,S,R,T,A,k){return new Transaction(v,S,R,T,A,k)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(v){for(let S of this.annotations)if(S.type==v)return S.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(v){let S=this.annotation(Transaction.userEvent);return!!(S&&(S==v||S.length>v.length&&S.slice(0,v.length)==v&&S[v.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(_,v){let S=[];for(let R=0,T=0;;){let A,k;if(R<_.length&&(T==v.length||v[T]>=_[R]))A=_[R++],k=_[R++];else if(T<v.length)A=v[T++],k=v[T++];else return S;!S.length||S[S.length-1]<A?S.push(A,k):S[S.length-1]<k&&(S[S.length-1]=k)}}function mergeTransaction(_,v,S){var R;let T,A,k;return S?(T=v.changes,A=ChangeSet.empty(v.changes.length),k=_.changes.compose(v.changes)):(T=v.changes.map(_.changes),A=_.changes.mapDesc(v.changes,!0),k=_.changes.compose(T)),{changes:k,selection:v.selection?v.selection.map(A):(R=_.selection)===null||R===void 0?void 0:R.map(T),effects:StateEffect.mapEffects(_.effects,T).concat(StateEffect.mapEffects(v.effects,A)),annotations:_.annotations.length?_.annotations.concat(v.annotations):v.annotations,scrollIntoView:_.scrollIntoView||v.scrollIntoView}}function resolveTransactionInner(_,v,S){let R=v.selection,T=asArray$1(v.annotations);return v.userEvent&&(T=T.concat(Transaction.userEvent.of(v.userEvent))),{changes:v.changes instanceof ChangeSet?v.changes:ChangeSet.of(v.changes||[],S,_.facet(lineSeparator)),selection:R&&(R instanceof EditorSelection?R:EditorSelection.single(R.anchor,R.head)),effects:asArray$1(v.effects),annotations:T,scrollIntoView:!!v.scrollIntoView}}function resolveTransaction(_,v,S){let R=resolveTransactionInner(_,v.length?v[0]:{},_.doc.length);v.length&&v[0].filter===!1&&(S=!1);for(let A=1;A<v.length;A++){v[A].filter===!1&&(S=!1);let k=!!v[A].sequential;R=mergeTransaction(R,resolveTransactionInner(_,v[A],k?R.changes.newLength:_.doc.length),k)}let T=Transaction.create(_,R.changes,R.selection,R.effects,R.annotations,R.scrollIntoView);return extendTransaction(S?filterTransaction(T):T)}function filterTransaction(_){let v=_.startState,S=!0;for(let T of v.facet(changeFilter)){let A=T(_);if(A===!1){S=!1;break}Array.isArray(A)&&(S=S===!0?A:joinRanges(S,A))}if(S!==!0){let T,A;if(S===!1)A=_.changes.invertedDesc,T=ChangeSet.empty(v.doc.length);else{let k=_.changes.filter(S);T=k.changes,A=k.filtered.mapDesc(k.changes).invertedDesc}_=Transaction.create(v,T,_.selection&&_.selection.map(A),StateEffect.mapEffects(_.effects,A),_.annotations,_.scrollIntoView)}let R=v.facet(transactionFilter);for(let T=R.length-1;T>=0;T--){let A=R[T](_);A instanceof Transaction?_=A:Array.isArray(A)&&A.length==1&&A[0]instanceof Transaction?_=A[0]:_=resolveTransaction(v,asArray$1(A),!1)}return _}function extendTransaction(_){let v=_.startState,S=v.facet(transactionExtender),R=_;for(let T=S.length-1;T>=0;T--){let A=S[T](_);A&&Object.keys(A).length&&(R=mergeTransaction(R,resolveTransactionInner(v,A,_.changes.newLength),!0))}return R==_?_:Transaction.create(v,_.changes,_.selection,R.effects,R.annotations,R.scrollIntoView)}const none$2=[];function asArray$1(_){return _==null?none$2:Array.isArray(_)?_:[_]}var CharCategory=(function(_){return _[_.Word=0]="Word",_[_.Space=1]="Space",_[_.Other=2]="Other",_})(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(_){if(wordChar)return wordChar.test(_);for(let v=0;v<_.length;v++){let S=_[v];if(/\w/.test(S)||S>""&&(S.toUpperCase()!=S.toLowerCase()||nonASCIISingleCaseWordChar.test(S)))return!0}return!1}function makeCategorizer(_){return v=>{if(!/\S/.test(v))return CharCategory.Space;if(hasWordChar(v))return CharCategory.Word;for(let S=0;S<_.length;S++)if(v.indexOf(_[S])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(v,S,R,T,A,k){this.config=v,this.doc=S,this.selection=R,this.values=T,this.status=v.statusTemplate.slice(),this.computeSlot=A,k&&(k._state=this);for(let M=0;M<this.config.dynamicSlots.length;M++)ensureAddr(this,M<<1);this.computeSlot=null}field(v,S=!0){let R=this.config.address[v.id];if(R==null){if(S)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,R),getAddr(this,R)}update(...v){return resolveTransaction(this,v,!0)}applyTransaction(v){let S=this.config,{base:R,compartments:T}=S;for(let M of v.effects)M.is(Compartment.reconfigure)?(S&&(T=new Map,S.compartments.forEach((N,D)=>T.set(D,N)),S=null),T.set(M.value.compartment,M.value.extension)):M.is(StateEffect.reconfigure)?(S=null,R=M.value):M.is(StateEffect.appendConfig)&&(S=null,R=asArray$1(R).concat(M.value));let A;S?A=v.startState.values.slice():(S=Configuration.resolve(R,T,this),A=new EditorState(S,this.doc,this.selection,S.dynamicSlots.map(()=>null),(N,D)=>D.reconfigure(N,this),null).values);let k=v.startState.facet(allowMultipleSelections)?v.newSelection:v.newSelection.asSingle();new EditorState(S,v.newDoc,k,A,(M,N)=>N.update(M,v),v)}replaceSelection(v){return typeof v=="string"&&(v=this.toText(v)),this.changeByRange(S=>({changes:{from:S.from,to:S.to,insert:v},range:EditorSelection.cursor(S.from+v.length)}))}changeByRange(v){let S=this.selection,R=v(S.ranges[0]),T=this.changes(R.changes),A=[R.range],k=asArray$1(R.effects);for(let M=1;M<S.ranges.length;M++){let N=v(S.ranges[M]),D=this.changes(N.changes),I=D.map(T);for(let B=0;B<M;B++)A[B]=A[B].map(I);let q=T.mapDesc(D,!0);A.push(N.range.map(q)),T=T.compose(I),k=StateEffect.mapEffects(k,I).concat(StateEffect.mapEffects(asArray$1(N.effects),q))}return{changes:T,selection:EditorSelection.create(A,S.mainIndex),effects:k}}changes(v=[]){return v instanceof ChangeSet?v:ChangeSet.of(v,this.doc.length,this.facet(EditorState.lineSeparator))}toText(v){return Text.of(v.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(v=0,S=this.doc.length){return this.doc.sliceString(v,S,this.lineBreak)}facet(v){let S=this.config.address[v.id];return S==null?v.default:(ensureAddr(this,S),getAddr(this,S))}toJSON(v){let S={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(v)for(let R in v){let T=v[R];T instanceof StateField&&this.config.address[T.id]!=null&&(S[R]=T.spec.toJSON(this.field(v[R]),this))}return S}static fromJSON(v,S={},R){if(!v||typeof v.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let T=[];if(R){for(let A in R)if(Object.prototype.hasOwnProperty.call(v,A)){let k=R[A],M=v[A];T.push(k.init(N=>k.spec.fromJSON(M,N)))}}return EditorState.create({doc:v.doc,selection:EditorSelection.fromJSON(v.selection),extensions:S.extensions?T.concat([S.extensions]):T})}static create(v={}){let S=Configuration.resolve(v.extensions||[],new Map),R=v.doc instanceof Text?v.doc:Text.of((v.doc||"").split(S.staticFacet(EditorState.lineSeparator)||DefaultSplit)),T=v.selection?v.selection instanceof EditorSelection?v.selection:EditorSelection.single(v.selection.anchor,v.selection.head):EditorSelection.single(0);return checkSelection(T,R.length),S.staticFacet(allowMultipleSelections)||(T=T.asSingle()),new EditorState(S,R,T,S.dynamicSlots.map(()=>null),(A,k)=>k.create(A),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(v,...S){for(let R of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(R,v)){v=R[v];break}return S.length&&(v=v.replace(/\$(\$|\d*)/g,(R,T)=>{if(T=="$")return"$";let A=+(T||1);return!A||A>S.length?R:S[A-1]})),v}languageDataAt(v,S,R=-1){let T=[];for(let A of this.facet(languageData))for(let k of A(this,S,R))Object.prototype.hasOwnProperty.call(k,v)&&T.push(k[v]);return T}charCategorizer(v){return makeCategorizer(this.languageDataAt("wordChars",v).join(""))}wordAt(v){let{text:S,from:R,length:T}=this.doc.lineAt(v),A=this.charCategorizer(v),k=v-R,M=v-R;for(;k>0;){let N=findClusterBreak(S,k,!1);if(A(S.slice(N,k))!=CharCategory.Word)break;k=N}for(;M<T;){let N=findClusterBreak(S,M);if(A(S.slice(M,N))!=CharCategory.Word)break;M=N}return k==M?null:EditorSelection.range(k+R,M+R)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:_=>_.length?_[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(_,v){let S=Object.keys(_),R=Object.keys(v);return S.length==R.length&&S.every(T=>_[T]==v[T])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(_,v,S={}){let R={};for(let T of _)for(let A of Object.keys(T)){let k=T[A],M=R[A];if(M===void 0)R[A]=k;else if(!(M===k||k===void 0))if(Object.hasOwnProperty.call(S,A))R[A]=S[A](M,k);else throw new Error("Config merge conflict for field "+A)}for(let T in v)R[T]===void 0&&(R[T]=v[T]);return R}class RangeValue{eq(v){return this==v}range(v,S=v){return Range$1.create(v,S,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Pp{constructor(v,S,R){this.from=v,this.to=S,this.value=R}static create(v,S,R){return new Pp(v,S,R)}};function cmpRange(_,v){return _.from-v.from||_.value.startSide-v.value.startSide}class Chunk{constructor(v,S,R,T){this.from=v,this.to=S,this.value=R,this.maxPoint=T}get length(){return this.to[this.to.length-1]}findIndex(v,S,R,T=0){let A=R?this.to:this.from;for(let k=T,M=A.length;;){if(k==M)return k;let N=k+M>>1,D=A[N]-v||(R?this.value[N].endSide:this.value[N].startSide)-S;if(N==k)return D>=0?k:M;D>=0?M=N:k=N+1}}between(v,S,R,T){for(let A=this.findIndex(S,-1e9,!0),k=this.findIndex(R,1e9,!1,A);A<k;A++)if(T(this.from[A]+v,this.to[A]+v,this.value[A])===!1)return!1}map(v,S){let R=[],T=[],A=[],k=-1,M=-1;for(let N=0;N<this.value.length;N++){let D=this.value[N],I=this.from[N]+v,q=this.to[N]+v,B,z;if(I==q){let F=S.mapPos(I,D.startSide,D.mapMode);if(F==null||(B=z=F,D.startSide!=D.endSide&&(z=S.mapPos(I,D.endSide),z<B)))continue}else if(B=S.mapPos(I,D.startSide),z=S.mapPos(q,D.endSide),B>z||B==z&&D.startSide>0&&D.endSide<=0)continue;(z-B||D.endSide-D.startSide)<0||(k<0&&(k=B),D.point&&(M=Math.max(M,z-B)),R.push(D),T.push(B-k),A.push(z-k))}return{mapped:R.length?new Chunk(T,A,R,M):null,pos:k}}}class RangeSet{constructor(v,S,R,T){this.chunkPos=v,this.chunk=S,this.nextLayer=R,this.maxPoint=T}static create(v,S,R,T){return new RangeSet(v,S,R,T)}get length(){let v=this.chunk.length-1;return v<0?0:Math.max(this.chunkEnd(v),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let v=this.nextLayer.size;for(let S of this.chunk)v+=S.value.length;return v}chunkEnd(v){return this.chunkPos[v]+this.chunk[v].length}update(v){let{add:S=[],sort:R=!1,filterFrom:T=0,filterTo:A=this.length}=v,k=v.filter;if(S.length==0&&!k)return this;if(R&&(S=S.slice().sort(cmpRange)),this.isEmpty)return S.length?RangeSet.of(S):this;let M=new LayerCursor(this,null,-1).goto(0),N=0,D=[],I=new RangeSetBuilder;for(;M.value||N<S.length;)if(N<S.length&&(M.from-S[N].from||M.startSide-S[N].value.startSide)>=0){let q=S[N++];I.addInner(q.from,q.to,q.value)||D.push(q)}else M.rangeIndex==1&&M.chunkIndex<this.chunk.length&&(N==S.length||this.chunkEnd(M.chunkIndex)<S[N].from)&&(!k||T>this.chunkEnd(M.chunkIndex)||A<this.chunkPos[M.chunkIndex])&&I.addChunk(this.chunkPos[M.chunkIndex],this.chunk[M.chunkIndex])?M.nextChunk():((!k||T>M.to||A<M.from||k(M.from,M.to,M.value))&&(I.addInner(M.from,M.to,M.value)||D.push(Range$1.create(M.from,M.to,M.value))),M.next());return I.finishInner(this.nextLayer.isEmpty&&!D.length?RangeSet.empty:this.nextLayer.update({add:D,filter:k,filterFrom:T,filterTo:A}))}map(v){if(v.empty||this.isEmpty)return this;let S=[],R=[],T=-1;for(let k=0;k<this.chunk.length;k++){let M=this.chunkPos[k],N=this.chunk[k],D=v.touchesRange(M,M+N.length);if(D===!1)T=Math.max(T,N.maxPoint),S.push(N),R.push(v.mapPos(M));else if(D===!0){let{mapped:I,pos:q}=N.map(M,v);I&&(T=Math.max(T,I.maxPoint),S.push(I),R.push(q))}}let A=this.nextLayer.map(v);return S.length==0?A:new RangeSet(R,S,A||RangeSet.empty,T)}between(v,S,R){if(!this.isEmpty){for(let T=0;T<this.chunk.length;T++){let A=this.chunkPos[T],k=this.chunk[T];if(S>=A&&v<=A+k.length&&k.between(A,v-A,S-A,R)===!1)return}this.nextLayer.between(v,S,R)}}iter(v=0){return HeapCursor.from([this]).goto(v)}get isEmpty(){return this.nextLayer==this}static iter(v,S=0){return HeapCursor.from(v).goto(S)}static compare(v,S,R,T,A=-1){let k=v.filter(q=>q.maxPoint>0||!q.isEmpty&&q.maxPoint>=A),M=S.filter(q=>q.maxPoint>0||!q.isEmpty&&q.maxPoint>=A),N=findSharedChunks(k,M,R),D=new SpanCursor(k,N,A),I=new SpanCursor(M,N,A);R.iterGaps((q,B,z)=>compare(D,q,I,B,z,T)),R.empty&&R.length==0&&compare(D,0,I,0,0,T)}static eq(v,S,R=0,T){T==null&&(T=999999999);let A=v.filter(I=>!I.isEmpty&&S.indexOf(I)<0),k=S.filter(I=>!I.isEmpty&&v.indexOf(I)<0);if(A.length!=k.length)return!1;if(!A.length)return!0;let M=findSharedChunks(A,k),N=new SpanCursor(A,M,0).goto(R),D=new SpanCursor(k,M,0).goto(R);for(;;){if(N.to!=D.to||!sameValues(N.active,D.active)||N.point&&(!D.point||!N.point.eq(D.point)))return!1;if(N.to>T)return!0;N.next(),D.next()}}static spans(v,S,R,T,A=-1){let k=new SpanCursor(v,null,A).goto(S),M=S,N=k.openStart;for(;;){let D=Math.min(k.to,R);if(k.point){let I=k.activeForPoint(k.to),q=k.pointFrom<S?I.length+1:k.point.startSide<0?I.length:Math.min(I.length,N);T.point(M,D,k.point,I,q,k.pointRank),N=Math.min(k.openEnd(D),I.length)}else D>M&&(T.span(M,D,k.active,N),N=k.openEnd(D));if(k.to>R)return N+(k.point&&k.to>R?1:0);M=k.to,k.next()}}static of(v,S=!1){let R=new RangeSetBuilder;for(let T of v instanceof Range$1?[v]:S?lazySort(v):v)R.add(T.from,T.to,T.value);return R.finish()}static join(v){if(!v.length)return RangeSet.empty;let S=v[v.length-1];for(let R=v.length-2;R>=0;R--)for(let T=v[R];T!=RangeSet.empty;T=T.nextLayer)S=new RangeSet(T.chunkPos,T.chunk,S,Math.max(T.maxPoint,S.maxPoint));return S}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(_){if(_.length>1)for(let v=_[0],S=1;S<_.length;S++){let R=_[S];if(cmpRange(v,R)>0)return _.slice().sort(cmpRange);v=R}return _}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(v){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,v&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(v,S,R){this.addInner(v,S,R)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(v,S,R)}addInner(v,S,R){let T=v-this.lastTo||R.startSide-this.last.endSide;if(T<=0&&(v-this.lastFrom||R.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return T<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=v),this.from.push(v-this.chunkStart),this.to.push(S-this.chunkStart),this.last=R,this.lastFrom=v,this.lastTo=S,this.value.push(R),R.point&&(this.maxPoint=Math.max(this.maxPoint,S-v)),!0)}addChunk(v,S){if((v-this.lastTo||S.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,S.maxPoint),this.chunks.push(S),this.chunkPos.push(v);let R=S.value.length-1;return this.last=S.value[R],this.lastFrom=S.from[R]+v,this.lastTo=S.to[R]+v,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(v){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return v;let S=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(v):v,this.setMaxPoint);return this.from=null,S}}function findSharedChunks(_,v,S){let R=new Map;for(let A of _)for(let k=0;k<A.chunk.length;k++)A.chunk[k].maxPoint<=0&&R.set(A.chunk[k],A.chunkPos[k]);let T=new Set;for(let A of v)for(let k=0;k<A.chunk.length;k++){let M=R.get(A.chunk[k]);M!=null&&(S?S.mapPos(M):M)==A.chunkPos[k]&&!S?.touchesRange(M,M+A.chunk[k].length)&&T.add(A.chunk[k])}return T}class LayerCursor{constructor(v,S,R,T=0){this.layer=v,this.skip=S,this.minPoint=R,this.rank=T}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(v,S=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(v,S,!1),this}gotoInner(v,S,R){for(;this.chunkIndex<this.layer.chunk.length;){let T=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(T)||this.layer.chunkEnd(this.chunkIndex)<v||T.maxPoint<this.minPoint))break;this.chunkIndex++,R=!1}if(this.chunkIndex<this.layer.chunk.length){let T=this.layer.chunk[this.chunkIndex].findIndex(v-this.layer.chunkPos[this.chunkIndex],S,!0);(!R||this.rangeIndex<T)&&this.setRangeIndex(T)}this.next()}forward(v,S){(this.to-v||this.endSide-S)<0&&this.gotoInner(v,S,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let v=this.layer.chunkPos[this.chunkIndex],S=this.layer.chunk[this.chunkIndex],R=v+S.from[this.rangeIndex];if(this.from=R,this.to=v+S.to[this.rangeIndex],this.value=S.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(v){if(v==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=v}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(v){return this.from-v.from||this.startSide-v.startSide||this.rank-v.rank||this.to-v.to||this.endSide-v.endSide}}class HeapCursor{constructor(v){this.heap=v}static from(v,S=null,R=-1){let T=[];for(let A=0;A<v.length;A++)for(let k=v[A];!k.isEmpty;k=k.nextLayer)k.maxPoint>=R&&T.push(new LayerCursor(k,S,R,A));return T.length==1?T[0]:new HeapCursor(T)}get startSide(){return this.value?this.value.startSide:0}goto(v,S=-1e9){for(let R of this.heap)R.goto(v,S);for(let R=this.heap.length>>1;R>=0;R--)heapBubble(this.heap,R);return this.next(),this}forward(v,S){for(let R of this.heap)R.forward(v,S);for(let R=this.heap.length>>1;R>=0;R--)heapBubble(this.heap,R);(this.to-v||this.value.endSide-S)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let v=this.heap[0];this.from=v.from,this.to=v.to,this.value=v.value,this.rank=v.rank,v.value&&v.next(),heapBubble(this.heap,0)}}}function heapBubble(_,v){for(let S=_[v];;){let R=(v<<1)+1;if(R>=_.length)break;let T=_[R];if(R+1<_.length&&T.compare(_[R+1])>=0&&(T=_[R+1],R++),S.compare(T)<0)break;_[R]=S,_[v]=T,v=R}}class SpanCursor{constructor(v,S,R){this.minPoint=R,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(v,S,R)}goto(v,S=-1e9){return this.cursor.goto(v,S),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=v,this.endSide=S,this.openStart=-1,this.next(),this}forward(v,S){for(;this.minActive>-1&&(this.activeTo[this.minActive]-v||this.active[this.minActive].endSide-S)<0;)this.removeActive(this.minActive);this.cursor.forward(v,S)}removeActive(v){remove(this.active,v),remove(this.activeTo,v),remove(this.activeRank,v),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(v){let S=0,{value:R,to:T,rank:A}=this.cursor;for(;S<this.activeRank.length&&(A-this.activeRank[S]||T-this.activeTo[S])>0;)S++;insert(this.active,S,R),insert(this.activeTo,S,T),insert(this.activeRank,S,A),v&&insert(v,S,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let v=this.to,S=this.point;this.point=null;let R=this.openStart<0?[]:null;for(;;){let T=this.minActive;if(T>-1&&(this.activeTo[T]-this.cursor.from||this.active[T].endSide-this.cursor.startSide)<0){if(this.activeTo[T]>v){this.to=this.activeTo[T],this.endSide=this.active[T].endSide;break}this.removeActive(T),R&&remove(R,T)}else if(this.cursor.value)if(this.cursor.from>v){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let A=this.cursor.value;if(!A.point)this.addActive(R),this.cursor.next();else if(S&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=A,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=A.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(R){this.openStart=0;for(let T=R.length-1;T>=0&&R[T]<v;T--)this.openStart++}}activeForPoint(v){if(!this.active.length)return this.active;let S=[];for(let R=this.active.length-1;R>=0&&!(this.activeRank[R]<this.pointRank);R--)(this.activeTo[R]>v||this.activeTo[R]==v&&this.active[R].endSide>=this.point.endSide)&&S.push(this.active[R]);return S.reverse()}openEnd(v){let S=0;for(let R=this.activeTo.length-1;R>=0&&this.activeTo[R]>v;R--)S++;return S}}function compare(_,v,S,R,T,A){_.goto(v),S.goto(R);let k=R+T,M=R,N=R-v;for(;;){let D=_.to+N-S.to,I=D||_.endSide-S.endSide,q=I<0?_.to+N:S.to,B=Math.min(q,k);if(_.point||S.point?_.point&&S.point&&(_.point==S.point||_.point.eq(S.point))&&sameValues(_.activeForPoint(_.to),S.activeForPoint(S.to))||A.comparePoint(M,B,_.point,S.point):B>M&&!sameValues(_.active,S.active)&&A.compareRange(M,B,_.active,S.active),q>k)break;(D||_.openEnd!=S.openEnd)&&A.boundChange&&A.boundChange(q),M=q,I<=0&&_.next(),I>=0&&S.next()}}function sameValues(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++)if(_[S]!=v[S]&&!_[S].eq(v[S]))return!1;return!0}function remove(_,v){for(let S=v,R=_.length-1;S<R;S++)_[S]=_[S+1];_.pop()}function insert(_,v,S){for(let R=_.length-1;R>=v;R--)_[R+1]=_[R];_[v]=S}function findMinIndex(_,v){let S=-1,R=1e9;for(let T=0;T<v.length;T++)(v[T]-R||_[T].endSide-_[S].endSide)<0&&(S=T,R=v[T]);return S}function countColumn(_,v,S=_.length){let R=0;for(let T=0;T<S&&T<_.length;)_.charCodeAt(T)==9?(R+=v-R%v,T++):(R++,T=findClusterBreak(_,T));return R}function findColumn(_,v,S,R){for(let T=0,A=0;;){if(A>=v)return T;if(T==_.length)break;A+=_.charCodeAt(T)==9?S-A%S:1,T=findClusterBreak(_,T)}return R===!0?-1:_.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(v,S){this.rules=[];let{finish:R}=S||{};function T(k){return/^@/.test(k)?[k]:k.split(/,\s*/)}function A(k,M,N,D){let I=[],q=/^@(\w+)\b/.exec(k[0]),B=q&&q[1]=="keyframes";if(q&&M==null)return N.push(k[0]+";");for(let z in M){let F=M[z];if(/&/.test(z))A(z.split(/,\s*/).map(V=>k.map(H=>V.replace(/&/,H))).reduce((V,H)=>V.concat(H)),F,N);else if(F&&typeof F=="object"){if(!q)throw new RangeError("The value of a property ("+z+") should be a primitive value.");A(T(z),F,I,B)}else F!=null&&I.push(z.replace(/_.*/,"").replace(/[A-Z]/g,V=>"-"+V.toLowerCase())+": "+F+";")}(I.length||B)&&N.push((R&&!q&&!D?k.map(R):k).join(", ")+" {"+I.join(" ")+"}")}for(let k in v)A(T(k),v[k],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let v=top[COUNT]||1;return top[COUNT]=v+1,C+v.toString(36)}static mount(v,S,R){let T=v[SET],A=R&&R.nonce;T?A&&T.setNonce(A):T=new StyleSet(v,A),T.mount(Array.isArray(S)?S:[S],v)}}let adoptedSet=new Map;class StyleSet{constructor(v,S){let R=v.ownerDocument||v,T=R.defaultView;if(!v.head&&v.adoptedStyleSheets&&T.CSSStyleSheet){let A=adoptedSet.get(R);if(A)return v[SET]=A;this.sheet=new T.CSSStyleSheet,adoptedSet.set(R,this)}else this.styleTag=R.createElement("style"),S&&this.styleTag.setAttribute("nonce",S);this.modules=[],v[SET]=this}mount(v,S){let R=this.sheet,T=0,A=0;for(let k=0;k<v.length;k++){let M=v[k],N=this.modules.indexOf(M);if(N<A&&N>-1&&(this.modules.splice(N,1),A--,N=-1),N==-1){if(this.modules.splice(A++,0,M),R)for(let D=0;D<M.rules.length;D++)R.insertRule(M.rules[D],T++)}else{for(;A<N;)T+=this.modules[A++].rules.length;T+=M.rules.length,A++}}if(R)S.adoptedStyleSheets.indexOf(this.sheet)<0&&(S.adoptedStyleSheets=[this.sheet,...S.adoptedStyleSheets]);else{let k="";for(let N=0;N<this.modules.length;N++)k+=this.modules[N].getRules()+`
`;this.styleTag.textContent=k;let M=S.head||S;this.styleTag.parentNode!=M&&M.insertBefore(this.styleTag,M.firstChild)}}setNonce(v){this.styleTag&&this.styleTag.getAttribute("nonce")!=v&&this.styleTag.setAttribute("nonce",v)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(_){var v=mac&&_.metaKey&&_.shiftKey&&!_.ctrlKey&&!_.altKey||ie$1&&_.shiftKey&&_.key&&_.key.length==1||_.key=="Unidentified",S=!v&&_.key||(_.shiftKey?shift:base)[_.keyCode]||_.key||"Unidentified";return S=="Esc"&&(S="Escape"),S=="Del"&&(S="Delete"),S=="Left"&&(S="ArrowLeft"),S=="Up"&&(S="ArrowUp"),S=="Right"&&(S="ArrowRight"),S=="Down"&&(S="ArrowDown"),S}function crelt(){var _=arguments[0];typeof _=="string"&&(_=document.createElement(_));var v=1,S=arguments[1];if(S&&typeof S=="object"&&S.nodeType==null&&!Array.isArray(S)){for(var R in S)if(Object.prototype.hasOwnProperty.call(S,R)){var T=S[R];typeof T=="string"?_.setAttribute(R,T):T!=null&&(_[R]=T)}v++}for(;v<arguments.length;v++)add(_,arguments[v]);return _}function add(_,v){if(typeof v=="string")_.appendChild(document.createTextNode(v));else if(v!=null)if(v.nodeType!=null)_.appendChild(v);else if(Array.isArray(v))for(var S=0;S<v.length;S++)add(_,v[S]);else throw new RangeError("Unsupported child node: "+v)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function getSelection(_){let v;return _.nodeType==11?v=_.getSelection?_:_.ownerDocument:v=_,v.getSelection()}function contains(_,v){return v?_==v||_.contains(v.nodeType!=1?v.parentNode:v):!1}function hasSelection(_,v){if(!v.anchorNode)return!1;try{return contains(_,v.anchorNode)}catch{return!1}}function clientRectsFor(_){return _.nodeType==3?textRange(_,0,_.nodeValue.length).getClientRects():_.nodeType==1?_.getClientRects():[]}function isEquivalentPosition(_,v,S,R){return S?scanFor(_,v,S,R,-1)||scanFor(_,v,S,R,1):!1}function domIndex(_){for(var v=0;;v++)if(_=_.previousSibling,!_)return v}function isBlockElement(_){return _.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(_.nodeName)}function scanFor(_,v,S,R,T){for(;;){if(_==S&&v==R)return!0;if(v==(T<0?0:maxOffset(_))){if(_.nodeName=="DIV")return!1;let A=_.parentNode;if(!A||A.nodeType!=1)return!1;v=domIndex(_)+(T<0?0:1),_=A}else if(_.nodeType==1){if(_=_.childNodes[v+(T<0?-1:0)],_.nodeType==1&&_.contentEditable=="false")return!1;v=T<0?maxOffset(_):0}else return!1}}function maxOffset(_){return _.nodeType==3?_.nodeValue.length:_.childNodes.length}function flattenRect(_,v){let S=v?_.left:_.right;return{left:S,right:S,top:_.top,bottom:_.bottom}}function windowRect(_){let v=_.visualViewport;return v?{left:0,right:v.width,top:0,bottom:v.height}:{left:0,right:_.innerWidth,top:0,bottom:_.innerHeight}}function getScale(_,v){let S=v.width/_.offsetWidth,R=v.height/_.offsetHeight;return(S>.995&&S<1.005||!isFinite(S)||Math.abs(v.width-_.offsetWidth)<1)&&(S=1),(R>.995&&R<1.005||!isFinite(R)||Math.abs(v.height-_.offsetHeight)<1)&&(R=1),{scaleX:S,scaleY:R}}function scrollRectIntoView(_,v,S,R,T,A,k,M){let N=_.ownerDocument,D=N.defaultView||window;for(let I=_,q=!1;I&&!q;)if(I.nodeType==1){let B,z=I==N.body,F=1,V=1;if(z)B=windowRect(D);else{if(/^(fixed|sticky)$/.test(getComputedStyle(I).position)&&(q=!0),I.scrollHeight<=I.clientHeight&&I.scrollWidth<=I.clientWidth){I=I.assignedSlot||I.parentNode;continue}let Y=I.getBoundingClientRect();({scaleX:F,scaleY:V}=getScale(I,Y)),B={left:Y.left,right:Y.left+I.clientWidth*F,top:Y.top,bottom:Y.top+I.clientHeight*V}}let H=0,W=0;if(T=="nearest")v.top<B.top?(W=v.top-(B.top+k),S>0&&v.bottom>B.bottom+W&&(W=v.bottom-B.bottom+k)):v.bottom>B.bottom&&(W=v.bottom-B.bottom+k,S<0&&v.top-W<B.top&&(W=v.top-(B.top+k)));else{let Y=v.bottom-v.top,Z=B.bottom-B.top;W=(T=="center"&&Y<=Z?v.top+Y/2-Z/2:T=="start"||T=="center"&&S<0?v.top-k:v.bottom-Z+k)-B.top}if(R=="nearest"?v.left<B.left?(H=v.left-(B.left+A),S>0&&v.right>B.right+H&&(H=v.right-B.right+A)):v.right>B.right&&(H=v.right-B.right+A,S<0&&v.left<B.left+H&&(H=v.left-(B.left+A))):H=(R=="center"?v.left+(v.right-v.left)/2-(B.right-B.left)/2:R=="start"==M?v.left-A:v.right-(B.right-B.left)+A)-B.left,H||W)if(z)D.scrollBy(H,W);else{let Y=0,Z=0;if(W){let J=I.scrollTop;I.scrollTop+=W/V,Z=(I.scrollTop-J)*V}if(H){let J=I.scrollLeft;I.scrollLeft+=H/F,Y=(I.scrollLeft-J)*F}v={left:v.left-Y,top:v.top-Z,right:v.right-Y,bottom:v.bottom-Z},Y&&Math.abs(Y-H)<1&&(R="nearest"),Z&&Math.abs(Z-W)<1&&(T="nearest")}if(z)break;(v.top<B.top||v.bottom>B.bottom||v.left<B.left||v.right>B.right)&&(v={left:Math.max(v.left,B.left),right:Math.min(v.right,B.right),top:Math.max(v.top,B.top),bottom:Math.min(v.bottom,B.bottom)}),I=I.assignedSlot||I.parentNode}else if(I.nodeType==11)I=I.host;else break}function scrollableParents(_){let v=_.ownerDocument,S,R;for(let T=_.parentNode;T&&!(T==v.body||S&&R);)if(T.nodeType==1)!R&&T.scrollHeight>T.clientHeight&&(R=T),!S&&T.scrollWidth>T.clientWidth&&(S=T),T=T.assignedSlot||T.parentNode;else if(T.nodeType==11)T=T.host;else break;return{x:S,y:R}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(v){return this.anchorNode==v.anchorNode&&this.anchorOffset==v.anchorOffset&&this.focusNode==v.focusNode&&this.focusOffset==v.focusOffset}setRange(v){let{anchorNode:S,focusNode:R}=v;this.set(S,Math.min(v.anchorOffset,S?maxOffset(S):0),R,Math.min(v.focusOffset,R?maxOffset(R):0))}set(v,S,R,T){this.anchorNode=v,this.anchorOffset=S,this.focusNode=R,this.focusOffset=T}}let preventScrollSupported=null;browser.safari&&browser.safari_version>=26&&(preventScrollSupported=!1);function focusPreventScroll(_){if(_.setActive)return _.setActive();if(preventScrollSupported)return _.focus(preventScrollSupported);let v=[];for(let S=_;S&&(v.push(S,S.scrollTop,S.scrollLeft),S!=S.ownerDocument);S=S.parentNode);if(_.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let S=0;S<v.length;){let R=v[S++],T=v[S++],A=v[S++];R.scrollTop!=T&&(R.scrollTop=T),R.scrollLeft!=A&&(R.scrollLeft=A)}}}let scratchRange;function textRange(_,v,S=v){let R=scratchRange||(scratchRange=document.createRange());return R.setEnd(_,S),R.setStart(_,v),R}function dispatchKey(_,v,S,R){let T={key:v,code:v,keyCode:S,which:S,cancelable:!0};R&&({altKey:T.altKey,ctrlKey:T.ctrlKey,shiftKey:T.shiftKey,metaKey:T.metaKey}=R);let A=new KeyboardEvent("keydown",T);A.synthetic=!0,_.dispatchEvent(A);let k=new KeyboardEvent("keyup",T);return k.synthetic=!0,_.dispatchEvent(k),A.defaultPrevented||k.defaultPrevented}function getRoot(_){for(;_;){if(_&&(_.nodeType==9||_.nodeType==11&&_.host))return _;_=_.assignedSlot||_.parentNode}return null}function clearAttributes(_){for(;_.attributes.length;)_.removeAttributeNode(_.attributes[0])}function atElementStart(_,v){let S=v.focusNode,R=v.focusOffset;if(!S||v.anchorNode!=S||v.anchorOffset!=R)return!1;for(R=Math.min(R,maxOffset(S));;)if(R){if(S.nodeType!=1)return!1;let T=S.childNodes[R-1];T.contentEditable=="false"?R--:(S=T,R=maxOffset(S))}else{if(S==_)return!0;R=domIndex(S),S=S.parentNode}}function isScrolledToBottom(_){return _.scrollTop>Math.max(1,_.scrollHeight-_.clientHeight-4)}function textNodeBefore(_,v){for(let S=_,R=v;;){if(S.nodeType==3&&R>0)return{node:S,offset:R};if(S.nodeType==1&&R>0){if(S.contentEditable=="false")return null;S=S.childNodes[R-1],R=maxOffset(S)}else if(S.parentNode&&!isBlockElement(S))R=domIndex(S),S=S.parentNode;else return null}}function textNodeAfter(_,v){for(let S=_,R=v;;){if(S.nodeType==3&&R<S.nodeValue.length)return{node:S,offset:R};if(S.nodeType==1&&R<S.childNodes.length){if(S.contentEditable=="false")return null;S=S.childNodes[R],R=0}else if(S.parentNode&&!isBlockElement(S))R=domIndex(S)+1,S=S.parentNode;else return null}}class DOMPos{constructor(v,S,R=!0){this.node=v,this.offset=S,this.precise=R}static before(v,S){return new DOMPos(v.parentNode,domIndex(v),S)}static after(v,S){return new DOMPos(v.parentNode,domIndex(v)+1,S)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(v){let S=this.posAtStart;for(let R of this.children){if(R==v)return S;S+=R.length+R.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(v){return this.posBefore(v)+v.length}sync(v,S){if(this.flags&2){let R=this.dom,T=null,A;for(let k of this.children){if(k.flags&7){if(!k.dom&&(A=T?T.nextSibling:R.firstChild)){let M=ContentView.get(A);(!M||!M.parent&&M.canReuseDOM(k))&&k.reuseDOM(A)}k.sync(v,S),k.flags&=-8}if(A=T?T.nextSibling:R.firstChild,S&&!S.written&&S.node==R&&A!=k.dom&&(S.written=!0),k.dom.parentNode==R)for(;A&&A!=k.dom;)A=rm$1(A);else R.insertBefore(k.dom,A);T=k.dom}for(A=T?T.nextSibling:R.firstChild,A&&S&&S.node==R&&(S.written=!0);A;)A=rm$1(A)}else if(this.flags&1)for(let R of this.children)R.flags&7&&(R.sync(v,S),R.flags&=-8)}reuseDOM(v){}localPosFromDOM(v,S){let R;if(v==this.dom)R=this.dom.childNodes[S];else{let T=maxOffset(v)==0?0:S==0?-1:1;for(;;){let A=v.parentNode;if(A==this.dom)break;T==0&&A.firstChild!=A.lastChild&&(v==A.firstChild?T=-1:T=1),v=A}T<0?R=v:R=v.nextSibling}if(R==this.dom.firstChild)return 0;for(;R&&!ContentView.get(R);)R=R.nextSibling;if(!R)return this.length;for(let T=0,A=0;;T++){let k=this.children[T];if(k.dom==R)return A;A+=k.length+k.breakAfter}}domBoundsAround(v,S,R=0){let T=-1,A=-1,k=-1,M=-1;for(let N=0,D=R,I=R;N<this.children.length;N++){let q=this.children[N],B=D+q.length;if(D<v&&B>S)return q.domBoundsAround(v,S,D);if(B>=v&&T==-1&&(T=N,A=D),D>S&&q.dom.parentNode==this.dom){k=N,M=I;break}I=B,D=B+q.breakAfter}return{from:A,to:M<0?R+this.length:M,startDOM:(T?this.children[T-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:k<this.children.length&&k>=0?this.children[k].dom:null}}markDirty(v=!1){this.flags|=2,this.markParentsDirty(v)}markParentsDirty(v){for(let S=this.parent;S;S=S.parent){if(v&&(S.flags|=2),S.flags&1)return;S.flags|=1,v=!1}}setParent(v){this.parent!=v&&(this.parent=v,this.flags&7&&this.markParentsDirty(!0))}setDOM(v){this.dom!=v&&(this.dom&&(this.dom.cmView=null),this.dom=v,v.cmView=this)}get rootView(){for(let v=this;;){let S=v.parent;if(!S)return v;v=S}}replaceChildren(v,S,R=noChildren){this.markDirty();for(let T=v;T<S;T++){let A=this.children[T];A.parent==this&&R.indexOf(A)<0&&A.destroy()}R.length<250?this.children.splice(v,S-v,...R):this.children=[].concat(this.children.slice(0,v),R,this.children.slice(S));for(let T=0;T<R.length;T++)R[T].setParent(this)}ignoreMutation(v){return!1}ignoreEvent(v){return!1}childCursor(v=this.length){return new ChildCursor(this.children,v,this.children.length)}childPos(v,S=1){return this.childCursor().findPos(v,S)}toString(){let v=this.constructor.name.replace("View","");return v+(this.children.length?"("+this.children.join()+")":this.length?"["+(v=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(v){return v.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(v,S,R,T,A,k){return!1}become(v){return!1}canReuseDOM(v){return v.constructor==this.constructor&&!((this.flags|v.flags)&8)}getSide(){return 0}destroy(){for(let v of this.children)v.parent==this&&v.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(_){let v=_.nextSibling;return _.parentNode.removeChild(_),v}class ChildCursor{constructor(v,S,R){this.children=v,this.pos=S,this.i=R,this.off=0}findPos(v,S=1){for(;;){if(v>this.pos||v==this.pos&&(S>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=v-this.pos,this;let R=this.children[--this.i];this.pos-=R.length+R.breakAfter}}}function replaceRange(_,v,S,R,T,A,k,M,N){let{children:D}=_,I=D.length?D[v]:null,q=A.length?A[A.length-1]:null,B=q?q.breakAfter:k;if(!(v==R&&I&&!k&&!B&&A.length<2&&I.merge(S,T,A.length?q:null,S==0,M,N))){if(R<D.length){let z=D[R];z&&(T<z.length||z.breakAfter&&q?.breakAfter)?(v==R&&(z=z.split(T),T=0),!B&&q&&z.merge(0,T,q,!0,0,N)?A[A.length-1]=z:((T||z.children.length&&!z.children[0].length)&&z.merge(0,T,null,!1,0,N),A.push(z))):z?.breakAfter&&(q?q.breakAfter=1:k=1),R++}for(I&&(I.breakAfter=k,S>0&&(!k&&A.length&&I.merge(S,I.length,A[0],!1,M,0)?I.breakAfter=A.shift().breakAfter:(S<I.length||I.children.length&&I.children[I.children.length-1].length==0)&&I.merge(S,I.length,null,!1,M,0),v++));v<R&&A.length;)if(D[R-1].become(A[A.length-1]))R--,A.pop(),N=A.length?0:M;else if(D[v].become(A[0]))v++,A.shift(),M=A.length?0:N;else break;!A.length&&v&&R<D.length&&!D[v-1].breakAfter&&D[R].merge(0,0,D[v-1],!1,M,N)&&v--,(v<R||A.length)&&_.replaceChildren(v,R,A)}}function mergeChildrenInto(_,v,S,R,T,A){let k=_.childCursor(),{i:M,off:N}=k.findPos(S,1),{i:D,off:I}=k.findPos(v,-1),q=v-S;for(let B of R)q+=B.length;_.length+=q,replaceRange(_,D,I,M,N,R,0,T,A)}const MaxJoinLen=256;class TextView extends ContentView{constructor(v){super(),this.text=v}get length(){return this.text.length}createDOM(v){this.setDOM(v||document.createTextNode(this.text))}sync(v,S){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(S&&S.node==this.dom&&(S.written=!0),this.dom.nodeValue=this.text)}reuseDOM(v){v.nodeType==3&&this.createDOM(v)}merge(v,S,R){return this.flags&8||R&&(!(R instanceof TextView)||this.length-(S-v)+R.length>MaxJoinLen||R.flags&8)?!1:(this.text=this.text.slice(0,v)+(R?R.text:"")+this.text.slice(S),this.markDirty(),!0)}split(v){let S=new TextView(this.text.slice(v));return this.text=this.text.slice(0,v),this.markDirty(),S.flags|=this.flags&8,S}localPosFromDOM(v,S){return v==this.dom?S:S?this.text.length:0}domAtPos(v){return new DOMPos(this.dom,v)}domBoundsAround(v,S,R){return{from:R,to:R+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(v,S){return textCoords(this.dom,v,S)}}class MarkView extends ContentView{constructor(v,S=[],R=0){super(),this.mark=v,this.children=S,this.length=R;for(let T of S)T.setParent(this)}setAttrs(v){if(clearAttributes(v),this.mark.class&&(v.className=this.mark.class),this.mark.attrs)for(let S in this.mark.attrs)v.setAttribute(S,this.mark.attrs[S]);return v}canReuseDOM(v){return super.canReuseDOM(v)&&!((this.flags|v.flags)&8)}reuseDOM(v){v.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(v),this.flags|=6)}sync(v,S){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(v,S)}merge(v,S,R,T,A,k){return R&&(!(R instanceof MarkView&&R.mark.eq(this.mark))||v&&A<=0||S<this.length&&k<=0)?!1:(mergeChildrenInto(this,v,S,R?R.children.slice():[],A-1,k-1),this.markDirty(),!0)}split(v){let S=[],R=0,T=-1,A=0;for(let M of this.children){let N=R+M.length;N>v&&S.push(R<v?M.split(v-R):M),T<0&&R>=v&&(T=A),R=N,A++}let k=this.length-v;return this.length=v,T>-1&&(this.children.length=T,this.markDirty()),new MarkView(this.mark,S,k)}domAtPos(v){return inlineDOMAtPos(this,v)}coordsAt(v,S){return coordsInChildren(this,v,S)}}function textCoords(_,v,S){let R=_.nodeValue.length;v>R&&(v=R);let T=v,A=v,k=0;v==0&&S<0||v==R&&S>=0?browser.chrome||browser.gecko||(v?(T--,k=1):A<R&&(A++,k=-1)):S<0?T--:A<R&&A++;let M=textRange(_,T,A).getClientRects();if(!M.length)return null;let N=M[(k?k<0:S>=0)?0:M.length-1];return browser.safari&&!k&&N.width==0&&(N=Array.prototype.find.call(M,D=>D.width)||N),k?flattenRect(N,k<0):N||null}class WidgetView extends ContentView{static create(v,S,R){return new WidgetView(v,S,R)}constructor(v,S,R){super(),this.widget=v,this.length=S,this.side=R,this.prevWidget=null}split(v){let S=WidgetView.create(this.widget,this.length-v,this.side);return this.length-=v,S}sync(v){(!this.dom||!this.widget.updateDOM(this.dom,v))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(v)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(v,S,R,T,A,k){return R&&(!(R instanceof WidgetView)||!this.widget.compare(R.widget)||v>0&&A<=0||S<this.length&&k<=0)?!1:(this.length=v+(R?R.length:0)+(this.length-S),!0)}become(v){return v instanceof WidgetView&&v.side==this.side&&this.widget.constructor==v.widget.constructor?(this.widget.compare(v.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=v.widget,this.length=v.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(v){return this.widget.ignoreEvent(v)}get overrideDOMText(){if(this.length==0)return Text.empty;let v=this;for(;v.parent;)v=v.parent;let{view:S}=v,R=S&&S.state.doc,T=this.posAtStart;return R?R.slice(T,T+this.length):Text.empty}domAtPos(v){return(this.length?v==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,v==this.length)}domBoundsAround(){return null}coordsAt(v,S){let R=this.widget.coordsAt(this.dom,v,S);if(R)return R;let T=this.dom.getClientRects(),A=null;if(!T.length)return null;let k=this.side?this.side<0:v>0;for(let M=k?T.length-1:0;A=T[M],!(v>0?M==0:M==T.length-1||A.top<A.bottom);M+=k?-1:1);return flattenRect(A,!k)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(v){super(),this.side=v}get length(){return 0}merge(){return!1}become(v){return v instanceof WidgetBufferView&&v.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let v=document.createElement("img");v.className="cm-widgetBuffer",v.setAttribute("aria-hidden","true"),this.setDOM(v)}}getSide(){return this.side}domAtPos(v){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(v){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(_,v){let S=_.dom,{children:R}=_,T=0;for(let A=0;T<R.length;T++){let k=R[T],M=A+k.length;if(!(M==A&&k.getSide()<=0)){if(v>A&&v<M&&k.dom.parentNode==S)return k.domAtPos(v-A);if(v<=A)break;A=M}}for(let A=T;A>0;A--){let k=R[A-1];if(k.dom.parentNode==S)return k.domAtPos(k.length)}for(let A=T;A<R.length;A++){let k=R[A];if(k.dom.parentNode==S)return k.domAtPos(0)}return new DOMPos(S,0)}function joinInlineInto(_,v,S){let R,{children:T}=_;S>0&&v instanceof MarkView&&T.length&&(R=T[T.length-1])instanceof MarkView&&R.mark.eq(v.mark)?joinInlineInto(R,v.children[0],S-1):(T.push(v),v.setParent(_)),_.length+=v.length}function coordsInChildren(_,v,S){let R=null,T=-1,A=null,k=-1;function M(D,I){for(let q=0,B=0;q<D.children.length&&B<=I;q++){let z=D.children[q],F=B+z.length;F>=I&&(z.children.length?M(z,I-B):(!A||A.isHidden&&(S>0||onSameLine(A,z)))&&(F>I||B==F&&z.getSide()>0)?(A=z,k=I-B):(B<I||B==F&&z.getSide()<0&&!z.isHidden)&&(R=z,T=I-B)),B=F}}M(_,v);let N=(S<0?R:A)||R||A;return N?N.coordsAt(Math.max(0,N==R?T:k),S):fallbackRect(_)}function fallbackRect(_){let v=_.dom.lastChild;if(!v)return _.dom.getBoundingClientRect();let S=clientRectsFor(v);return S[S.length-1]||null}function onSameLine(_,v){let S=_.coordsAt(0,1),R=v.coordsAt(0,1);return S&&R&&R.top<S.bottom}function combineAttrs(_,v){for(let S in _)S=="class"&&v.class?v.class+=" "+_.class:S=="style"&&v.style?v.style+=";"+_.style:v[S]=_[S];return v}const noAttrs$1=Object.create(null);function attrsEq(_,v,S){if(_==v)return!0;_||(_=noAttrs$1),v||(v=noAttrs$1);let R=Object.keys(_),T=Object.keys(v);if(R.length-(S&&R.indexOf(S)>-1?1:0)!=T.length-(S&&T.indexOf(S)>-1?1:0))return!1;for(let A of R)if(A!=S&&(T.indexOf(A)==-1||_[A]!==v[A]))return!1;return!0}function updateAttrs(_,v,S){let R=!1;if(v)for(let T in v)S&&T in S||(R=!0,T=="style"?_.style.cssText="":_.removeAttribute(T));if(S)for(let T in S)v&&v[T]==S[T]||(R=!0,T=="style"?_.style.cssText=S[T]:_.setAttribute(T,S[T]));return R}function getAttrs(_){let v=Object.create(null);for(let S=0;S<_.attributes.length;S++){let R=_.attributes[S];v[R.name]=R.value}return v}class WidgetType{eq(v){return!1}updateDOM(v,S){return!1}compare(v){return this==v||this.constructor==v.constructor&&this.eq(v)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(v){return!0}coordsAt(v,S,R){return null}get isHidden(){return!1}get editable(){return!1}destroy(v){}}var BlockType=(function(_){return _[_.Text=0]="Text",_[_.WidgetBefore=1]="WidgetBefore",_[_.WidgetAfter=2]="WidgetAfter",_[_.WidgetRange=3]="WidgetRange",_})(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(v,S,R,T){super(),this.startSide=v,this.endSide=S,this.widget=R,this.spec=T}get heightRelevant(){return!1}static mark(v){return new MarkDecoration(v)}static widget(v){let S=Math.max(-1e4,Math.min(1e4,v.side||0)),R=!!v.block;return S+=R&&!v.inlineOrder?S>0?3e8:-4e8:S>0?1e8:-1e8,new PointDecoration(v,S,S,R,v.widget||null,!1)}static replace(v){let S=!!v.block,R,T;if(v.isBlockGap)R=-5e8,T=4e8;else{let{start:A,end:k}=getInclusive(v,S);R=(A?S?-3e8:-1:5e8)-1,T=(k?S?2e8:1:-6e8)+1}return new PointDecoration(v,R,T,S,v.widget||null,!0)}static line(v){return new LineDecoration(v)}static set(v,S=!1){return RangeSet.of(v,S)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(v){let{start:S,end:R}=getInclusive(v);super(S?-1:5e8,R?1:-6e8,null,v),this.tagName=v.tagName||"span",this.class=v.class||"",this.attrs=v.attributes||null}eq(v){var S,R;return this==v||v instanceof MarkDecoration&&this.tagName==v.tagName&&(this.class||((S=this.attrs)===null||S===void 0?void 0:S.class))==(v.class||((R=v.attrs)===null||R===void 0?void 0:R.class))&&attrsEq(this.attrs,v.attrs,"class")}range(v,S=v){if(v>=S)throw new RangeError("Mark decorations may not be empty");return super.range(v,S)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(v){super(-2e8,-2e8,null,v)}eq(v){return v instanceof LineDecoration&&this.spec.class==v.spec.class&&attrsEq(this.spec.attributes,v.spec.attributes)}range(v,S=v){if(S!=v)throw new RangeError("Line decoration ranges must be zero-length");return super.range(v,S)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(v,S,R,T,A,k){super(S,R,A,v),this.block=T,this.isReplace=k,this.mapMode=T?S<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(v){return v instanceof PointDecoration&&widgetsEq(this.widget,v.widget)&&this.block==v.block&&this.startSide==v.startSide&&this.endSide==v.endSide}range(v,S=v){if(this.isReplace&&(v>S||v==S&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&S!=v)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(v,S)}}PointDecoration.prototype.point=!0;function getInclusive(_,v=!1){let{inclusiveStart:S,inclusiveEnd:R}=_;return S==null&&(S=_.inclusive),R==null&&(R=_.inclusive),{start:S??v,end:R??v}}function widgetsEq(_,v){return _==v||!!(_&&v&&_.compare(v))}function addRange(_,v,S,R=0){let T=S.length-1;T>=0&&S[T]+R>=_?S[T]=Math.max(S[T],v):S.push(_,v)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(v,S,R,T,A,k){if(R){if(!(R instanceof LineView))return!1;this.dom||R.transferDOM(this)}return T&&this.setDeco(R?R.attrs:null),mergeChildrenInto(this,v,S,R?R.children.slice():[],A,k),!0}split(v){let S=new LineView;if(S.breakAfter=this.breakAfter,this.length==0)return S;let{i:R,off:T}=this.childPos(v);T&&(S.append(this.children[R].split(T),0),this.children[R].merge(T,this.children[R].length,null,!1,0,0),R++);for(let A=R;A<this.children.length;A++)S.append(this.children[A],0);for(;R>0&&this.children[R-1].length==0;)this.children[--R].destroy();return this.children.length=R,this.markDirty(),this.length=v,S}transferDOM(v){this.dom&&(this.markDirty(),v.setDOM(this.dom),v.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(v){attrsEq(this.attrs,v)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=v)}append(v,S){joinInlineInto(this,v,S)}addLineDeco(v){let S=v.spec.attributes,R=v.spec.class;S&&(this.attrs=combineAttrs(S,this.attrs||{})),R&&(this.attrs=combineAttrs({class:R},this.attrs||{}))}domAtPos(v){return inlineDOMAtPos(this,v)}reuseDOM(v){v.nodeName=="DIV"&&(this.setDOM(v),this.flags|=6)}sync(v,S){var R;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(v,S);let T=this.dom.lastChild;for(;T&&ContentView.get(T)instanceof MarkView;)T=T.lastChild;if(!T||!this.length||T.nodeName!="BR"&&((R=ContentView.get(T))===null||R===void 0?void 0:R.isEditable)==!1&&(!browser.ios||!this.children.some(A=>A instanceof TextView))){let A=document.createElement("BR");A.cmIgnore=!0,this.dom.appendChild(A)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let v=0,S;for(let R of this.children){if(!(R instanceof TextView)||/[^ -~]/.test(R.text))return null;let T=clientRectsFor(R.dom);if(T.length!=1)return null;v+=T[0].width,S=T[0].height}return v?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:v/this.length,textHeight:S}:null}coordsAt(v,S){let R=coordsInChildren(this,v,S);if(!this.children.length&&R&&this.parent){let{heightOracle:T}=this.parent.view.viewState,A=R.bottom-R.top;if(Math.abs(A-T.lineHeight)<2&&T.textHeight<A){let k=(A-T.textHeight)/2;return{top:R.top+k,bottom:R.bottom-k,left:R.left,right:R.left}}}return R}become(v){return v instanceof LineView&&this.children.length==0&&v.children.length==0&&attrsEq(this.attrs,v.attrs)&&this.breakAfter==v.breakAfter}covers(){return!0}static find(v,S){for(let R=0,T=0;R<v.children.length;R++){let A=v.children[R],k=T+A.length;if(k>=S){if(A instanceof LineView)return A;if(k>S)break}T=k+A.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(v,S,R){super(),this.widget=v,this.length=S,this.deco=R,this.breakAfter=0,this.prevWidget=null}merge(v,S,R,T,A,k){return R&&(!(R instanceof BlockWidgetView)||!this.widget.compare(R.widget)||v>0&&A<=0||S<this.length&&k<=0)?!1:(this.length=v+(R?R.length:0)+(this.length-S),!0)}domAtPos(v){return v==0?DOMPos.before(this.dom):DOMPos.after(this.dom,v==this.length)}split(v){let S=this.length-v;this.length=v;let R=new BlockWidgetView(this.widget,S,this.deco);return R.breakAfter=this.breakAfter,R}get children(){return noChildren}sync(v){(!this.dom||!this.widget.updateDOM(this.dom,v))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(v)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(v){return v instanceof BlockWidgetView&&v.widget.constructor==this.widget.constructor?(v.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=v.widget,this.length=v.length,this.deco=v.deco,this.breakAfter=v.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(v){return this.widget.ignoreEvent(v)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(v,S){let R=this.widget.coordsAt(this.dom,v,S);return R||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?v==0:S<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(v){let{startSide:S,endSide:R}=this.deco;return S==R?!1:v<0?S<0:R>0}}class BlockGapWidget extends WidgetType{constructor(v){super(),this.height=v}toDOM(){let v=document.createElement("div");return v.className="cm-gap",this.updateDOM(v),v}eq(v){return v.height==this.height}updateDOM(v){return v.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(v,S,R,T){this.doc=v,this.pos=S,this.end=R,this.disallowBlockEffectsFor=T,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=v.iter(),this.skip=S}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let v=this.content[this.content.length-1];return!(v.breakAfter||v instanceof BlockWidgetView&&v.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(v=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),v),v.length),this.pendingBuffer=0)}addBlockWidget(v){this.flushBuffer(),this.curLine=null,this.content.push(v)}finish(v){this.pendingBuffer&&v<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(v&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(v,S,R){for(;v>0;){if(this.textOff==this.text.length){let{value:k,lineBreak:M,done:N}=this.cursor.next(this.skip);if(this.skip=0,N)throw new Error("Ran out of text content when drawing inline views");if(M){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,v--;continue}else this.text=k,this.textOff=0}let T=Math.min(this.text.length-this.textOff,v),A=Math.min(T,512);this.flushBuffer(S.slice(S.length-R)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+A)),S),R),this.atCursorPos=!0,this.textOff+=A,v-=A,R=T<=A?0:S.length}}span(v,S,R,T){this.buildText(S-v,R,T),this.pos=S,this.openStart<0&&(this.openStart=T)}point(v,S,R,T,A,k){if(this.disallowBlockEffectsFor[k]&&R instanceof PointDecoration){if(R.block)throw new RangeError("Block decorations may not be specified via plugins");if(S>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let M=S-v;if(R instanceof PointDecoration)if(R.block)R.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(R.widget||NullWidget.block,M,R));else{let N=WidgetView.create(R.widget||NullWidget.inline,M,M?0:R.startSide),D=this.atCursorPos&&!N.isEditable&&A<=T.length&&(v<S||R.startSide>0),I=!N.isEditable&&(v<S||A>T.length||R.startSide<=0),q=this.getLine();this.pendingBuffer==2&&!D&&!N.isEditable&&(this.pendingBuffer=0),this.flushBuffer(T),D&&(q.append(wrapMarks(new WidgetBufferView(1),T),A),A=T.length+Math.max(0,A-T.length)),q.append(wrapMarks(N,T),A),this.atCursorPos=I,this.pendingBuffer=I?v<S||A>T.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=T.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(R);M&&(this.textOff+M<=this.text.length?this.textOff+=M:(this.skip+=M-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=S),this.openStart<0&&(this.openStart=A)}static build(v,S,R,T,A){let k=new ContentBuilder(v,S,R,A);return k.openEnd=RangeSet.spans(T,S,R,k),k.openStart<0&&(k.openStart=k.openEnd),k.finish(k.openEnd),k}}function wrapMarks(_,v){for(let S of v)_=new MarkView(S,[_],_.length);return _}class NullWidget extends WidgetType{constructor(v){super(),this.tag=v}eq(v){return v.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(v){return v.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=(function(_){return _[_.LTR=0]="LTR",_[_.RTL=1]="RTL",_})(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(_){let v=[];for(let S=0;S<_.length;S++)v.push(1<<+_[S]);return v}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let _ of["()","[]","{}"]){let v=_.charCodeAt(0),S=_.charCodeAt(1);Brackets[v]=S,Brackets[S]=-v}function charType(_){return _<=247?LowTypes[_]:1424<=_&&_<=1524?2:1536<=_&&_<=1785?ArabicTypes[_-1536]:1774<=_&&_<=2220?4:8192<=_&&_<=8204?256:64336<=_&&_<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(v,S,R){this.from=v,this.to=S,this.level=R}side(v,S){return this.dir==S==v?this.to:this.from}forward(v,S){return v==(this.dir==S)}static find(v,S,R,T){let A=-1;for(let k=0;k<v.length;k++){let M=v[k];if(M.from<=S&&M.to>=S){if(M.level==R)return k;(A<0||(T!=0?T<0?M.from<S:M.to>S:v[A].level>M.level))&&(A=k)}}if(A<0)throw new RangeError("Index out of range");return A}}function isolatesEq(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++){let R=_[S],T=v[S];if(R.from!=T.from||R.to!=T.to||R.direction!=T.direction||!isolatesEq(R.inner,T.inner))return!1}return!0}const types=[];function computeCharTypes(_,v,S,R,T){for(let A=0;A<=R.length;A++){let k=A?R[A-1].to:v,M=A<R.length?R[A].from:S,N=A?256:T;for(let D=k,I=N,q=N;D<M;D++){let B=charType(_.charCodeAt(D));B==512?B=I:B==8&&q==4&&(B=16),types[D]=B==4?2:B,B&7&&(q=B),I=B}for(let D=k,I=N,q=N;D<M;D++){let B=types[D];if(B==128)D<M-1&&I==types[D+1]&&I&24?B=types[D]=I:types[D]=256;else if(B==64){let z=D+1;for(;z<M&&types[z]==64;)z++;let F=D&&I==8||z<S&&types[z]==8?q==1?1:8:256;for(let V=D;V<z;V++)types[V]=F;D=z-1}else B==8&&q==1&&(types[D]=1);I=B,B&7&&(q=B)}}}function processBracketPairs(_,v,S,R,T){let A=T==1?2:1;for(let k=0,M=0,N=0;k<=R.length;k++){let D=k?R[k-1].to:v,I=k<R.length?R[k].from:S;for(let q=D,B,z,F;q<I;q++)if(z=Brackets[B=_.charCodeAt(q)])if(z<0){for(let V=M-3;V>=0;V-=3)if(BracketStack[V+1]==-z){let H=BracketStack[V+2],W=H&2?T:H&4?H&1?A:T:0;W&&(types[q]=types[BracketStack[V]]=W),M=V;break}}else{if(BracketStack.length==189)break;BracketStack[M++]=q,BracketStack[M++]=B,BracketStack[M++]=N}else if((F=types[q])==2||F==1){let V=F==T;N=V?0:1;for(let H=M-3;H>=0;H-=3){let W=BracketStack[H+2];if(W&2)break;if(V)BracketStack[H+2]|=2;else{if(W&4)break;BracketStack[H+2]|=4}}}}}function processNeutrals(_,v,S,R){for(let T=0,A=R;T<=S.length;T++){let k=T?S[T-1].to:_,M=T<S.length?S[T].from:v;for(let N=k;N<M;){let D=types[N];if(D==256){let I=N+1;for(;;)if(I==M){if(T==S.length)break;I=S[T++].to,M=T<S.length?S[T].from:v}else if(types[I]==256)I++;else break;let q=A==1,B=(I<v?types[I]:R)==1,z=q==B?q?1:2:R;for(let F=I,V=T,H=V?S[V-1].to:_;F>N;)F==H&&(F=S[--V].from,H=V?S[V-1].to:_),types[--F]=z;N=I}else A=D,N++}}}function emitSpans(_,v,S,R,T,A,k){let M=R%2?2:1;if(R%2==T%2)for(let N=v,D=0;N<S;){let I=!0,q=!1;if(D==A.length||N<A[D].from){let V=types[N];V!=M&&(I=!1,q=V==16)}let B=!I&&M==1?[]:null,z=I?R:R+1,F=N;e:for(;;)if(D<A.length&&F==A[D].from){if(q)break e;let V=A[D];if(!I)for(let H=V.to,W=D+1;;){if(H==S)break e;if(W<A.length&&A[W].from==H)H=A[W++].to;else{if(types[H]==M)break e;break}}if(D++,B)B.push(V);else{V.from>N&&k.push(new BidiSpan(N,V.from,z));let H=V.direction==LTR!=!(z%2);computeSectionOrder(_,H?R+1:R,T,V.inner,V.from,V.to,k),N=V.to}F=V.to}else{if(F==S||(I?types[F]!=M:types[F]==M))break;F++}B?emitSpans(_,N,F,R+1,T,B,k):N<F&&k.push(new BidiSpan(N,F,z)),N=F}else for(let N=S,D=A.length;N>v;){let I=!0,q=!1;if(!D||N>A[D-1].to){let V=types[N-1];V!=M&&(I=!1,q=V==16)}let B=!I&&M==1?[]:null,z=I?R:R+1,F=N;e:for(;;)if(D&&F==A[D-1].to){if(q)break e;let V=A[--D];if(!I)for(let H=V.from,W=D;;){if(H==v)break e;if(W&&A[W-1].to==H)H=A[--W].from;else{if(types[H-1]==M)break e;break}}if(B)B.push(V);else{V.to<N&&k.push(new BidiSpan(V.to,N,z));let H=V.direction==LTR!=!(z%2);computeSectionOrder(_,H?R+1:R,T,V.inner,V.from,V.to,k),N=V.from}F=V.from}else{if(F==v||(I?types[F-1]!=M:types[F-1]==M))break;F--}B?emitSpans(_,F,N,R+1,T,B,k):F<N&&k.push(new BidiSpan(F,N,z)),N=F}}function computeSectionOrder(_,v,S,R,T,A,k){let M=v%2?2:1;computeCharTypes(_,T,A,R,M),processBracketPairs(_,T,A,R,M),processNeutrals(T,A,R,M),emitSpans(_,T,A,v,S,R,k)}function computeOrder(_,v,S){if(!_)return[new BidiSpan(0,0,v==RTL?1:0)];if(v==LTR&&!S.length&&!BidiRE.test(_))return trivialOrder(_.length);if(S.length)for(;_.length>types.length;)types[types.length]=256;let R=[],T=v==LTR?0:1;return computeSectionOrder(_,T,T,S,0,_.length,R),R}function trivialOrder(_){return[new BidiSpan(0,_,0)]}let movedOver="";function moveVisually(_,v,S,R,T){var A;let k=R.head-_.from,M=BidiSpan.find(v,k,(A=R.bidiLevel)!==null&&A!==void 0?A:-1,R.assoc),N=v[M],D=N.side(T,S);if(k==D){let B=M+=T?1:-1;if(B<0||B>=v.length)return null;N=v[M=B],k=N.side(!T,S),D=N.side(T,S)}let I=findClusterBreak(_.text,k,N.forward(T,S));(I<N.from||I>N.to)&&(I=D),movedOver=_.text.slice(Math.min(k,I),Math.max(k,I));let q=M==(T?v.length-1:0)?null:v[M+(T?1:-1)];return q&&I==D&&q.level+(T?0:1)<N.level?EditorSelection.cursor(q.side(!T,S)+_.from,q.forward(T,S)?1:-1,q.level):EditorSelection.cursor(I+_.from,N.forward(T,S)?-1:1,N.level)}function autoDirection(_,v,S){for(let R=v;R<S;R++){let T=charType(_.charCodeAt(R));if(T==1)return LTR;if(T==2||T==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:_=>_.some(v=>v)}),nativeSelectionHidden=Facet.define({combine:_=>_.some(v=>v)}),scrollHandler=Facet.define();class ScrollTarget{constructor(v,S="nearest",R="nearest",T=5,A=5,k=!1){this.range=v,this.y=S,this.x=R,this.yMargin=T,this.xMargin=A,this.isSnapshot=k}map(v){return v.empty?this:new ScrollTarget(this.range.map(v),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(v){return this.range.to<=v.doc.length?this:new ScrollTarget(EditorSelection.cursor(v.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(_,v)=>_.map(v)}),setEditContextFormatting=StateEffect.define();function logException(_,v,S){let R=_.facet(exceptionSink);R.length?R[0](v):window.onerror&&window.onerror(String(v),S,void 0,void 0,v)||(S?console.error(S+":",v):console.error(v))}const editable=Facet.define({combine:_=>_.length?_[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define({combine(_){return _.filter((v,S)=>{for(let R=0;R<S;R++)if(_[R].plugin==v.plugin)return!1;return!0})}});class ViewPlugin{constructor(v,S,R,T,A){this.id=v,this.create=S,this.domEventHandlers=R,this.domEventObservers=T,this.baseExtensions=A(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(v){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:v}))}static define(v,S){const{eventHandlers:R,eventObservers:T,provide:A,decorations:k}=S||{};return new ViewPlugin(nextPluginID++,v,R,T,M=>{let N=[];return k&&N.push(decorations.of(D=>{let I=D.plugin(M);return I?k(I):Decoration.none})),A&&N.push(A(M)),N})}static fromClass(v,S){return ViewPlugin.define((R,T)=>new v(R,T),S)}}class PluginInstance{constructor(v){this.spec=v,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(v){if(this.value){if(this.mustUpdate){let S=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(S)}catch(R){if(logException(S.state,R,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(v,this.spec.arg)}catch(S){logException(v.state,S,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(v){var S;if(!((S=this.value)===null||S===void 0)&&S.destroy)try{this.value.destroy()}catch(R){logException(v.state,R,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(_,v){let S=_.state.facet(bidiIsolatedRanges);if(!S.length)return S;let R=S.map(A=>A instanceof Function?A(_):A),T=[];return RangeSet.spans(R,v.from,v.to,{point(){},span(A,k,M,N){let D=A-v.from,I=k-v.from,q=T;for(let B=M.length-1;B>=0;B--,N--){let z=M[B].spec.bidiIsolate,F;if(z==null&&(z=autoDirection(v.text,D,I)),N>0&&q.length&&(F=q[q.length-1]).to==D&&F.direction==z)F.to=I,q=F.inner;else{let V={from:D,to:I,direction:z,inner:[]};q.push(V),q=V.inner}}}}),T}const scrollMargins=Facet.define();function getScrollMargins(_){let v=0,S=0,R=0,T=0;for(let A of _.state.facet(scrollMargins)){let k=A(_);k&&(k.left!=null&&(v=Math.max(v,k.left)),k.right!=null&&(S=Math.max(S,k.right)),k.top!=null&&(R=Math.max(R,k.top)),k.bottom!=null&&(T=Math.max(T,k.bottom)))}return{left:v,right:S,top:R,bottom:T}}const styleModule=Facet.define();class ChangedRange{constructor(v,S,R,T){this.fromA=v,this.toA=S,this.fromB=R,this.toB=T}join(v){return new ChangedRange(Math.min(this.fromA,v.fromA),Math.max(this.toA,v.toA),Math.min(this.fromB,v.fromB),Math.max(this.toB,v.toB))}addToSet(v){let S=v.length,R=this;for(;S>0;S--){let T=v[S-1];if(!(T.fromA>R.toA)){if(T.toA<R.fromA)break;R=R.join(T),v.splice(S-1,1)}}return v.splice(S,0,R),v}static extendWithRanges(v,S){if(S.length==0)return v;let R=[];for(let T=0,A=0,k=0,M=0;;T++){let N=T==v.length?null:v[T],D=k-M,I=N?N.fromB:1e9;for(;A<S.length&&S[A]<I;){let q=S[A],B=S[A+1],z=Math.max(M,q),F=Math.min(I,B);if(z<=F&&new ChangedRange(z+D,F+D,z,F).addToSet(R),B>I)break;A+=2}if(!N)return R;new ChangedRange(N.fromA,N.toA,N.fromB,N.toB).addToSet(R),k=N.toA,M=N.toB}}}class ViewUpdate{constructor(v,S,R){this.view=v,this.state=S,this.transactions=R,this.flags=0,this.startState=v.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let A of R)this.changes=this.changes.compose(A.changes);let T=[];this.changes.iterChangedRanges((A,k,M,N)=>T.push(new ChangedRange(A,k,M,N))),this.changedRanges=T}static create(v,S,R){return new ViewUpdate(v,S,R)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(v=>v.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(v){super(),this.view=v,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(v.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,v.state.doc.length)],0,null)}update(v){var S;let R=v.changedRanges;this.minWidth>0&&R.length&&(R.every(({fromA:D,toA:I})=>I<this.minWidthFrom||D>this.minWidthTo)?(this.minWidthFrom=v.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=v.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(v);let T=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((S=this.domChanged)===null||S===void 0)&&S.newSel?T=this.domChanged.newSel.head:!touchesComposition(v.changes,this.hasComposition)&&!v.selectionSet&&(T=v.state.selection.main.head));let A=T>-1?findCompositionRange(this.view,v.changes,T):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:D,to:I}=this.hasComposition;R=new ChangedRange(D,I,v.changes.mapPos(D,-1),v.changes.mapPos(I,1)).addToSet(R.slice())}this.hasComposition=A?{from:A.range.fromB,to:A.range.toB}:null,(browser.ie||browser.chrome)&&!A&&v&&v.state.doc.lines!=v.startState.doc.lines&&(this.forceSelection=!0);let k=this.decorations,M=this.updateDeco(),N=findChangedDeco(k,M,v.changes);return R=ChangedRange.extendWithRanges(R,N),!(this.flags&7)&&R.length==0?!1:(this.updateInner(R,v.startState.doc.length,A),v.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(v,S,R){this.view.viewState.mustMeasureContent=!0,this.updateChildren(v,S,R);let{observer:T}=this.view;T.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let k=browser.chrome||browser.ios?{node:T.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,k),this.flags&=-8,k&&(k.written||T.selectionRange.focusNode!=k.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(k=>k.flags&=-9);let A=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let k of this.children)k instanceof BlockWidgetView&&k.widget instanceof BlockGapWidget&&A.push(k.dom);T.updateGaps(A)}updateChildren(v,S,R){let T=R?R.range.addToSet(v.slice()):v,A=this.childCursor(S);for(let k=T.length-1;;k--){let M=k>=0?T[k]:null;if(!M)break;let{fromA:N,toA:D,fromB:I,toB:q}=M,B,z,F,V;if(R&&R.range.fromB<q&&R.range.toB>I){let J=ContentBuilder.build(this.view.state.doc,I,R.range.fromB,this.decorations,this.dynamicDecorationMap),ne=ContentBuilder.build(this.view.state.doc,R.range.toB,q,this.decorations,this.dynamicDecorationMap);z=J.breakAtStart,F=J.openStart,V=ne.openEnd;let oe=this.compositionView(R);ne.breakAtStart?oe.breakAfter=1:ne.content.length&&oe.merge(oe.length,oe.length,ne.content[0],!1,ne.openStart,0)&&(oe.breakAfter=ne.content[0].breakAfter,ne.content.shift()),J.content.length&&oe.merge(0,0,J.content[J.content.length-1],!0,0,J.openEnd)&&J.content.pop(),B=J.content.concat(oe).concat(ne.content)}else({content:B,breakAtStart:z,openStart:F,openEnd:V}=ContentBuilder.build(this.view.state.doc,I,q,this.decorations,this.dynamicDecorationMap));let{i:H,off:W}=A.findPos(D,1),{i:Y,off:Z}=A.findPos(N,-1);replaceRange(this,Y,Z,H,W,B,z,F,V)}R&&this.fixCompositionDOM(R)}updateEditContextFormatting(v){this.editContextFormatting=this.editContextFormatting.map(v.changes);for(let S of v.transactions)for(let R of S.effects)R.is(setEditContextFormatting)&&(this.editContextFormatting=R.value)}compositionView(v){let S=new TextView(v.text.nodeValue);S.flags|=8;for(let{deco:T}of v.marks)S=new MarkView(T,[S],S.length);let R=new LineView;return R.append(S,0),R}fixCompositionDOM(v){let S=(A,k)=>{k.flags|=8|(k.children.some(N=>N.flags&7)?1:0),this.markedForComposition.add(k);let M=ContentView.get(A);M&&M!=k&&(M.dom=null),k.setDOM(A)},R=this.childPos(v.range.fromB,1),T=this.children[R.i];S(v.line,T);for(let A=v.marks.length-1;A>=-1;A--)R=T.childPos(R.off,1),T=T.children[R.i],S(A>=0?v.marks[A].node:v.text,T)}updateSelection(v=!1,S=!1){(v||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let R=this.view.root.activeElement,T=R==this.dom,A=!T&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(R&&this.dom.contains(R));if(!(T||S||A))return;let k=this.forceSelection;this.forceSelection=!1;let M=this.view.state.selection.main,N=this.moveToLine(this.domAtPos(M.anchor)),D=M.empty?N:this.moveToLine(this.domAtPos(M.head));if(browser.gecko&&M.empty&&!this.hasComposition&&betweenUneditable(N)){let q=document.createTextNode("");this.view.observer.ignore(()=>N.node.insertBefore(q,N.node.childNodes[N.offset]||null)),N=D=new DOMPos(q,0),k=!0}let I=this.view.observer.selectionRange;(k||!I.focusNode||(!isEquivalentPosition(N.node,N.offset,I.anchorNode,I.anchorOffset)||!isEquivalentPosition(D.node,D.offset,I.focusNode,I.focusOffset))&&!this.suppressWidgetCursorChange(I,M))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(I.focusNode)&&inUneditable(I.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let q=getSelection(this.view.root);if(q)if(M.empty){if(browser.gecko){let B=nextToUneditable(N.node,N.offset);if(B&&B!=3){let z=(B==1?textNodeBefore:textNodeAfter)(N.node,N.offset);z&&(N=new DOMPos(z.node,z.offset))}}q.collapse(N.node,N.offset),M.bidiLevel!=null&&q.caretBidiLevel!==void 0&&(q.caretBidiLevel=M.bidiLevel)}else if(q.extend){q.collapse(N.node,N.offset);try{q.extend(D.node,D.offset)}catch{}}else{let B=document.createRange();M.anchor>M.head&&([N,D]=[D,N]),B.setEnd(D.node,D.offset),B.setStart(N.node,N.offset),q.removeAllRanges(),q.addRange(B)}A&&this.view.root.activeElement==this.dom&&(this.dom.blur(),R&&R.focus())}),this.view.observer.setSelectionRange(N,D)),this.impreciseAnchor=N.precise?null:new DOMPos(I.anchorNode,I.anchorOffset),this.impreciseHead=D.precise?null:new DOMPos(I.focusNode,I.focusOffset)}suppressWidgetCursorChange(v,S){return this.hasComposition&&S.empty&&isEquivalentPosition(v.focusNode,v.focusOffset,v.anchorNode,v.anchorOffset)&&this.posFromDOM(v.focusNode,v.focusOffset)==S.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:v}=this,S=v.state.selection.main,R=getSelection(v.root),{anchorNode:T,anchorOffset:A}=v.observer.selectionRange;if(!R||!S.empty||!S.assoc||!R.modify)return;let k=LineView.find(this,S.head);if(!k)return;let M=k.posAtStart;if(S.head==M||S.head==M+k.length)return;let N=this.coordsAt(S.head,-1),D=this.coordsAt(S.head,1);if(!N||!D||N.bottom>D.top)return;let I=this.domAtPos(S.head+S.assoc);R.collapse(I.node,I.offset),R.modify("move",S.assoc<0?"forward":"backward","lineboundary"),v.observer.readSelectionRange();let q=v.observer.selectionRange;v.docView.posFromDOM(q.anchorNode,q.anchorOffset)!=S.from&&R.collapse(T,A)}moveToLine(v){let S=this.dom,R;if(v.node!=S)return v;for(let T=v.offset;!R&&T<S.childNodes.length;T++){let A=ContentView.get(S.childNodes[T]);A instanceof LineView&&(R=A.domAtPos(0))}for(let T=v.offset-1;!R&&T>=0;T--){let A=ContentView.get(S.childNodes[T]);A instanceof LineView&&(R=A.domAtPos(A.length))}return R?new DOMPos(R.node,R.offset,!0):v}nearest(v){for(let S=v;S;){let R=ContentView.get(S);if(R&&R.rootView==this)return R;S=S.parentNode}return null}posFromDOM(v,S){let R=this.nearest(v);if(!R)throw new RangeError("Trying to find position for a DOM position outside of the document");return R.localPosFromDOM(v,S)+R.posAtStart}domAtPos(v){let{i:S,off:R}=this.childCursor().findPos(v,-1);for(;S<this.children.length-1;){let T=this.children[S];if(R<T.length||T instanceof LineView)break;S++,R=0}return this.children[S].domAtPos(R)}coordsAt(v,S){let R=null,T=0;for(let A=this.length,k=this.children.length-1;k>=0;k--){let M=this.children[k],N=A-M.breakAfter,D=N-M.length;if(N<v)break;if(D<=v&&(D<v||M.covers(-1))&&(N>v||M.covers(1))&&(!R||M instanceof LineView&&!(R instanceof LineView&&S>=0)))R=M,T=D;else if(R&&D==v&&N==v&&M instanceof BlockWidgetView&&Math.abs(S)<2){if(M.deco.startSide<0)break;k&&(R=null)}A=D}return R?R.coordsAt(v-T,S):null}coordsForChar(v){let{i:S,off:R}=this.childPos(v,1),T=this.children[S];if(!(T instanceof LineView))return null;for(;T.children.length;){let{i:M,off:N}=T.childPos(R,1);for(;;M++){if(M==T.children.length)return null;if((T=T.children[M]).length)break}R=N}if(!(T instanceof TextView))return null;let A=findClusterBreak(T.text,R);if(A==R)return null;let k=textRange(T.dom,R,A).getClientRects();for(let M=0;M<k.length;M++){let N=k[M];if(M==k.length-1||N.top<N.bottom&&N.left<N.right)return N}return null}measureVisibleLineHeights(v){let S=[],{from:R,to:T}=v,A=this.view.contentDOM.clientWidth,k=A>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,M=-1,N=this.view.textDirection==Direction.LTR;for(let D=0,I=0;I<this.children.length;I++){let q=this.children[I],B=D+q.length;if(B>T)break;if(D>=R){let z=q.dom.getBoundingClientRect();if(S.push(z.height),k){let F=q.dom.lastChild,V=F?clientRectsFor(F):[];if(V.length){let H=V[V.length-1],W=N?H.right-z.left:z.right-H.left;W>M&&(M=W,this.minWidth=A,this.minWidthFrom=D,this.minWidthTo=B)}}}D=B+q.breakAfter}return S}textDirectionAt(v){let{i:S}=this.childPos(v,1);return getComputedStyle(this.children[S].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let A of this.children)if(A instanceof LineView){let k=A.measureTextSize();if(k)return k}let v=document.createElement("div"),S,R,T;return v.className="cm-line",v.style.width="99999px",v.style.position="absolute",v.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(v);let A=clientRectsFor(v.firstChild)[0];S=v.getBoundingClientRect().height,R=A?A.width/27:7,T=A?A.height:S,v.remove()}),{lineHeight:S,charWidth:R,textHeight:T}}childCursor(v=this.length){let S=this.children.length;return S&&(v-=this.children[--S].length),new ChildCursor(this.children,v,S)}computeBlockGapDeco(){let v=[],S=this.view.viewState;for(let R=0,T=0;;T++){let A=T==S.viewports.length?null:S.viewports[T],k=A?A.from-1:this.length;if(k>R){let M=(S.lineBlockAt(k).bottom-S.lineBlockAt(R).top)/this.view.scaleY;v.push(Decoration.replace({widget:new BlockGapWidget(M),block:!0,inclusive:!0,isBlockGap:!0}).range(R,k))}if(!A)break;R=A.to+1}return Decoration.set(v)}updateDeco(){let v=1,S=this.view.state.facet(decorations).map(A=>(this.dynamicDecorationMap[v++]=typeof A=="function")?A(this.view):A),R=!1,T=this.view.state.facet(outerDecorations).map((A,k)=>{let M=typeof A=="function";return M&&(R=!0),M?A(this.view):A});for(T.length&&(this.dynamicDecorationMap[v++]=R,S.push(RangeSet.join(T))),this.decorations=[this.editContextFormatting,...S,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];v<this.decorations.length;)this.dynamicDecorationMap[v++]=!1;return this.decorations}scrollIntoView(v){if(v.isSnapshot){let D=this.view.viewState.lineBlockAt(v.range.head);this.view.scrollDOM.scrollTop=D.top-v.yMargin,this.view.scrollDOM.scrollLeft=v.xMargin;return}for(let D of this.view.state.facet(scrollHandler))try{if(D(this.view,v.range,v))return!0}catch(I){logException(this.view.state,I,"scroll handler")}let{range:S}=v,R=this.coordsAt(S.head,S.empty?S.assoc:S.head>S.anchor?-1:1),T;if(!R)return;!S.empty&&(T=this.coordsAt(S.anchor,S.anchor>S.head?-1:1))&&(R={left:Math.min(R.left,T.left),top:Math.min(R.top,T.top),right:Math.max(R.right,T.right),bottom:Math.max(R.bottom,T.bottom)});let A=getScrollMargins(this.view),k={left:R.left-A.left,top:R.top-A.top,right:R.right+A.right,bottom:R.bottom+A.bottom},{offsetWidth:M,offsetHeight:N}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,k,S.head<S.anchor?-1:1,v.x,v.y,Math.max(Math.min(v.xMargin,M),-M),Math.max(Math.min(v.yMargin,N),-N),this.view.textDirection==Direction.LTR)}lineHasWidget(v){let{i:S}=this.childCursor().findPos(v);if(S==this.children.length)return!1;let R=T=>T instanceof WidgetView||T.children.some(R);return R(this.children[S])}}function betweenUneditable(_){return _.node.nodeType==1&&_.node.firstChild&&(_.offset==0||_.node.childNodes[_.offset-1].contentEditable=="false")&&(_.offset==_.node.childNodes.length||_.node.childNodes[_.offset].contentEditable=="false")}function findCompositionNode(_,v){let S=_.observer.selectionRange;if(!S.focusNode)return null;let R=textNodeBefore(S.focusNode,S.focusOffset),T=textNodeAfter(S.focusNode,S.focusOffset),A=R||T;if(T&&R&&T.node!=R.node){let M=ContentView.get(T.node);if(!M||M instanceof TextView&&M.text!=T.node.nodeValue)A=T;else if(_.docView.lastCompositionAfterCursor){let N=ContentView.get(R.node);!N||N instanceof TextView&&N.text!=R.node.nodeValue||(A=T)}}if(_.docView.lastCompositionAfterCursor=A!=R,!A)return null;let k=v-A.offset;return{from:k,to:k+A.node.nodeValue.length,node:A.node}}function findCompositionRange(_,v,S){let R=findCompositionNode(_,S);if(!R)return null;let{node:T,from:A,to:k}=R,M=T.nodeValue;if(/[\n\r]/.test(M)||_.state.doc.sliceString(R.from,R.to)!=M)return null;let N=v.invertedDesc,D=new ChangedRange(N.mapPos(A),N.mapPos(k),A,k),I=[];for(let q=T.parentNode;;q=q.parentNode){let B=ContentView.get(q);if(B instanceof MarkView)I.push({node:q,deco:B.mark});else{if(B instanceof LineView||q.nodeName=="DIV"&&q.parentNode==_.contentDOM)return{range:D,text:T,marks:I,line:q};if(q!=_.contentDOM)I.push({node:q,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(q),tagName:q.tagName.toLowerCase()})});else return null}}}function nextToUneditable(_,v){return _.nodeType!=1?0:(v&&_.childNodes[v-1].contentEditable=="false"?1:0)|(v<_.childNodes.length&&_.childNodes[v].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(v,S){addRange(v,S,this.changes)}comparePoint(v,S){addRange(v,S,this.changes)}boundChange(v){addRange(v,v,this.changes)}};function findChangedDeco(_,v,S){let R=new DecorationComparator$1;return RangeSet.compare(_,v,S,R),R.changes}function inUneditable(_,v){for(let S=_;S&&S!=v;S=S.assignedSlot||S.parentNode)if(S.nodeType==1&&S.contentEditable=="false")return!0;return!1}function touchesComposition(_,v){let S=!1;return v&&_.iterChangedRanges((R,T)=>{R<v.to&&T>v.from&&(S=!0)}),S}function groupAt(_,v,S=1){let R=_.charCategorizer(v),T=_.doc.lineAt(v),A=v-T.from;if(T.length==0)return EditorSelection.cursor(v);A==0?S=1:A==T.length&&(S=-1);let k=A,M=A;S<0?k=findClusterBreak(T.text,A,!1):M=findClusterBreak(T.text,A);let N=R(T.text.slice(k,M));for(;k>0;){let D=findClusterBreak(T.text,k,!1);if(R(T.text.slice(D,k))!=N)break;k=D}for(;M<T.length;){let D=findClusterBreak(T.text,M);if(R(T.text.slice(M,D))!=N)break;M=D}return EditorSelection.range(k+T.from,M+T.from)}function getdx(_,v){return v.left>_?v.left-_:Math.max(0,_-v.right)}function getdy(_,v){return v.top>_?v.top-_:Math.max(0,_-v.bottom)}function yOverlap(_,v){return _.top<v.bottom-1&&_.bottom>v.top+1}function upTop(_,v){return v<_.top?{top:v,left:_.left,right:_.right,bottom:_.bottom}:_}function upBot(_,v){return v>_.bottom?{top:_.top,left:_.left,right:_.right,bottom:v}:_}function domPosAtCoords(_,v,S){let R,T,A,k,M=!1,N,D,I,q;for(let F=_.firstChild;F;F=F.nextSibling){let V=clientRectsFor(F);for(let H=0;H<V.length;H++){let W=V[H];T&&yOverlap(T,W)&&(W=upTop(upBot(W,T.bottom),T.top));let Y=getdx(v,W),Z=getdy(S,W);if(Y==0&&Z==0)return F.nodeType==3?domPosInText(F,v,S):domPosAtCoords(F,v,S);(!R||k>Z||k==Z&&A>Y)&&(R=F,T=W,A=Y,k=Z,M=Y?v<W.left?H>0:H<V.length-1:!0),Y==0?S>W.bottom&&(!I||I.bottom<W.bottom)?(N=F,I=W):S<W.top&&(!q||q.top>W.top)&&(D=F,q=W):I&&yOverlap(I,W)?I=upBot(I,W.bottom):q&&yOverlap(q,W)&&(q=upTop(q,W.top))}}if(I&&I.bottom>=S?(R=N,T=I):q&&q.top<=S&&(R=D,T=q),!R)return{node:_,offset:0};let B=Math.max(T.left,Math.min(T.right,v));if(R.nodeType==3)return domPosInText(R,B,S);if(M&&R.contentEditable!="false")return domPosAtCoords(R,B,S);let z=Array.prototype.indexOf.call(_.childNodes,R)+(v>=(T.left+T.right)/2?1:0);return{node:_,offset:z}}function domPosInText(_,v,S){let R=_.nodeValue.length,T=-1,A=1e9,k=0;for(let M=0;M<R;M++){let N=textRange(_,M,M+1).getClientRects();for(let D=0;D<N.length;D++){let I=N[D];if(I.top==I.bottom)continue;k||(k=v-I.left);let q=(I.top>S?I.top-S:S-I.bottom)-1;if(I.left-1<=v&&I.right+1>=v&&q<A){let B=v>=(I.left+I.right)/2,z=B;if(browser.chrome||browser.gecko){let F=textRange(_,M).getBoundingClientRect();Math.abs(F.left-I.right)<.1&&(z=!B)}if(q<=0)return{node:_,offset:M+(z?1:0)};T=M+(z?1:0),A=q}}}return{node:_,offset:T>-1?T:k>0?_.nodeValue.length:0}}function posAtCoords(_,v,S,R=-1){var T,A;let k=_.contentDOM.getBoundingClientRect(),M=k.top+_.viewState.paddingTop,N,{docHeight:D}=_.viewState,{x:I,y:q}=v,B=q-M;if(B<0)return 0;if(B>D)return _.state.doc.length;for(let J=_.viewState.heightOracle.textHeight/2,ne=!1;N=_.elementAtHeight(B),N.type!=BlockType.Text;)for(;B=R>0?N.bottom+J:N.top-J,!(B>=0&&B<=D);){if(ne)return S?null:0;ne=!0,R=-R}q=M+B;let z=N.from;if(z<_.viewport.from)return _.viewport.from==0?0:S?null:posAtCoordsImprecise(_,k,N,I,q);if(z>_.viewport.to)return _.viewport.to==_.state.doc.length?_.state.doc.length:S?null:posAtCoordsImprecise(_,k,N,I,q);let F=_.dom.ownerDocument,V=_.root.elementFromPoint?_.root:F,H=V.elementFromPoint(I,q);H&&!_.contentDOM.contains(H)&&(H=null),H||(I=Math.max(k.left+1,Math.min(k.right-1,I)),H=V.elementFromPoint(I,q),H&&!_.contentDOM.contains(H)&&(H=null));let W,Y=-1;if(H&&((T=_.docView.nearest(H))===null||T===void 0?void 0:T.isEditable)!=!1){if(F.caretPositionFromPoint){let J=F.caretPositionFromPoint(I,q);J&&({offsetNode:W,offset:Y}=J)}else if(F.caretRangeFromPoint){let J=F.caretRangeFromPoint(I,q);J&&({startContainer:W,startOffset:Y}=J)}W&&(!_.contentDOM.contains(W)||browser.safari&&isSuspiciousSafariCaretResult(W,Y,I)||browser.chrome&&isSuspiciousChromeCaretResult(W,Y,I))&&(W=void 0),W&&(Y=Math.min(maxOffset(W),Y))}if(!W||!_.docView.dom.contains(W)){let J=LineView.find(_.docView,z);if(!J)return B>N.top+N.height/2?N.to:N.from;({node:W,offset:Y}=domPosAtCoords(J.dom,I,q))}let Z=_.docView.nearest(W);if(!Z)return null;if(Z.isWidget&&((A=Z.dom)===null||A===void 0?void 0:A.nodeType)==1){let J=Z.dom.getBoundingClientRect();return v.y<J.top||v.y<=J.bottom&&v.x<=(J.left+J.right)/2?Z.posAtStart:Z.posAtEnd}else return Z.localPosFromDOM(W,Y)+Z.posAtStart}function posAtCoordsImprecise(_,v,S,R,T){let A=Math.round((R-v.left)*_.defaultCharacterWidth);if(_.lineWrapping&&S.height>_.defaultLineHeight*1.5){let M=_.viewState.heightOracle.textHeight,N=Math.floor((T-S.top-(_.defaultLineHeight-M)*.5)/M);A+=N*_.viewState.heightOracle.lineLength}let k=_.state.sliceDoc(S.from,S.to);return S.from+findColumn(k,A,_.state.tabSize)}function isEndOfLineBefore(_,v,S){let R,T=_;if(_.nodeType!=3||v!=(R=_.nodeValue.length))return!1;for(;;){let A=T.nextSibling;if(A){if(A.nodeName=="BR")break;return!1}else{let k=T.parentNode;if(!k||k.nodeName=="DIV")break;T=k}}return textRange(_,R-1,R).getBoundingClientRect().right>S}function isSuspiciousSafariCaretResult(_,v,S){return isEndOfLineBefore(_,v,S)}function isSuspiciousChromeCaretResult(_,v,S){if(v!=0)return isEndOfLineBefore(_,v,S);for(let T=_;;){let A=T.parentNode;if(!A||A.nodeType!=1||A.firstChild!=T)return!1;if(A.classList.contains("cm-line"))break;T=A}let R=_.nodeType==1?_.getBoundingClientRect():textRange(_,0,Math.max(_.nodeValue.length,1)).getBoundingClientRect();return S-R.left>5}function blockAt(_,v,S){let R=_.lineBlockAt(v);if(Array.isArray(R.type)){let T;for(let A of R.type){if(A.from>v)break;if(!(A.to<v)){if(A.from<v&&A.to>v)return A;(!T||A.type==BlockType.Text&&(T.type!=A.type||(S<0?A.from<v:A.to>v)))&&(T=A)}}return T||R}return R}function moveToLineBoundary(_,v,S,R){let T=blockAt(_,v.head,v.assoc||-1),A=!R||T.type!=BlockType.Text||!(_.lineWrapping||T.widgetLineBreaks)?null:_.coordsAtPos(v.assoc<0&&v.head>T.from?v.head-1:v.head);if(A){let k=_.dom.getBoundingClientRect(),M=_.textDirectionAt(T.from),N=_.posAtCoords({x:S==(M==Direction.LTR)?k.right-1:k.left+1,y:(A.top+A.bottom)/2});if(N!=null)return EditorSelection.cursor(N,S?-1:1)}return EditorSelection.cursor(S?T.to:T.from,S?-1:1)}function moveByChar(_,v,S,R){let T=_.state.doc.lineAt(v.head),A=_.bidiSpans(T),k=_.textDirectionAt(T.from);for(let M=v,N=null;;){let D=moveVisually(T,A,k,M,S),I=movedOver;if(!D){if(T.number==(S?_.state.doc.lines:1))return M;I=`
`,T=_.state.doc.line(T.number+(S?1:-1)),A=_.bidiSpans(T),D=_.visualLineSide(T,!S)}if(N){if(!N(I))return M}else{if(!R)return D;N=R(I)}M=D}}function byGroup(_,v,S){let R=_.state.charCategorizer(v),T=R(S);return A=>{let k=R(A);return T==CharCategory.Space&&(T=k),T==k}}function moveVertically(_,v,S,R){let T=v.head,A=S?1:-1;if(T==(S?_.state.doc.length:0))return EditorSelection.cursor(T,v.assoc);let k=v.goalColumn,M,N=_.contentDOM.getBoundingClientRect(),D=_.coordsAtPos(T,v.assoc||-1),I=_.documentTop;if(D)k==null&&(k=D.left-N.left),M=A<0?D.top:D.bottom;else{let z=_.viewState.lineBlockAt(T);k==null&&(k=Math.min(N.right-N.left,_.defaultCharacterWidth*(T-z.from))),M=(A<0?z.top:z.bottom)+I}let q=N.left+k,B=R??_.viewState.heightOracle.textHeight>>1;for(let z=0;;z+=10){let F=M+(B+z)*A,V=posAtCoords(_,{x:q,y:F},!1,A);if(F<N.top||F>N.bottom||(A<0?V<T:V>T)){let H=_.docView.coordsForChar(V),W=!H||F<H.top?-1:1;return EditorSelection.cursor(V,W,void 0,k)}}}function skipAtomicRanges(_,v,S){for(;;){let R=0;for(let T of _)T.between(v-1,v+1,(A,k,M)=>{if(v>A&&v<k){let N=R||S||(v-A<k-v?-1:1);v=N<0?A:k,R=N}});if(!R)return v}}function skipAtomsForSelection(_,v){let S=null;for(let R=0;R<v.ranges.length;R++){let T=v.ranges[R],A=null;if(T.empty){let k=skipAtomicRanges(_,T.from,0);k!=T.from&&(A=EditorSelection.cursor(k,-1))}else{let k=skipAtomicRanges(_,T.from,-1),M=skipAtomicRanges(_,T.to,1);(k!=T.from||M!=T.to)&&(A=EditorSelection.range(T.from==T.anchor?k:M,T.from==T.head?k:M))}A&&(S||(S=v.ranges.slice()),S[R]=A)}return S?EditorSelection.create(S,v.mainIndex):v}function skipAtoms(_,v,S){let R=skipAtomicRanges(_.state.facet(atomicRanges).map(T=>T(_)),S.from,v.head>S.from?-1:1);return R==S.from?S:EditorSelection.cursor(R,R<S.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(v,S){this.points=v,this.text="",this.lineSeparator=S.facet(EditorState.lineSeparator)}append(v){this.text+=v}lineBreak(){this.text+=LineBreakPlaceholder}readRange(v,S){if(!v)return this;let R=v.parentNode;for(let T=v;;){this.findPointBefore(R,T);let A=this.text.length;this.readNode(T);let k=T.nextSibling;if(k==S)break;let M=ContentView.get(T),N=ContentView.get(k);(M&&N?M.breakAfter:(M?M.breakAfter:isBlockElement(T))||isBlockElement(k)&&(T.nodeName!="BR"||T.cmIgnore)&&this.text.length>A)&&!isEmptyToEnd(k,S)&&this.lineBreak(),T=k}return this.findPointBefore(R,S),this}readTextNode(v){let S=v.nodeValue;for(let R of this.points)R.node==v&&(R.pos=this.text.length+Math.min(R.offset,S.length));for(let R=0,T=this.lineSeparator?null:/\r\n?|\n/g;;){let A=-1,k=1,M;if(this.lineSeparator?(A=S.indexOf(this.lineSeparator,R),k=this.lineSeparator.length):(M=T.exec(S))&&(A=M.index,k=M[0].length),this.append(S.slice(R,A<0?S.length:A)),A<0)break;if(this.lineBreak(),k>1)for(let N of this.points)N.node==v&&N.pos>this.text.length&&(N.pos-=k-1);R=A+k}}readNode(v){if(v.cmIgnore)return;let S=ContentView.get(v),R=S&&S.overrideDOMText;if(R!=null){this.findPointInside(v,R.length);for(let T=R.iter();!T.next().done;)T.lineBreak?this.lineBreak():this.append(T.value)}else v.nodeType==3?this.readTextNode(v):v.nodeName=="BR"?v.nextSibling&&this.lineBreak():v.nodeType==1&&this.readRange(v.firstChild,null)}findPointBefore(v,S){for(let R of this.points)R.node==v&&v.childNodes[R.offset]==S&&(R.pos=this.text.length)}findPointInside(v,S){for(let R of this.points)(v.nodeType==3?R.node==v:v.contains(R.node))&&(R.pos=this.text.length+(isAtEnd(v,R.node,R.offset)?S:0))}}function isAtEnd(_,v,S){for(;;){if(!v||S<maxOffset(v))return!1;if(v==_)return!0;S=domIndex(v)+1,v=v.parentNode}}function isEmptyToEnd(_,v){let S;for(;!(_==v||!_);_=_.nextSibling){let R=ContentView.get(_);if(!(R?.isWidget||_.cmIgnore))return!1;R&&(S||(S=[])).push(R)}if(S)for(let R of S){let T=R.overrideDOMText;if(T?.length)return!1}return!0}class DOMPoint{constructor(v,S){this.node=v,this.offset=S,this.pos=-1}}class DOMChange{constructor(v,S,R,T){this.typeOver=T,this.bounds=null,this.text="",this.domChanged=S>-1;let{impreciseHead:A,impreciseAnchor:k}=v.docView;if(v.state.readOnly&&S>-1)this.newSel=null;else if(S>-1&&(this.bounds=v.docView.domBoundsAround(S,R,0))){let M=A||k?[]:selectionPoints(v),N=new DOMReader(M,v.state);N.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=N.text,this.newSel=selectionFromPoints(M,this.bounds.from)}else{let M=v.observer.selectionRange,N=A&&A.node==M.focusNode&&A.offset==M.focusOffset||!contains(v.contentDOM,M.focusNode)?v.state.selection.main.head:v.docView.posFromDOM(M.focusNode,M.focusOffset),D=k&&k.node==M.anchorNode&&k.offset==M.anchorOffset||!contains(v.contentDOM,M.anchorNode)?v.state.selection.main.anchor:v.docView.posFromDOM(M.anchorNode,M.anchorOffset),I=v.viewport;if((browser.ios||browser.chrome)&&v.state.selection.main.empty&&N!=D&&(I.from>0||I.to<v.state.doc.length)){let q=Math.min(N,D),B=Math.max(N,D),z=I.from-q,F=I.to-B;(z==0||z==1||q==0)&&(F==0||F==-1||B==v.state.doc.length)&&(N=0,D=v.state.doc.length)}v.inputState.composing>-1&&v.state.selection.ranges.length>1?this.newSel=v.state.selection.replaceRange(EditorSelection.range(D,N)):this.newSel=EditorSelection.single(D,N)}}}function applyDOMChange(_,v){let S,{newSel:R}=v,T=_.state.selection.main,A=_.inputState.lastKeyTime>Date.now()-100?_.inputState.lastKeyCode:-1;if(v.bounds){let{from:k,to:M}=v.bounds,N=T.from,D=null;(A===8||browser.android&&v.text.length<M-k)&&(N=T.to,D="end");let I=findDiff(_.state.doc.sliceString(k,M,LineBreakPlaceholder),v.text,N-k,D);I&&(browser.chrome&&A==13&&I.toB==I.from+2&&v.text.slice(I.from,I.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&I.toB--,S={from:k+I.from,to:k+I.toA,insert:Text.of(v.text.slice(I.from,I.toB).split(LineBreakPlaceholder))})}else R&&(!_.hasFocus&&_.state.facet(editable)||R.main.eq(T))&&(R=null);if(!S&&!R)return!1;if(!S&&v.typeOver&&!T.empty&&R&&R.main.empty?S={from:T.from,to:T.to,insert:_.state.doc.slice(T.from,T.to)}:(browser.mac||browser.android)&&S&&S.from==S.to&&S.from==T.head-1&&/^\. ?$/.test(S.insert.toString())&&_.contentDOM.getAttribute("autocorrect")=="off"?(R&&S.insert.length==2&&(R=EditorSelection.single(R.main.anchor-1,R.main.head-1)),S={from:S.from,to:S.to,insert:Text.of([S.insert.toString().replace("."," ")])}):S&&S.from>=T.from&&S.to<=T.to&&(S.from!=T.from||S.to!=T.to)&&T.to-T.from-(S.to-S.from)<=4?S={from:T.from,to:T.to,insert:_.state.doc.slice(T.from,S.from).append(S.insert).append(_.state.doc.slice(S.to,T.to))}:_.state.doc.lineAt(T.from).to<T.to&&_.docView.lineHasWidget(T.to)&&_.inputState.insertingTextAt>Date.now()-50?S={from:T.from,to:T.to,insert:_.state.toText(_.inputState.insertingText)}:browser.chrome&&S&&S.from==S.to&&S.from==T.head&&S.insert.toString()==`
 `&&_.lineWrapping&&(R&&(R=EditorSelection.single(R.main.anchor-1,R.main.head-1)),S={from:T.from,to:T.to,insert:Text.of([" "])}),S)return applyDOMChangeInner(_,S,R,A);if(R&&!R.main.eq(T)){let k=!1,M="select";return _.inputState.lastSelectionTime>Date.now()-50&&(_.inputState.lastSelectionOrigin=="select"&&(k=!0),M=_.inputState.lastSelectionOrigin,M=="select.pointer"&&(R=skipAtomsForSelection(_.state.facet(atomicRanges).map(N=>N(_)),R))),_.dispatch({selection:R,scrollIntoView:k,userEvent:M}),!0}else return!1}function applyDOMChangeInner(_,v,S,R=-1){if(browser.ios&&_.inputState.flushIOSKey(v))return!0;let T=_.state.selection.main;if(browser.android&&(v.to==T.to&&(v.from==T.from||v.from==T.from-1&&_.state.sliceDoc(v.from,T.from)==" ")&&v.insert.length==1&&v.insert.lines==2&&dispatchKey(_.contentDOM,"Enter",13)||(v.from==T.from-1&&v.to==T.to&&v.insert.length==0||R==8&&v.insert.length<v.to-v.from&&v.to>T.head)&&dispatchKey(_.contentDOM,"Backspace",8)||v.from==T.from&&v.to==T.to+1&&v.insert.length==0&&dispatchKey(_.contentDOM,"Delete",46)))return!0;let A=v.insert.toString();_.inputState.composing>=0&&_.inputState.composing++;let k,M=()=>k||(k=applyDefaultInsert(_,v,S));return _.state.facet(inputHandler$1).some(N=>N(_,v.from,v.to,A,M))||_.dispatch(M()),!0}function applyDefaultInsert(_,v,S){let R,T=_.state,A=T.selection.main,k=-1;if(v.from==v.to&&v.from<A.from||v.from>A.to){let N=v.from<A.from?-1:1,D=N<0?A.from:A.to,I=skipAtomicRanges(T.facet(atomicRanges).map(q=>q(_)),D,N);v.from==I&&(k=I)}if(k>-1)R={changes:v,selection:EditorSelection.cursor(v.from+v.insert.length,-1)};else if(v.from>=A.from&&v.to<=A.to&&v.to-v.from>=(A.to-A.from)/3&&(!S||S.main.empty&&S.main.from==v.from+v.insert.length)&&_.inputState.composing<0){let N=A.from<v.from?T.sliceDoc(A.from,v.from):"",D=A.to>v.to?T.sliceDoc(v.to,A.to):"";R=T.replaceSelection(_.state.toText(N+v.insert.sliceString(0,void 0,_.state.lineBreak)+D))}else{let N=T.changes(v),D=S&&S.main.to<=N.newLength?S.main:void 0;if(T.selection.ranges.length>1&&(_.inputState.composing>=0||_.inputState.compositionPendingChange)&&v.to<=A.to+10&&v.to>=A.to-10){let I=_.state.sliceDoc(v.from,v.to),q,B=S&&findCompositionNode(_,S.main.head);if(B){let F=v.insert.length-(v.to-v.from);q={from:B.from,to:B.to-F}}else q=_.state.doc.lineAt(A.head);let z=A.to-v.to;R=T.changeByRange(F=>{if(F.from==A.from&&F.to==A.to)return{changes:N,range:D||F.map(N)};let V=F.to-z,H=V-I.length;if(_.state.sliceDoc(H,V)!=I||V>=q.from&&H<=q.to)return{range:F};let W=T.changes({from:H,to:V,insert:v.insert}),Y=F.to-A.to;return{changes:W,range:D?EditorSelection.range(Math.max(0,D.anchor+Y),Math.max(0,D.head+Y)):F.map(W)}})}else R={changes:N,selection:D&&T.selection.replaceRange(D)}}let M="input.type";return(_.composing||_.inputState.compositionPendingChange&&_.inputState.compositionEndedAt>Date.now()-50)&&(_.inputState.compositionPendingChange=!1,M+=".compose",_.inputState.compositionFirstChange&&(M+=".start",_.inputState.compositionFirstChange=!1)),T.update(R,{userEvent:M,scrollIntoView:!0})}function findDiff(_,v,S,R){let T=Math.min(_.length,v.length),A=0;for(;A<T&&_.charCodeAt(A)==v.charCodeAt(A);)A++;if(A==T&&_.length==v.length)return null;let k=_.length,M=v.length;for(;k>0&&M>0&&_.charCodeAt(k-1)==v.charCodeAt(M-1);)k--,M--;if(R=="end"){let N=Math.max(0,A-Math.min(k,M));S-=k+N-A}if(k<A&&_.length<v.length){let N=S<=A&&S>=k?A-S:0;A-=N,M=A+(M-k),k=A}else if(M<A){let N=S<=A&&S>=M?A-S:0;A-=N,k=A+(k-M),M=A}return{from:A,toA:k,toB:M}}function selectionPoints(_){let v=[];if(_.root.activeElement!=_.contentDOM)return v;let{anchorNode:S,anchorOffset:R,focusNode:T,focusOffset:A}=_.observer.selectionRange;return S&&(v.push(new DOMPoint(S,R)),(T!=S||A!=R)&&v.push(new DOMPoint(T,A))),v}function selectionFromPoints(_,v){if(_.length==0)return null;let S=_[0].pos,R=_.length==2?_[1].pos:S;return S>-1&&R>-1?EditorSelection.single(S+v,R+v):null}class InputState{setSelectionOrigin(v){this.lastSelectionOrigin=v,this.lastSelectionTime=Date.now()}constructor(v){this.view=v,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=v.hasFocus,browser.safari&&v.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(v.contentDOM.ownerDocument)}handleEvent(v){!eventBelongsToEditor(this.view,v)||this.ignoreDuringComposition(v)||v.type=="keydown"&&this.keydown(v)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(v.type,v)):this.runHandlers(v.type,v))}runHandlers(v,S){let R=this.handlers[v];if(R){for(let T of R.observers)T(this.view,S);for(let T of R.handlers){if(S.defaultPrevented)break;if(T(this.view,S)){S.preventDefault();break}}}}ensureHandlers(v){let S=computeHandlers(v),R=this.handlers,T=this.view.contentDOM;for(let A in S)if(A!="scroll"){let k=!S[A].handlers.length,M=R[A];M&&k!=!M.handlers.length&&(T.removeEventListener(A,this.handleEvent),M=null),M||T.addEventListener(A,this.handleEvent,{passive:k})}for(let A in R)A!="scroll"&&!S[A]&&T.removeEventListener(A,this.handleEvent);this.handlers=S}keydown(v){if(this.lastKeyCode=v.keyCode,this.lastKeyTime=Date.now(),v.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&v.keyCode!=27&&modifierCodes.indexOf(v.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!v.synthetic&&(v.keyCode==13||v.keyCode==8))return this.view.observer.delayAndroidKey(v.key,v.keyCode),!0;let S;return browser.ios&&!v.synthetic&&!v.altKey&&!v.metaKey&&((S=PendingKeys.find(R=>R.keyCode==v.keyCode))&&!v.ctrlKey||EmacsyPendingKeys.indexOf(v.key)>-1&&v.ctrlKey&&!v.shiftKey)?(this.pendingIOSKey=S||v,setTimeout(()=>this.flushIOSKey(),250),!0):(v.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(v){let S=this.pendingIOSKey;return!S||S.key=="Enter"&&v&&v.from<v.to&&/^\S+$/.test(v.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,S.key,S.keyCode,S instanceof KeyboardEvent?S:void 0))}ignoreDuringComposition(v){return!/^key/.test(v.type)||v.synthetic?!1:this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(v){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=v}update(v){this.view.observer.update(v),this.mouseSelection&&this.mouseSelection.update(v),this.draggedContent&&v.docChanged&&(this.draggedContent=this.draggedContent.map(v.changes)),v.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(_,v){return(S,R)=>{try{return v.call(_,R,S)}catch(T){logException(S.state,T)}}}function computeHandlers(_){let v=Object.create(null);function S(R){return v[R]||(v[R]={observers:[],handlers:[]})}for(let R of _){let T=R.spec,A=T&&T.plugin.domEventHandlers,k=T&&T.plugin.domEventObservers;if(A)for(let M in A){let N=A[M];N&&S(M).handlers.push(bindHandler(R.value,N))}if(k)for(let M in k){let N=k[M];N&&S(M).observers.push(bindHandler(R.value,N))}}for(let R in handlers)S(R).handlers.push(handlers[R]);for(let R in observers)S(R).observers.push(observers[R]);return v}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(_){return Math.max(0,_)*.7+8}function dist(_,v){return Math.max(Math.abs(_.clientX-v.clientX),Math.abs(_.clientY-v.clientY))}class MouseSelection{constructor(v,S,R,T){this.view=v,this.startEvent=S,this.style=R,this.mustSelect=T,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=S,this.scrollParents=scrollableParents(v.contentDOM),this.atoms=v.state.facet(atomicRanges).map(k=>k(v));let A=v.contentDOM.ownerDocument;A.addEventListener("mousemove",this.move=this.move.bind(this)),A.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=S.shiftKey,this.multiple=v.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(v,S),this.dragging=isInPrimarySelection(v,S)&&getClickType(S)==1?null:!1}start(v){this.dragging===!1&&this.select(v)}move(v){if(v.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,v)<10)return;this.select(this.lastEvent=v);let S=0,R=0,T=0,A=0,k=this.view.win.innerWidth,M=this.view.win.innerHeight;this.scrollParents.x&&({left:T,right:k}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:A,bottom:M}=this.scrollParents.y.getBoundingClientRect());let N=getScrollMargins(this.view);v.clientX-N.left<=T+dragScrollMargin?S=-dragScrollSpeed(T-v.clientX):v.clientX+N.right>=k-dragScrollMargin&&(S=dragScrollSpeed(v.clientX-k)),v.clientY-N.top<=A+dragScrollMargin?R=-dragScrollSpeed(A-v.clientY):v.clientY+N.bottom>=M-dragScrollMargin&&(R=dragScrollSpeed(v.clientY-M)),this.setScrollSpeed(S,R)}up(v){this.dragging==null&&this.select(this.lastEvent),this.dragging||v.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let v=this.view.contentDOM.ownerDocument;v.removeEventListener("mousemove",this.move),v.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(v,S){this.scrollSpeed={x:v,y:S},v||S?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:v,y:S}=this.scrollSpeed;v&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=v,v=0),S&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=S,S=0),(v||S)&&this.view.win.scrollBy(v,S),this.dragging===!1&&this.select(this.lastEvent)}select(v){let{view:S}=this,R=skipAtomsForSelection(this.atoms,this.style.get(v,this.extend,this.multiple));(this.mustSelect||!R.eq(S.state.selection,this.dragging===!1))&&this.view.dispatch({selection:R,userEvent:"select.pointer"}),this.mustSelect=!1}update(v){v.transactions.some(S=>S.isUserEvent("input.type"))?this.destroy():this.style.update(v)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(_,v){let S=_.state.facet(clickAddsSelectionRange);return S.length?S[0](v):browser.mac?v.metaKey:v.ctrlKey}function dragMovesSelection(_,v){let S=_.state.facet(dragMovesSelection$1);return S.length?S[0](v):browser.mac?!v.altKey:!v.ctrlKey}function isInPrimarySelection(_,v){let{main:S}=_.state.selection;if(S.empty)return!1;let R=getSelection(_.root);if(!R||R.rangeCount==0)return!0;let T=R.getRangeAt(0).getClientRects();for(let A=0;A<T.length;A++){let k=T[A];if(k.left<=v.clientX&&k.right>=v.clientX&&k.top<=v.clientY&&k.bottom>=v.clientY)return!0}return!1}function eventBelongsToEditor(_,v){if(!v.bubbles)return!0;if(v.defaultPrevented)return!1;for(let S=v.target,R;S!=_.contentDOM;S=S.parentNode)if(!S||S.nodeType==11||(R=ContentView.get(S))&&R.ignoreEvent(v))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(_){let v=_.dom.parentNode;if(!v)return;let S=v.appendChild(document.createElement("textarea"));S.style.cssText="position: fixed; left: -10000px; top: 10px",S.focus(),setTimeout(()=>{_.focus(),S.remove(),doPaste(_,S.value)},50)}function textFilter(_,v,S){for(let R of _.facet(v))S=R(S,_);return S}function doPaste(_,v){v=textFilter(_.state,clipboardInputFilter,v);let{state:S}=_,R,T=1,A=S.toText(v),k=A.lines==S.selection.ranges.length;if(lastLinewiseCopy!=null&&S.selection.ranges.every(N=>N.empty)&&lastLinewiseCopy==A.toString()){let N=-1;R=S.changeByRange(D=>{let I=S.doc.lineAt(D.from);if(I.from==N)return{range:D};N=I.from;let q=S.toText((k?A.line(T++).text:v)+S.lineBreak);return{changes:{from:I.from,insert:q},range:EditorSelection.cursor(D.from+q.length)}})}else k?R=S.changeByRange(N=>{let D=A.line(T++);return{changes:{from:N.from,to:N.to,insert:D.text},range:EditorSelection.cursor(N.from+D.length)}}):R=S.replaceSelection(A);_.dispatch(R,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=_=>{_.inputState.lastScrollTop=_.scrollDOM.scrollTop,_.inputState.lastScrollLeft=_.scrollDOM.scrollLeft};handlers.keydown=(_,v)=>(_.inputState.setSelectionOrigin("select"),v.keyCode==27&&_.inputState.tabFocusMode!=0&&(_.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(_,v)=>{_.inputState.lastTouchTime=Date.now(),_.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=_=>{_.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(_,v)=>{if(_.observer.flush(),_.inputState.lastTouchTime>Date.now()-2e3)return!1;let S=null;for(let R of _.state.facet(mouseSelectionStyle))if(S=R(_,v),S)break;if(!S&&v.button==0&&(S=basicMouseSelection(_,v)),S){let R=!_.hasFocus;_.inputState.startMouseSelection(new MouseSelection(_,v,S,R)),R&&_.observer.ignore(()=>{focusPreventScroll(_.contentDOM);let A=_.root.activeElement;A&&!A.contains(_.contentDOM)&&A.blur()});let T=_.inputState.mouseSelection;if(T)return T.start(v),T.dragging===!1}else _.inputState.setSelectionOrigin("select.pointer");return!1};function rangeForClick(_,v,S,R){if(R==1)return EditorSelection.cursor(v,S);if(R==2)return groupAt(_.state,v,S);{let T=LineView.find(_.docView,v),A=_.state.doc.lineAt(T?T.posAtEnd:v),k=T?T.posAtStart:A.from,M=T?T.posAtEnd:A.to;return M<_.state.doc.length&&M==A.to&&M++,EditorSelection.range(k,M)}}let inside=(_,v,S)=>v>=S.top&&v<=S.bottom&&_>=S.left&&_<=S.right;function findPositionSide(_,v,S,R){let T=LineView.find(_.docView,v);if(!T)return 1;let A=v-T.posAtStart;if(A==0)return 1;if(A==T.length)return-1;let k=T.coordsAt(A,-1);if(k&&inside(S,R,k))return-1;let M=T.coordsAt(A,1);return M&&inside(S,R,M)?1:k&&k.bottom>=R?-1:1}function queryPos(_,v){let S=_.posAtCoords({x:v.clientX,y:v.clientY},!1);return{pos:S,bias:findPositionSide(_,S,v.clientX,v.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(_){if(!BadMouseDetail)return _.detail;let v=lastMouseDown,S=lastMouseDownTime;return lastMouseDown=_,lastMouseDownTime=Date.now(),lastMouseDownCount=!v||S>Date.now()-400&&Math.abs(v.clientX-_.clientX)<2&&Math.abs(v.clientY-_.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(_,v){let S=queryPos(_,v),R=getClickType(v),T=_.state.selection;return{update(A){A.docChanged&&(S.pos=A.changes.mapPos(S.pos),T=T.map(A.changes))},get(A,k,M){let N=queryPos(_,A),D,I=rangeForClick(_,N.pos,N.bias,R);if(S.pos!=N.pos&&!k){let q=rangeForClick(_,S.pos,S.bias,R),B=Math.min(q.from,I.from),z=Math.max(q.to,I.to);I=B<I.from?EditorSelection.range(B,z):EditorSelection.range(z,B)}return k?T.replaceRange(T.main.extend(I.from,I.to)):M&&R==1&&T.ranges.length>1&&(D=removeRangeAround(T,N.pos))?D:M?T.addRange(I):EditorSelection.create([I])}}}function removeRangeAround(_,v){for(let S=0;S<_.ranges.length;S++){let{from:R,to:T}=_.ranges[S];if(R<=v&&T>=v)return EditorSelection.create(_.ranges.slice(0,S).concat(_.ranges.slice(S+1)),_.mainIndex==S?0:_.mainIndex-(_.mainIndex>S?1:0))}return null}handlers.dragstart=(_,v)=>{let{selection:{main:S}}=_.state;if(v.target.draggable){let T=_.docView.nearest(v.target);if(T&&T.isWidget){let A=T.posAtStart,k=A+T.length;(A>=S.to||k<=S.from)&&(S=EditorSelection.range(A,k))}}let{inputState:R}=_;return R.mouseSelection&&(R.mouseSelection.dragging=!0),R.draggedContent=S,v.dataTransfer&&(v.dataTransfer.setData("Text",textFilter(_.state,clipboardOutputFilter,_.state.sliceDoc(S.from,S.to))),v.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=_=>(_.inputState.draggedContent=null,!1);function dropText(_,v,S,R){if(S=textFilter(_.state,clipboardInputFilter,S),!S)return;let T=_.posAtCoords({x:v.clientX,y:v.clientY},!1),{draggedContent:A}=_.inputState,k=R&&A&&dragMovesSelection(_,v)?{from:A.from,to:A.to}:null,M={from:T,insert:S},N=_.state.changes(k?[k,M]:M);_.focus(),_.dispatch({changes:N,selection:{anchor:N.mapPos(T,-1),head:N.mapPos(T,1)},userEvent:k?"move.drop":"input.drop"}),_.inputState.draggedContent=null}handlers.drop=(_,v)=>{if(!v.dataTransfer)return!1;if(_.state.readOnly)return!0;let S=v.dataTransfer.files;if(S&&S.length){let R=Array(S.length),T=0,A=()=>{++T==S.length&&dropText(_,v,R.filter(k=>k!=null).join(_.state.lineBreak),!1)};for(let k=0;k<S.length;k++){let M=new FileReader;M.onerror=A,M.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(M.result)||(R[k]=M.result),A()},M.readAsText(S[k])}return!0}else{let R=v.dataTransfer.getData("Text");if(R)return dropText(_,v,R,!0),!0}return!1};handlers.paste=(_,v)=>{if(_.state.readOnly)return!0;_.observer.flush();let S=brokenClipboardAPI?null:v.clipboardData;return S?(doPaste(_,S.getData("text/plain")||S.getData("text/uri-list")),!0):(capturePaste(_),!1)};function captureCopy(_,v){let S=_.dom.parentNode;if(!S)return;let R=S.appendChild(document.createElement("textarea"));R.style.cssText="position: fixed; left: -10000px; top: 10px",R.value=v,R.focus(),R.selectionEnd=v.length,R.selectionStart=0,setTimeout(()=>{R.remove(),_.focus()},50)}function copiedRange(_){let v=[],S=[],R=!1;for(let T of _.selection.ranges)T.empty||(v.push(_.sliceDoc(T.from,T.to)),S.push(T));if(!v.length){let T=-1;for(let{from:A}of _.selection.ranges){let k=_.doc.lineAt(A);k.number>T&&(v.push(k.text),S.push({from:k.from,to:Math.min(_.doc.length,k.to+1)})),T=k.number}R=!0}return{text:textFilter(_,clipboardOutputFilter,v.join(_.lineBreak)),ranges:S,linewise:R}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(_,v)=>{let{text:S,ranges:R,linewise:T}=copiedRange(_.state);if(!S&&!T)return!1;lastLinewiseCopy=T?S:null,v.type=="cut"&&!_.state.readOnly&&_.dispatch({changes:R,scrollIntoView:!0,userEvent:"delete.cut"});let A=brokenClipboardAPI?null:v.clipboardData;return A?(A.clearData(),A.setData("text/plain",S),!0):(captureCopy(_,S),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(_,v){let S=[];for(let R of _.facet(focusChangeEffect)){let T=R(_,v);T&&S.push(T)}return S.length?_.update({effects:S,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(_){setTimeout(()=>{let v=_.hasFocus;if(v!=_.inputState.notifiedFocused){let S=focusChangeTransaction(_.state,v);S?_.dispatch(S):_.update([])}},10)}observers.focus=_=>{_.inputState.lastFocusTime=Date.now(),!_.scrollDOM.scrollTop&&(_.inputState.lastScrollTop||_.inputState.lastScrollLeft)&&(_.scrollDOM.scrollTop=_.inputState.lastScrollTop,_.scrollDOM.scrollLeft=_.inputState.lastScrollLeft),updateForFocusChange(_)};observers.blur=_=>{_.observer.clearSelectionRange(),updateForFocusChange(_)};observers.compositionstart=observers.compositionupdate=_=>{_.observer.editContext||(_.inputState.compositionFirstChange==null&&(_.inputState.compositionFirstChange=!0),_.inputState.composing<0&&(_.inputState.composing=0))};observers.compositionend=_=>{_.observer.editContext||(_.inputState.composing=-1,_.inputState.compositionEndedAt=Date.now(),_.inputState.compositionPendingKey=!0,_.inputState.compositionPendingChange=_.observer.pendingRecords().length>0,_.inputState.compositionFirstChange=null,browser.chrome&&browser.android?_.observer.flushSoon():_.inputState.compositionPendingChange?Promise.resolve().then(()=>_.observer.flush()):setTimeout(()=>{_.inputState.composing<0&&_.docView.hasComposition&&_.update([])},50))};observers.contextmenu=_=>{_.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(_,v)=>{var S,R;if((v.inputType=="insertText"||v.inputType=="insertCompositionText")&&(_.inputState.insertingText=v.data,_.inputState.insertingTextAt=Date.now()),v.inputType=="insertReplacementText"&&_.observer.editContext){let A=(S=v.dataTransfer)===null||S===void 0?void 0:S.getData("text/plain"),k=v.getTargetRanges();if(A&&k.length){let M=k[0],N=_.posAtDOM(M.startContainer,M.startOffset),D=_.posAtDOM(M.endContainer,M.endOffset);return applyDOMChangeInner(_,{from:N,to:D,insert:_.state.toText(A)},null),!0}}let T;if(browser.chrome&&browser.android&&(T=PendingKeys.find(A=>A.inputType==v.inputType))&&(_.observer.delayAndroidKey(T.key,T.keyCode),T.key=="Backspace"||T.key=="Delete")){let A=((R=window.visualViewport)===null||R===void 0?void 0:R.height)||0;setTimeout(()=>{var k;(((k=window.visualViewport)===null||k===void 0?void 0:k.height)||0)>A+10&&_.hasFocus&&(_.contentDOM.blur(),_.focus())},100)}return browser.ios&&v.inputType=="deleteContentForward"&&_.observer.flushSoon(),browser.safari&&v.inputType=="insertText"&&_.inputState.composing>=0&&setTimeout(()=>observers.compositionend(_,v),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(_){appliedFirefoxHack.has(_)||(appliedFirefoxHack.add(_),_.addEventListener("copy",()=>{}),_.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(v){this.lineWrapping=v,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(v,S){let R=this.doc.lineAt(S).number-this.doc.lineAt(v).number+1;return this.lineWrapping&&(R+=Math.max(0,Math.ceil((S-v-R*this.lineLength*.5)/this.lineLength))),this.lineHeight*R}heightForLine(v){return this.lineWrapping?(1+Math.max(0,Math.ceil((v-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(v){return this.doc=v,this}mustRefreshForWrapping(v){return wrappingWhiteSpace.indexOf(v)>-1!=this.lineWrapping}mustRefreshForHeights(v){let S=!1;for(let R=0;R<v.length;R++){let T=v[R];T<0?R++:this.heightSamples[Math.floor(T*10)]||(S=!0,this.heightSamples[Math.floor(T*10)]=!0)}return S}refresh(v,S,R,T,A,k){let M=wrappingWhiteSpace.indexOf(v)>-1,N=Math.round(S)!=Math.round(this.lineHeight)||this.lineWrapping!=M;if(this.lineWrapping=M,this.lineHeight=S,this.charWidth=R,this.textHeight=T,this.lineLength=A,N){this.heightSamples={};for(let D=0;D<k.length;D++){let I=k[D];I<0?D++:this.heightSamples[Math.floor(I*10)]=!0}}return N}}class MeasuredHeights{constructor(v,S){this.from=v,this.heights=S,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(v,S,R,T,A){this.from=v,this.length=S,this.top=R,this.height=T,this._content=A}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(v){let S=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(v._content)?v._content:[v]);return new BlockInfo(this.from,this.length+v.length,this.top,this.height+v.height,S)}}var QueryType$1=(function(_){return _[_.ByPos=0]="ByPos",_[_.ByHeight=1]="ByHeight",_[_.ByPosNoHeight=2]="ByPosNoHeight",_})(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(v,S,R=2){this.length=v,this.height=S,this.flags=R}get outdated(){return(this.flags&2)>0}set outdated(v){this.flags=(v?2:0)|this.flags&-3}setHeight(v){this.height!=v&&(Math.abs(this.height-v)>Epsilon&&(heightChangeFlag=!0),this.height=v)}replace(v,S,R){return HeightMap.of(R)}decomposeLeft(v,S){S.push(this)}decomposeRight(v,S){S.push(this)}applyChanges(v,S,R,T){let A=this,k=R.doc;for(let M=T.length-1;M>=0;M--){let{fromA:N,toA:D,fromB:I,toB:q}=T[M],B=A.lineAt(N,QueryType$1.ByPosNoHeight,R.setDoc(S),0,0),z=B.to>=D?B:A.lineAt(D,QueryType$1.ByPosNoHeight,R,0,0);for(q+=z.to-D,D=z.to;M>0&&B.from<=T[M-1].toA;)N=T[M-1].fromA,I=T[M-1].fromB,M--,N<B.from&&(B=A.lineAt(N,QueryType$1.ByPosNoHeight,R,0,0));I+=B.from-N,N=B.from;let F=NodeBuilder.build(R.setDoc(k),v,I,q);A=replace(A,A.replace(N,D,F))}return A.updateHeight(R,0)}static empty(){return new HeightMapText(0,0)}static of(v){if(v.length==1)return v[0];let S=0,R=v.length,T=0,A=0;for(;;)if(S==R)if(T>A*2){let M=v[S-1];M.break?v.splice(--S,1,M.left,null,M.right):v.splice(--S,1,M.left,M.right),R+=1+M.break,T-=M.size}else if(A>T*2){let M=v[R];M.break?v.splice(R,1,M.left,null,M.right):v.splice(R,1,M.left,M.right),R+=2+M.break,A-=M.size}else break;else if(T<A){let M=v[S++];M&&(T+=M.size)}else{let M=v[--R];M&&(A+=M.size)}let k=0;return v[S-1]==null?(k=1,S--):v[S]==null&&(k=1,R++),new HeightMapBranch(HeightMap.of(v.slice(0,S)),k,HeightMap.of(v.slice(R)))}}function replace(_,v){return _==v?_:(_.constructor!=v.constructor&&(heightChangeFlag=!0),v)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(v,S,R){super(v,S),this.deco=R}blockAt(v,S,R,T){return new BlockInfo(T,this.length,R,this.height,this.deco||0)}lineAt(v,S,R,T,A){return this.blockAt(0,R,T,A)}forEachLine(v,S,R,T,A,k){v<=A+this.length&&S>=A&&k(this.blockAt(0,R,T,A))}updateHeight(v,S=0,R=!1,T){return T&&T.from<=S&&T.more&&this.setHeight(T.heights[T.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(v,S){super(v,S,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(v,S,R,T){return new BlockInfo(T,this.length,R,this.height,this.breaks)}replace(v,S,R){let T=R[0];return R.length==1&&(T instanceof HeightMapText||T instanceof HeightMapGap&&T.flags&4)&&Math.abs(this.length-T.length)<10?(T instanceof HeightMapGap?T=new HeightMapText(T.length,this.height):T.height=this.height,this.outdated||(T.outdated=!1),T):HeightMap.of(R)}updateHeight(v,S=0,R=!1,T){return T&&T.from<=S&&T.more?this.setHeight(T.heights[T.index++]):(R||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,v.heightForLine(this.length-this.collapsed))+this.breaks*v.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(v){super(v,0)}heightMetrics(v,S){let R=v.doc.lineAt(S).number,T=v.doc.lineAt(S+this.length).number,A=T-R+1,k,M=0;if(v.lineWrapping){let N=Math.min(this.height,v.lineHeight*A);k=N/A,this.length>A+1&&(M=(this.height-N)/(this.length-A-1))}else k=this.height/A;return{firstLine:R,lastLine:T,perLine:k,perChar:M}}blockAt(v,S,R,T){let{firstLine:A,lastLine:k,perLine:M,perChar:N}=this.heightMetrics(S,T);if(S.lineWrapping){let D=T+(v<S.lineHeight?0:Math.round(Math.max(0,Math.min(1,(v-R)/this.height))*this.length)),I=S.doc.lineAt(D),q=M+I.length*N,B=Math.max(R,v-q/2);return new BlockInfo(I.from,I.length,B,q,0)}else{let D=Math.max(0,Math.min(k-A,Math.floor((v-R)/M))),{from:I,length:q}=S.doc.line(A+D);return new BlockInfo(I,q,R+M*D,M,0)}}lineAt(v,S,R,T,A){if(S==QueryType$1.ByHeight)return this.blockAt(v,R,T,A);if(S==QueryType$1.ByPosNoHeight){let{from:z,to:F}=R.doc.lineAt(v);return new BlockInfo(z,F-z,0,0,0)}let{firstLine:k,perLine:M,perChar:N}=this.heightMetrics(R,A),D=R.doc.lineAt(v),I=M+D.length*N,q=D.number-k,B=T+M*q+N*(D.from-A-q);return new BlockInfo(D.from,D.length,Math.max(T,Math.min(B,T+this.height-I)),I,0)}forEachLine(v,S,R,T,A,k){v=Math.max(v,A),S=Math.min(S,A+this.length);let{firstLine:M,perLine:N,perChar:D}=this.heightMetrics(R,A);for(let I=v,q=T;I<=S;){let B=R.doc.lineAt(I);if(I==v){let F=B.number-M;q+=N*F+D*(v-A-F)}let z=N+D*B.length;k(new BlockInfo(B.from,B.length,q,z,0)),q+=z,I=B.to+1}}replace(v,S,R){let T=this.length-S;if(T>0){let A=R[R.length-1];A instanceof HeightMapGap?R[R.length-1]=new HeightMapGap(A.length+T):R.push(null,new HeightMapGap(T-1))}if(v>0){let A=R[0];A instanceof HeightMapGap?R[0]=new HeightMapGap(v+A.length):R.unshift(new HeightMapGap(v-1),null)}return HeightMap.of(R)}decomposeLeft(v,S){S.push(new HeightMapGap(v-1),null)}decomposeRight(v,S){S.push(null,new HeightMapGap(this.length-v-1))}updateHeight(v,S=0,R=!1,T){let A=S+this.length;if(T&&T.from<=S+this.length&&T.more){let k=[],M=Math.max(S,T.from),N=-1;for(T.from>S&&k.push(new HeightMapGap(T.from-S-1).updateHeight(v,S));M<=A&&T.more;){let I=v.doc.lineAt(M).length;k.length&&k.push(null);let q=T.heights[T.index++];N==-1?N=q:Math.abs(q-N)>=Epsilon&&(N=-2);let B=new HeightMapText(I,q);B.outdated=!1,k.push(B),M+=I+1}M<=A&&k.push(null,new HeightMapGap(A-M).updateHeight(v,M));let D=HeightMap.of(k);return(N<0||Math.abs(D.height-this.height)>=Epsilon||Math.abs(N-this.heightMetrics(v,S).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,D)}else(R||this.outdated)&&(this.setHeight(v.heightForGap(S,S+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(v,S,R){super(v.length+S+R.length,v.height+R.height,S|(v.outdated||R.outdated?2:0)),this.left=v,this.right=R,this.size=v.size+R.size}get break(){return this.flags&1}blockAt(v,S,R,T){let A=R+this.left.height;return v<A?this.left.blockAt(v,S,R,T):this.right.blockAt(v,S,A,T+this.left.length+this.break)}lineAt(v,S,R,T,A){let k=T+this.left.height,M=A+this.left.length+this.break,N=S==QueryType$1.ByHeight?v<k:v<M,D=N?this.left.lineAt(v,S,R,T,A):this.right.lineAt(v,S,R,k,M);if(this.break||(N?D.to<M:D.from>M))return D;let I=S==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return N?D.join(this.right.lineAt(M,I,R,k,M)):this.left.lineAt(M,I,R,T,A).join(D)}forEachLine(v,S,R,T,A,k){let M=T+this.left.height,N=A+this.left.length+this.break;if(this.break)v<N&&this.left.forEachLine(v,S,R,T,A,k),S>=N&&this.right.forEachLine(v,S,R,M,N,k);else{let D=this.lineAt(N,QueryType$1.ByPos,R,T,A);v<D.from&&this.left.forEachLine(v,D.from-1,R,T,A,k),D.to>=v&&D.from<=S&&k(D),S>D.to&&this.right.forEachLine(D.to+1,S,R,M,N,k)}}replace(v,S,R){let T=this.left.length+this.break;if(S<T)return this.balanced(this.left.replace(v,S,R),this.right);if(v>this.left.length)return this.balanced(this.left,this.right.replace(v-T,S-T,R));let A=[];v>0&&this.decomposeLeft(v,A);let k=A.length;for(let M of R)A.push(M);if(v>0&&mergeGaps(A,k-1),S<this.length){let M=A.length;this.decomposeRight(S,A),mergeGaps(A,M)}return HeightMap.of(A)}decomposeLeft(v,S){let R=this.left.length;if(v<=R)return this.left.decomposeLeft(v,S);S.push(this.left),this.break&&(R++,v>=R&&S.push(null)),v>R&&this.right.decomposeLeft(v-R,S)}decomposeRight(v,S){let R=this.left.length,T=R+this.break;if(v>=T)return this.right.decomposeRight(v-T,S);v<R&&this.left.decomposeRight(v,S),this.break&&v<T&&S.push(null),S.push(this.right)}balanced(v,S){return v.size>2*S.size||S.size>2*v.size?HeightMap.of(this.break?[v,null,S]:[v,S]):(this.left=replace(this.left,v),this.right=replace(this.right,S),this.setHeight(v.height+S.height),this.outdated=v.outdated||S.outdated,this.size=v.size+S.size,this.length=v.length+this.break+S.length,this)}updateHeight(v,S=0,R=!1,T){let{left:A,right:k}=this,M=S+A.length+this.break,N=null;return T&&T.from<=S+A.length&&T.more?N=A=A.updateHeight(v,S,R,T):A.updateHeight(v,S,R),T&&T.from<=M+k.length&&T.more?N=k=k.updateHeight(v,M,R,T):k.updateHeight(v,M,R),N?this.balanced(A,k):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(_,v){let S,R;_[v]==null&&(S=_[v-1])instanceof HeightMapGap&&(R=_[v+1])instanceof HeightMapGap&&_.splice(v-1,3,new HeightMapGap(S.length+1+R.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(v,S){this.pos=v,this.oracle=S,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=v}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(v,S){if(this.lineStart>-1){let R=Math.min(S,this.lineEnd),T=this.nodes[this.nodes.length-1];T instanceof HeightMapText?T.length+=R-this.pos:(R>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(R-this.pos,-1)),this.writtenTo=R,S>R&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=S}point(v,S,R){if(v<S||R.heightRelevant){let T=R.widget?R.widget.estimatedHeight:0,A=R.widget?R.widget.lineBreaks:0;T<0&&(T=this.oracle.lineHeight);let k=S-v;R.block?this.addBlock(new HeightMapBlock(k,T,R)):(k||A||T>=relevantWidgetHeight)&&this.addLineDeco(T,A,k)}else S>v&&this.span(v,S);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:v,to:S}=this.oracle.doc.lineAt(this.pos);this.lineStart=v,this.lineEnd=S,this.writtenTo<v&&((this.writtenTo<v-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,v-1)),this.nodes.push(null)),this.pos>v&&this.nodes.push(new HeightMapText(this.pos-v,-1)),this.writtenTo=this.pos}blankContent(v,S){let R=new HeightMapGap(S-v);return this.oracle.doc.lineAt(v).to==S&&(R.flags|=4),R}ensureLine(){this.enterLine();let v=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(v instanceof HeightMapText)return v;let S=new HeightMapText(0,-1);return this.nodes.push(S),S}addBlock(v){this.enterLine();let S=v.deco;S&&S.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(v),this.writtenTo=this.pos=this.pos+v.length,S&&S.endSide>0&&(this.covering=v)}addLineDeco(v,S,R){let T=this.ensureLine();T.length+=R,T.collapsed+=R,T.widgetHeight=Math.max(T.widgetHeight,v),T.breaks+=S,this.writtenTo=this.pos=this.pos+R}finish(v){let S=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(S instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||S==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let R=v;for(let T of this.nodes)T instanceof HeightMapText&&T.updateHeight(this.oracle,R),R+=T?T.length:1;return this.nodes}static build(v,S,R,T){let A=new NodeBuilder(R,v);return RangeSet.spans(S,R,T,A,0),A.finish(R)}}function heightRelevantDecoChanges(_,v,S){let R=new DecorationComparator;return RangeSet.compare(_,v,S,R,0),R.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(v,S,R,T){(v<S||R&&R.heightRelevant||T&&T.heightRelevant)&&addRange(v,S,this.changes,5)}}function visiblePixelRange(_,v){let S=_.getBoundingClientRect(),R=_.ownerDocument,T=R.defaultView||window,A=Math.max(0,S.left),k=Math.min(T.innerWidth,S.right),M=Math.max(0,S.top),N=Math.min(T.innerHeight,S.bottom);for(let D=_.parentNode;D&&D!=R.body;)if(D.nodeType==1){let I=D,q=window.getComputedStyle(I);if((I.scrollHeight>I.clientHeight||I.scrollWidth>I.clientWidth)&&q.overflow!="visible"){let B=I.getBoundingClientRect();A=Math.max(A,B.left),k=Math.min(k,B.right),M=Math.max(M,B.top),N=Math.min(D==_.parentNode?T.innerHeight:N,B.bottom)}D=q.position=="absolute"||q.position=="fixed"?I.offsetParent:I.parentNode}else if(D.nodeType==11)D=D.host;else break;return{left:A-S.left,right:Math.max(A,k)-S.left,top:M-(S.top+v),bottom:Math.max(M,N)-(S.top+v)}}function inWindow(_){let v=_.getBoundingClientRect(),S=_.ownerDocument.defaultView||window;return v.left<S.innerWidth&&v.right>0&&v.top<S.innerHeight&&v.bottom>0}function fullPixelRange(_,v){let S=_.getBoundingClientRect();return{left:0,right:S.right-S.left,top:v,bottom:S.bottom-(S.top+v)}}class LineGap{constructor(v,S,R,T){this.from=v,this.to=S,this.size=R,this.displaySize=T}static same(v,S){if(v.length!=S.length)return!1;for(let R=0;R<v.length;R++){let T=v[R],A=S[R];if(T.from!=A.from||T.to!=A.to||T.size!=A.size)return!1}return!0}draw(v,S){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(S?v.scaleY:v.scaleX),S)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(v,S){super(),this.size=v,this.vertical=S}eq(v){return v.size==this.size&&v.vertical==this.vertical}toDOM(){let v=document.createElement("div");return this.vertical?v.style.height=this.size+"px":(v.style.width=this.size+"px",v.style.height="2px",v.style.display="inline-block"),v}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(v){this.state=v,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let S=v.facet(contentAttributes).some(R=>typeof R!="function"&&R.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(S),this.stateDeco=v.facet(decorations).filter(R=>typeof R!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(v.doc),[new ChangedRange(0,0,0,v.doc.length)]);for(let R=0;R<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());R++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(R=>R.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let v=[this.viewport],{main:S}=this.state.selection;for(let R=0;R<=1;R++){let T=R?S.head:S.anchor;if(!v.some(({from:A,to:k})=>T>=A&&T<=k)){let{from:A,to:k}=this.lineBlockAt(T);v.push(new Viewport$1(A,k))}}return this.viewports=v.sort((R,T)=>R.from-T.from),this.updateScaler()}updateScaler(){let v=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),v.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,v=>{this.viewportLines.push(scaleBlock(v,this.scaler))})}update(v,S=null){this.state=v.state;let R=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(I=>typeof I!="function");let T=v.changedRanges,A=ChangedRange.extendWithRanges(T,heightRelevantDecoChanges(R,this.stateDeco,v?v.changes:ChangeSet.empty(this.state.doc.length))),k=this.heightMap.height,M=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,v.startState.doc,this.heightOracle.setDoc(this.state.doc),A),(this.heightMap.height!=k||heightChangeFlag)&&(v.flags|=2),M?(this.scrollAnchorPos=v.changes.mapPos(M.from,-1),this.scrollAnchorHeight=M.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=k);let N=A.length?this.mapViewport(this.viewport,v.changes):this.viewport;(S&&(S.range.head<N.from||S.range.head>N.to)||!this.viewportIsAppropriate(N))&&(N=this.getViewport(0,S));let D=N.from!=this.viewport.from||N.to!=this.viewport.to;this.viewport=N,v.flags|=this.updateForViewport(),(D||!v.changes.empty||v.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,v.changes))),v.flags|=this.computeVisibleRanges(v.changes),S&&(this.scrollTarget=S),!this.mustEnforceCursorAssoc&&v.selectionSet&&v.view.lineWrapping&&v.state.selection.main.empty&&v.state.selection.main.assoc&&!v.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(v){let S=v.contentDOM,R=window.getComputedStyle(S),T=this.heightOracle,A=R.whiteSpace;this.defaultTextDirection=R.direction=="rtl"?Direction.RTL:Direction.LTR;let k=this.heightOracle.mustRefreshForWrapping(A),M=S.getBoundingClientRect(),N=k||this.mustMeasureContent||this.contentDOMHeight!=M.height;this.contentDOMHeight=M.height,this.mustMeasureContent=!1;let D=0,I=0;if(M.width&&M.height){let{scaleX:J,scaleY:ne}=getScale(S,M);(J>.005&&Math.abs(this.scaleX-J)>.005||ne>.005&&Math.abs(this.scaleY-ne)>.005)&&(this.scaleX=J,this.scaleY=ne,D|=16,k=N=!0)}let q=(parseInt(R.paddingTop)||0)*this.scaleY,B=(parseInt(R.paddingBottom)||0)*this.scaleY;(this.paddingTop!=q||this.paddingBottom!=B)&&(this.paddingTop=q,this.paddingBottom=B,D|=18),this.editorWidth!=v.scrollDOM.clientWidth&&(T.lineWrapping&&(N=!0),this.editorWidth=v.scrollDOM.clientWidth,D|=16);let z=v.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=z&&(this.scrollAnchorHeight=-1,this.scrollTop=z),this.scrolledToBottom=isScrolledToBottom(v.scrollDOM);let F=(this.printing?fullPixelRange:visiblePixelRange)(S,this.paddingTop),V=F.top-this.pixelViewport.top,H=F.bottom-this.pixelViewport.bottom;this.pixelViewport=F;let W=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(W!=this.inView&&(this.inView=W,W&&(N=!0)),!this.inView&&!this.scrollTarget&&!inWindow(v.dom))return 0;let Y=M.width;if((this.contentDOMWidth!=Y||this.editorHeight!=v.scrollDOM.clientHeight)&&(this.contentDOMWidth=M.width,this.editorHeight=v.scrollDOM.clientHeight,D|=16),N){let J=v.docView.measureVisibleLineHeights(this.viewport);if(T.mustRefreshForHeights(J)&&(k=!0),k||T.lineWrapping&&Math.abs(Y-this.contentDOMWidth)>T.charWidth){let{lineHeight:ne,charWidth:oe,textHeight:te}=v.docView.measureTextSize();k=ne>0&&T.refresh(A,ne,oe,te,Math.max(5,Y/oe),J),k&&(v.docView.minWidth=0,D|=16)}V>0&&H>0?I=Math.max(V,H):V<0&&H<0&&(I=Math.min(V,H)),clearHeightChangeFlag();for(let ne of this.viewports){let oe=ne.from==this.viewport.from?J:v.docView.measureVisibleLineHeights(ne);this.heightMap=(k?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,v.state.doc.length)]):this.heightMap).updateHeight(T,0,k,new MeasuredHeights(ne.from,oe))}heightChangeFlag&&(D|=2)}let Z=!this.viewportIsAppropriate(this.viewport,I)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Z&&(D&2&&(D|=this.updateScaler()),this.viewport=this.getViewport(I,this.scrollTarget),D|=this.updateForViewport()),(D&2||Z)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(k?[]:this.lineGaps,v)),D|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,v.docView.enforceCursorAssoc()),D}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(v,S){let R=.5-Math.max(-.5,Math.min(.5,v/1e3/2)),T=this.heightMap,A=this.heightOracle,{visibleTop:k,visibleBottom:M}=this,N=new Viewport$1(T.lineAt(k-R*1e3,QueryType$1.ByHeight,A,0,0).from,T.lineAt(M+(1-R)*1e3,QueryType$1.ByHeight,A,0,0).to);if(S){let{head:D}=S.range;if(D<N.from||D>N.to){let I=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),q=T.lineAt(D,QueryType$1.ByPos,A,0,0),B;S.y=="center"?B=(q.top+q.bottom)/2-I/2:S.y=="start"||S.y=="nearest"&&D<N.from?B=q.top:B=q.bottom-I,N=new Viewport$1(T.lineAt(B-1e3/2,QueryType$1.ByHeight,A,0,0).from,T.lineAt(B+I+1e3/2,QueryType$1.ByHeight,A,0,0).to)}}return N}mapViewport(v,S){let R=S.mapPos(v.from,-1),T=S.mapPos(v.to,1);return new Viewport$1(this.heightMap.lineAt(R,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(T,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:v,to:S},R=0){if(!this.inView)return!0;let{top:T}=this.heightMap.lineAt(v,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:A}=this.heightMap.lineAt(S,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:k,visibleBottom:M}=this;return(v==0||T<=k-Math.max(10,Math.min(-R,250)))&&(S==this.state.doc.length||A>=M+Math.max(10,Math.min(R,250)))&&T>k-2*1e3&&A<M+2*1e3}mapLineGaps(v,S){if(!v.length||S.empty)return v;let R=[];for(let T of v)S.touchesRange(T.from,T.to)||R.push(new LineGap(S.mapPos(T.from),S.mapPos(T.to),T.size,T.displaySize));return R}ensureLineGaps(v,S){let R=this.heightOracle.lineWrapping,T=R?1e4:2e3,A=T>>1,k=T<<1;if(this.defaultTextDirection!=Direction.LTR&&!R)return[];let M=[],N=(I,q,B,z)=>{if(q-I<A)return;let F=this.state.selection.main,V=[F.from];F.empty||V.push(F.to);for(let W of V)if(W>I&&W<q){N(I,W-10,B,z),N(W+10,q,B,z);return}let H=find(v,W=>W.from>=B.from&&W.to<=B.to&&Math.abs(W.from-I)<A&&Math.abs(W.to-q)<A&&!V.some(Y=>W.from<Y&&W.to>Y));if(!H){if(q<B.to&&S&&R&&S.visibleRanges.some(Z=>Z.from<=q&&Z.to>=q)){let Z=S.moveToLineBoundary(EditorSelection.cursor(q),!1,!0).head;Z>I&&(q=Z)}let W=this.gapSize(B,I,q,z),Y=R||W<2e6?W:2e6;H=new LineGap(I,q,W,Y)}M.push(H)},D=I=>{if(I.length<k||I.type!=BlockType.Text)return;let q=lineStructure(I.from,I.to,this.stateDeco);if(q.total<k)return;let B=this.scrollTarget?this.scrollTarget.range.head:null,z,F;if(R){let V=T/this.heightOracle.lineLength*this.heightOracle.lineHeight,H,W;if(B!=null){let Y=findFraction(q,B),Z=((this.visibleBottom-this.visibleTop)/2+V)/I.height;H=Y-Z,W=Y+Z}else H=(this.visibleTop-I.top-V)/I.height,W=(this.visibleBottom-I.top+V)/I.height;z=findPosition(q,H),F=findPosition(q,W)}else{let V=q.total*this.heightOracle.charWidth,H=T*this.heightOracle.charWidth,W=0;if(V>2e6)for(let oe of v)oe.from>=I.from&&oe.from<I.to&&oe.size!=oe.displaySize&&oe.from*this.heightOracle.charWidth+W<this.pixelViewport.left&&(W=oe.size-oe.displaySize);let Y=this.pixelViewport.left+W,Z=this.pixelViewport.right+W,J,ne;if(B!=null){let oe=findFraction(q,B),te=((Z-Y)/2+H)/V;J=oe-te,ne=oe+te}else J=(Y-H)/V,ne=(Z+H)/V;z=findPosition(q,J),F=findPosition(q,ne)}z>I.from&&N(I.from,z,I,q),F<I.to&&N(F,I.to,I,q)};for(let I of this.viewportLines)Array.isArray(I.type)?I.type.forEach(D):D(I);return M}gapSize(v,S,R,T){let A=findFraction(T,R)-findFraction(T,S);return this.heightOracle.lineWrapping?v.height*A:T.total*this.heightOracle.charWidth*A}updateLineGaps(v){LineGap.same(v,this.lineGaps)||(this.lineGaps=v,this.lineGapDeco=Decoration.set(v.map(S=>S.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(v){let S=this.stateDeco;this.lineGaps.length&&(S=S.concat(this.lineGapDeco));let R=[];RangeSet.spans(S,this.viewport.from,this.viewport.to,{span(A,k){R.push({from:A,to:k})},point(){}},20);let T=0;if(R.length!=this.visibleRanges.length)T=12;else for(let A=0;A<R.length&&!(T&8);A++){let k=this.visibleRanges[A],M=R[A];(k.from!=M.from||k.to!=M.to)&&(T|=4,v&&v.mapPos(k.from,-1)==M.from&&v.mapPos(k.to,1)==M.to||(T|=8))}return this.visibleRanges=R,T}lineBlockAt(v){return v>=this.viewport.from&&v<=this.viewport.to&&this.viewportLines.find(S=>S.from<=v&&S.to>=v)||scaleBlock(this.heightMap.lineAt(v,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(v){return v>=this.viewportLines[0].top&&v<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(S=>S.top<=v&&S.bottom>=v)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(v),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(v){let S=this.lineBlockAtHeight(v+8);return S.from>=this.viewport.from||this.viewportLines[0].top-v>200?S:this.viewportLines[0]}elementAtHeight(v){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(v),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Viewport$1=class{constructor(v,S){this.from=v,this.to=S}};function lineStructure(_,v,S){let R=[],T=_,A=0;return RangeSet.spans(S,_,v,{span(){},point(k,M){k>T&&(R.push({from:T,to:k}),A+=k-T),T=M}},20),T<v&&(R.push({from:T,to:v}),A+=v-T),{total:A,ranges:R}}function findPosition({total:_,ranges:v},S){if(S<=0)return v[0].from;if(S>=1)return v[v.length-1].to;let R=Math.floor(_*S);for(let T=0;;T++){let{from:A,to:k}=v[T],M=k-A;if(R<=M)return A+R;R-=M}}function findFraction(_,v){let S=0;for(let{from:R,to:T}of _.ranges){if(v<=T){S+=v-R;break}S+=T-R}return S/_.total}function find(_,v){for(let S of _)if(v(S))return S}const IdScaler={toDOM(_){return _},fromDOM(_){return _},scale:1,eq(_){return _==this}};class BigScaler{constructor(v,S,R){let T=0,A=0,k=0;this.viewports=R.map(({from:M,to:N})=>{let D=S.lineAt(M,QueryType$1.ByPos,v,0,0).top,I=S.lineAt(N,QueryType$1.ByPos,v,0,0).bottom;return T+=I-D,{from:M,to:N,top:D,bottom:I,domTop:0,domBottom:0}}),this.scale=(7e6-T)/(S.height-T);for(let M of this.viewports)M.domTop=k+(M.top-A)*this.scale,k=M.domBottom=M.domTop+(M.bottom-M.top),A=M.bottom}toDOM(v){for(let S=0,R=0,T=0;;S++){let A=S<this.viewports.length?this.viewports[S]:null;if(!A||v<A.top)return T+(v-R)*this.scale;if(v<=A.bottom)return A.domTop+(v-A.top);R=A.bottom,T=A.domBottom}}fromDOM(v){for(let S=0,R=0,T=0;;S++){let A=S<this.viewports.length?this.viewports[S]:null;if(!A||v<A.domTop)return R+(v-T)/this.scale;if(v<=A.domBottom)return A.top+(v-A.domTop);R=A.bottom,T=A.domBottom}}eq(v){return v instanceof BigScaler?this.scale==v.scale&&this.viewports.length==v.viewports.length&&this.viewports.every((S,R)=>S.from==v.viewports[R].from&&S.to==v.viewports[R].to):!1}}function scaleBlock(_,v){if(v.scale==1)return _;let S=v.toDOM(_.top),R=v.toDOM(_.bottom);return new BlockInfo(_.from,_.length,S,R-S,Array.isArray(_._content)?_._content.map(T=>scaleBlock(T,v)):_._content)}const theme=Facet.define({combine:_=>_.join(" ")}),darkTheme=Facet.define({combine:_=>_.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(_,v,S){return new StyleModule(v,{finish(R){return/&/.test(R)?R.replace(/&\w*/,T=>{if(T=="&")return _;if(!S||!S[T])throw new RangeError(`Unsupported selector: ${T}`);return S[T]}):_+" "+R}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(v){this.view=v,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=v.contentDOM,this.observer=new MutationObserver(S=>{for(let R of S)this.queue.push(R);(browser.ie&&browser.ie_version<=11||browser.ios&&v.composing)&&S.some(R=>R.type=="childList"&&R.removedNodes.length||R.type=="characterData"&&R.oldValue.length>R.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&browser.android&&v.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(v),v.state.facet(editable)&&(v.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=S=>{this.queue.push({target:S.target,type:"characterData",oldValue:S.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var S;((S=this.view.docView)===null||S===void 0?void 0:S.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(v.scrollDOM)),this.addWindowListeners(this.win=v.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(S=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),S.length>0&&S[S.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(S=>{S.length>0&&S[S.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(v){this.view.inputState.runHandlers("scroll",v),this.intersecting&&this.view.measure()}onScroll(v){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(v)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(v){(v.type=="change"||!v.type)&&!v.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(v){if(this.gapIntersection&&(v.length!=this.gaps.length||this.gaps.some((S,R)=>S!=v[R]))){this.gapIntersection.disconnect();for(let S of v)this.gapIntersection.observe(S);this.gaps=v}}onSelectionChange(v){let S=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:R}=this,T=this.selectionRange;if(R.state.facet(editable)?R.root.activeElement!=this.dom:!hasSelection(this.dom,T))return;let A=T.anchorNode&&R.docView.nearest(T.anchorNode);if(A&&A.ignoreEvent(v)){S||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!R.state.selection.main.empty&&T.focusNode&&isEquivalentPosition(T.focusNode,T.focusOffset,T.anchorNode,T.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:v}=this,S=getSelection(v.root);if(!S)return!1;let R=browser.safari&&v.root.nodeType==11&&v.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,S)||S;if(!R||this.selectionRange.eq(R))return!1;let T=hasSelection(this.dom,R);return T&&!this.selectionChanged&&v.inputState.lastFocusTime>Date.now()-200&&v.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,R)?(this.view.inputState.lastFocusTime=0,v.docView.updateSelection(),!1):(this.selectionRange.setRange(R),T&&(this.selectionChanged=!0),!0)}setSelectionRange(v,S){this.selectionRange.set(v.node,v.offset,S.node,S.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let v=0,S=null;for(let R=this.dom;R;)if(R.nodeType==1)!S&&v<this.scrollTargets.length&&this.scrollTargets[v]==R?v++:S||(S=this.scrollTargets.slice(0,v)),S&&S.push(R),R=R.assignedSlot||R.parentNode;else if(R.nodeType==11)R=R.host;else break;if(v<this.scrollTargets.length&&!S&&(S=this.scrollTargets.slice(0,v)),S){for(let R of this.scrollTargets)R.removeEventListener("scroll",this.onScroll);for(let R of this.scrollTargets=S)R.addEventListener("scroll",this.onScroll)}}ignore(v){if(!this.active)return v();try{return this.stop(),v()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(v,S){var R;if(!this.delayedAndroidKey){let T=()=>{let A=this.delayedAndroidKey;A&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=A.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&A.force&&dispatchKey(this.dom,A.key,A.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(T)}(!this.delayedAndroidKey||v=="Enter")&&(this.delayedAndroidKey={key:v,keyCode:S,force:this.lastChange<Date.now()-50||!!(!((R=this.delayedAndroidKey)===null||R===void 0)&&R.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let v of this.observer.takeRecords())this.queue.push(v);return this.queue}processRecords(){let v=this.pendingRecords();v.length&&(this.queue=[]);let S=-1,R=-1,T=!1;for(let A of v){let k=this.readMutation(A);k&&(k.typeOver&&(T=!0),S==-1?{from:S,to:R}=k:(S=Math.min(k.from,S),R=Math.max(k.to,R)))}return{from:S,to:R,typeOver:T}}readChange(){let{from:v,to:S,typeOver:R}=this.processRecords(),T=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(v<0&&!T)return null;v>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let A=new DOMChange(this.view,v,S,R);return this.view.docView.domChanged={newSel:A.newSel?A.newSel.main:null},A}flush(v=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;v&&this.readSelectionRange();let S=this.readChange();if(!S)return this.view.requestMeasure(),!1;let R=this.view.state,T=applyDOMChange(this.view,S);return this.view.state==R&&(S.domChanged||S.newSel&&!S.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),T}readMutation(v){let S=this.view.docView.nearest(v.target);if(!S||S.ignoreMutation(v))return null;if(S.markDirty(v.type=="attributes"),v.type=="attributes"&&(S.flags|=4),v.type=="childList"){let R=findChild(S,v.previousSibling||v.target.previousSibling,-1),T=findChild(S,v.nextSibling||v.target.nextSibling,1);return{from:R?S.posAfter(R):S.posAtStart,to:T?S.posBefore(T):S.posAtEnd,typeOver:!1}}else return v.type=="characterData"?{from:S.posAtStart,to:S.posAtEnd,typeOver:v.target.nodeValue==v.oldValue}:null}setWindow(v){v!=this.win&&(this.removeWindowListeners(this.win),this.win=v,this.addWindowListeners(this.win))}addWindowListeners(v){v.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):v.addEventListener("beforeprint",this.onPrint),v.addEventListener("scroll",this.onScroll),v.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(v){v.removeEventListener("scroll",this.onScroll),v.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):v.removeEventListener("beforeprint",this.onPrint),v.document.removeEventListener("selectionchange",this.onSelectionChange)}update(v){this.editContext&&(this.editContext.update(v),v.startState.facet(editable)!=v.state.facet(editable)&&(v.view.contentDOM.editContext=v.state.facet(editable)?this.editContext.editContext:null))}destroy(){var v,S,R;this.stop(),(v=this.intersection)===null||v===void 0||v.disconnect(),(S=this.gapIntersection)===null||S===void 0||S.disconnect(),(R=this.resizeScroll)===null||R===void 0||R.disconnect();for(let T of this.scrollTargets)T.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(_,v,S){for(;v;){let R=ContentView.get(v);if(R&&R.parent==_)return R;let T=v.parentNode;v=T!=_.dom?T:S>0?v.nextSibling:v.previousSibling}return null}function buildSelectionRangeFromRange(_,v){let S=v.startContainer,R=v.startOffset,T=v.endContainer,A=v.endOffset,k=_.docView.domAtPos(_.state.selection.main.anchor);return isEquivalentPosition(k.node,k.offset,T,A)&&([S,R,T,A]=[T,A,S,R]),{anchorNode:S,anchorOffset:R,focusNode:T,focusOffset:A}}function safariSelectionRangeHack(_,v){if(v.getComposedRanges){let T=v.getComposedRanges(_.root)[0];if(T)return buildSelectionRangeFromRange(_,T)}let S=null;function R(T){T.preventDefault(),T.stopImmediatePropagation(),S=T.getTargetRanges()[0]}return _.contentDOM.addEventListener("beforeinput",R,!0),_.dom.ownerDocument.execCommand("indent"),_.contentDOM.removeEventListener("beforeinput",R,!0),S?buildSelectionRangeFromRange(_,S):null}class EditContextManager{constructor(v){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(v.state);let S=this.editContext=new window.EditContext({text:v.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,v.state.selection.main.anchor))),selectionEnd:this.toContextPos(v.state.selection.main.head)});this.handlers.textupdate=R=>{let T=v.state.selection.main,{anchor:A,head:k}=T,M=this.toEditorPos(R.updateRangeStart),N=this.toEditorPos(R.updateRangeEnd);v.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:R.updateRangeStart,editorBase:M,drifted:!1});let D=N-M>R.text.length;M==this.from&&A<this.from?M=A:N==this.to&&A>this.to&&(N=A);let I=findDiff(v.state.sliceDoc(M,N),R.text,(D?T.from:T.to)-M,D?"end":null);if(!I){let B=EditorSelection.single(this.toEditorPos(R.selectionStart),this.toEditorPos(R.selectionEnd));B.main.eq(T)||v.dispatch({selection:B,userEvent:"select"});return}let q={from:I.from+M,to:I.toA+M,insert:Text.of(R.text.slice(I.from,I.toB).split(`
`))};if((browser.mac||browser.android)&&q.from==k-1&&/^\. ?$/.test(R.text)&&v.contentDOM.getAttribute("autocorrect")=="off"&&(q={from:M,to:N,insert:Text.of([R.text.replace("."," ")])}),this.pendingContextChange=q,!v.state.readOnly){let B=this.to-this.from+(q.to-q.from+q.insert.length);applyDOMChangeInner(v,q,EditorSelection.single(this.toEditorPos(R.selectionStart,B),this.toEditorPos(R.selectionEnd,B)))}this.pendingContextChange&&(this.revertPending(v.state),this.setSelection(v.state)),q.from<q.to&&!q.insert.length&&v.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(S.text.slice(Math.max(0,R.updateRangeStart-1),Math.min(S.text.length,R.updateRangeStart+1)))&&this.handlers.compositionend(R)},this.handlers.characterboundsupdate=R=>{let T=[],A=null;for(let k=this.toEditorPos(R.rangeStart),M=this.toEditorPos(R.rangeEnd);k<M;k++){let N=v.coordsForChar(k);A=N&&new DOMRect(N.left,N.top,N.right-N.left,N.bottom-N.top)||A||new DOMRect,T.push(A)}S.updateCharacterBounds(R.rangeStart,T)},this.handlers.textformatupdate=R=>{let T=[];for(let A of R.getTextFormats()){let k=A.underlineStyle,M=A.underlineThickness;if(!/none/i.test(k)&&!/none/i.test(M)){let N=this.toEditorPos(A.rangeStart),D=this.toEditorPos(A.rangeEnd);if(N<D){let I=`text-decoration: underline ${/^[a-z]/.test(k)?k+" ":k=="Dashed"?"dashed ":k=="Squiggle"?"wavy ":""}${/thin/i.test(M)?1:2}px`;T.push(Decoration.mark({attributes:{style:I}}).range(N,D))}}}v.dispatch({effects:setEditContextFormatting.of(Decoration.set(T))})},this.handlers.compositionstart=()=>{v.inputState.composing<0&&(v.inputState.composing=0,v.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(v.inputState.composing=-1,v.inputState.compositionFirstChange=null,this.composing){let{drifted:R}=this.composing;this.composing=null,R&&this.reset(v.state)}};for(let R in this.handlers)S.addEventListener(R,this.handlers[R]);this.measureReq={read:R=>{this.editContext.updateControlBounds(R.contentDOM.getBoundingClientRect());let T=getSelection(R.root);T&&T.rangeCount&&this.editContext.updateSelectionBounds(T.getRangeAt(0).getBoundingClientRect())}}}applyEdits(v){let S=0,R=!1,T=this.pendingContextChange;return v.changes.iterChanges((A,k,M,N,D)=>{if(R)return;let I=D.length-(k-A);if(T&&k>=T.to)if(T.from==A&&T.to==k&&T.insert.eq(D)){T=this.pendingContextChange=null,S+=I,this.to+=I;return}else T=null,this.revertPending(v.state);if(A+=S,k+=S,k<=this.from)this.from+=I,this.to+=I;else if(A<this.to){if(A<this.from||k>this.to||this.to-this.from+D.length>3e4){R=!0;return}this.editContext.updateText(this.toContextPos(A),this.toContextPos(k),D.toString()),this.to+=I}S+=I}),T&&!R&&this.revertPending(v.state),!R}update(v){let S=this.pendingContextChange,R=v.startState.selection.main;this.composing&&(this.composing.drifted||!v.changes.touchesRange(R.from,R.to)&&v.transactions.some(T=>!T.isUserEvent("input.type")&&T.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=v.changes.mapPos(this.composing.editorBase)):!this.applyEdits(v)||!this.rangeIsValid(v.state)?(this.pendingContextChange=null,this.reset(v.state)):(v.docChanged||v.selectionSet||S)&&this.setSelection(v.state),(v.geometryChanged||v.docChanged||v.selectionSet)&&v.view.requestMeasure(this.measureReq)}resetRange(v){let{head:S}=v.selection.main;this.from=Math.max(0,S-1e4),this.to=Math.min(v.doc.length,S+1e4)}reset(v){this.resetRange(v),this.editContext.updateText(0,this.editContext.text.length,v.doc.sliceString(this.from,this.to)),this.setSelection(v)}revertPending(v){let S=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(S.from),this.toContextPos(S.from+S.insert.length),v.doc.sliceString(S.from,S.to))}setSelection(v){let{main:S}=v.selection,R=this.toContextPos(Math.max(this.from,Math.min(this.to,S.anchor))),T=this.toContextPos(S.head);(this.editContext.selectionStart!=R||this.editContext.selectionEnd!=T)&&this.editContext.updateSelection(R,T)}rangeIsValid(v){let{head:S}=v.selection.main;return!(this.from>0&&S-this.from<500||this.to<v.doc.length&&this.to-S<500||this.to-this.from>1e4*3)}toEditorPos(v,S=this.to-this.from){v=Math.min(v,S);let R=this.composing;return R&&R.drifted?R.editorBase+(v-R.contextBase):v+this.from}toContextPos(v){let S=this.composing;return S&&S.drifted?S.contextBase+(v-S.editorBase):v-this.from}destroy(){for(let v in this.handlers)this.editContext.removeEventListener(v,this.handlers[v])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(v={}){var S;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),v.parent&&v.parent.appendChild(this.dom);let{dispatch:R}=v;this.dispatchTransactions=v.dispatchTransactions||R&&(T=>T.forEach(A=>R(A,this)))||(T=>this.update(T)),this.dispatch=this.dispatch.bind(this),this._root=v.root||getRoot(v.parent)||document,this.viewState=new ViewState(v.state||EditorState.create(v)),v.scrollTo&&v.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=v.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(T=>new PluginInstance(T));for(let T of this.plugins)T.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((S=document.fonts)===null||S===void 0)&&S.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...v){let S=v.length==1&&v[0]instanceof Transaction?v:v.length==1&&Array.isArray(v[0])?v[0]:[this.state.update(...v)];this.dispatchTransactions(S,this)}update(v){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let S=!1,R=!1,T,A=this.state;for(let B of v){if(B.startState!=A)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");A=B.state}if(this.destroyed){this.viewState.state=A;return}let k=this.hasFocus,M=0,N=null;v.some(B=>B.annotation(isFocusChange))?(this.inputState.notifiedFocused=k,M=1):k!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=k,N=focusChangeTransaction(A,k),N||(M=1));let D=this.observer.delayedAndroidKey,I=null;if(D?(this.observer.clearDelayedAndroidKey(),I=this.observer.readChange(),(I&&!this.state.doc.eq(A.doc)||!this.state.selection.eq(A.selection))&&(I=null)):this.observer.clear(),A.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(A);T=ViewUpdate.create(this,A,v),T.flags|=M;let q=this.viewState.scrollTarget;try{this.updateState=2;for(let B of v){if(q&&(q=q.map(B.changes)),B.scrollIntoView){let{main:z}=B.state.selection;q=new ScrollTarget(z.empty?z:EditorSelection.cursor(z.head,z.head>z.anchor?-1:1))}for(let z of B.effects)z.is(scrollIntoView$1)&&(q=z.value.clip(this.state))}this.viewState.update(T,q),this.bidiCache=CachedOrder.update(this.bidiCache,T.changes),T.empty||(this.updatePlugins(T),this.inputState.update(T)),S=this.docView.update(T),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),R=this.updateAttrs(),this.showAnnouncements(v),this.docView.updateSelection(S,v.some(B=>B.isUserEvent("select.pointer")))}finally{this.updateState=0}if(T.startState.facet(theme)!=T.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(S||R||q||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),S&&this.docViewUpdate(),!T.empty)for(let B of this.state.facet(updateListener))try{B(T)}catch(z){logException(this.state,z,"update listener")}(N||I)&&Promise.resolve().then(()=>{N&&this.state==N.startState&&this.dispatch(N),I&&!applyDOMChange(this,I)&&D.force&&dispatchKey(this.contentDOM,D.key,D.keyCode)})}setState(v){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=v;return}this.updateState=2;let S=this.hasFocus;try{for(let R of this.plugins)R.destroy(this);this.viewState=new ViewState(v),this.plugins=v.facet(viewPlugin).map(R=>new PluginInstance(R)),this.pluginMap.clear();for(let R of this.plugins)R.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}S&&this.focus(),this.requestMeasure()}updatePlugins(v){let S=v.startState.facet(viewPlugin),R=v.state.facet(viewPlugin);if(S!=R){let T=[];for(let A of R){let k=S.indexOf(A);if(k<0)T.push(new PluginInstance(A));else{let M=this.plugins[k];M.mustUpdate=v,T.push(M)}}for(let A of this.plugins)A.mustUpdate!=v&&A.destroy(this);this.plugins=T,this.pluginMap.clear()}else for(let T of this.plugins)T.mustUpdate=v;for(let T=0;T<this.plugins.length;T++)this.plugins[T].update(this);S!=R&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let v of this.plugins){let S=v.value;if(S&&S.docViewUpdate)try{S.docViewUpdate(this)}catch(R){logException(this.state,R,"doc view update listener")}}}measure(v=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,v&&this.observer.forceFlush();let S=null,R=this.scrollDOM,T=R.scrollTop*this.scaleY,{scrollAnchorPos:A,scrollAnchorHeight:k}=this.viewState;Math.abs(T-this.viewState.scrollTop)>1&&(k=-1),this.viewState.scrollAnchorHeight=-1;try{for(let M=0;;M++){if(k<0)if(isScrolledToBottom(R))A=-1,k=this.viewState.heightMap.height;else{let z=this.viewState.scrollAnchorAt(T);A=z.from,k=z.top}this.updateState=1;let N=this.viewState.measure(this);if(!N&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(M>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let D=[];N&4||([this.measureRequests,D]=[D,this.measureRequests]);let I=D.map(z=>{try{return z.read(this)}catch(F){return logException(this.state,F),BadMeasure}}),q=ViewUpdate.create(this,this.state,[]),B=!1;q.flags|=N,S?S.flags|=N:S=q,this.updateState=2,q.empty||(this.updatePlugins(q),this.inputState.update(q),this.updateAttrs(),B=this.docView.update(q),B&&this.docViewUpdate());for(let z=0;z<D.length;z++)if(I[z]!=BadMeasure)try{let F=D[z];F.write&&F.write(I[z],this)}catch(F){logException(this.state,F)}if(B&&this.docView.updateSelection(!0),!q.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,k=-1;continue}else{let F=(A<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(A).top)-k;if(F>1||F<-1){T=T+F,R.scrollTop=T/this.scaleY,k=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(S&&!S.empty)for(let M of this.state.facet(updateListener))M(S)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let v=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),S={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(S["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,S);let R=this.observer.ignore(()=>{let T=updateAttrs(this.contentDOM,this.contentAttrs,S),A=updateAttrs(this.dom,this.editorAttrs,v);return T||A});return this.editorAttrs=v,this.contentAttrs=S,R}showAnnouncements(v){let S=!0;for(let R of v)for(let T of R.effects)if(T.is(EditorView.announce)){S&&(this.announceDOM.textContent=""),S=!1;let A=this.announceDOM.appendChild(document.createElement("div"));A.textContent=T.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let v=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),v?{nonce:v}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(v){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),v){if(this.measureRequests.indexOf(v)>-1)return;if(v.key!=null){for(let S=0;S<this.measureRequests.length;S++)if(this.measureRequests[S].key===v.key){this.measureRequests[S]=v;return}}this.measureRequests.push(v)}}plugin(v){let S=this.pluginMap.get(v);return(S===void 0||S&&S.plugin!=v)&&this.pluginMap.set(v,S=this.plugins.find(R=>R.plugin==v)||null),S&&S.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(v){return this.readMeasured(),this.viewState.elementAtHeight(v)}lineBlockAtHeight(v){return this.readMeasured(),this.viewState.lineBlockAtHeight(v)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(v){return this.viewState.lineBlockAt(v)}get contentHeight(){return this.viewState.contentHeight}moveByChar(v,S,R){return skipAtoms(this,v,moveByChar(this,v,S,R))}moveByGroup(v,S){return skipAtoms(this,v,moveByChar(this,v,S,R=>byGroup(this,v.head,R)))}visualLineSide(v,S){let R=this.bidiSpans(v),T=this.textDirectionAt(v.from),A=R[S?R.length-1:0];return EditorSelection.cursor(A.side(S,T)+v.from,A.forward(!S,T)?1:-1)}moveToLineBoundary(v,S,R=!0){return moveToLineBoundary(this,v,S,R)}moveVertically(v,S,R){return skipAtoms(this,v,moveVertically(this,v,S,R))}domAtPos(v){return this.docView.domAtPos(v)}posAtDOM(v,S=0){return this.docView.posFromDOM(v,S)}posAtCoords(v,S=!0){return this.readMeasured(),posAtCoords(this,v,S)}coordsAtPos(v,S=1){this.readMeasured();let R=this.docView.coordsAt(v,S);if(!R||R.left==R.right)return R;let T=this.state.doc.lineAt(v),A=this.bidiSpans(T),k=A[BidiSpan.find(A,v-T.from,-1,S)];return flattenRect(R,k.dir==Direction.LTR==S>0)}coordsForChar(v){return this.readMeasured(),this.docView.coordsForChar(v)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(v){return!this.state.facet(perLineTextDirection)||v<this.viewport.from||v>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(v))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(v){if(v.length>MaxBidiLine)return trivialOrder(v.length);let S=this.textDirectionAt(v.from),R;for(let A of this.bidiCache)if(A.from==v.from&&A.dir==S&&(A.fresh||isolatesEq(A.isolates,R=getIsolatedRanges(this,v))))return A.order;R||(R=getIsolatedRanges(this,v));let T=computeOrder(v.text,S,R);return this.bidiCache.push(new CachedOrder(v.from,v.to,S,R,!0,T)),T}get hasFocus(){var v;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((v=this.inputState)===null||v===void 0?void 0:v.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(v){this._root!=v&&(this._root=v,this.observer.setWindow((v.nodeType==9?v:v.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let v of this.plugins)v.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(v,S={}){return scrollIntoView$1.of(new ScrollTarget(typeof v=="number"?EditorSelection.cursor(v):v,S.y,S.x,S.yMargin,S.xMargin))}scrollSnapshot(){let{scrollTop:v,scrollLeft:S}=this.scrollDOM,R=this.viewState.scrollAnchorAt(v);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(R.from),"start","start",R.top-v,S,!0))}setTabFocusMode(v){v==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof v=="boolean"?this.inputState.tabFocusMode=v?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+v)}static domEventHandlers(v){return ViewPlugin.define(()=>({}),{eventHandlers:v})}static domEventObservers(v){return ViewPlugin.define(()=>({}),{eventObservers:v})}static theme(v,S){let R=StyleModule.newName(),T=[theme.of(R),styleModule.of(buildTheme(`.${R}`,v))];return S&&S.dark&&T.push(darkTheme.of(!0)),T}static baseTheme(v){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,v,lightDarkIDs)))}static findFromDOM(v){var S;let R=v.querySelector(".cm-content"),T=R&&ContentView.get(R)||ContentView.get(v);return((S=T?.rootView)===null||S===void 0?void 0:S.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:_=>_.length?_[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(v,S,R,T,A,k){this.from=v,this.to=S,this.dir=R,this.isolates=T,this.fresh=A,this.order=k}static update(v,S){if(S.empty&&!v.some(A=>A.fresh))return v;let R=[],T=v.length?v[v.length-1].dir:Direction.LTR;for(let A=Math.max(0,v.length-10);A<v.length;A++){let k=v[A];k.dir==T&&!S.touchesRange(k.from,k.to)&&R.push(new CachedOrder(S.mapPos(k.from,1),S.mapPos(k.to,-1),k.dir,k.isolates,!1,k.order))}return R}}function attrsFromFacet(_,v,S){for(let R=_.state.facet(v),T=R.length-1;T>=0;T--){let A=R[T],k=typeof A=="function"?A(_):A;k&&combineAttrs(k,S)}return S}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(_,v){const S=_.split(/-(?!$)/);let R=S[S.length-1];R=="Space"&&(R=" ");let T,A,k,M;for(let N=0;N<S.length-1;++N){const D=S[N];if(/^(cmd|meta|m)$/i.test(D))M=!0;else if(/^a(lt)?$/i.test(D))T=!0;else if(/^(c|ctrl|control)$/i.test(D))A=!0;else if(/^s(hift)?$/i.test(D))k=!0;else if(/^mod$/i.test(D))v=="mac"?M=!0:A=!0;else throw new Error("Unrecognized modifier name: "+D)}return T&&(R="Alt-"+R),A&&(R="Ctrl-"+R),M&&(R="Meta-"+R),k&&(R="Shift-"+R),R}function modifiers(_,v,S){return v.altKey&&(_="Alt-"+_),v.ctrlKey&&(_="Ctrl-"+_),v.metaKey&&(_="Meta-"+_),S!==!1&&v.shiftKey&&(_="Shift-"+_),_}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(_,v){return runHandlers(getKeymap(v.state),_,v,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(_){let v=_.facet(keymap),S=Keymaps.get(v);return S||Keymaps.set(v,S=buildKeymap(v.reduce((R,T)=>R.concat(T),[]))),S}function runScopeHandlers(_,v,S){return runHandlers(getKeymap(_.state),v,_,S)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(_,v=currentPlatform){let S=Object.create(null),R=Object.create(null),T=(k,M)=>{let N=R[k];if(N==null)R[k]=M;else if(N!=M)throw new Error("Key binding "+k+" is used both as a regular binding and as a multi-stroke prefix")},A=(k,M,N,D,I)=>{var q,B;let z=S[k]||(S[k]=Object.create(null)),F=M.split(/ (?!$)/).map(W=>normalizeKeyName(W,v));for(let W=1;W<F.length;W++){let Y=F.slice(0,W).join(" ");T(Y,!0),z[Y]||(z[Y]={preventDefault:!0,stopPropagation:!1,run:[Z=>{let J=storedPrefix={view:Z,prefix:Y,scope:k};return setTimeout(()=>{storedPrefix==J&&(storedPrefix=null)},PrefixTimeout),!0}]})}let V=F.join(" ");T(V,!1);let H=z[V]||(z[V]={preventDefault:!1,stopPropagation:!1,run:((B=(q=z._any)===null||q===void 0?void 0:q.run)===null||B===void 0?void 0:B.slice())||[]});N&&H.run.push(N),D&&(H.preventDefault=!0),I&&(H.stopPropagation=!0)};for(let k of _){let M=k.scope?k.scope.split(" "):["editor"];if(k.any)for(let D of M){let I=S[D]||(S[D]=Object.create(null));I._any||(I._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:q}=k;for(let B in I)I[B].run.push(z=>q(z,currentKeyEvent))}let N=k[v]||k.key;if(N)for(let D of M)A(D,N,k.run,k.preventDefault,k.stopPropagation),k.shift&&A(D,"Shift-"+N,k.shift,k.preventDefault,k.stopPropagation)}return S}let currentKeyEvent=null;function runHandlers(_,v,S,R){currentKeyEvent=v;let T=keyName(v),A=codePointAt(T,0),k=codePointSize(A)==T.length&&T!=" ",M="",N=!1,D=!1,I=!1;storedPrefix&&storedPrefix.view==S&&storedPrefix.scope==R&&(M=storedPrefix.prefix+" ",modifierCodes.indexOf(v.keyCode)<0&&(D=!0,storedPrefix=null));let q=new Set,B=H=>{if(H){for(let W of H.run)if(!q.has(W)&&(q.add(W),W(S)))return H.stopPropagation&&(I=!0),!0;H.preventDefault&&(H.stopPropagation&&(I=!0),D=!0)}return!1},z=_[R],F,V;return z&&(B(z[M+modifiers(T,v,!k)])?N=!0:k&&(v.altKey||v.metaKey||v.ctrlKey)&&!(browser.windows&&v.ctrlKey&&v.altKey)&&!(browser.mac&&v.altKey&&!(v.ctrlKey||v.metaKey))&&(F=base[v.keyCode])&&F!=T?(B(z[M+modifiers(F,v,!0)])||v.shiftKey&&(V=shift[v.keyCode])!=T&&V!=F&&B(z[M+modifiers(V,v,!1)]))&&(N=!0):k&&v.shiftKey&&B(z[M+modifiers(T,v,!0)])&&(N=!0),!N&&B(z._any)&&(N=!0)),D&&(N=!0),N&&I&&v.stopPropagation(),currentKeyEvent=null,N}class RectangleMarker{constructor(v,S,R,T,A){this.className=v,this.left=S,this.top=R,this.width=T,this.height=A}draw(){let v=document.createElement("div");return v.className=this.className,this.adjust(v),v}update(v,S){return S.className!=this.className?!1:(this.adjust(v),!0)}adjust(v){v.style.left=this.left+"px",v.style.top=this.top+"px",this.width!=null&&(v.style.width=this.width+"px"),v.style.height=this.height+"px"}eq(v){return this.left==v.left&&this.top==v.top&&this.width==v.width&&this.height==v.height&&this.className==v.className}static forRange(v,S,R){if(R.empty){let T=v.coordsAtPos(R.head,R.assoc||1);if(!T)return[];let A=getBase(v);return[new RectangleMarker(S,T.left-A.left,T.top-A.top,null,T.bottom-T.top)]}else return rectanglesForRange(v,S,R)}}function getBase(_){let v=_.scrollDOM.getBoundingClientRect();return{left:(_.textDirection==Direction.LTR?v.left:v.right-_.scrollDOM.clientWidth*_.scaleX)-_.scrollDOM.scrollLeft*_.scaleX,top:v.top-_.scrollDOM.scrollTop*_.scaleY}}function wrappedLine(_,v,S,R){let T=_.coordsAtPos(v,S*2);if(!T)return R;let A=_.dom.getBoundingClientRect(),k=(T.top+T.bottom)/2,M=_.posAtCoords({x:A.left+1,y:k}),N=_.posAtCoords({x:A.right-1,y:k});return M==null||N==null?R:{from:Math.max(R.from,Math.min(M,N)),to:Math.min(R.to,Math.max(M,N))}}function rectanglesForRange(_,v,S){if(S.to<=_.viewport.from||S.from>=_.viewport.to)return[];let R=Math.max(S.from,_.viewport.from),T=Math.min(S.to,_.viewport.to),A=_.textDirection==Direction.LTR,k=_.contentDOM,M=k.getBoundingClientRect(),N=getBase(_),D=k.querySelector(".cm-line"),I=D&&window.getComputedStyle(D),q=M.left+(I?parseInt(I.paddingLeft)+Math.min(0,parseInt(I.textIndent)):0),B=M.right-(I?parseInt(I.paddingRight):0),z=blockAt(_,R,1),F=blockAt(_,T,-1),V=z.type==BlockType.Text?z:null,H=F.type==BlockType.Text?F:null;if(V&&(_.lineWrapping||z.widgetLineBreaks)&&(V=wrappedLine(_,R,1,V)),H&&(_.lineWrapping||F.widgetLineBreaks)&&(H=wrappedLine(_,T,-1,H)),V&&H&&V.from==H.from&&V.to==H.to)return Y(Z(S.from,S.to,V));{let ne=V?Z(S.from,null,V):J(z,!1),oe=H?Z(null,S.to,H):J(F,!0),te=[];return(V||z).to<(H||F).from-(V&&H?1:0)||z.widgetLineBreaks>1&&ne.bottom+_.defaultLineHeight/2<oe.top?te.push(W(q,ne.bottom,B,oe.top)):ne.bottom<oe.top&&_.elementAtHeight((ne.bottom+oe.top)/2).type==BlockType.Text&&(ne.bottom=oe.top=(ne.bottom+oe.top)/2),Y(ne).concat(te).concat(Y(oe))}function W(ne,oe,te,se){return new RectangleMarker(v,ne-N.left,oe-N.top,te-ne,se-oe)}function Y({top:ne,bottom:oe,horizontal:te}){let se=[];for(let le=0;le<te.length;le+=2)se.push(W(te[le],ne,te[le+1],oe));return se}function Z(ne,oe,te){let se=1e9,le=-1e9,ue=[];function ce(Ee,_e,ye,be,Se){let De=_.coordsAtPos(Ee,Ee==te.to?-2:2),xe=_.coordsAtPos(ye,ye==te.from?2:-2);!De||!xe||(se=Math.min(De.top,xe.top,se),le=Math.max(De.bottom,xe.bottom,le),Se==Direction.LTR?ue.push(A&&_e?q:De.left,A&&be?B:xe.right):ue.push(!A&&be?q:xe.left,!A&&_e?B:De.right))}let ge=ne??te.from,me=oe??te.to;for(let Ee of _.visibleRanges)if(Ee.to>ge&&Ee.from<me)for(let _e=Math.max(Ee.from,ge),ye=Math.min(Ee.to,me);;){let be=_.state.doc.lineAt(_e);for(let Se of _.bidiSpans(be)){let De=Se.from+be.from,xe=Se.to+be.from;if(De>=ye)break;xe>_e&&ce(Math.max(De,_e),ne==null&&De<=ge,Math.min(xe,ye),oe==null&&xe>=me,Se.dir)}if(_e=be.to+1,_e>=ye)break}return ue.length==0&&ce(ge,ne==null,me,oe==null,_.textDirection),{top:se,bottom:le,horizontal:ue}}function J(ne,oe){let te=M.top+(oe?ne.top:ne.bottom);return{top:te,bottom:te,horizontal:[]}}}function sameMarker(_,v){return _.constructor==v.constructor&&_.eq(v)}class LayerView{constructor(v,S){this.view=v,this.layer=S,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=v.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),S.above&&this.dom.classList.add("cm-layer-above"),S.class&&this.dom.classList.add(S.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(v.state),v.requestMeasure(this.measureReq),S.mount&&S.mount(this.dom,v)}update(v){v.startState.facet(layerOrder)!=v.state.facet(layerOrder)&&this.setOrder(v.state),(this.layer.update(v,this.dom)||v.geometryChanged)&&(this.scale(),v.view.requestMeasure(this.measureReq))}docViewUpdate(v){this.layer.updateOnDocViewUpdate!==!1&&v.requestMeasure(this.measureReq)}setOrder(v){let S=0,R=v.facet(layerOrder);for(;S<R.length&&R[S]!=this.layer;)S++;this.dom.style.zIndex=String((this.layer.above?150:-1)-S)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:v,scaleY:S}=this.view;(v!=this.scaleX||S!=this.scaleY)&&(this.scaleX=v,this.scaleY=S,this.dom.style.transform=`scale(${1/v}, ${1/S})`)}draw(v){if(v.length!=this.drawn.length||v.some((S,R)=>!sameMarker(S,this.drawn[R]))){let S=this.dom.firstChild,R=0;for(let T of v)T.update&&S&&T.constructor&&this.drawn[R].constructor&&T.update(S,this.drawn[R])?(S=S.nextSibling,R++):this.dom.insertBefore(T.draw(),S);for(;S;){let T=S.nextSibling;S.remove(),S=T}this.drawn=v,browser.safari&&browser.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(_){return[ViewPlugin.define(v=>new LayerView(v,_)),layerOrder.of(_)]}const selectionConfig=Facet.define({combine(_){return combineConfig(_,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(v,S)=>Math.min(v,S),drawRangeCursor:(v,S)=>v||S})}});function drawSelection(_={}){return[selectionConfig.of(_),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(_){return _.startState.facet(selectionConfig)!=_.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(_){let{state:v}=_,S=v.facet(selectionConfig),R=[];for(let T of v.selection.ranges){let A=T==v.selection.main;if(T.empty||S.drawRangeCursor){let k=A?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",M=T.empty?T:EditorSelection.cursor(T.head,T.head>T.anchor?-1:1);for(let N of RectangleMarker.forRange(_,k,M))R.push(N)}}return R},update(_,v){_.transactions.some(R=>R.selection)&&(v.style.animationName=v.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let S=configChanged(_);return S&&setBlinkRate(_.state,v),_.docChanged||_.selectionSet||S},mount(_,v){setBlinkRate(v.state,_)},class:"cm-cursorLayer"});function setBlinkRate(_,v){v.style.animationDuration=_.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(_){return _.state.selection.ranges.map(v=>v.empty?[]:RectangleMarker.forRange(_,"cm-selectionBackground",v)).reduce((v,S)=>v.concat(S))},update(_,v){return _.docChanged||_.selectionSet||_.viewportChanged||configChanged(_)},class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=StateEffect.define({map(_,v){return _==null?null:v.mapPos(_)}}),dropCursorPos=StateField.define({create(){return null},update(_,v){return _!=null&&(_=v.changes.mapPos(_)),v.effects.reduce((S,R)=>R.is(setDropCursorPos)?R.value:S,_)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(_){var v;let S=_.state.field(dropCursorPos);S==null?this.cursor!=null&&((v=this.cursor)===null||v===void 0||v.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(_.startState.field(dropCursorPos)!=S||_.docChanged||_.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:_}=this,v=_.state.field(dropCursorPos),S=v!=null&&_.coordsAtPos(v);if(!S)return null;let R=_.scrollDOM.getBoundingClientRect();return{left:S.left-R.left+_.scrollDOM.scrollLeft*_.scaleX,top:S.top-R.top+_.scrollDOM.scrollTop*_.scaleY,height:S.bottom-S.top}}drawCursor(_){if(this.cursor){let{scaleX:v,scaleY:S}=this.view;_?(this.cursor.style.left=_.left/v+"px",this.cursor.style.top=_.top/S+"px",this.cursor.style.height=_.height/S+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(_){this.view.state.field(dropCursorPos)!=_&&this.view.dispatch({effects:setDropCursorPos.of(_)})}},{eventObservers:{dragover(_){this.setDropPos(this.view.posAtCoords({x:_.clientX,y:_.clientY}))},dragleave(_){(_.target==this.view.contentDOM||!this.view.contentDOM.contains(_.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(_,v,S,R,T){v.lastIndex=0;for(let A=_.iterRange(S,R),k=S,M;!A.next().done;k+=A.value.length)if(!A.lineBreak)for(;M=v.exec(A.value);)T(k+M.index,M)}function matchRanges(_,v){let S=_.visibleRanges;if(S.length==1&&S[0].from==_.viewport.from&&S[0].to==_.viewport.to)return S;let R=[];for(let{from:T,to:A}of S)T=Math.max(_.state.doc.lineAt(T).from,T-v),A=Math.min(_.state.doc.lineAt(A).to,A+v),R.length&&R[R.length-1].to>=T?R[R.length-1].to=A:R.push({from:T,to:A});return R}class MatchDecorator{constructor(v){const{regexp:S,decoration:R,decorate:T,boundary:A,maxLength:k=1e3}=v;if(!S.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=S,T)this.addMatch=(M,N,D,I)=>T(I,D,D+M[0].length,M,N);else if(typeof R=="function")this.addMatch=(M,N,D,I)=>{let q=R(M,N,D);q&&I(D,D+M[0].length,q)};else if(R)this.addMatch=(M,N,D,I)=>I(D,D+M[0].length,R);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=A,this.maxLength=k}createDeco(v){let S=new RangeSetBuilder,R=S.add.bind(S);for(let{from:T,to:A}of matchRanges(v,this.maxLength))iterMatches(v.state.doc,this.regexp,T,A,(k,M)=>this.addMatch(M,v,k,R));return S.finish()}updateDeco(v,S){let R=1e9,T=-1;return v.docChanged&&v.changes.iterChanges((A,k,M,N)=>{N>=v.view.viewport.from&&M<=v.view.viewport.to&&(R=Math.min(M,R),T=Math.max(N,T))}),v.viewportMoved||T-R>1e3?this.createDeco(v.view):T>-1?this.updateRange(v.view,S.map(v.changes),R,T):S}updateRange(v,S,R,T){for(let A of v.visibleRanges){let k=Math.max(A.from,R),M=Math.min(A.to,T);if(M>=k){let N=v.state.doc.lineAt(k),D=N.to<M?v.state.doc.lineAt(M):N,I=Math.max(A.from,N.from),q=Math.min(A.to,D.to);if(this.boundary){for(;k>N.from;k--)if(this.boundary.test(N.text[k-1-N.from])){I=k;break}for(;M<D.to;M++)if(this.boundary.test(D.text[M-D.from])){q=M;break}}let B=[],z,F=(V,H,W)=>B.push(W.range(V,H));if(N==D)for(this.regexp.lastIndex=I-N.from;(z=this.regexp.exec(N.text))&&z.index<q-N.from;)this.addMatch(z,v,z.index+N.from,F);else iterMatches(v.state.doc,this.regexp,I,q,(V,H)=>this.addMatch(H,v,V,F));S=S.update({filterFrom:I,filterTo:q,filter:(V,H)=>V<I||H>q,add:B})}}return S}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var _;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let v=document.body.style;_supportsTabSize=((_=v.tabSize)!==null&&_!==void 0?_:v.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(_){let v=combineConfig(_,{render:null,specialChars:Specials,addSpecialChars:null});return(v.replaceTabs=!supportsTabSize())&&(v.specialChars=new RegExp("	|"+v.specialChars.source,UnicodeRegexpSupport)),v.addSpecialChars&&(v.specialChars=new RegExp(v.specialChars.source+"|"+v.addSpecialChars.source,UnicodeRegexpSupport)),v}});function highlightSpecialChars(_={}){return[specialCharConfig.of(_),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(_.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(_)}makeDecorator(_){return new MatchDecorator({regexp:_.specialChars,decoration:(v,S,R)=>{let{doc:T}=S.state,A=codePointAt(v[0],0);if(A==9){let k=T.lineAt(R),M=S.state.tabSize,N=countColumn(k.text,M,R-k.from);return Decoration.replace({widget:new TabWidget((M-N%M)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[A]||(this.decorationCache[A]=Decoration.replace({widget:new SpecialCharWidget(_,A)}))},boundary:_.replaceTabs?void 0:/[^]/})}update(_){let v=_.state.facet(specialCharConfig);_.startState.facet(specialCharConfig)!=v?(this.decorator=this.makeDecorator(v),this.decorations=this.decorator.createDeco(_.view)):this.decorations=this.decorator.updateDeco(_,this.decorations)}},{decorations:_=>_.decorations}))}const DefaultPlaceholder="";function placeholder$1(_){return _>=32?DefaultPlaceholder:_==10?"":String.fromCharCode(9216+_)}class SpecialCharWidget extends WidgetType{constructor(v,S){super(),this.options=v,this.code=S}eq(v){return v.code==this.code}toDOM(v){let S=placeholder$1(this.code),R=v.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),T=this.options.render&&this.options.render(this.code,R,S);if(T)return T;let A=document.createElement("span");return A.textContent=S,A.title=R,A.setAttribute("aria-label",R),A.className="cm-specialChar",A}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(v){super(),this.width=v}eq(v){return v.width==this.width}toDOM(){let v=document.createElement("span");return v.textContent="	",v.className="cm-tab",v.style.width=this.width+"px",v}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.docChanged||_.selectionSet)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let v=-1,S=[];for(let R of _.state.selection.ranges){let T=_.lineBlockAt(R.head);T.from>v&&(S.push(lineDeco.range(T.from)),v=T.from)}return Decoration.set(S)}},{decorations:_=>_.decorations});class Placeholder extends WidgetType{constructor(v){super(),this.content=v}toDOM(v){let S=document.createElement("span");return S.className="cm-placeholder",S.style.pointerEvents="none",S.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(v):this.content.cloneNode(!0)),S.setAttribute("aria-hidden","true"),S}coordsAt(v){let S=v.firstChild?clientRectsFor(v.firstChild):[];if(!S.length)return null;let R=window.getComputedStyle(v.parentNode),T=flattenRect(S[0],R.direction!="rtl"),A=parseInt(R.lineHeight);return T.bottom-T.top>A*1.5?{left:T.left,right:T.right,top:T.top,bottom:T.top+A}:T}ignoreEvent(){return!1}}function placeholder(_){let v=ViewPlugin.fromClass(class{constructor(S){this.view=S,this.placeholder=_?Decoration.set([Decoration.widget({widget:new Placeholder(_),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:S=>S.decorations});return typeof _=="string"?[v,EditorView.contentAttributes.of({"aria-placeholder":_})]:v}const MaxOff=2e3;function rectangleFor(_,v,S){let R=Math.min(v.line,S.line),T=Math.max(v.line,S.line),A=[];if(v.off>MaxOff||S.off>MaxOff||v.col<0||S.col<0){let k=Math.min(v.off,S.off),M=Math.max(v.off,S.off);for(let N=R;N<=T;N++){let D=_.doc.line(N);D.length<=M&&A.push(EditorSelection.range(D.from+k,D.to+M))}}else{let k=Math.min(v.col,S.col),M=Math.max(v.col,S.col);for(let N=R;N<=T;N++){let D=_.doc.line(N),I=findColumn(D.text,k,_.tabSize,!0);if(I<0)A.push(EditorSelection.cursor(D.to));else{let q=findColumn(D.text,M,_.tabSize);A.push(EditorSelection.range(D.from+I,D.from+q))}}}return A}function absoluteColumn(_,v){let S=_.coordsAtPos(_.viewport.from);return S?Math.round(Math.abs((S.left-v)/_.defaultCharacterWidth)):-1}function getPos(_,v){let S=_.posAtCoords({x:v.clientX,y:v.clientY},!1),R=_.state.doc.lineAt(S),T=S-R.from,A=T>MaxOff?-1:T==R.length?absoluteColumn(_,v.clientX):countColumn(R.text,_.state.tabSize,S-R.from);return{line:R.number,col:A,off:T}}function rectangleSelectionStyle(_,v){let S=getPos(_,v),R=_.state.selection;return S?{update(T){if(T.docChanged){let A=T.changes.mapPos(T.startState.doc.line(S.line).from),k=T.state.doc.lineAt(A);S={line:k.number,col:S.col,off:Math.min(S.off,k.length)},R=R.map(T.changes)}},get(T,A,k){let M=getPos(_,T);if(!M)return R;let N=rectangleFor(_.state,S,M);return N.length?k?EditorSelection.create(N.concat(R.ranges)):EditorSelection.create(N):R}}:null}function rectangularSelection(_){let v=(S=>S.altKey&&S.button==0);return EditorView.mouseSelectionStyle.of((S,R)=>v(R)?rectangleSelectionStyle(S,R):null)}const keys={Alt:[18,_=>!!_.altKey],Control:[17,_=>!!_.ctrlKey],Shift:[16,_=>!!_.shiftKey],Meta:[91,_=>!!_.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(_={}){let[v,S]=keys[_.key||"Alt"],R=ViewPlugin.fromClass(class{constructor(T){this.view=T,this.isDown=!1}set(T){this.isDown!=T&&(this.isDown=T,this.view.update([]))}},{eventObservers:{keydown(T){this.set(T.keyCode==v||S(T))},keyup(T){(T.keyCode==v||!S(T))&&this.set(!1)},mousemove(T){this.set(S(T))}}});return[R,EditorView.contentAttributes.of(T=>{var A;return!((A=T.plugin(R))===null||A===void 0)&&A.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(v,S,R,T){this.facet=S,this.createTooltipView=R,this.removeTooltipView=T,this.input=v.state.facet(S),this.tooltips=this.input.filter(k=>k);let A=null;this.tooltipViews=this.tooltips.map(k=>A=R(k,A))}update(v,S){var R;let T=v.state.facet(this.facet),A=T.filter(N=>N);if(T===this.input){for(let N of this.tooltipViews)N.update&&N.update(v);return!1}let k=[],M=S?[]:null;for(let N=0;N<A.length;N++){let D=A[N],I=-1;if(D){for(let q=0;q<this.tooltips.length;q++){let B=this.tooltips[q];B&&B.create==D.create&&(I=q)}if(I<0)k[N]=this.createTooltipView(D,N?k[N-1]:null),M&&(M[N]=!!D.above);else{let q=k[N]=this.tooltipViews[I];M&&(M[N]=S[I]),q.update&&q.update(v)}}}for(let N of this.tooltipViews)k.indexOf(N)<0&&(this.removeTooltipView(N),(R=N.destroy)===null||R===void 0||R.call(N));return S&&(M.forEach((N,D)=>S[D]=N),S.length=M.length),this.input=T,this.tooltips=A,this.tooltipViews=k,!0}}function windowSpace(_){let v=_.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:v.clientHeight,right:v.clientWidth}}const tooltipConfig=Facet.define({combine:_=>{var v,S,R;return{position:browser.ios?"absolute":((v=_.find(T=>T.position))===null||v===void 0?void 0:v.position)||"fixed",parent:((S=_.find(T=>T.parent))===null||S===void 0?void 0:S.parent)||null,tooltipSpace:((R=_.find(T=>T.tooltipSpace))===null||R===void 0?void 0:R.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let v=_.state.facet(tooltipConfig);this.position=v.position,this.parent=v.parent,this.classes=_.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(_,showTooltip,(S,R)=>this.createTooltip(S,R),S=>{this.resizeObserver&&this.resizeObserver.unobserve(S.dom),S.dom.remove()}),this.above=this.manager.tooltips.map(S=>!!S.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(S=>{Date.now()>this.lastTransaction-50&&S.length>0&&S[S.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),_.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let _ of this.manager.tooltipViews)this.intersectionObserver.observe(_.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(_){_.transactions.length&&(this.lastTransaction=Date.now());let v=this.manager.update(_,this.above);v&&this.observeIntersection();let S=v||_.geometryChanged,R=_.state.facet(tooltipConfig);if(R.position!=this.position&&!this.madeAbsolute){this.position=R.position;for(let T of this.manager.tooltipViews)T.dom.style.position=this.position;S=!0}if(R.parent!=this.parent){this.parent&&this.container.remove(),this.parent=R.parent,this.createContainer();for(let T of this.manager.tooltipViews)this.container.appendChild(T.dom);S=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);S&&this.maybeMeasure()}createTooltip(_,v){let S=_.create(this.view),R=v?v.dom:null;if(S.dom.classList.add("cm-tooltip"),_.arrow&&!S.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let T=document.createElement("div");T.className="cm-tooltip-arrow",S.dom.appendChild(T)}return S.dom.style.position=this.position,S.dom.style.top=Outside,S.dom.style.left="0px",this.container.insertBefore(S.dom,R),S.mount&&S.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(S.dom),S}destroy(){var _,v,S;this.view.win.removeEventListener("resize",this.measureSoon);for(let R of this.manager.tooltipViews)R.dom.remove(),(_=R.destroy)===null||_===void 0||_.call(R);this.parent&&this.container.remove(),(v=this.resizeObserver)===null||v===void 0||v.disconnect(),(S=this.intersectionObserver)===null||S===void 0||S.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let _=1,v=1,S=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:A}=this.manager.tooltipViews[0];if(browser.safari){let k=A.getBoundingClientRect();S=Math.abs(k.top+1e4)>1||Math.abs(k.left)>1}else S=!!A.offsetParent&&A.offsetParent!=this.container.ownerDocument.body}if(S||this.position=="absolute")if(this.parent){let A=this.parent.getBoundingClientRect();A.width&&A.height&&(_=A.width/this.parent.offsetWidth,v=A.height/this.parent.offsetHeight)}else({scaleX:_,scaleY:v}=this.view.viewState);let R=this.view.scrollDOM.getBoundingClientRect(),T=getScrollMargins(this.view);return{visible:{left:R.left+T.left,top:R.top+T.top,right:R.right-T.right,bottom:R.bottom-T.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((A,k)=>{let M=this.manager.tooltipViews[k];return M.getCoords?M.getCoords(A.pos):this.view.coordsAtPos(A.pos)}),size:this.manager.tooltipViews.map(({dom:A})=>A.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:_,scaleY:v,makeAbsolute:S}}writeMeasure(_){var v;if(_.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let M of this.manager.tooltipViews)M.dom.style.position="absolute"}let{visible:S,space:R,scaleX:T,scaleY:A}=_,k=[];for(let M=0;M<this.manager.tooltips.length;M++){let N=this.manager.tooltips[M],D=this.manager.tooltipViews[M],{dom:I}=D,q=_.pos[M],B=_.size[M];if(!q||N.clip!==!1&&(q.bottom<=Math.max(S.top,R.top)||q.top>=Math.min(S.bottom,R.bottom)||q.right<Math.max(S.left,R.left)-.1||q.left>Math.min(S.right,R.right)+.1)){I.style.top=Outside;continue}let z=N.arrow?D.dom.querySelector(".cm-tooltip-arrow"):null,F=z?7:0,V=B.right-B.left,H=(v=knownHeight.get(D))!==null&&v!==void 0?v:B.bottom-B.top,W=D.offset||noOffset,Y=this.view.textDirection==Direction.LTR,Z=B.width>R.right-R.left?Y?R.left:R.right-B.width:Y?Math.max(R.left,Math.min(q.left-(z?14:0)+W.x,R.right-V)):Math.min(Math.max(R.left,q.left-V+(z?14:0)-W.x),R.right-V),J=this.above[M];!N.strictSide&&(J?q.top-H-F-W.y<R.top:q.bottom+H+F+W.y>R.bottom)&&J==R.bottom-q.bottom>q.top-R.top&&(J=this.above[M]=!J);let ne=(J?q.top-R.top:R.bottom-q.bottom)-F;if(ne<H&&D.resize!==!1){if(ne<this.view.defaultLineHeight){I.style.top=Outside;continue}knownHeight.set(D,H),I.style.height=(H=ne)/A+"px"}else I.style.height&&(I.style.height="");let oe=J?q.top-H-F-W.y:q.bottom+F+W.y,te=Z+V;if(D.overlap!==!0)for(let se of k)se.left<te&&se.right>Z&&se.top<oe+H&&se.bottom>oe&&(oe=J?se.top-H-2-F:se.bottom+F+2);if(this.position=="absolute"?(I.style.top=(oe-_.parent.top)/A+"px",setLeftStyle(I,(Z-_.parent.left)/T)):(I.style.top=oe/A+"px",setLeftStyle(I,Z/T)),z){let se=q.left+(Y?W.x:-W.x)-(Z+14-7);z.style.left=se/T+"px"}D.overlap!==!0&&k.push({left:Z,top:oe,right:te,bottom:oe+H}),I.classList.toggle("cm-tooltip-above",J),I.classList.toggle("cm-tooltip-below",!J),D.positioned&&D.positioned(_.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let _ of this.manager.tooltipViews)_.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(_,v){let S=parseInt(_.style.left,10);(isNaN(S)||Math.abs(v-S)>1)&&(_.style.left=v+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:_=>_.reduce((v,S)=>v.concat(S),[])});class HoverTooltipHost{static create(v){return new HoverTooltipHost(v)}constructor(v){this.view=v,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(v,showHoverTooltip,(S,R)=>this.createHostedView(S,R),S=>S.dom.remove())}createHostedView(v,S){let R=v.create(this.view);return R.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(R.dom,S?S.dom.nextSibling:this.dom.firstChild),this.mounted&&R.mount&&R.mount(this.view),R}mount(v){for(let S of this.manager.tooltipViews)S.mount&&S.mount(v);this.mounted=!0}positioned(v){for(let S of this.manager.tooltipViews)S.positioned&&S.positioned(v)}update(v){this.manager.update(v)}destroy(){var v;for(let S of this.manager.tooltipViews)(v=S.destroy)===null||v===void 0||v.call(S)}passProp(v){let S;for(let R of this.manager.tooltipViews){let T=R[v];if(T!==void 0){if(S===void 0)S=T;else if(S!==T)return}}return S}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],_=>{let v=_.facet(showHoverTooltip);return v.length===0?null:{pos:Math.min(...v.map(S=>S.pos)),end:Math.max(...v.map(S=>{var R;return(R=S.end)!==null&&R!==void 0?R:S.pos})),create:HoverTooltipHost.create,above:v[0].above,arrow:v.some(S=>S.arrow)}});class HoverPlugin{constructor(v,S,R,T,A){this.view=v,this.source=S,this.field=R,this.setHover=T,this.hoverTime=A,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:v.dom,time:0},this.checkHover=this.checkHover.bind(this),v.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),v.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let v=Date.now()-this.lastMove.time;v<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-v):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:v,lastMove:S}=this,R=v.docView.nearest(S.target);if(!R)return;let T,A=1;if(R instanceof WidgetView)T=R.posAtStart;else{if(T=v.posAtCoords(S),T==null)return;let M=v.coordsAtPos(T);if(!M||S.y<M.top||S.y>M.bottom||S.x<M.left-v.defaultCharacterWidth||S.x>M.right+v.defaultCharacterWidth)return;let N=v.bidiSpans(v.state.doc.lineAt(T)).find(I=>I.from<=T&&I.to>=T),D=N&&N.dir==Direction.RTL?-1:1;A=S.x<M.left?-D:D}let k=this.source(v,T,A);if(k?.then){let M=this.pending={pos:T};k.then(N=>{this.pending==M&&(this.pending=null,N&&!(Array.isArray(N)&&!N.length)&&v.dispatch({effects:this.setHover.of(Array.isArray(N)?N:[N])}))},N=>logException(v.state,N,"hover tooltip"))}else k&&!(Array.isArray(k)&&!k.length)&&v.dispatch({effects:this.setHover.of(Array.isArray(k)?k:[k])})}get tooltip(){let v=this.view.plugin(tooltipPlugin),S=v?v.manager.tooltips.findIndex(R=>R.create==HoverTooltipHost.create):-1;return S>-1?v.manager.tooltipViews[S]:null}mousemove(v){var S,R;this.lastMove={x:v.clientX,y:v.clientY,target:v.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:T,tooltip:A}=this;if(T.length&&A&&!isInTooltip(A.dom,v)||this.pending){let{pos:k}=T[0]||this.pending,M=(R=(S=T[0])===null||S===void 0?void 0:S.end)!==null&&R!==void 0?R:k;(k==M?this.view.posAtCoords(this.lastMove)!=k:!isOverRange(this.view,k,M,v.clientX,v.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(v){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:S}=this;if(S.length){let{tooltip:R}=this;R&&R.dom.contains(v.relatedTarget)?this.watchTooltipLeave(R.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(v){let S=R=>{v.removeEventListener("mouseleave",S),this.active.length&&!this.view.dom.contains(R.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};v.addEventListener("mouseleave",S)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(_,v){let{left:S,right:R,top:T,bottom:A}=_.getBoundingClientRect(),k;if(k=_.querySelector(".cm-tooltip-arrow")){let M=k.getBoundingClientRect();T=Math.min(M.top,T),A=Math.max(M.bottom,A)}return v.clientX>=S-tooltipMargin&&v.clientX<=R+tooltipMargin&&v.clientY>=T-tooltipMargin&&v.clientY<=A+tooltipMargin}function isOverRange(_,v,S,R,T,A){let k=_.scrollDOM.getBoundingClientRect(),M=_.documentTop+_.documentPadding.top+_.contentHeight;if(k.left>R||k.right<R||k.top>T||Math.min(k.bottom,M)<T)return!1;let N=_.posAtCoords({x:R,y:T},!1);return N>=v&&N<=S}function hoverTooltip(_,v={}){let S=StateEffect.define(),R=StateField.define({create(){return[]},update(T,A){if(T.length&&(v.hideOnChange&&(A.docChanged||A.selection)?T=[]:v.hideOn&&(T=T.filter(k=>!v.hideOn(A,k))),A.docChanged)){let k=[];for(let M of T){let N=A.changes.mapPos(M.pos,-1,MapMode.TrackDel);if(N!=null){let D=Object.assign(Object.create(null),M);D.pos=N,D.end!=null&&(D.end=A.changes.mapPos(D.end)),k.push(D)}}T=k}for(let k of A.effects)k.is(S)&&(T=k.value),k.is(closeHoverTooltipEffect)&&(T=[]);return T},provide:T=>showHoverTooltip.from(T)});return{active:R,extension:[R,ViewPlugin.define(T=>new HoverPlugin(T,_,R,S,v.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(_,v){let S=_.plugin(tooltipPlugin);if(!S)return null;let R=S.manager.tooltips.indexOf(v);return R<0?null:S.manager.tooltipViews[R]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(_){let v,S;for(let R of _)v=v||R.topContainer,S=S||R.bottomContainer;return{topContainer:v,bottomContainer:S}}});function getPanel(_,v){let S=_.plugin(panelPlugin),R=S?S.specs.indexOf(v):-1;return R>-1?S.panels[R]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(_){this.input=_.state.facet(showPanel),this.specs=this.input.filter(S=>S),this.panels=this.specs.map(S=>S(_));let v=_.state.facet(panelConfig);this.top=new PanelGroup(_,!0,v.topContainer),this.bottom=new PanelGroup(_,!1,v.bottomContainer),this.top.sync(this.panels.filter(S=>S.top)),this.bottom.sync(this.panels.filter(S=>!S.top));for(let S of this.panels)S.dom.classList.add("cm-panel"),S.mount&&S.mount()}update(_){let v=_.state.facet(panelConfig);this.top.container!=v.topContainer&&(this.top.sync([]),this.top=new PanelGroup(_.view,!0,v.topContainer)),this.bottom.container!=v.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(_.view,!1,v.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let S=_.state.facet(showPanel);if(S!=this.input){let R=S.filter(N=>N),T=[],A=[],k=[],M=[];for(let N of R){let D=this.specs.indexOf(N),I;D<0?(I=N(_.view),M.push(I)):(I=this.panels[D],I.update&&I.update(_)),T.push(I),(I.top?A:k).push(I)}this.specs=R,this.panels=T,this.top.sync(A),this.bottom.sync(k);for(let N of M)N.dom.classList.add("cm-panel"),N.mount&&N.mount()}else for(let R of this.panels)R.update&&R.update(_)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:_=>EditorView.scrollMargins.of(v=>{let S=v.plugin(_);return S&&{top:S.top.scrollMargin(),bottom:S.bottom.scrollMargin()}})});class PanelGroup{constructor(v,S,R){this.view=v,this.top=S,this.container=R,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(v){for(let S of this.panels)S.destroy&&v.indexOf(S)<0&&S.destroy();this.panels=v,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let S=this.container||this.view.dom;S.insertBefore(this.dom,this.top?S.firstChild:null)}let v=this.dom.firstChild;for(let S of this.panels)if(S.dom.parentNode==this.dom){for(;v!=S.dom;)v=rm(v);v=v.nextSibling}else this.dom.insertBefore(S.dom,v);for(;v;)v=rm(v)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let v of this.classes.split(" "))v&&this.container.classList.remove(v);for(let v of(this.classes=this.view.themeClasses).split(" "))v&&this.container.classList.add(v)}}}function rm(_){let v=_.nextSibling;return _.remove(),v}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(v){return this==v||this.constructor==v.constructor&&this.eq(v)}eq(v){return!1}destroy(v){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},activeGutters=Facet.define();function gutter(_){return[gutters(),activeGutters.of({...defaults$2,..._})]}const unfixGutters=Facet.define({combine:_=>_.some(v=>v)});function gutters(_){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.domAfter=null,this.prevViewport=_.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=_.state.facet(activeGutters).map(v=>new SingleGutterView(_,v)),this.fixed=!_.state.facet(unfixGutters);for(let v of this.gutters)v.config.side=="after"?this.getDOMAfter().appendChild(v.dom):this.dom.appendChild(v.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),_.scrollDOM.insertBefore(this.dom,_.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(_){if(this.updateGutters(_)){let v=this.prevViewport,S=_.view.viewport,R=Math.min(v.to,S.to)-Math.max(v.from,S.from);this.syncGutters(R<(S.to-S.from)*.8)}if(_.geometryChanged){let v=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=v,this.domAfter&&(this.domAfter.style.minHeight=v)}this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=_.view.viewport}syncGutters(_){let v=this.dom.nextSibling;_&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let S=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),R=[],T=this.gutters.map(A=>new UpdateContext(A,this.view.viewport,-this.view.documentPadding.top));for(let A of this.view.viewportLineBlocks)if(R.length&&(R=[]),Array.isArray(A.type)){let k=!0;for(let M of A.type)if(M.type==BlockType.Text&&k){advanceCursor(S,R,M.from);for(let N of T)N.line(this.view,M,R);k=!1}else if(M.widget)for(let N of T)N.widget(this.view,M)}else if(A.type==BlockType.Text){advanceCursor(S,R,A.from);for(let k of T)k.line(this.view,A,R)}else if(A.widget)for(let k of T)k.widget(this.view,A);for(let A of T)A.finish();_&&(this.view.scrollDOM.insertBefore(this.dom,v),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(_){let v=_.startState.facet(activeGutters),S=_.state.facet(activeGutters),R=_.docChanged||_.heightChanged||_.viewportChanged||!RangeSet.eq(_.startState.facet(gutterLineClass),_.state.facet(gutterLineClass),_.view.viewport.from,_.view.viewport.to);if(v==S)for(let T of this.gutters)T.update(_)&&(R=!0);else{R=!0;let T=[];for(let A of S){let k=v.indexOf(A);k<0?T.push(new SingleGutterView(this.view,A)):(this.gutters[k].update(_),T.push(this.gutters[k]))}for(let A of this.gutters)A.dom.remove(),T.indexOf(A)<0&&A.destroy();for(let A of T)A.config.side=="after"?this.getDOMAfter().appendChild(A.dom):this.dom.appendChild(A.dom);this.gutters=T}return R}destroy(){for(let _ of this.gutters)_.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:_=>EditorView.scrollMargins.of(v=>{let S=v.plugin(_);if(!S||S.gutters.length==0||!S.fixed)return null;let R=S.dom.offsetWidth*v.scaleX,T=S.domAfter?S.domAfter.offsetWidth*v.scaleX:0;return v.textDirection==Direction.LTR?{left:R,right:T}:{right:R,left:T}})});function asArray(_){return Array.isArray(_)?_:[_]}function advanceCursor(_,v,S){for(;_.value&&_.from<=S;)_.from==S&&v.push(_.value),_.next()}class UpdateContext{constructor(v,S,R){this.gutter=v,this.height=R,this.i=0,this.cursor=RangeSet.iter(v.markers,S.from)}addElement(v,S,R){let{gutter:T}=this,A=(S.top-this.height)/v.scaleY,k=S.height/v.scaleY;if(this.i==T.elements.length){let M=new GutterElement(v,k,A,R);T.elements.push(M),T.dom.appendChild(M.dom)}else T.elements[this.i].update(v,k,A,R);this.height=S.bottom,this.i++}line(v,S,R){let T=[];advanceCursor(this.cursor,T,S.from),R.length&&(T=T.concat(R));let A=this.gutter.config.lineMarker(v,S,T);A&&T.unshift(A);let k=this.gutter;T.length==0&&!k.config.renderEmptyElements||this.addElement(v,S,T)}widget(v,S){let R=this.gutter.config.widgetMarker(v,S.widget,S),T=R?[R]:null;for(let A of v.state.facet(gutterWidgetClass)){let k=A(v,S.widget,S);k&&(T||(T=[])).push(k)}T&&this.addElement(v,S,T)}finish(){let v=this.gutter;for(;v.elements.length>this.i;){let S=v.elements.pop();v.dom.removeChild(S.dom),S.destroy()}}}class SingleGutterView{constructor(v,S){this.view=v,this.config=S,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let R in S.domEventHandlers)this.dom.addEventListener(R,T=>{let A=T.target,k;if(A!=this.dom&&this.dom.contains(A)){for(;A.parentNode!=this.dom;)A=A.parentNode;let N=A.getBoundingClientRect();k=(N.top+N.bottom)/2}else k=T.clientY;let M=v.lineBlockAtHeight(k-v.documentTop);S.domEventHandlers[R](v,M,T)&&T.preventDefault()});this.markers=asArray(S.markers(v)),S.initialSpacer&&(this.spacer=new GutterElement(v,0,0,[S.initialSpacer(v)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(v){let S=this.markers;if(this.markers=asArray(this.config.markers(v.view)),this.spacer&&this.config.updateSpacer){let T=this.config.updateSpacer(this.spacer.markers[0],v);T!=this.spacer.markers[0]&&this.spacer.update(v.view,0,0,[T])}let R=v.view.viewport;return!RangeSet.eq(this.markers,S,R.from,R.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(v):!1)}destroy(){for(let v of this.elements)v.destroy()}}class GutterElement{constructor(v,S,R,T){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(v,S,R,T)}update(v,S,R,T){this.height!=S&&(this.height=S,this.dom.style.height=S+"px"),this.above!=R&&(this.dom.style.marginTop=(this.above=R)?R+"px":""),sameMarkers(this.markers,T)||this.setMarkers(v,T)}setMarkers(v,S){let R="cm-gutterElement",T=this.dom.firstChild;for(let A=0,k=0;;){let M=k,N=A<S.length?S[A++]:null,D=!1;if(N){let I=N.elementClass;I&&(R+=" "+I);for(let q=k;q<this.markers.length;q++)if(this.markers[q].compare(N)){M=q,D=!0;break}}else M=this.markers.length;for(;k<M;){let I=this.markers[k++];if(I.toDOM){I.destroy(T);let q=T.nextSibling;T.remove(),T=q}}if(!N)break;N.toDOM&&(D?T=T.nextSibling:this.dom.insertBefore(N.toDOM(v),T)),D&&k++}this.dom.className=R,this.markers=S}destroy(){this.setMarkers(null,[])}}function sameMarkers(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++)if(!_[S].compare(v[S]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(_){return combineConfig(_,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(v,S){let R=Object.assign({},v);for(let T in S){let A=R[T],k=S[T];R[T]=A?(M,N,D)=>A(M,N,D)||k(M,N,D):k}return R}})}});class NumberMarker extends GutterMarker{constructor(v){super(),this.number=v}eq(v){return this.number==v.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(_,v){return _.state.facet(lineNumberConfig).formatNumber(v,_.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],_=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(v){return v.state.facet(lineNumberMarkers)},lineMarker(v,S,R){return R.some(T=>T.toDOM)?null:new NumberMarker(formatNumber(v,v.state.doc.lineAt(S.from).number))},widgetMarker:(v,S,R)=>{for(let T of v.state.facet(lineNumberWidgetMarker)){let A=T(v,S,R);if(A)return A}return null},lineMarkerChange:v=>v.startState.facet(lineNumberConfig)!=v.state.facet(lineNumberConfig),initialSpacer(v){return new NumberMarker(formatNumber(v,maxLineNumber(v.state.doc.lines)))},updateSpacer(v,S){let R=formatNumber(S.view,maxLineNumber(S.view.state.doc.lines));return R==v.number?v:new NumberMarker(R)},domEventHandlers:_.facet(lineNumberConfig).domEventHandlers,side:"before"}));function lineNumbers(_={}){return[lineNumberConfig.of(_),gutters(),lineNumberGutter]}function maxLineNumber(_){let v=9;for(;v<_;)v=v*10+9;return v}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],_=>{let v=[],S=-1;for(let R of _.selection.ranges){let T=_.doc.lineAt(R.head).from;T>S&&(S=T,v.push(activeLineGutterMarker.range(T)))}return RangeSet.of(v)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(v,S){this.from=v,this.to=S}}class NodeProp{constructor(v={}){this.id=nextPropID++,this.perNode=!!v.perNode,this.deserialize=v.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=v.combine||null}add(v){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof v!="function"&&(v=NodeType.match(v)),S=>{let R=v(S);return R===void 0?null:[this,R]}}}NodeProp.closedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.group=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.isolate=new NodeProp({deserialize:_=>{if(_&&_!="rtl"&&_!="ltr"&&_!="auto")throw new RangeError("Invalid value for isolate: "+_);return _||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(v,S,R){this.tree=v,this.overlay=S,this.parser=R}static get(v){return v&&v.props&&v.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(v,S,R,T=0){this.name=v,this.props=S,this.id=R,this.flags=T}static define(v){let S=v.props&&v.props.length?Object.create(null):noProps,R=(v.top?1:0)|(v.skipped?2:0)|(v.error?4:0)|(v.name==null?8:0),T=new NodeType(v.name||"",S,v.id,R);if(v.props){for(let A of v.props)if(Array.isArray(A)||(A=A(T)),A){if(A[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");S[A[0].id]=A[1]}}return T}prop(v){return this.props[v.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(v){if(typeof v=="string"){if(this.name==v)return!0;let S=this.prop(NodeProp.group);return S?S.indexOf(v)>-1:!1}return this.id==v}static match(v){let S=Object.create(null);for(let R in v)for(let T of R.split(" "))S[T]=v[R];return R=>{for(let T=R.prop(NodeProp.group),A=-1;A<(T?T.length:0);A++){let k=S[A<0?R.name:T[A]];if(k)return k}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(v){this.types=v;for(let S=0;S<v.length;S++)if(v[S].id!=S)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...v){let S=[];for(let R of this.types){let T=null;for(let A of v){let k=A(R);if(k){T||(T=Object.assign({},R.props));let M=k[1],N=k[0];N.combine&&N.id in T&&(M=N.combine(T[N.id],M)),T[N.id]=M}}S.push(T?new NodeType(R.name,T,R.id,R.flags):R)}return new NodeSet(S)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(_){_[_.ExcludeBuffers=1]="ExcludeBuffers",_[_.IncludeAnonymous=2]="IncludeAnonymous",_[_.IgnoreMounts=4]="IgnoreMounts",_[_.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(v,S,R,T,A){if(this.type=v,this.children=S,this.positions=R,this.length=T,this.props=null,A&&A.length){this.props=Object.create(null);for(let[k,M]of A)this.props[typeof k=="number"?k:k.id]=M}}toString(){let v=MountedTree.get(this);if(v&&!v.overlay)return v.tree.toString();let S="";for(let R of this.children){let T=R.toString();T&&(S&&(S+=","),S+=T)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(S.length?"("+S+")":""):S}cursor(v=0){return new TreeCursor(this.topNode,v)}cursorAt(v,S=0,R=0){let T=CachedNode.get(this)||this.topNode,A=new TreeCursor(T);return A.moveTo(v,S),CachedNode.set(this,A._tree),A}get topNode(){return new TreeNode(this,0,0,null)}resolve(v,S=0){let R=resolveNode(CachedNode.get(this)||this.topNode,v,S,!1);return CachedNode.set(this,R),R}resolveInner(v,S=0){let R=resolveNode(CachedInnerNode.get(this)||this.topNode,v,S,!0);return CachedInnerNode.set(this,R),R}resolveStack(v,S=0){return stackIterator(this,v,S)}iterate(v){let{enter:S,leave:R,from:T=0,to:A=this.length}=v,k=v.mode||0,M=(k&IterMode.IncludeAnonymous)>0;for(let N=this.cursor(k|IterMode.IncludeAnonymous);;){let D=!1;if(N.from<=A&&N.to>=T&&(!M&&N.type.isAnonymous||S(N)!==!1)){if(N.firstChild())continue;D=!0}for(;D&&R&&(M||!N.type.isAnonymous)&&R(N),!N.nextSibling();){if(!N.parent())return;D=!0}}}prop(v){return v.perNode?this.props?this.props[v.id]:void 0:this.type.prop(v)}get propValues(){let v=[];if(this.props)for(let S in this.props)v.push([+S,this.props[S]]);return v}balance(v={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(S,R,T)=>new Tree(this.type,S,R,T,this.propValues),v.makeTree||((S,R,T)=>new Tree(NodeType.none,S,R,T)))}static build(v){return buildTree(v)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(v,S){this.buffer=v,this.index=S}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(v,S,R){this.buffer=v,this.length=S,this.set=R}get type(){return NodeType.none}toString(){let v=[];for(let S=0;S<this.buffer.length;)v.push(this.childString(S)),S=this.buffer[S+3];return v.join(",")}childString(v){let S=this.buffer[v],R=this.buffer[v+3],T=this.set.types[S],A=T.name;if(/\W/.test(A)&&!T.isError&&(A=JSON.stringify(A)),v+=4,R==v)return A;let k=[];for(;v<R;)k.push(this.childString(v)),v=this.buffer[v+3];return A+"("+k.join(",")+")"}findChild(v,S,R,T,A){let{buffer:k}=this,M=-1;for(let N=v;N!=S&&!(checkSide(A,T,k[N+1],k[N+2])&&(M=N,R>0));N=k[N+3]);return M}slice(v,S,R){let T=this.buffer,A=new Uint16Array(S-v),k=0;for(let M=v,N=0;M<S;){A[N++]=T[M++],A[N++]=T[M++]-R;let D=A[N++]=T[M++]-R;A[N++]=T[M++]-v,k=Math.max(k,D)}return new TreeBuffer(A,k,this.set)}}function checkSide(_,v,S,R){switch(_){case-2:return S<v;case-1:return R>=v&&S<v;case 0:return S<v&&R>v;case 1:return S<=v&&R>v;case 2:return R>v;case 4:return!0}}function resolveNode(_,v,S,R){for(var T;_.from==_.to||(S<1?_.from>=v:_.from>v)||(S>-1?_.to<=v:_.to<v);){let k=!R&&_ instanceof TreeNode&&_.index<0?null:_.parent;if(!k)return _;_=k}let A=R?0:IterMode.IgnoreOverlays;if(R)for(let k=_,M=k.parent;M;k=M,M=k.parent)k instanceof TreeNode&&k.index<0&&((T=M.enter(v,S,A))===null||T===void 0?void 0:T.from)!=k.from&&(_=M);for(;;){let k=_.enter(v,S,A);if(!k)return _;_=k}}class BaseNode{cursor(v=0){return new TreeCursor(this,v)}getChild(v,S=null,R=null){let T=getChildren(this,v,S,R);return T.length?T[0]:null}getChildren(v,S=null,R=null){return getChildren(this,v,S,R)}resolve(v,S=0){return resolveNode(this,v,S,!1)}resolveInner(v,S=0){return resolveNode(this,v,S,!0)}matchContext(v){return matchNodeContext(this.parent,v)}enterUnfinishedNodesBefore(v){let S=this.childBefore(v),R=this;for(;S;){let T=S.lastChild;if(!T||T.to!=S.to)break;T.type.isError&&T.from==T.to?(R=S,S=T.prevSibling):S=T}return R}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(v,S,R,T){super(),this._tree=v,this.from=S,this.index=R,this._parent=T}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(v,S,R,T,A=0){for(let k=this;;){for(let{children:M,positions:N}=k._tree,D=S>0?M.length:-1;v!=D;v+=S){let I=M[v],q=N[v]+k.from;if(checkSide(T,R,q,q+I.length)){if(I instanceof TreeBuffer){if(A&IterMode.ExcludeBuffers)continue;let B=I.findChild(0,I.buffer.length,S,R-q,T);if(B>-1)return new BufferNode(new BufferContext(k,I,v,q),null,B)}else if(A&IterMode.IncludeAnonymous||!I.type.isAnonymous||hasChild(I)){let B;if(!(A&IterMode.IgnoreMounts)&&(B=MountedTree.get(I))&&!B.overlay)return new TreeNode(B.tree,q,v,k);let z=new TreeNode(I,q,v,k);return A&IterMode.IncludeAnonymous||!z.type.isAnonymous?z:z.nextChild(S<0?I.children.length-1:0,S,R,T)}}}if(A&IterMode.IncludeAnonymous||!k.type.isAnonymous||(k.index>=0?v=k.index+S:v=S<0?-1:k._parent._tree.children.length,k=k._parent,!k))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(v){return this.nextChild(0,1,v,2)}childBefore(v){return this.nextChild(this._tree.children.length-1,-1,v,-2)}prop(v){return this._tree.prop(v)}enter(v,S,R=0){let T;if(!(R&IterMode.IgnoreOverlays)&&(T=MountedTree.get(this._tree))&&T.overlay){let A=v-this.from;for(let{from:k,to:M}of T.overlay)if((S>0?k<=A:k<A)&&(S<0?M>=A:M>A))return new TreeNode(T.tree,T.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,v,S,R)}nextSignificantParent(){let v=this;for(;v.type.isAnonymous&&v._parent;)v=v._parent;return v}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(_,v,S,R){let T=_.cursor(),A=[];if(!T.firstChild())return A;if(S!=null){for(let k=!1;!k;)if(k=T.type.is(S),!T.nextSibling())return A}for(;;){if(R!=null&&T.type.is(R))return A;if(T.type.is(v)&&A.push(T.node),!T.nextSibling())return R==null?A:[]}}function matchNodeContext(_,v,S=v.length-1){for(let R=_;S>=0;R=R.parent){if(!R)return!1;if(!R.type.isAnonymous){if(v[S]&&v[S]!=R.name)return!1;S--}}return!0}class BufferContext{constructor(v,S,R,T){this.parent=v,this.buffer=S,this.index=R,this.start=T}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(v,S,R){super(),this.context=v,this._parent=S,this.index=R,this.type=v.buffer.set.types[v.buffer.buffer[R]]}child(v,S,R){let{buffer:T}=this.context,A=T.findChild(this.index+4,T.buffer[this.index+3],v,S-this.context.start,R);return A<0?null:new BufferNode(this.context,this,A)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(v){return this.child(1,v,2)}childBefore(v){return this.child(-1,v,-2)}prop(v){return this.type.prop(v)}enter(v,S,R=0){if(R&IterMode.ExcludeBuffers)return null;let{buffer:T}=this.context,A=T.findChild(this.index+4,T.buffer[this.index+3],S>0?1:-1,v-this.context.start,S);return A<0?null:new BufferNode(this.context,this,A)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(v){return this._parent?null:this.context.parent.nextChild(this.context.index+v,v,0,4)}get nextSibling(){let{buffer:v}=this.context,S=v.buffer[this.index+3];return S<(this._parent?v.buffer[this._parent.index+3]:v.buffer.length)?new BufferNode(this.context,this._parent,S):this.externalSibling(1)}get prevSibling(){let{buffer:v}=this.context,S=this._parent?this._parent.index+4:0;return this.index==S?this.externalSibling(-1):new BufferNode(this.context,this._parent,v.findChild(S,this.index,-1,0,4))}get tree(){return null}toTree(){let v=[],S=[],{buffer:R}=this.context,T=this.index+4,A=R.buffer[this.index+3];if(A>T){let k=R.buffer[this.index+1];v.push(R.slice(T,A,k)),S.push(0)}return new Tree(this.type,v,S,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(_){if(!_.length)return null;let v=0,S=_[0];for(let A=1;A<_.length;A++){let k=_[A];(k.from>S.from||k.to<S.to)&&(S=k,v=A)}let R=S instanceof TreeNode&&S.index<0?null:S.parent,T=_.slice();return R?T[v]=R:T.splice(v,1),new StackIterator(T,S)}class StackIterator{constructor(v,S){this.heads=v,this.node=S}get next(){return iterStack(this.heads)}}function stackIterator(_,v,S){let R=_.resolveInner(v,S),T=null;for(let A=R instanceof TreeNode?R:R.context.parent;A;A=A.parent)if(A.index<0){let k=A.parent;(T||(T=[R])).push(k.resolve(v,S)),A=k}else{let k=MountedTree.get(A.tree);if(k&&k.overlay&&k.overlay[0].from<=v&&k.overlay[k.overlay.length-1].to>=v){let M=new TreeNode(k.tree,k.overlay[0].from+A.from,-1,A);(T||(T=[R])).push(resolveNode(M,v,S,!1))}}return T?iterStack(T):R}class TreeCursor{get name(){return this.type.name}constructor(v,S=0){if(this.mode=S,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,v instanceof TreeNode)this.yieldNode(v);else{this._tree=v.context.parent,this.buffer=v.context;for(let R=v._parent;R;R=R._parent)this.stack.unshift(R.index);this.bufferNode=v,this.yieldBuf(v.index)}}yieldNode(v){return v?(this._tree=v,this.type=v.type,this.from=v.from,this.to=v.to,!0):!1}yieldBuf(v,S){this.index=v;let{start:R,buffer:T}=this.buffer;return this.type=S||T.set.types[T.buffer[v]],this.from=R+T.buffer[v+1],this.to=R+T.buffer[v+2],!0}yield(v){return v?v instanceof TreeNode?(this.buffer=null,this.yieldNode(v)):(this.buffer=v.context,this.yieldBuf(v.index,v.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(v,S,R){if(!this.buffer)return this.yield(this._tree.nextChild(v<0?this._tree._tree.children.length-1:0,v,S,R,this.mode));let{buffer:T}=this.buffer,A=T.findChild(this.index+4,T.buffer[this.index+3],v,S-this.buffer.start,R);return A<0?!1:(this.stack.push(this.index),this.yieldBuf(A))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(v){return this.enterChild(1,v,2)}childBefore(v){return this.enterChild(-1,v,-2)}enter(v,S,R=this.mode){return this.buffer?R&IterMode.ExcludeBuffers?!1:this.enterChild(1,v,S):this.yield(this._tree.enter(v,S,R))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let v=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(v)}sibling(v){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+v,v,0,4,this.mode)):!1;let{buffer:S}=this.buffer,R=this.stack.length-1;if(v<0){let T=R<0?0:this.stack[R]+4;if(this.index!=T)return this.yieldBuf(S.findChild(T,this.index,-1,0,4))}else{let T=S.buffer[this.index+3];if(T<(R<0?S.buffer.length:S.buffer[this.stack[R]+3]))return this.yieldBuf(T)}return R<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+v,v,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(v){let S,R,{buffer:T}=this;if(T){if(v>0){if(this.index<T.buffer.buffer.length)return!1}else for(let A=0;A<this.index;A++)if(T.buffer.buffer[A+3]<this.index)return!1;({index:S,parent:R}=T)}else({index:S,_parent:R}=this._tree);for(;R;{index:S,_parent:R}=R)if(S>-1)for(let A=S+v,k=v<0?-1:R._tree.children.length;A!=k;A+=v){let M=R._tree.children[A];if(this.mode&IterMode.IncludeAnonymous||M instanceof TreeBuffer||!M.type.isAnonymous||hasChild(M))return!1}return!0}move(v,S){if(S&&this.enterChild(v,0,4))return!0;for(;;){if(this.sibling(v))return!0;if(this.atLastNode(v)||!this.parent())return!1}}next(v=!0){return this.move(1,v)}prev(v=!0){return this.move(-1,v)}moveTo(v,S=0){for(;(this.from==this.to||(S<1?this.from>=v:this.from>v)||(S>-1?this.to<=v:this.to<v))&&this.parent(););for(;this.enterChild(1,v,S););return this}get node(){if(!this.buffer)return this._tree;let v=this.bufferNode,S=null,R=0;if(v&&v.context==this.buffer)e:for(let T=this.index,A=this.stack.length;A>=0;){for(let k=v;k;k=k._parent)if(k.index==T){if(T==this.index)return k;S=k,R=A+1;break e}T=this.stack[--A]}for(let T=R;T<this.stack.length;T++)S=new BufferNode(this.buffer,S,this.stack[T]);return this.bufferNode=new BufferNode(this.buffer,S,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(v,S){for(let R=0;;){let T=!1;if(this.type.isAnonymous||v(this)!==!1){if(this.firstChild()){R++;continue}this.type.isAnonymous||(T=!0)}for(;;){if(T&&S&&S(this),T=this.type.isAnonymous,!R)return;if(this.nextSibling())break;this.parent(),R--,T=!0}}}matchContext(v){if(!this.buffer)return matchNodeContext(this.node.parent,v);let{buffer:S}=this.buffer,{types:R}=S.set;for(let T=v.length-1,A=this.stack.length-1;T>=0;A--){if(A<0)return matchNodeContext(this._tree,v,T);let k=R[S.buffer[this.stack[A]]];if(!k.isAnonymous){if(v[T]&&v[T]!=k.name)return!1;T--}}return!0}}function hasChild(_){return _.children.some(v=>v instanceof TreeBuffer||!v.type.isAnonymous||hasChild(v))}function buildTree(_){var v;let{buffer:S,nodeSet:R,maxBufferLength:T=DefaultBufferLength,reused:A=[],minRepeatType:k=R.types.length}=_,M=Array.isArray(S)?new FlatBufferCursor(S,S.length):S,N=R.types,D=0,I=0;function q(ne,oe,te,se,le,ue){let{id:ce,start:ge,end:me,size:Ee}=M,_e=I,ye=D;if(Ee<0)if(M.next(),Ee==-1){let pe=A[ce];te.push(pe),se.push(ge-ne);return}else if(Ee==-3){D=ce;return}else if(Ee==-4){I=ce;return}else throw new RangeError(`Unrecognized record size: ${Ee}`);let be=N[ce],Se,De,xe=ge-ne;if(me-ge<=T&&(De=H(M.pos-oe,le))){let pe=new Uint16Array(De.size-De.skip),we=M.pos-De.size,Oe=pe.length;for(;M.pos>we;)Oe=W(De.start,pe,Oe);Se=new TreeBuffer(pe,me-De.start,R),xe=De.start-ne}else{let pe=M.pos-Ee;M.next();let we=[],Oe=[],Ce=ce>=k?ce:-1,Pe=0,Ne=me;for(;M.pos>pe;)Ce>=0&&M.id==Ce&&M.size>=0?(M.end<=Ne-T&&(F(we,Oe,ge,Pe,M.end,Ne,Ce,_e,ye),Pe=we.length,Ne=M.end),M.next()):ue>2500?B(ge,pe,we,Oe):q(ge,pe,we,Oe,Ce,ue+1);if(Ce>=0&&Pe>0&&Pe<we.length&&F(we,Oe,ge,Pe,ge,Ne,Ce,_e,ye),we.reverse(),Oe.reverse(),Ce>-1&&Pe>0){let Te=z(be,ye);Se=balanceRange(be,we,Oe,0,we.length,0,me-ge,Te,Te)}else Se=V(be,we,Oe,me-ge,_e-me,ye)}te.push(Se),se.push(xe)}function B(ne,oe,te,se){let le=[],ue=0,ce=-1;for(;M.pos>oe;){let{id:ge,start:me,end:Ee,size:_e}=M;if(_e>4)M.next();else{if(ce>-1&&me<ce)break;ce<0&&(ce=Ee-T),le.push(ge,me,Ee),ue++,M.next()}}if(ue){let ge=new Uint16Array(ue*4),me=le[le.length-2];for(let Ee=le.length-3,_e=0;Ee>=0;Ee-=3)ge[_e++]=le[Ee],ge[_e++]=le[Ee+1]-me,ge[_e++]=le[Ee+2]-me,ge[_e++]=_e;te.push(new TreeBuffer(ge,le[2]-me,R)),se.push(me-ne)}}function z(ne,oe){return(te,se,le)=>{let ue=0,ce=te.length-1,ge,me;if(ce>=0&&(ge=te[ce])instanceof Tree){if(!ce&&ge.type==ne&&ge.length==le)return ge;(me=ge.prop(NodeProp.lookAhead))&&(ue=se[ce]+ge.length+me)}return V(ne,te,se,le,ue,oe)}}function F(ne,oe,te,se,le,ue,ce,ge,me){let Ee=[],_e=[];for(;ne.length>se;)Ee.push(ne.pop()),_e.push(oe.pop()+te-le);ne.push(V(R.types[ce],Ee,_e,ue-le,ge-ue,me)),oe.push(le-te)}function V(ne,oe,te,se,le,ue,ce){if(ue){let ge=[NodeProp.contextHash,ue];ce=ce?[ge].concat(ce):[ge]}if(le>25){let ge=[NodeProp.lookAhead,le];ce=ce?[ge].concat(ce):[ge]}return new Tree(ne,oe,te,se,ce)}function H(ne,oe){let te=M.fork(),se=0,le=0,ue=0,ce=te.end-T,ge={size:0,start:0,skip:0};e:for(let me=te.pos-ne;te.pos>me;){let Ee=te.size;if(te.id==oe&&Ee>=0){ge.size=se,ge.start=le,ge.skip=ue,ue+=4,se+=4,te.next();continue}let _e=te.pos-Ee;if(Ee<0||_e<me||te.start<ce)break;let ye=te.id>=k?4:0,be=te.start;for(te.next();te.pos>_e;){if(te.size<0)if(te.size==-3||te.size==-4)ye+=4;else break e;else te.id>=k&&(ye+=4);te.next()}le=be,se+=Ee,ue+=ye}return(oe<0||se==ne)&&(ge.size=se,ge.start=le,ge.skip=ue),ge.size>4?ge:void 0}function W(ne,oe,te){let{id:se,start:le,end:ue,size:ce}=M;if(M.next(),ce>=0&&se<k){let ge=te;if(ce>4){let me=M.pos-(ce-4);for(;M.pos>me;)te=W(ne,oe,te)}oe[--te]=ge,oe[--te]=ue-ne,oe[--te]=le-ne,oe[--te]=se}else ce==-3?D=se:ce==-4&&(I=se);return te}let Y=[],Z=[];for(;M.pos>0;)q(_.start||0,_.bufferStart||0,Y,Z,-1,0);let J=(v=_.length)!==null&&v!==void 0?v:Y.length?Z[0]+Y[0].length:0;return new Tree(N[_.topID],Y.reverse(),Z.reverse(),J)}const nodeSizeCache=new WeakMap;function nodeSize(_,v){if(!_.isAnonymous||v instanceof TreeBuffer||v.type!=_)return 1;let S=nodeSizeCache.get(v);if(S==null){S=1;for(let R of v.children){if(R.type!=_||!(R instanceof Tree)){S=1;break}S+=nodeSize(_,R)}nodeSizeCache.set(v,S)}return S}function balanceRange(_,v,S,R,T,A,k,M,N){let D=0;for(let F=R;F<T;F++)D+=nodeSize(_,v[F]);let I=Math.ceil(D*1.5/8),q=[],B=[];function z(F,V,H,W,Y){for(let Z=H;Z<W;){let J=Z,ne=V[Z],oe=nodeSize(_,F[Z]);for(Z++;Z<W;Z++){let te=nodeSize(_,F[Z]);if(oe+te>=I)break;oe+=te}if(Z==J+1){if(oe>I){let te=F[J];z(te.children,te.positions,0,te.children.length,V[J]+Y);continue}q.push(F[J])}else{let te=V[Z-1]+F[Z-1].length-ne;q.push(balanceRange(_,F,V,J,Z,ne,te,null,N))}B.push(ne+Y-A)}}return z(v,S,R,T,0),(M||N)(q,B,k)}class TreeFragment{constructor(v,S,R,T,A=!1,k=!1){this.from=v,this.to=S,this.tree=R,this.offset=T,this.open=(A?1:0)|(k?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(v,S=[],R=!1){let T=[new TreeFragment(0,v.length,v,0,!1,R)];for(let A of S)A.to>v.length&&T.push(A);return T}static applyChanges(v,S,R=128){if(!S.length)return v;let T=[],A=1,k=v.length?v[0]:null;for(let M=0,N=0,D=0;;M++){let I=M<S.length?S[M]:null,q=I?I.fromA:1e9;if(q-N>=R)for(;k&&k.from<q;){let B=k;if(N>=B.from||q<=B.to||D){let z=Math.max(B.from,N)-D,F=Math.min(B.to,q)-D;B=z>=F?null:new TreeFragment(z,F,B.tree,B.offset+D,M>0,!!I)}if(B&&T.push(B),k.to>q)break;k=A<v.length?v[A++]:null}if(!I)break;N=I.toA,D=I.toA-I.toB}return T}}class Parser{startParse(v,S,R){return typeof v=="string"&&(v=new StringInput(v)),R=R?R.length?R.map(T=>new Range(T.from,T.to)):[new Range(0,0)]:[new Range(0,v.length)],this.createParse(v,S||[],R)}parse(v,S,R){let T=this.startParse(v,S,R);for(;;){let A=T.advance();if(A)return A}}}class StringInput{constructor(v){this.string=v}get length(){return this.string.length}chunk(v){return this.string.slice(v)}get lineChunks(){return!1}read(v,S){return this.string.slice(v,S)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(v,S,R,T){this.name=v,this.set=S,this.base=R,this.modified=T,this.id=nextTagID++}toString(){let{name:v}=this;for(let S of this.modified)S.name&&(v=`${S.name}(${v})`);return v}static define(v,S){let R=typeof v=="string"?v:"?";if(v instanceof Tag&&(S=v),S?.base)throw new Error("Can not derive from a modified tag");let T=new Tag(R,[],null,[]);if(T.set.push(T),S)for(let A of S.set)T.set.push(A);return T}static defineModifier(v){let S=new Modifier(v);return R=>R.modified.indexOf(S)>-1?R:Modifier.get(R.base||R,R.modified.concat(S).sort((T,A)=>T.id-A.id))}}let nextModifierID=0;class Modifier{constructor(v){this.name=v,this.instances=[],this.id=nextModifierID++}static get(v,S){if(!S.length)return v;let R=S[0].instances.find(M=>M.base==v&&sameArray(S,M.modified));if(R)return R;let T=[],A=new Tag(v.name,T,v,S);for(let M of S)M.instances.push(A);let k=powerSet(S);for(let M of v.set)if(!M.modified.length)for(let N of k)T.push(Modifier.get(M,N));return A}}function sameArray(_,v){return _.length==v.length&&_.every((S,R)=>S==v[R])}function powerSet(_){let v=[[]];for(let S=0;S<_.length;S++)for(let R=0,T=v.length;R<T;R++)v.push(v[R].concat(_[S]));return v.sort((S,R)=>R.length-S.length)}function styleTags(_){let v=Object.create(null);for(let S in _){let R=_[S];Array.isArray(R)||(R=[R]);for(let T of S.split(" "))if(T){let A=[],k=2,M=T;for(let q=0;;){if(M=="..."&&q>0&&q+3==T.length){k=1;break}let B=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(M);if(!B)throw new RangeError("Invalid path: "+T);if(A.push(B[0]=="*"?"":B[0][0]=='"'?JSON.parse(B[0]):B[0]),q+=B[0].length,q==T.length)break;let z=T[q++];if(q==T.length&&z=="!"){k=0;break}if(z!="/")throw new RangeError("Invalid path: "+T);M=T.slice(q)}let N=A.length-1,D=A[N];if(!D)throw new RangeError("Invalid path: "+T);let I=new Rule(R,k,N>0?A.slice(0,N):null);v[D]=I.sort(v[D])}}return ruleNodeProp.add(v)}const ruleNodeProp=new NodeProp({combine(_,v){let S,R,T;for(;_||v;){if(!_||v&&_.depth>=v.depth?(T=v,v=v.next):(T=_,_=_.next),S&&S.mode==T.mode&&!T.context&&!S.context)continue;let A=new Rule(T.tags,T.mode,T.context);S?S.next=A:R=A,S=A}return R}});class Rule{constructor(v,S,R,T){this.tags=v,this.mode=S,this.context=R,this.next=T}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(v){return!v||v.depth<this.depth?(this.next=v,this):(v.next=this.sort(v.next),v)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(_,v){let S=Object.create(null);for(let A of _)if(!Array.isArray(A.tag))S[A.tag.id]=A.class;else for(let k of A.tag)S[k.id]=A.class;let{scope:R,all:T=null}=v||{};return{style:A=>{let k=T;for(let M of A)for(let N of M.set){let D=S[N.id];if(D){k=k?k+" "+D:D;break}}return k},scope:R}}function highlightTags(_,v){let S=null;for(let R of _){let T=R.style(v);T&&(S=S?S+" "+T:T)}return S}function highlightTree(_,v,S,R=0,T=_.length){let A=new HighlightBuilder(R,Array.isArray(v)?v:[v],S);A.highlightRange(_.cursor(),R,T,"",A.highlighters),A.flush(T)}class HighlightBuilder{constructor(v,S,R){this.at=v,this.highlighters=S,this.span=R,this.class=""}startSpan(v,S){S!=this.class&&(this.flush(v),v>this.at&&(this.at=v),this.class=S)}flush(v){v>this.at&&this.class&&this.span(this.at,v,this.class)}highlightRange(v,S,R,T,A){let{type:k,from:M,to:N}=v;if(M>=R||N<=S)return;k.isTop&&(A=this.highlighters.filter(z=>!z.scope||z.scope(k)));let D=T,I=getStyleTags(v)||Rule.empty,q=highlightTags(A,I.tags);if(q&&(D&&(D+=" "),D+=q,I.mode==1&&(T+=(T?" ":"")+q)),this.startSpan(Math.max(S,M),D),I.opaque)return;let B=v.tree&&v.tree.prop(NodeProp.mounted);if(B&&B.overlay){let z=v.node.enter(B.overlay[0].from+M,1),F=this.highlighters.filter(H=>!H.scope||H.scope(B.tree.type)),V=v.firstChild();for(let H=0,W=M;;H++){let Y=H<B.overlay.length?B.overlay[H]:null,Z=Y?Y.from+M:N,J=Math.max(S,W),ne=Math.min(R,Z);if(J<ne&&V)for(;v.from<ne&&(this.highlightRange(v,J,ne,T,A),this.startSpan(Math.min(ne,v.to),D),!(v.to>=Z||!v.nextSibling())););if(!Y||Z>R)break;W=Y.to+M,W>S&&(this.highlightRange(z.cursor(),Math.max(S,Y.from+M),Math.min(R,W),"",F),this.startSpan(Math.min(R,W),D))}V&&v.parent()}else if(v.firstChild()){B&&(T="");do if(!(v.to<=S)){if(v.from>=R)break;this.highlightRange(v,S,R,T,A),this.startSpan(Math.min(R,v.to),D)}while(v.nextSibling());v.parent()}}}function getStyleTags(_){let v=_.type.prop(ruleNodeProp);for(;v&&v.context&&!_.matchContext(v.context);)v=v.next;return v||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let _ in tags){let v=tags[_];v instanceof Tag&&(v.name=_)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(_){return Facet.define({combine:_?v=>v.concat(_):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(v,S,R=[],T=""){this.data=v,this.name=T,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=S,this.extension=[language.of(this),EditorState.languageData.of((A,k,M)=>{let N=topNodeAt(A,k,M),D=N.type.prop(languageDataProp);if(!D)return[];let I=A.facet(D),q=N.type.prop(sublanguageProp);if(q){let B=N.resolve(k-N.from,M);for(let z of q)if(z.test(B,A)){let F=A.facet(z.facet);return z.type=="replace"?F:F.concat(I)}}return I})].concat(R)}isActiveAt(v,S,R=-1){return topNodeAt(v,S,R).type.prop(languageDataProp)==this.data}findRegions(v){let S=v.facet(language);if(S?.data==this.data)return[{from:0,to:v.doc.length}];if(!S||!S.allowsNesting)return[];let R=[],T=(A,k)=>{if(A.prop(languageDataProp)==this.data){R.push({from:k,to:k+A.length});return}let M=A.prop(NodeProp.mounted);if(M){if(M.tree.prop(languageDataProp)==this.data){if(M.overlay)for(let N of M.overlay)R.push({from:N.from+k,to:N.to+k});else R.push({from:k,to:k+A.length});return}else if(M.overlay){let N=R.length;if(T(M.tree,M.overlay[0].from+k),R.length>N)return}}for(let N=0;N<A.children.length;N++){let D=A.children[N];D instanceof Tree&&T(D,A.positions[N]+k)}};return T(syntaxTree(v),0),R}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(_,v,S){let R=_.facet(language),T=syntaxTree(_).topNode;if(!R||R.allowsNesting)for(let A=T;A;A=A.enter(v,S,IterMode.ExcludeBuffers))A.type.isTop&&(T=A);return T}function syntaxTree(_){let v=_.field(Language.state,!1);return v?v.tree:Tree.empty}class DocInput{constructor(v){this.doc=v,this.cursorPos=0,this.string="",this.cursor=v.iter()}get length(){return this.doc.length}syncTo(v){return this.string=this.cursor.next(v-this.cursorPos).value,this.cursorPos=v+this.string.length,this.cursorPos-this.string.length}chunk(v){return this.syncTo(v),this.string}get lineChunks(){return!0}read(v,S){let R=this.cursorPos-this.string.length;return v<R||S>=this.cursorPos?this.doc.sliceString(v,S):this.string.slice(v-R,S-R)}}let currentContext=null;class ParseContext{constructor(v,S,R=[],T,A,k,M,N){this.parser=v,this.state=S,this.fragments=R,this.tree=T,this.treeLen=A,this.viewport=k,this.skipped=M,this.scheduleOn=N,this.parse=null,this.tempSkipped=[]}static create(v,S,R){return new ParseContext(v,S,[],Tree.empty,0,R,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(v,S){return S!=null&&S>=this.state.doc.length&&(S=void 0),this.tree!=Tree.empty&&this.isDone(S??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var R;if(typeof v=="number"){let T=Date.now()+v;v=()=>Date.now()>T}for(this.parse||(this.parse=this.startParse()),S!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>S)&&S<this.state.doc.length&&this.parse.stopAt(S);;){let T=this.parse.advance();if(T)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(T,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(R=this.parse.stoppedAt)!==null&&R!==void 0?R:this.state.doc.length,this.tree=T,this.parse=null,this.treeLen<(S??this.state.doc.length))this.parse=this.startParse();else return!0;if(v())return!1}})}takeTree(){let v,S;this.parse&&(v=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>v)&&this.parse.stopAt(v),this.withContext(()=>{for(;!(S=this.parse.advance()););}),this.treeLen=v,this.tree=S,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(v){let S=currentContext;currentContext=this;try{return v()}finally{currentContext=S}}withoutTempSkipped(v){for(let S;S=this.tempSkipped.pop();)v=cutFragments(v,S.from,S.to);return v}changes(v,S){let{fragments:R,tree:T,treeLen:A,viewport:k,skipped:M}=this;if(this.takeTree(),!v.empty){let N=[];if(v.iterChangedRanges((D,I,q,B)=>N.push({fromA:D,toA:I,fromB:q,toB:B})),R=TreeFragment.applyChanges(R,N),T=Tree.empty,A=0,k={from:v.mapPos(k.from,-1),to:v.mapPos(k.to,1)},this.skipped.length){M=[];for(let D of this.skipped){let I=v.mapPos(D.from,1),q=v.mapPos(D.to,-1);I<q&&M.push({from:I,to:q})}}}return new ParseContext(this.parser,S,R,T,A,k,M,this.scheduleOn)}updateViewport(v){if(this.viewport.from==v.from&&this.viewport.to==v.to)return!1;this.viewport=v;let S=this.skipped.length;for(let R=0;R<this.skipped.length;R++){let{from:T,to:A}=this.skipped[R];T<v.to&&A>v.from&&(this.fragments=cutFragments(this.fragments,T,A),this.skipped.splice(R--,1))}return this.skipped.length>=S?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(v,S){this.skipped.push({from:v,to:S})}static getSkippingParser(v){return new class extends Parser{createParse(S,R,T){let A=T[0].from,k=T[T.length-1].to;return{parsedPos:A,advance(){let N=currentContext;if(N){for(let D of T)N.tempSkipped.push(D);v&&(N.scheduleOn=N.scheduleOn?Promise.all([N.scheduleOn,v]):v)}return this.parsedPos=k,new Tree(NodeType.none,[],[],k-A)},stoppedAt:null,stopAt(){}}}}}isDone(v){v=Math.min(v,this.state.doc.length);let S=this.fragments;return this.treeLen>=v&&S.length&&S[0].from==0&&S[0].to>=v}static get(){return currentContext}}function cutFragments(_,v,S){return TreeFragment.applyChanges(_,[{fromA:v,toA:S,fromB:v,toB:S}])}class LanguageState{constructor(v){this.context=v,this.tree=v.tree}apply(v){if(!v.docChanged&&this.tree==this.context.tree)return this;let S=this.context.changes(v.changes,v.state),R=this.context.treeLen==v.startState.doc.length?void 0:Math.max(v.changes.mapPos(this.context.treeLen),S.viewport.to);return S.work(20,R)||S.takeTree(),new LanguageState(S)}static init(v){let S=Math.min(3e3,v.doc.length),R=ParseContext.create(v.facet(language).parser,v,{from:0,to:S});return R.work(20,S)||R.takeTree(),new LanguageState(R)}}Language.state=StateField.define({create:LanguageState.init,update(_,v){for(let S of v.effects)if(S.is(Language.setState))return S.value;return v.startState.facet(language)!=v.state.facet(language)?LanguageState.init(v.state):_.apply(v)}});let requestIdle=_=>{let v=setTimeout(()=>_(),500);return()=>clearTimeout(v)};typeof requestIdleCallback<"u"&&(requestIdle=_=>{let v=-1,S=setTimeout(()=>{v=requestIdleCallback(_,{timeout:400})},100);return()=>v<0?clearTimeout(S):cancelIdleCallback(v)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(v){this.view=v,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(v){let S=this.view.state.field(Language.state).context;(S.updateViewport(v.view.viewport)||this.view.viewport.to>S.treeLen)&&this.scheduleWork(),(v.docChanged||v.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(S)}scheduleWork(){if(this.working)return;let{state:v}=this.view,S=v.field(Language.state);(S.tree!=S.context.tree||!S.context.isDone(v.doc.length))&&(this.working=requestIdle(this.work))}work(v){this.working=null;let S=Date.now();if(this.chunkEnd<S&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=S+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:R,viewport:{to:T}}=this.view,A=R.field(Language.state);if(A.tree==A.context.tree&&A.context.isDone(T+1e5))return;let k=Date.now()+Math.min(this.chunkBudget,100,v&&!isInputPending?Math.max(25,v.timeRemaining()-5):1e9),M=A.context.treeLen<T&&R.doc.length>T+1e3,N=A.context.work(()=>isInputPending&&isInputPending()||Date.now()>k,T+(M?0:1e5));this.chunkBudget-=Date.now()-S,(N||this.chunkBudget<=0)&&(A.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(A.context))})),this.chunkBudget>0&&!(N&&!M)&&this.scheduleWork(),this.checkAsyncSchedule(A.context)}checkAsyncSchedule(v){v.scheduleOn&&(this.workScheduled++,v.scheduleOn.then(()=>this.scheduleWork()).catch(S=>logException(this.view.state,S)).then(()=>this.workScheduled--),v.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(_){return _.length?_[0]:null},enables:_=>[Language.state,parseWorker,EditorView.contentAttributes.compute([_],v=>{let S=v.facet(_);return S&&S.name?{"data-language":S.name}:{}})]}),indentService=Facet.define(),indentUnit=Facet.define({combine:_=>{if(!_.length)return"  ";let v=_[0];if(!v||/\S/.test(v)||Array.from(v).some(S=>S!=v[0]))throw new Error("Invalid indent unit: "+JSON.stringify(_[0]));return v}});function getIndentUnit(_){let v=_.facet(indentUnit);return v.charCodeAt(0)==9?_.tabSize*v.length:v.length}function indentString(_,v){let S="",R=_.tabSize,T=_.facet(indentUnit)[0];if(T=="	"){for(;v>=R;)S+="	",v-=R;T=" "}for(let A=0;A<v;A++)S+=T;return S}function getIndentation(_,v){_ instanceof EditorState&&(_=new IndentContext(_));for(let R of _.state.facet(indentService)){let T=R(_,v);if(T!==void 0)return T}let S=syntaxTree(_.state);return S.length>=v?syntaxIndentation(_,S,v):null}class IndentContext{constructor(v,S={}){this.state=v,this.options=S,this.unit=getIndentUnit(v)}lineAt(v,S=1){let R=this.state.doc.lineAt(v),{simulateBreak:T,simulateDoubleBreak:A}=this.options;return T!=null&&T>=R.from&&T<=R.to?A&&T==v?{text:"",from:v}:(S<0?T<v:T<=v)?{text:R.text.slice(T-R.from),from:T}:{text:R.text.slice(0,T-R.from),from:R.from}:R}textAfterPos(v,S=1){if(this.options.simulateDoubleBreak&&v==this.options.simulateBreak)return"";let{text:R,from:T}=this.lineAt(v,S);return R.slice(v-T,Math.min(R.length,v+100-T))}column(v,S=1){let{text:R,from:T}=this.lineAt(v,S),A=this.countColumn(R,v-T),k=this.options.overrideIndentation?this.options.overrideIndentation(T):-1;return k>-1&&(A+=k-this.countColumn(R,R.search(/\S|$/))),A}countColumn(v,S=v.length){return countColumn(v,this.state.tabSize,S)}lineIndent(v,S=1){let{text:R,from:T}=this.lineAt(v,S),A=this.options.overrideIndentation;if(A){let k=A(T);if(k>-1)return k}return this.countColumn(R,R.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(_,v,S){let R=v.resolveStack(S),T=v.resolveInner(S,-1).resolve(S,0).enterUnfinishedNodesBefore(S);if(T!=R.node){let A=[];for(let k=T;k&&!(k.from<R.node.from||k.to>R.node.to||k.from==R.node.from&&k.type==R.node.type);k=k.parent)A.push(k);for(let k=A.length-1;k>=0;k--)R={node:A[k],next:R}}return indentFor(R,_,S)}function indentFor(_,v,S){for(let R=_;R;R=R.next){let T=indentStrategy(R.node);if(T)return T(TreeIndentContext.create(v,S,R))}return 0}function ignoreClosed(_){return _.pos==_.options.simulateBreak&&_.options.simulateDoubleBreak}function indentStrategy(_){let v=_.type.prop(indentNodeProp);if(v)return v;let S=_.firstChild,R;if(S&&(R=S.type.prop(NodeProp.closedBy))){let T=_.lastChild,A=T&&R.indexOf(T.name)>-1;return k=>delimitedStrategy(k,!0,1,void 0,A&&!ignoreClosed(k)?T.from:void 0)}return _.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(v,S,R){super(v.state,v.options),this.base=v,this.pos=S,this.context=R}get node(){return this.context.node}static create(v,S,R){return new TreeIndentContext(v,S,R)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(v){let S=this.state.doc.lineAt(v.from);for(;;){let R=v.resolve(S.from);for(;R.parent&&R.parent.from==R.from;)R=R.parent;if(isParent(R,v))break;S=this.state.doc.lineAt(R.from)}return this.lineIndent(S.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(_,v){for(let S=v;S;S=S.parent)if(_==S)return!0;return!1}function bracketedAligned(_){let v=_.node,S=v.childAfter(v.from),R=v.lastChild;if(!S)return null;let T=_.options.simulateBreak,A=_.state.doc.lineAt(S.from),k=T==null||T<=A.from?A.to:Math.min(A.to,T);for(let M=S.to;;){let N=v.childAfter(M);if(!N||N==R)return null;if(!N.type.isSkipped){if(N.from>=k)return null;let D=/^ */.exec(A.text.slice(S.to-A.from))[0].length;return{from:S.from,to:S.to+D}}M=N.to}}function delimitedStrategy(_,v,S,R,T){let A=_.textAfter,k=A.match(/^\s*/)[0].length,M=R&&A.slice(k,k+R.length)==R||T==_.pos+k,N=bracketedAligned(_);return N?M?_.column(N.from):_.column(N.to):_.baseIndent+(M?0:_.unit*S)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(_=>{if(!_.docChanged||!_.isUserEvent("input.type")&&!_.isUserEvent("input.complete"))return _;let v=_.startState.languageDataAt("indentOnInput",_.startState.selection.main.head);if(!v.length)return _;let S=_.newDoc,{head:R}=_.newSelection.main,T=S.lineAt(R);if(R>T.from+DontIndentBeyond)return _;let A=S.sliceString(T.from,R);if(!v.some(D=>D.test(A)))return _;let{state:k}=_,M=-1,N=[];for(let{head:D}of k.selection.ranges){let I=k.doc.lineAt(D);if(I.from==M)continue;M=I.from;let q=getIndentation(k,I.from);if(q==null)continue;let B=/^\s*/.exec(I.text)[0],z=indentString(k,q);B!=z&&N.push({from:I.from,to:I.from+B.length,insert:z})}return N.length?[_,{changes:N,sequential:!0}]:_})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function syntaxFolding(_,v,S){let R=syntaxTree(_);if(R.length<S)return null;let T=R.resolveStack(S,1),A=null;for(let k=T;k;k=k.next){let M=k.node;if(M.to<=S||M.from>S)continue;if(A&&M.from<v)break;let N=M.type.prop(foldNodeProp);if(N&&(M.to<R.length-50||R.length==_.doc.length||!isUnfinished(M))){let D=N(M,_);D&&D.from<=S&&D.from>=v&&D.to>S&&(A=D)}}return A}function isUnfinished(_){let v=_.lastChild;return v&&v.to==_.to&&v.type.isError}function foldable(_,v,S){for(let R of _.facet(foldService)){let T=R(_,v,S);if(T)return T}return syntaxFolding(_,v,S)}function mapRange(_,v){let S=v.mapPos(_.from,1),R=v.mapPos(_.to,-1);return S>=R?void 0:{from:S,to:R}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(_){let v=[];for(let{head:S}of _.state.selection.ranges)v.some(R=>R.from<=S&&R.to>=S)||v.push(_.lineBlockAt(S));return v}const foldState=StateField.define({create(){return Decoration.none},update(_,v){v.isUserEvent("delete")&&v.changes.iterChangedRanges((S,R)=>_=clearTouchedFolds(_,S,R)),_=_.map(v.changes);for(let S of v.effects)if(S.is(foldEffect)&&!foldExists(_,S.value.from,S.value.to)){let{preparePlaceholder:R}=v.state.facet(foldConfig),T=R?Decoration.replace({widget:new PreparedFoldWidget(R(v.state,S.value))}):foldWidget;_=_.update({add:[T.range(S.value.from,S.value.to)]})}else S.is(unfoldEffect)&&(_=_.update({filter:(R,T)=>S.value.from!=R||S.value.to!=T,filterFrom:S.value.from,filterTo:S.value.to}));return v.selection&&(_=clearTouchedFolds(_,v.selection.main.head)),_},provide:_=>EditorView.decorations.from(_),toJSON(_,v){let S=[];return _.between(0,v.doc.length,(R,T)=>{S.push(R,T)}),S},fromJSON(_){if(!Array.isArray(_)||_.length%2)throw new RangeError("Invalid JSON for fold state");let v=[];for(let S=0;S<_.length;){let R=_[S++],T=_[S++];if(typeof R!="number"||typeof T!="number")throw new RangeError("Invalid JSON for fold state");v.push(foldWidget.range(R,T))}return Decoration.set(v,!0)}});function clearTouchedFolds(_,v,S=v){let R=!1;return _.between(v,S,(T,A)=>{T<S&&A>v&&(R=!0)}),R?_.update({filterFrom:v,filterTo:S,filter:(T,A)=>T>=S||A<=v}):_}function findFold(_,v,S){var R;let T=null;return(R=_.field(foldState,!1))===null||R===void 0||R.between(v,S,(A,k)=>{(!T||T.from>A)&&(T={from:A,to:k})}),T}function foldExists(_,v,S){let R=!1;return _.between(v,v,(T,A)=>{T==v&&A==S&&(R=!0)}),R}function maybeEnable(_,v){return _.field(foldState,!1)?v:v.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=_=>{for(let v of selectedLines(_)){let S=foldable(_.state,v.from,v.to);if(S)return _.dispatch({effects:maybeEnable(_.state,[foldEffect.of(S),announceFold(_,S)])}),!0}return!1},unfoldCode=_=>{if(!_.state.field(foldState,!1))return!1;let v=[];for(let S of selectedLines(_)){let R=findFold(_.state,S.from,S.to);R&&v.push(unfoldEffect.of(R),announceFold(_,R,!1))}return v.length&&_.dispatch({effects:v}),v.length>0};function announceFold(_,v,S=!0){let R=_.state.doc.lineAt(v.from).number,T=_.state.doc.lineAt(v.to).number;return EditorView.announce.of(`${_.state.phrase(S?"Folded lines":"Unfolded lines")} ${R} ${_.state.phrase("to")} ${T}.`)}const foldAll=_=>{let{state:v}=_,S=[];for(let R=0;R<v.doc.length;){let T=_.lineBlockAt(R),A=foldable(v,T.from,T.to);A&&S.push(foldEffect.of(A)),R=(A?_.lineBlockAt(A.to):T).to+1}return S.length&&_.dispatch({effects:maybeEnable(_.state,S)}),!!S.length},unfoldAll=_=>{let v=_.state.field(foldState,!1);if(!v||!v.size)return!1;let S=[];return v.between(0,_.state.doc.length,(R,T)=>{S.push(unfoldEffect.of({from:R,to:T}))}),_.dispatch({effects:S}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(_){return combineConfig(_,defaultConfig)}});function codeFolding(_){return[foldState,baseTheme$1$2]}function widgetToDOM(_,v){let{state:S}=_,R=S.facet(foldConfig),T=k=>{let M=_.lineBlockAt(_.posAtDOM(k.target)),N=findFold(_.state,M.from,M.to);N&&_.dispatch({effects:unfoldEffect.of(N)}),k.preventDefault()};if(R.placeholderDOM)return R.placeholderDOM(_,T,v);let A=document.createElement("span");return A.textContent=R.placeholderText,A.setAttribute("aria-label",S.phrase("folded code")),A.title=S.phrase("unfold"),A.className="cm-foldPlaceholder",A.onclick=T,A}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(_){return widgetToDOM(_,null)}}});class PreparedFoldWidget extends WidgetType{constructor(v){super(),this.value=v}eq(v){return this.value==v.value}toDOM(v){return widgetToDOM(v,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(v,S){super(),this.config=v,this.open=S}eq(v){return this.config==v.config&&this.open==v.open}toDOM(v){if(this.config.markerDOM)return this.config.markerDOM(this.open);let S=document.createElement("span");return S.textContent=this.open?this.config.openText:this.config.closedText,S.title=v.state.phrase(this.open?"Fold line":"Unfold line"),S}}function foldGutter(_={}){let v={...foldGutterDefaults,..._},S=new FoldMarker(v,!0),R=new FoldMarker(v,!1),T=ViewPlugin.fromClass(class{constructor(k){this.from=k.viewport.from,this.markers=this.buildMarkers(k)}update(k){(k.docChanged||k.viewportChanged||k.startState.facet(language)!=k.state.facet(language)||k.startState.field(foldState,!1)!=k.state.field(foldState,!1)||syntaxTree(k.startState)!=syntaxTree(k.state)||v.foldingChanged(k))&&(this.markers=this.buildMarkers(k.view))}buildMarkers(k){let M=new RangeSetBuilder;for(let N of k.viewportLineBlocks){let D=findFold(k.state,N.from,N.to)?R:foldable(k.state,N.from,N.to)?S:null;D&&M.add(N.from,N.from,D)}return M.finish()}}),{domEventHandlers:A}=v;return[T,gutter({class:"cm-foldGutter",markers(k){var M;return((M=k.plugin(T))===null||M===void 0?void 0:M.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(v,!1)},domEventHandlers:{...A,click:(k,M,N)=>{if(A.click&&A.click(k,M,N))return!0;let D=findFold(k.state,M.from,M.to);if(D)return k.dispatch({effects:unfoldEffect.of(D)}),!0;let I=foldable(k.state,M.from,M.to);return I?(k.dispatch({effects:foldEffect.of(I)}),!0):!1}}}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(v,S){this.specs=v;let R;function T(M){let N=StyleModule.newName();return(R||(R=Object.create(null)))["."+N]=M,N}const A=typeof S.all=="string"?S.all:S.all?T(S.all):void 0,k=S.scope;this.scope=k instanceof Language?M=>M.prop(languageDataProp)==k.data:k?M=>M==k:void 0,this.style=tagHighlighter(v.map(M=>({tag:M.tag,class:M.class||T(Object.assign({},M,{tag:null}))})),{all:A}).style,this.module=R?new StyleModule(R):null,this.themeType=S.themeType}static define(v,S){return new HighlightStyle(v,S||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(_){return _.length?[_[0]]:null}});function getHighlighters(_){let v=_.facet(highlighterFacet);return v.length?v:_.facet(fallbackHighlighter)}function syntaxHighlighting(_,v){let S=[treeHighlighter],R;return _ instanceof HighlightStyle&&(_.module&&S.push(EditorView.styleModule.of(_.module)),R=_.themeType),v?.fallback?S.push(fallbackHighlighter.of(_)):R?S.push(highlighterFacet.computeN([EditorView.darkTheme],T=>T.facet(EditorView.darkTheme)==(R=="dark")?[_]:[])):S.push(highlighterFacet.of(_)),S}class TreeHighlighter{constructor(v){this.markCache=Object.create(null),this.tree=syntaxTree(v.state),this.decorations=this.buildDeco(v,getHighlighters(v.state)),this.decoratedTo=v.viewport.to}update(v){let S=syntaxTree(v.state),R=getHighlighters(v.state),T=R!=getHighlighters(v.startState),{viewport:A}=v.view,k=v.changes.mapPos(this.decoratedTo,1);S.length<A.to&&!T&&S.type==this.tree.type&&k>=A.to?(this.decorations=this.decorations.map(v.changes),this.decoratedTo=k):(S!=this.tree||v.viewportChanged||T)&&(this.tree=S,this.decorations=this.buildDeco(v.view,R),this.decoratedTo=A.to)}buildDeco(v,S){if(!S||!this.tree.length)return Decoration.none;let R=new RangeSetBuilder;for(let{from:T,to:A}of v.visibleRanges)highlightTree(this.tree,S,(k,M,N)=>{R.add(k,M,this.markCache[N]||(this.markCache[N]=Decoration.mark({class:N})))},T,A);return R.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:_=>_.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(_){return combineConfig(_,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(_){let v=[],S=_.matched?matchingMark:nonmatchingMark;return v.push(S.range(_.start.from,_.start.to)),_.end&&v.push(S.range(_.end.from,_.end.to)),v}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(_,v){if(!v.docChanged&&!v.selection)return _;let S=[],R=v.state.facet(bracketMatchingConfig);for(let T of v.state.selection.ranges){if(!T.empty)continue;let A=matchBrackets(v.state,T.head,-1,R)||T.head>0&&matchBrackets(v.state,T.head-1,1,R)||R.afterCursor&&(matchBrackets(v.state,T.head,1,R)||T.head<v.state.doc.length&&matchBrackets(v.state,T.head+1,-1,R));A&&(S=S.concat(R.renderMatch(A,v.state)))}return Decoration.set(S,!0)},provide:_=>EditorView.decorations.from(_)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(_={}){return[bracketMatchingConfig.of(_),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(_,v,S){let R=_.prop(v<0?NodeProp.openedBy:NodeProp.closedBy);if(R)return R;if(_.name.length==1){let T=S.indexOf(_.name);if(T>-1&&T%2==(v<0?1:0))return[S[T+v]]}return null}function findHandle(_){let v=_.type.prop(bracketMatchingHandle);return v?v(_.node):_}function matchBrackets(_,v,S,R={}){let T=R.maxScanDistance||DefaultScanDist,A=R.brackets||DefaultBrackets,k=syntaxTree(_),M=k.resolveInner(v,S);for(let N=M;N;N=N.parent){let D=matchingNodes(N.type,S,A);if(D&&N.from<N.to){let I=findHandle(N);if(I&&(S>0?v>=I.from&&v<I.to:v>I.from&&v<=I.to))return matchMarkedBrackets(_,v,S,N,I,D,A)}}return matchPlainBrackets(_,v,S,k,M.type,T,A)}function matchMarkedBrackets(_,v,S,R,T,A,k){let M=R.parent,N={from:T.from,to:T.to},D=0,I=M?.cursor();if(I&&(S<0?I.childBefore(R.from):I.childAfter(R.to)))do if(S<0?I.to<=R.from:I.from>=R.to){if(D==0&&A.indexOf(I.type.name)>-1&&I.from<I.to){let q=findHandle(I);return{start:N,end:q?{from:q.from,to:q.to}:void 0,matched:!0}}else if(matchingNodes(I.type,S,k))D++;else if(matchingNodes(I.type,-S,k)){if(D==0){let q=findHandle(I);return{start:N,end:q&&q.from<q.to?{from:q.from,to:q.to}:void 0,matched:!1}}D--}}while(S<0?I.prevSibling():I.nextSibling());return{start:N,matched:!1}}function matchPlainBrackets(_,v,S,R,T,A,k){let M=S<0?_.sliceDoc(v-1,v):_.sliceDoc(v,v+1),N=k.indexOf(M);if(N<0||N%2==0!=S>0)return null;let D={from:S<0?v-1:v,to:S>0?v+1:v},I=_.doc.iterRange(v,S>0?_.doc.length:0),q=0;for(let B=0;!I.next().done&&B<=A;){let z=I.value;S<0&&(B+=z.length);let F=v+B*S;for(let V=S>0?0:z.length-1,H=S>0?z.length:-1;V!=H;V+=S){let W=k.indexOf(z[V]);if(!(W<0||R.resolveInner(F+V,1).type!=T))if(W%2==0==S>0)q++;else{if(q==1)return{start:D,end:{from:F+V,to:F+V+1},matched:W>>1==N>>1};q--}}S>0&&(B+=z.length)}return I.done?{start:D,matched:!1}:null}function countCol(_,v,S,R=0,T=0){v==null&&(v=_.search(/[^\s\u00a0]/),v==-1&&(v=_.length));let A=T;for(let k=R;k<v;k++)_.charCodeAt(k)==9?A+=S-A%S:A++;return A}class StringStream{constructor(v,S,R,T){this.string=v,this.tabSize=S,this.indentUnit=R,this.overrideIndent=T,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(v){let S=this.string.charAt(this.pos),R;if(typeof v=="string"?R=S==v:R=S&&(v instanceof RegExp?v.test(S):v(S)),R)return++this.pos,S}eatWhile(v){let S=this.pos;for(;this.eat(v););return this.pos>S}eatSpace(){let v=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>v}skipToEnd(){this.pos=this.string.length}skipTo(v){let S=this.string.indexOf(v,this.pos);if(S>-1)return this.pos=S,!0}backUp(v){this.pos-=v}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var v;return(v=this.overrideIndent)!==null&&v!==void 0?v:countCol(this.string,null,this.tabSize)}match(v,S,R){if(typeof v=="string"){let T=k=>R?k.toLowerCase():k,A=this.string.substr(this.pos,v.length);return T(A)==T(v)?(S!==!1&&(this.pos+=v.length),!0):null}else{let T=this.string.slice(this.pos).match(v);return T&&T.index>0?null:(T&&S!==!1&&(this.pos+=T[0].length),T)}}current(){return this.string.slice(this.start,this.pos)}}function fullParser(_){return{name:_.name||"",token:_.token,blankLine:_.blankLine||(()=>{}),startState:_.startState||(()=>!0),copyState:_.copyState||defaultCopyState,indent:_.indent||(()=>null),languageData:_.languageData||{},tokenTable:_.tokenTable||noTokens,mergeTokens:_.mergeTokens!==!1}}function defaultCopyState(_){if(typeof _!="object")return _;let v={};for(let S in _){let R=_[S];v[S]=R instanceof Array?R.slice():R}return v}const IndentedFrom=new WeakMap;class StreamLanguage extends Language{constructor(v){let S=defineLanguageFacet(v.languageData),R=fullParser(v),T,A=new class extends Parser{createParse(k,M,N){return new Parse(T,k,M,N)}};super(S,A,[],v.name),this.topNode=docID(S,this),T=this,this.streamParser=R,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=v.tokenTable?new TokenTable(R.tokenTable):defaultTokenTable}static define(v){return new StreamLanguage(v)}getIndent(v){let S,{overrideIndentation:R}=v.options;R&&(S=IndentedFrom.get(v.state),S!=null&&S<v.pos-1e4&&(S=void 0));let T=findState(this,v.node.tree,v.node.from,v.node.from,S??v.pos),A,k;if(T?(k=T.state,A=T.pos+1):(k=this.streamParser.startState(v.unit),A=v.node.from),v.pos-A>1e4)return null;for(;A<v.pos;){let N=v.state.doc.lineAt(A),D=Math.min(v.pos,N.to);if(N.length){let I=R?R(N.from):-1,q=new StringStream(N.text,v.state.tabSize,v.unit,I<0?void 0:I);for(;q.pos<D-N.from;)readToken(this.streamParser.token,q,k)}else this.streamParser.blankLine(k,v.unit);if(D==v.pos)break;A=N.to+1}let M=v.lineAt(v.pos);return R&&S==null&&IndentedFrom.set(v.state,M.from),this.streamParser.indent(k,/^\s*(.*)/.exec(M.text)[1],v)}get allowsNesting(){return!1}}function findState(_,v,S,R,T){let A=S>=R&&S+v.length<=T&&v.prop(_.stateAfter);if(A)return{state:_.streamParser.copyState(A),pos:S+v.length};for(let k=v.children.length-1;k>=0;k--){let M=v.children[k],N=S+v.positions[k],D=M instanceof Tree&&N<T&&findState(_,M,N,R,T);if(D)return D}return null}function cutTree(_,v,S,R,T){if(T&&S<=0&&R>=v.length)return v;!T&&S==0&&v.type==_.topNode&&(T=!0);for(let A=v.children.length-1;A>=0;A--){let k=v.positions[A],M=v.children[A],N;if(k<R&&M instanceof Tree){if(!(N=cutTree(_,M,S-k,R-k,T)))break;return T?new Tree(v.type,v.children.slice(0,A).concat(N),v.positions.slice(0,A+1),k+N.length):N}}return null}function findStartInFragments(_,v,S,R,T){for(let A of v){let k=A.from+(A.openStart?25:0),M=A.to-(A.openEnd?25:0),N=k<=S&&M>S&&findState(_,A.tree,0-A.offset,S,M),D;if(N&&N.pos<=R&&(D=cutTree(_,A.tree,S+A.offset,N.pos+A.offset,!1)))return{state:N.state,tree:D}}return{state:_.streamParser.startState(T?getIndentUnit(T):4),tree:Tree.empty}}class Parse{constructor(v,S,R,T){this.lang=v,this.input=S,this.fragments=R,this.ranges=T,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=T[T.length-1].to;let A=ParseContext.get(),k=T[0].from,{state:M,tree:N}=findStartInFragments(v,R,k,this.to,A?.state);this.state=M,this.parsedPos=this.chunkStart=k+N.length;for(let D=0;D<N.children.length;D++)this.chunks.push(N.children[D]),this.chunkPos.push(N.positions[D]);A&&this.parsedPos<A.viewport.from-1e5&&T.some(D=>D.from<=A.viewport.from&&D.to>=A.viewport.from)&&(this.state=this.lang.streamParser.startState(getIndentUnit(A.state)),A.skipUntilInView(this.parsedPos,A.viewport.from),this.parsedPos=A.viewport.from),this.moveRangeIndex()}advance(){let v=ParseContext.get(),S=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),R=Math.min(S,this.chunkStart+512);for(v&&(R=Math.min(R,v.viewport.to));this.parsedPos<R;)this.parseLine(v);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=S?this.finish():v&&this.parsedPos>=v.viewport.to?(v.skipUntilInView(this.parsedPos,S),this.finish()):null}stopAt(v){this.stoppedAt=v}lineAfter(v){let S=this.input.chunk(v);if(this.input.lineChunks)S==`
`&&(S="");else{let R=S.indexOf(`
`);R>-1&&(S=S.slice(0,R))}return v+S.length<=this.to?S:S.slice(0,this.to-v)}nextLine(){let v=this.parsedPos,S=this.lineAfter(v),R=v+S.length;for(let T=this.rangeIndex;;){let A=this.ranges[T].to;if(A>=R||(S=S.slice(0,A-(R-S.length)),T++,T==this.ranges.length))break;let k=this.ranges[T].from,M=this.lineAfter(k);S+=M,R=k+M.length}return{line:S,end:R}}skipGapsTo(v,S,R){for(;;){let T=this.ranges[this.rangeIndex].to,A=v+S;if(R>0?T>A:T>=A)break;let k=this.ranges[++this.rangeIndex].from;S+=k-T}return S}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(v,S,R,T){let A=4;if(this.ranges.length>1){T=this.skipGapsTo(S,T,1),S+=T;let M=this.chunk.length;T=this.skipGapsTo(R,T,-1),R+=T,A+=this.chunk.length-M}let k=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&A==4&&k>=0&&this.chunk[k]==v&&this.chunk[k+2]==S?this.chunk[k+2]=R:this.chunk.push(v,S,R,A),T}parseLine(v){let{line:S,end:R}=this.nextLine(),T=0,{streamParser:A}=this.lang,k=new StringStream(S,v?v.state.tabSize:4,v?getIndentUnit(v.state):2);if(k.eol())A.blankLine(this.state,k.indentUnit);else for(;!k.eol();){let M=readToken(A.token,k,this.state);if(M&&(T=this.emitToken(this.lang.tokenTable.resolve(M),this.parsedPos+k.start,this.parsedPos+k.pos,T)),k.start>1e4)break}this.parsedPos=R,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let v=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet,topID:0,maxBufferLength:512,reused:this.chunkReused});v=new Tree(v.type,v.children,v.positions,v.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(v),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function readToken(_,v,S){v.start=v.pos;for(let R=0;R<10;R++){let T=_(v,S);if(v.pos>v.start)return T}throw new Error("Stream parser failed to advance stream.")}const noTokens=Object.create(null),typeArray=[NodeType.none],nodeSet=new NodeSet(typeArray),warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[_,v]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[_]=createTokenType(noTokens,v);class TokenTable{constructor(v){this.extra=v,this.table=Object.assign(Object.create(null),defaultTable)}resolve(v){return v?this.table[v]||(this.table[v]=createTokenType(this.extra,v)):0}}const defaultTokenTable=new TokenTable(noTokens);function warnForPart(_,v){warned.indexOf(_)>-1||(warned.push(_),console.warn(v))}function createTokenType(_,v){let S=[];for(let M of v.split(" ")){let N=[];for(let D of M.split(".")){let I=_[D]||tags[D];I?typeof I=="function"?N.length?N=N.map(I):warnForPart(D,`Modifier ${D} used at start of tag`):N.length?warnForPart(D,`Tag ${D} used as modifier`):N=Array.isArray(I)?I:[I]:warnForPart(D,`Unknown highlighting tag ${D}`)}for(let D of N)S.push(D)}if(!S.length)return 0;let R=v.replace(/ /g,"_"),T=R+" "+S.map(M=>M.id),A=byTag[T];if(A)return A.id;let k=byTag[T]=NodeType.define({id:typeArray.length,name:R,props:[styleTags({[R]:S})]});return typeArray.push(k),k.id}function docID(_,v){let S=NodeType.define({id:typeArray.length,name:"Document",props:[languageDataProp.add(()=>_),indentNodeProp.add(()=>R=>v.getIndent(R))],top:!0});return typeArray.push(S),S}Direction.RTL,Direction.LTR;const toggleComment=_=>{let{state:v}=_,S=v.doc.lineAt(v.selection.main.from),R=getConfig(_.state,S.from);return R.line?toggleLineComment(_):R.block?toggleBlockCommentByLine(_):!1};function command(_,v){return({state:S,dispatch:R})=>{if(S.readOnly)return!1;let T=_(v,S);return T?(R(S.update(T)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((_,v)=>changeBlockComment(_,v,selectedLineRanges(v)),0);function getConfig(_,v){let S=_.languageDataAt("commentTokens",v,1);return S.length?S[0]:{}}const SearchMargin=50;function findBlockComment(_,{open:v,close:S},R,T){let A=_.sliceDoc(R-SearchMargin,R),k=_.sliceDoc(T,T+SearchMargin),M=/\s*$/.exec(A)[0].length,N=/^\s*/.exec(k)[0].length,D=A.length-M;if(A.slice(D-v.length,D)==v&&k.slice(N,N+S.length)==S)return{open:{pos:R-M,margin:M&&1},close:{pos:T+N,margin:N&&1}};let I,q;T-R<=2*SearchMargin?I=q=_.sliceDoc(R,T):(I=_.sliceDoc(R,R+SearchMargin),q=_.sliceDoc(T-SearchMargin,T));let B=/^\s*/.exec(I)[0].length,z=/\s*$/.exec(q)[0].length,F=q.length-z-S.length;return I.slice(B,B+v.length)==v&&q.slice(F,F+S.length)==S?{open:{pos:R+B+v.length,margin:/\s/.test(I.charAt(B+v.length))?1:0},close:{pos:T-z-S.length,margin:/\s/.test(q.charAt(F-1))?1:0}}:null}function selectedLineRanges(_){let v=[];for(let S of _.selection.ranges){let R=_.doc.lineAt(S.from),T=S.to<=R.to?R:_.doc.lineAt(S.to);T.from>R.from&&T.from==S.to&&(T=S.to==R.to+1?R:_.doc.lineAt(S.to-1));let A=v.length-1;A>=0&&v[A].to>R.from?v[A].to=T.to:v.push({from:R.from+/^\s*/.exec(R.text)[0].length,to:T.to})}return v}function changeBlockComment(_,v,S=v.selection.ranges){let R=S.map(A=>getConfig(v,A.from).block);if(!R.every(A=>A))return null;let T=S.map((A,k)=>findBlockComment(v,R[k],A.from,A.to));if(_!=2&&!T.every(A=>A))return{changes:v.changes(S.map((A,k)=>T[k]?[]:[{from:A.from,insert:R[k].open+" "},{from:A.to,insert:" "+R[k].close}]))};if(_!=1&&T.some(A=>A)){let A=[];for(let k=0,M;k<T.length;k++)if(M=T[k]){let N=R[k],{open:D,close:I}=M;A.push({from:D.pos-N.open.length,to:D.pos+D.margin},{from:I.pos-I.margin,to:I.pos+N.close.length})}return{changes:A}}return null}function changeLineComment(_,v,S=v.selection.ranges){let R=[],T=-1;for(let{from:A,to:k}of S){let M=R.length,N=1e9,D=getConfig(v,A).line;if(D){for(let I=A;I<=k;){let q=v.doc.lineAt(I);if(q.from>T&&(A==k||k>q.from)){T=q.from;let B=/^\s*/.exec(q.text)[0].length,z=B==q.length,F=q.text.slice(B,B+D.length)==D?B:-1;B<q.text.length&&B<N&&(N=B),R.push({line:q,comment:F,token:D,indent:B,empty:z,single:!1})}I=q.to+1}if(N<1e9)for(let I=M;I<R.length;I++)R[I].indent<R[I].line.text.length&&(R[I].indent=N);R.length==M+1&&(R[M].single=!0)}}if(_!=2&&R.some(A=>A.comment<0&&(!A.empty||A.single))){let A=[];for(let{line:M,token:N,indent:D,empty:I,single:q}of R)(q||!I)&&A.push({from:M.from+D,insert:N+" "});let k=v.changes(A);return{changes:k,selection:v.selection.map(k,1)}}else if(_!=1&&R.some(A=>A.comment>=0)){let A=[];for(let{line:k,comment:M,token:N}of R)if(M>=0){let D=k.from+M,I=D+N.length;k.text[I-k.from]==" "&&I++,A.push({from:D,to:I})}return{changes:A}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(_){return combineConfig(_,{minDepth:100,newGroupDelay:500,joinToEvent:(v,S)=>S},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(v,S)=>(R,T)=>v(R,T)||S(R,T)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(_,v){let S=v.state.facet(historyConfig),R=v.annotation(fromHistory);if(R){let N=HistEvent.fromTransaction(v,R.selection),D=R.side,I=D==0?_.undone:_.done;return N?I=updateBranch(I,I.length,S.minDepth,N):I=addSelection(I,v.startState.selection),new HistoryState(D==0?R.rest:I,D==0?I:R.rest)}let T=v.annotation(isolateHistory);if((T=="full"||T=="before")&&(_=_.isolate()),v.annotation(Transaction.addToHistory)===!1)return v.changes.empty?_:_.addMapping(v.changes.desc);let A=HistEvent.fromTransaction(v),k=v.annotation(Transaction.time),M=v.annotation(Transaction.userEvent);return A?_=_.addChanges(A,k,M,S,v):v.selection&&(_=_.addSelection(v.startState.selection,k,M,S.newGroupDelay)),(T=="full"||T=="after")&&(_=_.isolate()),_},toJSON(_){return{done:_.done.map(v=>v.toJSON()),undone:_.undone.map(v=>v.toJSON())}},fromJSON(_){return new HistoryState(_.done.map(HistEvent.fromJSON),_.undone.map(HistEvent.fromJSON))}});function history(_={}){return[historyField_,historyConfig.of(_),EditorView.domEventHandlers({beforeinput(v,S){let R=v.inputType=="historyUndo"?undo:v.inputType=="historyRedo"?redo:null;return R?(v.preventDefault(),R(S)):!1}})]}function cmd(_,v){return function({state:S,dispatch:R}){if(!v&&S.readOnly)return!1;let T=S.field(historyField_,!1);if(!T)return!1;let A=T.pop(_,S,v);return A?(R(A),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(v,S,R,T,A){this.changes=v,this.effects=S,this.mapped=R,this.startSelection=T,this.selectionsAfter=A}setSelAfter(v){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,v)}toJSON(){var v,S,R;return{changes:(v=this.changes)===null||v===void 0?void 0:v.toJSON(),mapped:(S=this.mapped)===null||S===void 0?void 0:S.toJSON(),startSelection:(R=this.startSelection)===null||R===void 0?void 0:R.toJSON(),selectionsAfter:this.selectionsAfter.map(T=>T.toJSON())}}static fromJSON(v){return new HistEvent(v.changes&&ChangeSet.fromJSON(v.changes),[],v.mapped&&ChangeDesc.fromJSON(v.mapped),v.startSelection&&EditorSelection.fromJSON(v.startSelection),v.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(v,S){let R=none$1;for(let T of v.startState.facet(invertedEffects)){let A=T(v);A.length&&(R=R.concat(A))}return!R.length&&v.changes.empty?null:new HistEvent(v.changes.invert(v.startState.doc),R,void 0,S||v.startState.selection,none$1)}static selection(v){return new HistEvent(void 0,none$1,void 0,void 0,v)}}function updateBranch(_,v,S,R){let T=v+1>S+20?v-S-1:0,A=_.slice(T,v);return A.push(R),A}function isAdjacent(_,v){let S=[],R=!1;return _.iterChangedRanges((T,A)=>S.push(T,A)),v.iterChangedRanges((T,A,k,M)=>{for(let N=0;N<S.length;){let D=S[N++],I=S[N++];M>=D&&k<=I&&(R=!0)}}),R}function eqSelectionShape(_,v){return _.ranges.length==v.ranges.length&&_.ranges.filter((S,R)=>S.empty!=v.ranges[R].empty).length===0}function conc(_,v){return _.length?v.length?_.concat(v):_:v}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(_,v){if(_.length){let S=_[_.length-1],R=S.selectionsAfter.slice(Math.max(0,S.selectionsAfter.length-MaxSelectionsPerEvent));return R.length&&R[R.length-1].eq(v)?_:(R.push(v),updateBranch(_,_.length-1,1e9,S.setSelAfter(R)))}else return[HistEvent.selection([v])]}function popSelection(_){let v=_[_.length-1],S=_.slice();return S[_.length-1]=v.setSelAfter(v.selectionsAfter.slice(0,v.selectionsAfter.length-1)),S}function addMappingToBranch(_,v){if(!_.length)return _;let S=_.length,R=none$1;for(;S;){let T=mapEvent(_[S-1],v,R);if(T.changes&&!T.changes.empty||T.effects.length){let A=_.slice(0,S);return A[S-1]=T,A}else v=T.mapped,S--,R=T.selectionsAfter}return R.length?[HistEvent.selection(R)]:none$1}function mapEvent(_,v,S){let R=conc(_.selectionsAfter.length?_.selectionsAfter.map(M=>M.map(v)):none$1,S);if(!_.changes)return HistEvent.selection(R);let T=_.changes.map(v),A=v.mapDesc(_.changes,!0),k=_.mapped?_.mapped.composeDesc(A):A;return new HistEvent(T,StateEffect.mapEffects(_.effects,v),k,_.startSelection.map(A),R)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(v,S,R=0,T=void 0){this.done=v,this.undone=S,this.prevTime=R,this.prevUserEvent=T}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(v,S,R,T,A){let k=this.done,M=k[k.length-1];return M&&M.changes&&!M.changes.empty&&v.changes&&(!R||joinableUserEvent.test(R))&&(!M.selectionsAfter.length&&S-this.prevTime<T.newGroupDelay&&T.joinToEvent(A,isAdjacent(M.changes,v.changes))||R=="input.type.compose")?k=updateBranch(k,k.length-1,T.minDepth,new HistEvent(v.changes.compose(M.changes),conc(StateEffect.mapEffects(v.effects,M.changes),M.effects),M.mapped,M.startSelection,none$1)):k=updateBranch(k,k.length,T.minDepth,v),new HistoryState(k,none$1,S,R)}addSelection(v,S,R,T){let A=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return A.length>0&&S-this.prevTime<T&&R==this.prevUserEvent&&R&&/^select($|\.)/.test(R)&&eqSelectionShape(A[A.length-1],v)?this:new HistoryState(addSelection(this.done,v),this.undone,S,R)}addMapping(v){return new HistoryState(addMappingToBranch(this.done,v),addMappingToBranch(this.undone,v),this.prevTime,this.prevUserEvent)}pop(v,S,R){let T=v==0?this.done:this.undone;if(T.length==0)return null;let A=T[T.length-1],k=A.selectionsAfter[0]||S.selection;if(R&&A.selectionsAfter.length)return S.update({selection:A.selectionsAfter[A.selectionsAfter.length-1],annotations:fromHistory.of({side:v,rest:popSelection(T),selection:k}),userEvent:v==0?"select.undo":"select.redo",scrollIntoView:!0});if(A.changes){let M=T.length==1?none$1:T.slice(0,T.length-1);return A.mapped&&(M=addMappingToBranch(M,A.mapped)),S.update({changes:A.changes,selection:A.startSelection,effects:A.effects,annotations:fromHistory.of({side:v,rest:M,selection:k}),filter:!1,userEvent:v==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(_,v){return EditorSelection.create(_.ranges.map(v),_.mainIndex)}function setSel(_,v){return _.update({selection:v,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:_,dispatch:v},S){let R=updateSel(_.selection,S);return R.eq(_.selection,!0)?!1:(v(setSel(_,R)),!0)}function rangeEnd(_,v){return EditorSelection.cursor(v?_.to:_.from)}function cursorByChar(_,v){return moveSel(_,S=>S.empty?_.moveByChar(S,v):rangeEnd(S,v))}function ltrAtCursor(_){return _.textDirectionAt(_.state.selection.main.head)==Direction.LTR}const cursorCharLeft=_=>cursorByChar(_,!ltrAtCursor(_)),cursorCharRight=_=>cursorByChar(_,ltrAtCursor(_));function cursorByGroup(_,v){return moveSel(_,S=>S.empty?_.moveByGroup(S,v):rangeEnd(S,v))}const cursorGroupLeft=_=>cursorByGroup(_,!ltrAtCursor(_)),cursorGroupRight=_=>cursorByGroup(_,ltrAtCursor(_));function interestingNode(_,v,S){if(v.type.prop(S))return!0;let R=v.to-v.from;return R&&(R>2||/[^\s,.;:]/.test(_.sliceDoc(v.from,v.to)))||v.firstChild}function moveBySyntax(_,v,S){let R=syntaxTree(_).resolveInner(v.head),T=S?NodeProp.closedBy:NodeProp.openedBy;for(let N=v.head;;){let D=S?R.childAfter(N):R.childBefore(N);if(!D)break;interestingNode(_,D,T)?R=D:N=S?D.to:D.from}let A=R.type.prop(T),k,M;return A&&(k=S?matchBrackets(_,R.from,1):matchBrackets(_,R.to,-1))&&k.matched?M=S?k.end.to:k.end.from:M=S?R.to:R.from,EditorSelection.cursor(M,S?-1:1)}const cursorSyntaxLeft=_=>moveSel(_,v=>moveBySyntax(_.state,v,!ltrAtCursor(_))),cursorSyntaxRight=_=>moveSel(_,v=>moveBySyntax(_.state,v,ltrAtCursor(_)));function cursorByLine(_,v){return moveSel(_,S=>{if(!S.empty)return rangeEnd(S,v);let R=_.moveVertically(S,v);return R.head!=S.head?R:_.moveToLineBoundary(S,v)})}const cursorLineUp=_=>cursorByLine(_,!1),cursorLineDown=_=>cursorByLine(_,!0);function pageInfo(_){let v=_.scrollDOM.clientHeight<_.scrollDOM.scrollHeight-2,S=0,R=0,T;if(v){for(let A of _.state.facet(EditorView.scrollMargins)){let k=A(_);k?.top&&(S=Math.max(k?.top,S)),k?.bottom&&(R=Math.max(k?.bottom,R))}T=_.scrollDOM.clientHeight-S-R}else T=(_.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:S,marginBottom:R,selfScroll:v,height:Math.max(_.defaultLineHeight,T-5)}}function cursorByPage(_,v){let S=pageInfo(_),{state:R}=_,T=updateSel(R.selection,k=>k.empty?_.moveVertically(k,v,S.height):rangeEnd(k,v));if(T.eq(R.selection))return!1;let A;if(S.selfScroll){let k=_.coordsAtPos(R.selection.main.head),M=_.scrollDOM.getBoundingClientRect(),N=M.top+S.marginTop,D=M.bottom-S.marginBottom;k&&k.top>N&&k.bottom<D&&(A=EditorView.scrollIntoView(T.main.head,{y:"start",yMargin:k.top-N}))}return _.dispatch(setSel(R,T),{effects:A}),!0}const cursorPageUp=_=>cursorByPage(_,!1),cursorPageDown=_=>cursorByPage(_,!0);function moveByLineBoundary(_,v,S){let R=_.lineBlockAt(v.head),T=_.moveToLineBoundary(v,S);if(T.head==v.head&&T.head!=(S?R.to:R.from)&&(T=_.moveToLineBoundary(v,S,!1)),!S&&T.head==R.from&&R.length){let A=/^\s*/.exec(_.state.sliceDoc(R.from,Math.min(R.from+100,R.to)))[0].length;A&&v.head!=R.from+A&&(T=EditorSelection.cursor(R.from+A))}return T}const cursorLineBoundaryForward=_=>moveSel(_,v=>moveByLineBoundary(_,v,!0)),cursorLineBoundaryBackward=_=>moveSel(_,v=>moveByLineBoundary(_,v,!1)),cursorLineBoundaryLeft=_=>moveSel(_,v=>moveByLineBoundary(_,v,!ltrAtCursor(_))),cursorLineBoundaryRight=_=>moveSel(_,v=>moveByLineBoundary(_,v,ltrAtCursor(_))),cursorLineStart=_=>moveSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).from,1)),cursorLineEnd=_=>moveSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).to,-1));function toMatchingBracket(_,v,S){let R=!1,T=updateSel(_.selection,A=>{let k=matchBrackets(_,A.head,-1)||matchBrackets(_,A.head,1)||A.head>0&&matchBrackets(_,A.head-1,1)||A.head<_.doc.length&&matchBrackets(_,A.head+1,-1);if(!k||!k.end)return A;R=!0;let M=k.start.from==A.head?k.end.to:k.end.from;return EditorSelection.cursor(M)});return R?(v(setSel(_,T)),!0):!1}const cursorMatchingBracket=({state:_,dispatch:v})=>toMatchingBracket(_,v);function extendSel(_,v){let S=updateSel(_.state.selection,R=>{let T=v(R);return EditorSelection.range(R.anchor,T.head,T.goalColumn,T.bidiLevel||void 0)});return S.eq(_.state.selection)?!1:(_.dispatch(setSel(_.state,S)),!0)}function selectByChar(_,v){return extendSel(_,S=>_.moveByChar(S,v))}const selectCharLeft=_=>selectByChar(_,!ltrAtCursor(_)),selectCharRight=_=>selectByChar(_,ltrAtCursor(_));function selectByGroup(_,v){return extendSel(_,S=>_.moveByGroup(S,v))}const selectGroupLeft=_=>selectByGroup(_,!ltrAtCursor(_)),selectGroupRight=_=>selectByGroup(_,ltrAtCursor(_)),selectSyntaxLeft=_=>extendSel(_,v=>moveBySyntax(_.state,v,!ltrAtCursor(_))),selectSyntaxRight=_=>extendSel(_,v=>moveBySyntax(_.state,v,ltrAtCursor(_)));function selectByLine(_,v){return extendSel(_,S=>_.moveVertically(S,v))}const selectLineUp=_=>selectByLine(_,!1),selectLineDown=_=>selectByLine(_,!0);function selectByPage(_,v){return extendSel(_,S=>_.moveVertically(S,v,pageInfo(_).height))}const selectPageUp=_=>selectByPage(_,!1),selectPageDown=_=>selectByPage(_,!0),selectLineBoundaryForward=_=>extendSel(_,v=>moveByLineBoundary(_,v,!0)),selectLineBoundaryBackward=_=>extendSel(_,v=>moveByLineBoundary(_,v,!1)),selectLineBoundaryLeft=_=>extendSel(_,v=>moveByLineBoundary(_,v,!ltrAtCursor(_))),selectLineBoundaryRight=_=>extendSel(_,v=>moveByLineBoundary(_,v,ltrAtCursor(_))),selectLineStart=_=>extendSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).from)),selectLineEnd=_=>extendSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).to)),cursorDocStart=({state:_,dispatch:v})=>(v(setSel(_,{anchor:0})),!0),cursorDocEnd=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.doc.length})),!0),selectDocStart=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.selection.main.anchor,head:0})),!0),selectDocEnd=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.selection.main.anchor,head:_.doc.length})),!0),selectAll=({state:_,dispatch:v})=>(v(_.update({selection:{anchor:0,head:_.doc.length},userEvent:"select"})),!0),selectLine=({state:_,dispatch:v})=>{let S=selectedLineBlocks(_).map(({from:R,to:T})=>EditorSelection.range(R,Math.min(T+1,_.doc.length)));return v(_.update({selection:EditorSelection.create(S),userEvent:"select"})),!0},selectParentSyntax=({state:_,dispatch:v})=>{let S=updateSel(_.selection,R=>{let T=syntaxTree(_),A=T.resolveStack(R.from,1);if(R.empty){let k=T.resolveStack(R.from,-1);k.node.from>=A.node.from&&k.node.to<=A.node.to&&(A=k)}for(let k=A;k;k=k.next){let{node:M}=k;if((M.from<R.from&&M.to>=R.to||M.to>R.to&&M.from<=R.from)&&k.next)return EditorSelection.range(M.to,M.from)}return R});return S.eq(_.selection)?!1:(v(setSel(_,S)),!0)};function addCursorVertically(_,v){let{state:S}=_,R=S.selection,T=S.selection.ranges.slice();for(let A of S.selection.ranges){let k=S.doc.lineAt(A.head);if(v?k.to<_.state.doc.length:k.from>0)for(let M=A;;){let N=_.moveVertically(M,v);if(N.head<k.from||N.head>k.to){T.some(D=>D.head==N.head)||T.push(N);break}else{if(N.head==M.head)break;M=N}}}return T.length==R.ranges.length?!1:(_.dispatch(setSel(S,EditorSelection.create(T,T.length-1))),!0)}const addCursorAbove=_=>addCursorVertically(_,!1),addCursorBelow=_=>addCursorVertically(_,!0),simplifySelection=({state:_,dispatch:v})=>{let S=_.selection,R=null;return S.ranges.length>1?R=EditorSelection.create([S.main]):S.main.empty||(R=EditorSelection.create([EditorSelection.cursor(S.main.head)])),R?(v(setSel(_,R)),!0):!1};function deleteBy(_,v){if(_.state.readOnly)return!1;let S="delete.selection",{state:R}=_,T=R.changeByRange(A=>{let{from:k,to:M}=A;if(k==M){let N=v(A);N<k?(S="delete.backward",N=skipAtomic(_,N,!1)):N>k&&(S="delete.forward",N=skipAtomic(_,N,!0)),k=Math.min(k,N),M=Math.max(M,N)}else k=skipAtomic(_,k,!1),M=skipAtomic(_,M,!0);return k==M?{range:A}:{changes:{from:k,to:M},range:EditorSelection.cursor(k,k<A.head?-1:1)}});return T.changes.empty?!1:(_.dispatch(R.update(T,{scrollIntoView:!0,userEvent:S,effects:S=="delete.selection"?EditorView.announce.of(R.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(_,v,S){if(_ instanceof EditorView)for(let R of _.state.facet(EditorView.atomicRanges).map(T=>T(_)))R.between(v,v,(T,A)=>{T<v&&A>v&&(v=S?A:T)});return v}const deleteByChar=(_,v,S)=>deleteBy(_,R=>{let T=R.from,{state:A}=_,k=A.doc.lineAt(T),M,N;if(S&&!v&&T>k.from&&T<k.from+200&&!/[^ \t]/.test(M=k.text.slice(0,T-k.from))){if(M[M.length-1]=="	")return T-1;let D=countColumn(M,A.tabSize),I=D%getIndentUnit(A)||getIndentUnit(A);for(let q=0;q<I&&M[M.length-1-q]==" ";q++)T--;N=T}else N=findClusterBreak(k.text,T-k.from,v,v)+k.from,N==T&&k.number!=(v?A.doc.lines:1)?N+=v?1:-1:!v&&/[\ufe00-\ufe0f]/.test(k.text.slice(N-k.from,T-k.from))&&(N=findClusterBreak(k.text,N-k.from,!1,!1)+k.from);return N}),deleteCharBackward=_=>deleteByChar(_,!1,!0),deleteCharForward=_=>deleteByChar(_,!0,!1),deleteByGroup=(_,v)=>deleteBy(_,S=>{let R=S.head,{state:T}=_,A=T.doc.lineAt(R),k=T.charCategorizer(R);for(let M=null;;){if(R==(v?A.to:A.from)){R==S.head&&A.number!=(v?T.doc.lines:1)&&(R+=v?1:-1);break}let N=findClusterBreak(A.text,R-A.from,v)+A.from,D=A.text.slice(Math.min(R,N)-A.from,Math.max(R,N)-A.from),I=k(D);if(M!=null&&I!=M)break;(D!=" "||R!=S.head)&&(M=I),R=N}return R}),deleteGroupBackward=_=>deleteByGroup(_,!1),deleteGroupForward=_=>deleteByGroup(_,!0),deleteToLineEnd=_=>deleteBy(_,v=>{let S=_.lineBlockAt(v.head).to;return v.head<S?S:Math.min(_.state.doc.length,v.head+1)}),deleteLineBoundaryBackward=_=>deleteBy(_,v=>{let S=_.moveToLineBoundary(v,!1).head;return v.head>S?S:Math.max(0,v.head-1)}),deleteLineBoundaryForward=_=>deleteBy(_,v=>{let S=_.moveToLineBoundary(v,!0).head;return v.head<S?S:Math.min(_.state.doc.length,v.head+1)}),splitLine=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=_.changeByRange(R=>({changes:{from:R.from,to:R.to,insert:Text.of(["",""])},range:EditorSelection.cursor(R.from)}));return v(_.update(S,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=_.changeByRange(R=>{if(!R.empty||R.from==0||R.from==_.doc.length)return{range:R};let T=R.from,A=_.doc.lineAt(T),k=T==A.from?T-1:findClusterBreak(A.text,T-A.from,!1)+A.from,M=T==A.to?T+1:findClusterBreak(A.text,T-A.from,!0)+A.from;return{changes:{from:k,to:M,insert:_.doc.slice(T,M).append(_.doc.slice(k,T))},range:EditorSelection.cursor(M)}});return S.changes.empty?!1:(v(_.update(S,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(_){let v=[],S=-1;for(let R of _.selection.ranges){let T=_.doc.lineAt(R.from),A=_.doc.lineAt(R.to);if(!R.empty&&R.to==A.from&&(A=_.doc.lineAt(R.to-1)),S>=T.number){let k=v[v.length-1];k.to=A.to,k.ranges.push(R)}else v.push({from:T.from,to:A.to,ranges:[R]});S=A.number+1}return v}function moveLine(_,v,S){if(_.readOnly)return!1;let R=[],T=[];for(let A of selectedLineBlocks(_)){if(S?A.to==_.doc.length:A.from==0)continue;let k=_.doc.lineAt(S?A.to+1:A.from-1),M=k.length+1;if(S){R.push({from:A.to,to:k.to},{from:A.from,insert:k.text+_.lineBreak});for(let N of A.ranges)T.push(EditorSelection.range(Math.min(_.doc.length,N.anchor+M),Math.min(_.doc.length,N.head+M)))}else{R.push({from:k.from,to:A.from},{from:A.to,insert:_.lineBreak+k.text});for(let N of A.ranges)T.push(EditorSelection.range(N.anchor-M,N.head-M))}}return R.length?(v(_.update({changes:R,scrollIntoView:!0,selection:EditorSelection.create(T,_.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:_,dispatch:v})=>moveLine(_,v,!1),moveLineDown=({state:_,dispatch:v})=>moveLine(_,v,!0);function copyLine(_,v,S){if(_.readOnly)return!1;let R=[];for(let T of selectedLineBlocks(_))S?R.push({from:T.from,insert:_.doc.slice(T.from,T.to)+_.lineBreak}):R.push({from:T.to,insert:_.lineBreak+_.doc.slice(T.from,T.to)});return v(_.update({changes:R,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:_,dispatch:v})=>copyLine(_,v,!1),copyLineDown=({state:_,dispatch:v})=>copyLine(_,v,!0),deleteLine=_=>{if(_.state.readOnly)return!1;let{state:v}=_,S=v.changes(selectedLineBlocks(v).map(({from:T,to:A})=>(T>0?T--:A<v.doc.length&&A++,{from:T,to:A}))),R=updateSel(v.selection,T=>{let A;if(_.lineWrapping){let k=_.lineBlockAt(T.head),M=_.coordsAtPos(T.head,T.assoc||1);M&&(A=k.bottom+_.documentTop-M.bottom+_.defaultLineHeight/2)}return _.moveVertically(T,!0,A)}).map(S);return _.dispatch({changes:S,selection:R,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(_,v){if(/\(\)|\[\]|\{\}/.test(_.sliceDoc(v-1,v+1)))return{from:v,to:v};let S=syntaxTree(_).resolveInner(v),R=S.childBefore(v),T=S.childAfter(v),A;return R&&T&&R.to<=v&&T.from>=v&&(A=R.type.prop(NodeProp.closedBy))&&A.indexOf(T.name)>-1&&_.doc.lineAt(R.to).from==_.doc.lineAt(T.from).from&&!/\S/.test(_.sliceDoc(R.to,T.from))?{from:R.to,to:T.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(_){return({state:v,dispatch:S})=>{if(v.readOnly)return!1;let R=v.changeByRange(T=>{let{from:A,to:k}=T,M=v.doc.lineAt(A),N=!_&&A==k&&isBetweenBrackets(v,A);_&&(A=k=(k<=M.to?M:v.doc.lineAt(k)).to);let D=new IndentContext(v,{simulateBreak:A,simulateDoubleBreak:!!N}),I=getIndentation(D,A);for(I==null&&(I=countColumn(/^\s*/.exec(v.doc.lineAt(A).text)[0],v.tabSize));k<M.to&&/\s/.test(M.text[k-M.from]);)k++;N?{from:A,to:k}=N:A>M.from&&A<M.from+100&&!/\S/.test(M.text.slice(0,A))&&(A=M.from);let q=["",indentString(v,I)];return N&&q.push(indentString(v,D.lineIndent(M.from,-1))),{changes:{from:A,to:k,insert:Text.of(q)},range:EditorSelection.cursor(A+1+q[1].length)}});return S(v.update(R,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(_,v){let S=-1;return _.changeByRange(R=>{let T=[];for(let k=R.from;k<=R.to;){let M=_.doc.lineAt(k);M.number>S&&(R.empty||R.to>M.from)&&(v(M,T,R),S=M.number),k=M.to+1}let A=_.changes(T);return{changes:T,range:EditorSelection.range(A.mapPos(R.anchor,1),A.mapPos(R.head,1))}})}const indentSelection=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=Object.create(null),R=new IndentContext(_,{overrideIndentation:A=>{let k=S[A];return k??-1}}),T=changeBySelectedLine(_,(A,k,M)=>{let N=getIndentation(R,A.from);if(N==null)return;/\S/.test(A.text)||(N=0);let D=/^\s*/.exec(A.text)[0],I=indentString(_,N);(D!=I||M.from<A.from+D.length)&&(S[A.from]=N,k.push({from:A.from,to:A.from+D.length,insert:I}))});return T.changes.empty||v(_.update(T,{userEvent:"indent"})),!0},indentMore=({state:_,dispatch:v})=>_.readOnly?!1:(v(_.update(changeBySelectedLine(_,(S,R)=>{R.push({from:S.from,insert:_.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:_,dispatch:v})=>_.readOnly?!1:(v(_.update(changeBySelectedLine(_,(S,R)=>{let T=/^\s*/.exec(S.text)[0];if(!T)return;let A=countColumn(T,_.tabSize),k=0,M=indentString(_,Math.max(0,A-getIndentUnit(_)));for(;k<T.length&&k<M.length&&T.charCodeAt(k)==M.charCodeAt(k);)k++;R.push({from:S.from+k,to:S.from+T.length,insert:M.slice(k)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=_=>(_.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(_=>({mac:_.key,run:_.run,shift:_.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess},basicNormalize=typeof String.prototype.normalize=="function"?_=>_.normalize("NFKD"):_=>_;class SearchCursor{constructor(v,S,R=0,T=v.length,A,k){this.test=k,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=v.iterRange(R,T),this.bufferStart=R,this.normalize=A?M=>A(basicNormalize(M)):basicNormalize,this.query=this.normalize(S)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let v=this.peek();if(v<0)return this.done=!0,this;let S=fromCodePoint(v),R=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(v);let T=this.normalize(S);if(T.length)for(let A=0,k=R;;A++){let M=T.charCodeAt(A),N=this.match(M,k,this.bufferPos+this.bufferStart);if(A==T.length-1){if(N)return this.value=N,this;break}k==R&&A<S.length&&S.charCodeAt(A)==M&&k++}}}match(v,S,R){let T=null;for(let A=0;A<this.matches.length;A+=2){let k=this.matches[A],M=!1;this.query.charCodeAt(k)==v&&(k==this.query.length-1?T={from:this.matches[A+1],to:R}:(this.matches[A]++,M=!0)),M||(this.matches.splice(A,2),A-=2)}return this.query.charCodeAt(0)==v&&(this.query.length==1?T={from:S,to:R}:this.matches.push(1,S)),T&&this.test&&!this.test(T.from,T.to,this.buffer,this.bufferStart)&&(T=null),T}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(v,S,R,T=0,A=v.length){if(this.text=v,this.to=A,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(S))return new MultilineRegExpCursor(v,S,R,T,A);this.re=new RegExp(S,baseFlags+(R?.ignoreCase?"i":"")),this.test=R?.test,this.iter=v.iter();let k=v.lineAt(T);this.curLineStart=k.from,this.matchPos=toCharEnd(v,T),this.getLine(this.curLineStart)}getLine(v){this.iter.next(v),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let v=this.matchPos-this.curLineStart;;){this.re.lastIndex=v;let S=this.matchPos<=this.to&&this.re.exec(this.curLine);if(S){let R=this.curLineStart+S.index,T=R+S[0].length;if(this.matchPos=toCharEnd(this.text,T+(R==T?1:0)),R==this.curLineStart+this.curLine.length&&this.nextLine(),(R<T||R>this.value.to)&&(!this.test||this.test(R,T,S)))return this.value={from:R,to:T,match:S},this;v=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),v=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(v,S){this.from=v,this.text=S}get to(){return this.from+this.text.length}static get(v,S,R){let T=flattened.get(v);if(!T||T.from>=R||T.to<=S){let M=new FlattenedDoc(S,v.sliceString(S,R));return flattened.set(v,M),M}if(T.from==S&&T.to==R)return T;let{text:A,from:k}=T;return k>S&&(A=v.sliceString(S,k)+A,k=S),T.to<R&&(A+=v.sliceString(T.to,R)),flattened.set(v,new FlattenedDoc(k,A)),new FlattenedDoc(S,A.slice(S-k,R-k))}}class MultilineRegExpCursor{constructor(v,S,R,T,A){this.text=v,this.to=A,this.done=!1,this.value=empty,this.matchPos=toCharEnd(v,T),this.re=new RegExp(S,baseFlags+(R?.ignoreCase?"i":"")),this.test=R?.test,this.flat=FlattenedDoc.get(v,T,this.chunkEnd(T+5e3))}chunkEnd(v){return v>=this.to?this.to:this.text.lineAt(v).to}next(){for(;;){let v=this.re.lastIndex=this.matchPos-this.flat.from,S=this.re.exec(this.flat.text);if(S&&!S[0]&&S.index==v&&(this.re.lastIndex=v+1,S=this.re.exec(this.flat.text)),S){let R=this.flat.from+S.index,T=R+S[0].length;if((this.flat.to>=this.to||S.index+S[0].length<=this.flat.text.length-10)&&(!this.test||this.test(R,T,S)))return this.value={from:R,to:T,match:S},this.matchPos=toCharEnd(this.text,T+(R==T?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(_){try{return new RegExp(_,baseFlags),!0}catch{return!1}}function toCharEnd(_,v){if(v>=_.length)return v;let S=_.lineAt(v),R;for(;v<S.to&&(R=S.text.charCodeAt(v-S.from))>=56320&&R<57344;)v++;return v}function createLineDialog(_){let v=String(_.state.doc.lineAt(_.state.selection.main.head).number),S=crelt("input",{class:"cm-textfield",name:"line",value:v}),R=crelt("form",{class:"cm-gotoLine",onkeydown:A=>{A.keyCode==27?(A.preventDefault(),_.dispatch({effects:dialogEffect.of(!1)}),_.focus()):A.keyCode==13&&(A.preventDefault(),T())},onsubmit:A=>{A.preventDefault(),T()}},crelt("label",_.state.phrase("Go to line"),": ",S)," ",crelt("button",{class:"cm-button",type:"submit"},_.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{_.dispatch({effects:dialogEffect.of(!1)}),_.focus()},"aria-label":_.state.phrase("close"),type:"button"},[""]));function T(){let A=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(S.value);if(!A)return;let{state:k}=_,M=k.doc.lineAt(k.selection.main.head),[,N,D,I,q]=A,B=I?+I.slice(1):0,z=D?+D:M.number;if(D&&q){let H=z/100;N&&(H=H*(N=="-"?-1:1)+M.number/k.doc.lines),z=Math.round(k.doc.lines*H)}else D&&N&&(z=z*(N=="-"?-1:1)+M.number);let F=k.doc.line(Math.max(1,Math.min(k.doc.lines,z))),V=EditorSelection.cursor(F.from+Math.max(0,Math.min(B,F.length)));_.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(V.from,{y:"center"})],selection:V}),_.focus()}return{dom:R}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(_,v){for(let S of v.effects)S.is(dialogEffect)&&(_=S.value);return _},provide:_=>showPanel.from(_,v=>v?createLineDialog:null)}),gotoLine=_=>{let v=getPanel(_,createLineDialog);if(!v){let S=[dialogEffect.of(!0)];_.state.field(dialogField,!1)==null&&S.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),_.dispatch({effects:S}),v=getPanel(_,createLineDialog)}return v&&v.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(_){return combineConfig(_,defaultHighlightOptions,{highlightWordAroundCursor:(v,S)=>v||S,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(_){return[defaultTheme,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(_,v,S,R){return(S==0||_(v.sliceDoc(S-1,S))!=CharCategory.Word)&&(R==v.doc.length||_(v.sliceDoc(R,R+1))!=CharCategory.Word)}function insideWord(_,v,S,R){return _(v.sliceDoc(S,S+1))==CharCategory.Word&&_(v.sliceDoc(R-1,R))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.selectionSet||_.docChanged||_.viewportChanged)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let v=_.state.facet(highlightConfig),{state:S}=_,R=S.selection;if(R.ranges.length>1)return Decoration.none;let T=R.main,A,k=null;if(T.empty){if(!v.highlightWordAroundCursor)return Decoration.none;let N=S.wordAt(T.head);if(!N)return Decoration.none;k=S.charCategorizer(T.head),A=S.sliceDoc(N.from,N.to)}else{let N=T.to-T.from;if(N<v.minSelectionLength||N>200)return Decoration.none;if(v.wholeWords){if(A=S.sliceDoc(T.from,T.to),k=S.charCategorizer(T.head),!(insideWordBoundaries(k,S,T.from,T.to)&&insideWord(k,S,T.from,T.to)))return Decoration.none}else if(A=S.sliceDoc(T.from,T.to),!A)return Decoration.none}let M=[];for(let N of _.visibleRanges){let D=new SearchCursor(S.doc,A,N.from,N.to);for(;!D.next().done;){let{from:I,to:q}=D.value;if((!k||insideWordBoundaries(k,S,I,q))&&(T.empty&&I<=T.from&&q>=T.to?M.push(mainMatchDeco.range(I,q)):(I>=T.to||q<=T.from)&&M.push(matchDeco.range(I,q)),M.length>v.maxMatches))return Decoration.none}}return Decoration.set(M)}},{decorations:_=>_.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:_,dispatch:v})=>{let{selection:S}=_,R=EditorSelection.create(S.ranges.map(T=>_.wordAt(T.head)||EditorSelection.cursor(T.head)),S.mainIndex);return R.eq(S)?!1:(v(_.update({selection:R})),!0)};function findNextOccurrence(_,v){let{main:S,ranges:R}=_.selection,T=_.wordAt(S.head),A=T&&T.from==S.from&&T.to==S.to;for(let k=!1,M=new SearchCursor(_.doc,v,R[R.length-1].to);;)if(M.next(),M.done){if(k)return null;M=new SearchCursor(_.doc,v,0,Math.max(0,R[R.length-1].from-1)),k=!0}else{if(k&&R.some(N=>N.from==M.value.from))continue;if(A){let N=_.wordAt(M.value.from);if(!N||N.from!=M.value.from||N.to!=M.value.to)continue}return M.value}}const selectNextOccurrence=({state:_,dispatch:v})=>{let{ranges:S}=_.selection;if(S.some(A=>A.from===A.to))return selectWord({state:_,dispatch:v});let R=_.sliceDoc(S[0].from,S[0].to);if(_.selection.ranges.some(A=>_.sliceDoc(A.from,A.to)!=R))return!1;let T=findNextOccurrence(_,R);return T?(v(_.update({selection:_.selection.addRange(EditorSelection.range(T.from,T.to),!1),effects:EditorView.scrollIntoView(T.to)})),!0):!1},searchConfigFacet=Facet.define({combine(_){return combineConfig(_,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:v=>new SearchPanel(v),scrollToMatch:v=>EditorView.scrollIntoView(v)})}});class SearchQuery{constructor(v){this.search=v.search,this.caseSensitive=!!v.caseSensitive,this.literal=!!v.literal,this.regexp=!!v.regexp,this.replace=v.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!v.wholeWord}unquote(v){return this.literal?v:v.replace(/\\([nrt\\])/g,(S,R)=>R=="n"?`
`:R=="r"?"\r":R=="t"?"	":"\\")}eq(v){return this.search==v.search&&this.replace==v.replace&&this.caseSensitive==v.caseSensitive&&this.regexp==v.regexp&&this.wholeWord==v.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(v,S=0,R){let T=v.doc?v:EditorState.create({doc:v});return R==null&&(R=T.doc.length),this.regexp?regexpCursor(this,T,S,R):stringCursor(this,T,S,R)}}class QueryType{constructor(v){this.spec=v}}function stringCursor(_,v,S,R){return new SearchCursor(v.doc,_.unquoted,S,R,_.caseSensitive?void 0:T=>T.toLowerCase(),_.wholeWord?stringWordTest(v.doc,v.charCategorizer(v.selection.main.head)):void 0)}function stringWordTest(_,v){return(S,R,T,A)=>((A>S||A+T.length<R)&&(A=Math.max(0,S-2),T=_.sliceString(A,Math.min(_.length,R+2))),(v(charBefore(T,S-A))!=CharCategory.Word||v(charAfter(T,S-A))!=CharCategory.Word)&&(v(charAfter(T,R-A))!=CharCategory.Word||v(charBefore(T,R-A))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(v){super(v)}nextMatch(v,S,R){let T=stringCursor(this.spec,v,R,v.doc.length).nextOverlapping();if(T.done){let A=Math.min(v.doc.length,S+this.spec.unquoted.length);T=stringCursor(this.spec,v,0,A).nextOverlapping()}return T.done||T.value.from==S&&T.value.to==R?null:T.value}prevMatchInRange(v,S,R){for(let T=R;;){let A=Math.max(S,T-1e4-this.spec.unquoted.length),k=stringCursor(this.spec,v,A,T),M=null;for(;!k.nextOverlapping().done;)M=k.value;if(M)return M;if(A==S)return null;T-=1e4}}prevMatch(v,S,R){let T=this.prevMatchInRange(v,0,S);return T||(T=this.prevMatchInRange(v,Math.max(0,R-this.spec.unquoted.length),v.doc.length)),T&&(T.from!=S||T.to!=R)?T:null}getReplacement(v){return this.spec.unquote(this.spec.replace)}matchAll(v,S){let R=stringCursor(this.spec,v,0,v.doc.length),T=[];for(;!R.next().done;){if(T.length>=S)return null;T.push(R.value)}return T}highlight(v,S,R,T){let A=stringCursor(this.spec,v,Math.max(0,S-this.spec.unquoted.length),Math.min(R+this.spec.unquoted.length,v.doc.length));for(;!A.next().done;)T(A.value.from,A.value.to)}}function regexpCursor(_,v,S,R){return new RegExpCursor(v.doc,_.search,{ignoreCase:!_.caseSensitive,test:_.wholeWord?regexpWordTest(v.charCategorizer(v.selection.main.head)):void 0},S,R)}function charBefore(_,v){return _.slice(findClusterBreak(_,v,!1),v)}function charAfter(_,v){return _.slice(v,findClusterBreak(_,v))}function regexpWordTest(_){return(v,S,R)=>!R[0].length||(_(charBefore(R.input,R.index))!=CharCategory.Word||_(charAfter(R.input,R.index))!=CharCategory.Word)&&(_(charAfter(R.input,R.index+R[0].length))!=CharCategory.Word||_(charBefore(R.input,R.index+R[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(v,S,R){let T=regexpCursor(this.spec,v,R,v.doc.length).next();return T.done&&(T=regexpCursor(this.spec,v,0,S).next()),T.done?null:T.value}prevMatchInRange(v,S,R){for(let T=1;;T++){let A=Math.max(S,R-T*1e4),k=regexpCursor(this.spec,v,A,R),M=null;for(;!k.next().done;)M=k.value;if(M&&(A==S||M.from>A+10))return M;if(A==S)return null}}prevMatch(v,S,R){return this.prevMatchInRange(v,0,S)||this.prevMatchInRange(v,R,v.doc.length)}getReplacement(v){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(S,R)=>{if(R=="&")return v.match[0];if(R=="$")return"$";for(let T=R.length;T>0;T--){let A=+R.slice(0,T);if(A>0&&A<v.match.length)return v.match[A]+R.slice(T)}return S})}matchAll(v,S){let R=regexpCursor(this.spec,v,0,v.doc.length),T=[];for(;!R.next().done;){if(T.length>=S)return null;T.push(R.value)}return T}highlight(v,S,R,T){let A=regexpCursor(this.spec,v,Math.max(0,S-250),Math.min(R+250,v.doc.length));for(;!A.next().done;)T(A.value.from,A.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(_){return new SearchState(defaultQuery(_).create(),null)},update(_,v){for(let S of v.effects)S.is(setSearchQuery)?_=new SearchState(S.value.create(),_.panel):S.is(togglePanel$1)&&(_=new SearchState(_.query,S.value?createSearchPanel:null));return _},provide:_=>showPanel.from(_,v=>v.panel)});class SearchState{constructor(v,S){this.query=v,this.panel=S}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=this.highlight(_.state.field(searchState))}update(_){let v=_.state.field(searchState);(v!=_.startState.field(searchState)||_.docChanged||_.selectionSet||_.viewportChanged)&&(this.decorations=this.highlight(v))}highlight({query:_,panel:v}){if(!v||!_.spec.valid)return Decoration.none;let{view:S}=this,R=new RangeSetBuilder;for(let T=0,A=S.visibleRanges,k=A.length;T<k;T++){let{from:M,to:N}=A[T];for(;T<k-1&&N>A[T+1].from-500;)N=A[++T].to;_.highlight(S.state,M,N,(D,I)=>{let q=S.state.selection.ranges.some(B=>B.from==D&&B.to==I);R.add(D,I,q?selectedMatchMark:matchMark)})}return R.finish()}},{decorations:_=>_.decorations});function searchCommand(_){return v=>{let S=v.state.field(searchState,!1);return S&&S.query.spec.valid?_(v,S):openSearchPanel(v)}}const findNext=searchCommand((_,{query:v})=>{let{to:S}=_.state.selection.main,R=v.nextMatch(_.state,S,S);if(!R)return!1;let T=EditorSelection.single(R.from,R.to),A=_.state.facet(searchConfigFacet);return _.dispatch({selection:T,effects:[announceMatch(_,R),A.scrollToMatch(T.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),findPrevious=searchCommand((_,{query:v})=>{let{state:S}=_,{from:R}=S.selection.main,T=v.prevMatch(S,R,R);if(!T)return!1;let A=EditorSelection.single(T.from,T.to),k=_.state.facet(searchConfigFacet);return _.dispatch({selection:A,effects:[announceMatch(_,T),k.scrollToMatch(A.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),selectMatches=searchCommand((_,{query:v})=>{let S=v.matchAll(_.state,1e3);return!S||!S.length?!1:(_.dispatch({selection:EditorSelection.create(S.map(R=>EditorSelection.range(R.from,R.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:_,dispatch:v})=>{let S=_.selection;if(S.ranges.length>1||S.main.empty)return!1;let{from:R,to:T}=S.main,A=[],k=0;for(let M=new SearchCursor(_.doc,_.sliceDoc(R,T));!M.next().done;){if(A.length>1e3)return!1;M.value.from==R&&(k=A.length),A.push(EditorSelection.range(M.value.from,M.value.to))}return v(_.update({selection:EditorSelection.create(A,k),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((_,{query:v})=>{let{state:S}=_,{from:R,to:T}=S.selection.main;if(S.readOnly)return!1;let A=v.nextMatch(S,R,R);if(!A)return!1;let k=A,M=[],N,D,I=[];k.from==R&&k.to==T&&(D=S.toText(v.getReplacement(k)),M.push({from:k.from,to:k.to,insert:D}),k=v.nextMatch(S,k.from,k.to),I.push(EditorView.announce.of(S.phrase("replaced match on line $",S.doc.lineAt(R).number)+".")));let q=_.state.changes(M);return k&&(N=EditorSelection.single(k.from,k.to).map(q),I.push(announceMatch(_,k)),I.push(S.facet(searchConfigFacet).scrollToMatch(N.main,_))),_.dispatch({changes:q,selection:N,effects:I,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((_,{query:v})=>{if(_.state.readOnly)return!1;let S=v.matchAll(_.state,1e9).map(T=>{let{from:A,to:k}=T;return{from:A,to:k,insert:v.getReplacement(T)}});if(!S.length)return!1;let R=_.state.phrase("replaced $ matches",S.length)+".";return _.dispatch({changes:S,effects:EditorView.announce.of(R),userEvent:"input.replace.all"}),!0});function createSearchPanel(_){return _.state.facet(searchConfigFacet).createPanel(_)}function defaultQuery(_,v){var S,R,T,A,k;let M=_.selection.main,N=M.empty||M.to>M.from+100?"":_.sliceDoc(M.from,M.to);if(v&&!N)return v;let D=_.facet(searchConfigFacet);return new SearchQuery({search:((S=v?.literal)!==null&&S!==void 0?S:D.literal)?N:N.replace(/\n/g,"\\n"),caseSensitive:(R=v?.caseSensitive)!==null&&R!==void 0?R:D.caseSensitive,literal:(T=v?.literal)!==null&&T!==void 0?T:D.literal,regexp:(A=v?.regexp)!==null&&A!==void 0?A:D.regexp,wholeWord:(k=v?.wholeWord)!==null&&k!==void 0?k:D.wholeWord})}function getSearchInput(_){let v=getPanel(_,createSearchPanel);return v&&v.dom.querySelector("[main-field]")}function selectSearchInput(_){let v=getSearchInput(_);v&&v==_.root.activeElement&&v.select()}const openSearchPanel=_=>{let v=_.state.field(searchState,!1);if(v&&v.panel){let S=getSearchInput(_);if(S&&S!=_.root.activeElement){let R=defaultQuery(_.state,v.query.spec);R.valid&&_.dispatch({effects:setSearchQuery.of(R)}),S.focus(),S.select()}}else _.dispatch({effects:[togglePanel$1.of(!0),v?setSearchQuery.of(defaultQuery(_.state,v.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=_=>{let v=_.state.field(searchState,!1);if(!v||!v.panel)return!1;let S=getPanel(_,createSearchPanel);return S&&S.dom.contains(_.root.activeElement)&&_.focus(),_.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(v){this.view=v;let S=this.query=v.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:S.search,placeholder:phrase(v,"Find"),"aria-label":phrase(v,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:S.replace,placeholder:phrase(v,"Replace"),"aria-label":phrase(v,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:S.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:S.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:S.wholeWord,onchange:this.commit});function R(T,A,k){return crelt("button",{class:"cm-button",name:T,onclick:A,type:"button"},k)}this.dom=crelt("div",{onkeydown:T=>this.keydown(T),class:"cm-search"},[this.searchField,R("next",()=>findNext(v),[phrase(v,"next")]),R("prev",()=>findPrevious(v),[phrase(v,"previous")]),R("select",()=>selectMatches(v),[phrase(v,"all")]),crelt("label",null,[this.caseField,phrase(v,"match case")]),crelt("label",null,[this.reField,phrase(v,"regexp")]),crelt("label",null,[this.wordField,phrase(v,"by word")]),...v.state.readOnly?[]:[crelt("br"),this.replaceField,R("replace",()=>replaceNext(v),[phrase(v,"replace")]),R("replaceAll",()=>replaceAll(v),[phrase(v,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(v),"aria-label":phrase(v,"close"),type:"button"},[""])])}commit(){let v=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});v.eq(this.query)||(this.query=v,this.view.dispatch({effects:setSearchQuery.of(v)}))}keydown(v){runScopeHandlers(this.view,v,"search-panel")?v.preventDefault():v.keyCode==13&&v.target==this.searchField?(v.preventDefault(),(v.shiftKey?findPrevious:findNext)(this.view)):v.keyCode==13&&v.target==this.replaceField&&(v.preventDefault(),replaceNext(this.view))}update(v){for(let S of v.transactions)for(let R of S.effects)R.is(setSearchQuery)&&!R.value.eq(this.query)&&this.setQuery(R.value)}setQuery(v){this.query=v,this.searchField.value=v.search,this.replaceField.value=v.replace,this.caseField.checked=v.caseSensitive,this.reField.checked=v.regexp,this.wordField.checked=v.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(_,v){return _.state.phrase(v)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(_,{from:v,to:S}){let R=_.state.doc.lineAt(v),T=_.state.doc.lineAt(S).to,A=Math.max(R.from,v-AnnounceMargin),k=Math.min(T,S+AnnounceMargin),M=_.state.sliceDoc(A,k);if(A!=R.from){for(let N=0;N<AnnounceMargin;N++)if(!Break.test(M[N+1])&&Break.test(M[N])){M=M.slice(N);break}}if(k!=T){for(let N=M.length-1;N>M.length-AnnounceMargin;N--)if(!Break.test(M[N-1])&&Break.test(M[N])){M=M.slice(0,N);break}}return EditorView.announce.of(`${_.state.phrase("current match")}. ${M} ${_.state.phrase("on line")} ${R.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(v,S,R,T){this.state=v,this.pos=S,this.explicit=R,this.view=T,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(v){let S=syntaxTree(this.state).resolveInner(this.pos,-1);for(;S&&v.indexOf(S.name)<0;)S=S.parent;return S?{from:S.from,to:this.pos,text:this.state.sliceDoc(S.from,this.pos),type:S.type}:null}matchBefore(v){let S=this.state.doc.lineAt(this.pos),R=Math.max(S.from,this.pos-250),T=S.text.slice(R-S.from,this.pos-S.from),A=T.search(ensureAnchor(v,!1));return A<0?null:{from:R+A,to:this.pos,text:T.slice(A)}}get aborted(){return this.abortListeners==null}addEventListener(v,S,R){v=="abort"&&this.abortListeners&&(this.abortListeners.push(S),R&&R.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(_){let v=Object.keys(_).join(""),S=/\w/.test(v);return S&&(v=v.replace(/\w/g,"")),`[${S?"\\w":""}${v.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(_){let v=Object.create(null),S=Object.create(null);for(let{label:T}of _){v[T[0]]=!0;for(let A=1;A<T.length;A++)S[T[A]]=!0}let R=toSet(v)+toSet(S)+"*$";return[new RegExp("^"+R),new RegExp(R)]}function completeFromList(_){let v=_.map(T=>typeof T=="string"?{label:T}:T),[S,R]=v.every(T=>/^\w+$/.test(T.label))?[/\w*$/,/\w+$/]:prefixMatch(v);return T=>{let A=T.matchBefore(R);return A||T.explicit?{from:A?A.from:T.pos,options:v,validFor:S}:null}}class Option{constructor(v,S,R,T){this.completion=v,this.source=S,this.match=R,this.score=T}}function cur(_){return _.selection.main.from}function ensureAnchor(_,v){var S;let{source:R}=_,T=v&&R[0]!="^",A=R[R.length-1]!="$";return!T&&!A?_:new RegExp(`${T?"^":""}(?:${R})${A?"$":""}`,(S=_.flags)!==null&&S!==void 0?S:_.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(_,v,S,R){let{main:T}=_.selection,A=S-T.from,k=R-T.from;return{..._.changeByRange(M=>{if(M!=T&&S!=R&&_.sliceDoc(M.from+A,M.from+k)!=_.sliceDoc(S,R))return{range:M};let N=_.toText(v);return{changes:{from:M.from+A,to:R==T.from?M.to:M.from+k,insert:N},range:EditorSelection.cursor(M.from+A+N.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(_){if(!Array.isArray(_))return _;let v=SourceCache.get(_);return v||SourceCache.set(_,v=completeFromList(_)),v}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(v){this.pattern=v,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let S=0;S<v.length;){let R=codePointAt(v,S),T=codePointSize(R);this.chars.push(R);let A=v.slice(S,S+T),k=A.toUpperCase();this.folded.push(codePointAt(k==A?A.toLowerCase():k,0)),S+=T}this.astral=v.length!=this.chars.length}ret(v,S){return this.score=v,this.matched=S,this}match(v){if(this.pattern.length==0)return this.ret(-100,[]);if(v.length<this.pattern.length)return null;let{chars:S,folded:R,any:T,precise:A,byWord:k}=this;if(S.length==1){let Y=codePointAt(v,0),Z=codePointSize(Y),J=Z==v.length?0:-100;if(Y!=S[0])if(Y==R[0])J+=-200;else return null;return this.ret(J,[0,Z])}let M=v.indexOf(this.pattern);if(M==0)return this.ret(v.length==this.pattern.length?0:-100,[0,this.pattern.length]);let N=S.length,D=0;if(M<0){for(let Y=0,Z=Math.min(v.length,200);Y<Z&&D<N;){let J=codePointAt(v,Y);(J==S[D]||J==R[D])&&(T[D++]=Y),Y+=codePointSize(J)}if(D<N)return null}let I=0,q=0,B=!1,z=0,F=-1,V=-1,H=/[a-z]/.test(v),W=!0;for(let Y=0,Z=Math.min(v.length,200),J=0;Y<Z&&q<N;){let ne=codePointAt(v,Y);M<0&&(I<N&&ne==S[I]&&(A[I++]=Y),z<N&&(ne==S[z]||ne==R[z]?(z==0&&(F=Y),V=Y+1,z++):z=0));let oe,te=ne<255?ne>=48&&ne<=57||ne>=97&&ne<=122?2:ne>=65&&ne<=90?1:0:(oe=fromCodePoint(ne))!=oe.toLowerCase()?1:oe!=oe.toUpperCase()?2:0;(!Y||te==1&&H||J==0&&te!=0)&&(S[q]==ne||R[q]==ne&&(B=!0)?k[q++]=Y:k.length&&(W=!1)),J=te,Y+=codePointSize(ne)}return q==N&&k[0]==0&&W?this.result(-100+(B?-200:0),k,v):z==N&&F==0?this.ret(-200-v.length+(V==v.length?0:-100),[0,V]):M>-1?this.ret(-700-v.length,[M,M+this.pattern.length]):z==N?this.ret(-900-v.length,[F,V]):q==N?this.result(-100+(B?-200:0)+-700+(W?0:-1100),k,v):S.length==2?null:this.result((T[0]?-700:0)+-200+-1100,T,v)}result(v,S,R){let T=[],A=0;for(let k of S){let M=k+(this.astral?codePointSize(codePointAt(R,k)):1);A&&T[A-1]==k?T[A-1]=M:(T[A++]=k,T[A++]=M)}return this.ret(v-R.length,T)}}class StrictMatcher{constructor(v){this.pattern=v,this.matched=[],this.score=0,this.folded=v.toLowerCase()}match(v){if(v.length<this.pattern.length)return null;let S=v.slice(0,this.pattern.length),R=S==this.pattern?0:S.toLowerCase()==this.folded?-200:null;return R==null?null:(this.matched=[0,S.length],this.score=R+(v.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(_){return combineConfig(_,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(v,S)=>(v.sortText||v.label).localeCompare(S.sortText||S.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(v,S)=>v&&S,closeOnBlur:(v,S)=>v&&S,icons:(v,S)=>v&&S,tooltipClass:(v,S)=>R=>joinClass(v(R),S(R)),optionClass:(v,S)=>R=>joinClass(v(R),S(R)),addToOptions:(v,S)=>v.concat(S),filterStrict:(v,S)=>v||S})}});function joinClass(_,v){return _?v?_+" "+v:_:v}function defaultPositionInfo(_,v,S,R,T,A){let k=_.textDirection==Direction.RTL,M=k,N=!1,D="top",I,q,B=v.left-T.left,z=T.right-v.right,F=R.right-R.left,V=R.bottom-R.top;if(M&&B<Math.min(F,z)?M=!1:!M&&z<Math.min(F,B)&&(M=!0),F<=(M?B:z))I=Math.max(T.top,Math.min(S.top,T.bottom-V))-v.top,q=Math.min(400,M?B:z);else{N=!0,q=Math.min(400,(k?v.right:T.right-v.left)-30);let Y=T.bottom-v.bottom;Y>=V||Y>v.top?I=S.bottom-v.top:(D="bottom",I=v.bottom-S.top)}let H=(v.bottom-v.top)/A.offsetHeight,W=(v.right-v.left)/A.offsetWidth;return{style:`${D}: ${I/H}px; max-width: ${q/W}px`,class:"cm-completionInfo-"+(N?k?"left-narrow":"right-narrow":M?"left":"right")}}function optionContent(_){let v=_.addToOptions.slice();return _.icons&&v.push({render(S){let R=document.createElement("div");return R.classList.add("cm-completionIcon"),S.type&&R.classList.add(...S.type.split(/\s+/g).map(T=>"cm-completionIcon-"+T)),R.setAttribute("aria-hidden","true"),R},position:20}),v.push({render(S,R,T,A){let k=document.createElement("span");k.className="cm-completionLabel";let M=S.displayLabel||S.label,N=0;for(let D=0;D<A.length;){let I=A[D++],q=A[D++];I>N&&k.appendChild(document.createTextNode(M.slice(N,I)));let B=k.appendChild(document.createElement("span"));B.appendChild(document.createTextNode(M.slice(I,q))),B.className="cm-completionMatchedText",N=q}return N<M.length&&k.appendChild(document.createTextNode(M.slice(N))),k},position:50},{render(S){if(!S.detail)return null;let R=document.createElement("span");return R.className="cm-completionDetail",R.textContent=S.detail,R},position:80}),v.sort((S,R)=>S.position-R.position).map(S=>S.render)}function rangeAroundSelected(_,v,S){if(_<=S)return{from:0,to:_};if(v<0&&(v=0),v<=_>>1){let T=Math.floor(v/S);return{from:T*S,to:(T+1)*S}}let R=Math.floor((_-v)/S);return{from:_-(R+1)*S,to:_-R*S}}class CompletionTooltip{constructor(v,S,R){this.view=v,this.stateField=S,this.applyCompletion=R,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:N=>this.placeInfo(N),key:this},this.space=null,this.currentClass="";let T=v.state.field(S),{options:A,selected:k}=T.open,M=v.state.facet(completionConfig);this.optionContent=optionContent(M),this.optionClass=M.optionClass,this.tooltipClass=M.tooltipClass,this.range=rangeAroundSelected(A.length,k,M.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(v.state),this.dom.addEventListener("mousedown",N=>{let{options:D}=v.state.field(S).open;for(let I=N.target,q;I&&I!=this.dom;I=I.parentNode)if(I.nodeName=="LI"&&(q=/-(\d+)$/.exec(I.id))&&+q[1]<D.length){this.applyCompletion(v,D[+q[1]]),N.preventDefault();return}}),this.dom.addEventListener("focusout",N=>{let D=v.state.field(this.stateField,!1);D&&D.tooltip&&v.state.facet(completionConfig).closeOnBlur&&N.relatedTarget!=v.contentDOM&&v.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(A,T.id)}mount(){this.updateSel()}showOptions(v,S){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(v,S,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(v){var S;let R=v.state.field(this.stateField),T=v.startState.field(this.stateField);if(this.updateTooltipClass(v.state),R!=T){let{options:A,selected:k,disabled:M}=R.open;(!T.open||T.open.options!=A)&&(this.range=rangeAroundSelected(A.length,k,v.state.facet(completionConfig).maxRenderedOptions),this.showOptions(A,R.id)),this.updateSel(),M!=((S=T.open)===null||S===void 0?void 0:S.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!M)}}updateTooltipClass(v){let S=this.tooltipClass(v);if(S!=this.currentClass){for(let R of this.currentClass.split(" "))R&&this.dom.classList.remove(R);for(let R of S.split(" "))R&&this.dom.classList.add(R);this.currentClass=S}}positioned(v){this.space=v,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let v=this.view.state.field(this.stateField),S=v.open;(S.selected>-1&&S.selected<this.range.from||S.selected>=this.range.to)&&(this.range=rangeAroundSelected(S.options.length,S.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(S.options,v.id));let R=this.updateSelectedOption(S.selected);if(R){this.destroyInfo();let{completion:T}=S.options[S.selected],{info:A}=T;if(!A)return;let k=typeof A=="string"?document.createTextNode(A):A(T);if(!k)return;"then"in k?k.then(M=>{M&&this.view.state.field(this.stateField,!1)==v&&this.addInfoPane(M,T)}).catch(M=>logException(this.view.state,M,"completion info")):(this.addInfoPane(k,T),R.setAttribute("aria-describedby",this.info.id))}}addInfoPane(v,S){this.destroyInfo();let R=this.info=document.createElement("div");if(R.className="cm-tooltip cm-completionInfo",R.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),v.nodeType!=null)R.appendChild(v),this.infoDestroy=null;else{let{dom:T,destroy:A}=v;R.appendChild(T),this.infoDestroy=A||null}this.dom.appendChild(R),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(v){let S=null;for(let R=this.list.firstChild,T=this.range.from;R;R=R.nextSibling,T++)R.nodeName!="LI"||!R.id?T--:T==v?R.hasAttribute("aria-selected")||(R.setAttribute("aria-selected","true"),S=R):R.hasAttribute("aria-selected")&&(R.removeAttribute("aria-selected"),R.removeAttribute("aria-describedby"));return S&&scrollIntoView(this.list,S),S}measureInfo(){let v=this.dom.querySelector("[aria-selected]");if(!v||!this.info)return null;let S=this.dom.getBoundingClientRect(),R=this.info.getBoundingClientRect(),T=v.getBoundingClientRect(),A=this.space;if(!A){let k=this.dom.ownerDocument.documentElement;A={left:0,top:0,right:k.clientWidth,bottom:k.clientHeight}}return T.top>Math.min(A.bottom,S.bottom)-10||T.bottom<Math.max(A.top,S.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,S,T,R,A,this.dom)}placeInfo(v){this.info&&(v?(v.style&&(this.info.style.cssText=v.style),this.info.className="cm-tooltip cm-completionInfo "+(v.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(v,S,R){const T=document.createElement("ul");T.id=S,T.setAttribute("role","listbox"),T.setAttribute("aria-expanded","true"),T.setAttribute("aria-label",this.view.state.phrase("Completions")),T.addEventListener("mousedown",k=>{k.target==T&&k.preventDefault()});let A=null;for(let k=R.from;k<R.to;k++){let{completion:M,match:N}=v[k],{section:D}=M;if(D){let B=typeof D=="string"?D:D.name;if(B!=A&&(k>R.from||R.from==0))if(A=B,typeof D!="string"&&D.header)T.appendChild(D.header(D));else{let z=T.appendChild(document.createElement("completion-section"));z.textContent=B}}const I=T.appendChild(document.createElement("li"));I.id=S+"-"+k,I.setAttribute("role","option");let q=this.optionClass(M);q&&(I.className=q);for(let B of this.optionContent){let z=B(M,this.view.state,this.view,N);z&&I.appendChild(z)}}return R.from&&T.classList.add("cm-completionListIncompleteTop"),R.to<v.length&&T.classList.add("cm-completionListIncompleteBottom"),T}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(_,v){return S=>new CompletionTooltip(S,_,v)}function scrollIntoView(_,v){let S=_.getBoundingClientRect(),R=v.getBoundingClientRect(),T=S.height/_.offsetHeight;R.top<S.top?_.scrollTop-=(S.top-R.top)/T:R.bottom>S.bottom&&(_.scrollTop+=(R.bottom-S.bottom)/T)}function score(_){return(_.boost||0)*100+(_.apply?10:0)+(_.info?5:0)+(_.type?1:0)}function sortOptions(_,v){let S=[],R=null,T=null,A=I=>{S.push(I);let{section:q}=I.completion;if(q){R||(R=[]);let B=typeof q=="string"?q:q.name;R.some(z=>z.name==B)||R.push(typeof q=="string"?{name:B}:q)}},k=v.facet(completionConfig);for(let I of _)if(I.hasResult()){let q=I.result.getMatch;if(I.result.filter===!1)for(let B of I.result.options)A(new Option(B,I.source,q?q(B):[],1e9-S.length));else{let B=v.sliceDoc(I.from,I.to),z,F=k.filterStrict?new StrictMatcher(B):new FuzzyMatcher(B);for(let V of I.result.options)if(z=F.match(V.label)){let H=V.displayLabel?q?q(V,z.matched):[]:z.matched,W=z.score+(V.boost||0);if(A(new Option(V,I.source,H,W)),typeof V.section=="object"&&V.section.rank==="dynamic"){let{name:Y}=V.section;T||(T=Object.create(null)),T[Y]=Math.max(W,T[Y]||-1e9)}}}}if(R){let I=Object.create(null),q=0,B=(z,F)=>(z.rank==="dynamic"&&F.rank==="dynamic"?T[F.name]-T[z.name]:0)||(typeof z.rank=="number"?z.rank:1e9)-(typeof F.rank=="number"?F.rank:1e9)||(z.name<F.name?-1:1);for(let z of R.sort(B))q-=1e5,I[z.name]=q;for(let z of S){let{section:F}=z.completion;F&&(z.score+=I[typeof F=="string"?F:F.name])}}let M=[],N=null,D=k.compareCompletions;for(let I of S.sort((q,B)=>B.score-q.score||D(q.completion,B.completion))){let q=I.completion;!N||N.label!=q.label||N.detail!=q.detail||N.type!=null&&q.type!=null&&N.type!=q.type||N.apply!=q.apply||N.boost!=q.boost?M.push(I):score(I.completion)>score(N)&&(M[M.length-1]=I),N=I.completion}return M}class CompletionDialog{constructor(v,S,R,T,A,k){this.options=v,this.attrs=S,this.tooltip=R,this.timestamp=T,this.selected=A,this.disabled=k}setSelected(v,S){return v==this.selected||v>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(S,v),this.tooltip,this.timestamp,v,this.disabled)}static build(v,S,R,T,A,k){if(T&&!k&&v.some(D=>D.isPending))return T.setDisabled();let M=sortOptions(v,S);if(!M.length)return T&&v.some(D=>D.isPending)?T.setDisabled():null;let N=S.facet(completionConfig).selectOnOpen?0:-1;if(T&&T.selected!=N&&T.selected!=-1){let D=T.options[T.selected].completion;for(let I=0;I<M.length;I++)if(M[I].completion==D){N=I;break}}return new CompletionDialog(M,makeAttrs(R,N),{pos:v.reduce((D,I)=>I.hasResult()?Math.min(D,I.from):D,1e8),create:createTooltip,above:A.aboveCursor},T?T.timestamp:Date.now(),N,!1)}map(v){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:v.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(v,S,R){this.active=v,this.id=S,this.open=R}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(v){let{state:S}=v,R=S.facet(completionConfig),A=(R.override||S.languageDataAt("autocomplete",cur(S)).map(asSource)).map(N=>(this.active.find(I=>I.source==N)||new ActiveSource(N,this.active.some(I=>I.state!=0)?1:0)).update(v,R));A.length==this.active.length&&A.every((N,D)=>N==this.active[D])&&(A=this.active);let k=this.open,M=v.effects.some(N=>N.is(setActiveEffect));k&&v.docChanged&&(k=k.map(v.changes)),v.selection||A.some(N=>N.hasResult()&&v.changes.touchesRange(N.from,N.to))||!sameResults(A,this.active)||M?k=CompletionDialog.build(A,S,this.id,k,R,M):k&&k.disabled&&!A.some(N=>N.isPending)&&(k=null),!k&&A.every(N=>!N.isPending)&&A.some(N=>N.hasResult())&&(A=A.map(N=>N.hasResult()?new ActiveSource(N.source,0):N));for(let N of v.effects)N.is(setSelectedEffect)&&(k=k&&k.setSelected(N.value,this.id));return A==this.active&&k==this.open?this:new CompletionState(A,this.id,k)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(_,v){if(_==v)return!0;for(let S=0,R=0;;){for(;S<_.length&&!_[S].hasResult();)S++;for(;R<v.length&&!v[R].hasResult();)R++;let T=S==_.length,A=R==v.length;if(T||A)return T==A;if(_[S++].result!=v[R++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(_,v){let S={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":_};return v>-1&&(S["aria-activedescendant"]=_+"-"+v),S}const none=[];function getUpdateType(_,v){if(_.isUserEvent("input.complete")){let R=_.annotation(pickedCompletion);if(R&&v.activateOnCompletion(R))return 12}let S=_.isUserEvent("input.type");return S&&v.activateOnTyping?5:S?1:_.isUserEvent("delete.backward")?2:_.selection?8:_.docChanged?16:0}class ActiveSource{constructor(v,S,R=!1){this.source=v,this.state=S,this.explicit=R}hasResult(){return!1}get isPending(){return this.state==1}update(v,S){let R=getUpdateType(v,S),T=this;(R&8||R&16&&this.touches(v))&&(T=new ActiveSource(T.source,0)),R&4&&T.state==0&&(T=new ActiveSource(this.source,1)),T=T.updateFor(v,R);for(let A of v.effects)if(A.is(startCompletionEffect))T=new ActiveSource(T.source,1,A.value);else if(A.is(closeCompletionEffect))T=new ActiveSource(T.source,0);else if(A.is(setActiveEffect))for(let k of A.value)k.source==T.source&&(T=k);return T}updateFor(v,S){return this.map(v.changes)}map(v){return this}touches(v){return v.changes.touchesRange(cur(v.state))}}class ActiveResult extends ActiveSource{constructor(v,S,R,T,A,k){super(v,3,S),this.limit=R,this.result=T,this.from=A,this.to=k}hasResult(){return!0}updateFor(v,S){var R;if(!(S&3))return this.map(v.changes);let T=this.result;T.map&&!v.changes.empty&&(T=T.map(T,v.changes));let A=v.changes.mapPos(this.from),k=v.changes.mapPos(this.to,1),M=cur(v.state);if(M>k||!T||S&2&&(cur(v.startState)==this.from||M<this.limit))return new ActiveSource(this.source,S&4?1:0);let N=v.changes.mapPos(this.limit);return checkValid(T.validFor,v.state,A,k)?new ActiveResult(this.source,this.explicit,N,T,A,k):T.update&&(T=T.update(T,A,k,new CompletionContext(v.state,M,!1)))?new ActiveResult(this.source,this.explicit,N,T,T.from,(R=T.to)!==null&&R!==void 0?R:cur(v.state)):new ActiveSource(this.source,1,this.explicit)}map(v){return v.empty?this:(this.result.map?this.result.map(this.result,v):this.result)?new ActiveResult(this.source,this.explicit,v.mapPos(this.limit),this.result,v.mapPos(this.from),v.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(v){return v.changes.touchesRange(this.from,this.to)}}function checkValid(_,v,S,R){if(!_)return!1;let T=v.sliceDoc(S,R);return typeof _=="function"?_(T,S,R,v):ensureAnchor(_,!0).test(T)}const setActiveEffect=StateEffect.define({map(_,v){return _.map(S=>S.map(v))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(_,v){return _.update(v)},provide:_=>[showTooltip.from(_,v=>v.tooltip),EditorView.contentAttributes.from(_,v=>v.attrs)]});function applyCompletion(_,v){const S=v.completion.apply||v.completion.label;let R=_.state.field(completionState).active.find(T=>T.source==v.source);return R instanceof ActiveResult?(typeof S=="string"?_.dispatch({...insertCompletionText(_.state,S,R.from,R.to),annotations:pickedCompletion.of(v.completion)}):S(_,v.completion,R.from,R.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(_,v="option"){return S=>{let R=S.state.field(completionState,!1);if(!R||!R.open||R.open.disabled||Date.now()-R.open.timestamp<S.state.facet(completionConfig).interactionDelay)return!1;let T=1,A;v=="page"&&(A=getTooltip(S,R.open.tooltip))&&(T=Math.max(2,Math.floor(A.dom.offsetHeight/A.dom.querySelector("li").offsetHeight)-1));let{length:k}=R.open.options,M=R.open.selected>-1?R.open.selected+T*(_?1:-1):_?0:k-1;return M<0?M=v=="page"?0:k-1:M>=k&&(M=v=="page"?k-1:0),S.dispatch({effects:setSelectedEffect.of(M)}),!0}}const acceptCompletion=_=>{let v=_.state.field(completionState,!1);return _.state.readOnly||!v||!v.open||v.open.selected<0||v.open.disabled||Date.now()-v.open.timestamp<_.state.facet(completionConfig).interactionDelay?!1:applyCompletion(_,v.open.options[v.open.selected])},startCompletion=_=>_.state.field(completionState,!1)?(_.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=_=>{let v=_.state.field(completionState,!1);return!v||!v.active.some(S=>S.state!=0)?!1:(_.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(v,S){this.active=v,this.context=S,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let v of _.state.field(completionState).active)v.isPending&&this.startQuery(v)}update(_){let v=_.state.field(completionState),S=_.state.facet(completionConfig);if(!_.selectionSet&&!_.docChanged&&_.startState.field(completionState)==v)return;let R=_.transactions.some(A=>{let k=getUpdateType(A,S);return k&8||(A.selection||A.docChanged)&&!(k&3)});for(let A=0;A<this.running.length;A++){let k=this.running[A];if(R||k.context.abortOnDocChange&&_.docChanged||k.updates.length+_.transactions.length>MaxUpdateCount&&Date.now()-k.time>MinAbortTime){for(let M of k.context.abortListeners)try{M()}catch(N){logException(this.view.state,N)}k.context.abortListeners=null,this.running.splice(A--,1)}else k.updates.push(..._.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),_.transactions.some(A=>A.effects.some(k=>k.is(startCompletionEffect)))&&(this.pendingStart=!0);let T=this.pendingStart?50:S.activateOnTypingDelay;if(this.debounceUpdate=v.active.some(A=>A.isPending&&!this.running.some(k=>k.active.source==A.source))?setTimeout(()=>this.startUpdate(),T):-1,this.composing!=0)for(let A of _.transactions)A.isUserEvent("input.type")?this.composing=2:this.composing==2&&A.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:_}=this.view,v=_.field(completionState);for(let S of v.active)S.isPending&&!this.running.some(R=>R.active.source==S.source)&&this.startQuery(S);this.running.length&&v.open&&v.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(_){let{state:v}=this.view,S=cur(v),R=new CompletionContext(v,S,_.explicit,this.view),T=new RunningQuery(_,R);this.running.push(T),Promise.resolve(_.source(R)).then(A=>{T.context.aborted||(T.done=A||null,this.scheduleAccept())},A=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,A)})}scheduleAccept(){this.running.every(_=>_.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var _;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let v=[],S=this.view.state.facet(completionConfig),R=this.view.state.field(completionState);for(let T=0;T<this.running.length;T++){let A=this.running[T];if(A.done===void 0)continue;if(this.running.splice(T--,1),A.done){let M=cur(A.updates.length?A.updates[0].startState:this.view.state),N=Math.min(M,A.done.from+(A.active.explicit?0:1)),D=new ActiveResult(A.active.source,A.active.explicit,N,A.done,A.done.from,(_=A.done.to)!==null&&_!==void 0?_:M);for(let I of A.updates)D=D.update(I,S);if(D.hasResult()){v.push(D);continue}}let k=R.active.find(M=>M.source==A.active.source);if(k&&k.isPending)if(A.done==null){let M=new ActiveSource(A.active.source,0);for(let N of A.updates)M=M.update(N,S);M.isPending||v.push(M)}else this.startQuery(k)}(v.length||R.open&&R.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(v)})}},{eventHandlers:{blur(_){let v=this.view.state.field(completionState,!1);if(v&&v.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let S=v.open&&getTooltip(this.view,v.open.tooltip);(!S||!S.dom.contains(_.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(_,v){let S=v.state.field(completionState,!1);if(!S||!S.open||S.open.disabled||S.open.selected<0||_.key.length>1||_.ctrlKey&&!(windows&&_.altKey)||_.metaKey)return!1;let R=S.open.options[S.open.selected],T=S.active.find(k=>k.source==R.source),A=R.completion.commitCharacters||T.result.commitCharacters;return A&&A.indexOf(_.key)>-1&&applyCompletion(v,R),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults$1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(_,v){let S=v.mapPos(_,-1,MapMode.TrackAfter);return S??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(_,v){if(_=_.map(v.changes),v.selection){let S=v.state.doc.lineAt(v.selection.main.head);_=_.update({filter:R=>R>=S.from&&R<=S.to})}for(let S of v.effects)S.is(closeBracketEffect)&&(_=_.update({add:[closedBracket.range(S.value,S.value+1)]}));return _}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(_){for(let v=0;v<definedClosing.length;v+=2)if(definedClosing.charCodeAt(v)==_)return definedClosing.charAt(v+1);return fromCodePoint(_<128?_:_+1)}function config(_,v){return _.languageDataAt("closeBrackets",v)[0]||defaults$1}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((_,v,S,R)=>{if((android?_.composing:_.compositionStarted)||_.state.readOnly)return!1;let T=_.state.selection.main;if(R.length>2||R.length==2&&codePointSize(codePointAt(R,0))==1||v!=T.from||S!=T.to)return!1;let A=insertBracket(_.state,R);return A?(_.dispatch(A),!0):!1}),deleteBracketPair=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let R=config(_,_.selection.main.head).brackets||defaults$1.brackets,T=null,A=_.changeByRange(k=>{if(k.empty){let M=prevChar(_.doc,k.head);for(let N of R)if(N==M&&nextChar(_.doc,k.head)==closing(codePointAt(N,0)))return{changes:{from:k.head-N.length,to:k.head+N.length},range:EditorSelection.cursor(k.head-N.length)}}return{range:T=k}});return T||v(_.update(A,{scrollIntoView:!0,userEvent:"delete.backward"})),!T},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(_,v){let S=config(_,_.selection.main.head),R=S.brackets||defaults$1.brackets;for(let T of R){let A=closing(codePointAt(T,0));if(v==T)return A==T?handleSame(_,T,R.indexOf(T+T+T)>-1,S):handleOpen(_,T,A,S.before||defaults$1.before);if(v==A&&closedBracketAt(_,_.selection.main.from))return handleClose(_,T,A)}return null}function closedBracketAt(_,v){let S=!1;return _.field(bracketState).between(0,_.doc.length,R=>{R==v&&(S=!0)}),S}function nextChar(_,v){let S=_.sliceString(v,v+2);return S.slice(0,codePointSize(codePointAt(S,0)))}function prevChar(_,v){let S=_.sliceString(v-2,v);return codePointSize(codePointAt(S,0))==S.length?S:S.slice(1)}function handleOpen(_,v,S,R){let T=null,A=_.changeByRange(k=>{if(!k.empty)return{changes:[{insert:v,from:k.from},{insert:S,from:k.to}],effects:closeBracketEffect.of(k.to+v.length),range:EditorSelection.range(k.anchor+v.length,k.head+v.length)};let M=nextChar(_.doc,k.head);return!M||/\s/.test(M)||R.indexOf(M)>-1?{changes:{insert:v+S,from:k.head},effects:closeBracketEffect.of(k.head+v.length),range:EditorSelection.cursor(k.head+v.length)}:{range:T=k}});return T?null:_.update(A,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(_,v,S){let R=null,T=_.changeByRange(A=>A.empty&&nextChar(_.doc,A.head)==S?{changes:{from:A.head,to:A.head+S.length,insert:S},range:EditorSelection.cursor(A.head+S.length)}:R={range:A});return R?null:_.update(T,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(_,v,S,R){let T=R.stringPrefixes||defaults$1.stringPrefixes,A=null,k=_.changeByRange(M=>{if(!M.empty)return{changes:[{insert:v,from:M.from},{insert:v,from:M.to}],effects:closeBracketEffect.of(M.to+v.length),range:EditorSelection.range(M.anchor+v.length,M.head+v.length)};let N=M.head,D=nextChar(_.doc,N),I;if(D==v){if(nodeStart(_,N))return{changes:{insert:v+v,from:N},effects:closeBracketEffect.of(N+v.length),range:EditorSelection.cursor(N+v.length)};if(closedBracketAt(_,N)){let B=S&&_.sliceDoc(N,N+v.length*3)==v+v+v?v+v+v:v;return{changes:{from:N,to:N+B.length,insert:B},range:EditorSelection.cursor(N+B.length)}}}else{if(S&&_.sliceDoc(N-2*v.length,N)==v+v&&(I=canStartStringAt(_,N-2*v.length,T))>-1&&nodeStart(_,I))return{changes:{insert:v+v+v+v,from:N},effects:closeBracketEffect.of(N+v.length),range:EditorSelection.cursor(N+v.length)};if(_.charCategorizer(N)(D)!=CharCategory.Word&&canStartStringAt(_,N,T)>-1&&!probablyInString(_,N,v,T))return{changes:{insert:v+v,from:N},effects:closeBracketEffect.of(N+v.length),range:EditorSelection.cursor(N+v.length)}}return{range:A=M}});return A?null:_.update(k,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(_,v){let S=syntaxTree(_).resolveInner(v+1);return S.parent&&S.from==v}function probablyInString(_,v,S,R){let T=syntaxTree(_).resolveInner(v,-1),A=R.reduce((k,M)=>Math.max(k,M.length),0);for(let k=0;k<5;k++){let M=_.sliceDoc(T.from,Math.min(T.to,T.from+S.length+A)),N=M.indexOf(S);if(!N||N>-1&&R.indexOf(M.slice(0,N))>-1){let I=T.firstChild;for(;I&&I.from==T.from&&I.to-I.from>S.length+N;){if(_.sliceDoc(I.to-S.length,I.to)==S)return!1;I=I.firstChild}return!0}let D=T.to==v&&T.parent;if(!D)break;T=D}return!1}function canStartStringAt(_,v,S){let R=_.charCategorizer(v);if(R(_.sliceDoc(v-1,v))!=CharCategory.Word)return v;for(let T of S){let A=v-T.length;if(_.sliceDoc(A,v)==T&&R(_.sliceDoc(A-1,A))!=CharCategory.Word)return A}return-1}function autocompletion(_={}){return[commitCharacters,completionState,completionConfig.of(_),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],_=>_.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(v,S,R){this.from=v,this.to=S,this.diagnostic=R}}class LintState{constructor(v,S,R){this.diagnostics=v,this.panel=S,this.selected=R}static init(v,S,R){let T=R.facet(lintConfig).markerFilter;T&&(v=T(v,R));let A=v.slice().sort((z,F)=>z.from-F.from||z.to-F.to),k=new RangeSetBuilder,M=[],N=0,D=R.doc.iter(),I=0,q=R.doc.length;for(let z=0;;){let F=z==A.length?null:A[z];if(!F&&!M.length)break;let V,H;if(M.length)V=N,H=M.reduce((Z,J)=>Math.min(Z,J.to),F&&F.from>V?F.from:1e8);else{if(V=F.from,V>q)break;H=F.to,M.push(F),z++}for(;z<A.length;){let Z=A[z];if(Z.from==V&&(Z.to>Z.from||Z.to==V))M.push(Z),z++,H=Math.min(Z.to,H);else{H=Math.min(Z.from,H);break}}H=Math.min(H,q);let W=!1;if(M.some(Z=>Z.from==V&&(Z.to==H||H==q))&&(W=V==H,!W&&H-V<10)){let Z=V-(I+D.value.length);Z>0&&(D.next(Z),I=V);for(let J=V;;){if(J>=H){W=!0;break}if(!D.lineBreak&&I+D.value.length>J)break;J=I+D.value.length,I+=D.value.length,D.next()}}let Y=maxSeverity(M);if(W)k.add(V,V,Decoration.widget({widget:new DiagnosticWidget(Y),diagnostics:M.slice()}));else{let Z=M.reduce((J,ne)=>ne.markClass?J+" "+ne.markClass:J,"");k.add(V,H,Decoration.mark({class:"cm-lintRange cm-lintRange-"+Y+Z,diagnostics:M.slice(),inclusiveEnd:M.some(J=>J.to>H)}))}if(N=H,N==q)break;for(let Z=0;Z<M.length;Z++)M[Z].to<=N&&M.splice(Z--,1)}let B=k.finish();return new LintState(B,S,findDiagnostic(B))}}function findDiagnostic(_,v=null,S=0){let R=null;return _.between(S,1e9,(T,A,{spec:k})=>{if(!(v&&k.diagnostics.indexOf(v)<0))if(!R)R=new SelectedDiagnostic(T,A,v||k.diagnostics[0]);else{if(k.diagnostics.indexOf(R.diagnostic)<0)return!1;R=new SelectedDiagnostic(R.from,A,R.diagnostic)}}),R}function hideTooltip(_,v){let S=v.pos,R=v.end||S,T=_.state.facet(lintConfig).hideOn(_,S,R);if(T!=null)return T;let A=_.startState.doc.lineAt(v.pos);return!!(_.effects.some(k=>k.is(setDiagnosticsEffect))||_.changes.touchesRange(A.from,Math.max(A.to,R)))}function maybeEnableLint(_,v){return _.field(lintState,!1)?v:v.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(_,v){if(v.docChanged&&_.diagnostics.size){let S=_.diagnostics.map(v.changes),R=null,T=_.panel;if(_.selected){let A=v.changes.mapPos(_.selected.from,1);R=findDiagnostic(S,_.selected.diagnostic,A)||findDiagnostic(S,null,A)}!S.size&&T&&v.state.facet(lintConfig).autoPanel&&(T=null),_=new LintState(S,T,R)}for(let S of v.effects)if(S.is(setDiagnosticsEffect)){let R=v.state.facet(lintConfig).autoPanel?S.value.length?LintPanel.open:null:_.panel;_=LintState.init(S.value,R,v.state)}else S.is(togglePanel)?_=new LintState(_.diagnostics,S.value?LintPanel.open:null,_.selected):S.is(movePanelSelection)&&(_=new LintState(_.diagnostics,_.panel,S.value));return _},provide:_=>[showPanel.from(_,v=>v.panel),EditorView.decorations.from(_,v=>v.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(_,v,S){let{diagnostics:R}=_.state.field(lintState),T,A=-1,k=-1;R.between(v-(S<0?1:0),v+(S>0?1:0),(N,D,{spec:I})=>{if(v>=N&&v<=D&&(N==D||(v>N||S>0)&&(v<D||S<0)))return T=I.diagnostics,A=N,k=D,!1});let M=_.state.facet(lintConfig).tooltipFilter;return T&&M&&(T=M(T,_.state)),T?{pos:A,end:k,above:_.state.doc.lineAt(A).to<k,create(){return{dom:diagnosticsTooltip(_,T)}}}:null}function diagnosticsTooltip(_,v){return crelt("ul",{class:"cm-tooltip-lint"},v.map(S=>renderDiagnostic(_,S,!1)))}const openLintPanel=_=>{let v=_.state.field(lintState,!1);(!v||!v.panel)&&_.dispatch({effects:maybeEnableLint(_.state,[togglePanel.of(!0)])});let S=getPanel(_,LintPanel.open);return S&&S.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=_=>{let v=_.state.field(lintState,!1);return!v||!v.panel?!1:(_.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=_=>{let v=_.state.field(lintState,!1);if(!v)return!1;let S=_.state.selection.main,R=v.diagnostics.iter(S.to+1);return!R.value&&(R=v.diagnostics.iter(0),!R.value||R.from==S.from&&R.to==S.to)?!1:(_.dispatch({selection:{anchor:R.from,head:R.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(_){return{sources:_.map(v=>v.source).filter(v=>v!=null),...combineConfig(_.map(v=>v.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:combineFilter,tooltipFilter:combineFilter,needsRefresh:(v,S)=>v?S?R=>v(R)||S(R):v:S,hideOn:(v,S)=>v?S?(R,T,A)=>v(R,T,A)||S(R,T,A):v:S,autoPanel:(v,S)=>v||S})}}});function combineFilter(_,v){return _?v?(S,R)=>v(_(S,R),R):_:v}function assignKeys(_){let v=[];if(_)e:for(let{name:S}of _){for(let R=0;R<S.length;R++){let T=S[R];if(/[a-zA-Z]/.test(T)&&!v.some(A=>A.toLowerCase()==T.toLowerCase())){v.push(T);continue e}}v.push("")}return v}function renderDiagnostic(_,v,S){var R;let T=S?assignKeys(v.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+v.severity},crelt("span",{class:"cm-diagnosticText"},v.renderMessage?v.renderMessage(_):v.message),(R=v.actions)===null||R===void 0?void 0:R.map((A,k)=>{let M=!1,N=z=>{if(z.preventDefault(),M)return;M=!0;let F=findDiagnostic(_.state.field(lintState).diagnostics,v);F&&A.apply(_,F.from,F.to)},{name:D}=A,I=T[k]?D.indexOf(T[k]):-1,q=I<0?D:[D.slice(0,I),crelt("u",D.slice(I,I+1)),D.slice(I+1)],B=A.markClass?" "+A.markClass:"";return crelt("button",{type:"button",class:"cm-diagnosticAction"+B,onclick:N,onmousedown:N,"aria-label":` Action: ${D}${I<0?"":` (access key "${T[k]})"`}.`},q)}),v.source&&crelt("div",{class:"cm-diagnosticSource"},v.source))}class DiagnosticWidget extends WidgetType{constructor(v){super(),this.sev=v}eq(v){return v.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(v,S){this.diagnostic=S,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(v,S,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(v){this.view=v,this.items=[];let S=T=>{if(T.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(T.keyCode==38||T.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(T.keyCode==40||T.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(T.keyCode==36)this.moveSelection(0);else if(T.keyCode==35)this.moveSelection(this.items.length-1);else if(T.keyCode==13)this.view.focus();else if(T.keyCode>=65&&T.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:A}=this.items[this.selectedIndex],k=assignKeys(A.actions);for(let M=0;M<k.length;M++)if(k[M].toUpperCase().charCodeAt(0)==T.keyCode){let N=findDiagnostic(this.view.state.field(lintState).diagnostics,A);N&&A.actions[M].apply(v,N.from,N.to)}}else return;T.preventDefault()},R=T=>{for(let A=0;A<this.items.length;A++)this.items[A].dom.contains(T.target)&&this.moveSelection(A)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:S,onclick:R}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let v=this.view.state.field(lintState).selected;if(!v)return-1;for(let S=0;S<this.items.length;S++)if(this.items[S].diagnostic==v.diagnostic)return S;return-1}update(){let{diagnostics:v,selected:S}=this.view.state.field(lintState),R=0,T=!1,A=null,k=new Set;for(v.between(0,this.view.state.doc.length,(M,N,{spec:D})=>{for(let I of D.diagnostics){if(k.has(I))continue;k.add(I);let q=-1,B;for(let z=R;z<this.items.length;z++)if(this.items[z].diagnostic==I){q=z;break}q<0?(B=new PanelItem(this.view,I),this.items.splice(R,0,B),T=!0):(B=this.items[q],q>R&&(this.items.splice(R,q-R),T=!0)),S&&B.diagnostic==S.diagnostic?B.dom.hasAttribute("aria-selected")||(B.dom.setAttribute("aria-selected","true"),A=B):B.dom.hasAttribute("aria-selected")&&B.dom.removeAttribute("aria-selected"),R++}});R<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)T=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),T=!0),A?(this.list.setAttribute("aria-activedescendant",A.id),this.view.requestMeasure({key:this,read:()=>({sel:A.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:M,panel:N})=>{let D=N.height/this.list.offsetHeight;M.top<N.top?this.list.scrollTop-=(N.top-M.top)/D:M.bottom>N.bottom&&(this.list.scrollTop+=(M.bottom-N.bottom)/D)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),T&&this.sync()}sync(){let v=this.list.firstChild;function S(){let R=v;v=R.nextSibling,R.remove()}for(let R of this.items)if(R.dom.parentNode==this.list){for(;v!=R.dom;)S();v=R.dom.nextSibling}else this.list.insertBefore(R.dom,v);for(;v;)S()}moveSelection(v){if(this.selectedIndex<0)return;let S=this.view.state.field(lintState),R=findDiagnostic(S.diagnostics,this.items[v].diagnostic);R&&this.view.dispatch({selection:{anchor:R.from,head:R.to},scrollIntoView:!0,effects:movePanelSelection.of(R)})}static open(v){return new LintPanel(v)}}function svg(_,v='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${v}>${encodeURIComponent(_)}</svg>')`}function underline(_){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${_}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(_){return _=="error"?4:_=="warning"?3:_=="info"?2:1}function maxSeverity(_){let v="hint",S=1;for(let R of _){let T=severityWeight(R.severity);T>S&&(S=T,v=R.severity)}return v}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],_=>{let{selected:v,panel:S}=_.field(lintState);return!v||!S||v.from==v.to?Decoration.none:Decoration.set([activeMark.range(v.from,v.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function(v){v===void 0&&(v={});var{crosshairCursor:S=!1}=v,R=[];v.closeBracketsKeymap!==!1&&(R=R.concat(closeBracketsKeymap)),v.defaultKeymap!==!1&&(R=R.concat(defaultKeymap)),v.searchKeymap!==!1&&(R=R.concat(searchKeymap)),v.historyKeymap!==!1&&(R=R.concat(historyKeymap)),v.foldKeymap!==!1&&(R=R.concat(foldKeymap)),v.completionKeymap!==!1&&(R=R.concat(completionKeymap)),v.lintKeymap!==!1&&(R=R.concat(lintKeymap));var T=[];return v.lineNumbers!==!1&&T.push(lineNumbers()),v.highlightActiveLineGutter!==!1&&T.push(highlightActiveLineGutter()),v.highlightSpecialChars!==!1&&T.push(highlightSpecialChars()),v.history!==!1&&T.push(history()),v.foldGutter!==!1&&T.push(foldGutter()),v.drawSelection!==!1&&T.push(drawSelection()),v.dropCursor!==!1&&T.push(dropCursor()),v.allowMultipleSelections!==!1&&T.push(EditorState.allowMultipleSelections.of(!0)),v.indentOnInput!==!1&&T.push(indentOnInput()),v.syntaxHighlighting!==!1&&T.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),v.bracketMatching!==!1&&T.push(bracketMatching()),v.closeBrackets!==!1&&T.push(closeBrackets()),v.autocompletion!==!1&&T.push(autocompletion()),v.rectangularSelection!==!1&&T.push(rectangularSelection()),S!==!1&&T.push(crosshairCursor()),v.highlightActiveLine!==!1&&T.push(highlightActiveLine()),v.highlightSelectionMatches!==!1&&T.push(highlightSelectionMatches()),v.tabSize&&typeof v.tabSize=="number"&&T.push(indentUnit.of(" ".repeat(v.tabSize))),T.concat([keymap.of(R.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function(v){v===void 0&&(v={});var{indentWithTab:S=!0,editable:R=!0,readOnly:T=!1,theme:A="light",placeholder:k="",basicSetup:M=!0}=v,N=[];switch(S&&N.unshift(keymap.of([indentWithTab])),M&&(typeof M=="boolean"?N.unshift(basicSetup()):N.unshift(basicSetup(M))),k&&N.unshift(placeholder(k)),A){case"light":N.push(defaultLightThemeOption);break;case"dark":N.push(oneDark);break;case"none":break;default:N.push(A);break}return R===!1&&N.push(EditorView.editable.of(!1)),T&&N.push(EditorState.readOnly.of(!0)),[...N]},getStatistics=_=>({line:_.state.doc.lineAt(_.state.selection.main.from),lineCount:_.state.doc.lines,lineBreak:_.state.lineBreak,length:_.state.doc.length,readOnly:_.state.readOnly,tabSize:_.state.tabSize,selection:_.state.selection,selectionAsSingle:_.state.selection.asSingle().main,ranges:_.state.selection.ranges,selectionCode:_.state.sliceDoc(_.state.selection.main.from,_.state.selection.main.to),selections:_.state.selection.ranges.map(v=>_.state.sliceDoc(v.from,v.to)),selectedText:_.state.selection.ranges.some(v=>!v.empty)});class TimeoutLatch{constructor(v,S){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=S,this.timeoutMS=S,this.callbacks.push(v)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var v=this.callbacks.slice();this.callbacks.length=0,v.forEach(S=>{try{S()}catch(R){console.error("TimeoutLatch callback error:",R)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Scheduler{constructor(){this.interval=null,this.latches=new Set}add(v){this.latches.add(v),this.start()}remove(v){this.latches.delete(v),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(v=>{v.tick(),v.isDone&&this.remove(v)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var globalScheduler=null,getScheduler=()=>typeof window>"u"?new Scheduler:(globalScheduler||(globalScheduler=new Scheduler),globalScheduler),ExternalChange=Annotation.define(),TYPING_TIMOUT=200,emptyExtensions=[];function useCodeMirror(_){var{value:v,selection:S,onChange:R,onStatistics:T,onCreateEditor:A,onUpdate:k,extensions:M=emptyExtensions,autoFocus:N,theme:D="light",height:I=null,minHeight:q=null,maxHeight:B=null,width:z=null,minWidth:F=null,maxWidth:V=null,placeholder:H="",editable:W=!0,readOnly:Y=!1,indentWithTab:Z=!0,basicSetup:J=!0,root:ne,initialState:oe}=_,[te,se]=reactExports.useState(),[le,ue]=reactExports.useState(),[ce,ge]=reactExports.useState(),me=reactExports.useState(()=>({current:null}))[0],Ee=reactExports.useState(()=>({current:null}))[0],_e=EditorView.theme({"&":{height:I,minHeight:q,maxHeight:B,width:z,minWidth:F,maxWidth:V},"& .cm-scroller":{height:"100% !important"}}),ye=EditorView.updateListener.of(De=>{if(De.docChanged&&typeof R=="function"&&!De.transactions.some(we=>we.annotation(ExternalChange))){me.current?me.current.reset():(me.current=new TimeoutLatch(()=>{if(Ee.current){var we=Ee.current;Ee.current=null,we()}me.current=null},TYPING_TIMOUT),getScheduler().add(me.current));var xe=De.state.doc,pe=xe.toString();R(pe,De)}T&&T(getStatistics(De))}),be=getDefaultExtensions({theme:D,editable:W,readOnly:Y,placeholder:H,indentWithTab:Z,basicSetup:J}),Se=[ye,_e,...be];return k&&typeof k=="function"&&Se.push(EditorView.updateListener.of(k)),Se=Se.concat(M),reactExports.useLayoutEffect(()=>{if(te&&!ce){var De={doc:v,selection:S,extensions:Se},xe=oe?EditorState.fromJSON(oe.json,De,oe.fields):EditorState.create(De);if(ge(xe),!le){var pe=new EditorView({state:xe,parent:te,root:ne});ue(pe),A&&A(pe,xe)}}return()=>{le&&(ge(void 0),ue(void 0))}},[te,ce]),reactExports.useEffect(()=>{_.container&&se(_.container)},[_.container]),reactExports.useEffect(()=>()=>{le&&(le.destroy(),ue(void 0)),me.current&&(me.current.cancel(),me.current=null)},[le]),reactExports.useEffect(()=>{N&&le&&le.focus()},[N,le]),reactExports.useEffect(()=>{le&&le.dispatch({effects:StateEffect.reconfigure.of(Se)})},[D,M,I,q,B,z,F,V,H,W,Y,Z,J,R,k]),reactExports.useEffect(()=>{if(v!==void 0){var De=le?le.state.doc.toString():"";if(le&&v!==De){var xe=me.current&&!me.current.isDone,pe=()=>{le&&v!==le.state.doc.toString()&&le.dispatch({changes:{from:0,to:le.state.doc.toString().length,insert:v||""},annotations:[ExternalChange.of(!0)]})};xe?Ee.current=pe:pe()}}},[v,le]),{state:ce,setState:ge,view:le,setView:ue,container:te,setContainer:se}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((_,v)=>{var{className:S,value:R="",selection:T,extensions:A=[],onChange:k,onStatistics:M,onCreateEditor:N,onUpdate:D,autoFocus:I,theme:q="light",height:B,minHeight:z,maxHeight:F,width:V,minWidth:H,maxWidth:W,basicSetup:Y,placeholder:Z,indentWithTab:J,editable:ne,readOnly:oe,root:te,initialState:se}=_,le=_objectWithoutPropertiesLoose(_,_excluded),ue=reactExports.useRef(null),{state:ce,view:ge,container:me,setContainer:Ee}=useCodeMirror({root:te,value:R,autoFocus:I,theme:q,height:B,minHeight:z,maxHeight:F,width:V,minWidth:H,maxWidth:W,basicSetup:Y,placeholder:Z,indentWithTab:J,editable:ne,readOnly:oe,selection:T,onChange:k,onStatistics:M,onCreateEditor:N,onUpdate:D,extensions:A,initialState:se});reactExports.useImperativeHandle(v,()=>({editor:ue.current,state:ce,view:ge}),[ue,me,ce,ge]);var _e=reactExports.useCallback(be=>{ue.current=be,Ee(be)},[Ee]);if(typeof R!="string")throw new Error("value must be typeof string but got "+typeof R);var ye=typeof q=="string"?"cm-theme-"+q:"cm-theme";return jsxRuntimeExports.jsx("div",_extends({ref:_e,className:""+ye+(S?" "+S:"")},le))});ReactCodeMirror.displayName="CodeMirror";const ccsHighlightStyle=HighlightStyle.define([{tag:tags.typeName,color:"#00796b",fontWeight:"bold"},{tag:tags.keyword,color:"#7e57c2"},{tag:tags.variableName,color:"#1976d2"},{tag:tags.labelName,color:"#1976d2",textDecoration:"overline",textDecorationThickness:"1px"},{tag:tags.operator,color:"#546e7a"},{tag:tags.punctuation,color:"#546e7a"},{tag:tags.lineComment,color:"#90a4ae",fontStyle:"italic"},{tag:tags.invalid,color:"red",borderBottom:"1px dotted red"}]),ccsLanguage=StreamLanguage.define({token:_=>_.eatSpace()?null:_.match("//")?(_.skipToEnd(),"lineComment"):_.match(/^'[a-z][a-zA-Z0-9_]*/)?"labelName":_.match(/^tau\b/)?"atom":_.match(/^[a-z][a-zA-Z0-9_]*/)?"variableName":_.match(/^[A-Z][a-zA-Z0-9_]*/)?"typeName":_.match(/^(Nil|0|def)\b/)?"keyword":_.match(/^[.|=+\\\/]/)?"operator":_.match(/^[\(\)\{\}\[\],]/)?"punctuation":(_.next(),"invalid")}),highlightTheme=EditorView.baseTheme({".cm-ast-highlight":{backgroundColor:"rgba(255, 59, 59, 0.3)"}});function TextEditor({initValue:_,onTextChange:v,highlightRange:S,disabled:R,className:T,...A}){const[k,M]=reactExports.useState(_??""),N=reactExports.useCallback(I=>{M(I),v&&v(I)},[v]),D=reactExports.useMemo(()=>{if(!S)return[];const I=Decoration.mark({class:"cm-ast-highlight"}),q=Decoration.set([I.range(S.from,S.to)]);return EditorView.decorations.of(q)},[S]);return jsxRuntimeExports.jsx("div",{className:cn$1("flex",T),...A,children:jsxRuntimeExports.jsx(ReactCodeMirror,{value:k,style:{fontSize:"1.2em",flex:1},readOnly:R,editable:!R,basicSetup:{closeBrackets:!1},extensions:[ccsLanguage,syntaxHighlighting(ccsHighlightStyle),highlightTheme,D,EditorView.theme({"&":{height:"100%",maxHeight:"500px"}})],onChange:N})})}var peggy_min$1={exports:{}},peggy_min=peggy_min$1.exports,hasRequiredPeggy_min;function requirePeggy_min(){return hasRequiredPeggy_min||(hasRequiredPeggy_min=1,(function(module,exports){function _array_like_to_array(_,v){(v==null||v>_.length)&&(v=_.length);for(var S=0,R=new Array(v);S<v;S++)R[S]=_[S];return R}function _array_with_holes(_){if(Array.isArray(_))return _}function _array_without_holes(_){if(Array.isArray(_))return _array_like_to_array(_)}function _assert_this_initialized(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _call_super(_,v,S){return v=_get_prototype_of(v),_possible_constructor_return(_,_is_native_reflect_construct()?Reflect.construct(v,S||[],_get_prototype_of(_).constructor):v.apply(_,S))}function _class_call_check(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function _construct(_,v,S){return _is_native_reflect_construct()?_construct=Reflect.construct:_construct=function(R,T,A){var k=[null];k.push.apply(k,T);var M=Function.bind.apply(R,k),N=new M;return A&&_set_prototype_of(N,A.prototype),N},_construct.apply(null,arguments)}function _defineProperties(_,v){for(var S=0;S<v.length;S++){var R=v[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,R.key,R)}}function _create_class(_,v,S){return v&&_defineProperties(_.prototype,v),S&&_defineProperties(_,S),_}function _define_property(_,v,S){return v in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}function _get(_,v,S){return typeof Reflect<"u"&&Reflect.get?_get=Reflect.get:_get=function(R,T,A){var k=_super_prop_base(R,T);if(k){var M=Object.getOwnPropertyDescriptor(k,T);return M.get?M.get.call(A||R):M.value}},_get(_,v,S||_)}function _get_prototype_of(_){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},_get_prototype_of(_)}function _inherits(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&_set_prototype_of(_,v)}function _instanceof(_,v){return v!=null&&typeof Symbol<"u"&&v[Symbol.hasInstance]?!!v[Symbol.hasInstance](_):_ instanceof v}function _is_native_function(_){return Function.toString.call(_).indexOf("[native code]")!==-1}function _iterable_to_array(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _iterable_to_array_limit(_,v){var S=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(S!=null){var R=[],T=!0,A=!1,k,M;try{for(S=S.call(_);!(T=(k=S.next()).done)&&(R.push(k.value),!(v&&R.length===v));T=!0);}catch(N){A=!0,M=N}finally{try{!T&&S.return!=null&&S.return()}finally{if(A)throw M}}return R}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(_){for(var v=1;v<arguments.length;v++){var S=arguments[v]!=null?arguments[v]:{},R=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(S).filter(function(T){return Object.getOwnPropertyDescriptor(S,T).enumerable}))),R.forEach(function(T){_define_property(_,T,S[T])})}return _}function ownKeys(_,v){var S=Object.keys(_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(_);S.push.apply(S,R)}return S}function _object_spread_props(_,v){return v=v??{},Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(v)):ownKeys(Object(v)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(v,S))}),_}function _possible_constructor_return(_,v){return v&&(_type_of(v)==="object"||typeof v=="function")?v:_assert_this_initialized(_)}function _set_prototype_of(_,v){return _set_prototype_of=Object.setPrototypeOf||function(S,R){return S.__proto__=R,S},_set_prototype_of(_,v)}function _sliced_to_array(_,v){return _array_with_holes(_)||_iterable_to_array_limit(_,v)||_unsupported_iterable_to_array(_,v)||_non_iterable_rest()}function _super_prop_base(_,v){for(;!Object.prototype.hasOwnProperty.call(_,v)&&(_=_get_prototype_of(_),_!==null););return _}function _to_consumable_array(_){return _array_without_holes(_)||_iterable_to_array(_)||_unsupported_iterable_to_array(_)||_non_iterable_spread()}function _type_of(_){"@swc/helpers - typeof";return _&&typeof Symbol<"u"&&_.constructor===Symbol?"symbol":typeof _}function _unsupported_iterable_to_array(_,v){if(_){if(typeof _=="string")return _array_like_to_array(_,v);var S=Object.prototype.toString.call(_).slice(8,-1);if(S==="Object"&&_.constructor&&(S=_.constructor.name),S==="Map"||S==="Set")return Array.from(S);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return _array_like_to_array(_,v)}}function _wrap_native_super(_){var v=typeof Map=="function"?new Map:void 0;return _wrap_native_super=function(S){if(S===null||!_is_native_function(S))return S;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v<"u"){if(v.has(S))return v.get(S);v.set(S,R)}function R(){return _construct(S,arguments,_get_prototype_of(this).constructor)}return R.prototype=Object.create(S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(R,S)},_wrap_native_super(_)}function _is_native_reflect_construct(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_is_native_reflect_construct=function(){return!!_})()}(function(_,v){_type_of(exports)=="object"&&_type_of(module)<"u"?module.exports=v():_.peggy=v()})((typeof globalThis>"u"?"undefined":_type_of(globalThis))<"u"?globalThis:(typeof self>"u"?"undefined":_type_of(self))<"u"?self:peggy_min,function(){var exports={},__exports=exports,module={exports},U=function(_,v){return function(){return v||_((v={exports:{}}).exports,v),v.exports}},Ve=U(function(_,v){var S=(function(){function R(T,A){_class_call_check(this,R),this.source=T,this.start=A}return _create_class(R,[{key:"toString",value:function(){return String(this.source)}},{key:"offset",value:function(T){return{line:T.line+this.start.line-1,column:T.line===1?T.column+this.start.column-1:T.column,offset:T.offset+this.start.offset}}}],[{key:"offsetStart",value:function(T){return T.source&&typeof T.source.offset=="function"?T.source.offset(T.start):T.start}},{key:"offsetEnd",value:function(T){return T.source&&typeof T.source.offset=="function"?T.source.offset(T.end):T.end}}]),R})();v.exports=S}),ft=U(function(_,v){var S=Ve(),R=(function(T){_inherits(A,T);function A(k,M,N){_class_call_check(this,A);var D;return D=_call_super(this,A,[k]),D.name="GrammarError",D.location=M,N===void 0&&(N=[]),D.diagnostics=N,D.stage=null,D.problems=[["error",k,M,N]],D}return _create_class(A,[{key:"toString",value:function(){var M=_get(_get_prototype_of(A.prototype),"toString",this).call(this);this.location&&(M+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(M+="".concat(this.location.source,":")),M+="".concat(this.location.start.line,":").concat(this.location.start.column));var N=!0,D=!1,I=void 0;try{for(var q=this.diagnostics[Symbol.iterator](),B;!(N=(B=q.next()).done);N=!0){var z=B.value;M+=`
 from `,z.location.source!==void 0&&z.location.source!==null&&(M+="".concat(z.location.source,":")),M+="".concat(z.location.start.line,":").concat(z.location.start.column,": ").concat(z.message)}}catch(F){D=!0,I=F}finally{try{!N&&q.return!=null&&q.return()}finally{if(D)throw I}}return M}},{key:"format",value:function(k){var M=k.map(function(I){var q=I.source,B=I.text;return{source:q,text:B!=null?String(B).split(/\r\n|\n|\r/g):[]}});function N(I,q){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",z="",F=M.find(function(J){var ne=J.source;return ne===I.source}),V=I.start,H=S.offsetStart(I);if(F){var W=I.end,Y=F.text[V.line-1],Z=(V.line===W.line?W.column:Y.length+1)-V.column||1;B&&(z+=`
note: `.concat(B)),z+=`
 --> `.concat(I.source,":").concat(H.line,":").concat(H.column,`
`).concat("".padEnd(q),` |
`).concat(H.line.toString().padStart(q)," | ").concat(Y,`
`).concat("".padEnd(q)," | ").concat("".padEnd(V.column-1)).concat("".padEnd(Z,"^"))}else z+=`
 at `.concat(I.source,":").concat(H.line,":").concat(H.column),B&&(z+=": ".concat(B));return z}function D(I,q,B){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],F=-1/0;B?F=z.reduce(function(oe,te){var se=te.location;return Math.max(oe,S.offsetStart(se).line)},B.start.line):F=Math.max.apply(null,z.map(function(oe){return oe.location.start.line})),F=F.toString().length;var V="".concat(I,": ").concat(q);B&&(V+=N(B,F));var H=!0,W=!1,Y=void 0;try{for(var Z=z[Symbol.iterator](),J;!(H=(J=Z.next()).done);H=!0){var ne=J.value;V+=N(ne.location,F,ne.message)}}catch(oe){W=!0,Y=oe}finally{try{!H&&Z.return!=null&&Z.return()}finally{if(W)throw Y}}return V}return this.problems.filter(function(I){return I[0]!=="info"}).map(function(I){return D.apply(void 0,_to_consumable_array(I))}).join(`

`)}}]),A})(_wrap_native_super(SyntaxError));v.exports=R}),K=U(function(_,v){var S={build:function(R){function T(D){for(var I=arguments.length,q=new Array(I>1?I-1:0),B=1;B<I;B++)q[B-1]=arguments[B];var z;return(z=R)[D.type].apply(z,[D].concat(_to_consumable_array(q)))}function A(){}function k(D){for(var I=arguments.length,q=new Array(I>1?I-1:0),B=1;B<I;B++)q[B-1]=arguments[B];return T.apply(void 0,[D.expression].concat(_to_consumable_array(q)))}function M(D){return function(I){for(var q=arguments.length,B=new Array(q>1?q-1:0),z=1;z<q;z++)B[z-1]=arguments[z];I[D].forEach(function(F){return T.apply(void 0,[F].concat(_to_consumable_array(B)))})}}var N={grammar:function(D){for(var I=arguments.length,q=new Array(I>1?I-1:0),B=1;B<I;B++)q[B-1]=arguments[B];var z=!0,F=!1,V=void 0;try{for(var H=D.imports[Symbol.iterator](),W;!(z=(W=H.next()).done);z=!0){var Y=W.value;T.apply(void 0,[Y].concat(_to_consumable_array(q)))}}catch(_e){F=!0,V=_e}finally{try{!z&&H.return!=null&&H.return()}finally{if(F)throw V}}var Z=!0,J=!1,ne=void 0;if(D.topLevelInitializer)if(Array.isArray(D.topLevelInitializer))try{for(var oe=D.topLevelInitializer[Symbol.iterator](),te;!(Z=(te=oe.next()).done);Z=!0){var se=te.value;T.apply(void 0,[se].concat(_to_consumable_array(q)))}}catch(_e){J=!0,ne=_e}finally{try{!Z&&oe.return!=null&&oe.return()}finally{if(J)throw ne}}else T.apply(void 0,[D.topLevelInitializer].concat(_to_consumable_array(q)));var le=!0,ue=!1,ce=void 0;if(D.initializer)if(Array.isArray(D.initializer))try{for(var ge=D.initializer[Symbol.iterator](),me;!(le=(me=ge.next()).done);le=!0){var Ee=me.value;T.apply(void 0,[Ee].concat(_to_consumable_array(q)))}}catch(_e){ue=!0,ce=_e}finally{try{!le&&ge.return!=null&&ge.return()}finally{if(ue)throw ce}}else T.apply(void 0,[D.initializer].concat(_to_consumable_array(q)));D.rules.forEach(function(_e){return T.apply(void 0,[_e].concat(_to_consumable_array(q)))})},grammar_import:A,top_level_initializer:A,initializer:A,rule:k,named:k,choice:M("alternatives"),action:k,sequence:M("elements"),labeled:k,text:k,simple_and:k,simple_not:k,optional:k,zero_or_more:k,one_or_more:k,repeated:function(D){for(var I=arguments.length,q=new Array(I>1?I-1:0),B=1;B<I;B++)q[B-1]=arguments[B];return D.delimiter&&T.apply(void 0,[D.delimiter].concat(_to_consumable_array(q))),T.apply(void 0,[D.expression].concat(_to_consumable_array(q)))},group:k,semantic_and:A,semantic_not:A,rule_ref:A,library_ref:A,literal:A,class:A,any:A};return Object.keys(N).forEach(function(D){Object.prototype.hasOwnProperty.call(R,D)||(R[D]=N[D])}),T}};v.exports=S}),he=U(function(_,v){var S=function(A,k){if(!(A&&k))return A||k;var M=Array.isArray(A)?A:[A];return M.push(k),M},R=K(),T={findRule:function(A,k){for(var M=0;M<A.rules.length;M++)if(A.rules[M].name===k)return A.rules[M]},indexOfRule:function(A,k){for(var M=0;M<A.rules.length;M++)if(A.rules[M].name===k)return M;return-1},alwaysConsumesOnSuccess:function(A,k){function M(){return!0}function N(){return!1}var D=R.build({choice:function(I){return I.alternatives.every(D)},sequence:function(I){return I.elements.some(D)},simple_and:N,simple_not:N,optional:N,zero_or_more:N,repeated:function(I){var q=I.min?I.min:I.max;return q.type!=="constant"||q.value===0?!1:!!(D(I.expression)||q.value>1&&I.delimiter&&D(I.delimiter))},semantic_and:N,semantic_not:N,rule_ref:function(I){var q=T.findRule(A,I.name);return q?D(q):void 0},library_ref:N,literal:function(I){return I.value!==""},class:M,any:M});return D(k)},combine:function(A){return A.reduce(function(k,M){return k.topLevelInitializer=S(k.topLevelInitializer,M.topLevelInitializer),k.initializer=S(k.initializer,M.initializer),k.rules=k.rules.concat(M.rules),k})}};v.exports=T}),Xs=U(function(_,v){var S=function(R){var T=0,A=!0,k=!1,M=void 0;try{for(var N=R.imports[Symbol.iterator](),D;!(A=(D=N.next()).done);A=!0){var I=D.value,q=!0,B=!1,z=void 0;try{for(var F=I.what[Symbol.iterator](),V;!(q=(V=F.next()).done);q=!0){var H=V.value,W=void 0;switch(H.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":W=H.binding;break;case"import_binding_rename":W=H.rename;break;default:throw new TypeError("Unknown binding type")}R.rules.push({type:"rule",name:H.binding,nameLocation:H.location,expression:{type:"library_ref",name:W,library:I.from.module,libraryNumber:T,location:H.location},location:I.from.location})}}catch(Y){B=!0,z=Y}finally{try{!q&&F.return!=null&&F.return()}finally{if(B)throw z}}T++}}catch(Y){k=!0,M=Y}finally{try{!A&&N.return!=null&&N.return()}finally{if(k)throw M}}};v.exports=S}),Ks=U(function(_,v){var S=function(A,k){var M=0,N=!0,D=!1,I=void 0;try{for(var q=A.imports[Symbol.iterator](),B;!(N=(B=q.next()).done);N=!0){var z=B.value,F=!0,V=!1,H=void 0;try{for(var W=z.what[Symbol.iterator](),Y;!(F=(Y=W.next()).done);F=!0){var Z=Y.value;if(Z.type==="import_binding_all"&&Z.binding===k)return M}}catch(J){V=!0,H=J}finally{try{!F&&W.return!=null&&W.return()}finally{if(V)throw H}}M++}}catch(J){D=!0,I=J}finally{try{!N&&q.return!=null&&q.return()}finally{if(D)throw I}}return-1},R=function(A,k,M){T.build({library_ref:function(N){N.libraryNumber===-1&&(N.libraryNumber=S(A,N.library),N.libraryNumber===-1&&M.error('Unknown module "'.concat(N.library,'"'),N.location))}})(A)},T=K();v.exports=R}),Ht=U(function(_,v){var S={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};v.exports=S}),tr=U(function(_,v){var S=(function(){function R(T){_class_call_check(this,R),this.options=_object_spread({stringify:String,convert:function(A){return A}},T),this.items=[],this.offsets=Object.create(null)}return _create_class(R,[{key:"add",value:function(T){var A=this.options.convert(T);if(!A)return-1;var k=this.options.stringify(A),M=this.offsets[k];return M===void 0&&(M=this.items.push(A)-1,this.offsets[k]=M),M}},{key:"get",value:function(T){return this.items[T]}},{key:"map",value:function(T){return this.items.map(T)}}]),R})();v.exports=S}),ht=U(function(_,v){var S=function(D){function I(V){return V.match=M}function q(V){return F(V.expression),V.match=k}function B(V){return V.match=F(V.expression)}function z(V,H){for(var W=V.length,Y=0,Z=0,J=0;J<W;++J){var ne=F(V[J]);ne===k&&++Y,ne===N&&++Z}return Y===W?k:H?Z===W?N:M:Z>0?N:M}var F=R.build({rule:function(V){var H,W=0;if(_type_of(V.match)>"u"){V.match=M;do if(H=V.match,V.match=F(V.expression),++W>6)throw new A("Infinity cycle detected when trying to evaluate node match result",V.location);while(H!==V.match)}return V.match},named:B,choice:function(V){return V.match=z(V.alternatives,!0)},action:B,sequence:function(V){return V.match=z(V.elements,!1)},labeled:B,text:B,simple_and:B,simple_not:function(V){return V.match=-F(V.expression)},optional:q,zero_or_more:q,one_or_more:B,repeated:function(V){var H=F(V.expression),W=V.delimiter?F(V.delimiter):N,Y=V.min?V.min:V.max;return Y.type!=="constant"||V.max.type!=="constant"?V.match=M:V.max.value===0||V.max.value!==null&&Y.value>V.max.value?V.match=N:H===N?V.match=Y.value===0?k:N:H===k?V.delimiter&&Y.value>=2?V.match=W:V.match=k:V.delimiter&&Y.value>=2?V.match=W===N?N:M:V.match=Y.value===0?k:M},group:B,semantic_and:I,semantic_not:I,rule_ref:function(V){var H=T.findRule(D,V.name);return H?V.match=F(H):M},library_ref:function(){return 0},literal:function(V){var H=V.value.length===0?k:M;return V.match=H},class:function(V){var H=V.parts.length===0?N:M;return V.match=H},any:I});F(D)},R=K(),T=he(),A=ft(),k=1,M=0,N=-1;S.ALWAYS_MATCH=k,S.SOMETIMES_MATCH=M,S.NEVER_MATCH=N,v.exports=S}),ir=U(function(_,v){var S=function(q,B){var z=new k,F=new k({stringify:JSON.stringify,convert:function(xe){return{value:xe.parts,inverted:xe.inverted,ignoreCase:xe.ignoreCase,unicode:xe.unicode}}}),V=new k({stringify:JSON.stringify}),H=new k,W=[],Y=[];function Z(xe,pe,we){var Oe={predicate:xe,params:pe,body:we.code,location:we.codeLocation},Ce=JSON.stringify(Oe),Pe=W.findIndex(function(Ne){return JSON.stringify(Ne)===Ce});return Pe===-1?W.push(Oe)-1:Pe}function J(xe){return Y.push(xe)-1}function ne(xe){var pe={};return Object.keys(xe).forEach(function(we){pe[we]=xe[we]}),pe}function oe(xe){for(var pe=arguments.length,we=new Array(pe>1?pe-1:0),Oe=1;Oe<pe;Oe++)we[Oe-1]=arguments[Oe];var Ce;return(Ce=xe).concat.apply(Ce,_to_consumable_array(we))}function te(xe,pe,we,Oe){return xe===N?we:xe===I?Oe:pe.concat([we.length,Oe.length],we,Oe)}function se(xe,pe){return xe.concat([pe.length],pe)}function le(xe,pe,we,Oe){var Ce=Object.keys(we).map(function(Pe){return Oe-we[Pe]});return[T.CALL,xe,pe,Ce.length].concat(Ce)}function ue(xe,pe,we){var Oe=xe.match||0;return oe([T.PUSH_CURR_POS],[T.SILENT_FAILS_ON],De(xe,{sp:we.sp+1,env:ne(we.env),action:null}),[T.SILENT_FAILS_OFF],te(pe?-Oe:Oe,[pe?T.IF_ERROR:T.IF_NOT_ERROR],oe([T.POP],[pe?T.POP:T.POP_CURR_POS],[T.PUSH_UNDEFINED]),oe([T.POP],[pe?T.POP_CURR_POS:T.POP],[T.PUSH_FAILED])))}function ce(xe,pe,we){var Oe=Z(!0,Object.keys(we.env),xe);return oe([T.UPDATE_SAVED_POS],le(Oe,0,we.env,we.sp),te(xe.match||0,[T.IF],oe([T.POP],pe?[T.PUSH_FAILED]:[T.PUSH_UNDEFINED]),oe([T.POP],pe?[T.PUSH_UNDEFINED]:[T.PUSH_FAILED])))}function ge(xe){return se([T.WHILE_NOT_ERROR],oe([T.APPEND],xe))}function me(xe){var pe=xe;return new Error('Unknown boundary type "'.concat(pe.type,'" for the "repeated" node'))}function Ee(xe,pe,we,Oe){switch(xe.type){case"constant":return{pre:[],post:[],sp:we};case"variable":return xe.sp=Oe+we-pe[xe.value],{pre:[],post:[],sp:we};case"function":{xe.sp=Oe;var Ce=Z(!0,Object.keys(pe),{code:xe.value,codeLocation:xe.codeLocation});return{pre:le(Ce,0,pe,we),post:[T.NIP],sp:we+1}}default:throw me(xe)}}function _e(xe,pe){if(pe.value!==null){var we=pe.type==="constant"?[T.IF_GE,pe.value]:[T.IF_GE_DYNAMIC,pe.sp||0];return te(D,we,[T.PUSH_FAILED],xe)}return xe}function ye(xe,pe){var we=pe.type==="constant"?[T.IF_LT,pe.value]:[T.IF_LT_DYNAMIC,pe.sp||0];return oe(xe,te(D,we,[T.POP,T.POP_CURR_POS,T.PUSH_FAILED],[T.NIP]))}function be(xe,pe,we,Oe,Ce){return xe?oe([T.PUSH_CURR_POS],De(xe,{sp:Oe.sp+Ce+1,env:ne(Oe.env),action:null}),te(xe.match||0,[T.IF_NOT_ERROR],oe([T.POP],we,te(-pe,[T.IF_ERROR],[T.POP,T.POP_CURR_POS,T.PUSH_FAILED],[T.NIP])),[T.NIP])):we}function Se(xe){return B&&B.output==="source-and-map"&&Object.keys(xe).forEach(function(pe){var we=xe[pe];xe[pe]=function(Oe){for(var Ce=arguments.length,Pe=new Array(Ce>1?Ce-1:0),Ne=1;Ne<Ce;Ne++)Pe[Ne-1]=arguments[Ne];var Te=we.apply(void 0,[Oe].concat(_to_consumable_array(Pe)));return Te===void 0||!Oe.location?Te:oe([T.SOURCE_MAP_PUSH,J(Oe.location)],Te,[T.SOURCE_MAP_POP])}}),A.build(xe)}var De=Se({grammar:function(xe){xe.rules.forEach(De),xe.literals=z.items,xe.classes=F.items,xe.expectations=V.items,xe.importedNames=H.items,xe.functions=W,xe.locations=Y},rule:function(xe){xe.bytecode=De(xe.expression,{sp:-1,env:{},pluck:[],action:null})},named:function(xe,pe){var we=xe.match||0,Oe=we===N?-1:V.add({type:"rule",value:xe.name});return oe([T.SILENT_FAILS_ON],De(xe.expression,pe),[T.SILENT_FAILS_OFF],te(-we,[T.IF_ERROR],[T.FAIL,Oe],[]))},choice:function(xe,pe){function we(Oe,Ce){var Pe=Oe[0].match||0,Ne=De(Oe[0],{sp:Ce.sp,env:ne(Ce.env),action:null});return Pe===N?Ne:oe(Ne,Oe.length>1?te(D,[T.IF_ERROR],oe([T.POP],we(Oe.slice(1),Ce)),[]):[])}return we(xe.alternatives,pe)},action:function(xe,pe){var we=ne(pe.env),Oe=xe.expression.type!=="sequence"||xe.expression.elements.length===0,Ce=De(xe.expression,{sp:pe.sp+(Oe?1:0),env:we,action:xe}),Pe=xe.expression.match||0,Ne=Oe&&Pe!==I?Z(!1,Object.keys(we),xe):-1;return Oe?oe([T.PUSH_CURR_POS],Ce,te(Pe,[T.IF_NOT_ERROR],oe([T.LOAD_SAVED_POS,1],le(Ne,1,we,pe.sp+2)),[]),[T.NIP]):Ce},sequence:function(xe,pe){function we(Oe,Ce){if(Oe.length>0){var Pe=xe.elements.length-Oe.length+1;return oe(De(Oe[0],{sp:Ce.sp,env:Ce.env,pluck:Ce.pluck,action:null}),te(Oe[0].match||0,[T.IF_NOT_ERROR],we(Oe.slice(1),{sp:Ce.sp+1,env:Ce.env,pluck:Ce.pluck,action:Ce.action}),oe(Pe>1?[T.POP_N,Pe]:[T.POP],[T.POP_CURR_POS],[T.PUSH_FAILED])))}else{if(Ce.pluck&&Ce.pluck.length>0)return oe([T.PLUCK,xe.elements.length+1,Ce.pluck.length],Ce.pluck.map(function(Te){return Ce.sp-Te}));if(Ce.action){var Ne=Z(!1,Object.keys(Ce.env),Ce.action);return oe([T.LOAD_SAVED_POS,xe.elements.length],le(Ne,xe.elements.length+1,Ce.env,Ce.sp))}else return oe([T.WRAP,xe.elements.length],[T.NIP])}}return oe([T.PUSH_CURR_POS],we(xe.elements,{sp:pe.sp+1,env:pe.env,pluck:[],action:pe.action}))},labeled:function(xe,pe){var we=pe.env,Oe=xe.label,Ce=pe.sp+1;Oe&&(we=ne(pe.env),pe.env[Oe]=Ce),xe.pick&&pe.pluck.push(Ce);var Pe=De(xe.expression,{sp:pe.sp,env:we,action:null});return Oe&&xe.labelLocation&&B&&B.output==="source-and-map"?oe([T.SOURCE_MAP_LABEL_PUSH,Ce,z.add(Oe),J(xe.labelLocation)],Pe,[T.SOURCE_MAP_LABEL_POP,Ce]):Pe},text:function(xe,pe){return oe([T.PUSH_CURR_POS],De(xe.expression,{sp:pe.sp+1,env:ne(pe.env),action:null}),te(xe.match||0,[T.IF_NOT_ERROR],oe([T.POP],[T.TEXT]),[T.NIP]))},simple_and:function(xe,pe){return ue(xe.expression,!1,pe)},simple_not:function(xe,pe){return ue(xe.expression,!0,pe)},optional:function(xe,pe){return oe(De(xe.expression,{sp:pe.sp,env:ne(pe.env),action:null}),te(-(xe.expression.match||0),[T.IF_ERROR],oe([T.POP],[T.PUSH_NULL]),[]))},zero_or_more:function(xe,pe){var we=De(xe.expression,{sp:pe.sp+1,env:ne(pe.env),action:null});return oe([T.PUSH_EMPTY_ARRAY],we,ge(we),[T.POP])},one_or_more:function(xe,pe){var we=De(xe.expression,{sp:pe.sp+1,env:ne(pe.env),action:null});return oe([T.PUSH_EMPTY_ARRAY],we,te(xe.expression.match||0,[T.IF_NOT_ERROR],oe(ge(we),[T.POP]),oe([T.POP],[T.POP],[T.PUSH_FAILED])))},repeated:function(xe,pe){var we=xe.min?xe.min:xe.max,Oe=we.type!=="constant"||we.value>0,Ce=xe.max.type!=="constant"&&xe.max.value!==null,Pe=Oe?2:1,Ne=xe.min?Ee(xe.min,pe.env,pe.sp,2+(xe.max.type==="function"?1:0)):{pre:[],post:[],sp:pe.sp},Te=Ee(xe.max,pe.env,Ne.sp,Pe),ze=De(xe.expression,{sp:Te.sp+Pe,env:ne(pe.env),action:null}),Fe=xe.delimiter!==null?De(xe.expression,{sp:Te.sp+Pe+1,env:ne(pe.env),action:null}):ze,Ie=be(xe.delimiter,xe.expression.match||0,Fe,pe,Pe),Le=_e(Ie,xe.max),$e=Ce?_e(ze,xe.max):ze,qe=oe(Oe?[T.PUSH_CURR_POS]:[],[T.PUSH_EMPTY_ARRAY],$e,ge(Le),[T.POP]);return oe(Ne.pre,Te.pre,Oe?ye(qe,we):qe,Te.post,Ne.post)},group:function(xe,pe){return De(xe.expression,{sp:pe.sp,env:ne(pe.env),action:null})},semantic_and:function(xe,pe){return ce(xe,!1,pe)},semantic_not:function(xe,pe){return ce(xe,!0,pe)},rule_ref:function(xe){return[T.RULE,R.indexOfRule(q,xe.name)]},library_ref:function(xe){return[T.LIBRARY_RULE,xe.libraryNumber,H.add(xe.name)]},literal:function(xe){if(xe.value.length>0){var pe=xe.match||0,we=pe===D||pe===N&&!xe.ignoreCase?z.add(xe.ignoreCase?xe.value.toLowerCase():xe.value):-1,Oe=pe!==N?V.add({type:"literal",value:xe.value,ignoreCase:xe.ignoreCase}):-1;return te(pe,xe.ignoreCase?[T.MATCH_STRING_IC,we]:[T.MATCH_STRING,we],xe.ignoreCase?[T.ACCEPT_N,xe.value.length]:[T.ACCEPT_STRING,we],[T.FAIL,Oe])}return[T.PUSH_EMPTY_STRING]},class:function(xe){var pe=xe.match||0,we=pe===D?F.add(xe):-1,Oe=pe!==N?V.add({type:"class",value:xe.parts,inverted:xe.inverted,ignoreCase:xe.ignoreCase,unicode:xe.unicode}):-1;return te(pe,[xe.unicode?T.MATCH_UNICODE_CLASS:T.MATCH_CHAR_CLASS,we],[T.ACCEPT_N,xe.unicode?-1:1],[T.FAIL,Oe])},any:function(xe){var pe=xe.match||0,we=pe!==N?V.add({type:"any"}):-1;return te(pe,[T.MATCH_ANY],[T.ACCEPT_N,1],[T.FAIL,we])}});De(q)},R=he(),T=Ht(),A=K(),k=tr(),M=ht(),N=M.ALWAYS_MATCH,D=M.SOMETIMES_MATCH,I=M.NEVER_MATCH;v.exports=S}),lr=U(function(_){var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_.encode=function(S){if(0<=S&&S<v.length)return v[S];throw new TypeError("Must be between 0 and 63: "+S)}}),pr=U(function(_){var v=function(M){return M<0?(-M<<1)+1:(M<<1)+0},S=lr(),R=5,T=1<<R,A=T-1,k=T;_.encode=function(M){var N="",D,I=v(M);do D=I&A,I>>>=R,I>0&&(D|=k),N+=S.encode(D);while(I>0);return N}}),mt=U(function(_){var v=function(te,se,le){if(se in te)return te[se];if(arguments.length===3)return le;throw new Error('"'+se+'" is a required argument.')},S=function(te){return te},R=function(te){return A(te)?"$"+te:te},T=function(te){return A(te)?te.slice(1):te},A=function(te){if(!te)return!1;var se=te.length;if(se<9||te.charCodeAt(se-1)!==95||te.charCodeAt(se-2)!==95||te.charCodeAt(se-3)!==111||te.charCodeAt(se-4)!==116||te.charCodeAt(se-5)!==111||te.charCodeAt(se-6)!==114||te.charCodeAt(se-7)!==112||te.charCodeAt(se-8)!==95||te.charCodeAt(se-9)!==95)return!1;for(var le=se-10;le>=0;le--)if(te.charCodeAt(le)!==36)return!1;return!0},k=function(te,se){return te===se?0:te===null?1:se===null?-1:te>se?1:-1},M=function(te,se){var le=te.generatedLine-se.generatedLine;return le!==0||(le=te.generatedColumn-se.generatedColumn,le!==0)||(le=k(te.source,se.source),le!==0)||(le=te.originalLine-se.originalLine,le!==0)||(le=te.originalColumn-se.originalColumn,le!==0)?le:k(te.name,se.name)},N=function(te){return function(se){var le=B(se),ue=q(se),ce=new URL(se,ue);te(ce);var ge=ce.toString();return le==="absolute"?ge:le==="scheme-relative"?ge.slice(Y.length):le==="path-absolute"?ge.slice(Z.length):z(ue,ge)}},D=function(te,se){return new URL(te,se).toString()},I=function(te,se){var le=0;do{var ue=te+le++;if(se.indexOf(ue)===-1)return ue}while(!0)},q=function(te){for(var se=te.split("..").length-1,le=I("p",te),ue="".concat(Z,"/"),ce=0;ce<se;ce++)ue+="".concat(le,"/");return ue},B=function(te){return te[0]==="/"?te[1]==="/"?"scheme-relative":"path-absolute":J.test(te)?"absolute":"path-relative"},z=function(te,se){typeof te=="string"&&(te=new URL(te)),typeof se=="string"&&(se=new URL(se));var le=se.pathname.split("/"),ue=te.pathname.split("/");for(ue.length>0&&!ue[ue.length-1]&&ue.pop();le.length>0&&ue.length>0&&le[0]===ue[0];)le.shift(),ue.shift();return ue.map(function(){return".."}).concat(le).join("/")+se.search+se.hash},F=function(te,se){var le=B(se),ue=B(te);if(te=ne(te),le==="absolute")return D(se,void 0);if(ue==="absolute")return D(se,te);if(le==="scheme-relative")return oe(se);if(ue==="scheme-relative")return D(se,D(te,Z)).slice(Y.length);if(le==="path-absolute")return oe(se);if(ue==="path-absolute")return D(se,D(te,Z)).slice(Z.length);var ce=q(se+te),ge=D(se,D(te,ce));return z(ce,ge)},V=function(te,se){var le=H(te,se);return typeof le=="string"?le:oe(se)},H=function(te,se){if(B(te)!==B(se))return null;var le=q(te+se),ue=new URL(te,le),ce=new URL(se,le);try{new URL("",ce.toString())}catch{return null}return ce.protocol!==ue.protocol||ce.user!==ue.user||ce.password!==ue.password||ce.hostname!==ue.hostname||ce.port!==ue.port?null:z(ue,ce)};_.getArg=v;var W=(function(){return!("__proto__"in Object.create(null))})();_.toSetString=W?S:R,_.fromSetString=W?S:T,_.compareByGeneratedPositionsInflated=M;var Y="http:",Z="".concat(Y,"//host"),J=/^[A-Za-z0-9\+\-\.]+:/,ne=N(function(te){te.pathname=te.pathname.replace(/\/?$/,"/")}),oe=N(function(te){});_.normalize=oe,_.join=F,_.relative=V}),yr=U(function(_){var v=(function(){function S(){_class_call_check(this,S),this._array=[],this._set=new Map}return _create_class(S,[{key:"size",value:function(){return this._set.size}},{key:"add",value:function(R,T){var A=this.has(R),k=this._array.length;(!A||T)&&this._array.push(R),A||this._set.set(R,k)}},{key:"has",value:function(R){return this._set.has(R)}},{key:"indexOf",value:function(R){var T=this._set.get(R);if(T>=0)return T;throw new Error('"'+R+'" is not in the set.')}},{key:"at",value:function(R){if(R>=0&&R<this._array.length)return this._array[R];throw new Error("No element indexed by "+R)}},{key:"toArray",value:function(){return this._array.slice()}}],[{key:"fromArray",value:function(R,T){for(var A=new S,k=0,M=R.length;k<M;k++)A.add(R[k],T);return A}}]),S})();_.ArraySet=v}),xr=U(function(_){var v=function(T,A){var k=T.generatedLine,M=A.generatedLine,N=T.generatedColumn,D=A.generatedColumn;return M>k||M==k&&D>=N||S.compareByGeneratedPositionsInflated(T,A)<=0},S=mt(),R=(function(){function T(){_class_call_check(this,T),this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return _create_class(T,[{key:"unsortedForEach",value:function(A,k){this._array.forEach(A,k)}},{key:"add",value:function(A){v(this._last,A)?(this._last=A,this._array.push(A)):(this._sorted=!1,this._array.push(A))}},{key:"toArray",value:function(){return this._sorted||(this._array.sort(S.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}]),T})();_.MappingList=R}),Jt=U(function(_){var v=pr(),S=mt(),R=yr().ArraySet,T=xr().MappingList,A=(function(){function k(M){_class_call_check(this,k),M||(M={}),this._file=S.getArg(M,"file",null),this._sourceRoot=S.getArg(M,"sourceRoot",null),this._skipValidation=S.getArg(M,"skipValidation",!1),this._sources=new R,this._names=new R,this._mappings=new T,this._sourcesContents=null}return _create_class(k,[{key:"addMapping",value:function(M){var N=S.getArg(M,"generated"),D=S.getArg(M,"original",null),I=S.getArg(M,"source",null),q=S.getArg(M,"name",null);this._skipValidation||this._validateMapping(N,D,I,q),I!=null&&(I=String(I),this._sources.has(I)||this._sources.add(I)),q!=null&&(q=String(q),this._names.has(q)||this._names.add(q)),this._mappings.add({generatedLine:N.line,generatedColumn:N.column,originalLine:D&&D.line,originalColumn:D&&D.column,source:I,name:q})}},{key:"setSourceContent",value:function(M,N){var D=M;this._sourceRoot!=null&&(D=S.relative(this._sourceRoot,D)),N!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[S.toSetString(D)]=N):this._sourcesContents&&(delete this._sourcesContents[S.toSetString(D)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}},{key:"applySourceMap",value:function(M,N,D){var I=N;if(N==null){if(M.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);I=M.file}var q=this._sourceRoot;q!=null&&(I=S.relative(q,I));var B=this._mappings.toArray().length>0?new R:this._sources,z=new R;this._mappings.unsortedForEach(function(F){if(F.source===I&&F.originalLine!=null){var V=M.originalPositionFor({line:F.originalLine,column:F.originalColumn});V.source!=null&&(F.source=V.source,D!=null&&(F.source=S.join(D,F.source)),q!=null&&(F.source=S.relative(q,F.source)),F.originalLine=V.line,F.originalColumn=V.column,V.name!=null&&(F.name=V.name))}var H=F.source;H!=null&&!B.has(H)&&B.add(H);var W=F.name;W!=null&&!z.has(W)&&z.add(W)},this),this._sources=B,this._names=z,M.sources.forEach(function(F){var V=M.sourceContentFor(F);V!=null&&(D!=null&&(F=S.join(D,F)),q!=null&&(F=S.relative(q,F)),this.setSourceContent(F,V))},this)}},{key:"_validateMapping",value:function(M,N,D,I){if(N&&typeof N.line!="number"&&typeof N.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(M&&"line"in M&&"column"in M&&M.line>0&&M.column>=0&&!N&&!D&&!I)&&!(M&&"line"in M&&"column"in M&&N&&"line"in N&&"column"in N&&M.line>0&&M.column>=0&&N.line>0&&N.column>=0&&D))throw new Error("Invalid mapping: "+JSON.stringify({generated:M,source:D,original:N,name:I}))}},{key:"_serializeMappings",value:function(){for(var N=0,D=1,I=0,q=0,B=0,z=0,F="",V,H,W,Y,Z=this._mappings.toArray(),J=0,ne=Z.length;J<ne;J++){if(H=Z[J],V="",H.generatedLine!==D)for(N=0;H.generatedLine!==D;)V+=";",D++;else if(J>0){if(!S.compareByGeneratedPositionsInflated(H,Z[J-1]))continue;V+=","}V+=v.encode(H.generatedColumn-N),N=H.generatedColumn,H.source!=null&&(Y=this._sources.indexOf(H.source),V+=v.encode(Y-z),z=Y,V+=v.encode(H.originalLine-1-q),q=H.originalLine-1,V+=v.encode(H.originalColumn-I),I=H.originalColumn,H.name!=null&&(W=this._names.indexOf(H.name),V+=v.encode(W-B),B=W)),F+=V}return F}},{key:"_generateSourcesContent",value:function(M,N){return M.map(function(D){if(!this._sourcesContents)return null;N!=null&&(D=S.relative(N,D));var I=S.toSetString(D);return Object.prototype.hasOwnProperty.call(this._sourcesContents,I)?this._sourcesContents[I]:null},this)}},{key:"toJSON",value:function(){var N={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(N.file=this._file),this._sourceRoot!=null&&(N.sourceRoot=this._sourceRoot),this._sourcesContents&&(N.sourcesContent=this._generateSourcesContent(N.sources,N.sourceRoot)),N}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"fromSourceMap",value:function(M){var N=M.sourceRoot,D=new k({file:M.file,sourceRoot:N});return M.eachMapping(function(I){var q={generated:{line:I.generatedLine,column:I.generatedColumn}};I.source!=null&&(q.source=I.source,N!=null&&(q.source=S.relative(N,q.source)),q.original={line:I.originalLine,column:I.originalColumn},I.name!=null&&(q.name=I.name)),D.addMapping(q)}),M.sources.forEach(function(I){var q=I;N!=null&&(q=S.relative(N,I)),D._sources.has(q)||D._sources.add(q);var B=M.sourceContentFor(I);B!=null&&D.setSourceContent(I,B)}),D}}]),k})();A.prototype._version=3,_.SourceMapGenerator=A}),Ar=U(function(_){var v=Jt().SourceMapGenerator,S=mt(),R=/(\r?\n)/,T=10,A="$$$isSourceNode$$$",k=(function(){function M(N,D,I,q,B){_class_call_check(this,M),this.children=[],this.sourceContents={},this.line=N??null,this.column=D??null,this.source=I??null,this.name=B??null,this[A]=!0,q!=null&&this.add(q)}return _create_class(M,[{key:"add",value:function(N){if(Array.isArray(N))N.forEach(function(D){this.add(D)},this);else if(N[A]||typeof N=="string")N&&this.children.push(N);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+N);return this}},{key:"prepend",value:function(N){if(Array.isArray(N))for(var D=N.length-1;D>=0;D--)this.prepend(N[D]);else if(N[A]||typeof N=="string")this.children.unshift(N);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+N);return this}},{key:"walk",value:function(N){for(var D,I=0,q=this.children.length;I<q;I++)D=this.children[I],D[A]?D.walk(N):D!==""&&N(D,{source:this.source,line:this.line,column:this.column,name:this.name})}},{key:"join",value:function(N){var D,I,q=this.children.length;if(q>0){for(D=[],I=0;I<q-1;I++)D.push(this.children[I]),D.push(N);D.push(this.children[I]),this.children=D}return this}},{key:"replaceRight",value:function(N,D){var I=this.children[this.children.length-1];return I[A]?I.replaceRight(N,D):typeof I=="string"?this.children[this.children.length-1]=I.replace(N,D):this.children.push("".replace(N,D)),this}},{key:"setSourceContent",value:function(N,D){this.sourceContents[S.toSetString(N)]=D}},{key:"walkSourceContents",value:function(N){for(var D=0,I=this.children.length;D<I;D++)this.children[D][A]&&this.children[D].walkSourceContents(N);for(var q=Object.keys(this.sourceContents),B=0,z=q.length;B<z;B++)N(S.fromSetString(q[B]),this.sourceContents[q[B]])}},{key:"toString",value:function(){var D="";return this.walk(function(I){D+=I}),D}},{key:"toStringWithSourceMap",value:function(N){var D={code:"",line:1,column:0},I=new v(N),q=!1,B=null,z=null,F=null,V=null;return this.walk(function(H,W){D.code+=H,W.source!==null&&W.line!==null&&W.column!==null?((B!==W.source||z!==W.line||F!==W.column||V!==W.name)&&I.addMapping({source:W.source,original:{line:W.line,column:W.column},generated:{line:D.line,column:D.column},name:W.name}),B=W.source,z=W.line,F=W.column,V=W.name,q=!0):q&&(I.addMapping({generated:{line:D.line,column:D.column}}),B=null,q=!1);for(var Y=0,Z=H.length;Y<Z;Y++)H.charCodeAt(Y)===T?(D.line++,D.column=0,Y+1===Z?(B=null,q=!1):q&&I.addMapping({source:W.source,original:{line:W.line,column:W.column},generated:{line:D.line,column:D.column},name:W.name})):D.column++}),this.walkSourceContents(function(H,W){I.setSourceContent(H,W)}),{code:D.code,map:I}}}],[{key:"fromStringWithSourceMap",value:function(N,D,I){var q=new M,B=N.split(R),z=0,F=function(){var ne=te(),oe=te()||"";return ne+oe;function te(){return z<B.length?B[z++]:void 0}},V=1,H=0,W=null,Y;return D.eachMapping(function(J){if(W!==null)if(V<J.generatedLine)Z(W,F()),V++,H=0;else{Y=B[z]||"";var ne=Y.substr(0,J.generatedColumn-H);B[z]=Y.substr(J.generatedColumn-H),H=J.generatedColumn,Z(W,ne),W=J;return}for(;V<J.generatedLine;)q.add(F()),V++;H<J.generatedColumn&&(Y=B[z]||"",q.add(Y.substr(0,J.generatedColumn)),B[z]=Y.substr(J.generatedColumn),H=J.generatedColumn),W=J},this),z<B.length&&(W&&Z(W,F()),q.add(B.splice(z).join(""))),D.sources.forEach(function(J){var ne=D.sourceContentFor(J);ne!=null&&(I!=null&&(J=S.join(I,J)),q.setSourceContent(J,ne))}),q;function Z(J,ne){if(J===null||J.source===void 0)q.add(ne);else{var oe=I?S.join(I,J.source):J.source;q.add(new M(J.originalLine,J.originalColumn,oe,ne,J.name))}}}}]),M})();_.SourceNode=k}),Kt=U(function(_){_.SourceMapGenerator=Jt().SourceMapGenerator,_.SourceNode=Ar().SourceNode}),Rr=U(function(_,v){var S=Kt(),R=S.SourceNode,T=Ve(),A=(function(){function k(M,N,D,I){_class_call_check(this,k),this.sp=-1,this.maxSp=-1,this.varName=N,this.ruleName=M,this.type=D,this.bytecode=I,this.labels={},this.sourceMapStack=[]}return _create_class(k,[{key:"name",value:function(M){if(M<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack underflow: attempt to use a variable '").concat(this.varName,"<x>' at an index ").concat(M,`.
Bytecode: `).concat(this.bytecode));return this.varName+M}},{key:"push",value:function(M){++this.sp>this.maxSp&&(this.maxSp=this.sp);var N=this.labels[this.sp],D=[this.name(this.sp)," = ",M,";"];if(N)if(this.sourceMapStack.length){var I=k.sourceNode(N.location,D.splice(0,2),N.label),q=this.sourceMapPopInternal(),B=q.parts,z=q.location,F=z.start.offset<N.location.end.offset?{start:N.location.end,end:z.end,source:z.source}:z,V=k.sourceNode(F,D.concat(`
`));return this.sourceMapStack.push([B,B.length+1,z]),new R(null,null,N.location.source,[I,V])}else return k.sourceNode(N.location,D.concat(`
`));return D.join("")}},{key:"pop",value:function(M){var N=this;return M!==void 0?(this.sp-=M,Array.from({length:M},function(D,I){return N.name(N.sp+1+I)})):this.name(this.sp--)}},{key:"top",value:function(){return this.name(this.sp)}},{key:"index",value:function(M){if(M<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack overflow: attempt to get a variable at a negative index ").concat(M,`.
Bytecode: `).concat(this.bytecode));return this.name(this.sp-M)}},{key:"result",value:function(){if(this.maxSp<0)throw new RangeError("Rule '".concat(this.ruleName,`': The variable stack is empty, can't get the result.
Bytecode: `).concat(this.bytecode));return this.name(0)}},{key:"defines",value:function(){var N=this;return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},function(D,I){return N.name(I)}).join(", ")+";"}},{key:"checkedIf",value:function(M,N,D){var I=this.sp,q=N();if(!D)return[q];var B=this.sp;this.sp=I;var z=D();if(B!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+M+": Branches of a condition can't move the stack pointer differently (before: "+I+", after then: "+B+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[q,z]}},{key:"checkedLoop",value:function(M,N){var D=this.sp,I=N();if(D!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+M+": Body of a loop can't move the stack pointer (before: "+D+", after: "+this.sp+"). Bytecode: "+this.bytecode);return I}},{key:"sourceMapPush",value:function(M,N){if(this.sourceMapStack.length){var D=this.sourceMapStack[this.sourceMapStack.length-1];D[2].start.offset===N.start.offset&&D[2].end.offset>N.end.offset&&(D[2]={start:N.end,end:D[2].end,source:D[2].source})}this.sourceMapStack.push([M,M.length,N])}},{key:"sourceMapPopInternal",value:function(){var N=this.sourceMapStack.pop();if(!N)throw new RangeError("Rule '".concat(this.ruleName,`': Attempting to pop an empty source map stack.
Bytecode: `).concat(this.bytecode));var D=_sliced_to_array(N,3),I=D[0],q=D[1],B=D[2],z=I.splice(q).map(function(V){return _instanceof(V,R)?V:V+`
`});if(z.length){var F=T.offsetStart(B);I.push(new R(F.line,F.column-1,String(B.source),z))}return{parts:I,location:B}}},{key:"sourceMapPop",value:function(M){var N=this.sourceMapPopInternal(),D=N.location;if(this.sourceMapStack.length&&D.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){var I=this.sourceMapPopInternal(),q=I.parts,B=I.location,z=B.start.offset<D.end.offset?{start:D.end,end:B.end,source:B.source}:B;this.sourceMapStack.push([q,q.length+(M||0),z])}}}],[{key:"sourceNode",value:function(M,N,D){var I=T.offsetStart(M);return new R(I.line,I.column?I.column-1:null,String(M.source),N,D)}}]),k})();v.exports=A}),es=U(function(_){_.version="5.0.6"}),Qe=U(function(_){var v=function(k){return k.codePointAt(0).toString(16).toUpperCase()},S=function(k){return(typeof k>"u"?"undefined":_type_of(k))=="object"?"\\\\".concat(k.value):k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(M){return"\\u{".concat(v(M),"}")}).replace(/[\x00-\x0F]/g,function(M){return"\\x0"+v(M)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(M){return"\\x"+v(M)}).replace(/[\u0100-\u0FFF]/g,function(M){return"\\u0"+v(M)}).replace(/[\u1000-\uFFFF]/g,function(M){return"\\u"+v(M)})},R=function(k){return(typeof k>"u"?"undefined":_type_of(k))=="object"?"\\".concat(k.value):k.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(M){return"\\x0"+v(M)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(M){return"\\x"+v(M)}).replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(M){return"\\u{"+v(M)+"}"}).replace(/[\u0100-\u0FFF]/g,function(M){return"\\u0"+v(M)}).replace(/[\u1000-\uFFFF]/g,function(M){return"\\u"+v(M)})},T=function(k){for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=k.length%3,D=k.length-N,I="",q=0;q<D;q+=3)I+=M[k[q]>>2],I+=M[(k[q]&3)<<4|k[q+1]>>4],I+=M[(k[q+1]&15)<<2|k[q+2]>>6],I+=M[k[q+2]&63];return N===1?(I+=M[k[D]>>2],I+=M[(k[D]&3)<<4],I+="=="):N===2&&(I+=M[k[D]>>2],I+=M[(k[D]&3)<<4|k[D+1]>>4],I+=M[(k[D+1]&15)<<2],I+="="),I},A=function(k){var M=k[Symbol.iterator](),N=M.next();return N.done||!M.next().done?-1:N.value.codePointAt(0)};_.hex=v,_.stringEscape=S,_.regexpClassEscape=R,_.base64=T,_.codePointLen1=A}),ts=U(function(_,v){var S=function(M,N){N=N!==void 0?N:{};var D={},I=N.grammarSource,q={Grammar:Rn,ImportsAndSource:Vi},B=Rn,z="import",F=";",V=",",H="*",W="as",Y="{",Z="}",J="from",ne="=",oe="/",te="@",se=":",le="|",ue="..",ce="(",ge=")",me=".",Ee=`
`,_e=`\r
`,ye="/*",be="*/",Se="//",De="\\",xe="i",pe='"',we="'",Oe="[",Ce="^",Pe="]",Ne="p",Te="_",ze="u",Fe="-",Ie="0",Le="b",$e="f",qe="n",at="r",lt="t",vt="v",yt="x",Ze=/^[!$&]/,_t=/^[*-+?]/,ct=/^[!&]/,wt=/^[\0-\uD7FF\uE000-\uFFFF]/,xt=/^[\uD800-\uDBFF]/,At=/^[\uDC00-\uDFFF]/,Ct=/^[\uD800-\uDFFF]/,$t=RegExp("^[\\t\\v-\\f \\p{Zs}\\xA0\\uFEFF]","u"),Ut=/^[\n\r\u2028\u2029]/,Xt=/^[\r\u2028-\u2029]/,Ot=RegExp("^[\\p{ID_Start}_]","u"),qt=RegExp("^[$\\p{ID_Continue}]","u"),Tt=/^[\n\r"\\\u2028-\u2029]/,St=/^[\n\r'\\\u2028-\u2029]/,nt=/^[a-z]/i,ke=/^[\n\r\\-\]\u2028-\u2029]/,Ue=/^["'\\]/,Ye=/^[0-9pux]/,tt=/^[0-9]/,ot=/^[0-9a-f]/i,Rt=/^[{}]/,dt=xl(),Mt=Yt("import",!1),kt=Yt(";",!1),Pt=Yt(",",!1),zt=Yt("*",!1),Et=Yt("as",!1),bt=Yt("{",!1),Nt=Yt("}",!1),jt=Yt("from",!1),fr=Yt("=",!1),Gt=Yt("/",!1),dr=Yt("@",!1),vr=Yt(":",!1),cr=Pr(["!","$","&"],!1,!1,!1),or=Pr([["*","+"],"?"],!1,!1,!1),Tr=Yt("|",!1),Fr=Yt("..",!1),Or=Yt("(",!1),Dn=Yt(")",!1),Hr=Yt(".",!1),Dr=Pr(["!","&"],!1,!1,!1),Ur=Pr([["\0",""],["",""]],!1,!1,!1),wn=Pr([["\uD800","\uDBFF"]],!1,!1,!1),en=Pr([["\uDC00","\uDFFF"]],!1,!1,!1),nn=Pr([["\uD800","\uDFFF"]],!1,!1,!1),vn=ma("whitespace"),Ra=Pr(["	",["\v","\f"]," ","\\p{Zs}","","\uFEFF"],!1,!1,!0),on=Pr([`
`,"\r","\u2028","\u2029"],!1,!1,!1),ai=ma("end of line"),Ta=Yt(`
`,!1),Aa=Yt(`\r
`,!1),ja=Pr(["\r",["\u2028","\u2029"]],!1,!1,!1),ka=ma("comment"),$r=Yt("/*",!1),ca=Yt("*/",!1),oo=Yt("//",!1),An=ma("identifier"),Jn=Pr(["\\p{ID_Start}","_"],!1,!1,!0),Un=Yt("\\",!1),Ni=Pr(["$","\\p{ID_Continue}"],!1,!1,!0),Li=ma("literal"),so=Yt("i",!1),yn=ma("string"),fa=Yt('"',!1),kn=Yt("'",!1),sn=Pr([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),Cn=Pr([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),Uo=ma("character class"),lo=Yt("[",!1),uo=Yt("^",!1),co=Yt("]",!1),Mu=Yt("p",!0),Pn=Yt("_",!1),Go=Pr([["a","z"]],!1,!0,!1),fo=Yt("u",!1),Ko=Yt("-",!1),ii=Pr([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),nl=Yt("0",!1),al=Pr(['"',"'","\\"],!1,!1,!1),oi=Yt("b",!1),Ou=Yt("f",!1),il=Yt("n",!1),ol=Yt("r",!1),Wo=Yt("t",!1),Du=Yt("v",!1),Pu=Pr([["0","9"],"p","u","x"],!1,!1,!1),ho=Yt("x",!1),da=Pr([["0","9"]],!1,!1,!1),Yo=Pr([["0","9"],["a","f"]],!1,!0,!1),Xo=ma("code block"),ha=Pr(["{","}"],!1,!1,!1);function si(re,de,Re,Ae){return{type:"grammar",imports:re,topLevelInitializer:de,initializer:Re,rules:Ae,location:er()}}function sl(re,de){return[re,de]}function Qo(re){return{type:"top_level_initializer",code:re,codeLocation:er()}}function ll(re){return{type:"top_level_initializer",code:re,codeLocation:er()}}function Ii(re,de){return{type:"grammar_import",what:re,from:de,location:er()}}function pa(re){return{type:"grammar_import",what:[],from:re,location:er()}}function Zo(re,de){return de?(de.unshift(re),de):[re]}function qi(re){return{type:"import_binding_default",binding:re[0],location:re[1]}}function Ma(re){return[{type:"import_binding_all",binding:re[0],location:re[1]}]}function Jo(){return[]}function po(re,de){return{type:"import_binding_rename",rename:re[0],renameLocation:re[1],binding:de[0],location:de[1]}}function ul(re){return{type:"import_binding",binding:re[0],location:re[1]}}function go(re){return{type:"import_module_specifier",module:re,location:er()}}function mo(re){return[re,er()]}function cl(re){return[re,er()]}function _n(re){return qa.has(re[0])&&Oa(`Binding identifier can't be a reserved word "`.concat(re[0],'"'),re[1]),re[0]}function Fa(re){return{type:"top_level_initializer",code:re[0],codeLocation:re[1],location:er()}}function vo(re){return{type:"initializer",code:re[0],codeLocation:re[1],location:er()}}function $i(re,de,Re){return{type:"rule",name:re[0],nameLocation:re[1],expression:de!==null?{type:"named",name:de,expression:Re,location:er()}:Re,location:er()}}function Nu(re,de){return de.length>0?{type:"choice",alternatives:[re].concat(de),location:er()}:re}function rs(re,de){return de!==null?{type:"action",expression:re,code:de[0],codeLocation:de[1],location:er()}:re}function ns(re,de){return de.length>0||re.type==="labeled"&&re.pick?{type:"sequence",elements:[re].concat(de),location:er()}:re}function Bi(re,de,Re){return Re.type.startsWith("semantic_")&&Oa('"@" cannot be used on a semantic predicate',re),{type:"labeled",label:de!==null?de[0]:null,labelLocation:de!==null?de[1]:re,pick:!0,expression:Re,location:er()}}function yo(re,de){return{type:"labeled",label:re[0],labelLocation:re[1],expression:de,location:er()}}function fl(){return er()}function Lu(re){return qa.has(re[0])&&Oa(`Label can't be a reserved word "`.concat(re[0],'"'),re[1]),re}function Iu(re,de){return{type:R[re],expression:de,location:er()}}function qu(re,de){return{type:T[de],expression:re,location:er()}}function as(re,de,Re){var Ae=de[0],Be=de[1];return Be.type==="constant"&&Be.value===0&&Oa("The maximum count of repetitions of the rule must be > 0",Be.location),{type:"repeated",min:Ae,max:Be,expression:re,delimiter:Re,location:er()}}function $u(re,de){return[re!==null?re:{type:"constant",value:0},de!==null?de:{type:"constant",value:null}]}function Bu(re){return[null,re]}function ju(re){return{type:"constant",value:re,location:er()}}function Fu(re){return{type:"variable",value:re[0],location:er()}}function zu(re){return{type:"function",value:re[0],codeLocation:re[1],location:er()}}function dl(re){return re.type==="labeled"||re.type==="sequence"?{type:"group",expression:re,location:er()}:re}function Vu(re,de){return{type:"library_ref",name:de[0],library:re[0],libraryNumber:-1,location:er()}}function Hu(re){return{type:"rule_ref",name:re[0],location:er()}}function Uu(re,de){return{type:A[re],code:de[0],codeLocation:de[1],location:er()}}function Gu(re,de){return[re+de.join(""),er()]}function is(re,de){return{type:"literal",value:re,ignoreCase:de!==null,location:er()}}function Ku(re){return re.join("")}function Wu(re){return re.join("")}function Yu(re,de,Re){if(re&&de.length===0)if(Re.unicode)de=[["\uD800","\uDFFF"]];else return{type:"any",location:er()};return{type:"class",parts:de.filter(function(Ae){return Ae!==""}),inverted:!!re,ignoreCase:!!Re.ignoreCase,location:er(),unicode:!!Re.unicode||de.flat().some(function(Ae){return(typeof Ae>"u"?"undefined":_type_of(Ae))=="object"&&Ae.unicode||Ae.codePointAt(0)>65535})}}function hl(re){try{new RegExp("[\\".concat(re,"]"),"u")}catch{Oa("Invalid Unicode property escape")}return{type:"classEscape",value:re,unicode:!0,location:er()}}function Xu(re){var de=Object.fromEntries(re);return Object.keys(de).length!==re.length&&Oa("Invalid flags"),de}function Qu(){return["ignoreCase",!0]}function Zu(){return["unicode",!0]}function Ju(re,de){return re.codePointAt(0)>de.codePointAt(0)&&Oa("Invalid character range: "+oc()+"."),[re,de]}function ec(){return""}function tc(){return"\0"}function rc(){return"\b"}function nc(){return"\f"}function ac(){return`
`}function os(){return"\r"}function ji(){return"	"}function ic(){return"\v"}function pl(re){return String.fromCharCode(parseInt(re,16))}function gl(re){return String.fromCharCode(parseInt(re,16))}function ml(re){return String.fromCodePoint(parseInt(re,16))}function vl(){return{type:"any",location:er()}}function yl(re){return[re,er()]}function li(re){return parseInt(re,10)}var fe=N.peg$currPos|0,Dt=fe,ui=[{line:1,column:1}],Nn=fe,Fi=N.peg$maxFailExpected||[],We=N.peg$silentFails|0,ga;if(N.startRule){if(!(N.startRule in q))throw new Error(`Can't start parsing from rule "`+N.startRule+'".');B=q[N.startRule]}function oc(){return M.substring(Dt,fe)}function er(){return xo(Dt,fe)}function Oa(re,de){throw de=de!==void 0?de:xo(Dt,fe),sc(re,de)}function zi(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe,de=M.codePointAt(re);return de===void 0?"":String.fromCodePoint(de)}function Yt(re,de){return{type:"literal",text:re,ignoreCase:de}}function Pr(re,de,Re,Ae){return{type:"class",parts:re,inverted:de,ignoreCase:Re,unicode:Ae}}function xl(){return{type:"any"}}function bl(){return{type:"end"}}function ma(re){return{type:"other",description:re}}function El(re){var de=ui[re],Re;if(de)return de;if(re>=ui.length)Re=ui.length-1;else for(Re=re;!ui[--Re];);for(de=ui[Re],de={line:de.line,column:de.column};Re<re;)M.charCodeAt(Re)===10?(de.line++,de.column=1):de.column++,Re++;return ui[re]=de,de}function xo(re,de,Re){var Ae=El(re),Be=El(de),et={source:I,start:{offset:re,line:Ae.line,column:Ae.column},end:{offset:de,line:Be.line,column:Be.column}};return et}function ut(re){fe<Nn||(fe>Nn&&(Nn=fe,Fi=[]),Fi.push(re))}function sc(re,de){return new k(re,null,null,de)}function lc(re,de,Re){return new k(k.buildMessage(re,de),re,de,Re)}function Rn(){var re,de,Re,Ae,Be,et,Wt,Ir;if(re=fe,de=ss(),Re=fe,Ae=Bt(),Be=Va(),Be!==D?Re=Be:(fe=Re,Re=D),Re===D&&(Re=null),Ae=fe,Be=Bt(),et=_l(),et!==D?Ae=et:(fe=Ae,Ae=D),Ae===D&&(Ae=null),Be=Bt(),et=[],Wt=fe,Ir=hs(),Ir!==D?(Bt(),Wt=Ir):(fe=Wt,Wt=D),Wt!==D)for(;Wt!==D;)et.push(Wt),Wt=fe,Ir=hs(),Ir!==D?(Bt(),Wt=Ir):(fe=Wt,Wt=D);else et=D;return et!==D?(Dt=re,re=si(de,Re,Ae,et)):(fe=re,re=D),re}function Vi(){var re,de,Re;return re=fe,de=wl(),Re=Sl(),Dt=re,re=sl(de,Re),re}function Sl(){var re,de,Re,Ae;for(re=fe,de=fe,Re=[],M.length>fe?(Ae=M.charAt(fe),fe++):(Ae=D,We===0&&ut(dt));Ae!==D;)Re.push(Ae),M.length>fe?(Ae=M.charAt(fe),fe++):(Ae=D,We===0&&ut(dt));return de=M.substring(de,fe),Dt=re,de=Qo(de),re=de,re}function wl(){var re,de;return re=fe,de=fe,ss(),de=M.substring(de,fe),Dt=re,de=ll(de),re=de,re}function ss(){var re,de;for(re=[],de=ls();de!==D;)re.push(de),de=ls();return re}function ls(){var re,de,Re,Ae,Be,et,Wt,Ir;return re=fe,Bt(),M.substr(fe,6)===z?(de=z,fe+=6):(de=D,We===0&&ut(Mt)),de!==D?(Bt(),Re=us(),Re!==D?(Ae=Bt(),Be=Hi(),Be!==D?(et=fe,Wt=Bt(),M.charCodeAt(fe)===59?(Ir=F,fe++):(Ir=D,We===0&&ut(kt)),Ir!==D?(Wt=[Wt,Ir],et=Wt):(fe=et,et=D),et===D&&(et=null),Dt=re,re=Ii(Re,Be)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=fe,Bt(),M.substr(fe,6)===z?(de=z,fe+=6):(de=D,We===0&&ut(Mt)),de!==D?(Bt(),Re=Da(),Re!==D?(Ae=fe,Be=Bt(),M.charCodeAt(fe)===59?(et=F,fe++):(et=D,We===0&&ut(kt)),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D),Ae===D&&(Ae=null),Dt=re,re=pa(Re)):(fe=re,re=D)):(fe=re,re=D)),re}function us(){var re,de,Re,Ae,Be;return re=za(),re===D&&(re=bo(),re===D&&(re=fe,de=uc(),de!==D?(Re=fe,Bt(),M.charCodeAt(fe)===44?(Ae=V,fe++):(Ae=D,We===0&&ut(Pt)),Ae!==D?(Bt(),Be=za(),Be===D&&(Be=bo()),Be!==D?Re=Be:(fe=Re,Re=D)):(fe=Re,Re=D),Re===D&&(Re=null),Dt=re,re=Zo(de,Re)):(fe=re,re=D))),re}function uc(){var re,de;return re=fe,de=va(),de!==D&&(Dt=re,de=qi(de)),re=de,re}function za(){var re,de,Re,Ae;return re=fe,M.charCodeAt(fe)===42?(de=H,fe++):(de=D,We===0&&ut(zt)),de!==D?(Bt(),M.substr(fe,2)===W?(Re=W,fe+=2):(Re=D,We===0&&ut(Et)),Re!==D?(Bt(),Ae=va(),Ae!==D?(Dt=re,re=Ma(Ae)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re}function bo(){var re,de,Re,Ae,Be,et;return re=fe,M.charCodeAt(fe)===123?(de=Y,fe++):(de=D,We===0&&ut(bt)),de!==D?(Bt(),M.charCodeAt(fe)===125?(Re=Z,fe++):(Re=D,We===0&&ut(Nt)),Re!==D?(Dt=re,re=Jo()):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=fe,M.charCodeAt(fe)===123?(de=Y,fe++):(de=D,We===0&&ut(bt)),de!==D?(Bt(),Re=cs(),Re!==D?(Bt(),Ae=fe,M.charCodeAt(fe)===44?(Be=V,fe++):(Be=D,We===0&&ut(Pt)),Be!==D?(et=Bt(),Be=[Be,et],Ae=Be):(fe=Ae,Ae=D),Ae===D&&(Ae=null),M.charCodeAt(fe)===125?(Be=Z,fe++):(Be=D,We===0&&ut(Nt)),Be!==D?re=Re:(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D)),re}function Hi(){var re,de,Re;return re=fe,M.substr(fe,4)===J?(de=J,fe+=4):(de=D,We===0&&ut(jt)),de!==D?(Bt(),Re=Da(),Re!==D?re=Re:(fe=re,re=D)):(fe=re,re=D),re}function cs(){var re,de,Re,Ae,Be,et,Wt;for(re=fe,de=[],Re=fs();Re!==D;)de.push(Re),Re=fe,Ae=fe,Be=Bt(),M.charCodeAt(fe)===44?(et=V,fe++):(et=D,We===0&&ut(Pt)),et!==D?(Wt=Bt(),Be=[Be,et,Wt],Ae=Be):(fe=Ae,Ae=D),Ae!==D?(Ae=fs(),Ae===D?(fe=Re,Re=D):Re=Ae):Re=Ae;return de.length<1?(fe=re,re=D):re=de,re}function fs(){var re,de,Re,Ae;return re=fe,de=ds(),de!==D?(Bt(),M.substr(fe,2)===W?(Re=W,fe+=2):(Re=D,We===0&&ut(Et)),Re!==D?(Bt(),Ae=va(),Ae!==D?(Dt=re,re=po(de,Ae)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=fe,de=va(),de!==D&&(Dt=re,de=ul(de)),re=de),re}function Da(){var re,de;return re=fe,de=ra(),de!==D&&(Dt=re,de=go(de)),re=de,re}function va(){var re,de;return re=fe,de=Cl(),de!==D&&(Dt=re,de=mo(de)),re=de,re}function ds(){var re,de;return re=ya(),re===D&&(re=fe,de=ra(),de!==D&&(Dt=re,de=cl(de)),re=de),re}function Cl(){var re,de;return re=fe,de=ya(),de!==D&&(Dt=re,de=_n(de)),re=de,re}function Va(){var re,de,Re,Ae,Be;return re=fe,M.charCodeAt(fe)===123?(de=Y,fe++):(de=D,We===0&&ut(bt)),de!==D?(Re=Kn(),Re!==D?(M.charCodeAt(fe)===125?(Ae=Z,fe++):(Ae=D,We===0&&ut(Nt)),Ae!==D?(Be=Ia(),Be!==D?(Dt=re,re=Fa(Re)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re}function _l(){var re,de,Re;return re=fe,de=Kn(),de!==D?(Re=Ia(),Re!==D?(Dt=re,re=vo(de)):(fe=re,re=D)):(fe=re,re=D),re}function hs(){var re,de,Re,Ae,Be,et;return re=fe,de=ya(),de!==D?(Bt(),Re=fe,Ae=ra(),Ae!==D?(Bt(),Re=Ae):(fe=Re,Re=D),Re===D&&(Re=null),M.charCodeAt(fe)===61?(Ae=ne,fe++):(Ae=D,We===0&&ut(fr)),Ae!==D?(Bt(),Be=Eo(),Be!==D?(et=Ia(),et!==D?(Dt=re,re=$i(de,Re,Be)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re}function Eo(){var re,de,Re,Ae,Be,et;if(re=fe,de=ps(),de!==D){for(Re=[],Ae=fe,Bt(),M.charCodeAt(fe)===47?(Be=oe,fe++):(Be=D,We===0&&ut(Gt)),Be!==D?(Bt(),et=ps(),et!==D?Ae=et:(fe=Ae,Ae=D)):(fe=Ae,Ae=D);Ae!==D;)Re.push(Ae),Ae=fe,Bt(),M.charCodeAt(fe)===47?(Be=oe,fe++):(Be=D,We===0&&ut(Gt)),Be!==D?(Bt(),et=ps(),et!==D?Ae=et:(fe=Ae,Ae=D)):(fe=Ae,Ae=D);Dt=re,re=Nu(de,Re)}else fe=re,re=D;return re}function ps(){var re,de,Re,Ae;return re=fe,de=cc(),de!==D?(Re=fe,Bt(),Ae=Kn(),Ae!==D?Re=Ae:(fe=Re,Re=D),Re===D&&(Re=null),Dt=re,re=rs(de,Re)):(fe=re,re=D),re}function cc(){var re,de,Re,Ae,Be;if(re=fe,de=gs(),de!==D){for(Re=[],Ae=fe,Bt(),Be=gs(),Be!==D?Ae=Be:(fe=Ae,Ae=D);Ae!==D;)Re.push(Ae),Ae=fe,Bt(),Be=gs(),Be!==D?Ae=Be:(fe=Ae,Ae=D);Dt=re,re=ns(de,Re)}else fe=re,re=D;return re}function gs(){var re,de,Re,Ae;return re=fe,de=Rl(),de!==D?(Re=vs(),Re===D&&(Re=null),Ae=Ui(),Ae!==D?(Dt=re,re=Bi(de,Re,Ae)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=fe,de=vs(),de!==D?(Re=Ui(),Re!==D?(Dt=re,re=yo(de,Re)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=Ui())),re}function Rl(){var re,de;return re=fe,M.charCodeAt(fe)===64?(de=te,fe++):(de=D,We===0&&ut(dr)),de!==D&&(Dt=re,de=fl()),re=de,re}function vs(){var re,de,Re;return re=fe,de=ya(),de!==D?(Bt(),M.charCodeAt(fe)===58?(Re=se,fe++):(Re=D,We===0&&ut(vr)),Re!==D?(Bt(),Dt=re,re=Lu(de)):(fe=re,re=D)):(fe=re,re=D),re}function Ui(){var re,de,Re;return re=fe,de=Gn(),de!==D?(Bt(),Re=Gi(),Re!==D?(Dt=re,re=Iu(de,Re)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=Gi()),re}function Gn(){var re;return re=M.charAt(fe),Ze.test(re)?fe++:(re=D,We===0&&ut(cr)),re}function Gi(){var re,de,Re;return re=fe,de=di(),de!==D?(Bt(),Re=Ln(),Re!==D?(Dt=re,re=qu(de,Re)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=ci(),re===D&&(re=di())),re}function Ln(){var re;return re=M.charAt(fe),_t.test(re)?fe++:(re=D,We===0&&ut(or)),re}function ci(){var re,de,Re,Ae,Be,et,Wt;return re=fe,de=di(),de!==D?(Bt(),M.charCodeAt(fe)===124?(Re=le,fe++):(Re=D,We===0&&ut(Tr)),Re!==D?(Bt(),Ae=ys(),Ae!==D?(Bt(),Be=fe,M.charCodeAt(fe)===44?(et=V,fe++):(et=D,We===0&&ut(Pt)),et!==D?(Bt(),Wt=Eo(),Wt!==D?(Bt(),Be=Wt):(fe=Be,Be=D)):(fe=Be,Be=D),Be===D&&(Be=null),M.charCodeAt(fe)===124?(et=le,fe++):(et=D,We===0&&ut(Tr)),et!==D?(Dt=re,re=as(de,Ae,Be)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re}function ys(){var re,de,Re,Ae;return re=fe,de=fi(),de===D&&(de=null),Bt(),M.substr(fe,2)===ue?(Re=ue,fe+=2):(Re=D,We===0&&ut(Fr)),Re!==D?(Bt(),Ae=fi(),Ae===D&&(Ae=null),Dt=re,re=$u(de,Ae)):(fe=re,re=D),re===D&&(re=fe,de=fi(),de!==D&&(Dt=re,de=Bu(de)),re=de),re}function fi(){var re,de;return re=fe,de=Sa(),de!==D&&(Dt=re,de=ju(de)),re=de,re===D&&(re=fe,de=ya(),de!==D&&(Dt=re,de=Fu(de)),re=de,re===D&&(re=fe,de=Kn(),de!==D&&(Dt=re,de=zu(de)),re=de)),re}function di(){var re,de,Re,Ae;return re=qn(),re===D&&(re=Wi(),re===D&&(re=_s(),re===D&&(re=xs(),re===D&&(re=Ha(),re===D&&(re=fe,M.charCodeAt(fe)===40?(de=ce,fe++):(de=D,We===0&&ut(Or)),de!==D?(Bt(),Re=Eo(),Re!==D?(Bt(),M.charCodeAt(fe)===41?(Ae=ge,fe++):(Ae=D,We===0&&ut(Dn)),Ae!==D?(Dt=re,re=dl(Re)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D)))))),re}function xs(){var re,de,Re,Ae,Be,et,Wt,Ir;return re=fe,de=ya(),de!==D?(M.charCodeAt(fe)===46?(Re=me,fe++):(Re=D,We===0&&ut(Hr)),Re!==D?(Ae=ya(),Ae!==D?(Dt=re,re=Vu(de,Ae)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=fe,de=ya(),de!==D?(Re=fe,We++,Ae=fe,Be=Bt(),et=fe,Wt=ra(),Wt!==D?(Ir=Bt(),Wt=[Wt,Ir],et=Wt):(fe=et,et=D),et===D&&(et=null),M.charCodeAt(fe)===61?(Wt=ne,fe++):(Wt=D,We===0&&ut(fr)),Wt!==D?(Be=[Be,et,Wt],Ae=Be):(fe=Ae,Ae=D),We--,Ae===D?Re=void 0:(fe=Re,Re=D),Re!==D?(Dt=re,re=Hu(de)):(fe=re,re=D)):(fe=re,re=D)),re}function Ha(){var re,de,Re;return re=fe,de=Tl(),de!==D?(Bt(),Re=Kn(),Re!==D?(Dt=re,re=Uu(de,Re)):(fe=re,re=D)):(fe=re,re=D),re}function Tl(){var re;return re=M.charAt(fe),ct.test(re)?fe++:(re=D,We===0&&ut(Dr)),re}function gn(){var re;return re=hi(),re===D&&(re=fc()),re}function hi(){var re;return re=M.charAt(fe),wt.test(re)?fe++:(re=D,We===0&&ut(Ur)),re}function fc(){var re,de,Re,Ae;return re=fe,de=fe,Re=M.charAt(fe),xt.test(Re)?fe++:(Re=D,We===0&&ut(wn)),Re!==D?(Ae=M.charAt(fe),At.test(Ae)?fe++:(Ae=D,We===0&&ut(en)),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D)):(fe=de,de=D),de!==D?re=M.substring(re,fe):re=de,re===D&&(re=M.charAt(fe),Ct.test(re)?fe++:(re=D,We===0&&ut(nn))),re}function xn(){var re;return We++,re=zi(),$t.test(re)?fe+=re.length:(re=D,We===0&&ut(Ra)),We--,re===D&&We===0&&ut(vn),re}function Ua(){var re;return re=M.charAt(fe),Ut.test(re)?fe++:(re=D,We===0&&ut(on)),re}function In(){var re;return We++,M.charCodeAt(fe)===10?(re=Ee,fe++):(re=D,We===0&&ut(Ta)),re===D&&(M.substr(fe,2)===_e?(re=_e,fe+=2):(re=D,We===0&&ut(Aa)),re===D&&(re=M.charAt(fe),Xt.test(re)?fe++:(re=D,We===0&&ut(ja)))),We--,re===D&&We===0&&ut(ai),re}function bs(){var re;return We++,re=So(),re===D&&(re=wo()),We--,re===D&&We===0&&ut(ka),re}function So(){var re,de,Re,Ae,Be,et;if(re=fe,M.substr(fe,2)===ye?(de=ye,fe+=2):(de=D,We===0&&ut($r)),de!==D){for(Re=[],Ae=fe,Be=fe,We++,M.substr(fe,2)===be?(et=be,fe+=2):(et=D,We===0&&ut(ca)),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);Ae!==D;)Re.push(Ae),Ae=fe,Be=fe,We++,M.substr(fe,2)===be?(et=be,fe+=2):(et=D,We===0&&ut(ca)),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);M.substr(fe,2)===be?(Ae=be,fe+=2):(Ae=D,We===0&&ut(ca)),Ae!==D?(de=[de,Re,Ae],re=de):(fe=re,re=D)}else fe=re,re=D;return re}function Pa(){var re,de,Re,Ae,Be,et;if(re=fe,M.substr(fe,2)===ye?(de=ye,fe+=2):(de=D,We===0&&ut($r)),de!==D){for(Re=[],Ae=fe,Be=fe,We++,M.substr(fe,2)===be?(et=be,fe+=2):(et=D,We===0&&ut(ca)),et===D&&(et=Ua()),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);Ae!==D;)Re.push(Ae),Ae=fe,Be=fe,We++,M.substr(fe,2)===be?(et=be,fe+=2):(et=D,We===0&&ut(ca)),et===D&&(et=Ua()),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);M.substr(fe,2)===be?(Ae=be,fe+=2):(Ae=D,We===0&&ut(ca)),Ae!==D?(de=[de,Re,Ae],re=de):(fe=re,re=D)}else fe=re,re=D;return re}function wo(){var re,de,Re,Ae,Be,et;if(re=fe,M.substr(fe,2)===Se?(de=Se,fe+=2):(de=D,We===0&&ut(oo)),de!==D){for(Re=[],Ae=fe,Be=fe,We++,et=Ua(),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);Ae!==D;)Re.push(Ae),Ae=fe,Be=fe,We++,et=Ua(),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);de=[de,Re],re=de}else fe=re,re=D;return re}function ya(){var re,de,Re,Ae;if(We++,re=fe,de=Es(),de!==D){for(Re=[],Ae=Ss();Ae!==D;)Re.push(Ae),Ae=Ss();Dt=re,re=Gu(de,Re)}else fe=re,re=D;return We--,re===D&&(de=D,We===0&&ut(An)),re}function Es(){var re,de,Re;return re=zi(),Ot.test(re)?fe+=re.length:(re=D,We===0&&ut(Jn)),re===D&&(re=fe,M.charCodeAt(fe)===92?(de=De,fe++):(de=D,We===0&&ut(Un)),de!==D?(Re=La(),Re!==D?re=Re:(fe=re,re=D)):(fe=re,re=D)),re}function Ss(){var re;return re=zi(),qt.test(re)?fe+=re.length:(re=D,We===0&&ut(Ni)),re}function qn(){var re,de,Re;return We++,re=fe,de=ra(),de!==D?(M.charCodeAt(fe)===105?(Re=xe,fe++):(Re=D,We===0&&ut(so)),Re===D&&(Re=null),Dt=re,re=is(de,Re)):(fe=re,re=D),We--,re===D&&(de=D,We===0&&ut(Li)),re}function ra(){var re,de,Re,Ae;if(We++,re=fe,M.charCodeAt(fe)===34?(de=pe,fe++):(de=D,We===0&&ut(fa)),de!==D){for(Re=[],Ae=Ga();Ae!==D;)Re.push(Ae),Ae=Ga();M.charCodeAt(fe)===34?(Ae=pe,fe++):(Ae=D,We===0&&ut(fa)),Ae!==D?(Dt=re,re=Ku(Re)):(fe=re,re=D)}else fe=re,re=D;if(re===D)if(re=fe,M.charCodeAt(fe)===39?(de=we,fe++):(de=D,We===0&&ut(kn)),de!==D){for(Re=[],Ae=Ki();Ae!==D;)Re.push(Ae),Ae=Ki();M.charCodeAt(fe)===39?(Ae=we,fe++):(Ae=D,We===0&&ut(kn)),Ae!==D?(Dt=re,re=Wu(Re)):(fe=re,re=D)}else fe=re,re=D;return We--,re===D&&(de=D,We===0&&ut(yn)),re}function Ga(){var re,de,Re,Ae;return re=fe,de=fe,Re=fe,We++,Ae=M.charAt(fe),Tt.test(Ae)?fe++:(Ae=D,We===0&&ut(sn)),We--,Ae===D?Re=void 0:(fe=Re,Re=D),Re!==D?(Ae=gn(),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D)):(fe=de,de=D),de!==D?re=M.substring(re,fe):re=de,re===D&&(re=fe,M.charCodeAt(fe)===92?(de=De,fe++):(de=D,We===0&&ut(Un)),de!==D?(Re=Tn(),Re!==D?re=Re:(fe=re,re=D)):(fe=re,re=D),re===D&&(re=ia())),re}function Ki(){var re,de,Re,Ae;return re=fe,de=fe,Re=fe,We++,Ae=M.charAt(fe),St.test(Ae)?fe++:(Ae=D,We===0&&ut(Cn)),We--,Ae===D?Re=void 0:(fe=Re,Re=D),Re!==D?(Ae=gn(),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D)):(fe=de,de=D),de!==D?re=M.substring(re,fe):re=de,re===D&&(re=fe,M.charCodeAt(fe)===92?(de=De,fe++):(de=D,We===0&&ut(Un)),de!==D?(Re=Tn(),Re!==D?re=Re:(fe=re,re=D)):(fe=re,re=D),re===D&&(re=ia())),re}function Wi(){var re,de,Re,Ae,Be,et;if(We++,re=fe,M.charCodeAt(fe)===91?(de=Oe,fe++):(de=D,We===0&&ut(lo)),de!==D){for(M.charCodeAt(fe)===94?(Re=Ce,fe++):(Re=D,We===0&&ut(uo)),Re===D&&(Re=null),Ae=[],Be=Mn(),Be===D&&(Be=Sr(),Be===D&&(Be=rr()));Be!==D;)Ae.push(Be),Be=Mn(),Be===D&&(Be=Sr(),Be===D&&(Be=rr()));M.charCodeAt(fe)===93?(Be=Pe,fe++):(Be=D,We===0&&ut(co)),Be!==D?(et=Al(),Dt=re,re=Yu(Re,Ae,et)):(fe=re,re=D)}else fe=re,re=D;return We--,re===D&&(de=D,We===0&&ut(Uo)),re}function Mn(){var re,de,Re;return re=fe,M.charCodeAt(fe)===92?(de=De,fe++):(de=D,We===0&&ut(Un)),de!==D?(Re=$n(),Re!==D?re=Re:(fe=re,re=D)):(fe=re,re=D),re}function $n(){var re,de,Re,Ae,Be,et,Wt;return re=fe,de=fe,Re=fe,Ae=M.charAt(fe),Ae.toLowerCase()===Ne?fe++:(Ae=D,We===0&&ut(Mu)),Ae!==D?(M.charCodeAt(fe)===123?(Be=Y,fe++):(Be=D,We===0&&ut(bt)),Be!==D?(et=Na(),et!==D?(M.charCodeAt(fe)===125?(Wt=Z,fe++):(Wt=D,We===0&&ut(Nt)),Wt!==D?(Ae=[Ae,Be,et,Wt],Re=Ae):(fe=Re,Re=D)):(fe=Re,Re=D)):(fe=Re,Re=D)):(fe=Re,Re=D),Re!==D?de=M.substring(de,fe):de=Re,de!==D&&(Dt=re,de=hl(de)),re=de,re}function Na(){var re,de,Re,Ae;return re=fe,de=na(),de!==D?(M.charCodeAt(fe)===61?(Re=ne,fe++):(Re=D,We===0&&ut(fr)),Re!==D?(Ae=aa(),Ae!==D?(de=[de,Re,Ae],re=de):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=xa()),re}function na(){var re,de,Re;if(re=fe,de=[],Re=Xi(),Re!==D)for(;Re!==D;)de.push(Re),Re=Xi();else de=D;return de!==D?re=M.substring(re,fe):re=de,re}function aa(){var re,de,Re;if(re=fe,de=[],Re=Yi(),Re!==D)for(;Re!==D;)de.push(Re),Re=Yi();else de=D;return de!==D?re=M.substring(re,fe):re=de,re}function xa(){var re,de,Re;if(re=fe,de=[],Re=Yi(),Re!==D)for(;Re!==D;)de.push(Re),Re=Yi();else de=D;return de!==D?re=M.substring(re,fe):re=de,re}function Yi(){var re;return re=Xi(),re===D&&(re=gi()),re}function Xi(){var re;return re=ws(),re===D&&(M.charCodeAt(fe)===95?(re=Te,fe++):(re=D,We===0&&ut(Pn))),re}function ws(){var re;return re=M.charAt(fe),nt.test(re)?fe++:(re=D,We===0&&ut(Go)),re}function Al(){var re,de,Re;for(re=fe,de=[],Re=ln();Re!==D;)de.push(Re),Re=ln();return Dt=re,de=Xu(de),re=de,re}function ln(){var re,de;return re=fe,M.charCodeAt(fe)===105?(de=xe,fe++):(de=D,We===0&&ut(so)),de!==D&&(Dt=re,de=Qu()),re=de,re===D&&(re=fe,M.charCodeAt(fe)===117?(de=ze,fe++):(de=D,We===0&&ut(fo)),de!==D&&(Dt=re,de=Zu()),re=de),re}function Sr(){var re,de,Re,Ae;return re=fe,de=rr(),de!==D?(M.charCodeAt(fe)===45?(Re=Fe,fe++):(Re=D,We===0&&ut(Ko)),Re!==D?(Ae=rr(),Ae!==D?(Dt=re,re=Ju(de,Ae)):(fe=re,re=D)):(fe=re,re=D)):(fe=re,re=D),re}function rr(){var re,de,Re,Ae;return re=fe,de=fe,Re=fe,We++,Ae=M.charAt(fe),ke.test(Ae)?fe++:(Ae=D,We===0&&ut(ii)),We--,Ae===D?Re=void 0:(fe=Re,Re=D),Re!==D?(Ae=gn(),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D)):(fe=de,de=D),de!==D?re=M.substring(re,fe):re=de,re===D&&(re=fe,M.charCodeAt(fe)===92?(de=De,fe++):(de=D,We===0&&ut(Un)),de!==D?(Re=Tn(),Re!==D?re=Re:(fe=re,re=D)):(fe=re,re=D),re===D&&(re=ia())),re}function ia(){var re,de,Re;return re=fe,M.charCodeAt(fe)===92?(de=De,fe++):(de=D,We===0&&ut(Un)),de!==D?(Re=In(),Re!==D?(Dt=re,re=ec()):(fe=re,re=D)):(fe=re,re=D),re}function Tn(){var re,de,Re,Ae;return re=Cs(),re===D&&(re=fe,M.charCodeAt(fe)===48?(de=Ie,fe++):(de=D,We===0&&ut(nl)),de!==D?(Re=fe,We++,Ae=gi(),We--,Ae===D?Re=void 0:(fe=Re,Re=D),Re!==D?(Dt=re,re=tc()):(fe=re,re=D)):(fe=re,re=D),re===D&&(re=pi(),re===D&&(re=La()))),re}function Cs(){var re;return re=ba(),re===D&&(re=kl()),re}function ba(){var re,de;return re=M.charAt(fe),Ue.test(re)?fe++:(re=D,We===0&&ut(al)),re===D&&(re=fe,M.charCodeAt(fe)===98?(de=Le,fe++):(de=D,We===0&&ut(oi)),de!==D&&(Dt=re,de=rc()),re=de,re===D&&(re=fe,M.charCodeAt(fe)===102?(de=$e,fe++):(de=D,We===0&&ut(Ou)),de!==D&&(Dt=re,de=nc()),re=de,re===D&&(re=fe,M.charCodeAt(fe)===110?(de=qe,fe++):(de=D,We===0&&ut(il)),de!==D&&(Dt=re,de=ac()),re=de,re===D&&(re=fe,M.charCodeAt(fe)===114?(de=at,fe++):(de=D,We===0&&ut(ol)),de!==D&&(Dt=re,de=os()),re=de,re===D&&(re=fe,M.charCodeAt(fe)===116?(de=lt,fe++):(de=D,We===0&&ut(Wo)),de!==D&&(Dt=re,de=ji()),re=de,re===D&&(re=fe,M.charCodeAt(fe)===118?(de=vt,fe++):(de=D,We===0&&ut(Du)),de!==D&&(Dt=re,de=ic()),re=de)))))),re}function kl(){var re,de,Re,Ae;return re=fe,de=fe,Re=fe,We++,Ae=Ml(),Ae===D&&(Ae=Ua()),We--,Ae===D?Re=void 0:(fe=Re,Re=D),Re!==D?(Ae=gn(),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D)):(fe=de,de=D),de!==D?re=M.substring(re,fe):re=de,re}function Ml(){var re;return re=ba(),re===D&&(re=M.charAt(fe),Ye.test(re)?fe++:(re=D,We===0&&ut(Pu))),re}function pi(){var re,de,Re,Ae,Be,et;return re=fe,M.charCodeAt(fe)===120?(de=yt,fe++):(de=D,We===0&&ut(ho)),de!==D?(Re=fe,Ae=fe,Be=Bn(),Be!==D?(et=Bn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D),Ae!==D?Re=M.substring(Re,fe):Re=Ae,Re!==D?(Dt=re,re=pl(Re)):(fe=re,re=D)):(fe=re,re=D),re}function La(){var re,de,Re,Ae,Be,et,Wt,Ir;if(re=fe,M.charCodeAt(fe)===117?(de=ze,fe++):(de=D,We===0&&ut(fo)),de!==D?(Re=fe,Ae=fe,Be=Bn(),Be!==D?(et=Bn(),et!==D?(Wt=Bn(),Wt!==D?(Ir=Bn(),Ir!==D?(Be=[Be,et,Wt,Ir],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D)):(fe=Ae,Ae=D)):(fe=Ae,Ae=D),Ae!==D?Re=M.substring(Re,fe):Re=Ae,Re!==D?(Dt=re,re=gl(Re)):(fe=re,re=D)):(fe=re,re=D),re===D)if(re=fe,M.charCodeAt(fe)===117?(de=ze,fe++):(de=D,We===0&&ut(fo)),de!==D)if(M.charCodeAt(fe)===123?(Re=Y,fe++):(Re=D,We===0&&ut(bt)),Re!==D){if(Ae=fe,Be=[],et=Bn(),et!==D)for(;et!==D;)Be.push(et),et=Bn();else Be=D;Be!==D?Ae=M.substring(Ae,fe):Ae=Be,Ae!==D?(M.charCodeAt(fe)===125?(Be=Z,fe++):(Be=D,We===0&&ut(Nt)),Be!==D?(Dt=re,re=ml(Ae)):(fe=re,re=D)):(fe=re,re=D)}else fe=re,re=D;else fe=re,re=D;return re}function gi(){var re;return re=M.charAt(fe),tt.test(re)?fe++:(re=D,We===0&&ut(da)),re}function Bn(){var re;return re=M.charAt(fe),ot.test(re)?fe++:(re=D,We===0&&ut(Yo)),re}function _s(){var re,de;return re=fe,M.charCodeAt(fe)===46?(de=me,fe++):(de=D,We===0&&ut(Hr)),de!==D&&(Dt=re,de=vl()),re=de,re}function Kn(){var re,de,Re,Ae;return We++,re=fe,M.charCodeAt(fe)===123?(de=Y,fe++):(de=D,We===0&&ut(bt)),de!==D?(Re=Ea(),M.charCodeAt(fe)===125?(Ae=Z,fe++):(Ae=D,We===0&&ut(Nt)),Ae!==D?re=Re:(fe=re,re=D)):(fe=re,re=D),We--,re===D&&(de=D,We===0&&ut(Xo)),re}function Ea(){var re,de;return re=fe,de=oa(),Dt=re,de=yl(de),re=de,re}function oa(){var re,de,Re,Ae,Be,et;if(re=fe,de=[],Re=[],Ae=fe,Be=fe,We++,et=M.charAt(fe),Rt.test(et)?fe++:(et=D,We===0&&ut(ha)),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D),Ae!==D)for(;Ae!==D;)Re.push(Ae),Ae=fe,Be=fe,We++,et=M.charAt(fe),Rt.test(et)?fe++:(et=D,We===0&&ut(ha)),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);else Re=D;for(Re===D&&(Re=fe,M.charCodeAt(fe)===123?(Ae=Y,fe++):(Ae=D,We===0&&ut(bt)),Ae!==D?(Be=oa(),M.charCodeAt(fe)===125?(et=Z,fe++):(et=D,We===0&&ut(Nt)),et!==D?(Ae=[Ae,Be,et],Re=Ae):(fe=Re,Re=D)):(fe=Re,Re=D));Re!==D;){if(de.push(Re),Re=[],Ae=fe,Be=fe,We++,et=M.charAt(fe),Rt.test(et)?fe++:(et=D,We===0&&ut(ha)),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D),Ae!==D)for(;Ae!==D;)Re.push(Ae),Ae=fe,Be=fe,We++,et=M.charAt(fe),Rt.test(et)?fe++:(et=D,We===0&&ut(ha)),We--,et===D?Be=void 0:(fe=Be,Be=D),Be!==D?(et=gn(),et!==D?(Be=[Be,et],Ae=Be):(fe=Ae,Ae=D)):(fe=Ae,Ae=D);else Re=D;Re===D&&(Re=fe,M.charCodeAt(fe)===123?(Ae=Y,fe++):(Ae=D,We===0&&ut(bt)),Ae!==D?(Be=oa(),M.charCodeAt(fe)===125?(et=Z,fe++):(et=D,We===0&&ut(Nt)),et!==D?(Ae=[Ae,Be,et],Re=Ae):(fe=Re,Re=D)):(fe=Re,Re=D))}return re=M.substring(re,fe),re}function Sa(){var re,de,Re,Ae;if(re=fe,de=fe,Re=[],Ae=gi(),Ae!==D)for(;Ae!==D;)Re.push(Ae),Ae=gi();else Re=D;return Re!==D?de=M.substring(de,fe):de=Re,de!==D&&(Dt=re,de=li(de)),re=de,re}function Bt(){var re,de;for(re=[],de=xn(),de===D&&(de=In(),de===D&&(de=bs()));de!==D;)re.push(de),de=xn(),de===D&&(de=In(),de===D&&(de=bs()));return re}function Rs(){var re,de;for(re=[],de=xn(),de===D&&(de=Pa());de!==D;)re.push(de),de=xn(),de===D&&(de=Pa());return re}function Ia(){var re,de,Re,Ae;if(re=[],de=fe,Re=Bt(),M.charCodeAt(fe)===59?(Ae=F,fe++):(Ae=D,We===0&&ut(kt)),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D),de!==D)for(;de!==D;)re.push(de),de=fe,Re=Bt(),M.charCodeAt(fe)===59?(Ae=F,fe++):(Ae=D,We===0&&ut(kt)),Ae!==D?(Re=[Re,Ae],de=Re):(fe=de,de=D);else re=D;return re===D&&(re=fe,de=Rs(),Re=wo(),Re===D&&(Re=null),Ae=In(),Ae!==D?(de=[de,Re,Ae],re=de):(fe=re,re=D),re===D&&(re=fe,de=Bt(),Re=Co(),Re!==D?(de=[de,Re],re=de):(fe=re,re=D))),re}function Co(){var re,de;return re=fe,We++,M.length>fe?(de=M.charAt(fe),fe++):(de=D,We===0&&ut(dt)),We--,de===D?re=void 0:(fe=re,re=D),re}var qa=new Set(N.reservedWords);ga=B();var Kr=ga!==D&&fe===M.length;function Qi(){throw ga!==D&&fe<M.length&&ut(bl()),lc(Fi,Nn<M.length?zi(Nn):null,Nn<M.length?xo(Nn,Nn+1):xo(Nn,Nn))}if(N.peg$library)return{peg$result:ga,peg$currPos:fe,peg$FAILED:D,peg$maxFailExpected:Fi,peg$maxFailPos:Nn,peg$success:Kr,peg$throw:Kr?void 0:Qi};if(Kr)return ga;Qi()},R={$:"text","&":"simple_and","!":"simple_not"},T={"?":"optional","*":"zero_or_more","+":"one_or_more"},A={"&":"semantic_and","!":"semantic_not"},k=(function(M){_inherits(N,M);function N(D,I,q,B){_class_call_check(this,N);var z;return z=_call_super(this,N,[D]),z.expected=I,z.found=q,z.location=B,z.name="SyntaxError",z}return _create_class(N,[{key:"format",value:function(D){var I=this,q="Error: "+this.message;if(this.location){var B=null,z=D.find(function(ne){return ne.source===I.location.source});z&&(B=z.text.split(/\r\n|\n|\r/g));var F=this.location.start,V=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(F):F,H=this.location.source+":"+V.line+":"+V.column;if(B){var W=this.location.end,Y="".padEnd(V.line.toString().length," "),Z=B[F.line-1],J=(F.line===W.line?W.column:Z.length+1)-F.column||1;q+=`
 --> `+H+`
`+Y+` |
`+V.line+" | "+Z+`
`+Y+" | "+"".padEnd(F.column-1," ")+"".padEnd(J,"^")}else q+=`
 at `+H}return q}}],[{key:"buildMessage",value:function(D,I){function q(J){return J.codePointAt(0).toString(16).toUpperCase()}var B=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function z(J){return B?J.replace(B,function(ne){return"\\u{"+q(ne)+"}"}):J}function F(J){return z(J.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ne){return"\\x0"+q(ne)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ne){return"\\x"+q(ne)}))}function V(J){return z(J.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ne){return"\\x0"+q(ne)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ne){return"\\x"+q(ne)}))}var H={literal:function(J){return'"'+F(J.text)+'"'},class:function(J){var ne=J.parts.map(function(oe){return Array.isArray(oe)?V(oe[0])+"-"+V(oe[1]):V(oe)});return"["+(J.inverted?"^":"")+ne.join("")+"]"+(J.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(J){return J.description}};function W(J){return H[J.type](J)}function Y(J){var ne=J.map(W);if(ne.sort(),ne.length>0){for(var oe=1,te=1;te<ne.length;te++)ne[te-1]!==ne[te]&&(ne[oe]=ne[te],oe++);ne.length=oe}switch(ne.length){case 1:return ne[0];case 2:return ne[0]+" or "+ne[1];default:return ne.slice(0,-1).join(", ")+", or "+ne[ne.length-1]}}function Z(J){return J?'"'+F(J)+'"':"end of input"}return"Expected "+Y(D)+" but "+Z(I)+" found."}}]),N})(_wrap_native_super(SyntaxError));v.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:k,parse:S}}),Nr=U(function(_,v){var S=function(Y,Z,J){var ne=V.offsetStart(Z),oe=ne.line,te=ne.column-1,se=Y.split(`
`);return se.length===1?new F(oe,te,String(Z.source),Y,J):new F(null,null,String(Z.source),se.map(function(le,ue){return new F(oe+ue,ue===0?te:0,String(Z.source),ue===se.length-1?le:[le,`
`],J)}))},R=function(Y,Z,J,ne,oe){if(J){var te=V.offsetEnd(J);return new F(null,null,String(J.source),[Y,S(Z,J,oe),new F(te.line,te.column-1,String(J.source),ne)])}return new F(null,null,null,[Y,Z,ne])},T=function(Y,Z){if(!Y.literals||!Y.locations||!Y.classes||!Y.expectations||!Y.functions||!Y.importedNames)throw new Error("generateJS: generate bytecode was not called.");var J=Y.literals,ne=Y.locations,oe=Y.classes,te=Y.expectations,se=Y.functions,le=Y.importedNames;if(!Z.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");var ue=Z.allowedStartRules,ce=Z.dependencies||{};function ge(Te){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Fe=Te.match(/^\n*([ \t]+)/);return(Fe?Te.replace(new RegExp("^".concat(Fe[1]),"gm"),ze):Te).replace(/[ \t]+$/,"")}function me(Te){var ze=!0,Fe=0;function Ie(Le){return Array.isArray(Le)?Le.map(function($e){return Ie($e)}):_instanceof(Le,F)?(Fe++,Le.children=Ie(Le.children),Fe--,Le):(ze?Le=Le.replace(/^(.+)$/gm,"  $1"):Le=Le.replace(/\n(\s*\S)/g,`
  $1`),ze=!Fe||Le.endsWith(`
`),Le)}return Ie(Te)}function Ee(Te){return"peg$c"+Te}function _e(Te){return"peg$r"+Te}function ye(Te){return"peg$e"+Te}function be(Te){return"peg$f"+Te}function Se(Te){return"peg$import"+Te}function De(Te){return"peg$parse"+Te}function xe(){function Te(Le){return'"'+q(Le)+'"'}function ze(Le){return"/^["+(Le.inverted?"^":"")+Le.value.map(function($e){return Array.isArray($e)?B($e[0])+"-"+B($e[1]):B($e)}).join("")+"]/"+(Le.ignoreCase?"i":"")+(Le.unicode?"u":"")}function Fe(Le){switch(Le.type){case"rule":return'peg$otherExpectation("'+q(Le.value)+'")';case"literal":return'peg$literalExpectation("'+q(Le.value)+'", '+Le.ignoreCase+")";case"class":return"peg$classExpectation(["+Le.value.map(function($e){return Array.isArray($e)?'["'+q($e[0])+'", "'+q($e[1])+'"]':'"'+q($e)+'"'}).join(", ")+"], "+Le.inverted+", "+Le.ignoreCase+", "+Le.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(Le)+")")}}function Ie(Le,$e){return R(`
  function `.concat(be($e),"(").concat(Le.params.join(", "),") {"),ge(Le.body,"    "),Le.location,"  }")}return new F(null,null,Z.grammarSource,[J.map(function(Le,$e){return"  const "+Ee($e)+" = "+Te(Le)+";"}).concat("",oe.map(function(Le,$e){return"  const "+_e($e)+" = "+ze(Le)+";"})).concat("",te.map(function(Le,$e){return"  const "+ye($e)+" = "+Fe(Le)+";"})).concat("").join(`
`)].concat(_to_consumable_array(se.map(Ie))))}function pe(Te,ze){var Fe=[];return Fe.push(""),Z.trace&&Fe.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+Te+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),Z.cache&&(Fe.push("const key = peg$currPos * "+Y.rules.length+" + "+ze+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),Z.trace&&Fe.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Te+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Te+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),Fe.push("  return cached.result;","}","")),Fe}function we(Te,ze){var Fe=[];return Z.cache&&Fe.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+ze+" };"),Z.trace&&Fe.push("","if ("+ze+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Te+",","    result: "+ze+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Te+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),Fe.push("","return "+ze+";"),Fe}function Oe(Te){var ze,Fe,Ie,Le=[],$e=Te.bytecode,qe=new M(Te.name,"s","let",$e);function at(vt){var yt=function(){switch(vt[Ze]){case k.PUSH_EMPTY_STRING:ct.push(qe.push("''")),Ze++;break;case k.PUSH_CURR_POS:ct.push(qe.push("peg$currPos")),Ze++;break;case k.PUSH_UNDEFINED:ct.push(qe.push("undefined")),Ze++;break;case k.PUSH_NULL:ct.push(qe.push("null")),Ze++;break;case k.PUSH_FAILED:ct.push(qe.push("peg$FAILED")),Ze++;break;case k.PUSH_EMPTY_ARRAY:ct.push(qe.push("[]")),Ze++;break;case k.POP:qe.pop(),Ze++;break;case k.POP_CURR_POS:ct.push("peg$currPos = "+qe.pop()+";"),Ze++;break;case k.POP_N:qe.pop(vt[Ze+1]),Ze+=2;break;case k.NIP:wt=qe.pop(),qe.pop(),ct.push(qe.push(wt)),Ze++;break;case k.APPEND:wt=qe.pop(),ct.push(qe.top()+".push("+wt+");"),Ze++;break;case k.WRAP:ct.push(qe.push("["+qe.pop(vt[Ze+1]).join(", ")+"]")),Ze+=2;break;case k.TEXT:ct.push(qe.push("input.substring("+qe.pop()+", peg$currPos)")),Ze++;break;case k.PLUCK:{var Ot=vt[Ze+3-1],qt=3+Ot;wt=vt.slice(Ze+3,Ze+qt),wt=Ot===1?qe.index(wt[0]):"[ ".concat(wt.map(function(ot){return qe.index(ot)}).join(", ")," ]"),qe.pop(vt[Ze+1]),ct.push(qe.push(wt)),Ze+=qt;break}case k.IF:xt(qe.top(),0);break;case k.IF_ERROR:xt(qe.top()+" === peg$FAILED",0);break;case k.IF_NOT_ERROR:xt(qe.top()+" !== peg$FAILED",0);break;case k.IF_LT:xt(qe.top()+".length < "+vt[Ze+1],1);break;case k.IF_GE:xt(qe.top()+".length >= "+vt[Ze+1],1);break;case k.IF_LT_DYNAMIC:xt(qe.top()+".length < ("+qe.index(vt[Ze+1])+"|0)",1);break;case k.IF_GE_DYNAMIC:xt(qe.top()+".length >= ("+qe.index(vt[Ze+1])+"|0)",1);break;case k.WHILE_NOT_ERROR:Ut(qe.top()+" !== peg$FAILED");break;case k.MATCH_ANY:xt("input.length > peg$currPos",0);break;case k.MATCH_STRING:{var Tt=vt[Ze+1],St=J[Tt];$t(function(ot,Rt){return St.length>1?"".concat(ot," === ").concat(Ee(Tt)):(ot=Rt?"".concat(ot,".charCodeAt(0)"):"input.charCodeAt(peg$currPos)","".concat(ot," === ").concat(St.charCodeAt(0)))},1,St.length);break}case k.MATCH_STRING_IC:{var nt=vt[Ze+1];$t(function(ot){return"".concat(ot,".toLowerCase() === ").concat(Ee(nt))},1,J[nt].length);break}case k.MATCH_CHAR_CLASS:{var ke=vt[Ze+1];$t(function(ot){return"".concat(_e(ke),".test(").concat(ot,")")},1,1);break}case k.MATCH_UNICODE_CLASS:{var Ue=vt[Ze+1];$t(function(ot){return"".concat(_e(Ue),".test(").concat(ot,")")},1,-1);break}case k.ACCEPT_N:ct.push(qe.push(At(vt[Ze+1]))),ct.push(Ct(vt[Ze+1],qe.top())),Ze+=2;break;case k.ACCEPT_STRING:ct.push(qe.push(Ee(vt[Ze+1]))),ct.push(J[vt[Ze+1]].length>1?"peg$currPos += "+J[vt[Ze+1]].length+";":"peg$currPos++;"),Ze+=2;break;case k.FAIL:ct.push(qe.push("peg$FAILED")),ct.push("if (peg$silentFails === 0) { peg$fail("+ye(vt[Ze+1])+"); }"),Ze+=2;break;case k.LOAD_SAVED_POS:ct.push("peg$savedPos = "+qe.index(vt[Ze+1])+";"),Ze+=2;break;case k.UPDATE_SAVED_POS:ct.push("peg$savedPos = peg$currPos;"),Ze++;break;case k.CALL:wt=Xt(4),qe.pop(vt[Ze+2]),ct.push(qe.push(wt)),Ze+=4+vt[Ze+3];break;case k.RULE:ct.push(qe.push(De(Y.rules[vt[Ze+1]].name)+"()")),Ze+=2;break;case k.LIBRARY_RULE:{var Ye=vt[Ze+2],tt=Ye===-1?"":', "'+le[Ye]+'"';ct.push(qe.push("peg$callLibrary("+Se(vt[Ze+1])+tt+")")),Ze+=3;break}case k.SILENT_FAILS_ON:ct.push("peg$silentFails++;"),Ze++;break;case k.SILENT_FAILS_OFF:ct.push("peg$silentFails--;"),Ze++;break;case k.SOURCE_MAP_PUSH:qe.sourceMapPush(ct,ne[vt[Ze+1]]),Ze+=2;break;case k.SOURCE_MAP_POP:{qe.sourceMapPop(),Ze++;break}case k.SOURCE_MAP_LABEL_PUSH:qe.labels[vt[Ze+1]]={label:J[vt[Ze+2]],location:ne[vt[Ze+3]]},Ze+=4;break;case k.SOURCE_MAP_LABEL_POP:delete qe.labels[vt[Ze+1]],Ze+=2;break;default:throw new Error("Invalid opcode: "+vt[Ze]+".")}},Ze=0,_t=vt.length,ct=[],wt;function xt(Ot,qt,Tt){var St,nt,ke=qt+3,Ue=vt[Ze+ke-2],Ye=vt[Ze+ke-1],tt=_sliced_to_array(qe.checkedIf(Ze,function(){return Ze+=ke+Ue,(Tt||at)(vt.slice(Ze-Ue,Ze))},Ye>0?function(){return Ze+=Ye,at(vt.slice(Ze-Ye,Ze))}:null),2),ot=tt[0],Rt=tt[1];ct.push("if ("+Ot+") {"),(St=ct).push.apply(St,_to_consumable_array(me(ot))),Ye>0&&(ct.push("} else {"),(nt=ct).push.apply(nt,_to_consumable_array(me(Rt)))),ct.push("}")}function At(Ot){switch(Ot){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return"input.substr(peg$currPos, ".concat(Ot,")")}}function Ct(Ot,qt){switch(Ot){case-1:return"peg$currPos += ".concat(qt,".length;");case 1:return"peg$currPos++;";default:return"peg$currPos += ("+Ot+");"}}function $t(Ot,qt,Tt){var St=qt+3,nt=At(Tt),ke=null;vt[Ze+St]===k.ACCEPT_N&&vt[Ze+St+1]===Tt&&(ct.push(qe.push(nt)),nt=qe.pop(),ke=function(Ue){qe.sp++;var Ye=at(Ue.slice(2));return Ye.unshift(Ct(Tt,nt)),Ye}),xt(Ot(nt,ke!==null),qt,ke)}function Ut(Ot){var qt,Tt=vt[Ze+2-1],St=qe.checkedLoop(Ze,function(){return Ze+=2+Tt,at(vt.slice(Ze-Tt,Ze))});ct.push("while ("+Ot+") {"),(qt=ct).push.apply(qt,_to_consumable_array(me(St))),ct.push("}")}function Xt(Ot){var qt=vt[Ze+Ot-1];return be(vt[Ze+1])+"("+vt.slice(Ze+Ot,Ze+Ot+qt).map(function(Tt){return qe.index(Tt)}).join(", ")+")"}for(;Ze<_t;)yt();return ct}var lt=at($e);return Le.push(R("function ",De(Te.name),Te.nameLocation,`() {
`,Te.name)),Z.trace&&Le.push("  var startPos = peg$currPos;"),Le.push(me(qe.defines())),(ze=Le).push.apply(ze,_to_consumable_array(me(pe('"'+q(Te.name)+'"',A.indexOfRule(Y,Te.name))))),(Fe=Le).push.apply(Fe,_to_consumable_array(me(lt))),(Ie=Le).push.apply(Ie,_to_consumable_array(me(we('"'+q(Te.name)+'"',qe.result())))),Le.push("}"),Le.push(""),Le}function Ce(Te){return Te.codeLocation?S(Te.code,Te.codeLocation,"$"+Te.type):Te.code}function Pe(){var Te=[],ze=Y.topLevelInitializer;if(ze)if(Array.isArray(ze)){if(Z.format==="es"){var Fe=[],Ie=[],Le=!0,$e=!1,qe=void 0;try{for(var at=ze[Symbol.iterator](),lt;!(Le=(lt=at.next()).done);Le=!0){var vt=lt.value,yt=_sliced_to_array(W(vt.code,{startRule:"ImportsAndSource",grammarSource:new V(vt.codeLocation.source,vt.codeLocation.start)}),2),Ze=yt[0],_t=yt[1];Ze.code?(Fe.push(Ze),Ie.push(_t)):Ie.push(vt)}}catch(Ye){$e=!0,qe=Ye}finally{try{!Le&&at.return!=null&&at.return()}finally{if($e)throw qe}}ze=Ie.concat(Fe)}var ct=ze.slice(0).reverse(),wt=!0,xt=!1,At=void 0;try{for(var Ct=ct[Symbol.iterator](),$t;!(wt=($t=Ct.next()).done);wt=!0){var Ut=$t.value;Te.push(Ce(Ut)),Te.push("")}}catch(Ye){xt=!0,At=Ye}finally{try{!wt&&Ct.return!=null&&Ct.return()}finally{if(xt)throw At}}}else Te.push(Ce(ze)),Te.push("");Te.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),Z.trace&&Te.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");var Xt=`{
`+ue.map(function(Ye){return"    ".concat(Ye,": ").concat(De(Ye),`,
`)}).join("")+"  }",Ot=De(ue[0]),qt=!0,Tt=!1,St=void 0;if(Te.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+Xt+";","  let peg$startRuleFunction = "+Ot+";","",xe(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),Z.cache&&Te.push("  let peg$resultsCache = {};",""),Z.trace&&Te.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),Te.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),Y.imports.length>0&&Te.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),Y.rules.forEach(function(Ye){var tt;(tt=Te).push.apply(tt,_to_consumable_array(me(Oe(Ye))))}),Y.initializer)if(Array.isArray(Y.initializer))try{for(var nt=Y.initializer[Symbol.iterator](),ke;!(qt=(ke=nt.next()).done);qt=!0){var Ue=ke.value;Te.push(Ce(Ue)),Te.push("")}}catch(Ye){Tt=!0,St=Ye}finally{try{!qt&&nt.return!=null&&nt.return()}finally{if(Tt)throw St}}else Te.push(Ce(Y.initializer)),Te.push("");return Te.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new F(null,null,Z.grammarSource,Te.map(function(Ye){return _instanceof(Ye,F)?Ye:Ye+`
`}))}function Ne(Te){function ze(){return["// @generated by Peggy ".concat(D,"."),"//","// https://peggyjs.org/"]}function Fe(){var Le=["{"];return Z.trace&&Le.push("  DefaultTracer: peg$DefaultTracer,"),Z.allowedStartRules&&Le.push("  StartRules: ["+Z.allowedStartRules.map(function($e){return'"'+$e+'"'}).join(", ")+"],"),Le.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),Le.push("}"),Le.join(`
`)}var Ie={bare:function(){if(Object.keys(ce).length>0||Y.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return _to_consumable_array(ze()).concat(["(function() {",'  "use strict";',Te,me("return "+Fe()+";"),"})()"])},commonjs:function(){var $e=Object.keys(ce),qe=ze();qe.push("",'"use strict";'),$e.length>0&&($e.forEach(function(vt){qe.push("const "+vt+' = require("'+q(ce[vt])+'");')}),qe.push(""));for(var at=Y.imports.length,lt=0;lt<at;lt++)qe.push("const "+Se(lt)+' = require("'+q(Y.imports[lt].from.module)+'");');return qe.push("",Te,"","module.exports = "+Fe()+";"),qe},es:function(){var $e=Object.keys(ce),qe=ze();qe.push(""),$e.length>0&&($e.forEach(function(lt){qe.push("import "+lt+' from "'+q(ce[lt])+'";')}),qe.push(""));for(var at=0;at<Y.imports.length;at++)qe.push("import * as "+Se(at)+' from "'+q(Y.imports[at].from.module)+'";');return qe.push("",Te,""),qe.push("const peg$allowedStartRules = [","  "+(Z.allowedStartRules?Z.allowedStartRules.map(function(lt){return'"'+lt+'"'}).join(`,
  `):""),"];",""),qe.push("export {"),Z.trace&&qe.push("  peg$DefaultTracer as DefaultTracer,"),qe.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),qe},amd:function(){if(Y.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");var $e=Object.keys(ce),qe="["+$e.map(function(lt){return ce[lt]}).map(function(lt){return'"'+q(lt)+'"'}).join(", ")+"]",at=$e.join(", ");return _to_consumable_array(ze()).concat(["define("+qe+", function("+at+") {",'  "use strict";',Te,"",me("return "+Fe()+";"),"});"])},globals:function(){if(Object.keys(ce).length>0||Y.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!Z.exportVar)throw new Error("No export variable defined for format 'globals'.");return _to_consumable_array(ze()).concat(["(function(root) {",'  "use strict";',Te,"",me("root."+Z.exportVar+" = "+Fe()+";"),"})(this);"])},umd:function(){if(Y.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");var $e=Object.keys(ce),qe=$e.map(function(Ze){return ce[Ze]}),at="["+qe.map(function(Ze){return'"'+q(Ze)+'"'}).join(", ")+"]",lt=qe.map(function(Ze){return'require("'+q(Ze)+'")'}).join(", "),vt=$e.join(", "),yt=ze();return yt.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+at+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+lt+");"),Z.exportVar&&yt.push("  } else {","    root."+Z.exportVar+" = factory();"),yt.push("  }","})(this, function("+vt+") {",'  "use strict";',Te,"",me("return "+Fe()+";"),"});"),yt}}[Z.format||"bare"]();return new F(null,null,Z.grammarSource,Ie.map(function(Le){return _instanceof(Le,F)?Le:Le+`
`}))}Y.code=Ne(Pe())},A=he(),k=Ht(),M=Rr(),N=es(),D=N.version,I=Qe(),q=I.stringEscape,B=I.regexpClassEscape,z=Kt(),F=z.SourceNode,V=Ve(),H=ts(),W=H.parse;v.exports=T}),kr=U(function(_,v){var S=function(A,k,M){function N(I){return I.type==="rule"&&I.expression.type==="rule_ref"}function D(I,q,B){T.build({rule_ref:function(z){z.name===q&&(z.name=B,M.info('Proxy rule "'.concat(q,'" replaced by the rule "').concat(B,'"'),z.location,[{message:"This rule will be used",location:R.findRule(I,B).nameLocation}]))}})(I)}A.rules.forEach(function(I){N(I)&&D(A,I.name,I.expression.name)})},R=he(),T=K();v.exports=S}),jr=U(function(_,v){var S=function(V,H){var W=V,Y=H;Object.keys(W).forEach(function(Z){return delete W[Z]}),Object.keys(Y).forEach(function(Z){W[Z]=Y[Z]})},R=function(V){V.sort(function(te,se){var le=_sliced_to_array(Array.isArray(te)?te:[te,te],2),ue=le[0],ce=le[1],ge=_sliced_to_array(Array.isArray(se)?se:[se,se],2),me=ge[0],Ee=ge[1];return ue!==me?ue<me?-1:1:ce!==Ee?ce>Ee?-1:1:0});for(var H="",W="",Y=0;Y<V.length;Y++){var Z=V[Y],J=_sliced_to_array(Array.isArray(Z)?Z:[Z,Z],2),ne=J[0],oe=J[1];if(typeof ne=="string"&&typeof oe=="string"&&typeof H=="string"&&typeof W=="string"){if(oe<=W){V.splice(Y--,1);continue}if(W.charCodeAt(0)+1>=ne.charCodeAt(0)){V.splice(Y--,1),V[Y]=[H,W=oe];continue}}H=ne,W=oe}return V},T=function(V,H){N.build({class:function(W){var Y;if(W.unicode){var Z=[],J=!0,ne=!1,oe=void 0;try{for(var te=W.parts[Symbol.iterator](),se;!(J=(se=te.next()).done);J=!0){var le=se.value;if(Array.isArray(le)){var ue=_sliced_to_array(le.map(function(me){return me.codePointAt(0)}),2),ce=ue[0],ge=ue[1];ce<B&&ge>z&&(H.info("Removing surrogate range from [".concat(M(le[0]),"-").concat(M(le[1]),"]"),W.location),Z.push([F,le[1]]),le[1]=q)}}}catch(me){ne=!0,oe=me}finally{try{!J&&te.return!=null&&te.return()}finally{if(ne)throw oe}}(Y=W.parts).push.apply(Y,_to_consumable_array(Z))}}})(V)},A=function(V,H,W){var Y=Object.create(null);V.rules.forEach(function(te){return Y[te.name]=te.expression});var Z=new Set;T(V,W);var J=[function(te){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(te.type){case"class":if(te.inverted)break;return se?_object_spread_props(_object_spread({},te),{parts:_to_consumable_array(te.parts)}):te;case"literal":{var le=I(te.value);if(le<0)break;return{type:"class",parts:[te.value],inverted:!1,ignoreCase:te.ignoreCase,location:te.location,unicode:le>65535}}case"rule_ref":{var ue=Y[te.name];if(!ue)break;Z.has(te.name)||(Z.add(te.name),oe(ue));var ce=ne(ue,!0);return ce&&(ce.location=te.location),ce}}return null},N.build({choice:function(te){var se=null,le=!1;te.alternatives.forEach(function(ue,ce){var ge;oe(ue);var me=ne(ue);if(!me){se=null;return}se&&se.ignoreCase===me.ignoreCase?((ge=se.parts).push.apply(ge,_to_consumable_array(me.parts)),te.alternatives[ce-1]=se,te.alternatives[ce]=se,se.unicode=se.unicode||me.unicode,se.location={source:se.location.source,start:se.location.start,end:me.location.end},le=!0):se=me}),le&&(te.alternatives=te.alternatives.filter(function(ue,ce,ge){return!ce||ue!==ge[ce-1]}),te.alternatives.forEach(function(ue,ce){ue.type==="class"&&(ue.parts=R(ue.parts),ue.parts.length===1&&!Array.isArray(ue.parts[0])&&typeof ue.parts[0]=="string"&&!ue.inverted&&(te.alternatives[ce]={type:"literal",value:ue.parts[0],ignoreCase:ue.ignoreCase,location:ue.location}))}),te.alternatives.length===1&&S(te,te.alternatives[0]))},text:function(te){if(oe(te.expression),te.expression.type==="class"||te.expression.type==="literal"){var se=te.location;S(te,te.expression),te.location=se}}})],ne=J[0],oe=J[1];V.rules.forEach(function(te){Z.add(te.name),oe(te.expression)})},k=Qe(),M=k.stringEscape,N=K(),D=Qe(),I=D.codePointLen1,q=String.fromCodePoint(55295),B=55296,z=57343,F=String.fromCodePoint(57344);v.exports=A}),Br=U(function(_,v){var S=function(T,A,k){var M=Object.create(null);T.rules.forEach(function(B){M[B.name]=B});for(var N=_to_consumable_array(A.allowedStartRules),D=new Set,I=R.build({rule_ref:function(B){N.push(B.name)}});N.length;){var q=N.shift();D.has(q)||(D.add(q),I(M[q]))}T.rules=T.rules.filter(function(B){return D.has(B.name)?!0:(k.info('Removing unused rule: "'.concat(B.name,'"'),B.location),!1)})},R=K();v.exports=S}),Gr=U(function(_,v){var S=function(R,T,A){var k={},M=!0,N=!1,D=void 0,I=!0,q=!1,B=void 0;try{for(var z=R.imports[Symbol.iterator](),F;!(I=(F=z.next()).done);I=!0){var V=F.value;try{for(var H=V.what[Symbol.iterator](),W;!(M=(W=H.next()).done);M=!0){var Y=W.value;Y.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(k,Y.binding)&&A.error('Module "'.concat(Y.binding,'" is already imported'),Y.location,[{message:"Original module location",location:k[Y.binding]}]),k[Y.binding]=Y.location)}}catch(Z){N=!0,D=Z}finally{try{!M&&H.return!=null&&H.return()}finally{if(N)throw D}}}}catch(Z){q=!0,B=Z}finally{try{!I&&z.return!=null&&z.return()}finally{if(q)throw B}}};v.exports=S}),Yr=U(function(_,v){var S=function(T,A,k){function M(I){var q={};return Object.keys(I).forEach(function(B){q[B]=I[B]}),q}function N(I,q){D(I.expression,M(q))}var D=R.build({rule:function(I){D(I.expression,{})},choice:function(I,q){I.alternatives.forEach(function(B){D(B,M(q))})},action:N,labeled:function(I,q){var B=I.label;B&&Object.prototype.hasOwnProperty.call(q,B)&&k.error('Label "'.concat(I.label,'" is already defined'),I.labelLocation,[{message:"Original label location",location:q[B]}]),D(I.expression,q),q[I.label]=I.labelLocation},text:N,simple_and:N,simple_not:N,optional:N,zero_or_more:N,one_or_more:N,repeated:function(I,q){I.delimiter&&D(I.delimiter,M(q)),D(I.expression,M(q))},group:N});D(T)},R=K();v.exports=S}),Jr=U(function(_,v){var S=function(T,A,k){var M={};R.build({rule:function(N){if(Object.prototype.hasOwnProperty.call(M,N.name)){k.error('Rule "'.concat(N.name,'" is already defined'),N.nameLocation,[{message:"Original rule location",location:M[N.name]}]);return}M[N.name]=N.nameLocation}})(T)},R=K();v.exports=S}),Qr=U(function(_,v){var S=function(A,k,M){var N=[],D=[],I=new Set,q=T.build({rule:function(B){M.errors>0||I.has(B.name)||(I.add(B.name),N.push(B.name),q(B.expression),N.pop())},sequence:function(B){M.errors>0||B.elements.every(function(z){return q(z),M.errors>0?!1:!R.alwaysConsumesOnSuccess(A,z)})},repeated:function(B){M.errors>0||(q(B.expression),B.delimiter&&!R.alwaysConsumesOnSuccess(A,B.expression)&&q(B.delimiter))},rule_ref:function(B){if(!(M.errors>0)){D.push(B);var z=R.findRule(A,B.name);if(N.indexOf(B.name)!==-1){N.push(B.name),M.error("Possible infinite loop when parsing (left recursion: "+N.join(" -> ")+")",z.nameLocation,D.map(function(F,V,H){return{message:V+1!==H.length?"Step ".concat(V+1,': call of the rule "').concat(F.name,'" without input consumption'):"Step ".concat(V+1,": calls itself without input consumption - left recursion"),location:F.location}}));return}z&&q(z),D.pop()}}});q(A)},R=he(),T=K();v.exports=S}),Zr=U(function(_,v){var S=function(A,k,M){var N=T.build({zero_or_more:function(D){R.alwaysConsumesOnSuccess(A,D.expression)||M.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",D.location)},one_or_more:function(D){R.alwaysConsumesOnSuccess(A,D.expression)||M.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",D.location)},repeated:function(D){if(D.delimiter&&N(D.delimiter),!(R.alwaysConsumesOnSuccess(A,D.expression)||D.delimiter&&R.alwaysConsumesOnSuccess(A,D.delimiter)))if(D.max.value===null)M.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",D.location);else{var I=D.min?D.min:D.max;M.warning(I.type==="constant"&&D.max.type==="constant"?"An expression may not consume any input and may always match ".concat(D.max.value," times"):"An expression may not consume any input and may always match with a maximum repetition count",D.location)}}});N(A)},R=he(),T=K();v.exports=S}),tn=U(function(_,v){var S=function(A,k,M){T.build({rule_ref:function(N){R.findRule(A,N.name)||M.error('Rule "'.concat(N.name,'" is not defined'),N.location)}})(A)},R=he(),T=K();v.exports=S}),rn=U(function(_,v){var S=function(T,A,k){var M=R.build({action:function(N){M(N.expression,N)},labeled:function(N,D){N.pick&&D&&k.error('"@" cannot be used with an action block',N.labelLocation,[{message:"Action block location",location:D.codeLocation}]),M(N.expression)}});M(T)},R=K();v.exports=S}),cn=U(function(_,v){var S=function(M,N,D){var I=R.build({choice:function(q){q.alternatives.forEach(function(F){return I(F)});for(var B=0;B<q.alternatives.length-1;B++){var z=q.alternatives[B];z.match===A&&D.warning("Always matches.  Following alternatives may not be reachable.",z.location)}},simple_and:function(q){I(q.expression),q.expression.match===A?D.warning("Always matches, making the & predicate redundant.",q.expression.location):q.expression.match===k&&D.warning("Never matches, making the & predicate always fail.",q.expression.location)},simple_not:function(q){I(q.expression),q.expression.match===A?D.warning("Always matches, making the ! predicate always fail.",q.expression.location):q.expression.match===k&&D.warning("Never matches, making the ! predicate redundant.",q.expression.location)}});I(M)},R=K(),T=ht(),A=T.ALWAYS_MATCH,k=T.NEVER_MATCH;v.exports=S}),an=U(function(_,v){var S=ft(),R=(function(){function A(k){_class_call_check(this,A),k=(typeof k>"u"?"undefined":_type_of(k))<"u"?k:{},typeof k.error=="function"&&(this.error=k.error),typeof k.warning=="function"&&(this.warning=k.warning),typeof k.info=="function"&&(this.info=k.info)}return _create_class(A,[{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}}]),A})(),T=(function(){function A(k){_class_call_check(this,A),this._callbacks=new R(k),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}return _create_class(A,[{key:"error",value:function(){for(var M=arguments.length,N=new Array(M),D=0;D<M;D++)N[D]=arguments[D];var I;++this.errors,this._firstError===null&&(this._firstError=_construct(S,_to_consumable_array(N)),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error"].concat(_to_consumable_array(N))),(I=this._callbacks).error.apply(I,[this.stage].concat(_to_consumable_array(N)))}},{key:"warning",value:function(){for(var M=arguments.length,N=new Array(M),D=0;D<M;D++)N[D]=arguments[D];var I;this.problems.push(["warning"].concat(_to_consumable_array(N))),(I=this._callbacks).warning.apply(I,[this.stage].concat(_to_consumable_array(N)))}},{key:"info",value:function(){for(var M=arguments.length,N=new Array(M),D=0;D<M;D++)N[D]=arguments[D];var I;this.problems.push(["info"].concat(_to_consumable_array(N))),(I=this._callbacks).info.apply(I,[this.stage].concat(_to_consumable_array(N)))}},{key:"checkErrors",value:function(){if(this.errors!==0)throw this._firstError}}]),A})();v.exports=T}),un=U(function(exports,module){var processOptions=function(_,v){var S={};return Object.keys(_).forEach(function(R){S[R]=_[R]}),Object.keys(v).forEach(function(R){Object.prototype.hasOwnProperty.call(S,R)||(S[R]=v[R])}),S},isSourceMapCapable=function(_){return typeof _=="string"?_.length>0:_&&typeof _.offset=="function"},addImportedRules=Xs(),fixLibraryNumbers=Ks(),generateBytecode=ir(),generateJS=Nr(),inferenceMatchResult=ht(),removeProxyRules=kr(),mergeCharacterClasses=jr(),removeUnusedRules=Br(),reportDuplicateImports=Gr(),reportDuplicateLabels=Yr(),reportDuplicateRules=Jr(),reportInfiniteRecursion=Qr(),reportInfiniteRepetition=Zr(),reportUndefinedRules=tn(),reportIncorrectPlucking=rn(),reportUnreachable=cn(),Session=an(),visitor=K(),base64=Qe().base64,compiler={visitor,passes:{prepare:[addImportedRules,reportInfiniteRecursion],check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRepetition,reportIncorrectPlucking,reportDuplicateImports],transform:[fixLibraryNumbers,removeProxyRules,mergeCharacterClasses,removeUnusedRules,inferenceMatchResult],semantic:[reportUnreachable],generate:[generateBytecode,generateJS]},compile:function compile(ast,passes,options){options=options!==void 0?options:{};var defaultStartRules=[ast.rules[0].name];if(options=processOptions(options,{allowedStartRules:defaultStartRules,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(options.allowedStartRules===null||options.allowedStartRules===void 0)&&(options.allowedStartRules=defaultStartRules),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");options.allowedStartRules.length===0&&(options.allowedStartRules=defaultStartRules);var allRules=ast.rules.map(function(_){return _.name}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(options.allowedStartRules.some(function(_){return _==="*"}))options.allowedStartRules=allRules;else try{for(var _iterator=options.allowedStartRules[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;if(allRules.indexOf(i)===-1)throw new Error('Unknown start rule "'.concat(i,'"'))}}catch(_){_didIteratorError=!0,_iteratorError=_}finally{try{!_iteratorNormalCompletion&&_iterator.return!=null&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");var session=new Session(options);switch(Object.keys(passes).forEach(function(_){session.stage=_,session.info("Process stage ".concat(_)),passes[_].forEach(function(v){session.info("Process pass ".concat(_,".").concat(v.name)),v(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if((typeof TextEncoder>"u"?"undefined":_type_of(TextEncoder))>"u")throw new Error("TextEncoder is not supported by this platform");var i=ast.code.toStringWithSourceMap(),n=new TextEncoder,e=base64(n.encode(JSON.stringify(i.map.toJSON())));return i.code+"//# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e,`
`)}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),Jl=ft(),Xl=Ve(),Ql=he(),Kl=un(),Zl=ts(),_es=es(),ea=_es.version,ta=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],Ke={VERSION:ea,RESERVED_WORDS:ta,GrammarError:Jl,GrammarLocation:Xl,parser:Zl,compiler:Kl,generate:function _(_,v){v=v!==void 0?v:{};function S(k){var M={};return Object.keys(k).forEach(function(N){M[N]=k[N].slice()}),M}var R="plugins"in v?v.plugins:[],T={parser:Ke.parser,passes:S(Ke.compiler.passes),reservedWords:Ke.RESERVED_WORDS.slice()};R.forEach(function(k){k.use(T,v)}),Array.isArray(_)||(_=[{source:v.grammarSource,text:_}]);var A=Ql.combine(_.map(function(k){var M=k.source,N=k.text;return T.parser.parse(N,{grammarSource:M,reservedWords:T.reservedWords})}));return Ke.compiler.compile(A,T.passes,v)}};return module.exports=Ke,__exports!=exports&&(module.exports=exports),module.exports})})(peggy_min$1,peggy_min$1.exports)),peggy_min$1.exports}var peggy_minExports=requirePeggy_min();const peggy=getDefaultExportFromCjs$1(peggy_minExports),grammarSource=`/*
 * CCS Grammar pro Peggy.js
 */

{
  function node(type, props) {
    return { type, ...props, loc: location() };
  }
}

Start
  = _ prog:Program _ !. { return prog; }

Program
  = head:Definition tail:(_ Definition)* {
      return [head, ...tail.map(t => t[1])];
    }

Definition
  = name:ProcessId _ "=" _ expr:Expression {
      return node("Definition", { name, process: expr });
    }



Expression
  = head:ParallelComponent tail:(_ "+" _ ParallelComponent)* {
      if(tail.length === 0) {
        return head;
      }
      return tail.reduce((acc, curr) => 
        node("Summation", { left: acc, right: curr[3] }), head);
    }


ParallelComponent
  = head:RestrictionComponent tail:(_ "|" _ RestrictionComponent)* {
      if(tail.length === 0) {
        return head;
      }
      return tail.reduce((acc, curr) => 
        node("Parallel", { left: acc, right: curr[3] }), head);
    }

RestrictionComponent
  = base:PrefixComponent ops:(_ (Restriction / Relabeling))* {
      return ops.reduce((acc, op) => {
        const operation = op[1];
        if(operation.type === "Restriction") {
          return node("Restriction", { process: acc, labels: operation.labels });
        } 
        else {
          return node("Relabeling", { process: acc, relabels: operation.relabels });
        }
      }, base);
    }


PrefixComponent
  = action:Action _ "." _ next:PrefixComponent {
      return node("Prefix", { action, next });
    }
  / Primary



TightComponent
  = base:Primary ops:(_ (Restriction / Relabeling))* {
      return ops.reduce((acc, op) => {
        const operation = op[1];
        if(operation.type === "Restriction") {
          return node("Restriction", { process: acc, labels: operation.labels });
        } 
        else {
          return node("Relabeling", { process: acc, relabels: operation.relabels });
        }
      }, base);
    }

Restriction
  = "\\\\" _ "{" _ labels:LabelList _ "}" { 
      if(labels.includes("tau")) {
        error("Cannot restrict 'tau'.");
      }
      return { type: "Restriction", labels }; 
    }

Relabeling
  = "[" _ relabels:RelabelList _ "]" { return { type: "Relabeling", relabels }; }



Primary
  = "(" _ expr:Expression _ ")" { return expr; }
  / "0" { return node("Nil"); }
  / "Nil" { return node("Nil"); }
  / id:ProcessId { return node("ProcessRef", { name: id }); }



Action
  = "tau" { return { label: "tau", isOutput: false }; }
  / "'" name:LabelName { return { label: name, isOutput: true }; } 
  / name:LabelName { return { label: name, isOutput: false }; }

LabelName "label"
  = head:[a-z] tail:[a-zA-Z0-9_]* { return head + tail.join(""); }

ProcessId "process identifier"
  = head:[A-Z] tail:[a-zA-Z0-9_]* { return head + tail.join(""); }

LabelList
  = head:LabelName tail:(_ "," _ LabelName)* { return [head, ...tail.map(t => t[3])]; }

RelabelList
  = head:RelabelPair tail:(_ "," _ RelabelPair)* { return [head, ...tail.map(t => t[3])]; }

RelabelPair
  = newLabel:LabelName _ "/" _ oldLabel:LabelName { 
      if(oldLabel === "tau") {
        error("Cannot rename 'tau'.");
      }
      return { new: newLabel, old: oldLabel }; 
    }

_ "whitespace"
  = (White / Comment)*

White
  = [ \\t\\n\\r]+

Comment
  = "//" [^\\n]*
  / "/*" (!"*/" .)* "*/"`;function validateCCS(_){const v=new Set;let S=null;for(const T of _){if(v.has(T.name))return`Process '${T.name}' is defined multiple times.`;v.add(T.name)}function R(T){if(!(S||!T))switch(T.type){case"ProcessRef":v.has(T.name)||(S=`Used undefined process '${T.name}'.`);break;case"Prefix":R(T.next);break;case"Summation":case"Parallel":R(T.left),R(T.right);break;case"Restriction":case"Relabeling":R(T.process);break}}for(const T of _)if(R(T.process),S)return S;return null}function ccsParser(){try{return peggy.generate(grammarSource)}catch(_){return console.error("Chyba pi generovn parseru: ",_),null}}function TextCCSParser({onCCSSubmit:_,onCCSChange:v,initValue:S,highlightRange:R,disabled:T,className:A,...k}){const[M,N]=reactExports.useState(S??""),[D,I]=reactExports.useState(null),q=reactExports.useMemo(()=>{const z=ccsParser();return z===null&&I("CCS parser was not initialized."),z},[]),B=z=>{N(z)};return reactExports.useEffect(()=>{if(!q)return;const z=setTimeout(()=>{try{const F=q.parse(M),V=validateCCS(F);if(V){I(V);return}v?.(F,M),_?.(F,M),I(null)}catch(F){F.location?I(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("b",{children:["Line ",F.location.start.line,":"]})," ",F.message]})):I(F.message)}},300);return()=>{clearTimeout(z)}},[M,q]),jsxRuntimeExports.jsxs("div",{className:cn$1("flex flex-col min-w-0",A),...k,children:[jsxRuntimeExports.jsx(TextEditor,{className:"flex-1 w-full h-full font-mono text-sm overflow-auto",onTextChange:B,initValue:M,highlightRange:R,disabled:T}),jsxRuntimeExports.jsx("div",{className:"shrink-0 flex justify-between items-end mt-2",children:D?jsxRuntimeExports.jsx(AlertBox,{type:"error",className:"shrink-0",children:D}):jsxRuntimeExports.jsx("span",{})})]})}const MIN_EDITOR_WIDTH=750,GAP=16;function EditorWrap({onSubmit:_,initValue:v,disabled:S}){const[R,T]=reactExports.useState(null),[A,k]=reactExports.useState(null),[M,N]=reactExports.useState(0),[D,I]=reactExports.useState({width:300,height:400}),q=reactExports.useRef(null),B=(H,W)=>{T(H),_?.(H,W)},z=(H,W)=>{T(H),_?.(H,W)};reactExports.useEffect(()=>{if(!q.current)return;const H=new ResizeObserver(W=>{for(const Y of W)N(Y.contentRect.width)});return H.observe(q.current),()=>H.disconnect()},[]);const F=M>0&&M<MIN_EDITOR_WIDTH+D.width+GAP,V=D.height;return jsxRuntimeExports.jsxs("div",{ref:q,className:`flex gap-x-4 transition-all duration-100 ease-in-out ${F?"flex-col":"flex-row justify-between"}`,children:[jsxRuntimeExports.jsx(TextCCSParser,{className:`grow min-h-[500px] ${F?"w-full":""}`,onCCSChange:B,onCCSSubmit:z,highlightRange:A,initValue:v,disabled:S}),jsxRuntimeExports.jsx(SyntaxTree,{parsedAst:R,onHoverNode:k,onContentResize:I,className:`transition-all duration-100 shrink-0 ${F?"w-full pt-4":"min-w-[300px]"}`,style:{width:F?"100%":Math.min(D.width,M*.5),height:F?V:"auto"}})]})}function getPrecedence(_){switch(_.type){case"Nil":case"ProcessRef":return 4;case"Prefix":case"Restriction":case"Relabeling":return 3;case"Parallel":return 2;case"Summation":return 1;default:return 0}}function flatten(_,v){return _.type===v?[...flatten(_.left,v),...flatten(_.right,v)]:[_]}function areActionsEqual(_,v){return _.label===v.label&&_.isOutput===v.isOutput}function areProcessesEqual(_,v){return ccsToString(_,!0)===ccsToString(v,!0)}function findDefinition(_,v){const S=v.find(R=>R.name===_);return S?S.process:null}function ccsToString(_,v=!1){const S=v?normalizeCCS(_):_;function R(T){const A=getPrecedence(T),k=M=>{const N=R(M),D=getPrecedence(M);return D<A?`(${N})`:!v&&D===A&&(M.type==="Parallel"||M.type==="Summation")?`(${N})`:N};switch(T.type){case"Definition":return`${T.name} = ${R(T.process)}`;case"Nil":return"0";case"ProcessRef":return T.name;case"Prefix":return`${T.action.isOutput?`'${T.action.label}`:T.action.label}.${k(T.next)}`;case"Restriction":{const M=T.labels.join(", ");return`${k(T.process)} \\ {${M}}`}case"Relabeling":{const M=T.relabels.map(N=>`${N.new}/${N.old}`).join(", ");return`${k(T.process)} [${M}]`}case"Summation":case"Parallel":{const M=T.type==="Parallel"?" | ":" + ";return`${k(T.left)}${M}${k(T.right)}`}default:return""}}return R(S)}function normalizeCCS(_){return _.type==="Definition"?{..._,process:normalizeExpression(_.process)}:normalizeExpression(_)}function normalizeExpression(_){if(_.type==="Prefix")return{..._,next:normalizeExpression(_.next)};if(_.type==="Restriction"){const v=[..._.labels].sort();return{..._,process:normalizeExpression(_.process),labels:v}}if(_.type==="Relabeling"){const v=[..._.relabels].sort((S,R)=>S.old.localeCompare(R.old));return{..._,process:normalizeExpression(_.process),relabels:v}}if(_.type==="Parallel"||_.type==="Summation"){let S=flatten(_,_.type).map(T=>normalizeExpression(T)).filter(T=>T.type!=="Nil");if(S.length===0)return{type:"Nil"};if(_.type==="Summation"){const T=new Map;for(const A of S)T.set(ccsToString(A,!1),A);S=Array.from(T.values())}if(S.length===1)return S[0];S.sort((T,A)=>ccsToString(T,!1).localeCompare(ccsToString(A,!1)));const R=T=>{if(T.length===1)return T[0];const[A,...k]=T;return{type:_.type,left:A,right:R(k)}};return R(S)}return _}function applySosRule(_,v,S,R,T,A,k){const M=(q,B,z)=>({id:Math.random().toString(36).substr(2,9),source:q,target:B,action:z,status:"pending",children:[]}),N=q=>({status:"invalid",errorMessage:q,children:[]}),D=()=>({status:"proved",children:[]}),I=(q,B,z)=>({status:"pending",children:[M(q,B,z)]});if(R==="ACT")return _.type!=="Prefix"?N("Zdroj nem prefix."):areActionsEqual(_.action,S)?areProcessesEqual(_.next,v)?D():N("Vsledn proces nesed."):N(`Akce se neshoduje (${_.action.isOutput?"'":""}${_.action.label} vs ${S.isOutput?"'":""}${S.label}).`);if(R==="SUM_LEFT")return _.type!=="Summation"?N("Nejedn se o sumu."):I(_.left,v,S);if(R==="SUM_RIGHT")return _.type!=="Summation"?N("Nejedn se o sumu."):I(_.right,v,S);if(R==="COM_LEFT")return _.type!=="Parallel"||v.type!=="Parallel"?N("Nejedn se o paraleln proces."):areProcessesEqual(_.right,v.right)?I(_.left,v.left,S):N("Prav strana se zmnila.");if(R==="COM_RIGHT")return _.type!=="Parallel"||v.type!=="Parallel"?N("Nejedn se o paraleln proces."):areProcessesEqual(_.left,v.left)?I(_.right,v.right,S):N("Lev strana se zmnila.");if(R==="COM_SYNC"){if(_.type!=="Parallel"||v.type!=="Parallel")return N("Nejedn se o paraleln proces.");if(S.label!=="tau")return N("Synchronizace mus vst na tau akci.");const q=k?.label,B=k?.leftSends;return q?{status:"pending",children:[M(_.left,v.left,{label:q,isOutput:B}),M(_.right,v.right,{label:q,isOutput:!B})]}:N("Chyb synchronizan akce.")}if(R==="CON"){if(_.type!=="ProcessRef")return N("Nejedn se o odkaz na proces.");const q=findDefinition(_.name,T);return q?I(q,v,S):N(`Definice ${_.name} nenalezena.`)}if(R==="RES"){if(_.type!=="Restriction"||v.type!=="Restriction")return N("Neshoda v restrikci.");if(_.labels.includes(S.label))return N(`Akce '${S.label}' je restrikc zakzna.`);const q=[..._.labels].sort(),B=[...v.labels].sort();return q.join(",")!==B.join(",")?N("Restrikn mnoina se nesm mnit."):I(_.process,v.process,S)}if(R==="REL"){if(_.type!=="Relabeling"||v.type!=="Relabeling")return N("Nejedn se o pejmenovn.");const q=k?.oldLabel;if(!q&&S.label!=="tau")return N("Nebyla vybrna pvodn akce.");const B=[..._.relabels].sort(),z=[...v.relabels].sort();if(B.map(V=>V.old+"/"+V.new).join(",")!==z.map(V=>V.old+"/"+V.new).join(","))return N("Sada pejmenovn se nesm mnit.");let F;if(S.label==="tau")F={label:"tau",isOutput:!1};else{F={label:q,isOutput:S.isOutput};const V=_.relabels.find(W=>W.old===q),H=V?V.new:q;if(H!==S.label)return N(`Neplatn pejmenovn (${q} -> ${H}).`)}return I(_.process,v.process,F)}return N("Neznm pravidlo.")}const badgeVariants=cva("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:_,variant:v,...S}){return jsxRuntimeExports.jsx("div",{className:cn$1(badgeVariants({variant:v}),_),...S})}const minimalTheme=EditorView.theme({"&":{backgroundColor:"transparent !important",fontSize:"inherit",fontFamily:"'Consolas', monospace"},".cm-scroller":{fontFamily:"inherit",overflow:"hidden !important"},".cm-content":{padding:"0",caretColor:"transparent"},".cm-line":{paddingLeft:"0"},"&.cm-focused":{outline:"none"}});function CCSViewer({code:_,className:v}){return jsxRuntimeExports.jsx("div",{className:v,style:{display:"inline-block",width:"100%"},children:jsxRuntimeExports.jsx(ReactCodeMirror,{value:_,readOnly:!0,editable:!1,basicSetup:{lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightSelectionMatches:!1,bracketMatching:!1,history:!1,drawSelection:!1},extensions:[ccsLanguage,syntaxHighlighting(ccsHighlightStyle),minimalTheme,EditorView.lineWrapping]})})}function clamp(_,[v,S]){return Math.min(S,Math.max(v,_))}function createSlot(_){const v=createSlotClone(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),N=M.find(isSlottable);if(N){const D=N.props.children,I=M.map(q=>q===N?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,I):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef(T),M=mergeProps(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const N=A(...M);return T(...M),N}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_=>{const{__scopeSelect:v,children:S,open:R,defaultOpen:T,onOpenChange:A,value:k,defaultValue:M,onValueChange:N,dir:D,name:I,autoComplete:q,disabled:B,required:z,form:F}=_,V=usePopperScope(v),[H,W]=reactExports.useState(null),[Y,Z]=reactExports.useState(null),[J,ne]=reactExports.useState(!1),oe=useDirection(D),[te,se]=useControllableState({prop:R,defaultProp:T??!1,onChange:A,caller:SELECT_NAME}),[le,ue]=useControllableState({prop:k,defaultProp:M,onChange:N,caller:SELECT_NAME}),ce=reactExports.useRef(null),ge=H?F||!!H.closest("form"):!0,[me,Ee]=reactExports.useState(new Set),_e=Array.from(me).map(ye=>ye.props.value).join(";");return jsxRuntimeExports.jsx(Root2$2,{...V,children:jsxRuntimeExports.jsxs(SelectProvider,{required:z,scope:v,trigger:H,onTriggerChange:W,valueNode:Y,onValueNodeChange:Z,valueNodeHasChildren:J,onValueNodeHasChildrenChange:ne,contentId:useId(),value:le,onValueChange:ue,open:te,onOpenChange:se,dir:oe,triggerPointerDownPosRef:ce,disabled:B,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:v,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(ye=>{Ee(be=>new Set(be).add(ye))},[]),onNativeOptionRemove:reactExports.useCallback(ye=>{Ee(be=>{const Se=new Set(be);return Se.delete(ye),Se})},[]),children:S})}),ge?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:z,tabIndex:-1,name:I,autoComplete:q,value:le,onChange:ye=>ue(ye.target.value),disabled:B,form:F,children:[le===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(me)]},_e):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,disabled:R=!1,...T}=_,A=usePopperScope(S),k=useSelectContext(TRIGGER_NAME,S),M=k.disabled||R,N=useComposedRefs(v,k.onTriggerChange),D=useCollection(S),I=reactExports.useRef("touch"),[q,B,z]=useTypeaheadSearch(V=>{const H=D().filter(Z=>!Z.disabled),W=H.find(Z=>Z.value===k.value),Y=findNextItem(H,V,W);Y!==void 0&&k.onValueChange(Y.value)}),F=V=>{M||(k.onOpenChange(!0),z()),V&&(k.triggerPointerDownPosRef.current={x:Math.round(V.pageX),y:Math.round(V.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...A,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":k.contentId,"aria-expanded":k.open,"aria-required":k.required,"aria-autocomplete":"none",dir:k.dir,"data-state":k.open?"open":"closed",disabled:M,"data-disabled":M?"":void 0,"data-placeholder":shouldShowPlaceholder(k.value)?"":void 0,...T,ref:N,onClick:composeEventHandlers(T.onClick,V=>{V.currentTarget.focus(),I.current!=="mouse"&&F(V)}),onPointerDown:composeEventHandlers(T.onPointerDown,V=>{I.current=V.pointerType;const H=V.target;H.hasPointerCapture(V.pointerId)&&H.releasePointerCapture(V.pointerId),V.button===0&&V.ctrlKey===!1&&V.pointerType==="mouse"&&(F(V),V.preventDefault())}),onKeyDown:composeEventHandlers(T.onKeyDown,V=>{const H=q.current!=="";!(V.ctrlKey||V.altKey||V.metaKey)&&V.key.length===1&&B(V.key),!(H&&V.key===" ")&&OPEN_KEYS.includes(V.key)&&(F(),V.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,className:R,style:T,children:A,placeholder:k="",...M}=_,N=useSelectContext(VALUE_NAME,S),{onValueNodeHasChildrenChange:D}=N,I=A!==void 0,q=useComposedRefs(v,N.onValueNodeChange);return useLayoutEffect2(()=>{D(I)},[D,I]),jsxRuntimeExports.jsx(Primitive.span,{...M,ref:q,style:{pointerEvents:"none"},children:shouldShowPlaceholder(N.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:k}):A})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,children:R,...T}=_;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...T,ref:v,children:R||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=_=>jsxRuntimeExports.jsx(Portal$4,{asChild:!0,..._});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME="SelectContent",SelectContent$1=reactExports.forwardRef((_,v)=>{const S=useSelectContext(CONTENT_NAME,_.__scopeSelect),[R,T]=reactExports.useState();if(useLayoutEffect2(()=>{T(new DocumentFragment)},[]),!S.open){const A=R;return A?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_.children})})}),A):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._,ref:v})});SelectContent$1.displayName=CONTENT_NAME;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,position:R="item-aligned",onCloseAutoFocus:T,onEscapeKeyDown:A,onPointerDownOutside:k,side:M,sideOffset:N,align:D,alignOffset:I,arrowPadding:q,collisionBoundary:B,collisionPadding:z,sticky:F,hideWhenDetached:V,avoidCollisions:H,...W}=_,Y=useSelectContext(CONTENT_NAME,S),[Z,J]=reactExports.useState(null),[ne,oe]=reactExports.useState(null),te=useComposedRefs(v,Te=>J(Te)),[se,le]=reactExports.useState(null),[ue,ce]=reactExports.useState(null),ge=useCollection(S),[me,Ee]=reactExports.useState(!1),_e=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Z)return hideOthers(Z)},[Z]),useFocusGuards();const ye=reactExports.useCallback(Te=>{const[ze,...Fe]=ge().map($e=>$e.ref.current),[Ie]=Fe.slice(-1),Le=document.activeElement;for(const $e of Te)if($e===Le||($e?.scrollIntoView({block:"nearest"}),$e===ze&&ne&&(ne.scrollTop=0),$e===Ie&&ne&&(ne.scrollTop=ne.scrollHeight),$e?.focus(),document.activeElement!==Le))return},[ge,ne]),be=reactExports.useCallback(()=>ye([se,Z]),[ye,se,Z]);reactExports.useEffect(()=>{me&&be()},[me,be]);const{onOpenChange:Se,triggerPointerDownPosRef:De}=Y;reactExports.useEffect(()=>{if(Z){let Te={x:0,y:0};const ze=Ie=>{Te={x:Math.abs(Math.round(Ie.pageX)-(De.current?.x??0)),y:Math.abs(Math.round(Ie.pageY)-(De.current?.y??0))}},Fe=Ie=>{Te.x<=10&&Te.y<=10?Ie.preventDefault():Z.contains(Ie.target)||Se(!1),document.removeEventListener("pointermove",ze),De.current=null};return De.current!==null&&(document.addEventListener("pointermove",ze),document.addEventListener("pointerup",Fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ze),document.removeEventListener("pointerup",Fe,{capture:!0})}}},[Z,Se,De]),reactExports.useEffect(()=>{const Te=()=>Se(!1);return window.addEventListener("blur",Te),window.addEventListener("resize",Te),()=>{window.removeEventListener("blur",Te),window.removeEventListener("resize",Te)}},[Se]);const[xe,pe]=useTypeaheadSearch(Te=>{const ze=ge().filter(Le=>!Le.disabled),Fe=ze.find(Le=>Le.ref.current===document.activeElement),Ie=findNextItem(ze,Te,Fe);Ie&&setTimeout(()=>Ie.ref.current.focus())}),we=reactExports.useCallback((Te,ze,Fe)=>{const Ie=!_e.current&&!Fe;(Y.value!==void 0&&Y.value===ze||Ie)&&(le(Te),Ie&&(_e.current=!0))},[Y.value]),Oe=reactExports.useCallback(()=>Z?.focus(),[Z]),Ce=reactExports.useCallback((Te,ze,Fe)=>{const Ie=!_e.current&&!Fe;(Y.value!==void 0&&Y.value===ze||Ie)&&ce(Te)},[Y.value]),Pe=R==="popper"?SelectPopperPosition:SelectItemAlignedPosition,Ne=Pe===SelectPopperPosition?{side:M,sideOffset:N,align:D,alignOffset:I,arrowPadding:q,collisionBoundary:B,collisionPadding:z,sticky:F,hideWhenDetached:V,avoidCollisions:H}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:S,content:Z,viewport:ne,onViewportChange:oe,itemRefCallback:we,selectedItem:se,onItemLeave:Oe,itemTextRefCallback:Ce,focusSelectedItem:be,selectedItemText:ue,position:R,isPositioned:me,searchRef:xe,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:Y.open,onMountAutoFocus:Te=>{Te.preventDefault()},onUnmountAutoFocus:composeEventHandlers(T,Te=>{Y.trigger?.focus({preventScroll:!0}),Te.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:A,onPointerDownOutside:k,onFocusOutside:Te=>Te.preventDefault(),onDismiss:()=>Y.onOpenChange(!1),children:jsxRuntimeExports.jsx(Pe,{role:"listbox",id:Y.contentId,"data-state":Y.open?"open":"closed",dir:Y.dir,onContextMenu:Te=>Te.preventDefault(),...W,...Ne,onPlaced:()=>Ee(!0),ref:te,style:{display:"flex",flexDirection:"column",outline:"none",...W.style},onKeyDown:composeEventHandlers(W.onKeyDown,Te=>{const ze=Te.ctrlKey||Te.altKey||Te.metaKey;if(Te.key==="Tab"&&Te.preventDefault(),!ze&&Te.key.length===1&&pe(Te.key),["ArrowUp","ArrowDown","Home","End"].includes(Te.key)){let Ie=ge().filter(Le=>!Le.disabled).map(Le=>Le.ref.current);if(["ArrowUp","End"].includes(Te.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(Te.key)){const Le=Te.target,$e=Ie.indexOf(Le);Ie=Ie.slice($e+1)}setTimeout(()=>ye(Ie)),Te.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,onPlaced:R,...T}=_,A=useSelectContext(CONTENT_NAME,S),k=useSelectContentContext(CONTENT_NAME,S),[M,N]=reactExports.useState(null),[D,I]=reactExports.useState(null),q=useComposedRefs(v,te=>I(te)),B=useCollection(S),z=reactExports.useRef(!1),F=reactExports.useRef(!0),{viewport:V,selectedItem:H,selectedItemText:W,focusSelectedItem:Y}=k,Z=reactExports.useCallback(()=>{if(A.trigger&&A.valueNode&&M&&D&&V&&H&&W){const te=A.trigger.getBoundingClientRect(),se=D.getBoundingClientRect(),le=A.valueNode.getBoundingClientRect(),ue=W.getBoundingClientRect();if(A.dir!=="rtl"){const Le=ue.left-se.left,$e=le.left-Le,qe=te.left-$e,at=te.width+qe,lt=Math.max(at,se.width),vt=window.innerWidth-CONTENT_MARGIN,yt=clamp($e,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,vt-lt)]);M.style.minWidth=at+"px",M.style.left=yt+"px"}else{const Le=se.right-ue.right,$e=window.innerWidth-le.right-Le,qe=window.innerWidth-te.right-$e,at=te.width+qe,lt=Math.max(at,se.width),vt=window.innerWidth-CONTENT_MARGIN,yt=clamp($e,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,vt-lt)]);M.style.minWidth=at+"px",M.style.right=yt+"px"}const ce=B(),ge=window.innerHeight-CONTENT_MARGIN*2,me=V.scrollHeight,Ee=window.getComputedStyle(D),_e=parseInt(Ee.borderTopWidth,10),ye=parseInt(Ee.paddingTop,10),be=parseInt(Ee.borderBottomWidth,10),Se=parseInt(Ee.paddingBottom,10),De=_e+ye+me+Se+be,xe=Math.min(H.offsetHeight*5,De),pe=window.getComputedStyle(V),we=parseInt(pe.paddingTop,10),Oe=parseInt(pe.paddingBottom,10),Ce=te.top+te.height/2-CONTENT_MARGIN,Pe=ge-Ce,Ne=H.offsetHeight/2,Te=H.offsetTop+Ne,ze=_e+ye+Te,Fe=De-ze;if(ze<=Ce){const Le=ce.length>0&&H===ce[ce.length-1].ref.current;M.style.bottom="0px";const $e=D.clientHeight-V.offsetTop-V.offsetHeight,qe=Math.max(Pe,Ne+(Le?Oe:0)+$e+be),at=ze+qe;M.style.height=at+"px"}else{const Le=ce.length>0&&H===ce[0].ref.current;M.style.top="0px";const qe=Math.max(Ce,_e+V.offsetTop+(Le?we:0)+Ne)+Fe;M.style.height=qe+"px",V.scrollTop=ze-Ce+V.offsetTop}M.style.margin=`${CONTENT_MARGIN}px 0`,M.style.minHeight=xe+"px",M.style.maxHeight=ge+"px",R?.(),requestAnimationFrame(()=>z.current=!0)}},[B,A.trigger,A.valueNode,M,D,V,H,W,A.dir,R]);useLayoutEffect2(()=>Z(),[Z]);const[J,ne]=reactExports.useState();useLayoutEffect2(()=>{D&&ne(window.getComputedStyle(D).zIndex)},[D]);const oe=reactExports.useCallback(te=>{te&&F.current===!0&&(Z(),Y?.(),F.current=!1)},[Z,Y]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:S,contentWrapper:M,shouldExpandOnScrollRef:z,onScrollButtonChange:oe,children:jsxRuntimeExports.jsx("div",{ref:N,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:J},children:jsxRuntimeExports.jsx(Primitive.div,{...T,ref:q,style:{boxSizing:"border-box",maxHeight:"100%",...T.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,align:R="start",collisionPadding:T=CONTENT_MARGIN,...A}=_,k=usePopperScope(S);return jsxRuntimeExports.jsx(Content$1,{...k,...A,ref:v,align:R,collisionPadding:T,style:{boxSizing:"border-box",...A.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,nonce:R,...T}=_,A=useSelectContentContext(VIEWPORT_NAME,S),k=useSelectViewportContext(VIEWPORT_NAME,S),M=useComposedRefs(v,A.onViewportChange),N=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:R}),jsxRuntimeExports.jsx(Collection.Slot,{scope:S,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...T,ref:M,style:{position:"relative",flex:1,overflow:"hidden auto",...T.style},onScroll:composeEventHandlers(T.onScroll,D=>{const I=D.currentTarget,{contentWrapper:q,shouldExpandOnScrollRef:B}=k;if(B?.current&&q){const z=Math.abs(N.current-I.scrollTop);if(z>0){const F=window.innerHeight-CONTENT_MARGIN*2,V=parseFloat(q.style.minHeight),H=parseFloat(q.style.height),W=Math.max(V,H);if(W<F){const Y=W+z,Z=Math.min(F,Y),J=Y-Z;q.style.height=Z+"px",q.style.bottom==="0px"&&(I.scrollTop=J>0?J:0,q.style.justifyContent="flex-end")}}}N.current=I.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_,T=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:S,id:T,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":T,...R,ref:v})})});SelectGroup$1.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_,T=useSelectGroupContext(LABEL_NAME,S);return jsxRuntimeExports.jsx(Primitive.div,{id:T.id,...R,ref:v})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,value:R,disabled:T=!1,textValue:A,...k}=_,M=useSelectContext(ITEM_NAME,S),N=useSelectContentContext(ITEM_NAME,S),D=M.value===R,[I,q]=reactExports.useState(A??""),[B,z]=reactExports.useState(!1),F=useComposedRefs(v,Y=>N.itemRefCallback?.(Y,R,T)),V=useId(),H=reactExports.useRef("touch"),W=()=>{T||(M.onValueChange(R),M.onOpenChange(!1))};if(R==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:S,value:R,disabled:T,textId:V,isSelected:D,onItemTextChange:reactExports.useCallback(Y=>{q(Z=>Z||(Y?.textContent??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:S,value:R,disabled:T,textValue:I,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":V,"data-highlighted":B?"":void 0,"aria-selected":D&&B,"data-state":D?"checked":"unchecked","aria-disabled":T||void 0,"data-disabled":T?"":void 0,tabIndex:T?void 0:-1,...k,ref:F,onFocus:composeEventHandlers(k.onFocus,()=>z(!0)),onBlur:composeEventHandlers(k.onBlur,()=>z(!1)),onClick:composeEventHandlers(k.onClick,()=>{H.current!=="mouse"&&W()}),onPointerUp:composeEventHandlers(k.onPointerUp,()=>{H.current==="mouse"&&W()}),onPointerDown:composeEventHandlers(k.onPointerDown,Y=>{H.current=Y.pointerType}),onPointerMove:composeEventHandlers(k.onPointerMove,Y=>{H.current=Y.pointerType,T?N.onItemLeave?.():H.current==="mouse"&&Y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(k.onPointerLeave,Y=>{Y.currentTarget===document.activeElement&&N.onItemLeave?.()}),onKeyDown:composeEventHandlers(k.onKeyDown,Y=>{N.searchRef?.current!==""&&Y.key===" "||(SELECTION_KEYS.includes(Y.key)&&W(),Y.key===" "&&Y.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,className:R,style:T,...A}=_,k=useSelectContext(ITEM_TEXT_NAME,S),M=useSelectContentContext(ITEM_TEXT_NAME,S),N=useSelectItemContext(ITEM_TEXT_NAME,S),D=useSelectNativeOptionsContext(ITEM_TEXT_NAME,S),[I,q]=reactExports.useState(null),B=useComposedRefs(v,W=>q(W),N.onItemTextChange,W=>M.itemTextRefCallback?.(W,N.value,N.disabled)),z=I?.textContent,F=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:N.value,disabled:N.disabled,children:z},N.value),[N.disabled,N.value,z]),{onNativeOptionAdd:V,onNativeOptionRemove:H}=D;return useLayoutEffect2(()=>(V(F),()=>H(F)),[V,H,F]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:N.textId,...A,ref:B}),N.isSelected&&k.valueNode&&!k.valueNodeHasChildren?reactDomExports.createPortal(A.children,k.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_;return useSelectItemContext(ITEM_INDICATOR_NAME,S).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...R,ref:v}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_,v)=>{const S=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),R=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),[T,A]=reactExports.useState(!1),k=useComposedRefs(v,R.onScrollButtonChange);return useLayoutEffect2(()=>{if(S.viewport&&S.isPositioned){let M=function(){const D=N.scrollTop>0;A(D)};const N=S.viewport;return M(),N.addEventListener("scroll",M),()=>N.removeEventListener("scroll",M)}},[S.viewport,S.isPositioned]),T?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:k,onAutoScroll:()=>{const{viewport:M,selectedItem:N}=S;M&&N&&(M.scrollTop=M.scrollTop-N.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_,v)=>{const S=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),R=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),[T,A]=reactExports.useState(!1),k=useComposedRefs(v,R.onScrollButtonChange);return useLayoutEffect2(()=>{if(S.viewport&&S.isPositioned){let M=function(){const D=N.scrollHeight-N.clientHeight,I=Math.ceil(N.scrollTop)<D;A(I)};const N=S.viewport;return M(),N.addEventListener("scroll",M),()=>N.removeEventListener("scroll",M)}},[S.viewport,S.isPositioned]),T?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:k,onAutoScroll:()=>{const{viewport:M,selectedItem:N}=S;M&&N&&(M.scrollTop=M.scrollTop+N.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,onAutoScroll:R,...T}=_,A=useSelectContentContext("SelectScrollButton",S),k=reactExports.useRef(null),M=useCollection(S),N=reactExports.useCallback(()=>{k.current!==null&&(window.clearInterval(k.current),k.current=null)},[]);return reactExports.useEffect(()=>()=>N(),[N]),useLayoutEffect2(()=>{M().find(I=>I.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[M]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...T,ref:v,style:{flexShrink:0,...T.style},onPointerDown:composeEventHandlers(T.onPointerDown,()=>{k.current===null&&(k.current=window.setInterval(R,50))}),onPointerMove:composeEventHandlers(T.onPointerMove,()=>{A.onItemLeave?.(),k.current===null&&(k.current=window.setInterval(R,50))}),onPointerLeave:composeEventHandlers(T.onPointerLeave,()=>{N()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...R,ref:v})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_,T=usePopperScope(S),A=useSelectContext(ARROW_NAME,S),k=useSelectContentContext(ARROW_NAME,S);return A.open&&k.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...T,...R,ref:v}):null});SelectArrow.displayName=ARROW_NAME;var BUBBLE_INPUT_NAME="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:_,value:v,...S},R)=>{const T=reactExports.useRef(null),A=useComposedRefs(R,T),k=usePrevious(v);return reactExports.useEffect(()=>{const M=T.current;if(!M)return;const N=window.HTMLSelectElement.prototype,I=Object.getOwnPropertyDescriptor(N,"value").set;if(k!==v&&I){const q=new Event("change",{bubbles:!0});I.call(M,v),M.dispatchEvent(q)}},[k,v]),jsxRuntimeExports.jsx(Primitive.select,{...S,style:{...VISUALLY_HIDDEN_STYLES,...S.style},ref:A,defaultValue:v})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME;function shouldShowPlaceholder(_){return _===""||_===void 0}function useTypeaheadSearch(_){const v=useCallbackRef$1(_),S=reactExports.useRef(""),R=reactExports.useRef(0),T=reactExports.useCallback(k=>{const M=S.current+k;v(M),(function N(D){S.current=D,window.clearTimeout(R.current),D!==""&&(R.current=window.setTimeout(()=>N(""),1e3))})(M)},[v]),A=reactExports.useCallback(()=>{S.current="",window.clearTimeout(R.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(R.current),[]),[S,T,A]}function findNextItem(_,v,S){const T=v.length>1&&Array.from(v).every(D=>D===v[0])?v[0]:v,A=S?_.indexOf(S):-1;let k=wrapArray(_,Math.max(A,0));T.length===1&&(k=k.filter(D=>D!==S));const N=k.find(D=>D.textValue.toLowerCase().startsWith(T.toLowerCase()));return N!==S?N:void 0}function wrapArray(_,v){return _.map((S,R)=>_[(v+R)%_.length])}var Root2=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport=SelectViewport,Group=SelectGroup$1,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2,SelectGroup=Group,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(Trigger,{ref:R,className:cn$1("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),...S,children:[v,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:S,className:cn$1("flex cursor-default items-center justify-center py-1",_),...v,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:S,className:cn$1("flex cursor-default items-center justify-center py-1",_),...v,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_,children:v,position:S="popper",...R},T)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:T,className:cn$1("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",S==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:S,...R,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn$1("p-1",S==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:v}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Label,{ref:S,className:cn$1("px-2 py-1.5 text-sm font-semibold",_),...v}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(Item,{ref:R,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...S,children:[jsxRuntimeExports.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:v})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Separator,{ref:S,className:cn$1("-mx-1 my-1 h-px bg-muted",_),...v}));SelectSeparator.displayName=Separator.displayName;function TransitionArrow({label:_}){return jsxRuntimeExports.jsxs("div",{className:"inline-flex flex-col items-center justify-center relative mx-0.5 translate-y-[-0.2rem]",children:[jsxRuntimeExports.jsx("span",{className:"text-[0.8rem]/[0.8rem] mb-[-0.1rem]",children:_}),jsxRuntimeExports.jsx("span",{className:"text-lg/[0.4rem]",children:""})]})}function MathSum({sub:_,children:v}){return jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsxs("div",{className:"inline-flex flex-col items-center justify-center mr-0.5",children:[jsxRuntimeExports.jsx("span",{className:"text-lg leading-none",children:""}),jsxRuntimeExports.jsx("span",{className:"text-[0.75rem] leading-none mt-0.5",children:_})]}),v]})}function Trans({p:_,a:v,q:S}){return jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center text-gray-900 font-sans",children:[jsxRuntimeExports.jsx("span",{children:_}),jsxRuntimeExports.jsx("span",{className:"px-1 translate-y-[-0.2rem]",children:jsxRuntimeExports.jsx(TransitionArrow,{label:jsxRuntimeExports.jsx("span",{className:"",children:v})})}),jsxRuntimeExports.jsx("span",{children:S})]})}function InferenceRuleTooltip({children:_}){return jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-base",children:_})}function InferenceRuleBox({name:_,children:v}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-4 border rounded-lg bg-white shadow-sm hover:shadow-md transition-all w-fit",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-foreground/70 w-full mb-2 border-b pb-1 [&>b]:font-bold",children:_}),jsxRuntimeExports.jsx("div",{className:"mt-1 p-3",children:v})]})}function InferenceRule({premise:_,conclusion:v,condition:S,note:R}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"px-3 text-center min-h-[1.5em] flex items-end justify-center",children:_||jsxRuntimeExports.jsx("span",{className:"opacity-0 w-8 h-1"})}),jsxRuntimeExports.jsx("div",{className:"w-full h-px bg-foreground"}),jsxRuntimeExports.jsx("div",{className:"px-3 pt-0.5 text-center",children:v})]})}),S&&jsxRuntimeExports.jsx("span",{className:"text-[0.8rem] text-foreground/70 px-2",children:S})]}),R&&jsxRuntimeExports.jsx("span",{className:"text-[0.75rem] text-foreground/60 translate-y-1 italic",children:R})]})}const alpha=jsxRuntimeExports.jsx("span",{children:""}),tau=jsxRuntimeExports.jsx("span",{children:""}),a=jsxRuntimeExports.jsx("span",{children:"a"}),a_bar=jsxRuntimeExports.jsx("span",{className:"overline",children:"a"}),P=jsxRuntimeExports.jsx("span",{children:"P"}),Q=jsxRuntimeExports.jsx("span",{children:"Q"}),P_prime=jsxRuntimeExports.jsx("span",{children:"P'"}),Q_prime=jsxRuntimeExports.jsx("span",{children:"Q'"}),P_j=jsxRuntimeExports.jsxs("span",{children:["P",jsxRuntimeExports.jsx("sub",{children:"j"})]}),P_j_prime=jsxRuntimeExports.jsxs("span",{children:["P'",jsxRuntimeExports.jsx("sub",{children:"j"})]}),P_i=jsxRuntimeExports.jsxs("span",{children:["P",jsxRuntimeExports.jsx("sub",{children:"i"})]});function RuleAct(){return jsxRuntimeExports.jsx(InferenceRule,{conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[alpha,".",P]}),a:alpha,q:P})})}function RuleSum(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsx(Trans,{p:P_j,a:alpha,q:P_j_prime}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsx(MathSum,{sub:jsxRuntimeExports.jsx("span",{children:"i  I"}),children:P_i}),a:alpha,q:P_j_prime}),condition:jsxRuntimeExports.jsxs("span",{children:["kde ",jsxRuntimeExports.jsx("span",{children:"j  I"})]}),note:jsxRuntimeExports.jsx("span",{children:"V aplkiaci: SUM Left / SUM Right"})})}function RuleCom1(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsx(Trans,{p:P,a:alpha,q:P_prime}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P," | ",Q]}),a:alpha,q:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P_prime," | ",Q]})}),note:jsxRuntimeExports.jsx("span",{children:"V aplikaci: COM Left"})})}function RuleCom2(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsx(Trans,{p:Q,a:alpha,q:Q_prime}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P," | ",Q]}),a:alpha,q:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P," | ",Q_prime]})}),note:jsxRuntimeExports.jsx("span",{children:"V aplikaci: COM Right"})})}function RuleCom3(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Trans,{p:P,a,q:P_prime}),jsxRuntimeExports.jsx(Trans,{p:Q,a:a_bar,q:Q_prime})]}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P," | ",Q]}),a:tau,q:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P_prime," | ",Q_prime]})}),note:jsxRuntimeExports.jsx("span",{children:"V aplikaci: COM Sync"})})}function RuleRes(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsx(Trans,{p:P,a:alpha,q:P_prime}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P," \\ ","{L}"]}),a:alpha,q:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P_prime," \\ ","{L}"]})}),condition:jsxRuntimeExports.jsxs("span",{children:[alpha,", ",jsxRuntimeExports.jsx("span",{className:"overline",children:""}),"  L"]})})}function RuleRel(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsx(Trans,{p:P,a:alpha,q:P_prime}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P,"[f]"]}),a:jsxRuntimeExports.jsxs("span",{children:["f(",alpha,")"]}),q:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P_prime,"[f]"]})})})}function RuleCon(){return jsxRuntimeExports.jsx(InferenceRule,{premise:jsxRuntimeExports.jsx(Trans,{p:P,a:alpha,q:P_prime}),conclusion:jsxRuntimeExports.jsx(Trans,{p:jsxRuntimeExports.jsx("span",{children:"K"}),a:alpha,q:P_prime}),condition:jsxRuntimeExports.jsxs("span",{children:["kde ",jsxRuntimeExports.jsx("span",{children:"K def P"})]})})}function SOSRulesHelp({children:_}){return jsxRuntimeExports.jsxs(Dialog,{children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:_}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"mb-4",children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:"Definice strukturln operan smantiky (SOS)"})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-8 pb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4 text-primary border-b border-foreground/20 pb-1.5",children:"Zkladn opertory a volba"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-start flex-wrap",children:[jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"ACT"})," (Prefix)"]}),children:jsxRuntimeExports.jsx(RuleAct,{})}),jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"SUM"})," (Souet)"]}),children:jsxRuntimeExports.jsx(RuleSum,{})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4 text-primary border-b border-foreground/20 pb-1.5",children:"Paraleln kompozice"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-start flex-wrap",children:[jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"COM1"})," (Lev vtev)"]}),children:jsxRuntimeExports.jsx(RuleCom1,{})}),jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"COM2"})," (Prav vtev)"]}),children:jsxRuntimeExports.jsx(RuleCom2,{})}),jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"COM3"})," (Komunikace)"]}),children:jsxRuntimeExports.jsx(RuleCom3,{})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4 text-primary border-b border-foreground/20 pb-1.5",children:"Strukturln opertory"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-start flex-wrap",children:[jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"RES"})," (Restrikce)"]}),children:jsxRuntimeExports.jsx(RuleRes,{})}),jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"REL"})," (Pejmenovn)"]}),children:jsxRuntimeExports.jsx(RuleRel,{})}),jsxRuntimeExports.jsx(InferenceRuleBox,{name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("b",{children:"CON"})," (Konstanta)"]}),children:jsxRuntimeExports.jsx(RuleCon,{})})]})]})]})]})]})}function ProofControls({step:_,onApplyRule:v,showHints:S}){const[R,T]=reactExports.useState("a"),[A,k]=reactExports.useState(!0),[M,N]=reactExports.useState(""),{type:D}=_.source,{label:I}=_.action,q=reactExports.useMemo(()=>{if(_.source.type!=="Relabeling")return[];const te=_.action.label;if(te==="tau")return["tau"];const se=_.source.relabels,le=se.filter(ge=>ge.new===te).map(ge=>ge.old),ce=se.some(ge=>ge.old===te)?[]:[te];return Array.from(new Set([...le,...ce]))},[_.source,_.action]);reactExports.useEffect(()=>{q.length>0&&N(q[0])},[q]);const[B,z]=reactExports.useState(""),[F,V]=reactExports.useState(""),[H,W]=reactExports.useState(!0),Y=[{value:"ACT",label:"ACT"},{value:"SUM_LEFT",label:"SUM Left"},{value:"SUM_RIGHT",label:"SUM Right"},{value:"COM_LEFT",label:"COM Left"},{value:"COM_RIGHT",label:"COM Right"},{value:"COM_SYNC",label:"COM Sync"},{value:"RES",label:"RES"},{value:"REL",label:"REL"},{value:"CON",label:"CON"}];reactExports.useEffect(()=>{z(""),V(""),W(!0)},[_.id]);const Z=B==="COM_SYNC"||B==="REL",J=B==="COM_SYNC",ne=()=>B==="COM_SYNC"?"Sync akce":B==="REL"?"Pvodn akce":"Parametr",oe=()=>{if(!B)return;let te;B==="COM_SYNC"?te={label:F,leftSends:H}:B==="REL"&&(te={oldLabel:F}),v(_.id,B,te)};return S?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[D==="Prefix"&&jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleAct,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"ACT"),children:"ACT"})}),D==="Summation"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleSum,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"SUM_LEFT"),children:"SUM Left"})}),jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleSum,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"SUM_RIGHT"),children:"SUM Right"})})]}),D==="Parallel"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleCom1,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"COM_LEFT"),children:"COM Left"})}),jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleCom2,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"COM_RIGHT"),children:"COM Right"})}),I==="tau"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-secondary p-1 px-2 rounded-md border shadow ml-2",children:[jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleCom3,{})}),children:jsxRuntimeExports.jsx(Badge,{className:"bg-white text-foreground hover:bg-accent hover:text-accent-foreground",children:"COM Sync"})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-stone-800 pl-1",children:"na:"}),jsxRuntimeExports.jsx(Input,{className:"h-7 w-16 text-xs font-mono bg-white",value:R,onChange:te=>T(te.target.value),placeholder:"akce"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx(Checkbox,{id:`ls-${_.id}`,checked:A,onCheckedChange:te=>k(te)}),jsxRuntimeExports.jsx("label",{htmlFor:`ls-${_.id}`,className:"text-xs cursor-pointer select-none",children:"Lev posl"})]}),jsxRuntimeExports.jsx(Button,{size:"icon",className:"h-7 w-7",onClick:()=>v(_.id,"COM_SYNC",{label:R,leftSends:A}),children:jsxRuntimeExports.jsx(Check,{className:"h-3 w-3"})})]})]}),D==="Restriction"&&jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleRes,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"RES"),children:"RES"})}),D==="Relabeling"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-secondary p-1 px-2 rounded-md border shadow",children:[jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleRel,{})}),children:jsxRuntimeExports.jsx(Badge,{className:"bg-white text-foreground hover:bg-accent hover:text-accent-foreground",children:"REL"})}),jsxRuntimeExports.jsx(DivHover,{delayDuration:750,hoverContent:jsxRuntimeExports.jsxs("span",{children:["Zde si vyberte pvodn akci ",jsxRuntimeExports.jsx("br",{})," (ped pejmenovnm)"]}),children:jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-stone-800 pl-1",children:"Pvodn akce:"})}),q.length>0?jsxRuntimeExports.jsxs(Select,{value:M,onValueChange:N,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 w-24 text-xs bg-white",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:q.map(te=>jsxRuntimeExports.jsx(SelectItem,{value:te,children:te},te))})]}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-600 italic px-2",children:"dn shoda"}),jsxRuntimeExports.jsx(Button,{size:"icon",className:"h-7 w-7",onClick:()=>v(_.id,"REL",{oldLabel:M}),children:jsxRuntimeExports.jsx(Check,{className:"h-3 w-3"})})]}),D==="ProcessRef"&&jsxRuntimeExports.jsx(DivHover,{className:"p-0",delayDuration:750,hoverContent:jsxRuntimeExports.jsx(InferenceRuleTooltip,{children:jsxRuntimeExports.jsx(RuleCon,{})}),children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"CON"),children:"CON"})})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full",children:[jsxRuntimeExports.jsx(SOSRulesHelp,{children:jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"icon",className:"cursor-pointer",children:jsxRuntimeExports.jsx(BookOpen,{size:16})})}),jsxRuntimeExports.jsxs(Select,{value:B,onValueChange:te=>z(te),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-9 w-[120px] bg-white",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Vyberte pravidlo..."})}),jsxRuntimeExports.jsx(SelectContent,{children:Y.map(te=>jsxRuntimeExports.jsx(SelectItem,{value:te.value,children:te.label},te.value))})]}),Z&&jsxRuntimeExports.jsx(Input,{className:"h-9 w-32 font-mono",placeholder:ne(),value:F,onChange:te=>V(te.target.value)}),J&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 border px-3 h-9 rounded-md bg-white",children:[jsxRuntimeExports.jsx(Checkbox,{id:`manual-ls-${_.id}`,checked:H,onCheckedChange:te=>W(te)}),jsxRuntimeExports.jsx("label",{htmlFor:`manual-ls-${_.id}`,className:"text-sm cursor-pointer select-none",children:"Lev posl"})]}),jsxRuntimeExports.jsx(Button,{disabled:!B,onClick:oe,children:"Aplikovat"})]})}function getStatusStyle(_){switch(_){case"proved":return"border-y-green-300 border-r-green-300 bg-green-50/50";case"invalid":return"border-y-red-300 border-r-red-300 bg-red-50/50";default:return"border-l-4 border-l-transparent border-gray-200 bg-white"}}function ProofNode({step:_,program:v,showHints:S,depth:R,onApplyRule:T,onReset:A}){return jsxRuntimeExports.jsxs("div",{className:"relative group",children:[R>0&&jsxRuntimeExports.jsx("div",{className:"absolute left-[-16px] top-6 w-[15px] h-px bg-gray-300 hidden md:block"}),jsxRuntimeExports.jsx("div",{className:cn$1("mb-2 relative animate-in fade-in transition-all duration-300 z-10 shadow-xs rounded-lg overflow-hidden border-y border-r bg-card",getStatusStyle(_.status)),children:jsxRuntimeExports.jsxs("div",{className:"flex items-stretch",children:[jsxRuntimeExports.jsx("div",{className:cn$1("w-1 shrink-0",_.status==="proved"?"bg-green-500":_.status==="invalid"?"bg-red-500":"bg-primary")}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center px-1 font-mono",children:[jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(_.source),className:"w-auto! wrap-break-word p-1"}),jsxRuntimeExports.jsx("div",{className:"-translate-y-1.25",children:jsxRuntimeExports.jsx(TransitionArrow,{label:jsxRuntimeExports.jsx(CCSViewer,{code:(_.action.isOutput?"'":"")+_.action.label})})}),jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(_.target),className:"w-auto! wrap-break-word p-1"})]}),_.status==="proved"&&jsxRuntimeExports.jsx(AlertBox,{type:"success",className:"border-none shadow-none bg-green-100",children:"Dokzno"}),_.status==="invalid"&&jsxRuntimeExports.jsx(AlertBox,{type:"error",className:"border-none shadow-none bg-red-100",children:_.errorMessage})]}),jsxRuntimeExports.jsx("div",{className:"min-h-[40px] flex items-center",children:_.status==="pending"?jsxRuntimeExports.jsx("div",{className:"w-full animate-in fade-in duration-300",children:jsxRuntimeExports.jsx(ProofControls,{step:_,onApplyRule:T,showHints:S})}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between w-full animate-in slide-in-from-left-2 duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 font-mono",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-foreground/90 shrink-0",children:"Pouit pravidlo:"}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"px-3 py-1 border-stone-300 bg-stone-100",children:_.appliedRule})]}),jsxRuntimeExports.jsx(ButtonHover,{variant:"ghost",size:"sm",onClick:()=>A(_.id),className:"h-8 w-8 p-0 border border-stone-300 bg-stone-100 hover:bg-stone-200",hoverContent:"Resetovat tento krok",children:jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4"})})]})})]})]})}),_.children.length>0&&jsxRuntimeExports.jsxs("div",{className:"pl-4 md:pl-8 space-y-2 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-2 md:left-4 -top-2 bottom-4 w-px bg-gray-300 border-l border-gray-300"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-muted-foreground uppercase tracking-wider font-semibold pl-2",children:[jsxRuntimeExports.jsx(CornerDownRight,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-[1rem]",children:_.appliedRule})]}),_.children.map(k=>jsxRuntimeExports.jsx(ProofNode,{step:k,program:v,showHints:S,depth:R+1,onApplyRule:T,onReset:A},k.id))]})]})}function getStatusColor(_){switch(_){case"proved":return"bg-green-50 text-green-600 font-bold";case"invalid":return"bg-red-50 text-red-600 font-bold";default:return"bg-stone-100"}}function ProofBuilder({initialSource:_,initialTarget:v,initialAction:S,program:R,showHints:T}){const[A,k]=reactExports.useState({id:"root",source:_,target:v,action:S,status:"pending",children:[]});reactExports.useEffect(()=>{k({id:"root",source:_,target:v,action:S,status:"pending",children:[]})},[_,v,S,T]);const M=q=>{const B=q.children.map(M),z={...q,children:B};if(z.status=="pending"&&z.children.length>0){if(z.children.some(F=>F.status==="invalid"))return{...z,status:"invalid",errorMessage:"Premisa selhala."};if(z.children.every(F=>F.status==="proved"))return{...z,status:"proved"}}return(z.status==="proved"||z.status==="invalid")&&z.appliedRule!=="ACT"&&z.children.some(V=>V.status==="pending")?{...z,status:"pending",errorMessage:void 0}:z},N=(q,B,z)=>q.id===B?z(q):{...q,children:q.children.map(F=>N(F,B,z))},D=(q,B,z)=>{k(F=>{const V=N(F,q,H=>{const W=applySosRule(H.source,H.target,H.action,B,R,!1,z);return{...H,appliedRule:B,status:W.status,errorMessage:W.errorMessage,children:W.children}});return M(V)})},I=q=>{k(B=>{const z=N(B,q,F=>({...F,status:"pending",appliedRule:void 0,errorMessage:void 0,children:[]}));return M(z)})};return jsxRuntimeExports.jsxs("div",{className:"md:shadow rounded-xl md:border border-stone-300 animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 px-4 mx-0 md:mx-4 mb-2 flex justify-between items-center flex-wrap gap-2 rounded-lg md:rounded-none border md:border-0 md:border-b border-stone-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap font-mono",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-foreground/90 shrink-0",children:"Dokazujete:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center px-1 font-mono border border-primary/10 bg-primary/5 rounded-md",children:[jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(_),className:"w-auto! wrap-break-word p-1"}),jsxRuntimeExports.jsx("div",{className:"-translate-y-1.25",children:jsxRuntimeExports.jsx(TransitionArrow,{label:jsxRuntimeExports.jsx(CCSViewer,{code:S.label})})}),jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(v),className:"w-auto! wrap-break-word p-1"})]})]}),jsxRuntimeExports.jsx("div",{className:cn$1("text-xs text-gray-500 p-2 rounded-md uppercase",getStatusColor(A.status)),children:A.status==="proved"?"Dokzno":A.status==="invalid"?"Chyba dkazu":"Probh"})]}),jsxRuntimeExports.jsx("div",{className:"p-2 px-0 md:px-4 mx-0 md:mx-4 my-2",children:jsxRuntimeExports.jsx(ProofNode,{step:A,program:R,onApplyRule:D,onReset:I,showHints:T,depth:0})})]})}function parseCCSAction(_){if(!_||_.trim()==="")return{error:"Akce nesm bt przdn"};const v=_.trim(),S=v.startsWith("'"),R=S?v.substring(1):v;return R==="tau"||R===""?S?{error:"Tau neme bt vstupn akc"}:{label:"tau",isOutput:!1}:/^[a-z][a-z0-9_]*$/.test(R)?{label:R,isOutput:S}:{error:"Neplatn nzev akce"}}function getExpressionByName(_,v){return _.find(S=>S.name===v)?.process}function ProofWrapper({program:_,initSettings:v,onSettingsUpdate:S,allowEdit:R}){const[T,A]=reactExports.useState(v?.processX??_[0].name),[k,M]=reactExports.useState(v?.processY??_[0].name),[N,D]=reactExports.useState(v?.action??"a"),[I,q]=reactExports.useState(v?.showHelp??!0),[B,z]=reactExports.useState(null),[F,V]=reactExports.useState(null);reactExports.useEffect(()=>{S&&S({type:"sos",name:v?.name??"Dkaz",processX:T,processY:k,action:N,showHelp:I})},[T,k,N,I]),reactExports.useEffect(()=>{if(v?.showHelp)q(v?.showHelp);else{const Y=localStorage.getItem("default-sos-proof-hints");Y&&["true","false"].includes(Y)&&q(Y==="true")}},[v?.showHelp]),reactExports.useEffect(()=>{W()},[v]),reactExports.useEffect(()=>{_.length>0?_.some(Z=>Z.name===T)||A(_[0].name):A("")},[_,T]),reactExports.useEffect(()=>{_.length>0?_.some(Z=>Z.name===k)||M(_[0].name):M("")},[_,k]);const H=()=>{V(null),z(null)},W=()=>{H();const Y=getExpressionByName(_,T),Z=getExpressionByName(_,k),J=parseCCSAction(N);if("error"in J){z(J.error);return}if(!Y||!Z){z(`Proces ${Y?k:T} neexistuje.`);return}z(null),V({program:_,source:Y,target:Z,action:J})};return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("div",{children:B&&jsxRuntimeExports.jsx(AlertBox,{type:"error",children:B})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"cursor-pointer py-5",onClick:()=>q(!I),disabled:!R,children:[jsxRuntimeExports.jsx(Lightbulb,{size:16,className:`${I?"text-primary":""}`}),jsxRuntimeExports.jsxs("span",{className:`text-xs font-medium ${I?"text-primary":""}`,children:["Npovda ",I?"(Zap)":"(Vyp)"]})]}),jsxRuntimeExports.jsx(SOSRulesHelp,{children:jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"cursor-pointer py-5",children:[jsxRuntimeExports.jsx(BookOpen,{size:16}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Pehled pravidel SOS"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-end flex-wrap md:flex-nowrap mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"pl-1 text-sm font-semibold",children:"Poten proces"}),jsxRuntimeExports.jsxs(Select,{value:T,onValueChange:Y=>A(Y),disabled:!R,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:jsxRuntimeExports.jsx(SelectGroup,{className:"max-h-64",children:_.map(Y=>jsxRuntimeExports.jsx(SelectItem,{value:Y.name,children:Y.name},Y.name))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-48 space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"pl-1 text-sm font-semibold",children:"Akce"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Input,{value:N,onChange:Y=>D(Y.target.value),className:"font-mono text-center pl-6 pr-6",disabled:!R}),jsxRuntimeExports.jsx("span",{className:"absolute left-2 top-1.5 text-muted-foreground",children:""}),jsxRuntimeExports.jsx("span",{className:"absolute right-2 top-1.5 text-muted-foreground",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"pl-1 text-sm font-semibold",children:"Clov proces"}),jsxRuntimeExports.jsxs(Select,{value:k,onValueChange:Y=>M(Y),disabled:!R,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:jsxRuntimeExports.jsx(SelectGroup,{className:"max-h-64",children:_.map(Y=>jsxRuntimeExports.jsx(SelectItem,{value:Y.name,children:Y.name},Y.name))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pb-0.5",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:H,size:"icon",title:"Resetovat",children:jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs(Button,{onClick:W,className:"w-32",children:[jsxRuntimeExports.jsx(ChartGantt,{className:"h-4 w-4 mr-2"}),"Dokzat"]})]})]}),F&&jsxRuntimeExports.jsx(ProofBuilder,{showHints:I,initialSource:F.source,initialTarget:F.target,initialAction:F.action,program:F.program})]})}cytoscape$1.use(dagre);const baseNodeStyle=_=>({selector:"node",style:{"background-color":"#fff101","border-color":"#000000","border-width":2,color:"#000000",label:"data(label)","font-size":"data(fontSize)","text-wrap":"wrap","text-max-width":"140px","text-valign":"center","text-halign":"center",width:_=="full"?"label":40,height:_=="full"?"label":40,shape:_=="full"?"round-rectangle":"ellipse",padding:_=="full"?"6px":"2px","transition-property":"background-color, border-width, width, height, font-size","transition-duration":150}}),stylesheetDef=[{selector:"core",style:{"active-bg-size":0}},{selector:"edge",style:{width:2,"line-color":"#000000","target-arrow-color":"#000000","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(label)","font-size":16,color:"#000000","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"2px","text-background-shape":"roundrectangle","transition-property":"background-color, border-width, width, height, font-size","transition-duration":100}},{selector:".active-state",style:{"background-color":"#b7d6ff","border-width":2,"border-color":"#000000","z-index":1e3}},{selector:".highlighted-target",style:{"background-color":"#b7d6ff","border-color":"#000","border-width":2,"border-style":"dashed"}},{selector:".highlighted-edge",style:{"line-color":"#2563eb","target-arrow-color":"#2563eb",width:4,"z-index":999}}];function LTSGraph({elements:_,activeNodeId:v,edgeHighlight:S,viewMode:R}){const T=reactExports.useRef(null),A=reactExports.useRef(null),[k,M]=reactExports.useState(null),N=reactExports.useRef(null),D=reactExports.useMemo(()=>[baseNodeStyle(R),...stylesheetDef],[R]);reactExports.useEffect(()=>()=>{N.current&&clearTimeout(N.current)},[]),reactExports.useEffect(()=>{if(!T.current||!_)return;const z=T.current;z.batch(()=>{if(z.nodes().forEach(F=>{const V=F.data("id"),H=F.data("ccs")||"";let W=V;R==="full"?W=H:R==="mixed"&&(W=H.length<=5?H:V);let Y=15;W.length>0&&W.length<5&&(Y=W.length<=2?22:17),F.data("label",W),F.data("fontSize",Y)}),z.elements().removeClass("active-state highlighted-edge highlighted-target"),v&&z.$id(v).addClass("active-state"),S){const{sourceId:F,targetId:V,action:H}=S,W=z.edges().filter(Y=>{const Z=Y.data();return Z.source===F&&Z.target===V&&Array.isArray(Z.actions)&&Z.actions.includes(H)});W.length>0&&(W.addClass("highlighted-edge"),z.$id(V).addClass("highlighted-target"))}})},[_,R,v,S]),reactExports.useEffect(()=>{if(!T.current)return;const z=T.current;z.style().update();const F=z.layout({name:"dagre",rankDir:"LR",animate:!1,nodeSep:40,rankSep:60,align:"UL",ranker:"network-simplex"});F.on("layoutstop",()=>{z.zoom()>1.15&&(z.zoom(1.15),z.center())}),F.run()},[R,_]);const I=reactExports.useCallback(()=>{N.current&&clearTimeout(N.current),M(null)},[]),q=reactExports.useCallback(z=>{const F=z.target,V=F.renderedBoundingBox(),H=A.current;if(!H)return;const W=H.getBoundingClientRect(),Y=W.left+V.x1+V.w/2,Z=W.top+V.y1;N.current=setTimeout(()=>{M({x:Y,y:Z,text:F.data("ccs"),nodeId:F.data("id")})},250)},[]);reactExports.useEffect(()=>{if(!T.current)return;const z=T.current;return z.on("mouseover","node",q),z.on("mouseout","node",I),z.on("pan zoom",I),()=>{z.off("mouseover","node",q),z.off("mouseout","node",I),z.off("pan zoom",I)}},[q,I]);const B=()=>{if(!k)return null;const z=10,F=350,V=k.y-z,W={position:"fixed",left:k.x,top:V,transform:"translate(-50%, -100%)",width:"max-content",maxWidth:`${F}px`,zIndex:99999,pointerEvents:"none"};return reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{style:W,children:jsxRuntimeExports.jsxs("div",{className:"animate-in fade-in-0 zoom-in-95 duration-200 px-4 py-3 text-sm bg-popover/80 text-popover-foreground border border-foreground/20 shadow-lg backdrop-blur-sm rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"font-mono border-b border-stone-400 pb-1 mb-2 font-bold text-xs uppercase tracking-wider flex justify-between",children:jsxRuntimeExports.jsxs("span",{children:["Vrchol ",k.nodeId]})}),jsxRuntimeExports.jsx("div",{className:"font-mono wrap-break-word border border-primary/8 bg-[color-mix(in_srgb,var(--primary)_15%,white)] p-2 rounded-md",children:jsxRuntimeExports.jsx(CCSViewer,{code:k.text})}),jsxRuntimeExports.jsx("div",{className:"absolute w-0 h-0 border-8 border-transparent border-t-popover/95 bottom-0 translate-y-full",style:{left:"50.25%",transform:"translateX(-50%)"}})]})}),document.body)};return jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full overflow-hidden",ref:A,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 z-10",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",className:"bg-stone-100/50 backdrop-blur-sm shadow-sm hover:bg-stone-50 cursor-pointer",children:jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(T.current,"png"),children:"Sthnout jako PNG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(T.current,"svg"),children:"Sthnout jako SVG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(T.current,"json"),children:"Sthnout jako JSON"})]})]})}),jsxRuntimeExports.jsx(w,{elements:_??[],style:{width:"100%",height:"100%"},stylesheet:D,cy:z=>{T.current=z},pixelRatio:1.5}),B()]})}function SimulationPanel({currentCCS:_,transitions:v,historyLength:S,onStep:R,onBack:T,onReset:A,onTransitionHover:k,getTargetLabel:M,forceStructuralReduction:N,isOffGraph:D}){const I=reactExports.useMemo(()=>{const q=new Map;return v.forEach(B=>{const z=ccsToString(B.target,N),F=`${B.action} -> ${z}`;q.has(F)||q.set(F,B)}),Array.from(q.values())},[v,N]);return jsxRuntimeExports.jsxs("div",{className:"p-3 text-sm bg-card/60 backdrop-blur-sm rounded-lg shadow-xl transition-opacity duration-200 border max-w-[350px] max-h-[500px] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:T,disabled:S===0,size:"sm",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:14})," Zpt"]}),jsxRuntimeExports.jsxs(Button,{onClick:A,variant:"destructive",size:"sm",children:[jsxRuntimeExports.jsx(RotateCcw,{size:14})," Reset"]})]})}),jsxRuntimeExports.jsxs("div",{className:"grow overflow-y-auto pt-4 flex flex-col gap-6",children:[D&&jsxRuntimeExports.jsx(AlertBox,{type:"warning",className:"border-none shadow-none bg-amber-100 max-w-[210px]",children:"Dal kroky se v grafu nezobraz, stle se ale potaj."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs px-2 uppercase tracking-wider text-foreground/90 font-bold mb-1",children:"Aktuln proces"}),jsxRuntimeExports.jsx("div",{className:"font-mono wrap-break-word border border-primary/15 bg-primary/8 p-2 rounded-md",children:jsxRuntimeExports.jsx(CCSViewer,{code:_})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs px-2 uppercase tracking-wider text-foreground/90 font-bold mb-1",children:"Dostupn pechody"}),I.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-foreground bg-foreground/5 border border-foreground/10 rounded font-mono uppercase",children:"Deadlock"}):jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:I.map(q=>{const B=ccsToString(q.target,N),z=M(B);return jsxRuntimeExports.jsx("button",{onClick:()=>R(q.id),onMouseEnter:()=>k(q.id),onMouseLeave:()=>k(null),className:"text-left px-3 py-2 bg-foreground/5 border border-foreground/10 rounded-lg hover:bg-foreground/10 hover:border-foreground/20 transition-all group relative overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between z-10 relative",children:[jsxRuntimeExports.jsx("span",{className:"font-bold font-mono **:text-foreground/90! **:font-normal px-2 py-0.5 rounded text-sm",children:jsxRuntimeExports.jsx(CCSViewer,{code:q.action})}),jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"text-primary mx-2"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 text-foreground/90 group-hover:text-foreground max-w-[120px]",children:[jsxRuntimeExports.jsx(Target,{size:12,className:"opacity-50"}),jsxRuntimeExports.jsx("span",{className:"font-mono truncate",title:B,children:z})]})]})},q.id)})})]})]})]})}function getActionBaseName(_){return _==="tau"?"tau":_.startsWith("'")?_.slice(1):_}function isOutputAction(_){return _.startsWith("'")}function areComplementary(_,v){if(_==="tau"||v==="tau")return!1;const S=getActionBaseName(_),R=getActionBaseName(v),T=isOutputAction(_),A=isOutputAction(v);return S===R&&T!==A}function getPossibleTransitions(_,v,S=new Set){if(!_)return[];switch(_.type){case"Nil":return[];case"Prefix":return[{action:`${_.action.isOutput?"'":""}${_.action.label}`,targetExpr:_.next}];case"Summation":return[...getPossibleTransitions(_.left,v,S),...getPossibleTransitions(_.right,v,S)];case"ProcessRef":if(S.has(_.name))return[];const T=new Set(S);T.add(_.name);const A=v.get(_.name);return A?getPossibleTransitions(A,v,T):[];case"Parallel":{const k=getPossibleTransitions(_.left,v,S),M=getPossibleTransitions(_.right,v,S),N=[];return k.forEach(D=>{N.push({action:D.action,targetExpr:{type:"Parallel",left:D.targetExpr,right:_.right}})}),M.forEach(D=>{N.push({action:D.action,targetExpr:{type:"Parallel",left:_.left,right:D.targetExpr}})}),k.forEach(D=>{M.forEach(I=>{areComplementary(D.action,I.action)&&N.push({action:"tau",targetExpr:{type:"Parallel",left:D.targetExpr,right:I.targetExpr}})})}),N}case"Restriction":return getPossibleTransitions(_.process,v,S).filter(M=>{if(M.action==="tau")return!0;const N=getActionBaseName(M.action);return!_.labels.includes(N)}).map(M=>({action:M.action,targetExpr:{type:"Restriction",process:M.targetExpr,labels:_.labels}}));case"Relabeling":return getPossibleTransitions(_.process,v,S).map(M=>{let N=M.action;if(M.action!=="tau"){const D=getActionBaseName(M.action),I=isOutputAction(M.action),q=_.relabels.find(B=>B.old===D);q&&(N=(I?"'":"")+q.new)}return{action:N,targetExpr:{type:"Relabeling",process:M.targetExpr,relabels:_.relabels}}});default:return[]}}function generateLTS(_,v,S={maxDepth:20,maxStates:150,useStructuralReduction:!1}){const R=[],T=new Map,A=new Map;if(_.forEach(F=>A.set(F.name,F.process)),!A.get(v))return[];const M=[],N=new Set,D=new Map,I=ccsToString({type:"ProcessRef",name:v},S.useStructuralReduction);M.push({expr:{type:"ProcessRef",name:v},depth:0});const q="1";D.set(I,q),N.add(I),R.push({data:{id:q,label:q,ccs:I,isInitial:!0}});let B=1;for(;M.length>0&&!(R.length>=S.maxStates);){const{expr:F,depth:V}=M.shift(),H=ccsToString(F,S.useStructuralReduction),W=D.get(H);if(V>=S.maxDepth)continue;const Y=getPossibleTransitions(F,A);for(const Z of Y){const J=ccsToString(Z.targetExpr,S.useStructuralReduction);let ne=D.get(J);if(ne||N.has(J)||(B++,ne=`${B}`,D.set(J,ne),N.add(J),R.push({data:{id:ne,label:ne,ccs:J,isInitial:!1}}),M.push({expr:Z.targetExpr,depth:V+1})),ne){const oe=`${W}_${ne}`;T.has(oe)||T.set(oe,{source:W,target:ne,actions:new Set}),T.get(oe).actions.add(Z.action)}}}const z=[];return T.forEach((F,V)=>{const H=Array.from(F.actions),W=H.join(", ");z.push({data:{id:`e_${V}`,source:F.source,target:F.target,label:W,actions:H}})}),[...R,...z]}function useSimulation(_,v){const S=reactExports.useMemo(()=>{const D=new Map;return _.forEach(I=>D.set(I.name,I.process)),D},[_]),[R,T]=reactExports.useState({currentExpr:null,history:[],availableTransitions:[],isFinished:!1}),A=reactExports.useCallback((D,I)=>{const q=getPossibleTransitions(D,S);return{currentExpr:D,history:I,availableTransitions:q.map((B,z)=>({action:B.action,target:B.targetExpr,id:z})),isFinished:q.length===0}},[S]),k=reactExports.useCallback(()=>{if(!S.has(v))return;T(A({type:"ProcessRef",name:v},[]))},[v,S,A]),M=D=>{if(!R.currentExpr)return;const I=R.availableTransitions[D],q=[...R.history,R.currentExpr];T(A(I.target,q))},N=()=>{if(R.history.length===0)return;const D=R.history[R.history.length-1],I=R.history.slice(0,-1);T(A(D,I))};return reactExports.useEffect(()=>{k()},[k]),{...R,currentCCSString:R.currentExpr?ccsToString(R.currentExpr):"",step:M,back:N,reset:k}}function normalize(_){return _.replace(/\s+/g,"")}function SimulationWithGraph({program:_,initSettings:v,hideProcessSelector:S,hideViewSelector:R,hideStructuralReductionButton:T,onSettingsUpdate:A,allowEdit:k}){const[M,N]=reactExports.useState(v?.style||"id"),[D,I]=reactExports.useState(v?.useStructRed??!1),[q,B]=reactExports.useState(v?.process||(_.length>0?_[0].name:""));reactExports.useEffect(()=>{A&&A({type:"lts",name:v?.name??"Simulace",process:q,style:M,useStructRed:D})},[q,M,D]),reactExports.useEffect(()=>{if(v?.process){B(v?.process);return}_.length>0?_.some(ce=>ce.name===q)||B(_[0].name):B("")},[_,v?.process]),reactExports.useEffect(()=>{if(v?.useStructRed)I(v?.useStructRed);else{const ue=localStorage.getItem("default-lts-struct-red");ue&&["true","false"].includes(ue)&&I(ue==="true")}},[v?.useStructRed]),reactExports.useEffect(()=>{if(v?.style)N(v?.style);else{const ue=localStorage.getItem("default-lts-view-mode");ue&&["id","mixed","full"].includes(ue)&&N(ue)}},[v?.style]);const z=ue=>{N(ue)},F=useSimulation(_,q),V=reactExports.useMemo(()=>generateLTS(_,q,{maxDepth:50,maxStates:200,useStructuralReduction:D}),[_,q,D]),{nodeLabelMap:H,ccsToIdMap:W,initialNodeId:Y}=reactExports.useMemo(()=>{const ue=new Map,ce=new Map;let ge=null;return V.forEach(me=>{if(me.data.source)return;const Ee=me.data.id,_e=me.data.ccs;if(!Ee||!_e)return;const ye=normalize(_e);me.data.isInitial&&(ge=Ee);let be=Ee;M==="full"?be=_e:M==="mixed"&&(be=_e.length<15?_e:Ee),ue.set(_e,be),ce.set(ye,Ee)}),{nodeLabelMap:ue,ccsToIdMap:ce,initialNodeId:ge}},[V,M]),Z=ue=>H.has(ue)?H.get(ue):M==="id"?"?":ue,J=reactExports.useMemo(()=>{if(!F.currentExpr)return"";const ue=ccsToString(F.currentExpr,D);if(F.currentExpr.type==="ProcessRef"){const ce=_.find(ge=>ge.name===F.currentExpr.name);if(ce){const ge=ccsToString(ce.process,D);return`${ue} = ${ge}`}}return ue},[F.currentExpr,D,_]);let ne=W.get(normalize(J));!ne&&F.history.length===0&&Y&&(ne=Y);const[oe,te]=reactExports.useState(null),se=reactExports.useMemo(()=>{if(oe===null)return null;const ue=F.availableTransitions.find(_e=>_e.id===oe);if(!ue)return null;const ce=ccsToString(ue.target,D),ge=F.currentExpr?ccsToString(F.currentExpr,D):"";let me=W.get(normalize(ge));!me&&F.history.length===0&&Y&&(me=Y);const Ee=W.get(normalize(ce));return!me||!Ee?null:{sourceId:me,targetId:Ee,action:ue.action}},[oe,F.availableTransitions,F.currentExpr,D,W,Y,F.history.length]),le=!ne&&(F.history.length>0||!Y);return jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-2 relative",children:[!S&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-secondary text-secondary-foreground p-1 px-2 rounded-md shadow-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium uppercase text-secondary-foreground px-1",children:"Proces:"}),jsxRuntimeExports.jsxs(Select,{value:q,disabled:!k,onValueChange:ue=>{B(ue),F.reset()},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px] max-w-64 bg-white h-8 text-sm",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Proces"})}),jsxRuntimeExports.jsx(SelectContent,{children:jsxRuntimeExports.jsx(SelectGroup,{className:"max-h-64",children:_.map(ue=>jsxRuntimeExports.jsx(SelectItem,{value:ue.name,children:ue.name},ue.name))})})]})]}),!T&&jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"cursor-pointer py-5",onClick:()=>I(!D),disabled:!k,children:[jsxRuntimeExports.jsx(Layers,{size:16,className:`${D?"text-primary":""}`}),jsxRuntimeExports.jsxs("span",{className:`text-xs font-medium ${D?"text-primary":""}`,children:["Strukturln redukce ",D?"(Zap)":"(Vyp)"]})]}),!R&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-secondary text-secondary-foreground p-1 rounded-md shadow-sm",children:[jsxRuntimeExports.jsx(Settings$1,{size:16,className:"ml-2 mr-1"}),["id","mixed","full"].map(ue=>jsxRuntimeExports.jsx("button",{onClick:()=>z(ue),className:`px-3 py-1 my-1 text-xs rounded-md transition-colors font-medium ${M===ue?"bg-card shadow text-primary":"text-secondary-foreground hover:bg-card/90"}`,children:ue==="id"?"ID":ue==="mixed"?"Mix":"CCS"},ue))]}),jsxRuntimeExports.jsx("div",{className:"grow"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400",children:["Stav: ",V.filter(ue=>!ue.data.source).length]})]}),jsxRuntimeExports.jsx("div",{className:"h-[600px]",children:jsxRuntimeExports.jsx(LTSGraph,{elements:V,activeNodeId:ne||null,edgeHighlight:se,viewMode:M})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0",children:jsxRuntimeExports.jsx(SimulationPanel,{currentCCS:J,transitions:F.availableTransitions,historyLength:F.history.length,onStep:F.step,onBack:F.back,onReset:F.reset,onTransitionHover:te,getTargetLabel:Z,forceStructuralReduction:D,isOffGraph:le})})]})})}function CardEditBox({currentName:_,onUpdate:v,children:S}){const[R,T]=reactExports.useState(!1),[A,k]=reactExports.useState(_),[M,N]=reactExports.useState(""),D=q=>{T(q),q&&(k(_),N(""))},I=()=>{if(!A.trim()){N("Nzev nesm bt przdn.");return}v(A),T(!1)};return jsxRuntimeExports.jsxs(Dialog,{open:R,onOpenChange:D,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:S}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"mb-4",children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:"Pejmenovat kartu"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"name",className:"font-semibold",children:["Nzev karty ",jsxRuntimeExports.jsx("span",{className:"text-muted-foreground text-sm font-normal"})]}),jsxRuntimeExports.jsx(Input,{type:"text",id:"name",placeholder:"Nov nzev karty",value:A,onChange:q=>k(q.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end gap-2 pt-2",children:[jsxRuntimeExports.jsx(Button,{onClick:I,className:"w-fit",children:"Uloit"}),M.length>0&&jsxRuntimeExports.jsx(AlertBox,{type:"error",children:M})]})]})]})}function ProgramCard({card:_,index:v,ccsAst:S,onUpdate:R,onDelete:T}){const{activeProgram:A,selectedProgramIndex:k}=usePrograms(),M=N=>{const D={..._,name:N};R(D)};return jsxRuntimeExports.jsxs(Card,{className:"relative group transition-transform animate-in fade-in slide-in-from-bottom-4 duration-500 fill-mode-both",style:{animationDelay:`${v*150}ms`},children:[jsxRuntimeExports.jsxs(CardHeader,{className:"flex flex-row items-center justify-between",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg flex items-center gap-2",children:_.name}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:A?.allowEdit&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CardEditBox,{currentName:_.name,onUpdate:M,children:jsxRuntimeExports.jsx(ButtonHover,{variant:"ghost",size:"icon",hoverContent:jsxRuntimeExports.jsx("p",{children:"Pejmenovat kartu"}),className:"h-8 w-8 text-muted-foreground/50 hover:text-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(Pencil,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsx(ButtonHover,{variant:"ghost",size:"icon",onClick:T,hoverContent:jsxRuntimeExports.jsx("p",{children:"Odstranit kartu"}),className:"h-8 w-8 text-muted-foreground/50 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})]}),jsxRuntimeExports.jsx(CardContent,{children:_.type==="sos"?jsxRuntimeExports.jsx(ProofWrapper,{program:S,onSettingsUpdate:R,allowEdit:A?.allowEdit,initSettings:{type:"sos",name:_.name,processX:_.processX,processY:_.processY,action:_.action,showHelp:_.showHelp}}):jsxRuntimeExports.jsx(SimulationWithGraph,{program:S,onSettingsUpdate:R,allowEdit:A?.allowEdit,initSettings:{type:"lts",name:_.name,process:_.process,style:_.style,useStructRed:_.useStructRed}})})]},v+(A?.name||"")+k)}function ProgramWorkspace(){const{t:_}=useTranslation(),{activeProgram:v,selectedProgramIndex:S,updateProgram:R}=usePrograms(),[T,A]=reactExports.useState(0),[k,M]=reactExports.useState(null),[N,D]=reactExports.useState(null);reactExports.useEffect(()=>{M(v),v?.definition,k?.definition,A(T+1)},[v]);const I=(W,Y)=>{D(W),k&&Y!==k.definition&&M({...k,definition:Y})},q=W=>{if(!k)return;const Y=W==="sos"?{type:"sos",name:"Dkaz",processX:"",processY:"",action:"",showHelp:!0}:{type:"lts",name:"Simulace",process:"",useStructRed:!1,style:"mixed"};M({...k,cards:[...k.cards,Y]})},B=(W,Y)=>{if(!k||JSON.stringify(k.cards[W])===JSON.stringify(Y))return;const Z=[...k.cards];Z[W]=Y,M({...k,cards:Z})},z=()=>{S!=null&&k&&(R(S,k),toast.info("Zmny v programu byly uloeny."))},F=W=>{if(!k)return;const Y=k.cards.filter((Z,J)=>J!==W);M({...k,cards:Y})},V=()=>{M(v),A(T+1),toast.info("Lokln zmny byly zrueny.")},H=k&&(v?JSON.stringify(k)!==JSON.stringify(v):!1);return reactExports.useEffect(()=>{H&&v?.allowEdit&&toast.info("Program byl upraven. Zmny potvrdte uloenm programu.")},[H]),!k||!v?jsxRuntimeExports.jsx("div",{className:"text-center p-10 text-muted-foreground",children:"Vyberte program ze seznamu."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs(Card,{className:"relative group transition-transform animate-in fade-in slide-in-from-bottom-4 duration-500 fill-mode-both",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start gap-4 flex-wrap",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-xl flex items-center gap-2",children:_("core.program",{name:k.name})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:k.description})]}),H&&v.allowEdit&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:V,className:"text-muted-foreground hover:text-red-600",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4 mr-2"})," Zahodit zmny"]}),jsxRuntimeExports.jsxs(Button,{onClick:z,children:[jsxRuntimeExports.jsx(Save,{className:"w-4 h-4 mr-2"})," Uloit zmny"]})]})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(EditorWrap,{initValue:v.definition,onSubmit:I,disabled:!v.allowEdit},T)})]},v.name+S)}),N&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"space-y-6",children:k.cards.map((W,Y)=>jsxRuntimeExports.jsx(ProgramCard,{card:W,index:Y,ccsAst:N,onUpdate:Z=>B(Y,Z),onDelete:()=>F(Y)},Y+T))}),v.allowEdit&&jsxRuntimeExports.jsx("div",{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg bg-muted/60 hover:bg-muted/90 transition-colors gap-4",children:[jsxRuntimeExports.jsx("p",{className:"text-muted-foreground font-medium",children:"Pidat novou kartu k programu"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>q("sos"),className:"gap-2",children:"Nov SOS Dkaz"}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>q("lts"),className:"gap-2",children:"Nov LTS Simulace"})]})]})})]})]})}function Homepage(){const{t:_}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"p-4 pt-0",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs(Card,{className:"relative group transition-transform animate-in fade-in slide-in-from-bottom-4 duration-500 fill-mode-both",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl",children:_("core.selectProgram")})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(ProgramList,{})})]})}),jsxRuntimeExports.jsx(ProgramWorkspace,{})]})}function Aboutpage(){return jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"About"})})}function LanguageSwitcher({children:_}){const{i18n:v}=useTranslation(),S=v.language?v.language.split("-")[0]:"cs",R=T=>{v.changeLanguage(T)};return jsxRuntimeExports.jsxs(Select,{value:S,onValueChange:R,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto border-none shadow-none bg-transparent px-2 focus:ring-0 hover:bg-slate-100 rounded-md transition-colors [&>.lucide-chevron-down]:hidden",children:_}),jsxRuntimeExports.jsxs(SelectContent,{align:"end",children:[jsxRuntimeExports.jsx(SelectItem,{value:"cs",children:jsxRuntimeExports.jsx("span",{className:"flex items-center gap-2",children:"etina"})}),jsxRuntimeExports.jsx(SelectItem,{value:"en",children:jsxRuntimeExports.jsx("span",{className:"flex items-center gap-2",children:"English"})})]})]})}function Settings({children:_}){return jsxRuntimeExports.jsxs(Dialog,{children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:_}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"mb-4",children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:"Nastaven"})}),jsxRuntimeExports.jsx("div",{className:"grid gap-8 pb-4",children:"TODO"})]})]})}function Header(){const{t:_}=useTranslation();return jsxRuntimeExports.jsxs("header",{className:"max-w-[1280px] w-full mx-auto my-6 px-6 flex justify-between items-center gap-4 flex-wrap",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold",children:_("core.ccs")}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-end flex-1",children:[jsxRuntimeExports.jsx(LanguageSwitcher,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Earth,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"text-foreground font-semibold opacity-80",children:"Jazyk"})]})}),jsxRuntimeExports.jsx(Settings,{children:jsxRuntimeExports.jsxs(Button,{className:"border-none shadow-none bg-transparent hover:bg-slate-100 rounded-md transition-colors text-foreground gap-1 px-2",children:[jsxRuntimeExports.jsx(Settings$1,{className:"h-5! w-5!"}),jsxRuntimeExports.jsx("span",{className:"text-foreground font-semibold opacity-80",children:"Nastaven"})]})})]})]})}function Footer(){return jsxRuntimeExports.jsx("footer",{className:"",children:jsxRuntimeExports.jsx("div",{className:"max-w-[1280px] m-auto w-full px-6 pb-4 text-foreground/65",children:" Jakub Kobrsk - Diplomov prce - Kalkulus komunikujcch systm"})})}function RouteList(){return jsxRuntimeExports.jsx("div",{className:"max-w-[1280px] m-auto w-full px-2 grow",children:jsxRuntimeExports.jsx(ProgramsProvider,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Homepage,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(Aboutpage,{})})]})})})}function App(){return jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-background text-foreground min-h-svh antialiased flex flex-col",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(RouteList,{}),jsxRuntimeExports.jsx(Footer,{})]}),jsxRuntimeExports.jsx(Toaster,{richColors:!0})]})}const{slice,forEach}=[];function defaults(_){return forEach.call(slice.call(arguments,1),v=>{if(v)for(const S in v)_[S]===void 0&&(_[S]=v[S])}),_}function hasXSS(_){return typeof _!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(S=>S.test(_))}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=function(_,v){const R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},T=encodeURIComponent(v);let A=`${_}=${T}`;if(R.maxAge>0){const k=R.maxAge-0;if(Number.isNaN(k))throw new Error("maxAge should be a Number");A+=`; Max-Age=${Math.floor(k)}`}if(R.domain){if(!fieldContentRegExp.test(R.domain))throw new TypeError("option domain is invalid");A+=`; Domain=${R.domain}`}if(R.path){if(!fieldContentRegExp.test(R.path))throw new TypeError("option path is invalid");A+=`; Path=${R.path}`}if(R.expires){if(typeof R.expires.toUTCString!="function")throw new TypeError("option expires is invalid");A+=`; Expires=${R.expires.toUTCString()}`}if(R.httpOnly&&(A+="; HttpOnly"),R.secure&&(A+="; Secure"),R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"strict":A+="; SameSite=Strict";break;case"none":A+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return R.partitioned&&(A+="; Partitioned"),A},cookie={create(_,v,S,R){let T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};S&&(T.expires=new Date,T.expires.setTime(T.expires.getTime()+S*60*1e3)),R&&(T.domain=R),document.cookie=serializeCookie(_,v,T)},read(_){const v=`${_}=`,S=document.cookie.split(";");for(let R=0;R<S.length;R++){let T=S[R];for(;T.charAt(0)===" ";)T=T.substring(1,T.length);if(T.indexOf(v)===0)return T.substring(v.length,T.length)}return null},remove(_,v){this.create(_,"",-1,v)}};var cookie$1={name:"cookie",lookup(_){let{lookupCookie:v}=_;if(v&&typeof document<"u")return cookie.read(v)||void 0},cacheUserLanguage(_,v){let{lookupCookie:S,cookieMinutes:R,cookieDomain:T,cookieOptions:A}=v;S&&typeof document<"u"&&cookie.create(S,_,R,T,A)}},querystring={name:"querystring",lookup(_){let{lookupQuerystring:v}=_,S;if(typeof window<"u"){let{search:R}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(R=window.location.hash.substring(window.location.hash.indexOf("?")));const A=R.substring(1).split("&");for(let k=0;k<A.length;k++){const M=A[k].indexOf("=");M>0&&A[k].substring(0,M)===v&&(S=A[k].substring(M+1))}}return S}},hash={name:"hash",lookup(_){let{lookupHash:v,lookupFromHashIndex:S}=_,R;if(typeof window<"u"){const{hash:T}=window.location;if(T&&T.length>2){const A=T.substring(1);if(v){const k=A.split("&");for(let M=0;M<k.length;M++){const N=k[M].indexOf("=");N>0&&k[M].substring(0,N)===v&&(R=k[M].substring(N+1))}}if(R)return R;if(!R&&S>-1){const k=T.match(/\/([a-zA-Z-]*)/g);return Array.isArray(k)?k[typeof S=="number"?S:0]?.replace("/",""):void 0}}}return R}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{if(hasLocalStorageSupport=typeof window<"u"&&window.localStorage!==null,!hasLocalStorageSupport)return!1;const _="i18next.translate.boo";window.localStorage.setItem(_,"foo"),window.localStorage.removeItem(_)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(_){let{lookupLocalStorage:v}=_;if(v&&localStorageAvailable())return window.localStorage.getItem(v)||void 0},cacheUserLanguage(_,v){let{lookupLocalStorage:S}=v;S&&localStorageAvailable()&&window.localStorage.setItem(S,_)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{if(hasSessionStorageSupport=typeof window<"u"&&window.sessionStorage!==null,!hasSessionStorageSupport)return!1;const _="i18next.translate.boo";window.sessionStorage.setItem(_,"foo"),window.sessionStorage.removeItem(_)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(_){let{lookupSessionStorage:v}=_;if(v&&sessionStorageAvailable())return window.sessionStorage.getItem(v)||void 0},cacheUserLanguage(_,v){let{lookupSessionStorage:S}=v;S&&sessionStorageAvailable()&&window.sessionStorage.setItem(S,_)}},navigator$1={name:"navigator",lookup(_){const v=[];if(typeof navigator<"u"){const{languages:S,userLanguage:R,language:T}=navigator;if(S)for(let A=0;A<S.length;A++)v.push(S[A]);R&&v.push(R),T&&v.push(T)}return v.length>0?v:void 0}},htmlTag={name:"htmlTag",lookup(_){let{htmlTag:v}=_,S;const R=v||(typeof document<"u"?document.documentElement:null);return R&&typeof R.getAttribute=="function"&&(S=R.getAttribute("lang")),S}},path={name:"path",lookup(_){let{lookupFromPathIndex:v}=_;if(typeof window>"u")return;const S=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(S)?S[typeof v=="number"?v:0]?.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(_){let{lookupFromSubdomainIndex:v}=_;const S=typeof v=="number"?v+1:1,R=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(R)return R[S]}};let canCookies=!1;try{document.cookie,canCookies=!0}catch(_){}const order=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];canCookies||order.splice(1,1);const getDefaults=()=>({order,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:_=>_});class Browser{constructor(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(v,S)}init(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=v,this.options=defaults(S,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=T=>T.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=R,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain),this.addDetector(hash)}addDetector(v){return this.detectors[v.name]=v,this}detect(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,S=[];return v.forEach(R=>{if(this.detectors[R]){let T=this.detectors[R].lookup(this.options);T&&typeof T=="string"&&(T=[T]),T&&(S=S.concat(T))}}),S=S.filter(R=>R!=null&&!hasXSS(R)).map(R=>this.options.convertDetectedLanguage(R)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?S:S.length>0?S[0]:null}cacheUserLanguage(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;S&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(v)>-1||S.forEach(R=>{this.detectors[R]&&this.detectors[R].cacheUserLanguage(v,this.options)}))}}Browser.type="languageDetector";const core$1={ccs:"Kalkulus Komunikujcch Systm",selectProgram:"Vbr CCS programu",program:"Program {{name}}",proof:"Dkaz",simulation:"Simulace"},csTranslation={core:core$1},core={ccs:"Calculus of Communicating Systems",selectProgram:"Select CCS program",program:"Program {{name}}",proof:"Proof",simulation:"Simulation"},enTranslation={core},resources={cs:{translation:csTranslation},en:{translation:enTranslation}};instance.use(Browser).use(initReactI18next).init({resources,fallbackLng:"cs",debug:!0,detection:{order:["localStorage","navigator"],lookupLocalStorage:"i18nextLng",caches:["localStorage"]},interpolation:{escapeValue:!1}});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
