function _mergeNamespaces(_,v){for(var S=0;S<v.length;S++){const R=v[S];if(typeof R!="string"&&!Array.isArray(R)){for(const T in R)if(T!=="default"&&!(T in _)){const A=Object.getOwnPropertyDescriptor(R,T);A&&Object.defineProperty(_,T,A.get?A:{enumerable:!0,get:()=>R[T]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))R(T);new MutationObserver(T=>{for(const A of T)if(A.type==="childList")for(const k of A.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&R(k)}).observe(document,{childList:!0,subtree:!0});function S(T){const A={};return T.integrity&&(A.integrity=T.integrity),T.referrerPolicy&&(A.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?A.credentials="include":T.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function R(T){if(T.ep)return;T.ep=!0;const A=S(T);fetch(T.href,A)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),v=Symbol.for("react.fragment");function S(R,T,A){var k=null;if(A!==void 0&&(k=""+A),T.key!==void 0&&(k=""+T.key),"key"in T){A={};for(var M in T)M!=="key"&&(A[M]=T[M])}else A=T;return T=A.ref,{$$typeof:_,type:R,key:k,ref:T!==void 0?T:null,props:A}}return reactJsxRuntime_production.Fragment=v,reactJsxRuntime_production.jsx=S,reactJsxRuntime_production.jsxs=S,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),B=Symbol.iterator;function F(fe){return fe===null||typeof fe!="object"?null:(fe=B&&fe[B]||fe["@@iterator"],typeof fe=="function"?fe:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,V={};function G(fe,xe,Ae){this.props=fe,this.context=xe,this.refs=V,this.updater=Ae||j}G.prototype.isReactComponent={},G.prototype.setState=function(fe,xe){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,xe,"setState")},G.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function W(){}W.prototype=G.prototype;function Y(fe,xe,Ae){this.props=fe,this.context=xe,this.refs=V,this.updater=Ae||j}var X=Y.prototype=new W;X.constructor=Y,z(X,G.prototype),X.isPureReactComponent=!0;var ee=Array.isArray;function re(){}var Q={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function ae(fe,xe,Ae){var Se=Ae.ref;return{$$typeof:_,type:fe,key:xe,ref:Se!==void 0?Se:null,props:Ae}}function oe(fe,xe){return ae(fe.type,xe,fe.props)}function se(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===_}function ce(fe){var xe={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(Ae){return xe[Ae]})}var de=/\/+/g;function ye(fe,xe){return typeof fe=="object"&&fe!==null&&fe.key!=null?ce(""+fe.key):xe.toString(36)}function we(fe){switch(fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason;default:switch(typeof fe.status=="string"?fe.then(re,re):(fe.status="pending",fe.then(function(xe){fe.status==="pending"&&(fe.status="fulfilled",fe.value=xe)},function(xe){fe.status==="pending"&&(fe.status="rejected",fe.reason=xe)})),fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason}}throw fe}function ge(fe,xe,Ae,Se,Me){var Oe=typeof fe;(Oe==="undefined"||Oe==="boolean")&&(fe=null);var Ce=!1;if(fe===null)Ce=!0;else switch(Oe){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(fe.$$typeof){case _:case v:Ce=!0;break;case L:return Ce=fe._init,ge(Ce(fe._payload),xe,Ae,Se,Me)}}if(Ce)return Me=Me(fe),Ce=Se===""?"."+ye(fe,0):Se,ee(Me)?(Ae="",Ce!=null&&(Ae=Ce.replace(de,"$&/")+"/"),ge(Me,xe,Ae,"",function(Pe){return Pe})):Me!=null&&(se(Me)&&(Me=oe(Me,Ae+(Me.key==null||fe&&fe.key===Me.key?"":(""+Me.key).replace(de,"$&/")+"/")+Ce)),xe.push(Me)),1;Ce=0;var $e=Se===""?".":Se+":";if(ee(fe))for(var Be=0;Be<fe.length;Be++)Se=fe[Be],Oe=$e+ye(Se,Be),Ce+=ge(Se,xe,Ae,Oe,Me);else if(Be=F(fe),typeof Be=="function")for(fe=Be.call(fe),Be=0;!(Se=fe.next()).done;)Se=Se.value,Oe=$e+ye(Se,Be++),Ce+=ge(Se,xe,Ae,Oe,Me);else if(Oe==="object"){if(typeof fe.then=="function")return ge(we(fe),xe,Ae,Se,Me);throw xe=String(fe),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ve(fe,xe,Ae){if(fe==null)return fe;var Se=[],Me=0;return ge(fe,Se,"","",function(Oe){return xe.call(Ae,Oe,Me++)}),Se}function be(fe){if(fe._status===-1){var xe=fe._result;xe=xe(),xe.then(function(Ae){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=Ae)},function(Ae){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=Ae)}),fe._status===-1&&(fe._status=0,fe._result=xe)}if(fe._status===1)return fe._result.default;throw fe._result}var ke=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)},me={map:ve,forEach:function(fe,xe,Ae){ve(fe,function(){xe.apply(this,arguments)},Ae)},count:function(fe){var xe=0;return ve(fe,function(){xe++}),xe},toArray:function(fe){return ve(fe,function(xe){return xe})||[]},only:function(fe){if(!se(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}};return react_production.Activity=q,react_production.Children=me,react_production.Component=G,react_production.Fragment=S,react_production.Profiler=T,react_production.PureComponent=Y,react_production.StrictMode=R,react_production.Suspense=P,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(fe){return Q.H.useMemoCache(fe)}},react_production.cache=function(fe){return function(){return fe.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(fe,xe,Ae){if(fe==null)throw Error("The argument must be a React element, but you passed "+fe+".");var Se=z({},fe.props),Me=fe.key;if(xe!=null)for(Oe in xe.key!==void 0&&(Me=""+xe.key),xe)!ne.call(xe,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&xe.ref===void 0||(Se[Oe]=xe[Oe]);var Oe=arguments.length-2;if(Oe===1)Se.children=Ae;else if(1<Oe){for(var Ce=Array(Oe),$e=0;$e<Oe;$e++)Ce[$e]=arguments[$e+2];Se.children=Ce}return ae(fe.type,Me,Se)},react_production.createContext=function(fe){return fe={$$typeof:k,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null},fe.Provider=fe,fe.Consumer={$$typeof:A,_context:fe},fe},react_production.createElement=function(fe,xe,Ae){var Se,Me={},Oe=null;if(xe!=null)for(Se in xe.key!==void 0&&(Oe=""+xe.key),xe)ne.call(xe,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Me[Se]=xe[Se]);var Ce=arguments.length-2;if(Ce===1)Me.children=Ae;else if(1<Ce){for(var $e=Array(Ce),Be=0;Be<Ce;Be++)$e[Be]=arguments[Be+2];Me.children=$e}if(fe&&fe.defaultProps)for(Se in Ce=fe.defaultProps,Ce)Me[Se]===void 0&&(Me[Se]=Ce[Se]);return ae(fe,Oe,Me)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(fe){return{$$typeof:M,render:fe}},react_production.isValidElement=se,react_production.lazy=function(fe){return{$$typeof:L,_payload:{_status:-1,_result:fe},_init:be}},react_production.memo=function(fe,xe){return{$$typeof:D,type:fe,compare:xe===void 0?null:xe}},react_production.startTransition=function(fe){var xe=Q.T,Ae={};Q.T=Ae;try{var Se=fe(),Me=Q.S;Me!==null&&Me(Ae,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(re,ke)}catch(Oe){ke(Oe)}finally{xe!==null&&Ae.types!==null&&(xe.types=Ae.types),Q.T=xe}},react_production.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},react_production.use=function(fe){return Q.H.use(fe)},react_production.useActionState=function(fe,xe,Ae){return Q.H.useActionState(fe,xe,Ae)},react_production.useCallback=function(fe,xe){return Q.H.useCallback(fe,xe)},react_production.useContext=function(fe){return Q.H.useContext(fe)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(fe,xe){return Q.H.useDeferredValue(fe,xe)},react_production.useEffect=function(fe,xe){return Q.H.useEffect(fe,xe)},react_production.useEffectEvent=function(fe){return Q.H.useEffectEvent(fe)},react_production.useId=function(){return Q.H.useId()},react_production.useImperativeHandle=function(fe,xe,Ae){return Q.H.useImperativeHandle(fe,xe,Ae)},react_production.useInsertionEffect=function(fe,xe){return Q.H.useInsertionEffect(fe,xe)},react_production.useLayoutEffect=function(fe,xe){return Q.H.useLayoutEffect(fe,xe)},react_production.useMemo=function(fe,xe){return Q.H.useMemo(fe,xe)},react_production.useOptimistic=function(fe,xe){return Q.H.useOptimistic(fe,xe)},react_production.useReducer=function(fe,xe,Ae){return Q.H.useReducer(fe,xe,Ae)},react_production.useRef=function(fe){return Q.H.useRef(fe)},react_production.useState=function(fe){return Q.H.useState(fe)},react_production.useSyncExternalStore=function(fe,xe,Ae){return Q.H.useSyncExternalStore(fe,xe,Ae)},react_production.useTransition=function(){return Q.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(_){function v(ge,ve){var be=ge.length;ge.push(ve);e:for(;0<be;){var ke=be-1>>>1,me=ge[ke];if(0<T(me,ve))ge[ke]=ve,ge[be]=me,be=ke;else break e}}function S(ge){return ge.length===0?null:ge[0]}function R(ge){if(ge.length===0)return null;var ve=ge[0],be=ge.pop();if(be!==ve){ge[0]=be;e:for(var ke=0,me=ge.length,fe=me>>>1;ke<fe;){var xe=2*(ke+1)-1,Ae=ge[xe],Se=xe+1,Me=ge[Se];if(0>T(Ae,be))Se<me&&0>T(Me,Ae)?(ge[ke]=Me,ge[Se]=be,ke=Se):(ge[ke]=Ae,ge[xe]=be,ke=xe);else if(Se<me&&0>T(Me,be))ge[ke]=Me,ge[Se]=be,ke=Se;else break e}}return ve}function T(ge,ve){var be=ge.sortIndex-ve.sortIndex;return be!==0?be:ge.id-ve.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;_.unstable_now=function(){return A.now()}}else{var k=Date,M=k.now();_.unstable_now=function(){return k.now()-M}}var P=[],D=[],L=1,q=null,B=3,F=!1,j=!1,z=!1,V=!1,G=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function X(ge){for(var ve=S(D);ve!==null;){if(ve.callback===null)R(D);else if(ve.startTime<=ge)R(D),ve.sortIndex=ve.expirationTime,v(P,ve);else break;ve=S(D)}}function ee(ge){if(z=!1,X(ge),!j)if(S(P)!==null)j=!0,re||(re=!0,ce());else{var ve=S(D);ve!==null&&we(ee,ve.startTime-ge)}}var re=!1,Q=-1,ne=5,ae=-1;function oe(){return V?!0:!(_.unstable_now()-ae<ne)}function se(){if(V=!1,re){var ge=_.unstable_now();ae=ge;var ve=!0;try{e:{j=!1,z&&(z=!1,W(Q),Q=-1),F=!0;var be=B;try{t:{for(X(ge),q=S(P);q!==null&&!(q.expirationTime>ge&&oe());){var ke=q.callback;if(typeof ke=="function"){q.callback=null,B=q.priorityLevel;var me=ke(q.expirationTime<=ge);if(ge=_.unstable_now(),typeof me=="function"){q.callback=me,X(ge),ve=!0;break t}q===S(P)&&R(P),X(ge)}else R(P);q=S(P)}if(q!==null)ve=!0;else{var fe=S(D);fe!==null&&we(ee,fe.startTime-ge),ve=!1}}break e}finally{q=null,B=be,F=!1}ve=void 0}}finally{ve?ce():re=!1}}}var ce;if(typeof Y=="function")ce=function(){Y(se)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ye=de.port2;de.port1.onmessage=se,ce=function(){ye.postMessage(null)}}else ce=function(){G(se,0)};function we(ge,ve){Q=G(function(){ge(_.unstable_now())},ve)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(ge){ge.callback=null},_.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<ge?Math.floor(1e3/ge):5},_.unstable_getCurrentPriorityLevel=function(){return B},_.unstable_next=function(ge){switch(B){case 1:case 2:case 3:var ve=3;break;default:ve=B}var be=B;B=ve;try{return ge()}finally{B=be}},_.unstable_requestPaint=function(){V=!0},_.unstable_runWithPriority=function(ge,ve){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var be=B;B=ge;try{return ve()}finally{B=be}},_.unstable_scheduleCallback=function(ge,ve,be){var ke=_.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?ke+be:ke):be=ke,ge){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=be+me,ge={id:L++,callback:ve,priorityLevel:ge,startTime:be,expirationTime:me,sortIndex:-1},be>ke?(ge.sortIndex=be,v(D,ge),S(P)===null&&ge===S(D)&&(z?(W(Q),Q=-1):z=!0,we(ee,be-ke))):(ge.sortIndex=me,v(P,ge),j||F||(j=!0,re||(re=!0,ce()))),ge},_.unstable_shouldYield=oe,_.unstable_wrapCallback=function(ge){var ve=B;return function(){var be=B;B=ve;try{return ge.apply(this,arguments)}finally{B=be}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function v(P){var D="https://react.dev/errors/"+P;if(1<arguments.length){D+="?args[]="+encodeURIComponent(arguments[1]);for(var L=2;L<arguments.length;L++)D+="&args[]="+encodeURIComponent(arguments[L])}return"Minified React error #"+P+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(){}var R={d:{f:S,r:function(){throw Error(v(522))},D:S,C:S,L:S,m:S,X:S,S,M:S},p:0,findDOMNode:null},T=Symbol.for("react.portal");function A(P,D,L){var q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:q==null?null:""+q,children:P,containerInfo:D,implementation:L}}var k=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function M(P,D){if(P==="font")return"";if(typeof D=="string")return D==="use-credentials"?D:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,reactDom_production.createPortal=function(P,D){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)throw Error(v(299));return A(P,D,null,L)},reactDom_production.flushSync=function(P){var D=k.T,L=R.p;try{if(k.T=null,R.p=2,P)return P()}finally{k.T=D,R.p=L,R.d.f()}},reactDom_production.preconnect=function(P,D){typeof P=="string"&&(D?(D=D.crossOrigin,D=typeof D=="string"?D==="use-credentials"?D:"":void 0):D=null,R.d.C(P,D))},reactDom_production.prefetchDNS=function(P){typeof P=="string"&&R.d.D(P)},reactDom_production.preinit=function(P,D){if(typeof P=="string"&&D&&typeof D.as=="string"){var L=D.as,q=M(L,D.crossOrigin),B=typeof D.integrity=="string"?D.integrity:void 0,F=typeof D.fetchPriority=="string"?D.fetchPriority:void 0;L==="style"?R.d.S(P,typeof D.precedence=="string"?D.precedence:void 0,{crossOrigin:q,integrity:B,fetchPriority:F}):L==="script"&&R.d.X(P,{crossOrigin:q,integrity:B,fetchPriority:F,nonce:typeof D.nonce=="string"?D.nonce:void 0})}},reactDom_production.preinitModule=function(P,D){if(typeof P=="string")if(typeof D=="object"&&D!==null){if(D.as==null||D.as==="script"){var L=M(D.as,D.crossOrigin);R.d.M(P,{crossOrigin:L,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0})}}else D==null&&R.d.M(P)},reactDom_production.preload=function(P,D){if(typeof P=="string"&&typeof D=="object"&&D!==null&&typeof D.as=="string"){var L=D.as,q=M(L,D.crossOrigin);R.d.L(P,L,{crossOrigin:q,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0,type:typeof D.type=="string"?D.type:void 0,fetchPriority:typeof D.fetchPriority=="string"?D.fetchPriority:void 0,referrerPolicy:typeof D.referrerPolicy=="string"?D.referrerPolicy:void 0,imageSrcSet:typeof D.imageSrcSet=="string"?D.imageSrcSet:void 0,imageSizes:typeof D.imageSizes=="string"?D.imageSizes:void 0,media:typeof D.media=="string"?D.media:void 0})}},reactDom_production.preloadModule=function(P,D){if(typeof P=="string")if(D){var L=M(D.as,D.crossOrigin);R.d.m(P,{as:typeof D.as=="string"&&D.as!=="script"?D.as:void 0,crossOrigin:L,integrity:typeof D.integrity=="string"?D.integrity:void 0})}else R.d.m(P)},reactDom_production.requestFormReset=function(P){R.d.r(P)},reactDom_production.unstable_batchedUpdates=function(P,D){return P(D)},reactDom_production.useFormState=function(P,D,L){return k.H.useFormState(P,D,L)},reactDom_production.useFormStatus=function(){return k.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(v){console.error(v)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler(),v=requireReact(),S=requireReactDom();function R(N){var I="https://react.dev/errors/"+N;if(1<arguments.length){I+="?args[]="+encodeURIComponent(arguments[1]);for(var $=2;$<arguments.length;$++)I+="&args[]="+encodeURIComponent(arguments[$])}return"Minified React error #"+N+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(N){return!(!N||N.nodeType!==1&&N.nodeType!==9&&N.nodeType!==11)}function A(N){var I=N,$=N;if(N.alternate)for(;I.return;)I=I.return;else{N=I;do I=N,(I.flags&4098)!==0&&($=I.return),N=I.return;while(N)}return I.tag===3?$:null}function k(N){if(N.tag===13){var I=N.memoizedState;if(I===null&&(N=N.alternate,N!==null&&(I=N.memoizedState)),I!==null)return I.dehydrated}return null}function M(N){if(N.tag===31){var I=N.memoizedState;if(I===null&&(N=N.alternate,N!==null&&(I=N.memoizedState)),I!==null)return I.dehydrated}return null}function P(N){if(A(N)!==N)throw Error(R(188))}function D(N){var I=N.alternate;if(!I){if(I=A(N),I===null)throw Error(R(188));return I!==N?null:N}for(var $=N,H=I;;){var Z=$.return;if(Z===null)break;var te=Z.alternate;if(te===null){if(H=Z.return,H!==null){$=H;continue}break}if(Z.child===te.child){for(te=Z.child;te;){if(te===$)return P(Z),N;if(te===H)return P(Z),I;te=te.sibling}throw Error(R(188))}if($.return!==H.return)$=Z,H=te;else{for(var pe=!1,Te=Z.child;Te;){if(Te===$){pe=!0,$=Z,H=te;break}if(Te===H){pe=!0,H=Z,$=te;break}Te=Te.sibling}if(!pe){for(Te=te.child;Te;){if(Te===$){pe=!0,$=te,H=Z;break}if(Te===H){pe=!0,H=te,$=Z;break}Te=Te.sibling}if(!pe)throw Error(R(189))}}if($.alternate!==H)throw Error(R(190))}if($.tag!==3)throw Error(R(188));return $.stateNode.current===$?N:I}function L(N){var I=N.tag;if(I===5||I===26||I===27||I===6)return N;for(N=N.child;N!==null;){if(I=L(N),I!==null)return I;N=N.sibling}return null}var q=Object.assign,B=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function ce(N){return N===null||typeof N!="object"?null:(N=se&&N[se]||N["@@iterator"],typeof N=="function"?N:null)}var de=Symbol.for("react.client.reference");function ye(N){if(N==null)return null;if(typeof N=="function")return N.$$typeof===de?null:N.displayName||N.name||null;if(typeof N=="string")return N;switch(N){case z:return"Fragment";case G:return"Profiler";case V:return"StrictMode";case ee:return"Suspense";case re:return"SuspenseList";case ae:return"Activity"}if(typeof N=="object")switch(N.$$typeof){case j:return"Portal";case Y:return N.displayName||"Context";case W:return(N._context.displayName||"Context")+".Consumer";case X:var I=N.render;return N=N.displayName,N||(N=I.displayName||I.name||"",N=N!==""?"ForwardRef("+N+")":"ForwardRef"),N;case Q:return I=N.displayName||null,I!==null?I:ye(N.type)||"Memo";case ne:I=N._payload,N=N._init;try{return ye(N(I))}catch{}}return null}var we=Array.isArray,ge=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=S.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ke=[],me=-1;function fe(N){return{current:N}}function xe(N){0>me||(N.current=ke[me],ke[me]=null,me--)}function Ae(N,I){me++,ke[me]=N.current,N.current=I}var Se=fe(null),Me=fe(null),Oe=fe(null),Ce=fe(null);function $e(N,I){switch(Ae(Oe,I),Ae(Me,N),Ae(Se,null),I.nodeType){case 9:case 11:N=(N=I.documentElement)&&(N=N.namespaceURI)?Jh(N):0;break;default:if(N=I.tagName,I=I.namespaceURI)I=Jh(I),N=ep(I,N);else switch(N){case"svg":N=1;break;case"math":N=2;break;default:N=0}}xe(Se),Ae(Se,N)}function Be(){xe(Se),xe(Me),xe(Oe)}function Pe(N){N.memoizedState!==null&&Ae(Ce,N);var I=Se.current,$=ep(I,N.type);I!==$&&(Ae(Me,N),Ae(Se,$))}function De(N){Me.current===N&&(xe(Se),xe(Me)),Ce.current===N&&(xe(Ce),Ys._currentValue=be)}var Le,Ne;function tt(N){if(Le===void 0)try{throw Error()}catch($){var I=$.stack.trim().match(/\n( *(at )?)/);Le=I&&I[1]||"",Ne=-1<$.stack.indexOf(`
    at`)?" (<anonymous>)":-1<$.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+N+Ne}var it=!1;function dt(N,I){if(!N||it)return"";it=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var H={DetermineComponentFrameRoot:function(){try{if(I){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(rt){var Je=rt}Reflect.construct(N,[],ct)}else{try{ct.call()}catch(rt){Je=rt}N.call(ct.prototype)}}else{try{throw Error()}catch(rt){Je=rt}(ct=N())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(rt){if(rt&&Je&&typeof rt.stack=="string")return[rt.stack,Je.stack]}return[null,null]}};H.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Z=Object.getOwnPropertyDescriptor(H.DetermineComponentFrameRoot,"name");Z&&Z.configurable&&Object.defineProperty(H.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var te=H.DetermineComponentFrameRoot(),pe=te[0],Te=te[1];if(pe&&Te){var Ie=pe.split(`
`),Ye=Te.split(`
`);for(Z=H=0;H<Ie.length&&!Ie[H].includes("DetermineComponentFrameRoot");)H++;for(;Z<Ye.length&&!Ye[Z].includes("DetermineComponentFrameRoot");)Z++;if(H===Ie.length||Z===Ye.length)for(H=Ie.length-1,Z=Ye.length-1;1<=H&&0<=Z&&Ie[H]!==Ye[Z];)Z--;for(;1<=H&&0<=Z;H--,Z--)if(Ie[H]!==Ye[Z]){if(H!==1||Z!==1)do if(H--,Z--,0>Z||Ie[H]!==Ye[Z]){var at=`
`+Ie[H].replace(" at new "," at ");return N.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",N.displayName)),at}while(1<=H&&0<=Z);break}}}finally{it=!1,Error.prepareStackTrace=$}return($=N?N.displayName||N.name:"")?tt($):""}function pt(N,I){switch(N.tag){case 26:case 27:case 5:return tt(N.type);case 16:return tt("Lazy");case 13:return N.child!==I&&I!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return dt(N.type,!1);case 11:return dt(N.type.render,!1);case 1:return dt(N.type,!0);case 31:return tt("Activity");default:return""}}function We(N){try{var I="",$=null;do I+=pt(N,$),$=N,N=N.return;while(N);return I}catch(H){return`
Error generating stack: `+H.message+`
`+H.stack}}var Et=Object.prototype.hasOwnProperty,st=_.unstable_scheduleCallback,xt=_.unstable_cancelCallback,gt=_.unstable_shouldYield,_t=_.unstable_requestPaint,St=_.unstable_now,Lt=_.unstable_getCurrentPriorityLevel,jt=_.unstable_ImmediatePriority,Gt=_.unstable_UserBlockingPriority,At=_.unstable_NormalPriority,Nt=_.unstable_LowPriority,Ct=_.unstable_IdlePriority,bt=_.log,et=_.unstable_setDisableYieldValue,Re=null,je=null;function Ue(N){if(typeof bt=="function"&&et(N),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Re,N)}catch{}}var Ze=Math.clz32?Math.clz32:lt,nt=Math.log,wt=Math.LN2;function lt(N){return N>>>=0,N===0?32:31-(nt(N)/wt|0)|0}var Tt=256,Rt=262144,Mt=4194304;function $t(N){var I=N&42;if(I!==0)return I;switch(N&-N){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return N&261888;case 262144:case 524288:case 1048576:case 2097152:return N&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return N&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return N}}function yt(N,I,$){var H=N.pendingLanes;if(H===0)return 0;var Z=0,te=N.suspendedLanes,pe=N.pingedLanes;N=N.warmLanes;var Te=H&134217727;return Te!==0?(H=Te&~te,H!==0?Z=$t(H):(pe&=Te,pe!==0?Z=$t(pe):$||($=Te&~N,$!==0&&(Z=$t($))))):(Te=H&~te,Te!==0?Z=$t(Te):pe!==0?Z=$t(pe):$||($=H&~N,$!==0&&(Z=$t($)))),Z===0?0:I!==0&&I!==Z&&(I&te)===0&&(te=Z&-Z,$=I&-I,te>=$||te===32&&($&4194048)!==0)?I:Z}function vt(N,I){return(N.pendingLanes&~(N.suspendedLanes&~N.pingedLanes)&I)===0}function Ot(N,I){switch(N){case 1:case 2:case 4:case 8:case 64:return I+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return I+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var N=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),N}function sr(N){for(var I=[],$=0;31>$;$++)I.push(N);return I}function zt(N,I){N.pendingLanes|=I,I!==268435456&&(N.suspendedLanes=0,N.pingedLanes=0,N.warmLanes=0)}function ur(N,I,$,H,Z,te){var pe=N.pendingLanes;N.pendingLanes=$,N.suspendedLanes=0,N.pingedLanes=0,N.warmLanes=0,N.expiredLanes&=$,N.entangledLanes&=$,N.errorRecoveryDisabledLanes&=$,N.shellSuspendCounter=0;var Te=N.entanglements,Ie=N.expirationTimes,Ye=N.hiddenUpdates;for($=pe&~$;0<$;){var at=31-Ze($),ct=1<<at;Te[at]=0,Ie[at]=-1;var Je=Ye[at];if(Je!==null)for(Ye[at]=null,at=0;at<Je.length;at++){var rt=Je[at];rt!==null&&(rt.lane&=-536870913)}$&=~ct}H!==0&&hr(N,H,0),te!==0&&Z===0&&N.tag!==0&&(N.suspendedLanes|=te&~(pe&~I))}function hr(N,I,$){N.pendingLanes|=I,N.suspendedLanes&=~I;var H=31-Ze(I);N.entangledLanes|=I,N.entanglements[H]=N.entanglements[H]|1073741824|$&261930}function or(N,I){var $=N.entangledLanes|=I;for(N=N.entanglements;$;){var H=31-Ze($),Z=1<<H;Z&I|N[H]&I&&(N[H]|=I),$&=~Z}}function rr(N,I){var $=I&-I;return $=($&42)!==0?1:wr($),($&(N.suspendedLanes|I))!==0?0:$}function wr(N){switch(N){case 2:N=1;break;case 8:N=4;break;case 32:N=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:N=128;break;case 268435456:N=134217728;break;default:N=0}return N}function qr(N){return N&=-N,2<N?8<N?(N&134217727)!==0?32:268435456:8:2}function _r(){var N=ve.p;return N!==0?N:(N=window.event,N===void 0?32:wp(N.type))}function kn(N,I){var $=ve.p;try{return ve.p=N,I()}finally{ve.p=$}}var Fr=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Fr,zr="__reactProps$"+Fr,xn="__reactContainer$"+Fr,Kr="__reactEvents$"+Fr,Wr="__reactListeners$"+Fr,pn="__reactHandles$"+Fr,Ea="__reactResources$"+Fr,Xr="__reactMarker$"+Fr;function ti(N){delete N[Tr],delete N[zr],delete N[Kr],delete N[Wr],delete N[pn]}function wa(N){var I=N[Tr];if(I)return I;for(var $=N.parentNode;$;){if(I=$[xn]||$[Tr]){if($=I.alternate,I.child!==null||$!==null&&$.child!==null)for(N=sp(N);N!==null;){if($=N[Tr])return $;N=sp(N)}return I}N=$,$=N.parentNode}return null}function Ca(N){if(N=N[Tr]||N[xn]){var I=N.tag;if(I===5||I===6||I===13||I===31||I===26||I===27||I===3)return N}return null}function Ia(N){var I=N.tag;if(I===5||I===26||I===27||I===6)return N.stateNode;throw Error(R(33))}function Ra(N){var I=N[Ea];return I||(I=N[Ea]={hoistableStyles:new Map,hoistableScripts:new Map}),I}function Lr(N){N[Xr]=!0}var sa=new Set,no={};function _n(N,I){Xn(N,I),Xn(N+"Capture",I)}function Xn(N,I){for(no[N]=I,N=0;N<I.length;N++)sa.add(I[N])}var zn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oi={},Di={};function ao(N){return Et.call(Di,N)?!0:Et.call(Oi,N)?!1:zn.test(N)?Di[N]=!0:(Oi[N]=!0,!1)}function gn(N,I,$){if(ao(I))if($===null)N.removeAttribute(I);else{switch(typeof $){case"undefined":case"function":case"symbol":N.removeAttribute(I);return;case"boolean":var H=I.toLowerCase().slice(0,5);if(H!=="data-"&&H!=="aria-"){N.removeAttribute(I);return}}N.setAttribute(I,""+$)}}function la(N,I,$){if($===null)N.removeAttribute(I);else{switch(typeof $){case"undefined":case"function":case"symbol":case"boolean":N.removeAttribute(I);return}N.setAttribute(I,""+$)}}function Rn(N,I,$,H){if(H===null)N.removeAttribute($);else{switch(typeof H){case"undefined":case"function":case"symbol":case"boolean":N.removeAttribute($);return}N.setAttributeNS(I,$,""+H)}}function en(N){switch(typeof N){case"bigint":case"boolean":case"number":case"string":case"undefined":return N;case"object":return N;default:return""}}function Sn(N){var I=N.type;return(N=N.nodeName)&&N.toLowerCase()==="input"&&(I==="checkbox"||I==="radio")}function zo(N,I,$){var H=Object.getOwnPropertyDescriptor(N.constructor.prototype,I);if(!N.hasOwnProperty(I)&&typeof H<"u"&&typeof H.get=="function"&&typeof H.set=="function"){var Z=H.get,te=H.set;return Object.defineProperty(N,I,{configurable:!0,get:function(){return Z.call(this)},set:function(pe){$=""+pe,te.call(this,pe)}}),Object.defineProperty(N,I,{enumerable:H.enumerable}),{getValue:function(){return $},setValue:function(pe){$=""+pe},stopTracking:function(){N._valueTracker=null,delete N[I]}}}}function io(N){if(!N._valueTracker){var I=Sn(N)?"checked":"value";N._valueTracker=zo(N,I,""+N[I])}}function oo(N){if(!N)return!1;var I=N._valueTracker;if(!I)return!0;var $=I.getValue(),H="";return N&&(H=Sn(N)?N.checked?"true":"false":N.value),N=H,N!==$?(I.setValue(N),!0):!1}function so(N){if(N=N||(typeof document<"u"?document:void 0),typeof N>"u")return null;try{return N.activeElement||N.body}catch{return N.body}}var Tu=/[\n"\\]/g;function Mn(N){return N.replace(Tu,function(I){return"\\"+I.charCodeAt(0).toString(16)+" "})}function Vo(N,I,$,H,Z,te,pe,Te){N.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?N.type=pe:N.removeAttribute("type"),I!=null?pe==="number"?(I===0&&N.value===""||N.value!=I)&&(N.value=""+en(I)):N.value!==""+en(I)&&(N.value=""+en(I)):pe!=="submit"&&pe!=="reset"||N.removeAttribute("value"),I!=null?Ho(N,pe,en(I)):$!=null?Ho(N,pe,en($)):H!=null&&N.removeAttribute("value"),Z==null&&te!=null&&(N.defaultChecked=!!te),Z!=null&&(N.checked=Z&&typeof Z!="function"&&typeof Z!="symbol"),Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?N.name=""+en(Te):N.removeAttribute("name")}function lo(N,I,$,H,Z,te,pe,Te){if(te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(N.type=te),I!=null||$!=null){if(!(te!=="submit"&&te!=="reset"||I!=null)){io(N);return}$=$!=null?""+en($):"",I=I!=null?""+en(I):$,Te||I===N.value||(N.value=I),N.defaultValue=I}H=H??Z,H=typeof H!="function"&&typeof H!="symbol"&&!!H,N.checked=Te?N.checked:!!H,N.defaultChecked=!!H,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(N.name=pe),io(N)}function Ho(N,I,$){I==="number"&&so(N.ownerDocument)===N||N.defaultValue===""+$||(N.defaultValue=""+$)}function ri(N,I,$,H){if(N=N.options,I){I={};for(var Z=0;Z<$.length;Z++)I["$"+$[Z]]=!0;for($=0;$<N.length;$++)Z=I.hasOwnProperty("$"+N[$].value),N[$].selected!==Z&&(N[$].selected=Z),Z&&H&&(N[$].defaultSelected=!0)}else{for($=""+en($),I=null,Z=0;Z<N.length;Z++){if(N[Z].value===$){N[Z].selected=!0,H&&(N[Z].defaultSelected=!0);return}I!==null||N[Z].disabled||(I=N[Z])}I!==null&&(I.selected=!0)}}function el(N,I,$){if(I!=null&&(I=""+en(I),I!==N.value&&(N.value=I),$==null)){N.defaultValue!==I&&(N.defaultValue=I);return}N.defaultValue=$!=null?""+en($):""}function tl(N,I,$,H){if(I==null){if(H!=null){if($!=null)throw Error(R(92));if(we(H)){if(1<H.length)throw Error(R(93));H=H[0]}$=H}$==null&&($=""),I=$}$=en(I),N.defaultValue=$,H=N.textContent,H===$&&H!==""&&H!==null&&(N.value=H),io(N)}function ni(N,I){if(I){var $=N.firstChild;if($&&$===N.lastChild&&$.nodeType===3){$.nodeValue=I;return}}N.textContent=I}var Au=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(N,I,$){var H=I.indexOf("--")===0;$==null||typeof $=="boolean"||$===""?H?N.setProperty(I,""):I==="float"?N.cssFloat="":N[I]="":H?N.setProperty(I,$):typeof $!="number"||$===0||Au.has(I)?I==="float"?N.cssFloat=$:N[I]=(""+$).trim():N[I]=$+"px"}function nl(N,I,$){if(I!=null&&typeof I!="object")throw Error(R(62));if(N=N.style,$!=null){for(var H in $)!$.hasOwnProperty(H)||I!=null&&I.hasOwnProperty(H)||(H.indexOf("--")===0?N.setProperty(H,""):H==="float"?N.cssFloat="":N[H]="");for(var Z in I)H=I[Z],I.hasOwnProperty(Z)&&$[Z]!==H&&rl(N,Z,H)}else for(var te in I)I.hasOwnProperty(te)&&rl(N,te,I[te])}function Uo(N){if(N.indexOf("-")===-1)return!1;switch(N){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uo(N){return Mu.test(""+N)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":N}function ua(){}var Go=null;function Ko(N){return N=N.target||N.srcElement||window,N.correspondingUseElement&&(N=N.correspondingUseElement),N.nodeType===3?N.parentNode:N}var ca=null,ai=null;function al(N){var I=Ca(N);if(I&&(N=I.stateNode)){var $=N[zr]||null;e:switch(N=I.stateNode,I.type){case"input":if(Vo(N,$.value,$.defaultValue,$.defaultValue,$.checked,$.defaultChecked,$.type,$.name),I=$.name,$.type==="radio"&&I!=null){for($=N;$.parentNode;)$=$.parentNode;for($=$.querySelectorAll('input[name="'+Mn(""+I)+'"][type="radio"]'),I=0;I<$.length;I++){var H=$[I];if(H!==N&&H.form===N.form){var Z=H[zr]||null;if(!Z)throw Error(R(90));Vo(H,Z.value,Z.defaultValue,Z.defaultValue,Z.checked,Z.defaultChecked,Z.type,Z.name)}}for(I=0;I<$.length;I++)H=$[I],H.form===N.form&&oo(H)}break e;case"textarea":el(N,$.value,$.defaultValue);break e;case"select":I=$.value,I!=null&&ri(N,!!$.multiple,I,!1)}}}var Wo=!1;function il(N,I,$){if(Wo)return N(I,$);Wo=!0;try{var H=N(I);return H}finally{if(Wo=!1,(ca!==null||ai!==null)&&(iu(),ca&&(I=ca,N=ai,ai=ca=null,al(I),N)))for(I=0;I<N.length;I++)al(N[I])}}function Pi(N,I){var $=N.stateNode;if($===null)return null;var H=$[zr]||null;if(H===null)return null;$=H[I];e:switch(I){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(H=!H.disabled)||(N=N.type,H=!(N==="button"||N==="input"||N==="select"||N==="textarea")),N=!H;break e;default:N=!1}if(N)return null;if($&&typeof $!="function")throw Error(R(231,I,typeof $));return $}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=!1;if(fa)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Yo=!1}var Ta=null,Xo=null,co=null;function ol(){if(co)return co;var N,I=Xo,$=I.length,H,Z="value"in Ta?Ta.value:Ta.textContent,te=Z.length;for(N=0;N<$&&I[N]===Z[N];N++);var pe=$-N;for(H=1;H<=pe&&I[$-H]===Z[te-H];H++);return co=Z.slice(N,1<H?1-H:void 0)}function fo(N){var I=N.keyCode;return"charCode"in N?(N=N.charCode,N===0&&I===13&&(N=13)):N=I,N===10&&(N=13),32<=N||N===13?N:0}function ho(){return!0}function sl(){return!1}function En(N){function I($,H,Z,te,pe){this._reactName=$,this._targetInst=Z,this.type=H,this.nativeEvent=te,this.target=pe,this.currentTarget=null;for(var Te in N)N.hasOwnProperty(Te)&&($=N[Te],this[Te]=$?$(te):te[Te]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?ho:sl,this.isPropagationStopped=sl,this}return q(I.prototype,{preventDefault:function(){this.defaultPrevented=!0;var $=this.nativeEvent;$&&($.preventDefault?$.preventDefault():typeof $.returnValue!="unknown"&&($.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var $=this.nativeEvent;$&&($.stopPropagation?$.stopPropagation():typeof $.cancelBubble!="unknown"&&($.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),I}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(N){return N.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=En(Ba),Li=q({},Ba,{view:0,detail:0}),Ou=En(Li),Qo,Zo,qi,go=q({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rs,button:0,buttons:0,relatedTarget:function(N){return N.relatedTarget===void 0?N.fromElement===N.srcElement?N.toElement:N.fromElement:N.relatedTarget},movementX:function(N){return"movementX"in N?N.movementX:(N!==qi&&(qi&&N.type==="mousemove"?(Qo=N.screenX-qi.screenX,Zo=N.screenY-qi.screenY):Zo=Qo=0,qi=N),Qo)},movementY:function(N){return"movementY"in N?N.movementY:Zo}}),ll=En(go),Du=q({},go,{dataTransfer:0}),Pu=En(Du),Nu=q({},Li,{relatedTarget:0}),Jo=En(Nu),Lu=q({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=En(Lu),Iu=q({},Ba,{clipboardData:function(N){return"clipboardData"in N?N.clipboardData:window.clipboardData}}),Bu=En(Iu),$u=q({},Ba,{data:0}),ul=En($u),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(N){var I=this.nativeEvent;return I.getModifierState?I.getModifierState(N):(N=zu[N])?!!I[N]:!1}function rs(){return Vu}var Hu=q({},Li,{key:function(N){if(N.key){var I=Fu[N.key]||N.key;if(I!=="Unidentified")return I}return N.type==="keypress"?(N=fo(N),N===13?"Enter":String.fromCharCode(N)):N.type==="keydown"||N.type==="keyup"?ju[N.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rs,charCode:function(N){return N.type==="keypress"?fo(N):0},keyCode:function(N){return N.type==="keydown"||N.type==="keyup"?N.keyCode:0},which:function(N){return N.type==="keypress"?fo(N):N.type==="keydown"||N.type==="keyup"?N.keyCode:0}}),Uu=En(Hu),Gu=q({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=En(Gu),Ku=q({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rs}),Wu=En(Ku),Yu=q({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xu=En(Yu),Qu=q({},go,{deltaX:function(N){return"deltaX"in N?N.deltaX:"wheelDeltaX"in N?-N.wheelDeltaX:0},deltaY:function(N){return"deltaY"in N?N.deltaY:"wheelDeltaY"in N?-N.wheelDeltaY:"wheelDelta"in N?-N.wheelDelta:0},deltaZ:0,deltaMode:0}),Zu=En(Qu),Ju=q({},Ba,{newState:0,oldState:0}),ec=En(Ju),tc=[9,13,27,32],ns=fa&&"CompositionEvent"in window,Ii=null;fa&&"documentMode"in document&&(Ii=document.documentMode);var rc=fa&&"TextEvent"in window&&!Ii,fl=fa&&(!ns||Ii&&8<Ii&&11>=Ii),dl=" ",hl=!1;function pl(N,I){switch(N){case"keyup":return tc.indexOf(I.keyCode)!==-1;case"keydown":return I.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gl(N){return N=N.detail,typeof N=="object"&&"data"in N?N.data:null}var ii=!1;function le(N,I){switch(N){case"compositionend":return gl(I);case"keypress":return I.which!==32?null:(hl=!0,dl);case"textInput":return N=I.data,N===dl&&hl?null:N;default:return null}}function kt(N,I){if(ii)return N==="compositionend"||!ns&&pl(N,I)?(N=ol(),co=Xo=Ta=null,ii=!1,N):null;switch(N){case"paste":return null;case"keypress":if(!(I.ctrlKey||I.altKey||I.metaKey)||I.ctrlKey&&I.altKey){if(I.char&&1<I.char.length)return I.char;if(I.which)return String.fromCharCode(I.which)}return null;case"compositionend":return fl&&I.locale!=="ko"?null:I.data;default:return null}}var oi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(N){var I=N&&N.nodeName&&N.nodeName.toLowerCase();return I==="input"?!!oi[N.type]:I==="textarea"}function Bi(N,I,$,H){ca?ai?ai.push(H):ai=[H]:ca=H,I=du(I,"onChange"),0<I.length&&($=new po("onChange","change",null,$,H),N.push({event:$,listeners:I}))}var He=null,da=null;function nc(N){Kh(N,0)}function Xt(N){var I=Ia(N);if(oo(I))return N}function Aa(N,I){if(N==="change")return I}var $i=!1;if(fa){var Ut;if(fa){var Mr="oninput"in document;if(!Mr){var ml=document.createElement("div");ml.setAttribute("oninput","return;"),Mr=typeof ml.oninput=="function"}Ut=Mr}else Ut=!1;$i=Ut&&(!document.documentMode||9<document.documentMode)}function vl(){He&&(He.detachEvent("onpropertychange",ha),da=He=null)}function ha(N){if(N.propertyName==="value"&&Xt(da)){var I=[];Bi(I,da,N,Ko(N)),il(nc,I)}}function yl(N,I,$){N==="focusin"?(vl(),He=I,da=$,He.attachEvent("onpropertychange",ha)):N==="focusout"&&vl()}function mo(N){if(N==="selectionchange"||N==="keyup"||N==="keydown")return Xt(da)}function ot(N,I){if(N==="click")return Xt(I)}function ac(N,I){if(N==="input"||N==="change")return Xt(I)}function ic(N,I){return N===I&&(N!==0||1/N===1/I)||N!==N&&I!==I}var wn=typeof Object.is=="function"?Object.is:ic;function Fi(N,I){if(wn(N,I))return!0;if(typeof N!="object"||N===null||typeof I!="object"||I===null)return!1;var $=Object.keys(N),H=Object.keys(I);if($.length!==H.length)return!1;for(H=0;H<$.length;H++){var Z=$[H];if(!Et.call(I,Z)||!wn(N[Z],I[Z]))return!1}return!0}function bl(N){for(;N&&N.firstChild;)N=N.firstChild;return N}function xl(N,I){var $=bl(N);N=0;for(var H;$;){if($.nodeType===3){if(H=N+$.textContent.length,N<=I&&H>=I)return{node:$,offset:I-N};N=H}e:{for(;$;){if($.nextSibling){$=$.nextSibling;break e}$=$.parentNode}$=void 0}$=bl($)}}function as(N,I){return N&&I?N===I?!0:N&&N.nodeType===3?!1:I&&I.nodeType===3?as(N,I.parentNode):"contains"in N?N.contains(I):N.compareDocumentPosition?!!(N.compareDocumentPosition(I)&16):!1:!1}function is(N){N=N!=null&&N.ownerDocument!=null&&N.ownerDocument.defaultView!=null?N.ownerDocument.defaultView:window;for(var I=so(N.document);I instanceof N.HTMLIFrameElement;){try{var $=typeof I.contentWindow.location.href=="string"}catch{$=!1}if($)N=I.contentWindow;else break;I=so(N.document)}return I}function os(N){var I=N&&N.nodeName&&N.nodeName.toLowerCase();return I&&(I==="input"&&(N.type==="text"||N.type==="search"||N.type==="tel"||N.type==="url"||N.type==="password")||I==="textarea"||N.contentEditable==="true")}var oc=fa&&"documentMode"in document&&11>=document.documentMode,$a=null,vo=null,ji=null,ss=!1;function ls(N,I,$){var H=$.window===$?$.document:$.nodeType===9?$:$.ownerDocument;ss||$a==null||$a!==so(H)||(H=$a,"selectionStart"in H&&os(H)?H={start:H.selectionStart,end:H.selectionEnd}:(H=(H.ownerDocument&&H.ownerDocument.defaultView||window).getSelection(),H={anchorNode:H.anchorNode,anchorOffset:H.anchorOffset,focusNode:H.focusNode,focusOffset:H.focusOffset}),ji&&Fi(ji,H)||(ji=H,H=du(vo,"onSelect"),0<H.length&&(I=new po("onSelect","select",null,I,$),N.push({event:I,listeners:H}),I.target=$a)))}function ka(N,I){var $={};return $[N.toLowerCase()]=I.toLowerCase(),$["Webkit"+N]="webkit"+I,$["Moz"+N]="moz"+I,$}var pa={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},us={},Sl={};fa&&(Sl=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Fa(N){if(us[N])return us[N];if(!pa[N])return N;var I=pa[N],$;for($ in I)if(I.hasOwnProperty($)&&$ in Sl)return us[N]=I[$];return N}var El=Fa("animationend"),cs=Fa("animationiteration"),yo=Fa("animationstart"),fs=Fa("transitionrun"),sc=Fa("transitionstart"),ds=Fa("transitioncancel"),wl=Fa("transitionend"),hs=new Map,zi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zi.push("scrollEnd");function Vn(N,I){hs.set(N,I),_n(I,[N])}var Vi=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Dn=[],si=0,ps=0;function li(){for(var N=si,I=ps=si=0;I<N;){var $=Dn[I];Dn[I++]=null;var H=Dn[I];Dn[I++]=null;var Z=Dn[I];Dn[I++]=null;var te=Dn[I];if(Dn[I++]=null,H!==null&&Z!==null){var pe=H.pending;pe===null?Z.next=Z:(Z.next=pe.next,pe.next=Z),H.pending=Z}te!==0&&Cl($,Z,te)}}function ui(N,I,$,H){Dn[si++]=N,Dn[si++]=I,Dn[si++]=$,Dn[si++]=H,ps|=H,N.lanes|=H,N=N.alternate,N!==null&&(N.lanes|=H)}function gs(N,I,$,H){return ui(N,I,$,H),dn(N)}function ja(N,I){return ui(N,null,null,I),dn(N)}function Cl(N,I,$){N.lanes|=$;var H=N.alternate;H!==null&&(H.lanes|=$);for(var Z=!1,te=N.return;te!==null;)te.childLanes|=$,H=te.alternate,H!==null&&(H.childLanes|=$),te.tag===22&&(N=te.stateNode,N===null||N._visibility&1||(Z=!0)),N=te,te=te.return;return N.tag===3?(te=N.stateNode,Z&&I!==null&&(Z=31-Ze($),N=te.hiddenUpdates,H=N[Z],H===null?N[Z]=[I]:H.push(I),I.lane=$|536870912),te):null}function dn(N){if(50<js)throw js=0,sf=null,Error(R(185));for(var I=N.return;I!==null;)N=I,I=N.return;return N.tag===3?N.stateNode:null}var ci={};function lc(N,I,$,H){this.tag=N,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=I,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=H,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(N,I,$,H){return new lc(N,I,$,H)}function za(N){return N=N.prototype,!(!N||!N.isReactComponent)}function Pn(N,I){var $=N.alternate;return $===null?($=mn(N.tag,I,N.key,N.mode),$.elementType=N.elementType,$.type=N.type,$.stateNode=N.stateNode,$.alternate=N,N.alternate=$):($.pendingProps=I,$.type=N.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=N.flags&65011712,$.childLanes=N.childLanes,$.lanes=N.lanes,$.child=N.child,$.memoizedProps=N.memoizedProps,$.memoizedState=N.memoizedState,$.updateQueue=N.updateQueue,I=N.dependencies,$.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext},$.sibling=N.sibling,$.index=N.index,$.ref=N.ref,$.refCleanup=N.refCleanup,$}function vs(N,I){N.flags&=65011714;var $=N.alternate;return $===null?(N.childLanes=0,N.lanes=I,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=$.childLanes,N.lanes=$.lanes,N.child=$.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=$.memoizedProps,N.memoizedState=$.memoizedState,N.updateQueue=$.updateQueue,N.type=$.type,I=$.dependencies,N.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),N}function bo(N,I,$,H,Z,te){var pe=0;if(H=N,typeof N=="function")za(N)&&(pe=1);else if(typeof N=="string")pe=Dg(N,$,Se.current)?26:N==="html"||N==="head"||N==="body"?27:5;else e:switch(N){case ae:return N=mn(31,$,I,Z),N.elementType=ae,N.lanes=te,N;case z:return Ma($.children,Z,te,I);case V:pe=8,Z|=24;break;case G:return N=mn(12,$,I,Z|2),N.elementType=G,N.lanes=te,N;case ee:return N=mn(13,$,I,Z),N.elementType=ee,N.lanes=te,N;case re:return N=mn(19,$,I,Z),N.elementType=re,N.lanes=te,N;default:if(typeof N=="object"&&N!==null)switch(N.$$typeof){case Y:pe=10;break e;case W:pe=9;break e;case X:pe=11;break e;case Q:pe=14;break e;case ne:pe=16,H=null;break e}pe=29,$=Error(R(130,N===null?"null":typeof N,"")),H=null}return I=mn(pe,$,I,Z),I.elementType=N,I.type=H,I.lanes=te,I}function Ma(N,I,$,H){return N=mn(7,N,H,I),N.lanes=$,N}function xo(N,I,$){return N=mn(6,N,null,I),N.lanes=$,N}function ga(N){var I=mn(18,null,null,0);return I.stateNode=N,I}function ys(N,I,$){return I=mn(4,N.children!==null?N.children:[],N.key,I),I.lanes=$,I.stateNode={containerInfo:N.containerInfo,pendingChildren:null,implementation:N.implementation},I}var bs=new WeakMap;function Nn(N,I){if(typeof N=="object"&&N!==null){var $=bs.get(N);return $!==void 0?$:(I={value:N,source:I,stack:We(I)},bs.set(N,I),I)}return{value:N,source:I,stack:We(I)}}var Qn=[],Va=0,Hi=null,Ui=0,Tn=[],Ln=0,Oa=null,Zn=1,Jn="";function ma(N,I){Qn[Va++]=Ui,Qn[Va++]=Hi,Hi=N,Ui=I}function Gi(N,I,$){Tn[Ln++]=Zn,Tn[Ln++]=Jn,Tn[Ln++]=Oa,Oa=N;var H=Zn;N=Jn;var Z=32-Ze(H)-1;H&=~(1<<Z),$+=1;var te=32-Ze(I)+Z;if(30<te){var pe=Z-Z%5;te=(H&(1<<pe)-1).toString(32),H>>=pe,Z-=pe,Zn=1<<32-Ze(I)+Z|$<<Z|H,Jn=te+N}else Zn=1<<te|$<<Z|H,Jn=N}function Ki(N){N.return!==null&&(ma(N,1),Gi(N,1,0))}function xs(N){for(;N===Hi;)Hi=Qn[--Va],Qn[Va]=null,Ui=Qn[--Va],Qn[Va]=null;for(;N===Oa;)Oa=Tn[--Ln],Tn[Ln]=null,Jn=Tn[--Ln],Tn[Ln]=null,Zn=Tn[--Ln],Tn[Ln]=null}function _l(N,I){Tn[Ln++]=Zn,Tn[Ln++]=Jn,Tn[Ln++]=Oa,Zn=I.id,Jn=I.overflow,Oa=N}var nn=null,vr=null,Qt=!1,ra=null,Cn=!1,Ss=Error(R(519));function va(N){var I=Error(R(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qn(Nn(I,N)),Ss}function Rl(N){var I=N.stateNode,$=N.type,H=N.memoizedProps;switch(I[Tr]=N,I[zr]=H,$){case"dialog":er("cancel",I),er("close",I);break;case"iframe":case"object":case"embed":er("load",I);break;case"video":case"audio":for($=0;$<Vs.length;$++)er(Vs[$],I);break;case"source":er("error",I);break;case"img":case"image":case"link":er("error",I),er("load",I);break;case"details":er("toggle",I);break;case"input":er("invalid",I),lo(I,H.value,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name,!0);break;case"select":er("invalid",I);break;case"textarea":er("invalid",I),tl(I,H.value,H.defaultValue,H.children)}$=H.children,typeof $!="string"&&typeof $!="number"&&typeof $!="bigint"||I.textContent===""+$||H.suppressHydrationWarning===!0||Qh(I.textContent,$)?(H.popover!=null&&(er("beforetoggle",I),er("toggle",I)),H.onScroll!=null&&er("scroll",I),H.onScrollEnd!=null&&er("scrollend",I),H.onClick!=null&&(I.onclick=ua),I=!0):I=!1,I||va(N,!0)}function Tl(N){for(nn=N.return;nn;)switch(nn.tag){case 5:case 31:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:nn=nn.return}}function fi(N){if(N!==nn)return!1;if(!Qt)return Tl(N),Qt=!0,!1;var I=N.tag,$;if(($=I!==3&&I!==27)&&(($=I===5)&&($=N.type,$=!($!=="form"&&$!=="button")||Ef(N.type,N.memoizedProps)),$=!$),$&&vr&&va(N),Tl(N),I===13){if(N=N.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(R(317));vr=op(N)}else if(I===31){if(N=N.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(R(317));vr=op(N)}else I===27?(I=vr,_i(N.type)?(N=Tf,Tf=null,vr=N):vr=I):vr=nn?ia(N.stateNode.nextSibling):null;return!0}function Da(){vr=nn=null,Qt=!1}function di(){var N=ra;return N!==null&&(Fn===null?Fn=N:Fn.push.apply(Fn,N),ra=null),N}function qn(N){ra===null?ra=[N]:ra.push(N)}var Es=fe(null),Hn=null,ya=null;function na(N,I,$){Ae(Es,I._currentValue),I._currentValue=$}function ba(N){N._currentValue=Es.current,xe(Es)}function qt(N,I,$){for(;N!==null;){var H=N.alternate;if((N.childLanes&I)!==I?(N.childLanes|=I,H!==null&&(H.childLanes|=I)):H!==null&&(H.childLanes&I)!==I&&(H.childLanes|=I),N===$)break;N=N.return}}function ws(N,I,$,H){var Z=N.child;for(Z!==null&&(Z.return=N);Z!==null;){var te=Z.dependencies;if(te!==null){var pe=Z.child;te=te.firstContext;e:for(;te!==null;){var Te=te;te=Z;for(var Ie=0;Ie<I.length;Ie++)if(Te.context===I[Ie]){te.lanes|=$,Te=te.alternate,Te!==null&&(Te.lanes|=$),qt(te.return,$,N),H||(pe=null);break e}te=Te.next}}else if(Z.tag===18){if(pe=Z.return,pe===null)throw Error(R(341));pe.lanes|=$,te=pe.alternate,te!==null&&(te.lanes|=$),qt(pe,$,N),pe=null}else pe=Z.child;if(pe!==null)pe.return=Z;else for(pe=Z;pe!==null;){if(pe===N){pe=null;break}if(Z=pe.sibling,Z!==null){Z.return=pe.return,pe=Z;break}pe=pe.return}Z=pe}}function Pa(N,I,$,H){N=null;for(var Z=I,te=!1;Z!==null;){if(!te){if((Z.flags&524288)!==0)te=!0;else if((Z.flags&262144)!==0)break}if(Z.tag===10){var pe=Z.alternate;if(pe===null)throw Error(R(387));if(pe=pe.memoizedProps,pe!==null){var Te=Z.type;wn(Z.pendingProps.value,pe.value)||(N!==null?N.push(Te):N=[Te])}}else if(Z===Ce.current){if(pe=Z.alternate,pe===null)throw Error(R(387));pe.memoizedState.memoizedState!==Z.memoizedState.memoizedState&&(N!==null?N.push(Ys):N=[Ys])}Z=Z.return}N!==null&&ws(I,N,$,H),I.flags|=262144}function So(N){for(N=N.firstContext;N!==null;){if(!wn(N.context._currentValue,N.memoizedValue))return!0;N=N.next}return!1}function Na(N){Hn=N,ya=null,N=N.dependencies,N!==null&&(N.firstContext=null)}function Vr(N){return J(Hn,N)}function Wi(N,I){return Hn===null&&Na(N),J(N,I)}function J(N,I){var $=I._currentValue;if(I={context:I,memoizedValue:$,next:null},ya===null){if(N===null)throw Error(R(308));ya=I,N.dependencies={lanes:0,firstContext:I},N.flags|=524288}else ya=ya.next=I;return $}var ue=typeof AbortController<"u"?AbortController:function(){var N=[],I=this.signal={aborted:!1,addEventListener:function($,H){N.push(H)}};this.abort=function(){I.aborted=!0,N.forEach(function($){return $()})}},Ee=_.unstable_scheduleCallback,_e=_.unstable_NormalPriority,qe={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xe(){return{controller:new ue,data:new Map,refCount:0}}function Vt(N){N.refCount--,N.refCount===0&&Ee(_e,function(){N.controller.abort()})}var Dr=null,uc=0,Eo=0,wo=null;function Op(N,I){if(Dr===null){var $=Dr=[];uc=0,Eo=hf(),wo={status:"pending",value:void 0,then:function(H){$.push(H)}}}return uc++,I.then(If,If),I}function If(){if(--uc===0&&Dr!==null){wo!==null&&(wo.status="fulfilled");var N=Dr;Dr=null,Eo=0,wo=null;for(var I=0;I<N.length;I++)(0,N[I])()}}function Dp(N,I){var $=[],H={status:"pending",value:null,reason:null,then:function(Z){$.push(Z)}};return N.then(function(){H.status="fulfilled",H.value=I;for(var Z=0;Z<$.length;Z++)(0,$[Z])(I)},function(Z){for(H.status="rejected",H.reason=Z,Z=0;Z<$.length;Z++)(0,$[Z])(void 0)}),H}var Bf=ge.S;ge.S=function(N,I){Sh=St(),typeof I=="object"&&I!==null&&typeof I.then=="function"&&Op(N,I),Bf!==null&&Bf(N,I)};var Yi=fe(null);function cc(){var N=Yi.current;return N!==null?N:Cr.pooledCache}function Al(N,I){I===null?Ae(Yi,Yi.current):Ae(Yi,I.pool)}function $f(){var N=cc();return N===null?null:{parent:qe._currentValue,pool:N}}var Co=Error(R(460)),fc=Error(R(474)),kl=Error(R(542)),Ml={then:function(){}};function Ff(N){return N=N.status,N==="fulfilled"||N==="rejected"}function jf(N,I,$){switch($=N[$],$===void 0?N.push(I):$!==I&&(I.then(ua,ua),I=$),I.status){case"fulfilled":return I.value;case"rejected":throw N=I.reason,Vf(N),N;default:if(typeof I.status=="string")I.then(ua,ua);else{if(N=Cr,N!==null&&100<N.shellSuspendCounter)throw Error(R(482));N=I,N.status="pending",N.then(function(H){if(I.status==="pending"){var Z=I;Z.status="fulfilled",Z.value=H}},function(H){if(I.status==="pending"){var Z=I;Z.status="rejected",Z.reason=H}})}switch(I.status){case"fulfilled":return I.value;case"rejected":throw N=I.reason,Vf(N),N}throw Qi=I,Co}}function Xi(N){try{var I=N._init;return I(N._payload)}catch($){throw $!==null&&typeof $=="object"&&typeof $.then=="function"?(Qi=$,Co):$}}var Qi=null;function zf(){if(Qi===null)throw Error(R(459));var N=Qi;return Qi=null,N}function Vf(N){if(N===Co||N===kl)throw Error(R(483))}var _o=null,Cs=0;function Ol(N){var I=Cs;return Cs+=1,_o===null&&(_o=[]),jf(_o,N,I)}function _s(N,I){I=I.props.ref,N.ref=I!==void 0?I:null}function Dl(N,I){throw I.$$typeof===B?Error(R(525)):(N=Object.prototype.toString.call(I),Error(R(31,N==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":N)))}function Hf(N){function I(ze,Fe){if(N){var Ge=ze.deletions;Ge===null?(ze.deletions=[Fe],ze.flags|=16):Ge.push(Fe)}}function $(ze,Fe){if(!N)return null;for(;Fe!==null;)I(ze,Fe),Fe=Fe.sibling;return null}function H(ze){for(var Fe=new Map;ze!==null;)ze.key!==null?Fe.set(ze.key,ze):Fe.set(ze.index,ze),ze=ze.sibling;return Fe}function Z(ze,Fe){return ze=Pn(ze,Fe),ze.index=0,ze.sibling=null,ze}function te(ze,Fe,Ge){return ze.index=Ge,N?(Ge=ze.alternate,Ge!==null?(Ge=Ge.index,Ge<Fe?(ze.flags|=67108866,Fe):Ge):(ze.flags|=67108866,Fe)):(ze.flags|=1048576,Fe)}function pe(ze){return N&&ze.alternate===null&&(ze.flags|=67108866),ze}function Te(ze,Fe,Ge,ut){return Fe===null||Fe.tag!==6?(Fe=xo(Ge,ze.mode,ut),Fe.return=ze,Fe):(Fe=Z(Fe,Ge),Fe.return=ze,Fe)}function Ie(ze,Fe,Ge,ut){var Bt=Ge.type;return Bt===z?at(ze,Fe,Ge.props.children,ut,Ge.key):Fe!==null&&(Fe.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ne&&Xi(Bt)===Fe.type)?(Fe=Z(Fe,Ge.props),_s(Fe,Ge),Fe.return=ze,Fe):(Fe=bo(Ge.type,Ge.key,Ge.props,null,ze.mode,ut),_s(Fe,Ge),Fe.return=ze,Fe)}function Ye(ze,Fe,Ge,ut){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Ge.containerInfo||Fe.stateNode.implementation!==Ge.implementation?(Fe=ys(Ge,ze.mode,ut),Fe.return=ze,Fe):(Fe=Z(Fe,Ge.children||[]),Fe.return=ze,Fe)}function at(ze,Fe,Ge,ut,Bt){return Fe===null||Fe.tag!==7?(Fe=Ma(Ge,ze.mode,ut,Bt),Fe.return=ze,Fe):(Fe=Z(Fe,Ge),Fe.return=ze,Fe)}function ct(ze,Fe,Ge){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=xo(""+Fe,ze.mode,Ge),Fe.return=ze,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case F:return Ge=bo(Fe.type,Fe.key,Fe.props,null,ze.mode,Ge),_s(Ge,Fe),Ge.return=ze,Ge;case j:return Fe=ys(Fe,ze.mode,Ge),Fe.return=ze,Fe;case ne:return Fe=Xi(Fe),ct(ze,Fe,Ge)}if(we(Fe)||ce(Fe))return Fe=Ma(Fe,ze.mode,Ge,null),Fe.return=ze,Fe;if(typeof Fe.then=="function")return ct(ze,Ol(Fe),Ge);if(Fe.$$typeof===Y)return ct(ze,Wi(ze,Fe),Ge);Dl(ze,Fe)}return null}function Je(ze,Fe,Ge,ut){var Bt=Fe!==null?Fe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Bt!==null?null:Te(ze,Fe,""+Ge,ut);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case F:return Ge.key===Bt?Ie(ze,Fe,Ge,ut):null;case j:return Ge.key===Bt?Ye(ze,Fe,Ge,ut):null;case ne:return Ge=Xi(Ge),Je(ze,Fe,Ge,ut)}if(we(Ge)||ce(Ge))return Bt!==null?null:at(ze,Fe,Ge,ut,null);if(typeof Ge.then=="function")return Je(ze,Fe,Ol(Ge),ut);if(Ge.$$typeof===Y)return Je(ze,Fe,Wi(ze,Ge),ut);Dl(ze,Ge)}return null}function rt(ze,Fe,Ge,ut,Bt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return ze=ze.get(Ge)||null,Te(Fe,ze,""+ut,Bt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case F:return ze=ze.get(ut.key===null?Ge:ut.key)||null,Ie(Fe,ze,ut,Bt);case j:return ze=ze.get(ut.key===null?Ge:ut.key)||null,Ye(Fe,ze,ut,Bt);case ne:return ut=Xi(ut),rt(ze,Fe,Ge,ut,Bt)}if(we(ut)||ce(ut))return ze=ze.get(Ge)||null,at(Fe,ze,ut,Bt,null);if(typeof ut.then=="function")return rt(ze,Fe,Ge,Ol(ut),Bt);if(ut.$$typeof===Y)return rt(ze,Fe,Ge,Wi(Fe,ut),Bt);Dl(Fe,ut)}return null}function Dt(ze,Fe,Ge,ut){for(var Bt=null,cr=null,Pt=Fe,Yt=Fe=0,ar=null;Pt!==null&&Yt<Ge.length;Yt++){Pt.index>Yt?(ar=Pt,Pt=null):ar=Pt.sibling;var fr=Je(ze,Pt,Ge[Yt],ut);if(fr===null){Pt===null&&(Pt=ar);break}N&&Pt&&fr.alternate===null&&I(ze,Pt),Fe=te(fr,Fe,Yt),cr===null?Bt=fr:cr.sibling=fr,cr=fr,Pt=ar}if(Yt===Ge.length)return $(ze,Pt),Qt&&ma(ze,Yt),Bt;if(Pt===null){for(;Yt<Ge.length;Yt++)Pt=ct(ze,Ge[Yt],ut),Pt!==null&&(Fe=te(Pt,Fe,Yt),cr===null?Bt=Pt:cr.sibling=Pt,cr=Pt);return Qt&&ma(ze,Yt),Bt}for(Pt=H(Pt);Yt<Ge.length;Yt++)ar=rt(Pt,ze,Yt,Ge[Yt],ut),ar!==null&&(N&&ar.alternate!==null&&Pt.delete(ar.key===null?Yt:ar.key),Fe=te(ar,Fe,Yt),cr===null?Bt=ar:cr.sibling=ar,cr=ar);return N&&Pt.forEach(function(Mi){return I(ze,Mi)}),Qt&&ma(ze,Yt),Bt}function Ft(ze,Fe,Ge,ut){if(Ge==null)throw Error(R(151));for(var Bt=null,cr=null,Pt=Fe,Yt=Fe=0,ar=null,fr=Ge.next();Pt!==null&&!fr.done;Yt++,fr=Ge.next()){Pt.index>Yt?(ar=Pt,Pt=null):ar=Pt.sibling;var Mi=Je(ze,Pt,fr.value,ut);if(Mi===null){Pt===null&&(Pt=ar);break}N&&Pt&&Mi.alternate===null&&I(ze,Pt),Fe=te(Mi,Fe,Yt),cr===null?Bt=Mi:cr.sibling=Mi,cr=Mi,Pt=ar}if(fr.done)return $(ze,Pt),Qt&&ma(ze,Yt),Bt;if(Pt===null){for(;!fr.done;Yt++,fr=Ge.next())fr=ct(ze,fr.value,ut),fr!==null&&(Fe=te(fr,Fe,Yt),cr===null?Bt=fr:cr.sibling=fr,cr=fr);return Qt&&ma(ze,Yt),Bt}for(Pt=H(Pt);!fr.done;Yt++,fr=Ge.next())fr=rt(Pt,ze,Yt,fr.value,ut),fr!==null&&(N&&fr.alternate!==null&&Pt.delete(fr.key===null?Yt:fr.key),Fe=te(fr,Fe,Yt),cr===null?Bt=fr:cr.sibling=fr,cr=fr);return N&&Pt.forEach(function(Vg){return I(ze,Vg)}),Qt&&ma(ze,Yt),Bt}function Er(ze,Fe,Ge,ut){if(typeof Ge=="object"&&Ge!==null&&Ge.type===z&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case F:e:{for(var Bt=Ge.key;Fe!==null;){if(Fe.key===Bt){if(Bt=Ge.type,Bt===z){if(Fe.tag===7){$(ze,Fe.sibling),ut=Z(Fe,Ge.props.children),ut.return=ze,ze=ut;break e}}else if(Fe.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ne&&Xi(Bt)===Fe.type){$(ze,Fe.sibling),ut=Z(Fe,Ge.props),_s(ut,Ge),ut.return=ze,ze=ut;break e}$(ze,Fe);break}else I(ze,Fe);Fe=Fe.sibling}Ge.type===z?(ut=Ma(Ge.props.children,ze.mode,ut,Ge.key),ut.return=ze,ze=ut):(ut=bo(Ge.type,Ge.key,Ge.props,null,ze.mode,ut),_s(ut,Ge),ut.return=ze,ze=ut)}return pe(ze);case j:e:{for(Bt=Ge.key;Fe!==null;){if(Fe.key===Bt)if(Fe.tag===4&&Fe.stateNode.containerInfo===Ge.containerInfo&&Fe.stateNode.implementation===Ge.implementation){$(ze,Fe.sibling),ut=Z(Fe,Ge.children||[]),ut.return=ze,ze=ut;break e}else{$(ze,Fe);break}else I(ze,Fe);Fe=Fe.sibling}ut=ys(Ge,ze.mode,ut),ut.return=ze,ze=ut}return pe(ze);case ne:return Ge=Xi(Ge),Er(ze,Fe,Ge,ut)}if(we(Ge))return Dt(ze,Fe,Ge,ut);if(ce(Ge)){if(Bt=ce(Ge),typeof Bt!="function")throw Error(R(150));return Ge=Bt.call(Ge),Ft(ze,Fe,Ge,ut)}if(typeof Ge.then=="function")return Er(ze,Fe,Ol(Ge),ut);if(Ge.$$typeof===Y)return Er(ze,Fe,Wi(ze,Ge),ut);Dl(ze,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Fe!==null&&Fe.tag===6?($(ze,Fe.sibling),ut=Z(Fe,Ge),ut.return=ze,ze=ut):($(ze,Fe),ut=xo(Ge,ze.mode,ut),ut.return=ze,ze=ut),pe(ze)):$(ze,Fe)}return function(ze,Fe,Ge,ut){try{Cs=0;var Bt=Er(ze,Fe,Ge,ut);return _o=null,Bt}catch(Pt){if(Pt===Co||Pt===kl)throw Pt;var cr=mn(29,Pt,null,ze.mode);return cr.lanes=ut,cr.return=ze,cr}finally{}}}var Zi=Hf(!0),Uf=Hf(!1),hi=!1;function dc(N){N.updateQueue={baseState:N.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hc(N,I){N=N.updateQueue,I.updateQueue===N&&(I.updateQueue={baseState:N.baseState,firstBaseUpdate:N.firstBaseUpdate,lastBaseUpdate:N.lastBaseUpdate,shared:N.shared,callbacks:null})}function pi(N){return{lane:N,tag:0,payload:null,callback:null,next:null}}function gi(N,I,$){var H=N.updateQueue;if(H===null)return null;if(H=H.shared,(dr&2)!==0){var Z=H.pending;return Z===null?I.next=I:(I.next=Z.next,Z.next=I),H.pending=I,I=dn(N),Cl(N,null,$),I}return ui(N,H,I,$),dn(N)}function Rs(N,I,$){if(I=I.updateQueue,I!==null&&(I=I.shared,($&4194048)!==0)){var H=I.lanes;H&=N.pendingLanes,$|=H,I.lanes=$,or(N,$)}}function pc(N,I){var $=N.updateQueue,H=N.alternate;if(H!==null&&(H=H.updateQueue,$===H)){var Z=null,te=null;if($=$.firstBaseUpdate,$!==null){do{var pe={lane:$.lane,tag:$.tag,payload:$.payload,callback:null,next:null};te===null?Z=te=pe:te=te.next=pe,$=$.next}while($!==null);te===null?Z=te=I:te=te.next=I}else Z=te=I;$={baseState:H.baseState,firstBaseUpdate:Z,lastBaseUpdate:te,shared:H.shared,callbacks:H.callbacks},N.updateQueue=$;return}N=$.lastBaseUpdate,N===null?$.firstBaseUpdate=I:N.next=I,$.lastBaseUpdate=I}var gc=!1;function Ts(){if(gc){var N=wo;if(N!==null)throw N}}function As(N,I,$,H){gc=!1;var Z=N.updateQueue;hi=!1;var te=Z.firstBaseUpdate,pe=Z.lastBaseUpdate,Te=Z.shared.pending;if(Te!==null){Z.shared.pending=null;var Ie=Te,Ye=Ie.next;Ie.next=null,pe===null?te=Ye:pe.next=Ye,pe=Ie;var at=N.alternate;at!==null&&(at=at.updateQueue,Te=at.lastBaseUpdate,Te!==pe&&(Te===null?at.firstBaseUpdate=Ye:Te.next=Ye,at.lastBaseUpdate=Ie))}if(te!==null){var ct=Z.baseState;pe=0,at=Ye=Ie=null,Te=te;do{var Je=Te.lane&-536870913,rt=Je!==Te.lane;if(rt?(nr&Je)===Je:(H&Je)===Je){Je!==0&&Je===Eo&&(gc=!0),at!==null&&(at=at.next={lane:0,tag:Te.tag,payload:Te.payload,callback:null,next:null});e:{var Dt=N,Ft=Te;Je=I;var Er=$;switch(Ft.tag){case 1:if(Dt=Ft.payload,typeof Dt=="function"){ct=Dt.call(Er,ct,Je);break e}ct=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Ft.payload,Je=typeof Dt=="function"?Dt.call(Er,ct,Je):Dt,Je==null)break e;ct=q({},ct,Je);break e;case 2:hi=!0}}Je=Te.callback,Je!==null&&(N.flags|=64,rt&&(N.flags|=8192),rt=Z.callbacks,rt===null?Z.callbacks=[Je]:rt.push(Je))}else rt={lane:Je,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},at===null?(Ye=at=rt,Ie=ct):at=at.next=rt,pe|=Je;if(Te=Te.next,Te===null){if(Te=Z.shared.pending,Te===null)break;rt=Te,Te=rt.next,rt.next=null,Z.lastBaseUpdate=rt,Z.shared.pending=null}}while(!0);at===null&&(Ie=ct),Z.baseState=Ie,Z.firstBaseUpdate=Ye,Z.lastBaseUpdate=at,te===null&&(Z.shared.lanes=0),xi|=pe,N.lanes=pe,N.memoizedState=ct}}function Gf(N,I){if(typeof N!="function")throw Error(R(191,N));N.call(I)}function Kf(N,I){var $=N.callbacks;if($!==null)for(N.callbacks=null,N=0;N<$.length;N++)Gf($[N],I)}var Ro=fe(null),Pl=fe(0);function Wf(N,I){N=Za,Ae(Pl,N),Ae(Ro,I),Za=N|I.baseLanes}function mc(){Ae(Pl,Za),Ae(Ro,Ro.current)}function vc(){Za=Pl.current,xe(Ro),xe(Pl)}var Un=fe(null),aa=null;function mi(N){var I=N.alternate;Ae(Hr,Hr.current&1),Ae(Un,N),aa===null&&(I===null||Ro.current!==null||I.memoizedState!==null)&&(aa=N)}function yc(N){Ae(Hr,Hr.current),Ae(Un,N),aa===null&&(aa=N)}function Yf(N){N.tag===22?(Ae(Hr,Hr.current),Ae(Un,N),aa===null&&(aa=N)):vi()}function vi(){Ae(Hr,Hr.current),Ae(Un,Un.current)}function Gn(N){xe(Un),aa===N&&(aa=null),xe(Hr)}var Hr=fe(0);function Nl(N){for(var I=N;I!==null;){if(I.tag===13){var $=I.memoizedState;if($!==null&&($=$.dehydrated,$===null||_f($)||Rf($)))return I}else if(I.tag===19&&(I.memoizedProps.revealOrder==="forwards"||I.memoizedProps.revealOrder==="backwards"||I.memoizedProps.revealOrder==="unstable_legacy-backwards"||I.memoizedProps.revealOrder==="together")){if((I.flags&128)!==0)return I}else if(I.child!==null){I.child.return=I,I=I.child;continue}if(I===N)break;for(;I.sibling===null;){if(I.return===null||I.return===N)return null;I=I.return}I.sibling.return=I.return,I=I.sibling}return null}var Ha=0,Wt=null,br=null,on=null,Ll=!1,To=!1,Ji=!1,ql=0,ks=0,Ao=null,Pp=0;function Ir(){throw Error(R(321))}function bc(N,I){if(I===null)return!1;for(var $=0;$<I.length&&$<N.length;$++)if(!wn(N[$],I[$]))return!1;return!0}function xc(N,I,$,H,Z,te){return Ha=te,Wt=I,I.memoizedState=null,I.updateQueue=null,I.lanes=0,ge.H=N===null||N.memoizedState===null?Dd:Lc,Ji=!1,te=$(H,Z),Ji=!1,To&&(te=Qf(I,$,H,Z)),Xf(N),te}function Xf(N){ge.H=Ds;var I=br!==null&&br.next!==null;if(Ha=0,on=br=Wt=null,Ll=!1,ks=0,Ao=null,I)throw Error(R(300));N===null||sn||(N=N.dependencies,N!==null&&So(N)&&(sn=!0))}function Qf(N,I,$,H){Wt=N;var Z=0;do{if(To&&(Ao=null),ks=0,To=!1,25<=Z)throw Error(R(301));if(Z+=1,on=br=null,N.updateQueue!=null){var te=N.updateQueue;te.lastEffect=null,te.events=null,te.stores=null,te.memoCache!=null&&(te.memoCache.index=0)}ge.H=Pd,te=I($,H)}while(To);return te}function Np(){var N=ge.H,I=N.useState()[0];return I=typeof I.then=="function"?Ms(I):I,N=N.useState()[0],(br!==null?br.memoizedState:null)!==N&&(Wt.flags|=1024),I}function Sc(){var N=ql!==0;return ql=0,N}function Ec(N,I,$){I.updateQueue=N.updateQueue,I.flags&=-2053,N.lanes&=~$}function wc(N){if(Ll){for(N=N.memoizedState;N!==null;){var I=N.queue;I!==null&&(I.pending=null),N=N.next}Ll=!1}Ha=0,on=br=Wt=null,To=!1,ks=ql=0,Ao=null}function An(){var N={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Wt.memoizedState=on=N:on=on.next=N,on}function Ur(){if(br===null){var N=Wt.alternate;N=N!==null?N.memoizedState:null}else N=br.next;var I=on===null?Wt.memoizedState:on.next;if(I!==null)on=I,br=N;else{if(N===null)throw Wt.alternate===null?Error(R(467)):Error(R(310));br=N,N={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},on===null?Wt.memoizedState=on=N:on=on.next=N}return on}function Il(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ms(N){var I=ks;return ks+=1,Ao===null&&(Ao=[]),N=jf(Ao,N,I),I=Wt,(on===null?I.memoizedState:on.next)===null&&(I=I.alternate,ge.H=I===null||I.memoizedState===null?Dd:Lc),N}function Bl(N){if(N!==null&&typeof N=="object"){if(typeof N.then=="function")return Ms(N);if(N.$$typeof===Y)return Vr(N)}throw Error(R(438,String(N)))}function Cc(N){var I=null,$=Wt.updateQueue;if($!==null&&(I=$.memoCache),I==null){var H=Wt.alternate;H!==null&&(H=H.updateQueue,H!==null&&(H=H.memoCache,H!=null&&(I={data:H.data.map(function(Z){return Z.slice()}),index:0})))}if(I==null&&(I={data:[],index:0}),$===null&&($=Il(),Wt.updateQueue=$),$.memoCache=I,$=I.data[I.index],$===void 0)for($=I.data[I.index]=Array(N),H=0;H<N;H++)$[H]=oe;return I.index++,$}function Ua(N,I){return typeof I=="function"?I(N):I}function $l(N){var I=Ur();return _c(I,br,N)}function _c(N,I,$){var H=N.queue;if(H===null)throw Error(R(311));H.lastRenderedReducer=$;var Z=N.baseQueue,te=H.pending;if(te!==null){if(Z!==null){var pe=Z.next;Z.next=te.next,te.next=pe}I.baseQueue=Z=te,H.pending=null}if(te=N.baseState,Z===null)N.memoizedState=te;else{I=Z.next;var Te=pe=null,Ie=null,Ye=I,at=!1;do{var ct=Ye.lane&-536870913;if(ct!==Ye.lane?(nr&ct)===ct:(Ha&ct)===ct){var Je=Ye.revertLane;if(Je===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),ct===Eo&&(at=!0);else if((Ha&Je)===Je){Ye=Ye.next,Je===Eo&&(at=!0);continue}else ct={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Ie===null?(Te=Ie=ct,pe=te):Ie=Ie.next=ct,Wt.lanes|=Je,xi|=Je;ct=Ye.action,Ji&&$(te,ct),te=Ye.hasEagerState?Ye.eagerState:$(te,ct)}else Je={lane:ct,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Ie===null?(Te=Ie=Je,pe=te):Ie=Ie.next=Je,Wt.lanes|=ct,xi|=ct;Ye=Ye.next}while(Ye!==null&&Ye!==I);if(Ie===null?pe=te:Ie.next=Te,!wn(te,N.memoizedState)&&(sn=!0,at&&($=wo,$!==null)))throw $;N.memoizedState=te,N.baseState=pe,N.baseQueue=Ie,H.lastRenderedState=te}return Z===null&&(H.lanes=0),[N.memoizedState,H.dispatch]}function Rc(N){var I=Ur(),$=I.queue;if($===null)throw Error(R(311));$.lastRenderedReducer=N;var H=$.dispatch,Z=$.pending,te=I.memoizedState;if(Z!==null){$.pending=null;var pe=Z=Z.next;do te=N(te,pe.action),pe=pe.next;while(pe!==Z);wn(te,I.memoizedState)||(sn=!0),I.memoizedState=te,I.baseQueue===null&&(I.baseState=te),$.lastRenderedState=te}return[te,H]}function Zf(N,I,$){var H=Wt,Z=Ur(),te=Qt;if(te){if($===void 0)throw Error(R(407));$=$()}else $=I();var pe=!wn((br||Z).memoizedState,$);if(pe&&(Z.memoizedState=$,sn=!0),Z=Z.queue,kc(td.bind(null,H,Z,N),[N]),Z.getSnapshot!==I||pe||on!==null&&on.memoizedState.tag&1){if(H.flags|=2048,ko(9,{destroy:void 0},ed.bind(null,H,Z,$,I),null),Cr===null)throw Error(R(349));te||(Ha&127)!==0||Jf(H,I,$)}return $}function Jf(N,I,$){N.flags|=16384,N={getSnapshot:I,value:$},I=Wt.updateQueue,I===null?(I=Il(),Wt.updateQueue=I,I.stores=[N]):($=I.stores,$===null?I.stores=[N]:$.push(N))}function ed(N,I,$,H){I.value=$,I.getSnapshot=H,rd(I)&&nd(N)}function td(N,I,$){return $(function(){rd(I)&&nd(N)})}function rd(N){var I=N.getSnapshot;N=N.value;try{var $=I();return!wn(N,$)}catch{return!0}}function nd(N){var I=ja(N,2);I!==null&&jn(I,N,2)}function Tc(N){var I=An();if(typeof N=="function"){var $=N;if(N=$(),Ji){Ue(!0);try{$()}finally{Ue(!1)}}}return I.memoizedState=I.baseState=N,I.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:N},I}function ad(N,I,$,H){return N.baseState=$,_c(N,br,typeof H=="function"?H:Ua)}function Lp(N,I,$,H,Z){if(zl(N))throw Error(R(485));if(N=I.action,N!==null){var te={payload:Z,action:N,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){te.listeners.push(pe)}};ge.T!==null?$(!0):te.isTransition=!1,H(te),$=I.pending,$===null?(te.next=I.pending=te,id(I,te)):(te.next=$.next,I.pending=$.next=te)}}function id(N,I){var $=I.action,H=I.payload,Z=N.state;if(I.isTransition){var te=ge.T,pe={};ge.T=pe;try{var Te=$(Z,H),Ie=ge.S;Ie!==null&&Ie(pe,Te),od(N,I,Te)}catch(Ye){Ac(N,I,Ye)}finally{te!==null&&pe.types!==null&&(te.types=pe.types),ge.T=te}}else try{te=$(Z,H),od(N,I,te)}catch(Ye){Ac(N,I,Ye)}}function od(N,I,$){$!==null&&typeof $=="object"&&typeof $.then=="function"?$.then(function(H){sd(N,I,H)},function(H){return Ac(N,I,H)}):sd(N,I,$)}function sd(N,I,$){I.status="fulfilled",I.value=$,ld(I),N.state=$,I=N.pending,I!==null&&($=I.next,$===I?N.pending=null:($=$.next,I.next=$,id(N,$)))}function Ac(N,I,$){var H=N.pending;if(N.pending=null,H!==null){H=H.next;do I.status="rejected",I.reason=$,ld(I),I=I.next;while(I!==H)}N.action=null}function ld(N){N=N.listeners;for(var I=0;I<N.length;I++)(0,N[I])()}function ud(N,I){return I}function cd(N,I){if(Qt){var $=Cr.formState;if($!==null){e:{var H=Wt;if(Qt){if(vr){t:{for(var Z=vr,te=Cn;Z.nodeType!==8;){if(!te){Z=null;break t}if(Z=ia(Z.nextSibling),Z===null){Z=null;break t}}te=Z.data,Z=te==="F!"||te==="F"?Z:null}if(Z){vr=ia(Z.nextSibling),H=Z.data==="F!";break e}}va(H)}H=!1}H&&(I=$[0])}}return $=An(),$.memoizedState=$.baseState=I,H={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:I},$.queue=H,$=kd.bind(null,Wt,H),H.dispatch=$,H=Tc(!1),te=Nc.bind(null,Wt,!1,H.queue),H=An(),Z={state:I,dispatch:null,action:N,pending:null},H.queue=Z,$=Lp.bind(null,Wt,Z,te,$),Z.dispatch=$,H.memoizedState=N,[I,$,!1]}function fd(N){var I=Ur();return dd(I,br,N)}function dd(N,I,$){if(I=_c(N,I,ud)[0],N=$l(Ua)[0],typeof I=="object"&&I!==null&&typeof I.then=="function")try{var H=Ms(I)}catch(pe){throw pe===Co?kl:pe}else H=I;I=Ur();var Z=I.queue,te=Z.dispatch;return $!==I.memoizedState&&(Wt.flags|=2048,ko(9,{destroy:void 0},qp.bind(null,Z,$),null)),[H,te,N]}function qp(N,I){N.action=I}function hd(N){var I=Ur(),$=br;if($!==null)return dd(I,$,N);Ur(),I=I.memoizedState,$=Ur();var H=$.queue.dispatch;return $.memoizedState=N,[I,H,!1]}function ko(N,I,$,H){return N={tag:N,create:$,deps:H,inst:I,next:null},I=Wt.updateQueue,I===null&&(I=Il(),Wt.updateQueue=I),$=I.lastEffect,$===null?I.lastEffect=N.next=N:(H=$.next,$.next=N,N.next=H,I.lastEffect=N),N}function pd(){return Ur().memoizedState}function Fl(N,I,$,H){var Z=An();Wt.flags|=N,Z.memoizedState=ko(1|I,{destroy:void 0},$,H===void 0?null:H)}function jl(N,I,$,H){var Z=Ur();H=H===void 0?null:H;var te=Z.memoizedState.inst;br!==null&&H!==null&&bc(H,br.memoizedState.deps)?Z.memoizedState=ko(I,te,$,H):(Wt.flags|=N,Z.memoizedState=ko(1|I,te,$,H))}function gd(N,I){Fl(8390656,8,N,I)}function kc(N,I){jl(2048,8,N,I)}function Ip(N){Wt.flags|=4;var I=Wt.updateQueue;if(I===null)I=Il(),Wt.updateQueue=I,I.events=[N];else{var $=I.events;$===null?I.events=[N]:$.push(N)}}function md(N){var I=Ur().memoizedState;return Ip({ref:I,nextImpl:N}),function(){if((dr&2)!==0)throw Error(R(440));return I.impl.apply(void 0,arguments)}}function vd(N,I){return jl(4,2,N,I)}function yd(N,I){return jl(4,4,N,I)}function bd(N,I){if(typeof I=="function"){N=N();var $=I(N);return function(){typeof $=="function"?$():I(null)}}if(I!=null)return N=N(),I.current=N,function(){I.current=null}}function xd(N,I,$){$=$!=null?$.concat([N]):null,jl(4,4,bd.bind(null,I,N),$)}function Mc(){}function Sd(N,I){var $=Ur();I=I===void 0?null:I;var H=$.memoizedState;return I!==null&&bc(I,H[1])?H[0]:($.memoizedState=[N,I],N)}function Ed(N,I){var $=Ur();I=I===void 0?null:I;var H=$.memoizedState;if(I!==null&&bc(I,H[1]))return H[0];if(H=N(),Ji){Ue(!0);try{N()}finally{Ue(!1)}}return $.memoizedState=[H,I],H}function Oc(N,I,$){return $===void 0||(Ha&1073741824)!==0&&(nr&261930)===0?N.memoizedState=I:(N.memoizedState=$,N=wh(),Wt.lanes|=N,xi|=N,$)}function wd(N,I,$,H){return wn($,I)?$:Ro.current!==null?(N=Oc(N,$,H),wn(N,I)||(sn=!0),N):(Ha&42)===0||(Ha&1073741824)!==0&&(nr&261930)===0?(sn=!0,N.memoizedState=$):(N=wh(),Wt.lanes|=N,xi|=N,I)}function Cd(N,I,$,H,Z){var te=ve.p;ve.p=te!==0&&8>te?te:8;var pe=ge.T,Te={};ge.T=Te,Nc(N,!1,I,$);try{var Ie=Z(),Ye=ge.S;if(Ye!==null&&Ye(Te,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var at=Dp(Ie,H);Os(N,I,at,Yn(N))}else Os(N,I,H,Yn(N))}catch(ct){Os(N,I,{then:function(){},status:"rejected",reason:ct},Yn())}finally{ve.p=te,pe!==null&&Te.types!==null&&(pe.types=Te.types),ge.T=pe}}function Bp(){}function Dc(N,I,$,H){if(N.tag!==5)throw Error(R(476));var Z=_d(N).queue;Cd(N,Z,I,be,$===null?Bp:function(){return Rd(N),$(H)})}function _d(N){var I=N.memoizedState;if(I!==null)return I;I={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:be},next:null};var $={};return I.next={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:$},next:null},N.memoizedState=I,N=N.alternate,N!==null&&(N.memoizedState=I),I}function Rd(N){var I=_d(N);I.next===null&&(I=N.alternate.memoizedState),Os(N,I.next.queue,{},Yn())}function Pc(){return Vr(Ys)}function Td(){return Ur().memoizedState}function Ad(){return Ur().memoizedState}function $p(N){for(var I=N.return;I!==null;){switch(I.tag){case 24:case 3:var $=Yn();N=pi($);var H=gi(I,N,$);H!==null&&(jn(H,I,$),Rs(H,I,$)),I={cache:Xe()},N.payload=I;return}I=I.return}}function Fp(N,I,$){var H=Yn();$={lane:H,revertLane:0,gesture:null,action:$,hasEagerState:!1,eagerState:null,next:null},zl(N)?Md(I,$):($=gs(N,I,$,H),$!==null&&(jn($,N,H),Od($,I,H)))}function kd(N,I,$){var H=Yn();Os(N,I,$,H)}function Os(N,I,$,H){var Z={lane:H,revertLane:0,gesture:null,action:$,hasEagerState:!1,eagerState:null,next:null};if(zl(N))Md(I,Z);else{var te=N.alternate;if(N.lanes===0&&(te===null||te.lanes===0)&&(te=I.lastRenderedReducer,te!==null))try{var pe=I.lastRenderedState,Te=te(pe,$);if(Z.hasEagerState=!0,Z.eagerState=Te,wn(Te,pe))return ui(N,I,Z,0),Cr===null&&li(),!1}catch{}finally{}if($=gs(N,I,Z,H),$!==null)return jn($,N,H),Od($,I,H),!0}return!1}function Nc(N,I,$,H){if(H={lane:2,revertLane:hf(),gesture:null,action:H,hasEagerState:!1,eagerState:null,next:null},zl(N)){if(I)throw Error(R(479))}else I=gs(N,$,H,2),I!==null&&jn(I,N,2)}function zl(N){var I=N.alternate;return N===Wt||I!==null&&I===Wt}function Md(N,I){To=Ll=!0;var $=N.pending;$===null?I.next=I:(I.next=$.next,$.next=I),N.pending=I}function Od(N,I,$){if(($&4194048)!==0){var H=I.lanes;H&=N.pendingLanes,$|=H,I.lanes=$,or(N,$)}}var Ds={readContext:Vr,use:Bl,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useLayoutEffect:Ir,useInsertionEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useSyncExternalStore:Ir,useId:Ir,useHostTransitionStatus:Ir,useFormState:Ir,useActionState:Ir,useOptimistic:Ir,useMemoCache:Ir,useCacheRefresh:Ir};Ds.useEffectEvent=Ir;var Dd={readContext:Vr,use:Bl,useCallback:function(N,I){return An().memoizedState=[N,I===void 0?null:I],N},useContext:Vr,useEffect:gd,useImperativeHandle:function(N,I,$){$=$!=null?$.concat([N]):null,Fl(4194308,4,bd.bind(null,I,N),$)},useLayoutEffect:function(N,I){return Fl(4194308,4,N,I)},useInsertionEffect:function(N,I){Fl(4,2,N,I)},useMemo:function(N,I){var $=An();I=I===void 0?null:I;var H=N();if(Ji){Ue(!0);try{N()}finally{Ue(!1)}}return $.memoizedState=[H,I],H},useReducer:function(N,I,$){var H=An();if($!==void 0){var Z=$(I);if(Ji){Ue(!0);try{$(I)}finally{Ue(!1)}}}else Z=I;return H.memoizedState=H.baseState=Z,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N,lastRenderedState:Z},H.queue=N,N=N.dispatch=Fp.bind(null,Wt,N),[H.memoizedState,N]},useRef:function(N){var I=An();return N={current:N},I.memoizedState=N},useState:function(N){N=Tc(N);var I=N.queue,$=kd.bind(null,Wt,I);return I.dispatch=$,[N.memoizedState,$]},useDebugValue:Mc,useDeferredValue:function(N,I){var $=An();return Oc($,N,I)},useTransition:function(){var N=Tc(!1);return N=Cd.bind(null,Wt,N.queue,!0,!1),An().memoizedState=N,[!1,N]},useSyncExternalStore:function(N,I,$){var H=Wt,Z=An();if(Qt){if($===void 0)throw Error(R(407));$=$()}else{if($=I(),Cr===null)throw Error(R(349));(nr&127)!==0||Jf(H,I,$)}Z.memoizedState=$;var te={value:$,getSnapshot:I};return Z.queue=te,gd(td.bind(null,H,te,N),[N]),H.flags|=2048,ko(9,{destroy:void 0},ed.bind(null,H,te,$,I),null),$},useId:function(){var N=An(),I=Cr.identifierPrefix;if(Qt){var $=Jn,H=Zn;$=(H&~(1<<32-Ze(H)-1)).toString(32)+$,I="_"+I+"R_"+$,$=ql++,0<$&&(I+="H"+$.toString(32)),I+="_"}else $=Pp++,I="_"+I+"r_"+$.toString(32)+"_";return N.memoizedState=I},useHostTransitionStatus:Pc,useFormState:cd,useActionState:cd,useOptimistic:function(N){var I=An();I.memoizedState=I.baseState=N;var $={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return I.queue=$,I=Nc.bind(null,Wt,!0,$),$.dispatch=I,[N,I]},useMemoCache:Cc,useCacheRefresh:function(){return An().memoizedState=$p.bind(null,Wt)},useEffectEvent:function(N){var I=An(),$={impl:N};return I.memoizedState=$,function(){if((dr&2)!==0)throw Error(R(440));return $.impl.apply(void 0,arguments)}}},Lc={readContext:Vr,use:Bl,useCallback:Sd,useContext:Vr,useEffect:kc,useImperativeHandle:xd,useInsertionEffect:vd,useLayoutEffect:yd,useMemo:Ed,useReducer:$l,useRef:pd,useState:function(){return $l(Ua)},useDebugValue:Mc,useDeferredValue:function(N,I){var $=Ur();return wd($,br.memoizedState,N,I)},useTransition:function(){var N=$l(Ua)[0],I=Ur().memoizedState;return[typeof N=="boolean"?N:Ms(N),I]},useSyncExternalStore:Zf,useId:Td,useHostTransitionStatus:Pc,useFormState:fd,useActionState:fd,useOptimistic:function(N,I){var $=Ur();return ad($,br,N,I)},useMemoCache:Cc,useCacheRefresh:Ad};Lc.useEffectEvent=md;var Pd={readContext:Vr,use:Bl,useCallback:Sd,useContext:Vr,useEffect:kc,useImperativeHandle:xd,useInsertionEffect:vd,useLayoutEffect:yd,useMemo:Ed,useReducer:Rc,useRef:pd,useState:function(){return Rc(Ua)},useDebugValue:Mc,useDeferredValue:function(N,I){var $=Ur();return br===null?Oc($,N,I):wd($,br.memoizedState,N,I)},useTransition:function(){var N=Rc(Ua)[0],I=Ur().memoizedState;return[typeof N=="boolean"?N:Ms(N),I]},useSyncExternalStore:Zf,useId:Td,useHostTransitionStatus:Pc,useFormState:hd,useActionState:hd,useOptimistic:function(N,I){var $=Ur();return br!==null?ad($,br,N,I):($.baseState=N,[N,$.queue.dispatch])},useMemoCache:Cc,useCacheRefresh:Ad};Pd.useEffectEvent=md;function qc(N,I,$,H){I=N.memoizedState,$=$(H,I),$=$==null?I:q({},I,$),N.memoizedState=$,N.lanes===0&&(N.updateQueue.baseState=$)}var Ic={enqueueSetState:function(N,I,$){N=N._reactInternals;var H=Yn(),Z=pi(H);Z.payload=I,$!=null&&(Z.callback=$),I=gi(N,Z,H),I!==null&&(jn(I,N,H),Rs(I,N,H))},enqueueReplaceState:function(N,I,$){N=N._reactInternals;var H=Yn(),Z=pi(H);Z.tag=1,Z.payload=I,$!=null&&(Z.callback=$),I=gi(N,Z,H),I!==null&&(jn(I,N,H),Rs(I,N,H))},enqueueForceUpdate:function(N,I){N=N._reactInternals;var $=Yn(),H=pi($);H.tag=2,I!=null&&(H.callback=I),I=gi(N,H,$),I!==null&&(jn(I,N,$),Rs(I,N,$))}};function Nd(N,I,$,H,Z,te,pe){return N=N.stateNode,typeof N.shouldComponentUpdate=="function"?N.shouldComponentUpdate(H,te,pe):I.prototype&&I.prototype.isPureReactComponent?!Fi($,H)||!Fi(Z,te):!0}function Ld(N,I,$,H){N=I.state,typeof I.componentWillReceiveProps=="function"&&I.componentWillReceiveProps($,H),typeof I.UNSAFE_componentWillReceiveProps=="function"&&I.UNSAFE_componentWillReceiveProps($,H),I.state!==N&&Ic.enqueueReplaceState(I,I.state,null)}function eo(N,I){var $=I;if("ref"in I){$={};for(var H in I)H!=="ref"&&($[H]=I[H])}if(N=N.defaultProps){$===I&&($=q({},$));for(var Z in N)$[Z]===void 0&&($[Z]=N[Z])}return $}function qd(N){Vi(N)}function Id(N){console.error(N)}function Bd(N){Vi(N)}function Vl(N,I){try{var $=N.onUncaughtError;$(I.value,{componentStack:I.stack})}catch(H){setTimeout(function(){throw H})}}function $d(N,I,$){try{var H=N.onCaughtError;H($.value,{componentStack:$.stack,errorBoundary:I.tag===1?I.stateNode:null})}catch(Z){setTimeout(function(){throw Z})}}function Bc(N,I,$){return $=pi($),$.tag=3,$.payload={element:null},$.callback=function(){Vl(N,I)},$}function Fd(N){return N=pi(N),N.tag=3,N}function jd(N,I,$,H){var Z=$.type.getDerivedStateFromError;if(typeof Z=="function"){var te=H.value;N.payload=function(){return Z(te)},N.callback=function(){$d(I,$,H)}}var pe=$.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(N.callback=function(){$d(I,$,H),typeof Z!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Te=H.stack;this.componentDidCatch(H.value,{componentStack:Te!==null?Te:""})})}function jp(N,I,$,H,Z){if($.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){if(I=$.alternate,I!==null&&Pa(I,$,Z,!0),$=Un.current,$!==null){switch($.tag){case 31:case 13:return aa===null?ou():$.alternate===null&&$r===0&&($r=3),$.flags&=-257,$.flags|=65536,$.lanes=Z,H===Ml?$.flags|=16384:(I=$.updateQueue,I===null?$.updateQueue=new Set([H]):I.add(H),cf(N,H,Z)),!1;case 22:return $.flags|=65536,H===Ml?$.flags|=16384:(I=$.updateQueue,I===null?(I={transitions:null,markerInstances:null,retryQueue:new Set([H])},$.updateQueue=I):($=I.retryQueue,$===null?I.retryQueue=new Set([H]):$.add(H)),cf(N,H,Z)),!1}throw Error(R(435,$.tag))}return cf(N,H,Z),ou(),!1}if(Qt)return I=Un.current,I!==null?((I.flags&65536)===0&&(I.flags|=256),I.flags|=65536,I.lanes=Z,H!==Ss&&(N=Error(R(422),{cause:H}),qn(Nn(N,$)))):(H!==Ss&&(I=Error(R(423),{cause:H}),qn(Nn(I,$))),N=N.current.alternate,N.flags|=65536,Z&=-Z,N.lanes|=Z,H=Nn(H,$),Z=Bc(N.stateNode,H,Z),pc(N,Z),$r!==4&&($r=2)),!1;var te=Error(R(520),{cause:H});if(te=Nn(te,$),Fs===null?Fs=[te]:Fs.push(te),$r!==4&&($r=2),I===null)return!0;H=Nn(H,$),$=I;do{switch($.tag){case 3:return $.flags|=65536,N=Z&-Z,$.lanes|=N,N=Bc($.stateNode,H,N),pc($,N),!1;case 1:if(I=$.type,te=$.stateNode,($.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Si===null||!Si.has(te))))return $.flags|=65536,Z&=-Z,$.lanes|=Z,Z=Fd(Z),jd(Z,N,$,H),pc($,Z),!1}$=$.return}while($!==null);return!1}var $c=Error(R(461)),sn=!1;function yn(N,I,$,H){I.child=N===null?Uf(I,null,$,H):Zi(I,N.child,$,H)}function zd(N,I,$,H,Z){$=$.render;var te=I.ref;if("ref"in H){var pe={};for(var Te in H)Te!=="ref"&&(pe[Te]=H[Te])}else pe=H;return Na(I),H=xc(N,I,$,pe,te,Z),Te=Sc(),N!==null&&!sn?(Ec(N,I,Z),Ga(N,I,Z)):(Qt&&Te&&Ki(I),I.flags|=1,yn(N,I,H,Z),I.child)}function Vd(N,I,$,H,Z){if(N===null){var te=$.type;return typeof te=="function"&&!za(te)&&te.defaultProps===void 0&&$.compare===null?(I.tag=15,I.type=te,Hd(N,I,te,H,Z)):(N=bo($.type,null,H,I,I.mode,Z),N.ref=I.ref,N.return=I,I.child=N)}if(te=N.child,!Kc(N,Z)){var pe=te.memoizedProps;if($=$.compare,$=$!==null?$:Fi,$(pe,H)&&N.ref===I.ref)return Ga(N,I,Z)}return I.flags|=1,N=Pn(te,H),N.ref=I.ref,N.return=I,I.child=N}function Hd(N,I,$,H,Z){if(N!==null){var te=N.memoizedProps;if(Fi(te,H)&&N.ref===I.ref)if(sn=!1,I.pendingProps=H=te,Kc(N,Z))(N.flags&131072)!==0&&(sn=!0);else return I.lanes=N.lanes,Ga(N,I,Z)}return Fc(N,I,$,H,Z)}function Ud(N,I,$,H){var Z=H.children,te=N!==null?N.memoizedState:null;if(N===null&&I.stateNode===null&&(I.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),H.mode==="hidden"){if((I.flags&128)!==0){if(te=te!==null?te.baseLanes|$:$,N!==null){for(H=I.child=N.child,Z=0;H!==null;)Z=Z|H.lanes|H.childLanes,H=H.sibling;H=Z&~te}else H=0,I.child=null;return Gd(N,I,te,$,H)}if(($&536870912)!==0)I.memoizedState={baseLanes:0,cachePool:null},N!==null&&Al(I,te!==null?te.cachePool:null),te!==null?Wf(I,te):mc(),Yf(I);else return H=I.lanes=536870912,Gd(N,I,te!==null?te.baseLanes|$:$,$,H)}else te!==null?(Al(I,te.cachePool),Wf(I,te),vi(),I.memoizedState=null):(N!==null&&Al(I,null),mc(),vi());return yn(N,I,Z,$),I.child}function Ps(N,I){return N!==null&&N.tag===22||I.stateNode!==null||(I.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),I.sibling}function Gd(N,I,$,H,Z){var te=cc();return te=te===null?null:{parent:qe._currentValue,pool:te},I.memoizedState={baseLanes:$,cachePool:te},N!==null&&Al(I,null),mc(),Yf(I),N!==null&&Pa(N,I,H,!0),I.childLanes=Z,null}function Hl(N,I){return I=Gl({mode:I.mode,children:I.children},N.mode),I.ref=N.ref,N.child=I,I.return=N,I}function Kd(N,I,$){return Zi(I,N.child,null,$),N=Hl(I,I.pendingProps),N.flags|=2,Gn(I),I.memoizedState=null,N}function zp(N,I,$){var H=I.pendingProps,Z=(I.flags&128)!==0;if(I.flags&=-129,N===null){if(Qt){if(H.mode==="hidden")return N=Hl(I,H),I.lanes=536870912,Ps(null,N);if(yc(I),(N=vr)?(N=ip(N,Cn),N=N!==null&&N.data==="&"?N:null,N!==null&&(I.memoizedState={dehydrated:N,treeContext:Oa!==null?{id:Zn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},$=ga(N),$.return=I,I.child=$,nn=I,vr=null)):N=null,N===null)throw va(I);return I.lanes=536870912,null}return Hl(I,H)}var te=N.memoizedState;if(te!==null){var pe=te.dehydrated;if(yc(I),Z)if(I.flags&256)I.flags&=-257,I=Kd(N,I,$);else if(I.memoizedState!==null)I.child=N.child,I.flags|=128,I=null;else throw Error(R(558));else if(sn||Pa(N,I,$,!1),Z=($&N.childLanes)!==0,sn||Z){if(H=Cr,H!==null&&(pe=rr(H,$),pe!==0&&pe!==te.retryLane))throw te.retryLane=pe,ja(N,pe),jn(H,N,pe),$c;ou(),I=Kd(N,I,$)}else N=te.treeContext,vr=ia(pe.nextSibling),nn=I,Qt=!0,ra=null,Cn=!1,N!==null&&_l(I,N),I=Hl(I,H),I.flags|=4096;return I}return N=Pn(N.child,{mode:H.mode,children:H.children}),N.ref=I.ref,I.child=N,N.return=I,N}function Ul(N,I){var $=I.ref;if($===null)N!==null&&N.ref!==null&&(I.flags|=4194816);else{if(typeof $!="function"&&typeof $!="object")throw Error(R(284));(N===null||N.ref!==$)&&(I.flags|=4194816)}}function Fc(N,I,$,H,Z){return Na(I),$=xc(N,I,$,H,void 0,Z),H=Sc(),N!==null&&!sn?(Ec(N,I,Z),Ga(N,I,Z)):(Qt&&H&&Ki(I),I.flags|=1,yn(N,I,$,Z),I.child)}function Wd(N,I,$,H,Z,te){return Na(I),I.updateQueue=null,$=Qf(I,H,$,Z),Xf(N),H=Sc(),N!==null&&!sn?(Ec(N,I,te),Ga(N,I,te)):(Qt&&H&&Ki(I),I.flags|=1,yn(N,I,$,te),I.child)}function Yd(N,I,$,H,Z){if(Na(I),I.stateNode===null){var te=ci,pe=$.contextType;typeof pe=="object"&&pe!==null&&(te=Vr(pe)),te=new $(H,te),I.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,te.updater=Ic,I.stateNode=te,te._reactInternals=I,te=I.stateNode,te.props=H,te.state=I.memoizedState,te.refs={},dc(I),pe=$.contextType,te.context=typeof pe=="object"&&pe!==null?Vr(pe):ci,te.state=I.memoizedState,pe=$.getDerivedStateFromProps,typeof pe=="function"&&(qc(I,$,pe,H),te.state=I.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(pe=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),pe!==te.state&&Ic.enqueueReplaceState(te,te.state,null),As(I,H,te,Z),Ts(),te.state=I.memoizedState),typeof te.componentDidMount=="function"&&(I.flags|=4194308),H=!0}else if(N===null){te=I.stateNode;var Te=I.memoizedProps,Ie=eo($,Te);te.props=Ie;var Ye=te.context,at=$.contextType;pe=ci,typeof at=="object"&&at!==null&&(pe=Vr(at));var ct=$.getDerivedStateFromProps;at=typeof ct=="function"||typeof te.getSnapshotBeforeUpdate=="function",Te=I.pendingProps!==Te,at||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Te||Ye!==pe)&&Ld(I,te,H,pe),hi=!1;var Je=I.memoizedState;te.state=Je,As(I,H,te,Z),Ts(),Ye=I.memoizedState,Te||Je!==Ye||hi?(typeof ct=="function"&&(qc(I,$,ct,H),Ye=I.memoizedState),(Ie=hi||Nd(I,$,Ie,H,Je,Ye,pe))?(at||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(I.flags|=4194308)):(typeof te.componentDidMount=="function"&&(I.flags|=4194308),I.memoizedProps=H,I.memoizedState=Ye),te.props=H,te.state=Ye,te.context=pe,H=Ie):(typeof te.componentDidMount=="function"&&(I.flags|=4194308),H=!1)}else{te=I.stateNode,hc(N,I),pe=I.memoizedProps,at=eo($,pe),te.props=at,ct=I.pendingProps,Je=te.context,Ye=$.contextType,Ie=ci,typeof Ye=="object"&&Ye!==null&&(Ie=Vr(Ye)),Te=$.getDerivedStateFromProps,(Ye=typeof Te=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(pe!==ct||Je!==Ie)&&Ld(I,te,H,Ie),hi=!1,Je=I.memoizedState,te.state=Je,As(I,H,te,Z),Ts();var rt=I.memoizedState;pe!==ct||Je!==rt||hi||N!==null&&N.dependencies!==null&&So(N.dependencies)?(typeof Te=="function"&&(qc(I,$,Te,H),rt=I.memoizedState),(at=hi||Nd(I,$,at,H,Je,rt,Ie)||N!==null&&N.dependencies!==null&&So(N.dependencies))?(Ye||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(H,rt,Ie),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(H,rt,Ie)),typeof te.componentDidUpdate=="function"&&(I.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(I.flags|=1024)):(typeof te.componentDidUpdate!="function"||pe===N.memoizedProps&&Je===N.memoizedState||(I.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||pe===N.memoizedProps&&Je===N.memoizedState||(I.flags|=1024),I.memoizedProps=H,I.memoizedState=rt),te.props=H,te.state=rt,te.context=Ie,H=at):(typeof te.componentDidUpdate!="function"||pe===N.memoizedProps&&Je===N.memoizedState||(I.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||pe===N.memoizedProps&&Je===N.memoizedState||(I.flags|=1024),H=!1)}return te=H,Ul(N,I),H=(I.flags&128)!==0,te||H?(te=I.stateNode,$=H&&typeof $.getDerivedStateFromError!="function"?null:te.render(),I.flags|=1,N!==null&&H?(I.child=Zi(I,N.child,null,Z),I.child=Zi(I,null,$,Z)):yn(N,I,$,Z),I.memoizedState=te.state,N=I.child):N=Ga(N,I,Z),N}function Xd(N,I,$,H){return Da(),I.flags|=256,yn(N,I,$,H),I.child}var jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zc(N){return{baseLanes:N,cachePool:$f()}}function Vc(N,I,$){return N=N!==null?N.childLanes&~$:0,I&&(N|=Wn),N}function Qd(N,I,$){var H=I.pendingProps,Z=!1,te=(I.flags&128)!==0,pe;if((pe=te)||(pe=N!==null&&N.memoizedState===null?!1:(Hr.current&2)!==0),pe&&(Z=!0,I.flags&=-129),pe=(I.flags&32)!==0,I.flags&=-33,N===null){if(Qt){if(Z?mi(I):vi(),(N=vr)?(N=ip(N,Cn),N=N!==null&&N.data!=="&"?N:null,N!==null&&(I.memoizedState={dehydrated:N,treeContext:Oa!==null?{id:Zn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},$=ga(N),$.return=I,I.child=$,nn=I,vr=null)):N=null,N===null)throw va(I);return Rf(N)?I.lanes=32:I.lanes=536870912,null}var Te=H.children;return H=H.fallback,Z?(vi(),Z=I.mode,Te=Gl({mode:"hidden",children:Te},Z),H=Ma(H,Z,$,null),Te.return=I,H.return=I,Te.sibling=H,I.child=Te,H=I.child,H.memoizedState=zc($),H.childLanes=Vc(N,pe,$),I.memoizedState=jc,Ps(null,H)):(mi(I),Hc(I,Te))}var Ie=N.memoizedState;if(Ie!==null&&(Te=Ie.dehydrated,Te!==null)){if(te)I.flags&256?(mi(I),I.flags&=-257,I=Uc(N,I,$)):I.memoizedState!==null?(vi(),I.child=N.child,I.flags|=128,I=null):(vi(),Te=H.fallback,Z=I.mode,H=Gl({mode:"visible",children:H.children},Z),Te=Ma(Te,Z,$,null),Te.flags|=2,H.return=I,Te.return=I,H.sibling=Te,I.child=H,Zi(I,N.child,null,$),H=I.child,H.memoizedState=zc($),H.childLanes=Vc(N,pe,$),I.memoizedState=jc,I=Ps(null,H));else if(mi(I),Rf(Te)){if(pe=Te.nextSibling&&Te.nextSibling.dataset,pe)var Ye=pe.dgst;pe=Ye,H=Error(R(419)),H.stack="",H.digest=pe,qn({value:H,source:null,stack:null}),I=Uc(N,I,$)}else if(sn||Pa(N,I,$,!1),pe=($&N.childLanes)!==0,sn||pe){if(pe=Cr,pe!==null&&(H=rr(pe,$),H!==0&&H!==Ie.retryLane))throw Ie.retryLane=H,ja(N,H),jn(pe,N,H),$c;_f(Te)||ou(),I=Uc(N,I,$)}else _f(Te)?(I.flags|=192,I.child=N.child,I=null):(N=Ie.treeContext,vr=ia(Te.nextSibling),nn=I,Qt=!0,ra=null,Cn=!1,N!==null&&_l(I,N),I=Hc(I,H.children),I.flags|=4096);return I}return Z?(vi(),Te=H.fallback,Z=I.mode,Ie=N.child,Ye=Ie.sibling,H=Pn(Ie,{mode:"hidden",children:H.children}),H.subtreeFlags=Ie.subtreeFlags&65011712,Ye!==null?Te=Pn(Ye,Te):(Te=Ma(Te,Z,$,null),Te.flags|=2),Te.return=I,H.return=I,H.sibling=Te,I.child=H,Ps(null,H),H=I.child,Te=N.child.memoizedState,Te===null?Te=zc($):(Z=Te.cachePool,Z!==null?(Ie=qe._currentValue,Z=Z.parent!==Ie?{parent:Ie,pool:Ie}:Z):Z=$f(),Te={baseLanes:Te.baseLanes|$,cachePool:Z}),H.memoizedState=Te,H.childLanes=Vc(N,pe,$),I.memoizedState=jc,Ps(N.child,H)):(mi(I),$=N.child,N=$.sibling,$=Pn($,{mode:"visible",children:H.children}),$.return=I,$.sibling=null,N!==null&&(pe=I.deletions,pe===null?(I.deletions=[N],I.flags|=16):pe.push(N)),I.child=$,I.memoizedState=null,$)}function Hc(N,I){return I=Gl({mode:"visible",children:I},N.mode),I.return=N,N.child=I}function Gl(N,I){return N=mn(22,N,null,I),N.lanes=0,N}function Uc(N,I,$){return Zi(I,N.child,null,$),N=Hc(I,I.pendingProps.children),N.flags|=2,I.memoizedState=null,N}function Zd(N,I,$){N.lanes|=I;var H=N.alternate;H!==null&&(H.lanes|=I),qt(N.return,I,$)}function Gc(N,I,$,H,Z,te){var pe=N.memoizedState;pe===null?N.memoizedState={isBackwards:I,rendering:null,renderingStartTime:0,last:H,tail:$,tailMode:Z,treeForkCount:te}:(pe.isBackwards=I,pe.rendering=null,pe.renderingStartTime=0,pe.last=H,pe.tail=$,pe.tailMode=Z,pe.treeForkCount=te)}function Jd(N,I,$){var H=I.pendingProps,Z=H.revealOrder,te=H.tail;H=H.children;var pe=Hr.current,Te=(pe&2)!==0;if(Te?(pe=pe&1|2,I.flags|=128):pe&=1,Ae(Hr,pe),yn(N,I,H,$),H=Qt?Ui:0,!Te&&N!==null&&(N.flags&128)!==0)e:for(N=I.child;N!==null;){if(N.tag===13)N.memoizedState!==null&&Zd(N,$,I);else if(N.tag===19)Zd(N,$,I);else if(N.child!==null){N.child.return=N,N=N.child;continue}if(N===I)break e;for(;N.sibling===null;){if(N.return===null||N.return===I)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}switch(Z){case"forwards":for($=I.child,Z=null;$!==null;)N=$.alternate,N!==null&&Nl(N)===null&&(Z=$),$=$.sibling;$=Z,$===null?(Z=I.child,I.child=null):(Z=$.sibling,$.sibling=null),Gc(I,!1,Z,$,te,H);break;case"backwards":case"unstable_legacy-backwards":for($=null,Z=I.child,I.child=null;Z!==null;){if(N=Z.alternate,N!==null&&Nl(N)===null){I.child=Z;break}N=Z.sibling,Z.sibling=$,$=Z,Z=N}Gc(I,!0,$,null,te,H);break;case"together":Gc(I,!1,null,null,void 0,H);break;default:I.memoizedState=null}return I.child}function Ga(N,I,$){if(N!==null&&(I.dependencies=N.dependencies),xi|=I.lanes,($&I.childLanes)===0)if(N!==null){if(Pa(N,I,$,!1),($&I.childLanes)===0)return null}else return null;if(N!==null&&I.child!==N.child)throw Error(R(153));if(I.child!==null){for(N=I.child,$=Pn(N,N.pendingProps),I.child=$,$.return=I;N.sibling!==null;)N=N.sibling,$=$.sibling=Pn(N,N.pendingProps),$.return=I;$.sibling=null}return I.child}function Kc(N,I){return(N.lanes&I)!==0?!0:(N=N.dependencies,!!(N!==null&&So(N)))}function Vp(N,I,$){switch(I.tag){case 3:$e(I,I.stateNode.containerInfo),na(I,qe,N.memoizedState.cache),Da();break;case 27:case 5:Pe(I);break;case 4:$e(I,I.stateNode.containerInfo);break;case 10:na(I,I.type,I.memoizedProps.value);break;case 31:if(I.memoizedState!==null)return I.flags|=128,yc(I),null;break;case 13:var H=I.memoizedState;if(H!==null)return H.dehydrated!==null?(mi(I),I.flags|=128,null):($&I.child.childLanes)!==0?Qd(N,I,$):(mi(I),N=Ga(N,I,$),N!==null?N.sibling:null);mi(I);break;case 19:var Z=(N.flags&128)!==0;if(H=($&I.childLanes)!==0,H||(Pa(N,I,$,!1),H=($&I.childLanes)!==0),Z){if(H)return Jd(N,I,$);I.flags|=128}if(Z=I.memoizedState,Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),Ae(Hr,Hr.current),H)break;return null;case 22:return I.lanes=0,Ud(N,I,$,I.pendingProps);case 24:na(I,qe,N.memoizedState.cache)}return Ga(N,I,$)}function eh(N,I,$){if(N!==null)if(N.memoizedProps!==I.pendingProps)sn=!0;else{if(!Kc(N,$)&&(I.flags&128)===0)return sn=!1,Vp(N,I,$);sn=(N.flags&131072)!==0}else sn=!1,Qt&&(I.flags&1048576)!==0&&Gi(I,Ui,I.index);switch(I.lanes=0,I.tag){case 16:e:{var H=I.pendingProps;if(N=Xi(I.elementType),I.type=N,typeof N=="function")za(N)?(H=eo(N,H),I.tag=1,I=Yd(null,I,N,H,$)):(I.tag=0,I=Fc(null,I,N,H,$));else{if(N!=null){var Z=N.$$typeof;if(Z===X){I.tag=11,I=zd(null,I,N,H,$);break e}else if(Z===Q){I.tag=14,I=Vd(null,I,N,H,$);break e}}throw I=ye(N)||N,Error(R(306,I,""))}}return I;case 0:return Fc(N,I,I.type,I.pendingProps,$);case 1:return H=I.type,Z=eo(H,I.pendingProps),Yd(N,I,H,Z,$);case 3:e:{if($e(I,I.stateNode.containerInfo),N===null)throw Error(R(387));H=I.pendingProps;var te=I.memoizedState;Z=te.element,hc(N,I),As(I,H,null,$);var pe=I.memoizedState;if(H=pe.cache,na(I,qe,H),H!==te.cache&&ws(I,[qe],$,!0),Ts(),H=pe.element,te.isDehydrated)if(te={element:H,isDehydrated:!1,cache:pe.cache},I.updateQueue.baseState=te,I.memoizedState=te,I.flags&256){I=Xd(N,I,H,$);break e}else if(H!==Z){Z=Nn(Error(R(424)),I),qn(Z),I=Xd(N,I,H,$);break e}else{switch(N=I.stateNode.containerInfo,N.nodeType){case 9:N=N.body;break;default:N=N.nodeName==="HTML"?N.ownerDocument.body:N}for(vr=ia(N.firstChild),nn=I,Qt=!0,ra=null,Cn=!0,$=Uf(I,null,H,$),I.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling}else{if(Da(),H===Z){I=Ga(N,I,$);break e}yn(N,I,H,$)}I=I.child}return I;case 26:return Ul(N,I),N===null?($=fp(I.type,null,I.pendingProps,null))?I.memoizedState=$:Qt||($=I.type,N=I.pendingProps,H=hu(Oe.current).createElement($),H[Tr]=I,H[zr]=N,bn(H,$,N),Lr(H),I.stateNode=H):I.memoizedState=fp(I.type,N.memoizedProps,I.pendingProps,N.memoizedState),null;case 27:return Pe(I),N===null&&Qt&&(H=I.stateNode=lp(I.type,I.pendingProps,Oe.current),nn=I,Cn=!0,Z=vr,_i(I.type)?(Tf=Z,vr=ia(H.firstChild)):vr=Z),yn(N,I,I.pendingProps.children,$),Ul(N,I),N===null&&(I.flags|=4194304),I.child;case 5:return N===null&&Qt&&((Z=H=vr)&&(H=bg(H,I.type,I.pendingProps,Cn),H!==null?(I.stateNode=H,nn=I,vr=ia(H.firstChild),Cn=!1,Z=!0):Z=!1),Z||va(I)),Pe(I),Z=I.type,te=I.pendingProps,pe=N!==null?N.memoizedProps:null,H=te.children,Ef(Z,te)?H=null:pe!==null&&Ef(Z,pe)&&(I.flags|=32),I.memoizedState!==null&&(Z=xc(N,I,Np,null,null,$),Ys._currentValue=Z),Ul(N,I),yn(N,I,H,$),I.child;case 6:return N===null&&Qt&&((N=$=vr)&&($=xg($,I.pendingProps,Cn),$!==null?(I.stateNode=$,nn=I,vr=null,N=!0):N=!1),N||va(I)),null;case 13:return Qd(N,I,$);case 4:return $e(I,I.stateNode.containerInfo),H=I.pendingProps,N===null?I.child=Zi(I,null,H,$):yn(N,I,H,$),I.child;case 11:return zd(N,I,I.type,I.pendingProps,$);case 7:return yn(N,I,I.pendingProps,$),I.child;case 8:return yn(N,I,I.pendingProps.children,$),I.child;case 12:return yn(N,I,I.pendingProps.children,$),I.child;case 10:return H=I.pendingProps,na(I,I.type,H.value),yn(N,I,H.children,$),I.child;case 9:return Z=I.type._context,H=I.pendingProps.children,Na(I),Z=Vr(Z),H=H(Z),I.flags|=1,yn(N,I,H,$),I.child;case 14:return Vd(N,I,I.type,I.pendingProps,$);case 15:return Hd(N,I,I.type,I.pendingProps,$);case 19:return Jd(N,I,$);case 31:return zp(N,I,$);case 22:return Ud(N,I,$,I.pendingProps);case 24:return Na(I),H=Vr(qe),N===null?(Z=cc(),Z===null&&(Z=Cr,te=Xe(),Z.pooledCache=te,te.refCount++,te!==null&&(Z.pooledCacheLanes|=$),Z=te),I.memoizedState={parent:H,cache:Z},dc(I),na(I,qe,Z)):((N.lanes&$)!==0&&(hc(N,I),As(I,null,null,$),Ts()),Z=N.memoizedState,te=I.memoizedState,Z.parent!==H?(Z={parent:H,cache:H},I.memoizedState=Z,I.lanes===0&&(I.memoizedState=I.updateQueue.baseState=Z),na(I,qe,H)):(H=te.cache,na(I,qe,H),H!==Z.cache&&ws(I,[qe],$,!0))),yn(N,I,I.pendingProps.children,$),I.child;case 29:throw I.pendingProps}throw Error(R(156,I.tag))}function Ka(N){N.flags|=4}function Wc(N,I,$,H,Z){if((I=(N.mode&32)!==0)&&(I=!1),I){if(N.flags|=16777216,(Z&335544128)===Z)if(N.stateNode.complete)N.flags|=8192;else if(Th())N.flags|=8192;else throw Qi=Ml,fc}else N.flags&=-16777217}function th(N,I){if(I.type!=="stylesheet"||(I.state.loading&4)!==0)N.flags&=-16777217;else if(N.flags|=16777216,!mp(I))if(Th())N.flags|=8192;else throw Qi=Ml,fc}function Wl(N,I){I!==null&&(N.flags|=4),N.flags&16384&&(I=N.tag!==22?It():536870912,N.lanes|=I,Po|=I)}function Ns(N,I){if(!Qt)switch(N.tailMode){case"hidden":I=N.tail;for(var $=null;I!==null;)I.alternate!==null&&($=I),I=I.sibling;$===null?N.tail=null:$.sibling=null;break;case"collapsed":$=N.tail;for(var H=null;$!==null;)$.alternate!==null&&(H=$),$=$.sibling;H===null?I||N.tail===null?N.tail=null:N.tail.sibling=null:H.sibling=null}}function Or(N){var I=N.alternate!==null&&N.alternate.child===N.child,$=0,H=0;if(I)for(var Z=N.child;Z!==null;)$|=Z.lanes|Z.childLanes,H|=Z.subtreeFlags&65011712,H|=Z.flags&65011712,Z.return=N,Z=Z.sibling;else for(Z=N.child;Z!==null;)$|=Z.lanes|Z.childLanes,H|=Z.subtreeFlags,H|=Z.flags,Z.return=N,Z=Z.sibling;return N.subtreeFlags|=H,N.childLanes=$,I}function Hp(N,I,$){var H=I.pendingProps;switch(xs(I),I.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(I),null;case 1:return Or(I),null;case 3:return $=I.stateNode,H=null,N!==null&&(H=N.memoizedState.cache),I.memoizedState.cache!==H&&(I.flags|=2048),ba(qe),Be(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(N===null||N.child===null)&&(fi(I)?Ka(I):N===null||N.memoizedState.isDehydrated&&(I.flags&256)===0||(I.flags|=1024,di())),Or(I),null;case 26:var Z=I.type,te=I.memoizedState;return N===null?(Ka(I),te!==null?(Or(I),th(I,te)):(Or(I),Wc(I,Z,null,H,$))):te?te!==N.memoizedState?(Ka(I),Or(I),th(I,te)):(Or(I),I.flags&=-16777217):(N=N.memoizedProps,N!==H&&Ka(I),Or(I),Wc(I,Z,N,H,$)),null;case 27:if(De(I),$=Oe.current,Z=I.type,N!==null&&I.stateNode!=null)N.memoizedProps!==H&&Ka(I);else{if(!H){if(I.stateNode===null)throw Error(R(166));return Or(I),null}N=Se.current,fi(I)?Rl(I):(N=lp(Z,H,$),I.stateNode=N,Ka(I))}return Or(I),null;case 5:if(De(I),Z=I.type,N!==null&&I.stateNode!=null)N.memoizedProps!==H&&Ka(I);else{if(!H){if(I.stateNode===null)throw Error(R(166));return Or(I),null}if(te=Se.current,fi(I))Rl(I);else{var pe=hu(Oe.current);switch(te){case 1:te=pe.createElementNS("http://www.w3.org/2000/svg",Z);break;case 2:te=pe.createElementNS("http://www.w3.org/1998/Math/MathML",Z);break;default:switch(Z){case"svg":te=pe.createElementNS("http://www.w3.org/2000/svg",Z);break;case"math":te=pe.createElementNS("http://www.w3.org/1998/Math/MathML",Z);break;case"script":te=pe.createElement("div"),te.innerHTML="<script><\/script>",te=te.removeChild(te.firstChild);break;case"select":te=typeof H.is=="string"?pe.createElement("select",{is:H.is}):pe.createElement("select"),H.multiple?te.multiple=!0:H.size&&(te.size=H.size);break;default:te=typeof H.is=="string"?pe.createElement(Z,{is:H.is}):pe.createElement(Z)}}te[Tr]=I,te[zr]=H;e:for(pe=I.child;pe!==null;){if(pe.tag===5||pe.tag===6)te.appendChild(pe.stateNode);else if(pe.tag!==4&&pe.tag!==27&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===I)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===I)break e;pe=pe.return}pe.sibling.return=pe.return,pe=pe.sibling}I.stateNode=te;e:switch(bn(te,Z,H),Z){case"button":case"input":case"select":case"textarea":H=!!H.autoFocus;break e;case"img":H=!0;break e;default:H=!1}H&&Ka(I)}}return Or(I),Wc(I,I.type,N===null?null:N.memoizedProps,I.pendingProps,$),null;case 6:if(N&&I.stateNode!=null)N.memoizedProps!==H&&Ka(I);else{if(typeof H!="string"&&I.stateNode===null)throw Error(R(166));if(N=Oe.current,fi(I)){if(N=I.stateNode,$=I.memoizedProps,H=null,Z=nn,Z!==null)switch(Z.tag){case 27:case 5:H=Z.memoizedProps}N[Tr]=I,N=!!(N.nodeValue===$||H!==null&&H.suppressHydrationWarning===!0||Qh(N.nodeValue,$)),N||va(I,!0)}else N=hu(N).createTextNode(H),N[Tr]=I,I.stateNode=N}return Or(I),null;case 31:if($=I.memoizedState,N===null||N.memoizedState!==null){if(H=fi(I),$!==null){if(N===null){if(!H)throw Error(R(318));if(N=I.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(R(557));N[Tr]=I}else Da(),(I.flags&128)===0&&(I.memoizedState=null),I.flags|=4;Or(I),N=!1}else $=di(),N!==null&&N.memoizedState!==null&&(N.memoizedState.hydrationErrors=$),N=!0;if(!N)return I.flags&256?(Gn(I),I):(Gn(I),null);if((I.flags&128)!==0)throw Error(R(558))}return Or(I),null;case 13:if(H=I.memoizedState,N===null||N.memoizedState!==null&&N.memoizedState.dehydrated!==null){if(Z=fi(I),H!==null&&H.dehydrated!==null){if(N===null){if(!Z)throw Error(R(318));if(Z=I.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(R(317));Z[Tr]=I}else Da(),(I.flags&128)===0&&(I.memoizedState=null),I.flags|=4;Or(I),Z=!1}else Z=di(),N!==null&&N.memoizedState!==null&&(N.memoizedState.hydrationErrors=Z),Z=!0;if(!Z)return I.flags&256?(Gn(I),I):(Gn(I),null)}return Gn(I),(I.flags&128)!==0?(I.lanes=$,I):($=H!==null,N=N!==null&&N.memoizedState!==null,$&&(H=I.child,Z=null,H.alternate!==null&&H.alternate.memoizedState!==null&&H.alternate.memoizedState.cachePool!==null&&(Z=H.alternate.memoizedState.cachePool.pool),te=null,H.memoizedState!==null&&H.memoizedState.cachePool!==null&&(te=H.memoizedState.cachePool.pool),te!==Z&&(H.flags|=2048)),$!==N&&$&&(I.child.flags|=8192),Wl(I,I.updateQueue),Or(I),null);case 4:return Be(),N===null&&vf(I.stateNode.containerInfo),Or(I),null;case 10:return ba(I.type),Or(I),null;case 19:if(xe(Hr),H=I.memoizedState,H===null)return Or(I),null;if(Z=(I.flags&128)!==0,te=H.rendering,te===null)if(Z)Ns(H,!1);else{if($r!==0||N!==null&&(N.flags&128)!==0)for(N=I.child;N!==null;){if(te=Nl(N),te!==null){for(I.flags|=128,Ns(H,!1),N=te.updateQueue,I.updateQueue=N,Wl(I,N),I.subtreeFlags=0,N=$,$=I.child;$!==null;)vs($,N),$=$.sibling;return Ae(Hr,Hr.current&1|2),Qt&&ma(I,H.treeForkCount),I.child}N=N.sibling}H.tail!==null&&St()>nu&&(I.flags|=128,Z=!0,Ns(H,!1),I.lanes=4194304)}else{if(!Z)if(N=Nl(te),N!==null){if(I.flags|=128,Z=!0,N=N.updateQueue,I.updateQueue=N,Wl(I,N),Ns(H,!0),H.tail===null&&H.tailMode==="hidden"&&!te.alternate&&!Qt)return Or(I),null}else 2*St()-H.renderingStartTime>nu&&$!==536870912&&(I.flags|=128,Z=!0,Ns(H,!1),I.lanes=4194304);H.isBackwards?(te.sibling=I.child,I.child=te):(N=H.last,N!==null?N.sibling=te:I.child=te,H.last=te)}return H.tail!==null?(N=H.tail,H.rendering=N,H.tail=N.sibling,H.renderingStartTime=St(),N.sibling=null,$=Hr.current,Ae(Hr,Z?$&1|2:$&1),Qt&&ma(I,H.treeForkCount),N):(Or(I),null);case 22:case 23:return Gn(I),vc(),H=I.memoizedState!==null,N!==null?N.memoizedState!==null!==H&&(I.flags|=8192):H&&(I.flags|=8192),H?($&536870912)!==0&&(I.flags&128)===0&&(Or(I),I.subtreeFlags&6&&(I.flags|=8192)):Or(I),$=I.updateQueue,$!==null&&Wl(I,$.retryQueue),$=null,N!==null&&N.memoizedState!==null&&N.memoizedState.cachePool!==null&&($=N.memoizedState.cachePool.pool),H=null,I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(H=I.memoizedState.cachePool.pool),H!==$&&(I.flags|=2048),N!==null&&xe(Yi),null;case 24:return $=null,N!==null&&($=N.memoizedState.cache),I.memoizedState.cache!==$&&(I.flags|=2048),ba(qe),Or(I),null;case 25:return null;case 30:return null}throw Error(R(156,I.tag))}function Up(N,I){switch(xs(I),I.tag){case 1:return N=I.flags,N&65536?(I.flags=N&-65537|128,I):null;case 3:return ba(qe),Be(),N=I.flags,(N&65536)!==0&&(N&128)===0?(I.flags=N&-65537|128,I):null;case 26:case 27:case 5:return De(I),null;case 31:if(I.memoizedState!==null){if(Gn(I),I.alternate===null)throw Error(R(340));Da()}return N=I.flags,N&65536?(I.flags=N&-65537|128,I):null;case 13:if(Gn(I),N=I.memoizedState,N!==null&&N.dehydrated!==null){if(I.alternate===null)throw Error(R(340));Da()}return N=I.flags,N&65536?(I.flags=N&-65537|128,I):null;case 19:return xe(Hr),null;case 4:return Be(),null;case 10:return ba(I.type),null;case 22:case 23:return Gn(I),vc(),N!==null&&xe(Yi),N=I.flags,N&65536?(I.flags=N&-65537|128,I):null;case 24:return ba(qe),null;case 25:return null;default:return null}}function rh(N,I){switch(xs(I),I.tag){case 3:ba(qe),Be();break;case 26:case 27:case 5:De(I);break;case 4:Be();break;case 31:I.memoizedState!==null&&Gn(I);break;case 13:Gn(I);break;case 19:xe(Hr);break;case 10:ba(I.type);break;case 22:case 23:Gn(I),vc(),N!==null&&xe(Yi);break;case 24:ba(qe)}}function Ls(N,I){try{var $=I.updateQueue,H=$!==null?$.lastEffect:null;if(H!==null){var Z=H.next;$=Z;do{if(($.tag&N)===N){H=void 0;var te=$.create,pe=$.inst;H=te(),pe.destroy=H}$=$.next}while($!==Z)}}catch(Te){mr(I,I.return,Te)}}function yi(N,I,$){try{var H=I.updateQueue,Z=H!==null?H.lastEffect:null;if(Z!==null){var te=Z.next;H=te;do{if((H.tag&N)===N){var pe=H.inst,Te=pe.destroy;if(Te!==void 0){pe.destroy=void 0,Z=I;var Ie=$,Ye=Te;try{Ye()}catch(at){mr(Z,Ie,at)}}}H=H.next}while(H!==te)}}catch(at){mr(I,I.return,at)}}function nh(N){var I=N.updateQueue;if(I!==null){var $=N.stateNode;try{Kf(I,$)}catch(H){mr(N,N.return,H)}}}function ah(N,I,$){$.props=eo(N.type,N.memoizedProps),$.state=N.memoizedState;try{$.componentWillUnmount()}catch(H){mr(N,I,H)}}function qs(N,I){try{var $=N.ref;if($!==null){switch(N.tag){case 26:case 27:case 5:var H=N.stateNode;break;case 30:H=N.stateNode;break;default:H=N.stateNode}typeof $=="function"?N.refCleanup=$(H):$.current=H}}catch(Z){mr(N,I,Z)}}function La(N,I){var $=N.ref,H=N.refCleanup;if($!==null)if(typeof H=="function")try{H()}catch(Z){mr(N,I,Z)}finally{N.refCleanup=null,N=N.alternate,N!=null&&(N.refCleanup=null)}else if(typeof $=="function")try{$(null)}catch(Z){mr(N,I,Z)}else $.current=null}function ih(N){var I=N.type,$=N.memoizedProps,H=N.stateNode;try{e:switch(I){case"button":case"input":case"select":case"textarea":$.autoFocus&&H.focus();break e;case"img":$.src?H.src=$.src:$.srcSet&&(H.srcset=$.srcSet)}}catch(Z){mr(N,N.return,Z)}}function Yc(N,I,$){try{var H=N.stateNode;hg(H,N.type,$,I),H[zr]=I}catch(Z){mr(N,N.return,Z)}}function oh(N){return N.tag===5||N.tag===3||N.tag===26||N.tag===27&&_i(N.type)||N.tag===4}function Xc(N){e:for(;;){for(;N.sibling===null;){if(N.return===null||oh(N.return))return null;N=N.return}for(N.sibling.return=N.return,N=N.sibling;N.tag!==5&&N.tag!==6&&N.tag!==18;){if(N.tag===27&&_i(N.type)||N.flags&2||N.child===null||N.tag===4)continue e;N.child.return=N,N=N.child}if(!(N.flags&2))return N.stateNode}}function Qc(N,I,$){var H=N.tag;if(H===5||H===6)N=N.stateNode,I?($.nodeType===9?$.body:$.nodeName==="HTML"?$.ownerDocument.body:$).insertBefore(N,I):(I=$.nodeType===9?$.body:$.nodeName==="HTML"?$.ownerDocument.body:$,I.appendChild(N),$=$._reactRootContainer,$!=null||I.onclick!==null||(I.onclick=ua));else if(H!==4&&(H===27&&_i(N.type)&&($=N.stateNode,I=null),N=N.child,N!==null))for(Qc(N,I,$),N=N.sibling;N!==null;)Qc(N,I,$),N=N.sibling}function Yl(N,I,$){var H=N.tag;if(H===5||H===6)N=N.stateNode,I?$.insertBefore(N,I):$.appendChild(N);else if(H!==4&&(H===27&&_i(N.type)&&($=N.stateNode),N=N.child,N!==null))for(Yl(N,I,$),N=N.sibling;N!==null;)Yl(N,I,$),N=N.sibling}function sh(N){var I=N.stateNode,$=N.memoizedProps;try{for(var H=N.type,Z=I.attributes;Z.length;)I.removeAttributeNode(Z[0]);bn(I,H,$),I[Tr]=N,I[zr]=$}catch(te){mr(N,N.return,te)}}var Wa=!1,ln=!1,Zc=!1,lh=typeof WeakSet=="function"?WeakSet:Set,vn=null;function Gp(N,I){if(N=N.containerInfo,xf=xu,N=is(N),os(N)){if("selectionStart"in N)var $={start:N.selectionStart,end:N.selectionEnd};else e:{$=($=N.ownerDocument)&&$.defaultView||window;var H=$.getSelection&&$.getSelection();if(H&&H.rangeCount!==0){$=H.anchorNode;var Z=H.anchorOffset,te=H.focusNode;H=H.focusOffset;try{$.nodeType,te.nodeType}catch{$=null;break e}var pe=0,Te=-1,Ie=-1,Ye=0,at=0,ct=N,Je=null;t:for(;;){for(var rt;ct!==$||Z!==0&&ct.nodeType!==3||(Te=pe+Z),ct!==te||H!==0&&ct.nodeType!==3||(Ie=pe+H),ct.nodeType===3&&(pe+=ct.nodeValue.length),(rt=ct.firstChild)!==null;)Je=ct,ct=rt;for(;;){if(ct===N)break t;if(Je===$&&++Ye===Z&&(Te=pe),Je===te&&++at===H&&(Ie=pe),(rt=ct.nextSibling)!==null)break;ct=Je,Je=ct.parentNode}ct=rt}$=Te===-1||Ie===-1?null:{start:Te,end:Ie}}else $=null}$=$||{start:0,end:0}}else $=null;for(Sf={focusedElem:N,selectionRange:$},xu=!1,vn=I;vn!==null;)if(I=vn,N=I.child,(I.subtreeFlags&1028)!==0&&N!==null)N.return=I,vn=N;else for(;vn!==null;){switch(I=vn,te=I.alternate,N=I.flags,I.tag){case 0:if((N&4)!==0&&(N=I.updateQueue,N=N!==null?N.events:null,N!==null))for($=0;$<N.length;$++)Z=N[$],Z.ref.impl=Z.nextImpl;break;case 11:case 15:break;case 1:if((N&1024)!==0&&te!==null){N=void 0,$=I,Z=te.memoizedProps,te=te.memoizedState,H=$.stateNode;try{var Dt=eo($.type,Z);N=H.getSnapshotBeforeUpdate(Dt,te),H.__reactInternalSnapshotBeforeUpdate=N}catch(Ft){mr($,$.return,Ft)}}break;case 3:if((N&1024)!==0){if(N=I.stateNode.containerInfo,$=N.nodeType,$===9)Cf(N);else if($===1)switch(N.nodeName){case"HEAD":case"HTML":case"BODY":Cf(N);break;default:N.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((N&1024)!==0)throw Error(R(163))}if(N=I.sibling,N!==null){N.return=I.return,vn=N;break}vn=I.return}}function uh(N,I,$){var H=$.flags;switch($.tag){case 0:case 11:case 15:Xa(N,$),H&4&&Ls(5,$);break;case 1:if(Xa(N,$),H&4)if(N=$.stateNode,I===null)try{N.componentDidMount()}catch(pe){mr($,$.return,pe)}else{var Z=eo($.type,I.memoizedProps);I=I.memoizedState;try{N.componentDidUpdate(Z,I,N.__reactInternalSnapshotBeforeUpdate)}catch(pe){mr($,$.return,pe)}}H&64&&nh($),H&512&&qs($,$.return);break;case 3:if(Xa(N,$),H&64&&(N=$.updateQueue,N!==null)){if(I=null,$.child!==null)switch($.child.tag){case 27:case 5:I=$.child.stateNode;break;case 1:I=$.child.stateNode}try{Kf(N,I)}catch(pe){mr($,$.return,pe)}}break;case 27:I===null&&H&4&&sh($);case 26:case 5:Xa(N,$),I===null&&H&4&&ih($),H&512&&qs($,$.return);break;case 12:Xa(N,$);break;case 31:Xa(N,$),H&4&&dh(N,$);break;case 13:Xa(N,$),H&4&&hh(N,$),H&64&&(N=$.memoizedState,N!==null&&(N=N.dehydrated,N!==null&&($=tg.bind(null,$),Sg(N,$))));break;case 22:if(H=$.memoizedState!==null||Wa,!H){I=I!==null&&I.memoizedState!==null||ln,Z=Wa;var te=ln;Wa=H,(ln=I)&&!te?Qa(N,$,($.subtreeFlags&8772)!==0):Xa(N,$),Wa=Z,ln=te}break;case 30:break;default:Xa(N,$)}}function ch(N){var I=N.alternate;I!==null&&(N.alternate=null,ch(I)),N.child=null,N.deletions=null,N.sibling=null,N.tag===5&&(I=N.stateNode,I!==null&&ti(I)),N.stateNode=null,N.return=null,N.dependencies=null,N.memoizedProps=null,N.memoizedState=null,N.pendingProps=null,N.stateNode=null,N.updateQueue=null}var Pr=null,In=!1;function Ya(N,I,$){for($=$.child;$!==null;)fh(N,I,$),$=$.sibling}function fh(N,I,$){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Re,$)}catch{}switch($.tag){case 26:ln||La($,I),Ya(N,I,$),$.memoizedState?$.memoizedState.count--:$.stateNode&&($=$.stateNode,$.parentNode.removeChild($));break;case 27:ln||La($,I);var H=Pr,Z=In;_i($.type)&&(Pr=$.stateNode,In=!1),Ya(N,I,$),Us($.stateNode),Pr=H,In=Z;break;case 5:ln||La($,I);case 6:if(H=Pr,Z=In,Pr=null,Ya(N,I,$),Pr=H,In=Z,Pr!==null)if(In)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild($.stateNode)}catch(te){mr($,I,te)}else try{Pr.removeChild($.stateNode)}catch(te){mr($,I,te)}break;case 18:Pr!==null&&(In?(N=Pr,np(N.nodeType===9?N.body:N.nodeName==="HTML"?N.ownerDocument.body:N,$.stateNode),jo(N)):np(Pr,$.stateNode));break;case 4:H=Pr,Z=In,Pr=$.stateNode.containerInfo,In=!0,Ya(N,I,$),Pr=H,In=Z;break;case 0:case 11:case 14:case 15:yi(2,$,I),ln||yi(4,$,I),Ya(N,I,$);break;case 1:ln||(La($,I),H=$.stateNode,typeof H.componentWillUnmount=="function"&&ah($,I,H)),Ya(N,I,$);break;case 21:Ya(N,I,$);break;case 22:ln=(H=ln)||$.memoizedState!==null,Ya(N,I,$),ln=H;break;default:Ya(N,I,$)}}function dh(N,I){if(I.memoizedState===null&&(N=I.alternate,N!==null&&(N=N.memoizedState,N!==null))){N=N.dehydrated;try{jo(N)}catch($){mr(I,I.return,$)}}}function hh(N,I){if(I.memoizedState===null&&(N=I.alternate,N!==null&&(N=N.memoizedState,N!==null&&(N=N.dehydrated,N!==null))))try{jo(N)}catch($){mr(I,I.return,$)}}function Kp(N){switch(N.tag){case 31:case 13:case 19:var I=N.stateNode;return I===null&&(I=N.stateNode=new lh),I;case 22:return N=N.stateNode,I=N._retryCache,I===null&&(I=N._retryCache=new lh),I;default:throw Error(R(435,N.tag))}}function eu(N,I){var $=Kp(N);I.forEach(function(H){if(!$.has(H)){$.add(H);var Z=rg.bind(null,N,H);H.then(Z,Z)}})}function Bn(N,I){var $=I.deletions;if($!==null)for(var H=0;H<$.length;H++){var Z=$[H],te=N,pe=I,Te=pe;e:for(;Te!==null;){switch(Te.tag){case 27:if(_i(Te.type)){Pr=Te.stateNode,In=!1;break e}break;case 5:Pr=Te.stateNode,In=!1;break e;case 3:case 4:Pr=Te.stateNode.containerInfo,In=!0;break e}Te=Te.return}if(Pr===null)throw Error(R(160));fh(te,pe,Z),Pr=null,In=!1,te=Z.alternate,te!==null&&(te.return=null),Z.return=null}if(I.subtreeFlags&13886)for(I=I.child;I!==null;)ph(I,N),I=I.sibling}var xa=null;function ph(N,I){var $=N.alternate,H=N.flags;switch(N.tag){case 0:case 11:case 14:case 15:Bn(I,N),$n(N),H&4&&(yi(3,N,N.return),Ls(3,N),yi(5,N,N.return));break;case 1:Bn(I,N),$n(N),H&512&&(ln||$===null||La($,$.return)),H&64&&Wa&&(N=N.updateQueue,N!==null&&(H=N.callbacks,H!==null&&($=N.shared.hiddenCallbacks,N.shared.hiddenCallbacks=$===null?H:$.concat(H))));break;case 26:var Z=xa;if(Bn(I,N),$n(N),H&512&&(ln||$===null||La($,$.return)),H&4){var te=$!==null?$.memoizedState:null;if(H=N.memoizedState,$===null)if(H===null)if(N.stateNode===null){e:{H=N.type,$=N.memoizedProps,Z=Z.ownerDocument||Z;t:switch(H){case"title":te=Z.getElementsByTagName("title")[0],(!te||te[Xr]||te[Tr]||te.namespaceURI==="http://www.w3.org/2000/svg"||te.hasAttribute("itemprop"))&&(te=Z.createElement(H),Z.head.insertBefore(te,Z.querySelector("head > title"))),bn(te,H,$),te[Tr]=N,Lr(te),H=te;break e;case"link":var pe=pp("link","href",Z).get(H+($.href||""));if(pe){for(var Te=0;Te<pe.length;Te++)if(te=pe[Te],te.getAttribute("href")===($.href==null||$.href===""?null:$.href)&&te.getAttribute("rel")===($.rel==null?null:$.rel)&&te.getAttribute("title")===($.title==null?null:$.title)&&te.getAttribute("crossorigin")===($.crossOrigin==null?null:$.crossOrigin)){pe.splice(Te,1);break t}}te=Z.createElement(H),bn(te,H,$),Z.head.appendChild(te);break;case"meta":if(pe=pp("meta","content",Z).get(H+($.content||""))){for(Te=0;Te<pe.length;Te++)if(te=pe[Te],te.getAttribute("content")===($.content==null?null:""+$.content)&&te.getAttribute("name")===($.name==null?null:$.name)&&te.getAttribute("property")===($.property==null?null:$.property)&&te.getAttribute("http-equiv")===($.httpEquiv==null?null:$.httpEquiv)&&te.getAttribute("charset")===($.charSet==null?null:$.charSet)){pe.splice(Te,1);break t}}te=Z.createElement(H),bn(te,H,$),Z.head.appendChild(te);break;default:throw Error(R(468,H))}te[Tr]=N,Lr(te),H=te}N.stateNode=H}else gp(Z,N.type,N.stateNode);else N.stateNode=hp(Z,H,N.memoizedProps);else te!==H?(te===null?$.stateNode!==null&&($=$.stateNode,$.parentNode.removeChild($)):te.count--,H===null?gp(Z,N.type,N.stateNode):hp(Z,H,N.memoizedProps)):H===null&&N.stateNode!==null&&Yc(N,N.memoizedProps,$.memoizedProps)}break;case 27:Bn(I,N),$n(N),H&512&&(ln||$===null||La($,$.return)),$!==null&&H&4&&Yc(N,N.memoizedProps,$.memoizedProps);break;case 5:if(Bn(I,N),$n(N),H&512&&(ln||$===null||La($,$.return)),N.flags&32){Z=N.stateNode;try{ni(Z,"")}catch(Dt){mr(N,N.return,Dt)}}H&4&&N.stateNode!=null&&(Z=N.memoizedProps,Yc(N,Z,$!==null?$.memoizedProps:Z)),H&1024&&(Zc=!0);break;case 6:if(Bn(I,N),$n(N),H&4){if(N.stateNode===null)throw Error(R(162));H=N.memoizedProps,$=N.stateNode;try{$.nodeValue=H}catch(Dt){mr(N,N.return,Dt)}}break;case 3:if(mu=null,Z=xa,xa=pu(I.containerInfo),Bn(I,N),xa=Z,$n(N),H&4&&$!==null&&$.memoizedState.isDehydrated)try{jo(I.containerInfo)}catch(Dt){mr(N,N.return,Dt)}Zc&&(Zc=!1,gh(N));break;case 4:H=xa,xa=pu(N.stateNode.containerInfo),Bn(I,N),$n(N),xa=H;break;case 12:Bn(I,N),$n(N);break;case 31:Bn(I,N),$n(N),H&4&&(H=N.updateQueue,H!==null&&(N.updateQueue=null,eu(N,H)));break;case 13:Bn(I,N),$n(N),N.child.flags&8192&&N.memoizedState!==null!=($!==null&&$.memoizedState!==null)&&(ru=St()),H&4&&(H=N.updateQueue,H!==null&&(N.updateQueue=null,eu(N,H)));break;case 22:Z=N.memoizedState!==null;var Ie=$!==null&&$.memoizedState!==null,Ye=Wa,at=ln;if(Wa=Ye||Z,ln=at||Ie,Bn(I,N),ln=at,Wa=Ye,$n(N),H&8192)e:for(I=N.stateNode,I._visibility=Z?I._visibility&-2:I._visibility|1,Z&&($===null||Ie||Wa||ln||to(N)),$=null,I=N;;){if(I.tag===5||I.tag===26){if($===null){Ie=$=I;try{if(te=Ie.stateNode,Z)pe=te.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Te=Ie.stateNode;var ct=Ie.memoizedProps.style,Je=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;Te.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(Dt){mr(Ie,Ie.return,Dt)}}}else if(I.tag===6){if($===null){Ie=I;try{Ie.stateNode.nodeValue=Z?"":Ie.memoizedProps}catch(Dt){mr(Ie,Ie.return,Dt)}}}else if(I.tag===18){if($===null){Ie=I;try{var rt=Ie.stateNode;Z?ap(rt,!0):ap(Ie.stateNode,!1)}catch(Dt){mr(Ie,Ie.return,Dt)}}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===N)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===N)break e;for(;I.sibling===null;){if(I.return===null||I.return===N)break e;$===I&&($=null),I=I.return}$===I&&($=null),I.sibling.return=I.return,I=I.sibling}H&4&&(H=N.updateQueue,H!==null&&($=H.retryQueue,$!==null&&(H.retryQueue=null,eu(N,$))));break;case 19:Bn(I,N),$n(N),H&4&&(H=N.updateQueue,H!==null&&(N.updateQueue=null,eu(N,H)));break;case 30:break;case 21:break;default:Bn(I,N),$n(N)}}function $n(N){var I=N.flags;if(I&2){try{for(var $,H=N.return;H!==null;){if(oh(H)){$=H;break}H=H.return}if($==null)throw Error(R(160));switch($.tag){case 27:var Z=$.stateNode,te=Xc(N);Yl(N,te,Z);break;case 5:var pe=$.stateNode;$.flags&32&&(ni(pe,""),$.flags&=-33);var Te=Xc(N);Yl(N,Te,pe);break;case 3:case 4:var Ie=$.stateNode.containerInfo,Ye=Xc(N);Qc(N,Ye,Ie);break;default:throw Error(R(161))}}catch(at){mr(N,N.return,at)}N.flags&=-3}I&4096&&(N.flags&=-4097)}function gh(N){if(N.subtreeFlags&1024)for(N=N.child;N!==null;){var I=N;gh(I),I.tag===5&&I.flags&1024&&I.stateNode.reset(),N=N.sibling}}function Xa(N,I){if(I.subtreeFlags&8772)for(I=I.child;I!==null;)uh(N,I.alternate,I),I=I.sibling}function to(N){for(N=N.child;N!==null;){var I=N;switch(I.tag){case 0:case 11:case 14:case 15:yi(4,I,I.return),to(I);break;case 1:La(I,I.return);var $=I.stateNode;typeof $.componentWillUnmount=="function"&&ah(I,I.return,$),to(I);break;case 27:Us(I.stateNode);case 26:case 5:La(I,I.return),to(I);break;case 22:I.memoizedState===null&&to(I);break;case 30:to(I);break;default:to(I)}N=N.sibling}}function Qa(N,I,$){for($=$&&(I.subtreeFlags&8772)!==0,I=I.child;I!==null;){var H=I.alternate,Z=N,te=I,pe=te.flags;switch(te.tag){case 0:case 11:case 15:Qa(Z,te,$),Ls(4,te);break;case 1:if(Qa(Z,te,$),H=te,Z=H.stateNode,typeof Z.componentDidMount=="function")try{Z.componentDidMount()}catch(Ye){mr(H,H.return,Ye)}if(H=te,Z=H.updateQueue,Z!==null){var Te=H.stateNode;try{var Ie=Z.shared.hiddenCallbacks;if(Ie!==null)for(Z.shared.hiddenCallbacks=null,Z=0;Z<Ie.length;Z++)Gf(Ie[Z],Te)}catch(Ye){mr(H,H.return,Ye)}}$&&pe&64&&nh(te),qs(te,te.return);break;case 27:sh(te);case 26:case 5:Qa(Z,te,$),$&&H===null&&pe&4&&ih(te),qs(te,te.return);break;case 12:Qa(Z,te,$);break;case 31:Qa(Z,te,$),$&&pe&4&&dh(Z,te);break;case 13:Qa(Z,te,$),$&&pe&4&&hh(Z,te);break;case 22:te.memoizedState===null&&Qa(Z,te,$),qs(te,te.return);break;case 30:break;default:Qa(Z,te,$)}I=I.sibling}}function Jc(N,I){var $=null;N!==null&&N.memoizedState!==null&&N.memoizedState.cachePool!==null&&($=N.memoizedState.cachePool.pool),N=null,I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(N=I.memoizedState.cachePool.pool),N!==$&&(N!=null&&N.refCount++,$!=null&&Vt($))}function ef(N,I){N=null,I.alternate!==null&&(N=I.alternate.memoizedState.cache),I=I.memoizedState.cache,I!==N&&(I.refCount++,N!=null&&Vt(N))}function Sa(N,I,$,H){if(I.subtreeFlags&10256)for(I=I.child;I!==null;)mh(N,I,$,H),I=I.sibling}function mh(N,I,$,H){var Z=I.flags;switch(I.tag){case 0:case 11:case 15:Sa(N,I,$,H),Z&2048&&Ls(9,I);break;case 1:Sa(N,I,$,H);break;case 3:Sa(N,I,$,H),Z&2048&&(N=null,I.alternate!==null&&(N=I.alternate.memoizedState.cache),I=I.memoizedState.cache,I!==N&&(I.refCount++,N!=null&&Vt(N)));break;case 12:if(Z&2048){Sa(N,I,$,H),N=I.stateNode;try{var te=I.memoizedProps,pe=te.id,Te=te.onPostCommit;typeof Te=="function"&&Te(pe,I.alternate===null?"mount":"update",N.passiveEffectDuration,-0)}catch(Ie){mr(I,I.return,Ie)}}else Sa(N,I,$,H);break;case 31:Sa(N,I,$,H);break;case 13:Sa(N,I,$,H);break;case 23:break;case 22:te=I.stateNode,pe=I.alternate,I.memoizedState!==null?te._visibility&2?Sa(N,I,$,H):Is(N,I):te._visibility&2?Sa(N,I,$,H):(te._visibility|=2,Mo(N,I,$,H,(I.subtreeFlags&10256)!==0||!1)),Z&2048&&Jc(pe,I);break;case 24:Sa(N,I,$,H),Z&2048&&ef(I.alternate,I);break;default:Sa(N,I,$,H)}}function Mo(N,I,$,H,Z){for(Z=Z&&((I.subtreeFlags&10256)!==0||!1),I=I.child;I!==null;){var te=N,pe=I,Te=$,Ie=H,Ye=pe.flags;switch(pe.tag){case 0:case 11:case 15:Mo(te,pe,Te,Ie,Z),Ls(8,pe);break;case 23:break;case 22:var at=pe.stateNode;pe.memoizedState!==null?at._visibility&2?Mo(te,pe,Te,Ie,Z):Is(te,pe):(at._visibility|=2,Mo(te,pe,Te,Ie,Z)),Z&&Ye&2048&&Jc(pe.alternate,pe);break;case 24:Mo(te,pe,Te,Ie,Z),Z&&Ye&2048&&ef(pe.alternate,pe);break;default:Mo(te,pe,Te,Ie,Z)}I=I.sibling}}function Is(N,I){if(I.subtreeFlags&10256)for(I=I.child;I!==null;){var $=N,H=I,Z=H.flags;switch(H.tag){case 22:Is($,H),Z&2048&&Jc(H.alternate,H);break;case 24:Is($,H),Z&2048&&ef(H.alternate,H);break;default:Is($,H)}I=I.sibling}}var Bs=8192;function Oo(N,I,$){if(N.subtreeFlags&Bs)for(N=N.child;N!==null;)vh(N,I,$),N=N.sibling}function vh(N,I,$){switch(N.tag){case 26:Oo(N,I,$),N.flags&Bs&&N.memoizedState!==null&&Pg($,xa,N.memoizedState,N.memoizedProps);break;case 5:Oo(N,I,$);break;case 3:case 4:var H=xa;xa=pu(N.stateNode.containerInfo),Oo(N,I,$),xa=H;break;case 22:N.memoizedState===null&&(H=N.alternate,H!==null&&H.memoizedState!==null?(H=Bs,Bs=16777216,Oo(N,I,$),Bs=H):Oo(N,I,$));break;default:Oo(N,I,$)}}function yh(N){var I=N.alternate;if(I!==null&&(N=I.child,N!==null)){I.child=null;do I=N.sibling,N.sibling=null,N=I;while(N!==null)}}function $s(N){var I=N.deletions;if((N.flags&16)!==0){if(I!==null)for(var $=0;$<I.length;$++){var H=I[$];vn=H,xh(H,N)}yh(N)}if(N.subtreeFlags&10256)for(N=N.child;N!==null;)bh(N),N=N.sibling}function bh(N){switch(N.tag){case 0:case 11:case 15:$s(N),N.flags&2048&&yi(9,N,N.return);break;case 3:$s(N);break;case 12:$s(N);break;case 22:var I=N.stateNode;N.memoizedState!==null&&I._visibility&2&&(N.return===null||N.return.tag!==13)?(I._visibility&=-3,tu(N)):$s(N);break;default:$s(N)}}function tu(N){var I=N.deletions;if((N.flags&16)!==0){if(I!==null)for(var $=0;$<I.length;$++){var H=I[$];vn=H,xh(H,N)}yh(N)}for(N=N.child;N!==null;){switch(I=N,I.tag){case 0:case 11:case 15:yi(8,I,I.return),tu(I);break;case 22:$=I.stateNode,$._visibility&2&&($._visibility&=-3,tu(I));break;default:tu(I)}N=N.sibling}}function xh(N,I){for(;vn!==null;){var $=vn;switch($.tag){case 0:case 11:case 15:yi(8,$,I);break;case 23:case 22:if($.memoizedState!==null&&$.memoizedState.cachePool!==null){var H=$.memoizedState.cachePool.pool;H!=null&&H.refCount++}break;case 24:Vt($.memoizedState.cache)}if(H=$.child,H!==null)H.return=$,vn=H;else e:for($=N;vn!==null;){H=vn;var Z=H.sibling,te=H.return;if(ch(H),H===$){vn=null;break e}if(Z!==null){Z.return=te,vn=Z;break e}vn=te}}}var Wp={getCacheForType:function(N){var I=Vr(qe),$=I.data.get(N);return $===void 0&&($=N(),I.data.set(N,$)),$},cacheSignal:function(){return Vr(qe).controller.signal}},Yp=typeof WeakMap=="function"?WeakMap:Map,dr=0,Cr=null,Zt=null,nr=0,gr=0,Kn=null,bi=!1,Do=!1,tf=!1,Za=0,$r=0,xi=0,ro=0,rf=0,Wn=0,Po=0,Fs=null,Fn=null,nf=!1,ru=0,Sh=0,nu=1/0,au=null,Si=null,hn=0,Ei=null,No=null,Ja=0,af=0,of=null,Eh=null,js=0,sf=null;function Yn(){return(dr&2)!==0&&nr!==0?nr&-nr:ge.T!==null?hf():_r()}function wh(){if(Wn===0)if((nr&536870912)===0||Qt){var N=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),Wn=N}else Wn=536870912;return N=Un.current,N!==null&&(N.flags|=32),Wn}function jn(N,I,$){(N===Cr&&(gr===2||gr===9)||N.cancelPendingCommit!==null)&&(Lo(N,0),wi(N,nr,Wn,!1)),zt(N,$),((dr&2)===0||N!==Cr)&&(N===Cr&&((dr&2)===0&&(ro|=$),$r===4&&wi(N,nr,Wn,!1)),qa(N))}function Ch(N,I,$){if((dr&6)!==0)throw Error(R(327));var H=!$&&(I&127)===0&&(I&N.expiredLanes)===0||vt(N,I),Z=H?Zp(N,I):uf(N,I,!0),te=H;do{if(Z===0){Do&&!H&&wi(N,I,0,!1);break}else{if($=N.current.alternate,te&&!Xp($)){Z=uf(N,I,!1),te=!1;continue}if(Z===2){if(te=I,N.errorRecoveryDisabledLanes&te)var pe=0;else pe=N.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){I=pe;e:{var Te=N;Z=Fs;var Ie=Te.current.memoizedState.isDehydrated;if(Ie&&(Lo(Te,pe).flags|=256),pe=uf(Te,pe,!1),pe!==2){if(tf&&!Ie){Te.errorRecoveryDisabledLanes|=te,ro|=te,Z=4;break e}te=Fn,Fn=Z,te!==null&&(Fn===null?Fn=te:Fn.push.apply(Fn,te))}Z=pe}if(te=!1,Z!==2)continue}}if(Z===1){Lo(N,0),wi(N,I,0,!0);break}e:{switch(H=N,te=Z,te){case 0:case 1:throw Error(R(345));case 4:if((I&4194048)!==I)break;case 6:wi(H,I,Wn,!bi);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(R(329))}if((I&62914560)===I&&(Z=ru+300-St(),10<Z)){if(wi(H,I,Wn,!bi),yt(H,0,!0)!==0)break e;Ja=I,H.timeoutHandle=tp(_h.bind(null,H,$,Fn,au,nf,I,Wn,ro,Po,bi,te,"Throttled",-0,0),Z);break e}_h(H,$,Fn,au,nf,I,Wn,ro,Po,bi,te,null,-0,0)}}break}while(!0);qa(N)}function _h(N,I,$,H,Z,te,pe,Te,Ie,Ye,at,ct,Je,rt){if(N.timeoutHandle=-1,ct=I.subtreeFlags,ct&8192||(ct&16785408)===16785408){ct={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ua},vh(I,te,ct);var Dt=(te&62914560)===te?ru-St():(te&4194048)===te?Sh-St():0;if(Dt=Ng(ct,Dt),Dt!==null){Ja=te,N.cancelPendingCommit=Dt(Ph.bind(null,N,I,te,$,H,Z,pe,Te,Ie,at,ct,null,Je,rt)),wi(N,te,pe,!Ye);return}}Ph(N,I,te,$,H,Z,pe,Te,Ie)}function Xp(N){for(var I=N;;){var $=I.tag;if(($===0||$===11||$===15)&&I.flags&16384&&($=I.updateQueue,$!==null&&($=$.stores,$!==null)))for(var H=0;H<$.length;H++){var Z=$[H],te=Z.getSnapshot;Z=Z.value;try{if(!wn(te(),Z))return!1}catch{return!1}}if($=I.child,I.subtreeFlags&16384&&$!==null)$.return=I,I=$;else{if(I===N)break;for(;I.sibling===null;){if(I.return===null||I.return===N)return!0;I=I.return}I.sibling.return=I.return,I=I.sibling}}return!0}function wi(N,I,$,H){I&=~rf,I&=~ro,N.suspendedLanes|=I,N.pingedLanes&=~I,H&&(N.warmLanes|=I),H=N.expirationTimes;for(var Z=I;0<Z;){var te=31-Ze(Z),pe=1<<te;H[te]=-1,Z&=~pe}$!==0&&hr(N,$,I)}function iu(){return(dr&6)===0?(zs(0),!1):!0}function lf(){if(Zt!==null){if(gr===0)var N=Zt.return;else N=Zt,ya=Hn=null,wc(N),_o=null,Cs=0,N=Zt;for(;N!==null;)rh(N.alternate,N),N=N.return;Zt=null}}function Lo(N,I){var $=N.timeoutHandle;$!==-1&&(N.timeoutHandle=-1,mg($)),$=N.cancelPendingCommit,$!==null&&(N.cancelPendingCommit=null,$()),Ja=0,lf(),Cr=N,Zt=$=Pn(N.current,null),nr=I,gr=0,Kn=null,bi=!1,Do=vt(N,I),tf=!1,Po=Wn=rf=ro=xi=$r=0,Fn=Fs=null,nf=!1,(I&8)!==0&&(I|=I&32);var H=N.entangledLanes;if(H!==0)for(N=N.entanglements,H&=I;0<H;){var Z=31-Ze(H),te=1<<Z;I|=N[Z],H&=~te}return Za=I,li(),$}function Rh(N,I){Wt=null,ge.H=Ds,I===Co||I===kl?(I=zf(),gr=3):I===fc?(I=zf(),gr=4):gr=I===$c?8:I!==null&&typeof I=="object"&&typeof I.then=="function"?6:1,Kn=I,Zt===null&&($r=1,Vl(N,Nn(I,N.current)))}function Th(){var N=Un.current;return N===null?!0:(nr&4194048)===nr?aa===null:(nr&62914560)===nr||(nr&536870912)!==0?N===aa:!1}function Ah(){var N=ge.H;return ge.H=Ds,N===null?Ds:N}function kh(){var N=ge.A;return ge.A=Wp,N}function ou(){$r=4,bi||(nr&4194048)!==nr&&Un.current!==null||(Do=!0),(xi&134217727)===0&&(ro&134217727)===0||Cr===null||wi(Cr,nr,Wn,!1)}function uf(N,I,$){var H=dr;dr|=2;var Z=Ah(),te=kh();(Cr!==N||nr!==I)&&(au=null,Lo(N,I)),I=!1;var pe=$r;e:do try{if(gr!==0&&Zt!==null){var Te=Zt,Ie=Kn;switch(gr){case 8:lf(),pe=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(I=!0);var Ye=gr;if(gr=0,Kn=null,qo(N,Te,Ie,Ye),$&&Do){pe=0;break e}break;default:Ye=gr,gr=0,Kn=null,qo(N,Te,Ie,Ye)}}Qp(),pe=$r;break}catch(at){Rh(N,at)}while(!0);return I&&N.shellSuspendCounter++,ya=Hn=null,dr=H,ge.H=Z,ge.A=te,Zt===null&&(Cr=null,nr=0,li()),pe}function Qp(){for(;Zt!==null;)Mh(Zt)}function Zp(N,I){var $=dr;dr|=2;var H=Ah(),Z=kh();Cr!==N||nr!==I?(au=null,nu=St()+500,Lo(N,I)):Do=vt(N,I);e:do try{if(gr!==0&&Zt!==null){I=Zt;var te=Kn;t:switch(gr){case 1:gr=0,Kn=null,qo(N,I,te,1);break;case 2:case 9:if(Ff(te)){gr=0,Kn=null,Oh(I);break}I=function(){gr!==2&&gr!==9||Cr!==N||(gr=7),qa(N)},te.then(I,I);break e;case 3:gr=7;break e;case 4:gr=5;break e;case 7:Ff(te)?(gr=0,Kn=null,Oh(I)):(gr=0,Kn=null,qo(N,I,te,7));break;case 5:var pe=null;switch(Zt.tag){case 26:pe=Zt.memoizedState;case 5:case 27:var Te=Zt;if(pe?mp(pe):Te.stateNode.complete){gr=0,Kn=null;var Ie=Te.sibling;if(Ie!==null)Zt=Ie;else{var Ye=Te.return;Ye!==null?(Zt=Ye,su(Ye)):Zt=null}break t}}gr=0,Kn=null,qo(N,I,te,5);break;case 6:gr=0,Kn=null,qo(N,I,te,6);break;case 8:lf(),$r=6;break e;default:throw Error(R(462))}}Jp();break}catch(at){Rh(N,at)}while(!0);return ya=Hn=null,ge.H=H,ge.A=Z,dr=$,Zt!==null?0:(Cr=null,nr=0,li(),$r)}function Jp(){for(;Zt!==null&&!gt();)Mh(Zt)}function Mh(N){var I=eh(N.alternate,N,Za);N.memoizedProps=N.pendingProps,I===null?su(N):Zt=I}function Oh(N){var I=N,$=I.alternate;switch(I.tag){case 15:case 0:I=Wd($,I,I.pendingProps,I.type,void 0,nr);break;case 11:I=Wd($,I,I.pendingProps,I.type.render,I.ref,nr);break;case 5:wc(I);default:rh($,I),I=Zt=vs(I,Za),I=eh($,I,Za)}N.memoizedProps=N.pendingProps,I===null?su(N):Zt=I}function qo(N,I,$,H){ya=Hn=null,wc(I),_o=null,Cs=0;var Z=I.return;try{if(jp(N,Z,I,$,nr)){$r=1,Vl(N,Nn($,N.current)),Zt=null;return}}catch(te){if(Z!==null)throw Zt=Z,te;$r=1,Vl(N,Nn($,N.current)),Zt=null;return}I.flags&32768?(Qt||H===1?N=!0:Do||(nr&536870912)!==0?N=!1:(bi=N=!0,(H===2||H===9||H===3||H===6)&&(H=Un.current,H!==null&&H.tag===13&&(H.flags|=16384))),Dh(I,N)):su(I)}function su(N){var I=N;do{if((I.flags&32768)!==0){Dh(I,bi);return}N=I.return;var $=Hp(I.alternate,I,Za);if($!==null){Zt=$;return}if(I=I.sibling,I!==null){Zt=I;return}Zt=I=N}while(I!==null);$r===0&&($r=5)}function Dh(N,I){do{var $=Up(N.alternate,N);if($!==null){$.flags&=32767,Zt=$;return}if($=N.return,$!==null&&($.flags|=32768,$.subtreeFlags=0,$.deletions=null),!I&&(N=N.sibling,N!==null)){Zt=N;return}Zt=N=$}while(N!==null);$r=6,Zt=null}function Ph(N,I,$,H,Z,te,pe,Te,Ie){N.cancelPendingCommit=null;do lu();while(hn!==0);if((dr&6)!==0)throw Error(R(327));if(I!==null){if(I===N.current)throw Error(R(177));if(te=I.lanes|I.childLanes,te|=ps,ur(N,$,te,pe,Te,Ie),N===Cr&&(Zt=Cr=null,nr=0),No=I,Ei=N,Ja=$,af=te,of=Z,Eh=H,(I.subtreeFlags&10256)!==0||(I.flags&10256)!==0?(N.callbackNode=null,N.callbackPriority=0,ng(At,function(){return Bh(),null})):(N.callbackNode=null,N.callbackPriority=0),H=(I.flags&13878)!==0,(I.subtreeFlags&13878)!==0||H){H=ge.T,ge.T=null,Z=ve.p,ve.p=2,pe=dr,dr|=4;try{Gp(N,I,$)}finally{dr=pe,ve.p=Z,ge.T=H}}hn=1,Nh(),Lh(),qh()}}function Nh(){if(hn===1){hn=0;var N=Ei,I=No,$=(I.flags&13878)!==0;if((I.subtreeFlags&13878)!==0||$){$=ge.T,ge.T=null;var H=ve.p;ve.p=2;var Z=dr;dr|=4;try{ph(I,N);var te=Sf,pe=is(N.containerInfo),Te=te.focusedElem,Ie=te.selectionRange;if(pe!==Te&&Te&&Te.ownerDocument&&as(Te.ownerDocument.documentElement,Te)){if(Ie!==null&&os(Te)){var Ye=Ie.start,at=Ie.end;if(at===void 0&&(at=Ye),"selectionStart"in Te)Te.selectionStart=Ye,Te.selectionEnd=Math.min(at,Te.value.length);else{var ct=Te.ownerDocument||document,Je=ct&&ct.defaultView||window;if(Je.getSelection){var rt=Je.getSelection(),Dt=Te.textContent.length,Ft=Math.min(Ie.start,Dt),Er=Ie.end===void 0?Ft:Math.min(Ie.end,Dt);!rt.extend&&Ft>Er&&(pe=Er,Er=Ft,Ft=pe);var ze=xl(Te,Ft),Fe=xl(Te,Er);if(ze&&Fe&&(rt.rangeCount!==1||rt.anchorNode!==ze.node||rt.anchorOffset!==ze.offset||rt.focusNode!==Fe.node||rt.focusOffset!==Fe.offset)){var Ge=ct.createRange();Ge.setStart(ze.node,ze.offset),rt.removeAllRanges(),Ft>Er?(rt.addRange(Ge),rt.extend(Fe.node,Fe.offset)):(Ge.setEnd(Fe.node,Fe.offset),rt.addRange(Ge))}}}}for(ct=[],rt=Te;rt=rt.parentNode;)rt.nodeType===1&&ct.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof Te.focus=="function"&&Te.focus(),Te=0;Te<ct.length;Te++){var ut=ct[Te];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}xu=!!xf,Sf=xf=null}finally{dr=Z,ve.p=H,ge.T=$}}N.current=I,hn=2}}function Lh(){if(hn===2){hn=0;var N=Ei,I=No,$=(I.flags&8772)!==0;if((I.subtreeFlags&8772)!==0||$){$=ge.T,ge.T=null;var H=ve.p;ve.p=2;var Z=dr;dr|=4;try{uh(N,I.alternate,I)}finally{dr=Z,ve.p=H,ge.T=$}}hn=3}}function qh(){if(hn===4||hn===3){hn=0,_t();var N=Ei,I=No,$=Ja,H=Eh;(I.subtreeFlags&10256)!==0||(I.flags&10256)!==0?hn=5:(hn=0,No=Ei=null,Ih(N,N.pendingLanes));var Z=N.pendingLanes;if(Z===0&&(Si=null),qr($),I=I.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Re,I,void 0,(I.current.flags&128)===128)}catch{}if(H!==null){I=ge.T,Z=ve.p,ve.p=2,ge.T=null;try{for(var te=N.onRecoverableError,pe=0;pe<H.length;pe++){var Te=H[pe];te(Te.value,{componentStack:Te.stack})}}finally{ge.T=I,ve.p=Z}}(Ja&3)!==0&&lu(),qa(N),Z=N.pendingLanes,($&261930)!==0&&(Z&42)!==0?N===sf?js++:(js=0,sf=N):js=0,zs(0)}}function Ih(N,I){(N.pooledCacheLanes&=I)===0&&(I=N.pooledCache,I!=null&&(N.pooledCache=null,Vt(I)))}function lu(){return Nh(),Lh(),qh(),Bh()}function Bh(){if(hn!==5)return!1;var N=Ei,I=af;af=0;var $=qr(Ja),H=ge.T,Z=ve.p;try{ve.p=32>$?32:$,ge.T=null,$=of,of=null;var te=Ei,pe=Ja;if(hn=0,No=Ei=null,Ja=0,(dr&6)!==0)throw Error(R(331));var Te=dr;if(dr|=4,bh(te.current),mh(te,te.current,pe,$),dr=Te,zs(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Re,te)}catch{}return!0}finally{ve.p=Z,ge.T=H,Ih(N,I)}}function $h(N,I,$){I=Nn($,I),I=Bc(N.stateNode,I,2),N=gi(N,I,2),N!==null&&(zt(N,2),qa(N))}function mr(N,I,$){if(N.tag===3)$h(N,N,$);else for(;I!==null;){if(I.tag===3){$h(I,N,$);break}else if(I.tag===1){var H=I.stateNode;if(typeof I.type.getDerivedStateFromError=="function"||typeof H.componentDidCatch=="function"&&(Si===null||!Si.has(H))){N=Nn($,N),$=Fd(2),H=gi(I,$,2),H!==null&&(jd($,H,I,N),zt(H,2),qa(H));break}}I=I.return}}function cf(N,I,$){var H=N.pingCache;if(H===null){H=N.pingCache=new Yp;var Z=new Set;H.set(I,Z)}else Z=H.get(I),Z===void 0&&(Z=new Set,H.set(I,Z));Z.has($)||(tf=!0,Z.add($),N=eg.bind(null,N,I,$),I.then(N,N))}function eg(N,I,$){var H=N.pingCache;H!==null&&H.delete(I),N.pingedLanes|=N.suspendedLanes&$,N.warmLanes&=~$,Cr===N&&(nr&$)===$&&($r===4||$r===3&&(nr&62914560)===nr&&300>St()-ru?(dr&2)===0&&Lo(N,0):rf|=$,Po===nr&&(Po=0)),qa(N)}function Fh(N,I){I===0&&(I=It()),N=ja(N,I),N!==null&&(zt(N,I),qa(N))}function tg(N){var I=N.memoizedState,$=0;I!==null&&($=I.retryLane),Fh(N,$)}function rg(N,I){var $=0;switch(N.tag){case 31:case 13:var H=N.stateNode,Z=N.memoizedState;Z!==null&&($=Z.retryLane);break;case 19:H=N.stateNode;break;case 22:H=N.stateNode._retryCache;break;default:throw Error(R(314))}H!==null&&H.delete(I),Fh(N,$)}function ng(N,I){return st(N,I)}var uu=null,Io=null,ff=!1,cu=!1,df=!1,Ci=0;function qa(N){N!==Io&&N.next===null&&(Io===null?uu=Io=N:Io=Io.next=N),cu=!0,ff||(ff=!0,ig())}function zs(N,I){if(!df&&cu){df=!0;do for(var $=!1,H=uu;H!==null;){if(N!==0){var Z=H.pendingLanes;if(Z===0)var te=0;else{var pe=H.suspendedLanes,Te=H.pingedLanes;te=(1<<31-Ze(42|N)+1)-1,te&=Z&~(pe&~Te),te=te&201326741?te&201326741|1:te?te|2:0}te!==0&&($=!0,Hh(H,te))}else te=nr,te=yt(H,H===Cr?te:0,H.cancelPendingCommit!==null||H.timeoutHandle!==-1),(te&3)===0||vt(H,te)||($=!0,Hh(H,te));H=H.next}while($);df=!1}}function ag(){jh()}function jh(){cu=ff=!1;var N=0;Ci!==0&&gg()&&(N=Ci);for(var I=St(),$=null,H=uu;H!==null;){var Z=H.next,te=zh(H,I);te===0?(H.next=null,$===null?uu=Z:$.next=Z,Z===null&&(Io=$)):($=H,(N!==0||(te&3)!==0)&&(cu=!0)),H=Z}hn!==0&&hn!==5||zs(N),Ci!==0&&(Ci=0)}function zh(N,I){for(var $=N.suspendedLanes,H=N.pingedLanes,Z=N.expirationTimes,te=N.pendingLanes&-62914561;0<te;){var pe=31-Ze(te),Te=1<<pe,Ie=Z[pe];Ie===-1?((Te&$)===0||(Te&H)!==0)&&(Z[pe]=Ot(Te,I)):Ie<=I&&(N.expiredLanes|=Te),te&=~Te}if(I=Cr,$=nr,$=yt(N,N===I?$:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),H=N.callbackNode,$===0||N===I&&(gr===2||gr===9)||N.cancelPendingCommit!==null)return H!==null&&H!==null&&xt(H),N.callbackNode=null,N.callbackPriority=0;if(($&3)===0||vt(N,$)){if(I=$&-$,I===N.callbackPriority)return I;switch(H!==null&&xt(H),qr($)){case 2:case 8:$=Gt;break;case 32:$=At;break;case 268435456:$=Ct;break;default:$=At}return H=Vh.bind(null,N),$=st($,H),N.callbackPriority=I,N.callbackNode=$,I}return H!==null&&H!==null&&xt(H),N.callbackPriority=2,N.callbackNode=null,2}function Vh(N,I){if(hn!==0&&hn!==5)return N.callbackNode=null,N.callbackPriority=0,null;var $=N.callbackNode;if(lu()&&N.callbackNode!==$)return null;var H=nr;return H=yt(N,N===Cr?H:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),H===0?null:(Ch(N,H,I),zh(N,St()),N.callbackNode!=null&&N.callbackNode===$?Vh.bind(null,N):null)}function Hh(N,I){if(lu())return null;Ch(N,I,!0)}function ig(){vg(function(){(dr&6)!==0?st(jt,ag):jh()})}function hf(){if(Ci===0){var N=Eo;N===0&&(N=Tt,Tt<<=1,(Tt&261888)===0&&(Tt=256)),Ci=N}return Ci}function Uh(N){return N==null||typeof N=="symbol"||typeof N=="boolean"?null:typeof N=="function"?N:uo(""+N)}function Gh(N,I){var $=I.ownerDocument.createElement("input");return $.name=I.name,$.value=I.value,N.id&&$.setAttribute("form",N.id),I.parentNode.insertBefore($,I),N=new FormData(N),$.parentNode.removeChild($),N}function og(N,I,$,H,Z){if(I==="submit"&&$&&$.stateNode===Z){var te=Uh((Z[zr]||null).action),pe=H.submitter;pe&&(I=(I=pe[zr]||null)?Uh(I.formAction):pe.getAttribute("formAction"),I!==null&&(te=I,pe=null));var Te=new po("action","action",null,H,Z);N.push({event:Te,listeners:[{instance:null,listener:function(){if(H.defaultPrevented){if(Ci!==0){var Ie=pe?Gh(Z,pe):new FormData(Z);Dc($,{pending:!0,data:Ie,method:Z.method,action:te},null,Ie)}}else typeof te=="function"&&(Te.preventDefault(),Ie=pe?Gh(Z,pe):new FormData(Z),Dc($,{pending:!0,data:Ie,method:Z.method,action:te},te,Ie))},currentTarget:Z}]})}}for(var pf=0;pf<zi.length;pf++){var gf=zi[pf],sg=gf.toLowerCase(),lg=gf[0].toUpperCase()+gf.slice(1);Vn(sg,"on"+lg)}Vn(El,"onAnimationEnd"),Vn(cs,"onAnimationIteration"),Vn(yo,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(fs,"onTransitionRun"),Vn(sc,"onTransitionStart"),Vn(ds,"onTransitionCancel"),Vn(wl,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vs));function Kh(N,I){I=(I&4)!==0;for(var $=0;$<N.length;$++){var H=N[$],Z=H.event;H=H.listeners;e:{var te=void 0;if(I)for(var pe=H.length-1;0<=pe;pe--){var Te=H[pe],Ie=Te.instance,Ye=Te.currentTarget;if(Te=Te.listener,Ie!==te&&Z.isPropagationStopped())break e;te=Te,Z.currentTarget=Ye;try{te(Z)}catch(at){Vi(at)}Z.currentTarget=null,te=Ie}else for(pe=0;pe<H.length;pe++){if(Te=H[pe],Ie=Te.instance,Ye=Te.currentTarget,Te=Te.listener,Ie!==te&&Z.isPropagationStopped())break e;te=Te,Z.currentTarget=Ye;try{te(Z)}catch(at){Vi(at)}Z.currentTarget=null,te=Ie}}}}function er(N,I){var $=I[Kr];$===void 0&&($=I[Kr]=new Set);var H=N+"__bubble";$.has(H)||(Wh(I,N,2,!1),$.add(H))}function mf(N,I,$){var H=0;I&&(H|=4),Wh($,N,H,I)}var fu="_reactListening"+Math.random().toString(36).slice(2);function vf(N){if(!N[fu]){N[fu]=!0,sa.forEach(function($){$!=="selectionchange"&&(ug.has($)||mf($,!1,N),mf($,!0,N))});var I=N.nodeType===9?N:N.ownerDocument;I===null||I[fu]||(I[fu]=!0,mf("selectionchange",!1,I))}}function Wh(N,I,$,H){switch(wp(I)){case 2:var Z=Ig;break;case 8:Z=Bg;break;default:Z=Df}$=Z.bind(null,I,$,N),Z=void 0,!Yo||I!=="touchstart"&&I!=="touchmove"&&I!=="wheel"||(Z=!0),H?Z!==void 0?N.addEventListener(I,$,{capture:!0,passive:Z}):N.addEventListener(I,$,!0):Z!==void 0?N.addEventListener(I,$,{passive:Z}):N.addEventListener(I,$,!1)}function yf(N,I,$,H,Z){var te=H;if((I&1)===0&&(I&2)===0&&H!==null)e:for(;;){if(H===null)return;var pe=H.tag;if(pe===3||pe===4){var Te=H.stateNode.containerInfo;if(Te===Z)break;if(pe===4)for(pe=H.return;pe!==null;){var Ie=pe.tag;if((Ie===3||Ie===4)&&pe.stateNode.containerInfo===Z)return;pe=pe.return}for(;Te!==null;){if(pe=wa(Te),pe===null)return;if(Ie=pe.tag,Ie===5||Ie===6||Ie===26||Ie===27){H=te=pe;continue e}Te=Te.parentNode}}H=H.return}il(function(){var Ye=te,at=Ko($),ct=[];e:{var Je=hs.get(N);if(Je!==void 0){var rt=po,Dt=N;switch(N){case"keypress":if(fo($)===0)break e;case"keydown":case"keyup":rt=Uu;break;case"focusin":Dt="focus",rt=Jo;break;case"focusout":Dt="blur",rt=Jo;break;case"beforeblur":case"afterblur":rt=Jo;break;case"click":if($.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Wu;break;case El:case cs:case yo:rt=qu;break;case wl:rt=Xu;break;case"scroll":case"scrollend":rt=Ou;break;case"wheel":rt=Zu;break;case"copy":case"cut":case"paste":rt=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=cl;break;case"toggle":case"beforetoggle":rt=ec}var Ft=(I&4)!==0,Er=!Ft&&(N==="scroll"||N==="scrollend"),ze=Ft?Je!==null?Je+"Capture":null:Je;Ft=[];for(var Fe=Ye,Ge;Fe!==null;){var ut=Fe;if(Ge=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||Ge===null||ze===null||(ut=Pi(Fe,ze),ut!=null&&Ft.push(Hs(Fe,ut,Ge))),Er)break;Fe=Fe.return}0<Ft.length&&(Je=new rt(Je,Dt,null,$,at),ct.push({event:Je,listeners:Ft}))}}if((I&7)===0){e:{if(Je=N==="mouseover"||N==="pointerover",rt=N==="mouseout"||N==="pointerout",Je&&$!==Go&&(Dt=$.relatedTarget||$.fromElement)&&(wa(Dt)||Dt[xn]))break e;if((rt||Je)&&(Je=at.window===at?at:(Je=at.ownerDocument)?Je.defaultView||Je.parentWindow:window,rt?(Dt=$.relatedTarget||$.toElement,rt=Ye,Dt=Dt?wa(Dt):null,Dt!==null&&(Er=A(Dt),Ft=Dt.tag,Dt!==Er||Ft!==5&&Ft!==27&&Ft!==6)&&(Dt=null)):(rt=null,Dt=Ye),rt!==Dt)){if(Ft=ll,ut="onMouseLeave",ze="onMouseEnter",Fe="mouse",(N==="pointerout"||N==="pointerover")&&(Ft=cl,ut="onPointerLeave",ze="onPointerEnter",Fe="pointer"),Er=rt==null?Je:Ia(rt),Ge=Dt==null?Je:Ia(Dt),Je=new Ft(ut,Fe+"leave",rt,$,at),Je.target=Er,Je.relatedTarget=Ge,ut=null,wa(at)===Ye&&(Ft=new Ft(ze,Fe+"enter",Dt,$,at),Ft.target=Ge,Ft.relatedTarget=Er,ut=Ft),Er=ut,rt&&Dt)t:{for(Ft=cg,ze=rt,Fe=Dt,Ge=0,ut=ze;ut;ut=Ft(ut))Ge++;ut=0;for(var Bt=Fe;Bt;Bt=Ft(Bt))ut++;for(;0<Ge-ut;)ze=Ft(ze),Ge--;for(;0<ut-Ge;)Fe=Ft(Fe),ut--;for(;Ge--;){if(ze===Fe||Fe!==null&&ze===Fe.alternate){Ft=ze;break t}ze=Ft(ze),Fe=Ft(Fe)}Ft=null}else Ft=null;rt!==null&&Yh(ct,Je,rt,Ft,!1),Dt!==null&&Er!==null&&Yh(ct,Er,Dt,Ft,!0)}}e:{if(Je=Ye?Ia(Ye):window,rt=Je.nodeName&&Je.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Je.type==="file")var cr=Aa;else if(On(Je))if($i)cr=ac;else{cr=mo;var Pt=yl}else rt=Je.nodeName,!rt||rt.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?Ye&&Uo(Ye.elementType)&&(cr=Aa):cr=ot;if(cr&&(cr=cr(N,Ye))){Bi(ct,cr,$,at);break e}Pt&&Pt(N,Je,Ye),N==="focusout"&&Ye&&Je.type==="number"&&Ye.memoizedProps.value!=null&&Ho(Je,"number",Je.value)}switch(Pt=Ye?Ia(Ye):window,N){case"focusin":(On(Pt)||Pt.contentEditable==="true")&&($a=Pt,vo=Ye,ji=null);break;case"focusout":ji=vo=$a=null;break;case"mousedown":ss=!0;break;case"contextmenu":case"mouseup":case"dragend":ss=!1,ls(ct,$,at);break;case"selectionchange":if(oc)break;case"keydown":case"keyup":ls(ct,$,at)}var Yt;if(ns)e:{switch(N){case"compositionstart":var ar="onCompositionStart";break e;case"compositionend":ar="onCompositionEnd";break e;case"compositionupdate":ar="onCompositionUpdate";break e}ar=void 0}else ii?pl(N,$)&&(ar="onCompositionEnd"):N==="keydown"&&$.keyCode===229&&(ar="onCompositionStart");ar&&(fl&&$.locale!=="ko"&&(ii||ar!=="onCompositionStart"?ar==="onCompositionEnd"&&ii&&(Yt=ol()):(Ta=at,Xo="value"in Ta?Ta.value:Ta.textContent,ii=!0)),Pt=du(Ye,ar),0<Pt.length&&(ar=new ul(ar,N,null,$,at),ct.push({event:ar,listeners:Pt}),Yt?ar.data=Yt:(Yt=gl($),Yt!==null&&(ar.data=Yt)))),(Yt=rc?le(N,$):kt(N,$))&&(ar=du(Ye,"onBeforeInput"),0<ar.length&&(Pt=new ul("onBeforeInput","beforeinput",null,$,at),ct.push({event:Pt,listeners:ar}),Pt.data=Yt)),og(ct,N,Ye,$,at)}Kh(ct,I)})}function Hs(N,I,$){return{instance:N,listener:I,currentTarget:$}}function du(N,I){for(var $=I+"Capture",H=[];N!==null;){var Z=N,te=Z.stateNode;if(Z=Z.tag,Z!==5&&Z!==26&&Z!==27||te===null||(Z=Pi(N,$),Z!=null&&H.unshift(Hs(N,Z,te)),Z=Pi(N,I),Z!=null&&H.push(Hs(N,Z,te))),N.tag===3)return H;N=N.return}return[]}function cg(N){if(N===null)return null;do N=N.return;while(N&&N.tag!==5&&N.tag!==27);return N||null}function Yh(N,I,$,H,Z){for(var te=I._reactName,pe=[];$!==null&&$!==H;){var Te=$,Ie=Te.alternate,Ye=Te.stateNode;if(Te=Te.tag,Ie!==null&&Ie===H)break;Te!==5&&Te!==26&&Te!==27||Ye===null||(Ie=Ye,Z?(Ye=Pi($,te),Ye!=null&&pe.unshift(Hs($,Ye,Ie))):Z||(Ye=Pi($,te),Ye!=null&&pe.push(Hs($,Ye,Ie)))),$=$.return}pe.length!==0&&N.push({event:I,listeners:pe})}var fg=/\r\n?/g,dg=/\u0000|\uFFFD/g;function Xh(N){return(typeof N=="string"?N:""+N).replace(fg,`
`).replace(dg,"")}function Qh(N,I){return I=Xh(I),Xh(N)===I}function Sr(N,I,$,H,Z,te){switch($){case"children":typeof H=="string"?I==="body"||I==="textarea"&&H===""||ni(N,H):(typeof H=="number"||typeof H=="bigint")&&I!=="body"&&ni(N,""+H);break;case"className":la(N,"class",H);break;case"tabIndex":la(N,"tabindex",H);break;case"dir":case"role":case"viewBox":case"width":case"height":la(N,$,H);break;case"style":nl(N,H,te);break;case"data":if(I!=="object"){la(N,"data",H);break}case"src":case"href":if(H===""&&(I!=="a"||$!=="href")){N.removeAttribute($);break}if(H==null||typeof H=="function"||typeof H=="symbol"||typeof H=="boolean"){N.removeAttribute($);break}H=uo(""+H),N.setAttribute($,H);break;case"action":case"formAction":if(typeof H=="function"){N.setAttribute($,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof te=="function"&&($==="formAction"?(I!=="input"&&Sr(N,I,"name",Z.name,Z,null),Sr(N,I,"formEncType",Z.formEncType,Z,null),Sr(N,I,"formMethod",Z.formMethod,Z,null),Sr(N,I,"formTarget",Z.formTarget,Z,null)):(Sr(N,I,"encType",Z.encType,Z,null),Sr(N,I,"method",Z.method,Z,null),Sr(N,I,"target",Z.target,Z,null)));if(H==null||typeof H=="symbol"||typeof H=="boolean"){N.removeAttribute($);break}H=uo(""+H),N.setAttribute($,H);break;case"onClick":H!=null&&(N.onclick=ua);break;case"onScroll":H!=null&&er("scroll",N);break;case"onScrollEnd":H!=null&&er("scrollend",N);break;case"dangerouslySetInnerHTML":if(H!=null){if(typeof H!="object"||!("__html"in H))throw Error(R(61));if($=H.__html,$!=null){if(Z.children!=null)throw Error(R(60));N.innerHTML=$}}break;case"multiple":N.multiple=H&&typeof H!="function"&&typeof H!="symbol";break;case"muted":N.muted=H&&typeof H!="function"&&typeof H!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(H==null||typeof H=="function"||typeof H=="boolean"||typeof H=="symbol"){N.removeAttribute("xlink:href");break}$=uo(""+H),N.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",$);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":H!=null&&typeof H!="function"&&typeof H!="symbol"?N.setAttribute($,""+H):N.removeAttribute($);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":H&&typeof H!="function"&&typeof H!="symbol"?N.setAttribute($,""):N.removeAttribute($);break;case"capture":case"download":H===!0?N.setAttribute($,""):H!==!1&&H!=null&&typeof H!="function"&&typeof H!="symbol"?N.setAttribute($,H):N.removeAttribute($);break;case"cols":case"rows":case"size":case"span":H!=null&&typeof H!="function"&&typeof H!="symbol"&&!isNaN(H)&&1<=H?N.setAttribute($,H):N.removeAttribute($);break;case"rowSpan":case"start":H==null||typeof H=="function"||typeof H=="symbol"||isNaN(H)?N.removeAttribute($):N.setAttribute($,H);break;case"popover":er("beforetoggle",N),er("toggle",N),gn(N,"popover",H);break;case"xlinkActuate":Rn(N,"http://www.w3.org/1999/xlink","xlink:actuate",H);break;case"xlinkArcrole":Rn(N,"http://www.w3.org/1999/xlink","xlink:arcrole",H);break;case"xlinkRole":Rn(N,"http://www.w3.org/1999/xlink","xlink:role",H);break;case"xlinkShow":Rn(N,"http://www.w3.org/1999/xlink","xlink:show",H);break;case"xlinkTitle":Rn(N,"http://www.w3.org/1999/xlink","xlink:title",H);break;case"xlinkType":Rn(N,"http://www.w3.org/1999/xlink","xlink:type",H);break;case"xmlBase":Rn(N,"http://www.w3.org/XML/1998/namespace","xml:base",H);break;case"xmlLang":Rn(N,"http://www.w3.org/XML/1998/namespace","xml:lang",H);break;case"xmlSpace":Rn(N,"http://www.w3.org/XML/1998/namespace","xml:space",H);break;case"is":gn(N,"is",H);break;case"innerText":case"textContent":break;default:(!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&($=ku.get($)||$,gn(N,$,H))}}function bf(N,I,$,H,Z,te){switch($){case"style":nl(N,H,te);break;case"dangerouslySetInnerHTML":if(H!=null){if(typeof H!="object"||!("__html"in H))throw Error(R(61));if($=H.__html,$!=null){if(Z.children!=null)throw Error(R(60));N.innerHTML=$}}break;case"children":typeof H=="string"?ni(N,H):(typeof H=="number"||typeof H=="bigint")&&ni(N,""+H);break;case"onScroll":H!=null&&er("scroll",N);break;case"onScrollEnd":H!=null&&er("scrollend",N);break;case"onClick":H!=null&&(N.onclick=ua);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!no.hasOwnProperty($))e:{if($[0]==="o"&&$[1]==="n"&&(Z=$.endsWith("Capture"),I=$.slice(2,Z?$.length-7:void 0),te=N[zr]||null,te=te!=null?te[$]:null,typeof te=="function"&&N.removeEventListener(I,te,Z),typeof H=="function")){typeof te!="function"&&te!==null&&($ in N?N[$]=null:N.hasAttribute($)&&N.removeAttribute($)),N.addEventListener(I,H,Z);break e}$ in N?N[$]=H:H===!0?N.setAttribute($,""):gn(N,$,H)}}}function bn(N,I,$){switch(I){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",N),er("load",N);var H=!1,Z=!1,te;for(te in $)if($.hasOwnProperty(te)){var pe=$[te];if(pe!=null)switch(te){case"src":H=!0;break;case"srcSet":Z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(R(137,I));default:Sr(N,I,te,pe,$,null)}}Z&&Sr(N,I,"srcSet",$.srcSet,$,null),H&&Sr(N,I,"src",$.src,$,null);return;case"input":er("invalid",N);var Te=te=pe=Z=null,Ie=null,Ye=null;for(H in $)if($.hasOwnProperty(H)){var at=$[H];if(at!=null)switch(H){case"name":Z=at;break;case"type":pe=at;break;case"checked":Ie=at;break;case"defaultChecked":Ye=at;break;case"value":te=at;break;case"defaultValue":Te=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(R(137,I));break;default:Sr(N,I,H,at,$,null)}}lo(N,te,Te,Ie,Ye,pe,Z,!1);return;case"select":er("invalid",N),H=pe=te=null;for(Z in $)if($.hasOwnProperty(Z)&&(Te=$[Z],Te!=null))switch(Z){case"value":te=Te;break;case"defaultValue":pe=Te;break;case"multiple":H=Te;default:Sr(N,I,Z,Te,$,null)}I=te,$=pe,N.multiple=!!H,I!=null?ri(N,!!H,I,!1):$!=null&&ri(N,!!H,$,!0);return;case"textarea":er("invalid",N),te=Z=H=null;for(pe in $)if($.hasOwnProperty(pe)&&(Te=$[pe],Te!=null))switch(pe){case"value":H=Te;break;case"defaultValue":Z=Te;break;case"children":te=Te;break;case"dangerouslySetInnerHTML":if(Te!=null)throw Error(R(91));break;default:Sr(N,I,pe,Te,$,null)}tl(N,H,Z,te);return;case"option":for(Ie in $)if($.hasOwnProperty(Ie)&&(H=$[Ie],H!=null))switch(Ie){case"selected":N.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Sr(N,I,Ie,H,$,null)}return;case"dialog":er("beforetoggle",N),er("toggle",N),er("cancel",N),er("close",N);break;case"iframe":case"object":er("load",N);break;case"video":case"audio":for(H=0;H<Vs.length;H++)er(Vs[H],N);break;case"image":er("error",N),er("load",N);break;case"details":er("toggle",N);break;case"embed":case"source":case"link":er("error",N),er("load",N);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in $)if($.hasOwnProperty(Ye)&&(H=$[Ye],H!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(R(137,I));default:Sr(N,I,Ye,H,$,null)}return;default:if(Uo(I)){for(at in $)$.hasOwnProperty(at)&&(H=$[at],H!==void 0&&bf(N,I,at,H,$,void 0));return}}for(Te in $)$.hasOwnProperty(Te)&&(H=$[Te],H!=null&&Sr(N,I,Te,H,$,null))}function hg(N,I,$,H){switch(I){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Z=null,te=null,pe=null,Te=null,Ie=null,Ye=null,at=null;for(rt in $){var ct=$[rt];if($.hasOwnProperty(rt)&&ct!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Ie=ct;default:H.hasOwnProperty(rt)||Sr(N,I,rt,null,H,ct)}}for(var Je in H){var rt=H[Je];if(ct=$[Je],H.hasOwnProperty(Je)&&(rt!=null||ct!=null))switch(Je){case"type":te=rt;break;case"name":Z=rt;break;case"checked":Ye=rt;break;case"defaultChecked":at=rt;break;case"value":pe=rt;break;case"defaultValue":Te=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(R(137,I));break;default:rt!==ct&&Sr(N,I,Je,rt,H,ct)}}Vo(N,pe,Te,Ie,Ye,at,te,Z);return;case"select":rt=pe=Te=Je=null;for(te in $)if(Ie=$[te],$.hasOwnProperty(te)&&Ie!=null)switch(te){case"value":break;case"multiple":rt=Ie;default:H.hasOwnProperty(te)||Sr(N,I,te,null,H,Ie)}for(Z in H)if(te=H[Z],Ie=$[Z],H.hasOwnProperty(Z)&&(te!=null||Ie!=null))switch(Z){case"value":Je=te;break;case"defaultValue":Te=te;break;case"multiple":pe=te;default:te!==Ie&&Sr(N,I,Z,te,H,Ie)}I=Te,$=pe,H=rt,Je!=null?ri(N,!!$,Je,!1):!!H!=!!$&&(I!=null?ri(N,!!$,I,!0):ri(N,!!$,$?[]:"",!1));return;case"textarea":rt=Je=null;for(Te in $)if(Z=$[Te],$.hasOwnProperty(Te)&&Z!=null&&!H.hasOwnProperty(Te))switch(Te){case"value":break;case"children":break;default:Sr(N,I,Te,null,H,Z)}for(pe in H)if(Z=H[pe],te=$[pe],H.hasOwnProperty(pe)&&(Z!=null||te!=null))switch(pe){case"value":Je=Z;break;case"defaultValue":rt=Z;break;case"children":break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(R(91));break;default:Z!==te&&Sr(N,I,pe,Z,H,te)}el(N,Je,rt);return;case"option":for(var Dt in $)if(Je=$[Dt],$.hasOwnProperty(Dt)&&Je!=null&&!H.hasOwnProperty(Dt))switch(Dt){case"selected":N.selected=!1;break;default:Sr(N,I,Dt,null,H,Je)}for(Ie in H)if(Je=H[Ie],rt=$[Ie],H.hasOwnProperty(Ie)&&Je!==rt&&(Je!=null||rt!=null))switch(Ie){case"selected":N.selected=Je&&typeof Je!="function"&&typeof Je!="symbol";break;default:Sr(N,I,Ie,Je,H,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in $)Je=$[Ft],$.hasOwnProperty(Ft)&&Je!=null&&!H.hasOwnProperty(Ft)&&Sr(N,I,Ft,null,H,Je);for(Ye in H)if(Je=H[Ye],rt=$[Ye],H.hasOwnProperty(Ye)&&Je!==rt&&(Je!=null||rt!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(R(137,I));break;default:Sr(N,I,Ye,Je,H,rt)}return;default:if(Uo(I)){for(var Er in $)Je=$[Er],$.hasOwnProperty(Er)&&Je!==void 0&&!H.hasOwnProperty(Er)&&bf(N,I,Er,void 0,H,Je);for(at in H)Je=H[at],rt=$[at],!H.hasOwnProperty(at)||Je===rt||Je===void 0&&rt===void 0||bf(N,I,at,Je,H,rt);return}}for(var ze in $)Je=$[ze],$.hasOwnProperty(ze)&&Je!=null&&!H.hasOwnProperty(ze)&&Sr(N,I,ze,null,H,Je);for(ct in H)Je=H[ct],rt=$[ct],!H.hasOwnProperty(ct)||Je===rt||Je==null&&rt==null||Sr(N,I,ct,Je,H,rt)}function Zh(N){switch(N){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pg(){if(typeof performance.getEntriesByType=="function"){for(var N=0,I=0,$=performance.getEntriesByType("resource"),H=0;H<$.length;H++){var Z=$[H],te=Z.transferSize,pe=Z.initiatorType,Te=Z.duration;if(te&&Te&&Zh(pe)){for(pe=0,Te=Z.responseEnd,H+=1;H<$.length;H++){var Ie=$[H],Ye=Ie.startTime;if(Ye>Te)break;var at=Ie.transferSize,ct=Ie.initiatorType;at&&Zh(ct)&&(Ie=Ie.responseEnd,pe+=at*(Ie<Te?1:(Te-Ye)/(Ie-Ye)))}if(--H,I+=8*(te+pe)/(Z.duration/1e3),N++,10<N)break}}if(0<N)return I/N/1e6}return navigator.connection&&(N=navigator.connection.downlink,typeof N=="number")?N:5}var xf=null,Sf=null;function hu(N){return N.nodeType===9?N:N.ownerDocument}function Jh(N){switch(N){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ep(N,I){if(N===0)switch(I){case"svg":return 1;case"math":return 2;default:return 0}return N===1&&I==="foreignObject"?0:N}function Ef(N,I){return N==="textarea"||N==="noscript"||typeof I.children=="string"||typeof I.children=="number"||typeof I.children=="bigint"||typeof I.dangerouslySetInnerHTML=="object"&&I.dangerouslySetInnerHTML!==null&&I.dangerouslySetInnerHTML.__html!=null}var wf=null;function gg(){var N=window.event;return N&&N.type==="popstate"?N===wf?!1:(wf=N,!0):(wf=null,!1)}var tp=typeof setTimeout=="function"?setTimeout:void 0,mg=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,vg=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(N){return rp.resolve(null).then(N).catch(yg)}:tp;function yg(N){setTimeout(function(){throw N})}function _i(N){return N==="head"}function np(N,I){var $=I,H=0;do{var Z=$.nextSibling;if(N.removeChild($),Z&&Z.nodeType===8)if($=Z.data,$==="/$"||$==="/&"){if(H===0){N.removeChild(Z),jo(I);return}H--}else if($==="$"||$==="$?"||$==="$~"||$==="$!"||$==="&")H++;else if($==="html")Us(N.ownerDocument.documentElement);else if($==="head"){$=N.ownerDocument.head,Us($);for(var te=$.firstChild;te;){var pe=te.nextSibling,Te=te.nodeName;te[Xr]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&te.rel.toLowerCase()==="stylesheet"||$.removeChild(te),te=pe}}else $==="body"&&Us(N.ownerDocument.body);$=Z}while($);jo(I)}function ap(N,I){var $=N;N=0;do{var H=$.nextSibling;if($.nodeType===1?I?($._stashedDisplay=$.style.display,$.style.display="none"):($.style.display=$._stashedDisplay||"",$.getAttribute("style")===""&&$.removeAttribute("style")):$.nodeType===3&&(I?($._stashedText=$.nodeValue,$.nodeValue=""):$.nodeValue=$._stashedText||""),H&&H.nodeType===8)if($=H.data,$==="/$"){if(N===0)break;N--}else $!=="$"&&$!=="$?"&&$!=="$~"&&$!=="$!"||N++;$=H}while($)}function Cf(N){var I=N.firstChild;for(I&&I.nodeType===10&&(I=I.nextSibling);I;){var $=I;switch(I=I.nextSibling,$.nodeName){case"HTML":case"HEAD":case"BODY":Cf($),ti($);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if($.rel.toLowerCase()==="stylesheet")continue}N.removeChild($)}}function bg(N,I,$,H){for(;N.nodeType===1;){var Z=$;if(N.nodeName.toLowerCase()!==I.toLowerCase()){if(!H&&(N.nodeName!=="INPUT"||N.type!=="hidden"))break}else if(H){if(!N[Xr])switch(I){case"meta":if(!N.hasAttribute("itemprop"))break;return N;case"link":if(te=N.getAttribute("rel"),te==="stylesheet"&&N.hasAttribute("data-precedence"))break;if(te!==Z.rel||N.getAttribute("href")!==(Z.href==null||Z.href===""?null:Z.href)||N.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin)||N.getAttribute("title")!==(Z.title==null?null:Z.title))break;return N;case"style":if(N.hasAttribute("data-precedence"))break;return N;case"script":if(te=N.getAttribute("src"),(te!==(Z.src==null?null:Z.src)||N.getAttribute("type")!==(Z.type==null?null:Z.type)||N.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin))&&te&&N.hasAttribute("async")&&!N.hasAttribute("itemprop"))break;return N;default:return N}}else if(I==="input"&&N.type==="hidden"){var te=Z.name==null?null:""+Z.name;if(Z.type==="hidden"&&N.getAttribute("name")===te)return N}else return N;if(N=ia(N.nextSibling),N===null)break}return null}function xg(N,I,$){if(I==="")return null;for(;N.nodeType!==3;)if((N.nodeType!==1||N.nodeName!=="INPUT"||N.type!=="hidden")&&!$||(N=ia(N.nextSibling),N===null))return null;return N}function ip(N,I){for(;N.nodeType!==8;)if((N.nodeType!==1||N.nodeName!=="INPUT"||N.type!=="hidden")&&!I||(N=ia(N.nextSibling),N===null))return null;return N}function _f(N){return N.data==="$?"||N.data==="$~"}function Rf(N){return N.data==="$!"||N.data==="$?"&&N.ownerDocument.readyState!=="loading"}function Sg(N,I){var $=N.ownerDocument;if(N.data==="$~")N._reactRetry=I;else if(N.data!=="$?"||$.readyState!=="loading")I();else{var H=function(){I(),$.removeEventListener("DOMContentLoaded",H)};$.addEventListener("DOMContentLoaded",H),N._reactRetry=H}}function ia(N){for(;N!=null;N=N.nextSibling){var I=N.nodeType;if(I===1||I===3)break;if(I===8){if(I=N.data,I==="$"||I==="$!"||I==="$?"||I==="$~"||I==="&"||I==="F!"||I==="F")break;if(I==="/$"||I==="/&")return null}}return N}var Tf=null;function op(N){N=N.nextSibling;for(var I=0;N;){if(N.nodeType===8){var $=N.data;if($==="/$"||$==="/&"){if(I===0)return ia(N.nextSibling);I--}else $!=="$"&&$!=="$!"&&$!=="$?"&&$!=="$~"&&$!=="&"||I++}N=N.nextSibling}return null}function sp(N){N=N.previousSibling;for(var I=0;N;){if(N.nodeType===8){var $=N.data;if($==="$"||$==="$!"||$==="$?"||$==="$~"||$==="&"){if(I===0)return N;I--}else $!=="/$"&&$!=="/&"||I++}N=N.previousSibling}return null}function lp(N,I,$){switch(I=hu($),N){case"html":if(N=I.documentElement,!N)throw Error(R(452));return N;case"head":if(N=I.head,!N)throw Error(R(453));return N;case"body":if(N=I.body,!N)throw Error(R(454));return N;default:throw Error(R(451))}}function Us(N){for(var I=N.attributes;I.length;)N.removeAttributeNode(I[0]);ti(N)}var oa=new Map,up=new Set;function pu(N){return typeof N.getRootNode=="function"?N.getRootNode():N.nodeType===9?N:N.ownerDocument}var ei=ve.d;ve.d={f:Eg,r:wg,D:Cg,C:_g,L:Rg,m:Tg,X:kg,S:Ag,M:Mg};function Eg(){var N=ei.f(),I=iu();return N||I}function wg(N){var I=Ca(N);I!==null&&I.tag===5&&I.type==="form"?Rd(I):ei.r(N)}var Bo=typeof document>"u"?null:document;function cp(N,I,$){var H=Bo;if(H&&typeof I=="string"&&I){var Z=Mn(I);Z='link[rel="'+N+'"][href="'+Z+'"]',typeof $=="string"&&(Z+='[crossorigin="'+$+'"]'),up.has(Z)||(up.add(Z),N={rel:N,crossOrigin:$,href:I},H.querySelector(Z)===null&&(I=H.createElement("link"),bn(I,"link",N),Lr(I),H.head.appendChild(I)))}}function Cg(N){ei.D(N),cp("dns-prefetch",N,null)}function _g(N,I){ei.C(N,I),cp("preconnect",N,I)}function Rg(N,I,$){ei.L(N,I,$);var H=Bo;if(H&&N&&I){var Z='link[rel="preload"][as="'+Mn(I)+'"]';I==="image"&&$&&$.imageSrcSet?(Z+='[imagesrcset="'+Mn($.imageSrcSet)+'"]',typeof $.imageSizes=="string"&&(Z+='[imagesizes="'+Mn($.imageSizes)+'"]')):Z+='[href="'+Mn(N)+'"]';var te=Z;switch(I){case"style":te=$o(N);break;case"script":te=Fo(N)}oa.has(te)||(N=q({rel:"preload",href:I==="image"&&$&&$.imageSrcSet?void 0:N,as:I},$),oa.set(te,N),H.querySelector(Z)!==null||I==="style"&&H.querySelector(Gs(te))||I==="script"&&H.querySelector(Ws(te))||(I=H.createElement("link"),bn(I,"link",N),Lr(I),H.head.appendChild(I)))}}function Tg(N,I){ei.m(N,I);var $=Bo;if($&&N){var H=I&&typeof I.as=="string"?I.as:"script",Z='link[rel="modulepreload"][as="'+Mn(H)+'"][href="'+Mn(N)+'"]',te=Z;switch(H){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":te=Fo(N)}if(!oa.has(te)&&(N=q({rel:"modulepreload",href:N},I),oa.set(te,N),$.querySelector(Z)===null)){switch(H){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if($.querySelector(Ws(te)))return}H=$.createElement("link"),bn(H,"link",N),Lr(H),$.head.appendChild(H)}}}function Ag(N,I,$){ei.S(N,I,$);var H=Bo;if(H&&N){var Z=Ra(H).hoistableStyles,te=$o(N);I=I||"default";var pe=Z.get(te);if(!pe){var Te={loading:0,preload:null};if(pe=H.querySelector(Gs(te)))Te.loading=5;else{N=q({rel:"stylesheet",href:N,"data-precedence":I},$),($=oa.get(te))&&Af(N,$);var Ie=pe=H.createElement("link");Lr(Ie),bn(Ie,"link",N),Ie._p=new Promise(function(Ye,at){Ie.onload=Ye,Ie.onerror=at}),Ie.addEventListener("load",function(){Te.loading|=1}),Ie.addEventListener("error",function(){Te.loading|=2}),Te.loading|=4,gu(pe,I,H)}pe={type:"stylesheet",instance:pe,count:1,state:Te},Z.set(te,pe)}}}function kg(N,I){ei.X(N,I);var $=Bo;if($&&N){var H=Ra($).hoistableScripts,Z=Fo(N),te=H.get(Z);te||(te=$.querySelector(Ws(Z)),te||(N=q({src:N,async:!0},I),(I=oa.get(Z))&&kf(N,I),te=$.createElement("script"),Lr(te),bn(te,"link",N),$.head.appendChild(te)),te={type:"script",instance:te,count:1,state:null},H.set(Z,te))}}function Mg(N,I){ei.M(N,I);var $=Bo;if($&&N){var H=Ra($).hoistableScripts,Z=Fo(N),te=H.get(Z);te||(te=$.querySelector(Ws(Z)),te||(N=q({src:N,async:!0,type:"module"},I),(I=oa.get(Z))&&kf(N,I),te=$.createElement("script"),Lr(te),bn(te,"link",N),$.head.appendChild(te)),te={type:"script",instance:te,count:1,state:null},H.set(Z,te))}}function fp(N,I,$,H){var Z=(Z=Oe.current)?pu(Z):null;if(!Z)throw Error(R(446));switch(N){case"meta":case"title":return null;case"style":return typeof $.precedence=="string"&&typeof $.href=="string"?(I=$o($.href),$=Ra(Z).hoistableStyles,H=$.get(I),H||(H={type:"style",instance:null,count:0,state:null},$.set(I,H)),H):{type:"void",instance:null,count:0,state:null};case"link":if($.rel==="stylesheet"&&typeof $.href=="string"&&typeof $.precedence=="string"){N=$o($.href);var te=Ra(Z).hoistableStyles,pe=te.get(N);if(pe||(Z=Z.ownerDocument||Z,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},te.set(N,pe),(te=Z.querySelector(Gs(N)))&&!te._p&&(pe.instance=te,pe.state.loading=5),oa.has(N)||($={rel:"preload",as:"style",href:$.href,crossOrigin:$.crossOrigin,integrity:$.integrity,media:$.media,hrefLang:$.hrefLang,referrerPolicy:$.referrerPolicy},oa.set(N,$),te||Og(Z,N,$,pe.state))),I&&H===null)throw Error(R(528,""));return pe}if(I&&H!==null)throw Error(R(529,""));return null;case"script":return I=$.async,$=$.src,typeof $=="string"&&I&&typeof I!="function"&&typeof I!="symbol"?(I=Fo($),$=Ra(Z).hoistableScripts,H=$.get(I),H||(H={type:"script",instance:null,count:0,state:null},$.set(I,H)),H):{type:"void",instance:null,count:0,state:null};default:throw Error(R(444,N))}}function $o(N){return'href="'+Mn(N)+'"'}function Gs(N){return'link[rel="stylesheet"]['+N+"]"}function dp(N){return q({},N,{"data-precedence":N.precedence,precedence:null})}function Og(N,I,$,H){N.querySelector('link[rel="preload"][as="style"]['+I+"]")?H.loading=1:(I=N.createElement("link"),H.preload=I,I.addEventListener("load",function(){return H.loading|=1}),I.addEventListener("error",function(){return H.loading|=2}),bn(I,"link",$),Lr(I),N.head.appendChild(I))}function Fo(N){return'[src="'+Mn(N)+'"]'}function Ws(N){return"script[async]"+N}function hp(N,I,$){if(I.count++,I.instance===null)switch(I.type){case"style":var H=N.querySelector('style[data-href~="'+Mn($.href)+'"]');if(H)return I.instance=H,Lr(H),H;var Z=q({},$,{"data-href":$.href,"data-precedence":$.precedence,href:null,precedence:null});return H=(N.ownerDocument||N).createElement("style"),Lr(H),bn(H,"style",Z),gu(H,$.precedence,N),I.instance=H;case"stylesheet":Z=$o($.href);var te=N.querySelector(Gs(Z));if(te)return I.state.loading|=4,I.instance=te,Lr(te),te;H=dp($),(Z=oa.get(Z))&&Af(H,Z),te=(N.ownerDocument||N).createElement("link"),Lr(te);var pe=te;return pe._p=new Promise(function(Te,Ie){pe.onload=Te,pe.onerror=Ie}),bn(te,"link",H),I.state.loading|=4,gu(te,$.precedence,N),I.instance=te;case"script":return te=Fo($.src),(Z=N.querySelector(Ws(te)))?(I.instance=Z,Lr(Z),Z):(H=$,(Z=oa.get(te))&&(H=q({},$),kf(H,Z)),N=N.ownerDocument||N,Z=N.createElement("script"),Lr(Z),bn(Z,"link",H),N.head.appendChild(Z),I.instance=Z);case"void":return null;default:throw Error(R(443,I.type))}else I.type==="stylesheet"&&(I.state.loading&4)===0&&(H=I.instance,I.state.loading|=4,gu(H,$.precedence,N));return I.instance}function gu(N,I,$){for(var H=$.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Z=H.length?H[H.length-1]:null,te=Z,pe=0;pe<H.length;pe++){var Te=H[pe];if(Te.dataset.precedence===I)te=Te;else if(te!==Z)break}te?te.parentNode.insertBefore(N,te.nextSibling):(I=$.nodeType===9?$.head:$,I.insertBefore(N,I.firstChild))}function Af(N,I){N.crossOrigin==null&&(N.crossOrigin=I.crossOrigin),N.referrerPolicy==null&&(N.referrerPolicy=I.referrerPolicy),N.title==null&&(N.title=I.title)}function kf(N,I){N.crossOrigin==null&&(N.crossOrigin=I.crossOrigin),N.referrerPolicy==null&&(N.referrerPolicy=I.referrerPolicy),N.integrity==null&&(N.integrity=I.integrity)}var mu=null;function pp(N,I,$){if(mu===null){var H=new Map,Z=mu=new Map;Z.set($,H)}else Z=mu,H=Z.get($),H||(H=new Map,Z.set($,H));if(H.has(N))return H;for(H.set(N,null),$=$.getElementsByTagName(N),Z=0;Z<$.length;Z++){var te=$[Z];if(!(te[Xr]||te[Tr]||N==="link"&&te.getAttribute("rel")==="stylesheet")&&te.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=te.getAttribute(I)||"";pe=N+pe;var Te=H.get(pe);Te?Te.push(te):H.set(pe,[te])}}return H}function gp(N,I,$){N=N.ownerDocument||N,N.head.insertBefore($,I==="title"?N.querySelector("head > title"):null)}function Dg(N,I,$){if($===1||I.itemProp!=null)return!1;switch(N){case"meta":case"title":return!0;case"style":if(typeof I.precedence!="string"||typeof I.href!="string"||I.href==="")break;return!0;case"link":if(typeof I.rel!="string"||typeof I.href!="string"||I.href===""||I.onLoad||I.onError)break;switch(I.rel){case"stylesheet":return N=I.disabled,typeof I.precedence=="string"&&N==null;default:return!0}case"script":if(I.async&&typeof I.async!="function"&&typeof I.async!="symbol"&&!I.onLoad&&!I.onError&&I.src&&typeof I.src=="string")return!0}return!1}function mp(N){return!(N.type==="stylesheet"&&(N.state.loading&3)===0)}function Pg(N,I,$,H){if($.type==="stylesheet"&&(typeof H.media!="string"||matchMedia(H.media).matches!==!1)&&($.state.loading&4)===0){if($.instance===null){var Z=$o(H.href),te=I.querySelector(Gs(Z));if(te){I=te._p,I!==null&&typeof I=="object"&&typeof I.then=="function"&&(N.count++,N=vu.bind(N),I.then(N,N)),$.state.loading|=4,$.instance=te,Lr(te);return}te=I.ownerDocument||I,H=dp(H),(Z=oa.get(Z))&&Af(H,Z),te=te.createElement("link"),Lr(te);var pe=te;pe._p=new Promise(function(Te,Ie){pe.onload=Te,pe.onerror=Ie}),bn(te,"link",H),$.instance=te}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set($,I),(I=$.state.preload)&&($.state.loading&3)===0&&(N.count++,$=vu.bind(N),I.addEventListener("load",$),I.addEventListener("error",$))}}var Mf=0;function Ng(N,I){return N.stylesheets&&N.count===0&&bu(N,N.stylesheets),0<N.count||0<N.imgCount?function($){var H=setTimeout(function(){if(N.stylesheets&&bu(N,N.stylesheets),N.unsuspend){var te=N.unsuspend;N.unsuspend=null,te()}},6e4+I);0<N.imgBytes&&Mf===0&&(Mf=62500*pg());var Z=setTimeout(function(){if(N.waitingForImages=!1,N.count===0&&(N.stylesheets&&bu(N,N.stylesheets),N.unsuspend)){var te=N.unsuspend;N.unsuspend=null,te()}},(N.imgBytes>Mf?50:800)+I);return N.unsuspend=$,function(){N.unsuspend=null,clearTimeout(H),clearTimeout(Z)}}:null}function vu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bu(this,this.stylesheets);else if(this.unsuspend){var N=this.unsuspend;this.unsuspend=null,N()}}}var yu=null;function bu(N,I){N.stylesheets=null,N.unsuspend!==null&&(N.count++,yu=new Map,I.forEach(Lg,N),yu=null,vu.call(N))}function Lg(N,I){if(!(I.state.loading&4)){var $=yu.get(N);if($)var H=$.get(null);else{$=new Map,yu.set(N,$);for(var Z=N.querySelectorAll("link[data-precedence],style[data-precedence]"),te=0;te<Z.length;te++){var pe=Z[te];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&($.set(pe.dataset.precedence,pe),H=pe)}H&&$.set(null,H)}Z=I.instance,pe=Z.getAttribute("data-precedence"),te=$.get(pe)||H,te===H&&$.set(null,Z),$.set(pe,Z),this.count++,H=vu.bind(this),Z.addEventListener("load",H),Z.addEventListener("error",H),te?te.parentNode.insertBefore(Z,te.nextSibling):(N=N.nodeType===9?N.head:N,N.insertBefore(Z,N.firstChild)),I.state.loading|=4}}var Ys={$$typeof:Y,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function qg(N,I,$,H,Z,te,pe,Te,Ie){this.tag=1,this.containerInfo=N,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=H,this.onUncaughtError=Z,this.onCaughtError=te,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ie,this.incompleteTransitions=new Map}function vp(N,I,$,H,Z,te,pe,Te,Ie,Ye,at,ct){return N=new qg(N,I,$,pe,Ie,Ye,at,ct,Te),I=1,te===!0&&(I|=24),te=mn(3,null,null,I),N.current=te,te.stateNode=N,I=Xe(),I.refCount++,N.pooledCache=I,I.refCount++,te.memoizedState={element:H,isDehydrated:$,cache:I},dc(te),N}function yp(N){return N?(N=ci,N):ci}function bp(N,I,$,H,Z,te){Z=yp(Z),H.context===null?H.context=Z:H.pendingContext=Z,H=pi(I),H.payload={element:$},te=te===void 0?null:te,te!==null&&(H.callback=te),$=gi(N,H,I),$!==null&&(jn($,N,I),Rs($,N,I))}function xp(N,I){if(N=N.memoizedState,N!==null&&N.dehydrated!==null){var $=N.retryLane;N.retryLane=$!==0&&$<I?$:I}}function Of(N,I){xp(N,I),(N=N.alternate)&&xp(N,I)}function Sp(N){if(N.tag===13||N.tag===31){var I=ja(N,67108864);I!==null&&jn(I,N,67108864),Of(N,67108864)}}function Ep(N){if(N.tag===13||N.tag===31){var I=Yn();I=wr(I);var $=ja(N,I);$!==null&&jn($,N,I),Of(N,I)}}var xu=!0;function Ig(N,I,$,H){var Z=ge.T;ge.T=null;var te=ve.p;try{ve.p=2,Df(N,I,$,H)}finally{ve.p=te,ge.T=Z}}function Bg(N,I,$,H){var Z=ge.T;ge.T=null;var te=ve.p;try{ve.p=8,Df(N,I,$,H)}finally{ve.p=te,ge.T=Z}}function Df(N,I,$,H){if(xu){var Z=Pf(H);if(Z===null)yf(N,I,H,Su,$),Cp(N,H);else if(Fg(Z,N,I,$,H))H.stopPropagation();else if(Cp(N,H),I&4&&-1<$g.indexOf(N)){for(;Z!==null;){var te=Ca(Z);if(te!==null)switch(te.tag){case 3:if(te=te.stateNode,te.current.memoizedState.isDehydrated){var pe=$t(te.pendingLanes);if(pe!==0){var Te=te;for(Te.pendingLanes|=2,Te.entangledLanes|=2;pe;){var Ie=1<<31-Ze(pe);Te.entanglements[1]|=Ie,pe&=~Ie}qa(te),(dr&6)===0&&(nu=St()+500,zs(0))}}break;case 31:case 13:Te=ja(te,2),Te!==null&&jn(Te,te,2),iu(),Of(te,2)}if(te=Pf(H),te===null&&yf(N,I,H,Su,$),te===Z)break;Z=te}Z!==null&&H.stopPropagation()}else yf(N,I,H,null,$)}}function Pf(N){return N=Ko(N),Nf(N)}var Su=null;function Nf(N){if(Su=null,N=wa(N),N!==null){var I=A(N);if(I===null)N=null;else{var $=I.tag;if($===13){if(N=k(I),N!==null)return N;N=null}else if($===31){if(N=M(I),N!==null)return N;N=null}else if($===3){if(I.stateNode.current.memoizedState.isDehydrated)return I.tag===3?I.stateNode.containerInfo:null;N=null}else I!==N&&(N=null)}}return Su=N,null}function wp(N){switch(N){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case jt:return 2;case Gt:return 8;case At:case Nt:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var Lf=!1,Ri=null,Ti=null,Ai=null,Qs=new Map,Zs=new Map,ki=[],$g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cp(N,I){switch(N){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":Qs.delete(I.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(I.pointerId)}}function Js(N,I,$,H,Z,te){return N===null||N.nativeEvent!==te?(N={blockedOn:I,domEventName:$,eventSystemFlags:H,nativeEvent:te,targetContainers:[Z]},I!==null&&(I=Ca(I),I!==null&&Sp(I)),N):(N.eventSystemFlags|=H,I=N.targetContainers,Z!==null&&I.indexOf(Z)===-1&&I.push(Z),N)}function Fg(N,I,$,H,Z){switch(I){case"focusin":return Ri=Js(Ri,N,I,$,H,Z),!0;case"dragenter":return Ti=Js(Ti,N,I,$,H,Z),!0;case"mouseover":return Ai=Js(Ai,N,I,$,H,Z),!0;case"pointerover":var te=Z.pointerId;return Qs.set(te,Js(Qs.get(te)||null,N,I,$,H,Z)),!0;case"gotpointercapture":return te=Z.pointerId,Zs.set(te,Js(Zs.get(te)||null,N,I,$,H,Z)),!0}return!1}function _p(N){var I=wa(N.target);if(I!==null){var $=A(I);if($!==null){if(I=$.tag,I===13){if(I=k($),I!==null){N.blockedOn=I,kn(N.priority,function(){Ep($)});return}}else if(I===31){if(I=M($),I!==null){N.blockedOn=I,kn(N.priority,function(){Ep($)});return}}else if(I===3&&$.stateNode.current.memoizedState.isDehydrated){N.blockedOn=$.tag===3?$.stateNode.containerInfo:null;return}}}N.blockedOn=null}function Eu(N){if(N.blockedOn!==null)return!1;for(var I=N.targetContainers;0<I.length;){var $=Pf(N.nativeEvent);if($===null){$=N.nativeEvent;var H=new $.constructor($.type,$);Go=H,$.target.dispatchEvent(H),Go=null}else return I=Ca($),I!==null&&Sp(I),N.blockedOn=$,!1;I.shift()}return!0}function Rp(N,I,$){Eu(N)&&$.delete(I)}function jg(){Lf=!1,Ri!==null&&Eu(Ri)&&(Ri=null),Ti!==null&&Eu(Ti)&&(Ti=null),Ai!==null&&Eu(Ai)&&(Ai=null),Qs.forEach(Rp),Zs.forEach(Rp)}function wu(N,I){N.blockedOn===I&&(N.blockedOn=null,Lf||(Lf=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,jg)))}var Cu=null;function Tp(N){Cu!==N&&(Cu=N,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){Cu===N&&(Cu=null);for(var I=0;I<N.length;I+=3){var $=N[I],H=N[I+1],Z=N[I+2];if(typeof H!="function"){if(Nf(H||$)===null)continue;break}var te=Ca($);te!==null&&(N.splice(I,3),I-=3,Dc(te,{pending:!0,data:Z,method:$.method,action:H},H,Z))}}))}function jo(N){function I(Ie){return wu(Ie,N)}Ri!==null&&wu(Ri,N),Ti!==null&&wu(Ti,N),Ai!==null&&wu(Ai,N),Qs.forEach(I),Zs.forEach(I);for(var $=0;$<ki.length;$++){var H=ki[$];H.blockedOn===N&&(H.blockedOn=null)}for(;0<ki.length&&($=ki[0],$.blockedOn===null);)_p($),$.blockedOn===null&&ki.shift();if($=(N.ownerDocument||N).$$reactFormReplay,$!=null)for(H=0;H<$.length;H+=3){var Z=$[H],te=$[H+1],pe=Z[zr]||null;if(typeof te=="function")pe||Tp($);else if(pe){var Te=null;if(te&&te.hasAttribute("formAction")){if(Z=te,pe=te[zr]||null)Te=pe.formAction;else if(Nf(Z)!==null)continue}else Te=pe.action;typeof Te=="function"?$[H+1]=Te:($.splice(H,3),H-=3),Tp($)}}}function Ap(){function N(te){te.canIntercept&&te.info==="react-transition"&&te.intercept({handler:function(){return new Promise(function(pe){return Z=pe})},focusReset:"manual",scroll:"manual"})}function I(){Z!==null&&(Z(),Z=null),H||setTimeout($,20)}function $(){if(!H&&!navigation.transition){var te=navigation.currentEntry;te&&te.url!=null&&navigation.navigate(te.url,{state:te.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var H=!1,Z=null;return navigation.addEventListener("navigate",N),navigation.addEventListener("navigatesuccess",I),navigation.addEventListener("navigateerror",I),setTimeout($,100),function(){H=!0,navigation.removeEventListener("navigate",N),navigation.removeEventListener("navigatesuccess",I),navigation.removeEventListener("navigateerror",I),Z!==null&&(Z(),Z=null)}}}function qf(N){this._internalRoot=N}_u.prototype.render=qf.prototype.render=function(N){var I=this._internalRoot;if(I===null)throw Error(R(409));var $=I.current,H=Yn();bp($,H,N,I,null,null)},_u.prototype.unmount=qf.prototype.unmount=function(){var N=this._internalRoot;if(N!==null){this._internalRoot=null;var I=N.containerInfo;bp(N.current,2,null,N,null,null),iu(),I[xn]=null}};function _u(N){this._internalRoot=N}_u.prototype.unstable_scheduleHydration=function(N){if(N){var I=_r();N={blockedOn:null,target:N,priority:I};for(var $=0;$<ki.length&&I!==0&&I<ki[$].priority;$++);ki.splice($,0,N),$===0&&_p(N)}};var kp=v.version;if(kp!=="19.2.0")throw Error(R(527,kp,"19.2.0"));ve.findDOMNode=function(N){var I=N._reactInternals;if(I===void 0)throw typeof N.render=="function"?Error(R(188)):(N=Object.keys(N).join(","),Error(R(268,N)));return N=D(I),N=N!==null?L(N):null,N=N===null?null:N.stateNode,N};var zg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Re=Ru.inject(zg),je=Ru}catch{}}return reactDomClient_production.createRoot=function(N,I){if(!T(N))throw Error(R(299));var $=!1,H="",Z=qd,te=Id,pe=Bd;return I!=null&&(I.unstable_strictMode===!0&&($=!0),I.identifierPrefix!==void 0&&(H=I.identifierPrefix),I.onUncaughtError!==void 0&&(Z=I.onUncaughtError),I.onCaughtError!==void 0&&(te=I.onCaughtError),I.onRecoverableError!==void 0&&(pe=I.onRecoverableError)),I=vp(N,1,!1,null,null,$,H,null,Z,te,pe,Ap),N[xn]=I.current,vf(N),new qf(I)},reactDomClient_production.hydrateRoot=function(N,I,$){if(!T(N))throw Error(R(299));var H=!1,Z="",te=qd,pe=Id,Te=Bd,Ie=null;return $!=null&&($.unstable_strictMode===!0&&(H=!0),$.identifierPrefix!==void 0&&(Z=$.identifierPrefix),$.onUncaughtError!==void 0&&(te=$.onUncaughtError),$.onCaughtError!==void 0&&(pe=$.onCaughtError),$.onRecoverableError!==void 0&&(Te=$.onRecoverableError),$.formState!==void 0&&(Ie=$.formState)),I=vp(N,1,!0,I,$??null,H,Z,Ie,te,pe,Te,Ap),I.context=yp(null),$=I.current,H=Yn(),H=wr(H),Z=pi(H),Z.callback=null,gi($,Z,H),$=H,I.current.lanes=$,zt(I,$),qa(I),N[xn]=I.current,vf(N),new _u(I)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(v){console.error(v)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createBrowserHistory(_={}){function v(R,T){let{pathname:A,search:k,hash:M}=R.location;return createLocation("",{pathname:A,search:k,hash:M},T.state&&T.state.usr||null,T.state&&T.state.key||"default")}function S(R,T){return typeof T=="string"?T:createPath(T)}return getUrlBasedHistory(v,S,null,_)}function invariant(_,v){if(_===!1||_===null||typeof _>"u")throw new Error(v)}function warning(_,v){if(!_){typeof console<"u"&&console.warn(v);try{throw new Error(v)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(_,v){return{usr:_.state,key:_.key,idx:v}}function createLocation(_,v,S=null,R){return{pathname:typeof _=="string"?_:_.pathname,search:"",hash:"",...typeof v=="string"?parsePath(v):v,state:S,key:v&&v.key||R||createKey()}}function createPath({pathname:_="/",search:v="",hash:S=""}){return v&&v!=="?"&&(_+=v.charAt(0)==="?"?v:"?"+v),S&&S!=="#"&&(_+=S.charAt(0)==="#"?S:"#"+S),_}function parsePath(_){let v={};if(_){let S=_.indexOf("#");S>=0&&(v.hash=_.substring(S),_=_.substring(0,S));let R=_.indexOf("?");R>=0&&(v.search=_.substring(R),_=_.substring(0,R)),_&&(v.pathname=_)}return v}function getUrlBasedHistory(_,v,S,R={}){let{window:T=document.defaultView,v5Compat:A=!1}=R,k=T.history,M="POP",P=null,D=L();D==null&&(D=0,k.replaceState({...k.state,idx:D},""));function L(){return(k.state||{idx:null}).idx}function q(){M="POP";let V=L(),G=V==null?null:V-D;D=V,P&&P({action:M,location:z.location,delta:G})}function B(V,G){M="PUSH";let W=createLocation(z.location,V,G);D=L()+1;let Y=getHistoryState(W,D),X=z.createHref(W);try{k.pushState(Y,"",X)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;T.location.assign(X)}A&&P&&P({action:M,location:z.location,delta:1})}function F(V,G){M="REPLACE";let W=createLocation(z.location,V,G);D=L();let Y=getHistoryState(W,D),X=z.createHref(W);k.replaceState(Y,"",X),A&&P&&P({action:M,location:z.location,delta:0})}function j(V){return createBrowserURLImpl(V)}let z={get action(){return M},get location(){return _(T,k)},listen(V){if(P)throw new Error("A history only accepts one active listener");return T.addEventListener(PopStateEventType,q),P=V,()=>{T.removeEventListener(PopStateEventType,q),P=null}},createHref(V){return v(T,V)},createURL:j,encodeLocation(V){let G=j(V);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:B,replace:F,go(V){return k.go(V)}};return z}function createBrowserURLImpl(_,v=!1){let S="http://localhost";typeof window<"u"&&(S=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(S,"No window.location.(origin|href) available to create URL");let R=typeof _=="string"?_:createPath(_);return R=R.replace(/ $/,"%20"),!v&&R.startsWith("//")&&(R=S+R),new URL(R,S)}function matchRoutes(_,v,S="/"){return matchRoutesImpl(_,v,S,!1)}function matchRoutesImpl(_,v,S,R){let T=typeof v=="string"?parsePath(v):v,A=stripBasename(T.pathname||"/",S);if(A==null)return null;let k=flattenRoutes(_);rankRouteBranches(k);let M=null;for(let P=0;M==null&&P<k.length;++P){let D=decodePath(A);M=matchRouteBranch(k[P],D,R)}return M}function flattenRoutes(_,v=[],S=[],R="",T=!1){let A=(k,M,P=T,D)=>{let L={relativePath:D===void 0?k.path||"":D,caseSensitive:k.caseSensitive===!0,childrenIndex:M,route:k};if(L.relativePath.startsWith("/")){if(!L.relativePath.startsWith(R)&&P)return;invariant(L.relativePath.startsWith(R),`Absolute route path "${L.relativePath}" nested under path "${R}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),L.relativePath=L.relativePath.slice(R.length)}let q=joinPaths([R,L.relativePath]),B=S.concat(L);k.children&&k.children.length>0&&(invariant(k.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${q}".`),flattenRoutes(k.children,v,B,q,P)),!(k.path==null&&!k.index)&&v.push({path:q,score:computeScore(q,k.index),routesMeta:B})};return _.forEach((k,M)=>{if(k.path===""||!k.path?.includes("?"))A(k,M);else for(let P of explodeOptionalSegments(k.path))A(k,M,!0,P)}),v}function explodeOptionalSegments(_){let v=_.split("/");if(v.length===0)return[];let[S,...R]=v,T=S.endsWith("?"),A=S.replace(/\?$/,"");if(R.length===0)return T?[A,""]:[A];let k=explodeOptionalSegments(R.join("/")),M=[];return M.push(...k.map(P=>P===""?A:[A,P].join("/"))),T&&M.push(...k),M.map(P=>_.startsWith("/")&&P===""?"/":P)}function rankRouteBranches(_){_.sort((v,S)=>v.score!==S.score?S.score-v.score:compareIndexes(v.routesMeta.map(R=>R.childrenIndex),S.routesMeta.map(R=>R.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_=>_==="*";function computeScore(_,v){let S=_.split("/"),R=S.length;return S.some(isSplat)&&(R+=splatPenalty),v&&(R+=indexRouteValue),S.filter(T=>!isSplat(T)).reduce((T,A)=>T+(paramRe.test(A)?dynamicSegmentValue:A===""?emptySegmentValue:staticSegmentValue),R)}function compareIndexes(_,v){return _.length===v.length&&_.slice(0,-1).every((R,T)=>R===v[T])?_[_.length-1]-v[v.length-1]:0}function matchRouteBranch(_,v,S=!1){let{routesMeta:R}=_,T={},A="/",k=[];for(let M=0;M<R.length;++M){let P=R[M],D=M===R.length-1,L=A==="/"?v:v.slice(A.length)||"/",q=matchPath({path:P.relativePath,caseSensitive:P.caseSensitive,end:D},L),B=P.route;if(!q&&D&&S&&!R[R.length-1].route.index&&(q=matchPath({path:P.relativePath,caseSensitive:P.caseSensitive,end:!1},L)),!q)return null;Object.assign(T,q.params),k.push({params:T,pathname:joinPaths([A,q.pathname]),pathnameBase:normalizePathname(joinPaths([A,q.pathnameBase])),route:B}),q.pathnameBase!=="/"&&(A=joinPaths([A,q.pathnameBase]))}return k}function matchPath(_,v){typeof _=="string"&&(_={path:_,caseSensitive:!1,end:!0});let[S,R]=compilePath(_.path,_.caseSensitive,_.end),T=v.match(S);if(!T)return null;let A=T[0],k=A.replace(/(.)\/+$/,"$1"),M=T.slice(1);return{params:R.reduce((D,{paramName:L,isOptional:q},B)=>{if(L==="*"){let j=M[B]||"";k=A.slice(0,A.length-j.length).replace(/(.)\/+$/,"$1")}const F=M[B];return q&&!F?D[L]=void 0:D[L]=(F||"").replace(/%2F/g,"/"),D},{}),pathname:A,pathnameBase:k,pattern:_}}function compilePath(_,v=!1,S=!0){warning(_==="*"||!_.endsWith("*")||_.endsWith("/*"),`Route path "${_}" will be treated as if it were "${_.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${_.replace(/\*$/,"/*")}".`);let R=[],T="^"+_.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(k,M,P)=>(R.push({paramName:M,isOptional:P!=null}),P?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return _.endsWith("*")?(R.push({paramName:"*"}),T+=_==="*"||_==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):S?T+="\\/*$":_!==""&&_!=="/"&&(T+="(?:(?=\\/|$))"),[new RegExp(T,v?void 0:"i"),R]}function decodePath(_){try{return _.split("/").map(v=>decodeURIComponent(v).replace(/\//g,"%2F")).join("/")}catch(v){return warning(!1,`The URL path "${_}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${v}).`),_}}function stripBasename(_,v){if(v==="/")return _;if(!_.toLowerCase().startsWith(v.toLowerCase()))return null;let S=v.endsWith("/")?v.length-1:v.length,R=_.charAt(S);return R&&R!=="/"?null:_.slice(S)||"/"}function resolvePath(_,v="/"){let{pathname:S,search:R="",hash:T=""}=typeof _=="string"?parsePath(_):_;return{pathname:S?S.startsWith("/")?S:resolvePathname(S,v):v,search:normalizeSearch(R),hash:normalizeHash(T)}}function resolvePathname(_,v){let S=v.replace(/\/+$/,"").split("/");return _.split("/").forEach(T=>{T===".."?S.length>1&&S.pop():T!=="."&&S.push(T)}),S.length>1?S.join("/"):"/"}function getInvalidPathError(_,v,S,R){return`Cannot include a '${_}' character in a manually specified \`to.${v}\` field [${JSON.stringify(R)}].  Please separate it out to the \`to.${S}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(_){return _.filter((v,S)=>S===0||v.route.path&&v.route.path.length>0)}function getResolveToMatches(_){let v=getPathContributingMatches(_);return v.map((S,R)=>R===v.length-1?S.pathname:S.pathnameBase)}function resolveTo(_,v,S,R=!1){let T;typeof _=="string"?T=parsePath(_):(T={..._},invariant(!T.pathname||!T.pathname.includes("?"),getInvalidPathError("?","pathname","search",T)),invariant(!T.pathname||!T.pathname.includes("#"),getInvalidPathError("#","pathname","hash",T)),invariant(!T.search||!T.search.includes("#"),getInvalidPathError("#","search","hash",T)));let A=_===""||T.pathname==="",k=A?"/":T.pathname,M;if(k==null)M=S;else{let q=v.length-1;if(!R&&k.startsWith("..")){let B=k.split("/");for(;B[0]==="..";)B.shift(),q-=1;T.pathname=B.join("/")}M=q>=0?v[q]:"/"}let P=resolvePath(T,M),D=k&&k!=="/"&&k.endsWith("/"),L=(A||k===".")&&S.endsWith("/");return!P.pathname.endsWith("/")&&(D||L)&&(P.pathname+="/"),P}var joinPaths=_=>_.join("/").replace(/\/\/+/g,"/"),normalizePathname=_=>_.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_=>!_||_==="?"?"":_.startsWith("?")?_:"?"+_,normalizeHash=_=>!_||_==="#"?"":_.startsWith("#")?_:"#"+_;function isRouteErrorResponse(_){return _!=null&&typeof _.status=="number"&&typeof _.statusText=="string"&&typeof _.internal=="boolean"&&"data"in _}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(_,{relative:v}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:S,navigator:R}=reactExports.useContext(NavigationContext),{hash:T,pathname:A,search:k}=useResolvedPath(_,{relative:v}),M=A;return S!=="/"&&(M=A==="/"?S:joinPaths([S,A])),R.createHref({pathname:M,search:k,hash:T})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(_){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_)}function useNavigate(){let{isDataRoute:_}=reactExports.useContext(RouteContext);return _?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let _=reactExports.useContext(DataRouterContext),{basename:v,navigator:S}=reactExports.useContext(NavigationContext),{matches:R}=reactExports.useContext(RouteContext),{pathname:T}=useLocation(),A=JSON.stringify(getResolveToMatches(R)),k=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{k.current=!0}),reactExports.useCallback((P,D={})=>{if(warning(k.current,navigateEffectWarning),!k.current)return;if(typeof P=="number"){S.go(P);return}let L=resolveTo(P,JSON.parse(A),T,D.relative==="path");_==null&&v!=="/"&&(L.pathname=L.pathname==="/"?v:joinPaths([v,L.pathname])),(D.replace?S.replace:S.push)(L,D.state,D)},[v,S,A,T,_])}reactExports.createContext(null);function useResolvedPath(_,{relative:v}={}){let{matches:S}=reactExports.useContext(RouteContext),{pathname:R}=useLocation(),T=JSON.stringify(getResolveToMatches(S));return reactExports.useMemo(()=>resolveTo(_,JSON.parse(T),R,v==="path"),[_,T,R,v])}function useRoutes(_,v){return useRoutesImpl(_,v)}function useRoutesImpl(_,v,S,R,T){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:A}=reactExports.useContext(NavigationContext),{matches:k}=reactExports.useContext(RouteContext),M=k[k.length-1],P=M?M.params:{},D=M?M.pathname:"/",L=M?M.pathnameBase:"/",q=M&&M.route;{let W=q&&q.path||"";warningOnce(D,!q||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${D}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let B=useLocation(),F;if(v){let W=typeof v=="string"?parsePath(v):v;invariant(L==="/"||W.pathname?.startsWith(L),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${L}" but pathname "${W.pathname}" was given in the \`location\` prop.`),F=W}else F=B;let j=F.pathname||"/",z=j;if(L!=="/"){let W=L.replace(/^\//,"").split("/");z="/"+j.replace(/^\//,"").split("/").slice(W.length).join("/")}let V=matchRoutes(_,{pathname:z});warning(q||V!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),warning(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=_renderMatches(V&&V.map(W=>Object.assign({},W,{params:Object.assign({},P,W.params),pathname:joinPaths([L,A.encodeLocation?A.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?L:joinPaths([L,A.encodeLocation?A.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),k,S,R,T);return v&&G?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},G):G}function DefaultErrorComponent(){let _=useRouteError(),v=isRouteErrorResponse(_)?`${_.status} ${_.statusText}`:_ instanceof Error?_.message:JSON.stringify(_),S=_ instanceof Error?_.stack:null,R="rgba(200,200,200, 0.5)",T={padding:"0.5rem",backgroundColor:R},A={padding:"2px 4px",backgroundColor:R},k=null;return console.error("Error handled by React Router default ErrorBoundary:",_),k=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:A},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:A},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},v),S?reactExports.createElement("pre",{style:T},S):null,k)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(_){super(_),this.state={location:_.location,revalidation:_.revalidation,error:_.error}}static getDerivedStateFromError(_){return{error:_}}static getDerivedStateFromProps(_,v){return v.location!==_.location||v.revalidation!=="idle"&&_.revalidation==="idle"?{error:_.error,location:_.location,revalidation:_.revalidation}:{error:_.error!==void 0?_.error:v.error,location:v.location,revalidation:_.revalidation||v.revalidation}}componentDidCatch(_,v){this.props.unstable_onError?this.props.unstable_onError(_,v):console.error("React Router caught the following error during render",_)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:_,match:v,children:S}){let R=reactExports.useContext(DataRouterContext);return R&&R.static&&R.staticContext&&(v.route.errorElement||v.route.ErrorBoundary)&&(R.staticContext._deepestRenderedBoundaryId=v.route.id),reactExports.createElement(RouteContext.Provider,{value:_},S)}function _renderMatches(_,v=[],S=null,R=null,T=null){if(_==null){if(!S)return null;if(S.errors)_=S.matches;else if(v.length===0&&!S.initialized&&S.matches.length>0)_=S.matches;else return null}let A=_,k=S?.errors;if(k!=null){let D=A.findIndex(L=>L.route.id&&k?.[L.route.id]!==void 0);invariant(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(k).join(",")}`),A=A.slice(0,Math.min(A.length,D+1))}let M=!1,P=-1;if(S)for(let D=0;D<A.length;D++){let L=A[D];if((L.route.HydrateFallback||L.route.hydrateFallbackElement)&&(P=D),L.route.id){let{loaderData:q,errors:B}=S,F=L.route.loader&&!q.hasOwnProperty(L.route.id)&&(!B||B[L.route.id]===void 0);if(L.route.lazy||F){M=!0,P>=0?A=A.slice(0,P+1):A=[A[0]];break}}}return A.reduceRight((D,L,q)=>{let B,F=!1,j=null,z=null;S&&(B=k&&L.route.id?k[L.route.id]:void 0,j=L.route.errorElement||defaultErrorElement,M&&(P<0&&q===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,z=null):P===q&&(F=!0,z=L.route.hydrateFallbackElement||null)));let V=v.concat(A.slice(0,q+1)),G=()=>{let W;return B?W=j:F?W=z:L.route.Component?W=reactExports.createElement(L.route.Component,null):L.route.element?W=L.route.element:W=D,reactExports.createElement(RenderedRoute,{match:L,routeContext:{outlet:D,matches:V,isDataRoute:S!=null},children:W})};return S&&(L.route.ErrorBoundary||L.route.errorElement||q===0)?reactExports.createElement(RenderErrorBoundary,{location:S.location,revalidation:S.revalidation,component:j,error:B,children:G(),routeContext:{outlet:null,matches:V,isDataRoute:!0},unstable_onError:R}):G()},null)}function getDataRouterConsoleError(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(_){let v=reactExports.useContext(DataRouterContext);return invariant(v,getDataRouterConsoleError(_)),v}function useDataRouterState(_){let v=reactExports.useContext(DataRouterStateContext);return invariant(v,getDataRouterConsoleError(_)),v}function useRouteContext(_){let v=reactExports.useContext(RouteContext);return invariant(v,getDataRouterConsoleError(_)),v}function useCurrentRouteId(_){let v=useRouteContext(_),S=v.matches[v.matches.length-1];return invariant(S.route.id,`${_} can only be used on routes that contain a unique "id"`),S.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let _=reactExports.useContext(RouteErrorContext),v=useDataRouterState("useRouteError"),S=useCurrentRouteId("useRouteError");return _!==void 0?_:v.errors?.[S]}function useNavigateStable(){let{router:_}=useDataRouterContext("useNavigate"),v=useCurrentRouteId("useNavigate"),S=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{S.current=!0}),reactExports.useCallback(async(T,A={})=>{warning(S.current,navigateEffectWarning),S.current&&(typeof T=="number"?_.navigate(T):await _.navigate(T,{fromRouteId:v,...A}))},[_,v])}var alreadyWarned$1={};function warningOnce(_,v,S){!v&&!alreadyWarned$1[_]&&(alreadyWarned$1[_]=!0,warning(!1,S))}reactExports.memo(DataRoutes);function DataRoutes({routes:_,future:v,state:S,unstable_onError:R}){return useRoutesImpl(_,void 0,S,R,v)}function Route(_){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:_="/",children:v=null,location:S,navigationType:R="POP",navigator:T,static:A=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let k=_.replace(/^\/*/,"/"),M=reactExports.useMemo(()=>({basename:k,navigator:T,static:A,future:{}}),[k,T,A]);typeof S=="string"&&(S=parsePath(S));let{pathname:P="/",search:D="",hash:L="",state:q=null,key:B="default"}=S,F=reactExports.useMemo(()=>{let j=stripBasename(P,k);return j==null?null:{location:{pathname:j,search:D,hash:L,state:q,key:B},navigationType:R}},[k,P,D,L,q,B,R]);return warning(F!=null,`<Router basename="${k}"> is not able to match the URL "${P}${D}${L}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:reactExports.createElement(NavigationContext.Provider,{value:M},reactExports.createElement(LocationContext.Provider,{children:v,value:F}))}function Routes({children:_,location:v}){return useRoutes(createRoutesFromChildren(_),v)}function createRoutesFromChildren(_,v=[]){let S=[];return reactExports.Children.forEach(_,(R,T)=>{if(!reactExports.isValidElement(R))return;let A=[...v,T];if(R.type===reactExports.Fragment){S.push.apply(S,createRoutesFromChildren(R.props.children,A));return}invariant(R.type===Route,`[${typeof R.type=="string"?R.type:R.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!R.props.index||!R.props.children,"An index route cannot have child routes.");let k={id:R.props.id||A.join("-"),caseSensitive:R.props.caseSensitive,element:R.props.element,Component:R.props.Component,index:R.props.index,path:R.props.path,middleware:R.props.middleware,loader:R.props.loader,action:R.props.action,hydrateFallbackElement:R.props.hydrateFallbackElement,HydrateFallback:R.props.HydrateFallback,errorElement:R.props.errorElement,ErrorBoundary:R.props.ErrorBoundary,hasErrorBoundary:R.props.hasErrorBoundary===!0||R.props.ErrorBoundary!=null||R.props.errorElement!=null,shouldRevalidate:R.props.shouldRevalidate,handle:R.props.handle,lazy:R.props.lazy};R.props.children&&(k.children=createRoutesFromChildren(R.props.children,A)),S.push(k)}),S}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(_){return _!=null&&typeof _.tagName=="string"}function isButtonElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="button"}function isFormElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="form"}function isInputElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="input"}function isModifiedEvent(_){return!!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)}function shouldProcessLinkClick(_,v){return _.button===0&&(!v||v==="_self")&&!isModifiedEvent(_)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(_){return _!=null&&!supportedFormEncTypes.has(_)?(warning(!1,`"${_}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):_}function getFormSubmissionInfo(_,v){let S,R,T,A,k;if(isFormElement(_)){let M=_.getAttribute("action");R=M?stripBasename(M,v):null,S=_.getAttribute("method")||defaultMethod,T=getFormEncType(_.getAttribute("enctype"))||defaultEncType,A=new FormData(_)}else if(isButtonElement(_)||isInputElement(_)&&(_.type==="submit"||_.type==="image")){let M=_.form;if(M==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let P=_.getAttribute("formaction")||M.getAttribute("action");if(R=P?stripBasename(P,v):null,S=_.getAttribute("formmethod")||M.getAttribute("method")||defaultMethod,T=getFormEncType(_.getAttribute("formenctype"))||getFormEncType(M.getAttribute("enctype"))||defaultEncType,A=new FormData(M,_),!isFormDataSubmitterSupported()){let{name:D,type:L,value:q}=_;if(L==="image"){let B=D?`${D}.`:"";A.append(`${B}x`,"0"),A.append(`${B}y`,"0")}else D&&A.append(D,q)}}else{if(isHtmlElement(_))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');S=defaultMethod,R=null,T=defaultEncType,k=_}return A&&T==="text/plain"&&(k=A,A=void 0),{action:R,method:S.toLowerCase(),encType:T,formData:A,body:k}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(_,v){if(_===!1||_===null||typeof _>"u")throw new Error(v)}function singleFetchUrl(_,v,S){let R=typeof _=="string"?new URL(_,typeof window>"u"?"server://singlefetch/":window.location.origin):_;return R.pathname==="/"?R.pathname=`_root.${S}`:v&&stripBasename(R.pathname,v)==="/"?R.pathname=`${v.replace(/\/$/,"")}/_root.${S}`:R.pathname=`${R.pathname.replace(/\/$/,"")}.${S}`,R}async function loadRouteModule(_,v){if(_.id in v)return v[_.id];try{let S=await import(_.module);return v[_.id]=S,S}catch(S){return console.error(`Error loading route module \`${_.module}\`, reloading page...`),console.error(S),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(_){return _==null?!1:_.href==null?_.rel==="preload"&&typeof _.imageSrcSet=="string"&&typeof _.imageSizes=="string":typeof _.rel=="string"&&typeof _.href=="string"}async function getKeyedPrefetchLinks(_,v,S){let R=await Promise.all(_.map(async T=>{let A=v.routes[T.route.id];if(A){let k=await loadRouteModule(A,S);return k.links?k.links():[]}return[]}));return dedupeLinkDescriptors(R.flat(1).filter(isHtmlLinkDescriptor).filter(T=>T.rel==="stylesheet"||T.rel==="preload").map(T=>T.rel==="stylesheet"?{...T,rel:"prefetch",as:"style"}:{...T,rel:"prefetch"}))}function getNewMatchesForLinks(_,v,S,R,T,A){let k=(P,D)=>S[D]?P.route.id!==S[D].route.id:!0,M=(P,D)=>S[D].pathname!==P.pathname||S[D].route.path?.endsWith("*")&&S[D].params["*"]!==P.params["*"];return A==="assets"?v.filter((P,D)=>k(P,D)||M(P,D)):A==="data"?v.filter((P,D)=>{let L=R.routes[P.route.id];if(!L||!L.hasLoader)return!1;if(k(P,D)||M(P,D))return!0;if(P.route.shouldRevalidate){let q=P.route.shouldRevalidate({currentUrl:new URL(T.pathname+T.search+T.hash,window.origin),currentParams:S[0]?.params||{},nextUrl:new URL(_,window.origin),nextParams:P.params,defaultShouldRevalidate:!0});if(typeof q=="boolean")return q}return!0}):[]}function getModuleLinkHrefs(_,v,{includeHydrateFallback:S}={}){return dedupeHrefs(_.map(R=>{let T=v.routes[R.route.id];if(!T)return[];let A=[T.module];return T.clientActionModule&&(A=A.concat(T.clientActionModule)),T.clientLoaderModule&&(A=A.concat(T.clientLoaderModule)),S&&T.hydrateFallbackModule&&(A=A.concat(T.hydrateFallbackModule)),T.imports&&(A=A.concat(T.imports)),A}).flat(1))}function dedupeHrefs(_){return[...new Set(_)]}function sortKeys(_){let v={},S=Object.keys(_).sort();for(let R of S)v[R]=_[R];return v}function dedupeLinkDescriptors(_,v){let S=new Set;return new Set(v),_.reduce((R,T)=>{let A=JSON.stringify(sortKeys(T));return S.has(A)||(S.add(A),R.push({key:A,link:T})),R},[])}function useDataRouterContext2(){let _=reactExports.useContext(DataRouterContext);return invariant2(_,"You must render this element inside a <DataRouterContext.Provider> element"),_}function useDataRouterStateContext(){let _=reactExports.useContext(DataRouterStateContext);return invariant2(_,"You must render this element inside a <DataRouterStateContext.Provider> element"),_}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let _=reactExports.useContext(FrameworkContext);return invariant2(_,"You must render this element inside a <HydratedRouter> element"),_}function usePrefetchBehavior(_,v){let S=reactExports.useContext(FrameworkContext),[R,T]=reactExports.useState(!1),[A,k]=reactExports.useState(!1),{onFocus:M,onBlur:P,onMouseEnter:D,onMouseLeave:L,onTouchStart:q}=v,B=reactExports.useRef(null);reactExports.useEffect(()=>{if(_==="render"&&k(!0),_==="viewport"){let z=G=>{G.forEach(W=>{k(W.isIntersecting)})},V=new IntersectionObserver(z,{threshold:.5});return B.current&&V.observe(B.current),()=>{V.disconnect()}}},[_]),reactExports.useEffect(()=>{if(R){let z=setTimeout(()=>{k(!0)},100);return()=>{clearTimeout(z)}}},[R]);let F=()=>{T(!0)},j=()=>{T(!1),k(!1)};return S?_!=="intent"?[A,B,{}]:[A,B,{onFocus:composeEventHandlers$1(M,F),onBlur:composeEventHandlers$1(P,j),onMouseEnter:composeEventHandlers$1(D,F),onMouseLeave:composeEventHandlers$1(L,j),onTouchStart:composeEventHandlers$1(q,F)}]:[!1,B,{}]}function composeEventHandlers$1(_,v){return S=>{_&&_(S),S.defaultPrevented||v(S)}}function PrefetchPageLinks({page:_,...v}){let{router:S}=useDataRouterContext2(),R=reactExports.useMemo(()=>matchRoutes(S.routes,_,S.basename),[S.routes,_,S.basename]);return R?reactExports.createElement(PrefetchPageLinksImpl,{page:_,matches:R,...v}):null}function useKeyedPrefetchLinks(_){let{manifest:v,routeModules:S}=useFrameworkContext(),[R,T]=reactExports.useState([]);return reactExports.useEffect(()=>{let A=!1;return getKeyedPrefetchLinks(_,v,S).then(k=>{A||T(k)}),()=>{A=!0}},[_,v,S]),R}function PrefetchPageLinksImpl({page:_,matches:v,...S}){let R=useLocation(),{manifest:T,routeModules:A}=useFrameworkContext(),{basename:k}=useDataRouterContext2(),{loaderData:M,matches:P}=useDataRouterStateContext(),D=reactExports.useMemo(()=>getNewMatchesForLinks(_,v,P,T,R,"data"),[_,v,P,T,R]),L=reactExports.useMemo(()=>getNewMatchesForLinks(_,v,P,T,R,"assets"),[_,v,P,T,R]),q=reactExports.useMemo(()=>{if(_===R.pathname+R.search+R.hash)return[];let j=new Set,z=!1;if(v.forEach(G=>{let W=T.routes[G.route.id];!W||!W.hasLoader||(!D.some(Y=>Y.route.id===G.route.id)&&G.route.id in M&&A[G.route.id]?.shouldRevalidate||W.hasClientLoader?z=!0:j.add(G.route.id))}),j.size===0)return[];let V=singleFetchUrl(_,k,"data");return z&&j.size>0&&V.searchParams.set("_routes",v.filter(G=>j.has(G.route.id)).map(G=>G.route.id).join(",")),[V.pathname+V.search]},[k,M,R,T,D,v,_,A]),B=reactExports.useMemo(()=>getModuleLinkHrefs(L,T),[L,T]),F=useKeyedPrefetchLinks(L);return reactExports.createElement(reactExports.Fragment,null,q.map(j=>reactExports.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...S})),B.map(j=>reactExports.createElement("link",{key:j,rel:"modulepreload",href:j,...S})),F.map(({key:j,link:z})=>reactExports.createElement("link",{key:j,nonce:S.nonce,...z})))}function mergeRefs(..._){return v=>{_.forEach(S=>{typeof S=="function"?S(v):S!=null&&(S.current=v)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function BrowserRouter({basename:_,children:v,window:S}){let R=reactExports.useRef();R.current==null&&(R.current=createBrowserHistory({window:S,v5Compat:!0}));let T=R.current,[A,k]=reactExports.useState({action:T.action,location:T.location}),M=reactExports.useCallback(P=>{reactExports.startTransition(()=>k(P))},[k]);return reactExports.useLayoutEffect(()=>T.listen(M),[T,M]),reactExports.createElement(Router,{basename:_,children:v,location:A.location,navigationType:A.action,navigator:T})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:v,discover:S="render",prefetch:R="none",relative:T,reloadDocument:A,replace:k,state:M,target:P,to:D,preventScrollReset:L,viewTransition:q,...B},F){let{basename:j}=reactExports.useContext(NavigationContext),z=typeof D=="string"&&ABSOLUTE_URL_REGEX2.test(D),V,G=!1;if(typeof D=="string"&&z&&(V=D,isBrowser))try{let ae=new URL(window.location.href),oe=D.startsWith("//")?new URL(ae.protocol+D):new URL(D),se=stripBasename(oe.pathname,j);oe.origin===ae.origin&&se!=null?D=se+oe.search+oe.hash:G=!0}catch{warning(!1,`<Link to="${D}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=useHref(D,{relative:T}),[Y,X,ee]=usePrefetchBehavior(R,B),re=useLinkClickHandler(D,{replace:k,state:M,target:P,preventScrollReset:L,relative:T,viewTransition:q});function Q(ae){v&&v(ae),ae.defaultPrevented||re(ae)}let ne=reactExports.createElement("a",{...B,...ee,href:V||W,onClick:G||A?v:Q,ref:mergeRefs(F,X),target:P,"data-discover":!z&&S==="render"?"true":void 0});return Y&&!z?reactExports.createElement(reactExports.Fragment,null,ne,reactExports.createElement(PrefetchPageLinks,{page:W})):ne});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":v="page",caseSensitive:S=!1,className:R="",end:T=!1,style:A,to:k,viewTransition:M,children:P,...D},L){let q=useResolvedPath(k,{relative:D.relative}),B=useLocation(),F=reactExports.useContext(DataRouterStateContext),{navigator:j,basename:z}=reactExports.useContext(NavigationContext),V=F!=null&&useViewTransitionState(q)&&M===!0,G=j.encodeLocation?j.encodeLocation(q).pathname:q.pathname,W=B.pathname,Y=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;S||(W=W.toLowerCase(),Y=Y?Y.toLowerCase():null,G=G.toLowerCase()),Y&&z&&(Y=stripBasename(Y,z)||Y);const X=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ee=W===G||!T&&W.startsWith(G)&&W.charAt(X)==="/",re=Y!=null&&(Y===G||!T&&Y.startsWith(G)&&Y.charAt(G.length)==="/"),Q={isActive:ee,isPending:re,isTransitioning:V},ne=ee?v:void 0,ae;typeof R=="function"?ae=R(Q):ae=[R,ee?"active":null,re?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let oe=typeof A=="function"?A(Q):A;return reactExports.createElement(Link,{...D,"aria-current":ne,className:ae,ref:L,style:oe,to:k,viewTransition:M},typeof P=="function"?P(Q):P)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:_="render",fetcherKey:v,navigate:S,reloadDocument:R,replace:T,state:A,method:k=defaultMethod,action:M,onSubmit:P,relative:D,preventScrollReset:L,viewTransition:q,...B},F)=>{let j=useSubmit(),z=useFormAction(M,{relative:D}),V=k.toLowerCase()==="get"?"get":"post",G=typeof M=="string"&&ABSOLUTE_URL_REGEX2.test(M),W=Y=>{if(P&&P(Y),Y.defaultPrevented)return;Y.preventDefault();let X=Y.nativeEvent.submitter,ee=X?.getAttribute("formmethod")||k;j(X||Y.currentTarget,{fetcherKey:v,method:ee,navigate:S,replace:T,state:A,relative:D,preventScrollReset:L,viewTransition:q})};return reactExports.createElement("form",{ref:F,method:V,action:z,onSubmit:R?P:W,...B,"data-discover":!G&&_==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(_){let v=reactExports.useContext(DataRouterContext);return invariant(v,getDataRouterConsoleError2(_)),v}function useLinkClickHandler(_,{target:v,replace:S,state:R,preventScrollReset:T,relative:A,viewTransition:k}={}){let M=useNavigate(),P=useLocation(),D=useResolvedPath(_,{relative:A});return reactExports.useCallback(L=>{if(shouldProcessLinkClick(L,v)){L.preventDefault();let q=S!==void 0?S:createPath(P)===createPath(D);M(_,{replace:q,state:R,preventScrollReset:T,relative:A,viewTransition:k})}},[P,M,D,S,R,v,_,T,A,k])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:_}=useDataRouterContext3("useSubmit"),{basename:v}=reactExports.useContext(NavigationContext),S=useRouteId();return reactExports.useCallback(async(R,T={})=>{let{action:A,method:k,encType:M,formData:P,body:D}=getFormSubmissionInfo(R,v);if(T.navigate===!1){let L=T.fetcherKey||getUniqueFetcherId();await _.fetch(L,S,T.action||A,{preventScrollReset:T.preventScrollReset,formData:P,body:D,formMethod:T.method||k,formEncType:T.encType||M,flushSync:T.flushSync})}else await _.navigate(T.action||A,{preventScrollReset:T.preventScrollReset,formData:P,body:D,formMethod:T.method||k,formEncType:T.encType||M,replace:T.replace,state:T.state,fromRouteId:S,flushSync:T.flushSync,viewTransition:T.viewTransition})},[_,v,S])}function useFormAction(_,{relative:v}={}){let{basename:S}=reactExports.useContext(NavigationContext),R=reactExports.useContext(RouteContext);invariant(R,"useFormAction must be used inside a RouteContext");let[T]=R.matches.slice(-1),A={...useResolvedPath(_||".",{relative:v})},k=useLocation();if(_==null){A.search=k.search;let M=new URLSearchParams(A.search),P=M.getAll("index");if(P.some(L=>L==="")){M.delete("index"),P.filter(q=>q).forEach(q=>M.append("index",q));let L=M.toString();A.search=L?`?${L}`:""}}return(!_||_===".")&&T.route.index&&(A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index"),S!=="/"&&(A.pathname=A.pathname==="/"?S:joinPaths([S,A.pathname])),createPath(A)}function useViewTransitionState(_,{relative:v}={}){let S=reactExports.useContext(ViewTransitionContext);invariant(S!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:R}=useDataRouterContext3("useViewTransitionState"),T=useResolvedPath(_,{relative:v});if(!S.isTransitioning)return!1;let A=stripBasename(S.currentLocation.pathname,R)||S.currentLocation.pathname,k=stripBasename(S.nextLocation.pathname,R)||S.nextLocation.pathname;return matchPath(T.pathname,k)!=null||matchPath(T.pathname,A)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var _="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=_,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var _=requireReactPropTypesSecret();function v(){}function S(){}return S.resetWarningCache=v,factoryWithThrowingShims=function(){function R(k,M,P,D,L,q){if(q!==_){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}R.isRequired=R;function T(){return R}var A={array:R,bigint:R,bool:R,func:R,number:R,object:R,string:R,symbol:R,any:R,arrayOf:T,element:R,elementType:R,instanceOf:T,node:R,objectOf:T,oneOf:T,oneOfType:T,shape:T,exact:T,checkPropTypes:S,resetWarningCache:v};return A.PropTypes=A,A},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const t$1=getDefaultExportFromCjs$1(propTypesExports);function _arrayLikeToArray(_,v){(v==null||v>_.length)&&(v=_.length);for(var S=0,R=Array(v);S<v;S++)R[S]=_[S];return R}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _classCallCheck(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_,v){for(var S=0;S<v.length;S++){var R=v[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,_toPropertyKey(R.key),R)}}function _createClass(_,v,S){return v&&_defineProperties(_.prototype,v),Object.defineProperty(_,"prototype",{writable:!1}),_}function _createForOfIteratorHelper(_,v){var S=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!S){if(Array.isArray(_)||(S=_unsupportedIterableToArray(_))||v){S&&(_=S);var R=0,T=function(){};return{s:T,n:function(){return R>=_.length?{done:!0}:{done:!1,value:_[R++]}},e:function(P){throw P},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,k=!0,M=!1;return{s:function(){S=S.call(_)},n:function(){var P=S.next();return k=P.done,P},e:function(P){M=!0,A=P},f:function(){try{k||S.return==null||S.return()}finally{if(M)throw A}}}}function _defineProperty$1(_,v,S){return(v=_toPropertyKey(v))in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _iterableToArrayLimit(_,v){var S=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(S!=null){var R,T,A,k,M=[],P=!0,D=!1;try{if(A=(S=S.call(_)).next,v===0){if(Object(S)!==S)return;P=!1}else for(;!(P=(R=A.call(S)).done)&&(M.push(R.value),M.length!==v);P=!0);}catch(L){D=!0,T=L}finally{try{if(!P&&S.return!=null&&(k=S.return(),Object(k)!==k))return}finally{if(D)throw T}}return M}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(_,v){return _arrayWithHoles(_)||_iterableToArrayLimit(_,v)||_unsupportedIterableToArray(_,v)||_nonIterableRest()}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}function _toPrimitive(_,v){if(typeof _!="object"||!_)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var R=S.call(_,v);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}function _toPropertyKey(_){var v=_toPrimitive(_,"string");return typeof v=="symbol"?v:v+""}function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},_typeof(_)}function _unsupportedIterableToArray(_,v){if(_){if(typeof _=="string")return _arrayLikeToArray(_,v);var S={}.toString.call(_).slice(8,-1);return S==="Object"&&_.constructor&&(S=_.constructor.name),S==="Map"||S==="Set"?Array.from(_):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?_arrayLikeToArray(_,v):void 0}}var _window=typeof window>"u"?null:window,navigator$2=_window?_window.navigator:null;_window&&_window.document;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele=typeof HTMLElement>"u"?"undefined":_typeof(HTMLElement),instanceStr=function(v){return v&&v.instanceString&&fn$6(v.instanceString)?v.instanceString():null},string$1=function(v){return v!=null&&_typeof(v)==typeofstr},fn$6=function(v){return v!=null&&_typeof(v)===typeoffn},array=function(v){return!elementOrCollection(v)&&(Array.isArray?Array.isArray(v):v!=null&&v instanceof Array)},plainObject=function(v){return v!=null&&_typeof(v)===typeofobj&&!array(v)&&v.constructor===Object},object=function(v){return v!=null&&_typeof(v)===typeofobj},number$1=function(v){return v!=null&&_typeof(v)===_typeof(1)&&!isNaN(v)},integer=function(v){return number$1(v)&&Math.floor(v)===v},htmlElement=function(v){if(typeofhtmlele!=="undefined")return v!=null&&v instanceof HTMLElement},elementOrCollection=function(v){return element(v)||collection(v)},element=function(v){return instanceStr(v)==="collection"&&v._private.single},collection=function(v){return instanceStr(v)==="collection"&&!v._private.single},core$2=function(v){return instanceStr(v)==="core"},stylesheet=function(v){return instanceStr(v)==="stylesheet"},event=function(v){return instanceStr(v)==="event"},emptyString=function(v){return v==null?!0:!!(v===""||v.match(/^\s+$/))},domElement=function(v){return typeof HTMLElement>"u"?!1:v instanceof HTMLElement},boundingBox=function(v){return plainObject(v)&&number$1(v.x1)&&number$1(v.x2)&&number$1(v.y1)&&number$1(v.y2)},promise=function(v){return object(v)&&fn$6(v.then)},ms=function(){return navigator$2&&navigator$2.userAgent.match(/msie|trident|edge/i)},memoize=function(v,S){S||(S=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var A=[],k=0;k<arguments.length;k++)A.push(arguments[k]);return A.join("$")});var R=function(){var A=this,k=arguments,M,P=S.apply(A,k),D=R.cache;return(M=D[P])||(M=D[P]=v.apply(A,k)),M};return R.cache={},R},camel2dash=memoize(function(_){return _.replace(/([A-Z])/g,function(v){return"-"+v.toLowerCase()})}),dash2camel=memoize(function(_){return _.replace(/(-\w)/g,function(v){return v[1].toUpperCase()})}),prependCamel=memoize(function(_,v){return _+v[0].toUpperCase()+v.substring(1)},function(_,v){return _+"$"+v}),capitalize=function(v){return emptyString(v)?v:v.charAt(0).toUpperCase()+v.substring(1)},endsWith=function(v,S){return v.slice(-1*S.length)===S},number$2="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number$2+"[%]?)\\s*,\\s*("+number$2+"[%]?)\\s*,\\s*("+number$2+"[%]?)(?:\\s*,\\s*("+number$2+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number$2+"[%]?)\\s*,\\s*(?:"+number$2+"[%]?)\\s*,\\s*(?:"+number$2+"[%]?)(?:\\s*,\\s*(?:"+number$2+"))?\\)",hsla="hsl[a]?\\(("+number$2+")\\s*,\\s*("+number$2+"[%])\\s*,\\s*("+number$2+"[%])(?:\\s*,\\s*("+number$2+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number$2+")\\s*,\\s*(?:"+number$2+"[%])\\s*,\\s*(?:"+number$2+"[%])(?:\\s*,\\s*(?:"+number$2+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(v,S){return v<S?-1:v>S?1:0},descending=function(v,S){return-1*ascending(v,S)},extend=Object.assign!=null?Object.assign.bind(Object):function(_){for(var v=arguments,S=1;S<v.length;S++){var R=v[S];if(R!=null)for(var T=Object.keys(R),A=0;A<T.length;A++){var k=T[A];_[k]=R[k]}}return _},hex2tuple=function(v){if(!(!(v.length===4||v.length===7)||v[0]!=="#")){var S=v.length===4,R,T,A,k=16;return S?(R=parseInt(v[1]+v[1],k),T=parseInt(v[2]+v[2],k),A=parseInt(v[3]+v[3],k)):(R=parseInt(v[1]+v[2],k),T=parseInt(v[3]+v[4],k),A=parseInt(v[5]+v[6],k)),[R,T,A]}},hsl2tuple=function(v){var S,R,T,A,k,M,P,D;function L(j,z,V){return V<0&&(V+=1),V>1&&(V-=1),V<1/6?j+(z-j)*6*V:V<1/2?z:V<2/3?j+(z-j)*(2/3-V)*6:j}var q=new RegExp("^"+hsla+"$").exec(v);if(q){if(R=parseInt(q[1]),R<0?R=(360- -1*R%360)%360:R>360&&(R=R%360),R/=360,T=parseFloat(q[2]),T<0||T>100||(T=T/100,A=parseFloat(q[3]),A<0||A>100)||(A=A/100,k=q[4],k!==void 0&&(k=parseFloat(k),k<0||k>1)))return;if(T===0)M=P=D=Math.round(A*255);else{var B=A<.5?A*(1+T):A+T-A*T,F=2*A-B;M=Math.round(255*L(F,B,R+1/3)),P=Math.round(255*L(F,B,R)),D=Math.round(255*L(F,B,R-1/3))}S=[M,P,D,k]}return S},rgb2tuple=function(v){var S,R=new RegExp("^"+rgba+"$").exec(v);if(R){S=[];for(var T=[],A=1;A<=3;A++){var k=R[A];if(k[k.length-1]==="%"&&(T[A]=!0),k=parseFloat(k),T[A]&&(k=k/100*255),k<0||k>255)return;S.push(Math.floor(k))}var M=T[1]||T[2]||T[3],P=T[1]&&T[2]&&T[3];if(M&&!P)return;var D=R[4];if(D!==void 0){if(D=parseFloat(D),D<0||D>1)return;S.push(D)}}return S},colorname2tuple=function(v){return colors[v.toLowerCase()]},color2tuple=function(v){return(array(v)?v:null)||colorname2tuple(v)||hex2tuple(v)||rgb2tuple(v)||hsl2tuple(v)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(v){for(var S=v.map,R=v.keys,T=R.length,A=0;A<T;A++){var k=R[A];if(plainObject(k))throw Error("Tried to set map with object key");A<R.length-1?(S[k]==null&&(S[k]={}),S=S[k]):S[k]=v.value}},getMap=function(v){for(var S=v.map,R=v.keys,T=R.length,A=0;A<T;A++){var k=R[A];if(plainObject(k))throw Error("Tried to get map with object key");if(S=S[k],S==null)return S}return S},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var isObject_1$1,hasRequiredIsObject$1;function requireIsObject$1(){if(hasRequiredIsObject$1)return isObject_1$1;hasRequiredIsObject$1=1;function _(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")}return isObject_1$1=_,isObject_1$1}var _freeGlobal$1,hasRequired_freeGlobal$1;function require_freeGlobal$1(){if(hasRequired_freeGlobal$1)return _freeGlobal$1;hasRequired_freeGlobal$1=1;var _=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal$1=_,_freeGlobal$1}var _root$1,hasRequired_root$1;function require_root$1(){if(hasRequired_root$1)return _root$1;hasRequired_root$1=1;var _=require_freeGlobal$1(),v=typeof self=="object"&&self&&self.Object===Object&&self,S=_||v||Function("return this")();return _root$1=S,_root$1}var now_1$1,hasRequiredNow$1;function requireNow$1(){if(hasRequiredNow$1)return now_1$1;hasRequiredNow$1=1;var _=require_root$1(),v=function(){return _.Date.now()};return now_1$1=v,now_1$1}var _trimmedEndIndex$1,hasRequired_trimmedEndIndex$1;function require_trimmedEndIndex$1(){if(hasRequired_trimmedEndIndex$1)return _trimmedEndIndex$1;hasRequired_trimmedEndIndex$1=1;var _=/\s/;function v(S){for(var R=S.length;R--&&_.test(S.charAt(R)););return R}return _trimmedEndIndex$1=v,_trimmedEndIndex$1}var _baseTrim$1,hasRequired_baseTrim$1;function require_baseTrim$1(){if(hasRequired_baseTrim$1)return _baseTrim$1;hasRequired_baseTrim$1=1;var _=require_trimmedEndIndex$1(),v=/^\s+/;function S(R){return R&&R.slice(0,_(R)+1).replace(v,"")}return _baseTrim$1=S,_baseTrim$1}var _Symbol$1,hasRequired_Symbol$1;function require_Symbol$1(){if(hasRequired_Symbol$1)return _Symbol$1;hasRequired_Symbol$1=1;var _=require_root$1(),v=_.Symbol;return _Symbol$1=v,_Symbol$1}var _getRawTag$1,hasRequired_getRawTag$1;function require_getRawTag$1(){if(hasRequired_getRawTag$1)return _getRawTag$1;hasRequired_getRawTag$1=1;var _=require_Symbol$1(),v=Object.prototype,S=v.hasOwnProperty,R=v.toString,T=_?_.toStringTag:void 0;function A(k){var M=S.call(k,T),P=k[T];try{k[T]=void 0;var D=!0}catch{}var L=R.call(k);return D&&(M?k[T]=P:delete k[T]),L}return _getRawTag$1=A,_getRawTag$1}var _objectToString$1,hasRequired_objectToString$1;function require_objectToString$1(){if(hasRequired_objectToString$1)return _objectToString$1;hasRequired_objectToString$1=1;var _=Object.prototype,v=_.toString;function S(R){return v.call(R)}return _objectToString$1=S,_objectToString$1}var _baseGetTag$1,hasRequired_baseGetTag$1;function require_baseGetTag$1(){if(hasRequired_baseGetTag$1)return _baseGetTag$1;hasRequired_baseGetTag$1=1;var _=require_Symbol$1(),v=require_getRawTag$1(),S=require_objectToString$1(),R="[object Null]",T="[object Undefined]",A=_?_.toStringTag:void 0;function k(M){return M==null?M===void 0?T:R:A&&A in Object(M)?v(M):S(M)}return _baseGetTag$1=k,_baseGetTag$1}var isObjectLike_1$1,hasRequiredIsObjectLike$1;function requireIsObjectLike$1(){if(hasRequiredIsObjectLike$1)return isObjectLike_1$1;hasRequiredIsObjectLike$1=1;function _(v){return v!=null&&typeof v=="object"}return isObjectLike_1$1=_,isObjectLike_1$1}var isSymbol_1$1,hasRequiredIsSymbol$1;function requireIsSymbol$1(){if(hasRequiredIsSymbol$1)return isSymbol_1$1;hasRequiredIsSymbol$1=1;var _=require_baseGetTag$1(),v=requireIsObjectLike$1(),S="[object Symbol]";function R(T){return typeof T=="symbol"||v(T)&&_(T)==S}return isSymbol_1$1=R,isSymbol_1$1}var toNumber_1$1,hasRequiredToNumber$1;function requireToNumber$1(){if(hasRequiredToNumber$1)return toNumber_1$1;hasRequiredToNumber$1=1;var _=require_baseTrim$1(),v=requireIsObject$1(),S=requireIsSymbol$1(),R=NaN,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;function P(D){if(typeof D=="number")return D;if(S(D))return R;if(v(D)){var L=typeof D.valueOf=="function"?D.valueOf():D;D=v(L)?L+"":L}if(typeof D!="string")return D===0?D:+D;D=_(D);var q=A.test(D);return q||k.test(D)?M(D.slice(2),q?2:8):T.test(D)?R:+D}return toNumber_1$1=P,toNumber_1$1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var _=requireIsObject$1(),v=requireNow$1(),S=requireToNumber$1(),R="Expected a function",T=Math.max,A=Math.min;function k(M,P,D){var L,q,B,F,j,z,V=0,G=!1,W=!1,Y=!0;if(typeof M!="function")throw new TypeError(R);P=S(P)||0,_(D)&&(G=!!D.leading,W="maxWait"in D,B=W?T(S(D.maxWait)||0,P):B,Y="trailing"in D?!!D.trailing:Y);function X(de){var ye=L,we=q;return L=q=void 0,V=de,F=M.apply(we,ye),F}function ee(de){return V=de,j=setTimeout(ne,P),G?X(de):F}function re(de){var ye=de-z,we=de-V,ge=P-ye;return W?A(ge,B-we):ge}function Q(de){var ye=de-z,we=de-V;return z===void 0||ye>=P||ye<0||W&&we>=B}function ne(){var de=v();if(Q(de))return ae(de);j=setTimeout(ne,re(de))}function ae(de){return j=void 0,Y&&L?X(de):(L=q=void 0,F)}function oe(){j!==void 0&&clearTimeout(j),V=0,L=z=q=j=void 0}function se(){return j===void 0?F:ae(v())}function ce(){var de=v(),ye=Q(de);if(L=arguments,q=this,z=de,ye){if(j===void 0)return ee(z);if(W)return clearTimeout(j),j=setTimeout(ne,P),X(z)}return j===void 0&&(j=setTimeout(ne,P)),F}return ce.cancel=oe,ce.flush=se,ce}return debounce_1=k,debounce_1}var debounceExports=requireDebounce(),debounce=getDefaultExportFromCjs(debounceExports),performance$1=_window?_window.performance:null,pnow=performance$1&&performance$1.now?function(){return performance$1.now()}:function(){return Date.now()},raf=(function(){if(_window){if(_window.requestAnimationFrame)return function(_){_window.requestAnimationFrame(_)};if(_window.mozRequestAnimationFrame)return function(_){_window.mozRequestAnimationFrame(_)};if(_window.webkitRequestAnimationFrame)return function(_){_window.webkitRequestAnimationFrame(_)};if(_window.msRequestAnimationFrame)return function(_){_window.msRequestAnimationFrame(_)}}return function(_){_&&setTimeout(function(){_(pnow())},1e3/60)}})(),requestAnimationFrame$1=function(v){return raf(v)},performanceNow=pnow,DEFAULT_HASH_SEED=9261,K=65599,DEFAULT_HASH_SEED_ALT=5381,hashIterableInts=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED,R=S,T;T=v.next(),!T.done;)R=R*K+T.value|0;return R},hashInt=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED;return S*K+v|0},hashIntAlt=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED_ALT;return(S<<5)+S+v|0},combineHashes=function(v,S){return v*2097152+S},combineHashesArray=function(v){return v[0]*2097152+v[1]},hashArrays=function(v,S){return[hashInt(v[0],S[0]),hashIntAlt(v[1],S[1])]},hashIntsArray=function(v,S){var R={value:0,done:!1},T=0,A=v.length,k={next:function(){return T<A?R.value=v[T++]:R.done=!0,R}};return hashIterableInts(k,S)},hashString=function(v,S){var R={value:0,done:!1},T=0,A=v.length,k={next:function(){return T<A?R.value=v.charCodeAt(T++):R.done=!0,R}};return hashIterableInts(k,S)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(v){for(var S,R=0;R<v.length;R++){var T=v[R];R===0?S=hashString(T):S=hashString(T,S)}return S};function rotatePoint(_,v,S,R,T){var A=T*Math.PI/180,k=Math.cos(A)*(_-S)-Math.sin(A)*(v-R)+S,M=Math.sin(A)*(_-S)+Math.cos(A)*(v-R)+R;return{x:k,y:M}}var movePointByBoxAspect=function(v,S,R,T,A,k){return{x:(v-R)*A+R,y:(S-T)*k+T}};function rotatePosAndSkewByBox(_,v,S){if(S===0)return _;var R=(v.x1+v.x2)/2,T=(v.y1+v.y2)/2,A=v.w/v.h,k=1/A,M=rotatePoint(_.x,_.y,R,T,S),P=movePointByBoxAspect(M.x,M.y,R,T,A,k);return{x:P.x,y:P.y}}var warningsEnabled=!0,warnSupported=console.warn!=null,traceSupported=console.trace!=null,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1$1=function(){},error=function(v){throw new Error(v)},warnings=function(v){if(v!==void 0)warningsEnabled=!!v;else return warningsEnabled},warn$1=function(v){warnings()&&(warnSupported?console.warn(v):(console.log(v),traceSupported&&console.trace()))},clone=function(v){return extend({},v)},copy$1=function(v){return v==null?v:array(v)?v.slice():plainObject(v)?clone(v):v},copyArray=function(v){return v.slice()},uuid=function(v,S){for(S=v="";v++<36;S+=v*51&52?(v^15?8^Math.random()*(v^20?16:4):4).toString(16):"-");return S},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults$g=function(v){var S=Object.keys(v);return function(R){for(var T={},A=0;A<S.length;A++){var k=S[A],M=R?.[k];T[k]=M===void 0?v[k]:M}return T}},removeFromArray=function(v,S,R){for(var T=v.length-1;T>=0;T--)v[T]===S&&v.splice(T,1)},clearArray=function(v){v.splice(0,v.length)},push=function(v,S){for(var R=0;R<S.length;R++){var T=S[R];v.push(T)}},getPrefixedProperty=function(v,S,R){return R&&(S=prependCamel(R,S)),v[S]},setPrefixedProperty=function(v,S,R,T){R&&(S=prependCamel(R,S)),v[S]=T},ObjectMap=(function(){function _(){_classCallCheck(this,_),this._obj={}}return _createClass(_,[{key:"set",value:function(S,R){return this._obj[S]=R,this}},{key:"delete",value:function(S){return this._obj[S]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(S){return this._obj[S]!==void 0}},{key:"get",value:function(S){return this._obj[S]}}])})(),Map$1=typeof Map<"u"?Map:ObjectMap,undef="undefined",ObjectSet=(function(){function _(v){if(_classCallCheck(this,_),this._obj=Object.create(null),this.size=0,v!=null){var S;v.instanceString!=null&&v.instanceString()===this.instanceString()?S=v.toArray():S=v;for(var R=0;R<S.length;R++)this.add(S[R])}}return _createClass(_,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(S){var R=this._obj;R[S]!==1&&(R[S]=1,this.size++)}},{key:"delete",value:function(S){var R=this._obj;R[S]===1&&(R[S]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(S){return this._obj[S]===1}},{key:"toArray",value:function(){var S=this;return Object.keys(this._obj).filter(function(R){return S.has(R)})}},{key:"forEach",value:function(S,R){return this.toArray().forEach(S,R)}}])})(),Set$1=(typeof Set>"u"?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element$1=function(v,S){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(v===void 0||S===void 0||!core$2(v)){error("An element must have a core reference and parameters set");return}var T=S.group;if(T==null&&(S.data&&S.data.source!=null&&S.data.target!=null?T="edges":T="nodes"),T!=="nodes"&&T!=="edges"){error("An element must be of type `nodes` or `edges`; you specified `"+T+"`");return}this.length=1,this[0]=this;var A=this._private={cy:v,single:!0,data:S.data||{},position:S.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:T,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!S.selected,selectable:S.selectable===void 0?!0:!!S.selectable,locked:!!S.locked,grabbed:!1,grabbable:S.grabbable===void 0?!0:!!S.grabbable,pannable:S.pannable===void 0?T==="edges":!!S.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:S.scratch||{},edges:[],children:[],parent:S.parent&&S.parent.isNode()?S.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(A.position.x==null&&(A.position.x=0),A.position.y==null&&(A.position.y=0),S.renderedPosition){var k=S.renderedPosition,M=v.pan(),P=v.zoom();A.position={x:(k.x-M.x)/P,y:(k.y-M.y)/P}}var D=[];array(S.classes)?D=S.classes:string$1(S.classes)&&(D=S.classes.split(/\s+/));for(var L=0,q=D.length;L<q;L++){var B=D[L];!B||B===""||A.classes.add(B)}this.createEmitter(),(R===void 0||R)&&this.restore();var F=S.style||S.css;F&&(warn$1("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(F))},defineSearch=function(v){return v={bfs:v.bfs||!v.dfs,dfs:v.dfs||!v.bfs},function(R,T,A){var k;plainObject(R)&&!elementOrCollection(R)&&(k=R,R=k.roots||k.root,T=k.visit,A=k.directed),A=arguments.length===2&&!fn$6(T)?T:A,T=fn$6(T)?T:function(){};for(var M=this._private.cy,P=R=string$1(R)?this.filter(R):R,D=[],L=[],q={},B={},F={},j=0,z,V=this.byGroup(),G=V.nodes,W=V.edges,Y=0;Y<P.length;Y++){var X=P[Y],ee=X.id();X.isNode()&&(D.unshift(X),v.bfs&&(F[ee]=!0,L.push(X)),B[ee]=0)}for(var re=function(){var de=v.bfs?D.shift():D.pop(),ye=de.id();if(v.dfs){if(F[ye])return 0;F[ye]=!0,L.push(de)}var we=B[ye],ge=q[ye],ve=ge!=null?ge.source():null,be=ge!=null?ge.target():null,ke=ge==null?void 0:de.same(ve)?be[0]:ve[0],me;if(me=T(de,ge,ke,j++,we),me===!0)return z=de,1;if(me===!1)return 1;for(var fe=de.connectedEdges().filter(function(Oe){return(!A||Oe.source().same(de))&&W.has(Oe)}),xe=0;xe<fe.length;xe++){var Ae=fe[xe],Se=Ae.connectedNodes().filter(function(Oe){return!Oe.same(de)&&G.has(Oe)}),Me=Se.id();Se.length!==0&&!F[Me]&&(Se=Se[0],D.push(Se),v.bfs&&(F[Me]=!0,L.push(Se)),q[Me]=Ae,B[Me]=B[ye]+1)}},Q;D.length!==0&&(Q=re(),!(Q!==0&&Q===1)););for(var ne=M.collection(),ae=0;ae<L.length;ae++){var oe=L[ae],se=q[oe.id()];se!=null&&ne.push(se),ne.push(oe)}return{path:M.collection(ne),found:M.collection(z)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch;elesfn$v.dfs=elesfn$v.depthFirstSearch;var heap$2={exports:{}},heap$1=heap$2.exports,hasRequiredHeap$1;function requireHeap$1(){return hasRequiredHeap$1||(hasRequiredHeap$1=1,(function(_,v){(function(){var S,R,T,A,k,M,P,D,L,q,B,F,j,z,V;T=Math.floor,q=Math.min,R=function(G,W){return G<W?-1:G>W?1:0},L=function(G,W,Y,X,ee){var re;if(Y==null&&(Y=0),ee==null&&(ee=R),Y<0)throw new Error("lo must be non-negative");for(X==null&&(X=G.length);Y<X;)re=T((Y+X)/2),ee(W,G[re])<0?X=re:Y=re+1;return[].splice.apply(G,[Y,Y-Y].concat(W)),W},M=function(G,W,Y){return Y==null&&(Y=R),G.push(W),z(G,0,G.length-1,Y)},k=function(G,W){var Y,X;return W==null&&(W=R),Y=G.pop(),G.length?(X=G[0],G[0]=Y,V(G,0,W)):X=Y,X},D=function(G,W,Y){var X;return Y==null&&(Y=R),X=G[0],G[0]=W,V(G,0,Y),X},P=function(G,W,Y){var X;return Y==null&&(Y=R),G.length&&Y(G[0],W)<0&&(X=[G[0],W],W=X[0],G[0]=X[1],V(G,0,Y)),W},A=function(G,W){var Y,X,ee,re,Q,ne;for(W==null&&(W=R),re=(function(){ne=[];for(var ae=0,oe=T(G.length/2);0<=oe?ae<oe:ae>oe;0<=oe?ae++:ae--)ne.push(ae);return ne}).apply(this).reverse(),Q=[],X=0,ee=re.length;X<ee;X++)Y=re[X],Q.push(V(G,Y,W));return Q},j=function(G,W,Y){var X;if(Y==null&&(Y=R),X=G.indexOf(W),X!==-1)return z(G,0,X,Y),V(G,X,Y)},B=function(G,W,Y){var X,ee,re,Q,ne;if(Y==null&&(Y=R),ee=G.slice(0,W),!ee.length)return ee;for(A(ee,Y),ne=G.slice(W),re=0,Q=ne.length;re<Q;re++)X=ne[re],P(ee,X,Y);return ee.sort(Y).reverse()},F=function(G,W,Y){var X,ee,re,Q,ne,ae,oe,se,ce;if(Y==null&&(Y=R),W*10<=G.length){if(re=G.slice(0,W).sort(Y),!re.length)return re;for(ee=re[re.length-1],oe=G.slice(W),Q=0,ae=oe.length;Q<ae;Q++)X=oe[Q],Y(X,ee)<0&&(L(re,X,0,null,Y),re.pop(),ee=re[re.length-1]);return re}for(A(G,Y),ce=[],ne=0,se=q(W,G.length);0<=se?ne<se:ne>se;0<=se?++ne:--ne)ce.push(k(G,Y));return ce},z=function(G,W,Y,X){var ee,re,Q;for(X==null&&(X=R),ee=G[Y];Y>W;){if(Q=Y-1>>1,re=G[Q],X(ee,re)<0){G[Y]=re,Y=Q;continue}break}return G[Y]=ee},V=function(G,W,Y){var X,ee,re,Q,ne;for(Y==null&&(Y=R),ee=G.length,ne=W,re=G[W],X=2*W+1;X<ee;)Q=X+1,Q<ee&&!(Y(G[X],G[Q])<0)&&(X=Q),G[W]=G[X],W=X,X=2*W+1;return G[W]=re,z(G,ne,W,Y)},S=(function(){G.push=M,G.pop=k,G.replace=D,G.pushpop=P,G.heapify=A,G.updateItem=j,G.nlargest=B,G.nsmallest=F;function G(W){this.cmp=W??R,this.nodes=[]}return G.prototype.push=function(W){return M(this.nodes,W,this.cmp)},G.prototype.pop=function(){return k(this.nodes,this.cmp)},G.prototype.peek=function(){return this.nodes[0]},G.prototype.contains=function(W){return this.nodes.indexOf(W)!==-1},G.prototype.replace=function(W){return D(this.nodes,W,this.cmp)},G.prototype.pushpop=function(W){return P(this.nodes,W,this.cmp)},G.prototype.heapify=function(){return A(this.nodes,this.cmp)},G.prototype.updateItem=function(W){return j(this.nodes,W,this.cmp)},G.prototype.clear=function(){return this.nodes=[]},G.prototype.empty=function(){return this.nodes.length===0},G.prototype.size=function(){return this.nodes.length},G.prototype.clone=function(){var W;return W=new G,W.nodes=this.nodes.slice(0),W},G.prototype.toArray=function(){return this.nodes.slice(0)},G.prototype.insert=G.prototype.push,G.prototype.top=G.prototype.peek,G.prototype.front=G.prototype.peek,G.prototype.has=G.prototype.contains,G.prototype.copy=G.prototype.clone,G})(),(function(G,W){return _.exports=W()})(this,function(){return S})}).call(heap$1)})(heap$2)),heap$2.exports}var heap,hasRequiredHeap;function requireHeap(){return hasRequiredHeap||(hasRequiredHeap=1,heap=requireHeap$1()),heap}var heapExports=requireHeap(),Heap=getDefaultExportFromCjs(heapExports),dijkstraDefaults=defaults$g({root:null,weight:function(v){return 1},directed:!1}),elesfn$u={dijkstra:function(v){if(!plainObject(v)){var S=arguments;v={root:S[0],weight:S[1],directed:S[2]}}var R=dijkstraDefaults(v),T=R.root,A=R.weight,k=R.directed,M=this,P=A,D=string$1(T)?this.filter(T)[0]:T[0],L={},q={},B={},F=this.byGroup(),j=F.nodes,z=F.edges;z.unmergeBy(function(we){return we.isLoop()});for(var V=function(ge){return L[ge.id()]},G=function(ge,ve){L[ge.id()]=ve,W.updateItem(ge)},W=new Heap(function(we,ge){return V(we)-V(ge)}),Y=0;Y<j.length;Y++){var X=j[Y];L[X.id()]=X.same(D)?0:1/0,W.push(X)}for(var ee=function(ge,ve){for(var be=(k?ge.edgesTo(ve):ge.edgesWith(ve)).intersect(z),ke=1/0,me,fe=0;fe<be.length;fe++){var xe=be[fe],Ae=P(xe);(Ae<ke||!me)&&(ke=Ae,me=xe)}return{edge:me,dist:ke}};W.size()>0;){var re=W.pop(),Q=V(re),ne=re.id();if(B[ne]=Q,Q!==1/0)for(var ae=re.neighborhood().intersect(j),oe=0;oe<ae.length;oe++){var se=ae[oe],ce=se.id(),de=ee(re,se),ye=Q+de.dist;ye<V(se)&&(G(se,ye),q[ce]={node:re,edge:de.edge})}}return{distanceTo:function(ge){var ve=string$1(ge)?j.filter(ge)[0]:ge[0];return B[ve.id()]},pathTo:function(ge){var ve=string$1(ge)?j.filter(ge)[0]:ge[0],be=[],ke=ve,me=ke.id();if(ve.length>0)for(be.unshift(ve);q[me];){var fe=q[me];be.unshift(fe.edge),be.unshift(fe.node),ke=fe.node,me=ke.id()}return M.spawn(be)}}}},elesfn$t={kruskal:function(v){v=v||function(Y){return 1};for(var S=this.byGroup(),R=S.nodes,T=S.edges,A=R.length,k=new Array(A),M=R,P=function(X){for(var ee=0;ee<k.length;ee++){var re=k[ee];if(re.has(X))return ee}},D=0;D<A;D++)k[D]=this.spawn(R[D]);for(var L=T.sort(function(Y,X){return v(Y)-v(X)}),q=0;q<L.length;q++){var B=L[q],F=B.source()[0],j=B.target()[0],z=P(F),V=P(j),G=k[z],W=k[V];z!==V&&(M.merge(B),G.merge(W),k.splice(V,1))}return M}},aStarDefaults=defaults$g({root:null,goal:null,weight:function(v){return 1},heuristic:function(v){return 0},directed:!1}),elesfn$s={aStar:function(v){var S=this.cy(),R=aStarDefaults(v),T=R.root,A=R.goal,k=R.heuristic,M=R.directed,P=R.weight;T=S.collection(T)[0],A=S.collection(A)[0];var D=T.id(),L=A.id(),q={},B={},F={},j=new Heap(function(me,fe){return B[me.id()]-B[fe.id()]}),z=new Set$1,V={},G={},W=function(fe,xe){j.push(fe),z.add(xe)},Y,X,ee=function(){Y=j.pop(),X=Y.id(),z.delete(X)},re=function(fe){return z.has(fe)};W(T,D),q[D]=0,B[D]=k(T);for(var Q=0;j.size()>0;){if(ee(),Q++,X===L){for(var ne=[],ae=A,oe=L,se=G[oe];ne.unshift(ae),se!=null&&ne.unshift(se),ae=V[oe],ae!=null;)oe=ae.id(),se=G[oe];return{found:!0,distance:q[X],path:this.spawn(ne),steps:Q}}F[X]=!0;for(var ce=Y._private.edges,de=0;de<ce.length;de++){var ye=ce[de];if(this.hasElementWithId(ye.id())&&!(M&&ye.data("source")!==X)){var we=ye.source(),ge=ye.target(),ve=we.id()!==X?we:ge,be=ve.id();if(this.hasElementWithId(be)&&!F[be]){var ke=q[X]+P(ye);if(!re(be)){q[be]=ke,B[be]=ke+k(ve),W(ve,be),V[be]=Y,G[be]=ye;continue}ke<q[be]&&(q[be]=ke,B[be]=ke+k(ve),V[be]=Y,G[be]=ye)}}}}return{found:!1,distance:void 0,path:void 0,steps:Q}}},floydWarshallDefaults=defaults$g({weight:function(v){return 1},directed:!1}),elesfn$r={floydWarshall:function(v){for(var S=this.cy(),R=floydWarshallDefaults(v),T=R.weight,A=R.directed,k=T,M=this.byGroup(),P=M.nodes,D=M.edges,L=P.length,q=L*L,B=function(Ae){return P.indexOf(Ae)},F=function(Ae){return P[Ae]},j=new Array(q),z=0;z<q;z++){var V=z%L,G=(z-V)/L;G===V?j[z]=0:j[z]=1/0}for(var W=new Array(q),Y=new Array(q),X=0;X<D.length;X++){var ee=D[X],re=ee.source()[0],Q=ee.target()[0];if(re!==Q){var ne=B(re),ae=B(Q),oe=ne*L+ae,se=k(ee);if(j[oe]>se&&(j[oe]=se,W[oe]=ae,Y[oe]=ee),!A){var ce=ae*L+ne;!A&&j[ce]>se&&(j[ce]=se,W[ce]=ne,Y[ce]=ee)}}}for(var de=0;de<L;de++)for(var ye=0;ye<L;ye++)for(var we=ye*L+de,ge=0;ge<L;ge++){var ve=ye*L+ge,be=de*L+ge;j[we]+j[be]<j[ve]&&(j[ve]=j[we]+j[be],W[ve]=W[we])}var ke=function(Ae){return(string$1(Ae)?S.filter(Ae):Ae)[0]},me=function(Ae){return B(ke(Ae))},fe={distance:function(Ae,Se){var Me=me(Ae),Oe=me(Se);return j[Me*L+Oe]},path:function(Ae,Se){var Me=me(Ae),Oe=me(Se),Ce=F(Me);if(Me===Oe)return Ce.collection();if(W[Me*L+Oe]==null)return S.collection();var $e=S.collection(),Be=Me,Pe;for($e.merge(Ce);Me!==Oe;)Be=Me,Me=W[Me*L+Oe],Pe=Y[Be*L+Me],$e.merge(Pe),$e.merge(F(Me));return $e}};return fe}},bellmanFordDefaults=defaults$g({weight:function(v){return 1},directed:!1,root:null}),elesfn$q={bellmanFord:function(v){var S=this,R=bellmanFordDefaults(v),T=R.weight,A=R.directed,k=R.root,M=T,P=this,D=this.cy(),L=this.byGroup(),q=L.edges,B=L.nodes,F=B.length,j=new Map$1,z=!1,V=[];k=D.collection(k)[0],q.unmergeBy(function(pt){return pt.isLoop()});for(var G=q.length,W=function(We){var Et=j.get(We.id());return Et||(Et={},j.set(We.id(),Et)),Et},Y=function(We){return(string$1(We)?D.$(We):We)[0]},X=function(We){return W(Y(We)).dist},ee=function(We){for(var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k,st=Y(We),xt=[],gt=st;;){if(gt==null)return S.spawn();var _t=W(gt),St=_t.edge,Lt=_t.pred;if(xt.unshift(gt[0]),gt.same(Et)&&xt.length>0)break;St!=null&&xt.unshift(St),gt=Lt}return P.spawn(xt)},re=0;re<F;re++){var Q=B[re],ne=W(Q);Q.same(k)?ne.dist=0:ne.dist=1/0,ne.pred=null,ne.edge=null}for(var ae=!1,oe=function(We,Et,st,xt,gt,_t){var St=xt.dist+_t;St<gt.dist&&!st.same(xt.edge)&&(gt.dist=St,gt.pred=We,gt.edge=st,ae=!0)},se=1;se<F;se++){ae=!1;for(var ce=0;ce<G;ce++){var de=q[ce],ye=de.source(),we=de.target(),ge=M(de),ve=W(ye),be=W(we);oe(ye,we,de,ve,be,ge),A||oe(we,ye,de,be,ve,ge)}if(!ae)break}if(ae)for(var ke=[],me=0;me<G;me++){var fe=q[me],xe=fe.source(),Ae=fe.target(),Se=M(fe),Me=W(xe).dist,Oe=W(Ae).dist;if(Me+Se<Oe||!A&&Oe+Se<Me)if(z||(warn$1("Graph contains a negative weight cycle for Bellman-Ford"),z=!0),v.findNegativeWeightCycles!==!1){var Ce=[];Me+Se<Oe&&Ce.push(xe),!A&&Oe+Se<Me&&Ce.push(Ae);for(var $e=Ce.length,Be=0;Be<$e;Be++){var Pe=Ce[Be],De=[Pe];De.push(W(Pe).edge);for(var Le=W(Pe).pred;De.indexOf(Le)===-1;)De.push(Le),De.push(W(Le).edge),Le=W(Le).pred;De=De.slice(De.indexOf(Le));for(var Ne=De[0].id(),tt=0,it=2;it<De.length;it+=2)De[it].id()<Ne&&(Ne=De[it].id(),tt=it);De=De.slice(tt).concat(De.slice(0,tt)),De.push(De[0]);var dt=De.map(function(pt){return pt.id()}).join(",");ke.indexOf(dt)===-1&&(V.push(P.spawn(De)),ke.push(dt))}}else break}return{distanceTo:X,pathTo:ee,hasNegativeWeightCycle:z,negativeWeightCycles:V}}},sqrt2=Math.sqrt(2),collapse=function(v,S,R){R.length===0&&error("Karger-Stein must be run on a connected (sub)graph");for(var T=R[v],A=T[1],k=T[2],M=S[A],P=S[k],D=R,L=D.length-1;L>=0;L--){var q=D[L],B=q[1],F=q[2];(S[B]===M&&S[F]===P||S[B]===P&&S[F]===M)&&D.splice(L,1)}for(var j=0;j<D.length;j++){var z=D[j];z[1]===P?(D[j]=z.slice(),D[j][1]=M):z[2]===P&&(D[j]=z.slice(),D[j][2]=M)}for(var V=0;V<S.length;V++)S[V]===P&&(S[V]=M);return D},contractUntil=function(v,S,R,T){for(;R>T;){var A=Math.floor(Math.random()*S.length);S=collapse(A,v,S),R--}return S},elesfn$p={kargerStein:function(){var v=this,S=this.byGroup(),R=S.nodes,T=S.edges;T.unmergeBy(function(be){return be.isLoop()});var A=R.length,k=T.length,M=Math.ceil(Math.pow(Math.log(A)/Math.LN2,2)),P=Math.floor(A/sqrt2);if(A<2){error("At least 2 nodes are required for Karger-Stein algorithm");return}for(var D=[],L=0;L<k;L++){var q=T[L];D.push([L,R.indexOf(q.source()),R.indexOf(q.target())])}for(var B=1/0,F=[],j=new Array(A),z=new Array(A),V=new Array(A),G=function(ke,me){for(var fe=0;fe<A;fe++)me[fe]=ke[fe]},W=0;W<=M;W++){for(var Y=0;Y<A;Y++)z[Y]=Y;var X=contractUntil(z,D.slice(),A,P),ee=X.slice();G(z,V);var re=contractUntil(z,X,P,2),Q=contractUntil(V,ee,P,2);re.length<=Q.length&&re.length<B?(B=re.length,F=re,G(z,j)):Q.length<=re.length&&Q.length<B&&(B=Q.length,F=Q,G(V,j))}for(var ne=this.spawn(F.map(function(be){return T[be[0]]})),ae=this.spawn(),oe=this.spawn(),se=j[0],ce=0;ce<j.length;ce++){var de=j[ce],ye=R[ce];de===se?ae.merge(ye):oe.merge(ye)}var we=function(ke){var me=v.spawn();return ke.forEach(function(fe){me.merge(fe),fe.connectedEdges().forEach(function(xe){v.contains(xe)&&!ne.contains(xe)&&me.merge(xe)})}),me},ge=[we(ae),we(oe)],ve={cut:ne,components:ge,partition1:ae,partition2:oe};return ve}},_Math$hypot,copyPosition=function(v){return{x:v.x,y:v.y}},modelToRenderedPosition$1=function(v,S,R){return{x:v.x*S+R.x,y:v.y*S+R.y}},renderedToModelPosition=function(v,S,R){return{x:(v.x-R.x)/S,y:(v.y-R.y)/S}},array2point=function(v){return{x:v[0],y:v[1]}},min$1=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=1/0,A=S;A<R;A++){var k=v[A];isFinite(k)&&(T=Math.min(k,T))}return T},max$1=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=-1/0,A=S;A<R;A++){var k=v[A];isFinite(k)&&(T=Math.max(k,T))}return T},mean=function(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=0,A=0,k=S;k<R;k++){var M=v[k];isFinite(M)&&(T+=M,A++)}return T/A},median=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.length,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;T?v=v.slice(S,R):(R<v.length&&v.splice(R,v.length-R),S>0&&v.splice(0,S));for(var M=0,P=v.length-1;P>=0;P--){var D=v[P];k?isFinite(D)||(v[P]=-1/0,M++):v.splice(P,1)}A&&v.sort(function(B,F){return B-F});var L=v.length,q=Math.floor(L/2);return L%2!==0?v[q+1+M]:(v[q-1+M]+v[q+M])/2},deg2rad=function(v){return Math.PI*v/180},getAngleFromDisp=function(v,S){return Math.atan2(S,v)-Math.PI/2},log2=Math.log2||function(_){return Math.log(_)/Math.log(2)},signum=function(v){return v>0?1:v<0?-1:0},dist$1=function(v,S){return Math.sqrt(sqdist(v,S))},sqdist=function(v,S){var R=S.x-v.x,T=S.y-v.y;return R*R+T*T},inPlaceSumNormalize=function(v){for(var S=v.length,R=0,T=0;T<S;T++)R+=v[T];for(var A=0;A<S;A++)v[A]=v[A]/R;return v},qbezierAt=function(v,S,R,T){return(1-T)*(1-T)*v+2*(1-T)*T*S+T*T*R},qbezierPtAt=function(v,S,R,T){return{x:qbezierAt(v.x,S.x,R.x,T),y:qbezierAt(v.y,S.y,R.y,T)}},lineAt=function(v,S,R,T){var A={x:S.x-v.x,y:S.y-v.y},k=dist$1(v,S),M={x:A.x/k,y:A.y/k};return R=R??0,T=T??R*k,{x:v.x+M.x*T,y:v.y+M.y*T}},bound=function(v,S,R){return Math.max(v,Math.min(R,S))},makeBoundingBox=function(v){if(v==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(v.x1!=null&&v.y1!=null){if(v.x2!=null&&v.y2!=null&&v.x2>=v.x1&&v.y2>=v.y1)return{x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,w:v.x2-v.x1,h:v.y2-v.y1};if(v.w!=null&&v.h!=null&&v.w>=0&&v.h>=0)return{x1:v.x1,y1:v.y1,x2:v.x1+v.w,y2:v.y1+v.h,w:v.w,h:v.h}}},copyBoundingBox=function(v){return{x1:v.x1,x2:v.x2,w:v.w,y1:v.y1,y2:v.y2,h:v.h}},clearBoundingBox=function(v){v.x1=1/0,v.y1=1/0,v.x2=-1/0,v.y2=-1/0,v.w=0,v.h=0},updateBoundingBox=function(v,S){v.x1=Math.min(v.x1,S.x1),v.x2=Math.max(v.x2,S.x2),v.w=v.x2-v.x1,v.y1=Math.min(v.y1,S.y1),v.y2=Math.max(v.y2,S.y2),v.h=v.y2-v.y1},expandBoundingBoxByPoint=function(v,S,R){v.x1=Math.min(v.x1,S),v.x2=Math.max(v.x2,S),v.w=v.x2-v.x1,v.y1=Math.min(v.y1,R),v.y2=Math.max(v.y2,R),v.h=v.y2-v.y1},expandBoundingBox=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return v.x1-=S,v.x2+=S,v.y1-=S,v.y2+=S,v.w=v.x2-v.x1,v.h=v.y2-v.y1,v},expandBoundingBoxSides=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],R,T,A,k;if(S.length===1)R=T=A=k=S[0];else if(S.length===2)R=A=S[0],k=T=S[1];else if(S.length===4){var M=_slicedToArray(S,4);R=M[0],T=M[1],A=M[2],k=M[3]}return v.x1-=k,v.x2+=T,v.y1-=R,v.y2+=A,v.w=v.x2-v.x1,v.h=v.y2-v.y1,v},assignBoundingBox=function(v,S){v.x1=S.x1,v.y1=S.y1,v.x2=S.x2,v.y2=S.y2,v.w=v.x2-v.x1,v.h=v.y2-v.y1},boundingBoxesIntersect=function(v,S){return!(v.x1>S.x2||S.x1>v.x2||v.x2<S.x1||S.x2<v.x1||v.y2<S.y1||S.y2<v.y1||v.y1>S.y2||S.y1>v.y2)},inBoundingBox=function(v,S,R){return v.x1<=S&&S<=v.x2&&v.y1<=R&&R<=v.y2},pointInBoundingBox=function(v,S){return inBoundingBox(v,S.x,S.y)},boundingBoxInBoundingBox=function(v,S){return inBoundingBox(v,S.x1,S.y1)&&inBoundingBox(v,S.x2,S.y2)},hypot=(_Math$hypot=Math.hypot)!==null&&_Math$hypot!==void 0?_Math$hypot:function(_,v){return Math.sqrt(_*_+v*v)};function inflatePolygon(_,v){if(_.length<3)throw new Error("Need at least 3 vertices");var S=function(ne,ae){return{x:ne.x+ae.x,y:ne.y+ae.y}},R=function(ne,ae){return{x:ne.x-ae.x,y:ne.y-ae.y}},T=function(ne,ae){return{x:ne.x*ae,y:ne.y*ae}},A=function(ne,ae){return ne.x*ae.y-ne.y*ae.x},k=function(ne){var ae=hypot(ne.x,ne.y);return ae===0?{x:0,y:0}:{x:ne.x/ae,y:ne.y/ae}},M=function(ne){for(var ae=0,oe=0;oe<ne.length;oe++){var se=ne[oe],ce=ne[(oe+1)%ne.length];ae+=se.x*ce.y-ce.x*se.y}return ae/2},P=function(ne,ae,oe,se){var ce=R(ae,ne),de=R(se,oe),ye=A(ce,de);if(Math.abs(ye)<1e-9)return S(ne,T(ce,.5));var we=A(R(oe,ne),de)/ye;return S(ne,T(ce,we))},D=_.map(function(Q){return{x:Q.x,y:Q.y}});M(D)<0&&D.reverse();for(var L=D.length,q=[],B=0;B<L;B++){var F=D[B],j=D[(B+1)%L],z=R(j,F),V=k({x:z.y,y:-z.x});q.push(V)}for(var G=q.map(function(Q,ne){var ae=S(D[ne],T(Q,v)),oe=S(D[(ne+1)%L],T(Q,v));return{p1:ae,p2:oe}}),W=[],Y=0;Y<L;Y++){var X=G[(Y-1+L)%L],ee=G[Y],re=P(X.p1,X.p2,ee.p1,ee.p2);W.push(re)}return W}function miterBox(_,v,S,R,T,A){var k=transformPoints(_,v,S,R,T),M=inflatePolygon(k,A),P=makeBoundingBox();return M.forEach(function(D){return expandBoundingBoxByPoint(P,D.x,D.y)}),P}var roundRectangleIntersectLine=function(v,S,R,T,A,k,M){var P=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",D=P==="auto"?getRoundRectangleRadius(A,k):P,L=A/2,q=k/2;D=Math.min(D,L,q);var B=D!==L,F=D!==q,j;if(B){var z=R-L+D-M,V=T-q-M,G=R+L-D+M,W=V;if(j=finiteLinesIntersect(v,S,R,T,z,V,G,W,!1),j.length>0)return j}if(F){var Y=R+L+M,X=T-q+D-M,ee=Y,re=T+q-D+M;if(j=finiteLinesIntersect(v,S,R,T,Y,X,ee,re,!1),j.length>0)return j}if(B){var Q=R-L+D-M,ne=T+q+M,ae=R+L-D+M,oe=ne;if(j=finiteLinesIntersect(v,S,R,T,Q,ne,ae,oe,!1),j.length>0)return j}if(F){var se=R-L-M,ce=T-q+D-M,de=se,ye=T+q-D+M;if(j=finiteLinesIntersect(v,S,R,T,se,ce,de,ye,!1),j.length>0)return j}var we;{var ge=R-L+D,ve=T-q+D;if(we=intersectLineCircle(v,S,R,T,ge,ve,D+M),we.length>0&&we[0]<=ge&&we[1]<=ve)return[we[0],we[1]]}{var be=R+L-D,ke=T-q+D;if(we=intersectLineCircle(v,S,R,T,be,ke,D+M),we.length>0&&we[0]>=be&&we[1]<=ke)return[we[0],we[1]]}{var me=R+L-D,fe=T+q-D;if(we=intersectLineCircle(v,S,R,T,me,fe,D+M),we.length>0&&we[0]>=me&&we[1]>=fe)return[we[0],we[1]]}{var xe=R-L+D,Ae=T+q-D;if(we=intersectLineCircle(v,S,R,T,xe,Ae,D+M),we.length>0&&we[0]<=xe&&we[1]>=Ae)return[we[0],we[1]]}return[]},inLineVicinity=function(v,S,R,T,A,k,M){var P=M,D=Math.min(R,A),L=Math.max(R,A),q=Math.min(T,k),B=Math.max(T,k);return D-P<=v&&v<=L+P&&q-P<=S&&S<=B+P},inBezierVicinity=function(v,S,R,T,A,k,M,P,D){var L={x1:Math.min(R,M,A)-D,x2:Math.max(R,M,A)+D,y1:Math.min(T,P,k)-D,y2:Math.max(T,P,k)+D};return!(v<L.x1||v>L.x2||S<L.y1||S>L.y2)},solveQuadratic=function(v,S,R,T){R-=T;var A=S*S-4*v*R;if(A<0)return[];var k=Math.sqrt(A),M=2*v,P=(-S+k)/M,D=(-S-k)/M;return[P,D]},solveCubic=function(v,S,R,T,A){var k=1e-5;v===0&&(v=k),S/=v,R/=v,T/=v;var M,P,D,L,q,B,F,j;if(P=(3*R-S*S)/9,D=-(27*T)+S*(9*R-2*(S*S)),D/=54,M=P*P*P+D*D,A[1]=0,F=S/3,M>0){q=D+Math.sqrt(M),q=q<0?-Math.pow(-q,1/3):Math.pow(q,1/3),B=D-Math.sqrt(M),B=B<0?-Math.pow(-B,1/3):Math.pow(B,1/3),A[0]=-F+q+B,F+=(q+B)/2,A[4]=A[2]=-F,F=Math.sqrt(3)*(-B+q)/2,A[3]=F,A[5]=-F;return}if(A[5]=A[3]=0,M===0){j=D<0?-Math.pow(-D,1/3):Math.pow(D,1/3),A[0]=-F+2*j,A[4]=A[2]=-(j+F);return}P=-P,L=P*P*P,L=Math.acos(D/Math.sqrt(L)),j=2*Math.sqrt(P),A[0]=-F+j*Math.cos(L/3),A[2]=-F+j*Math.cos((L+2*Math.PI)/3),A[4]=-F+j*Math.cos((L+4*Math.PI)/3)},sqdistToQuadraticBezier=function(v,S,R,T,A,k,M,P){var D=1*R*R-4*R*A+2*R*M+4*A*A-4*A*M+M*M+T*T-4*T*k+2*T*P+4*k*k-4*k*P+P*P,L=9*R*A-3*R*R-3*R*M-6*A*A+3*A*M+9*T*k-3*T*T-3*T*P-6*k*k+3*k*P,q=3*R*R-6*R*A+R*M-R*v+2*A*A+2*A*v-M*v+3*T*T-6*T*k+T*P-T*S+2*k*k+2*k*S-P*S,B=1*R*A-R*R+R*v-A*v+T*k-T*T+T*S-k*S,F=[];solveCubic(D,L,q,B,F);for(var j=1e-7,z=[],V=0;V<6;V+=2)Math.abs(F[V+1])<j&&F[V]>=0&&F[V]<=1&&z.push(F[V]);z.push(1),z.push(0);for(var G=-1,W,Y,X,ee=0;ee<z.length;ee++)W=Math.pow(1-z[ee],2)*R+2*(1-z[ee])*z[ee]*A+z[ee]*z[ee]*M,Y=Math.pow(1-z[ee],2)*T+2*(1-z[ee])*z[ee]*k+z[ee]*z[ee]*P,X=Math.pow(W-v,2)+Math.pow(Y-S,2),G>=0?X<G&&(G=X):G=X;return G},sqdistToFiniteLine=function(v,S,R,T,A,k){var M=[v-R,S-T],P=[A-R,k-T],D=P[0]*P[0]+P[1]*P[1],L=M[0]*M[0]+M[1]*M[1],q=M[0]*P[0]+M[1]*P[1],B=q*q/D;return q<0?L:B>D?(v-A)*(v-A)+(S-k)*(S-k):L-B},pointInsidePolygonPoints=function(v,S,R){for(var T,A,k,M,P,D=0,L=0;L<R.length/2;L++)if(T=R[L*2],A=R[L*2+1],L+1<R.length/2?(k=R[(L+1)*2],M=R[(L+1)*2+1]):(k=R[(L+1-R.length/2)*2],M=R[(L+1-R.length/2)*2+1]),!(T==v&&k==v))if(T>=v&&v>=k||T<=v&&v<=k)P=(v-T)/(k-T)*(M-A)+A,P>S&&D++;else continue;return D%2!==0},pointInsidePolygon=function(v,S,R,T,A,k,M,P,D){var L=new Array(R.length),q;P[0]!=null?(q=Math.atan(P[1]/P[0]),P[0]<0?q=q+Math.PI/2:q=-q-Math.PI/2):q=P;for(var B=Math.cos(-q),F=Math.sin(-q),j=0;j<L.length/2;j++)L[j*2]=k/2*(R[j*2]*B-R[j*2+1]*F),L[j*2+1]=M/2*(R[j*2+1]*B+R[j*2]*F),L[j*2]+=T,L[j*2+1]+=A;var z;if(D>0){var V=expandPolygon(L,-D);z=joinLines(V)}else z=L;return pointInsidePolygonPoints(v,S,z)},pointInsideRoundPolygon=function(v,S,R,T,A,k,M,P){for(var D=new Array(R.length*2),L=0;L<P.length;L++){var q=P[L];D[L*4+0]=q.startX,D[L*4+1]=q.startY,D[L*4+2]=q.stopX,D[L*4+3]=q.stopY;var B=Math.pow(q.cx-v,2)+Math.pow(q.cy-S,2);if(B<=Math.pow(q.radius,2))return!0}return pointInsidePolygonPoints(v,S,D)},joinLines=function(v){for(var S=new Array(v.length/2),R,T,A,k,M,P,D,L,q=0;q<v.length/4;q++){R=v[q*4],T=v[q*4+1],A=v[q*4+2],k=v[q*4+3],q<v.length/4-1?(M=v[(q+1)*4],P=v[(q+1)*4+1],D=v[(q+1)*4+2],L=v[(q+1)*4+3]):(M=v[0],P=v[1],D=v[2],L=v[3]);var B=finiteLinesIntersect(R,T,A,k,M,P,D,L,!0);S[q*2]=B[0],S[q*2+1]=B[1]}return S},expandPolygon=function(v,S){for(var R=new Array(v.length*2),T,A,k,M,P=0;P<v.length/2;P++){T=v[P*2],A=v[P*2+1],P<v.length/2-1?(k=v[(P+1)*2],M=v[(P+1)*2+1]):(k=v[0],M=v[1]);var D=M-A,L=-(k-T),q=Math.sqrt(D*D+L*L),B=D/q,F=L/q;R[P*4]=T+B*S,R[P*4+1]=A+F*S,R[P*4+2]=k+B*S,R[P*4+3]=M+F*S}return R},intersectLineEllipse=function(v,S,R,T,A,k){var M=R-v,P=T-S;M/=A,P/=k;var D=Math.sqrt(M*M+P*P),L=D-1;if(L<0)return[];var q=L/D;return[(R-v)*q+v,(T-S)*q+S]},checkInEllipse=function(v,S,R,T,A,k,M){return v-=A,S-=k,v/=R/2+M,S/=T/2+M,v*v+S*S<=1},intersectLineCircle=function(v,S,R,T,A,k,M){var P=[R-v,T-S],D=[v-A,S-k],L=P[0]*P[0]+P[1]*P[1],q=2*(D[0]*P[0]+D[1]*P[1]),B=D[0]*D[0]+D[1]*D[1]-M*M,F=q*q-4*L*B;if(F<0)return[];var j=(-q+Math.sqrt(F))/(2*L),z=(-q-Math.sqrt(F))/(2*L),V=Math.min(j,z),G=Math.max(j,z),W=[];if(V>=0&&V<=1&&W.push(V),G>=0&&G<=1&&W.push(G),W.length===0)return[];var Y=W[0]*P[0]+v,X=W[0]*P[1]+S;if(W.length>1){if(W[0]==W[1])return[Y,X];var ee=W[1]*P[0]+v,re=W[1]*P[1]+S;return[Y,X,ee,re]}else return[Y,X]},midOfThree=function(v,S,R){return S<=v&&v<=R||R<=v&&v<=S?v:v<=S&&S<=R||R<=S&&S<=v?S:R},finiteLinesIntersect=function(v,S,R,T,A,k,M,P,D){var L=v-A,q=R-v,B=M-A,F=S-k,j=T-S,z=P-k,V=B*F-z*L,G=q*F-j*L,W=z*q-B*j;if(W!==0){var Y=V/W,X=G/W,ee=.001,re=0-ee,Q=1+ee;return re<=Y&&Y<=Q&&re<=X&&X<=Q?[v+Y*q,S+Y*j]:D?[v+Y*q,S+Y*j]:[]}else return V===0||G===0?midOfThree(v,R,M)===M?[M,P]:midOfThree(v,R,A)===A?[A,k]:midOfThree(A,M,R)===R?[R,T]:[]:[]},transformPoints=function(v,S,R,T,A){var k=[],M=T/2,P=A/2,D=S,L=R;k.push({x:D+M*v[0],y:L+P*v[1]});for(var q=1;q<v.length/2;q++)k.push({x:D+M*v[q*2],y:L+P*v[q*2+1]});return k},polygonIntersectLine=function(v,S,R,T,A,k,M,P){var D=[],L,q=new Array(R.length),B=!0;k==null&&(B=!1);var F;if(B){for(var j=0;j<q.length/2;j++)q[j*2]=R[j*2]*k+T,q[j*2+1]=R[j*2+1]*M+A;if(P>0){var z=expandPolygon(q,-P);F=joinLines(z)}else F=q}else F=R;for(var V,G,W,Y,X=0;X<F.length/2;X++)V=F[X*2],G=F[X*2+1],X<F.length/2-1?(W=F[(X+1)*2],Y=F[(X+1)*2+1]):(W=F[0],Y=F[1]),L=finiteLinesIntersect(v,S,T,A,V,G,W,Y),L.length!==0&&D.push(L[0],L[1]);return D},roundPolygonIntersectLine=function(v,S,R,T,A,k,M,P,D){var L=[],q,B=new Array(R.length*2);D.forEach(function(W,Y){Y===0?(B[B.length-2]=W.startX,B[B.length-1]=W.startY):(B[Y*4-2]=W.startX,B[Y*4-1]=W.startY),B[Y*4]=W.stopX,B[Y*4+1]=W.stopY,q=intersectLineCircle(v,S,T,A,W.cx,W.cy,W.radius),q.length!==0&&L.push(q[0],q[1])});for(var F=0;F<B.length/4;F++)q=finiteLinesIntersect(v,S,T,A,B[F*4],B[F*4+1],B[F*4+2],B[F*4+3],!1),q.length!==0&&L.push(q[0],q[1]);if(L.length>2){for(var j=[L[0],L[1]],z=Math.pow(j[0]-v,2)+Math.pow(j[1]-S,2),V=1;V<L.length/2;V++){var G=Math.pow(L[V*2]-v,2)+Math.pow(L[V*2+1]-S,2);G<=z&&(j[0]=L[V*2],j[1]=L[V*2+1],z=G)}return j}return L},shortenIntersection=function(v,S,R){var T=[v[0]-S[0],v[1]-S[1]],A=Math.sqrt(T[0]*T[0]+T[1]*T[1]),k=(A-R)/A;return k<0&&(k=1e-5),[S[0]+k*T[0],S[1]+k*T[1]]},generateUnitNgonPointsFitToSquare=function(v,S){var R=generateUnitNgonPoints(v,S);return R=fitPolygonToSquare(R),R},fitPolygonToSquare=function(v){for(var S,R,T=v.length/2,A=1/0,k=1/0,M=-1/0,P=-1/0,D=0;D<T;D++)S=v[2*D],R=v[2*D+1],A=Math.min(A,S),M=Math.max(M,S),k=Math.min(k,R),P=Math.max(P,R);for(var L=2/(M-A),q=2/(P-k),B=0;B<T;B++)S=v[2*B]=v[2*B]*L,R=v[2*B+1]=v[2*B+1]*q,A=Math.min(A,S),M=Math.max(M,S),k=Math.min(k,R),P=Math.max(P,R);if(k<-1)for(var F=0;F<T;F++)R=v[2*F+1]=v[2*F+1]+(-1-k);return v},generateUnitNgonPoints=function(v,S){var R=1/v*2*Math.PI,T=v%2===0?Math.PI/2+R/2:Math.PI/2;T+=S;for(var A=new Array(v*2),k,M=0;M<v;M++)k=M*R+T,A[2*M]=Math.cos(k),A[2*M+1]=Math.sin(-k);return A},getRoundRectangleRadius=function(v,S){return Math.min(v/4,S/4,8)},getRoundPolygonRadius=function(v,S){return Math.min(v/10,S/10,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(v,S,R){return[v-2*S+R,2*(S-v),v]},getBarrelCurveConstants=function(v,S){return{heightOffset:Math.min(15,.05*S),widthOffset:Math.min(100,.25*v),ctrlPtOffsetPct:.05}};function satPolygonIntersection(_,v){function S(q){for(var B=[],F=0;F<q.length;F++){var j=q[F],z=q[(F+1)%q.length],V={x:z.x-j.x,y:z.y-j.y},G={x:-V.y,y:V.x},W=Math.sqrt(G.x*G.x+G.y*G.y);B.push({x:G.x/W,y:G.y/W})}return B}function R(q,B){var F=1/0,j=-1/0,z=_createForOfIteratorHelper(q),V;try{for(z.s();!(V=z.n()).done;){var G=V.value,W=G.x*B.x+G.y*B.y;F=Math.min(F,W),j=Math.max(j,W)}}catch(Y){z.e(Y)}finally{z.f()}return{min:F,max:j}}function T(q,B){return!(q.max<B.min||B.max<q.min)}var A=[].concat(_toConsumableArray(S(_)),_toConsumableArray(S(v))),k=_createForOfIteratorHelper(A),M;try{for(k.s();!(M=k.n()).done;){var P=M.value,D=R(_,P),L=R(v,P);if(!T(D,L))return!1}}catch(q){k.e(q)}finally{k.f()}return!0}var pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(v){return 1}}),elesfn$o={pageRank:function(v){for(var S=pageRankDefaults(v),R=S.dampingFactor,T=S.precision,A=S.iterations,k=S.weight,M=this._private.cy,P=this.byGroup(),D=P.nodes,L=P.edges,q=D.length,B=q*q,F=L.length,j=new Array(B),z=new Array(q),V=(1-R)/q,G=0;G<q;G++){for(var W=0;W<q;W++){var Y=G*q+W;j[Y]=0}z[G]=0}for(var X=0;X<F;X++){var ee=L[X],re=ee.data("source"),Q=ee.data("target");if(re!==Q){var ne=D.indexOfId(re),ae=D.indexOfId(Q),oe=k(ee),se=ae*q+ne;j[se]+=oe,z[ne]+=oe}}for(var ce=1/q+V,de=0;de<q;de++)if(z[de]===0)for(var ye=0;ye<q;ye++){var we=ye*q+de;j[we]=ce}else for(var ge=0;ge<q;ge++){var ve=ge*q+de;j[ve]=j[ve]/z[de]+V}for(var be=new Array(q),ke=new Array(q),me,fe=0;fe<q;fe++)be[fe]=1;for(var xe=0;xe<A;xe++){for(var Ae=0;Ae<q;Ae++)ke[Ae]=0;for(var Se=0;Se<q;Se++)for(var Me=0;Me<q;Me++){var Oe=Se*q+Me;ke[Se]+=j[Oe]*be[Me]}inPlaceSumNormalize(ke),me=be,be=ke,ke=me;for(var Ce=0,$e=0;$e<q;$e++){var Be=me[$e]-be[$e];Ce+=Be*Be}if(Ce<T)break}var Pe={rank:function(Le){return Le=M.collection(Le)[0],be[D.indexOf(Le)]}};return Pe}},defaults$f=defaults$g({root:null,weight:function(v){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function(v){v=defaults$f(v);var S=this.cy(),R=this.nodes(),T=R.length;if(v.directed){for(var L={},q={},B=0,F=0,j=0;j<T;j++){var z=R[j],V=z.id();v.root=z;var G=this.degreeCentrality(v);B<G.indegree&&(B=G.indegree),F<G.outdegree&&(F=G.outdegree),L[V]=G.indegree,q[V]=G.outdegree}return{indegree:function(Y){return B==0?0:(string$1(Y)&&(Y=S.filter(Y)),L[Y.id()]/B)},outdegree:function(Y){return F===0?0:(string$1(Y)&&(Y=S.filter(Y)),q[Y.id()]/F)}}}else{for(var A={},k=0,M=0;M<T;M++){var P=R[M];v.root=P;var D=this.degreeCentrality(v);k<D.degree&&(k=D.degree),A[P.id()]=D.degree}return{degree:function(Y){return k===0?0:(string$1(Y)&&(Y=S.filter(Y)),A[Y.id()]/k)}}}},degreeCentrality:function(v){v=defaults$f(v);var S=this.cy(),R=this,T=v,A=T.root,k=T.weight,M=T.directed,P=T.alpha;if(A=S.collection(A)[0],M){for(var F=A.connectedEdges(),j=F.filter(function(re){return re.target().same(A)&&R.has(re)}),z=F.filter(function(re){return re.source().same(A)&&R.has(re)}),V=j.length,G=z.length,W=0,Y=0,X=0;X<j.length;X++)W+=k(j[X]);for(var ee=0;ee<z.length;ee++)Y+=k(z[ee]);return{indegree:Math.pow(V,1-P)*Math.pow(W,P),outdegree:Math.pow(G,1-P)*Math.pow(Y,P)}}else{for(var D=A.connectedEdges().intersection(R),L=D.length,q=0,B=0;B<D.length;B++)q+=k(D[B]);return{degree:Math.pow(L,1-P)*Math.pow(q,P)}}}};elesfn$n.dc=elesfn$n.degreeCentrality;elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function(v){for(var S=defaults$e(v),R=S.harmonic,T=S.weight,A=S.directed,k=this.cy(),M={},P=0,D=this.nodes(),L=this.floydWarshall({weight:T,directed:A}),q=0;q<D.length;q++){for(var B=0,F=D[q],j=0;j<D.length;j++)if(q!==j){var z=L.distance(F,D[j]);R?B+=1/z:B+=z}R||(B=1/B),P<B&&(P=B),M[F.id()]=B}return{closeness:function(G){return P==0?0:(string$1(G)?G=k.filter(G)[0].id():G=G.id(),M[G]/P)}}},closenessCentrality:function(v){var S=defaults$e(v),R=S.root,T=S.weight,A=S.directed,k=S.harmonic;R=this.filter(R)[0];for(var M=this.dijkstra({root:R,weight:T,directed:A}),P=0,D=this.nodes(),L=0;L<D.length;L++){var q=D[L];if(!q.same(R)){var B=M.distanceTo(q);k?P+=1/B:P+=B}}return k?P:1/P}};elesfn$m.cc=elesfn$m.closenessCentrality;elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function(v){for(var S=defaults$d(v),R=S.directed,T=S.weight,A=T!=null,k=this.cy(),M=this.nodes(),P={},D={},L=0,q={set:function(Y,X){D[Y]=X,X>L&&(L=X)},get:function(Y){return D[Y]}},B=0;B<M.length;B++){var F=M[B],j=F.id();R?P[j]=F.outgoers().nodes():P[j]=F.openNeighborhood().nodes(),q.set(j,0)}for(var z=function(){for(var Y=M[V].id(),X=[],ee={},re={},Q={},ne=new Heap(function(Se,Me){return Q[Se]-Q[Me]}),ae=0;ae<M.length;ae++){var oe=M[ae].id();ee[oe]=[],re[oe]=0,Q[oe]=1/0}for(re[Y]=1,Q[Y]=0,ne.push(Y);!ne.empty();){var se=ne.pop();if(X.push(se),A)for(var ce=0;ce<P[se].length;ce++){var de=P[se][ce],ye=k.getElementById(se),we=void 0;ye.edgesTo(de).length>0?we=ye.edgesTo(de)[0]:we=de.edgesTo(ye)[0];var ge=T(we);de=de.id(),Q[de]>Q[se]+ge&&(Q[de]=Q[se]+ge,ne.nodes.indexOf(de)<0?ne.push(de):ne.updateItem(de),re[de]=0,ee[de]=[]),Q[de]==Q[se]+ge&&(re[de]=re[de]+re[se],ee[de].push(se))}else for(var ve=0;ve<P[se].length;ve++){var be=P[se][ve].id();Q[be]==1/0&&(ne.push(be),Q[be]=Q[se]+1),Q[be]==Q[se]+1&&(re[be]=re[be]+re[se],ee[be].push(se))}}for(var ke={},me=0;me<M.length;me++)ke[M[me].id()]=0;for(;X.length>0;){for(var fe=X.pop(),xe=0;xe<ee[fe].length;xe++){var Ae=ee[fe][xe];ke[Ae]=ke[Ae]+re[Ae]/re[fe]*(1+ke[fe])}fe!=M[V].id()&&q.set(fe,q.get(fe)+ke[fe])}},V=0;V<M.length;V++)z();var G={betweenness:function(Y){var X=k.collection(Y).id();return q.get(X)},betweennessNormalized:function(Y){if(L==0)return 0;var X=k.collection(Y).id();return q.get(X)/L}};return G.betweennessNormalised=G.betweennessNormalized,G}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(_){return 1}]}),setOptions$3=function(v){return defaults$c(v)},getSimilarity$1=function(v,S){for(var R=0,T=0;T<S.length;T++)R+=S[T](v);return R},addLoops=function(v,S,R){for(var T=0;T<S;T++)v[T*S+T]=R},normalize$2=function(v,S){for(var R,T=0;T<S;T++){R=0;for(var A=0;A<S;A++)R+=v[A*S+T];for(var k=0;k<S;k++)v[k*S+T]=v[k*S+T]/R}},mmult=function(v,S,R){for(var T=new Array(R*R),A=0;A<R;A++){for(var k=0;k<R;k++)T[A*R+k]=0;for(var M=0;M<R;M++)for(var P=0;P<R;P++)T[A*R+P]+=v[A*R+M]*S[M*R+P]}return T},expand=function(v,S,R){for(var T=v.slice(0),A=1;A<R;A++)v=mmult(v,T,S);return v},inflate=function(v,S,R){for(var T=new Array(S*S),A=0;A<S*S;A++)T[A]=Math.pow(v[A],R);return normalize$2(T,S),T},hasConverged=function(v,S,R,T){for(var A=0;A<R;A++){var k=Math.round(v[A]*Math.pow(10,T))/Math.pow(10,T),M=Math.round(S[A]*Math.pow(10,T))/Math.pow(10,T);if(k!==M)return!1}return!0},assign$2=function(v,S,R,T){for(var A=[],k=0;k<S;k++){for(var M=[],P=0;P<S;P++)Math.round(v[k*S+P]*1e3)/1e3>0&&M.push(R[P]);M.length!==0&&A.push(T.collection(M))}return A},isDuplicate=function(v,S){for(var R=0;R<v.length;R++)if(!S[R]||v[R].id()!==S[R].id())return!1;return!0},removeDuplicates=function(v){for(var S=0;S<v.length;S++)for(var R=0;R<v.length;R++)S!=R&&isDuplicate(v[S],v[R])&&v.splice(R,1);return v},markovClustering=function(v){for(var S=this.nodes(),R=this.edges(),T=this.cy(),A=setOptions$3(v),k={},M=0;M<S.length;M++)k[S[M].id()]=M;for(var P=S.length,D=P*P,L=new Array(D),q,B=0;B<D;B++)L[B]=0;for(var F=0;F<R.length;F++){var j=R[F],z=k[j.source().id()],V=k[j.target().id()],G=getSimilarity$1(j,A.attributes);L[z*P+V]+=G,L[V*P+z]+=G}addLoops(L,P,A.multFactor),normalize$2(L,P);for(var W=!0,Y=0;W&&Y<A.maxIterations;)W=!1,q=expand(L,P,A.expandFactor),L=inflate(q,P,A.inflateFactor),hasConverged(L,q,D,4)||(W=!0),Y++;var X=assign$2(L,P,S,T);return X=removeDuplicates(X),X},markovClustering$1={markovClustering,mcl:markovClustering},identity$1=function(v){return v},absDiff=function(v,S){return Math.abs(S-v)},addAbsDiff=function(v,S,R){return v+absDiff(S,R)},addSquaredDiff=function(v,S,R){return v+Math.pow(R-S,2)},sqrt=function(v){return Math.sqrt(v)},maxAbsDiff=function(v,S,R){return Math.max(v,absDiff(S,R))},getDistance=function(v,S,R,T,A){for(var k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:identity$1,M=T,P,D,L=0;L<v;L++)P=S(L),D=R(L),M=A(M,P,D);return k(M)},distances={euclidean:function(v,S,R){return v>=2?getDistance(v,S,R,0,addSquaredDiff,sqrt):getDistance(v,S,R,0,addAbsDiff)},squaredEuclidean:function(v,S,R){return getDistance(v,S,R,0,addSquaredDiff)},manhattan:function(v,S,R){return getDistance(v,S,R,0,addAbsDiff)},max:function(v,S,R){return getDistance(v,S,R,-1/0,maxAbsDiff)}};distances["squared-euclidean"]=distances.squaredEuclidean;distances.squaredeuclidean=distances.squaredEuclidean;function clusteringDistance(_,v,S,R,T,A){var k;return fn$6(_)?k=_:k=distances[_]||distances.euclidean,v===0&&fn$6(_)?k(T,A):k(v,S,R,T,A)}var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=function(v){return defaults$b(v)},getDist=function(v,S,R,T,A){var k=A!=="kMedoids",M=k?function(q){return R[q]}:function(q){return T[q](R)},P=function(B){return T[B](S)},D=R,L=S;return clusteringDistance(v,T.length,M,P,D,L)},randomCentroids=function(v,S,R){for(var T=R.length,A=new Array(T),k=new Array(T),M=new Array(S),P=null,D=0;D<T;D++)A[D]=v.min(R[D]).value,k[D]=v.max(R[D]).value;for(var L=0;L<S;L++){P=[];for(var q=0;q<T;q++)P[q]=Math.random()*(k[q]-A[q])+A[q];M[L]=P}return M},classify=function(v,S,R,T,A){for(var k=1/0,M=0,P=0;P<S.length;P++){var D=getDist(R,v,S[P],T,A);D<k&&(k=D,M=P)}return M},buildCluster=function(v,S,R){for(var T=[],A=null,k=0;k<S.length;k++)A=S[k],R[A.id()]===v&&T.push(A);return T},haveValuesConverged=function(v,S,R){return Math.abs(S-v)<=R},haveMatricesConverged=function(v,S,R){for(var T=0;T<v.length;T++)for(var A=0;A<v[T].length;A++){var k=Math.abs(v[T][A]-S[T][A]);if(k>R)return!1}return!0},seenBefore=function(v,S,R){for(var T=0;T<R;T++)if(v===S[T])return!0;return!1},randomMedoids=function(v,S){var R=new Array(S);if(v.length<50)for(var T=0;T<S;T++){for(var A=v[Math.floor(Math.random()*v.length)];seenBefore(A,R,T);)A=v[Math.floor(Math.random()*v.length)];R[T]=A}else for(var k=0;k<S;k++)R[k]=v[Math.floor(Math.random()*v.length)];return R},findCost=function(v,S,R){for(var T=0,A=0;A<S.length;A++)T+=getDist("manhattan",S[A],v,R,"kMedoids");return T},kMeans=function(v){var S=this.cy(),R=this.nodes(),T=null,A=setOptions$2(v),k=new Array(A.k),M={},P;A.testMode?typeof A.testCentroids=="number"?(A.testCentroids,P=randomCentroids(R,A.k,A.attributes)):_typeof(A.testCentroids)==="object"?P=A.testCentroids:P=randomCentroids(R,A.k,A.attributes):P=randomCentroids(R,A.k,A.attributes);for(var D=!0,L=0;D&&L<A.maxIterations;){for(var q=0;q<R.length;q++)T=R[q],M[T.id()]=classify(T,P,A.distance,A.attributes,"kMeans");D=!1;for(var B=0;B<A.k;B++){var F=buildCluster(B,R,M);if(F.length!==0){for(var j=A.attributes.length,z=P[B],V=new Array(j),G=new Array(j),W=0;W<j;W++){G[W]=0;for(var Y=0;Y<F.length;Y++)T=F[Y],G[W]+=A.attributes[W](T);V[W]=G[W]/F.length,haveValuesConverged(V[W],z[W],A.sensitivityThreshold)||(D=!0)}P[B]=V,k[B]=S.collection(F)}}L++}return k},kMedoids=function(v){var S=this.cy(),R=this.nodes(),T=null,A=setOptions$2(v),k=new Array(A.k),M,P={},D,L=new Array(A.k);A.testMode?typeof A.testCentroids=="number"||(_typeof(A.testCentroids)==="object"?M=A.testCentroids:M=randomMedoids(R,A.k)):M=randomMedoids(R,A.k);for(var q=!0,B=0;q&&B<A.maxIterations;){for(var F=0;F<R.length;F++)T=R[F],P[T.id()]=classify(T,M,A.distance,A.attributes,"kMedoids");q=!1;for(var j=0;j<M.length;j++){var z=buildCluster(j,R,P);if(z.length!==0){L[j]=findCost(M[j],z,A.attributes);for(var V=0;V<z.length;V++)D=findCost(z[V],z,A.attributes),D<L[j]&&(L[j]=D,M[j]=z[V],q=!0);k[j]=S.collection(z)}}B++}return k},updateCentroids=function(v,S,R,T,A){for(var k,M,P=0;P<S.length;P++)for(var D=0;D<v.length;D++)T[P][D]=Math.pow(R[P][D],A.m);for(var L=0;L<v.length;L++)for(var q=0;q<A.attributes.length;q++){k=0,M=0;for(var B=0;B<S.length;B++)k+=T[B][L]*A.attributes[q](S[B]),M+=T[B][L];v[L][q]=k/M}},updateMembership=function(v,S,R,T,A){for(var k=0;k<v.length;k++)S[k]=v[k].slice();for(var M,P,D,L=2/(A.m-1),q=0;q<R.length;q++)for(var B=0;B<T.length;B++){M=0;for(var F=0;F<R.length;F++)P=getDist(A.distance,T[B],R[q],A.attributes,"cmeans"),D=getDist(A.distance,T[B],R[F],A.attributes,"cmeans"),M+=Math.pow(P/D,L);v[B][q]=1/M}},assign$1=function(v,S,R,T){for(var A=new Array(R.k),k=0;k<A.length;k++)A[k]=[];for(var M,P,D=0;D<S.length;D++){M=-1/0,P=-1;for(var L=0;L<S[0].length;L++)S[D][L]>M&&(M=S[D][L],P=L);A[P].push(v[D])}for(var q=0;q<A.length;q++)A[q]=T.collection(A[q]);return A},fuzzyCMeans=function(v){var S=this.cy(),R=this.nodes(),T=setOptions$2(v),A,k,M,P,D;P=new Array(R.length);for(var L=0;L<R.length;L++)P[L]=new Array(T.k);M=new Array(R.length);for(var q=0;q<R.length;q++)M[q]=new Array(T.k);for(var B=0;B<R.length;B++){for(var F=0,j=0;j<T.k;j++)M[B][j]=Math.random(),F+=M[B][j];for(var z=0;z<T.k;z++)M[B][z]=M[B][z]/F}k=new Array(T.k);for(var V=0;V<T.k;V++)k[V]=new Array(T.attributes.length);D=new Array(R.length);for(var G=0;G<R.length;G++)D[G]=new Array(T.k);for(var W=!0,Y=0;W&&Y<T.maxIterations;)W=!1,updateCentroids(k,R,M,D,T),updateMembership(M,P,k,R,T),haveMatricesConverged(M,P,T.sensitivityThreshold)||(W=!0),Y++;return A=assign$1(R,M,T,S),{clusters:A,degreeOfMembership:M}},kClustering={kMeans,kMedoids,fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function(v){var S=defaults$a(v),R=linkageAliases[S.linkage];return R!=null&&(S.linkage=R),S},mergeClosest=function(v,S,R,T,A){for(var k=0,M=1/0,P,D=A.attributes,L=function(ae,oe){return clusteringDistance(A.distance,D.length,function(se){return D[se](ae)},function(se){return D[se](oe)},ae,oe)},q=0;q<v.length;q++){var B=v[q].key,F=R[B][T[B]];F<M&&(k=B,M=F)}if(A.mode==="threshold"&&M>=A.threshold||A.mode==="dendrogram"&&v.length===1)return!1;var j=S[k],z=S[T[k]],V;A.mode==="dendrogram"?V={left:j,right:z,key:j.key}:V={value:j.value.concat(z.value),key:j.key},v[j.index]=V,v.splice(z.index,1),S[j.key]=V;for(var G=0;G<v.length;G++){var W=v[G];j.key===W.key?P=1/0:A.linkage==="min"?(P=R[j.key][W.key],R[j.key][W.key]>R[z.key][W.key]&&(P=R[z.key][W.key])):A.linkage==="max"?(P=R[j.key][W.key],R[j.key][W.key]<R[z.key][W.key]&&(P=R[z.key][W.key])):A.linkage==="mean"?P=(R[j.key][W.key]*j.size+R[z.key][W.key]*z.size)/(j.size+z.size):A.mode==="dendrogram"?P=L(W.value,j.value):P=L(W.value[0],j.value[0]),R[j.key][W.key]=R[W.key][j.key]=P}for(var Y=0;Y<v.length;Y++){var X=v[Y].key;if(T[X]===j.key||T[X]===z.key){for(var ee=X,re=0;re<v.length;re++){var Q=v[re].key;R[X][Q]<R[X][ee]&&(ee=Q)}T[X]=ee}v[Y].index=Y}return j.key=z.key=j.index=z.index=null,!0},_getAllChildren=function(v,S,R){v&&(v.value?S.push(v.value):(v.left&&_getAllChildren(v.left,S),v.right&&_getAllChildren(v.right,S)))},_buildDendrogram=function(v,S){if(!v)return"";if(v.left&&v.right){var R=_buildDendrogram(v.left,S),T=_buildDendrogram(v.right,S),A=S.add({group:"nodes",data:{id:R+","+T}});return S.add({group:"edges",data:{source:R,target:A.id()}}),S.add({group:"edges",data:{source:T,target:A.id()}}),A.id()}else if(v.value)return v.value.id()},_buildClustersFromTree=function(v,S,R){if(!v)return[];var T=[],A=[],k=[];return S===0?(v.left&&_getAllChildren(v.left,T),v.right&&_getAllChildren(v.right,A),k=T.concat(A),[R.collection(k)]):S===1?v.value?[R.collection(v.value)]:(v.left&&_getAllChildren(v.left,T),v.right&&_getAllChildren(v.right,A),[R.collection(T),R.collection(A)]):v.value?[R.collection(v.value)]:(v.left&&(T=_buildClustersFromTree(v.left,S-1,R)),v.right&&(A=_buildClustersFromTree(v.right,S-1,R)),T.concat(A))},hierarchicalClustering=function(v){for(var S=this.cy(),R=this.nodes(),T=setOptions$1(v),A=T.attributes,k=function(Y,X){return clusteringDistance(T.distance,A.length,function(ee){return A[ee](Y)},function(ee){return A[ee](X)},Y,X)},M=[],P=[],D=[],L=[],q=0;q<R.length;q++){var B={value:T.mode==="dendrogram"?R[q]:[R[q]],key:q,index:q};M[q]=B,L[q]=B,P[q]=[],D[q]=0}for(var F=0;F<M.length;F++)for(var j=0;j<=F;j++){var z=void 0;T.mode==="dendrogram"?z=F===j?1/0:k(M[F].value,M[j].value):z=F===j?1/0:k(M[F].value[0],M[j].value[0]),P[F][j]=z,P[j][F]=z,z<P[F][D[F]]&&(D[F]=j)}for(var V=mergeClosest(M,L,P,D,T);V;)V=mergeClosest(M,L,P,D,T);var G;return T.mode==="dendrogram"?(G=_buildClustersFromTree(M[0],T.dendrogramDepth,S),T.addDendrogram&&_buildDendrogram(M[0],S)):(G=new Array(M.length),M.forEach(function(W,Y){W.key=W.index=null,G[Y]=S.collection(W.value)})),G},hierarchicalClustering$1={hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions=function(v){var S=v.damping,R=v.preference;.5<=S&&S<1||error("Damping must range on [0.5, 1).  Got: ".concat(S));var T=["median","mean","min","max"];return T.some(function(A){return A===R})||number$1(R)||error("Preference must be one of [".concat(T.map(function(A){return"'".concat(A,"'")}).join(", "),"] or a number.  Got: ").concat(R)),defaults$9(v)},getSimilarity=function(v,S,R,T){var A=function(M,P){return T[P](M)};return-clusteringDistance(v,T.length,function(k){return A(S,k)},function(k){return A(R,k)},S,R)},getPreference=function(v,S){var R=null;return S==="median"?R=median(v):S==="mean"?R=mean(v):S==="min"?R=min$1(v):S==="max"?R=max$1(v):R=S,R},findExemplars=function(v,S,R){for(var T=[],A=0;A<v;A++)S[A*v+A]+R[A*v+A]>0&&T.push(A);return T},assignClusters=function(v,S,R){for(var T=[],A=0;A<v;A++){for(var k=-1,M=-1/0,P=0;P<R.length;P++){var D=R[P];S[A*v+D]>M&&(k=D,M=S[A*v+D])}k>0&&T.push(k)}for(var L=0;L<R.length;L++)T[R[L]]=R[L];return T},assign=function(v,S,R){for(var T=assignClusters(v,S,R),A=0;A<R.length;A++){for(var k=[],M=0;M<T.length;M++)T[M]===R[A]&&k.push(M);for(var P=-1,D=-1/0,L=0;L<k.length;L++){for(var q=0,B=0;B<k.length;B++)q+=S[k[B]*v+k[L]];q>D&&(P=L,D=q)}R[A]=k[P]}return T=assignClusters(v,S,R),T},affinityPropagation=function(v){for(var S=this.cy(),R=this.nodes(),T=setOptions(v),A={},k=0;k<R.length;k++)A[R[k].id()]=k;var M,P,D,L,q,B;M=R.length,P=M*M,D=new Array(P);for(var F=0;F<P;F++)D[F]=-1/0;for(var j=0;j<M;j++)for(var z=0;z<M;z++)j!==z&&(D[j*M+z]=getSimilarity(T.distance,R[j],R[z],T.attributes));L=getPreference(D,T.preference);for(var V=0;V<M;V++)D[V*M+V]=L;q=new Array(P);for(var G=0;G<P;G++)q[G]=0;B=new Array(P);for(var W=0;W<P;W++)B[W]=0;for(var Y=new Array(M),X=new Array(M),ee=new Array(M),re=0;re<M;re++)Y[re]=0,X[re]=0,ee[re]=0;for(var Q=new Array(M*T.minIterations),ne=0;ne<Q.length;ne++)Q[ne]=0;var ae;for(ae=0;ae<T.maxIterations;ae++){for(var oe=0;oe<M;oe++){for(var se=-1/0,ce=-1/0,de=-1,ye=0,we=0;we<M;we++)Y[we]=q[oe*M+we],ye=B[oe*M+we]+D[oe*M+we],ye>=se?(ce=se,se=ye,de=we):ye>ce&&(ce=ye);for(var ge=0;ge<M;ge++)q[oe*M+ge]=(1-T.damping)*(D[oe*M+ge]-se)+T.damping*Y[ge];q[oe*M+de]=(1-T.damping)*(D[oe*M+de]-ce)+T.damping*Y[de]}for(var ve=0;ve<M;ve++){for(var be=0,ke=0;ke<M;ke++)Y[ke]=B[ke*M+ve],X[ke]=Math.max(0,q[ke*M+ve]),be+=X[ke];be-=X[ve],X[ve]=q[ve*M+ve],be+=X[ve];for(var me=0;me<M;me++)B[me*M+ve]=(1-T.damping)*Math.min(0,be-X[me])+T.damping*Y[me];B[ve*M+ve]=(1-T.damping)*(be-X[ve])+T.damping*Y[ve]}for(var fe=0,xe=0;xe<M;xe++){var Ae=B[xe*M+xe]+q[xe*M+xe]>0?1:0;Q[ae%T.minIterations*M+xe]=Ae,fe+=Ae}if(fe>0&&(ae>=T.minIterations-1||ae==T.maxIterations-1)){for(var Se=0,Me=0;Me<M;Me++){ee[Me]=0;for(var Oe=0;Oe<T.minIterations;Oe++)ee[Me]+=Q[Oe*M+Me];(ee[Me]===0||ee[Me]===T.minIterations)&&Se++}if(Se===M)break}}for(var Ce=findExemplars(M,q,B),$e=assign(M,D,Ce),Be={},Pe=0;Pe<Ce.length;Pe++)Be[Ce[Pe]]=[];for(var De=0;De<R.length;De++){var Le=A[R[De].id()],Ne=$e[Le];Ne!=null&&Be[Ne].push(R[De])}for(var tt=new Array(Ce.length),it=0;it<Ce.length;it++)tt[it]=S.collection(Be[Ce[it]]);return tt},affinityPropagation$1={affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:function(v){if(!plainObject(v)){var S=arguments;v={root:S[0],directed:S[1]}}var R=hierholzerDefaults(v),T=R.root,A=R.directed,k=this,M=!1,P,D,L;T&&(L=string$1(T)?this.filter(T)[0].id():T[0].id());var q={},B={};A?k.forEach(function(W){var Y=W.id();if(W.isNode()){var X=W.indegree(!0),ee=W.outdegree(!0),re=X-ee,Q=ee-X;re==1?P?M=!0:P=Y:Q==1?D?M=!0:D=Y:(Q>1||re>1)&&(M=!0),q[Y]=[],W.outgoers().forEach(function(ne){ne.isEdge()&&q[Y].push(ne.id())})}else B[Y]=[void 0,W.target().id()]}):k.forEach(function(W){var Y=W.id();if(W.isNode()){var X=W.degree(!0);X%2&&(P?D?M=!0:D=Y:P=Y),q[Y]=[],W.connectedEdges().forEach(function(ee){return q[Y].push(ee.id())})}else B[Y]=[W.source().id(),W.target().id()]});var F={found:!1,trail:void 0};if(M)return F;if(D&&P)if(A){if(L&&D!=L)return F;L=D}else{if(L&&D!=L&&P!=L)return F;L||(L=D)}else L||(L=k[0].id());var j=function(Y){for(var X=Y,ee=[Y],re,Q,ne;q[X].length;)re=q[X].shift(),Q=B[re][0],ne=B[re][1],X!=ne?(q[ne]=q[ne].filter(function(ae){return ae!=re}),X=ne):!A&&X!=Q&&(q[Q]=q[Q].filter(function(ae){return ae!=re}),X=Q),ee.unshift(re),ee.unshift(X);return ee},z=[],V=[];for(V=j(L);V.length!=1;)q[V[0]].length==0?(z.unshift(k.getElementById(V.shift())),z.unshift(k.getElementById(V.shift()))):V=j(V.shift()).concat(V);z.unshift(k.getElementById(V.shift()));for(var G in q)if(q[G].length)return F;return F.found=!0,F.trail=this.spawn(z,!0),F}},hopcroftTarjanBiconnected=function(){var v=this,S={},R=0,T=0,A=[],k=[],M={},P=function(B,F){for(var j=k.length-1,z=[],V=v.spawn();k[j].x!=B||k[j].y!=F;)z.push(k.pop().edge),j--;z.push(k.pop().edge),z.forEach(function(G){var W=G.connectedNodes().intersection(v);V.merge(G),W.forEach(function(Y){var X=Y.id(),ee=Y.connectedEdges().intersection(v);V.merge(Y),S[X].cutVertex?V.merge(ee.filter(function(re){return re.isLoop()})):V.merge(ee)})}),A.push(V)},D=function(B,F,j){B===j&&(T+=1),S[F]={id:R,low:R++,cutVertex:!1};var z=v.getElementById(F).connectedEdges().intersection(v);if(z.size()===0)A.push(v.spawn(v.getElementById(F)));else{var V,G,W,Y;z.forEach(function(X){V=X.source().id(),G=X.target().id(),W=V===F?G:V,W!==j&&(Y=X.id(),M[Y]||(M[Y]=!0,k.push({x:F,y:W,edge:X})),W in S?S[F].low=Math.min(S[F].low,S[W].id):(D(B,W,F),S[F].low=Math.min(S[F].low,S[W].low),S[F].id<=S[W].low&&(S[F].cutVertex=!0,P(F,W))))})}};v.forEach(function(q){if(q.isNode()){var B=q.id();B in S||(T=0,D(B,B),S[B].cutVertex=T>1)}});var L=Object.keys(S).filter(function(q){return S[q].cutVertex}).map(function(q){return v.getElementById(q)});return{cut:v.spawn(L),components:A}},hopcroftTarjanBiconnected$1={hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},tarjanStronglyConnected=function(){var v=this,S={},R=0,T=[],A=[],k=v.spawn(v),M=function(D){A.push(D),S[D]={index:R,low:R++,explored:!1};var L=v.getElementById(D).connectedEdges().intersection(v);if(L.forEach(function(z){var V=z.target().id();V!==D&&(V in S||M(V),S[V].explored||(S[D].low=Math.min(S[D].low,S[V].low)))}),S[D].index===S[D].low){for(var q=v.spawn();;){var B=A.pop();if(q.merge(v.getElementById(B)),S[B].low=S[D].index,S[B].explored=!0,B===D)break}var F=q.edgesWith(q),j=q.merge(F);T.push(j),k=k.difference(j)}};return v.forEach(function(P){if(P.isNode()){var D=P.id();D in S||M(D)}}),{cut:k,components:T}},tarjanStronglyConnected$1={tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected},elesfn$j={};[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,hopcroftTarjanBiconnected$1,tarjanStronglyConnected$1].forEach(function(_){extend(elesfn$j,_)});var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,_api=function(v){if(!(this instanceof _api))return new _api(v);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof v=="function"&&v.call(this,this.fulfill.bind(this),this.reject.bind(this))};_api.prototype={fulfill:function(v){return deliver(this,STATE_FULFILLED,"fulfillValue",v)},reject:function(v){return deliver(this,STATE_REJECTED,"rejectReason",v)},then:function(v,S){var R=this,T=new _api;return R.onFulfilled.push(resolver(v,T,"fulfill")),R.onRejected.push(resolver(S,T,"reject")),execute(R),T.proxy}};var deliver=function(v,S,R,T){return v.state===STATE_PENDING&&(v.state=S,v[R]=T,execute(v)),v},execute=function(v){v.state===STATE_FULFILLED?execute_handlers(v,"onFulfilled",v.fulfillValue):v.state===STATE_REJECTED&&execute_handlers(v,"onRejected",v.rejectReason)},execute_handlers=function(v,S,R){if(v[S].length!==0){var T=v[S];v[S]=[];var A=function(){for(var M=0;M<T.length;M++)T[M](R)};typeof setImmediate=="function"?setImmediate(A):setTimeout(A,0)}},resolver=function(v,S,R){return function(T){if(typeof v!="function")S[R].call(S,T);else{var A;try{A=v(T)}catch(k){S.reject(k);return}_resolve(S,A)}}},_resolve=function(v,S){if(v===S||v.proxy===S){v.reject(new TypeError("cannot resolve promise with itself"));return}var R;if(_typeof(S)==="object"&&S!==null||typeof S=="function")try{R=S.then}catch(A){v.reject(A);return}if(typeof R=="function"){var T=!1;try{R.call(S,function(A){T||(T=!0,A===S?v.reject(new TypeError("circular thenable chain")):_resolve(v,A))},function(A){T||(T=!0,v.reject(A))})}catch(A){T||v.reject(A)}return}v.fulfill(S)};_api.all=function(_){return new _api(function(v,S){for(var R=new Array(_.length),T=0,A=function(P,D){R[P]=D,T++,T===_.length&&v(R)},k=0;k<_.length;k++)(function(M){var P=_[M],D=P!=null&&P.then!=null;if(D)P.then(function(q){A(M,q)},function(q){S(q)});else{var L=P;A(M,L)}})(k)})};_api.resolve=function(_){return new _api(function(v,S){v(_)})};_api.reject=function(_){return new _api(function(v,S){S(_)})};var Promise$1=typeof Promise<"u"?Promise:_api,Animation=function(v,S,R){var T=core$2(v),A=!T,k=this._private=extend({duration:1e3},S,R);if(k.target=v,k.style=k.style||k.css,k.started=!1,k.playing=!1,k.hooked=!1,k.applying=!1,k.progress=0,k.completes=[],k.frames=[],k.complete&&fn$6(k.complete)&&k.completes.push(k.complete),A){var M=v.position();k.startPosition=k.startPosition||{x:M.x,y:M.y},k.startStyle=k.startStyle||v.cy().style().getAnimationStartStyle(v,k.style)}if(T){var P=v.pan();k.startPan={x:P.x,y:P.y},k.startZoom=v.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var v=this._private;if(!v.hooked){var S,R=v.target._private.animation;v.queue?S=R.queue:S=R.current,S.push(this),elementOrCollection(v.target)&&v.target.cy().addToAnimationPool(v.target),v.hooked=!0}return this},play:function(){var v=this._private;return v.progress===1&&(v.progress=0),v.playing=!0,v.started=!1,v.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var v=this._private;return v.applying=!0,v.started=!1,v.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var v=this._private;return v.playing=!1,v.started=!1,this},stop:function(){var v=this._private;return v.playing=!1,v.started=!1,v.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(v){var S=this._private;return v===void 0?S.progress*S.duration:this.progress(v/S.duration)},progress:function(v){var S=this._private,R=S.playing;return v===void 0?S.progress:(R&&this.pause(),S.progress=v,S.started=!1,R&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var v=this._private,S=v.playing;S&&this.pause(),v.progress=1-v.progress,v.started=!1;var R=function(D,L){var q=v[D];q!=null&&(v[D]=v[L],v[L]=q)};if(R("zoom","startZoom"),R("pan","startPan"),R("position","startPosition"),v.style)for(var T=0;T<v.style.length;T++){var A=v.style[T],k=A.name,M=v.startStyle[k];v.startStyle[k]=A,v.style[T]=M}return S&&this.play(),this},promise:function(v){var S=this._private,R;switch(v){case"frame":R=S.frames;break;default:case"complete":case"completed":R=S.completes}return new Promise$1(function(T,A){R.push(function(){T()})})}});anifn.complete=anifn.completed;anifn.run=anifn.play;anifn.running=anifn.playing;var define$3={animated:function(){return function(){var S=this,R=S.length!==void 0,T=R?S:[S],A=this._private.cy||this;if(!A.styleEnabled())return!1;var k=T[0];if(k)return k._private.animation.current.length>0}},clearQueue:function(){return function(){var S=this,R=S.length!==void 0,T=R?S:[S],A=this._private.cy||this;if(!A.styleEnabled())return this;for(var k=0;k<T.length;k++){var M=T[k];M._private.animation.queue=[]}return this}},delay:function(){return function(S,R){var T=this._private.cy||this;return T.styleEnabled()?this.animate({delay:S,duration:S,complete:R}):this}},delayAnimation:function(){return function(S,R){var T=this._private.cy||this;return T.styleEnabled()?this.animation({delay:S,duration:S,complete:R}):this}},animation:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],M=this._private.cy||this,P=!A,D=!P;if(!M.styleEnabled())return this;var L=M.style();S=extend({},S,R);var q=Object.keys(S).length===0;if(q)return new Animation(k[0],S);switch(S.duration===void 0&&(S.duration=400),S.duration){case"slow":S.duration=600;break;case"fast":S.duration=200;break}if(D&&(S.style=L.getPropsList(S.style||S.css),S.css=void 0),D&&S.renderedPosition!=null){var B=S.renderedPosition,F=M.pan(),j=M.zoom();S.position=renderedToModelPosition(B,j,F)}if(P&&S.panBy!=null){var z=S.panBy,V=M.pan();S.pan={x:V.x+z.x,y:V.y+z.y}}var G=S.center||S.centre;if(P&&G!=null){var W=M.getCenterPan(G.eles,S.zoom);W!=null&&(S.pan=W)}if(P&&S.fit!=null){var Y=S.fit,X=M.getFitViewport(Y.eles||Y.boundingBox,Y.padding);X!=null&&(S.pan=X.pan,S.zoom=X.zoom)}if(P&&plainObject(S.zoom)){var ee=M.getZoomedViewport(S.zoom);ee!=null?(ee.zoomed&&(S.zoom=ee.zoom),ee.panned&&(S.pan=ee.pan)):S.zoom=null}return new Animation(k[0],S)}},animate:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],M=this._private.cy||this;if(!M.styleEnabled())return this;R&&(S=extend({},S,R));for(var P=0;P<k.length;P++){var D=k[P],L=D.animated()&&(S.queue===void 0||S.queue),q=D.animation(S,L?{queue:!0}:void 0);q.play()}return this}},stop:function(){return function(S,R){var T=this,A=T.length!==void 0,k=A?T:[T],M=this._private.cy||this;if(!M.styleEnabled())return this;for(var P=0;P<k.length;P++){for(var D=k[P],L=D._private,q=L.animation.current,B=0;B<q.length;B++){var F=q[B],j=F._private;R&&(j.duration=0)}S&&(L.animation.queue=[]),R||(L.animation.current=[])}return M.notify("draw"),this}}},isArray_1$1,hasRequiredIsArray$1;function requireIsArray$1(){if(hasRequiredIsArray$1)return isArray_1$1;hasRequiredIsArray$1=1;var _=Array.isArray;return isArray_1$1=_,isArray_1$1}var _isKey$1,hasRequired_isKey$1;function require_isKey$1(){if(hasRequired_isKey$1)return _isKey$1;hasRequired_isKey$1=1;var _=requireIsArray$1(),v=requireIsSymbol$1(),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function T(A,k){if(_(A))return!1;var M=typeof A;return M=="number"||M=="symbol"||M=="boolean"||A==null||v(A)?!0:R.test(A)||!S.test(A)||k!=null&&A in Object(k)}return _isKey$1=T,_isKey$1}var isFunction_1$1,hasRequiredIsFunction$1;function requireIsFunction$1(){if(hasRequiredIsFunction$1)return isFunction_1$1;hasRequiredIsFunction$1=1;var _=require_baseGetTag$1(),v=requireIsObject$1(),S="[object AsyncFunction]",R="[object Function]",T="[object GeneratorFunction]",A="[object Proxy]";function k(M){if(!v(M))return!1;var P=_(M);return P==R||P==T||P==S||P==A}return isFunction_1$1=k,isFunction_1$1}var _coreJsData$1,hasRequired_coreJsData$1;function require_coreJsData$1(){if(hasRequired_coreJsData$1)return _coreJsData$1;hasRequired_coreJsData$1=1;var _=require_root$1(),v=_["__core-js_shared__"];return _coreJsData$1=v,_coreJsData$1}var _isMasked$1,hasRequired_isMasked$1;function require_isMasked$1(){if(hasRequired_isMasked$1)return _isMasked$1;hasRequired_isMasked$1=1;var _=require_coreJsData$1(),v=(function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""})();function S(R){return!!v&&v in R}return _isMasked$1=S,_isMasked$1}var _toSource$1,hasRequired_toSource$1;function require_toSource$1(){if(hasRequired_toSource$1)return _toSource$1;hasRequired_toSource$1=1;var _=Function.prototype,v=_.toString;function S(R){if(R!=null){try{return v.call(R)}catch{}try{return R+""}catch{}}return""}return _toSource$1=S,_toSource$1}var _baseIsNative$1,hasRequired_baseIsNative$1;function require_baseIsNative$1(){if(hasRequired_baseIsNative$1)return _baseIsNative$1;hasRequired_baseIsNative$1=1;var _=requireIsFunction$1(),v=require_isMasked$1(),S=requireIsObject$1(),R=require_toSource$1(),T=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,k=Function.prototype,M=Object.prototype,P=k.toString,D=M.hasOwnProperty,L=RegExp("^"+P.call(D).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q(B){if(!S(B)||v(B))return!1;var F=_(B)?L:A;return F.test(R(B))}return _baseIsNative$1=q,_baseIsNative$1}var _getValue$1,hasRequired_getValue$1;function require_getValue$1(){if(hasRequired_getValue$1)return _getValue$1;hasRequired_getValue$1=1;function _(v,S){return v?.[S]}return _getValue$1=_,_getValue$1}var _getNative$1,hasRequired_getNative$1;function require_getNative$1(){if(hasRequired_getNative$1)return _getNative$1;hasRequired_getNative$1=1;var _=require_baseIsNative$1(),v=require_getValue$1();function S(R,T){var A=v(R,T);return _(A)?A:void 0}return _getNative$1=S,_getNative$1}var _nativeCreate$1,hasRequired_nativeCreate$1;function require_nativeCreate$1(){if(hasRequired_nativeCreate$1)return _nativeCreate$1;hasRequired_nativeCreate$1=1;var _=require_getNative$1(),v=_(Object,"create");return _nativeCreate$1=v,_nativeCreate$1}var _hashClear$1,hasRequired_hashClear$1;function require_hashClear$1(){if(hasRequired_hashClear$1)return _hashClear$1;hasRequired_hashClear$1=1;var _=require_nativeCreate$1();function v(){this.__data__=_?_(null):{},this.size=0}return _hashClear$1=v,_hashClear$1}var _hashDelete$1,hasRequired_hashDelete$1;function require_hashDelete$1(){if(hasRequired_hashDelete$1)return _hashDelete$1;hasRequired_hashDelete$1=1;function _(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S}return _hashDelete$1=_,_hashDelete$1}var _hashGet$1,hasRequired_hashGet$1;function require_hashGet$1(){if(hasRequired_hashGet$1)return _hashGet$1;hasRequired_hashGet$1=1;var _=require_nativeCreate$1(),v="__lodash_hash_undefined__",S=Object.prototype,R=S.hasOwnProperty;function T(A){var k=this.__data__;if(_){var M=k[A];return M===v?void 0:M}return R.call(k,A)?k[A]:void 0}return _hashGet$1=T,_hashGet$1}var _hashHas$1,hasRequired_hashHas$1;function require_hashHas$1(){if(hasRequired_hashHas$1)return _hashHas$1;hasRequired_hashHas$1=1;var _=require_nativeCreate$1(),v=Object.prototype,S=v.hasOwnProperty;function R(T){var A=this.__data__;return _?A[T]!==void 0:S.call(A,T)}return _hashHas$1=R,_hashHas$1}var _hashSet$1,hasRequired_hashSet$1;function require_hashSet$1(){if(hasRequired_hashSet$1)return _hashSet$1;hasRequired_hashSet$1=1;var _=require_nativeCreate$1(),v="__lodash_hash_undefined__";function S(R,T){var A=this.__data__;return this.size+=this.has(R)?0:1,A[R]=_&&T===void 0?v:T,this}return _hashSet$1=S,_hashSet$1}var _Hash$1,hasRequired_Hash$1;function require_Hash$1(){if(hasRequired_Hash$1)return _Hash$1;hasRequired_Hash$1=1;var _=require_hashClear$1(),v=require_hashDelete$1(),S=require_hashGet$1(),R=require_hashHas$1(),T=require_hashSet$1();function A(k){var M=-1,P=k==null?0:k.length;for(this.clear();++M<P;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_Hash$1=A,_Hash$1}var _listCacheClear$1,hasRequired_listCacheClear$1;function require_listCacheClear$1(){if(hasRequired_listCacheClear$1)return _listCacheClear$1;hasRequired_listCacheClear$1=1;function _(){this.__data__=[],this.size=0}return _listCacheClear$1=_,_listCacheClear$1}var eq_1$1,hasRequiredEq$1;function requireEq$1(){if(hasRequiredEq$1)return eq_1$1;hasRequiredEq$1=1;function _(v,S){return v===S||v!==v&&S!==S}return eq_1$1=_,eq_1$1}var _assocIndexOf$1,hasRequired_assocIndexOf$1;function require_assocIndexOf$1(){if(hasRequired_assocIndexOf$1)return _assocIndexOf$1;hasRequired_assocIndexOf$1=1;var _=requireEq$1();function v(S,R){for(var T=S.length;T--;)if(_(S[T][0],R))return T;return-1}return _assocIndexOf$1=v,_assocIndexOf$1}var _listCacheDelete$1,hasRequired_listCacheDelete$1;function require_listCacheDelete$1(){if(hasRequired_listCacheDelete$1)return _listCacheDelete$1;hasRequired_listCacheDelete$1=1;var _=require_assocIndexOf$1(),v=Array.prototype,S=v.splice;function R(T){var A=this.__data__,k=_(A,T);if(k<0)return!1;var M=A.length-1;return k==M?A.pop():S.call(A,k,1),--this.size,!0}return _listCacheDelete$1=R,_listCacheDelete$1}var _listCacheGet$1,hasRequired_listCacheGet$1;function require_listCacheGet$1(){if(hasRequired_listCacheGet$1)return _listCacheGet$1;hasRequired_listCacheGet$1=1;var _=require_assocIndexOf$1();function v(S){var R=this.__data__,T=_(R,S);return T<0?void 0:R[T][1]}return _listCacheGet$1=v,_listCacheGet$1}var _listCacheHas$1,hasRequired_listCacheHas$1;function require_listCacheHas$1(){if(hasRequired_listCacheHas$1)return _listCacheHas$1;hasRequired_listCacheHas$1=1;var _=require_assocIndexOf$1();function v(S){return _(this.__data__,S)>-1}return _listCacheHas$1=v,_listCacheHas$1}var _listCacheSet$1,hasRequired_listCacheSet$1;function require_listCacheSet$1(){if(hasRequired_listCacheSet$1)return _listCacheSet$1;hasRequired_listCacheSet$1=1;var _=require_assocIndexOf$1();function v(S,R){var T=this.__data__,A=_(T,S);return A<0?(++this.size,T.push([S,R])):T[A][1]=R,this}return _listCacheSet$1=v,_listCacheSet$1}var _ListCache$1,hasRequired_ListCache$1;function require_ListCache$1(){if(hasRequired_ListCache$1)return _ListCache$1;hasRequired_ListCache$1=1;var _=require_listCacheClear$1(),v=require_listCacheDelete$1(),S=require_listCacheGet$1(),R=require_listCacheHas$1(),T=require_listCacheSet$1();function A(k){var M=-1,P=k==null?0:k.length;for(this.clear();++M<P;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_ListCache$1=A,_ListCache$1}var _Map$1,hasRequired_Map$1;function require_Map$1(){if(hasRequired_Map$1)return _Map$1;hasRequired_Map$1=1;var _=require_getNative$1(),v=require_root$1(),S=_(v,"Map");return _Map$1=S,_Map$1}var _mapCacheClear$1,hasRequired_mapCacheClear$1;function require_mapCacheClear$1(){if(hasRequired_mapCacheClear$1)return _mapCacheClear$1;hasRequired_mapCacheClear$1=1;var _=require_Hash$1(),v=require_ListCache$1(),S=require_Map$1();function R(){this.size=0,this.__data__={hash:new _,map:new(S||v),string:new _}}return _mapCacheClear$1=R,_mapCacheClear$1}var _isKeyable$1,hasRequired_isKeyable$1;function require_isKeyable$1(){if(hasRequired_isKeyable$1)return _isKeyable$1;hasRequired_isKeyable$1=1;function _(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null}return _isKeyable$1=_,_isKeyable$1}var _getMapData$1,hasRequired_getMapData$1;function require_getMapData$1(){if(hasRequired_getMapData$1)return _getMapData$1;hasRequired_getMapData$1=1;var _=require_isKeyable$1();function v(S,R){var T=S.__data__;return _(R)?T[typeof R=="string"?"string":"hash"]:T.map}return _getMapData$1=v,_getMapData$1}var _mapCacheDelete$1,hasRequired_mapCacheDelete$1;function require_mapCacheDelete$1(){if(hasRequired_mapCacheDelete$1)return _mapCacheDelete$1;hasRequired_mapCacheDelete$1=1;var _=require_getMapData$1();function v(S){var R=_(this,S).delete(S);return this.size-=R?1:0,R}return _mapCacheDelete$1=v,_mapCacheDelete$1}var _mapCacheGet$1,hasRequired_mapCacheGet$1;function require_mapCacheGet$1(){if(hasRequired_mapCacheGet$1)return _mapCacheGet$1;hasRequired_mapCacheGet$1=1;var _=require_getMapData$1();function v(S){return _(this,S).get(S)}return _mapCacheGet$1=v,_mapCacheGet$1}var _mapCacheHas$1,hasRequired_mapCacheHas$1;function require_mapCacheHas$1(){if(hasRequired_mapCacheHas$1)return _mapCacheHas$1;hasRequired_mapCacheHas$1=1;var _=require_getMapData$1();function v(S){return _(this,S).has(S)}return _mapCacheHas$1=v,_mapCacheHas$1}var _mapCacheSet$1,hasRequired_mapCacheSet$1;function require_mapCacheSet$1(){if(hasRequired_mapCacheSet$1)return _mapCacheSet$1;hasRequired_mapCacheSet$1=1;var _=require_getMapData$1();function v(S,R){var T=_(this,S),A=T.size;return T.set(S,R),this.size+=T.size==A?0:1,this}return _mapCacheSet$1=v,_mapCacheSet$1}var _MapCache$1,hasRequired_MapCache$1;function require_MapCache$1(){if(hasRequired_MapCache$1)return _MapCache$1;hasRequired_MapCache$1=1;var _=require_mapCacheClear$1(),v=require_mapCacheDelete$1(),S=require_mapCacheGet$1(),R=require_mapCacheHas$1(),T=require_mapCacheSet$1();function A(k){var M=-1,P=k==null?0:k.length;for(this.clear();++M<P;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_MapCache$1=A,_MapCache$1}var memoize_1$1,hasRequiredMemoize$1;function requireMemoize$1(){if(hasRequiredMemoize$1)return memoize_1$1;hasRequiredMemoize$1=1;var _=require_MapCache$1(),v="Expected a function";function S(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(v);var A=function(){var k=arguments,M=T?T.apply(this,k):k[0],P=A.cache;if(P.has(M))return P.get(M);var D=R.apply(this,k);return A.cache=P.set(M,D)||P,D};return A.cache=new(S.Cache||_),A}return S.Cache=_,memoize_1$1=S,memoize_1$1}var _memoizeCapped$1,hasRequired_memoizeCapped$1;function require_memoizeCapped$1(){if(hasRequired_memoizeCapped$1)return _memoizeCapped$1;hasRequired_memoizeCapped$1=1;var _=requireMemoize$1(),v=500;function S(R){var T=_(R,function(k){return A.size===v&&A.clear(),k}),A=T.cache;return T}return _memoizeCapped$1=S,_memoizeCapped$1}var _stringToPath$1,hasRequired_stringToPath$1;function require_stringToPath$1(){if(hasRequired_stringToPath$1)return _stringToPath$1;hasRequired_stringToPath$1=1;var _=require_memoizeCapped$1(),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,R=_(function(T){var A=[];return T.charCodeAt(0)===46&&A.push(""),T.replace(v,function(k,M,P,D){A.push(P?D.replace(S,"$1"):M||k)}),A});return _stringToPath$1=R,_stringToPath$1}var _arrayMap$1,hasRequired_arrayMap$1;function require_arrayMap$1(){if(hasRequired_arrayMap$1)return _arrayMap$1;hasRequired_arrayMap$1=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=Array(T);++R<T;)A[R]=S(v[R],R,v);return A}return _arrayMap$1=_,_arrayMap$1}var _baseToString$1,hasRequired_baseToString$1;function require_baseToString$1(){if(hasRequired_baseToString$1)return _baseToString$1;hasRequired_baseToString$1=1;var _=require_Symbol$1(),v=require_arrayMap$1(),S=requireIsArray$1(),R=requireIsSymbol$1(),T=_?_.prototype:void 0,A=T?T.toString:void 0;function k(M){if(typeof M=="string")return M;if(S(M))return v(M,k)+"";if(R(M))return A?A.call(M):"";var P=M+"";return P=="0"&&1/M==-1/0?"-0":P}return _baseToString$1=k,_baseToString$1}var toString_1$1,hasRequiredToString$1;function requireToString$1(){if(hasRequiredToString$1)return toString_1$1;hasRequiredToString$1=1;var _=require_baseToString$1();function v(S){return S==null?"":_(S)}return toString_1$1=v,toString_1$1}var _castPath$1,hasRequired_castPath$1;function require_castPath$1(){if(hasRequired_castPath$1)return _castPath$1;hasRequired_castPath$1=1;var _=requireIsArray$1(),v=require_isKey$1(),S=require_stringToPath$1(),R=requireToString$1();function T(A,k){return _(A)?A:v(A,k)?[A]:S(R(A))}return _castPath$1=T,_castPath$1}var _toKey$1,hasRequired_toKey$1;function require_toKey$1(){if(hasRequired_toKey$1)return _toKey$1;hasRequired_toKey$1=1;var _=requireIsSymbol$1();function v(S){if(typeof S=="string"||_(S))return S;var R=S+"";return R=="0"&&1/S==-1/0?"-0":R}return _toKey$1=v,_toKey$1}var _baseGet$1,hasRequired_baseGet$1;function require_baseGet$1(){if(hasRequired_baseGet$1)return _baseGet$1;hasRequired_baseGet$1=1;var _=require_castPath$1(),v=require_toKey$1();function S(R,T){T=_(T,R);for(var A=0,k=T.length;R!=null&&A<k;)R=R[v(T[A++])];return A&&A==k?R:void 0}return _baseGet$1=S,_baseGet$1}var get_1$1,hasRequiredGet$1;function requireGet$1(){if(hasRequiredGet$1)return get_1$1;hasRequiredGet$1=1;var _=require_baseGet$1();function v(S,R,T){var A=S==null?void 0:_(S,R);return A===void 0?T:A}return get_1$1=v,get_1$1}var getExports=requireGet$1(),get$1=getDefaultExportFromCjs(getExports),_defineProperty$2,hasRequired_defineProperty$1;function require_defineProperty$1(){if(hasRequired_defineProperty$1)return _defineProperty$2;hasRequired_defineProperty$1=1;var _=require_getNative$1(),v=(function(){try{var S=_(Object,"defineProperty");return S({},"",{}),S}catch{}})();return _defineProperty$2=v,_defineProperty$2}var _baseAssignValue$1,hasRequired_baseAssignValue$1;function require_baseAssignValue$1(){if(hasRequired_baseAssignValue$1)return _baseAssignValue$1;hasRequired_baseAssignValue$1=1;var _=require_defineProperty$1();function v(S,R,T){R=="__proto__"&&_?_(S,R,{configurable:!0,enumerable:!0,value:T,writable:!0}):S[R]=T}return _baseAssignValue$1=v,_baseAssignValue$1}var _assignValue$1,hasRequired_assignValue$1;function require_assignValue$1(){if(hasRequired_assignValue$1)return _assignValue$1;hasRequired_assignValue$1=1;var _=require_baseAssignValue$1(),v=requireEq$1(),S=Object.prototype,R=S.hasOwnProperty;function T(A,k,M){var P=A[k];(!(R.call(A,k)&&v(P,M))||M===void 0&&!(k in A))&&_(A,k,M)}return _assignValue$1=T,_assignValue$1}var _isIndex$1,hasRequired_isIndex$1;function require_isIndex$1(){if(hasRequired_isIndex$1)return _isIndex$1;hasRequired_isIndex$1=1;var _=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function S(R,T){var A=typeof R;return T=T??_,!!T&&(A=="number"||A!="symbol"&&v.test(R))&&R>-1&&R%1==0&&R<T}return _isIndex$1=S,_isIndex$1}var _baseSet$1,hasRequired_baseSet$1;function require_baseSet$1(){if(hasRequired_baseSet$1)return _baseSet$1;hasRequired_baseSet$1=1;var _=require_assignValue$1(),v=require_castPath$1(),S=require_isIndex$1(),R=requireIsObject$1(),T=require_toKey$1();function A(k,M,P,D){if(!R(k))return k;M=v(M,k);for(var L=-1,q=M.length,B=q-1,F=k;F!=null&&++L<q;){var j=T(M[L]),z=P;if(j==="__proto__"||j==="constructor"||j==="prototype")return k;if(L!=B){var V=F[j];z=D?D(V,j,F):void 0,z===void 0&&(z=R(V)?V:S(M[L+1])?[]:{})}_(F,j,z),F=F[j]}return k}return _baseSet$1=A,_baseSet$1}var set_1,hasRequiredSet;function requireSet(){if(hasRequiredSet)return set_1;hasRequiredSet=1;var _=require_baseSet$1();function v(S,R,T){return S==null?S:_(S,R,T)}return set_1=v,set_1}var setExports=requireSet(),set=getDefaultExportFromCjs(setExports),_copyArray$1,hasRequired_copyArray$1;function require_copyArray$1(){if(hasRequired_copyArray$1)return _copyArray$1;hasRequired_copyArray$1=1;function _(v,S){var R=-1,T=v.length;for(S||(S=Array(T));++R<T;)S[R]=v[R];return S}return _copyArray$1=_,_copyArray$1}var toPath_1,hasRequiredToPath;function requireToPath(){if(hasRequiredToPath)return toPath_1;hasRequiredToPath=1;var _=require_arrayMap$1(),v=require_copyArray$1(),S=requireIsArray$1(),R=requireIsSymbol$1(),T=require_stringToPath$1(),A=require_toKey$1(),k=requireToString$1();function M(P){return S(P)?_(P,A):R(P)?[P]:v(T(k(P)))}return toPath_1=M,toPath_1}var toPathExports=requireToPath(),toPath=getDefaultExportFromCjs(toPathExports),define$2={data:function(v){var S={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(T){},beforeSet:function(T,A){},onSet:function(T){},canSet:function(T){return!0}};return v=extend({},S,v),function(T,A){var k=v,M=this,P=M.length!==void 0,D=P?M:[M],L=P?M[0]:M;if(string$1(T)){var q=T.indexOf(".")!==-1,B=q&&toPath(T);if(k.allowGetting&&A===void 0){var F;return L&&(k.beforeGet(L),B&&L._private[k.field][T]===void 0?F=get$1(L._private[k.field],B):F=L._private[k.field][T]),F}else if(k.allowSetting&&A!==void 0){var j=!k.immutableKeys[T];if(j){var z=_defineProperty$1({},T,A);k.beforeSet(M,z);for(var V=0,G=D.length;V<G;V++){var W=D[V];k.canSet(W)&&(B&&L._private[k.field][T]===void 0?set(W._private[k.field],B,A):W._private[k.field][T]=A)}k.updateStyle&&M.updateStyle(),k.onSet(M),k.settingTriggersEvent&&M[k.triggerFnName](k.settingEvent)}}}else if(k.allowSetting&&plainObject(T)){var Y=T,X,ee,re=Object.keys(Y);k.beforeSet(M,Y);for(var Q=0;Q<re.length;Q++){X=re[Q],ee=Y[X];var ne=!k.immutableKeys[X];if(ne)for(var ae=0;ae<D.length;ae++){var oe=D[ae];k.canSet(oe)&&(oe._private[k.field][X]=ee)}}k.updateStyle&&M.updateStyle(),k.onSet(M),k.settingTriggersEvent&&M[k.triggerFnName](k.settingEvent)}else if(k.allowBinding&&fn$6(T)){var se=T;M.on(k.bindingEvent,se)}else if(k.allowGetting&&T===void 0){var ce;return L&&(k.beforeGet(L),ce=L._private[k.field]),ce}return M}},removeData:function(v){var S={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return v=extend({},S,v),function(T){var A=v,k=this,M=k.length!==void 0,P=M?k:[k];if(string$1(T)){for(var D=T.split(/\s+/),L=D.length,q=0;q<L;q++){var B=D[q];if(!emptyString(B)){var F=!A.immutableKeys[B];if(F)for(var j=0,z=P.length;j<z;j++)P[j]._private[A.field][B]=void 0}}A.triggerEvent&&k[A.triggerFnName](A.event)}else if(T===void 0){for(var V=0,G=P.length;V<G;V++)for(var W=P[V]._private[A.field],Y=Object.keys(W),X=0;X<Y.length;X++){var ee=Y[X],re=!A.immutableKeys[ee];re&&(W[ee]=void 0)}A.triggerEvent&&k[A.triggerFnName](A.event)}return k}}},define$1={eventAliasesOn:function(v){var S=v;S.addListener=S.listen=S.bind=S.on,S.unlisten=S.unbind=S.off=S.removeListener,S.trigger=S.emit,S.pon=S.promiseOn=function(R,T){var A=this,k=Array.prototype.slice.call(arguments,0);return new Promise$1(function(M,P){var D=function(F){A.off.apply(A,q),M(F)},L=k.concat([D]),q=L.concat([]);A.on.apply(A,L)})}}},define={};[define$3,define$2,define$1].forEach(function(_){extend(define,_)});var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function(v){var S=this;if(v===void 0){var R=[];return S[0]._private.classes.forEach(function(j){return R.push(j)}),R}else array(v)||(v=(v||"").match(/\S+/g)||[]);for(var T=[],A=new Set$1(v),k=0;k<S.length;k++){for(var M=S[k],P=M._private,D=P.classes,L=!1,q=0;q<v.length;q++){var B=v[q],F=D.has(B);if(!F){L=!0;break}}L||(L=D.size!==v.length),L&&(P.classes=A,T.push(M))}return T.length>0&&this.spawn(T).updateStyle().emit("class"),S},addClass:function(v){return this.toggleClass(v,!0)},hasClass:function(v){var S=this[0];return S!=null&&S._private.classes.has(v)},toggleClass:function(v,S){array(v)||(v=v.match(/\S+/g)||[]);for(var R=this,T=S===void 0,A=[],k=0,M=R.length;k<M;k++)for(var P=R[k],D=P._private.classes,L=!1,q=0;q<v.length;q++){var B=v[q],F=D.has(B),j=!1;S||T&&!F?(D.add(B),j=!0):(!S||T&&F)&&(D.delete(B),j=!0),!L&&j&&(A.push(P),L=!0)}return A.length>0&&this.spawn(A).updateStyle().emit("class"),R},removeClass:function(v){return this.toggleClass(v,!1)},flashClass:function(v,S){var R=this;if(S==null)S=250;else if(S===0)return R;return R.addClass(v),setTimeout(function(){R.removeClass(v)},S),R}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:number$2,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+";tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+";tokens.value=tokens.string+"|"+tokens.number;tokens.id=tokens.variable;(function(){var _,v,S;for(_=tokens.comparatorOp.split("|"),S=0;S<_.length;S++)v=_[S],tokens.comparatorOp+="|@"+v;for(_=tokens.comparatorOp.split("|"),S=0;S<_.length;S++)v=_[S],!(v.indexOf("!")>=0)&&v!=="="&&(tokens.comparatorOp+="|\\!"+v)})();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(v){return v.selected()}},{selector:":unselected",matches:function(v){return!v.selected()}},{selector:":selectable",matches:function(v){return v.selectable()}},{selector:":unselectable",matches:function(v){return!v.selectable()}},{selector:":locked",matches:function(v){return v.locked()}},{selector:":unlocked",matches:function(v){return!v.locked()}},{selector:":visible",matches:function(v){return v.visible()}},{selector:":hidden",matches:function(v){return!v.visible()}},{selector:":transparent",matches:function(v){return v.transparent()}},{selector:":grabbed",matches:function(v){return v.grabbed()}},{selector:":free",matches:function(v){return!v.grabbed()}},{selector:":removed",matches:function(v){return v.removed()}},{selector:":inside",matches:function(v){return!v.removed()}},{selector:":grabbable",matches:function(v){return v.grabbable()}},{selector:":ungrabbable",matches:function(v){return!v.grabbable()}},{selector:":animated",matches:function(v){return v.animated()}},{selector:":unanimated",matches:function(v){return!v.animated()}},{selector:":parent",matches:function(v){return v.isParent()}},{selector:":childless",matches:function(v){return v.isChildless()}},{selector:":child",matches:function(v){return v.isChild()}},{selector:":orphan",matches:function(v){return v.isOrphan()}},{selector:":nonorphan",matches:function(v){return v.isChild()}},{selector:":compound",matches:function(v){return v.isNode()?v.isParent():v.source().isParent()||v.target().isParent()}},{selector:":loop",matches:function(v){return v.isLoop()}},{selector:":simple",matches:function(v){return v.isSimple()}},{selector:":active",matches:function(v){return v.active()}},{selector:":inactive",matches:function(v){return!v.active()}},{selector:":backgrounding",matches:function(v){return v.backgrounding()}},{selector:":nonbackgrounding",matches:function(v){return!v.backgrounding()}}].sort(function(_,v){return descending(_.selector,v.selector)}),lookup=(function(){for(var _={},v,S=0;S<stateSelectors.length;S++)v=stateSelectors[S],_[v.selector]=v.matches;return _})(),stateSelectorMatches=function(v,S){return lookup[v](S)},stateSelectorRegex="("+stateSelectors.map(function(_){return _.selector}).join("|")+")",cleanMetaChars=function(v){return v.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(S,R){return R})},replaceLastQuery=function(v,S,R){v[v.length-1]=R},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.GROUP,value:A==="*"?A:A+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.STATE,value:A})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.ID,value:cleanMetaChars(A)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.CLASS,value:cleanMetaChars(A)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,1),A=T[0];S.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(A)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,3),A=T[0],k=T[1],M=T[2],P=new RegExp("^"+tokens.string+"$").exec(M)!=null;P?M=M.substring(1,M.length-1):M=parseFloat(M),S.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(A),operator:k,value:M})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(v,S,R){var T=_slicedToArray(R,2),A=T[0],k=T[1];S.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(k),operator:A})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(v,S,R){var T=_slicedToArray(R,3),A=T[0],k=T[1],M=T[2];S.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(A),operator:k,value:parseFloat(M)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(v,S){var R=v.currentSubject,T=v.edgeCount,A=v.compoundCount,k=v[v.length-1];R!=null&&(k.subject=R,v.currentSubject=null),k.edgeCount=T,k.compoundCount=A,v.edgeCount=0,v.compoundCount=0;var M=v[v.length++]=newQuery();return M}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=S,A=newQuery();return R.checks.push({type:Type.DIRECTED_EDGE,source:T,target:A}),replaceLastQuery(v,S,R),v.edgeCount++,A}else{var k=newQuery(),M=S,P=newQuery();return k.checks.push({type:Type.NODE_SOURCE,source:M,target:P}),replaceLastQuery(v,S,k),v.edgeCount++,P}}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=S,A=newQuery();return R.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[T,A]}),replaceLastQuery(v,S,R),v.edgeCount++,A}else{var k=newQuery(),M=S,P=newQuery();return k.checks.push({type:Type.NODE_NEIGHBOR,node:M,neighbor:P}),replaceLastQuery(v,S,k),P}}},{name:"child",separator:!0,regex:tokens.child,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=newQuery(),A=v[v.length-1];return R.checks.push({type:Type.CHILD,parent:A,child:T}),replaceLastQuery(v,S,R),v.compoundCount++,T}else if(v.currentSubject===S){var k=newQuery(),M=v[v.length-1],P=newQuery(),D=newQuery(),L=newQuery(),q=newQuery();return k.checks.push({type:Type.COMPOUND_SPLIT,left:M,right:P,subject:D}),D.checks=S.checks,S.checks=[{type:Type.TRUE}],q.checks.push({type:Type.TRUE}),P.checks.push({type:Type.PARENT,parent:q,child:L}),replaceLastQuery(v,M,k),v.currentSubject=D,v.compoundCount++,L}else{var B=newQuery(),F=newQuery(),j=[{type:Type.PARENT,parent:B,child:F}];return B.checks=S.checks,S.checks=j,v.compoundCount++,F}}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(v,S){if(v.currentSubject==null){var R=newQuery(),T=newQuery(),A=v[v.length-1];return R.checks.push({type:Type.DESCENDANT,ancestor:A,descendant:T}),replaceLastQuery(v,S,R),v.compoundCount++,T}else if(v.currentSubject===S){var k=newQuery(),M=v[v.length-1],P=newQuery(),D=newQuery(),L=newQuery(),q=newQuery();return k.checks.push({type:Type.COMPOUND_SPLIT,left:M,right:P,subject:D}),D.checks=S.checks,S.checks=[{type:Type.TRUE}],q.checks.push({type:Type.TRUE}),P.checks.push({type:Type.ANCESTOR,ancestor:q,descendant:L}),replaceLastQuery(v,M,k),v.currentSubject=D,v.compoundCount++,L}else{var B=newQuery(),F=newQuery(),j=[{type:Type.ANCESTOR,ancestor:B,descendant:F}];return B.checks=S.checks,S.checks=j,v.compoundCount++,F}}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(v,S){if(v.currentSubject!=null&&v.currentSubject!==S)return warn$1("Redefinition of subject in selector `"+v.toString()+"`"),!1;v.currentSubject=S;var R=v[v.length-1],T=R.checks[0],A=T==null?null:T.type;A===Type.DIRECTED_EDGE?T.type=Type.NODE_TARGET:A===Type.UNDIRECTED_EDGE&&(T.type=Type.NODE_NEIGHBOR,T.node=T.nodes[1],T.neighbor=T.nodes[0],T.nodes=null)}}];exprs.forEach(function(_){return _.regexObj=new RegExp("^"+_.regex)});var consumeExpr=function(v){for(var S,R,T,A=0;A<exprs.length;A++){var k=exprs[A],M=k.name,P=v.match(k.regexObj);if(P!=null){R=P,S=k,T=M;var D=P[0];v=v.substring(D.length);break}}return{expr:S,match:R,name:T,remaining:v}},consumeWhitespace=function(v){var S=v.match(/^\s+/);if(S){var R=S[0];v=v.substring(R.length)}return v},parse$1=function(v){var S=this,R=S.inputText=v,T=S[0]=newQuery();for(S.length=1,R=consumeWhitespace(R);;){var A=consumeExpr(R);if(A.expr==null)return warn$1("The selector `"+v+"`is invalid"),!1;var k=A.match.slice(1),M=A.expr.populate(S,T,k);if(M===!1)return!1;if(M!=null&&(T=M),R=A.remaining,R.match(/^\s*$/))break}var P=S[S.length-1];S.currentSubject!=null&&(P.subject=S.currentSubject),P.edgeCount=S.edgeCount,P.compoundCount=S.compoundCount;for(var D=0;D<S.length;D++){var L=S[D];if(L.compoundCount>0&&L.edgeCount>0)return warn$1("The selector `"+v+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(L.edgeCount>1)return warn$1("The selector `"+v+"` is invalid because it uses multiple edge selectors"),!1;L.edgeCount===1&&warn$1("The selector `"+v+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(this.toStringCache!=null)return this.toStringCache;for(var v=function(L){return L??""},S=function(L){return string$1(L)?'"'+L+'"':v(L)},R=function(L){return" "+L+" "},T=function(L,q){var B=L.type,F=L.value;switch(B){case Type.GROUP:{var j=v(F);return j.substring(0,j.length-1)}case Type.DATA_COMPARE:{var z=L.field,V=L.operator;return"["+z+R(v(V))+S(F)+"]"}case Type.DATA_BOOL:{var G=L.operator,W=L.field;return"["+v(G)+W+"]"}case Type.DATA_EXIST:{var Y=L.field;return"["+Y+"]"}case Type.META_COMPARE:{var X=L.operator,ee=L.field;return"[["+ee+R(v(X))+S(F)+"]]"}case Type.STATE:return F;case Type.ID:return"#"+F;case Type.CLASS:return"."+F;case Type.PARENT:case Type.CHILD:return A(L.parent,q)+R(">")+A(L.child,q);case Type.ANCESTOR:case Type.DESCENDANT:return A(L.ancestor,q)+" "+A(L.descendant,q);case Type.COMPOUND_SPLIT:{var re=A(L.left,q),Q=A(L.subject,q),ne=A(L.right,q);return re+(re.length>0?" ":"")+Q+ne}case Type.TRUE:return""}},A=function(L,q){return L.checks.reduce(function(B,F,j){return B+(q===L&&j===0?"$":"")+T(F,q)},"")},k="",M=0;M<this.length;M++){var P=this[M];k+=A(P,P.subject),this.length>1&&M<this.length-1&&(k+=", ")}return this.toStringCache=k,k},parse$1$1={parse:parse$1,toString},valCmp=function(v,S,R){var T,A=string$1(v),k=number$1(v),M=string$1(R),P,D,L=!1,q=!1,B=!1;switch(S.indexOf("!")>=0&&(S=S.replace("!",""),q=!0),S.indexOf("@")>=0&&(S=S.replace("@",""),L=!0),(A||M||L)&&(P=!A&&!k?"":""+v,D=""+R),L&&(v=P=P.toLowerCase(),R=D=D.toLowerCase()),S){case"*=":T=P.indexOf(D)>=0;break;case"$=":T=P.indexOf(D,P.length-D.length)>=0;break;case"^=":T=P.indexOf(D)===0;break;case"=":T=v===R;break;case">":B=!0,T=v>R;break;case">=":B=!0,T=v>=R;break;case"<":B=!0,T=v<R;break;case"<=":B=!0,T=v<=R;break;default:T=!1;break}return q&&(v!=null||!B)&&(T=!T),T},boolCmp=function(v,S){switch(S){case"?":return!!v;case"!":return!v;case"^":return v===void 0}},existCmp=function(v){return v!==void 0},data$1=function(v,S){return v.data(S)},meta$1=function(v,S){return v[S]()},match=[],matches$1=function(v,S){return v.checks.every(function(R){return match[R.type](R,S)})};match[Type.GROUP]=function(_,v){var S=_.value;return S==="*"||S===v.group()};match[Type.STATE]=function(_,v){var S=_.value;return stateSelectorMatches(S,v)};match[Type.ID]=function(_,v){var S=_.value;return v.id()===S};match[Type.CLASS]=function(_,v){var S=_.value;return v.hasClass(S)};match[Type.META_COMPARE]=function(_,v){var S=_.field,R=_.operator,T=_.value;return valCmp(meta$1(v,S),R,T)};match[Type.DATA_COMPARE]=function(_,v){var S=_.field,R=_.operator,T=_.value;return valCmp(data$1(v,S),R,T)};match[Type.DATA_BOOL]=function(_,v){var S=_.field,R=_.operator;return boolCmp(data$1(v,S),R)};match[Type.DATA_EXIST]=function(_,v){var S=_.field;return _.operator,existCmp(data$1(v,S))};match[Type.UNDIRECTED_EDGE]=function(_,v){var S=_.nodes[0],R=_.nodes[1],T=v.source(),A=v.target();return matches$1(S,T)&&matches$1(R,A)||matches$1(R,T)&&matches$1(S,A)};match[Type.NODE_NEIGHBOR]=function(_,v){return matches$1(_.node,v)&&v.neighborhood().some(function(S){return S.isNode()&&matches$1(_.neighbor,S)})};match[Type.DIRECTED_EDGE]=function(_,v){return matches$1(_.source,v.source())&&matches$1(_.target,v.target())};match[Type.NODE_SOURCE]=function(_,v){return matches$1(_.source,v)&&v.outgoers().some(function(S){return S.isNode()&&matches$1(_.target,S)})};match[Type.NODE_TARGET]=function(_,v){return matches$1(_.target,v)&&v.incomers().some(function(S){return S.isNode()&&matches$1(_.source,S)})};match[Type.CHILD]=function(_,v){return matches$1(_.child,v)&&matches$1(_.parent,v.parent())};match[Type.PARENT]=function(_,v){return matches$1(_.parent,v)&&v.children().some(function(S){return matches$1(_.child,S)})};match[Type.DESCENDANT]=function(_,v){return matches$1(_.descendant,v)&&v.ancestors().some(function(S){return matches$1(_.ancestor,S)})};match[Type.ANCESTOR]=function(_,v){return matches$1(_.ancestor,v)&&v.descendants().some(function(S){return matches$1(_.descendant,S)})};match[Type.COMPOUND_SPLIT]=function(_,v){return matches$1(_.subject,v)&&matches$1(_.left,v)&&matches$1(_.right,v)};match[Type.TRUE]=function(){return!0};match[Type.COLLECTION]=function(_,v){var S=_.value;return S.has(v)};match[Type.FILTER]=function(_,v){var S=_.value;return S(v)};var filter=function(v){var S=this;if(S.length===1&&S[0].checks.length===1&&S[0].checks[0].type===Type.ID)return v.getElementById(S[0].checks[0].value).collection();var R=function(A){for(var k=0;k<S.length;k++){var M=S[k];if(matches$1(M,A))return!0}return!1};return S.text()==null&&(R=function(){return!0}),v.filter(R)},matches=function(v){for(var S=this,R=0;R<S.length;R++){var T=S[R];if(matches$1(T,v))return!0}return!1},matching={matches,filter},Selector=function(v){this.inputText=v,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,v==null||string$1(v)&&v.match(/^\s*$/)||(elementOrCollection(v)?this.addQuery({checks:[{type:Type.COLLECTION,value:v.collection()}]}):fn$6(v)?this.addQuery({checks:[{type:Type.FILTER,value:v}]}):string$1(v)?this.parse(v)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1$1,matching].forEach(function(_){return extend(selfn,_)});selfn.text=function(){return this.inputText};selfn.size=function(){return this.length};selfn.eq=function(_){return this[_]};selfn.sameText=function(_){return!this.invalid&&!_.invalid&&this.text()===_.text()};selfn.addQuery=function(_){this[this.length++]=_};selfn.selector=selfn.toString;var elesfn$g={allAre:function(v){var S=new Selector(v);return this.every(function(R){return S.matches(R)})},is:function(v){var S=new Selector(v);return this.some(function(R){return S.matches(R)})},some:function(v,S){for(var R=0;R<this.length;R++){var T=S?v.apply(S,[this[R],R,this]):v(this[R],R,this);if(T)return!0}return!1},every:function(v,S){for(var R=0;R<this.length;R++){var T=S?v.apply(S,[this[R],R,this]):v(this[R],R,this);if(!T)return!1}return!0},same:function(v){if(this===v)return!0;v=this.cy().collection(v);var S=this.length,R=v.length;return S!==R?!1:S===1?this[0]===v[0]:this.every(function(T){return v.hasElementWithId(T.id())})},anySame:function(v){return v=this.cy().collection(v),this.some(function(S){return v.hasElementWithId(S.id())})},allAreNeighbors:function(v){v=this.cy().collection(v);var S=this.neighborhood();return v.every(function(R){return S.hasElementWithId(R.id())})},contains:function(v){v=this.cy().collection(v);var S=this;return v.every(function(R){return S.hasElementWithId(R.id())})}};elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors;elesfn$g.has=elesfn$g.contains;elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var cache=function(v,S){return function(T,A,k,M){var P=T,D=this,L;if(P==null?L="":elementOrCollection(P)&&P.length===1&&(L=P.id()),D.length===1&&L){var q=D[0]._private,B=q.traversalCache=q.traversalCache||{},F=B[S]=B[S]||[],j=hashString(L),z=F[j];return z||(F[j]=v.call(D,T,A,k,M))}else return v.call(D,T,A,k,M)}},elesfn$f={parent:function(v){var S=[];if(this.length===1){var R=this[0]._private.parent;if(R)return R}for(var T=0;T<this.length;T++){var A=this[T],k=A._private.parent;k&&S.push(k)}return this.spawn(S,!0).filter(v)},parents:function(v){for(var S=[],R=this.parent();R.nonempty();){for(var T=0;T<R.length;T++){var A=R[T];S.push(A)}R=R.parent()}return this.spawn(S,!0).filter(v)},commonAncestors:function(v){for(var S,R=0;R<this.length;R++){var T=this[R],A=T.parents();S=S||A,S=S.intersect(A)}return S.filter(v)},orphans:function(v){return this.stdFilter(function(S){return S.isOrphan()}).filter(v)},nonorphans:function(v){return this.stdFilter(function(S){return S.isChild()}).filter(v)},children:cache(function(_){for(var v=[],S=0;S<this.length;S++)for(var R=this[S],T=R._private.children,A=0;A<T.length;A++)v.push(T[A]);return this.spawn(v,!0).filter(_)},"children"),siblings:function(v){return this.parent().children().not(this).filter(v)},isParent:function(){var v=this[0];if(v)return v.isNode()&&v._private.children.length!==0},isChildless:function(){var v=this[0];if(v)return v.isNode()&&v._private.children.length===0},isChild:function(){var v=this[0];if(v)return v.isNode()&&v._private.parent!=null},isOrphan:function(){var v=this[0];if(v)return v.isNode()&&v._private.parent==null},descendants:function(v){var S=[];function R(T){for(var A=0;A<T.length;A++){var k=T[A];S.push(k),k.children().nonempty()&&R(k.children())}}return R(this.children()),this.spawn(S,!0).filter(v)}};function forEachCompound(_,v,S,R){for(var T=[],A=new Set$1,k=_.cy(),M=k.hasCompoundNodes(),P=0;P<_.length;P++){var D=_[P];S?T.push(D):M&&R(T,A,D)}for(;T.length>0;){var L=T.shift();v(L),A.add(L.id()),M&&R(T,A,L)}return _}function addChildren(_,v,S){if(S.isParent())for(var R=S._private.children,T=0;T<R.length;T++){var A=R[T];v.has(A.id())||_.push(A)}}elesfn$f.forEachDown=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addChildren)};function addParent(_,v,S){if(S.isChild()){var R=S._private.parent;v.has(R.id())||_.push(R)}}elesfn$f.forEachUp=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addParent)};function addParentAndChildren(_,v,S){addParent(_,v,S),addChildren(_,v,S)}elesfn$f.forEachUpAndDown=function(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,_,v,addParentAndChildren)};elesfn$f.ancestors=elesfn$f.parents;var fn$5,elesfn$e;fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var v=this[0];if(v)return v._private.data.id}};fn$5.attr=fn$5.data;fn$5.removeAttr=fn$5.removeData;var data=elesfn$e,elesfn$d={};function defineDegreeFunction(_){return function(v){var S=this;if(v===void 0&&(v=!0),S.length!==0)if(S.isNode()&&!S.removed()){for(var R=0,T=S[0],A=T._private.edges,k=0;k<A.length;k++){var M=A[k];!v&&M.isLoop()||(R+=_(T,M))}return R}else return}}extend(elesfn$d,{degree:defineDegreeFunction(function(_,v){return v.source().same(v.target())?2:1}),indegree:defineDegreeFunction(function(_,v){return v.target().same(_)?1:0}),outdegree:defineDegreeFunction(function(_,v){return v.source().same(_)?1:0})});function defineDegreeBoundsFunction(_,v){return function(S){for(var R,T=this.nodes(),A=0;A<T.length;A++){var k=T[A],M=k[_](S);M!==void 0&&(R===void 0||v(M,R))&&(R=M)}return R}}extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",function(_,v){return _<v}),maxDegree:defineDegreeBoundsFunction("degree",function(_,v){return _>v}),minIndegree:defineDegreeBoundsFunction("indegree",function(_,v){return _<v}),maxIndegree:defineDegreeBoundsFunction("indegree",function(_,v){return _>v}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(_,v){return _<v}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(_,v){return _>v})});extend(elesfn$d,{totalDegree:function(v){for(var S=0,R=this.nodes(),T=0;T<R.length;T++)S+=R[T].degree(v);return S}});var fn$4,elesfn$c,beforePositionSet=function(v,S,R){for(var T=0;T<v.length;T++){var A=v[T];if(!A.locked()){var k=A._private.position,M={x:S.x!=null?S.x-k.x:0,y:S.y!=null?S.y-k.y:0};A.isParent()&&!(M.x===0&&M.y===0)&&A.children().shift(M,R),A.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(v){v.updateCompoundBounds()},beforeSet:function(v,S){beforePositionSet(v,S,!1)},onSet:function(v){v.dirtyCompoundBoundsCache()},canSet:function(v){return!v.locked()}};fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(v,S){beforePositionSet(v,S,!0)},onSet:function(v){v.dirtyCompoundBoundsCache()}})),positions:function(v,S){if(plainObject(v))S?this.silentPosition(v):this.position(v);else if(fn$6(v)){var R=v,T=this.cy();T.startBatch();for(var A=0;A<this.length;A++){var k=this[A],M=void 0;(M=R(k,A))&&(S?k.silentPosition(M):k.position(M))}T.endBatch()}return this},silentPositions:function(v){return this.positions(v,!0)},shift:function(v,S,R){var T;if(plainObject(v)?(T={x:number$1(v.x)?v.x:0,y:number$1(v.y)?v.y:0},R=S):string$1(v)&&number$1(S)&&(T={x:0,y:0},T[v]=S),T!=null){var A=this.cy();A.startBatch();for(var k=0;k<this.length;k++){var M=this[k];if(!(A.hasCompoundNodes()&&M.isChild()&&M.ancestors().anySame(this))){var P=M.position(),D={x:P.x+T.x,y:P.y+T.y};R?M.silentPosition(D):M.position(D)}}A.endBatch()}return this},silentShift:function(v,S){return plainObject(v)?this.shift(v,!0):string$1(v)&&number$1(S)&&this.shift(v,S,!0),this},renderedPosition:function(v,S){var R=this[0],T=this.cy(),A=T.zoom(),k=T.pan(),M=plainObject(v)?v:void 0,P=M!==void 0||S!==void 0&&string$1(v);if(R&&R.isNode())if(P)for(var D=0;D<this.length;D++){var L=this[D];S!==void 0?L.position(v,(S-k[v])/A):M!==void 0&&L.position(renderedToModelPosition(M,A,k))}else{var q=R.position();return M=modelToRenderedPosition$1(q,A,k),v===void 0?M:M[v]}else if(!P)return;return this},relativePosition:function(v,S){var R=this[0],T=this.cy(),A=plainObject(v)?v:void 0,k=A!==void 0||S!==void 0&&string$1(v),M=T.hasCompoundNodes();if(R&&R.isNode())if(k)for(var P=0;P<this.length;P++){var D=this[P],L=M?D.parent():null,q=L&&L.length>0,B=q;q&&(L=L[0]);var F=B?L.position():{x:0,y:0};S!==void 0?D.position(v,S+F[v]):A!==void 0&&D.position({x:A.x+F.x,y:A.y+F.y})}else{var j=R.position(),z=M?R.parent():null,V=z&&z.length>0,G=V;V&&(z=z[0]);var W=G?z.position():{x:0,y:0};return A={x:j.x-W.x,y:j.y-W.y},v===void 0?A:A[v]}else if(!k)return;return this}};fn$4.modelPosition=fn$4.point=fn$4.position;fn$4.modelPositions=fn$4.points=fn$4.positions;fn$4.renderedPoint=fn$4.renderedPosition;fn$4.relativePoint=fn$4.relativePosition;var position=elesfn$c,fn$3,elesfn$b;fn$3=elesfn$b={};elesfn$b.renderedBoundingBox=function(_){var v=this.boundingBox(_),S=this.cy(),R=S.zoom(),T=S.pan(),A=v.x1*R+T.x,k=v.x2*R+T.x,M=v.y1*R+T.y,P=v.y2*R+T.y;return{x1:A,x2:k,y1:M,y2:P,w:k-A,h:P-M}};elesfn$b.dirtyCompoundBoundsCache=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.cy();return!v.styleEnabled()||!v.hasCompoundNodes()?this:(this.forEachUp(function(S){if(S.isParent()){var R=S._private;R.compoundBoundsClean=!1,R.bbCache=null,_||S.emitAndNotify("bounds")}}),this)};elesfn$b.updateCompoundBounds=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.cy();if(!v.styleEnabled()||!v.hasCompoundNodes())return this;if(!_&&v.batching())return this;function S(k){if(!k.isParent())return;var M=k._private,P=k.children(),D=k.pstyle("compound-sizing-wrt-labels").value==="include",L={width:{val:k.pstyle("min-width").pfValue,left:k.pstyle("min-width-bias-left"),right:k.pstyle("min-width-bias-right")},height:{val:k.pstyle("min-height").pfValue,top:k.pstyle("min-height-bias-top"),bottom:k.pstyle("min-height-bias-bottom")}},q=P.boundingBox({includeLabels:D,includeOverlays:!1,useCache:!1}),B=M.position;(q.w===0||q.h===0)&&(q={w:k.pstyle("width").pfValue,h:k.pstyle("height").pfValue},q.x1=B.x-q.w/2,q.x2=B.x+q.w/2,q.y1=B.y-q.h/2,q.y2=B.y+q.h/2);function F(ae,oe,se){var ce=0,de=0,ye=oe+se;return ae>0&&ye>0&&(ce=oe/ye*ae,de=se/ye*ae),{biasDiff:ce,biasComplementDiff:de}}function j(ae,oe,se,ce){if(se.units==="%")switch(ce){case"width":return ae>0?se.pfValue*ae:0;case"height":return oe>0?se.pfValue*oe:0;case"average":return ae>0&&oe>0?se.pfValue*(ae+oe)/2:0;case"min":return ae>0&&oe>0?ae>oe?se.pfValue*oe:se.pfValue*ae:0;case"max":return ae>0&&oe>0?ae>oe?se.pfValue*ae:se.pfValue*oe:0;default:return 0}else return se.units==="px"?se.pfValue:0}var z=L.width.left.value;L.width.left.units==="px"&&L.width.val>0&&(z=z*100/L.width.val);var V=L.width.right.value;L.width.right.units==="px"&&L.width.val>0&&(V=V*100/L.width.val);var G=L.height.top.value;L.height.top.units==="px"&&L.height.val>0&&(G=G*100/L.height.val);var W=L.height.bottom.value;L.height.bottom.units==="px"&&L.height.val>0&&(W=W*100/L.height.val);var Y=F(L.width.val-q.w,z,V),X=Y.biasDiff,ee=Y.biasComplementDiff,re=F(L.height.val-q.h,G,W),Q=re.biasDiff,ne=re.biasComplementDiff;M.autoPadding=j(q.w,q.h,k.pstyle("padding"),k.pstyle("padding-relative-to").value),M.autoWidth=Math.max(q.w,L.width.val),B.x=(-X+q.x1+q.x2+ee)/2,M.autoHeight=Math.max(q.h,L.height.val),B.y=(-Q+q.y1+q.y2+ne)/2}for(var R=0;R<this.length;R++){var T=this[R],A=T._private;(!A.compoundBoundsClean||_)&&(S(T),v.batching()||(A.compoundBoundsClean=!0))}return this};var noninf=function(v){return v===1/0||v===-1/0?0:v},updateBounds=function(v,S,R,T,A){T-S===0||A-R===0||S==null||R==null||T==null||A==null||(v.x1=S<v.x1?S:v.x1,v.x2=T>v.x2?T:v.x2,v.y1=R<v.y1?R:v.y1,v.y2=A>v.y2?A:v.y2,v.w=v.x2-v.x1,v.h=v.y2-v.y1)},updateBoundsFromBox=function(v,S){return S==null?v:updateBounds(v,S.x1,S.y1,S.x2,S.y2)},prefixedProperty=function(v,S,R){return getPrefixedProperty(v,S,R)},updateBoundsFromArrow=function(v,S,R){if(!S.cy().headless()){var T=S._private,A=T.rstyle,k=A.arrowWidth/2,M=S.pstyle(R+"-arrow-shape").value,P,D;if(M!=="none"){R==="source"?(P=A.srcX,D=A.srcY):R==="target"?(P=A.tgtX,D=A.tgtY):(P=A.midX,D=A.midY);var L=T.arrowBounds=T.arrowBounds||{},q=L[R]=L[R]||{};q.x1=P-k,q.y1=D-k,q.x2=P+k,q.y2=D+k,q.w=q.x2-q.x1,q.h=q.y2-q.y1,expandBoundingBox(q,1),updateBounds(v,q.x1,q.y1,q.x2,q.y2)}}},updateBoundsFromLabel=function(v,S,R){if(!S.cy().headless()){var T;R?T=R+"-":T="";var A=S._private,k=A.rstyle,M=S.pstyle(T+"label").strValue;if(M){var P=S.pstyle("text-halign"),D=S.pstyle("text-valign"),L=prefixedProperty(k,"labelWidth",R),q=prefixedProperty(k,"labelHeight",R),B=prefixedProperty(k,"labelX",R),F=prefixedProperty(k,"labelY",R),j=S.pstyle(T+"text-margin-x").pfValue,z=S.pstyle(T+"text-margin-y").pfValue,V=S.isEdge(),G=S.pstyle(T+"text-rotation"),W=S.pstyle("text-outline-width").pfValue,Y=S.pstyle("text-border-width").pfValue,X=Y/2,ee=S.pstyle("text-background-padding").pfValue,re=2,Q=q,ne=L,ae=ne/2,oe=Q/2,se,ce,de,ye;if(V)se=B-ae,ce=B+ae,de=F-oe,ye=F+oe;else{switch(P.value){case"left":se=B-ne,ce=B;break;case"center":se=B-ae,ce=B+ae;break;case"right":se=B,ce=B+ne;break}switch(D.value){case"top":de=F-Q,ye=F;break;case"center":de=F-oe,ye=F+oe;break;case"bottom":de=F,ye=F+Q;break}}var we=j-Math.max(W,X)-ee-re,ge=j+Math.max(W,X)+ee+re,ve=z-Math.max(W,X)-ee-re,be=z+Math.max(W,X)+ee+re;se+=we,ce+=ge,de+=ve,ye+=be;var ke=R||"main",me=A.labelBounds,fe=me[ke]=me[ke]||{};fe.x1=se,fe.y1=de,fe.x2=ce,fe.y2=ye,fe.w=ce-se,fe.h=ye-de,fe.leftPad=we,fe.rightPad=ge,fe.topPad=ve,fe.botPad=be;var xe=V&&G.strValue==="autorotate",Ae=G.pfValue!=null&&G.pfValue!==0;if(xe||Ae){var Se=xe?prefixedProperty(A.rstyle,"labelAngle",R):G.pfValue,Me=Math.cos(Se),Oe=Math.sin(Se),Ce=(se+ce)/2,$e=(de+ye)/2;if(!V){switch(P.value){case"left":Ce=ce;break;case"right":Ce=se;break}switch(D.value){case"top":$e=ye;break;case"bottom":$e=de;break}}var Be=function(pt,We){return pt=pt-Ce,We=We-$e,{x:pt*Me-We*Oe+Ce,y:pt*Oe+We*Me+$e}},Pe=Be(se,de),De=Be(se,ye),Le=Be(ce,de),Ne=Be(ce,ye);se=Math.min(Pe.x,De.x,Le.x,Ne.x),ce=Math.max(Pe.x,De.x,Le.x,Ne.x),de=Math.min(Pe.y,De.y,Le.y,Ne.y),ye=Math.max(Pe.y,De.y,Le.y,Ne.y)}var tt=ke+"Rot",it=me[tt]=me[tt]||{};it.x1=se,it.y1=de,it.x2=ce,it.y2=ye,it.w=ce-se,it.h=ye-de,updateBounds(v,se,de,ce,ye),updateBounds(A.labelBounds.all,se,de,ce,ye)}return v}},updateBoundsFromOutline=function(v,S){if(!S.cy().headless()){var R=S.pstyle("outline-opacity").value,T=S.pstyle("outline-width").value,A=S.pstyle("outline-offset").value,k=T+A;updateBoundsFromMiter(v,S,R,k,"outside",k/2)}},updateBoundsFromMiter=function(v,S,R,T,A,k){if(!(R===0||T<=0||A==="inside")){var M=S.cy(),P=S.pstyle("shape").value,D=M.renderer().nodeShapes[P],L=S.position(),q=L.x,B=L.y,F=S.width(),j=S.height();if(D.hasMiterBounds){A==="center"&&(T/=2);var z=D.miterBounds(q,B,F,j,T);updateBoundsFromBox(v,z)}else k!=null&&k>0&&expandBoundingBoxSides(v,[k,k,k,k])}},updateBoundsFromMiterBorder=function(v,S){if(!S.cy().headless()){var R=S.pstyle("border-opacity").value,T=S.pstyle("border-width").pfValue,A=S.pstyle("border-position").value;updateBoundsFromMiter(v,S,R,T,A)}},boundingBoxImpl=function(v,S){var R=v._private.cy,T=R.styleEnabled(),A=R.headless(),k=makeBoundingBox(),M=v._private,P=v.isNode(),D=v.isEdge(),L,q,B,F,j,z,V=M.rstyle,G=P&&T?v.pstyle("bounds-expansion").pfValue:[0],W=function(dt){return dt.pstyle("display").value!=="none"},Y=!T||W(v)&&(!D||W(v.source())&&W(v.target()));if(Y){var X=0,ee=0;T&&S.includeOverlays&&(X=v.pstyle("overlay-opacity").value,X!==0&&(ee=v.pstyle("overlay-padding").value));var re=0,Q=0;T&&S.includeUnderlays&&(re=v.pstyle("underlay-opacity").value,re!==0&&(Q=v.pstyle("underlay-padding").value));var ne=Math.max(ee,Q),ae=0,oe=0;if(T&&(ae=v.pstyle("width").pfValue,oe=ae/2),P&&S.includeNodes){var se=v.position();j=se.x,z=se.y;var ce=v.outerWidth(),de=ce/2,ye=v.outerHeight(),we=ye/2;L=j-de,q=j+de,B=z-we,F=z+we,updateBounds(k,L,B,q,F),T&&updateBoundsFromOutline(k,v),T&&S.includeOutlines&&!A&&updateBoundsFromOutline(k,v),T&&updateBoundsFromMiterBorder(k,v)}else if(D&&S.includeEdges)if(T&&!A){var ge=v.pstyle("curve-style").strValue;if(L=Math.min(V.srcX,V.midX,V.tgtX),q=Math.max(V.srcX,V.midX,V.tgtX),B=Math.min(V.srcY,V.midY,V.tgtY),F=Math.max(V.srcY,V.midY,V.tgtY),L-=oe,q+=oe,B-=oe,F+=oe,updateBounds(k,L,B,q,F),ge==="haystack"){var ve=V.haystackPts;if(ve&&ve.length===2){if(L=ve[0].x,B=ve[0].y,q=ve[1].x,F=ve[1].y,L>q){var be=L;L=q,q=be}if(B>F){var ke=B;B=F,F=ke}updateBounds(k,L-oe,B-oe,q+oe,F+oe)}}else if(ge==="bezier"||ge==="unbundled-bezier"||endsWith(ge,"segments")||endsWith(ge,"taxi")){var me;switch(ge){case"bezier":case"unbundled-bezier":me=V.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":me=V.linePts;break}if(me!=null)for(var fe=0;fe<me.length;fe++){var xe=me[fe];L=xe.x-oe,q=xe.x+oe,B=xe.y-oe,F=xe.y+oe,updateBounds(k,L,B,q,F)}}}else{var Ae=v.source(),Se=Ae.position(),Me=v.target(),Oe=Me.position();if(L=Se.x,q=Oe.x,B=Se.y,F=Oe.y,L>q){var Ce=L;L=q,q=Ce}if(B>F){var $e=B;B=F,F=$e}L-=oe,q+=oe,B-=oe,F+=oe,updateBounds(k,L,B,q,F)}if(T&&S.includeEdges&&D&&(updateBoundsFromArrow(k,v,"mid-source"),updateBoundsFromArrow(k,v,"mid-target"),updateBoundsFromArrow(k,v,"source"),updateBoundsFromArrow(k,v,"target")),T){var Be=v.pstyle("ghost").value==="yes";if(Be){var Pe=v.pstyle("ghost-offset-x").pfValue,De=v.pstyle("ghost-offset-y").pfValue;updateBounds(k,k.x1+Pe,k.y1+De,k.x2+Pe,k.y2+De)}}var Le=M.bodyBounds=M.bodyBounds||{};assignBoundingBox(Le,k),expandBoundingBoxSides(Le,G),expandBoundingBox(Le,1),T&&(L=k.x1,q=k.x2,B=k.y1,F=k.y2,updateBounds(k,L-ne,B-ne,q+ne,F+ne));var Ne=M.overlayBounds=M.overlayBounds||{};assignBoundingBox(Ne,k),expandBoundingBoxSides(Ne,G),expandBoundingBox(Ne,1);var tt=M.labelBounds=M.labelBounds||{};tt.all!=null?clearBoundingBox(tt.all):tt.all=makeBoundingBox(),T&&S.includeLabels&&(S.includeMainLabels&&updateBoundsFromLabel(k,v,null),D&&(S.includeSourceLabels&&updateBoundsFromLabel(k,v,"source"),S.includeTargetLabels&&updateBoundsFromLabel(k,v,"target")))}return k.x1=noninf(k.x1),k.y1=noninf(k.y1),k.x2=noninf(k.x2),k.y2=noninf(k.y2),k.w=noninf(k.x2-k.x1),k.h=noninf(k.y2-k.y1),k.w>0&&k.h>0&&Y&&(expandBoundingBoxSides(k,G),expandBoundingBox(k,1)),k},getKey=function(v){var S=0,R=function(k){return(k?1:0)<<S++},T=0;return T+=R(v.incudeNodes),T+=R(v.includeEdges),T+=R(v.includeLabels),T+=R(v.includeMainLabels),T+=R(v.includeSourceLabels),T+=R(v.includeTargetLabels),T+=R(v.includeOverlays),T+=R(v.includeOutlines),T},getBoundingBoxPosKey=function(v){var S=function(M){return Math.round(M)};if(v.isEdge()){var R=v.source().position(),T=v.target().position();return hashIntsArray([S(R.x),S(R.y),S(T.x),S(T.y)])}else{var A=v.position();return hashIntsArray([S(A.x),S(A.y)])}},cachedBoundingBoxImpl=function(v,S){var R=v._private,T,A=v.isEdge(),k=S==null?defBbOptsKey:getKey(S),M=k===defBbOptsKey;if(R.bbCache==null?(T=boundingBoxImpl(v,defBbOpts),R.bbCache=T,R.bbCachePosKey=getBoundingBoxPosKey(v)):T=R.bbCache,!M){var P=v.isNode();T=makeBoundingBox(),(S.includeNodes&&P||S.includeEdges&&!P)&&(S.includeOverlays?updateBoundsFromBox(T,R.overlayBounds):updateBoundsFromBox(T,R.bodyBounds)),S.includeLabels&&(S.includeMainLabels&&(!A||S.includeSourceLabels&&S.includeTargetLabels)?updateBoundsFromBox(T,R.labelBounds.all):(S.includeMainLabels&&updateBoundsFromBox(T,R.labelBounds.mainRot),S.includeSourceLabels&&updateBoundsFromBox(T,R.labelBounds.sourceRot),S.includeTargetLabels&&updateBoundsFromBox(T,R.labelBounds.targetRot))),T.w=T.x2-T.x1,T.h=T.y2-T.y1}return T},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(_){var v,S=_===void 0||_.useCache===void 0||_.useCache===!0,R=memoize(function(L){var q=L._private;return q.bbCache==null||q.styleDirty||q.bbCachePosKey!==getBoundingBoxPosKey(L)},function(L){return L.id()});if(S&&this.length===1&&!R(this[0]))_===void 0?_=defBbOpts:_=filledBbOpts(_),v=cachedBoundingBoxImpl(this[0],_);else{v=makeBoundingBox(),_=_||defBbOpts;var T=filledBbOpts(_),A=this,k=A.cy(),M=k.styleEnabled();this.edges().forEach(R),this.nodes().forEach(R),M&&this.recalculateRenderedStyle(S),this.updateCompoundBounds(!S);for(var P=0;P<A.length;P++){var D=A[P];R(D)&&D.dirtyBoundingBoxCache(),updateBoundsFromBox(v,cachedBoundingBoxImpl(D,T))}}return v.x1=noninf(v.x1),v.y1=noninf(v.y1),v.x2=noninf(v.x2),v.y2=noninf(v.y2),v.w=noninf(v.x2-v.x1),v.h=noninf(v.y2-v.y1),v};elesfn$b.dirtyBoundingBoxCache=function(){for(var _=0;_<this.length;_++){var v=this[_]._private;v.bbCache=null,v.bbCachePosKey=null,v.bodyBounds=null,v.overlayBounds=null,v.labelBounds.all=null,v.labelBounds.source=null,v.labelBounds.target=null,v.labelBounds.main=null,v.labelBounds.sourceRot=null,v.labelBounds.targetRot=null,v.labelBounds.mainRot=null,v.arrowBounds.source=null,v.arrowBounds.target=null,v.arrowBounds["mid-source"]=null,v.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};elesfn$b.boundingBoxAt=function(_){var v=this.nodes(),S=this.cy(),R=S.hasCompoundNodes(),T=S.collection();if(R&&(T=v.filter(function(D){return D.isParent()}),v=v.not(T)),plainObject(_)){var A=_;_=function(){return A}}var k=function(L,q){return L._private.bbAtOldPos=_(L,q)},M=function(L){return L._private.bbAtOldPos};S.startBatch(),v.forEach(k).silentPositions(_),R&&(T.dirtyCompoundBoundsCache(),T.dirtyBoundingBoxCache(),T.updateCompoundBounds(!0));var P=copyBoundingBox(this.boundingBox({useCache:!1}));return v.silentPositions(M),R&&(T.dirtyCompoundBoundsCache(),T.dirtyBoundingBoxCache(),T.updateCompoundBounds(!0)),S.endBatch(),P};fn$3.boundingbox=fn$3.bb=fn$3.boundingBox;fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$b,fn$2,elesfn$a;fn$2=elesfn$a={};var defineDimFns=function(v){v.uppercaseName=capitalize(v.name),v.autoName="auto"+v.uppercaseName,v.labelName="label"+v.uppercaseName,v.outerName="outer"+v.uppercaseName,v.uppercaseOuterName=capitalize(v.outerName),fn$2[v.name]=function(){var R=this[0],T=R._private,A=T.cy,k=A._private.styleEnabled;if(R)if(k){if(R.isParent())return R.updateCompoundBounds(),T[v.autoName]||0;var M=R.pstyle(v.name);switch(M.strValue){case"label":return R.recalculateRenderedStyle(),T.rstyle[v.labelName]||0;default:return M.pfValue}}else return 1},fn$2["outer"+v.uppercaseName]=function(){var R=this[0],T=R._private,A=T.cy,k=A._private.styleEnabled;if(R)if(k){var M=R[v.name](),P=R.pstyle("border-position").value,D;P==="center"?D=R.pstyle("border-width").pfValue:P==="outside"?D=2*R.pstyle("border-width").pfValue:D=0;var L=2*R.padding();return M+D+L}else return 1},fn$2["rendered"+v.uppercaseName]=function(){var R=this[0];if(R){var T=R[v.name]();return T*this.cy().zoom()}},fn$2["rendered"+v.uppercaseOuterName]=function(){var R=this[0];if(R){var T=R[v.outerName]();return T*this.cy().zoom()}}};defineDimFns({name:"width"});defineDimFns({name:"height"});elesfn$a.padding=function(){var _=this[0],v=_._private;return _.isParent()?(_.updateCompoundBounds(),v.autoPadding!==void 0?v.autoPadding:_.pstyle("padding").pfValue):_.pstyle("padding").pfValue};elesfn$a.paddedHeight=function(){var _=this[0];return _.height()+2*_.padding()};elesfn$a.paddedWidth=function(){var _=this[0];return _.width()+2*_.padding()};var widthHeight=elesfn$a,ifEdge=function(v,S){if(v.isEdge()&&v.takesUpSpace())return S(v)},ifEdgeRenderedPosition=function(v,S){if(v.isEdge()&&v.takesUpSpace()){var R=v.cy();return modelToRenderedPosition$1(S(v),R.zoom(),R.pan())}},ifEdgeRenderedPositions=function(v,S){if(v.isEdge()&&v.takesUpSpace()){var R=v.cy(),T=R.pan(),A=R.zoom();return S(v).map(function(k){return modelToRenderedPosition$1(k,A,T)})}},controlPoints=function(v){return v.renderer().getControlPoints(v)},segmentPoints=function(v){return v.renderer().getSegmentPoints(v)},sourceEndpoint=function(v){return v.renderer().getSourceEndpoint(v)},targetEndpoint=function(v){return v.renderer().getTargetEndpoint(v)},midpoint=function(v){return v.renderer().getEdgeMidpoint(v)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(v){return"rendered"+v[0].toUpperCase()+v.substr(1)},edgePoints=Object.keys(pts).reduce(function(_,v){var S=pts[v],R=renderedName(v);return _[v]=function(){return ifEdge(this,S.get)},S.mult?_[R]=function(){return ifEdgeRenderedPositions(this,S.get)}:_[R]=function(){return ifEdgeRenderedPosition(this,S.get)},_},{}),dimensions=extend({},position,bounds,widthHeight,edgePoints);var Event$1=function(v,S){this.recycle(v,S)};function returnFalse(){return!1}function returnTrue(){return!0}Event$1.prototype={instanceString:function(){return"event"},recycle:function(v,S){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,v!=null&&v.preventDefault?(this.type=v.type,this.isDefaultPrevented=v.defaultPrevented?returnTrue:returnFalse):v!=null&&v.type?S=v:this.type=v,S!=null&&(this.originalEvent=S.originalEvent,this.type=S.type!=null?S.type:this.type,this.cy=S.cy,this.target=S.target,this.position=S.position,this.renderedPosition=S.renderedPosition,this.namespace=S.namespace,this.layout=S.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var R=this.position,T=this.cy.zoom(),A=this.cy.pan();this.renderedPosition={x:R.x*T+A.x,y:R.y*T+A.y}}this.timeStamp=v&&v.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var v=this.originalEvent;v&&v.preventDefault&&v.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var v=this.originalEvent;v&&v.stopPropagation&&v.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(v,S){return v===S},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(v){return v},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:emptyOpts,v=arguments.length>1?arguments[1]:void 0,S=0;S<defaultsKeys.length;S++){var R=defaultsKeys[S];this[R]=_[R]||defaults$8[R]}this.context=v||this.context,this.listeners=[],this.emitting=0}var p$1=Emitter.prototype,forEachEvent=function(v,S,R,T,A,k,M){fn$6(T)&&(A=T,T=null),M&&(k==null?k=M:k=extend({},k,M));for(var P=array(R)?R:R.split(/\s+/),D=0;D<P.length;D++){var L=P[D];if(!emptyString(L)){var q=L.match(eventRegex);if(q){var B=q[1],F=q[2]?q[2]:null,j=S(v,L,B,F,T,A,k);if(j===!1)break}}}},makeEventObj=function(v,S){return v.addEventFields(v.context,S),new Event$1(S.type,S)},forEachEventObj=function(v,S,R){if(event(R)){S(v,R);return}else if(plainObject(R)){S(v,makeEventObj(v,R));return}for(var T=array(R)?R:R.split(/\s+/),A=0;A<T.length;A++){var k=T[A];if(!emptyString(k)){var M=k.match(eventRegex);if(M){var P=M[1],D=M[2]?M[2]:null,L=makeEventObj(v,{type:P,namespace:D,target:v.context});S(v,L)}}}};p$1.on=p$1.addListener=function(_,v,S,R,T){return forEachEvent(this,function(A,k,M,P,D,L,q){fn$6(L)&&A.listeners.push({event:k,callback:L,type:M,namespace:P,qualifier:D,conf:q})},_,v,S,R,T),this};p$1.one=function(_,v,S,R){return this.on(_,v,S,R,{one:!0})};p$1.removeListener=p$1.off=function(_,v,S,R){var T=this;this.emitting!==0&&(this.listeners=copyArray(this.listeners));for(var A=this.listeners,k=function(D){var L=A[D];forEachEvent(T,function(q,B,F,j,z,V){if((L.type===F||_==="*")&&(!j&&L.namespace!==".*"||L.namespace===j)&&(!z||q.qualifierCompare(L.qualifier,z))&&(!V||L.callback===V))return A.splice(D,1),!1},_,v,S,R)},M=A.length-1;M>=0;M--)k(M);return this};p$1.removeAllListeners=function(){return this.removeListener("*")};p$1.emit=p$1.trigger=function(_,v,S){var R=this.listeners,T=R.length;return this.emitting++,array(v)||(v=[v]),forEachEventObj(this,function(A,k){S!=null&&(R=[{event:k.event,type:k.type,namespace:k.namespace,callback:S}],T=R.length);for(var M=function(){var L=R[P];if(L.type===k.type&&(!L.namespace||L.namespace===k.namespace||L.namespace===universalNamespace)&&A.eventMatches(A.context,L,k)){var q=[k];v!=null&&push(q,v),A.beforeEmit(A.context,L,k),L.conf&&L.conf.one&&(A.listeners=A.listeners.filter(function(j){return j!==L}));var B=A.callbackContext(A.context,L,k),F=L.callback.apply(B,q);A.afterEmit(A.context,L,k),F===!1&&(k.stopPropagation(),k.preventDefault())}},P=0;P<T;P++)M();A.bubble(A.context)&&!k.isPropagationStopped()&&A.parent(A.context).emit(k,v)},_),this.emitting--,this};var emitterOptions$1={qualifierCompare:function(v,S){return v==null||S==null?v==null&&S==null:v.sameText(S)},eventMatches:function(v,S,R){var T=S.qualifier;return T!=null?v!==R.target&&element(R.target)&&T.matches(R.target):!0},addEventFields:function(v,S){S.cy=v.cy(),S.target=v},callbackContext:function(v,S,R){return S.qualifier!=null?R.target:v},beforeEmit:function(v,S){S.conf&&S.conf.once&&S.conf.onceCollection.removeListener(S.event,S.qualifier,S.callback)},bubble:function(){return!0},parent:function(v){return v.isChild()?v.parent():v.cy()}},argSelector$1=function(v){return string$1(v)?new Selector(v):v},elesfn$9={createEmitter:function(){for(var v=0;v<this.length;v++){var S=this[v],R=S._private;R.emitter||(R.emitter=new Emitter(emitterOptions$1,S))}return this},emitter:function(){return this._private.emitter},on:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().on(v,T,R)}return this},removeListener:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().removeListener(v,T,R)}return this},removeAllListeners:function(){for(var v=0;v<this.length;v++){var S=this[v];S.emitter().removeAllListeners()}return this},one:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().one(v,T,R)}return this},once:function(v,S,R){for(var T=argSelector$1(S),A=0;A<this.length;A++){var k=this[A];k.emitter().on(v,T,R,{once:!0,onceCollection:this})}},emit:function(v,S){for(var R=0;R<this.length;R++){var T=this[R];T.emitter().emit(v,S)}return this},emitAndNotify:function(v,S){if(this.length!==0)return this.cy().notify(v,this),this.emit(v,S),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function(v){return this.filter(function(S){return S.isNode()}).filter(v)},edges:function(v){return this.filter(function(S){return S.isEdge()}).filter(v)},byGroup:function(){for(var v=this.spawn(),S=this.spawn(),R=0;R<this.length;R++){var T=this[R];T.isNode()?v.push(T):S.push(T)}return{nodes:v,edges:S}},filter:function(v,S){if(v===void 0)return this;if(string$1(v)||elementOrCollection(v))return new Selector(v).filter(this);if(fn$6(v)){for(var R=this.spawn(),T=this,A=0;A<T.length;A++){var k=T[A],M=S?v.apply(S,[k,A,T]):v(k,A,T);M&&R.push(k)}return R}return this.spawn()},not:function(v){if(v){string$1(v)&&(v=this.filter(v));for(var S=this.spawn(),R=0;R<this.length;R++){var T=this[R],A=v.has(T);A||S.push(T)}return S}else return this},absoluteComplement:function(){var v=this.cy();return v.mutableElements().not(this)},intersect:function(v){if(string$1(v)){var S=v;return this.filter(S)}for(var R=this.spawn(),T=this,A=v,k=this.length<v.length,M=k?T:A,P=k?A:T,D=0;D<M.length;D++){var L=M[D];P.has(L)&&R.push(L)}return R},xor:function(v){var S=this._private.cy;string$1(v)&&(v=S.$(v));var R=this.spawn(),T=this,A=v,k=function(P,D){for(var L=0;L<P.length;L++){var q=P[L],B=q._private.data.id,F=D.hasElementWithId(B);F||R.push(q)}};return k(T,A),k(A,T),R},diff:function(v){var S=this._private.cy;string$1(v)&&(v=S.$(v));var R=this.spawn(),T=this.spawn(),A=this.spawn(),k=this,M=v,P=function(L,q,B){for(var F=0;F<L.length;F++){var j=L[F],z=j._private.data.id,V=q.hasElementWithId(z);V?A.merge(j):B.push(j)}};return P(k,M,R),P(M,k,T),{left:R,right:T,both:A}},add:function(v){var S=this._private.cy;if(!v)return this;if(string$1(v)){var R=v;v=S.mutableElements().filter(R)}for(var T=this.spawnSelf(),A=0;A<v.length;A++){var k=v[A],M=!this.has(k);M&&T.push(k)}return T},merge:function(v){var S=this._private,R=S.cy;if(!v)return this;if(v&&string$1(v)){var T=v;v=R.mutableElements().filter(T)}for(var A=S.map,k=0;k<v.length;k++){var M=v[k],P=M._private.data.id,D=!A.has(P);if(D){var L=this.length++;this[L]=M,A.set(P,{ele:M,index:L})}}return this},unmergeAt:function(v){var S=this[v],R=S.id(),T=this._private,A=T.map;this[v]=void 0,A.delete(R);var k=v===this.length-1;if(this.length>1&&!k){var M=this.length-1,P=this[M],D=P._private.data.id;this[M]=void 0,this[v]=P,A.set(D,{ele:P,index:v})}return this.length--,this},unmergeOne:function(v){v=v[0];var S=this._private,R=v._private.data.id,T=S.map,A=T.get(R);if(!A)return this;var k=A.index;return this.unmergeAt(k),this},unmerge:function(v){var S=this._private.cy;if(!v)return this;if(v&&string$1(v)){var R=v;v=S.mutableElements().filter(R)}for(var T=0;T<v.length;T++)this.unmergeOne(v[T]);return this},unmergeBy:function(v){for(var S=this.length-1;S>=0;S--){var R=this[S];v(R)&&this.unmergeAt(S)}return this},map:function(v,S){for(var R=[],T=this,A=0;A<T.length;A++){var k=T[A],M=S?v.apply(S,[k,A,T]):v(k,A,T);R.push(M)}return R},reduce:function(v,S){for(var R=S,T=this,A=0;A<T.length;A++)R=v(R,T[A],A,T);return R},max:function(v,S){for(var R=-1/0,T,A=this,k=0;k<A.length;k++){var M=A[k],P=S?v.apply(S,[M,k,A]):v(M,k,A);P>R&&(R=P,T=M)}return{value:R,ele:T}},min:function(v,S){for(var R=1/0,T,A=this,k=0;k<A.length;k++){var M=A[k],P=S?v.apply(S,[M,k,A]):v(M,k,A);P<R&&(R=P,T=M)}return{value:R,ele:T}}},fn$1=elesfn$8;fn$1.u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add;fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not;fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect;fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor;fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter;fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement;var elesfn$7={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var v=this[0];if(v)return v._private.group}},zIndexSort=function(v,S){var R=v.cy(),T=R.hasCompoundNodes();function A(L){var q=L.pstyle("z-compound-depth");return q.value==="auto"?T?L.zDepth():0:q.value==="bottom"?-1:q.value==="top"?MAX_INT$1:0}var k=A(v)-A(S);if(k!==0)return k;function M(L){var q=L.pstyle("z-index-compare");return q.value==="auto"&&L.isNode()?1:0}var P=M(v)-M(S);if(P!==0)return P;var D=v.pstyle("z-index").value-S.pstyle("z-index").value;return D!==0?D:v.poolIndex()-S.poolIndex()},elesfn$6={forEach:function(v,S){if(fn$6(v))for(var R=this.length,T=0;T<R;T++){var A=this[T],k=S?v.apply(S,[A,T,this]):v(A,T,this);if(k===!1)break}return this},toArray:function(){for(var v=[],S=0;S<this.length;S++)v.push(this[S]);return v},slice:function(v,S){var R=[],T=this.length;S==null&&(S=T),v==null&&(v=0),v<0&&(v=T+v),S<0&&(S=T+S);for(var A=v;A>=0&&A<S&&A<T;A++)R.push(this[A]);return this.spawn(R)},size:function(){return this.length},eq:function(v){return this[v]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(v){if(!fn$6(v))return this;var S=this.toArray().sort(v);return this.spawn(S)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var v=this[0];if(v){var S=v._private,R=S.group;if(R==="nodes"){var T=S.data.parent?v.parents().size():0;return v.isParent()?T:MAX_INT$1-1}else{var A=S.source,k=S.target,M=A.zDepth(),P=k.zDepth();return Math.max(M,P,0)}}}};elesfn$6.each=elesfn$6.forEach;var defineSymbolIterator=function(){var v="undefined",S=(typeof Symbol>"u"?"undefined":_typeof(Symbol))!=v&&_typeof(Symbol.iterator)!=v;S&&(elesfn$6[Symbol.iterator]=function(){var R=this,T={value:void 0,done:!1},A=0,k=this.length;return _defineProperty$1({next:function(){return A<k?T.value=R[A++]:(T.value=void 0,T.done=!0),T}},Symbol.iterator,function(){return this})})};defineSymbolIterator();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function(v){v=getLayoutDimensionOptions(v);var S;if(!this.takesUpSpace())S={w:0,h:0};else if(v.nodeDimensionsIncludeLabels){var R=this.boundingBox();S={w:R.w,h:R.h}}else S={w:this.outerWidth(),h:this.outerHeight()};return(S.w===0||S.h===0)&&(S.w=S.h=1),S},layoutPositions:function(v,S,R){var T=this.nodes().filter(function(ee){return!ee.isParent()}),A=this.cy(),k=S.eles,M=function(re){return re.id()},P=memoize(R,M);v.emit({type:"layoutstart",layout:v}),v.animations=[];var D=function(re,Q,ne){var ae={x:Q.x1+Q.w/2,y:Q.y1+Q.h/2},oe={x:(ne.x-ae.x)*re,y:(ne.y-ae.y)*re};return{x:ae.x+oe.x,y:ae.y+oe.y}},L=S.spacingFactor&&S.spacingFactor!==1,q=function(){if(!L)return null;for(var re=makeBoundingBox(),Q=0;Q<T.length;Q++){var ne=T[Q],ae=P(ne,Q);expandBoundingBoxByPoint(re,ae.x,ae.y)}return re},B=q(),F=memoize(function(ee,re){var Q=P(ee,re);if(L){var ne=Math.abs(S.spacingFactor);Q=D(ne,B,Q)}return S.transform!=null&&(Q=S.transform(ee,Q)),Q},M);if(S.animate){for(var j=0;j<T.length;j++){var z=T[j],V=F(z,j),G=S.animateFilter==null||S.animateFilter(z,j);if(G){var W=z.animation({position:V,duration:S.animationDuration,easing:S.animationEasing});v.animations.push(W)}else z.position(V)}if(S.fit){var Y=A.animation({fit:{boundingBox:k.boundingBoxAt(F),padding:S.padding},duration:S.animationDuration,easing:S.animationEasing});v.animations.push(Y)}else if(S.zoom!==void 0&&S.pan!==void 0){var X=A.animation({zoom:S.zoom,pan:S.pan,duration:S.animationDuration,easing:S.animationEasing});v.animations.push(X)}v.animations.forEach(function(ee){return ee.play()}),v.one("layoutready",S.ready),v.emit({type:"layoutready",layout:v}),Promise$1.all(v.animations.map(function(ee){return ee.promise()})).then(function(){v.one("layoutstop",S.stop),v.emit({type:"layoutstop",layout:v})})}else T.positions(F),S.fit&&A.fit(S.eles,S.padding),S.zoom!=null&&A.zoom(S.zoom),S.pan&&A.pan(S.pan),v.one("layoutready",S.ready),v.emit({type:"layoutready",layout:v}),v.one("layoutstop",S.stop),v.emit({type:"layoutstop",layout:v});return this},layout:function(v){var S=this.cy();return S.makeLayout(extend({},v,{eles:this}))}};elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout;function styleCache(_,v,S){var R=S._private,T=R.styleCache=R.styleCache||[],A;return(A=T[_])!=null||(A=T[_]=v(S)),A}function cacheStyleFunction(_,v){return _=hashString(_),function(R){return styleCache(_,v,R)}}function cachePrototypeStyleFunction(_,v){_=hashString(_);var S=function(T){return v.call(T)};return function(){var T=this[0];if(T)return styleCache(_,S,T)}}var elesfn$4={recalculateRenderedStyle:function(v){var S=this.cy(),R=S.renderer(),T=S.styleEnabled();return R&&T&&R.recalculateRenderedStyle(this,v),this},dirtyStyleCache:function(){var v=this.cy(),S=function(A){return A._private.styleCache=null};if(v.hasCompoundNodes()){var R;R=this.spawnSelf().merge(this.descendants()).merge(this.parents()),R.merge(R.connectedEdges()),R.forEach(S)}else this.forEach(function(T){S(T),T.connectedEdges().forEach(S)});return this},updateStyle:function(v){var S=this._private.cy;if(!S.styleEnabled())return this;if(S.batching()){var R=S._private.batchStyleEles;return R.merge(this),this}var T=S.hasCompoundNodes(),A=this;v=!!(v||v===void 0),T&&(A=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var k=A;return v?k.emitAndNotify("style"):k.emit("style"),A.forEach(function(M){return M._private.styleDirty=!0}),this},cleanStyle:function(){var v=this.cy();if(v.styleEnabled())for(var S=0;S<this.length;S++){var R=this[S];R._private.styleDirty&&(R._private.styleDirty=!1,v.style().apply(R))}},parsedStyle:function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=this[0],T=R.cy();if(T.styleEnabled()&&R){R._private.styleDirty&&(R._private.styleDirty=!1,T.style().apply(R));var A=R._private.style[v];return A??(S?T.style().getDefaultProperty(v):null)}},numericStyle:function(v){var S=this[0];if(S.cy().styleEnabled()&&S){var R=S.pstyle(v);return R.pfValue!==void 0?R.pfValue:R.value}},numericStyleUnits:function(v){var S=this[0];if(S.cy().styleEnabled()&&S)return S.pstyle(v).units},renderedStyle:function(v){var S=this.cy();if(!S.styleEnabled())return this;var R=this[0];if(R)return S.style().getRenderedStyle(R,v)},style:function(v,S){var R=this.cy();if(!R.styleEnabled())return this;var T=!1,A=R.style();if(plainObject(v)){var k=v;A.applyBypass(this,k,T),this.emitAndNotify("style")}else if(string$1(v))if(S===void 0){var M=this[0];return M?A.getStylePropertyValue(M,v):void 0}else A.applyBypass(this,v,S,T),this.emitAndNotify("style");else if(v===void 0){var P=this[0];return P?A.getRawStyle(P):void 0}return this},removeStyle:function(v){var S=this.cy();if(!S.styleEnabled())return this;var R=!1,T=S.style(),A=this;if(v===void 0)for(var k=0;k<A.length;k++){var M=A[k];T.removeAllBypasses(M,R)}else{v=v.split(/\s+/);for(var P=0;P<A.length;P++){var D=A[P];T.removeBypasses(D,v,R)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var v=this.cy();if(!v.styleEnabled())return 1;var S=v.hasCompoundNodes(),R=this[0];if(R){var T=R._private,A=R.pstyle("opacity").value;if(!S)return A;var k=T.data.parent?R.parents():null;if(k)for(var M=0;M<k.length;M++){var P=k[M],D=P.pstyle("opacity").value;A=D*A}return A}},transparent:function(){var v=this.cy();if(!v.styleEnabled())return!1;var S=this[0],R=S.cy().hasCompoundNodes();if(S)return R?S.effectiveOpacity()===0:S.pstyle("opacity").value===0},backgrounding:function(){var v=this.cy();if(!v.styleEnabled())return!1;var S=this[0];return!!S._private.backgrounding}};function checkCompound(_,v){var S=_._private,R=S.data.parent?_.parents():null;if(R)for(var T=0;T<R.length;T++){var A=R[T];if(!v(A))return!1}return!0}function defineDerivedStateFunction(_){var v=_.ok,S=_.edgeOkViaNode||_.ok,R=_.parentOk||_.ok;return function(){var T=this.cy();if(!T.styleEnabled())return!0;var A=this[0],k=T.hasCompoundNodes();if(A){var M=A._private;if(!v(A))return!1;if(A.isNode())return!k||checkCompound(A,R);var P=M.source,D=M.target;return S(P)&&(!k||checkCompound(P,S))&&(P===D||S(D)&&(!k||checkCompound(D,S)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",function(_){return _.pstyle("display").value==="element"&&_.width()!==0&&(_.isNode()?_.height()!==0:!0)});elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",function(_){return _.pstyle("events").value==="yes"&&_.pstyle("visibility").value==="visible"&&eleTakesUpSpace(_)}),parentInteractive=cacheStyleFunction("parentInteractive",function(_){return _.pstyle("visibility").value==="visible"&&eleTakesUpSpace(_)});elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace}));elesfn$4.noninteractive=function(){var _=this[0];if(_)return!_.interactive()};var eleVisible=cacheStyleFunction("eleVisible",function(_){return _.pstyle("visibility").value==="visible"&&_.pstyle("opacity").pfValue!==0&&eleTakesUpSpace(_)}),edgeVisibleViaNode=eleTakesUpSpace;elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode}));elesfn$4.hidden=function(){var _=this[0];if(_)return!_.visible()};elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});elesfn$4.bypass=elesfn$4.css=elesfn$4.style;elesfn$4.renderedCss=elesfn$4.renderedStyle;elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle;elesfn$4.pstyle=elesfn$4.parsedStyle;var elesfn$3={};function defineSwitchFunction(_){return function(){var v=arguments,S=[];if(v.length===2){var R=v[0],T=v[1];this.on(_.event,R,T)}else if(v.length===1&&fn$6(v[0])){var A=v[0];this.on(_.event,A)}else if(v.length===0||v.length===1&&array(v[0])){for(var k=v.length===1?v[0]:null,M=0;M<this.length;M++){var P=this[M],D=!_.ableField||P._private[_.ableField],L=P._private[_.field]!=_.value;if(_.overrideAble){var q=_.overrideAble(P);if(q!==void 0&&(D=q,!q))return this}D&&(P._private[_.field]=_.value,L&&S.push(P))}var B=this.spawn(S);B.updateStyle(),B.emit(_.event),k&&B.emit(k)}return this}}function defineSwitchSet(_){elesfn$3[_.field]=function(){var v=this[0];if(v){if(_.overrideField){var S=_.overrideField(v);if(S!==void 0)return S}return v._private[_.field]}},elesfn$3[_.on]=defineSwitchFunction({event:_.on,field:_.field,ableField:_.ableField,overrideAble:_.overrideAble,value:!0}),elesfn$3[_.off]=defineSwitchFunction({event:_.off,field:_.field,ableField:_.ableField,overrideAble:_.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(v){return v.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});defineSwitchSet({field:"grabbable",overrideField:function(v){return v.cy().autoungrabify()||v.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(v){return v.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});defineSwitchSet({field:"selectable",overrideField:function(v){return v.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});elesfn$3.deselect=elesfn$3.unselect;elesfn$3.grabbed=function(){var _=this[0];if(_)return _._private.grabbed};defineSwitchSet({field:"active",on:"activate",off:"unactivate"});defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"});elesfn$3.inactive=function(){var _=this[0];if(_)return!_._private.active};var elesfn$2={},defineDagExtremity=function(v){return function(R){for(var T=this,A=[],k=0;k<T.length;k++){var M=T[k];if(M.isNode()){for(var P=!1,D=M.connectedEdges(),L=0;L<D.length;L++){var q=D[L],B=q.source(),F=q.target();if(v.noIncomingEdges&&F===M&&B!==M||v.noOutgoingEdges&&B===M&&F!==M){P=!0;break}}P||A.push(M)}}return this.spawn(A,!0).filter(R)}},defineDagOneHop=function(v){return function(S){for(var R=this,T=[],A=0;A<R.length;A++){var k=R[A];if(k.isNode())for(var M=k.connectedEdges(),P=0;P<M.length;P++){var D=M[P],L=D.source(),q=D.target();v.outgoing&&L===k?(T.push(D),T.push(q)):v.incoming&&q===k&&(T.push(D),T.push(L))}}return this.spawn(T,!0).filter(S)}},defineDagAllHops=function(v){return function(S){for(var R=this,T=[],A={};;){var k=v.outgoing?R.outgoers():R.incomers();if(k.length===0)break;for(var M=!1,P=0;P<k.length;P++){var D=k[P],L=D.id();A[L]||(A[L]=!0,T.push(D),M=!0)}if(!M)break;R=k}return this.spawn(T,!0).filter(S)}};elesfn$2.clearTraversalCache=function(){for(var _=0;_<this.length;_++)this[_]._private.traversalCache=null};extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({})});extend(elesfn$2,{neighborhood:cache(function(_){for(var v=[],S=this.nodes(),R=0;R<S.length;R++)for(var T=S[R],A=T.connectedEdges(),k=0;k<A.length;k++){var M=A[k],P=M.source(),D=M.target(),L=T===P?D:P;L.length>0&&v.push(L[0]),v.push(M[0])}return this.spawn(v,!0).filter(_)},"neighborhood"),closedNeighborhood:function(v){return this.neighborhood().add(this).filter(v)},openNeighborhood:function(v){return this.neighborhood(v)}});elesfn$2.neighbourhood=elesfn$2.neighborhood;elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood;elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood;extend(elesfn$2,{source:cache(function(v){var S=this[0],R;return S&&(R=S._private.source||S.cy().collection()),R&&v?R.filter(v):R},"source"),target:cache(function(v){var S=this[0],R;return S&&(R=S._private.target||S.cy().collection()),R&&v?R.filter(v):R},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})});function defineSourceFunction(_){return function(S){for(var R=[],T=0;T<this.length;T++){var A=this[T],k=A._private[_.attr];k&&R.push(k)}return this.spawn(R,!0).filter(S)}}extend(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")});function defineEdgesWithFunction(_){return function(S){var R=[],T=this._private.cy,A=_||{};string$1(S)&&(S=T.$(S));for(var k=0;k<S.length;k++)for(var M=S[k]._private.edges,P=0;P<M.length;P++){var D=M[P],L=D._private.data,q=this.hasElementWithId(L.source)&&S.hasElementWithId(L.target),B=S.hasElementWithId(L.source)&&this.hasElementWithId(L.target),F=q||B;F&&((A.thisIsSrc||A.thisIsTgt)&&(A.thisIsSrc&&!q||A.thisIsTgt&&!B)||R.push(D))}return this.spawn(R,!0)}}extend(elesfn$2,{connectedEdges:cache(function(_){for(var v=[],S=this,R=0;R<S.length;R++){var T=S[R];if(T.isNode())for(var A=T._private.edges,k=0;k<A.length;k++){var M=A[k];v.push(M)}}return this.spawn(v,!0).filter(_)},"connectedEdges"),connectedNodes:cache(function(_){for(var v=[],S=this,R=0;R<S.length;R++){var T=S[R];T.isEdge()&&(v.push(T.source()[0]),v.push(T.target()[0]))}return this.spawn(v,!0).filter(_)},"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")});function defineParallelEdgesFunction(_){var v={codirected:!1};return _=extend({},v,_),function(R){for(var T=[],A=this.edges(),k=_,M=0;M<A.length;M++)for(var P=A[M],D=P._private,L=D.source,q=L._private.data.id,B=D.data.target,F=L._private.edges,j=0;j<F.length;j++){var z=F[j],V=z._private.data,G=V.target,W=V.source,Y=G===B&&W===q,X=q===G&&B===W;(k.codirected&&Y||!k.codirected&&(Y||X))&&T.push(z)}return this.spawn(T,!0).filter(R)}}extend(elesfn$2,{components:function(v){var S=this,R=S.cy(),T=R.collection(),A=v==null?S.nodes():v.nodes(),k=[];v!=null&&A.empty()&&(A=v.sources());var M=function(L,q){T.merge(L),A.unmerge(L),q.merge(L)};if(A.empty())return S.spawn();var P=function(){var L=R.collection();k.push(L);var q=A[0];M(q,L),S.bfs({directed:!1,roots:q,visit:function(F){return M(F,L)}}),L.forEach(function(B){B.connectedEdges().forEach(function(F){S.has(F)&&L.has(F.source())&&L.has(F.target())&&L.merge(F)})})};do P();while(A.length>0);return k},component:function(){var v=this[0];return v.cy().mutableElements().components(v)[0]}});elesfn$2.componentsOf=elesfn$2.components;var Collection$3=function(v,S){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(v===void 0){error("A collection must have a reference to the core");return}var A=new Map$1,k=!1;if(!S)S=[];else if(S.length>0&&plainObject(S[0])&&!element(S[0])){k=!0;for(var M=[],P=new Set$1,D=0,L=S.length;D<L;D++){var q=S[D];q.data==null&&(q.data={});var B=q.data;if(B.id==null)B.id=uuid();else if(v.hasElementWithId(B.id)||P.has(B.id))continue;var F=new Element$1(v,q,!1);M.push(F),P.add(B.id)}S=M}this.length=0;for(var j=0,z=S.length;j<z;j++){var V=S[j][0];if(V!=null){var G=V._private.data.id;(!R||!A.has(G))&&(R&&A.set(G,{index:this.length,ele:V}),this[this.length]=V,this.length++)}}this._private={eles:this,cy:v,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(W){this.lazyMap=W},rebuildMap:function(){for(var Y=this.lazyMap=new Map$1,X=this.eles,ee=0;ee<X.length;ee++){var re=X[ee];Y.set(re.id(),{index:ee,ele:re})}}},R&&(this._private.map=A),k&&!T&&this.restore()},elesfn$1=Element$1.prototype=Collection$3.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"};elesfn$1.spawn=function(_,v){return new Collection$3(this.cy(),_,v)};elesfn$1.spawnSelf=function(){return this.spawn(this)};elesfn$1.cy=function(){return this._private.cy};elesfn$1.renderer=function(){return this._private.cy.renderer()};elesfn$1.element=function(){return this[0]};elesfn$1.collection=function(){return collection(this)?this:new Collection$3(this._private.cy,[this])};elesfn$1.unique=function(){return new Collection$3(this._private.cy,this,!0)};elesfn$1.hasElementWithId=function(_){return _=""+_,this._private.map.has(_)};elesfn$1.getElementById=function(_){_=""+_;var v=this._private.cy,S=this._private.map.get(_);return S?S.ele:new Collection$3(v)};elesfn$1.$id=elesfn$1.getElementById;elesfn$1.poolIndex=function(){var _=this._private.cy,v=_._private.elements,S=this[0]._private.data.id;return v._private.map.get(S).index};elesfn$1.indexOf=function(_){var v=_[0]._private.data.id;return this._private.map.get(v).index};elesfn$1.indexOfId=function(_){return _=""+_,this._private.map.get(_).index};elesfn$1.json=function(_){var v=this.element(),S=this.cy();if(v==null&&_)return this;if(v!=null){var R=v._private;if(plainObject(_)){if(S.startBatch(),_.data){v.data(_.data);var T=R.data;if(v.isEdge()){var A=!1,k={},M=_.data.source,P=_.data.target;M!=null&&M!=T.source&&(k.source=""+M,A=!0),P!=null&&P!=T.target&&(k.target=""+P,A=!0),A&&(v=v.move(k))}else{var D="parent"in _.data,L=_.data.parent;D&&(L!=null||T.parent!=null)&&L!=T.parent&&(L===void 0&&(L=null),L!=null&&(L=""+L),v=v.move({parent:L}))}}_.position&&v.position(_.position);var q=function(z,V,G){var W=_[z];W!=null&&W!==R[z]&&(W?v[V]():v[G]())};return q("removed","remove","restore"),q("selected","select","unselect"),q("selectable","selectify","unselectify"),q("locked","lock","unlock"),q("grabbable","grabify","ungrabify"),q("pannable","panify","unpanify"),_.classes!=null&&v.classes(_.classes),S.endBatch(),this}else if(_===void 0){var B={data:copy$1(R.data),position:copy$1(R.position),group:R.group,removed:R.removed,selected:R.selected,selectable:R.selectable,locked:R.locked,grabbable:R.grabbable,pannable:R.pannable,classes:null};B.classes="";var F=0;return R.classes.forEach(function(j){return B.classes+=F++===0?j:" "+j}),B}}};elesfn$1.jsons=function(){for(var _=[],v=0;v<this.length;v++){var S=this[v],R=S.json();_.push(R)}return _};elesfn$1.clone=function(){for(var _=this.cy(),v=[],S=0;S<this.length;S++){var R=this[S],T=R.json(),A=new Element$1(_,T,!1);v.push(A)}return new Collection$3(_,v)};elesfn$1.copy=elesfn$1.clone;elesfn$1.restore=function(){for(var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this,R=S.cy(),T=R._private,A=[],k=[],M,P=0,D=S.length;P<D;P++){var L=S[P];v&&!L.removed()||(L.isNode()?A.push(L):k.push(L))}M=A.concat(k);var q,B=function(){M.splice(q,1),q--};for(q=0;q<M.length;q++){var F=M[q],j=F._private,z=j.data;if(F.clearTraversalCache(),!(!v&&!j.removed)){if(z.id===void 0)z.id=uuid();else if(number$1(z.id))z.id=""+z.id;else if(emptyString(z.id)||!string$1(z.id)){error("Can not create element with invalid string ID `"+z.id+"`"),B();continue}else if(R.hasElementWithId(z.id)){error("Can not create second element with ID `"+z.id+"`"),B();continue}}var V=z.id;if(F.isNode()){var G=j.position;G.x==null&&(G.x=0),G.y==null&&(G.y=0)}if(F.isEdge()){for(var W=F,Y=["source","target"],X=Y.length,ee=!1,re=0;re<X;re++){var Q=Y[re],ne=z[Q];number$1(ne)&&(ne=z[Q]=""+z[Q]),ne==null||ne===""?(error("Can not create edge `"+V+"` with unspecified "+Q),ee=!0):R.hasElementWithId(ne)||(error("Can not create edge `"+V+"` with nonexistant "+Q+" `"+ne+"`"),ee=!0)}if(ee){B();continue}var ae=R.getElementById(z.source),oe=R.getElementById(z.target);ae.same(oe)?ae._private.edges.push(W):(ae._private.edges.push(W),oe._private.edges.push(W)),W._private.source=ae,W._private.target=oe}j.map=new Map$1,j.map.set(V,{ele:F,index:0}),j.removed=!1,v&&R.addToPool(F)}for(var se=0;se<A.length;se++){var ce=A[se],de=ce._private.data;number$1(de.parent)&&(de.parent=""+de.parent);var ye=de.parent,we=ye!=null;if(we||ce._private.parent){var ge=ce._private.parent?R.collection().merge(ce._private.parent):R.getElementById(ye);if(ge.empty())de.parent=void 0;else if(ge[0].removed())warn$1("Node added with missing parent, reference to parent removed"),de.parent=void 0,ce._private.parent=null;else{for(var ve=!1,be=ge;!be.empty();){if(ce.same(be)){ve=!0,de.parent=void 0;break}be=be.parent()}ve||(ge[0]._private.children.push(ce),ce._private.parent=ge[0],T.hasCompoundNodes=!0)}}}if(M.length>0){for(var ke=M.length===S.length?S:new Collection$3(R,M),me=0;me<ke.length;me++){var fe=ke[me];fe.isNode()||(fe.parallelEdges().clearTraversalCache(),fe.source().clearTraversalCache(),fe.target().clearTraversalCache())}var xe;T.hasCompoundNodes?xe=R.collection().merge(ke).merge(ke.connectedNodes()).merge(ke.parent()):xe=ke,xe.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(_),_?ke.emitAndNotify("add"):v&&ke.emit("add")}return S};elesfn$1.removed=function(){var _=this[0];return _&&_._private.removed};elesfn$1.inside=function(){var _=this[0];return _&&!_._private.removed};elesfn$1.remove=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this,R=[],T={},A=S._private.cy;function k(ye){for(var we=ye._private.edges,ge=0;ge<we.length;ge++)P(we[ge])}function M(ye){for(var we=ye._private.children,ge=0;ge<we.length;ge++)P(we[ge])}function P(ye){var we=T[ye.id()];v&&ye.removed()||we||(T[ye.id()]=!0,ye.isNode()?(R.push(ye),k(ye),M(ye)):R.unshift(ye))}for(var D=0,L=S.length;D<L;D++){var q=S[D];P(q)}function B(ye,we){var ge=ye._private.edges;removeFromArray(ge,we),ye.clearTraversalCache()}function F(ye){ye.clearTraversalCache()}var j=[];j.ids={};function z(ye,we){we=we[0],ye=ye[0];var ge=ye._private.children,ve=ye.id();removeFromArray(ge,we),we._private.parent=null,j.ids[ve]||(j.ids[ve]=!0,j.push(ye))}S.dirtyCompoundBoundsCache(),v&&A.removeFromPool(R);for(var V=0;V<R.length;V++){var G=R[V];if(G.isEdge()){var W=G.source()[0],Y=G.target()[0];B(W,G),B(Y,G);for(var X=G.parallelEdges(),ee=0;ee<X.length;ee++){var re=X[ee];F(re),re.isBundledBezier()&&re.dirtyBoundingBoxCache()}}else{var Q=G.parent();Q.length!==0&&z(Q,G)}v&&(G._private.removed=!0)}var ne=A._private.elements;A._private.hasCompoundNodes=!1;for(var ae=0;ae<ne.length;ae++){var oe=ne[ae];if(oe.isParent()){A._private.hasCompoundNodes=!0;break}}var se=new Collection$3(this.cy(),R);se.size()>0&&(_?se.emitAndNotify("remove"):v&&se.emit("remove"));for(var ce=0;ce<j.length;ce++){var de=j[ce];(!v||!de.removed())&&de.updateStyle()}return se};elesfn$1.move=function(_){var v=this._private.cy,S=this,R=!1,T=!1,A=function(j){return j==null?j:""+j};if(_.source!==void 0||_.target!==void 0){var k=A(_.source),M=A(_.target),P=k!=null&&v.hasElementWithId(k),D=M!=null&&v.hasElementWithId(M);(P||D)&&(v.batch(function(){S.remove(R,T),S.emitAndNotify("moveout");for(var F=0;F<S.length;F++){var j=S[F],z=j._private.data;j.isEdge()&&(P&&(z.source=k),D&&(z.target=M))}S.restore(R,T)}),S.emitAndNotify("move"))}else if(_.parent!==void 0){var L=A(_.parent),q=L===null||v.hasElementWithId(L);if(q){var B=L===null?void 0:L;v.batch(function(){var F=S.remove(R,T);F.emitAndNotify("moveout");for(var j=0;j<S.length;j++){var z=S[j],V=z._private.data;z.isNode()&&(V.parent=B)}F.restore(R,T)}),S.emitAndNotify("move")}}return this};[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach(function(_){extend(elesfn$1,_)});var corefn$9={add:function(v){var S,R=this;if(elementOrCollection(v)){var T=v;if(T._private.cy===R)S=T.restore();else{for(var A=[],k=0;k<T.length;k++){var M=T[k];A.push(M.json())}S=new Collection$3(R,A)}}else if(array(v)){var P=v;S=new Collection$3(R,P)}else if(plainObject(v)&&(array(v.nodes)||array(v.edges))){for(var D=v,L=[],q=["nodes","edges"],B=0,F=q.length;B<F;B++){var j=q[B],z=D[j];if(array(z))for(var V=0,G=z.length;V<G;V++){var W=extend({group:j},z[V]);L.push(W)}}S=new Collection$3(R,L)}else{var Y=v;S=new Element$1(R,Y).collection()}return S},remove:function(v){if(!elementOrCollection(v)){if(string$1(v)){var S=v;v=this.$(S)}}return v.remove()}};function generateCubicBezier(_,v,S,R){var T=4,A=.001,k=1e-7,M=10,P=11,D=1/(P-1),L=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var q=0;q<4;++q)if(typeof arguments[q]!="number"||isNaN(arguments[q])||!isFinite(arguments[q]))return!1;_=Math.min(_,1),S=Math.min(S,1),_=Math.max(_,0),S=Math.max(S,0);var B=L?new Float32Array(P):new Array(P);function F(oe,se){return 1-3*se+3*oe}function j(oe,se){return 3*se-6*oe}function z(oe){return 3*oe}function V(oe,se,ce){return((F(se,ce)*oe+j(se,ce))*oe+z(se))*oe}function G(oe,se,ce){return 3*F(se,ce)*oe*oe+2*j(se,ce)*oe+z(se)}function W(oe,se){for(var ce=0;ce<T;++ce){var de=G(se,_,S);if(de===0)return se;var ye=V(se,_,S)-oe;se-=ye/de}return se}function Y(){for(var oe=0;oe<P;++oe)B[oe]=V(oe*D,_,S)}function X(oe,se,ce){var de,ye,we=0;do ye=se+(ce-se)/2,de=V(ye,_,S)-oe,de>0?ce=ye:se=ye;while(Math.abs(de)>k&&++we<M);return ye}function ee(oe){for(var se=0,ce=1,de=P-1;ce!==de&&B[ce]<=oe;++ce)se+=D;--ce;var ye=(oe-B[ce])/(B[ce+1]-B[ce]),we=se+ye*D,ge=G(we,_,S);return ge>=A?W(oe,we):ge===0?we:X(oe,se,se+D)}var re=!1;function Q(){re=!0,(_!==v||S!==R)&&Y()}var ne=function(se){return re||Q(),_===v&&S===R?se:se===0?0:se===1?1:V(ee(se),v,R)};ne.getControlPoints=function(){return[{x:_,y:v},{x:S,y:R}]};var ae="generateBezier("+[_,v,S,R]+")";return ne.toString=function(){return ae},ne}var generateSpringRK4=(function(){function _(R){return-R.tension*R.x-R.friction*R.v}function v(R,T,A){var k={x:R.x+A.dx*T,v:R.v+A.dv*T,tension:R.tension,friction:R.friction};return{dx:k.v,dv:_(k)}}function S(R,T){var A={dx:R.v,dv:_(R)},k=v(R,T*.5,A),M=v(R,T*.5,k),P=v(R,T,M),D=1/6*(A.dx+2*(k.dx+M.dx)+P.dx),L=1/6*(A.dv+2*(k.dv+M.dv)+P.dv);return R.x=R.x+D*T,R.v=R.v+L*T,R}return function R(T,A,k){var M={x:-1,v:0,tension:null,friction:null},P=[0],D=0,L=1/1e4,q=16/1e3,B,F,j;for(T=parseFloat(T)||500,A=parseFloat(A)||20,k=k||null,M.tension=T,M.friction=A,B=k!==null,B?(D=R(T,A),F=D/k*q):F=q;j=S(j||M,F),P.push(1+j.x),D+=16,Math.abs(j.x)>L&&Math.abs(j.v)>L;);return B?function(z){return P[z*(P.length-1)|0]}:D}})(),cubicBezier=function(v,S,R,T){var A=generateCubicBezier(v,S,R,T);return function(k,M,P){return k+(M-k)*A(P)}},easings={linear:function(v,S,R){return v+(S-v)*R},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(v,S,R){if(R===0)return easings.linear;var T=generateSpringRK4(v,S,R);return function(A,k,M){return A+(k-A)*T(M)}},"cubic-bezier":cubicBezier};function getEasedValue(_,v,S,R,T){if(R===1||v===S)return S;var A=T(v,S,R);return _==null||((_.roundValue||_.color)&&(A=Math.round(A)),_.min!==void 0&&(A=Math.max(A,_.min)),_.max!==void 0&&(A=Math.min(A,_.max))),A}function getValue(_,v){return _.pfValue!=null||_.value!=null?_.pfValue!=null&&(v==null||v.type.units!=="%")?_.pfValue:_.value:_}function ease(_,v,S,R,T){var A=T!=null?T.type:null;S<0?S=0:S>1&&(S=1);var k=getValue(_,T),M=getValue(v,T);if(number$1(k)&&number$1(M))return getEasedValue(A,k,M,S,R);if(array(k)&&array(M)){for(var P=[],D=0;D<M.length;D++){var L=k[D],q=M[D];if(L!=null&&q!=null){var B=getEasedValue(A,L,q,S,R);P.push(B)}else P.push(q)}return P}}function step$1(_,v,S,R){var T=!R,A=_._private,k=v._private,M=k.easing,P=k.startTime,D=R?_:_.cy(),L=D.style();if(!k.easingImpl)if(M==null)k.easingImpl=easings.linear;else{var q;if(string$1(M)){var B=L.parse("transition-timing-function",M);q=B.value}else q=M;var F,j;string$1(q)?(F=q,j=[]):(F=q[1],j=q.slice(2).map(function(ke){return+ke})),j.length>0?(F==="spring"&&j.push(k.duration),k.easingImpl=easings[F].apply(null,j)):k.easingImpl=easings[F]}var z=k.easingImpl,V;if(k.duration===0?V=1:V=(S-P)/k.duration,k.applying&&(V=k.progress),V<0?V=0:V>1&&(V=1),k.delay==null){var G=k.startPosition,W=k.position;if(W&&T&&!_.locked()){var Y={};valid(G.x,W.x)&&(Y.x=ease(G.x,W.x,V,z)),valid(G.y,W.y)&&(Y.y=ease(G.y,W.y,V,z)),_.position(Y)}var X=k.startPan,ee=k.pan,re=A.pan,Q=ee!=null&&R;Q&&(valid(X.x,ee.x)&&(re.x=ease(X.x,ee.x,V,z)),valid(X.y,ee.y)&&(re.y=ease(X.y,ee.y,V,z)),_.emit("pan"));var ne=k.startZoom,ae=k.zoom,oe=ae!=null&&R;oe&&(valid(ne,ae)&&(A.zoom=bound(A.minZoom,ease(ne,ae,V,z),A.maxZoom)),_.emit("zoom")),(Q||oe)&&_.emit("viewport");var se=k.style;if(se&&se.length>0&&T){for(var ce=0;ce<se.length;ce++){var de=se[ce],ye=de.name,we=de,ge=k.startStyle[ye],ve=L.properties[ge.name],be=ease(ge,we,V,z,ve);L.overrideBypass(_,ye,be)}_.emit("style")}}return k.progress=V,V}function valid(_,v){return _==null||v==null?!1:number$1(_)&&number$1(v)?!0:!!(_&&v)}function startAnimation(_,v,S,R){var T=v._private;T.started=!0,T.startTime=S-T.progress*T.duration}function stepAll(_,v){var S=v._private.aniEles,R=[];function T(L,q){var B=L._private,F=B.animation.current,j=B.animation.queue,z=!1;if(F.length===0){var V=j.shift();V&&F.push(V)}for(var G=function(re){for(var Q=re.length-1;Q>=0;Q--){var ne=re[Q];ne()}re.splice(0,re.length)},W=F.length-1;W>=0;W--){var Y=F[W],X=Y._private;if(X.stopped){F.splice(W,1),X.hooked=!1,X.playing=!1,X.started=!1,G(X.frames);continue}!X.playing&&!X.applying||(X.playing&&X.applying&&(X.applying=!1),X.started||startAnimation(L,Y,_),step$1(L,Y,_,q),X.applying&&(X.applying=!1),G(X.frames),X.step!=null&&X.step(_),Y.completed()&&(F.splice(W,1),X.hooked=!1,X.playing=!1,X.started=!1,G(X.completes)),z=!0)}return!q&&F.length===0&&j.length===0&&R.push(L),z}for(var A=!1,k=0;k<S.length;k++){var M=S[k],P=T(M);A=A||P}var D=T(v,!0);(A||D)&&(S.length>0?v.notify("draw",S):v.notify("draw")),S.unmerge(R),v.emit("step")}var corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function(v){var S=this;S.styleEnabled()&&S._private.aniEles.merge(v)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var v=this;if(v._private.animationsRunning=!0,!v.styleEnabled())return;function S(){v._private.animationsRunning&&requestAnimationFrame$1(function(A){stepAll(A,v),S()})}var R=v.renderer();R&&R.beforeRender?R.beforeRender(function(A,k){stepAll(k,v)},R.beforeRenderPriorities.animations):S()}},emitterOptions={qualifierCompare:function(v,S){return v==null||S==null?v==null&&S==null:v.sameText(S)},eventMatches:function(v,S,R){var T=S.qualifier;return T!=null?v!==R.target&&element(R.target)&&T.matches(R.target):!0},addEventFields:function(v,S){S.cy=v,S.target=v},callbackContext:function(v,S,R){return S.qualifier!=null?R.target:v}},argSelector=function(v){return string$1(v)?new Selector(v):v},elesfn={createEmitter:function(){var v=this._private;return v.emitter||(v.emitter=new Emitter(emitterOptions,this)),this},emitter:function(){return this._private.emitter},on:function(v,S,R){return this.emitter().on(v,argSelector(S),R),this},removeListener:function(v,S,R){return this.emitter().removeListener(v,argSelector(S),R),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(v,S,R){return this.emitter().one(v,argSelector(S),R),this},once:function(v,S,R){return this.emitter().one(v,argSelector(S),R),this},emit:function(v,S){return this.emitter().emit(v,S),this},emitAndNotify:function(v,S){return this.emit(v),this.notify(v,S),this}};define.eventAliasesOn(elesfn);var corefn$7={png:function(v){var S=this._private.renderer;return v=v||{},S.png(v)},jpg:function(v){var S=this._private.renderer;return v=v||{},v.bg=v.bg||"#fff",S.jpg(v)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function(v){var S=this;if(v==null){error("Layout options must be specified to make a layout");return}if(v.name==null){error("A `name` must be specified to make a layout");return}var R=v.name,T=S.extension("layout",R);if(T==null){error("No such layout `"+R+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var A;string$1(v.eles)?A=S.$(v.eles):A=v.eles!=null?v.eles:S.$();var k=new T(extend({},v,{cy:S,eles:A}));return k}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var corefn$5={notify:function(v,S){var R=this._private;if(this.batching()){R.batchNotifications=R.batchNotifications||{};var T=R.batchNotifications[v]=R.batchNotifications[v]||this.collection();S!=null&&T.merge(S);return}if(R.notificationsEnabled){var A=this.renderer();this.destroyed()||!A||A.notify(v,S)}},notifications:function(v){var S=this._private;return v===void 0?S.notificationsEnabled:(S.notificationsEnabled=!!v,this)},noNotifications:function(v){this.notifications(!1),v(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var v=this._private;return v.batchCount==null&&(v.batchCount=0),v.batchCount===0&&(v.batchStyleEles=this.collection(),v.batchNotifications={}),v.batchCount++,this},endBatch:function(){var v=this._private;if(v.batchCount===0)return this;if(v.batchCount--,v.batchCount===0){v.batchStyleEles.updateStyle();var S=this.renderer();Object.keys(v.batchNotifications).forEach(function(R){var T=v.batchNotifications[R];T.empty()?S.notify(R):S.notify(R,T)})}return this},batch:function(v){return this.startBatch(),v(),this.endBatch(),this},batchData:function(v){var S=this;return this.batch(function(){for(var R=Object.keys(v),T=0;T<R.length;T++){var A=R[T],k=v[A],M=S.getElementById(A);M.data(k)}})}},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),corefn$4={renderTo:function(v,S,R,T){var A=this._private.renderer;return A.renderTo(v,S,R,T),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(v){var S=this,R=S.extension("renderer",v.name);if(R==null){error("Can not initialise: No such renderer `".concat(v.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}v.wheelSensitivity!==void 0&&warn$1("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var T=rendererDefaults(v);T.cy=S,S._private.renderer=new R(T),this.notify("init")},destroyRenderer:function(){var v=this;v.notify("destroy");var S=v.container();if(S)for(S._cyreg=null;S.childNodes.length>0;)S.removeChild(S.childNodes[0]);v._private.renderer=null,v.mutableElements().forEach(function(R){var T=R._private;T.rscratch={},T.rstyle={},T.animation.current=[],T.animation.queue=[]})},onRender:function(v){return this.on("render",v)},offRender:function(v){return this.off("render",v)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function(v,S){return string$1(v)?this.$(v):elementOrCollection(v)?v.collection():array(v)?(S||(S={}),new Collection$3(this,v,S.unique,S.removed)):new Collection$3(this)},nodes:function(v){var S=this.$(function(R){return R.isNode()});return v?S.filter(v):S},edges:function(v){var S=this.$(function(R){return R.isEdge()});return v?S.filter(v):S},$:function(v){var S=this._private.elements;return v?S.filter(v):S.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$8={},TRUE="t",FALSE="f";styfn$8.apply=function(_){for(var v=this,S=v._private,R=S.cy,T=R.collection(),A=0;A<_.length;A++){var k=_[A],M=v.getContextMeta(k);if(!M.empty){var P=v.getContextStyle(M),D=v.applyContextStyle(M,P,k);k._private.appliedInitStyle?v.updateTransitions(k,D.diffProps):k._private.appliedInitStyle=!0;var L=v.updateStyleHints(k);L&&T.push(k)}}return T};styfn$8.getPropertiesDiff=function(_,v){var S=this,R=S._private.propDiffs=S._private.propDiffs||{},T=_+"-"+v,A=R[T];if(A)return A;for(var k=[],M={},P=0;P<S.length;P++){var D=S[P],L=_[P]===TRUE,q=v[P]===TRUE,B=L!==q,F=D.mappedProperties.length>0;if(B||q&&F){var j=void 0;B&&F||B?j=D.properties:F&&(j=D.mappedProperties);for(var z=0;z<j.length;z++){for(var V=j[z],G=V.name,W=!1,Y=P+1;Y<S.length;Y++){var X=S[Y],ee=v[Y]===TRUE;if(ee&&(W=X.properties[V.name]!=null,W))break}!M[G]&&!W&&(M[G]=!0,k.push(G))}}}return R[T]=k,k};styfn$8.getContextMeta=function(_){for(var v=this,S="",R,T=_._private.styleCxtKey||"",A=0;A<v.length;A++){var k=v[A],M=k.selector&&k.selector.matches(_);M?S+=TRUE:S+=FALSE}return R=v.getPropertiesDiff(T,S),_._private.styleCxtKey=S,{key:S,diffPropNames:R,empty:R.length===0}};styfn$8.getContextStyle=function(_){var v=_.key,S=this,R=this._private.contextStyles=this._private.contextStyles||{};if(R[v])return R[v];for(var T={_private:{key:v}},A=0;A<S.length;A++){var k=S[A],M=v[A]===TRUE;if(M)for(var P=0;P<k.properties.length;P++){var D=k.properties[P];T[D.name]=D}}return R[v]=T,T};styfn$8.applyContextStyle=function(_,v,S){for(var R=this,T=_.diffPropNames,A={},k=R.types,M=0;M<T.length;M++){var P=T[M],D=v[P],L=S.pstyle(P);if(!D)if(L)L.bypass?D={name:P,deleteBypassed:!0}:D={name:P,delete:!0};else continue;if(L!==D){if(D.mapped===k.fn&&L!=null&&L.mapping!=null&&L.mapping.value===D.value){var q=L.mapping,B=q.fnValue=D.value(S);if(B===q.prevFnValue)continue}var F=A[P]={prev:L};R.applyParsedProperty(S,D),F.next=S.pstyle(P),F.next&&F.next.bypass&&(F.next=F.next.bypassed)}}return{diffProps:A}};styfn$8.updateStyleHints=function(_){var v=_._private,S=this,R=S.propertyGroupNames,T=S.propertyGroupKeys,A=function(Le,Ne,tt){return S.getPropertiesHash(Le,Ne,tt)},k=v.styleKey;if(_.removed())return!1;var M=v.group==="nodes",P=_._private.style;R=Object.keys(P);for(var D=0;D<T.length;D++){var L=T[D];v.styleKeys[L]=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]}for(var q=function(Le,Ne){return v.styleKeys[Ne][0]=hashInt(Le,v.styleKeys[Ne][0])},B=function(Le,Ne){return v.styleKeys[Ne][1]=hashIntAlt(Le,v.styleKeys[Ne][1])},F=function(Le,Ne){q(Le,Ne),B(Le,Ne)},j=function(Le,Ne){for(var tt=0;tt<Le.length;tt++){var it=Le.charCodeAt(tt);q(it,Ne),B(it,Ne)}},z=2e9,V=function(Le){return-128<Le&&Le<128&&Math.floor(Le)!==Le?z-(Le*1024|0):Le},G=0;G<R.length;G++){var W=R[G],Y=P[W];if(Y!=null){var X=this.properties[W],ee=X.type,re=X.groupKey,Q=void 0;X.hashOverride!=null?Q=X.hashOverride(_,Y):Y.pfValue!=null&&(Q=Y.pfValue);var ne=X.enums==null?Y.value:null,ae=Q!=null,oe=ne!=null,se=ae||oe,ce=Y.units;if(ee.number&&se&&!ee.multiple){var de=ae?Q:ne;F(V(de),re),!ae&&ce!=null&&j(ce,re)}else j(Y.strValue,re)}}for(var ye=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT],we=0;we<T.length;we++){var ge=T[we],ve=v.styleKeys[ge];ye[0]=hashInt(ve[0],ye[0]),ye[1]=hashIntAlt(ve[1],ye[1])}v.styleKey=combineHashes(ye[0],ye[1]);var be=v.styleKeys;v.labelDimsKey=combineHashesArray(be.labelDimensions);var ke=A(_,["label"],be.labelDimensions);if(v.labelKey=combineHashesArray(ke),v.labelStyleKey=combineHashesArray(hashArrays(be.commonLabel,ke)),!M){var me=A(_,["source-label"],be.labelDimensions);v.sourceLabelKey=combineHashesArray(me),v.sourceLabelStyleKey=combineHashesArray(hashArrays(be.commonLabel,me));var fe=A(_,["target-label"],be.labelDimensions);v.targetLabelKey=combineHashesArray(fe),v.targetLabelStyleKey=combineHashesArray(hashArrays(be.commonLabel,fe))}if(M){var xe=v.styleKeys,Ae=xe.nodeBody,Se=xe.nodeBorder,Me=xe.nodeOutline,Oe=xe.backgroundImage,Ce=xe.compound,$e=xe.pie,Be=xe.stripe,Pe=[Ae,Se,Me,Oe,Ce,$e,Be].filter(function(De){return De!=null}).reduce(hashArrays,[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]);v.nodeKey=combineHashesArray(Pe),v.hasPie=$e!=null&&$e[0]!==DEFAULT_HASH_SEED&&$e[1]!==DEFAULT_HASH_SEED_ALT,v.hasStripe=Be!=null&&Be[0]!==DEFAULT_HASH_SEED&&Be[1]!==DEFAULT_HASH_SEED_ALT}return k!==v.styleKey};styfn$8.clearStyleHints=function(_){var v=_._private;v.styleCxtKey="",v.styleKeys={},v.styleKey=null,v.labelKey=null,v.labelStyleKey=null,v.sourceLabelKey=null,v.sourceLabelStyleKey=null,v.targetLabelKey=null,v.targetLabelStyleKey=null,v.nodeKey=null,v.hasPie=null,v.hasStripe=null};styfn$8.applyParsedProperty=function(_,v){var S=this,R=v,T=_._private.style,A,k=S.types,M=S.properties[R.name].type,P=R.bypass,D=T[R.name],L=D&&D.bypass,q=_._private,B="mapping",F=function(Ae){return Ae==null?null:Ae.pfValue!=null?Ae.pfValue:Ae.value},j=function(){var Ae=F(D),Se=F(R);S.checkTriggers(_,R.name,Ae,Se)};if(v.name==="curve-style"&&_.isEdge()&&(v.value!=="bezier"&&_.isLoop()||v.value==="haystack"&&(_.source().isParent()||_.target().isParent()))&&(R=v=this.parse(v.name,"bezier",P)),R.delete)return T[R.name]=void 0,j(),!0;if(R.deleteBypassed)return D?D.bypass?(D.bypassed=void 0,j(),!0):!1:(j(),!0);if(R.deleteBypass)return D?D.bypass?(T[R.name]=D.bypassed,j(),!0):!1:(j(),!0);var z=function(){warn$1("Do not assign mappings to elements without corresponding data (i.e. ele `"+_.id()+"` has no mapping for property `"+R.name+"` with data field `"+R.field+"`); try a `["+R.field+"]` selector to limit scope to elements with `"+R.field+"` defined")};switch(R.mapped){case k.mapData:{for(var V=R.field.split("."),G=q.data,W=0;W<V.length&&G;W++){var Y=V[W];G=G[Y]}if(G==null)return z(),!1;var X;if(number$1(G)){var ee=R.fieldMax-R.fieldMin;ee===0?X=0:X=(G-R.fieldMin)/ee}else return warn$1("Do not use continuous mappers without specifying numeric data (i.e. `"+R.field+": "+G+"` for `"+_.id()+"` is non-numeric)"),!1;if(X<0?X=0:X>1&&(X=1),M.color){var re=R.valueMin[0],Q=R.valueMax[0],ne=R.valueMin[1],ae=R.valueMax[1],oe=R.valueMin[2],se=R.valueMax[2],ce=R.valueMin[3]==null?1:R.valueMin[3],de=R.valueMax[3]==null?1:R.valueMax[3],ye=[Math.round(re+(Q-re)*X),Math.round(ne+(ae-ne)*X),Math.round(oe+(se-oe)*X),Math.round(ce+(de-ce)*X)];A={bypass:R.bypass,name:R.name,value:ye,strValue:"rgb("+ye[0]+", "+ye[1]+", "+ye[2]+")"}}else if(M.number){var we=R.valueMin+(R.valueMax-R.valueMin)*X;A=this.parse(R.name,we,R.bypass,B)}else return!1;if(!A)return z(),!1;A.mapping=R,R=A;break}case k.data:{for(var ge=R.field.split("."),ve=q.data,be=0;be<ge.length&&ve;be++){var ke=ge[be];ve=ve[ke]}if(ve!=null&&(A=this.parse(R.name,ve,R.bypass,B)),!A)return z(),!1;A.mapping=R,R=A;break}case k.fn:{var me=R.value,fe=R.fnValue!=null?R.fnValue:me(_);if(R.prevFnValue=fe,fe==null)return warn$1("Custom function mappers may not return null (i.e. `"+R.name+"` for ele `"+_.id()+"` is null)"),!1;if(A=this.parse(R.name,fe,R.bypass,B),!A)return warn$1("Custom function mappers may not return invalid values for the property type (i.e. `"+R.name+"` for ele `"+_.id()+"` is invalid)"),!1;A.mapping=copy$1(R),R=A;break}case void 0:break;default:return!1}return P?(L?R.bypassed=D.bypassed:R.bypassed=D,T[R.name]=R):L?D.bypassed=R:T[R.name]=R,j(),!0};styfn$8.cleanElements=function(_,v){for(var S=0;S<_.length;S++){var R=_[S];if(this.clearStyleHints(R),R.dirtyCompoundBoundsCache(),R.dirtyBoundingBoxCache(),!v)R._private.style={};else for(var T=R._private.style,A=Object.keys(T),k=0;k<A.length;k++){var M=A[k],P=T[M];P!=null&&(P.bypass?P.bypassed=null:T[M]=null)}}};styfn$8.update=function(){var _=this._private.cy,v=_.mutableElements();v.updateStyle()};styfn$8.updateTransitions=function(_,v){var S=this,R=_._private,T=_.pstyle("transition-property").value,A=_.pstyle("transition-duration").pfValue,k=_.pstyle("transition-delay").pfValue;if(T.length>0&&A>0){for(var M={},P=!1,D=0;D<T.length;D++){var L=T[D],q=_.pstyle(L),B=v[L];if(B){var F=B.prev,j=F,z=B.next!=null?B.next:q,V=!1,G=void 0,W=1e-6;j&&(number$1(j.pfValue)&&number$1(z.pfValue)?(V=z.pfValue-j.pfValue,G=j.pfValue+W*V):number$1(j.value)&&number$1(z.value)?(V=z.value-j.value,G=j.value+W*V):array(j.value)&&array(z.value)&&(V=j.value[0]!==z.value[0]||j.value[1]!==z.value[1]||j.value[2]!==z.value[2],G=j.strValue),V&&(M[L]=z.strValue,this.applyBypass(_,L,G),P=!0))}}if(!P)return;R.transitioning=!0,new Promise$1(function(Y){k>0?_.delayAnimation(k).play().promise().then(Y):Y()}).then(function(){return _.animation({style:M,duration:A,easing:_.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){S.removeBypasses(_,T),_.emitAndNotify("style"),R.transitioning=!1})}else R.transitioning&&(this.removeBypasses(_,T),_.emitAndNotify("style"),R.transitioning=!1)};styfn$8.checkTrigger=function(_,v,S,R,T,A){var k=this.properties[v],M=T(k);_.removed()||M!=null&&M(S,R,_)&&A(k)};styfn$8.checkZOrderTrigger=function(_,v,S,R){var T=this;this.checkTrigger(_,v,S,R,function(A){return A.triggersZOrder},function(){T._private.cy.notify("zorder",_)})};styfn$8.checkBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBounds},function(T){_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache()})};styfn$8.checkConnectedEdgesBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBoundsOfConnectedEdges},function(T){_.connectedEdges().forEach(function(A){A.dirtyBoundingBoxCache()})})};styfn$8.checkParallelEdgesBoundsTrigger=function(_,v,S,R){this.checkTrigger(_,v,S,R,function(T){return T.triggersBoundsOfParallelEdges},function(T){_.parallelEdges().forEach(function(A){A.dirtyBoundingBoxCache()})})};styfn$8.checkTriggers=function(_,v,S,R){_.dirtyStyleCache(),this.checkZOrderTrigger(_,v,S,R),this.checkBoundsTrigger(_,v,S,R),this.checkConnectedEdgesBoundsTrigger(_,v,S,R),this.checkParallelEdgesBoundsTrigger(_,v,S,R)};var styfn$7={};styfn$7.applyBypass=function(_,v,S,R){var T=this,A=[],k=!0;if(v==="*"||v==="**"){if(S!==void 0)for(var M=0;M<T.properties.length;M++){var P=T.properties[M],D=P.name,L=this.parse(D,S,!0);L&&A.push(L)}}else if(string$1(v)){var q=this.parse(v,S,!0);q&&A.push(q)}else if(plainObject(v)){var B=v;R=S;for(var F=Object.keys(B),j=0;j<F.length;j++){var z=F[j],V=B[z];if(V===void 0&&(V=B[dash2camel(z)]),V!==void 0){var G=this.parse(z,V,!0);G&&A.push(G)}}}else return!1;if(A.length===0)return!1;for(var W=!1,Y=0;Y<_.length;Y++){for(var X=_[Y],ee={},re=void 0,Q=0;Q<A.length;Q++){var ne=A[Q];if(R){var ae=X.pstyle(ne.name);re=ee[ne.name]={prev:ae}}W=this.applyParsedProperty(X,copy$1(ne))||W,R&&(re.next=X.pstyle(ne.name))}W&&this.updateStyleHints(X),R&&this.updateTransitions(X,ee,k)}return W};styfn$7.overrideBypass=function(_,v,S){v=camel2dash(v);for(var R=0;R<_.length;R++){var T=_[R],A=T._private.style[v],k=this.properties[v].type,M=k.color,P=k.mutiple,D=A?A.pfValue!=null?A.pfValue:A.value:null;!A||!A.bypass?this.applyBypass(T,v,S):(A.value=S,A.pfValue!=null&&(A.pfValue=S),M?A.strValue="rgb("+S.join(",")+")":P?A.strValue=S.join(" "):A.strValue=""+S,this.updateStyleHints(T)),this.checkTriggers(T,v,D,S)}};styfn$7.removeAllBypasses=function(_,v){return this.removeBypasses(_,this.propertyNames,v)};styfn$7.removeBypasses=function(_,v,S){for(var R=!0,T=0;T<_.length;T++){for(var A=_[T],k={},M=0;M<v.length;M++){var P=v[M],D=this.properties[P],L=A.pstyle(D.name);if(!(!L||!L.bypass)){var q="",B=this.parse(P,q,!0),F=k[D.name]={prev:L};this.applyParsedProperty(A,B),F.next=A.pstyle(D.name)}}this.updateStyleHints(A),S&&this.updateTransitions(A,k,R)}};var styfn$6={};styfn$6.getEmSizeInPixels=function(){var _=this.containerCss("font-size");return _!=null?parseFloat(_):1};styfn$6.containerCss=function(_){var v=this._private.cy,S=v.container(),R=v.window();if(R&&S&&R.getComputedStyle)return R.getComputedStyle(S).getPropertyValue(_)};var styfn$5={};styfn$5.getRenderedStyle=function(_,v){return v?this.getStylePropertyValue(_,v,!0):this.getRawStyle(_,!0)};styfn$5.getRawStyle=function(_,v){var S=this;if(_=_[0],_){for(var R={},T=0;T<S.properties.length;T++){var A=S.properties[T],k=S.getStylePropertyValue(_,A.name,v);k!=null&&(R[A.name]=k,R[dash2camel(A.name)]=k)}return R}};styfn$5.getIndexedStyle=function(_,v,S,R){var T=_.pstyle(v)[S][R];return T??_.cy().style().getDefaultProperty(v)[S][0]};styfn$5.getStylePropertyValue=function(_,v,S){var R=this;if(_=_[0],_){var T=R.properties[v];T.alias&&(T=T.pointsTo);var A=T.type,k=_.pstyle(T.name);if(k){var M=k.value,P=k.units,D=k.strValue;if(S&&A.number&&M!=null&&number$1(M)){var L=_.cy().zoom(),q=function(V){return V*L},B=function(V,G){return q(V)+G},F=array(M),j=F?P.every(function(z){return z!=null}):P!=null;return j?F?M.map(function(z,V){return B(z,P[V])}).join(" "):B(M,P):F?M.map(function(z){return string$1(z)?z:""+q(z)}).join(" "):""+q(M)}else if(D!=null)return D}return null}};styfn$5.getAnimationStartStyle=function(_,v){for(var S={},R=0;R<v.length;R++){var T=v[R],A=T.name,k=_.pstyle(A);k!==void 0&&(plainObject(k)?k=this.parse(A,k.strValue):k=this.parse(A,k)),k&&(S[A]=k)}return S};styfn$5.getPropsList=function(_){var v=this,S=[],R=_,T=v.properties;if(R)for(var A=Object.keys(R),k=0;k<A.length;k++){var M=A[k],P=R[M],D=T[M]||T[camel2dash(M)],L=this.parse(D.name,P);L&&S.push(L)}return S};styfn$5.getNonDefaultPropertiesHash=function(_,v,S){var R=S.slice(),T,A,k,M,P,D;for(P=0;P<v.length;P++)if(T=v[P],A=_.pstyle(T,!1),A!=null)if(A.pfValue!=null)R[0]=hashInt(M,R[0]),R[1]=hashIntAlt(M,R[1]);else for(k=A.strValue,D=0;D<k.length;D++)M=k.charCodeAt(D),R[0]=hashInt(M,R[0]),R[1]=hashIntAlt(M,R[1]);return R};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$4={};styfn$4.appendFromJson=function(_){for(var v=this,S=0;S<_.length;S++){var R=_[S],T=R.selector,A=R.style||R.css,k=Object.keys(A);v.selector(T);for(var M=0;M<k.length;M++){var P=k[M],D=A[P];v.css(P,D)}}return v};styfn$4.fromJson=function(_){var v=this;return v.resetToDefault(),v.appendFromJson(_),v};styfn$4.json=function(){for(var _=[],v=this.defaultLength;v<this.length;v++){for(var S=this[v],R=S.selector,T=S.properties,A={},k=0;k<T.length;k++){var M=T[k];A[M.name]=M.strValue}_.push({selector:R?R.toString():"core",style:A})}return _};var styfn$3={};styfn$3.appendFromString=function(_){var v=this,S=this,R=""+_,T,A,k;R=R.replace(/[/][*](\s|.)+?[*][/]/g,"");function M(){R.length>T.length?R=R.substr(T.length):R=""}function P(){A.length>k.length?A=A.substr(k.length):A=""}for(;;){var D=R.match(/^\s*$/);if(D)break;var L=R.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!L){warn$1("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+R);break}T=L[0];var q=L[1];if(q!=="core"){var B=new Selector(q);if(B.invalid){warn$1("Skipping parsing of block: Invalid selector found in string stylesheet: "+q),M();continue}}var F=L[2],j=!1;A=F;for(var z=[];;){var V=A.match(/^\s*$/);if(V)break;var G=A.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!G){warn$1("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+F),j=!0;break}k=G[0];var W=G[1],Y=G[2],X=v.properties[W];if(!X){warn$1("Skipping property: Invalid property name in: "+k),P();continue}var ee=S.parse(W,Y);if(!ee){warn$1("Skipping property: Invalid property definition in: "+k),P();continue}z.push({name:W,val:Y}),P()}if(j){M();break}S.selector(q);for(var re=0;re<z.length;re++){var Q=z[re];S.css(Q.name,Q.val)}M()}return S};styfn$3.fromString=function(_){var v=this;return v.resetToDefault(),v.appendFromString(_),v};var styfn$2={};(function(){var _=number$2,v=rgbaNoBackRefs,S=hslaNoBackRefs,R=hex3,T=hex6,A=function(De){return"^"+De+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},k=function(De){var Le=_+"|\\w+|"+v+"|"+S+"|"+R+"|"+T;return"^"+De+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+_+")\\s*\\,\\s*("+_+")\\s*,\\s*("+Le+")\\s*\\,\\s*("+Le+")\\)$"},M=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:A("data")},layoutData:{mapping:!0,regex:A("layoutData")},scratch:{mapping:!0,regex:A("scratch")},mapData:{mapping:!0,regex:k("mapData")},mapLayoutData:{mapping:!0,regex:k("mapLayoutData")},mapScratch:{mapping:!0,regex:k("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:M,singleRegexMatchValue:!0},urls:{regexes:M,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(De,Le){switch(De.length){case 2:return Le[0]!=="deg"&&Le[0]!=="rad"&&Le[1]!=="deg"&&Le[1]!=="rad";case 1:return string$1(De[0])||Le[0]==="deg"||Le[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+_+")\\s*,\\s*("+_+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+_+")\\s*,\\s*("+_+")\\s*,\\s*("+_+")\\s*,\\s*("+_+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(De){var Le=De.length;return Le===1||Le===2||Le===4}}};var P={zeroNonZero:function(De,Le){return(De==null||Le==null)&&De!==Le||De==0&&Le!=0?!0:De!=0&&Le==0},any:function(De,Le){return De!=Le},emptyNonEmpty:function(De,Le){var Ne=emptyString(De),tt=emptyString(Le);return Ne&&!tt||!Ne&&tt}},D=styfn$2.types,L=[{name:"label",type:D.text,triggersBounds:P.any,triggersZOrder:P.emptyNonEmpty},{name:"text-rotation",type:D.textRotation,triggersBounds:P.any},{name:"text-margin-x",type:D.bidirectionalSize,triggersBounds:P.any},{name:"text-margin-y",type:D.bidirectionalSize,triggersBounds:P.any}],q=[{name:"source-label",type:D.text,triggersBounds:P.any},{name:"source-text-rotation",type:D.textRotation,triggersBounds:P.any},{name:"source-text-margin-x",type:D.bidirectionalSize,triggersBounds:P.any},{name:"source-text-margin-y",type:D.bidirectionalSize,triggersBounds:P.any},{name:"source-text-offset",type:D.size,triggersBounds:P.any}],B=[{name:"target-label",type:D.text,triggersBounds:P.any},{name:"target-text-rotation",type:D.textRotation,triggersBounds:P.any},{name:"target-text-margin-x",type:D.bidirectionalSize,triggersBounds:P.any},{name:"target-text-margin-y",type:D.bidirectionalSize,triggersBounds:P.any},{name:"target-text-offset",type:D.size,triggersBounds:P.any}],F=[{name:"font-family",type:D.fontFamily,triggersBounds:P.any},{name:"font-style",type:D.fontStyle,triggersBounds:P.any},{name:"font-weight",type:D.fontWeight,triggersBounds:P.any},{name:"font-size",type:D.size,triggersBounds:P.any},{name:"text-transform",type:D.textTransform,triggersBounds:P.any},{name:"text-wrap",type:D.textWrap,triggersBounds:P.any},{name:"text-overflow-wrap",type:D.textOverflowWrap,triggersBounds:P.any},{name:"text-max-width",type:D.size,triggersBounds:P.any},{name:"text-outline-width",type:D.size,triggersBounds:P.any},{name:"line-height",type:D.positiveNumber,triggersBounds:P.any}],j=[{name:"text-valign",type:D.valign,triggersBounds:P.any},{name:"text-halign",type:D.halign,triggersBounds:P.any},{name:"color",type:D.color},{name:"text-outline-color",type:D.color},{name:"text-outline-opacity",type:D.zeroOneNumber},{name:"text-background-color",type:D.color},{name:"text-background-opacity",type:D.zeroOneNumber},{name:"text-background-padding",type:D.size,triggersBounds:P.any},{name:"text-border-opacity",type:D.zeroOneNumber},{name:"text-border-color",type:D.color},{name:"text-border-width",type:D.size,triggersBounds:P.any},{name:"text-border-style",type:D.borderStyle,triggersBounds:P.any},{name:"text-background-shape",type:D.textBackgroundShape,triggersBounds:P.any},{name:"text-justification",type:D.justification},{name:"box-select-labels",type:D.bool,triggersBounds:P.any}],z=[{name:"events",type:D.bool,triggersZOrder:P.any},{name:"text-events",type:D.bool,triggersZOrder:P.any},{name:"box-selection",type:D.boxSelection,triggersZOrder:P.any}],V=[{name:"display",type:D.display,triggersZOrder:P.any,triggersBounds:P.any,triggersBoundsOfConnectedEdges:P.any,triggersBoundsOfParallelEdges:function(De,Le,Ne){return De===Le?!1:Ne.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:D.visibility,triggersZOrder:P.any},{name:"opacity",type:D.zeroOneNumber,triggersZOrder:P.zeroNonZero},{name:"text-opacity",type:D.zeroOneNumber},{name:"min-zoomed-font-size",type:D.size},{name:"z-compound-depth",type:D.zCompoundDepth,triggersZOrder:P.any},{name:"z-index-compare",type:D.zIndexCompare,triggersZOrder:P.any},{name:"z-index",type:D.number,triggersZOrder:P.any}],G=[{name:"overlay-padding",type:D.size,triggersBounds:P.any},{name:"overlay-color",type:D.color},{name:"overlay-opacity",type:D.zeroOneNumber,triggersBounds:P.zeroNonZero},{name:"overlay-shape",type:D.overlayShape,triggersBounds:P.any},{name:"overlay-corner-radius",type:D.cornerRadius}],W=[{name:"underlay-padding",type:D.size,triggersBounds:P.any},{name:"underlay-color",type:D.color},{name:"underlay-opacity",type:D.zeroOneNumber,triggersBounds:P.zeroNonZero},{name:"underlay-shape",type:D.overlayShape,triggersBounds:P.any},{name:"underlay-corner-radius",type:D.cornerRadius}],Y=[{name:"transition-property",type:D.propList},{name:"transition-duration",type:D.time},{name:"transition-delay",type:D.time},{name:"transition-timing-function",type:D.easing}],X=function(De,Le){return Le.value==="label"?-De.poolIndex():Le.pfValue},ee=[{name:"height",type:D.nodeSize,triggersBounds:P.any,hashOverride:X},{name:"width",type:D.nodeSize,triggersBounds:P.any,hashOverride:X},{name:"shape",type:D.nodeShape,triggersBounds:P.any},{name:"shape-polygon-points",type:D.polygonPointList,triggersBounds:P.any},{name:"corner-radius",type:D.cornerRadius},{name:"background-color",type:D.color},{name:"background-fill",type:D.fill},{name:"background-opacity",type:D.zeroOneNumber},{name:"background-blacken",type:D.nOneOneNumber},{name:"background-gradient-stop-colors",type:D.colors},{name:"background-gradient-stop-positions",type:D.percentages},{name:"background-gradient-direction",type:D.gradientDirection},{name:"padding",type:D.sizeMaybePercent,triggersBounds:P.any},{name:"padding-relative-to",type:D.paddingRelativeTo,triggersBounds:P.any},{name:"bounds-expansion",type:D.boundsExpansion,triggersBounds:P.any}],re=[{name:"border-color",type:D.color},{name:"border-opacity",type:D.zeroOneNumber},{name:"border-width",type:D.size,triggersBounds:P.any},{name:"border-style",type:D.borderStyle},{name:"border-cap",type:D.lineCap},{name:"border-join",type:D.lineJoin},{name:"border-dash-pattern",type:D.numbers},{name:"border-dash-offset",type:D.number},{name:"border-position",type:D.linePosition}],Q=[{name:"outline-color",type:D.color},{name:"outline-opacity",type:D.zeroOneNumber},{name:"outline-width",type:D.size,triggersBounds:P.any},{name:"outline-style",type:D.borderStyle},{name:"outline-offset",type:D.size,triggersBounds:P.any}],ne=[{name:"background-image",type:D.urls},{name:"background-image-crossorigin",type:D.bgCrossOrigin},{name:"background-image-opacity",type:D.zeroOneNumbers},{name:"background-image-containment",type:D.bgContainment},{name:"background-image-smoothing",type:D.bools},{name:"background-position-x",type:D.bgPos},{name:"background-position-y",type:D.bgPos},{name:"background-width-relative-to",type:D.bgRelativeTo},{name:"background-height-relative-to",type:D.bgRelativeTo},{name:"background-repeat",type:D.bgRepeat},{name:"background-fit",type:D.bgFit},{name:"background-clip",type:D.bgClip},{name:"background-width",type:D.bgWH},{name:"background-height",type:D.bgWH},{name:"background-offset-x",type:D.bgPos},{name:"background-offset-y",type:D.bgPos}],ae=[{name:"position",type:D.position,triggersBounds:P.any},{name:"compound-sizing-wrt-labels",type:D.compoundIncludeLabels,triggersBounds:P.any},{name:"min-width",type:D.size,triggersBounds:P.any},{name:"min-width-bias-left",type:D.sizeMaybePercent,triggersBounds:P.any},{name:"min-width-bias-right",type:D.sizeMaybePercent,triggersBounds:P.any},{name:"min-height",type:D.size,triggersBounds:P.any},{name:"min-height-bias-top",type:D.sizeMaybePercent,triggersBounds:P.any},{name:"min-height-bias-bottom",type:D.sizeMaybePercent,triggersBounds:P.any}],oe=[{name:"line-style",type:D.lineStyle},{name:"line-color",type:D.color},{name:"line-fill",type:D.fill},{name:"line-cap",type:D.lineCap},{name:"line-opacity",type:D.zeroOneNumber},{name:"line-dash-pattern",type:D.numbers},{name:"line-dash-offset",type:D.number},{name:"line-outline-width",type:D.size},{name:"line-outline-color",type:D.color},{name:"line-gradient-stop-colors",type:D.colors},{name:"line-gradient-stop-positions",type:D.percentages},{name:"curve-style",type:D.curveStyle,triggersBounds:P.any,triggersBoundsOfParallelEdges:function(De,Le){return De===Le?!1:De==="bezier"||Le==="bezier"}},{name:"haystack-radius",type:D.zeroOneNumber,triggersBounds:P.any},{name:"source-endpoint",type:D.edgeEndpoint,triggersBounds:P.any},{name:"target-endpoint",type:D.edgeEndpoint,triggersBounds:P.any},{name:"control-point-step-size",type:D.size,triggersBounds:P.any},{name:"control-point-distances",type:D.bidirectionalSizes,triggersBounds:P.any},{name:"control-point-weights",type:D.numbers,triggersBounds:P.any},{name:"segment-distances",type:D.bidirectionalSizes,triggersBounds:P.any},{name:"segment-weights",type:D.numbers,triggersBounds:P.any},{name:"segment-radii",type:D.numbers,triggersBounds:P.any},{name:"radius-type",type:D.radiusType,triggersBounds:P.any},{name:"taxi-turn",type:D.bidirectionalSizeMaybePercent,triggersBounds:P.any},{name:"taxi-turn-min-distance",type:D.size,triggersBounds:P.any},{name:"taxi-direction",type:D.axisDirection,triggersBounds:P.any},{name:"taxi-radius",type:D.number,triggersBounds:P.any},{name:"edge-distances",type:D.edgeDistances,triggersBounds:P.any},{name:"arrow-scale",type:D.positiveNumber,triggersBounds:P.any},{name:"loop-direction",type:D.angle,triggersBounds:P.any},{name:"loop-sweep",type:D.angle,triggersBounds:P.any},{name:"source-distance-from-node",type:D.size,triggersBounds:P.any},{name:"target-distance-from-node",type:D.size,triggersBounds:P.any}],se=[{name:"ghost",type:D.bool,triggersBounds:P.any},{name:"ghost-offset-x",type:D.bidirectionalSize,triggersBounds:P.any},{name:"ghost-offset-y",type:D.bidirectionalSize,triggersBounds:P.any},{name:"ghost-opacity",type:D.zeroOneNumber}],ce=[{name:"selection-box-color",type:D.color},{name:"selection-box-opacity",type:D.zeroOneNumber},{name:"selection-box-border-color",type:D.color},{name:"selection-box-border-width",type:D.size},{name:"active-bg-color",type:D.color},{name:"active-bg-opacity",type:D.zeroOneNumber},{name:"active-bg-size",type:D.size},{name:"outside-texture-bg-color",type:D.color},{name:"outside-texture-bg-opacity",type:D.zeroOneNumber}],de=[];styfn$2.pieBackgroundN=16,de.push({name:"pie-size",type:D.sizeMaybePercent}),de.push({name:"pie-hole",type:D.sizeMaybePercent}),de.push({name:"pie-start-angle",type:D.angle});for(var ye=1;ye<=styfn$2.pieBackgroundN;ye++)de.push({name:"pie-"+ye+"-background-color",type:D.color}),de.push({name:"pie-"+ye+"-background-size",type:D.percent}),de.push({name:"pie-"+ye+"-background-opacity",type:D.zeroOneNumber});var we=[];styfn$2.stripeBackgroundN=16,we.push({name:"stripe-size",type:D.sizeMaybePercent}),we.push({name:"stripe-direction",type:D.axisDirectionPrimary});for(var ge=1;ge<=styfn$2.stripeBackgroundN;ge++)we.push({name:"stripe-"+ge+"-background-color",type:D.color}),we.push({name:"stripe-"+ge+"-background-size",type:D.percent}),we.push({name:"stripe-"+ge+"-background-opacity",type:D.zeroOneNumber});var ve=[],be=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:D.arrowShape,triggersBounds:P.any},{name:"arrow-color",type:D.color},{name:"arrow-fill",type:D.arrowFill},{name:"arrow-width",type:D.arrowWidth}].forEach(function(Pe){be.forEach(function(De){var Le=De+"-"+Pe.name,Ne=Pe.type,tt=Pe.triggersBounds;ve.push({name:Le,type:Ne,triggersBounds:tt})})},{});var ke=styfn$2.properties=[].concat(z,Y,V,G,W,se,j,F,L,q,B,ee,re,Q,ne,de,we,ae,oe,ve,ce),me=styfn$2.propertyGroups={behavior:z,transition:Y,visibility:V,overlay:G,underlay:W,ghost:se,commonLabel:j,labelDimensions:F,mainLabel:L,sourceLabel:q,targetLabel:B,nodeBody:ee,nodeBorder:re,nodeOutline:Q,backgroundImage:ne,pie:de,stripe:we,compound:ae,edgeLine:oe,edgeArrow:ve,core:ce},fe=styfn$2.propertyGroupNames={},xe=styfn$2.propertyGroupKeys=Object.keys(me);xe.forEach(function(Pe){fe[Pe]=me[Pe].map(function(De){return De.name}),me[Pe].forEach(function(De){return De.groupKey=Pe})});var Ae=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=ke.map(function(Pe){return Pe.name});for(var Se=0;Se<ke.length;Se++){var Me=ke[Se];ke[Me.name]=Me}for(var Oe=0;Oe<Ae.length;Oe++){var Ce=Ae[Oe],$e=ke[Ce.pointsTo],Be={name:Ce.name,alias:!0,pointsTo:$e};ke.push(Be),ke[Ce.name]=Be}})();styfn$2.getDefaultProperty=function(_){return this.getDefaultProperties()[_]};styfn$2.getDefaultProperties=function(){var _=this._private;if(_.defaultProperties!=null)return _.defaultProperties;for(var v=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(P,D){for(var L=1;L<=styfn$2.pieBackgroundN;L++){var q=D.name.replace("{{i}}",L),B=D.value;P[q]=B}return P},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(P,D){for(var L=1;L<=styfn$2.stripeBackgroundN;L++){var q=D.name.replace("{{i}}",L),B=D.value;P[q]=B}return P},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(P,D){return styfn$2.arrowPrefixes.forEach(function(L){var q=L+"-"+D.name,B=D.value;P[q]=B}),P},{})),S={},R=0;R<this.properties.length;R++){var T=this.properties[R];if(!T.pointsTo){var A=T.name,k=v[A],M=this.parse(A,k);S[A]=M}}return _.defaultProperties=S,_.defaultProperties};styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$1={};styfn$1.parse=function(_,v,S,R){var T=this;if(fn$6(v))return T.parseImplWarn(_,v,S,R);var A=R==="mapping"||R===!0||R===!1||R==null?"dontcare":R,k=S?"t":"f",M=""+v,P=hashStrings(_,M,k,A),D=T.propCache=T.propCache||[],L;return(L=D[P])||(L=D[P]=T.parseImplWarn(_,v,S,R)),(S||R==="mapping")&&(L=copy$1(L),L&&(L.value=copy$1(L.value))),L};styfn$1.parseImplWarn=function(_,v,S,R){var T=this.parseImpl(_,v,S,R);return!T&&v!=null&&warn$1("The style property `".concat(_,": ").concat(v,"` is invalid")),T&&(T.name==="width"||T.name==="height")&&v==="label"&&warn$1("The style value of `label` is deprecated for `"+T.name+"`"),T};styfn$1.parseImpl=function(_,v,S,R){var T=this;_=camel2dash(_);var A=T.properties[_],k=v,M=T.types;if(!A||v===void 0)return null;A.alias&&(A=A.pointsTo,_=A.name);var P=string$1(v);P&&(v=v.trim());var D=A.type;if(!D)return null;if(S&&(v===""||v===null))return{name:_,value:v,bypass:!0,deleteBypass:!0};if(fn$6(v))return{name:_,value:v,strValue:"fn",mapped:M.fn,bypass:S};var L,q;if(!(!P||R||v.length<7||v[1]!=="a")){if(v.length>=7&&v[0]==="d"&&(L=new RegExp(M.data.regex).exec(v))){if(S)return!1;var B=M.data;return{name:_,value:L,strValue:""+v,mapped:B,field:L[1],bypass:S}}else if(v.length>=10&&v[0]==="m"&&(q=new RegExp(M.mapData.regex).exec(v))){if(S||D.multiple)return!1;var F=M.mapData;if(!(D.color||D.number))return!1;var j=this.parse(_,q[4]);if(!j||j.mapped)return!1;var z=this.parse(_,q[5]);if(!z||z.mapped)return!1;if(j.pfValue===z.pfValue||j.strValue===z.strValue)return warn$1("`"+_+": "+v+"` is not a valid mapper because the output range is zero; converting to `"+_+": "+j.strValue+"`"),this.parse(_,j.strValue);if(D.color){var V=j.value,G=z.value,W=V[0]===G[0]&&V[1]===G[1]&&V[2]===G[2]&&(V[3]===G[3]||(V[3]==null||V[3]===1)&&(G[3]==null||G[3]===1));if(W)return!1}return{name:_,value:q,strValue:""+v,mapped:F,field:q[1],fieldMin:parseFloat(q[2]),fieldMax:parseFloat(q[3]),valueMin:j.value,valueMax:z.value,bypass:S}}}if(D.multiple&&R!=="multiple"){var Y;if(P?Y=v.split(/\s+/):array(v)?Y=v:Y=[v],D.evenMultiple&&Y.length%2!==0)return null;for(var X=[],ee=[],re=[],Q="",ne=!1,ae=0;ae<Y.length;ae++){var oe=T.parse(_,Y[ae],S,"multiple");ne=ne||string$1(oe.value),X.push(oe.value),re.push(oe.pfValue!=null?oe.pfValue:oe.value),ee.push(oe.units),Q+=(ae>0?" ":"")+oe.strValue}return D.validate&&!D.validate(X,ee)?null:D.singleEnum&&ne?X.length===1&&string$1(X[0])?{name:_,value:X[0],strValue:X[0],bypass:S}:null:{name:_,value:X,pfValue:re,strValue:Q,bypass:S,units:ee}}var se=function(){for(var Be=0;Be<D.enums.length;Be++){var Pe=D.enums[Be];if(Pe===v)return{name:_,value:v,strValue:""+v,bypass:S}}return null};if(D.number){var ce,de="px";if(D.units&&(ce=D.units),D.implicitUnits&&(de=D.implicitUnits),!D.unitless)if(P){var ye="px|em"+(D.allowPercent?"|\\%":"");ce&&(ye=ce);var we=v.match("^("+number$2+")("+ye+")?$");we&&(v=we[1],ce=we[2]||de)}else(!ce||D.implicitUnits)&&(ce=de);if(v=parseFloat(v),isNaN(v)&&D.enums===void 0)return null;if(isNaN(v)&&D.enums!==void 0)return v=k,se();if(D.integer&&!integer(v)||D.min!==void 0&&(v<D.min||D.strictMin&&v===D.min)||D.max!==void 0&&(v>D.max||D.strictMax&&v===D.max))return null;var ge={name:_,value:v,strValue:""+v+(ce||""),units:ce,bypass:S};return D.unitless||ce!=="px"&&ce!=="em"?ge.pfValue=v:ge.pfValue=ce==="px"||!ce?v:this.getEmSizeInPixels()*v,(ce==="ms"||ce==="s")&&(ge.pfValue=ce==="ms"?v:1e3*v),(ce==="deg"||ce==="rad")&&(ge.pfValue=ce==="rad"?v:deg2rad(v)),ce==="%"&&(ge.pfValue=v/100),ge}else if(D.propList){var ve=[],be=""+v;if(be!=="none"){for(var ke=be.split(/\s*,\s*|\s+/),me=0;me<ke.length;me++){var fe=ke[me].trim();T.properties[fe]?ve.push(fe):warn$1("`"+fe+"` is not a valid property name")}if(ve.length===0)return null}return{name:_,value:ve,strValue:ve.length===0?"none":ve.join(" "),bypass:S}}else if(D.color){var xe=color2tuple(v);return xe?{name:_,value:xe,pfValue:xe,strValue:"rgb("+xe[0]+","+xe[1]+","+xe[2]+")",bypass:S}:null}else if(D.regex||D.regexes){if(D.enums){var Ae=se();if(Ae)return Ae}for(var Se=D.regexes?D.regexes:[D.regex],Me=0;Me<Se.length;Me++){var Oe=new RegExp(Se[Me]),Ce=Oe.exec(v);if(Ce)return{name:_,value:D.singleRegexMatchValue?Ce[1]:Ce,strValue:""+v,bypass:S}}return null}else return D.string?{name:_,value:""+v,strValue:""+v,bypass:S}:D.enums?se():null};var _Style=function(v){if(!(this instanceof _Style))return new _Style(v);if(!core$2(v)){error("A style must have a core reference");return}this._private={cy:v,coreStyle:{}},this.length=0,this.resetToDefault()},styfn=_Style.prototype;styfn.instanceString=function(){return"style"};styfn.clear=function(){for(var _=this._private,v=_.cy,S=v.elements(),R=0;R<this.length;R++)this[R]=void 0;return this.length=0,_.contextStyles={},_.propDiffs={},this.cleanElements(S,!0),S.forEach(function(T){var A=T[0]._private;A.styleDirty=!0,A.appliedInitStyle=!1}),this};styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};styfn.core=function(_){return this._private.coreStyle[_]||this.getDefaultProperty(_)};styfn.selector=function(_){var v=_==="core"?null:new Selector(_),S=this.length++;return this[S]={selector:v,properties:[],mappedProperties:[],index:S},this};styfn.css=function(){var _=this,v=arguments;if(v.length===1)for(var S=v[0],R=0;R<_.properties.length;R++){var T=_.properties[R],A=S[T.name];A===void 0&&(A=S[dash2camel(T.name)]),A!==void 0&&this.cssRule(T.name,A)}else v.length===2&&this.cssRule(v[0],v[1]);return this};styfn.style=styfn.css;styfn.cssRule=function(_,v){var S=this.parse(_,v);if(S){var R=this.length-1;this[R].properties.push(S),this[R].properties[S.name]=S,S.name.match(/pie-(\d+)-background-size/)&&S.value&&(this._private.hasPie=!0),S.name.match(/stripe-(\d+)-background-size/)&&S.value&&(this._private.hasStripe=!0),S.mapped&&this[R].mappedProperties.push(S);var T=!this[R].selector;T&&(this._private.coreStyle[S.name]=S)}return this};styfn.append=function(_){return stylesheet(_)?_.appendToStyle(this):array(_)?this.appendFromJson(_):string$1(_)&&this.appendFromString(_),this};_Style.fromJson=function(_,v){var S=new _Style(_);return S.fromJson(v),S};_Style.fromString=function(_,v){return new _Style(_).fromString(v)};[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach(function(_){extend(styfn,_)});_Style.types=styfn.types;_Style.properties=styfn.properties;_Style.propertyGroups=styfn.propertyGroups;_Style.propertyGroupNames=styfn.propertyGroupNames;_Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$2={style:function(v){if(v){var S=this.setStyle(v);S.update()}return this._private.style},setStyle:function(v){var S=this._private;return stylesheet(v)?S.style=v.generateStyle(this):array(v)?S.style=_Style.fromJson(this,v):string$1(v)?S.style=_Style.fromString(this,v):S.style=_Style(this),S.style},updateStyle:function(){this.mutableElements().updateStyle()}},defaultSelectionType="single",corefn$1={autolock:function(v){if(v!==void 0)this._private.autolock=!!v;else return this._private.autolock;return this},autoungrabify:function(v){if(v!==void 0)this._private.autoungrabify=!!v;else return this._private.autoungrabify;return this},autounselectify:function(v){if(v!==void 0)this._private.autounselectify=!!v;else return this._private.autounselectify;return this},selectionType:function(v){var S=this._private;if(S.selectionType==null&&(S.selectionType=defaultSelectionType),v!==void 0)(v==="additive"||v==="single")&&(S.selectionType=v);else return S.selectionType;return this},panningEnabled:function(v){if(v!==void 0)this._private.panningEnabled=!!v;else return this._private.panningEnabled;return this},userPanningEnabled:function(v){if(v!==void 0)this._private.userPanningEnabled=!!v;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(v){if(v!==void 0)this._private.zoomingEnabled=!!v;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(v){if(v!==void 0)this._private.userZoomingEnabled=!!v;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(v){if(v!==void 0)this._private.boxSelectionEnabled=!!v;else return this._private.boxSelectionEnabled;return this},pan:function(){var v=arguments,S=this._private.pan,R,T,A,k,M;switch(v.length){case 0:return S;case 1:if(string$1(v[0]))return R=v[0],S[R];if(plainObject(v[0])){if(!this._private.panningEnabled)return this;A=v[0],k=A.x,M=A.y,number$1(k)&&(S.x=k),number$1(M)&&(S.y=M),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;R=v[0],T=v[1],(R==="x"||R==="y")&&number$1(T)&&(S[R]=T),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(v,S){var R=arguments,T=this._private.pan,A,k,M,P,D;if(!this._private.panningEnabled)return this;switch(R.length){case 1:plainObject(v)&&(M=R[0],P=M.x,D=M.y,number$1(P)&&(T.x+=P),number$1(D)&&(T.y+=D),this.emit("pan viewport"));break;case 2:A=v,k=S,(A==="x"||A==="y")&&number$1(k)&&(T[A]+=k),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(v,S){var R=this.getFitViewport(v,S);if(R){var T=this._private;T.zoom=R.zoom,T.pan=R.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(v,S){if(number$1(v)&&S===void 0&&(S=v,v=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var R;if(string$1(v)){var T=v;v=this.$(T)}else if(boundingBox(v)){var A=v;R={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2},R.w=R.x2-R.x1,R.h=R.y2-R.y1}else elementOrCollection(v)||(v=this.mutableElements());if(!(elementOrCollection(v)&&v.empty())){R=R||v.boundingBox();var k=this.width(),M=this.height(),P;if(S=number$1(S)?S:0,!isNaN(k)&&!isNaN(M)&&k>0&&M>0&&!isNaN(R.w)&&!isNaN(R.h)&&R.w>0&&R.h>0){P=Math.min((k-2*S)/R.w,(M-2*S)/R.h),P=P>this._private.maxZoom?this._private.maxZoom:P,P=P<this._private.minZoom?this._private.minZoom:P;var D={x:(k-P*(R.x1+R.x2))/2,y:(M-P*(R.y1+R.y2))/2};return{zoom:P,pan:D}}}}},zoomRange:function(v,S){var R=this._private;if(S==null){var T=v;v=T.min,S=T.max}return number$1(v)&&number$1(S)&&v<=S?(R.minZoom=v,R.maxZoom=S):number$1(v)&&S===void 0&&v<=R.maxZoom?R.minZoom=v:number$1(S)&&v===void 0&&S>=R.minZoom&&(R.maxZoom=S),this},minZoom:function(v){return v===void 0?this._private.minZoom:this.zoomRange({min:v})},maxZoom:function(v){return v===void 0?this._private.maxZoom:this.zoomRange({max:v})},getZoomedViewport:function(v){var S=this._private,R=S.pan,T=S.zoom,A,k,M=!1;if(S.zoomingEnabled||(M=!0),number$1(v)?k=v:plainObject(v)&&(k=v.level,v.position!=null?A=modelToRenderedPosition$1(v.position,T,R):v.renderedPosition!=null&&(A=v.renderedPosition),A!=null&&!S.panningEnabled&&(M=!0)),k=k>S.maxZoom?S.maxZoom:k,k=k<S.minZoom?S.minZoom:k,M||!number$1(k)||k===T||A!=null&&(!number$1(A.x)||!number$1(A.y)))return null;if(A!=null){var P=R,D=T,L=k,q={x:-L/D*(A.x-P.x)+A.x,y:-L/D*(A.y-P.y)+A.y};return{zoomed:!0,panned:!0,zoom:L,pan:q}}else return{zoomed:!0,panned:!1,zoom:k,pan:R}},zoom:function(v){if(v===void 0)return this._private.zoom;var S=this.getZoomedViewport(v),R=this._private;return S==null||!S.zoomed?this:(R.zoom=S.zoom,S.panned&&(R.pan.x=S.pan.x,R.pan.y=S.pan.y),this.emit("zoom"+(S.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(v){var S=this._private,R=!0,T=!0,A=[],k=!1,M=!1;if(!v)return this;if(number$1(v.zoom)||(R=!1),plainObject(v.pan)||(T=!1),!R&&!T)return this;if(R){var P=v.zoom;P<S.minZoom||P>S.maxZoom||!S.zoomingEnabled?k=!0:(S.zoom=P,A.push("zoom"))}if(T&&(!k||!v.cancelOnFailedZoom)&&S.panningEnabled){var D=v.pan;number$1(D.x)&&(S.pan.x=D.x,M=!1),number$1(D.y)&&(S.pan.y=D.y,M=!1),M||A.push("pan")}return A.length>0&&(A.push("viewport"),this.emit(A.join(" ")),this.notify("viewport")),this},center:function(v){var S=this.getCenterPan(v);return S&&(this._private.pan=S,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(v,S){if(this._private.panningEnabled){if(string$1(v)){var R=v;v=this.mutableElements().filter(R)}else elementOrCollection(v)||(v=this.mutableElements());if(v.length!==0){var T=v.boundingBox(),A=this.width(),k=this.height();S=S===void 0?this._private.zoom:S;var M={x:(A-S*(T.x1+T.x2))/2,y:(k-S*(T.y1+T.y2))/2};return M}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var v=this._private,S=v.container,R=this;return v.sizeCache=v.sizeCache||(S?(function(){var T=R.window().getComputedStyle(S),A=function(M){return parseFloat(T.getPropertyValue(M))};return{width:S.clientWidth-A("padding-left")-A("padding-right"),height:S.clientHeight-A("padding-top")-A("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var v=this._private.pan,S=this._private.zoom,R=this.renderedExtent(),T={x1:(R.x1-v.x)/S,x2:(R.x2-v.x)/S,y1:(R.y1-v.y)/S,y2:(R.y2-v.y)/S};return T.w=T.x2-T.x1,T.h=T.y2-T.y1,T},renderedExtent:function(){var v=this.width(),S=this.height();return{x1:0,y1:0,x2:v,y2:S,w:v,h:S}},multiClickDebounceTime:function(v){if(v)this._private.multiClickDebounceTime=v;else return this._private.multiClickDebounceTime;return this}};corefn$1.centre=corefn$1.center;corefn$1.autolockNodes=corefn$1.autolock;corefn$1.autoungrabifyNodes=corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data;fn.removeAttr=fn.removeData;var Core=function(v){var S=this;v=extend({},v);var R=v.container;R&&!htmlElement(R)&&htmlElement(R[0])&&(R=R[0]);var T=R?R._cyreg:null;T=T||{},T&&T.cy&&(T.cy.destroy(),T={});var A=T.readies=T.readies||[];R&&(R._cyreg=T),T.cy=S;var k=_window!==void 0&&R!==void 0&&!v.headless,M=v;M.layout=extend({name:k?"grid":"null"},M.layout),M.renderer=extend({name:k?"canvas":"null"},M.renderer);var P=function(j,z,V){return z!==void 0?z:V!==void 0?V:j},D=this._private={container:R,ready:!1,options:M,elements:new Collection$3(this),listeners:[],aniEles:new Collection$3(this),data:M.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:P(!0,M.zoomingEnabled),userZoomingEnabled:P(!0,M.userZoomingEnabled),panningEnabled:P(!0,M.panningEnabled),userPanningEnabled:P(!0,M.userPanningEnabled),boxSelectionEnabled:P(!0,M.boxSelectionEnabled),autolock:P(!1,M.autolock,M.autolockNodes),autoungrabify:P(!1,M.autoungrabify,M.autoungrabifyNodes),autounselectify:P(!1,M.autounselectify),styleEnabled:M.styleEnabled===void 0?k:M.styleEnabled,zoom:number$1(M.zoom)?M.zoom:1,pan:{x:plainObject(M.pan)&&number$1(M.pan.x)?M.pan.x:0,y:plainObject(M.pan)&&number$1(M.pan.y)?M.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:P(250,M.multiClickDebounceTime)};this.createEmitter(),this.selectionType(M.selectionType),this.zoomRange({min:M.minZoom,max:M.maxZoom});var L=function(j,z){var V=j.some(promise);if(V)return Promise$1.all(j).then(z);z(j)};D.styleEnabled&&S.setStyle([]);var q=extend({},M,M.renderer);S.initRenderer(q);var B=function(j,z,V){S.notifications(!1);var G=S.mutableElements();G.length>0&&G.remove(),j!=null&&(plainObject(j)||array(j))&&S.add(j),S.one("layoutready",function(Y){S.notifications(!0),S.emit(Y),S.one("load",z),S.emitAndNotify("load")}).one("layoutstop",function(){S.one("done",V),S.emit("done")});var W=extend({},S._private.options.layout);W.eles=S.elements(),S.layout(W).run()};L([M.style,M.elements],function(F){var j=F[0],z=F[1];D.styleEnabled&&S.style().append(j),B(z,function(){S.startAnimationLoop(),D.ready=!0,fn$6(M.ready)&&S.on("ready",M.ready);for(var V=0;V<A.length;V++){var G=A[V];S.on("ready",G)}T&&(T.readies=[]),S.emit("ready")},M.done)})},corefn=Core.prototype;extend(corefn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(v){return this.isReady()?this.emitter().emit("ready",[],v):this.on("ready",v),this},destroy:function(){var v=this;if(!v.destroyed())return v.stopAnimationLoop(),v.destroyRenderer(),this.emit("destroy"),v._private.destroyed=!0,v},hasElementWithId:function(v){return this._private.elements.hasElementWithId(v)},getElementById:function(v){return this._private.elements.getElementById(v)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(v){return this._private.elements.merge(v),this},removeFromPool:function(v){return this._private.elements.unmerge(v),this},container:function(){return this._private.container||null},window:function(){var v=this._private.container;if(v==null)return _window;var S=this._private.container.ownerDocument;return S===void 0||S==null?_window:S.defaultView||_window},mount:function(v){if(v!=null){var S=this,R=S._private,T=R.options;return!htmlElement(v)&&htmlElement(v[0])&&(v=v[0]),S.stopAnimationLoop(),S.destroyRenderer(),R.container=v,R.styleEnabled=!0,S.invalidateSize(),S.initRenderer(extend({},T,T.renderer,{name:T.renderer.name==="null"?"canvas":T.renderer.name})),S.startAnimationLoop(),S.style(T.style),S.emit("mount"),S}},unmount:function(){var v=this;return v.stopAnimationLoop(),v.destroyRenderer(),v.initRenderer({name:"null"}),v.emit("unmount"),v},options:function(){return copy$1(this._private.options)},json:function(v){var S=this,R=S._private,T=S.mutableElements(),A=function(X){return S.getElementById(X.id())};if(plainObject(v)){if(S.startBatch(),v.elements){var k={},M=function(X,ee){for(var re=[],Q=[],ne=0;ne<X.length;ne++){var ae=X[ne];if(!ae.data.id){warn$1("cy.json() cannot handle elements without an ID attribute");continue}var oe=""+ae.data.id,se=S.getElementById(oe);k[oe]=!0,se.length!==0?Q.push({ele:se,json:ae}):(ee&&(ae.group=ee),re.push(ae))}S.add(re);for(var ce=0;ce<Q.length;ce++){var de=Q[ce],ye=de.ele,we=de.json;ye.json(we)}};if(array(v.elements))M(v.elements);else for(var P=["nodes","edges"],D=0;D<P.length;D++){var L=P[D],q=v.elements[L];array(q)&&M(q,L)}var B=S.collection();T.filter(function(Y){return!k[Y.id()]}).forEach(function(Y){Y.isParent()?B.merge(Y):Y.remove()}),B.forEach(function(Y){return Y.children().move({parent:null})}),B.forEach(function(Y){return A(Y).remove()})}v.style&&S.style(v.style),v.zoom!=null&&v.zoom!==R.zoom&&S.zoom(v.zoom),v.pan&&(v.pan.x!==R.pan.x||v.pan.y!==R.pan.y)&&S.pan(v.pan),v.data&&S.data(v.data);for(var F=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],j=0;j<F.length;j++){var z=F[j];v[z]!=null&&S[z](v[z])}return S.endBatch(),this}else{var V=!!v,G={};V?G.elements=this.elements().map(function(Y){return Y.json()}):(G.elements={},T.forEach(function(Y){var X=Y.group();G.elements[X]||(G.elements[X]=[]),G.elements[X].push(Y.json())})),this._private.styleEnabled&&(G.style=S.style().json()),G.data=copy$1(S.data());var W=R.options;return G.zoomingEnabled=R.zoomingEnabled,G.userZoomingEnabled=R.userZoomingEnabled,G.zoom=R.zoom,G.minZoom=R.minZoom,G.maxZoom=R.maxZoom,G.panningEnabled=R.panningEnabled,G.userPanningEnabled=R.userPanningEnabled,G.pan=copy$1(R.pan),G.boxSelectionEnabled=R.boxSelectionEnabled,G.renderer=copy$1(W.renderer),G.hideEdgesOnViewport=W.hideEdgesOnViewport,G.textureOnViewport=W.textureOnViewport,G.wheelSensitivity=W.wheelSensitivity,G.motionBlur=W.motionBlur,G.multiClickDebounceTime=W.multiClickDebounceTime,G}}});corefn.$id=corefn.getElementById;[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn].forEach(function(_){extend(corefn,_)});var defaults$7={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function(v){return v.scratch("breadthfirst")},setInfo=function(v,S){return v.scratch("breadthfirst",S)};function BreadthFirstLayout(_){this.options=extend({},defaults$7,deprecatedOptionDefaults,_)}BreadthFirstLayout.prototype.run=function(){var _=this.options,v=_.cy,S=_.eles,R=S.nodes().filter(function(Et){return Et.isChildless()}),T=S,A=_.directed,k=_.acyclic||_.maximal||_.maximalAdjustments>0,M=!!_.boundingBox,P=makeBoundingBox(M?_.boundingBox:structuredClone(v.extent())),D;if(elementOrCollection(_.roots))D=_.roots;else if(array(_.roots)){for(var L=[],q=0;q<_.roots.length;q++){var B=_.roots[q],F=v.getElementById(B);L.push(F)}D=v.collection(L)}else if(string$1(_.roots))D=v.$(_.roots);else if(A)D=R.roots();else{var j=S.components();D=v.collection();for(var z=function(){var st=j[V],xt=st.maxDegree(!1),gt=st.filter(function(_t){return _t.degree(!1)===xt});D=D.add(gt)},V=0;V<j.length;V++)z()}var G=[],W={},Y=function(st,xt){G[xt]==null&&(G[xt]=[]);var gt=G[xt].length;G[xt].push(st),setInfo(st,{index:gt,depth:xt})},X=function(st,xt){var gt=getInfo(st),_t=gt.depth,St=gt.index;G[_t][St]=null,st.isChildless()&&Y(st,xt)};T.bfs({roots:D,directed:_.directed,visit:function(st,xt,gt,_t,St){var Lt=st[0],jt=Lt.id();Lt.isChildless()&&Y(Lt,St),W[jt]=!0}});for(var ee=[],re=0;re<R.length;re++){var Q=R[re];W[Q.id()]||ee.push(Q)}var ne=function(st){for(var xt=G[st],gt=0;gt<xt.length;gt++){var _t=xt[gt];if(_t==null){xt.splice(gt,1),gt--;continue}setInfo(_t,{depth:st,index:gt})}},ae=function(st,xt){for(var gt=getInfo(st),_t=st.incomers().filter(function(Ct){return Ct.isNode()&&S.has(Ct)}),St=-1,Lt=st.id(),jt=0;jt<_t.length;jt++){var Gt=_t[jt],At=getInfo(Gt);St=Math.max(St,At.depth)}if(gt.depth<=St){if(!_.acyclic&&xt[Lt])return null;var Nt=St+1;return X(st,Nt),xt[Lt]=Nt,!0}return!1};if(A&&k){var oe=[],se={},ce=function(st){return oe.push(st)},de=function(){return oe.shift()};for(R.forEach(function(Et){return oe.push(Et)});oe.length>0;){var ye=de(),we=ae(ye,se);if(we)ye.outgoers().filter(function(Et){return Et.isNode()&&S.has(Et)}).forEach(ce);else if(we===null){warn$1("Detected double maximal shift for node `"+ye.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var ge=0;if(_.avoidOverlap)for(var ve=0;ve<R.length;ve++){var be=R[ve],ke=be.layoutDimensions(_),me=ke.w,fe=ke.h;ge=Math.max(ge,me,fe)}var xe={},Ae=function(st){if(xe[st.id()])return xe[st.id()];for(var xt=getInfo(st).depth,gt=st.neighborhood(),_t=0,St=0,Lt=0;Lt<gt.length;Lt++){var jt=gt[Lt];if(!(jt.isEdge()||jt.isParent()||!R.has(jt))){var Gt=getInfo(jt);if(Gt!=null){var At=Gt.index,Nt=Gt.depth;if(!(At==null||Nt==null)){var Ct=G[Nt].length;Nt<xt&&(_t+=At/Ct,St++)}}}}return St=Math.max(1,St),_t=_t/St,St===0&&(_t=0),xe[st.id()]=_t,_t},Se=function(st,xt){var gt=Ae(st),_t=Ae(xt),St=gt-_t;return St===0?ascending(st.id(),xt.id()):St};_.depthSort!==void 0&&(Se=_.depthSort);for(var Me=G.length,Oe=0;Oe<Me;Oe++)G[Oe].sort(Se),ne(Oe);for(var Ce=[],$e=0;$e<ee.length;$e++)Ce.push(ee[$e]);var Be=function(){for(var st=0;st<Me;st++)ne(st)};Ce.length&&(G.unshift(Ce),Me=G.length,Be());for(var Pe=0,De=0;De<Me;De++)Pe=Math.max(G[De].length,Pe);var Le={x:P.x1+P.w/2,y:P.y1+P.h/2},Ne=R.reduce(function(Et,st){return(function(xt){return{w:Et.w===-1?xt.w:(Et.w+xt.w)/2,h:Et.h===-1?xt.h:(Et.h+xt.h)/2}})(st.boundingBox({includeLabels:_.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),tt=Math.max(Me===1?0:M?(P.h-_.padding*2-Ne.h)/(Me-1):(P.h-_.padding*2-Ne.h)/(Me+1),ge),it=G.reduce(function(Et,st){return Math.max(Et,st.length)},0),dt=function(st){var xt=getInfo(st),gt=xt.depth,_t=xt.index;if(_.circle){var St=Math.min(P.w/2/Me,P.h/2/Me);St=Math.max(St,ge);var Lt=St*gt+St-(Me>0&&G[0].length<=3?St/2:0),jt=2*Math.PI/G[gt].length*_t;return gt===0&&G[0].length===1&&(Lt=1),{x:Le.x+Lt*Math.cos(jt),y:Le.y+Lt*Math.sin(jt)}}else{var Gt=G[gt].length,At=Math.max(Gt===1?0:M?(P.w-_.padding*2-Ne.w)/((_.grid?it:Gt)-1):(P.w-_.padding*2-Ne.w)/((_.grid?it:Gt)+1),ge),Nt={x:Le.x+(_t+1-(Gt+1)/2)*At,y:Le.y+(gt+1-(Me+1)/2)*tt};return Nt}},pt={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(pt).indexOf(_.direction)===-1&&error("Invalid direction '".concat(_.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(pt).join(", ")));var We=function(st){return rotatePosAndSkewByBox(dt(st),P,pt[_.direction])};return S.nodes().layoutPositions(this,_,We),this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function CircleLayout(_){this.options=extend({},defaults$6,_)}CircleLayout.prototype.run=function(){var _=this.options,v=_,S=_.cy,R=v.eles,T=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise,A=R.nodes().not(":parent");v.sort&&(A=A.sort(v.sort));for(var k=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:S.width(),h:S.height()}),M={x:k.x1+k.w/2,y:k.y1+k.h/2},P=v.sweep===void 0?2*Math.PI-2*Math.PI/A.length:v.sweep,D=P/Math.max(1,A.length-1),L,q=0,B=0;B<A.length;B++){var F=A[B],j=F.layoutDimensions(v),z=j.w,V=j.h;q=Math.max(q,z,V)}if(number$1(v.radius)?L=v.radius:A.length<=1?L=0:L=Math.min(k.h,k.w)/2-q,A.length>1&&v.avoidOverlap){q*=1.75;var G=Math.cos(D)-Math.cos(0),W=Math.sin(D)-Math.sin(0),Y=Math.sqrt(q*q/(G*G+W*W));L=Math.max(Y,L)}var X=function(re,Q){var ne=v.startAngle+Q*D*(T?1:-1),ae=L*Math.cos(ne),oe=L*Math.sin(ne),se={x:M.x+ae,y:M.y+oe};return se};return R.nodes().layoutPositions(this,v,X),this};var defaults$5={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(v){return v.degree()},levelWidth:function(v){return v.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function ConcentricLayout(_){this.options=extend({},defaults$5,_)}ConcentricLayout.prototype.run=function(){for(var _=this.options,v=_,S=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise,R=_.cy,T=v.eles,A=T.nodes().not(":parent"),k=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:R.width(),h:R.height()}),M={x:k.x1+k.w/2,y:k.y1+k.h/2},P=[],D=0,L=0;L<A.length;L++){var q=A[L],B=void 0;B=v.concentric(q),P.push({value:B,node:q}),q._private.scratch.concentric=B}A.updateStyle();for(var F=0;F<A.length;F++){var j=A[F],z=j.layoutDimensions(v);D=Math.max(D,z.w,z.h)}P.sort(function(tt,it){return it.value-tt.value});for(var V=v.levelWidth(A),G=[[]],W=G[0],Y=0;Y<P.length;Y++){var X=P[Y];if(W.length>0){var ee=Math.abs(W[0].value-X.value);ee>=V&&(W=[],G.push(W))}W.push(X)}var re=D+v.minNodeSpacing;if(!v.avoidOverlap){var Q=G.length>0&&G[0].length>1,ne=Math.min(k.w,k.h)/2-re,ae=ne/(G.length+Q?1:0);re=Math.min(re,ae)}for(var oe=0,se=0;se<G.length;se++){var ce=G[se],de=v.sweep===void 0?2*Math.PI-2*Math.PI/ce.length:v.sweep,ye=ce.dTheta=de/Math.max(1,ce.length-1);if(ce.length>1&&v.avoidOverlap){var we=Math.cos(ye)-Math.cos(0),ge=Math.sin(ye)-Math.sin(0),ve=Math.sqrt(re*re/(we*we+ge*ge));oe=Math.max(ve,oe)}ce.r=oe,oe+=re}if(v.equidistant){for(var be=0,ke=0,me=0;me<G.length;me++){var fe=G[me],xe=fe.r-ke;be=Math.max(be,xe)}ke=0;for(var Ae=0;Ae<G.length;Ae++){var Se=G[Ae];Ae===0&&(ke=Se.r),Se.r=ke,ke+=be}}for(var Me={},Oe=0;Oe<G.length;Oe++)for(var Ce=G[Oe],$e=Ce.dTheta,Be=Ce.r,Pe=0;Pe<Ce.length;Pe++){var De=Ce[Pe],Le=v.startAngle+(S?1:-1)*$e*Pe,Ne={x:M.x+Be*Math.cos(Le),y:M.y+Be*Math.sin(Le)};Me[De.node.id()]=Ne}return T.nodes().layoutPositions(this,v,function(tt){var it=tt.id();return Me[it]}),this};var DEBUG,defaults$4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(v,S){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(v){return 2048},nodeOverlap:4,idealEdgeLength:function(v){return 32},edgeElasticity:function(v){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(_){this.options=extend({},defaults$4,_),this.options.layout=this;var v=this.options.eles.nodes(),S=this.options.eles.edges(),R=S.filter(function(T){var A=T.source().data("id"),k=T.target().data("id"),M=v.some(function(D){return D.data("id")===A}),P=v.some(function(D){return D.data("id")===k});return!M||!P});this.options.eles=this.options.eles.not(R)}CoseLayout.prototype.run=function(){var _=this.options,v=_.cy,S=this;S.stopped=!1,(_.animate===!0||_.animate===!1)&&S.emit({type:"layoutstart",layout:S}),_.debug===!0?DEBUG=!0:DEBUG=!1;var R=createLayoutInfo(v,S,_);DEBUG&&printLayoutInfo(R),_.randomize&&randomizePositions(R);var T=performanceNow(),A=function(){refreshPositions(R,v,_),_.fit===!0&&v.fit(_.padding)},k=function(B){return!(S.stopped||B>=_.numIter||(step(R,_),R.temperature=R.temperature*_.coolingFactor,R.temperature<_.minTemp))},M=function(){if(_.animate===!0||_.animate===!1)A(),S.one("layoutstop",_.stop),S.emit({type:"layoutstop",layout:S});else{var B=_.eles.nodes(),F=getScaleInBoundsFn(R,_,B);B.layoutPositions(S,_,F)}},P=0,D=!0;if(_.animate===!0){var L=function(){for(var B=0;D&&B<_.refresh;)D=k(P),P++,B++;if(!D)separateComponents(R,_),M();else{var F=performanceNow();F-T>=_.animationThreshold&&A(),requestAnimationFrame$1(L)}};L()}else{for(;D;)D=k(P),P++;separateComponents(R,_),M()}return this};CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(v,S,R){for(var T=R.eles.edges(),A=R.eles.nodes(),k=makeBoundingBox(R.boundingBox?R.boundingBox:{x1:0,y1:0,w:v.width(),h:v.height()}),M={isCompound:v.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:A.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:T.size(),temperature:R.initialTemp,clientWidth:k.w,clientHeight:k.h,boundingBox:k},P=R.eles.components(),D={},L=0;L<P.length;L++)for(var q=P[L],B=0;B<q.length;B++){var F=q[B];D[F.id()]=L}for(var L=0;L<M.nodeSize;L++){var j=A[L],z=j.layoutDimensions(R),V={};V.isLocked=j.locked(),V.id=j.data("id"),V.parentId=j.data("parent"),V.cmptId=D[j.id()],V.children=[],V.positionX=j.position("x"),V.positionY=j.position("y"),V.offsetX=0,V.offsetY=0,V.height=z.w,V.width=z.h,V.maxX=V.positionX+V.width/2,V.minX=V.positionX-V.width/2,V.maxY=V.positionY+V.height/2,V.minY=V.positionY-V.height/2,V.padLeft=parseFloat(j.style("padding")),V.padRight=parseFloat(j.style("padding")),V.padTop=parseFloat(j.style("padding")),V.padBottom=parseFloat(j.style("padding")),V.nodeRepulsion=fn$6(R.nodeRepulsion)?R.nodeRepulsion(j):R.nodeRepulsion,M.layoutNodes.push(V),M.idToIndex[V.id]=L}for(var G=[],W=0,Y=-1,X=[],L=0;L<M.nodeSize;L++){var j=M.layoutNodes[L],ee=j.parentId;ee!=null?M.layoutNodes[M.idToIndex[ee]].children.push(j.id):(G[++Y]=j.id,X.push(j.id))}for(M.graphSet.push(X);W<=Y;){var re=G[W++],Q=M.idToIndex[re],F=M.layoutNodes[Q],ne=F.children;if(ne.length>0){M.graphSet.push(ne);for(var L=0;L<ne.length;L++)G[++Y]=ne[L]}}for(var L=0;L<M.graphSet.length;L++)for(var ae=M.graphSet[L],B=0;B<ae.length;B++){var oe=M.idToIndex[ae[B]];M.indexToGraph[oe]=L}for(var L=0;L<M.edgeSize;L++){var se=T[L],ce={};ce.id=se.data("id"),ce.sourceId=se.data("source"),ce.targetId=se.data("target");var de=fn$6(R.idealEdgeLength)?R.idealEdgeLength(se):R.idealEdgeLength,ye=fn$6(R.edgeElasticity)?R.edgeElasticity(se):R.edgeElasticity,we=M.idToIndex[ce.sourceId],ge=M.idToIndex[ce.targetId],ve=M.indexToGraph[we],be=M.indexToGraph[ge];if(ve!=be){for(var ke=findLCA(ce.sourceId,ce.targetId,M),me=M.graphSet[ke],fe=0,V=M.layoutNodes[we];me.indexOf(V.id)===-1;)V=M.layoutNodes[M.idToIndex[V.parentId]],fe++;for(V=M.layoutNodes[ge];me.indexOf(V.id)===-1;)V=M.layoutNodes[M.idToIndex[V.parentId]],fe++;de*=fe*R.nestingFactor}ce.idealLength=de,ce.elasticity=ye,M.layoutEdges.push(ce)}return M},findLCA=function(v,S,R){var T=_findLCA_aux(v,S,0,R);return 2>T.count?0:T.graph},_findLCA_aux=function(v,S,R,T){var A=T.graphSet[R];if(-1<A.indexOf(v)&&-1<A.indexOf(S))return{count:2,graph:R};for(var k=0,M=0;M<A.length;M++){var P=A[M],D=T.idToIndex[P],L=T.layoutNodes[D].children;if(L.length!==0){var q=T.indexToGraph[T.idToIndex[L[0]]],B=_findLCA_aux(v,S,q,T);if(B.count!==0)if(B.count===1){if(k++,k===2)break}else return B}}return{count:k,graph:R}},printLayoutInfo,randomizePositions=function(v,S){for(var R=v.clientWidth,T=v.clientHeight,A=0;A<v.nodeSize;A++){var k=v.layoutNodes[A];k.children.length===0&&!k.isLocked&&(k.positionX=Math.random()*R,k.positionY=Math.random()*T)}},getScaleInBoundsFn=function(v,S,R){var T=v.boundingBox,A={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return S.boundingBox&&(R.forEach(function(k){var M=v.layoutNodes[v.idToIndex[k.data("id")]];A.x1=Math.min(A.x1,M.positionX),A.x2=Math.max(A.x2,M.positionX),A.y1=Math.min(A.y1,M.positionY),A.y2=Math.max(A.y2,M.positionY)}),A.w=A.x2-A.x1,A.h=A.y2-A.y1),function(k,M){var P=v.layoutNodes[v.idToIndex[k.data("id")]];if(S.boundingBox){var D=A.w===0?.5:(P.positionX-A.x1)/A.w,L=A.h===0?.5:(P.positionY-A.y1)/A.h;return{x:T.x1+D*T.w,y:T.y1+L*T.h}}else return{x:P.positionX,y:P.positionY}}},refreshPositions=function(v,S,R){var T=R.layout,A=R.eles.nodes(),k=getScaleInBoundsFn(v,R,A);A.positions(k),v.ready!==!0&&(v.ready=!0,T.one("layoutready",R.ready),T.emit({type:"layoutready",layout:this}))},step=function(v,S,R){calculateNodeForces(v,S),calculateEdgeForces(v),calculateGravityForces(v,S),propagateForces(v),updatePositions(v)},calculateNodeForces=function(v,S){for(var R=0;R<v.graphSet.length;R++)for(var T=v.graphSet[R],A=T.length,k=0;k<A;k++)for(var M=v.layoutNodes[v.idToIndex[T[k]]],P=k+1;P<A;P++){var D=v.layoutNodes[v.idToIndex[T[P]]];nodeRepulsion(M,D,v,S)}},randomDistance=function(v){return-1+2*v*Math.random()},nodeRepulsion=function(v,S,R,T){var A=v.cmptId,k=S.cmptId;if(!(A!==k&&!R.isCompound)){var M=S.positionX-v.positionX,P=S.positionY-v.positionY,D=1;M===0&&P===0&&(M=randomDistance(D),P=randomDistance(D));var L=nodesOverlap(v,S,M,P);if(L>0)var q=T.nodeOverlap*L,B=Math.sqrt(M*M+P*P),F=q*M/B,j=q*P/B;else var z=findClippingPoint(v,M,P),V=findClippingPoint(S,-1*M,-1*P),G=V.x-z.x,W=V.y-z.y,Y=G*G+W*W,B=Math.sqrt(Y),q=(v.nodeRepulsion+S.nodeRepulsion)/Y,F=q*G/B,j=q*W/B;v.isLocked||(v.offsetX-=F,v.offsetY-=j),S.isLocked||(S.offsetX+=F,S.offsetY+=j)}},nodesOverlap=function(v,S,R,T){if(R>0)var A=v.maxX-S.minX;else var A=S.maxX-v.minX;if(T>0)var k=v.maxY-S.minY;else var k=S.maxY-v.minY;return A>=0&&k>=0?Math.sqrt(A*A+k*k):0},findClippingPoint=function(v,S,R){var T=v.positionX,A=v.positionY,k=v.height||1,M=v.width||1,P=R/S,D=k/M,L={};return S===0&&0<R||S===0&&0>R?(L.x=T,L.y=A+k/2,L):0<S&&-1*D<=P&&P<=D?(L.x=T+M/2,L.y=A+M*R/2/S,L):0>S&&-1*D<=P&&P<=D?(L.x=T-M/2,L.y=A-M*R/2/S,L):0<R&&(P<=-1*D||P>=D)?(L.x=T+k*S/2/R,L.y=A+k/2,L):(0>R&&(P<=-1*D||P>=D)&&(L.x=T-k*S/2/R,L.y=A-k/2),L)},calculateEdgeForces=function(v,S){for(var R=0;R<v.edgeSize;R++){var T=v.layoutEdges[R],A=v.idToIndex[T.sourceId],k=v.layoutNodes[A],M=v.idToIndex[T.targetId],P=v.layoutNodes[M],D=P.positionX-k.positionX,L=P.positionY-k.positionY;if(!(D===0&&L===0)){var q=findClippingPoint(k,D,L),B=findClippingPoint(P,-1*D,-1*L),F=B.x-q.x,j=B.y-q.y,z=Math.sqrt(F*F+j*j),V=Math.pow(T.idealLength-z,2)/T.elasticity;if(z!==0)var G=V*F/z,W=V*j/z;else var G=0,W=0;k.isLocked||(k.offsetX+=G,k.offsetY+=W),P.isLocked||(P.offsetX-=G,P.offsetY-=W)}}},calculateGravityForces=function(v,S){if(S.gravity!==0)for(var R=1,T=0;T<v.graphSet.length;T++){var A=v.graphSet[T],k=A.length;if(T===0)var M=v.clientHeight/2,P=v.clientWidth/2;else var D=v.layoutNodes[v.idToIndex[A[0]]],L=v.layoutNodes[v.idToIndex[D.parentId]],M=L.positionX,P=L.positionY;for(var q=0;q<k;q++){var B=v.layoutNodes[v.idToIndex[A[q]]];if(!B.isLocked){var F=M-B.positionX,j=P-B.positionY,z=Math.sqrt(F*F+j*j);if(z>R){var V=S.gravity*F/z,G=S.gravity*j/z;B.offsetX+=V,B.offsetY+=G}}}}},propagateForces=function(v,S){var R=[],T=0,A=-1;for(R.push.apply(R,v.graphSet[0]),A+=v.graphSet[0].length;T<=A;){var k=R[T++],M=v.idToIndex[k],P=v.layoutNodes[M],D=P.children;if(0<D.length&&!P.isLocked){for(var L=P.offsetX,q=P.offsetY,B=0;B<D.length;B++){var F=v.layoutNodes[v.idToIndex[D[B]]];F.offsetX+=L,F.offsetY+=q,R[++A]=D[B]}P.offsetX=0,P.offsetY=0}}},updatePositions=function(v,S){for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];0<T.children.length&&(T.maxX=void 0,T.minX=void 0,T.maxY=void 0,T.minY=void 0)}for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];if(!(0<T.children.length||T.isLocked)){var A=limitForce(T.offsetX,T.offsetY,v.temperature);T.positionX+=A.x,T.positionY+=A.y,T.offsetX=0,T.offsetY=0,T.minX=T.positionX-T.width,T.maxX=T.positionX+T.width,T.minY=T.positionY-T.height,T.maxY=T.positionY+T.height,_updateAncestryBoundaries(T,v)}}for(var R=0;R<v.nodeSize;R++){var T=v.layoutNodes[R];0<T.children.length&&!T.isLocked&&(T.positionX=(T.maxX+T.minX)/2,T.positionY=(T.maxY+T.minY)/2,T.width=T.maxX-T.minX,T.height=T.maxY-T.minY)}},limitForce=function(v,S,R){var T=Math.sqrt(v*v+S*S);if(T>R)var A={x:R*v/T,y:R*S/T};else var A={x:v,y:S};return A},_updateAncestryBoundaries=function(v,S){var R=v.parentId;if(R!=null){var T=S.layoutNodes[S.idToIndex[R]],A=!1;if((T.maxX==null||v.maxX+T.padRight>T.maxX)&&(T.maxX=v.maxX+T.padRight,A=!0),(T.minX==null||v.minX-T.padLeft<T.minX)&&(T.minX=v.minX-T.padLeft,A=!0),(T.maxY==null||v.maxY+T.padBottom>T.maxY)&&(T.maxY=v.maxY+T.padBottom,A=!0),(T.minY==null||v.minY-T.padTop<T.minY)&&(T.minY=v.minY-T.padTop,A=!0),A)return _updateAncestryBoundaries(T,S)}},separateComponents=function(v,S){for(var R=v.layoutNodes,T=[],A=0;A<R.length;A++){var k=R[A],M=k.cmptId,P=T[M]=T[M]||[];P.push(k)}for(var D=0,A=0;A<T.length;A++){var L=T[A];if(L){L.x1=1/0,L.x2=-1/0,L.y1=1/0,L.y2=-1/0;for(var q=0;q<L.length;q++){var B=L[q];L.x1=Math.min(L.x1,B.positionX-B.width/2),L.x2=Math.max(L.x2,B.positionX+B.width/2),L.y1=Math.min(L.y1,B.positionY-B.height/2),L.y2=Math.max(L.y2,B.positionY+B.height/2)}L.w=L.x2-L.x1,L.h=L.y2-L.y1,D+=L.w*L.h}}T.sort(function(W,Y){return Y.w*Y.h-W.w*W.h});for(var F=0,j=0,z=0,V=0,G=Math.sqrt(D)*v.clientWidth/v.clientHeight,A=0;A<T.length;A++){var L=T[A];if(L){for(var q=0;q<L.length;q++){var B=L[q];B.isLocked||(B.positionX+=F-L.x1,B.positionY+=j-L.y1)}F+=L.w+S.componentSpacing,z+=L.w+S.componentSpacing,V=Math.max(V,L.h),z>G&&(j+=V+S.componentSpacing,F=0,z=0,V=0)}}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(v){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function GridLayout(_){this.options=extend({},defaults$3,_)}GridLayout.prototype.run=function(){var _=this.options,v=_,S=_.cy,R=v.eles,T=R.nodes().not(":parent");v.sort&&(T=T.sort(v.sort));var A=makeBoundingBox(v.boundingBox?v.boundingBox:{x1:0,y1:0,w:S.width(),h:S.height()});if(A.h===0||A.w===0)R.nodes().layoutPositions(this,v,function(Ae){return{x:A.x1,y:A.y1}});else{var k=T.size(),M=Math.sqrt(k*A.h/A.w),P=Math.round(M),D=Math.round(A.w/A.h*M),L=function(Se){if(Se==null)return Math.min(P,D);var Me=Math.min(P,D);Me==P?P=Se:D=Se},q=function(Se){if(Se==null)return Math.max(P,D);var Me=Math.max(P,D);Me==P?P=Se:D=Se},B=v.rows,F=v.cols!=null?v.cols:v.columns;if(B!=null&&F!=null)P=B,D=F;else if(B!=null&&F==null)P=B,D=Math.ceil(k/P);else if(B==null&&F!=null)D=F,P=Math.ceil(k/D);else if(D*P>k){var j=L(),z=q();(j-1)*z>=k?L(j-1):(z-1)*j>=k&&q(z-1)}else for(;D*P<k;){var V=L(),G=q();(G+1)*V>=k?q(G+1):L(V+1)}var W=A.w/D,Y=A.h/P;if(v.condense&&(W=0,Y=0),v.avoidOverlap)for(var X=0;X<T.length;X++){var ee=T[X],re=ee._private.position;(re.x==null||re.y==null)&&(re.x=0,re.y=0);var Q=ee.layoutDimensions(v),ne=v.avoidOverlapPadding,ae=Q.w+ne,oe=Q.h+ne;W=Math.max(W,ae),Y=Math.max(Y,oe)}for(var se={},ce=function(Se,Me){return!!se["c-"+Se+"-"+Me]},de=function(Se,Me){se["c-"+Se+"-"+Me]=!0},ye=0,we=0,ge=function(){we++,we>=D&&(we=0,ye++)},ve={},be=0;be<T.length;be++){var ke=T[be],me=v.position(ke);if(me&&(me.row!==void 0||me.col!==void 0)){var fe={row:me.row,col:me.col};if(fe.col===void 0)for(fe.col=0;ce(fe.row,fe.col);)fe.col++;else if(fe.row===void 0)for(fe.row=0;ce(fe.row,fe.col);)fe.row++;ve[ke.id()]=fe,de(fe.row,fe.col)}}var xe=function(Se,Me){var Oe,Ce;if(Se.locked()||Se.isParent())return!1;var $e=ve[Se.id()];if($e)Oe=$e.col*W+W/2+A.x1,Ce=$e.row*Y+Y/2+A.y1;else{for(;ce(ye,we);)ge();Oe=we*W+W/2+A.x1,Ce=ye*Y+Y/2+A.y1,de(ye,we),ge()}return{x:Oe,y:Ce}};T.layoutPositions(this,v,xe)}return this};var defaults$2$1={ready:function(){},stop:function(){}};function NullLayout(_){this.options=extend({},defaults$2$1,_)}NullLayout.prototype.run=function(){var _=this.options,v=_.eles,S=this;return _.cy,S.emit("layoutstart"),v.nodes().positions(function(){return{x:0,y:0}}),S.one("layoutready",_.ready),S.emit("layoutready"),S.one("layoutstop",_.stop),S.emit("layoutstop"),this};NullLayout.prototype.stop=function(){return this};var defaults$1$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function PresetLayout(_){this.options=extend({},defaults$1$1,_)}PresetLayout.prototype.run=function(){var _=this.options,v=_.eles,S=v.nodes(),R=fn$6(_.positions);function T(A){if(_.positions==null)return copyPosition(A.position());if(R)return _.positions(A);var k=_.positions[A._private.data.id];return k??null}return S.layoutPositions(this,_,function(A,k){var M=T(A);return A.locked()||M==null?!1:M}),this};var defaults$h={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(v,S){return!0},ready:void 0,stop:void 0,transform:function(v,S){return S}};function RandomLayout(_){this.options=extend({},defaults$h,_)}RandomLayout.prototype.run=function(){var _=this.options,v=_.cy,S=_.eles,R=makeBoundingBox(_.boundingBox?_.boundingBox:{x1:0,y1:0,w:v.width(),h:v.height()}),T=function(k,M){return{x:R.x1+Math.round(Math.random()*R.w),y:R.y1+Math.round(Math.random()*R.h)}};return S.nodes().layoutPositions(this,_,T),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(_){this.options=_,this.notifications=0}var noop$2=function(){},throwImgErr=function(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop$2,notify:function(){this.notifications++},init:noop$2,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$f={};BRp$f.arrowShapeWidth=.3;BRp$f.registerArrowShapes=function(){var _=this.arrowShapes={},v=this,S=function(D,L,q,B,F,j,z){var V=F.x-q/2-z,G=F.x+q/2+z,W=F.y-q/2-z,Y=F.y+q/2+z,X=V<=D&&D<=G&&W<=L&&L<=Y;return X},R=function(D,L,q,B,F){var j=D*Math.cos(B)-L*Math.sin(B),z=D*Math.sin(B)+L*Math.cos(B),V=j*q,G=z*q,W=V+F.x,Y=G+F.y;return{x:W,y:Y}},T=function(D,L,q,B){for(var F=[],j=0;j<D.length;j+=2){var z=D[j],V=D[j+1];F.push(R(z,V,L,q,B))}return F},A=function(D){for(var L=[],q=0;q<D.length;q++){var B=D[q];L.push(B.x,B.y)}return L},k=function(D){return D.pstyle("width").pfValue*D.pstyle("arrow-scale").pfValue*2},M=function(D,L){string$1(L)&&(L=_[L]),_[D]=extend({name:D,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(B,F,j,z,V,G){var W=A(T(this.points,j+2*G,z,V)),Y=pointInsidePolygonPoints(B,F,W);return Y},roughCollide:S,draw:function(B,F,j,z){var V=T(this.points,F,j,z);v.arrowShapeImpl("polygon")(B,V)},spacing:function(B){return 0},gap:k},L)};M("none",{collide:falsify,roughCollide:falsify,draw:noop$1$1,spacing:zeroify,gap:zeroify}),M("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),M("arrow","triangle"),M("triangle-backcurve",{points:_.triangle.points,controlPoint:[0,-.15],roughCollide:S,draw:function(D,L,q,B,F){var j=T(this.points,L,q,B),z=this.controlPoint,V=R(z[0],z[1],L,q,B);v.arrowShapeImpl(this.name)(D,j,V)},gap:function(D){return k(D)*.8}}),M("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(D,L,q,B,F,j,z){var V=A(T(this.points,q+2*z,B,F)),G=A(T(this.pointsTee,q+2*z,B,F)),W=pointInsidePolygonPoints(D,L,V)||pointInsidePolygonPoints(D,L,G);return W},draw:function(D,L,q,B,F){var j=T(this.points,L,q,B),z=T(this.pointsTee,L,q,B);v.arrowShapeImpl(this.name)(D,j,z)}}),M("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(D,L,q,B,F,j,z){var V=F,G=Math.pow(V.x-D,2)+Math.pow(V.y-L,2)<=Math.pow((q+2*z)*this.radius,2),W=A(T(this.points,q+2*z,B,F));return pointInsidePolygonPoints(D,L,W)||G},draw:function(D,L,q,B,F){var j=T(this.pointsTr,L,q,B);v.arrowShapeImpl(this.name)(D,j,B.x,B.y,this.radius*L)},spacing:function(D){return v.getArrowWidth(D.pstyle("width").pfValue,D.pstyle("arrow-scale").value)*this.radius}}),M("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(D,L){var q=this.baseCrossLinePts.slice(),B=L/D,F=3,j=5;return q[F]=q[F]-B,q[j]=q[j]-B,q},collide:function(D,L,q,B,F,j,z){var V=A(T(this.points,q+2*z,B,F)),G=A(T(this.crossLinePts(q,j),q+2*z,B,F)),W=pointInsidePolygonPoints(D,L,V)||pointInsidePolygonPoints(D,L,G);return W},draw:function(D,L,q,B,F){var j=T(this.points,L,q,B),z=T(this.crossLinePts(L,F),L,q,B);v.arrowShapeImpl(this.name)(D,j,z)}}),M("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(D){return k(D)*.525}}),M("circle",{radius:.15,collide:function(D,L,q,B,F,j,z){var V=F,G=Math.pow(V.x-D,2)+Math.pow(V.y-L,2)<=Math.pow((q+2*z)*this.radius,2);return G},draw:function(D,L,q,B,F){v.arrowShapeImpl(this.name)(D,B.x,B.y,this.radius*L)},spacing:function(D){return v.getArrowWidth(D.pstyle("width").pfValue,D.pstyle("arrow-scale").value)*this.radius}}),M("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(D){return 1},gap:function(D){return 1}}),M("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),M("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(D){return D.pstyle("width").pfValue*D.pstyle("arrow-scale").value}}),M("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(D){return .95*D.pstyle("width").pfValue*D.pstyle("arrow-scale").value}})};var BRp$e={};BRp$e.projectIntoViewport=function(_,v){var S=this.cy,R=this.findContainerClientCoords(),T=R[0],A=R[1],k=R[4],M=S.pan(),P=S.zoom(),D=((_-T)/k-M.x)/P,L=((v-A)/k-M.y)/P;return[D,L]};BRp$e.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var _=this.container,v=_.getBoundingClientRect(),S=this.cy.window().getComputedStyle(_),R=function(G){return parseFloat(S.getPropertyValue(G))},T={left:R("padding-left"),right:R("padding-right"),top:R("padding-top"),bottom:R("padding-bottom")},A={left:R("border-left-width"),right:R("border-right-width"),top:R("border-top-width"),bottom:R("border-bottom-width")},k=_.clientWidth,M=_.clientHeight,P=T.left+T.right,D=T.top+T.bottom,L=A.left+A.right,q=v.width/(k+L),B=k-P,F=M-D,j=v.left+T.left+A.left,z=v.top+T.top+A.top;return this.containerBB=[j,z,B,F,q]};BRp$e.invalidateContainerClientCoordsCache=function(){this.containerBB=null};BRp$e.findNearestElement=function(_,v,S,R){return this.findNearestElements(_,v,S,R)[0]};BRp$e.findNearestElements=function(_,v,S,R){var T=this,A=this,k=A.getCachedZSortedEles(),M=[],P=A.cy.zoom(),D=A.cy.hasCompoundNodes(),L=(R?24:8)/P,q=(R?8:2)/P,B=(R?8:2)/P,F=1/0,j,z;S&&(k=k.interactive);function V(Q,ne){if(Q.isNode()){if(z)return;z=Q,M.push(Q)}if(Q.isEdge()&&(ne==null||ne<F))if(j){if(j.pstyle("z-compound-depth").value===Q.pstyle("z-compound-depth").value&&j.pstyle("z-compound-depth").value===Q.pstyle("z-compound-depth").value){for(var ae=0;ae<M.length;ae++)if(M[ae].isEdge()){M[ae]=Q,j=Q,F=ne??F;break}}}else M.push(Q),j=Q,F=ne??F}function G(Q){var ne=Q.outerWidth()+2*q,ae=Q.outerHeight()+2*q,oe=ne/2,se=ae/2,ce=Q.position(),de=Q.pstyle("corner-radius").value==="auto"?"auto":Q.pstyle("corner-radius").pfValue,ye=Q._private.rscratch;if(ce.x-oe<=_&&_<=ce.x+oe&&ce.y-se<=v&&v<=ce.y+se){var we=A.nodeShapes[T.getNodeShape(Q)];if(we.checkPoint(_,v,0,ne,ae,ce.x,ce.y,de,ye))return V(Q,0),!0}}function W(Q){var ne=Q._private,ae=ne.rscratch,oe=Q.pstyle("width").pfValue,se=Q.pstyle("arrow-scale").value,ce=oe/2+L,de=ce*ce,ye=ce*2,be=ne.source,ke=ne.target,we;if(ae.edgeType==="segments"||ae.edgeType==="straight"||ae.edgeType==="haystack"){for(var ge=ae.allpts,ve=0;ve+3<ge.length;ve+=2)if(inLineVicinity(_,v,ge[ve],ge[ve+1],ge[ve+2],ge[ve+3],ye)&&de>(we=sqdistToFiniteLine(_,v,ge[ve],ge[ve+1],ge[ve+2],ge[ve+3])))return V(Q,we),!0}else if(ae.edgeType==="bezier"||ae.edgeType==="multibezier"||ae.edgeType==="self"||ae.edgeType==="compound"){for(var ge=ae.allpts,ve=0;ve+5<ae.allpts.length;ve+=4)if(inBezierVicinity(_,v,ge[ve],ge[ve+1],ge[ve+2],ge[ve+3],ge[ve+4],ge[ve+5],ye)&&de>(we=sqdistToQuadraticBezier(_,v,ge[ve],ge[ve+1],ge[ve+2],ge[ve+3],ge[ve+4],ge[ve+5])))return V(Q,we),!0}for(var be=be||ne.source,ke=ke||ne.target,me=T.getArrowWidth(oe,se),fe=[{name:"source",x:ae.arrowStartX,y:ae.arrowStartY,angle:ae.srcArrowAngle},{name:"target",x:ae.arrowEndX,y:ae.arrowEndY,angle:ae.tgtArrowAngle},{name:"mid-source",x:ae.midX,y:ae.midY,angle:ae.midsrcArrowAngle},{name:"mid-target",x:ae.midX,y:ae.midY,angle:ae.midtgtArrowAngle}],ve=0;ve<fe.length;ve++){var xe=fe[ve],Ae=A.arrowShapes[Q.pstyle(xe.name+"-arrow-shape").value],Se=Q.pstyle("width").pfValue;if(Ae.roughCollide(_,v,me,xe.angle,{x:xe.x,y:xe.y},Se,L)&&Ae.collide(_,v,me,xe.angle,{x:xe.x,y:xe.y},Se,L))return V(Q),!0}D&&M.length>0&&(G(be),G(ke))}function Y(Q,ne,ae){return getPrefixedProperty(Q,ne,ae)}function X(Q,ne){var ae=Q._private,oe=B,se;ne?se=ne+"-":se="",Q.boundingBox();var ce=ae.labelBounds[ne||"main"],de=Q.pstyle(se+"label").value,ye=Q.pstyle("text-events").strValue==="yes";if(!(!ye||!de)){var we=Y(ae.rscratch,"labelX",ne),ge=Y(ae.rscratch,"labelY",ne),ve=Y(ae.rscratch,"labelAngle",ne),be=Q.pstyle(se+"text-margin-x").pfValue,ke=Q.pstyle(se+"text-margin-y").pfValue,me=ce.x1-oe-be,fe=ce.x2+oe-be,xe=ce.y1-oe-ke,Ae=ce.y2+oe-ke;if(ve){var Se=Math.cos(ve),Me=Math.sin(ve),Oe=function(Ne,tt){return Ne=Ne-we,tt=tt-ge,{x:Ne*Se-tt*Me+we,y:Ne*Me+tt*Se+ge}},Ce=Oe(me,xe),$e=Oe(me,Ae),Be=Oe(fe,xe),Pe=Oe(fe,Ae),De=[Ce.x+be,Ce.y+ke,Be.x+be,Be.y+ke,Pe.x+be,Pe.y+ke,$e.x+be,$e.y+ke];if(pointInsidePolygonPoints(_,v,De))return V(Q),!0}else if(inBoundingBox(ce,_,v))return V(Q),!0}}for(var ee=k.length-1;ee>=0;ee--){var re=k[ee];re.isNode()?G(re)||X(re):W(re)||X(re)||X(re,"source")||X(re,"target")}return M};BRp$e.getAllInBox=function(_,v,S,R){var T=this.getCachedZSortedEles().interactive,A=this.cy.zoom(),k=2/A,M=[],P=Math.min(_,S),D=Math.max(_,S),L=Math.min(v,R),q=Math.max(v,R);_=P,S=D,v=L,R=q;var B=makeBoundingBox({x1:_,y1:v,x2:S,y2:R}),F=[{x:B.x1,y:B.y1},{x:B.x2,y:B.y1},{x:B.x2,y:B.y2},{x:B.x1,y:B.y2}],j=[[F[0],F[1]],[F[1],F[2]],[F[2],F[3]],[F[3],F[0]]];function z(Ne,tt,it){return getPrefixedProperty(Ne,tt,it)}function V(Ne,tt){var it=Ne._private,dt=k,pt="";Ne.boundingBox();var We=it.labelBounds.main;if(!We)return null;var Et=z(it.rscratch,"labelX",tt),st=z(it.rscratch,"labelY",tt),xt=z(it.rscratch,"labelAngle",tt),gt=Ne.pstyle(pt+"text-margin-x").pfValue,_t=Ne.pstyle(pt+"text-margin-y").pfValue,St=We.x1-dt-gt,Lt=We.x2+dt-gt,jt=We.y1-dt-_t,Gt=We.y2+dt-_t;if(xt){var At=Math.cos(xt),Nt=Math.sin(xt),Ct=function(et,Re){return et=et-Et,Re=Re-st,{x:et*At-Re*Nt+Et,y:et*Nt+Re*At+st}};return[Ct(St,jt),Ct(Lt,jt),Ct(Lt,Gt),Ct(St,Gt)]}else return[{x:St,y:jt},{x:Lt,y:jt},{x:Lt,y:Gt},{x:St,y:Gt}]}function G(Ne,tt,it,dt){function pt(We,Et,st){return(st.y-We.y)*(Et.x-We.x)>(Et.y-We.y)*(st.x-We.x)}return pt(Ne,it,dt)!==pt(tt,it,dt)&&pt(Ne,tt,it)!==pt(Ne,tt,dt)}for(var W=0;W<T.length;W++){var Y=T[W];if(Y.isNode()){var X=Y,ee=X.pstyle("text-events").strValue==="yes",re=X.pstyle("box-selection").strValue,Q=X.pstyle("box-select-labels").strValue==="yes";if(re==="none")continue;var ne=(re==="overlap"||Q)&&ee,ae=X.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:ne});if(re==="contain"){var oe=!1;if(Q&&ee){var se=V(X);se&&satPolygonIntersection(se,F)&&(M.push(X),oe=!0)}!oe&&boundingBoxInBoundingBox(B,ae)&&M.push(X)}else if(re==="overlap"&&boundingBoxesIntersect(B,ae)){var ce=X.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),de=[{x:ce.x1,y:ce.y1},{x:ce.x2,y:ce.y1},{x:ce.x2,y:ce.y2},{x:ce.x1,y:ce.y2}];if(satPolygonIntersection(de,F))M.push(X);else{var ye=V(X);ye&&satPolygonIntersection(ye,F)&&M.push(X)}}}else{var we=Y,ge=we._private,ve=ge.rscratch,be=we.pstyle("box-selection").strValue;if(be==="none")continue;if(be==="contain"){if(ve.startX!=null&&ve.startY!=null&&!inBoundingBox(B,ve.startX,ve.startY)||ve.endX!=null&&ve.endY!=null&&!inBoundingBox(B,ve.endX,ve.endY))continue;if(ve.edgeType==="bezier"||ve.edgeType==="multibezier"||ve.edgeType==="self"||ve.edgeType==="compound"||ve.edgeType==="segments"||ve.edgeType==="haystack"){for(var ke=ge.rstyle.bezierPts||ge.rstyle.linePts||ge.rstyle.haystackPts,me=!0,fe=0;fe<ke.length;fe++)if(!pointInBoundingBox(B,ke[fe])){me=!1;break}me&&M.push(we)}else ve.edgeType==="straight"&&M.push(we)}else if(be==="overlap"){var xe=!1;if(ve.startX!=null&&ve.startY!=null&&ve.endX!=null&&ve.endY!=null&&(inBoundingBox(B,ve.startX,ve.startY)||inBoundingBox(B,ve.endX,ve.endY)))M.push(we),xe=!0;else if(!xe&&ve.edgeType==="haystack"){for(var Ae=ge.rstyle.haystackPts,Se=0;Se<Ae.length;Se++)if(pointInBoundingBox(B,Ae[Se])){M.push(we),xe=!0;break}}if(!xe){var Me=ge.rstyle.bezierPts||ge.rstyle.linePts||ge.rstyle.haystackPts;if((!Me||Me.length<2)&&ve.edgeType==="straight"&&ve.startX!=null&&ve.startY!=null&&ve.endX!=null&&ve.endY!=null&&(Me=[{x:ve.startX,y:ve.startY},{x:ve.endX,y:ve.endY}]),!Me||Me.length<2)continue;for(var Oe=0;Oe<Me.length-1;Oe++){for(var Ce=Me[Oe],$e=Me[Oe+1],Be=0;Be<j.length;Be++){var Pe=_slicedToArray(j[Be],2),De=Pe[0],Le=Pe[1];if(G(Ce,$e,De,Le)){M.push(we),xe=!0;break}}if(xe)break}}}}}return M};var BRp$d={};BRp$d.calculateArrowAngles=function(_){var v=_._private.rscratch,S=v.edgeType==="haystack",R=v.edgeType==="bezier",T=v.edgeType==="multibezier",A=v.edgeType==="segments",k=v.edgeType==="compound",M=v.edgeType==="self",P,D,L,q,B,F,G,W;if(S?(L=v.haystackPts[0],q=v.haystackPts[1],B=v.haystackPts[2],F=v.haystackPts[3]):(L=v.arrowStartX,q=v.arrowStartY,B=v.arrowEndX,F=v.arrowEndY),G=v.midX,W=v.midY,A)P=L-v.segpts[0],D=q-v.segpts[1];else if(T||k||M||R){var j=v.allpts,z=qbezierAt(j[0],j[2],j[4],.1),V=qbezierAt(j[1],j[3],j[5],.1);P=L-z,D=q-V}else P=L-G,D=q-W;v.srcArrowAngle=getAngleFromDisp(P,D);var G=v.midX,W=v.midY;if(S&&(G=(L+B)/2,W=(q+F)/2),P=B-L,D=F-q,A){var j=v.allpts;if(j.length/2%2===0){var Y=j.length/2,X=Y-2;P=j[Y]-j[X],D=j[Y+1]-j[X+1]}else if(v.isRound)P=v.midVector[1],D=-v.midVector[0];else{var Y=j.length/2-1,X=Y-2;P=j[Y]-j[X],D=j[Y+1]-j[X+1]}}else if(T||k||M){var j=v.allpts,ee=v.ctrlpts,re,Q,ne,ae;if(ee.length/2%2===0){var oe=j.length/2-1,se=oe+2,ce=se+2;re=qbezierAt(j[oe],j[se],j[ce],0),Q=qbezierAt(j[oe+1],j[se+1],j[ce+1],0),ne=qbezierAt(j[oe],j[se],j[ce],1e-4),ae=qbezierAt(j[oe+1],j[se+1],j[ce+1],1e-4)}else{var se=j.length/2-1,oe=se-2,ce=se+2;re=qbezierAt(j[oe],j[se],j[ce],.4999),Q=qbezierAt(j[oe+1],j[se+1],j[ce+1],.4999),ne=qbezierAt(j[oe],j[se],j[ce],.5),ae=qbezierAt(j[oe+1],j[se+1],j[ce+1],.5)}P=ne-re,D=ae-Q}if(v.midtgtArrowAngle=getAngleFromDisp(P,D),v.midDispX=P,v.midDispY=D,P*=-1,D*=-1,A){var j=v.allpts;if(j.length/2%2!==0){if(!v.isRound){var Y=j.length/2-1,de=Y+2;P=-(j[de]-j[Y]),D=-(j[de+1]-j[Y+1])}}}if(v.midsrcArrowAngle=getAngleFromDisp(P,D),A)P=B-v.segpts[v.segpts.length-2],D=F-v.segpts[v.segpts.length-1];else if(T||k||M||R){var j=v.allpts,ye=j.length,z=qbezierAt(j[ye-6],j[ye-4],j[ye-2],.9),V=qbezierAt(j[ye-5],j[ye-3],j[ye-1],.9);P=B-z,D=F-V}else P=B-G,D=F-W;v.tgtArrowAngle=getAngleFromDisp(P,D)};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(_,v){var S=this.arrowWidthCache=this.arrowWidthCache||{},R=S[_+", "+v];return R||(R=Math.max(Math.pow(_*13.37,.9),29)*v,S[_+", "+v]=R,R)};var x$1,y$1,v1={},v2={},sinA,sinA90,radDirection,drawDirection,angle,halfAngle,cRadius,lenOut,radius,limit,startX,startY,stopX,stopY,lastPoint,asVec=function(v,S,R){R.x=S.x-v.x,R.y=S.y-v.y,R.len=Math.sqrt(R.x*R.x+R.y*R.y),R.nx=R.x/R.len,R.ny=R.y/R.len,R.ang=Math.atan2(R.ny,R.nx)},invertVec=function(v,S){S.x=v.x*-1,S.y=v.y*-1,S.nx=v.nx*-1,S.ny=v.ny*-1,S.ang=v.ang>0?-(Math.PI-v.ang):Math.PI+v.ang},calcCornerArc=function(v,S,R,T,A){if(v!==lastPoint?asVec(S,v,v1):invertVec(v2,v1),asVec(S,R,v2),sinA=v1.nx*v2.ny-v1.ny*v2.nx,sinA90=v1.nx*v2.nx-v1.ny*-v2.ny,angle=Math.asin(Math.max(-1,Math.min(1,sinA))),Math.abs(angle)<1e-6){x$1=S.x,y$1=S.y,cRadius=radius=0;return}radDirection=1,drawDirection=!1,sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),S.radius!==void 0?radius=S.radius:radius=T,halfAngle=angle/2,limit=Math.min(v1.len/2,v2.len/2),A?(lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle)),lenOut>limit?(lenOut=limit,cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius):(lenOut=Math.min(limit,radius),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))),stopX=S.x+v2.nx*lenOut,stopY=S.y+v2.ny*lenOut,x$1=stopX-v2.ny*cRadius*radDirection,y$1=stopY+v2.nx*cRadius*radDirection,startX=S.x+v1.nx*lenOut,startY=S.y+v1.ny*lenOut,lastPoint=S};function drawPreparedRoundCorner(_,v){v.radius===0?_.lineTo(v.cx,v.cy):_.arc(v.cx,v.cy,v.radius,v.startAngle,v.endAngle,v.counterClockwise)}function getRoundCorner(_,v,S,R){var T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return R===0||v.radius===0?{cx:v.x,cy:v.y,radius:0,startX:v.x,startY:v.y,stopX:v.x,stopY:v.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(calcCornerArc(_,v,S,R,T),{cx:x$1,cy:y$1,radius:cRadius,startX,startY,stopX,stopY,startAngle:v1.ang+Math.PI/2*radDirection,endAngle:v2.ang-Math.PI/2*radDirection,counterClockwise:drawDirection})}var AVOID_IMPOSSIBLE_BEZIER_CONSTANT=.01,AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L=Math.sqrt(2*AVOID_IMPOSSIBLE_BEZIER_CONSTANT),BRp$c={};BRp$c.findMidptPtsEtc=function(_,v){var S=v.posPts,R=v.intersectionPts,T=v.vectorNormInverse,A,k=_.pstyle("source-endpoint"),M=_.pstyle("target-endpoint"),P=k.units!=null&&M.units!=null,D=function(ee,re,Q,ne){var ae=ne-re,oe=Q-ee,se=Math.sqrt(oe*oe+ae*ae);return{x:-ae/se,y:oe/se}},L=_.pstyle("edge-distances").value;switch(L){case"node-position":A=S;break;case"intersection":A=R;break;case"endpoints":{if(P){var q=this.manualEndptToPx(_.source()[0],k),B=_slicedToArray(q,2),F=B[0],j=B[1],z=this.manualEndptToPx(_.target()[0],M),V=_slicedToArray(z,2),G=V[0],W=V[1],Y={x1:F,y1:j,x2:G,y2:W};T=D(F,j,G,W),A=Y}else warn$1("Edge ".concat(_.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),A=R;break}}return{midptPts:A,vectorNormInverse:T}};BRp$c.findHaystackPoints=function(_){for(var v=0;v<_.length;v++){var S=_[v],R=S._private,T=R.rscratch;if(!T.haystack){var A=Math.random()*2*Math.PI;T.source={x:Math.cos(A),y:Math.sin(A)},A=Math.random()*2*Math.PI,T.target={x:Math.cos(A),y:Math.sin(A)}}var k=R.source,M=R.target,P=k.position(),D=M.position(),L=k.width(),q=M.width(),B=k.height(),F=M.height(),j=S.pstyle("haystack-radius").value,z=j/2;T.haystackPts=T.allpts=[T.source.x*L*z+P.x,T.source.y*B*z+P.y,T.target.x*q*z+D.x,T.target.y*F*z+D.y],T.midX=(T.allpts[0]+T.allpts[2])/2,T.midY=(T.allpts[1]+T.allpts[3])/2,T.edgeType="haystack",T.haystack=!0,this.storeEdgeProjections(S),this.calculateArrowAngles(S),this.recalculateEdgeLabelProjections(S),this.calculateLabelAngles(S)}};BRp$c.findSegmentsPoints=function(_,v){var S=_._private.rscratch,R=_.pstyle("segment-weights"),T=_.pstyle("segment-distances"),A=_.pstyle("segment-radii"),k=_.pstyle("radius-type"),M=Math.min(R.pfValue.length,T.pfValue.length),P=A.pfValue[A.pfValue.length-1],D=k.pfValue[k.pfValue.length-1];S.edgeType="segments",S.segpts=[],S.radii=[],S.isArcRadius=[];for(var L=0;L<M;L++){var q=R.pfValue[L],B=T.pfValue[L],F=1-q,j=q,z=this.findMidptPtsEtc(_,v),V=z.midptPts,G=z.vectorNormInverse,W={x:V.x1*F+V.x2*j,y:V.y1*F+V.y2*j};S.segpts.push(W.x+G.x*B,W.y+G.y*B),S.radii.push(A.pfValue[L]!==void 0?A.pfValue[L]:P),S.isArcRadius.push((k.pfValue[L]!==void 0?k.pfValue[L]:D)==="arc-radius")}};BRp$c.findLoopPoints=function(_,v,S,R){var T=_._private.rscratch,A=v.dirCounts,k=v.srcPos,M=_.pstyle("control-point-distances"),P=M?M.pfValue[0]:void 0,D=_.pstyle("loop-direction").pfValue,L=_.pstyle("loop-sweep").pfValue,q=_.pstyle("control-point-step-size").pfValue;T.edgeType="self";var B=S,F=q;R&&(B=0,F=P);var j=D-Math.PI/2,z=j-L/2,V=j+L/2,G=D+"_"+L;B=A[G]===void 0?A[G]=0:++A[G],T.ctrlpts=[k.x+Math.cos(z)*1.4*F*(B/3+1),k.y+Math.sin(z)*1.4*F*(B/3+1),k.x+Math.cos(V)*1.4*F*(B/3+1),k.y+Math.sin(V)*1.4*F*(B/3+1)]};BRp$c.findCompoundLoopPoints=function(_,v,S,R){var T=_._private.rscratch;T.edgeType="compound";var A=v.srcPos,k=v.tgtPos,M=v.srcW,P=v.srcH,D=v.tgtW,L=v.tgtH,q=_.pstyle("control-point-step-size").pfValue,B=_.pstyle("control-point-distances"),F=B?B.pfValue[0]:void 0,j=S,z=q;R&&(j=0,z=F);var V=50,G={x:A.x-M/2,y:A.y-P/2},W={x:k.x-D/2,y:k.y-L/2},Y={x:Math.min(G.x,W.x),y:Math.min(G.y,W.y)},X=.5,ee=Math.max(X,Math.log(M*AVOID_IMPOSSIBLE_BEZIER_CONSTANT)),re=Math.max(X,Math.log(D*AVOID_IMPOSSIBLE_BEZIER_CONSTANT));T.ctrlpts=[Y.x,Y.y-(1+Math.pow(V,1.12)/100)*z*(j/3+1)*ee,Y.x-(1+Math.pow(V,1.12)/100)*z*(j/3+1)*re,Y.y]};BRp$c.findStraightEdgePoints=function(_){_._private.rscratch.edgeType="straight"};BRp$c.findBezierPoints=function(_,v,S,R,T){var A=_._private.rscratch,k=_.pstyle("control-point-step-size").pfValue,M=_.pstyle("control-point-distances"),P=_.pstyle("control-point-weights"),D=M&&P?Math.min(M.value.length,P.value.length):1,L=M?M.pfValue[0]:void 0,q=P.value[0],B=R;A.edgeType=B?"multibezier":"bezier",A.ctrlpts=[];for(var F=0;F<D;F++){var j=(.5-v.eles.length/2+S)*k*(T?-1:1),z=void 0,V=signum(j);B&&(L=M?M.pfValue[F]:k,q=P.value[F]),R?z=L:z=L!==void 0?V*L:void 0;var G=z!==void 0?z:j,W=1-q,Y=q,X=this.findMidptPtsEtc(_,v),ee=X.midptPts,re=X.vectorNormInverse,Q={x:ee.x1*W+ee.x2*Y,y:ee.y1*W+ee.y2*Y};A.ctrlpts.push(Q.x+re.x*G,Q.y+re.y*G)}};BRp$c.findTaxiPoints=function(_,v){var S=_._private.rscratch;S.edgeType="segments";var R="vertical",T="horizontal",A="leftward",k="rightward",M="downward",P="upward",D="auto",L=v.posPts,q=v.srcW,B=v.srcH,F=v.tgtW,j=v.tgtH,z=_.pstyle("edge-distances").value,V=z!=="node-position",G=_.pstyle("taxi-direction").value,W=G,Y=_.pstyle("taxi-turn"),X=Y.units==="%",ee=Y.pfValue,re=ee<0,Q=_.pstyle("taxi-turn-min-distance").pfValue,ne=V?(q+F)/2:0,ae=V?(B+j)/2:0,oe=L.x2-L.x1,se=L.y2-L.y1,ce=function(Re,je){return Re>0?Math.max(Re-je,0):Math.min(Re+je,0)},de=ce(oe,ne),ye=ce(se,ae),we=!1;W===D?G=Math.abs(de)>Math.abs(ye)?T:R:W===P||W===M?(G=R,we=!0):(W===A||W===k)&&(G=T,we=!0);var ge=G===R,ve=ge?ye:de,be=ge?se:oe,ke=signum(be),me=!1;!(we&&(X||re))&&(W===M&&be<0||W===P&&be>0||W===A&&be>0||W===k&&be<0)&&(ke*=-1,ve=ke*Math.abs(ve),me=!0);var fe;if(X){var xe=ee<0?1+ee:ee;fe=xe*ve}else{var Ae=ee<0?ve:0;fe=Ae+ee*ke}var Se=function(Re){return Math.abs(Re)<Q||Math.abs(Re)>=Math.abs(ve)},Me=Se(fe),Oe=Se(Math.abs(ve)-Math.abs(fe)),Ce=Me||Oe;if(Ce&&!me)if(ge){var $e=Math.abs(be)<=B/2,Be=Math.abs(oe)<=F/2;if($e){var Pe=(L.x1+L.x2)/2,De=L.y1,Le=L.y2;S.segpts=[Pe,De,Pe,Le]}else if(Be){var Ne=(L.y1+L.y2)/2,tt=L.x1,it=L.x2;S.segpts=[tt,Ne,it,Ne]}else S.segpts=[L.x1,L.y2]}else{var dt=Math.abs(be)<=q/2,pt=Math.abs(se)<=j/2;if(dt){var We=(L.y1+L.y2)/2,Et=L.x1,st=L.x2;S.segpts=[Et,We,st,We]}else if(pt){var xt=(L.x1+L.x2)/2,gt=L.y1,_t=L.y2;S.segpts=[xt,gt,xt,_t]}else S.segpts=[L.x2,L.y1]}else if(ge){var St=L.y1+fe+(V?B/2*ke:0),Lt=L.x1,jt=L.x2;S.segpts=[Lt,St,jt,St]}else{var Gt=L.x1+fe+(V?q/2*ke:0),At=L.y1,Nt=L.y2;S.segpts=[Gt,At,Gt,Nt]}if(S.isRound){var Ct=_.pstyle("taxi-radius").value,bt=_.pstyle("radius-type").value[0]==="arc-radius";S.radii=new Array(S.segpts.length/2).fill(Ct),S.isArcRadius=new Array(S.segpts.length/2).fill(bt)}};BRp$c.tryToCorrectInvalidPoints=function(_,v){var S=_._private.rscratch;if(S.edgeType==="bezier"){var R=v.srcPos,T=v.tgtPos,A=v.srcW,k=v.srcH,M=v.tgtW,P=v.tgtH,D=v.srcShape,L=v.tgtShape,q=v.srcCornerRadius,B=v.tgtCornerRadius,F=v.srcRs,j=v.tgtRs,z=!number$1(S.startX)||!number$1(S.startY),V=!number$1(S.arrowStartX)||!number$1(S.arrowStartY),G=!number$1(S.endX)||!number$1(S.endY),W=!number$1(S.arrowEndX)||!number$1(S.arrowEndY),Y=3,X=this.getArrowWidth(_.pstyle("width").pfValue,_.pstyle("arrow-scale").value)*this.arrowShapeWidth,ee=Y*X,re=dist$1({x:S.ctrlpts[0],y:S.ctrlpts[1]},{x:S.startX,y:S.startY}),Q=re<ee,ne=dist$1({x:S.ctrlpts[0],y:S.ctrlpts[1]},{x:S.endX,y:S.endY}),ae=ne<ee,oe=!1;if(z||V||Q){oe=!0;var se={x:S.ctrlpts[0]-R.x,y:S.ctrlpts[1]-R.y},ce=Math.sqrt(se.x*se.x+se.y*se.y),de={x:se.x/ce,y:se.y/ce},ye=Math.max(A,k),we={x:S.ctrlpts[0]+de.x*2*ye,y:S.ctrlpts[1]+de.y*2*ye},ge=D.intersectLine(R.x,R.y,A,k,we.x,we.y,0,q,F);Q?(S.ctrlpts[0]=S.ctrlpts[0]+de.x*(ee-re),S.ctrlpts[1]=S.ctrlpts[1]+de.y*(ee-re)):(S.ctrlpts[0]=ge[0]+de.x*ee,S.ctrlpts[1]=ge[1]+de.y*ee)}if(G||W||ae){oe=!0;var ve={x:S.ctrlpts[0]-T.x,y:S.ctrlpts[1]-T.y},be=Math.sqrt(ve.x*ve.x+ve.y*ve.y),ke={x:ve.x/be,y:ve.y/be},me=Math.max(A,k),fe={x:S.ctrlpts[0]+ke.x*2*me,y:S.ctrlpts[1]+ke.y*2*me},xe=L.intersectLine(T.x,T.y,M,P,fe.x,fe.y,0,B,j);ae?(S.ctrlpts[0]=S.ctrlpts[0]+ke.x*(ee-ne),S.ctrlpts[1]=S.ctrlpts[1]+ke.y*(ee-ne)):(S.ctrlpts[0]=xe[0]+ke.x*ee,S.ctrlpts[1]=xe[1]+ke.y*ee)}oe&&this.findEndpoints(_)}};BRp$c.storeAllpts=function(_){var v=_._private.rscratch;if(v.edgeType==="multibezier"||v.edgeType==="bezier"||v.edgeType==="self"||v.edgeType==="compound"){v.allpts=[],v.allpts.push(v.startX,v.startY);for(var S=0;S+1<v.ctrlpts.length;S+=2)v.allpts.push(v.ctrlpts[S],v.ctrlpts[S+1]),S+3<v.ctrlpts.length&&v.allpts.push((v.ctrlpts[S]+v.ctrlpts[S+2])/2,(v.ctrlpts[S+1]+v.ctrlpts[S+3])/2);v.allpts.push(v.endX,v.endY);var R,T;v.ctrlpts.length/2%2===0?(R=v.allpts.length/2-1,v.midX=v.allpts[R],v.midY=v.allpts[R+1]):(R=v.allpts.length/2-3,T=.5,v.midX=qbezierAt(v.allpts[R],v.allpts[R+2],v.allpts[R+4],T),v.midY=qbezierAt(v.allpts[R+1],v.allpts[R+3],v.allpts[R+5],T))}else if(v.edgeType==="straight")v.allpts=[v.startX,v.startY,v.endX,v.endY],v.midX=(v.startX+v.endX+v.arrowStartX+v.arrowEndX)/4,v.midY=(v.startY+v.endY+v.arrowStartY+v.arrowEndY)/4;else if(v.edgeType==="segments"){if(v.allpts=[],v.allpts.push(v.startX,v.startY),v.allpts.push.apply(v.allpts,v.segpts),v.allpts.push(v.endX,v.endY),v.isRound){v.roundCorners=[];for(var A=2;A+3<v.allpts.length;A+=2){var k=v.radii[A/2-1],M=v.isArcRadius[A/2-1];v.roundCorners.push(getRoundCorner({x:v.allpts[A-2],y:v.allpts[A-1]},{x:v.allpts[A],y:v.allpts[A+1],radius:k},{x:v.allpts[A+2],y:v.allpts[A+3]},k,M))}}if(v.segpts.length%4===0){var P=v.segpts.length/2,D=P-2;v.midX=(v.segpts[D]+v.segpts[P])/2,v.midY=(v.segpts[D+1]+v.segpts[P+1])/2}else{var L=v.segpts.length/2-1;if(!v.isRound)v.midX=v.segpts[L],v.midY=v.segpts[L+1];else{var q={x:v.segpts[L],y:v.segpts[L+1]},B=v.roundCorners[L/2];if(B.radius===0){var F={x:v.segpts[L+2],y:v.segpts[L+3]};v.midX=q.x,v.midY=q.y,v.midVector=[q.y-F.y,F.x-q.x]}else{var j=[q.x-B.cx,q.y-B.cy],z=B.radius/Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2));j=j.map(function(V){return V*z}),v.midX=B.cx+j[0],v.midY=B.cy+j[1],v.midVector=j}}}}};BRp$c.checkForInvalidEdgeWarning=function(_){var v=_[0]._private.rscratch;v.nodesOverlap||number$1(v.startX)&&number$1(v.startY)&&number$1(v.endX)&&number$1(v.endY)?v.loggedErr=!1:v.loggedErr||(v.loggedErr=!0,warn$1("Edge `"+_.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};BRp$c.findEdgeControlPoints=function(_){var v=this;if(!(!_||_.length===0)){for(var S=this,R=S.cy,T=R.hasCompoundNodes(),A=new Map$1,k=function(ae,oe){return[].concat(_toConsumableArray(ae),[oe?1:0]).join("-")},M=[],P=[],D=0;D<_.length;D++){var L=_[D],q=L._private,B=L.pstyle("curve-style").value;if(!(L.removed()||!L.takesUpSpace())){if(B==="haystack"){P.push(L);continue}var F=B==="unbundled-bezier"||endsWith(B,"segments")||B==="straight"||B==="straight-triangle"||endsWith(B,"taxi"),j=B==="unbundled-bezier"||B==="bezier",z=q.source,V=q.target,G=z.poolIndex(),W=V.poolIndex(),Y=[G,W].sort(),X=k(Y,F),ee=A.get(X);ee==null&&(ee={eles:[]},M.push({pairId:Y,edgeIsUnbundled:F}),A.set(X,ee)),ee.eles.push(L),F&&(ee.hasUnbundled=!0),j&&(ee.hasBezier=!0)}}for(var re=function(){var ae=M[Q],oe=ae.pairId,se=ae.edgeIsUnbundled,ce=k(oe,se),de=A.get(ce),ye;if(!de.hasUnbundled){var we=de.eles[0].parallelEdges().filter(function(bt){return bt.isBundledBezier()});clearArray(de.eles),we.forEach(function(bt){return de.eles.push(bt)}),de.eles.sort(function(bt,et){return bt.poolIndex()-et.poolIndex()})}var ge=de.eles[0],ve=ge.source(),be=ge.target();if(ve.poolIndex()>be.poolIndex()){var ke=ve;ve=be,be=ke}var me=de.srcPos=ve.position(),fe=de.tgtPos=be.position(),xe=de.srcW=ve.outerWidth(),Ae=de.srcH=ve.outerHeight(),Se=de.tgtW=be.outerWidth(),Me=de.tgtH=be.outerHeight(),Oe=de.srcShape=S.nodeShapes[v.getNodeShape(ve)],Ce=de.tgtShape=S.nodeShapes[v.getNodeShape(be)],$e=de.srcCornerRadius=ve.pstyle("corner-radius").value==="auto"?"auto":ve.pstyle("corner-radius").pfValue,Be=de.tgtCornerRadius=be.pstyle("corner-radius").value==="auto"?"auto":be.pstyle("corner-radius").pfValue,Pe=de.tgtRs=be._private.rscratch,De=de.srcRs=ve._private.rscratch;de.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Le=0;Le<de.eles.length;Le++){var Ne=de.eles[Le],tt=Ne[0]._private.rscratch,it=Ne.pstyle("curve-style").value,dt=it==="unbundled-bezier"||endsWith(it,"segments")||endsWith(it,"taxi"),pt=!ve.same(Ne.source());if(!de.calculatedIntersection&&ve!==be&&(de.hasBezier||de.hasUnbundled)){de.calculatedIntersection=!0;var We=Oe.intersectLine(me.x,me.y,xe,Ae,fe.x,fe.y,0,$e,De),Et=de.srcIntn=We,st=Ce.intersectLine(fe.x,fe.y,Se,Me,me.x,me.y,0,Be,Pe),xt=de.tgtIntn=st,gt=de.intersectionPts={x1:We[0],x2:st[0],y1:We[1],y2:st[1]},_t=de.posPts={x1:me.x,x2:fe.x,y1:me.y,y2:fe.y},St=st[1]-We[1],Lt=st[0]-We[0],jt=Math.sqrt(Lt*Lt+St*St);number$1(jt)&&jt>=AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L||(jt=Math.sqrt(Math.max(Lt*Lt,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)+Math.max(St*St,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)));var Gt=de.vector={x:Lt,y:St},At=de.vectorNorm={x:Gt.x/jt,y:Gt.y/jt},Nt={x:-At.y,y:At.x};de.nodesOverlap=!number$1(jt)||Ce.checkPoint(We[0],We[1],0,Se,Me,fe.x,fe.y,Be,Pe)||Oe.checkPoint(st[0],st[1],0,xe,Ae,me.x,me.y,$e,De),de.vectorNormInverse=Nt,ye={nodesOverlap:de.nodesOverlap,dirCounts:de.dirCounts,calculatedIntersection:!0,hasBezier:de.hasBezier,hasUnbundled:de.hasUnbundled,eles:de.eles,srcPos:fe,srcRs:Pe,tgtPos:me,tgtRs:De,srcW:Se,srcH:Me,tgtW:xe,tgtH:Ae,srcIntn:xt,tgtIntn:Et,srcShape:Ce,tgtShape:Oe,posPts:{x1:_t.x2,y1:_t.y2,x2:_t.x1,y2:_t.y1},intersectionPts:{x1:gt.x2,y1:gt.y2,x2:gt.x1,y2:gt.y1},vector:{x:-Gt.x,y:-Gt.y},vectorNorm:{x:-At.x,y:-At.y},vectorNormInverse:{x:-Nt.x,y:-Nt.y}}}var Ct=pt?ye:de;tt.nodesOverlap=Ct.nodesOverlap,tt.srcIntn=Ct.srcIntn,tt.tgtIntn=Ct.tgtIntn,tt.isRound=it.startsWith("round"),T&&(ve.isParent()||ve.isChild()||be.isParent()||be.isChild())&&(ve.parents().anySame(be)||be.parents().anySame(ve)||ve.same(be)&&ve.isParent())?v.findCompoundLoopPoints(Ne,Ct,Le,dt):ve===be?v.findLoopPoints(Ne,Ct,Le,dt):it.endsWith("segments")?v.findSegmentsPoints(Ne,Ct):it.endsWith("taxi")?v.findTaxiPoints(Ne,Ct):it==="straight"||!dt&&de.eles.length%2===1&&Le===Math.floor(de.eles.length/2)?v.findStraightEdgePoints(Ne):v.findBezierPoints(Ne,Ct,Le,dt,pt),v.findEndpoints(Ne),v.tryToCorrectInvalidPoints(Ne,Ct),v.checkForInvalidEdgeWarning(Ne),v.storeAllpts(Ne),v.storeEdgeProjections(Ne),v.calculateArrowAngles(Ne),v.recalculateEdgeLabelProjections(Ne),v.calculateLabelAngles(Ne)}},Q=0;Q<M.length;Q++)re();this.findHaystackPoints(P)}};function getPts(_){var v=[];if(_!=null){for(var S=0;S<_.length;S+=2){var R=_[S],T=_[S+1];v.push({x:R,y:T})}return v}}BRp$c.getSegmentPoints=function(_){var v=_[0]._private.rscratch;this.recalculateRenderedStyle(_);var S=v.edgeType;if(S==="segments")return getPts(v.segpts)};BRp$c.getControlPoints=function(_){var v=_[0]._private.rscratch;this.recalculateRenderedStyle(_);var S=v.edgeType;if(S==="bezier"||S==="multibezier"||S==="self"||S==="compound")return getPts(v.ctrlpts)};BRp$c.getEdgeMidpoint=function(_){var v=_[0]._private.rscratch;return this.recalculateRenderedStyle(_),{x:v.midX,y:v.midY}};var BRp$b={};BRp$b.manualEndptToPx=function(_,v){var S=this,R=_.position(),T=_.outerWidth(),A=_.outerHeight(),k=_._private.rscratch;if(v.value.length===2){var M=[v.pfValue[0],v.pfValue[1]];return v.units[0]==="%"&&(M[0]=M[0]*T),v.units[1]==="%"&&(M[1]=M[1]*A),M[0]+=R.x,M[1]+=R.y,M}else{var P=v.pfValue[0];P=-Math.PI/2+P;var D=2*Math.max(T,A),L=[R.x+Math.cos(P)*D,R.y+Math.sin(P)*D];return S.nodeShapes[this.getNodeShape(_)].intersectLine(R.x,R.y,T,A,L[0],L[1],0,_.pstyle("corner-radius").value==="auto"?"auto":_.pstyle("corner-radius").pfValue,k)}};BRp$b.findEndpoints=function(_){var v,S,R,T,A=this,k,M=_.source()[0],P=_.target()[0],D=M.position(),L=P.position(),q=_.pstyle("target-arrow-shape").value,B=_.pstyle("source-arrow-shape").value,F=_.pstyle("target-distance-from-node").pfValue,j=_.pstyle("source-distance-from-node").pfValue,z=M._private.rscratch,V=P._private.rscratch,G=_.pstyle("curve-style").value,W=_._private.rscratch,Y=W.edgeType,X=endsWith(G,"taxi"),ee=Y==="self"||Y==="compound",re=Y==="bezier"||Y==="multibezier"||ee,Q=Y!=="bezier",ne=Y==="straight"||Y==="segments",ae=Y==="segments",oe=re||Q||ne,se=ee||X,ce=_.pstyle("source-endpoint"),de=se?"outside-to-node":ce.value,ye=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,we=_.pstyle("target-endpoint"),ge=se?"outside-to-node":we.value,ve=P.pstyle("corner-radius").value==="auto"?"auto":P.pstyle("corner-radius").pfValue;W.srcManEndpt=ce,W.tgtManEndpt=we;var be,ke,me,fe,xe=(v=(we==null||(S=we.pfValue)===null||S===void 0?void 0:S.length)===2?we.pfValue:null)!==null&&v!==void 0?v:[0,0],Ae=(R=(ce==null||(T=ce.pfValue)===null||T===void 0?void 0:T.length)===2?ce.pfValue:null)!==null&&R!==void 0?R:[0,0];if(re){var Se=[W.ctrlpts[0],W.ctrlpts[1]],Me=Q?[W.ctrlpts[W.ctrlpts.length-2],W.ctrlpts[W.ctrlpts.length-1]]:Se;be=Me,ke=Se}else if(ne){var Oe=ae?W.segpts.slice(0,2):[L.x+xe[0],L.y+xe[1]],Ce=ae?W.segpts.slice(W.segpts.length-2):[D.x+Ae[0],D.y+Ae[1]];be=Ce,ke=Oe}if(ge==="inside-to-node")k=[L.x,L.y];else if(we.units)k=this.manualEndptToPx(P,we);else if(ge==="outside-to-line")k=W.tgtIntn;else if(ge==="outside-to-node"||ge==="outside-to-node-or-label"?me=be:(ge==="outside-to-line"||ge==="outside-to-line-or-label")&&(me=[D.x,D.y]),k=A.nodeShapes[this.getNodeShape(P)].intersectLine(L.x,L.y,P.outerWidth(),P.outerHeight(),me[0],me[1],0,ve,V),ge==="outside-to-node-or-label"||ge==="outside-to-line-or-label"){var $e=P._private.rscratch,Be=$e.labelWidth,Pe=$e.labelHeight,De=$e.labelX,Le=$e.labelY,Ne=Be/2,tt=Pe/2,it=P.pstyle("text-valign").value;it==="top"?Le-=tt:it==="bottom"&&(Le+=tt);var dt=P.pstyle("text-halign").value;dt==="left"?De-=Ne:dt==="right"&&(De+=Ne);var pt=polygonIntersectLine(me[0],me[1],[De-Ne,Le-tt,De+Ne,Le-tt,De+Ne,Le+tt,De-Ne,Le+tt],L.x,L.y);if(pt.length>0){var We=D,Et=sqdist(We,array2point(k)),st=sqdist(We,array2point(pt)),xt=Et;if(st<Et&&(k=pt,xt=st),pt.length>2){var gt=sqdist(We,{x:pt[2],y:pt[3]});gt<xt&&(k=[pt[2],pt[3]])}}}var _t=shortenIntersection(k,be,A.arrowShapes[q].spacing(_)+F),St=shortenIntersection(k,be,A.arrowShapes[q].gap(_)+F);if(W.endX=St[0],W.endY=St[1],W.arrowEndX=_t[0],W.arrowEndY=_t[1],de==="inside-to-node")k=[D.x,D.y];else if(ce.units)k=this.manualEndptToPx(M,ce);else if(de==="outside-to-line")k=W.srcIntn;else if(de==="outside-to-node"||de==="outside-to-node-or-label"?fe=ke:(de==="outside-to-line"||de==="outside-to-line-or-label")&&(fe=[L.x,L.y]),k=A.nodeShapes[this.getNodeShape(M)].intersectLine(D.x,D.y,M.outerWidth(),M.outerHeight(),fe[0],fe[1],0,ye,z),de==="outside-to-node-or-label"||de==="outside-to-line-or-label"){var Lt=M._private.rscratch,jt=Lt.labelWidth,Gt=Lt.labelHeight,At=Lt.labelX,Nt=Lt.labelY,Ct=jt/2,bt=Gt/2,et=M.pstyle("text-valign").value;et==="top"?Nt-=bt:et==="bottom"&&(Nt+=bt);var Re=M.pstyle("text-halign").value;Re==="left"?At-=Ct:Re==="right"&&(At+=Ct);var je=polygonIntersectLine(fe[0],fe[1],[At-Ct,Nt-bt,At+Ct,Nt-bt,At+Ct,Nt+bt,At-Ct,Nt+bt],D.x,D.y);if(je.length>0){var Ue=L,Ze=sqdist(Ue,array2point(k)),nt=sqdist(Ue,array2point(je)),wt=Ze;if(nt<Ze&&(k=[je[0],je[1]],wt=nt),je.length>2){var lt=sqdist(Ue,{x:je[2],y:je[3]});lt<wt&&(k=[je[2],je[3]])}}}var Tt=shortenIntersection(k,ke,A.arrowShapes[B].spacing(_)+j),Rt=shortenIntersection(k,ke,A.arrowShapes[B].gap(_)+j);W.startX=Rt[0],W.startY=Rt[1],W.arrowStartX=Tt[0],W.arrowStartY=Tt[1],oe&&(!number$1(W.startX)||!number$1(W.startY)||!number$1(W.endX)||!number$1(W.endY)?W.badLine=!0:W.badLine=!1)};BRp$b.getSourceEndpoint=function(_){var v=_[0]._private.rscratch;switch(this.recalculateRenderedStyle(_),v.edgeType){case"haystack":return{x:v.haystackPts[0],y:v.haystackPts[1]};default:return{x:v.arrowStartX,y:v.arrowStartY}}};BRp$b.getTargetEndpoint=function(_){var v=_[0]._private.rscratch;switch(this.recalculateRenderedStyle(_),v.edgeType){case"haystack":return{x:v.haystackPts[2],y:v.haystackPts[3]};default:return{x:v.arrowEndX,y:v.arrowEndY}}};var BRp$a={};function pushBezierPts(_,v,S){for(var R=function(D,L,q,B){return qbezierAt(D,L,q,B)},T=v._private,A=T.rstyle.bezierPts,k=0;k<_.bezierProjPcts.length;k++){var M=_.bezierProjPcts[k];A.push({x:R(S[0],S[2],S[4],M),y:R(S[1],S[3],S[5],M)})}}BRp$a.storeEdgeProjections=function(_){var v=_._private,S=v.rscratch,R=S.edgeType;if(v.rstyle.bezierPts=null,v.rstyle.linePts=null,v.rstyle.haystackPts=null,R==="multibezier"||R==="bezier"||R==="self"||R==="compound"){v.rstyle.bezierPts=[];for(var T=0;T+5<S.allpts.length;T+=4)pushBezierPts(this,_,S.allpts.slice(T,T+6))}else if(R==="segments")for(var A=v.rstyle.linePts=[],T=0;T+1<S.allpts.length;T+=2)A.push({x:S.allpts[T],y:S.allpts[T+1]});else if(R==="haystack"){var k=S.haystackPts;v.rstyle.haystackPts=[{x:k[0],y:k[1]},{x:k[2],y:k[3]}]}v.rstyle.arrowWidth=this.getArrowWidth(_.pstyle("width").pfValue,_.pstyle("arrow-scale").value)*this.arrowShapeWidth};BRp$a.recalculateEdgeProjections=function(_){this.findEdgeControlPoints(_)};var BRp$9={};BRp$9.recalculateNodeLabelProjection=function(_){var v=_.pstyle("label").strValue;if(!emptyString(v)){var S,R,T=_._private,A=_.width(),k=_.height(),M=_.padding(),P=_.position(),D=_.pstyle("text-halign").strValue,L=_.pstyle("text-valign").strValue,q=T.rscratch,B=T.rstyle;switch(D){case"left":S=P.x-A/2-M;break;case"right":S=P.x+A/2+M;break;default:S=P.x}switch(L){case"top":R=P.y-k/2-M;break;case"bottom":R=P.y+k/2+M;break;default:R=P.y}q.labelX=S,q.labelY=R,B.labelX=S,B.labelY=R,this.calculateLabelAngles(_),this.applyLabelDimensions(_)}};var lineAngleFromDelta=function(v,S){var R=Math.atan(S/v);return v===0&&R<0&&(R=R*-1),R},lineAngle=function(v,S){var R=S.x-v.x,T=S.y-v.y;return lineAngleFromDelta(R,T)},bezierAngle=function(v,S,R,T){var A=bound(0,T-.001,1),k=bound(0,T+.001,1),M=qbezierPtAt(v,S,R,A),P=qbezierPtAt(v,S,R,k);return lineAngle(M,P)};BRp$9.recalculateEdgeLabelProjections=function(_){var v,S=_._private,R=S.rscratch,T=this,A={mid:_.pstyle("label").strValue,source:_.pstyle("source-label").strValue,target:_.pstyle("target-label").strValue};if(A.mid||A.source||A.target){v={x:R.midX,y:R.midY};var k=function(q,B,F){setPrefixedProperty(S.rscratch,q,B,F),setPrefixedProperty(S.rstyle,q,B,F)};k("labelX",null,v.x),k("labelY",null,v.y);var M=lineAngleFromDelta(R.midDispX,R.midDispY);k("labelAutoAngle",null,M);var P=function(){if(P.cache)return P.cache;for(var q=[],B=0;B+5<R.allpts.length;B+=4){var F={x:R.allpts[B],y:R.allpts[B+1]},j={x:R.allpts[B+2],y:R.allpts[B+3]},z={x:R.allpts[B+4],y:R.allpts[B+5]};q.push({p0:F,p1:j,p2:z,startDist:0,length:0,segments:[]})}var V=S.rstyle.bezierPts,G=T.bezierProjPcts.length;function W(Q,ne,ae,oe,se){var ce=dist$1(ne,ae),de=Q.segments[Q.segments.length-1],ye={p0:ne,p1:ae,t0:oe,t1:se,startDist:de?de.startDist+de.length:0,length:ce};Q.segments.push(ye),Q.length+=ce}for(var Y=0;Y<q.length;Y++){var X=q[Y],ee=q[Y-1];ee&&(X.startDist=ee.startDist+ee.length),W(X,X.p0,V[Y*G],0,T.bezierProjPcts[0]);for(var re=0;re<G-1;re++)W(X,V[Y*G+re],V[Y*G+re+1],T.bezierProjPcts[re],T.bezierProjPcts[re+1]);W(X,V[Y*G+G-1],X.p2,T.bezierProjPcts[G-1],1)}return P.cache=q},D=function(q){var B,F=q==="source";if(A[q]){var j=_.pstyle(q+"-text-offset").pfValue;switch(R.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var z=P(),V,G=0,W=0,Y=0;Y<z.length;Y++){for(var X=z[F?Y:z.length-1-Y],ee=0;ee<X.segments.length;ee++){var re=X.segments[F?ee:X.segments.length-1-ee],Q=Y===z.length-1&&ee===X.segments.length-1;if(G=W,W+=re.length,W>=j||Q){V={cp:X,segment:re};break}}if(V)break}var ne=V.cp,ae=V.segment,oe=(j-G)/ae.length,se=ae.t1-ae.t0,ce=F?ae.t0+se*oe:ae.t1-se*oe;ce=bound(0,ce,1),v=qbezierPtAt(ne.p0,ne.p1,ne.p2,ce),B=bezierAngle(ne.p0,ne.p1,ne.p2,ce);break}case"straight":case"segments":case"haystack":{for(var de=0,ye,we,ge,ve,be=R.allpts.length,ke=0;ke+3<be&&(F?(ge={x:R.allpts[ke],y:R.allpts[ke+1]},ve={x:R.allpts[ke+2],y:R.allpts[ke+3]}):(ge={x:R.allpts[be-2-ke],y:R.allpts[be-1-ke]},ve={x:R.allpts[be-4-ke],y:R.allpts[be-3-ke]}),ye=dist$1(ge,ve),we=de,de+=ye,!(de>=j));ke+=2);var me=j-we,fe=me/ye;fe=bound(0,fe,1),v=lineAt(ge,ve,fe),B=lineAngle(ge,ve);break}}k("labelX",q,v.x),k("labelY",q,v.y),k("labelAutoAngle",q,B)}};D("source"),D("target"),this.applyLabelDimensions(_)}};BRp$9.applyLabelDimensions=function(_){this.applyPrefixedLabelDimensions(_),_.isEdge()&&(this.applyPrefixedLabelDimensions(_,"source"),this.applyPrefixedLabelDimensions(_,"target"))};BRp$9.applyPrefixedLabelDimensions=function(_,v){var S=_._private,R=this.getLabelText(_,v),T=hashString(R,_._private.labelDimsKey);if(getPrefixedProperty(S.rscratch,"prefixedLabelDimsKey",v)!==T){setPrefixedProperty(S.rscratch,"prefixedLabelDimsKey",v,T);var A=this.calculateLabelDimensions(_,R),k=_.pstyle("line-height").pfValue,M=_.pstyle("text-wrap").strValue,P=getPrefixedProperty(S.rscratch,"labelWrapCachedLines",v)||[],D=M!=="wrap"?1:Math.max(P.length,1),L=A.height/D,q=L*k,B=A.width,F=A.height+(D-1)*(k-1)*L;setPrefixedProperty(S.rstyle,"labelWidth",v,B),setPrefixedProperty(S.rscratch,"labelWidth",v,B),setPrefixedProperty(S.rstyle,"labelHeight",v,F),setPrefixedProperty(S.rscratch,"labelHeight",v,F),setPrefixedProperty(S.rscratch,"labelLineHeight",v,q)}};BRp$9.getLabelText=function(_,v){var S=_._private,R=v?v+"-":"",T=_.pstyle(R+"label").strValue,A=_.pstyle("text-transform").value,k=function(Ae,Se){return Se?(setPrefixedProperty(S.rscratch,Ae,v,Se),Se):getPrefixedProperty(S.rscratch,Ae,v)};if(!T)return"";A=="none"||(A=="uppercase"?T=T.toUpperCase():A=="lowercase"&&(T=T.toLowerCase()));var M=_.pstyle("text-wrap").value;if(M==="wrap"){var P=k("labelKey");if(P!=null&&k("labelWrapKey")===P)return k("labelWrapCachedText");for(var D="",L=T.split(`
`),q=_.pstyle("text-max-width").pfValue,B=_.pstyle("text-overflow-wrap").value,F=B==="anywhere",j=[],z=/[\s\u200b]+|$/g,V=0;V<L.length;V++){var G=L[V],W=this.calculateLabelDimensions(_,G),Y=W.width;if(F){var X=G.split("").join(D);G=X}if(Y>q){var ee=G.matchAll(z),re="",Q=0,ne=_createForOfIteratorHelper(ee),ae;try{for(ne.s();!(ae=ne.n()).done;){var oe=ae.value,se=oe[0],ce=G.substring(Q,oe.index);Q=oe.index+se.length;var de=re.length===0?ce:re+ce+se,ye=this.calculateLabelDimensions(_,de),we=ye.width;we<=q?re+=ce+se:(re&&j.push(re),re=ce+se)}}catch(xe){ne.e(xe)}finally{ne.f()}re.match(/^[\s\u200b]+$/)||j.push(re)}else j.push(G)}k("labelWrapCachedLines",j),T=k("labelWrapCachedText",j.join(`
`)),k("labelWrapKey",P)}else if(M==="ellipsis"){var ge=_.pstyle("text-max-width").pfValue,ve="",be="",ke=!1;if(this.calculateLabelDimensions(_,T).width<ge)return T;for(var me=0;me<T.length;me++){var fe=this.calculateLabelDimensions(_,ve+T[me]+be).width;if(fe>ge)break;ve+=T[me],me===T.length-1&&(ke=!0)}return ke||(ve+=be),ve}return T};BRp$9.getLabelJustification=function(_){var v=_.pstyle("text-justification").strValue,S=_.pstyle("text-halign").strValue;if(v==="auto")if(_.isNode())switch(S){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return v};BRp$9.calculateLabelDimensions=function(_,v){var S=this,R=S.cy.window(),T=R.document,A=0,k=_.pstyle("font-style").strValue,M=_.pstyle("font-size").pfValue,P=_.pstyle("font-family").strValue,D=_.pstyle("font-weight").strValue,L=this.labelCalcCanvas,q=this.labelCalcCanvasContext;if(!L){L=this.labelCalcCanvas=T.createElement("canvas"),q=this.labelCalcCanvasContext=L.getContext("2d");var B=L.style;B.position="absolute",B.left="-9999px",B.top="-9999px",B.zIndex="-1",B.visibility="hidden",B.pointerEvents="none"}q.font="".concat(k," ").concat(D," ").concat(M,"px ").concat(P);for(var F=0,j=0,z=v.split(`
`),V=0;V<z.length;V++){var G=z[V],W=q.measureText(G),Y=Math.ceil(W.width),X=M;F=Math.max(Y,F),j+=X}return F+=A,j+=A,{width:F,height:j}};BRp$9.calculateLabelAngle=function(_,v){var S=_._private,R=S.rscratch,T=_.isEdge(),A=v?v+"-":"",k=_.pstyle(A+"text-rotation"),M=k.strValue;return M==="none"?0:T&&M==="autorotate"?R.labelAutoAngle:M==="autorotate"?0:k.pfValue};BRp$9.calculateLabelAngles=function(_){var v=this,S=_.isEdge(),R=_._private,T=R.rscratch;T.labelAngle=v.calculateLabelAngle(_),S&&(T.sourceLabelAngle=v.calculateLabelAngle(_,"source"),T.targetLabelAngle=v.calculateLabelAngle(_,"target"))};var BRp$8={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$8.getNodeShape=function(_){var v=this,S=_.pstyle("shape").value;if(S==="cutrectangle"&&(_.width()<TOO_SMALL_CUT_RECT||_.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn$1("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(_.isParent())return S==="rectangle"||S==="roundrectangle"||S==="round-rectangle"||S==="cutrectangle"||S==="cut-rectangle"||S==="barrel"?S:"rectangle";if(S==="polygon"){var R=_.pstyle("shape-polygon-points").value;return v.nodeShapes.makePolygon(R).name}return S};var BRp$7={};BRp$7.registerCalculationListeners=function(){var _=this.cy,v=_.collection(),S=this,R=function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(v.merge(k),M)for(var P=0;P<k.length;P++){var D=k[P],L=D._private,q=L.rstyle;q.clean=!1,q.cleanConnected=!1}};S.binder(_).on("bounds.* dirty.*",function(k){var M=k.target;R(M)}).on("style.* background.*",function(k){var M=k.target;R(M,!1)});var T=function(k){if(k){var M=S.onUpdateEleCalcsFns;v.cleanStyle();for(var P=0;P<v.length;P++){var D=v[P],L=D._private.rstyle;D.isNode()&&!L.cleanConnected&&(R(D.connectedEdges()),L.cleanConnected=!0)}if(M)for(var q=0;q<M.length;q++){var B=M[q];B(k,v)}S.recalculateRenderedStyle(v),v=_.collection()}};S.flushRenderedStyleQueue=function(){T(!0)},S.beforeRender(T,S.beforeRenderPriorities.eleCalcs)};BRp$7.onUpdateEleCalcs=function(_){var v=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];v.push(_)};BRp$7.recalculateRenderedStyle=function(_,v){var S=function(X){return X._private.rstyle.cleanConnected};if(_.length!==0){var R=[],T=[];if(!this.destroyed){v===void 0&&(v=!0);for(var A=0;A<_.length;A++){var k=_[A],M=k._private,P=M.rstyle;k.isEdge()&&(!S(k.source())||!S(k.target()))&&(P.clean=!1),k.isEdge()&&k.isBundledBezier()&&k.parallelEdges().some(function(Y){return!Y._private.rstyle.clean&&Y.isBundledBezier()})&&(P.clean=!1),!(v&&P.clean||k.removed())&&k.pstyle("display").value!=="none"&&(M.group==="nodes"?T.push(k):R.push(k),P.clean=!0)}for(var D=0;D<T.length;D++){var L=T[D],q=L._private,B=q.rstyle,F=L.position();this.recalculateNodeLabelProjection(L),B.nodeX=F.x,B.nodeY=F.y,B.nodeW=L.pstyle("width").pfValue,B.nodeH=L.pstyle("height").pfValue}this.recalculateEdgeProjections(R);for(var j=0;j<R.length;j++){var z=R[j],V=z._private,G=V.rstyle,W=V.rscratch;G.srcX=W.arrowStartX,G.srcY=W.arrowStartY,G.tgtX=W.arrowEndX,G.tgtY=W.arrowEndY,G.midX=W.midX,G.midY=W.midY,G.labelAngle=W.labelAngle,G.sourceLabelAngle=W.sourceLabelAngle,G.targetLabelAngle=W.targetLabelAngle}}}};var BRp$6={};BRp$6.updateCachedGrabbedEles=function(){var _=this.cachedZSortedEles;if(_){_.drag=[],_.nondrag=[];for(var v=[],S=0;S<_.length;S++){var R=_[S],T=R._private.rscratch;R.grabbed()&&!R.isParent()?v.push(R):T.inDragLayer?_.drag.push(R):_.nondrag.push(R)}for(var S=0;S<v.length;S++){var R=v[S];_.drag.push(R)}}};BRp$6.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};BRp$6.getCachedZSortedEles=function(_){if(_||!this.cachedZSortedEles){var v=this.cy.mutableElements().toArray();v.sort(zIndexSort),v.interactive=v.filter(function(S){return S.interactive()}),this.cachedZSortedEles=v,this.updateCachedGrabbedEles()}else v=this.cachedZSortedEles;return v};var BRp$5={};[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach(function(_){extend(BRp$5,_)});var BRp$4={};BRp$4.getCachedImage=function(_,v,S){var R=this,T=R.imageCache=R.imageCache||{},A=T[_];if(A)return A.image.complete||A.image.addEventListener("load",S),A.image;A=T[_]=T[_]||{};var k=A.image=new Image;k.addEventListener("load",S),k.addEventListener("error",function(){k.error=!0});var M="data:",P=_.substring(0,M.length).toLowerCase()===M;return P||(v=v==="null"?null:v,k.crossOrigin=v),k.src=_,k};var BRp$3={};BRp$3.registerBinding=function(_,v,S,R){var T=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(_)){for(var A=[],k=0;k<_.length;k++){var M=_[k];if(M!==void 0){var P=this.binder(M);A.push(P.on.apply(P,T))}}return A}var P=this.binder(_);return P.on.apply(P,T)};BRp$3.binder=function(_){var v=this,S=v.cy.window(),R=_===S||_===S.document||_===S.document.body||domElement(_);if(v.supportsPassiveEvents==null){var T=!1;try{var A=Object.defineProperty({},"passive",{get:function(){return T=!0,!0}});S.addEventListener("test",null,A)}catch{}v.supportsPassiveEvents=T}var k=function(P,D,L){var q=Array.prototype.slice.call(arguments);return R&&v.supportsPassiveEvents&&(q[2]={capture:L??!1,passive:!1,once:!1}),v.bindings.push({target:_,args:q}),(_.addEventListener||_.on).apply(_,q),this};return{on:k,addEventListener:k,addListener:k,bind:k}};BRp$3.nodeIsDraggable=function(_){return _&&_.isNode()&&!_.locked()&&_.grabbable()};BRp$3.nodeIsGrabbable=function(_){return this.nodeIsDraggable(_)&&_.interactive()};BRp$3.load=function(){var _=this,v=_.cy.window(),S=function(Re){return Re.selected()},R=function(Re){var je=Re.getRootNode();if(je&&je.nodeType===11&&je.host!==void 0)return je},T=function(Re,je,Ue,Ze){Re==null&&(Re=_.cy);for(var nt=0;nt<je.length;nt++){var wt=je[nt];Re.emit({originalEvent:Ue,type:wt,position:Ze})}},A=function(Re){return Re.shiftKey||Re.metaKey||Re.ctrlKey},k=function(Re,je){var Ue=!0;if(_.cy.hasCompoundNodes()&&Re&&Re.pannable())for(var Ze=0;je&&Ze<je.length;Ze++){var Re=je[Ze];if(Re.isNode()&&Re.isParent()&&!Re.pannable()){Ue=!1;break}}else Ue=!0;return Ue},M=function(Re){Re[0]._private.grabbed=!0},P=function(Re){Re[0]._private.grabbed=!1},D=function(Re){Re[0]._private.rscratch.inDragLayer=!0},L=function(Re){Re[0]._private.rscratch.inDragLayer=!1},q=function(Re){Re[0]._private.rscratch.isGrabTarget=!0},B=function(Re){Re[0]._private.rscratch.isGrabTarget=!1},F=function(Re,je){var Ue=je.addToList,Ze=Ue.has(Re);!Ze&&Re.grabbable()&&!Re.locked()&&(Ue.merge(Re),M(Re))},j=function(Re,je){if(Re.cy().hasCompoundNodes()&&!(je.inDragLayer==null&&je.addToList==null)){var Ue=Re.descendants();je.inDragLayer&&(Ue.forEach(D),Ue.connectedEdges().forEach(D)),je.addToList&&F(Ue,je)}},z=function(Re,je){je=je||{};var Ue=Re.cy().hasCompoundNodes();je.inDragLayer&&(Re.forEach(D),Re.neighborhood().stdFilter(function(Ze){return!Ue||Ze.isEdge()}).forEach(D)),je.addToList&&Re.forEach(function(Ze){F(Ze,je)}),j(Re,je),W(Re,{inDragLayer:je.inDragLayer}),_.updateCachedGrabbedEles()},V=z,G=function(Re){Re&&(_.getCachedZSortedEles().forEach(function(je){P(je),L(je),B(je)}),_.updateCachedGrabbedEles())},W=function(Re,je){if(!(je.inDragLayer==null&&je.addToList==null)&&Re.cy().hasCompoundNodes()){var Ue=Re.ancestors().orphans();if(!Ue.same(Re)){var Ze=Ue.descendants().spawnSelf().merge(Ue).unmerge(Re).unmerge(Re.descendants()),nt=Ze.connectedEdges();je.inDragLayer&&(nt.forEach(D),Ze.forEach(D)),je.addToList&&Ze.forEach(function(wt){F(wt,je)})}}},Y=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},X=typeof MutationObserver<"u",ee=typeof ResizeObserver<"u";X?(_.removeObserver=new MutationObserver(function(et){for(var Re=0;Re<et.length;Re++){var je=et[Re],Ue=je.removedNodes;if(Ue)for(var Ze=0;Ze<Ue.length;Ze++){var nt=Ue[Ze];if(nt===_.container){_.destroy();break}}}}),_.container.parentNode&&_.removeObserver.observe(_.container.parentNode,{childList:!0})):_.registerBinding(_.container,"DOMNodeRemoved",function(et){_.destroy()});var re=debounce(function(){_.cy.resize()},100);X&&(_.styleObserver=new MutationObserver(re),_.styleObserver.observe(_.container,{attributes:!0})),_.registerBinding(v,"resize",re),ee&&(_.resizeObserver=new ResizeObserver(re),_.resizeObserver.observe(_.container));var Q=function(Re,je){for(;Re!=null;)je(Re),Re=Re.parentNode},ne=function(){_.invalidateContainerClientCoordsCache()};Q(_.container,function(et){_.registerBinding(et,"transitionend",ne),_.registerBinding(et,"animationend",ne),_.registerBinding(et,"scroll",ne)}),_.registerBinding(_.container,"contextmenu",function(et){et.preventDefault()});var ae=function(){return _.selection[4]!==0},oe=function(Re){for(var je=_.findContainerClientCoords(),Ue=je[0],Ze=je[1],nt=je[2],wt=je[3],lt=Re.touches?Re.touches:[Re],Tt=!1,Rt=0;Rt<lt.length;Rt++){var Mt=lt[Rt];if(Ue<=Mt.clientX&&Mt.clientX<=Ue+nt&&Ze<=Mt.clientY&&Mt.clientY<=Ze+wt){Tt=!0;break}}if(!Tt)return!1;for(var $t=_.container,yt=Re.target,vt=yt.parentNode,Ot=!1;vt;){if(vt===$t){Ot=!0;break}vt=vt.parentNode}return!!Ot};_.registerBinding(_.container,"mousedown",function(Re){if(oe(Re)&&!(_.hoverData.which===1&&Re.which!==1)){Re.preventDefault(),Y(),_.hoverData.capture=!0,_.hoverData.which=Re.which;var je=_.cy,Ue=[Re.clientX,Re.clientY],Ze=_.projectIntoViewport(Ue[0],Ue[1]),nt=_.selection,wt=_.findNearestElements(Ze[0],Ze[1],!0,!1),lt=wt[0],Tt=_.dragData.possibleDragElements;_.hoverData.mdownPos=Ze,_.hoverData.mdownGPos=Ue;var Rt=function(It){return{originalEvent:Re,type:It,position:{x:Ze[0],y:Ze[1]}}},Mt=function(){_.hoverData.tapholdCancelled=!1,clearTimeout(_.hoverData.tapholdTimeout),_.hoverData.tapholdTimeout=setTimeout(function(){if(!_.hoverData.tapholdCancelled){var It=_.hoverData.down;It?It.emit(Rt("taphold")):je.emit(Rt("taphold"))}},_.tapholdDuration)};if(Re.which==3){_.hoverData.cxtStarted=!0;var $t={originalEvent:Re,type:"cxttapstart",position:{x:Ze[0],y:Ze[1]}};lt?(lt.activate(),lt.emit($t),_.hoverData.down=lt):je.emit($t),_.hoverData.downTime=new Date().getTime(),_.hoverData.cxtDragged=!1}else if(Re.which==1){lt&&lt.activate();{if(lt!=null&&_.nodeIsGrabbable(lt)){var yt=function(It){It.emit(Rt("grab"))};if(q(lt),!lt.selected())Tt=_.dragData.possibleDragElements=je.collection(),V(lt,{addToList:Tt}),lt.emit(Rt("grabon")).emit(Rt("grab"));else{Tt=_.dragData.possibleDragElements=je.collection();var vt=je.$(function(Ot){return Ot.isNode()&&Ot.selected()&&_.nodeIsGrabbable(Ot)});z(vt,{addToList:Tt}),lt.emit(Rt("grabon")),vt.forEach(yt)}_.redrawHint("eles",!0),_.redrawHint("drag",!0)}_.hoverData.down=lt,_.hoverData.downs=wt,_.hoverData.downTime=new Date().getTime()}T(lt,["mousedown","tapstart","vmousedown"],Re,{x:Ze[0],y:Ze[1]}),lt==null?(nt[4]=1,_.data.bgActivePosistion={x:Ze[0],y:Ze[1]},_.redrawHint("select",!0),_.redraw()):lt.pannable()&&(nt[4]=1),Mt()}nt[0]=nt[2]=Ze[0],nt[1]=nt[3]=Ze[1]}},!1);var se=R(_.container);_.registerBinding([v,se],"mousemove",function(Re){var je=_.hoverData.capture;if(!(!je&&!oe(Re))){var Ue=!1,Ze=_.cy,nt=Ze.zoom(),wt=[Re.clientX,Re.clientY],lt=_.projectIntoViewport(wt[0],wt[1]),Tt=_.hoverData.mdownPos,Rt=_.hoverData.mdownGPos,Mt=_.selection,$t=null;!_.hoverData.draggingEles&&!_.hoverData.dragging&&!_.hoverData.selecting&&($t=_.findNearestElement(lt[0],lt[1],!0,!1));var yt=_.hoverData.last,vt=_.hoverData.down,Ot=[lt[0]-Mt[2],lt[1]-Mt[3]],It=_.dragData.possibleDragElements,sr;if(Rt){var zt=wt[0]-Rt[0],ur=zt*zt,hr=wt[1]-Rt[1],or=hr*hr,rr=ur+or;_.hoverData.isOverThresholdDrag=sr=rr>=_.desktopTapThreshold2}var wr=A(Re);sr&&(_.hoverData.tapholdCancelled=!0);var qr=function(){var Xr=_.hoverData.dragDelta=_.hoverData.dragDelta||[];Xr.length===0?(Xr.push(Ot[0]),Xr.push(Ot[1])):(Xr[0]+=Ot[0],Xr[1]+=Ot[1])};Ue=!0,T($t,["mousemove","vmousemove","tapdrag"],Re,{x:lt[0],y:lt[1]});var _r=function(Xr){return{originalEvent:Re,type:Xr,position:{x:lt[0],y:lt[1]}}},kn=function(){_.data.bgActivePosistion=void 0,_.hoverData.selecting||Ze.emit(_r("boxstart")),Mt[4]=1,_.hoverData.selecting=!0,_.redrawHint("select",!0),_.redraw()};if(_.hoverData.which===3){if(sr){var Fr=_r("cxtdrag");vt?vt.emit(Fr):Ze.emit(Fr),_.hoverData.cxtDragged=!0,(!_.hoverData.cxtOver||$t!==_.hoverData.cxtOver)&&(_.hoverData.cxtOver&&_.hoverData.cxtOver.emit(_r("cxtdragout")),_.hoverData.cxtOver=$t,$t&&$t.emit(_r("cxtdragover")))}}else if(_.hoverData.dragging){if(Ue=!0,Ze.panningEnabled()&&Ze.userPanningEnabled()){var Tr;if(_.hoverData.justStartedPan){var zr=_.hoverData.mdownPos;Tr={x:(lt[0]-zr[0])*nt,y:(lt[1]-zr[1])*nt},_.hoverData.justStartedPan=!1}else Tr={x:Ot[0]*nt,y:Ot[1]*nt};Ze.panBy(Tr),Ze.emit(_r("dragpan")),_.hoverData.dragged=!0}lt=_.projectIntoViewport(Re.clientX,Re.clientY)}else if(Mt[4]==1&&(vt==null||vt.pannable())){if(sr){if(!_.hoverData.dragging&&Ze.boxSelectionEnabled()&&(wr||!Ze.panningEnabled()||!Ze.userPanningEnabled()))kn();else if(!_.hoverData.selecting&&Ze.panningEnabled()&&Ze.userPanningEnabled()){var xn=k(vt,_.hoverData.downs);xn&&(_.hoverData.dragging=!0,_.hoverData.justStartedPan=!0,Mt[4]=0,_.data.bgActivePosistion=array2point(Tt),_.redrawHint("select",!0),_.redraw())}vt&&vt.pannable()&&vt.active()&&vt.unactivate()}}else{if(vt&&vt.pannable()&&vt.active()&&vt.unactivate(),(!vt||!vt.grabbed())&&$t!=yt&&(yt&&T(yt,["mouseout","tapdragout"],Re,{x:lt[0],y:lt[1]}),$t&&T($t,["mouseover","tapdragover"],Re,{x:lt[0],y:lt[1]}),_.hoverData.last=$t),vt)if(sr){if(Ze.boxSelectionEnabled()&&wr)vt&&vt.grabbed()&&(G(It),vt.emit(_r("freeon")),It.emit(_r("free")),_.dragData.didDrag&&(vt.emit(_r("dragfreeon")),It.emit(_r("dragfree")))),kn();else if(vt&&vt.grabbed()&&_.nodeIsDraggable(vt)){var Kr=!_.dragData.didDrag;Kr&&_.redrawHint("eles",!0),_.dragData.didDrag=!0,_.hoverData.draggingEles||z(It,{inDragLayer:!0});var Wr={x:0,y:0};if(number$1(Ot[0])&&number$1(Ot[1])&&(Wr.x+=Ot[0],Wr.y+=Ot[1],Kr)){var pn=_.hoverData.dragDelta;pn&&number$1(pn[0])&&number$1(pn[1])&&(Wr.x+=pn[0],Wr.y+=pn[1])}_.hoverData.draggingEles=!0,It.silentShift(Wr).emit(_r("position")).emit(_r("drag")),_.redrawHint("drag",!0),_.redraw()}}else qr();Ue=!0}if(Mt[2]=lt[0],Mt[3]=lt[1],Ue)return Re.stopPropagation&&Re.stopPropagation(),Re.preventDefault&&Re.preventDefault(),!1}},!1);var ce,de,ye;_.registerBinding(v,"mouseup",function(Re){if(!(_.hoverData.which===1&&Re.which!==1&&_.hoverData.capture)){var je=_.hoverData.capture;if(je){_.hoverData.capture=!1;var Ue=_.cy,Ze=_.projectIntoViewport(Re.clientX,Re.clientY),nt=_.selection,wt=_.findNearestElement(Ze[0],Ze[1],!0,!1),lt=_.dragData.possibleDragElements,Tt=_.hoverData.down,Rt=A(Re);_.data.bgActivePosistion&&(_.redrawHint("select",!0),_.redraw()),_.hoverData.tapholdCancelled=!0,_.data.bgActivePosistion=void 0,Tt&&Tt.unactivate();var Mt=function(zt){return{originalEvent:Re,type:zt,position:{x:Ze[0],y:Ze[1]}}};if(_.hoverData.which===3){var $t=Mt("cxttapend");if(Tt?Tt.emit($t):Ue.emit($t),!_.hoverData.cxtDragged){var yt=Mt("cxttap");Tt?Tt.emit(yt):Ue.emit(yt)}_.hoverData.cxtDragged=!1,_.hoverData.which=null}else if(_.hoverData.which===1){if(T(wt,["mouseup","tapend","vmouseup"],Re,{x:Ze[0],y:Ze[1]}),!_.dragData.didDrag&&!_.hoverData.dragged&&!_.hoverData.selecting&&!_.hoverData.isOverThresholdDrag&&(T(Tt,["click","tap","vclick"],Re,{x:Ze[0],y:Ze[1]}),de=!1,Re.timeStamp-ye<=Ue.multiClickDebounceTime()?(ce&&clearTimeout(ce),de=!0,ye=null,T(Tt,["dblclick","dbltap","vdblclick"],Re,{x:Ze[0],y:Ze[1]})):(ce=setTimeout(function(){de||T(Tt,["oneclick","onetap","voneclick"],Re,{x:Ze[0],y:Ze[1]})},Ue.multiClickDebounceTime()),ye=Re.timeStamp)),Tt==null&&!_.dragData.didDrag&&!_.hoverData.selecting&&!_.hoverData.dragged&&!A(Re)&&(Ue.$(S).unselect(["tapunselect"]),lt.length>0&&_.redrawHint("eles",!0),_.dragData.possibleDragElements=lt=Ue.collection()),wt==Tt&&!_.dragData.didDrag&&!_.hoverData.selecting&&wt!=null&&wt._private.selectable&&(_.hoverData.dragging||(Ue.selectionType()==="additive"||Rt?wt.selected()?wt.unselect(["tapunselect"]):wt.select(["tapselect"]):Rt||(Ue.$(S).unmerge(wt).unselect(["tapunselect"]),wt.select(["tapselect"]))),_.redrawHint("eles",!0)),_.hoverData.selecting){var vt=Ue.collection(_.getAllInBox(nt[0],nt[1],nt[2],nt[3]));_.redrawHint("select",!0),vt.length>0&&_.redrawHint("eles",!0),Ue.emit(Mt("boxend"));var Ot=function(zt){return zt.selectable()&&!zt.selected()};Ue.selectionType()==="additive"||Rt||Ue.$(S).unmerge(vt).unselect(),vt.emit(Mt("box")).stdFilter(Ot).select().emit(Mt("boxselect")),_.redraw()}if(_.hoverData.dragging&&(_.hoverData.dragging=!1,_.redrawHint("select",!0),_.redrawHint("eles",!0),_.redraw()),!nt[4]){_.redrawHint("drag",!0),_.redrawHint("eles",!0);var It=Tt&&Tt.grabbed();G(lt),It&&(Tt.emit(Mt("freeon")),lt.emit(Mt("free")),_.dragData.didDrag&&(Tt.emit(Mt("dragfreeon")),lt.emit(Mt("dragfree"))))}}nt[4]=0,_.hoverData.down=null,_.hoverData.cxtStarted=!1,_.hoverData.draggingEles=!1,_.hoverData.selecting=!1,_.hoverData.isOverThresholdDrag=!1,_.dragData.didDrag=!1,_.hoverData.dragged=!1,_.hoverData.dragDelta=[],_.hoverData.mdownPos=null,_.hoverData.mdownGPos=null,_.hoverData.which=null}}},!1);var we=[],ge=4,ve,be=1e5,ke=function(Re,je){for(var Ue=0;Ue<Re.length;Ue++)if(Re[Ue]%je!==0)return!1;return!0},me=function(Re){for(var je=Math.abs(Re[0]),Ue=1;Ue<Re.length;Ue++)if(Math.abs(Re[Ue])!==je)return!1;return!0},fe=function(Re){var je=!1,Ue=Re.deltaY;if(Ue==null&&(Re.wheelDeltaY!=null?Ue=Re.wheelDeltaY/4:Re.wheelDelta!=null&&(Ue=Re.wheelDelta/4)),Ue!==0){if(ve==null)if(we.length>=ge){var Ze=we;if(ve=ke(Ze,5),!ve){var nt=Math.abs(Ze[0]);ve=me(Ze)&&nt>5}if(ve)for(var wt=0;wt<Ze.length;wt++)be=Math.min(Math.abs(Ze[wt]),be)}else we.push(Ue),je=!0;else ve&&(be=Math.min(Math.abs(Ue),be));if(!_.scrollingPage){var lt=_.cy,Tt=lt.zoom(),Rt=lt.pan(),Mt=_.projectIntoViewport(Re.clientX,Re.clientY),$t=[Mt[0]*Tt+Rt.x,Mt[1]*Tt+Rt.y];if(_.hoverData.draggingEles||_.hoverData.dragging||_.hoverData.cxtStarted||ae()){Re.preventDefault();return}if(lt.panningEnabled()&&lt.userPanningEnabled()&&lt.zoomingEnabled()&&lt.userZoomingEnabled()){Re.preventDefault(),_.data.wheelZooming=!0,clearTimeout(_.data.wheelTimeout),_.data.wheelTimeout=setTimeout(function(){_.data.wheelZooming=!1,_.redrawHint("eles",!0),_.redraw()},150);var yt;je&&Math.abs(Ue)>5&&(Ue=signum(Ue)*5),yt=Ue/-250,ve&&(yt/=be,yt*=3),yt=yt*_.wheelSensitivity;var vt=Re.deltaMode===1;vt&&(yt*=33);var Ot=lt.zoom()*Math.pow(10,yt);Re.type==="gesturechange"&&(Ot=_.gestureStartZoom*Re.scale),lt.zoom({level:Ot,renderedPosition:{x:$t[0],y:$t[1]}}),lt.emit({type:Re.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:Re,position:{x:Mt[0],y:Mt[1]}})}}}};_.registerBinding(_.container,"wheel",fe,!0),_.registerBinding(v,"scroll",function(Re){_.scrollingPage=!0,clearTimeout(_.scrollingPageTimeout),_.scrollingPageTimeout=setTimeout(function(){_.scrollingPage=!1},250)},!0),_.registerBinding(_.container,"gesturestart",function(Re){_.gestureStartZoom=_.cy.zoom(),_.hasTouchStarted||Re.preventDefault()},!0),_.registerBinding(_.container,"gesturechange",function(et){_.hasTouchStarted||fe(et)},!0),_.registerBinding(_.container,"mouseout",function(Re){var je=_.projectIntoViewport(Re.clientX,Re.clientY);_.cy.emit({originalEvent:Re,type:"mouseout",position:{x:je[0],y:je[1]}})},!1),_.registerBinding(_.container,"mouseover",function(Re){var je=_.projectIntoViewport(Re.clientX,Re.clientY);_.cy.emit({originalEvent:Re,type:"mouseover",position:{x:je[0],y:je[1]}})},!1);var xe,Ae,Se,Me,Oe,Ce,$e,Be,Pe,De,Le,Ne,tt,it=function(Re,je,Ue,Ze){return Math.sqrt((Ue-Re)*(Ue-Re)+(Ze-je)*(Ze-je))},dt=function(Re,je,Ue,Ze){return(Ue-Re)*(Ue-Re)+(Ze-je)*(Ze-je)},pt;_.registerBinding(_.container,"touchstart",pt=function(Re){if(_.hasTouchStarted=!0,!!oe(Re)){Y(),_.touchData.capture=!0,_.data.bgActivePosistion=void 0;var je=_.cy,Ue=_.touchData.now,Ze=_.touchData.earlier;if(Re.touches[0]){var nt=_.projectIntoViewport(Re.touches[0].clientX,Re.touches[0].clientY);Ue[0]=nt[0],Ue[1]=nt[1]}if(Re.touches[1]){var nt=_.projectIntoViewport(Re.touches[1].clientX,Re.touches[1].clientY);Ue[2]=nt[0],Ue[3]=nt[1]}if(Re.touches[2]){var nt=_.projectIntoViewport(Re.touches[2].clientX,Re.touches[2].clientY);Ue[4]=nt[0],Ue[5]=nt[1]}var wt=function(wr){return{originalEvent:Re,type:wr,position:{x:Ue[0],y:Ue[1]}}};if(Re.touches[1]){_.touchData.singleTouchMoved=!0,G(_.dragData.touchDragEles);var lt=_.findContainerClientCoords();Pe=lt[0],De=lt[1],Le=lt[2],Ne=lt[3],xe=Re.touches[0].clientX-Pe,Ae=Re.touches[0].clientY-De,Se=Re.touches[1].clientX-Pe,Me=Re.touches[1].clientY-De,tt=0<=xe&&xe<=Le&&0<=Se&&Se<=Le&&0<=Ae&&Ae<=Ne&&0<=Me&&Me<=Ne;var Tt=je.pan(),Rt=je.zoom();Oe=it(xe,Ae,Se,Me),Ce=dt(xe,Ae,Se,Me),$e=[(xe+Se)/2,(Ae+Me)/2],Be=[($e[0]-Tt.x)/Rt,($e[1]-Tt.y)/Rt];var Mt=200,$t=Mt*Mt;if(Ce<$t&&!Re.touches[2]){var yt=_.findNearestElement(Ue[0],Ue[1],!0,!0),vt=_.findNearestElement(Ue[2],Ue[3],!0,!0);yt&&yt.isNode()?(yt.activate().emit(wt("cxttapstart")),_.touchData.start=yt):vt&&vt.isNode()?(vt.activate().emit(wt("cxttapstart")),_.touchData.start=vt):je.emit(wt("cxttapstart")),_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxt=!0,_.touchData.cxtDragged=!1,_.data.bgActivePosistion=void 0,_.redraw();return}}if(Re.touches[2])je.boxSelectionEnabled()&&Re.preventDefault();else if(!Re.touches[1]){if(Re.touches[0]){var Ot=_.findNearestElements(Ue[0],Ue[1],!0,!0),It=Ot[0];if(It!=null&&(It.activate(),_.touchData.start=It,_.touchData.starts=Ot,_.nodeIsGrabbable(It))){var sr=_.dragData.touchDragEles=je.collection(),zt=null;_.redrawHint("eles",!0),_.redrawHint("drag",!0),It.selected()?(zt=je.$(function(rr){return rr.selected()&&_.nodeIsGrabbable(rr)}),z(zt,{addToList:sr})):V(It,{addToList:sr}),q(It),It.emit(wt("grabon")),zt?zt.forEach(function(rr){rr.emit(wt("grab"))}):It.emit(wt("grab"))}T(It,["touchstart","tapstart","vmousedown"],Re,{x:Ue[0],y:Ue[1]}),It==null&&(_.data.bgActivePosistion={x:nt[0],y:nt[1]},_.redrawHint("select",!0),_.redraw()),_.touchData.singleTouchMoved=!1,_.touchData.singleTouchStartTime=+new Date,clearTimeout(_.touchData.tapholdTimeout),_.touchData.tapholdTimeout=setTimeout(function(){_.touchData.singleTouchMoved===!1&&!_.pinching&&!_.touchData.selecting&&T(_.touchData.start,["taphold"],Re,{x:Ue[0],y:Ue[1]})},_.tapholdDuration)}}if(Re.touches.length>=1){for(var ur=_.touchData.startPosition=[null,null,null,null,null,null],hr=0;hr<Ue.length;hr++)ur[hr]=Ze[hr]=Ue[hr];var or=Re.touches[0];_.touchData.startGPosition=[or.clientX,or.clientY]}}},!1);var We;_.registerBinding(v,"touchmove",We=function(Re){var je=_.touchData.capture;if(!(!je&&!oe(Re))){var Ue=_.selection,Ze=_.cy,nt=_.touchData.now,wt=_.touchData.earlier,lt=Ze.zoom();if(Re.touches[0]){var Tt=_.projectIntoViewport(Re.touches[0].clientX,Re.touches[0].clientY);nt[0]=Tt[0],nt[1]=Tt[1]}if(Re.touches[1]){var Tt=_.projectIntoViewport(Re.touches[1].clientX,Re.touches[1].clientY);nt[2]=Tt[0],nt[3]=Tt[1]}if(Re.touches[2]){var Tt=_.projectIntoViewport(Re.touches[2].clientX,Re.touches[2].clientY);nt[4]=Tt[0],nt[5]=Tt[1]}var Rt=function(oo){return{originalEvent:Re,type:oo,position:{x:nt[0],y:nt[1]}}},Mt=_.touchData.startGPosition,$t;if(je&&Re.touches[0]&&Mt){for(var yt=[],vt=0;vt<nt.length;vt++)yt[vt]=nt[vt]-wt[vt];var Ot=Re.touches[0].clientX-Mt[0],It=Ot*Ot,sr=Re.touches[0].clientY-Mt[1],zt=sr*sr,ur=It+zt;$t=ur>=_.touchTapThreshold2}if(je&&_.touchData.cxt){Re.preventDefault();var hr=Re.touches[0].clientX-Pe,or=Re.touches[0].clientY-De,rr=Re.touches[1].clientX-Pe,wr=Re.touches[1].clientY-De,qr=dt(hr,or,rr,wr),_r=qr/Ce,kn=150,Fr=kn*kn,Tr=1.5,zr=Tr*Tr;if(_r>=zr||qr>=Fr){_.touchData.cxt=!1,_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var xn=Rt("cxttapend");_.touchData.start?(_.touchData.start.unactivate().emit(xn),_.touchData.start=null):Ze.emit(xn)}}if(je&&_.touchData.cxt){var xn=Rt("cxtdrag");_.data.bgActivePosistion=void 0,_.redrawHint("select",!0),_.touchData.start?_.touchData.start.emit(xn):Ze.emit(xn),_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxtDragged=!0;var Kr=_.findNearestElement(nt[0],nt[1],!0,!0);(!_.touchData.cxtOver||Kr!==_.touchData.cxtOver)&&(_.touchData.cxtOver&&_.touchData.cxtOver.emit(Rt("cxtdragout")),_.touchData.cxtOver=Kr,Kr&&Kr.emit(Rt("cxtdragover")))}else if(je&&Re.touches[2]&&Ze.boxSelectionEnabled())Re.preventDefault(),_.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,_.touchData.selecting||Ze.emit(Rt("boxstart")),_.touchData.selecting=!0,_.touchData.didSelect=!0,Ue[4]=1,!Ue||Ue.length===0||Ue[0]===void 0?(Ue[0]=(nt[0]+nt[2]+nt[4])/3,Ue[1]=(nt[1]+nt[3]+nt[5])/3,Ue[2]=(nt[0]+nt[2]+nt[4])/3+1,Ue[3]=(nt[1]+nt[3]+nt[5])/3+1):(Ue[2]=(nt[0]+nt[2]+nt[4])/3,Ue[3]=(nt[1]+nt[3]+nt[5])/3),_.redrawHint("select",!0),_.redraw();else if(je&&Re.touches[1]&&!_.touchData.didSelect&&Ze.zoomingEnabled()&&Ze.panningEnabled()&&Ze.userZoomingEnabled()&&Ze.userPanningEnabled()){Re.preventDefault(),_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var Wr=_.dragData.touchDragEles;if(Wr){_.redrawHint("drag",!0);for(var pn=0;pn<Wr.length;pn++){var Ea=Wr[pn]._private;Ea.grabbed=!1,Ea.rscratch.inDragLayer=!1}}var Xr=_.touchData.start,hr=Re.touches[0].clientX-Pe,or=Re.touches[0].clientY-De,rr=Re.touches[1].clientX-Pe,wr=Re.touches[1].clientY-De,ti=it(hr,or,rr,wr),wa=ti/Oe;if(tt){var Ca=hr-xe,Ia=or-Ae,Ra=rr-Se,Lr=wr-Me,sa=(Ca+Ra)/2,no=(Ia+Lr)/2,_n=Ze.zoom(),Xn=_n*wa,zn=Ze.pan(),Oi=Be[0]*_n+zn.x,Di=Be[1]*_n+zn.y,ao={x:-Xn/_n*(Oi-zn.x-sa)+Oi,y:-Xn/_n*(Di-zn.y-no)+Di};if(Xr&&Xr.active()){var Wr=_.dragData.touchDragEles;G(Wr),_.redrawHint("drag",!0),_.redrawHint("eles",!0),Xr.unactivate().emit(Rt("freeon")),Wr.emit(Rt("free")),_.dragData.didDrag&&(Xr.emit(Rt("dragfreeon")),Wr.emit(Rt("dragfree")))}Ze.viewport({zoom:Xn,pan:ao,cancelOnFailedZoom:!0}),Ze.emit(Rt("pinchzoom")),Oe=ti,xe=hr,Ae=or,Se=rr,Me=wr,_.pinching=!0}if(Re.touches[0]){var Tt=_.projectIntoViewport(Re.touches[0].clientX,Re.touches[0].clientY);nt[0]=Tt[0],nt[1]=Tt[1]}if(Re.touches[1]){var Tt=_.projectIntoViewport(Re.touches[1].clientX,Re.touches[1].clientY);nt[2]=Tt[0],nt[3]=Tt[1]}if(Re.touches[2]){var Tt=_.projectIntoViewport(Re.touches[2].clientX,Re.touches[2].clientY);nt[4]=Tt[0],nt[5]=Tt[1]}}else if(Re.touches[0]&&!_.touchData.didSelect){var gn=_.touchData.start,la=_.touchData.last,Kr;if(!_.hoverData.draggingEles&&!_.swipePanning&&(Kr=_.findNearestElement(nt[0],nt[1],!0,!0)),je&&gn!=null&&Re.preventDefault(),je&&gn!=null&&_.nodeIsDraggable(gn))if($t){var Wr=_.dragData.touchDragEles,Rn=!_.dragData.didDrag;Rn&&z(Wr,{inDragLayer:!0}),_.dragData.didDrag=!0;var en={x:0,y:0};if(number$1(yt[0])&&number$1(yt[1])&&(en.x+=yt[0],en.y+=yt[1],Rn)){_.redrawHint("eles",!0);var Sn=_.touchData.dragDelta;Sn&&number$1(Sn[0])&&number$1(Sn[1])&&(en.x+=Sn[0],en.y+=Sn[1])}_.hoverData.draggingEles=!0,Wr.silentShift(en).emit(Rt("position")).emit(Rt("drag")),_.redrawHint("drag",!0),_.touchData.startPosition[0]==wt[0]&&_.touchData.startPosition[1]==wt[1]&&_.redrawHint("eles",!0),_.redraw()}else{var Sn=_.touchData.dragDelta=_.touchData.dragDelta||[];Sn.length===0?(Sn.push(yt[0]),Sn.push(yt[1])):(Sn[0]+=yt[0],Sn[1]+=yt[1])}if(T(gn||Kr,["touchmove","tapdrag","vmousemove"],Re,{x:nt[0],y:nt[1]}),(!gn||!gn.grabbed())&&Kr!=la&&(la&&la.emit(Rt("tapdragout")),Kr&&Kr.emit(Rt("tapdragover"))),_.touchData.last=Kr,je)for(var pn=0;pn<nt.length;pn++)nt[pn]&&_.touchData.startPosition[pn]&&$t&&(_.touchData.singleTouchMoved=!0);if(je&&(gn==null||gn.pannable())&&Ze.panningEnabled()&&Ze.userPanningEnabled()){var zo=k(gn,_.touchData.starts);zo&&(Re.preventDefault(),_.data.bgActivePosistion||(_.data.bgActivePosistion=array2point(_.touchData.startPosition)),_.swipePanning?(Ze.panBy({x:yt[0]*lt,y:yt[1]*lt}),Ze.emit(Rt("dragpan"))):$t&&(_.swipePanning=!0,Ze.panBy({x:Ot*lt,y:sr*lt}),Ze.emit(Rt("dragpan")),gn&&(gn.unactivate(),_.redrawHint("select",!0),_.touchData.start=null)));var Tt=_.projectIntoViewport(Re.touches[0].clientX,Re.touches[0].clientY);nt[0]=Tt[0],nt[1]=Tt[1]}}for(var vt=0;vt<nt.length;vt++)wt[vt]=nt[vt];je&&Re.touches.length>0&&!_.hoverData.draggingEles&&!_.swipePanning&&_.data.bgActivePosistion!=null&&(_.data.bgActivePosistion=void 0,_.redrawHint("select",!0),_.redraw())}},!1);var Et;_.registerBinding(v,"touchcancel",Et=function(Re){var je=_.touchData.start;_.touchData.capture=!1,je&&je.unactivate()});var st,xt,gt,_t;if(_.registerBinding(v,"touchend",st=function(Re){var je=_.touchData.start,Ue=_.touchData.capture;if(Ue)Re.touches.length===0&&(_.touchData.capture=!1),Re.preventDefault();else return;var Ze=_.selection;_.swipePanning=!1,_.hoverData.draggingEles=!1;var nt=_.cy,wt=nt.zoom(),lt=_.touchData.now,Tt=_.touchData.earlier;if(Re.touches[0]){var Rt=_.projectIntoViewport(Re.touches[0].clientX,Re.touches[0].clientY);lt[0]=Rt[0],lt[1]=Rt[1]}if(Re.touches[1]){var Rt=_.projectIntoViewport(Re.touches[1].clientX,Re.touches[1].clientY);lt[2]=Rt[0],lt[3]=Rt[1]}if(Re.touches[2]){var Rt=_.projectIntoViewport(Re.touches[2].clientX,Re.touches[2].clientY);lt[4]=Rt[0],lt[5]=Rt[1]}var Mt=function(Fr){return{originalEvent:Re,type:Fr,position:{x:lt[0],y:lt[1]}}};je&&je.unactivate();var $t;if(_.touchData.cxt){if($t=Mt("cxttapend"),je?je.emit($t):nt.emit($t),!_.touchData.cxtDragged){var yt=Mt("cxttap");je?je.emit(yt):nt.emit(yt)}_.touchData.start&&(_.touchData.start._private.grabbed=!1),_.touchData.cxt=!1,_.touchData.start=null,_.redraw();return}if(!Re.touches[2]&&nt.boxSelectionEnabled()&&_.touchData.selecting){_.touchData.selecting=!1;var vt=nt.collection(_.getAllInBox(Ze[0],Ze[1],Ze[2],Ze[3]));Ze[0]=void 0,Ze[1]=void 0,Ze[2]=void 0,Ze[3]=void 0,Ze[4]=0,_.redrawHint("select",!0),nt.emit(Mt("boxend"));var Ot=function(Fr){return Fr.selectable()&&!Fr.selected()};vt.emit(Mt("box")).stdFilter(Ot).select().emit(Mt("boxselect")),vt.nonempty()&&_.redrawHint("eles",!0),_.redraw()}if(je?.unactivate(),Re.touches[2])_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);else if(!Re.touches[1]){if(!Re.touches[0]){if(!Re.touches[0]){_.data.bgActivePosistion=void 0,_.redrawHint("select",!0);var It=_.dragData.touchDragEles;if(je!=null){var sr=je._private.grabbed;G(It),_.redrawHint("drag",!0),_.redrawHint("eles",!0),sr&&(je.emit(Mt("freeon")),It.emit(Mt("free")),_.dragData.didDrag&&(je.emit(Mt("dragfreeon")),It.emit(Mt("dragfree")))),T(je,["touchend","tapend","vmouseup","tapdragout"],Re,{x:lt[0],y:lt[1]}),je.unactivate(),_.touchData.start=null}else{var zt=_.findNearestElement(lt[0],lt[1],!0,!0);T(zt,["touchend","tapend","vmouseup","tapdragout"],Re,{x:lt[0],y:lt[1]})}var ur=_.touchData.startPosition[0]-lt[0],hr=ur*ur,or=_.touchData.startPosition[1]-lt[1],rr=or*or,wr=hr+rr,qr=wr*wt*wt;_.touchData.singleTouchMoved||(je||nt.$(":selected").unselect(["tapunselect"]),T(je,["tap","vclick"],Re,{x:lt[0],y:lt[1]}),xt=!1,Re.timeStamp-_t<=nt.multiClickDebounceTime()?(gt&&clearTimeout(gt),xt=!0,_t=null,T(je,["dbltap","vdblclick"],Re,{x:lt[0],y:lt[1]})):(gt=setTimeout(function(){xt||T(je,["onetap","voneclick"],Re,{x:lt[0],y:lt[1]})},nt.multiClickDebounceTime()),_t=Re.timeStamp)),je!=null&&!_.dragData.didDrag&&je._private.selectable&&qr<_.touchTapThreshold2&&!_.pinching&&(nt.selectionType()==="single"?(nt.$(S).unmerge(je).unselect(["tapunselect"]),je.select(["tapselect"])):je.selected()?je.unselect(["tapunselect"]):je.select(["tapselect"]),_.redrawHint("eles",!0)),_.touchData.singleTouchMoved=!0}}}for(var _r=0;_r<lt.length;_r++)Tt[_r]=lt[_r];_.dragData.didDrag=!1,Re.touches.length===0&&(_.touchData.dragDelta=[],_.touchData.startPosition=[null,null,null,null,null,null],_.touchData.startGPosition=null,_.touchData.didSelect=!1),Re.touches.length<2&&(Re.touches.length===1&&(_.touchData.startGPosition=[Re.touches[0].clientX,Re.touches[0].clientY]),_.pinching=!1,_.redrawHint("eles",!0),_.redraw())},!1),typeof TouchEvent>"u"){var St=[],Lt=function(Re){return{clientX:Re.clientX,clientY:Re.clientY,force:1,identifier:Re.pointerId,pageX:Re.pageX,pageY:Re.pageY,radiusX:Re.width/2,radiusY:Re.height/2,screenX:Re.screenX,screenY:Re.screenY,target:Re.target}},jt=function(Re){return{event:Re,touch:Lt(Re)}},Gt=function(Re){St.push(jt(Re))},At=function(Re){for(var je=0;je<St.length;je++){var Ue=St[je];if(Ue.event.pointerId===Re.pointerId){St.splice(je,1);return}}},Nt=function(Re){var je=St.filter(function(Ue){return Ue.event.pointerId===Re.pointerId})[0];je.event=Re,je.touch=Lt(Re)},Ct=function(Re){Re.touches=St.map(function(je){return je.touch})},bt=function(Re){return Re.pointerType==="mouse"||Re.pointerType===4};_.registerBinding(_.container,"pointerdown",function(et){bt(et)||(et.preventDefault(),Gt(et),Ct(et),pt(et))}),_.registerBinding(_.container,"pointerup",function(et){bt(et)||(At(et),Ct(et),st(et))}),_.registerBinding(_.container,"pointercancel",function(et){bt(et)||(At(et),Ct(et),Et(et))}),_.registerBinding(_.container,"pointermove",function(et){bt(et)||(et.preventDefault(),Nt(et),Ct(et),We(et))})}};var BRp$2={};BRp$2.generatePolygon=function(_,v){return this.nodeShapes[_]={renderer:this,name:_,points:v,draw:function(R,T,A,k,M,P){this.renderer.nodeShapeImpl("polygon",R,T,A,k,M,this.points)},intersectLine:function(R,T,A,k,M,P,D,L){return polygonIntersectLine(M,P,this.points,R,T,A/2,k/2,D)},checkPoint:function(R,T,A,k,M,P,D,L){return pointInsidePolygon(R,T,this.points,P,D,k,M,[0,-1],A)},hasMiterBounds:_!=="rectangle",miterBounds:function(R,T,A,k,M,P){return miterBox(this.points,R,T,A,k,M)}}};BRp$2.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A)},intersectLine:function(v,S,R,T,A,k,M,P){return intersectLineEllipse(A,k,v,S,R/2+M,T/2+M)},checkPoint:function(v,S,R,T,A,k,M,P){return checkInEllipse(v,S,T,A,k,M,R)}}};BRp$2.generateRoundPolygon=function(_,v){return this.nodeShapes[_]={renderer:this,name:_,points:v,getOrCreateCorners:function(R,T,A,k,M,P,D){if(P[D]!==void 0&&P[D+"-cx"]===R&&P[D+"-cy"]===T)return P[D];P[D]=new Array(v.length/2),P[D+"-cx"]=R,P[D+"-cy"]=T;var L=A/2,q=k/2;M=M==="auto"?getRoundPolygonRadius(A,k):M;for(var B=new Array(v.length/2),F=0;F<v.length/2;F++)B[F]={x:R+L*v[F*2],y:T+q*v[F*2+1]};var j,z,V,G,W=B.length;for(z=B[W-1],j=0;j<W;j++)V=B[j%W],G=B[(j+1)%W],P[D][j]=getRoundCorner(z,V,G,M),z=V,V=G;return P[D]},draw:function(R,T,A,k,M,P,D){this.renderer.nodeShapeImpl("round-polygon",R,T,A,k,M,this.points,this.getOrCreateCorners(T,A,k,M,P,D,"drawCorners"))},intersectLine:function(R,T,A,k,M,P,D,L,q){return roundPolygonIntersectLine(M,P,this.points,R,T,A,k,D,this.getOrCreateCorners(R,T,A,k,L,q,"corners"))},checkPoint:function(R,T,A,k,M,P,D,L,q){return pointInsideRoundPolygon(R,T,this.points,P,D,k,M,this.getOrCreateCorners(P,D,k,M,L,q,"corners"))}}};BRp$2.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,this.points,k)},intersectLine:function(v,S,R,T,A,k,M,P){return roundRectangleIntersectLine(A,k,v,S,R,T,M,P)},checkPoint:function(v,S,R,T,A,k,M,P){var D=T/2,L=A/2;P=P==="auto"?getRoundRectangleRadius(T,A):P,P=Math.min(D,L,P);var q=P*2;return!!(pointInsidePolygon(v,S,this.points,k,M,T,A-q,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-q,A,[0,-1],R)||checkInEllipse(v,S,q,q,k-D+P,M-L+P,R)||checkInEllipse(v,S,q,q,k+D-P,M-L+P,R)||checkInEllipse(v,S,q,q,k+D-P,M+L-P,R)||checkInEllipse(v,S,q,q,k-D+P,M+L-P,R))}}};BRp$2.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,null,k)},generateCutTrianglePts:function(v,S,R,T,A){var k=A==="auto"?this.cornerLength:A,M=S/2,P=v/2,D=R-P,L=R+P,q=T-M,B=T+M;return{topLeft:[D,q+k,D+k,q,D+k,q+k],topRight:[L-k,q,L,q+k,L-k,q+k],bottomRight:[L,B-k,L-k,B,L-k,B-k],bottomLeft:[D+k,B,D,B-k,D+k,B-k]}},intersectLine:function(v,S,R,T,A,k,M,P){var D=this.generateCutTrianglePts(R+2*M,T+2*M,v,S,P),L=[].concat.apply([],[D.topLeft.splice(0,4),D.topRight.splice(0,4),D.bottomRight.splice(0,4),D.bottomLeft.splice(0,4)]);return polygonIntersectLine(A,k,L,v,S)},checkPoint:function(v,S,R,T,A,k,M,P){var D=P==="auto"?this.cornerLength:P;if(pointInsidePolygon(v,S,this.points,k,M,T,A-2*D,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-2*D,A,[0,-1],R))return!0;var L=this.generateCutTrianglePts(T,A,k,M);return pointInsidePolygonPoints(v,S,L.topLeft)||pointInsidePolygonPoints(v,S,L.topRight)||pointInsidePolygonPoints(v,S,L.bottomRight)||pointInsidePolygonPoints(v,S,L.bottomLeft)}}};BRp$2.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A)},intersectLine:function(v,S,R,T,A,k,M,P){var D=.15,L=.5,q=.85,B=this.generateBarrelBezierPts(R+2*M,T+2*M,v,S),F=function(V){var G=qbezierPtAt({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},D),W=qbezierPtAt({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},L),Y=qbezierPtAt({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},q);return[V[0],V[1],G.x,G.y,W.x,W.y,Y.x,Y.y,V[4],V[5]]},j=[].concat(F(B.topLeft),F(B.topRight),F(B.bottomRight),F(B.bottomLeft));return polygonIntersectLine(A,k,j,v,S)},generateBarrelBezierPts:function(v,S,R,T){var A=S/2,k=v/2,M=R-k,P=R+k,D=T-A,L=T+A,q=getBarrelCurveConstants(v,S),B=q.heightOffset,F=q.widthOffset,j=q.ctrlPtOffsetPct*v,z={topLeft:[M,D+B,M+j,D,M+F,D],topRight:[P-F,D,P-j,D,P,D+B],bottomRight:[P,L-B,P-j,L,P-F,L],bottomLeft:[M+F,L,M+j,L,M,L-B]};return z.topLeft.isTop=!0,z.topRight.isTop=!0,z.bottomLeft.isBottom=!0,z.bottomRight.isBottom=!0,z},checkPoint:function(v,S,R,T,A,k,M,P){var D=getBarrelCurveConstants(T,A),L=D.heightOffset,q=D.widthOffset;if(pointInsidePolygon(v,S,this.points,k,M,T,A-2*L,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-2*q,A,[0,-1],R))return!0;for(var B=this.generateBarrelBezierPts(T,A,k,M),F=function(ne,ae,oe){var se=oe[4],ce=oe[2],de=oe[0],ye=oe[5],we=oe[1],ge=Math.min(se,de),ve=Math.max(se,de),be=Math.min(ye,we),ke=Math.max(ye,we);if(ge<=ne&&ne<=ve&&be<=ae&&ae<=ke){var me=bezierPtsToQuadCoeff(se,ce,de),fe=solveQuadratic(me[0],me[1],me[2],ne),xe=fe.filter(function(Ae){return 0<=Ae&&Ae<=1});if(xe.length>0)return xe[0]}return null},j=Object.keys(B),z=0;z<j.length;z++){var V=j[z],G=B[V],W=F(v,S,G);if(W!=null){var Y=G[5],X=G[3],ee=G[1],re=qbezierAt(Y,X,ee,W);if(G.isTop&&re<=S||G.isBottom&&S<=re)return!0}}return!1}}};BRp$2.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(v,S,R,T,A,k){this.renderer.nodeShapeImpl(this.name,v,S,R,T,A,this.points,k)},intersectLine:function(v,S,R,T,A,k,M,P){var D=v-(R/2+M),L=S-(T/2+M),q=L,B=v+(R/2+M),F=finiteLinesIntersect(A,k,v,S,D,L,B,q,!1);return F.length>0?F:roundRectangleIntersectLine(A,k,v,S,R,T,M,P)},checkPoint:function(v,S,R,T,A,k,M,P){P=P==="auto"?getRoundRectangleRadius(T,A):P;var D=2*P;if(pointInsidePolygon(v,S,this.points,k,M,T,A-D,[0,-1],R)||pointInsidePolygon(v,S,this.points,k,M,T-D,A,[0,-1],R))return!0;var L=T/2+2*R,q=A/2+2*R,B=[k-L,M-q,k-L,M,k+L,M,k+L,M-q];return!!(pointInsidePolygonPoints(v,S,B)||checkInEllipse(v,S,D,D,k+T/2-P,M+A/2-P,R)||checkInEllipse(v,S,D,D,k-T/2+P,M+A/2-P,R))}}};BRp$2.registerNodeShapes=function(){var _=this.nodeShapes={},v=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),_.square=_.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var S=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",S),this.generateRoundPolygon("round-diamond",S)}this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var R=new Array(20);{var T=generateUnitNgonPoints(5,0),A=generateUnitNgonPoints(5,Math.PI/5),k=.5*(3-Math.sqrt(5));k*=1.57;for(var M=0;M<A.length/2;M++)A[M*2]*=k,A[M*2+1]*=k;for(var M=0;M<20/4;M++)R[M*4]=T[M*2],R[M*4+1]=T[M*2+1],R[M*4+2]=A[M*2],R[M*4+3]=A[M*2+1]}R=fitPolygonToSquare(R),this.generatePolygon("star",R),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var P=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",P),this.generateRoundPolygon("round-tag",P)}_.makePolygon=function(D){var L=D.join("$"),q="polygon-"+L,B;return(B=this[q])?B:v.generatePolygon(q,D)}};var BRp$1={};BRp$1.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};BRp$1.redraw=function(_){_=_||staticEmptyObject();var v=this;v.averageRedrawTime===void 0&&(v.averageRedrawTime=0),v.lastRedrawTime===void 0&&(v.lastRedrawTime=0),v.lastDrawTime===void 0&&(v.lastDrawTime=0),v.requestedFrame=!0,v.renderOptions=_};BRp$1.beforeRender=function(_,v){if(!this.destroyed){v==null&&error("Priority is not optional for beforeRender");var S=this.beforeRenderCallbacks;S.push({fn:_,priority:v}),S.sort(function(R,T){return T.priority-R.priority})}};var beforeRenderCallbacks=function(v,S,R){for(var T=v.beforeRenderCallbacks,A=0;A<T.length;A++)T[A].fn(S,R)};BRp$1.startRenderLoop=function(){var _=this,v=_.cy;if(!_.renderLoopStarted){_.renderLoopStarted=!0;var S=function(T){if(!_.destroyed){if(!v.batching())if(_.requestedFrame&&!_.skipFrame){beforeRenderCallbacks(_,!0,T);var A=performanceNow();_.render(_.renderOptions);var k=_.lastDrawTime=performanceNow();_.averageRedrawTime===void 0&&(_.averageRedrawTime=k-A),_.redrawCount===void 0&&(_.redrawCount=0),_.redrawCount++,_.redrawTotalTime===void 0&&(_.redrawTotalTime=0);var M=k-A;_.redrawTotalTime+=M,_.lastRedrawTime=M,_.averageRedrawTime=_.averageRedrawTime/2+M/2,_.requestedFrame=!1}else beforeRenderCallbacks(_,!1,T);_.skipFrame=!1,requestAnimationFrame$1(S)}};requestAnimationFrame$1(S)}};var BaseRenderer=function(v){this.init(v)},BR=BaseRenderer,BRp=BR.prototype;BRp.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];BRp.init=function(_){var v=this;v.options=_,v.cy=_.cy;var S=v.container=_.cy.container(),R=v.cy.window();if(R){var T=R.document,A=T.head,k="__________cytoscape_stylesheet",M="__________cytoscape_container",P=T.getElementById(k)!=null;if(S.className.indexOf(M)<0&&(S.className=(S.className||"")+" "+M),!P){var D=T.createElement("style");D.id=k,D.textContent="."+M+" { position: relative; }",A.insertBefore(D,A.children[0])}var L=R.getComputedStyle(S),q=L.getPropertyValue("position");q==="static"&&warn$1("A Cytoscape container has style position:static and so can not use UI extensions properly")}v.selection=[void 0,void 0,void 0,void 0,0],v.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],v.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},v.dragData={possibleDragElements:[]},v.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},v.redraws=0,v.showFps=_.showFps,v.debug=_.debug,v.webgl=_.webgl,v.hideEdgesOnViewport=_.hideEdgesOnViewport,v.textureOnViewport=_.textureOnViewport,v.wheelSensitivity=_.wheelSensitivity,v.motionBlurEnabled=_.motionBlur,v.forcedPixelRatio=number$1(_.pixelRatio)?_.pixelRatio:null,v.motionBlur=_.motionBlur,v.motionBlurOpacity=_.motionBlurOpacity,v.motionBlurTransparency=1-v.motionBlurOpacity,v.motionBlurPxRatio=1,v.mbPxRBlurry=1,v.minMbLowQualFrames=4,v.fullQualityMb=!1,v.clearedForMotionBlur=[],v.desktopTapThreshold=_.desktopTapThreshold,v.desktopTapThreshold2=_.desktopTapThreshold*_.desktopTapThreshold,v.touchTapThreshold=_.touchTapThreshold,v.touchTapThreshold2=_.touchTapThreshold*_.touchTapThreshold,v.tapholdDuration=500,v.bindings=[],v.beforeRenderCallbacks=[],v.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},v.registerNodeShapes(),v.registerArrowShapes(),v.registerCalculationListeners()};BRp.notify=function(_,v){var S=this,R=S.cy;if(!this.destroyed){if(_==="init"){S.load();return}if(_==="destroy"){S.destroy();return}(_==="add"||_==="remove"||_==="move"&&R.hasCompoundNodes()||_==="load"||_==="zorder"||_==="mount")&&S.invalidateCachedZSortedEles(),_==="viewport"&&S.redrawHint("select",!0),_==="gc"&&S.redrawHint("gc",!0),(_==="load"||_==="resize"||_==="mount")&&(S.invalidateContainerClientCoordsCache(),S.matchCanvasSize(S.container)),S.redrawHint("eles",!0),S.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};BRp.destroy=function(){var _=this;_.destroyed=!0,_.cy.stopAnimationLoop();for(var v=0;v<_.bindings.length;v++){var S=_.bindings[v],R=S,T=R.target;(T.off||T.removeEventListener).apply(T,R.args)}if(_.bindings=[],_.beforeRenderCallbacks=[],_.onUpdateEleCalcsFns=[],_.removeObserver&&_.removeObserver.disconnect(),_.styleObserver&&_.styleObserver.disconnect(),_.resizeObserver&&_.resizeObserver.disconnect(),_.labelCalcDiv)try{document.body.removeChild(_.labelCalcDiv)}catch{}};BRp.isHeadless=function(){return!1};[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach(function(_){extend(BRp,_)});var fullFpsTime=1e3/60,defs={setupDequeueing:function(v){return function(){var R=this,T=this.renderer;if(!R.dequeueingSetup){R.dequeueingSetup=!0;var A=debounce(function(){T.redrawHint("eles",!0),T.redrawHint("drag",!0),T.redraw()},v.deqRedrawThreshold),k=function(D,L){var q=performanceNow(),B=T.averageRedrawTime,F=T.lastRedrawTime,j=[],z=T.cy.extent(),V=T.getPixelRatio();for(D||T.flushRenderedStyleQueue();;){var G=performanceNow(),W=G-q,Y=G-L;if(F<fullFpsTime){var X=fullFpsTime-(D?B:0);if(Y>=v.deqFastCost*X)break}else if(D){if(W>=v.deqCost*F||W>=v.deqAvgCost*B)break}else if(Y>=v.deqNoDrawCost*fullFpsTime)break;var ee=v.deq(R,V,z);if(ee.length>0)for(var re=0;re<ee.length;re++)j.push(ee[re]);else break}j.length>0&&(v.onDeqd(R,j),!D&&v.shouldRedraw(R,j,V,z)&&A())},M=v.priority||noop$1$1;T.beforeRender(k,M(R))}}}},ElementTextureCacheLookup=(function(){function _(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:falsify;_classCallCheck(this,_),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=v,this.doesEleInvalidateKey=S}return _createClass(_,[{key:"getIdsFor",value:function(S){S==null&&error("Can not get id list for null key");var R=this.idsByKey,T=this.idsByKey.get(S);return T||(T=new Set$1,R.set(S,T)),T}},{key:"addIdForKey",value:function(S,R){S!=null&&this.getIdsFor(S).add(R)}},{key:"deleteIdForKey",value:function(S,R){S!=null&&this.getIdsFor(S).delete(R)}},{key:"getNumberOfIdsForKey",value:function(S){return S==null?0:this.getIdsFor(S).size}},{key:"updateKeyMappingFor",value:function(S){var R=S.id(),T=this.keyForId.get(R),A=this.getKey(S);this.deleteIdForKey(T,R),this.addIdForKey(A,R),this.keyForId.set(R,A)}},{key:"deleteKeyMappingFor",value:function(S){var R=S.id(),T=this.keyForId.get(R);this.deleteIdForKey(T,R),this.keyForId.delete(R)}},{key:"keyHasChangedFor",value:function(S){var R=S.id(),T=this.keyForId.get(R),A=this.getKey(S);return T!==A}},{key:"isInvalid",value:function(S){return this.keyHasChangedFor(S)||this.doesEleInvalidateKey(S)}},{key:"getCachesAt",value:function(S){var R=this.cachesByLvl,T=this.lvls,A=R.get(S);return A||(A=new Map$1,R.set(S,A),T.push(S)),A}},{key:"getCache",value:function(S,R){return this.getCachesAt(R).get(S)}},{key:"get",value:function(S,R){var T=this.getKey(S),A=this.getCache(T,R);return A!=null&&this.updateKeyMappingFor(S),A}},{key:"getForCachedKey",value:function(S,R){var T=this.keyForId.get(S.id()),A=this.getCache(T,R);return A}},{key:"hasCache",value:function(S,R){return this.getCachesAt(R).has(S)}},{key:"has",value:function(S,R){var T=this.getKey(S);return this.hasCache(T,R)}},{key:"setCache",value:function(S,R,T){T.key=S,this.getCachesAt(R).set(S,T)}},{key:"set",value:function(S,R,T){var A=this.getKey(S);this.setCache(A,R,T),this.updateKeyMappingFor(S)}},{key:"deleteCache",value:function(S,R){this.getCachesAt(R).delete(S)}},{key:"delete",value:function(S,R){var T=this.getKey(S);this.deleteCache(T,R)}},{key:"invalidateKey",value:function(S){var R=this;this.lvls.forEach(function(T){return R.deleteCache(S,T)})}},{key:"invalidate",value:function(S){var R=S.id(),T=this.keyForId.get(R);this.deleteKeyMappingFor(S);var A=this.doesEleInvalidateKey(S);return A&&this.invalidateKey(T),A||this.getNumberOfIdsForKey(T)===0}}])})(),minTxrH=25,txrStepH=50,minLvl$1=-4,maxLvl$1=3,maxZoom$1=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,deqRedrawThreshold$1=100,maxDeqSize$1=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(v,S){var R=this;R.renderer=v,R.onDequeues=[];var T=initDefaults(S);extend(R,T),R.lookup=new ElementTextureCacheLookup(T.getKey,T.doesEleInvalidateKey),R.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons;ETCp.getTextureQueue=function(_){var v=this;return v.eleImgCaches=v.eleImgCaches||{},v.eleImgCaches[_]=v.eleImgCaches[_]||[]};ETCp.getRetiredTextureQueue=function(_){var v=this,S=v.eleImgCaches.retired=v.eleImgCaches.retired||{},R=S[_]=S[_]||[];return R};ETCp.getElementQueue=function(){var _=this,v=_.eleCacheQueue=_.eleCacheQueue||new Heap(function(S,R){return R.reqs-S.reqs});return v};ETCp.getElementKeyToQueue=function(){var _=this,v=_.eleKeyToCacheQueue=_.eleKeyToCacheQueue||{};return v};ETCp.getElement=function(_,v,S,R,T){var A=this,k=this.renderer,M=k.cy.zoom(),P=this.lookup;if(!v||v.w===0||v.h===0||isNaN(v.w)||isNaN(v.h)||!_.visible()||_.removed()||!A.allowEdgeTxrCaching&&_.isEdge()||!A.allowParentTxrCaching&&_.isParent())return null;if(R==null&&(R=Math.ceil(log2(M*S))),R<minLvl$1)R=minLvl$1;else if(M>=maxZoom$1||R>maxLvl$1)return null;var D=Math.pow(2,R),L=v.h*D,q=v.w*D,B=k.eleTextBiggerThanMin(_,D);if(!this.isVisible(_,B))return null;var F=P.get(_,R);if(F&&F.invalidated&&(F.invalidated=!1,F.texture.invalidatedWidth-=F.width),F)return F;var j;if(L<=minTxrH?j=minTxrH:L<=txrStepH?j=txrStepH:j=Math.ceil(L/txrStepH)*txrStepH,L>maxTxrH||q>maxTxrW)return null;var z=A.getTextureQueue(j),V=z[z.length-2],G=function(){return A.recycleTexture(j,q)||A.addTexture(j,q)};V||(V=z[z.length-1]),V||(V=G()),V.width-V.usedWidth<q&&(V=G());for(var W=function(ge){return ge&&ge.scaledLabelShown===B},Y=T&&T===getTxrReasons.dequeue,X=T&&T===getTxrReasons.highQuality,ee=T&&T===getTxrReasons.downscale,re,Q=R+1;Q<=maxLvl$1;Q++){var ne=P.get(_,Q);if(ne){re=ne;break}}var ae=re&&re.level===R+1?re:null,oe=function(){V.context.drawImage(ae.texture.canvas,ae.x,0,ae.width,ae.height,V.usedWidth,0,q,L)};if(V.context.setTransform(1,0,0,1,0,0),V.context.clearRect(V.usedWidth,0,q,j),W(ae))oe();else if(W(re))if(X){for(var se=re.level;se>R;se--)ae=A.getElement(_,v,S,se,getTxrReasons.downscale);oe()}else return A.queueElement(_,re.level-1),re;else{var ce;if(!Y&&!X&&!ee)for(var de=R-1;de>=minLvl$1;de--){var ye=P.get(_,de);if(ye){ce=ye;break}}if(W(ce))return A.queueElement(_,R),ce;V.context.translate(V.usedWidth,0),V.context.scale(D,D),this.drawElement(V.context,_,v,B,!1),V.context.scale(1/D,1/D),V.context.translate(-V.usedWidth,0)}return F={x:V.usedWidth,texture:V,level:R,scale:D,width:q,height:L,scaledLabelShown:B},V.usedWidth+=Math.ceil(q+eleTxrSpacing),V.eleCaches.push(F),P.set(_,R,F),A.checkTextureFullness(V),F};ETCp.invalidateElements=function(_){for(var v=0;v<_.length;v++)this.invalidateElement(_[v])};ETCp.invalidateElement=function(_){var v=this,S=v.lookup,R=[],T=S.isInvalid(_);if(T){for(var A=minLvl$1;A<=maxLvl$1;A++){var k=S.getForCachedKey(_,A);k&&R.push(k)}var M=S.invalidate(_);if(M)for(var P=0;P<R.length;P++){var D=R[P],L=D.texture;L.invalidatedWidth+=D.width,D.invalidated=!0,v.checkTextureUtility(L)}v.removeFromQueue(_)}};ETCp.checkTextureUtility=function(_){_.invalidatedWidth>=minUtility*_.width&&this.retireTexture(_)};ETCp.checkTextureFullness=function(_){var v=this,S=v.getTextureQueue(_.height);_.usedWidth/_.width>maxFullness&&_.fullnessChecks>=maxFullnessChecks?removeFromArray(S,_):_.fullnessChecks++};ETCp.retireTexture=function(_){var v=this,S=_.height,R=v.getTextureQueue(S),T=this.lookup;removeFromArray(R,_),_.retired=!0;for(var A=_.eleCaches,k=0;k<A.length;k++){var M=A[k];T.deleteCache(M.key,M.level)}clearArray(A);var P=v.getRetiredTextureQueue(S);P.push(_)};ETCp.addTexture=function(_,v){var S=this,R=S.getTextureQueue(_),T={};return R.push(T),T.eleCaches=[],T.height=_,T.width=Math.max(defTxrWidth,v),T.usedWidth=0,T.invalidatedWidth=0,T.fullnessChecks=0,T.canvas=S.renderer.makeOffscreenCanvas(T.width,T.height),T.context=T.canvas.getContext("2d"),T};ETCp.recycleTexture=function(_,v){for(var S=this,R=S.getTextureQueue(_),T=S.getRetiredTextureQueue(_),A=0;A<T.length;A++){var k=T[A];if(k.width>=v)return k.retired=!1,k.usedWidth=0,k.invalidatedWidth=0,k.fullnessChecks=0,clearArray(k.eleCaches),k.context.setTransform(1,0,0,1,0,0),k.context.clearRect(0,0,k.width,k.height),removeFromArray(T,k),R.push(k),k}};ETCp.queueElement=function(_,v){var S=this,R=S.getElementQueue(),T=S.getElementKeyToQueue(),A=this.getKey(_),k=T[A];if(k)k.level=Math.max(k.level,v),k.eles.merge(_),k.reqs++,R.updateItem(k);else{var M={eles:_.spawn().merge(_),level:v,reqs:1,key:A};R.push(M),T[A]=M}};ETCp.dequeue=function(_){for(var v=this,S=v.getElementQueue(),R=v.getElementKeyToQueue(),T=[],A=v.lookup,k=0;k<maxDeqSize$1&&S.size()>0;k++){var M=S.pop(),P=M.key,D=M.eles[0],L=A.hasCache(D,M.level);if(R[P]=null,L)continue;T.push(M);var q=v.getBoundingBox(D);v.getElement(D,q,_,M.level,getTxrReasons.dequeue)}return T};ETCp.removeFromQueue=function(_){var v=this,S=v.getElementQueue(),R=v.getElementKeyToQueue(),T=this.getKey(_),A=R[T];A!=null&&(A.eles.length===1?(A.reqs=MAX_INT$1,S.updateItem(A),S.pop(),R[T]=null):A.eles.unmerge(_))};ETCp.onDequeue=function(_){this.onDequeues.push(_)};ETCp.offDequeue=function(_){removeFromArray(this.onDequeues,_)};ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(v,S,R){return v.dequeue(S,R)},onDeqd:function(v,S){for(var R=0;R<v.onDequeues.length;R++){var T=v.onDequeues[R];T(S)}},shouldRedraw:function(v,S,R,T){for(var A=0;A<S.length;A++)for(var k=S[A].eles,M=0;M<k.length;M++){var P=k[M].boundingBox();if(boundingBoxesIntersect(P,T))return!0}return!1},priority:function(v){return v.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl=-4,maxLvl=2,maxZoom=3.99,deqRedrawThreshold=50,refineEleDebounceTime=50,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,maxDeqSize=1,invalidThreshold=250,maxLayerArea=4e3*4e3,maxLayerDim=32767,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(v){var S=this,R=S.renderer=v,T=R.cy;S.layersByLevel={},S.firstGet=!0,S.lastInvalidationTime=performanceNow()-2*invalidThreshold,S.skipping=!1,S.eleTxrDeqs=T.collection(),S.scheduleElementRefinement=debounce(function(){S.refineElementTextures(S.eleTxrDeqs),S.eleTxrDeqs.unmerge(S.eleTxrDeqs)},refineEleDebounceTime),R.beforeRender(function(k,M){M-S.lastInvalidationTime<=invalidThreshold?S.skipping=!0:S.skipping=!1},R.beforeRenderPriorities.lyrTxrSkip);var A=function(M,P){return P.reqs-M.reqs};S.layersQueue=new Heap(A),S.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(_,v){var S=Math.pow(2,v),R=Math.ceil(_.w*S),T=Math.ceil(_.h*S),A=this.renderer.makeOffscreenCanvas(R,T),k={id:layerIdPool=++layerIdPool%MAX_INT,bb:_,level:v,width:R,height:T,canvas:A,context:A.getContext("2d"),eles:[],elesQueue:[],reqs:0},M=k.context,P=-k.bb.x1,D=-k.bb.y1;return M.scale(S,S),M.translate(P,D),k};LTCp.getLayers=function(_,v,S){var R=this,T=R.renderer,A=T.cy,k=A.zoom(),M=R.firstGet;if(R.firstGet=!1,S==null){if(S=Math.ceil(log2(k*v)),S<minLvl)S=minLvl;else if(k>=maxZoom||S>maxLvl)return null}R.validateLayersElesOrdering(S,_);var P=R.layersByLevel,D=Math.pow(2,S),L=P[S]=P[S]||[],q,B=R.levelIsComplete(S,_),F,j=function(){var oe=function(we){if(R.validateLayersElesOrdering(we,_),R.levelIsComplete(we,_))return F=P[we],!0},se=function(we){if(!F)for(var ge=S+we;minLvl<=ge&&ge<=maxLvl&&!oe(ge);ge+=we);};se(1),se(-1);for(var ce=L.length-1;ce>=0;ce--){var de=L[ce];de.invalid&&removeFromArray(L,de)}};if(!B)j();else return L;var z=function(){if(!q){q=makeBoundingBox();for(var oe=0;oe<_.length;oe++)updateBoundingBox(q,_[oe].boundingBox())}return q},V=function(oe){oe=oe||{};var se=oe.after;z();var ce=Math.ceil(q.w*D),de=Math.ceil(q.h*D);if(ce>maxLayerDim||de>maxLayerDim)return null;var ye=ce*de;if(ye>maxLayerArea)return null;var we=R.makeLayer(q,S);if(se!=null){var ge=L.indexOf(se)+1;L.splice(ge,0,we)}else(oe.insert===void 0||oe.insert)&&L.unshift(we);return we};if(R.skipping&&!M)return null;for(var G=null,W=_.length/defNumLayers,Y=!M,X=0;X<_.length;X++){var ee=_[X],re=ee._private.rscratch,Q=re.imgLayerCaches=re.imgLayerCaches||{},ne=Q[S];if(ne){G=ne;continue}if((!G||G.eles.length>=W||!boundingBoxInBoundingBox(G.bb,ee.boundingBox()))&&(G=V({insert:!0,after:G}),!G))return null;F||Y?R.queueLayer(G,ee):R.drawEleInLayer(G,ee,S,v),G.eles.push(ee),Q[S]=G}return F||(Y?null:L)};LTCp.getEleLevelForLayerLevel=function(_,v){return _};LTCp.drawEleInLayer=function(_,v,S,R){var T=this,A=this.renderer,k=_.context,M=v.boundingBox();M.w===0||M.h===0||!v.visible()||(S=T.getEleLevelForLayerLevel(S,R),A.setImgSmoothing(k,!1),A.drawCachedElement(k,v,null,null,S,useHighQualityEleTxrReqs),A.setImgSmoothing(k,!0))};LTCp.levelIsComplete=function(_,v){var S=this,R=S.layersByLevel[_];if(!R||R.length===0)return!1;for(var T=0,A=0;A<R.length;A++){var k=R[A];if(k.reqs>0||k.invalid)return!1;T+=k.eles.length}return T===v.length};LTCp.validateLayersElesOrdering=function(_,v){var S=this.layersByLevel[_];if(S)for(var R=0;R<S.length;R++){for(var T=S[R],A=-1,k=0;k<v.length;k++)if(T.eles[0]===v[k]){A=k;break}if(A<0){this.invalidateLayer(T);continue}for(var M=A,k=0;k<T.eles.length;k++)if(T.eles[k]!==v[M+k]){this.invalidateLayer(T);break}}};LTCp.updateElementsInLayers=function(_,v){for(var S=this,R=element(_[0]),T=0;T<_.length;T++)for(var A=R?null:_[T],k=R?_[T]:_[T].ele,M=k._private.rscratch,P=M.imgLayerCaches=M.imgLayerCaches||{},D=minLvl;D<=maxLvl;D++){var L=P[D];L&&(A&&S.getEleLevelForLayerLevel(L.level)!==A.level||v(L,k,A))}};LTCp.haveLayers=function(){for(var _=this,v=!1,S=minLvl;S<=maxLvl;S++){var R=_.layersByLevel[S];if(R&&R.length>0){v=!0;break}}return v};LTCp.invalidateElements=function(_){var v=this;_.length!==0&&(v.lastInvalidationTime=performanceNow(),!(_.length===0||!v.haveLayers())&&v.updateElementsInLayers(_,function(R,T,A){v.invalidateLayer(R)}))};LTCp.invalidateLayer=function(_){if(this.lastInvalidationTime=performanceNow(),!_.invalid){var v=_.level,S=_.eles,R=this.layersByLevel[v];removeFromArray(R,_),_.elesQueue=[],_.invalid=!0,_.replacement&&(_.replacement.invalid=!0);for(var T=0;T<S.length;T++){var A=S[T]._private.rscratch.imgLayerCaches;A&&(A[v]=null)}}};LTCp.refineElementTextures=function(_){var v=this;v.updateElementsInLayers(_,function(R,T,A){var k=R.replacement;if(k||(k=R.replacement=v.makeLayer(R.bb,R.level),k.replaces=R,k.eles=R.eles),!k.reqs)for(var M=0;M<k.eles.length;M++)v.queueLayer(k,k.eles[M])})};LTCp.enqueueElementRefinement=function(_){this.eleTxrDeqs.merge(_),this.scheduleElementRefinement()};LTCp.queueLayer=function(_,v){var S=this,R=S.layersQueue,T=_.elesQueue,A=T.hasId=T.hasId||{};if(!_.replacement){if(v){if(A[v.id()])return;T.push(v),A[v.id()]=!0}_.reqs?(_.reqs++,R.updateItem(_)):(_.reqs=1,R.push(_))}};LTCp.dequeue=function(_){for(var v=this,S=v.layersQueue,R=[],T=0;T<maxDeqSize&&S.size()!==0;){var A=S.peek();if(A.replacement){S.pop();continue}if(A.replaces&&A!==A.replaces.replacement){S.pop();continue}if(A.invalid){S.pop();continue}var k=A.elesQueue.shift();k&&(v.drawEleInLayer(A,k,A.level,_),T++),R.length===0&&R.push(!0),A.elesQueue.length===0&&(S.pop(),A.reqs=0,A.replaces&&v.applyLayerReplacement(A),v.requestRedraw())}return R};LTCp.applyLayerReplacement=function(_){var v=this,S=v.layersByLevel[_.level],R=_.replaces,T=S.indexOf(R);if(!(T<0||R.invalid)){S[T]=_;for(var A=0;A<_.eles.length;A++){var k=_.eles[A]._private,M=k.imgLayerCaches=k.imgLayerCaches||{};M&&(M[_.level]=_)}v.requestRedraw()}};LTCp.requestRedraw=debounce(function(){var _=this.renderer;_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},100);LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold,deqCost,deqAvgCost,deqNoDrawCost,deqFastCost,deq:function(v,S){return v.dequeue(S)},onDeqd:noop$1$1,shouldRedraw:trueify,priority:function(v){return v.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp$b={},impl;function polygon(_,v){for(var S=0;S<v.length;S++){var R=v[S];_.lineTo(R.x,R.y)}}function triangleBackcurve(_,v,S){for(var R,T=0;T<v.length;T++){var A=v[T];T===0&&(R=A),_.lineTo(A.x,A.y)}_.quadraticCurveTo(S.x,S.y,R.x,R.y)}function triangleTee(_,v,S){_.beginPath&&_.beginPath();for(var R=v,T=0;T<R.length;T++){var A=R[T];_.lineTo(A.x,A.y)}var k=S,M=S[0];_.moveTo(M.x,M.y);for(var T=1;T<k.length;T++){var A=k[T];_.lineTo(A.x,A.y)}_.closePath&&_.closePath()}function circleTriangle(_,v,S,R,T){_.beginPath&&_.beginPath(),_.arc(S,R,T,0,Math.PI*2,!1);var A=v,k=A[0];_.moveTo(k.x,k.y);for(var M=0;M<A.length;M++){var P=A[M];_.lineTo(P.x,P.y)}_.closePath&&_.closePath()}function circle$1(_,v,S,R){_.arc(v,S,R,0,Math.PI*2,!1)}CRp$b.arrowShapeImpl=function(_){return(impl||(impl={polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle$1}))[_]};var CRp$a={};CRp$a.drawElement=function(_,v,S,R,T,A){var k=this;v.isNode()?k.drawNode(_,v,S,R,T,A):k.drawEdge(_,v,S,R,T,A)};CRp$a.drawElementOverlay=function(_,v){var S=this;v.isNode()?S.drawNodeOverlay(_,v):S.drawEdgeOverlay(_,v)};CRp$a.drawElementUnderlay=function(_,v){var S=this;v.isNode()?S.drawNodeUnderlay(_,v):S.drawEdgeUnderlay(_,v)};CRp$a.drawCachedElementPortion=function(_,v,S,R,T,A,k,M){var P=this,D=S.getBoundingBox(v);if(!(D.w===0||D.h===0)){var L=S.getElement(v,D,R,T,A);if(L!=null){var q=M(P,v);if(q===0)return;var B=k(P,v),F=D.x1,j=D.y1,z=D.w,V=D.h,G,W,Y,X,ee;if(B!==0){var re=S.getRotationPoint(v);Y=re.x,X=re.y,_.translate(Y,X),_.rotate(B),ee=P.getImgSmoothing(_),ee||P.setImgSmoothing(_,!0);var Q=S.getRotationOffset(v);G=Q.x,W=Q.y}else G=F,W=j;var ne;q!==1&&(ne=_.globalAlpha,_.globalAlpha=ne*q),_.drawImage(L.texture.canvas,L.x,0,L.width,L.height,G,W,z,V),q!==1&&(_.globalAlpha=ne),B!==0&&(_.rotate(-B),_.translate(-Y,-X),ee||P.setImgSmoothing(_,!1))}else S.drawElement(_,v)}};var getZeroRotation=function(){return 0},getLabelRotation=function(v,S){return v.getTextAngle(S,null)},getSourceLabelRotation=function(v,S){return v.getTextAngle(S,"source")},getTargetLabelRotation=function(v,S){return v.getTextAngle(S,"target")},getOpacity=function(v,S){return S.effectiveOpacity()},getTextOpacity=function(v,S){return S.pstyle("text-opacity").pfValue*S.effectiveOpacity()};CRp$a.drawCachedElement=function(_,v,S,R,T,A){var k=this,M=k.data,P=M.eleTxrCache,D=M.lblTxrCache,L=M.slbTxrCache,q=M.tlbTxrCache,B=v.boundingBox(),F=A===!0?P.reasons.highQuality:null;if(!(B.w===0||B.h===0||!v.visible())&&(!R||boundingBoxesIntersect(B,R))){var j=v.isEdge(),z=v.element()._private.rscratch.badLine;k.drawElementUnderlay(_,v),k.drawCachedElementPortion(_,v,P,S,T,F,getZeroRotation,getOpacity),(!j||!z)&&k.drawCachedElementPortion(_,v,D,S,T,F,getLabelRotation,getTextOpacity),j&&!z&&(k.drawCachedElementPortion(_,v,L,S,T,F,getSourceLabelRotation,getTextOpacity),k.drawCachedElementPortion(_,v,q,S,T,F,getTargetLabelRotation,getTextOpacity)),k.drawElementOverlay(_,v)}};CRp$a.drawElements=function(_,v){for(var S=this,R=0;R<v.length;R++){var T=v[R];S.drawElement(_,T)}};CRp$a.drawCachedElements=function(_,v,S,R){for(var T=this,A=0;A<v.length;A++){var k=v[A];T.drawCachedElement(_,k,S,R)}};CRp$a.drawCachedNodes=function(_,v,S,R){for(var T=this,A=0;A<v.length;A++){var k=v[A];k.isNode()&&T.drawCachedElement(_,k,S,R)}};CRp$a.drawLayeredElements=function(_,v,S,R){var T=this,A=T.data.lyrTxrCache.getLayers(v,S);if(A)for(var k=0;k<A.length;k++){var M=A[k],P=M.bb;P.w===0||P.h===0||_.drawImage(M.canvas,P.x1,P.y1,P.w,P.h)}else T.drawCachedElements(_,v,S,R)};var CRp$9={};CRp$9.drawEdge=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this,M=v._private.rscratch;if(!(A&&!v.visible())&&!(M.badLine||M.allpts==null||isNaN(M.allpts[0]))){var P;S&&(P=S,_.translate(-P.x1,-P.y1));var D=A?v.pstyle("opacity").value:1,L=A?v.pstyle("line-opacity").value:1,q=v.pstyle("curve-style").value,B=v.pstyle("line-style").value,F=v.pstyle("width").pfValue,j=v.pstyle("line-cap").value,z=v.pstyle("line-outline-width").value,V=v.pstyle("line-outline-color").value,G=D*L,W=D*L,Y=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G;q==="straight-triangle"?(k.eleStrokeStyle(_,v,we),k.drawEdgeTrianglePath(v,_,M.allpts)):(_.lineWidth=F,_.lineCap=j,k.eleStrokeStyle(_,v,we),k.drawEdgePath(v,_,M.allpts,B),_.lineCap="butt")},X=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G;if(_.lineWidth=F+z,_.lineCap=j,z>0)k.colorStrokeStyle(_,V[0],V[1],V[2],we);else{_.lineCap="butt";return}q==="straight-triangle"?k.drawEdgeTrianglePath(v,_,M.allpts):(k.drawEdgePath(v,_,M.allpts,B),_.lineCap="butt")},ee=function(){T&&k.drawEdgeOverlay(_,v)},re=function(){T&&k.drawEdgeUnderlay(_,v)},Q=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;k.drawArrowheads(_,v,we)},ne=function(){k.drawElementText(_,v,null,R)};_.lineJoin="round";var ae=v.pstyle("ghost").value==="yes";if(ae){var oe=v.pstyle("ghost-offset-x").pfValue,se=v.pstyle("ghost-offset-y").pfValue,ce=v.pstyle("ghost-opacity").value,de=G*ce;_.translate(oe,se),Y(de),Q(de),_.translate(-oe,-se)}else X();re(),Y(),Q(),ee(),ne(),S&&_.translate(P.x1,P.y1)}};var drawEdgeOverlayUnderlay=function(v){if(!["overlay","underlay"].includes(v))throw new Error("Invalid state");return function(S,R){if(R.visible()){var T=R.pstyle("".concat(v,"-opacity")).value;if(T!==0){var A=this,k=A.usePaths(),M=R._private.rscratch,P=R.pstyle("".concat(v,"-padding")).pfValue,D=2*P,L=R.pstyle("".concat(v,"-color")).value;S.lineWidth=D,M.edgeType==="self"&&!k?S.lineCap="butt":S.lineCap="round",A.colorStrokeStyle(S,L[0],L[1],L[2],T),A.drawEdgePath(R,S,M.allpts,"solid")}}}};CRp$9.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay");CRp$9.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay");CRp$9.drawEdgePath=function(_,v,S,R){var T=_._private.rscratch,A=v,k,M=!1,P=this.usePaths(),D=_.pstyle("line-dash-pattern").pfValue,L=_.pstyle("line-dash-offset").pfValue;if(P){var q=S.join("$"),B=T.pathCacheKey&&T.pathCacheKey===q;B?(k=v=T.pathCache,M=!0):(k=v=new Path2D,T.pathCacheKey=q,T.pathCache=k)}if(A.setLineDash)switch(R){case"dotted":A.setLineDash([1,1]);break;case"dashed":A.setLineDash(D),A.lineDashOffset=L;break;case"solid":A.setLineDash([]);break}if(!M&&!T.badLine)switch(v.beginPath&&v.beginPath(),v.moveTo(S[0],S[1]),T.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var F=2;F+3<S.length;F+=4)v.quadraticCurveTo(S[F],S[F+1],S[F+2],S[F+3]);break;case"straight":case"haystack":for(var j=2;j+1<S.length;j+=2)v.lineTo(S[j],S[j+1]);break;case"segments":if(T.isRound){var z=_createForOfIteratorHelper(T.roundCorners),V;try{for(z.s();!(V=z.n()).done;){var G=V.value;drawPreparedRoundCorner(v,G)}}catch(Y){z.e(Y)}finally{z.f()}v.lineTo(S[S.length-2],S[S.length-1])}else for(var W=2;W+1<S.length;W+=2)v.lineTo(S[W],S[W+1]);break}v=A,P?v.stroke(k):v.stroke(),v.setLineDash&&v.setLineDash([])};CRp$9.drawEdgeTrianglePath=function(_,v,S){v.fillStyle=v.strokeStyle;for(var R=_.pstyle("width").pfValue,T=0;T+1<S.length;T+=2){var A=[S[T+2]-S[T],S[T+3]-S[T+1]],k=Math.sqrt(A[0]*A[0]+A[1]*A[1]),M=[A[1]/k,-A[0]/k],P=[M[0]*R/2,M[1]*R/2];v.beginPath(),v.moveTo(S[T]-P[0],S[T+1]-P[1]),v.lineTo(S[T]+P[0],S[T+1]+P[1]),v.lineTo(S[T+2],S[T+3]),v.closePath(),v.fill()}};CRp$9.drawArrowheads=function(_,v,S){var R=v._private.rscratch,T=R.edgeType==="haystack";T||this.drawArrowhead(_,v,"source",R.arrowStartX,R.arrowStartY,R.srcArrowAngle,S),this.drawArrowhead(_,v,"mid-target",R.midX,R.midY,R.midtgtArrowAngle,S),this.drawArrowhead(_,v,"mid-source",R.midX,R.midY,R.midsrcArrowAngle,S),T||this.drawArrowhead(_,v,"target",R.arrowEndX,R.arrowEndY,R.tgtArrowAngle,S)};CRp$9.drawArrowhead=function(_,v,S,R,T,A,k){if(!(isNaN(R)||R==null||isNaN(T)||T==null||isNaN(A)||A==null)){var M=this,P=v.pstyle(S+"-arrow-shape").value;if(P!=="none"){var D=v.pstyle(S+"-arrow-fill").value==="hollow"?"both":"filled",L=v.pstyle(S+"-arrow-fill").value,q=v.pstyle("width").pfValue,B=v.pstyle(S+"-arrow-width"),F=B.value==="match-line"?q:B.pfValue;B.units==="%"&&(F*=q);var j=v.pstyle("opacity").value;k===void 0&&(k=j);var z=_.globalCompositeOperation;(k!==1||L==="hollow")&&(_.globalCompositeOperation="destination-out",M.colorFillStyle(_,255,255,255,1),M.colorStrokeStyle(_,255,255,255,1),M.drawArrowShape(v,_,D,q,P,F,R,T,A),_.globalCompositeOperation=z);var V=v.pstyle(S+"-arrow-color").value;M.colorFillStyle(_,V[0],V[1],V[2],k),M.colorStrokeStyle(_,V[0],V[1],V[2],k),M.drawArrowShape(v,_,L,q,P,F,R,T,A)}}};CRp$9.drawArrowShape=function(_,v,S,R,T,A,k,M,P){var D=this,L=this.usePaths()&&T!=="triangle-cross",q=!1,B,F=v,j={x:k,y:M},z=_.pstyle("arrow-scale").value,V=this.getArrowWidth(R,z),G=D.arrowShapes[T];if(L){var W=D.arrowPathCache=D.arrowPathCache||[],Y=hashString(T),X=W[Y];X!=null?(B=v=X,q=!0):(B=v=new Path2D,W[Y]=B)}q||(v.beginPath&&v.beginPath(),L?G.draw(v,1,0,{x:0,y:0},1):G.draw(v,V,P,j,R),v.closePath&&v.closePath()),v=F,L&&(v.translate(k,M),v.rotate(P),v.scale(V,V)),(S==="filled"||S==="both")&&(L?v.fill(B):v.fill()),(S==="hollow"||S==="both")&&(v.lineWidth=A/(L?V:1),v.lineJoin="miter",L?v.stroke(B):v.stroke()),L&&(v.scale(1/V,1/V),v.rotate(-P),v.translate(-k,-M))};var CRp$8={};CRp$8.safeDrawImage=function(_,v,S,R,T,A,k,M,P,D){if(!(T<=0||A<=0||P<=0||D<=0))try{_.drawImage(v,S,R,T,A,k,M,P,D)}catch(L){warn$1(L)}};CRp$8.drawInscribedImage=function(_,v,S,R,T){var A=this,k=S.position(),M=k.x,P=k.y,D=S.cy().style(),L=D.getIndexedStyle.bind(D),q=L(S,"background-fit","value",R),B=L(S,"background-repeat","value",R),F=S.width(),j=S.height(),z=S.padding()*2,V=F+(L(S,"background-width-relative-to","value",R)==="inner"?0:z),G=j+(L(S,"background-height-relative-to","value",R)==="inner"?0:z),W=S._private.rscratch,Y=L(S,"background-clip","value",R),X=Y==="node",ee=L(S,"background-image-opacity","value",R)*T,re=L(S,"background-image-smoothing","value",R),Q=S.pstyle("corner-radius").value;Q!=="auto"&&(Q=S.pstyle("corner-radius").pfValue);var ne=v.width||v.cachedW,ae=v.height||v.cachedH;(ne==null||ae==null)&&(document.body.appendChild(v),ne=v.cachedW=v.width||v.offsetWidth,ae=v.cachedH=v.height||v.offsetHeight,document.body.removeChild(v));var oe=ne,se=ae;if(L(S,"background-width","value",R)!=="auto"&&(L(S,"background-width","units",R)==="%"?oe=L(S,"background-width","pfValue",R)*V:oe=L(S,"background-width","pfValue",R)),L(S,"background-height","value",R)!=="auto"&&(L(S,"background-height","units",R)==="%"?se=L(S,"background-height","pfValue",R)*G:se=L(S,"background-height","pfValue",R)),!(oe===0||se===0)){if(q==="contain"){var ce=Math.min(V/oe,G/se);oe*=ce,se*=ce}else if(q==="cover"){var ce=Math.max(V/oe,G/se);oe*=ce,se*=ce}var de=M-V/2,ye=L(S,"background-position-x","units",R),we=L(S,"background-position-x","pfValue",R);ye==="%"?de+=(V-oe)*we:de+=we;var ge=L(S,"background-offset-x","units",R),ve=L(S,"background-offset-x","pfValue",R);ge==="%"?de+=(V-oe)*ve:de+=ve;var be=P-G/2,ke=L(S,"background-position-y","units",R),me=L(S,"background-position-y","pfValue",R);ke==="%"?be+=(G-se)*me:be+=me;var fe=L(S,"background-offset-y","units",R),xe=L(S,"background-offset-y","pfValue",R);fe==="%"?be+=(G-se)*xe:be+=xe,W.pathCache&&(de-=M,be-=P,M=0,P=0);var Ae=_.globalAlpha;_.globalAlpha=ee;var Se=A.getImgSmoothing(_),Me=!1;if(re==="no"&&Se?(A.setImgSmoothing(_,!1),Me=!0):re==="yes"&&!Se&&(A.setImgSmoothing(_,!0),Me=!0),B==="no-repeat")X&&(_.save(),W.pathCache?_.clip(W.pathCache):(A.nodeShapes[A.getNodeShape(S)].draw(_,M,P,V,G,Q,W),_.clip())),A.safeDrawImage(_,v,0,0,ne,ae,de,be,oe,se),X&&_.restore();else{var Oe=_.createPattern(v,B);_.fillStyle=Oe,A.nodeShapes[A.getNodeShape(S)].draw(_,M,P,V,G,Q,W),_.translate(de,be),_.fill(),_.translate(-de,-be)}_.globalAlpha=Ae,Me&&A.setImgSmoothing(_,Se)}};var CRp$7={};CRp$7.eleTextBiggerThanMin=function(_,v){if(!v){var S=_.cy().zoom(),R=this.getPixelRatio(),T=Math.ceil(log2(S*R));v=Math.pow(2,T)}var A=_.pstyle("font-size").pfValue*v,k=_.pstyle("min-zoomed-font-size").pfValue;return!(A<k)};CRp$7.drawElementText=function(_,v,S,R,T){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this;if(R==null){if(A&&!k.eleTextBiggerThanMin(v))return}else if(R===!1)return;if(v.isNode()){var M=v.pstyle("label");if(!M||!M.value)return;var P=k.getLabelJustification(v);_.textAlign=P,_.textBaseline="bottom"}else{var D=v.element()._private.rscratch.badLine,L=v.pstyle("label"),q=v.pstyle("source-label"),B=v.pstyle("target-label");if(D||(!L||!L.value)&&(!q||!q.value)&&(!B||!B.value))return;_.textAlign="center",_.textBaseline="bottom"}var F=!S,j;S&&(j=S,_.translate(-j.x1,-j.y1)),T==null?(k.drawText(_,v,null,F,A),v.isEdge()&&(k.drawText(_,v,"source",F,A),k.drawText(_,v,"target",F,A))):k.drawText(_,v,T,F,A),S&&_.translate(j.x1,j.y1)};CRp$7.getFontCache=function(_){var v;this.fontCaches=this.fontCaches||[];for(var S=0;S<this.fontCaches.length;S++)if(v=this.fontCaches[S],v.context===_)return v;return v={context:_},this.fontCaches.push(v),v};CRp$7.setupTextStyle=function(_,v){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,R=v.pstyle("font-style").strValue,T=v.pstyle("font-size").pfValue+"px",A=v.pstyle("font-family").strValue,k=v.pstyle("font-weight").strValue,M=S?v.effectiveOpacity()*v.pstyle("text-opacity").value:1,P=v.pstyle("text-outline-opacity").value*M,D=v.pstyle("color").value,L=v.pstyle("text-outline-color").value;_.font=R+" "+k+" "+T+" "+A,_.lineJoin="round",this.colorFillStyle(_,D[0],D[1],D[2],M),this.colorStrokeStyle(_,L[0],L[1],L[2],P)};function circle(_,v,S,R,T){var A=Math.min(R,T),k=A/2,M=v+R/2,P=S+T/2;_.beginPath(),_.arc(M,P,k,0,Math.PI*2),_.closePath()}function roundRect(_,v,S,R,T){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,k=Math.min(A,R/2,T/2);_.beginPath(),_.moveTo(v+k,S),_.lineTo(v+R-k,S),_.quadraticCurveTo(v+R,S,v+R,S+k),_.lineTo(v+R,S+T-k),_.quadraticCurveTo(v+R,S+T,v+R-k,S+T),_.lineTo(v+k,S+T),_.quadraticCurveTo(v,S+T,v,S+T-k),_.lineTo(v,S+k),_.quadraticCurveTo(v,S,v+k,S),_.closePath()}CRp$7.getTextAngle=function(_,v){var S,R=_._private,T=R.rscratch,A=v?v+"-":"",k=_.pstyle(A+"text-rotation");if(k.strValue==="autorotate"){var M=getPrefixedProperty(T,"labelAngle",v);S=_.isEdge()?M:0}else k.strValue==="none"?S=0:S=k.pfValue;return S};CRp$7.drawText=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=v._private,k=A.rscratch,M=T?v.effectiveOpacity():1;if(!(T&&(M===0||v.pstyle("text-opacity").value===0))){S==="main"&&(S=null);var P=getPrefixedProperty(k,"labelX",S),D=getPrefixedProperty(k,"labelY",S),L,q,B=this.getLabelText(v,S);if(B!=null&&B!==""&&!isNaN(P)&&!isNaN(D)){this.setupTextStyle(_,v,T);var F=S?S+"-":"",j=getPrefixedProperty(k,"labelWidth",S),z=getPrefixedProperty(k,"labelHeight",S),V=v.pstyle(F+"text-margin-x").pfValue,G=v.pstyle(F+"text-margin-y").pfValue,W=v.isEdge(),Y=v.pstyle("text-halign").value,X=v.pstyle("text-valign").value;W&&(Y="center",X="center"),P+=V,D+=G;var ee;switch(R?ee=this.getTextAngle(v,S):ee=0,ee!==0&&(L=P,q=D,_.translate(L,q),_.rotate(ee),P=0,D=0),X){case"top":break;case"center":D+=z/2;break;case"bottom":D+=z;break}var re=v.pstyle("text-background-opacity").value,Q=v.pstyle("text-border-opacity").value,ne=v.pstyle("text-border-width").pfValue,ae=v.pstyle("text-background-padding").pfValue,oe=v.pstyle("text-background-shape").strValue,se=oe==="round-rectangle"||oe==="roundrectangle",ce=oe==="circle",de=2;if(re>0||ne>0&&Q>0){var ye=_.fillStyle,we=_.strokeStyle,ge=_.lineWidth,ve=v.pstyle("text-background-color").value,be=v.pstyle("text-border-color").value,ke=v.pstyle("text-border-style").value,me=re>0,fe=ne>0&&Q>0,xe=P-ae;switch(Y){case"left":xe-=j;break;case"center":xe-=j/2;break}var Ae=D-z-ae,Se=j+2*ae,Me=z+2*ae;if(me&&(_.fillStyle="rgba(".concat(ve[0],",").concat(ve[1],",").concat(ve[2],",").concat(re*M,")")),fe&&(_.strokeStyle="rgba(".concat(be[0],",").concat(be[1],",").concat(be[2],",").concat(Q*M,")"),_.lineWidth=ne,_.setLineDash))switch(ke){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash([4,2]);break;case"double":_.lineWidth=ne/4,_.setLineDash([]);break;case"solid":default:_.setLineDash([]);break}if(se?(_.beginPath(),roundRect(_,xe,Ae,Se,Me,de)):ce?(_.beginPath(),circle(_,xe,Ae,Se,Me)):(_.beginPath(),_.rect(xe,Ae,Se,Me)),me&&_.fill(),fe&&_.stroke(),fe&&ke==="double"){var Oe=ne/2;_.beginPath(),se?roundRect(_,xe+Oe,Ae+Oe,Se-2*Oe,Me-2*Oe,de):_.rect(xe+Oe,Ae+Oe,Se-2*Oe,Me-2*Oe),_.stroke()}_.fillStyle=ye,_.strokeStyle=we,_.lineWidth=ge,_.setLineDash&&_.setLineDash([])}var Ce=2*v.pstyle("text-outline-width").pfValue;if(Ce>0&&(_.lineWidth=Ce),v.pstyle("text-wrap").value==="wrap"){var $e=getPrefixedProperty(k,"labelWrapCachedLines",S),Be=getPrefixedProperty(k,"labelLineHeight",S),Pe=j/2,De=this.getLabelJustification(v);switch(De==="auto"||(Y==="left"?De==="left"?P+=-j:De==="center"&&(P+=-Pe):Y==="center"?De==="left"?P+=-Pe:De==="right"&&(P+=Pe):Y==="right"&&(De==="center"?P+=Pe:De==="right"&&(P+=j))),X){case"top":D-=($e.length-1)*Be;break;case"center":case"bottom":D-=($e.length-1)*Be;break}for(var Le=0;Le<$e.length;Le++)Ce>0&&_.strokeText($e[Le],P,D),_.fillText($e[Le],P,D),D+=Be}else Ce>0&&_.strokeText(B,P,D),_.fillText(B,P,D);ee!==0&&(_.rotate(-ee),_.translate(-L,-q))}}};var CRp$6={};CRp$6.drawNode=function(_,v,S){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,k=this,M,P,D=v._private,L=D.rscratch,q=v.position();if(!(!number$1(q.x)||!number$1(q.y))&&!(A&&!v.visible())){var B=A?v.effectiveOpacity():1,F=k.usePaths(),j,z=!1,V=v.padding();M=v.width()+2*V,P=v.height()+2*V;var G;S&&(G=S,_.translate(-G.x1,-G.y1));for(var W=v.pstyle("background-image"),Y=W.value,X=new Array(Y.length),ee=new Array(Y.length),re=0,Q=0;Q<Y.length;Q++){var ne=Y[Q],ae=X[Q]=ne!=null&&ne!=="none";if(ae){var oe=v.cy().style().getIndexedStyle(v,"background-image-crossorigin","value",Q);re++,ee[Q]=k.getCachedImage(ne,oe,function(){D.backgroundTimestamp=Date.now(),v.emitAndNotify("background")})}}var se=v.pstyle("background-blacken").value,ce=v.pstyle("border-width").pfValue,de=v.pstyle("background-opacity").value*B,ye=v.pstyle("border-color").value,we=v.pstyle("border-style").value,ge=v.pstyle("border-join").value,ve=v.pstyle("border-cap").value,be=v.pstyle("border-position").value,ke=v.pstyle("border-dash-pattern").pfValue,me=v.pstyle("border-dash-offset").pfValue,fe=v.pstyle("border-opacity").value*B,xe=v.pstyle("outline-width").pfValue,Ae=v.pstyle("outline-color").value,Se=v.pstyle("outline-style").value,Me=v.pstyle("outline-opacity").value*B,Oe=v.pstyle("outline-offset").value,Ce=v.pstyle("corner-radius").value;Ce!=="auto"&&(Ce=v.pstyle("corner-radius").pfValue);var $e=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de;k.eleFillStyle(_,v,bt)},Be=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe;k.colorStrokeStyle(_,ye[0],ye[1],ye[2],bt)},Pe=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me;k.colorStrokeStyle(_,Ae[0],Ae[1],Ae[2],bt)},De=function(bt,et,Re,je){var Ue=k.nodePathCache=k.nodePathCache||[],Ze=hashStrings(Re==="polygon"?Re+","+je.join(","):Re,""+et,""+bt,""+Ce),nt=Ue[Ze],wt,lt=!1;return nt!=null?(wt=nt,lt=!0,L.pathCache=wt):(wt=new Path2D,Ue[Ze]=L.pathCache=wt),{path:wt,cacheHit:lt}},Le=v.pstyle("shape").strValue,Ne=v.pstyle("shape-polygon-points").pfValue;if(F){_.translate(q.x,q.y);var tt=De(M,P,Le,Ne);j=tt.path,z=tt.cacheHit}var it=function(){if(!z){var bt=q;F&&(bt={x:0,y:0}),k.nodeShapes[k.getNodeShape(v)].draw(j||_,bt.x,bt.y,M,P,Ce,L)}F?_.fill(j):_.fill()},dt=function(){for(var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Re=D.backgrounding,je=0,Ue=0;Ue<ee.length;Ue++){var Ze=v.cy().style().getIndexedStyle(v,"background-image-containment","value",Ue);if(et&&Ze==="over"||!et&&Ze==="inside"){je++;continue}X[Ue]&&ee[Ue].complete&&!ee[Ue].error&&(je++,k.drawInscribedImage(_,ee[Ue],v,Ue,bt))}D.backgrounding=je!==re,Re!==D.backgrounding&&v.updateStyle(!1)},pt=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B;k.hasPie(v)&&(k.drawPie(_,v,et),bt&&(F||k.nodeShapes[k.getNodeShape(v)].draw(_,q.x,q.y,M,P,Ce,L)))},We=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B;k.hasStripe(v)&&(_.save(),F?_.clip(L.pathCache):(k.nodeShapes[k.getNodeShape(v)].draw(_,q.x,q.y,M,P,Ce,L),_.clip()),k.drawStripe(_,v,et),_.restore(),bt&&(F||k.nodeShapes[k.getNodeShape(v)].draw(_,q.x,q.y,M,P,Ce,L)))},Et=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B,et=(se>0?se:-se)*bt,Re=se>0?0:255;se!==0&&(k.colorFillStyle(_,Re,Re,Re,et),F?_.fill(j):_.fill())},st=function(){if(ce>0){if(_.lineWidth=ce,_.lineCap=ve,_.lineJoin=ge,_.setLineDash)switch(we){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash(ke),_.lineDashOffset=me;break;case"solid":case"double":_.setLineDash([]);break}if(be!=="center"){if(_.save(),_.lineWidth*=2,be==="inside")F?_.clip(j):_.clip();else{var bt=new Path2D;bt.rect(-M/2-ce,-P/2-ce,M+2*ce,P+2*ce),bt.addPath(j),_.clip(bt,"evenodd")}F?_.stroke(j):_.stroke(),_.restore()}else F?_.stroke(j):_.stroke();if(we==="double"){_.lineWidth=ce/3;var et=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",F?_.stroke(j):_.stroke(),_.globalCompositeOperation=et}_.setLineDash&&_.setLineDash([])}},xt=function(){if(xe>0){if(_.lineWidth=xe,_.lineCap="butt",_.setLineDash)switch(Se){case"dotted":_.setLineDash([1,1]);break;case"dashed":_.setLineDash([4,2]);break;case"solid":case"double":_.setLineDash([]);break}var bt=q;F&&(bt={x:0,y:0});var et=k.getNodeShape(v),Re=ce;be==="inside"&&(Re=0),be==="outside"&&(Re*=2);var je=(M+Re+(xe+Oe))/M,Ue=(P+Re+(xe+Oe))/P,Ze=M*je,nt=P*Ue,wt=k.nodeShapes[et].points,lt;if(F){var Tt=De(Ze,nt,et,wt);lt=Tt.path}if(et==="ellipse")k.drawEllipsePath(lt||_,bt.x,bt.y,Ze,nt);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(et)){var Rt=0,Mt=0,$t=0;et==="round-diamond"?Rt=(Re+Oe+xe)*1.4:et==="round-heptagon"?(Rt=(Re+Oe+xe)*1.075,$t=-(Re/2+Oe+xe)/35):et==="round-hexagon"?Rt=(Re+Oe+xe)*1.12:et==="round-pentagon"?(Rt=(Re+Oe+xe)*1.13,$t=-(Re/2+Oe+xe)/15):et==="round-tag"?(Rt=(Re+Oe+xe)*1.12,Mt=(Re/2+xe+Oe)*.07):et==="round-triangle"&&(Rt=(Re+Oe+xe)*(Math.PI/2),$t=-(Re+Oe/2+xe)/Math.PI),Rt!==0&&(je=(M+Rt)/M,Ze=M*je,["round-hexagon","round-tag"].includes(et)||(Ue=(P+Rt)/P,nt=P*Ue)),Ce=Ce==="auto"?getRoundPolygonRadius(Ze,nt):Ce;for(var yt=Ze/2,vt=nt/2,Ot=Ce+(Re+xe+Oe)/2,It=new Array(wt.length/2),sr=new Array(wt.length/2),zt=0;zt<wt.length/2;zt++)It[zt]={x:bt.x+Mt+yt*wt[zt*2],y:bt.y+$t+vt*wt[zt*2+1]};var ur,hr,or,rr,wr=It.length;for(hr=It[wr-1],ur=0;ur<wr;ur++)or=It[ur%wr],rr=It[(ur+1)%wr],sr[ur]=getRoundCorner(hr,or,rr,Ot),hr=or,or=rr;k.drawRoundPolygonPath(lt||_,bt.x+Mt,bt.y+$t,M*je,P*Ue,wt,sr)}else if(["roundrectangle","round-rectangle"].includes(et))Ce=Ce==="auto"?getRoundRectangleRadius(Ze,nt):Ce,k.drawRoundRectanglePath(lt||_,bt.x,bt.y,Ze,nt,Ce+(Re+xe+Oe)/2);else if(["cutrectangle","cut-rectangle"].includes(et))Ce=Ce==="auto"?getCutRectangleCornerLength():Ce,k.drawCutRectanglePath(lt||_,bt.x,bt.y,Ze,nt,null,Ce+(Re+xe+Oe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(et))Ce=Ce==="auto"?getRoundRectangleRadius(Ze,nt):Ce,k.drawBottomRoundRectanglePath(lt||_,bt.x,bt.y,Ze,nt,Ce+(Re+xe+Oe)/2);else if(et==="barrel")k.drawBarrelPath(lt||_,bt.x,bt.y,Ze,nt);else if(et.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(et)){var qr=(Re+xe+Oe)/M;wt=joinLines(expandPolygon(wt,qr)),k.drawPolygonPath(lt||_,bt.x,bt.y,M,P,wt)}else{var _r=(Re+xe+Oe)/M;wt=joinLines(expandPolygon(wt,-_r)),k.drawPolygonPath(lt||_,bt.x,bt.y,M,P,wt)}if(F?_.stroke(lt):_.stroke(),Se==="double"){_.lineWidth=Re/3;var kn=_.globalCompositeOperation;_.globalCompositeOperation="destination-out",F?_.stroke(lt):_.stroke(),_.globalCompositeOperation=kn}_.setLineDash&&_.setLineDash([])}},gt=function(){T&&k.drawNodeOverlay(_,v,q,M,P)},_t=function(){T&&k.drawNodeUnderlay(_,v,q,M,P)},St=function(){k.drawElementText(_,v,null,R)},Lt=v.pstyle("ghost").value==="yes";if(Lt){var jt=v.pstyle("ghost-offset-x").pfValue,Gt=v.pstyle("ghost-offset-y").pfValue,At=v.pstyle("ghost-opacity").value,Nt=At*B;_.translate(jt,Gt),Pe(),xt(),$e(At*de),it(),dt(Nt,!0),Be(At*fe),st(),pt(se!==0||ce!==0),We(se!==0||ce!==0),dt(Nt,!1),Et(Nt),_.translate(-jt,-Gt)}F&&_.translate(-q.x,-q.y),_t(),F&&_.translate(q.x,q.y),Pe(),xt(),$e(),it(),dt(B,!0),Be(),st(),pt(se!==0||ce!==0),We(se!==0||ce!==0),dt(B,!1),Et(),F&&_.translate(-q.x,-q.y),St(),gt(),S&&_.translate(G.x1,G.y1)}};var drawNodeOverlayUnderlay=function(v){if(!["overlay","underlay"].includes(v))throw new Error("Invalid state");return function(S,R,T,A,k){var M=this;if(R.visible()){var P=R.pstyle("".concat(v,"-padding")).pfValue,D=R.pstyle("".concat(v,"-opacity")).value,L=R.pstyle("".concat(v,"-color")).value,q=R.pstyle("".concat(v,"-shape")).value,B=R.pstyle("".concat(v,"-corner-radius")).value;if(D>0){if(T=T||R.position(),A==null||k==null){var F=R.padding();A=R.width()+2*F,k=R.height()+2*F}M.colorFillStyle(S,L[0],L[1],L[2],D),M.nodeShapes[q].draw(S,T.x,T.y,A+P*2,k+P*2,B),S.fill()}}}};CRp$6.drawNodeOverlay=drawNodeOverlayUnderlay("overlay");CRp$6.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay");CRp$6.hasPie=function(_){return _=_[0],_._private.hasPie};CRp$6.hasStripe=function(_){return _=_[0],_._private.hasStripe};CRp$6.drawPie=function(_,v,S,R){v=v[0],R=R||v.position();var T=v.cy().style(),A=v.pstyle("pie-size"),k=v.pstyle("pie-hole"),M=v.pstyle("pie-start-angle").pfValue,P=R.x,D=R.y,L=v.width(),q=v.height(),B=Math.min(L,q)/2,F,j=0,z=this.usePaths();if(z&&(P=0,D=0),A.units==="%"?B=B*A.pfValue:A.pfValue!==void 0&&(B=A.pfValue/2),k.units==="%"?F=B*k.pfValue:k.pfValue!==void 0&&(F=k.pfValue/2),!(F>=B))for(var V=1;V<=T.pieBackgroundN;V++){var G=v.pstyle("pie-"+V+"-background-size").value,W=v.pstyle("pie-"+V+"-background-color").value,Y=v.pstyle("pie-"+V+"-background-opacity").value*S,X=G/100;X+j>1&&(X=1-j);var ee=1.5*Math.PI+2*Math.PI*j;ee+=M;var re=2*Math.PI*X,Q=ee+re;G===0||j>=1||j+X>1||(F===0?(_.beginPath(),_.moveTo(P,D),_.arc(P,D,B,ee,Q),_.closePath()):(_.beginPath(),_.arc(P,D,B,ee,Q),_.arc(P,D,F,Q,ee,!0),_.closePath()),this.colorFillStyle(_,W[0],W[1],W[2],Y),_.fill(),j+=X)}};CRp$6.drawStripe=function(_,v,S,R){v=v[0],R=R||v.position();var T=v.cy().style(),A=R.x,k=R.y,M=v.width(),P=v.height(),D=0,L=this.usePaths();_.save();var q=v.pstyle("stripe-direction").value,B=v.pstyle("stripe-size");switch(q){case"vertical":break;case"righward":_.rotate(-Math.PI/2);break}var F=M,j=P;B.units==="%"?(F=F*B.pfValue,j=j*B.pfValue):B.pfValue!==void 0&&(F=B.pfValue,j=B.pfValue),L&&(A=0,k=0),k-=F/2,A-=j/2;for(var z=1;z<=T.stripeBackgroundN;z++){var V=v.pstyle("stripe-"+z+"-background-size").value,G=v.pstyle("stripe-"+z+"-background-color").value,W=v.pstyle("stripe-"+z+"-background-opacity").value*S,Y=V/100;Y+D>1&&(Y=1-D),!(V===0||D>=1||D+Y>1)&&(_.beginPath(),_.rect(A,k+j*D,F,j*Y),_.closePath(),this.colorFillStyle(_,G[0],G[1],G[2],W),_.fill(),D+=Y)}_.restore()};var CRp$5={},motionBlurDelay=100;CRp$5.getPixelRatio=function(){var _=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var v=this.cy.window(),S=_.backingStorePixelRatio||_.webkitBackingStorePixelRatio||_.mozBackingStorePixelRatio||_.msBackingStorePixelRatio||_.oBackingStorePixelRatio||_.backingStorePixelRatio||1;return(v.devicePixelRatio||1)/S};CRp$5.paintCache=function(_){for(var v=this.paintCaches=this.paintCaches||[],S=!0,R,T=0;T<v.length;T++)if(R=v[T],R.context===_){S=!1;break}return S&&(R={context:_},v.push(R)),R};CRp$5.createGradientStyleFor=function(_,v,S,R,T){var A,k=this.usePaths(),M=S.pstyle(v+"-gradient-stop-colors").value,P=S.pstyle(v+"-gradient-stop-positions").pfValue;if(R==="radial-gradient")if(S.isEdge()){var D=S.sourceEndpoint(),L=S.targetEndpoint(),q=S.midpoint(),B=dist$1(D,q),F=dist$1(L,q);A=_.createRadialGradient(q.x,q.y,0,q.x,q.y,Math.max(B,F))}else{var j=k?{x:0,y:0}:S.position(),z=S.paddedWidth(),V=S.paddedHeight();A=_.createRadialGradient(j.x,j.y,0,j.x,j.y,Math.max(z,V))}else if(S.isEdge()){var G=S.sourceEndpoint(),W=S.targetEndpoint();A=_.createLinearGradient(G.x,G.y,W.x,W.y)}else{var Y=k?{x:0,y:0}:S.position(),X=S.paddedWidth(),ee=S.paddedHeight(),re=X/2,Q=ee/2,ne=S.pstyle("background-gradient-direction").value;switch(ne){case"to-bottom":A=_.createLinearGradient(Y.x,Y.y-Q,Y.x,Y.y+Q);break;case"to-top":A=_.createLinearGradient(Y.x,Y.y+Q,Y.x,Y.y-Q);break;case"to-left":A=_.createLinearGradient(Y.x+re,Y.y,Y.x-re,Y.y);break;case"to-right":A=_.createLinearGradient(Y.x-re,Y.y,Y.x+re,Y.y);break;case"to-bottom-right":case"to-right-bottom":A=_.createLinearGradient(Y.x-re,Y.y-Q,Y.x+re,Y.y+Q);break;case"to-top-right":case"to-right-top":A=_.createLinearGradient(Y.x-re,Y.y+Q,Y.x+re,Y.y-Q);break;case"to-bottom-left":case"to-left-bottom":A=_.createLinearGradient(Y.x+re,Y.y-Q,Y.x-re,Y.y+Q);break;case"to-top-left":case"to-left-top":A=_.createLinearGradient(Y.x+re,Y.y+Q,Y.x-re,Y.y-Q);break}}if(!A)return null;for(var ae=P.length===M.length,oe=M.length,se=0;se<oe;se++)A.addColorStop(ae?P[se]:se/(oe-1),"rgba("+M[se][0]+","+M[se][1]+","+M[se][2]+","+T+")");return A};CRp$5.gradientFillStyle=function(_,v,S,R){var T=this.createGradientStyleFor(_,"background",v,S,R);if(!T)return null;_.fillStyle=T};CRp$5.colorFillStyle=function(_,v,S,R,T){_.fillStyle="rgba("+v+","+S+","+R+","+T+")"};CRp$5.eleFillStyle=function(_,v,S){var R=v.pstyle("background-fill").value;if(R==="linear-gradient"||R==="radial-gradient")this.gradientFillStyle(_,v,R,S);else{var T=v.pstyle("background-color").value;this.colorFillStyle(_,T[0],T[1],T[2],S)}};CRp$5.gradientStrokeStyle=function(_,v,S,R){var T=this.createGradientStyleFor(_,"line",v,S,R);if(!T)return null;_.strokeStyle=T};CRp$5.colorStrokeStyle=function(_,v,S,R,T){_.strokeStyle="rgba("+v+","+S+","+R+","+T+")"};CRp$5.eleStrokeStyle=function(_,v,S){var R=v.pstyle("line-fill").value;if(R==="linear-gradient"||R==="radial-gradient")this.gradientStrokeStyle(_,v,R,S);else{var T=v.pstyle("line-color").value;this.colorStrokeStyle(_,T[0],T[1],T[2],S)}};CRp$5.matchCanvasSize=function(_){var v=this,S=v.data,R=v.findContainerClientCoords(),T=R[2],A=R[3],k=v.getPixelRatio(),M=v.motionBlurPxRatio;(_===v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_NODE]||_===v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_DRAG])&&(k=M);var P=T*k,D=A*k,L;if(!(P===v.canvasWidth&&D===v.canvasHeight)){v.fontCaches=null;var q=S.canvasContainer;q.style.width=T+"px",q.style.height=A+"px";for(var B=0;B<v.CANVAS_LAYERS;B++)L=S.canvases[B],L.width=P,L.height=D,L.style.width=T+"px",L.style.height=A+"px";for(var B=0;B<v.BUFFER_COUNT;B++)L=S.bufferCanvases[B],L.width=P,L.height=D,L.style.width=T+"px",L.style.height=A+"px";v.textureMult=1,k<=1&&(L=S.bufferCanvases[v.TEXTURE_BUFFER],v.textureMult=2,L.width=P*v.textureMult,L.height=D*v.textureMult),v.canvasWidth=P,v.canvasHeight=D,v.pixelRatio=k}};CRp$5.renderTo=function(_,v,S,R){this.render({forcedContext:_,forcedZoom:v,forcedPan:S,drawAllLayers:!0,forcedPxRatio:R})};CRp$5.clearCanvas=function(){var _=this,v=_.data;function S(R){R.clearRect(0,0,_.canvasWidth,_.canvasHeight)}S(v.contexts[_.NODE]),S(v.contexts[_.DRAG])};CRp$5.render=function(_){var v=this;_=_||staticEmptyObject();var S=v.cy,R=_.forcedContext,T=_.drawAllLayers,A=_.drawOnlyNodeLayer,k=_.forcedZoom,M=_.forcedPan,P=_.forcedPxRatio===void 0?this.getPixelRatio():_.forcedPxRatio,D=v.data,L=D.canvasNeedsRedraw,q=v.textureOnViewport&&!R&&(v.pinching||v.hoverData.dragging||v.swipePanning||v.data.wheelZooming),B=_.motionBlur!==void 0?_.motionBlur:v.motionBlur,F=v.motionBlurPxRatio,j=S.hasCompoundNodes(),z=v.hoverData.draggingEles,V=!!(v.hoverData.selecting||v.touchData.selecting);B=B&&!R&&v.motionBlurEnabled&&!V;var G=B;R||(v.prevPxRatio!==P&&(v.invalidateContainerClientCoordsCache(),v.matchCanvasSize(v.container),v.redrawHint("eles",!0),v.redrawHint("drag",!0)),v.prevPxRatio=P),!R&&v.motionBlurTimeout&&clearTimeout(v.motionBlurTimeout),B&&(v.mbFrames==null&&(v.mbFrames=0),v.mbFrames++,v.mbFrames<3&&(G=!1),v.mbFrames>v.minMbLowQualFrames&&(v.motionBlurPxRatio=v.mbPxRBlurry)),v.clearingMotionBlur&&(v.motionBlurPxRatio=1),v.textureDrawLastFrame&&!q&&(L[v.NODE]=!0,L[v.SELECT_BOX]=!0);var W=S.style(),Y=S.zoom(),X=k!==void 0?k:Y,ee=S.pan(),re={x:ee.x,y:ee.y},Q={zoom:Y,pan:{x:ee.x,y:ee.y}},ne=v.prevViewport,ae=ne===void 0||Q.zoom!==ne.zoom||Q.pan.x!==ne.pan.x||Q.pan.y!==ne.pan.y;!ae&&!(z&&!j)&&(v.motionBlurPxRatio=1),M&&(re=M),X*=P,re.x*=P,re.y*=P;var oe=v.getCachedZSortedEles();function se(Be,Pe,De,Le,Ne){var tt=Be.globalCompositeOperation;Be.globalCompositeOperation="destination-out",v.colorFillStyle(Be,255,255,255,v.motionBlurTransparency),Be.fillRect(Pe,De,Le,Ne),Be.globalCompositeOperation=tt}function ce(Be,Pe){var De,Le,Ne,tt;!v.clearingMotionBlur&&(Be===D.bufferContexts[v.MOTIONBLUR_BUFFER_NODE]||Be===D.bufferContexts[v.MOTIONBLUR_BUFFER_DRAG])?(De={x:ee.x*F,y:ee.y*F},Le=Y*F,Ne=v.canvasWidth*F,tt=v.canvasHeight*F):(De=re,Le=X,Ne=v.canvasWidth,tt=v.canvasHeight),Be.setTransform(1,0,0,1,0,0),Pe==="motionBlur"?se(Be,0,0,Ne,tt):!R&&(Pe===void 0||Pe)&&Be.clearRect(0,0,Ne,tt),T||(Be.translate(De.x,De.y),Be.scale(Le,Le)),M&&Be.translate(M.x,M.y),k&&Be.scale(k,k)}if(q||(v.textureDrawLastFrame=!1),q){if(v.textureDrawLastFrame=!0,!v.textureCache){v.textureCache={},v.textureCache.bb=S.mutableElements().boundingBox(),v.textureCache.texture=v.data.bufferCanvases[v.TEXTURE_BUFFER];var de=v.data.bufferContexts[v.TEXTURE_BUFFER];de.setTransform(1,0,0,1,0,0),de.clearRect(0,0,v.canvasWidth*v.textureMult,v.canvasHeight*v.textureMult),v.render({forcedContext:de,drawOnlyNodeLayer:!0,forcedPxRatio:P*v.textureMult});var Q=v.textureCache.viewport={zoom:S.zoom(),pan:S.pan(),width:v.canvasWidth,height:v.canvasHeight};Q.mpan={x:(0-Q.pan.x)/Q.zoom,y:(0-Q.pan.y)/Q.zoom}}L[v.DRAG]=!1,L[v.NODE]=!1;var ye=D.contexts[v.NODE],we=v.textureCache.texture,Q=v.textureCache.viewport;ye.setTransform(1,0,0,1,0,0),B?se(ye,0,0,Q.width,Q.height):ye.clearRect(0,0,Q.width,Q.height);var ge=W.core("outside-texture-bg-color").value,ve=W.core("outside-texture-bg-opacity").value;v.colorFillStyle(ye,ge[0],ge[1],ge[2],ve),ye.fillRect(0,0,Q.width,Q.height);var Y=S.zoom();ce(ye,!1),ye.clearRect(Q.mpan.x,Q.mpan.y,Q.width/Q.zoom/P,Q.height/Q.zoom/P),ye.drawImage(we,Q.mpan.x,Q.mpan.y,Q.width/Q.zoom/P,Q.height/Q.zoom/P)}else v.textureOnViewport&&!R&&(v.textureCache=null);var be=S.extent(),ke=v.pinching||v.hoverData.dragging||v.swipePanning||v.data.wheelZooming||v.hoverData.draggingEles||v.cy.animated(),me=v.hideEdgesOnViewport&&ke,fe=[];if(fe[v.NODE]=!L[v.NODE]&&B&&!v.clearedForMotionBlur[v.NODE]||v.clearingMotionBlur,fe[v.NODE]&&(v.clearedForMotionBlur[v.NODE]=!0),fe[v.DRAG]=!L[v.DRAG]&&B&&!v.clearedForMotionBlur[v.DRAG]||v.clearingMotionBlur,fe[v.DRAG]&&(v.clearedForMotionBlur[v.DRAG]=!0),L[v.NODE]||T||A||fe[v.NODE]){var xe=B&&!fe[v.NODE]&&F!==1,ye=R||(xe?v.data.bufferContexts[v.MOTIONBLUR_BUFFER_NODE]:D.contexts[v.NODE]),Ae=B&&!xe?"motionBlur":void 0;ce(ye,Ae),me?v.drawCachedNodes(ye,oe.nondrag,P,be):v.drawLayeredElements(ye,oe.nondrag,P,be),v.debug&&v.drawDebugPoints(ye,oe.nondrag),!T&&!B&&(L[v.NODE]=!1)}if(!A&&(L[v.DRAG]||T||fe[v.DRAG])){var xe=B&&!fe[v.DRAG]&&F!==1,ye=R||(xe?v.data.bufferContexts[v.MOTIONBLUR_BUFFER_DRAG]:D.contexts[v.DRAG]);ce(ye,B&&!xe?"motionBlur":void 0),me?v.drawCachedNodes(ye,oe.drag,P,be):v.drawCachedElements(ye,oe.drag,P,be),v.debug&&v.drawDebugPoints(ye,oe.drag),!T&&!B&&(L[v.DRAG]=!1)}if(this.drawSelectionRectangle(_,ce),B&&F!==1){var Se=D.contexts[v.NODE],Me=v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_NODE],Oe=D.contexts[v.DRAG],Ce=v.data.bufferCanvases[v.MOTIONBLUR_BUFFER_DRAG],$e=function(Pe,De,Le){Pe.setTransform(1,0,0,1,0,0),Le||!G?Pe.clearRect(0,0,v.canvasWidth,v.canvasHeight):se(Pe,0,0,v.canvasWidth,v.canvasHeight);var Ne=F;Pe.drawImage(De,0,0,v.canvasWidth*Ne,v.canvasHeight*Ne,0,0,v.canvasWidth,v.canvasHeight)};(L[v.NODE]||fe[v.NODE])&&($e(Se,Me,fe[v.NODE]),L[v.NODE]=!1),(L[v.DRAG]||fe[v.DRAG])&&($e(Oe,Ce,fe[v.DRAG]),L[v.DRAG]=!1)}v.prevViewport=Q,v.clearingMotionBlur&&(v.clearingMotionBlur=!1,v.motionBlurCleared=!0,v.motionBlur=!0),B&&(v.motionBlurTimeout=setTimeout(function(){v.motionBlurTimeout=null,v.clearedForMotionBlur[v.NODE]=!1,v.clearedForMotionBlur[v.DRAG]=!1,v.motionBlur=!1,v.clearingMotionBlur=!q,v.mbFrames=0,L[v.NODE]=!0,L[v.DRAG]=!0,v.redraw()},motionBlurDelay)),R||S.emit("render")};var fpsHeight;CRp$5.drawSelectionRectangle=function(_,v){var S=this,R=S.cy,T=S.data,A=R.style(),k=_.drawOnlyNodeLayer,M=_.drawAllLayers,P=T.canvasNeedsRedraw,D=_.forcedContext;if(S.showFps||!k&&P[S.SELECT_BOX]&&!M){var L=D||T.contexts[S.SELECT_BOX];if(v(L),S.selection[4]==1&&(S.hoverData.selecting||S.touchData.selecting)){var q=S.cy.zoom(),B=A.core("selection-box-border-width").value/q;L.lineWidth=B,L.fillStyle="rgba("+A.core("selection-box-color").value[0]+","+A.core("selection-box-color").value[1]+","+A.core("selection-box-color").value[2]+","+A.core("selection-box-opacity").value+")",L.fillRect(S.selection[0],S.selection[1],S.selection[2]-S.selection[0],S.selection[3]-S.selection[1]),B>0&&(L.strokeStyle="rgba("+A.core("selection-box-border-color").value[0]+","+A.core("selection-box-border-color").value[1]+","+A.core("selection-box-border-color").value[2]+","+A.core("selection-box-opacity").value+")",L.strokeRect(S.selection[0],S.selection[1],S.selection[2]-S.selection[0],S.selection[3]-S.selection[1]))}if(T.bgActivePosistion&&!S.hoverData.selecting){var q=S.cy.zoom(),F=T.bgActivePosistion;L.fillStyle="rgba("+A.core("active-bg-color").value[0]+","+A.core("active-bg-color").value[1]+","+A.core("active-bg-color").value[2]+","+A.core("active-bg-opacity").value+")",L.beginPath(),L.arc(F.x,F.y,A.core("active-bg-size").pfValue/q,0,2*Math.PI),L.fill()}var j=S.lastRedrawTime;if(S.showFps&&j){j=Math.round(j);var z=Math.round(1e3/j),V="1 frame = "+j+" ms = "+z+" fps";if(L.setTransform(1,0,0,1,0,0),L.fillStyle="rgba(255, 0, 0, 0.75)",L.strokeStyle="rgba(255, 0, 0, 0.75)",L.font="30px Arial",!fpsHeight){var G=L.measureText(V);fpsHeight=G.actualBoundingBoxAscent}L.fillText(V,0,fpsHeight);var W=60;L.strokeRect(0,fpsHeight+10,250,20),L.fillRect(0,fpsHeight+10,250*Math.min(z/W,1),20)}M||(P[S.SELECT_BOX]=!1)}};function compileShader(_,v,S){var R=_.createShader(v);if(_.shaderSource(R,S),_.compileShader(R),!_.getShaderParameter(R,_.COMPILE_STATUS))throw new Error(_.getShaderInfoLog(R));return R}function createProgram(_,v,S){var R=compileShader(_,_.VERTEX_SHADER,v),T=compileShader(_,_.FRAGMENT_SHADER,S),A=_.createProgram();if(_.attachShader(A,R),_.attachShader(A,T),_.linkProgram(A),!_.getProgramParameter(A,_.LINK_STATUS))throw new Error("Could not initialize shaders");return A}function createTextureCanvas(_,v,S){S===void 0&&(S=v);var R=_.makeOffscreenCanvas(v,S),T=R.context=R.getContext("2d");return R.clear=function(){return T.clearRect(0,0,R.width,R.height)},R.clear(),R}function getEffectivePanZoom(_){var v=_.pixelRatio,S=_.cy.zoom(),R=_.cy.pan();return{zoom:S*v,pan:{x:R.x*v,y:R.y*v}}}function getEffectiveZoom(_){var v=_.pixelRatio,S=_.cy.zoom();return S*v}function modelToRenderedPosition(_,v,S,R,T){var A=R*S+v.x,k=T*S+v.y;return k=Math.round(_.canvasHeight-k),[A,k]}function isSimpleShape(_){return _.pstyle("background-fill").value!=="solid"||_.pstyle("background-image").strValue!=="none"?!1:_.pstyle("border-width").value===0||_.pstyle("border-opacity").value===0?!0:_.pstyle("border-style").value==="solid"}function arrayEqual(_,v){if(_.length!==v.length)return!1;for(var S=0;S<_.length;S++)if(_[S]!==v[S])return!1;return!0}function toWebGLColor(_,v,S){var R=_[0]/255,T=_[1]/255,A=_[2]/255,k=v,M=S||new Array(4);return M[0]=R*k,M[1]=T*k,M[2]=A*k,M[3]=k,M}function indexToVec4(_,v){var S=v||new Array(4);return S[0]=(_>>0&255)/255,S[1]=(_>>8&255)/255,S[2]=(_>>16&255)/255,S[3]=(_>>24&255)/255,S}function vec4ToIndex(_){return _[0]+(_[1]<<8)+(_[2]<<16)+(_[3]<<24)}function createTexture(_,v){var S=_.createTexture();return S.buffer=function(R){_.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR_MIPMAP_NEAREST),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,R),_.generateMipmap(_.TEXTURE_2D),_.bindTexture(_.TEXTURE_2D,null)},S.deleteTexture=function(){_.deleteTexture(S)},S}function getTypeInfo(_,v){switch(v){case"float":return[1,_.FLOAT,4];case"vec2":return[2,_.FLOAT,4];case"vec3":return[3,_.FLOAT,4];case"vec4":return[4,_.FLOAT,4];case"int":return[1,_.INT,4];case"ivec2":return[2,_.INT,4]}}function createTypedArray(_,v,S){switch(v){case _.FLOAT:return new Float32Array(S);case _.INT:return new Int32Array(S)}}function createTypedArrayView(_,v,S,R,T,A){switch(v){case _.FLOAT:return new Float32Array(S.buffer,A*R,T);case _.INT:return new Int32Array(S.buffer,A*R,T)}}function createBufferStaticDraw(_,v,S,R){var T=getTypeInfo(_,v),A=_slicedToArray(T,2),k=A[0],M=A[1],P=createTypedArray(_,M,R),D=_.createBuffer();return _.bindBuffer(_.ARRAY_BUFFER,D),_.bufferData(_.ARRAY_BUFFER,P,_.STATIC_DRAW),M===_.FLOAT?_.vertexAttribPointer(S,k,M,!1,0,0):M===_.INT&&_.vertexAttribIPointer(S,k,M,0,0),_.enableVertexAttribArray(S),_.bindBuffer(_.ARRAY_BUFFER,null),D}function createBufferDynamicDraw(_,v,S,R){var T=getTypeInfo(_,S),A=_slicedToArray(T,3),k=A[0],M=A[1],P=A[2],D=createTypedArray(_,M,v*k),L=k*P,q=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,q),_.bufferData(_.ARRAY_BUFFER,v*L,_.DYNAMIC_DRAW),_.enableVertexAttribArray(R),M===_.FLOAT?_.vertexAttribPointer(R,k,M,!1,L,0):M===_.INT&&_.vertexAttribIPointer(R,k,M,L,0),_.vertexAttribDivisor(R,1),_.bindBuffer(_.ARRAY_BUFFER,null);for(var B=new Array(v),F=0;F<v;F++)B[F]=createTypedArrayView(_,M,D,L,k,F);return q.dataArray=D,q.stride=L,q.size=k,q.getView=function(j){return B[j]},q.setPoint=function(j,z,V){var G=B[j];G[0]=z,G[1]=V},q.bufferSubData=function(j){_.bindBuffer(_.ARRAY_BUFFER,q),j?_.bufferSubData(_.ARRAY_BUFFER,0,D,0,j*k):_.bufferSubData(_.ARRAY_BUFFER,0,D)},q}function create3x3MatrixBufferDynamicDraw(_,v,S){for(var R=9,T=new Float32Array(v*R),A=new Array(v),k=0;k<v;k++){var M=k*R*4;A[k]=new Float32Array(T.buffer,M,R)}var P=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,P),_.bufferData(_.ARRAY_BUFFER,T.byteLength,_.DYNAMIC_DRAW);for(var D=0;D<3;D++){var L=S+D;_.enableVertexAttribArray(L),_.vertexAttribPointer(L,3,_.FLOAT,!1,36,D*12),_.vertexAttribDivisor(L,1)}return _.bindBuffer(_.ARRAY_BUFFER,null),P.getMatrixView=function(q){return A[q]},P.setData=function(q,B){A[B].set(q,0)},P.bufferSubData=function(){_.bindBuffer(_.ARRAY_BUFFER,P),_.bufferSubData(_.ARRAY_BUFFER,0,T)},P}function createPickingFrameBuffer(_){var v=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,v);var S=_.createTexture();return _.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,S,0),_.bindFramebuffer(_.FRAMEBUFFER,null),v.setFramebufferAttachmentSizes=function(R,T){_.bindTexture(_.TEXTURE_2D,S),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,R,T,0,_.RGBA,_.UNSIGNED_BYTE,null)},v}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var _=0,v=arguments.length;v--;)_+=arguments[v]*arguments[v];return Math.sqrt(_)});function create(){var _=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_}function identity(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=1,_[5]=0,_[6]=0,_[7]=0,_[8]=1,_}function multiply(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],M=v[4],P=v[5],D=v[6],L=v[7],q=v[8],B=S[0],F=S[1],j=S[2],z=S[3],V=S[4],G=S[5],W=S[6],Y=S[7],X=S[8];return _[0]=B*R+F*k+j*D,_[1]=B*T+F*M+j*L,_[2]=B*A+F*P+j*q,_[3]=z*R+V*k+G*D,_[4]=z*T+V*M+G*L,_[5]=z*A+V*P+G*q,_[6]=W*R+Y*k+X*D,_[7]=W*T+Y*M+X*L,_[8]=W*A+Y*P+X*q,_}function translate(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],M=v[4],P=v[5],D=v[6],L=v[7],q=v[8],B=S[0],F=S[1];return _[0]=R,_[1]=T,_[2]=A,_[3]=k,_[4]=M,_[5]=P,_[6]=B*R+F*k+D,_[7]=B*T+F*M+L,_[8]=B*A+F*P+q,_}function rotate(_,v,S){var R=v[0],T=v[1],A=v[2],k=v[3],M=v[4],P=v[5],D=v[6],L=v[7],q=v[8],B=Math.sin(S),F=Math.cos(S);return _[0]=F*R+B*k,_[1]=F*T+B*M,_[2]=F*A+B*P,_[3]=F*k-B*R,_[4]=F*M-B*T,_[5]=F*P-B*A,_[6]=D,_[7]=L,_[8]=q,_}function scale(_,v,S){var R=S[0],T=S[1];return _[0]=R*v[0],_[1]=R*v[1],_[2]=R*v[2],_[3]=T*v[3],_[4]=T*v[4],_[5]=T*v[5],_[6]=v[6],_[7]=v[7],_[8]=v[8],_}function projection(_,v,S){return _[0]=2/v,_[1]=0,_[2]=0,_[3]=0,_[4]=-2/S,_[5]=0,_[6]=-1,_[7]=1,_[8]=1,_}var Atlas=(function(){function _(v,S,R,T){_classCallCheck(this,_),this.debugID=Math.floor(Math.random()*1e4),this.r=v,this.texSize=S,this.texRows=R,this.texHeight=Math.floor(S/R),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=T(v,S,S),this.scratch=T(v,S,this.texHeight,"scratch")}return _createClass(_,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(S){var R=S.w,T=S.h,A=this.texHeight,k=this.texSize,M=A/T,P=R*M,D=T*M;return P>k&&(M=k/R,P=R*M,D=T*M),{scale:M,texW:P,texH:D}}},{key:"draw",value:function(S,R,T){var A=this;if(this.locked)throw new Error("can't draw, atlas is locked");var k=this.texSize,M=this.texRows,P=this.texHeight,D=this.getScale(R),L=D.scale,q=D.texW,B=D.texH,F=function(Y,X){if(T&&X){var ee=X.context,re=Y.x,Q=Y.row,ne=re,ae=P*Q;ee.save(),ee.translate(ne,ae),ee.scale(L,L),T(ee,R),ee.restore()}},j=[null,null],z=function(){F(A.freePointer,A.canvas),j[0]={x:A.freePointer.x,y:A.freePointer.row*P,w:q,h:B},j[1]={x:A.freePointer.x+q,y:A.freePointer.row*P,w:0,h:B},A.freePointer.x+=q,A.freePointer.x==k&&(A.freePointer.x=0,A.freePointer.row++)},V=function(){var Y=A.scratch,X=A.canvas;Y.clear(),F({x:0,row:0},Y);var ee=k-A.freePointer.x,re=q-ee,Q=P;{var ne=A.freePointer.x,ae=A.freePointer.row*P,oe=ee;X.context.drawImage(Y,0,0,oe,Q,ne,ae,oe,Q),j[0]={x:ne,y:ae,w:oe,h:B}}{var se=ee,ce=(A.freePointer.row+1)*P,de=re;X&&X.context.drawImage(Y,se,0,de,Q,0,ce,de,Q),j[1]={x:0,y:ce,w:de,h:B}}A.freePointer.x=re,A.freePointer.row++},G=function(){A.freePointer.x=0,A.freePointer.row++};if(this.freePointer.x+q<=k)z();else{if(this.freePointer.row>=M-1)return!1;this.freePointer.x===k?(G(),z()):this.enableWrapping?V():(G(),z())}return this.keyToLocation.set(S,j),this.needsBuffer=!0,j}},{key:"getOffsets",value:function(S){return this.keyToLocation.get(S)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(S){if(this.locked)return!1;var R=this.texSize,T=this.texRows,A=this.getScale(S),k=A.texW;return this.freePointer.x+k>R?this.freePointer.row<T-1:!0}},{key:"bufferIfNeeded",value:function(S){this.texture||(this.texture=createTexture(S,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),AtlasCollection=(function(){function _(v,S,R,T){_classCallCheck(this,_),this.r=v,this.texSize=S,this.texRows=R,this.createTextureCanvas=T,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return _createClass(_,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var S=this.r,R=this.texSize,T=this.texRows,A=this.createTextureCanvas;return new Atlas(S,R,T,A)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var S=this.r,R=this.texSize,T=this.texRows,A=this.createTextureCanvas,k=Math.floor(R/T);this.scratch=A(S,R,k,"scratch")}return this.scratch}},{key:"draw",value:function(S,R,T){var A=this.styleKeyToAtlas.get(S);return A||(A=this.atlases[this.atlases.length-1],(!A||!A.canFit(R))&&(A&&A.lock(),A=this._createAtlas(),this.atlases.push(A)),A.draw(S,R,T),this.styleKeyToAtlas.set(S,A)),A}},{key:"getAtlas",value:function(S){return this.styleKeyToAtlas.get(S)}},{key:"hasAtlas",value:function(S){return this.styleKeyToAtlas.has(S)}},{key:"markKeyForGC",value:function(S){this.markedKeys.add(S)}},{key:"gc",value:function(){var S=this,R=this.markedKeys;if(R.size===0){console.log("nothing to garbage collect");return}var T=[],A=new Map,k=null,M=_createForOfIteratorHelper(this.atlases),P;try{var D=function(){var q=P.value,B=q.getKeys(),F=intersection(R,B);if(F.size===0)return T.push(q),B.forEach(function(ee){return A.set(ee,q)}),1;k||(k=S._createAtlas(),T.push(k));var j=_createForOfIteratorHelper(B),z;try{for(j.s();!(z=j.n()).done;){var V=z.value;if(!F.has(V)){var G=q.getOffsets(V),W=_slicedToArray(G,2),Y=W[0],X=W[1];k.canFit({w:Y.w+X.w,h:Y.h})||(k.lock(),k=S._createAtlas(),T.push(k)),q.canvas&&(S._copyTextureToNewAtlas(V,q,k),A.set(V,k))}}}catch(ee){j.e(ee)}finally{j.f()}q.dispose()};for(M.s();!(P=M.n()).done;)D()}catch(L){M.e(L)}finally{M.f()}this.atlases=T,this.styleKeyToAtlas=A,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(S,R,T){var A=R.getOffsets(S),k=_slicedToArray(A,2),M=k[0],P=k[1];if(P.w===0)T.draw(S,M,function(B){B.drawImage(R.canvas,M.x,M.y,M.w,M.h,0,0,M.w,M.h)});else{var D=this._getScratchCanvas();D.clear(),D.context.drawImage(R.canvas,M.x,M.y,M.w,M.h,0,0,M.w,M.h),D.context.drawImage(R.canvas,P.x,P.y,P.w,P.h,M.w,0,P.w,P.h);var L=M.w+P.w,q=M.h;T.draw(S,{w:L,h:q},function(B){B.drawImage(D,0,0,L,q,0,0,L,q)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function intersection(_,v){return _.intersection?_.intersection(v):new Set(_toConsumableArray(_).filter(function(S){return v.has(S)}))}var AtlasManager=(function(){function _(v,S){_classCallCheck(this,_),this.r=v,this.globalOptions=S,this.atlasSize=S.webglTexSize,this.maxAtlasesPerBatch=S.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return _createClass(_,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(S,R){var T=this.globalOptions,A=T.webglTexSize,k=T.createTextureCanvas,M=R.texRows,P=this._cacheScratchCanvas(k),D=new AtlasCollection(this.r,A,M,P);this.collections.set(S,D)}},{key:"addRenderType",value:function(S,R){var T=R.collection;if(!this.collections.has(T))throw new Error("invalid atlas collection name '".concat(T,"'"));var A=this.collections.get(T),k=extend({type:S,atlasCollection:A},R);this.renderTypes.set(S,k)}},{key:"getRenderTypeOpts",value:function(S){return this.renderTypes.get(S)}},{key:"getAtlasCollection",value:function(S){return this.collections.get(S)}},{key:"_cacheScratchCanvas",value:function(S){var R=-1,T=-1,A=null;return function(k,M,P,D){return D?((!A||M!=R||P!=T)&&(R=M,T=P,A=S(k,M,P)),A):S(k,M,P)}}},{key:"_key",value:function(S,R){return"".concat(S,"-").concat(R)}},{key:"invalidate",value:function(S){var R=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=T.forceRedraw,k=A===void 0?!1:A,M=T.filterEle,P=M===void 0?function(){return!0}:M,D=T.filterType,L=D===void 0?function(){return!0}:D,q=!1,B=!1,F=_createForOfIteratorHelper(S),j;try{for(F.s();!(j=F.n()).done;){var z=j.value;if(P(z)){var V=_createForOfIteratorHelper(this.renderTypes.values()),G;try{var W=function(){var X=G.value,ee=X.type;if(L(ee)){var re=R.collections.get(X.collection),Q=X.getKey(z),ne=Array.isArray(Q)?Q:[Q];if(k)ne.forEach(function(ce){return re.markKeyForGC(ce)}),B=!0;else{var ae=X.getID?X.getID(z):z.id(),oe=R._key(ee,ae),se=R.typeAndIdToKey.get(oe);se!==void 0&&!arrayEqual(ne,se)&&(q=!0,R.typeAndIdToKey.delete(oe),se.forEach(function(ce){return re.markKeyForGC(ce)}))}}};for(V.s();!(G=V.n()).done;)W()}catch(Y){V.e(Y)}finally{V.f()}}}}catch(Y){F.e(Y)}finally{F.f()}return B&&(this.gc(),q=!1),q}},{key:"gc",value:function(){var S=_createForOfIteratorHelper(this.collections.values()),R;try{for(S.s();!(R=S.n()).done;){var T=R.value;T.gc()}}catch(A){S.e(A)}finally{S.f()}}},{key:"getOrCreateAtlas",value:function(S,R,T,A){var k=this.renderTypes.get(R),M=this.collections.get(k.collection),P=!1,D=M.draw(A,T,function(B){k.drawClipped?(B.save(),B.beginPath(),B.rect(0,0,T.w,T.h),B.clip(),k.drawElement(B,S,T,!0,!0),B.restore()):k.drawElement(B,S,T,!0,!0),P=!0});if(P){var L=k.getID?k.getID(S):S.id(),q=this._key(R,L);this.typeAndIdToKey.has(q)?this.typeAndIdToKey.get(q).push(A):this.typeAndIdToKey.set(q,[A])}return D}},{key:"getAtlasInfo",value:function(S,R){var T=this,A=this.renderTypes.get(R),k=A.getKey(S),M=Array.isArray(k)?k:[k];return M.map(function(P){var D=A.getBoundingBox(S,P),L=T.getOrCreateAtlas(S,R,D,P),q=L.getOffsets(P),B=_slicedToArray(q,2),F=B[0],j=B[1];return{atlas:L,tex:F,tex1:F,tex2:j,bb:D}})}},{key:"getDebugInfo",value:function(){var S=[],R=_createForOfIteratorHelper(this.collections),T;try{for(R.s();!(T=R.n()).done;){var A=_slicedToArray(T.value,2),k=A[0],M=A[1],P=M.getCounts(),D=P.keyCount,L=P.atlasCount;S.push({type:k,keyCount:D,atlasCount:L})}}catch(q){R.e(q)}finally{R.f()}return S}}])})(),AtlasBatchManager=(function(){function _(v){_classCallCheck(this,_),this.globalOptions=v,this.atlasSize=v.webglTexSize,this.maxAtlasesPerBatch=v.webglTexPerBatch,this.batchAtlases=[]}return _createClass(_,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(S,R){return R})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(S){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(S):!0}},{key:"getAtlasIndexForBatch",value:function(S){var R=this.batchAtlases.indexOf(S);if(R<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(S),R=this.batchAtlases.length-1}return R}}])})(),circleSD=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,rectangleSD=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,roundRectangleSD=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,ellipseSD=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,RENDER_TARGET={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},TEX_PICKING_MODE={IGNORE:1,USE_BB:2},TEXTURE=0,EDGE_STRAIGHT=1,EDGE_CURVE_SEGMENT=2,EDGE_ARROW=3,RECTANGLE=4,ROUND_RECTANGLE=5,BOTTOM_ROUND_RECTANGLE=6,ELLIPSE=7,ElementDrawingWebGL=(function(){function _(v,S,R){_classCallCheck(this,_),this.r=v,this.gl=S,this.maxInstances=R.webglBatchSize,this.atlasSize=R.webglTexSize,this.bgColor=R.bgColor,this.debug=R.webglDebug,this.batchDebugInfo=[],R.enableWrapping=!0,R.createTextureCanvas=createTextureCanvas,this.atlasManager=new AtlasManager(v,R),this.batchManager=new AtlasBatchManager(R),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(RENDER_TARGET.SCREEN),this.pickingProgram=this._createShaderProgram(RENDER_TARGET.PICKING),this.vao=this._createVAO()}return _createClass(_,[{key:"addAtlasCollection",value:function(S,R){this.atlasManager.addAtlasCollection(S,R)}},{key:"addTextureAtlasRenderType",value:function(S,R){this.atlasManager.addRenderType(S,R)}},{key:"addSimpleShapeRenderType",value:function(S,R){this.simpleShapeOptions.set(S,R)}},{key:"invalidate",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=R.type,A=this.atlasManager;return T?A.invalidate(S,{filterType:function(M){return M===T},forceRedraw:!0}):A.invalidate(S)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(S){var R=this.gl,T=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(TEXTURE,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(RECTANGLE," || aVertType == ").concat(ELLIPSE,` 
             || aVertType == `).concat(ROUND_RECTANGLE," || aVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(EDGE_STRAIGHT,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_CURVE_SEGMENT,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_ARROW,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),A=this.batchManager.getIndexArray(),k=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(A.map(function(D){return"uniform sampler2D uTexture".concat(D,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(circleSD,`
      `).concat(rectangleSD,`
      `).concat(roundRectangleSD,`
      `).concat(ellipseSD,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(TEXTURE,`) {
          // look up the texel from the texture unit
          `).concat(A.map(function(D){return"if(vAtlasId == ".concat(D,") outColor = texture(uTexture").concat(D,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(EDGE_ARROW,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(RECTANGLE,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(RECTANGLE," || vVertType == ").concat(ELLIPSE,` 
          || vVertType == `).concat(ROUND_RECTANGLE," || vVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(RECTANGLE,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ELLIPSE,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ELLIPSE,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(S.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),M=createProgram(R,T,k);M.aPosition=R.getAttribLocation(M,"aPosition"),M.aIndex=R.getAttribLocation(M,"aIndex"),M.aVertType=R.getAttribLocation(M,"aVertType"),M.aTransform=R.getAttribLocation(M,"aTransform"),M.aAtlasId=R.getAttribLocation(M,"aAtlasId"),M.aTex=R.getAttribLocation(M,"aTex"),M.aPointAPointB=R.getAttribLocation(M,"aPointAPointB"),M.aPointCPointD=R.getAttribLocation(M,"aPointCPointD"),M.aLineWidth=R.getAttribLocation(M,"aLineWidth"),M.aColor=R.getAttribLocation(M,"aColor"),M.aCornerRadius=R.getAttribLocation(M,"aCornerRadius"),M.aBorderColor=R.getAttribLocation(M,"aBorderColor"),M.uPanZoomMatrix=R.getUniformLocation(M,"uPanZoomMatrix"),M.uAtlasSize=R.getUniformLocation(M,"uAtlasSize"),M.uBGColor=R.getUniformLocation(M,"uBGColor"),M.uZoom=R.getUniformLocation(M,"uZoom"),M.uTextures=[];for(var P=0;P<this.batchManager.getMaxAtlasesPerBatch();P++)M.uTextures.push(R.getUniformLocation(M,"uTexture".concat(P)));return M}},{key:"_createVAO",value:function(){var S=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=S.length/2;var R=this.maxInstances,T=this.gl,A=this.program,k=T.createVertexArray();return T.bindVertexArray(k),createBufferStaticDraw(T,"vec2",A.aPosition,S),this.transformBuffer=create3x3MatrixBufferDynamicDraw(T,R,A.aTransform),this.indexBuffer=createBufferDynamicDraw(T,R,"vec4",A.aIndex),this.vertTypeBuffer=createBufferDynamicDraw(T,R,"int",A.aVertType),this.atlasIdBuffer=createBufferDynamicDraw(T,R,"int",A.aAtlasId),this.texBuffer=createBufferDynamicDraw(T,R,"vec4",A.aTex),this.pointAPointBBuffer=createBufferDynamicDraw(T,R,"vec4",A.aPointAPointB),this.pointCPointDBuffer=createBufferDynamicDraw(T,R,"vec4",A.aPointCPointD),this.lineWidthBuffer=createBufferDynamicDraw(T,R,"vec2",A.aLineWidth),this.colorBuffer=createBufferDynamicDraw(T,R,"vec4",A.aColor),this.cornerRadiusBuffer=createBufferDynamicDraw(T,R,"vec4",A.aCornerRadius),this.borderColorBuffer=createBufferDynamicDraw(T,R,"vec4",A.aBorderColor),T.bindVertexArray(null),k}},{key:"buffers",get:function(){var S=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(R){return endsWith(R,"Buffer")}).map(function(R){return S[R]})),this._buffers}},{key:"startFrame",value:function(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RENDER_TARGET.SCREEN;this.panZoomMatrix=S,this.renderTarget=R,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(S,R){return S.visible()?R&&R.isVisible?R.isVisible(S):!0:!1}},{key:"drawTexture",value:function(S,R,T){var A=this.atlasManager,k=this.batchManager,M=A.getRenderTypeOpts(T);if(this._isVisible(S,M)&&!(S.isEdge()&&!this._isValidEdge(S))){if(this.renderTarget.picking&&M.getTexPickingMode){var P=M.getTexPickingMode(S);if(P===TEX_PICKING_MODE.IGNORE)return;if(P==TEX_PICKING_MODE.USE_BB){this.drawPickingRectangle(S,R,T);return}}var D=A.getAtlasInfo(S,T),L=_createForOfIteratorHelper(D),q;try{for(L.s();!(q=L.n()).done;){var B=q.value,F=B.atlas,j=B.tex1,z=B.tex2;k.canAddToCurrentBatch(F)||this.endBatch();for(var V=k.getAtlasIndexForBatch(F),G=0,W=[[j,!0],[z,!1]];G<W.length;G++){var Y=_slicedToArray(W[G],2),X=Y[0],ee=Y[1];if(X.w!=0){var re=this.instanceCount;this.vertTypeBuffer.getView(re)[0]=TEXTURE;var Q=this.indexBuffer.getView(re);indexToVec4(R,Q);var ne=this.atlasIdBuffer.getView(re);ne[0]=V;var ae=this.texBuffer.getView(re);ae[0]=X.x,ae[1]=X.y,ae[2]=X.w,ae[3]=X.h;var oe=this.transformBuffer.getMatrixView(re);this.setTransformMatrix(S,oe,M,B,ee),this.instanceCount++,ee||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(se){L.e(se)}finally{L.f()}}}},{key:"setTransformMatrix",value:function(S,R,T,A){var k=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,M=0;if(T.shapeProps&&T.shapeProps.padding&&(M=S.pstyle(T.shapeProps.padding).pfValue),A){var P=A.bb,D=A.tex1,L=A.tex2,q=D.w/(D.w+L.w);k||(q=1-q);var B=this._getAdjustedBB(P,M,k,q);this._applyTransformMatrix(R,B,T,S)}else{var F=T.getBoundingBox(S),j=this._getAdjustedBB(F,M,!0,1);this._applyTransformMatrix(R,j,T,S)}}},{key:"_applyTransformMatrix",value:function(S,R,T,A){var k,M;identity(S);var P=T.getRotation?T.getRotation(A):0;if(P!==0){var D=T.getRotationPoint(A),L=D.x,q=D.y;translate(S,S,[L,q]),rotate(S,S,P);var B=T.getRotationOffset(A);k=B.x+(R.xOffset||0),M=B.y+(R.yOffset||0)}else k=R.x1,M=R.y1;translate(S,S,[k,M]),scale(S,S,[R.w,R.h])}},{key:"_getAdjustedBB",value:function(S,R,T,A){var k=S.x1,M=S.y1,P=S.w,D=S.h,L=S.yOffset;R&&(k-=R,M-=R,P+=2*R,D+=2*R);var q=0,B=P*A;return T&&A<1?P=B:!T&&A<1&&(q=P-B,k+=q,P=B),{x1:k,y1:M,w:P,h:D,xOffset:q,yOffset:L}}},{key:"drawPickingRectangle",value:function(S,R,T){var A=this.atlasManager.getRenderTypeOpts(T),k=this.instanceCount;this.vertTypeBuffer.getView(k)[0]=RECTANGLE;var M=this.indexBuffer.getView(k);indexToVec4(R,M);var P=this.colorBuffer.getView(k);toWebGLColor([0,0,0],1,P);var D=this.transformBuffer.getMatrixView(k);this.setTransformMatrix(S,D,A),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(S,R,T){var A=this.simpleShapeOptions.get(T);if(this._isVisible(S,A)){var k=A.shapeProps,M=this._getVertTypeForShape(S,k.shape);if(M===void 0||A.isSimple&&!A.isSimple(S)){this.drawTexture(S,R,T);return}var P=this.instanceCount;if(this.vertTypeBuffer.getView(P)[0]=M,M===ROUND_RECTANGLE||M===BOTTOM_ROUND_RECTANGLE){var D=A.getBoundingBox(S),L=this._getCornerRadius(S,k.radius,D),q=this.cornerRadiusBuffer.getView(P);q[0]=L,q[1]=L,q[2]=L,q[3]=L,M===BOTTOM_ROUND_RECTANGLE&&(q[0]=0,q[2]=0)}var B=this.indexBuffer.getView(P);indexToVec4(R,B);var F=S.pstyle(k.color).value,j=S.pstyle(k.opacity).value,z=this.colorBuffer.getView(P);toWebGLColor(F,j,z);var V=this.lineWidthBuffer.getView(P);if(V[0]=0,V[1]=0,k.border){var G=S.pstyle("border-width").value;if(G>0){var W=S.pstyle("border-color").value,Y=S.pstyle("border-opacity").value,X=this.borderColorBuffer.getView(P);toWebGLColor(W,Y,X);var ee=S.pstyle("border-position").value;if(ee==="inside")V[0]=0,V[1]=-G;else if(ee==="outside")V[0]=G,V[1]=0;else{var re=G/2;V[0]=re,V[1]=-re}}}var Q=this.transformBuffer.getMatrixView(P);this.setTransformMatrix(S,Q,A),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(S,R){var T=S.pstyle(R).value;switch(T){case"rectangle":return RECTANGLE;case"ellipse":return ELLIPSE;case"roundrectangle":case"round-rectangle":return ROUND_RECTANGLE;case"bottom-round-rectangle":return BOTTOM_ROUND_RECTANGLE;default:return}}},{key:"_getCornerRadius",value:function(S,R,T){var A=T.w,k=T.h;if(S.pstyle(R).value==="auto")return getRoundRectangleRadius(A,k);var M=S.pstyle(R).pfValue,P=A/2,D=k/2;return Math.min(M,D,P)}},{key:"drawEdgeArrow",value:function(S,R,T){if(S.visible()){var A=S._private.rscratch,k,M,P;if(T==="source"?(k=A.arrowStartX,M=A.arrowStartY,P=A.srcArrowAngle):(k=A.arrowEndX,M=A.arrowEndY,P=A.tgtArrowAngle),!(isNaN(k)||k==null||isNaN(M)||M==null||isNaN(P)||P==null)){var D=S.pstyle(T+"-arrow-shape").value;if(D!=="none"){var L=S.pstyle(T+"-arrow-color").value,q=S.pstyle("opacity").value,B=S.pstyle("line-opacity").value,F=q*B,j=S.pstyle("width").pfValue,z=S.pstyle("arrow-scale").value,V=this.r.getArrowWidth(j,z),G=this.instanceCount,W=this.transformBuffer.getMatrixView(G);identity(W),translate(W,W,[k,M]),scale(W,W,[V,V]),rotate(W,W,P),this.vertTypeBuffer.getView(G)[0]=EDGE_ARROW;var Y=this.indexBuffer.getView(G);indexToVec4(R,Y);var X=this.colorBuffer.getView(G);toWebGLColor(L,F,X),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(S,R){if(S.visible()){var T=this._getEdgePoints(S);if(T){var A=S.pstyle("opacity").value,k=S.pstyle("line-opacity").value,M=S.pstyle("width").pfValue,P=S.pstyle("line-color").value,D=A*k;if(T.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),T.length==4){var L=this.instanceCount;this.vertTypeBuffer.getView(L)[0]=EDGE_STRAIGHT;var q=this.indexBuffer.getView(L);indexToVec4(R,q);var B=this.colorBuffer.getView(L);toWebGLColor(P,D,B);var F=this.lineWidthBuffer.getView(L);F[0]=M;var j=this.pointAPointBBuffer.getView(L);j[0]=T[0],j[1]=T[1],j[2]=T[2],j[3]=T[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var z=0;z<T.length-2;z+=2){var V=this.instanceCount;this.vertTypeBuffer.getView(V)[0]=EDGE_CURVE_SEGMENT;var G=this.indexBuffer.getView(V);indexToVec4(R,G);var W=this.colorBuffer.getView(V);toWebGLColor(P,D,W);var Y=this.lineWidthBuffer.getView(V);Y[0]=M;var X=T[z-2],ee=T[z-1],re=T[z],Q=T[z+1],ne=T[z+2],ae=T[z+3],oe=T[z+4],se=T[z+5];z==0&&(X=2*re-ne+.001,ee=2*Q-ae+.001),z==T.length-4&&(oe=2*ne-re+.001,se=2*ae-Q+.001);var ce=this.pointAPointBBuffer.getView(V);ce[0]=X,ce[1]=ee,ce[2]=re,ce[3]=Q;var de=this.pointCPointDBuffer.getView(V);de[0]=ne,de[1]=ae,de[2]=oe,de[3]=se,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(S){var R=S._private.rscratch;return!(R.badLine||R.allpts==null||isNaN(R.allpts[0]))}},{key:"_getEdgePoints",value:function(S){var R=S._private.rscratch;if(this._isValidEdge(S)){var T=R.allpts;if(T.length==4)return T;var A=this._getNumSegments(S);return this._getCurveSegmentPoints(T,A)}}},{key:"_getNumSegments",value:function(S){var R=15;return Math.min(Math.max(R,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(S,R){if(S.length==4)return S;for(var T=Array((R+1)*2),A=0;A<=R;A++)if(A==0)T[0]=S[0],T[1]=S[1];else if(A==R)T[A*2]=S[S.length-2],T[A*2+1]=S[S.length-1];else{var k=A/R;this._setCurvePoint(S,k,T,A*2)}return T}},{key:"_setCurvePoint",value:function(S,R,T,A){if(S.length<=2)T[A]=S[0],T[A+1]=S[1];else{for(var k=Array(S.length-2),M=0;M<k.length;M+=2){var P=(1-R)*S[M]+R*S[M+2],D=(1-R)*S[M+1]+R*S[M+3];k[M]=P,k[M+1]=D}return this._setCurvePoint(k,R,T,A)}}},{key:"endBatch",value:function(){var S=this.gl,R=this.vao,T=this.vertexCount,A=this.instanceCount;if(A!==0){var k=this.renderTarget.picking?this.pickingProgram:this.program;S.useProgram(k),S.bindVertexArray(R);var M=_createForOfIteratorHelper(this.buffers),P;try{for(M.s();!(P=M.n()).done;){var D=P.value;D.bufferSubData(A)}}catch(j){M.e(j)}finally{M.f()}for(var L=this.batchManager.getAtlases(),q=0;q<L.length;q++)L[q].bufferIfNeeded(S);for(var B=0;B<L.length;B++)S.activeTexture(S.TEXTURE0+B),S.bindTexture(S.TEXTURE_2D,L[B].texture),S.uniform1i(k.uTextures[B],B);S.uniform1f(k.uZoom,getEffectiveZoom(this.r)),S.uniformMatrix3fv(k.uPanZoomMatrix,!1,this.panZoomMatrix),S.uniform1i(k.uAtlasSize,this.batchManager.getAtlasSize());var F=toWebGLColor(this.bgColor,1);S.uniform4fv(k.uBGColor,F),S.drawArraysInstanced(S.TRIANGLES,0,T,A),S.bindVertexArray(null),S.bindTexture(S.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:A,atlasCount:L.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var S=this.atlasManager.getDebugInfo(),R=S.reduce(function(k,M){return k+M.atlasCount},0),T=this.batchDebugInfo,A=T.reduce(function(k,M){return k+M.count},0);return{atlasInfo:S,totalAtlases:R,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:T.length,batchInfo:T,totalInstances:A}}}])})(),CRp$4={};CRp$4.initWebgl=function(_,v){var S=this,R=S.data.contexts[S.WEBGL];_.bgColor=getBGColor(S),_.webglTexSize=Math.min(_.webglTexSize,R.getParameter(R.MAX_TEXTURE_SIZE)),_.webglTexRows=Math.min(_.webglTexRows,54),_.webglTexRowsNodes=Math.min(_.webglTexRowsNodes,54),_.webglBatchSize=Math.min(_.webglBatchSize,16384),_.webglTexPerBatch=Math.min(_.webglTexPerBatch,R.getParameter(R.MAX_TEXTURE_IMAGE_UNITS)),S.webglDebug=_.webglDebug,S.webglDebugShowAtlases=_.webglDebugShowAtlases,S.pickingFrameBuffer=createPickingFrameBuffer(R),S.pickingFrameBuffer.needsDraw=!0,S.drawing=new ElementDrawingWebGL(S,R,_);var T=function(q){return function(B){return S.getTextAngle(B,q)}},A=function(q){return function(B){var F=B.pstyle(q);return F&&F.value}},k=function(q){return function(B){return B.pstyle("".concat(q,"-opacity")).value>0}},M=function(q){var B=q.pstyle("text-events").strValue==="yes";return B?TEX_PICKING_MODE.USE_BB:TEX_PICKING_MODE.IGNORE},P=function(q){var B=q.position(),F=B.x,j=B.y,z=q.outerWidth(),V=q.outerHeight();return{w:z,h:V,x1:F-z/2,y1:j-V/2}};S.drawing.addAtlasCollection("node",{texRows:_.webglTexRowsNodes}),S.drawing.addAtlasCollection("label",{texRows:_.webglTexRows}),S.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:v.getStyleKey,getBoundingBox:v.getElementBox,drawElement:v.drawElement}),S.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:P,isSimple:isSimpleShape,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),S.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:P,isVisible:k("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),S.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:P,isVisible:k("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),S.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:M,getKey:getStyleKeysForLabel(v.getLabelKey,null),getBoundingBox:getBoundingBoxForLabel(v.getLabelBox,null),drawClipped:!0,drawElement:v.drawLabel,getRotation:T(null),getRotationPoint:v.getLabelRotationPoint,getRotationOffset:v.getLabelRotationOffset,isVisible:A("label")}),S.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:M,getKey:getStyleKeysForLabel(v.getSourceLabelKey,"source"),getBoundingBox:getBoundingBoxForLabel(v.getSourceLabelBox,"source"),drawClipped:!0,drawElement:v.drawSourceLabel,getRotation:T("source"),getRotationPoint:v.getSourceLabelRotationPoint,getRotationOffset:v.getSourceLabelRotationOffset,isVisible:A("source-label")}),S.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:M,getKey:getStyleKeysForLabel(v.getTargetLabelKey,"target"),getBoundingBox:getBoundingBoxForLabel(v.getTargetLabelBox,"target"),drawClipped:!0,drawElement:v.drawTargetLabel,getRotation:T("target"),getRotationPoint:v.getTargetLabelRotationPoint,getRotationOffset:v.getTargetLabelRotationOffset,isVisible:A("target-label")});var D=debounce(function(){console.log("garbage collect flag set"),S.data.gc=!0},1e4);S.onUpdateEleCalcs(function(L,q){var B=!1;q&&q.length>0&&(B|=S.drawing.invalidate(q)),B&&D()}),overrideCanvasRendererFunctions(S)};function getBGColor(_){var v=_.cy.container(),S=v&&v.style&&v.style.backgroundColor||"white";return color2tuple(S)}function getLabelLines(_,v){var S=_._private.rscratch;return getPrefixedProperty(S,"labelWrapCachedLines",v)||[]}var getStyleKeysForLabel=function(v,S){return function(R){var T=v(R),A=getLabelLines(R,S);return A.length>1?A.map(function(k,M){return"".concat(T,"_").concat(M)}):T}},getBoundingBoxForLabel=function(v,S){return function(R,T){var A=v(R);if(typeof T=="string"){var k=T.indexOf("_");if(k>0){var M=Number(T.substring(k+1)),P=getLabelLines(R,S),D=A.h/P.length,L=D*M,q=A.y1+L;return{x1:A.x1,w:A.w,y1:q,h:D,yOffset:L}}}return A}};function overrideCanvasRendererFunctions(_){{var v=_.render;_.render=function(A){A=A||{};var k=_.cy;_.webgl&&(k.zoom()>maxZoom$1?(clearWebgl(_),v.call(_,A)):(clearCanvas(_),renderWebgl(_,A,RENDER_TARGET.SCREEN)))}}{var S=_.matchCanvasSize;_.matchCanvasSize=function(A){S.call(_,A),_.pickingFrameBuffer.setFramebufferAttachmentSizes(_.canvasWidth,_.canvasHeight),_.pickingFrameBuffer.needsDraw=!0}}_.findNearestElements=function(A,k,M,P){return findNearestElementsWebgl(_,A,k)};{var R=_.invalidateCachedZSortedEles;_.invalidateCachedZSortedEles=function(){R.call(_),_.pickingFrameBuffer.needsDraw=!0}}{var T=_.notify;_.notify=function(A,k){T.call(_,A,k),A==="viewport"||A==="bounds"?_.pickingFrameBuffer.needsDraw=!0:A==="background"&&_.drawing.invalidate(k,{type:"node-body"})}}}function clearWebgl(_){var v=_.data.contexts[_.WEBGL];v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}function clearCanvas(_){var v=function(R){R.save(),R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,_.canvasWidth,_.canvasHeight),R.restore()};v(_.data.contexts[_.NODE]),v(_.data.contexts[_.DRAG])}function createPanZoomMatrix(_){var v=_.canvasWidth,S=_.canvasHeight,R=getEffectivePanZoom(_),T=R.pan,A=R.zoom,k=create();translate(k,k,[T.x,T.y]),scale(k,k,[A,A]);var M=create();projection(M,v,S);var P=create();return multiply(P,M,k),P}function setContextTransform(_,v){var S=_.canvasWidth,R=_.canvasHeight,T=getEffectivePanZoom(_),A=T.pan,k=T.zoom;v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,S,R),v.translate(A.x,A.y),v.scale(k,k)}function drawSelectionRectangle(_,v){_.drawSelectionRectangle(v,function(S){return setContextTransform(_,S)})}function drawAxes(_){var v=_.data.contexts[_.NODE];v.save(),setContextTransform(_,v),v.strokeStyle="rgba(0, 0, 0, 0.3)",v.beginPath(),v.moveTo(-1e3,0),v.lineTo(1e3,0),v.stroke(),v.beginPath(),v.moveTo(0,-1e3),v.lineTo(0,1e3),v.stroke(),v.restore()}function drawAtlases(_){var v=function(T,A,k){for(var M=T.atlasManager.getAtlasCollection(A),P=_.data.contexts[_.NODE],D=M.atlases,L=0;L<D.length;L++){var q=D[L],B=q.canvas;if(B){var F=B.width,j=B.height,z=F*L,V=B.height*k,G=.4;P.save(),P.scale(G,G),P.drawImage(B,z,V),P.strokeStyle="black",P.rect(z,V,F,j),P.stroke(),P.restore()}}},S=0;v(_.drawing,"node",S++),v(_.drawing,"label",S++)}function getPickingIndexes(_,v,S,R,T){var A,k,M,P,D=getEffectivePanZoom(_),L=D.pan,q=D.zoom;{var B=modelToRenderedPosition(_,L,q,v,S),F=_slicedToArray(B,2),j=F[0],z=F[1],V=6;A=j-V/2,k=z-V/2,M=V,P=V}if(M===0||P===0)return[];var G=_.data.contexts[_.WEBGL];G.bindFramebuffer(G.FRAMEBUFFER,_.pickingFrameBuffer),_.pickingFrameBuffer.needsDraw&&(G.viewport(0,0,G.canvas.width,G.canvas.height),renderWebgl(_,null,RENDER_TARGET.PICKING),_.pickingFrameBuffer.needsDraw=!1);var W=M*P,Y=new Uint8Array(W*4);G.readPixels(A,k,M,P,G.RGBA,G.UNSIGNED_BYTE,Y),G.bindFramebuffer(G.FRAMEBUFFER,null);for(var X=new Set,ee=0;ee<W;ee++){var re=Y.slice(ee*4,ee*4+4),Q=vec4ToIndex(re)-1;Q>=0&&X.add(Q)}return X}function findNearestElementsWebgl(_,v,S){var R=getPickingIndexes(_,v,S),T=_.getCachedZSortedEles(),A,k,M=_createForOfIteratorHelper(R),P;try{for(M.s();!(P=M.n()).done;){var D=P.value,L=T[D];if(!A&&L.isNode()&&(A=L),!k&&L.isEdge()&&(k=L),A&&k)break}}catch(q){M.e(q)}finally{M.f()}return[A,k].filter(Boolean)}function drawEle(_,v,S){var R=_.drawing;v+=1,S.isNode()?(R.drawNode(S,v,"node-underlay"),R.drawNode(S,v,"node-body"),R.drawTexture(S,v,"label"),R.drawNode(S,v,"node-overlay")):(R.drawEdgeLine(S,v),R.drawEdgeArrow(S,v,"source"),R.drawEdgeArrow(S,v,"target"),R.drawTexture(S,v,"label"),R.drawTexture(S,v,"edge-source-label"),R.drawTexture(S,v,"edge-target-label"))}function renderWebgl(_,v,S){var R;_.webglDebug&&(R=performance.now());var T=_.drawing,A=0;if(S.screen&&_.data.canvasNeedsRedraw[_.SELECT_BOX]&&drawSelectionRectangle(_,v),_.data.canvasNeedsRedraw[_.NODE]||S.picking){var k=_.data.contexts[_.WEBGL];S.screen?(k.clearColor(0,0,0,0),k.enable(k.BLEND),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA)):k.disable(k.BLEND),k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT),k.viewport(0,0,k.canvas.width,k.canvas.height);var M=createPanZoomMatrix(_),P=_.getCachedZSortedEles();if(A=P.length,T.startFrame(M,S),S.screen){for(var D=0;D<P.nondrag.length;D++)drawEle(_,D,P.nondrag[D]);for(var L=0;L<P.drag.length;L++)drawEle(_,L,P.drag[L])}else if(S.picking)for(var q=0;q<P.length;q++)drawEle(_,q,P[q]);T.endFrame(),S.screen&&_.webglDebugShowAtlases&&(drawAxes(_),drawAtlases(_)),_.data.canvasNeedsRedraw[_.NODE]=!1,_.data.canvasNeedsRedraw[_.DRAG]=!1}if(_.webglDebug){var B=performance.now(),F=!1,j=Math.ceil(B-R),z=T.getDebugInfo(),V=["".concat(A," elements"),"".concat(z.totalInstances," instances"),"".concat(z.batchCount," batches"),"".concat(z.totalAtlases," atlases"),"".concat(z.wrappedCount," wrapped textures"),"".concat(z.simpleCount," simple shapes")].join(", ");if(F)console.log("WebGL (".concat(S.name,") - time ").concat(j,"ms, ").concat(V));else{console.log("WebGL (".concat(S.name,") - frame time ").concat(j,"ms")),console.log("Totals:"),console.log("  ".concat(V)),console.log("Texture Atlases Used:");var G=z.atlasInfo,W=_createForOfIteratorHelper(G),Y;try{for(W.s();!(Y=W.n()).done;){var X=Y.value;console.log("  ".concat(X.type,": ").concat(X.keyCount," keys, ").concat(X.atlasCount," atlases"))}}catch(ee){W.e(ee)}finally{W.f()}console.log("")}}_.data.gc&&(console.log("Garbage Collect!"),_.data.gc=!1,T.gc())}var CRp$3={};CRp$3.drawPolygonPath=function(_,v,S,R,T,A){var k=R/2,M=T/2;_.beginPath&&_.beginPath(),_.moveTo(v+k*A[0],S+M*A[1]);for(var P=1;P<A.length/2;P++)_.lineTo(v+k*A[P*2],S+M*A[P*2+1]);_.closePath()};CRp$3.drawRoundPolygonPath=function(_,v,S,R,T,A,k){k.forEach(function(M){return drawPreparedRoundCorner(_,M)}),_.closePath()};CRp$3.drawRoundRectanglePath=function(_,v,S,R,T,A){var k=R/2,M=T/2,P=A==="auto"?getRoundRectangleRadius(R,T):Math.min(A,M,k);_.beginPath&&_.beginPath(),_.moveTo(v,S-M),_.arcTo(v+k,S-M,v+k,S,P),_.arcTo(v+k,S+M,v,S+M,P),_.arcTo(v-k,S+M,v-k,S,P),_.arcTo(v-k,S-M,v,S-M,P),_.lineTo(v,S-M),_.closePath()};CRp$3.drawBottomRoundRectanglePath=function(_,v,S,R,T,A){var k=R/2,M=T/2,P=A==="auto"?getRoundRectangleRadius(R,T):A;_.beginPath&&_.beginPath(),_.moveTo(v,S-M),_.lineTo(v+k,S-M),_.lineTo(v+k,S),_.arcTo(v+k,S+M,v,S+M,P),_.arcTo(v-k,S+M,v-k,S,P),_.lineTo(v-k,S-M),_.lineTo(v,S-M),_.closePath()};CRp$3.drawCutRectanglePath=function(_,v,S,R,T,A,k){var M=R/2,P=T/2,D=k==="auto"?getCutRectangleCornerLength():k;_.beginPath&&_.beginPath(),_.moveTo(v-M+D,S-P),_.lineTo(v+M-D,S-P),_.lineTo(v+M,S-P+D),_.lineTo(v+M,S+P-D),_.lineTo(v+M-D,S+P),_.lineTo(v-M+D,S+P),_.lineTo(v-M,S+P-D),_.lineTo(v-M,S-P+D),_.closePath()};CRp$3.drawBarrelPath=function(_,v,S,R,T){var A=R/2,k=T/2,M=v-A,P=v+A,D=S-k,L=S+k,q=getBarrelCurveConstants(R,T),B=q.widthOffset,F=q.heightOffset,j=q.ctrlPtOffsetPct*B;_.beginPath&&_.beginPath(),_.moveTo(M,D+F),_.lineTo(M,L-F),_.quadraticCurveTo(M+j,L,M+B,L),_.lineTo(P-B,L),_.quadraticCurveTo(P-j,L,P,L-F),_.lineTo(P,D+F),_.quadraticCurveTo(P-j,D,P-B,D),_.lineTo(M+B,D),_.quadraticCurveTo(M+j,D,M,D+F),_.closePath()};var sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40;for(var i$2=0*Math.PI;i$2<2*Math.PI;i$2+=ellipseStepSize)sin[i$2]=Math.sin(i$2),cos[i$2]=Math.cos(i$2);CRp$3.drawEllipsePath=function(_,v,S,R,T){if(_.beginPath&&_.beginPath(),_.ellipse)_.ellipse(v,S,R/2,T/2,0,0,2*Math.PI);else for(var A,k,M=R/2,P=T/2,D=0*Math.PI;D<2*Math.PI;D+=ellipseStepSize)A=v-M*sin[D]*sin0+M*cos[D]*cos0,k=S+P*cos[D]*sin0+P*sin[D]*cos0,D===0?_.moveTo(A,k):_.lineTo(A,k);_.closePath()};var CRp$2={};CRp$2.createBuffer=function(_,v){var S=document.createElement("canvas");return S.width=_,S.height=v,[S,S.getContext("2d")]};CRp$2.bufferCanvasImage=function(_){var v=this.cy,S=v.mutableElements(),R=S.boundingBox(),T=this.findContainerClientCoords(),A=_.full?Math.ceil(R.w):T[2],k=_.full?Math.ceil(R.h):T[3],M=number$1(_.maxWidth)||number$1(_.maxHeight),P=this.getPixelRatio(),D=1;if(_.scale!==void 0)A*=_.scale,k*=_.scale,D=_.scale;else if(M){var L=1/0,q=1/0;number$1(_.maxWidth)&&(L=D*_.maxWidth/A),number$1(_.maxHeight)&&(q=D*_.maxHeight/k),D=Math.min(L,q),A*=D,k*=D}M||(A*=P,k*=P,D*=P);var B=document.createElement("canvas");B.width=A,B.height=k,B.style.width=A+"px",B.style.height=k+"px";var F=B.getContext("2d");if(A>0&&k>0){F.clearRect(0,0,A,k),F.globalCompositeOperation="source-over";var j=this.getCachedZSortedEles();if(_.full)F.translate(-R.x1*D,-R.y1*D),F.scale(D,D),this.drawElements(F,j),F.scale(1/D,1/D),F.translate(R.x1*D,R.y1*D);else{var z=v.pan(),V={x:z.x*D,y:z.y*D};D*=v.zoom(),F.translate(V.x,V.y),F.scale(D,D),this.drawElements(F,j),F.scale(1/D,1/D),F.translate(-V.x,-V.y)}_.bg&&(F.globalCompositeOperation="destination-over",F.fillStyle=_.bg,F.rect(0,0,A,k),F.fill())}return B};function b64ToBlob(_,v){for(var S=atob(_),R=new ArrayBuffer(S.length),T=new Uint8Array(R),A=0;A<S.length;A++)T[A]=S.charCodeAt(A);return new Blob([R],{type:v})}function b64UriToB64(_){var v=_.indexOf(",");return _.substr(v+1)}function output(_,v,S){var R=function(){return v.toDataURL(S,_.quality)};switch(_.output){case"blob-promise":return new Promise$1(function(T,A){try{v.toBlob(function(k){k!=null?T(k):A(new Error("`canvas.toBlob()` sent a null value in its callback"))},S,_.quality)}catch(k){A(k)}});case"blob":return b64ToBlob(b64UriToB64(R()),S);case"base64":return b64UriToB64(R());case"base64uri":default:return R()}}CRp$2.png=function(_){return output(_,this.bufferCanvasImage(_),"image/png")};CRp$2.jpg=function(_){return output(_,this.bufferCanvasImage(_),"image/jpeg")};var CRp$1={};CRp$1.nodeShapeImpl=function(_,v,S,R,T,A,k,M){switch(_){case"ellipse":return this.drawEllipsePath(v,S,R,T,A);case"polygon":return this.drawPolygonPath(v,S,R,T,A,k);case"round-polygon":return this.drawRoundPolygonPath(v,S,R,T,A,k,M);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(v,S,R,T,A,M);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(v,S,R,T,A,k,M);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(v,S,R,T,A,M);case"barrel":return this.drawBarrelPath(v,S,R,T,A)}};var CR=CanvasRenderer,CRp=CanvasRenderer.prototype;CRp.CANVAS_LAYERS=3;CRp.SELECT_BOX=0;CRp.DRAG=1;CRp.NODE=2;CRp.WEBGL=3;CRp.CANVAS_TYPES=["2d","2d","2d","webgl2"];CRp.BUFFER_COUNT=3;CRp.TEXTURE_BUFFER=0;CRp.MOTIONBLUR_BUFFER_NODE=1;CRp.MOTIONBLUR_BUFFER_DRAG=2;function CanvasRenderer(_){var v=this,S=v.cy.window(),R=S.document;_.webgl&&(CRp.CANVAS_LAYERS=v.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),v.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};var T="-webkit-tap-highlight-color",A="rgba(0,0,0,0)";v.data.canvasContainer=R.createElement("div");var k=v.data.canvasContainer.style;v.data.canvasContainer.style[T]=A,k.position="relative",k.zIndex="0",k.overflow="hidden";var M=_.cy.container();M.appendChild(v.data.canvasContainer),M.style[T]=A;var P={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(P["-ms-touch-action"]="none",P["touch-action"]="none");for(var D=0;D<CRp.CANVAS_LAYERS;D++){var L=v.data.canvases[D]=R.createElement("canvas"),q=CRp.CANVAS_TYPES[D];v.data.contexts[D]=L.getContext(q),v.data.contexts[D]||error("Could not create canvas of type "+q),Object.keys(P).forEach(function(Be){L.style[Be]=P[Be]}),L.style.position="absolute",L.setAttribute("data-id","layer"+D),L.style.zIndex=String(CRp.CANVAS_LAYERS-D),v.data.canvasContainer.appendChild(L),v.data.canvasNeedsRedraw[D]=!1}v.data.topCanvas=v.data.canvases[0],v.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),v.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),v.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag"),v.data.canvases[CRp.WEBGL]&&v.data.canvases[CRp.WEBGL].setAttribute("data-id","layer"+CRp.WEBGL+"-webgl");for(var D=0;D<CRp.BUFFER_COUNT;D++)v.data.bufferCanvases[D]=R.createElement("canvas"),v.data.bufferContexts[D]=v.data.bufferCanvases[D].getContext("2d"),v.data.bufferCanvases[D].style.position="absolute",v.data.bufferCanvases[D].setAttribute("data-id","buffer"+D),v.data.bufferCanvases[D].style.zIndex=String(-D-1),v.data.bufferCanvases[D].style.visibility="hidden";v.pathsEnabled=!0;var B=makeBoundingBox(),F=function(Pe){return{x:(Pe.x1+Pe.x2)/2,y:(Pe.y1+Pe.y2)/2}},j=function(Pe){return{x:-Pe.w/2,y:-Pe.h/2}},z=function(Pe){var De=Pe[0]._private,Le=De.oldBackgroundTimestamp===De.backgroundTimestamp;return!Le},V=function(Pe){return Pe[0]._private.nodeKey},G=function(Pe){return Pe[0]._private.labelStyleKey},W=function(Pe){return Pe[0]._private.sourceLabelStyleKey},Y=function(Pe){return Pe[0]._private.targetLabelStyleKey},X=function(Pe,De,Le,Ne,tt){return v.drawElement(Pe,De,Le,!1,!1,tt)},ee=function(Pe,De,Le,Ne,tt){return v.drawElementText(Pe,De,Le,Ne,"main",tt)},re=function(Pe,De,Le,Ne,tt){return v.drawElementText(Pe,De,Le,Ne,"source",tt)},Q=function(Pe,De,Le,Ne,tt){return v.drawElementText(Pe,De,Le,Ne,"target",tt)},ne=function(Pe){return Pe.boundingBox(),Pe[0]._private.bodyBounds},ae=function(Pe){return Pe.boundingBox(),Pe[0]._private.labelBounds.main||B},oe=function(Pe){return Pe.boundingBox(),Pe[0]._private.labelBounds.source||B},se=function(Pe){return Pe.boundingBox(),Pe[0]._private.labelBounds.target||B},ce=function(Pe,De){return De},de=function(Pe){return F(ne(Pe))},ye=function(Pe,De,Le){var Ne=Pe?Pe+"-":"";return{x:De.x+Le.pstyle(Ne+"text-margin-x").pfValue,y:De.y+Le.pstyle(Ne+"text-margin-y").pfValue}},we=function(Pe,De,Le){var Ne=Pe[0]._private.rscratch;return{x:Ne[De],y:Ne[Le]}},ge=function(Pe){return ye("",we(Pe,"labelX","labelY"),Pe)},ve=function(Pe){return ye("source",we(Pe,"sourceLabelX","sourceLabelY"),Pe)},be=function(Pe){return ye("target",we(Pe,"targetLabelX","targetLabelY"),Pe)},ke=function(Pe){return j(ne(Pe))},me=function(Pe){return j(oe(Pe))},fe=function(Pe){return j(se(Pe))},xe=function(Pe){var De=ae(Pe),Le=j(ae(Pe));if(Pe.isNode()){switch(Pe.pstyle("text-halign").value){case"left":Le.x=-De.w-(De.leftPad||0);break;case"right":Le.x=-(De.rightPad||0);break}switch(Pe.pstyle("text-valign").value){case"top":Le.y=-De.h-(De.topPad||0);break;case"bottom":Le.y=-(De.botPad||0);break}}return Le},Ae=v.data.eleTxrCache=new ElementTextureCache(v,{getKey:V,doesEleInvalidateKey:z,drawElement:X,getBoundingBox:ne,getRotationPoint:de,getRotationOffset:ke,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Se=v.data.lblTxrCache=new ElementTextureCache(v,{getKey:G,drawElement:ee,getBoundingBox:ae,getRotationPoint:ge,getRotationOffset:xe,isVisible:ce}),Me=v.data.slbTxrCache=new ElementTextureCache(v,{getKey:W,drawElement:re,getBoundingBox:oe,getRotationPoint:ve,getRotationOffset:me,isVisible:ce}),Oe=v.data.tlbTxrCache=new ElementTextureCache(v,{getKey:Y,drawElement:Q,getBoundingBox:se,getRotationPoint:be,getRotationOffset:fe,isVisible:ce}),Ce=v.data.lyrTxrCache=new LayeredTextureCache(v);v.onUpdateEleCalcs(function(Pe,De){Ae.invalidateElements(De),Se.invalidateElements(De),Me.invalidateElements(De),Oe.invalidateElements(De),Ce.invalidateElements(De);for(var Le=0;Le<De.length;Le++){var Ne=De[Le]._private;Ne.oldBackgroundTimestamp=Ne.backgroundTimestamp}});var $e=function(Pe){for(var De=0;De<Pe.length;De++)Ce.enqueueElementRefinement(Pe[De].ele)};Ae.onDequeue($e),Se.onDequeue($e),Me.onDequeue($e),Oe.onDequeue($e),_.webgl&&v.initWebgl(_,{getStyleKey:V,getLabelKey:G,getSourceLabelKey:W,getTargetLabelKey:Y,drawElement:X,drawLabel:ee,drawSourceLabel:re,drawTargetLabel:Q,getElementBox:ne,getLabelBox:ae,getSourceLabelBox:oe,getTargetLabelBox:se,getElementRotationPoint:de,getElementRotationOffset:ke,getLabelRotationPoint:ge,getSourceLabelRotationPoint:ve,getTargetLabelRotationPoint:be,getLabelRotationOffset:xe,getSourceLabelRotationOffset:me,getTargetLabelRotationOffset:fe})}CRp.redrawHint=function(_,v){var S=this;switch(_){case"eles":S.data.canvasNeedsRedraw[CRp.NODE]=v;break;case"drag":S.data.canvasNeedsRedraw[CRp.DRAG]=v;break;case"select":S.data.canvasNeedsRedraw[CRp.SELECT_BOX]=v;break;case"gc":S.data.gc=!0;break}};var pathsImpld=typeof Path2D<"u";CRp.path2dEnabled=function(_){if(_===void 0)return this.pathsEnabled;this.pathsEnabled=!!_};CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled};CRp.setImgSmoothing=function(_,v){_.imageSmoothingEnabled!=null?_.imageSmoothingEnabled=v:(_.webkitImageSmoothingEnabled=v,_.mozImageSmoothingEnabled=v,_.msImageSmoothingEnabled=v)};CRp.getImgSmoothing=function(_){return _.imageSmoothingEnabled!=null?_.imageSmoothingEnabled:_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled};CRp.makeOffscreenCanvas=function(_,v){var S;if((typeof OffscreenCanvas>"u"?"undefined":_typeof(OffscreenCanvas))!=="undefined")S=new OffscreenCanvas(_,v);else{var R=this.cy.window(),T=R.document;S=T.createElement("canvas"),S.width=_,S.height=v}return S};[CRp$b,CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach(function(_){extend(CRp,_)});var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(_,v,S){var R=S,T=function(ne){warn$1("Can not register `"+v+"` for `"+_+"` since `"+ne+"` already exists in the prototype and can not be overridden")};if(_==="core"){if(Core.prototype[v])return T(v);Core.prototype[v]=S}else if(_==="collection"){if(Collection$3.prototype[v])return T(v);Collection$3.prototype[v]=S}else if(_==="layout"){for(var A=function(ne){this.options=ne,S.call(this,ne),plainObject(this._private)||(this._private={}),this._private.cy=ne.cy,this._private.listeners=[],this.createEmitter()},k=A.prototype=Object.create(S.prototype),M=[],P=0;P<M.length;P++){var D=M[P];k[D]=k[D]||function(){return this}}k.start&&!k.run?k.run=function(){return this.start(),this}:!k.start&&k.run&&(k.start=function(){return this.run(),this});var L=S.prototype.stop;k.stop=function(){var Q=this.options;if(Q&&Q.animate){var ne=this.animations;if(ne)for(var ae=0;ae<ne.length;ae++)ne[ae].stop()}return L?L.call(this):this.emit("layoutstop"),this},k.destroy||(k.destroy=function(){return this}),k.cy=function(){return this._private.cy};var q=function(ne){return ne._private.cy},B={addEventFields:function(ne,ae){ae.layout=ne,ae.cy=q(ne),ae.target=ne},bubble:function(){return!0},parent:function(ne){return q(ne)}};extend(k,{createEmitter:function(){return this._private.emitter=new Emitter(B,this),this},emitter:function(){return this._private.emitter},on:function(ne,ae){return this.emitter().on(ne,ae),this},one:function(ne,ae){return this.emitter().one(ne,ae),this},once:function(ne,ae){return this.emitter().one(ne,ae),this},removeListener:function(ne,ae){return this.emitter().removeListener(ne,ae),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(ne,ae){return this.emitter().emit(ne,ae),this}}),define.eventAliasesOn(k),R=A}else if(_==="renderer"&&v!=="null"&&v!=="base"){var F=getExtension("renderer","base"),j=F.prototype,z=S,V=S.prototype,G=function(){F.apply(this,arguments),z.apply(this,arguments)},W=G.prototype;for(var Y in j){var X=j[Y],ee=V[Y]!=null;if(ee)return T(Y);W[Y]=X}for(var re in V)W[re]=V[re];j.clientFunctions.forEach(function(Q){W[Q]=W[Q]||function(){error("Renderer does not implement `renderer."+Q+"()` on its prototype")}}),R=G}else if(_==="__proto__"||_==="constructor"||_==="prototype")return error(_+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[_,v],value:R})}function getExtension(_,v){return getMap({map:extensions,keys:[_,v]})}function setModule(_,v,S,R,T){return setMap({map:modules,keys:[_,v,S,R],value:T})}function getModule(_,v,S,R){return getMap({map:modules,keys:[_,v,S,R]})}var extension=function(){if(arguments.length===2)return getExtension.apply(null,arguments);if(arguments.length===3)return setExtension.apply(null,arguments);if(arguments.length===4)return getModule.apply(null,arguments);if(arguments.length===5)return setModule.apply(null,arguments);error("Invalid extension access syntax")};Core.prototype.extension=extension;incExts.forEach(function(_){_.extensions.forEach(function(v){setExtension(_.type,v.name,v.impl)})});var _Stylesheet=function(){if(!(this instanceof _Stylesheet))return new _Stylesheet;this.length=0},sheetfn=_Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"};sheetfn.selector=function(_){var v=this.length++;return this[v]={selector:_,properties:[]},this};sheetfn.css=function(_,v){var S=this.length-1;if(string$1(_))this[S].properties.push({name:_,value:v});else if(plainObject(_))for(var R=_,T=Object.keys(R),A=0;A<T.length;A++){var k=T[A],M=R[k];if(M!=null){var P=_Style.properties[k]||_Style.properties[dash2camel(k)];if(P!=null){var D=P.name,L=M;this[S].properties.push({name:D,value:L})}}}return this};sheetfn.style=sheetfn.css;sheetfn.generateStyle=function(_){var v=new _Style(_);return this.appendToStyle(v)};sheetfn.appendToStyle=function(_){for(var v=0;v<this.length;v++){var S=this[v],R=S.selector,T=S.properties;_.selector(R);for(var A=0;A<T.length;A++){var k=T[A];_.css(k.name,k.value)}}return _};var version$2="3.33.1",cytoscape$1=function(v){if(v===void 0&&(v={}),plainObject(v))return new Core(v);if(string$1(v))return extension.apply(extension,arguments)};cytoscape$1.use=function(_){var v=Array.prototype.slice.call(arguments,1);return v.unshift(cytoscape$1),_.apply(null,v),this};cytoscape$1.warnings=function(_){return warnings(_)};cytoscape$1.version=version$2;cytoscape$1.stylesheet=cytoscape$1.Stylesheet=_Stylesheet;const{string:o,array:l,object:s,number:a,bool:i$1,oneOfType:r$1,any:c,func:u}=t$1,d={id:o,className:o,style:r$1([o,s]),elements:r$1([l,c]),stylesheet:r$1([l,c]),layout:r$1([s,c]),pan:r$1([s,c]),zoom:a,panningEnabled:i$1,userPanningEnabled:i$1,minZoom:a,maxZoom:a,zoomingEnabled:i$1,userZoomingEnabled:i$1,boxSelectionEnabled:i$1,autoungrabify:i$1,autolock:i$1,autounselectify:i$1,get:u,toJson:u,diff:u,forEach:u,cy:u,headless:i$1,styleEnabled:i$1,hideEdgesOnViewport:i$1,textureOnViewport:i$1,motionBlur:i$1,motionBlurOpacity:a,wheelSensitivity:a,pixelRatio:r$1([o,s])},p=(_,v)=>{if(((A,k)=>A==null||k==null)(_,v)&&(_!=null||v!=null))return!0;if(_===v)return!1;if(typeof _!="object"||typeof v!="object")return _!==v;const S=Object.keys(_),R=Object.keys(v),T=A=>_[A]!==v[A];return S.length!==R.length||!(!S.some(T)&&!R.some(T))},m=(_,v)=>_!=null?_[v]:null,y={diff:p,get:m,toJson:_=>_,forEach:(_,v)=>_.forEach(v),elements:[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}],stylesheet:[{selector:"node",style:{label:"data(label)"}}],zoom:1,pan:{x:0,y:0}},h=(_,v,S,R)=>S(m(_,R),m(v,R)),b=(_,v,S,R,T,A,k)=>{_.batch(()=>{(R===p||h(v,S,R,"elements"))&&x(_,m(v,"elements"),m(S,"elements"),T,A,k,R),h(v,S,R,"stylesheet")&&E(_,m(v,"stylesheet"),m(S,"stylesheet"),T),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach(M=>{h(v,S,R,M)&&f(_,M,m(v,M),m(S,M),T)})}),h(v,S,R,"layout")&&g(_,m(v,"layout"),m(S,"layout"),T)},f=(_,v,S,R,T)=>{_[v](T(R))},g=(_,v,S,R)=>{const T=R(S);T!=null&&_.layout(T).run()},E=(_,v,S,R)=>{const T=_.style();T?.fromJson(R(S)).update()},x=(_,v,S,R,T,A,k)=>{const M=[],P=_.collection(),D=[],L={},q={},B=F=>T(T(F,"data"),"id");A(S,F=>{const j=B(F);q[j]=F}),v!=null&&A(v,F=>{const j=B(F);L[j]=F,(z=>q[z]!=null)(j)||P.merge(_.getElementById(j))}),A(S,F=>{const j=B(F),z=(V=>L[V])(j);(V=>L[V]!=null)(j)?D.push({ele1:z,ele2:F}):M.push(R(F))}),P.length>0&&_.remove(P),M.length>0&&_.add(M),D.forEach(({ele1:F,ele2:j})=>O(_,F,j,R,T,k))},O=(_,v,S,R,T,A)=>{const k=T(T(S,"data"),"id"),M=_.getElementById(k),P={};["data","position","selected","selectable","locked","grabbable","classes"].forEach(L=>{const q=T(S,L);A(q,T(v,L))&&(P[L]=R(q))});const D=T(S,"scratch");A(D,T(v,"scratch"))&&M.scratch(R(D)),Object.keys(P).length>0&&M.json(P)};class w extends React.Component{static get propTypes(){return d}static get defaultProps(){return y}static normalizeElements(v){if(v.length!=null)return v;{let{nodes:S,edges:R}=v;return S==null&&(S=[]),R==null&&(R=[]),S.concat(R)}}constructor(v){super(v),this.displayName="CytoscapeComponent",this.containerRef=React.createRef()}componentDidMount(){const v=this.containerRef.current,{global:S,headless:R,styleEnabled:T,hideEdgesOnViewport:A,textureOnViewport:k,motionBlur:M,motionBlurOpacity:P,wheelSensitivity:D,pixelRatio:L}=this.props,q=this._cy=new cytoscape$1({container:v,headless:R,styleEnabled:T,hideEdgesOnViewport:A,textureOnViewport:k,motionBlur:M,motionBlurOpacity:P,wheelSensitivity:D,pixelRatio:L});S&&(window[S]=q),this.updateCytoscape(null,this.props)}updateCytoscape(v,S){const R=this._cy,{diff:T,toJson:A,get:k,forEach:M}=S;b(R,v,S,T,A,k,M),S.cy!=null&&S.cy(R)}componentDidUpdate(v){this.updateCytoscape(v,this.props)}componentWillUnmount(){this._cy.destroy()}render(){const{id:v,className:S,style:R}=this.props;return React.createElement("div",{ref:this.containerRef,id:v,className:S,style:R})}}var cytoscapeDagre$1={exports:{}};function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function _(){this.__data__=[],this.size=0}return _listCacheClear=_,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function _(v,S){return v===S||v!==v&&S!==S}return eq_1=_,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var _=requireEq();function v(S,R){for(var T=S.length;T--;)if(_(S[T][0],R))return T;return-1}return _assocIndexOf=v,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var _=require_assocIndexOf(),v=Array.prototype,S=v.splice;function R(T){var A=this.__data__,k=_(A,T);if(k<0)return!1;var M=A.length-1;return k==M?A.pop():S.call(A,k,1),--this.size,!0}return _listCacheDelete=R,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var _=require_assocIndexOf();function v(S){var R=this.__data__,T=_(R,S);return T<0?void 0:R[T][1]}return _listCacheGet=v,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var _=require_assocIndexOf();function v(S){return _(this.__data__,S)>-1}return _listCacheHas=v,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var _=require_assocIndexOf();function v(S,R){var T=this.__data__,A=_(T,S);return A<0?(++this.size,T.push([S,R])):T[A][1]=R,this}return _listCacheSet=v,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var _=require_listCacheClear(),v=require_listCacheDelete(),S=require_listCacheGet(),R=require_listCacheHas(),T=require_listCacheSet();function A(k){var M=-1,P=k==null?0:k.length;for(this.clear();++M<P;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_ListCache=A,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var _=require_ListCache();function v(){this.__data__=new _,this.size=0}return _stackClear=v,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function _(v){var S=this.__data__,R=S.delete(v);return this.size=S.size,R}return _stackDelete=_,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function _(v){return this.__data__.get(v)}return _stackGet=_,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function _(v){return this.__data__.has(v)}return _stackHas=_,_stackHas}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var _=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1;return _freeGlobal=_,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var _=require_freeGlobal(),v=typeof self=="object"&&self&&self.Object===Object&&self,S=_||v||Function("return this")();return _root=S,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var _=require_root(),v=_.Symbol;return _Symbol=v,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var _=require_Symbol(),v=Object.prototype,S=v.hasOwnProperty,R=v.toString,T=_?_.toStringTag:void 0;function A(k){var M=S.call(k,T),P=k[T];try{k[T]=void 0;var D=!0}catch{}var L=R.call(k);return D&&(M?k[T]=P:delete k[T]),L}return _getRawTag=A,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var _=Object.prototype,v=_.toString;function S(R){return v.call(R)}return _objectToString=S,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var _=require_Symbol(),v=require_getRawTag(),S=require_objectToString(),R="[object Null]",T="[object Undefined]",A=_?_.toStringTag:void 0;function k(M){return M==null?M===void 0?T:R:A&&A in Object(M)?v(M):S(M)}return _baseGetTag=k,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function _(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")}return isObject_1=_,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var _=require_baseGetTag(),v=requireIsObject(),S="[object AsyncFunction]",R="[object Function]",T="[object GeneratorFunction]",A="[object Proxy]";function k(M){if(!v(M))return!1;var P=_(M);return P==R||P==T||P==S||P==A}return isFunction_1=k,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var _=require_root(),v=_["__core-js_shared__"];return _coreJsData=v,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var _=require_coreJsData(),v=(function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""})();function S(R){return!!v&&v in R}return _isMasked=S,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var _=Function.prototype,v=_.toString;function S(R){if(R!=null){try{return v.call(R)}catch{}try{return R+""}catch{}}return""}return _toSource=S,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var _=requireIsFunction(),v=require_isMasked(),S=requireIsObject(),R=require_toSource(),T=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,k=Function.prototype,M=Object.prototype,P=k.toString,D=M.hasOwnProperty,L=RegExp("^"+P.call(D).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q(B){if(!S(B)||v(B))return!1;var F=_(B)?L:A;return F.test(R(B))}return _baseIsNative=q,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function _(v,S){return v?.[S]}return _getValue=_,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var _=require_baseIsNative(),v=require_getValue();function S(R,T){var A=v(R,T);return _(A)?A:void 0}return _getNative=S,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var _=require_getNative(),v=require_root(),S=_(v,"Map");return _Map=S,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var _=require_getNative(),v=_(Object,"create");return _nativeCreate=v,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var _=require_nativeCreate();function v(){this.__data__=_?_(null):{},this.size=0}return _hashClear=v,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function _(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S}return _hashDelete=_,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var _=require_nativeCreate(),v="__lodash_hash_undefined__",S=Object.prototype,R=S.hasOwnProperty;function T(A){var k=this.__data__;if(_){var M=k[A];return M===v?void 0:M}return R.call(k,A)?k[A]:void 0}return _hashGet=T,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var _=require_nativeCreate(),v=Object.prototype,S=v.hasOwnProperty;function R(T){var A=this.__data__;return _?A[T]!==void 0:S.call(A,T)}return _hashHas=R,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var _=require_nativeCreate(),v="__lodash_hash_undefined__";function S(R,T){var A=this.__data__;return this.size+=this.has(R)?0:1,A[R]=_&&T===void 0?v:T,this}return _hashSet=S,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var _=require_hashClear(),v=require_hashDelete(),S=require_hashGet(),R=require_hashHas(),T=require_hashSet();function A(k){var M=-1,P=k==null?0:k.length;for(this.clear();++M<P;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_Hash=A,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var _=require_Hash(),v=require_ListCache(),S=require_Map();function R(){this.size=0,this.__data__={hash:new _,map:new(S||v),string:new _}}return _mapCacheClear=R,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function _(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null}return _isKeyable=_,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var _=require_isKeyable();function v(S,R){var T=S.__data__;return _(R)?T[typeof R=="string"?"string":"hash"]:T.map}return _getMapData=v,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var _=require_getMapData();function v(S){var R=_(this,S).delete(S);return this.size-=R?1:0,R}return _mapCacheDelete=v,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var _=require_getMapData();function v(S){return _(this,S).get(S)}return _mapCacheGet=v,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var _=require_getMapData();function v(S){return _(this,S).has(S)}return _mapCacheHas=v,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var _=require_getMapData();function v(S,R){var T=_(this,S),A=T.size;return T.set(S,R),this.size+=T.size==A?0:1,this}return _mapCacheSet=v,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var _=require_mapCacheClear(),v=require_mapCacheDelete(),S=require_mapCacheGet(),R=require_mapCacheHas(),T=require_mapCacheSet();function A(k){var M=-1,P=k==null?0:k.length;for(this.clear();++M<P;){var D=k[M];this.set(D[0],D[1])}}return A.prototype.clear=_,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=R,A.prototype.set=T,_MapCache=A,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var _=require_ListCache(),v=require_Map(),S=require_MapCache(),R=200;function T(A,k){var M=this.__data__;if(M instanceof _){var P=M.__data__;if(!v||P.length<R-1)return P.push([A,k]),this.size=++M.size,this;M=this.__data__=new S(P)}return M.set(A,k),this.size=M.size,this}return _stackSet=T,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var _=require_ListCache(),v=require_stackClear(),S=require_stackDelete(),R=require_stackGet(),T=require_stackHas(),A=require_stackSet();function k(M){var P=this.__data__=new _(M);this.size=P.size}return k.prototype.clear=v,k.prototype.delete=S,k.prototype.get=R,k.prototype.has=T,k.prototype.set=A,_Stack=k,_Stack}var _arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function _(v,S){for(var R=-1,T=v==null?0:v.length;++R<T&&S(v[R],R,v)!==!1;);return v}return _arrayEach=_,_arrayEach}var _defineProperty,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var _=require_getNative(),v=(function(){try{var S=_(Object,"defineProperty");return S({},"",{}),S}catch{}})();return _defineProperty=v,_defineProperty}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var _=require_defineProperty();function v(S,R,T){R=="__proto__"&&_?_(S,R,{configurable:!0,enumerable:!0,value:T,writable:!0}):S[R]=T}return _baseAssignValue=v,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var _=require_baseAssignValue(),v=requireEq(),S=Object.prototype,R=S.hasOwnProperty;function T(A,k,M){var P=A[k];(!(R.call(A,k)&&v(P,M))||M===void 0&&!(k in A))&&_(A,k,M)}return _assignValue=T,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var _=require_assignValue(),v=require_baseAssignValue();function S(R,T,A,k){var M=!A;A||(A={});for(var P=-1,D=T.length;++P<D;){var L=T[P],q=k?k(A[L],R[L],L,A,R):void 0;q===void 0&&(q=R[L]),M?v(A,L,q):_(A,L,q)}return A}return _copyObject=S,_copyObject}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function _(v,S){for(var R=-1,T=Array(v);++R<v;)T[R]=S(R);return T}return _baseTimes=_,_baseTimes}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function _(v){return v!=null&&typeof v=="object"}return isObjectLike_1=_,isObjectLike_1}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var _=require_baseGetTag(),v=requireIsObjectLike(),S="[object Arguments]";function R(T){return v(T)&&_(T)==S}return _baseIsArguments=R,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var _=require_baseIsArguments(),v=requireIsObjectLike(),S=Object.prototype,R=S.hasOwnProperty,T=S.propertyIsEnumerable,A=_((function(){return arguments})())?_:function(k){return v(k)&&R.call(k,"callee")&&!T.call(k,"callee")};return isArguments_1=A,isArguments_1}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var _=Array.isArray;return isArray_1=_,isArray_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function _(){return!1}return stubFalse_1=_,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(_,v){var S=require_root(),R=requireStubFalse(),T=v&&!v.nodeType&&v,A=T&&!0&&_&&!_.nodeType&&_,k=A&&A.exports===T,M=k?S.Buffer:void 0,P=M?M.isBuffer:void 0,D=P||R;_.exports=D})(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var _=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function S(R,T){var A=typeof R;return T=T??_,!!T&&(A=="number"||A!="symbol"&&v.test(R))&&R>-1&&R%1==0&&R<T}return _isIndex=S,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var _=9007199254740991;function v(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=_}return isLength_1=v,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var _=require_baseGetTag(),v=requireIsLength(),S=requireIsObjectLike(),R="[object Arguments]",T="[object Array]",A="[object Boolean]",k="[object Date]",M="[object Error]",P="[object Function]",D="[object Map]",L="[object Number]",q="[object Object]",B="[object RegExp]",F="[object Set]",j="[object String]",z="[object WeakMap]",V="[object ArrayBuffer]",G="[object DataView]",W="[object Float32Array]",Y="[object Float64Array]",X="[object Int8Array]",ee="[object Int16Array]",re="[object Int32Array]",Q="[object Uint8Array]",ne="[object Uint8ClampedArray]",ae="[object Uint16Array]",oe="[object Uint32Array]",se={};se[W]=se[Y]=se[X]=se[ee]=se[re]=se[Q]=se[ne]=se[ae]=se[oe]=!0,se[R]=se[T]=se[V]=se[A]=se[G]=se[k]=se[M]=se[P]=se[D]=se[L]=se[q]=se[B]=se[F]=se[j]=se[z]=!1;function ce(de){return S(de)&&v(de.length)&&!!se[_(de)]}return _baseIsTypedArray=ce,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function _(v){return function(S){return v(S)}}return _baseUnary=_,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(_,v){var S=require_freeGlobal(),R=v&&!v.nodeType&&v,T=R&&!0&&_&&!_.nodeType&&_,A=T&&T.exports===R,k=A&&S.process,M=(function(){try{var P=T&&T.require&&T.require("util").types;return P||k&&k.binding&&k.binding("util")}catch{}})();_.exports=M})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var _=require_baseIsTypedArray(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isTypedArray,T=R?v(R):_;return isTypedArray_1=T,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var _=require_baseTimes(),v=requireIsArguments(),S=requireIsArray(),R=requireIsBuffer(),T=require_isIndex(),A=requireIsTypedArray(),k=Object.prototype,M=k.hasOwnProperty;function P(D,L){var q=S(D),B=!q&&v(D),F=!q&&!B&&R(D),j=!q&&!B&&!F&&A(D),z=q||B||F||j,V=z?_(D.length,String):[],G=V.length;for(var W in D)(L||M.call(D,W))&&!(z&&(W=="length"||F&&(W=="offset"||W=="parent")||j&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||T(W,G)))&&V.push(W);return V}return _arrayLikeKeys=P,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var _=Object.prototype;function v(S){var R=S&&S.constructor,T=typeof R=="function"&&R.prototype||_;return S===T}return _isPrototype=v,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function _(v,S){return function(R){return v(S(R))}}return _overArg=_,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var _=require_overArg(),v=_(Object.keys,Object);return _nativeKeys=v,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var _=require_isPrototype(),v=require_nativeKeys(),S=Object.prototype,R=S.hasOwnProperty;function T(A){if(!_(A))return v(A);var k=[];for(var M in Object(A))R.call(A,M)&&M!="constructor"&&k.push(M);return k}return _baseKeys=T,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var _=requireIsFunction(),v=requireIsLength();function S(R){return R!=null&&v(R.length)&&!_(R)}return isArrayLike_1=S,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var _=require_arrayLikeKeys(),v=require_baseKeys(),S=requireIsArrayLike();function R(T){return S(T)?_(T):v(T)}return keys_1=R,keys_1}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var _=require_copyObject(),v=requireKeys();function S(R,T){return R&&_(T,v(T),R)}return _baseAssign=S,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function _(v){var S=[];if(v!=null)for(var R in Object(v))S.push(R);return S}return _nativeKeysIn=_,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var _=requireIsObject(),v=require_isPrototype(),S=require_nativeKeysIn(),R=Object.prototype,T=R.hasOwnProperty;function A(k){if(!_(k))return S(k);var M=v(k),P=[];for(var D in k)D=="constructor"&&(M||!T.call(k,D))||P.push(D);return P}return _baseKeysIn=A,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var _=require_arrayLikeKeys(),v=require_baseKeysIn(),S=requireIsArrayLike();function R(T){return S(T)?_(T,!0):v(T)}return keysIn_1=R,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var _=require_copyObject(),v=requireKeysIn();function S(R,T){return R&&_(T,v(T),R)}return _baseAssignIn=S,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,(function(_,v){var S=require_root(),R=v&&!v.nodeType&&v,T=R&&!0&&_&&!_.nodeType&&_,A=T&&T.exports===R,k=A?S.Buffer:void 0,M=k?k.allocUnsafe:void 0;function P(D,L){if(L)return D.slice();var q=D.length,B=M?M(q):new D.constructor(q);return D.copy(B),B}_.exports=P})(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function _(v,S){var R=-1,T=v.length;for(S||(S=Array(T));++R<T;)S[R]=v[R];return S}return _copyArray=_,_copyArray}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=0,k=[];++R<T;){var M=v[R];S(M,R,v)&&(k[A++]=M)}return k}return _arrayFilter=_,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function _(){return[]}return stubArray_1=_,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var _=require_arrayFilter(),v=requireStubArray(),S=Object.prototype,R=S.propertyIsEnumerable,T=Object.getOwnPropertySymbols,A=T?function(k){return k==null?[]:(k=Object(k),_(T(k),function(M){return R.call(k,M)}))}:v;return _getSymbols=A,_getSymbols}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var _=require_copyObject(),v=require_getSymbols();function S(R,T){return _(R,v(R),T)}return _copySymbols=S,_copySymbols}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function _(v,S){for(var R=-1,T=S.length,A=v.length;++R<T;)v[A+R]=S[R];return v}return _arrayPush=_,_arrayPush}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var _=require_overArg(),v=_(Object.getPrototypeOf,Object);return _getPrototype=v,_getPrototype}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var _=require_arrayPush(),v=require_getPrototype(),S=require_getSymbols(),R=requireStubArray(),T=Object.getOwnPropertySymbols,A=T?function(k){for(var M=[];k;)_(M,S(k)),k=v(k);return M}:R;return _getSymbolsIn=A,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var _=require_copyObject(),v=require_getSymbolsIn();function S(R,T){return _(R,v(R),T)}return _copySymbolsIn=S,_copySymbolsIn}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var _=require_arrayPush(),v=requireIsArray();function S(R,T,A){var k=T(R);return v(R)?k:_(k,A(R))}return _baseGetAllKeys=S,_baseGetAllKeys}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var _=require_baseGetAllKeys(),v=require_getSymbols(),S=requireKeys();function R(T){return _(T,S,v)}return _getAllKeys=R,_getAllKeys}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var _=require_baseGetAllKeys(),v=require_getSymbolsIn(),S=requireKeysIn();function R(T){return _(T,S,v)}return _getAllKeysIn=R,_getAllKeysIn}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var _=require_getNative(),v=require_root(),S=_(v,"DataView");return _DataView=S,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var _=require_getNative(),v=require_root(),S=_(v,"Promise");return _Promise=S,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var _=require_getNative(),v=require_root(),S=_(v,"Set");return _Set=S,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var _=require_getNative(),v=require_root(),S=_(v,"WeakMap");return _WeakMap=S,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var _=require_DataView(),v=require_Map(),S=require_Promise(),R=require_Set(),T=require_WeakMap(),A=require_baseGetTag(),k=require_toSource(),M="[object Map]",P="[object Object]",D="[object Promise]",L="[object Set]",q="[object WeakMap]",B="[object DataView]",F=k(_),j=k(v),z=k(S),V=k(R),G=k(T),W=A;return(_&&W(new _(new ArrayBuffer(1)))!=B||v&&W(new v)!=M||S&&W(S.resolve())!=D||R&&W(new R)!=L||T&&W(new T)!=q)&&(W=function(Y){var X=A(Y),ee=X==P?Y.constructor:void 0,re=ee?k(ee):"";if(re)switch(re){case F:return B;case j:return M;case z:return D;case V:return L;case G:return q}return X}),_getTag=W,_getTag}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var _=Object.prototype,v=_.hasOwnProperty;function S(R){var T=R.length,A=new R.constructor(T);return T&&typeof R[0]=="string"&&v.call(R,"index")&&(A.index=R.index,A.input=R.input),A}return _initCloneArray=S,_initCloneArray}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var _=require_root(),v=_.Uint8Array;return _Uint8Array=v,_Uint8Array}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var _=require_Uint8Array();function v(S){var R=new S.constructor(S.byteLength);return new _(R).set(new _(S)),R}return _cloneArrayBuffer=v,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var _=require_cloneArrayBuffer();function v(S,R){var T=R?_(S.buffer):S.buffer;return new S.constructor(T,S.byteOffset,S.byteLength)}return _cloneDataView=v,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var _=/\w*$/;function v(S){var R=new S.constructor(S.source,_.exec(S));return R.lastIndex=S.lastIndex,R}return _cloneRegExp=v,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var _=require_Symbol(),v=_?_.prototype:void 0,S=v?v.valueOf:void 0;function R(T){return S?Object(S.call(T)):{}}return _cloneSymbol=R,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var _=require_cloneArrayBuffer();function v(S,R){var T=R?_(S.buffer):S.buffer;return new S.constructor(T,S.byteOffset,S.length)}return _cloneTypedArray=v,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var _=require_cloneArrayBuffer(),v=require_cloneDataView(),S=require_cloneRegExp(),R=require_cloneSymbol(),T=require_cloneTypedArray(),A="[object Boolean]",k="[object Date]",M="[object Map]",P="[object Number]",D="[object RegExp]",L="[object Set]",q="[object String]",B="[object Symbol]",F="[object ArrayBuffer]",j="[object DataView]",z="[object Float32Array]",V="[object Float64Array]",G="[object Int8Array]",W="[object Int16Array]",Y="[object Int32Array]",X="[object Uint8Array]",ee="[object Uint8ClampedArray]",re="[object Uint16Array]",Q="[object Uint32Array]";function ne(ae,oe,se){var ce=ae.constructor;switch(oe){case F:return _(ae);case A:case k:return new ce(+ae);case j:return v(ae,se);case z:case V:case G:case W:case Y:case X:case ee:case re:case Q:return T(ae,se);case M:return new ce;case P:case q:return new ce(ae);case D:return S(ae);case L:return new ce;case B:return R(ae)}}return _initCloneByTag=ne,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var _=requireIsObject(),v=Object.create,S=(function(){function R(){}return function(T){if(!_(T))return{};if(v)return v(T);R.prototype=T;var A=new R;return R.prototype=void 0,A}})();return _baseCreate=S,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var _=require_baseCreate(),v=require_getPrototype(),S=require_isPrototype();function R(T){return typeof T.constructor=="function"&&!S(T)?_(v(T)):{}}return _initCloneObject=R,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var _=require_getTag(),v=requireIsObjectLike(),S="[object Map]";function R(T){return v(T)&&_(T)==S}return _baseIsMap=R,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var _=require_baseIsMap(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isMap,T=R?v(R):_;return isMap_1=T,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var _=require_getTag(),v=requireIsObjectLike(),S="[object Set]";function R(T){return v(T)&&_(T)==S}return _baseIsSet=R,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var _=require_baseIsSet(),v=require_baseUnary(),S=require_nodeUtil(),R=S&&S.isSet,T=R?v(R):_;return isSet_1=T,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var _=require_Stack(),v=require_arrayEach(),S=require_assignValue(),R=require_baseAssign(),T=require_baseAssignIn(),A=require_cloneBuffer(),k=require_copyArray(),M=require_copySymbols(),P=require_copySymbolsIn(),D=require_getAllKeys(),L=require_getAllKeysIn(),q=require_getTag(),B=require_initCloneArray(),F=require_initCloneByTag(),j=require_initCloneObject(),z=requireIsArray(),V=requireIsBuffer(),G=requireIsMap(),W=requireIsObject(),Y=requireIsSet(),X=requireKeys(),ee=requireKeysIn(),re=1,Q=2,ne=4,ae="[object Arguments]",oe="[object Array]",se="[object Boolean]",ce="[object Date]",de="[object Error]",ye="[object Function]",we="[object GeneratorFunction]",ge="[object Map]",ve="[object Number]",be="[object Object]",ke="[object RegExp]",me="[object Set]",fe="[object String]",xe="[object Symbol]",Ae="[object WeakMap]",Se="[object ArrayBuffer]",Me="[object DataView]",Oe="[object Float32Array]",Ce="[object Float64Array]",$e="[object Int8Array]",Be="[object Int16Array]",Pe="[object Int32Array]",De="[object Uint8Array]",Le="[object Uint8ClampedArray]",Ne="[object Uint16Array]",tt="[object Uint32Array]",it={};it[ae]=it[oe]=it[Se]=it[Me]=it[se]=it[ce]=it[Oe]=it[Ce]=it[$e]=it[Be]=it[Pe]=it[ge]=it[ve]=it[be]=it[ke]=it[me]=it[fe]=it[xe]=it[De]=it[Le]=it[Ne]=it[tt]=!0,it[de]=it[ye]=it[Ae]=!1;function dt(pt,We,Et,st,xt,gt){var _t,St=We&re,Lt=We&Q,jt=We&ne;if(Et&&(_t=xt?Et(pt,st,xt,gt):Et(pt)),_t!==void 0)return _t;if(!W(pt))return pt;var Gt=z(pt);if(Gt){if(_t=B(pt),!St)return k(pt,_t)}else{var At=q(pt),Nt=At==ye||At==we;if(V(pt))return A(pt,St);if(At==be||At==ae||Nt&&!xt){if(_t=Lt||Nt?{}:j(pt),!St)return Lt?P(pt,T(_t,pt)):M(pt,R(_t,pt))}else{if(!it[At])return xt?pt:{};_t=F(pt,At,St)}}gt||(gt=new _);var Ct=gt.get(pt);if(Ct)return Ct;gt.set(pt,_t),Y(pt)?pt.forEach(function(Re){_t.add(dt(Re,We,Et,Re,pt,gt))}):G(pt)&&pt.forEach(function(Re,je){_t.set(je,dt(Re,We,Et,je,pt,gt))});var bt=jt?Lt?L:D:Lt?ee:X,et=Gt?void 0:bt(pt);return v(et||pt,function(Re,je){et&&(je=Re,Re=pt[je]),S(_t,je,dt(Re,We,Et,je,pt,gt))}),_t}return _baseClone=dt,_baseClone}var clone_1,hasRequiredClone;function requireClone(){if(hasRequiredClone)return clone_1;hasRequiredClone=1;var _=require_baseClone(),v=4;function S(R){return _(R,v)}return clone_1=S,clone_1}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function _(v){return function(){return v}}return constant_1=_,constant_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function _(v){return function(S,R,T){for(var A=-1,k=Object(S),M=T(S),P=M.length;P--;){var D=M[v?P:++A];if(R(k[D],D,k)===!1)break}return S}}return _createBaseFor=_,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var _=require_createBaseFor(),v=_();return _baseFor=v,_baseFor}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var _=require_baseFor(),v=requireKeys();function S(R,T){return R&&_(R,T,v)}return _baseForOwn=S,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var _=requireIsArrayLike();function v(S,R){return function(T,A){if(T==null)return T;if(!_(T))return S(T,A);for(var k=T.length,M=R?k:-1,P=Object(T);(R?M--:++M<k)&&A(P[M],M,P)!==!1;);return T}}return _createBaseEach=v,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var _=require_baseForOwn(),v=require_createBaseEach(),S=v(_);return _baseEach=S,_baseEach}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function _(v){return v}return identity_1=_,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var _=requireIdentity();function v(S){return typeof S=="function"?S:_}return _castFunction=v,_castFunction}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var _=require_arrayEach(),v=require_baseEach(),S=require_castFunction(),R=requireIsArray();function T(A,k){var M=R(A)?_:v;return M(A,S(k))}return forEach_1=T,forEach_1}var each,hasRequiredEach;function requireEach(){return hasRequiredEach||(hasRequiredEach=1,each=requireForEach()),each}var _baseFilter,hasRequired_baseFilter;function require_baseFilter(){if(hasRequired_baseFilter)return _baseFilter;hasRequired_baseFilter=1;var _=require_baseEach();function v(S,R){var T=[];return _(S,function(A,k,M){R(A,k,M)&&T.push(A)}),T}return _baseFilter=v,_baseFilter}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var _="__lodash_hash_undefined__";function v(S){return this.__data__.set(S,_),this}return _setCacheAdd=v,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function _(v){return this.__data__.has(v)}return _setCacheHas=_,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var _=require_MapCache(),v=require_setCacheAdd(),S=require_setCacheHas();function R(T){var A=-1,k=T==null?0:T.length;for(this.__data__=new _;++A<k;)this.add(T[A])}return R.prototype.add=R.prototype.push=v,R.prototype.has=S,_SetCache=R,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function _(v,S){for(var R=-1,T=v==null?0:v.length;++R<T;)if(S(v[R],R,v))return!0;return!1}return _arraySome=_,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function _(v,S){return v.has(S)}return _cacheHas=_,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var _=require_SetCache(),v=require_arraySome(),S=require_cacheHas(),R=1,T=2;function A(k,M,P,D,L,q){var B=P&R,F=k.length,j=M.length;if(F!=j&&!(B&&j>F))return!1;var z=q.get(k),V=q.get(M);if(z&&V)return z==M&&V==k;var G=-1,W=!0,Y=P&T?new _:void 0;for(q.set(k,M),q.set(M,k);++G<F;){var X=k[G],ee=M[G];if(D)var re=B?D(ee,X,G,M,k,q):D(X,ee,G,k,M,q);if(re!==void 0){if(re)continue;W=!1;break}if(Y){if(!v(M,function(Q,ne){if(!S(Y,ne)&&(X===Q||L(X,Q,P,D,q)))return Y.push(ne)})){W=!1;break}}else if(!(X===ee||L(X,ee,P,D,q))){W=!1;break}}return q.delete(k),q.delete(M),W}return _equalArrays=A,_equalArrays}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function _(v){var S=-1,R=Array(v.size);return v.forEach(function(T,A){R[++S]=[A,T]}),R}return _mapToArray=_,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function _(v){var S=-1,R=Array(v.size);return v.forEach(function(T){R[++S]=T}),R}return _setToArray=_,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var _=require_Symbol(),v=require_Uint8Array(),S=requireEq(),R=require_equalArrays(),T=require_mapToArray(),A=require_setToArray(),k=1,M=2,P="[object Boolean]",D="[object Date]",L="[object Error]",q="[object Map]",B="[object Number]",F="[object RegExp]",j="[object Set]",z="[object String]",V="[object Symbol]",G="[object ArrayBuffer]",W="[object DataView]",Y=_?_.prototype:void 0,X=Y?Y.valueOf:void 0;function ee(re,Q,ne,ae,oe,se,ce){switch(ne){case W:if(re.byteLength!=Q.byteLength||re.byteOffset!=Q.byteOffset)return!1;re=re.buffer,Q=Q.buffer;case G:return!(re.byteLength!=Q.byteLength||!se(new v(re),new v(Q)));case P:case D:case B:return S(+re,+Q);case L:return re.name==Q.name&&re.message==Q.message;case F:case z:return re==Q+"";case q:var de=T;case j:var ye=ae&k;if(de||(de=A),re.size!=Q.size&&!ye)return!1;var we=ce.get(re);if(we)return we==Q;ae|=M,ce.set(re,Q);var ge=R(de(re),de(Q),ae,oe,se,ce);return ce.delete(re),ge;case V:if(X)return X.call(re)==X.call(Q)}return!1}return _equalByTag=ee,_equalByTag}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var _=require_getAllKeys(),v=1,S=Object.prototype,R=S.hasOwnProperty;function T(A,k,M,P,D,L){var q=M&v,B=_(A),F=B.length,j=_(k),z=j.length;if(F!=z&&!q)return!1;for(var V=F;V--;){var G=B[V];if(!(q?G in k:R.call(k,G)))return!1}var W=L.get(A),Y=L.get(k);if(W&&Y)return W==k&&Y==A;var X=!0;L.set(A,k),L.set(k,A);for(var ee=q;++V<F;){G=B[V];var re=A[G],Q=k[G];if(P)var ne=q?P(Q,re,G,k,A,L):P(re,Q,G,A,k,L);if(!(ne===void 0?re===Q||D(re,Q,M,P,L):ne)){X=!1;break}ee||(ee=G=="constructor")}if(X&&!ee){var ae=A.constructor,oe=k.constructor;ae!=oe&&"constructor"in A&&"constructor"in k&&!(typeof ae=="function"&&ae instanceof ae&&typeof oe=="function"&&oe instanceof oe)&&(X=!1)}return L.delete(A),L.delete(k),X}return _equalObjects=T,_equalObjects}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var _=require_Stack(),v=require_equalArrays(),S=require_equalByTag(),R=require_equalObjects(),T=require_getTag(),A=requireIsArray(),k=requireIsBuffer(),M=requireIsTypedArray(),P=1,D="[object Arguments]",L="[object Array]",q="[object Object]",B=Object.prototype,F=B.hasOwnProperty;function j(z,V,G,W,Y,X){var ee=A(z),re=A(V),Q=ee?L:T(z),ne=re?L:T(V);Q=Q==D?q:Q,ne=ne==D?q:ne;var ae=Q==q,oe=ne==q,se=Q==ne;if(se&&k(z)){if(!k(V))return!1;ee=!0,ae=!1}if(se&&!ae)return X||(X=new _),ee||M(z)?v(z,V,G,W,Y,X):S(z,V,Q,G,W,Y,X);if(!(G&P)){var ce=ae&&F.call(z,"__wrapped__"),de=oe&&F.call(V,"__wrapped__");if(ce||de){var ye=ce?z.value():z,we=de?V.value():V;return X||(X=new _),Y(ye,we,G,W,X)}}return se?(X||(X=new _),R(z,V,G,W,Y,X)):!1}return _baseIsEqualDeep=j,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var _=require_baseIsEqualDeep(),v=requireIsObjectLike();function S(R,T,A,k,M){return R===T?!0:R==null||T==null||!v(R)&&!v(T)?R!==R&&T!==T:_(R,T,A,k,S,M)}return _baseIsEqual=S,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var _=require_Stack(),v=require_baseIsEqual(),S=1,R=2;function T(A,k,M,P){var D=M.length,L=D,q=!P;if(A==null)return!L;for(A=Object(A);D--;){var B=M[D];if(q&&B[2]?B[1]!==A[B[0]]:!(B[0]in A))return!1}for(;++D<L;){B=M[D];var F=B[0],j=A[F],z=B[1];if(q&&B[2]){if(j===void 0&&!(F in A))return!1}else{var V=new _;if(P)var G=P(j,z,F,A,k,V);if(!(G===void 0?v(z,j,S|R,P,V):G))return!1}}return!0}return _baseIsMatch=T,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var _=requireIsObject();function v(S){return S===S&&!_(S)}return _isStrictComparable=v,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var _=require_isStrictComparable(),v=requireKeys();function S(R){for(var T=v(R),A=T.length;A--;){var k=T[A],M=R[k];T[A]=[k,M,_(M)]}return T}return _getMatchData=S,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function _(v,S){return function(R){return R==null?!1:R[v]===S&&(S!==void 0||v in Object(R))}}return _matchesStrictComparable=_,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var _=require_baseIsMatch(),v=require_getMatchData(),S=require_matchesStrictComparable();function R(T){var A=v(T);return A.length==1&&A[0][2]?S(A[0][0],A[0][1]):function(k){return k===T||_(k,T,A)}}return _baseMatches=R,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var _=require_baseGetTag(),v=requireIsObjectLike(),S="[object Symbol]";function R(T){return typeof T=="symbol"||v(T)&&_(T)==S}return isSymbol_1=R,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var _=requireIsArray(),v=requireIsSymbol(),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function T(A,k){if(_(A))return!1;var M=typeof A;return M=="number"||M=="symbol"||M=="boolean"||A==null||v(A)?!0:R.test(A)||!S.test(A)||k!=null&&A in Object(k)}return _isKey=T,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var _=require_MapCache(),v="Expected a function";function S(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(v);var A=function(){var k=arguments,M=T?T.apply(this,k):k[0],P=A.cache;if(P.has(M))return P.get(M);var D=R.apply(this,k);return A.cache=P.set(M,D)||P,D};return A.cache=new(S.Cache||_),A}return S.Cache=_,memoize_1=S,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var _=requireMemoize(),v=500;function S(R){var T=_(R,function(k){return A.size===v&&A.clear(),k}),A=T.cache;return T}return _memoizeCapped=S,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var _=require_memoizeCapped(),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,R=_(function(T){var A=[];return T.charCodeAt(0)===46&&A.push(""),T.replace(v,function(k,M,P,D){A.push(P?D.replace(S,"$1"):M||k)}),A});return _stringToPath=R,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function _(v,S){for(var R=-1,T=v==null?0:v.length,A=Array(T);++R<T;)A[R]=S(v[R],R,v);return A}return _arrayMap=_,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var _=require_Symbol(),v=require_arrayMap(),S=requireIsArray(),R=requireIsSymbol(),T=_?_.prototype:void 0,A=T?T.toString:void 0;function k(M){if(typeof M=="string")return M;if(S(M))return v(M,k)+"";if(R(M))return A?A.call(M):"";var P=M+"";return P=="0"&&1/M==-1/0?"-0":P}return _baseToString=k,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var _=require_baseToString();function v(S){return S==null?"":_(S)}return toString_1=v,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var _=requireIsArray(),v=require_isKey(),S=require_stringToPath(),R=requireToString();function T(A,k){return _(A)?A:v(A,k)?[A]:S(R(A))}return _castPath=T,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var _=requireIsSymbol();function v(S){if(typeof S=="string"||_(S))return S;var R=S+"";return R=="0"&&1/S==-1/0?"-0":R}return _toKey=v,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var _=require_castPath(),v=require_toKey();function S(R,T){T=_(T,R);for(var A=0,k=T.length;R!=null&&A<k;)R=R[v(T[A++])];return A&&A==k?R:void 0}return _baseGet=S,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var _=require_baseGet();function v(S,R,T){var A=S==null?void 0:_(S,R);return A===void 0?T:A}return get_1=v,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function _(v,S){return v!=null&&S in Object(v)}return _baseHasIn=_,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var _=require_castPath(),v=requireIsArguments(),S=requireIsArray(),R=require_isIndex(),T=requireIsLength(),A=require_toKey();function k(M,P,D){P=_(P,M);for(var L=-1,q=P.length,B=!1;++L<q;){var F=A(P[L]);if(!(B=M!=null&&D(M,F)))break;M=M[F]}return B||++L!=q?B:(q=M==null?0:M.length,!!q&&T(q)&&R(F,q)&&(S(M)||v(M)))}return _hasPath=k,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var _=require_baseHasIn(),v=require_hasPath();function S(R,T){return R!=null&&v(R,T,_)}return hasIn_1=S,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var _=require_baseIsEqual(),v=requireGet(),S=requireHasIn(),R=require_isKey(),T=require_isStrictComparable(),A=require_matchesStrictComparable(),k=require_toKey(),M=1,P=2;function D(L,q){return R(L)&&T(q)?A(k(L),q):function(B){var F=v(B,L);return F===void 0&&F===q?S(B,L):_(q,F,M|P)}}return _baseMatchesProperty=D,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function _(v){return function(S){return S?.[v]}}return _baseProperty=_,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var _=require_baseGet();function v(S){return function(R){return _(R,S)}}return _basePropertyDeep=v,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var _=require_baseProperty(),v=require_basePropertyDeep(),S=require_isKey(),R=require_toKey();function T(A){return S(A)?_(R(A)):v(A)}return property_1=T,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var _=require_baseMatches(),v=require_baseMatchesProperty(),S=requireIdentity(),R=requireIsArray(),T=requireProperty();function A(k){return typeof k=="function"?k:k==null?S:typeof k=="object"?R(k)?v(k[0],k[1]):_(k):T(k)}return _baseIteratee=A,_baseIteratee}var filter_1,hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter_1;hasRequiredFilter=1;var _=require_arrayFilter(),v=require_baseFilter(),S=require_baseIteratee(),R=requireIsArray();function T(A,k){var M=R(A)?_:v;return M(A,S(k,3))}return filter_1=T,filter_1}var _baseHas,hasRequired_baseHas;function require_baseHas(){if(hasRequired_baseHas)return _baseHas;hasRequired_baseHas=1;var _=Object.prototype,v=_.hasOwnProperty;function S(R,T){return R!=null&&v.call(R,T)}return _baseHas=S,_baseHas}var has_1,hasRequiredHas;function requireHas(){if(hasRequiredHas)return has_1;hasRequiredHas=1;var _=require_baseHas(),v=require_hasPath();function S(R,T){return R!=null&&v(R,T,_)}return has_1=S,has_1}var isEmpty_1,hasRequiredIsEmpty;function requireIsEmpty(){if(hasRequiredIsEmpty)return isEmpty_1;hasRequiredIsEmpty=1;var _=require_baseKeys(),v=require_getTag(),S=requireIsArguments(),R=requireIsArray(),T=requireIsArrayLike(),A=requireIsBuffer(),k=require_isPrototype(),M=requireIsTypedArray(),P="[object Map]",D="[object Set]",L=Object.prototype,q=L.hasOwnProperty;function B(F){if(F==null)return!0;if(T(F)&&(R(F)||typeof F=="string"||typeof F.splice=="function"||A(F)||M(F)||S(F)))return!F.length;var j=v(F);if(j==P||j==D)return!F.size;if(k(F))return!_(F).length;for(var z in F)if(q.call(F,z))return!1;return!0}return isEmpty_1=B,isEmpty_1}var isUndefined_1,hasRequiredIsUndefined;function requireIsUndefined(){if(hasRequiredIsUndefined)return isUndefined_1;hasRequiredIsUndefined=1;function _(v){return v===void 0}return isUndefined_1=_,isUndefined_1}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var _=require_baseEach(),v=requireIsArrayLike();function S(R,T){var A=-1,k=v(R)?Array(R.length):[];return _(R,function(M,P,D){k[++A]=T(M,P,D)}),k}return _baseMap=S,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var _=require_arrayMap(),v=require_baseIteratee(),S=require_baseMap(),R=requireIsArray();function T(A,k){var M=R(A)?_:S;return M(A,v(k,3))}return map_1=T,map_1}var _arrayReduce,hasRequired_arrayReduce;function require_arrayReduce(){if(hasRequired_arrayReduce)return _arrayReduce;hasRequired_arrayReduce=1;function _(v,S,R,T){var A=-1,k=v==null?0:v.length;for(T&&k&&(R=v[++A]);++A<k;)R=S(R,v[A],A,v);return R}return _arrayReduce=_,_arrayReduce}var _baseReduce,hasRequired_baseReduce;function require_baseReduce(){if(hasRequired_baseReduce)return _baseReduce;hasRequired_baseReduce=1;function _(v,S,R,T,A){return A(v,function(k,M,P){R=T?(T=!1,k):S(R,k,M,P)}),R}return _baseReduce=_,_baseReduce}var reduce_1,hasRequiredReduce;function requireReduce(){if(hasRequiredReduce)return reduce_1;hasRequiredReduce=1;var _=require_arrayReduce(),v=require_baseEach(),S=require_baseIteratee(),R=require_baseReduce(),T=requireIsArray();function A(k,M,P){var D=T(k)?_:R,L=arguments.length<3;return D(k,S(M,4),P,L,v)}return reduce_1=A,reduce_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var _=require_baseGetTag(),v=requireIsArray(),S=requireIsObjectLike(),R="[object String]";function T(A){return typeof A=="string"||!v(A)&&S(A)&&_(A)==R}return isString_1=T,isString_1}var _asciiSize,hasRequired_asciiSize;function require_asciiSize(){if(hasRequired_asciiSize)return _asciiSize;hasRequired_asciiSize=1;var _=require_baseProperty(),v=_("length");return _asciiSize=v,_asciiSize}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var _="\\ud800-\\udfff",v="\\u0300-\\u036f",S="\\ufe20-\\ufe2f",R="\\u20d0-\\u20ff",T=v+S+R,A="\\ufe0e\\ufe0f",k="\\u200d",M=RegExp("["+k+_+T+A+"]");function P(D){return M.test(D)}return _hasUnicode=P,_hasUnicode}var _unicodeSize,hasRequired_unicodeSize;function require_unicodeSize(){if(hasRequired_unicodeSize)return _unicodeSize;hasRequired_unicodeSize=1;var _="\\ud800-\\udfff",v="\\u0300-\\u036f",S="\\ufe20-\\ufe2f",R="\\u20d0-\\u20ff",T=v+S+R,A="\\ufe0e\\ufe0f",k="["+_+"]",M="["+T+"]",P="\\ud83c[\\udffb-\\udfff]",D="(?:"+M+"|"+P+")",L="[^"+_+"]",q="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",j=D+"?",z="["+A+"]?",V="(?:"+F+"(?:"+[L,q,B].join("|")+")"+z+j+")*",G=z+j+V,W="(?:"+[L+M+"?",M,q,B,k].join("|")+")",Y=RegExp(P+"(?="+P+")|"+W+G,"g");function X(ee){for(var re=Y.lastIndex=0;Y.test(ee);)++re;return re}return _unicodeSize=X,_unicodeSize}var _stringSize,hasRequired_stringSize;function require_stringSize(){if(hasRequired_stringSize)return _stringSize;hasRequired_stringSize=1;var _=require_asciiSize(),v=require_hasUnicode(),S=require_unicodeSize();function R(T){return v(T)?S(T):_(T)}return _stringSize=R,_stringSize}var size_1,hasRequiredSize;function requireSize(){if(hasRequiredSize)return size_1;hasRequiredSize=1;var _=require_baseKeys(),v=require_getTag(),S=requireIsArrayLike(),R=requireIsString(),T=require_stringSize(),A="[object Map]",k="[object Set]";function M(P){if(P==null)return 0;if(S(P))return R(P)?T(P):P.length;var D=v(P);return D==A||D==k?P.size:_(P).length}return size_1=M,size_1}var transform_1,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform_1;hasRequiredTransform=1;var _=require_arrayEach(),v=require_baseCreate(),S=require_baseForOwn(),R=require_baseIteratee(),T=require_getPrototype(),A=requireIsArray(),k=requireIsBuffer(),M=requireIsFunction(),P=requireIsObject(),D=requireIsTypedArray();function L(q,B,F){var j=A(q),z=j||k(q)||D(q);if(B=R(B,4),F==null){var V=q&&q.constructor;z?F=j?new V:[]:P(q)?F=M(V)?v(T(q)):{}:F={}}return(z?_:S)(q,function(G,W,Y){return B(F,G,W,Y)}),F}return transform_1=L,transform_1}var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var _=require_Symbol(),v=requireIsArguments(),S=requireIsArray(),R=_?_.isConcatSpreadable:void 0;function T(A){return S(A)||v(A)||!!(R&&A&&A[R])}return _isFlattenable=T,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var _=require_arrayPush(),v=require_isFlattenable();function S(R,T,A,k,M){var P=-1,D=R.length;for(A||(A=v),M||(M=[]);++P<D;){var L=R[P];T>0&&A(L)?T>1?S(L,T-1,A,k,M):_(M,L):k||(M[M.length]=L)}return M}return _baseFlatten=S,_baseFlatten}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function _(v,S,R){switch(R.length){case 0:return v.call(S);case 1:return v.call(S,R[0]);case 2:return v.call(S,R[0],R[1]);case 3:return v.call(S,R[0],R[1],R[2])}return v.apply(S,R)}return _apply=_,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var _=require_apply(),v=Math.max;function S(R,T,A){return T=v(T===void 0?R.length-1:T,0),function(){for(var k=arguments,M=-1,P=v(k.length-T,0),D=Array(P);++M<P;)D[M]=k[T+M];M=-1;for(var L=Array(T+1);++M<T;)L[M]=k[M];return L[T]=A(D),_(R,this,L)}}return _overRest=S,_overRest}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var _=requireConstant(),v=require_defineProperty(),S=requireIdentity(),R=v?function(T,A){return v(T,"toString",{configurable:!0,enumerable:!1,value:_(A),writable:!0})}:S;return _baseSetToString=R,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var _=800,v=16,S=Date.now;function R(T){var A=0,k=0;return function(){var M=S(),P=v-(M-k);if(k=M,P>0){if(++A>=_)return arguments[0]}else A=0;return T.apply(void 0,arguments)}}return _shortOut=R,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var _=require_baseSetToString(),v=require_shortOut(),S=v(_);return _setToString=S,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var _=requireIdentity(),v=require_overRest(),S=require_setToString();function R(T,A){return S(v(T,A,_),T+"")}return _baseRest=R,_baseRest}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function _(v,S,R,T){for(var A=v.length,k=R+(T?1:-1);T?k--:++k<A;)if(S(v[k],k,v))return k;return-1}return _baseFindIndex=_,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function _(v){return v!==v}return _baseIsNaN=_,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function _(v,S,R){for(var T=R-1,A=v.length;++T<A;)if(v[T]===S)return T;return-1}return _strictIndexOf=_,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var _=require_baseFindIndex(),v=require_baseIsNaN(),S=require_strictIndexOf();function R(T,A,k){return A===A?S(T,A,k):_(T,v,k)}return _baseIndexOf=R,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var _=require_baseIndexOf();function v(S,R){var T=S==null?0:S.length;return!!T&&_(S,R,0)>-1}return _arrayIncludes=v,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function _(v,S,R){for(var T=-1,A=v==null?0:v.length;++T<A;)if(R(S,v[T]))return!0;return!1}return _arrayIncludesWith=_,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function _(){}return noop_1=_,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var _=require_Set(),v=requireNoop(),S=require_setToArray(),R=1/0,T=_&&1/S(new _([,-0]))[1]==R?function(A){return new _(A)}:v;return _createSet=T,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var _=require_SetCache(),v=require_arrayIncludes(),S=require_arrayIncludesWith(),R=require_cacheHas(),T=require_createSet(),A=require_setToArray(),k=200;function M(P,D,L){var q=-1,B=v,F=P.length,j=!0,z=[],V=z;if(L)j=!1,B=S;else if(F>=k){var G=D?null:T(P);if(G)return A(G);j=!1,B=R,V=new _}else V=D?[]:z;e:for(;++q<F;){var W=P[q],Y=D?D(W):W;if(W=L||W!==0?W:0,j&&Y===Y){for(var X=V.length;X--;)if(V[X]===Y)continue e;D&&V.push(Y),z.push(W)}else B(V,Y,L)||(V!==z&&V.push(Y),z.push(W))}return z}return _baseUniq=M,_baseUniq}var isArrayLikeObject_1,hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var _=requireIsArrayLike(),v=requireIsObjectLike();function S(R){return v(R)&&_(R)}return isArrayLikeObject_1=S,isArrayLikeObject_1}var union_1,hasRequiredUnion;function requireUnion(){if(hasRequiredUnion)return union_1;hasRequiredUnion=1;var _=require_baseFlatten(),v=require_baseRest(),S=require_baseUniq(),R=requireIsArrayLikeObject(),T=v(function(A){return S(_(A,1,R,!0))});return union_1=T,union_1}var _baseValues,hasRequired_baseValues;function require_baseValues(){if(hasRequired_baseValues)return _baseValues;hasRequired_baseValues=1;var _=require_arrayMap();function v(S,R){return _(R,function(T){return S[T]})}return _baseValues=v,_baseValues}var values_1,hasRequiredValues;function requireValues(){if(hasRequiredValues)return values_1;hasRequiredValues=1;var _=require_baseValues(),v=requireKeys();function S(R){return R==null?[]:_(R,v(R))}return values_1=S,values_1}var lodash_1$1,hasRequiredLodash$1;function requireLodash$1(){if(hasRequiredLodash$1)return lodash_1$1;hasRequiredLodash$1=1;var _;if(typeof commonjsRequire=="function")try{_={clone:requireClone(),constant:requireConstant(),each:requireEach(),filter:requireFilter(),has:requireHas(),isArray:requireIsArray(),isEmpty:requireIsEmpty(),isFunction:requireIsFunction(),isUndefined:requireIsUndefined(),keys:requireKeys(),map:requireMap(),reduce:requireReduce(),size:requireSize(),transform:requireTransform(),union:requireUnion(),values:requireValues()}}catch{}return _||(_=window._),lodash_1$1=_,lodash_1$1}var graph,hasRequiredGraph;function requireGraph(){if(hasRequiredGraph)return graph;hasRequiredGraph=1;var _=requireLodash$1();graph=T;var v="\0",S="\0",R="";function T(L){this._isDirected=_.has(L,"directed")?L.directed:!0,this._isMultigraph=_.has(L,"multigraph")?L.multigraph:!1,this._isCompound=_.has(L,"compound")?L.compound:!1,this._label=void 0,this._defaultNodeLabelFn=_.constant(void 0),this._defaultEdgeLabelFn=_.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}T.prototype._nodeCount=0,T.prototype._edgeCount=0,T.prototype.isDirected=function(){return this._isDirected},T.prototype.isMultigraph=function(){return this._isMultigraph},T.prototype.isCompound=function(){return this._isCompound},T.prototype.setGraph=function(L){return this._label=L,this},T.prototype.graph=function(){return this._label},T.prototype.setDefaultNodeLabel=function(L){return _.isFunction(L)||(L=_.constant(L)),this._defaultNodeLabelFn=L,this},T.prototype.nodeCount=function(){return this._nodeCount},T.prototype.nodes=function(){return _.keys(this._nodes)},T.prototype.sources=function(){var L=this;return _.filter(this.nodes(),function(q){return _.isEmpty(L._in[q])})},T.prototype.sinks=function(){var L=this;return _.filter(this.nodes(),function(q){return _.isEmpty(L._out[q])})},T.prototype.setNodes=function(L,q){var B=arguments,F=this;return _.each(L,function(j){B.length>1?F.setNode(j,q):F.setNode(j)}),this},T.prototype.setNode=function(L,q){return _.has(this._nodes,L)?(arguments.length>1&&(this._nodes[L]=q),this):(this._nodes[L]=arguments.length>1?q:this._defaultNodeLabelFn(L),this._isCompound&&(this._parent[L]=S,this._children[L]={},this._children[S][L]=!0),this._in[L]={},this._preds[L]={},this._out[L]={},this._sucs[L]={},++this._nodeCount,this)},T.prototype.node=function(L){return this._nodes[L]},T.prototype.hasNode=function(L){return _.has(this._nodes,L)},T.prototype.removeNode=function(L){var q=this;if(_.has(this._nodes,L)){var B=function(F){q.removeEdge(q._edgeObjs[F])};delete this._nodes[L],this._isCompound&&(this._removeFromParentsChildList(L),delete this._parent[L],_.each(this.children(L),function(F){q.setParent(F)}),delete this._children[L]),_.each(_.keys(this._in[L]),B),delete this._in[L],delete this._preds[L],_.each(_.keys(this._out[L]),B),delete this._out[L],delete this._sucs[L],--this._nodeCount}return this},T.prototype.setParent=function(L,q){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_.isUndefined(q))q=S;else{q+="";for(var B=q;!_.isUndefined(B);B=this.parent(B))if(B===L)throw new Error("Setting "+q+" as parent of "+L+" would create a cycle");this.setNode(q)}return this.setNode(L),this._removeFromParentsChildList(L),this._parent[L]=q,this._children[q][L]=!0,this},T.prototype._removeFromParentsChildList=function(L){delete this._children[this._parent[L]][L]},T.prototype.parent=function(L){if(this._isCompound){var q=this._parent[L];if(q!==S)return q}},T.prototype.children=function(L){if(_.isUndefined(L)&&(L=S),this._isCompound){var q=this._children[L];if(q)return _.keys(q)}else{if(L===S)return this.nodes();if(this.hasNode(L))return[]}},T.prototype.predecessors=function(L){var q=this._preds[L];if(q)return _.keys(q)},T.prototype.successors=function(L){var q=this._sucs[L];if(q)return _.keys(q)},T.prototype.neighbors=function(L){var q=this.predecessors(L);if(q)return _.union(q,this.successors(L))},T.prototype.isLeaf=function(L){var q;return this.isDirected()?q=this.successors(L):q=this.neighbors(L),q.length===0},T.prototype.filterNodes=function(L){var q=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});q.setGraph(this.graph());var B=this;_.each(this._nodes,function(z,V){L(V)&&q.setNode(V,z)}),_.each(this._edgeObjs,function(z){q.hasNode(z.v)&&q.hasNode(z.w)&&q.setEdge(z,B.edge(z))});var F={};function j(z){var V=B.parent(z);return V===void 0||q.hasNode(V)?(F[z]=V,V):V in F?F[V]:j(V)}return this._isCompound&&_.each(q.nodes(),function(z){q.setParent(z,j(z))}),q},T.prototype.setDefaultEdgeLabel=function(L){return _.isFunction(L)||(L=_.constant(L)),this._defaultEdgeLabelFn=L,this},T.prototype.edgeCount=function(){return this._edgeCount},T.prototype.edges=function(){return _.values(this._edgeObjs)},T.prototype.setPath=function(L,q){var B=this,F=arguments;return _.reduce(L,function(j,z){return F.length>1?B.setEdge(j,z,q):B.setEdge(j,z),z}),this},T.prototype.setEdge=function(){var L,q,B,F,j=!1,z=arguments[0];typeof z=="object"&&z!==null&&"v"in z?(L=z.v,q=z.w,B=z.name,arguments.length===2&&(F=arguments[1],j=!0)):(L=z,q=arguments[1],B=arguments[3],arguments.length>2&&(F=arguments[2],j=!0)),L=""+L,q=""+q,_.isUndefined(B)||(B=""+B);var V=M(this._isDirected,L,q,B);if(_.has(this._edgeLabels,V))return j&&(this._edgeLabels[V]=F),this;if(!_.isUndefined(B)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(L),this.setNode(q),this._edgeLabels[V]=j?F:this._defaultEdgeLabelFn(L,q,B);var G=P(this._isDirected,L,q,B);return L=G.v,q=G.w,Object.freeze(G),this._edgeObjs[V]=G,A(this._preds[q],L),A(this._sucs[L],q),this._in[q][V]=G,this._out[L][V]=G,this._edgeCount++,this},T.prototype.edge=function(L,q,B){var F=arguments.length===1?D(this._isDirected,arguments[0]):M(this._isDirected,L,q,B);return this._edgeLabels[F]},T.prototype.hasEdge=function(L,q,B){var F=arguments.length===1?D(this._isDirected,arguments[0]):M(this._isDirected,L,q,B);return _.has(this._edgeLabels,F)},T.prototype.removeEdge=function(L,q,B){var F=arguments.length===1?D(this._isDirected,arguments[0]):M(this._isDirected,L,q,B),j=this._edgeObjs[F];return j&&(L=j.v,q=j.w,delete this._edgeLabels[F],delete this._edgeObjs[F],k(this._preds[q],L),k(this._sucs[L],q),delete this._in[q][F],delete this._out[L][F],this._edgeCount--),this},T.prototype.inEdges=function(L,q){var B=this._in[L];if(B){var F=_.values(B);return q?_.filter(F,function(j){return j.v===q}):F}},T.prototype.outEdges=function(L,q){var B=this._out[L];if(B){var F=_.values(B);return q?_.filter(F,function(j){return j.w===q}):F}},T.prototype.nodeEdges=function(L,q){var B=this.inEdges(L,q);if(B)return B.concat(this.outEdges(L,q))};function A(L,q){L[q]?L[q]++:L[q]=1}function k(L,q){--L[q]||delete L[q]}function M(L,q,B,F){var j=""+q,z=""+B;if(!L&&j>z){var V=j;j=z,z=V}return j+R+z+R+(_.isUndefined(F)?v:F)}function P(L,q,B,F){var j=""+q,z=""+B;if(!L&&j>z){var V=j;j=z,z=V}var G={v:j,w:z};return F&&(G.name=F),G}function D(L,q){return M(L,q.v,q.w,q.name)}return graph}var version$1,hasRequiredVersion$1;function requireVersion$1(){return hasRequiredVersion$1||(hasRequiredVersion$1=1,version$1="2.1.8"),version$1}var lib,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib={Graph:requireGraph(),version:requireVersion$1()}),lib}var json,hasRequiredJson;function requireJson(){if(hasRequiredJson)return json;hasRequiredJson=1;var _=requireLodash$1(),v=requireGraph();json={write:S,read:A};function S(k){var M={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:R(k),edges:T(k)};return _.isUndefined(k.graph())||(M.value=_.clone(k.graph())),M}function R(k){return _.map(k.nodes(),function(M){var P=k.node(M),D=k.parent(M),L={v:M};return _.isUndefined(P)||(L.value=P),_.isUndefined(D)||(L.parent=D),L})}function T(k){return _.map(k.edges(),function(M){var P=k.edge(M),D={v:M.v,w:M.w};return _.isUndefined(M.name)||(D.name=M.name),_.isUndefined(P)||(D.value=P),D})}function A(k){var M=new v(k.options).setGraph(k.value);return _.each(k.nodes,function(P){M.setNode(P.v,P.value),P.parent&&M.setParent(P.v,P.parent)}),_.each(k.edges,function(P){M.setEdge({v:P.v,w:P.w,name:P.name},P.value)}),M}return json}var components_1,hasRequiredComponents;function requireComponents(){if(hasRequiredComponents)return components_1;hasRequiredComponents=1;var _=requireLodash$1();components_1=v;function v(S){var R={},T=[],A;function k(M){_.has(R,M)||(R[M]=!0,A.push(M),_.each(S.successors(M),k),_.each(S.predecessors(M),k))}return _.each(S.nodes(),function(M){A=[],k(M),A.length&&T.push(A)}),T}return components_1}var priorityQueue,hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1;var _=requireLodash$1();priorityQueue=v;function v(){this._arr=[],this._keyIndices={}}return v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(S){return S.key})},v.prototype.has=function(S){return _.has(this._keyIndices,S)},v.prototype.priority=function(S){var R=this._keyIndices[S];if(R!==void 0)return this._arr[R].priority},v.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(S,R){var T=this._keyIndices;if(S=String(S),!_.has(T,S)){var A=this._arr,k=A.length;return T[S]=k,A.push({key:S,priority:R}),this._decrease(k),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},v.prototype.decrease=function(S,R){var T=this._keyIndices[S];if(R>this._arr[T].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[T].priority+" New: "+R);this._arr[T].priority=R,this._decrease(T)},v.prototype._heapify=function(S){var R=this._arr,T=2*S,A=T+1,k=S;T<R.length&&(k=R[T].priority<R[k].priority?T:k,A<R.length&&(k=R[A].priority<R[k].priority?A:k),k!==S&&(this._swap(S,k),this._heapify(k)))},v.prototype._decrease=function(S){for(var R=this._arr,T=R[S].priority,A;S!==0&&(A=S>>1,!(R[A].priority<T));)this._swap(S,A),S=A},v.prototype._swap=function(S,R){var T=this._arr,A=this._keyIndices,k=T[S],M=T[R];T[S]=M,T[R]=k,A[M.key]=S,A[k.key]=R},priorityQueue}var dijkstra_1,hasRequiredDijkstra;function requireDijkstra(){if(hasRequiredDijkstra)return dijkstra_1;hasRequiredDijkstra=1;var _=requireLodash$1(),v=requirePriorityQueue();dijkstra_1=R;var S=_.constant(1);function R(A,k,M,P){return T(A,String(k),M||S,P||function(D){return A.outEdges(D)})}function T(A,k,M,P){var D={},L=new v,q,B,F=function(j){var z=j.v!==q?j.v:j.w,V=D[z],G=M(j),W=B.distance+G;if(G<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+j+" Weight: "+G);W<V.distance&&(V.distance=W,V.predecessor=q,L.decrease(z,W))};for(A.nodes().forEach(function(j){var z=j===k?0:Number.POSITIVE_INFINITY;D[j]={distance:z},L.add(j,z)});L.size()>0&&(q=L.removeMin(),B=D[q],B.distance!==Number.POSITIVE_INFINITY);)P(q).forEach(F);return D}return dijkstra_1}var dijkstraAll_1,hasRequiredDijkstraAll;function requireDijkstraAll(){if(hasRequiredDijkstraAll)return dijkstraAll_1;hasRequiredDijkstraAll=1;var _=requireDijkstra(),v=requireLodash$1();dijkstraAll_1=S;function S(R,T,A){return v.transform(R.nodes(),function(k,M){k[M]=_(R,M,T,A)},{})}return dijkstraAll_1}var tarjan_1,hasRequiredTarjan;function requireTarjan(){if(hasRequiredTarjan)return tarjan_1;hasRequiredTarjan=1;var _=requireLodash$1();tarjan_1=v;function v(S){var R=0,T=[],A={},k=[];function M(P){var D=A[P]={onStack:!0,lowlink:R,index:R++};if(T.push(P),S.successors(P).forEach(function(B){_.has(A,B)?A[B].onStack&&(D.lowlink=Math.min(D.lowlink,A[B].index)):(M(B),D.lowlink=Math.min(D.lowlink,A[B].lowlink))}),D.lowlink===D.index){var L=[],q;do q=T.pop(),A[q].onStack=!1,L.push(q);while(P!==q);k.push(L)}}return S.nodes().forEach(function(P){_.has(A,P)||M(P)}),k}return tarjan_1}var findCycles_1,hasRequiredFindCycles;function requireFindCycles(){if(hasRequiredFindCycles)return findCycles_1;hasRequiredFindCycles=1;var _=requireLodash$1(),v=requireTarjan();findCycles_1=S;function S(R){return _.filter(v(R),function(T){return T.length>1||T.length===1&&R.hasEdge(T[0],T[0])})}return findCycles_1}var floydWarshall_1,hasRequiredFloydWarshall;function requireFloydWarshall(){if(hasRequiredFloydWarshall)return floydWarshall_1;hasRequiredFloydWarshall=1;var _=requireLodash$1();floydWarshall_1=S;var v=_.constant(1);function S(T,A,k){return R(T,A||v,k||function(M){return T.outEdges(M)})}function R(T,A,k){var M={},P=T.nodes();return P.forEach(function(D){M[D]={},M[D][D]={distance:0},P.forEach(function(L){D!==L&&(M[D][L]={distance:Number.POSITIVE_INFINITY})}),k(D).forEach(function(L){var q=L.v===D?L.w:L.v,B=A(L);M[D][q]={distance:B,predecessor:D}})}),P.forEach(function(D){var L=M[D];P.forEach(function(q){var B=M[q];P.forEach(function(F){var j=B[D],z=L[F],V=B[F],G=j.distance+z.distance;G<V.distance&&(V.distance=G,V.predecessor=z.predecessor)})})}),M}return floydWarshall_1}var topsort_1,hasRequiredTopsort;function requireTopsort(){if(hasRequiredTopsort)return topsort_1;hasRequiredTopsort=1;var _=requireLodash$1();topsort_1=v,v.CycleException=S;function v(R){var T={},A={},k=[];function M(P){if(_.has(A,P))throw new S;_.has(T,P)||(A[P]=!0,T[P]=!0,_.each(R.predecessors(P),M),delete A[P],k.push(P))}if(_.each(R.sinks(),M),_.size(T)!==R.nodeCount())throw new S;return k}function S(){}return S.prototype=new Error,topsort_1}var isAcyclic_1,hasRequiredIsAcyclic;function requireIsAcyclic(){if(hasRequiredIsAcyclic)return isAcyclic_1;hasRequiredIsAcyclic=1;var _=requireTopsort();isAcyclic_1=v;function v(S){try{_(S)}catch(R){if(R instanceof _.CycleException)return!1;throw R}return!0}return isAcyclic_1}var dfs_1,hasRequiredDfs;function requireDfs(){if(hasRequiredDfs)return dfs_1;hasRequiredDfs=1;var _=requireLodash$1();dfs_1=v;function v(R,T,A){_.isArray(T)||(T=[T]);var k=(R.isDirected()?R.successors:R.neighbors).bind(R),M=[],P={};return _.each(T,function(D){if(!R.hasNode(D))throw new Error("Graph does not have node: "+D);S(R,D,A==="post",P,k,M)}),M}function S(R,T,A,k,M,P){_.has(k,T)||(k[T]=!0,A||P.push(T),_.each(M(T),function(D){S(R,D,A,k,M,P)}),A&&P.push(T))}return dfs_1}var postorder_1,hasRequiredPostorder;function requirePostorder(){if(hasRequiredPostorder)return postorder_1;hasRequiredPostorder=1;var _=requireDfs();postorder_1=v;function v(S,R){return _(S,R,"post")}return postorder_1}var preorder_1,hasRequiredPreorder;function requirePreorder(){if(hasRequiredPreorder)return preorder_1;hasRequiredPreorder=1;var _=requireDfs();preorder_1=v;function v(S,R){return _(S,R,"pre")}return preorder_1}var prim_1,hasRequiredPrim;function requirePrim(){if(hasRequiredPrim)return prim_1;hasRequiredPrim=1;var _=requireLodash$1(),v=requireGraph(),S=requirePriorityQueue();prim_1=R;function R(T,A){var k=new v,M={},P=new S,D;function L(B){var F=B.v===D?B.w:B.v,j=P.priority(F);if(j!==void 0){var z=A(B);z<j&&(M[F]=D,P.decrease(F,z))}}if(T.nodeCount()===0)return k;_.each(T.nodes(),function(B){P.add(B,Number.POSITIVE_INFINITY),k.setNode(B)}),P.decrease(T.nodes()[0],0);for(var q=!1;P.size()>0;){if(D=P.removeMin(),_.has(M,D))k.setEdge(D,M[D]);else{if(q)throw new Error("Input graph is not connected: "+T);q=!0}T.nodeEdges(D).forEach(L)}return k}return prim_1}var alg,hasRequiredAlg;function requireAlg(){return hasRequiredAlg||(hasRequiredAlg=1,alg={components:requireComponents(),dijkstra:requireDijkstra(),dijkstraAll:requireDijkstraAll(),findCycles:requireFindCycles(),floydWarshall:requireFloydWarshall(),isAcyclic:requireIsAcyclic(),postorder:requirePostorder(),preorder:requirePreorder(),prim:requirePrim(),tarjan:requireTarjan(),topsort:requireTopsort()}),alg}var graphlib,hasRequiredGraphlib$1;function requireGraphlib$1(){if(hasRequiredGraphlib$1)return graphlib;hasRequiredGraphlib$1=1;var _=requireLib();return graphlib={Graph:_.Graph,json:requireJson(),alg:requireAlg(),version:_.version},graphlib}var graphlib_1,hasRequiredGraphlib;function requireGraphlib(){if(hasRequiredGraphlib)return graphlib_1;hasRequiredGraphlib=1;var _;if(typeof commonjsRequire=="function")try{_=requireGraphlib$1()}catch{}return _||(_=window.graphlib),graphlib_1=_,graphlib_1}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var _=require_baseClone(),v=1,S=4;function R(T){return _(T,v|S)}return cloneDeep_1=R,cloneDeep_1}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var _=requireEq(),v=requireIsArrayLike(),S=require_isIndex(),R=requireIsObject();function T(A,k,M){if(!R(M))return!1;var P=typeof k;return(P=="number"?v(M)&&S(k,M.length):P=="string"&&k in M)?_(M[k],A):!1}return _isIterateeCall=T,_isIterateeCall}var defaults_1,hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults_1;hasRequiredDefaults=1;var _=require_baseRest(),v=requireEq(),S=require_isIterateeCall(),R=requireKeysIn(),T=Object.prototype,A=T.hasOwnProperty,k=_(function(M,P){M=Object(M);var D=-1,L=P.length,q=L>2?P[2]:void 0;for(q&&S(P[0],P[1],q)&&(L=1);++D<L;)for(var B=P[D],F=R(B),j=-1,z=F.length;++j<z;){var V=F[j],G=M[V];(G===void 0||v(G,T[V])&&!A.call(M,V))&&(M[V]=B[V])}return M});return defaults_1=k,defaults_1}var _createFind,hasRequired_createFind;function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var _=require_baseIteratee(),v=requireIsArrayLike(),S=requireKeys();function R(T){return function(A,k,M){var P=Object(A);if(!v(A)){var D=_(k,3);A=S(A),k=function(q){return D(P[q],q,P)}}var L=T(A,k,M);return L>-1?P[D?A[L]:L]:void 0}}return _createFind=R,_createFind}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var _=/\s/;function v(S){for(var R=S.length;R--&&_.test(S.charAt(R)););return R}return _trimmedEndIndex=v,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var _=require_trimmedEndIndex(),v=/^\s+/;function S(R){return R&&R.slice(0,_(R)+1).replace(v,"")}return _baseTrim=S,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var _=require_baseTrim(),v=requireIsObject(),S=requireIsSymbol(),R=NaN,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;function P(D){if(typeof D=="number")return D;if(S(D))return R;if(v(D)){var L=typeof D.valueOf=="function"?D.valueOf():D;D=v(L)?L+"":L}if(typeof D!="string")return D===0?D:+D;D=_(D);var q=A.test(D);return q||k.test(D)?M(D.slice(2),q?2:8):T.test(D)?R:+D}return toNumber_1=P,toNumber_1}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var _=requireToNumber(),v=1/0,S=17976931348623157e292;function R(T){if(!T)return T===0?T:0;if(T=_(T),T===v||T===-v){var A=T<0?-1:1;return A*S}return T===T?T:0}return toFinite_1=R,toFinite_1}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var _=requireToFinite();function v(S){var R=_(S),T=R%1;return R===R?T?R-T:R:0}return toInteger_1=v,toInteger_1}var findIndex_1,hasRequiredFindIndex;function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var _=require_baseFindIndex(),v=require_baseIteratee(),S=requireToInteger(),R=Math.max;function T(A,k,M){var P=A==null?0:A.length;if(!P)return-1;var D=M==null?0:S(M);return D<0&&(D=R(P+D,0)),_(A,v(k,3),D)}return findIndex_1=T,findIndex_1}var find_1,hasRequiredFind;function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var _=require_createFind(),v=requireFindIndex(),S=_(v);return find_1=S,find_1}var flatten_1,hasRequiredFlatten;function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var _=require_baseFlatten();function v(S){var R=S==null?0:S.length;return R?_(S,1):[]}return flatten_1=v,flatten_1}var forIn_1,hasRequiredForIn;function requireForIn(){if(hasRequiredForIn)return forIn_1;hasRequiredForIn=1;var _=require_baseFor(),v=require_castFunction(),S=requireKeysIn();function R(T,A){return T==null?T:_(T,v(A),S)}return forIn_1=R,forIn_1}var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function _(v){var S=v==null?0:v.length;return S?v[S-1]:void 0}return last_1=_,last_1}var mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var _=require_baseAssignValue(),v=require_baseForOwn(),S=require_baseIteratee();function R(T,A){var k={};return A=S(A,3),v(T,function(M,P,D){_(k,P,A(M,P,D))}),k}return mapValues_1=R,mapValues_1}var _baseExtremum,hasRequired_baseExtremum;function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var _=requireIsSymbol();function v(S,R,T){for(var A=-1,k=S.length;++A<k;){var M=S[A],P=R(M);if(P!=null&&(D===void 0?P===P&&!_(P):T(P,D)))var D=P,L=M}return L}return _baseExtremum=v,_baseExtremum}var _baseGt,hasRequired_baseGt;function require_baseGt(){if(hasRequired_baseGt)return _baseGt;hasRequired_baseGt=1;function _(v,S){return v>S}return _baseGt=_,_baseGt}var max_1,hasRequiredMax;function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var _=require_baseExtremum(),v=require_baseGt(),S=requireIdentity();function R(T){return T&&T.length?_(T,S,v):void 0}return max_1=R,max_1}var _assignMergeValue,hasRequired_assignMergeValue;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var _=require_baseAssignValue(),v=requireEq();function S(R,T,A){(A!==void 0&&!v(R[T],A)||A===void 0&&!(T in R))&&_(R,T,A)}return _assignMergeValue=S,_assignMergeValue}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var _=require_baseGetTag(),v=require_getPrototype(),S=requireIsObjectLike(),R="[object Object]",T=Function.prototype,A=Object.prototype,k=T.toString,M=A.hasOwnProperty,P=k.call(Object);function D(L){if(!S(L)||_(L)!=R)return!1;var q=v(L);if(q===null)return!0;var B=M.call(q,"constructor")&&q.constructor;return typeof B=="function"&&B instanceof B&&k.call(B)==P}return isPlainObject_1=D,isPlainObject_1}var _safeGet,hasRequired_safeGet;function require_safeGet(){if(hasRequired_safeGet)return _safeGet;hasRequired_safeGet=1;function _(v,S){if(!(S==="constructor"&&typeof v[S]=="function")&&S!="__proto__")return v[S]}return _safeGet=_,_safeGet}var toPlainObject_1,hasRequiredToPlainObject;function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var _=require_copyObject(),v=requireKeysIn();function S(R){return _(R,v(R))}return toPlainObject_1=S,toPlainObject_1}var _baseMergeDeep,hasRequired_baseMergeDeep;function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var _=require_assignMergeValue(),v=require_cloneBuffer(),S=require_cloneTypedArray(),R=require_copyArray(),T=require_initCloneObject(),A=requireIsArguments(),k=requireIsArray(),M=requireIsArrayLikeObject(),P=requireIsBuffer(),D=requireIsFunction(),L=requireIsObject(),q=requireIsPlainObject(),B=requireIsTypedArray(),F=require_safeGet(),j=requireToPlainObject();function z(V,G,W,Y,X,ee,re){var Q=F(V,W),ne=F(G,W),ae=re.get(ne);if(ae){_(V,W,ae);return}var oe=ee?ee(Q,ne,W+"",V,G,re):void 0,se=oe===void 0;if(se){var ce=k(ne),de=!ce&&P(ne),ye=!ce&&!de&&B(ne);oe=ne,ce||de||ye?k(Q)?oe=Q:M(Q)?oe=R(Q):de?(se=!1,oe=v(ne,!0)):ye?(se=!1,oe=S(ne,!0)):oe=[]:q(ne)||A(ne)?(oe=Q,A(Q)?oe=j(Q):(!L(Q)||D(Q))&&(oe=T(ne))):se=!1}se&&(re.set(ne,oe),X(oe,ne,Y,ee,re),re.delete(ne)),_(V,W,oe)}return _baseMergeDeep=z,_baseMergeDeep}var _baseMerge,hasRequired_baseMerge;function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var _=require_Stack(),v=require_assignMergeValue(),S=require_baseFor(),R=require_baseMergeDeep(),T=requireIsObject(),A=requireKeysIn(),k=require_safeGet();function M(P,D,L,q,B){P!==D&&S(D,function(F,j){if(B||(B=new _),T(F))R(P,D,j,L,M,q,B);else{var z=q?q(k(P,j),F,j+"",P,D,B):void 0;z===void 0&&(z=F),v(P,j,z)}},A)}return _baseMerge=M,_baseMerge}var _createAssigner,hasRequired_createAssigner;function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var _=require_baseRest(),v=require_isIterateeCall();function S(R){return _(function(T,A){var k=-1,M=A.length,P=M>1?A[M-1]:void 0,D=M>2?A[2]:void 0;for(P=R.length>3&&typeof P=="function"?(M--,P):void 0,D&&v(A[0],A[1],D)&&(P=M<3?void 0:P,M=1),T=Object(T);++k<M;){var L=A[k];L&&R(T,L,k,P)}return T})}return _createAssigner=S,_createAssigner}var merge_1,hasRequiredMerge;function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var _=require_baseMerge(),v=require_createAssigner(),S=v(function(R,T,A){_(R,T,A)});return merge_1=S,merge_1}var _baseLt,hasRequired_baseLt;function require_baseLt(){if(hasRequired_baseLt)return _baseLt;hasRequired_baseLt=1;function _(v,S){return v<S}return _baseLt=_,_baseLt}var min_1,hasRequiredMin;function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var _=require_baseExtremum(),v=require_baseLt(),S=requireIdentity();function R(T){return T&&T.length?_(T,S,v):void 0}return min_1=R,min_1}var minBy_1,hasRequiredMinBy;function requireMinBy(){if(hasRequiredMinBy)return minBy_1;hasRequiredMinBy=1;var _=require_baseExtremum(),v=require_baseIteratee(),S=require_baseLt();function R(T,A){return T&&T.length?_(T,v(A,2),S):void 0}return minBy_1=R,minBy_1}var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var _=require_root(),v=function(){return _.Date.now()};return now_1=v,now_1}var _baseSet,hasRequired_baseSet;function require_baseSet(){if(hasRequired_baseSet)return _baseSet;hasRequired_baseSet=1;var _=require_assignValue(),v=require_castPath(),S=require_isIndex(),R=requireIsObject(),T=require_toKey();function A(k,M,P,D){if(!R(k))return k;M=v(M,k);for(var L=-1,q=M.length,B=q-1,F=k;F!=null&&++L<q;){var j=T(M[L]),z=P;if(j==="__proto__"||j==="constructor"||j==="prototype")return k;if(L!=B){var V=F[j];z=D?D(V,j,F):void 0,z===void 0&&(z=R(V)?V:S(M[L+1])?[]:{})}_(F,j,z),F=F[j]}return k}return _baseSet=A,_baseSet}var _basePickBy,hasRequired_basePickBy;function require_basePickBy(){if(hasRequired_basePickBy)return _basePickBy;hasRequired_basePickBy=1;var _=require_baseGet(),v=require_baseSet(),S=require_castPath();function R(T,A,k){for(var M=-1,P=A.length,D={};++M<P;){var L=A[M],q=_(T,L);k(q,L)&&v(D,S(L,T),q)}return D}return _basePickBy=R,_basePickBy}var _basePick,hasRequired_basePick;function require_basePick(){if(hasRequired_basePick)return _basePick;hasRequired_basePick=1;var _=require_basePickBy(),v=requireHasIn();function S(R,T){return _(R,T,function(A,k){return v(R,k)})}return _basePick=S,_basePick}var _flatRest,hasRequired_flatRest;function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var _=requireFlatten(),v=require_overRest(),S=require_setToString();function R(T){return S(v(T,void 0,_),T+"")}return _flatRest=R,_flatRest}var pick_1,hasRequiredPick;function requirePick(){if(hasRequiredPick)return pick_1;hasRequiredPick=1;var _=require_basePick(),v=require_flatRest(),S=v(function(R,T){return R==null?{}:_(R,T)});return pick_1=S,pick_1}var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var _=Math.ceil,v=Math.max;function S(R,T,A,k){for(var M=-1,P=v(_((T-R)/(A||1)),0),D=Array(P);P--;)D[k?P:++M]=R,R+=A;return D}return _baseRange=S,_baseRange}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var _=require_baseRange(),v=require_isIterateeCall(),S=requireToFinite();function R(T){return function(A,k,M){return M&&typeof M!="number"&&v(A,k,M)&&(k=M=void 0),A=S(A),k===void 0?(k=A,A=0):k=S(k),M=M===void 0?A<k?1:-1:S(M),_(A,k,M,T)}}return _createRange=R,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var _=require_createRange(),v=_();return range_1=v,range_1}var _baseSortBy,hasRequired_baseSortBy;function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;hasRequired_baseSortBy=1;function _(v,S){var R=v.length;for(v.sort(S);R--;)v[R]=v[R].value;return v}return _baseSortBy=_,_baseSortBy}var _compareAscending,hasRequired_compareAscending;function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var _=requireIsSymbol();function v(S,R){if(S!==R){var T=S!==void 0,A=S===null,k=S===S,M=_(S),P=R!==void 0,D=R===null,L=R===R,q=_(R);if(!D&&!q&&!M&&S>R||M&&P&&L&&!D&&!q||A&&P&&L||!T&&L||!k)return 1;if(!A&&!M&&!q&&S<R||q&&T&&k&&!A&&!M||D&&T&&k||!P&&k||!L)return-1}return 0}return _compareAscending=v,_compareAscending}var _compareMultiple,hasRequired_compareMultiple;function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var _=require_compareAscending();function v(S,R,T){for(var A=-1,k=S.criteria,M=R.criteria,P=k.length,D=T.length;++A<P;){var L=_(k[A],M[A]);if(L){if(A>=D)return L;var q=T[A];return L*(q=="desc"?-1:1)}}return S.index-R.index}return _compareMultiple=v,_compareMultiple}var _baseOrderBy,hasRequired_baseOrderBy;function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var _=require_arrayMap(),v=require_baseGet(),S=require_baseIteratee(),R=require_baseMap(),T=require_baseSortBy(),A=require_baseUnary(),k=require_compareMultiple(),M=requireIdentity(),P=requireIsArray();function D(L,q,B){q.length?q=_(q,function(z){return P(z)?function(V){return v(V,z.length===1?z[0]:z)}:z}):q=[M];var F=-1;q=_(q,A(S));var j=R(L,function(z,V,G){var W=_(q,function(Y){return Y(z)});return{criteria:W,index:++F,value:z}});return T(j,function(z,V){return k(z,V,B)})}return _baseOrderBy=D,_baseOrderBy}var sortBy_1,hasRequiredSortBy;function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var _=require_baseFlatten(),v=require_baseOrderBy(),S=require_baseRest(),R=require_isIterateeCall(),T=S(function(A,k){if(A==null)return[];var M=k.length;return M>1&&R(A,k[0],k[1])?k=[]:M>2&&R(k[0],k[1],k[2])&&(k=[k[0]]),v(A,_(k,1),[])});return sortBy_1=T,sortBy_1}var uniqueId_1,hasRequiredUniqueId;function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var _=requireToString(),v=0;function S(R){var T=++v;return _(R)+T}return uniqueId_1=S,uniqueId_1}var _baseZipObject,hasRequired_baseZipObject;function require_baseZipObject(){if(hasRequired_baseZipObject)return _baseZipObject;hasRequired_baseZipObject=1;function _(v,S,R){for(var T=-1,A=v.length,k=S.length,M={};++T<A;){var P=T<k?S[T]:void 0;R(M,v[T],P)}return M}return _baseZipObject=_,_baseZipObject}var zipObject_1,hasRequiredZipObject;function requireZipObject(){if(hasRequiredZipObject)return zipObject_1;hasRequiredZipObject=1;var _=require_assignValue(),v=require_baseZipObject();function S(R,T){return v(R||[],T||[],_)}return zipObject_1=S,zipObject_1}var lodash_1,hasRequiredLodash;function requireLodash(){if(hasRequiredLodash)return lodash_1;hasRequiredLodash=1;var _;if(typeof commonjsRequire=="function")try{_={cloneDeep:requireCloneDeep(),constant:requireConstant(),defaults:requireDefaults(),each:requireEach(),filter:requireFilter(),find:requireFind(),flatten:requireFlatten(),forEach:requireForEach(),forIn:requireForIn(),has:requireHas(),isUndefined:requireIsUndefined(),last:requireLast(),map:requireMap(),mapValues:requireMapValues(),max:requireMax(),merge:requireMerge(),min:requireMin(),minBy:requireMinBy(),now:requireNow(),pick:requirePick(),range:requireRange(),reduce:requireReduce(),sortBy:requireSortBy(),uniqueId:requireUniqueId(),values:requireValues(),zipObject:requireZipObject()}}catch{}return _||(_=window._),lodash_1=_,lodash_1}var list,hasRequiredList;function requireList(){if(hasRequiredList)return list;hasRequiredList=1,list=_;function _(){var R={};R._next=R._prev=R,this._sentinel=R}_.prototype.dequeue=function(){var R=this._sentinel,T=R._prev;if(T!==R)return v(T),T},_.prototype.enqueue=function(R){var T=this._sentinel;R._prev&&R._next&&v(R),R._next=T._next,T._next._prev=R,T._next=R,R._prev=T},_.prototype.toString=function(){for(var R=[],T=this._sentinel,A=T._prev;A!==T;)R.push(JSON.stringify(A,S)),A=A._prev;return"["+R.join(", ")+"]"};function v(R){R._prev._next=R._next,R._next._prev=R._prev,delete R._next,delete R._prev}function S(R,T){if(R!=="_next"&&R!=="_prev")return T}return list}var greedyFas,hasRequiredGreedyFas;function requireGreedyFas(){if(hasRequiredGreedyFas)return greedyFas;hasRequiredGreedyFas=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireList();greedyFas=T;var R=_.constant(1);function T(D,L){if(D.nodeCount()<=1)return[];var q=M(D,L||R),B=A(q.graph,q.buckets,q.zeroIdx);return _.flatten(_.map(B,function(F){return D.outEdges(F.v,F.w)}),!0)}function A(D,L,q){for(var B=[],F=L[L.length-1],j=L[0],z;D.nodeCount();){for(;z=j.dequeue();)k(D,L,q,z);for(;z=F.dequeue();)k(D,L,q,z);if(D.nodeCount()){for(var V=L.length-2;V>0;--V)if(z=L[V].dequeue(),z){B=B.concat(k(D,L,q,z,!0));break}}}return B}function k(D,L,q,B,F){var j=F?[]:void 0;return _.forEach(D.inEdges(B.v),function(z){var V=D.edge(z),G=D.node(z.v);F&&j.push({v:z.v,w:z.w}),G.out-=V,P(L,q,G)}),_.forEach(D.outEdges(B.v),function(z){var V=D.edge(z),G=z.w,W=D.node(G);W.in-=V,P(L,q,W)}),D.removeNode(B.v),j}function M(D,L){var q=new v,B=0,F=0;_.forEach(D.nodes(),function(V){q.setNode(V,{v:V,in:0,out:0})}),_.forEach(D.edges(),function(V){var G=q.edge(V.v,V.w)||0,W=L(V),Y=G+W;q.setEdge(V.v,V.w,Y),F=Math.max(F,q.node(V.v).out+=W),B=Math.max(B,q.node(V.w).in+=W)});var j=_.range(F+B+3).map(function(){return new S}),z=B+1;return _.forEach(q.nodes(),function(V){P(j,z,q.node(V))}),{graph:q,buckets:j,zeroIdx:z}}function P(D,L,q){q.out?q.in?D[q.out-q.in+L].enqueue(q):D[D.length-1].enqueue(q):D[0].enqueue(q)}return greedyFas}var acyclic,hasRequiredAcyclic;function requireAcyclic(){if(hasRequiredAcyclic)return acyclic;hasRequiredAcyclic=1;var _=requireLodash(),v=requireGreedyFas();acyclic={run:S,undo:T};function S(A){var k=A.graph().acyclicer==="greedy"?v(A,M(A)):R(A);_.forEach(k,function(P){var D=A.edge(P);A.removeEdge(P),D.forwardName=P.name,D.reversed=!0,A.setEdge(P.w,P.v,D,_.uniqueId("rev"))});function M(P){return function(D){return P.edge(D).weight}}}function R(A){var k=[],M={},P={};function D(L){_.has(P,L)||(P[L]=!0,M[L]=!0,_.forEach(A.outEdges(L),function(q){_.has(M,q.w)?k.push(q):D(q.w)}),delete M[L])}return _.forEach(A.nodes(),D),k}function T(A){_.forEach(A.edges(),function(k){var M=A.edge(k);if(M.reversed){A.removeEdge(k);var P=M.forwardName;delete M.reversed,delete M.forwardName,A.setEdge(k.w,k.v,M,P)}})}return acyclic}var util$1,hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;var _=requireLodash(),v=requireGraphlib().Graph;util$1={addDummyNode:S,simplify:R,asNonCompoundGraph:T,successorWeights:A,predecessorWeights:k,intersectRect:M,buildLayerMatrix:P,normalizeRanks:D,removeEmptyRanks:L,addBorderNode:q,maxRank:B,partition:F,time:j,notime:z};function S(V,G,W,Y){var X;do X=_.uniqueId(Y);while(V.hasNode(X));return W.dummy=G,V.setNode(X,W),X}function R(V){var G=new v().setGraph(V.graph());return _.forEach(V.nodes(),function(W){G.setNode(W,V.node(W))}),_.forEach(V.edges(),function(W){var Y=G.edge(W.v,W.w)||{weight:0,minlen:1},X=V.edge(W);G.setEdge(W.v,W.w,{weight:Y.weight+X.weight,minlen:Math.max(Y.minlen,X.minlen)})}),G}function T(V){var G=new v({multigraph:V.isMultigraph()}).setGraph(V.graph());return _.forEach(V.nodes(),function(W){V.children(W).length||G.setNode(W,V.node(W))}),_.forEach(V.edges(),function(W){G.setEdge(W,V.edge(W))}),G}function A(V){var G=_.map(V.nodes(),function(W){var Y={};return _.forEach(V.outEdges(W),function(X){Y[X.w]=(Y[X.w]||0)+V.edge(X).weight}),Y});return _.zipObject(V.nodes(),G)}function k(V){var G=_.map(V.nodes(),function(W){var Y={};return _.forEach(V.inEdges(W),function(X){Y[X.v]=(Y[X.v]||0)+V.edge(X).weight}),Y});return _.zipObject(V.nodes(),G)}function M(V,G){var W=V.x,Y=V.y,X=G.x-W,ee=G.y-Y,re=V.width/2,Q=V.height/2;if(!X&&!ee)throw new Error("Not possible to find intersection inside of the rectangle");var ne,ae;return Math.abs(ee)*re>Math.abs(X)*Q?(ee<0&&(Q=-Q),ne=Q*X/ee,ae=Q):(X<0&&(re=-re),ne=re,ae=re*ee/X),{x:W+ne,y:Y+ae}}function P(V){var G=_.map(_.range(B(V)+1),function(){return[]});return _.forEach(V.nodes(),function(W){var Y=V.node(W),X=Y.rank;_.isUndefined(X)||(G[X][Y.order]=W)}),G}function D(V){var G=_.min(_.map(V.nodes(),function(W){return V.node(W).rank}));_.forEach(V.nodes(),function(W){var Y=V.node(W);_.has(Y,"rank")&&(Y.rank-=G)})}function L(V){var G=_.min(_.map(V.nodes(),function(ee){return V.node(ee).rank})),W=[];_.forEach(V.nodes(),function(ee){var re=V.node(ee).rank-G;W[re]||(W[re]=[]),W[re].push(ee)});var Y=0,X=V.graph().nodeRankFactor;_.forEach(W,function(ee,re){_.isUndefined(ee)&&re%X!==0?--Y:Y&&_.forEach(ee,function(Q){V.node(Q).rank+=Y})})}function q(V,G,W,Y){var X={width:0,height:0};return arguments.length>=4&&(X.rank=W,X.order=Y),S(V,"border",X,G)}function B(V){return _.max(_.map(V.nodes(),function(G){var W=V.node(G).rank;if(!_.isUndefined(W))return W}))}function F(V,G){var W={lhs:[],rhs:[]};return _.forEach(V,function(Y){G(Y)?W.lhs.push(Y):W.rhs.push(Y)}),W}function j(V,G){var W=_.now();try{return G()}finally{console.log(V+" time: "+(_.now()-W)+"ms")}}function z(V,G){return G()}return util$1}var normalize$1,hasRequiredNormalize;function requireNormalize(){if(hasRequiredNormalize)return normalize$1;hasRequiredNormalize=1;var _=requireLodash(),v=requireUtil$1();normalize$1={run:S,undo:T};function S(A){A.graph().dummyChains=[],_.forEach(A.edges(),function(k){R(A,k)})}function R(A,k){var M=k.v,P=A.node(M).rank,D=k.w,L=A.node(D).rank,q=k.name,B=A.edge(k),F=B.labelRank;if(L!==P+1){A.removeEdge(k);var j,z,V;for(V=0,++P;P<L;++V,++P)B.points=[],z={width:0,height:0,edgeLabel:B,edgeObj:k,rank:P},j=v.addDummyNode(A,"edge",z,"_d"),P===F&&(z.width=B.width,z.height=B.height,z.dummy="edge-label",z.labelpos=B.labelpos),A.setEdge(M,j,{weight:B.weight},q),V===0&&A.graph().dummyChains.push(j),M=j;A.setEdge(M,D,{weight:B.weight},q)}}function T(A){_.forEach(A.graph().dummyChains,function(k){var M=A.node(k),P=M.edgeLabel,D;for(A.setEdge(M.edgeObj,P);M.dummy;)D=A.successors(k)[0],A.removeNode(k),P.points.push({x:M.x,y:M.y}),M.dummy==="edge-label"&&(P.x=M.x,P.y=M.y,P.width=M.width,P.height=M.height),k=D,M=A.node(k)})}return normalize$1}var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var _=requireLodash();util={longestPath:v,slack:S};function v(R){var T={};function A(k){var M=R.node(k);if(_.has(T,k))return M.rank;T[k]=!0;var P=_.min(_.map(R.outEdges(k),function(D){return A(D.w)-R.edge(D).minlen}));return(P===Number.POSITIVE_INFINITY||P===void 0||P===null)&&(P=0),M.rank=P}_.forEach(R.sources(),A)}function S(R,T){return R.node(T.w).rank-R.node(T.v).rank-R.edge(T).minlen}return util}var feasibleTree_1,hasRequiredFeasibleTree;function requireFeasibleTree(){if(hasRequiredFeasibleTree)return feasibleTree_1;hasRequiredFeasibleTree=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireUtil().slack;feasibleTree_1=R;function R(M){var P=new v({directed:!1}),D=M.nodes()[0],L=M.nodeCount();P.setNode(D,{});for(var q,B;T(P,M)<L;)q=A(P,M),B=P.hasNode(q.v)?S(M,q):-S(M,q),k(P,M,B);return P}function T(M,P){function D(L){_.forEach(P.nodeEdges(L),function(q){var B=q.v,F=L===B?q.w:B;!M.hasNode(F)&&!S(P,q)&&(M.setNode(F,{}),M.setEdge(L,F,{}),D(F))})}return _.forEach(M.nodes(),D),M.nodeCount()}function A(M,P){return _.minBy(P.edges(),function(D){if(M.hasNode(D.v)!==M.hasNode(D.w))return S(P,D)})}function k(M,P,D){_.forEach(M.nodes(),function(L){P.node(L).rank+=D})}return feasibleTree_1}var networkSimplex_1,hasRequiredNetworkSimplex;function requireNetworkSimplex(){if(hasRequiredNetworkSimplex)return networkSimplex_1;hasRequiredNetworkSimplex=1;var _=requireLodash(),v=requireFeasibleTree(),S=requireUtil().slack,R=requireUtil().longestPath,T=requireGraphlib().alg.preorder,A=requireGraphlib().alg.postorder,k=requireUtil$1().simplify;networkSimplex_1=M,M.initLowLimValues=q,M.initCutValues=P,M.calcCutValue=L,M.leaveEdge=F,M.enterEdge=j,M.exchangeEdges=z;function M(Y){Y=k(Y),R(Y);var X=v(Y);q(X),P(X,Y);for(var ee,re;ee=F(X);)re=j(X,Y,ee),z(X,Y,ee,re)}function P(Y,X){var ee=A(Y,Y.nodes());ee=ee.slice(0,ee.length-1),_.forEach(ee,function(re){D(Y,X,re)})}function D(Y,X,ee){var re=Y.node(ee),Q=re.parent;Y.edge(ee,Q).cutvalue=L(Y,X,ee)}function L(Y,X,ee){var re=Y.node(ee),Q=re.parent,ne=!0,ae=X.edge(ee,Q),oe=0;return ae||(ne=!1,ae=X.edge(Q,ee)),oe=ae.weight,_.forEach(X.nodeEdges(ee),function(se){var ce=se.v===ee,de=ce?se.w:se.v;if(de!==Q){var ye=ce===ne,we=X.edge(se).weight;if(oe+=ye?we:-we,G(Y,ee,de)){var ge=Y.edge(ee,de).cutvalue;oe+=ye?-ge:ge}}}),oe}function q(Y,X){arguments.length<2&&(X=Y.nodes()[0]),B(Y,{},1,X)}function B(Y,X,ee,re,Q){var ne=ee,ae=Y.node(re);return X[re]=!0,_.forEach(Y.neighbors(re),function(oe){_.has(X,oe)||(ee=B(Y,X,ee,oe,re))}),ae.low=ne,ae.lim=ee++,Q?ae.parent=Q:delete ae.parent,ee}function F(Y){return _.find(Y.edges(),function(X){return Y.edge(X).cutvalue<0})}function j(Y,X,ee){var re=ee.v,Q=ee.w;X.hasEdge(re,Q)||(re=ee.w,Q=ee.v);var ne=Y.node(re),ae=Y.node(Q),oe=ne,se=!1;ne.lim>ae.lim&&(oe=ae,se=!0);var ce=_.filter(X.edges(),function(de){return se===W(Y,Y.node(de.v),oe)&&se!==W(Y,Y.node(de.w),oe)});return _.minBy(ce,function(de){return S(X,de)})}function z(Y,X,ee,re){var Q=ee.v,ne=ee.w;Y.removeEdge(Q,ne),Y.setEdge(re.v,re.w,{}),q(Y),P(Y,X),V(Y,X)}function V(Y,X){var ee=_.find(Y.nodes(),function(Q){return!X.node(Q).parent}),re=T(Y,ee);re=re.slice(1),_.forEach(re,function(Q){var ne=Y.node(Q).parent,ae=X.edge(Q,ne),oe=!1;ae||(ae=X.edge(ne,Q),oe=!0),X.node(Q).rank=X.node(ne).rank+(oe?ae.minlen:-ae.minlen)})}function G(Y,X,ee){return Y.hasEdge(X,ee)}function W(Y,X,ee){return ee.low<=X.lim&&X.lim<=ee.lim}return networkSimplex_1}var rank_1,hasRequiredRank;function requireRank(){if(hasRequiredRank)return rank_1;hasRequiredRank=1;var _=requireUtil(),v=_.longestPath,S=requireFeasibleTree(),R=requireNetworkSimplex();rank_1=T;function T(P){switch(P.graph().ranker){case"network-simplex":M(P);break;case"tight-tree":k(P);break;case"longest-path":A(P);break;default:M(P)}}var A=v;function k(P){v(P),S(P)}function M(P){R(P)}return rank_1}var parentDummyChains_1,hasRequiredParentDummyChains;function requireParentDummyChains(){if(hasRequiredParentDummyChains)return parentDummyChains_1;hasRequiredParentDummyChains=1;var _=requireLodash();parentDummyChains_1=v;function v(T){var A=R(T);_.forEach(T.graph().dummyChains,function(k){for(var M=T.node(k),P=M.edgeObj,D=S(T,A,P.v,P.w),L=D.path,q=D.lca,B=0,F=L[B],j=!0;k!==P.w;){if(M=T.node(k),j){for(;(F=L[B])!==q&&T.node(F).maxRank<M.rank;)B++;F===q&&(j=!1)}if(!j){for(;B<L.length-1&&T.node(F=L[B+1]).minRank<=M.rank;)B++;F=L[B]}T.setParent(k,F),k=T.successors(k)[0]}})}function S(T,A,k,M){var P=[],D=[],L=Math.min(A[k].low,A[M].low),q=Math.max(A[k].lim,A[M].lim),B,F;B=k;do B=T.parent(B),P.push(B);while(B&&(A[B].low>L||q>A[B].lim));for(F=B,B=M;(B=T.parent(B))!==F;)D.push(B);return{path:P.concat(D.reverse()),lca:F}}function R(T){var A={},k=0;function M(P){var D=k;_.forEach(T.children(P),M),A[P]={low:D,lim:k++}}return _.forEach(T.children(),M),A}return parentDummyChains_1}var nestingGraph,hasRequiredNestingGraph;function requireNestingGraph(){if(hasRequiredNestingGraph)return nestingGraph;hasRequiredNestingGraph=1;var _=requireLodash(),v=requireUtil$1();nestingGraph={run:S,cleanup:k};function S(M){var P=v.addDummyNode(M,"root",{},"_root"),D=T(M),L=_.max(_.values(D))-1,q=2*L+1;M.graph().nestingRoot=P,_.forEach(M.edges(),function(F){M.edge(F).minlen*=q});var B=A(M)+1;_.forEach(M.children(),function(F){R(M,P,q,B,L,D,F)}),M.graph().nodeRankFactor=q}function R(M,P,D,L,q,B,F){var j=M.children(F);if(!j.length){F!==P&&M.setEdge(P,F,{weight:0,minlen:D});return}var z=v.addBorderNode(M,"_bt"),V=v.addBorderNode(M,"_bb"),G=M.node(F);M.setParent(z,F),G.borderTop=z,M.setParent(V,F),G.borderBottom=V,_.forEach(j,function(W){R(M,P,D,L,q,B,W);var Y=M.node(W),X=Y.borderTop?Y.borderTop:W,ee=Y.borderBottom?Y.borderBottom:W,re=Y.borderTop?L:2*L,Q=X!==ee?1:q-B[F]+1;M.setEdge(z,X,{weight:re,minlen:Q,nestingEdge:!0}),M.setEdge(ee,V,{weight:re,minlen:Q,nestingEdge:!0})}),M.parent(F)||M.setEdge(P,z,{weight:0,minlen:q+B[F]})}function T(M){var P={};function D(L,q){var B=M.children(L);B&&B.length&&_.forEach(B,function(F){D(F,q+1)}),P[L]=q}return _.forEach(M.children(),function(L){D(L,1)}),P}function A(M){return _.reduce(M.edges(),function(P,D){return P+M.edge(D).weight},0)}function k(M){var P=M.graph();M.removeNode(P.nestingRoot),delete P.nestingRoot,_.forEach(M.edges(),function(D){var L=M.edge(D);L.nestingEdge&&M.removeEdge(D)})}return nestingGraph}var addBorderSegments_1,hasRequiredAddBorderSegments;function requireAddBorderSegments(){if(hasRequiredAddBorderSegments)return addBorderSegments_1;hasRequiredAddBorderSegments=1;var _=requireLodash(),v=requireUtil$1();addBorderSegments_1=S;function S(T){function A(k){var M=T.children(k),P=T.node(k);if(M.length&&_.forEach(M,A),_.has(P,"minRank")){P.borderLeft=[],P.borderRight=[];for(var D=P.minRank,L=P.maxRank+1;D<L;++D)R(T,"borderLeft","_bl",k,P,D),R(T,"borderRight","_br",k,P,D)}}_.forEach(T.children(),A)}function R(T,A,k,M,P,D){var L={width:0,height:0,rank:D,borderType:A},q=P[A][D-1],B=v.addDummyNode(T,"border",L,k);P[A][D]=B,T.setParent(B,M),q&&T.setEdge(q,B,{weight:1})}return addBorderSegments_1}var coordinateSystem,hasRequiredCoordinateSystem;function requireCoordinateSystem(){if(hasRequiredCoordinateSystem)return coordinateSystem;hasRequiredCoordinateSystem=1;var _=requireLodash();coordinateSystem={adjust:v,undo:S};function v(D){var L=D.graph().rankdir.toLowerCase();(L==="lr"||L==="rl")&&R(D)}function S(D){var L=D.graph().rankdir.toLowerCase();(L==="bt"||L==="rl")&&A(D),(L==="lr"||L==="rl")&&(M(D),R(D))}function R(D){_.forEach(D.nodes(),function(L){T(D.node(L))}),_.forEach(D.edges(),function(L){T(D.edge(L))})}function T(D){var L=D.width;D.width=D.height,D.height=L}function A(D){_.forEach(D.nodes(),function(L){k(D.node(L))}),_.forEach(D.edges(),function(L){var q=D.edge(L);_.forEach(q.points,k),_.has(q,"y")&&k(q)})}function k(D){D.y=-D.y}function M(D){_.forEach(D.nodes(),function(L){P(D.node(L))}),_.forEach(D.edges(),function(L){var q=D.edge(L);_.forEach(q.points,P),_.has(q,"x")&&P(q)})}function P(D){var L=D.x;D.x=D.y,D.y=L}return coordinateSystem}var initOrder_1,hasRequiredInitOrder;function requireInitOrder(){if(hasRequiredInitOrder)return initOrder_1;hasRequiredInitOrder=1;var _=requireLodash();initOrder_1=v;function v(S){var R={},T=_.filter(S.nodes(),function(D){return!S.children(D).length}),A=_.max(_.map(T,function(D){return S.node(D).rank})),k=_.map(_.range(A+1),function(){return[]});function M(D){if(!_.has(R,D)){R[D]=!0;var L=S.node(D);k[L.rank].push(D),_.forEach(S.successors(D),M)}}var P=_.sortBy(T,function(D){return S.node(D).rank});return _.forEach(P,M),k}return initOrder_1}var crossCount_1,hasRequiredCrossCount;function requireCrossCount(){if(hasRequiredCrossCount)return crossCount_1;hasRequiredCrossCount=1;var _=requireLodash();crossCount_1=v;function v(R,T){for(var A=0,k=1;k<T.length;++k)A+=S(R,T[k-1],T[k]);return A}function S(R,T,A){for(var k=_.zipObject(A,_.map(A,function(B,F){return F})),M=_.flatten(_.map(T,function(B){return _.sortBy(_.map(R.outEdges(B),function(F){return{pos:k[F.w],weight:R.edge(F).weight}}),"pos")}),!0),P=1;P<A.length;)P<<=1;var D=2*P-1;P-=1;var L=_.map(new Array(D),function(){return 0}),q=0;return _.forEach(M.forEach(function(B){var F=B.pos+P;L[F]+=B.weight;for(var j=0;F>0;)F%2&&(j+=L[F+1]),F=F-1>>1,L[F]+=B.weight;q+=B.weight*j})),q}return crossCount_1}var barycenter_1,hasRequiredBarycenter;function requireBarycenter(){if(hasRequiredBarycenter)return barycenter_1;hasRequiredBarycenter=1;var _=requireLodash();barycenter_1=v;function v(S,R){return _.map(R,function(T){var A=S.inEdges(T);if(A.length){var k=_.reduce(A,function(M,P){var D=S.edge(P),L=S.node(P.v);return{sum:M.sum+D.weight*L.order,weight:M.weight+D.weight}},{sum:0,weight:0});return{v:T,barycenter:k.sum/k.weight,weight:k.weight}}else return{v:T}})}return barycenter_1}var resolveConflicts_1,hasRequiredResolveConflicts;function requireResolveConflicts(){if(hasRequiredResolveConflicts)return resolveConflicts_1;hasRequiredResolveConflicts=1;var _=requireLodash();resolveConflicts_1=v;function v(T,A){var k={};_.forEach(T,function(P,D){var L=k[P.v]={indegree:0,in:[],out:[],vs:[P.v],i:D};_.isUndefined(P.barycenter)||(L.barycenter=P.barycenter,L.weight=P.weight)}),_.forEach(A.edges(),function(P){var D=k[P.v],L=k[P.w];!_.isUndefined(D)&&!_.isUndefined(L)&&(L.indegree++,D.out.push(k[P.w]))});var M=_.filter(k,function(P){return!P.indegree});return S(M)}function S(T){var A=[];function k(D){return function(L){L.merged||(_.isUndefined(L.barycenter)||_.isUndefined(D.barycenter)||L.barycenter>=D.barycenter)&&R(D,L)}}function M(D){return function(L){L.in.push(D),--L.indegree===0&&T.push(L)}}for(;T.length;){var P=T.pop();A.push(P),_.forEach(P.in.reverse(),k(P)),_.forEach(P.out,M(P))}return _.map(_.filter(A,function(D){return!D.merged}),function(D){return _.pick(D,["vs","i","barycenter","weight"])})}function R(T,A){var k=0,M=0;T.weight&&(k+=T.barycenter*T.weight,M+=T.weight),A.weight&&(k+=A.barycenter*A.weight,M+=A.weight),T.vs=A.vs.concat(T.vs),T.barycenter=k/M,T.weight=M,T.i=Math.min(A.i,T.i),A.merged=!0}return resolveConflicts_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;var _=requireLodash(),v=requireUtil$1();sort_1=S;function S(A,k){var M=v.partition(A,function(z){return _.has(z,"barycenter")}),P=M.lhs,D=_.sortBy(M.rhs,function(z){return-z.i}),L=[],q=0,B=0,F=0;P.sort(T(!!k)),F=R(L,D,F),_.forEach(P,function(z){F+=z.vs.length,L.push(z.vs),q+=z.barycenter*z.weight,B+=z.weight,F=R(L,D,F)});var j={vs:_.flatten(L,!0)};return B&&(j.barycenter=q/B,j.weight=B),j}function R(A,k,M){for(var P;k.length&&(P=_.last(k)).i<=M;)k.pop(),A.push(P.vs),M++;return M}function T(A){return function(k,M){return k.barycenter<M.barycenter?-1:k.barycenter>M.barycenter?1:A?M.i-k.i:k.i-M.i}}return sort_1}var sortSubgraph_1,hasRequiredSortSubgraph;function requireSortSubgraph(){if(hasRequiredSortSubgraph)return sortSubgraph_1;hasRequiredSortSubgraph=1;var _=requireLodash(),v=requireBarycenter(),S=requireResolveConflicts(),R=requireSort();sortSubgraph_1=T;function T(M,P,D,L){var q=M.children(P),B=M.node(P),F=B?B.borderLeft:void 0,j=B?B.borderRight:void 0,z={};F&&(q=_.filter(q,function(ee){return ee!==F&&ee!==j}));var V=v(M,q);_.forEach(V,function(ee){if(M.children(ee.v).length){var re=T(M,ee.v,D,L);z[ee.v]=re,_.has(re,"barycenter")&&k(ee,re)}});var G=S(V,D);A(G,z);var W=R(G,L);if(F&&(W.vs=_.flatten([F,W.vs,j],!0),M.predecessors(F).length)){var Y=M.node(M.predecessors(F)[0]),X=M.node(M.predecessors(j)[0]);_.has(W,"barycenter")||(W.barycenter=0,W.weight=0),W.barycenter=(W.barycenter*W.weight+Y.order+X.order)/(W.weight+2),W.weight+=2}return W}function A(M,P){_.forEach(M,function(D){D.vs=_.flatten(D.vs.map(function(L){return P[L]?P[L].vs:L}),!0)})}function k(M,P){_.isUndefined(M.barycenter)?(M.barycenter=P.barycenter,M.weight=P.weight):(M.barycenter=(M.barycenter*M.weight+P.barycenter*P.weight)/(M.weight+P.weight),M.weight+=P.weight)}return sortSubgraph_1}var buildLayerGraph_1,hasRequiredBuildLayerGraph;function requireBuildLayerGraph(){if(hasRequiredBuildLayerGraph)return buildLayerGraph_1;hasRequiredBuildLayerGraph=1;var _=requireLodash(),v=requireGraphlib().Graph;buildLayerGraph_1=S;function S(T,A,k){var M=R(T),P=new v({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(D){return T.node(D)});return _.forEach(T.nodes(),function(D){var L=T.node(D),q=T.parent(D);(L.rank===A||L.minRank<=A&&A<=L.maxRank)&&(P.setNode(D),P.setParent(D,q||M),_.forEach(T[k](D),function(B){var F=B.v===D?B.w:B.v,j=P.edge(F,D),z=_.isUndefined(j)?0:j.weight;P.setEdge(F,D,{weight:T.edge(B).weight+z})}),_.has(L,"minRank")&&P.setNode(D,{borderLeft:L.borderLeft[A],borderRight:L.borderRight[A]}))}),P}function R(T){for(var A;T.hasNode(A=_.uniqueId("_root")););return A}return buildLayerGraph_1}var addSubgraphConstraints_1,hasRequiredAddSubgraphConstraints;function requireAddSubgraphConstraints(){if(hasRequiredAddSubgraphConstraints)return addSubgraphConstraints_1;hasRequiredAddSubgraphConstraints=1;var _=requireLodash();addSubgraphConstraints_1=v;function v(S,R,T){var A={},k;_.forEach(T,function(M){for(var P=S.parent(M),D,L;P;){if(D=S.parent(P),D?(L=A[D],A[D]=P):(L=k,k=P),L&&L!==P){R.setEdge(L,P);return}P=D}})}return addSubgraphConstraints_1}var order_1,hasRequiredOrder;function requireOrder(){if(hasRequiredOrder)return order_1;hasRequiredOrder=1;var _=requireLodash(),v=requireInitOrder(),S=requireCrossCount(),R=requireSortSubgraph(),T=requireBuildLayerGraph(),A=requireAddSubgraphConstraints(),k=requireGraphlib().Graph,M=requireUtil$1();order_1=P;function P(B){var F=M.maxRank(B),j=D(B,_.range(1,F+1),"inEdges"),z=D(B,_.range(F-1,-1,-1),"outEdges"),V=v(B);q(B,V);for(var G=Number.POSITIVE_INFINITY,W,Y=0,X=0;X<4;++Y,++X){L(Y%2?j:z,Y%4>=2),V=M.buildLayerMatrix(B);var ee=S(B,V);ee<G&&(X=0,W=_.cloneDeep(V),G=ee)}q(B,W)}function D(B,F,j){return _.map(F,function(z){return T(B,z,j)})}function L(B,F){var j=new k;_.forEach(B,function(z){var V=z.graph().root,G=R(z,V,j,F);_.forEach(G.vs,function(W,Y){z.node(W).order=Y}),A(z,j,G.vs)})}function q(B,F){_.forEach(F,function(j){_.forEach(j,function(z,V){B.node(z).order=V})})}return order_1}var bk,hasRequiredBk;function requireBk(){if(hasRequiredBk)return bk;hasRequiredBk=1;var _=requireLodash(),v=requireGraphlib().Graph,S=requireUtil$1();bk={positionX:j,findType1Conflicts:R,findType2Conflicts:T,addConflict:k,hasConflict:M,verticalAlignment:P,horizontalCompaction:D,alignCoordinates:B,findSmallestWidthAlignment:q,balance:F};function R(G,W){var Y={};function X(ee,re){var Q=0,ne=0,ae=ee.length,oe=_.last(re);return _.forEach(re,function(se,ce){var de=A(G,se),ye=de?G.node(de).order:ae;(de||se===oe)&&(_.forEach(re.slice(ne,ce+1),function(we){_.forEach(G.predecessors(we),function(ge){var ve=G.node(ge),be=ve.order;(be<Q||ye<be)&&!(ve.dummy&&G.node(we).dummy)&&k(Y,ge,we)})}),ne=ce+1,Q=ye)}),re}return _.reduce(W,X),Y}function T(G,W){var Y={};function X(re,Q,ne,ae,oe){var se;_.forEach(_.range(Q,ne),function(ce){se=re[ce],G.node(se).dummy&&_.forEach(G.predecessors(se),function(de){var ye=G.node(de);ye.dummy&&(ye.order<ae||ye.order>oe)&&k(Y,de,se)})})}function ee(re,Q){var ne=-1,ae,oe=0;return _.forEach(Q,function(se,ce){if(G.node(se).dummy==="border"){var de=G.predecessors(se);de.length&&(ae=G.node(de[0]).order,X(Q,oe,ce,ne,ae),oe=ce,ne=ae)}X(Q,oe,Q.length,ae,re.length)}),Q}return _.reduce(W,ee),Y}function A(G,W){if(G.node(W).dummy)return _.find(G.predecessors(W),function(Y){return G.node(Y).dummy})}function k(G,W,Y){if(W>Y){var X=W;W=Y,Y=X}var ee=G[W];ee||(G[W]=ee={}),ee[Y]=!0}function M(G,W,Y){if(W>Y){var X=W;W=Y,Y=X}return _.has(G[W],Y)}function P(G,W,Y,X){var ee={},re={},Q={};return _.forEach(W,function(ne){_.forEach(ne,function(ae,oe){ee[ae]=ae,re[ae]=ae,Q[ae]=oe})}),_.forEach(W,function(ne){var ae=-1;_.forEach(ne,function(oe){var se=X(oe);if(se.length){se=_.sortBy(se,function(ge){return Q[ge]});for(var ce=(se.length-1)/2,de=Math.floor(ce),ye=Math.ceil(ce);de<=ye;++de){var we=se[de];re[oe]===oe&&ae<Q[we]&&!M(Y,oe,we)&&(re[we]=oe,re[oe]=ee[oe]=ee[we],ae=Q[we])}}})}),{root:ee,align:re}}function D(G,W,Y,X,ee){var re={},Q=L(G,W,Y,ee),ne=ee?"borderLeft":"borderRight";function ae(ce,de){for(var ye=Q.nodes(),we=ye.pop(),ge={};we;)ge[we]?ce(we):(ge[we]=!0,ye.push(we),ye=ye.concat(de(we))),we=ye.pop()}function oe(ce){re[ce]=Q.inEdges(ce).reduce(function(de,ye){return Math.max(de,re[ye.v]+Q.edge(ye))},0)}function se(ce){var de=Q.outEdges(ce).reduce(function(we,ge){return Math.min(we,re[ge.w]-Q.edge(ge))},Number.POSITIVE_INFINITY),ye=G.node(ce);de!==Number.POSITIVE_INFINITY&&ye.borderType!==ne&&(re[ce]=Math.max(re[ce],de))}return ae(oe,Q.predecessors.bind(Q)),ae(se,Q.successors.bind(Q)),_.forEach(X,function(ce){re[ce]=re[Y[ce]]}),re}function L(G,W,Y,X){var ee=new v,re=G.graph(),Q=z(re.nodesep,re.edgesep,X);return _.forEach(W,function(ne){var ae;_.forEach(ne,function(oe){var se=Y[oe];if(ee.setNode(se),ae){var ce=Y[ae],de=ee.edge(ce,se);ee.setEdge(ce,se,Math.max(Q(G,oe,ae),de||0))}ae=oe})}),ee}function q(G,W){return _.minBy(_.values(W),function(Y){var X=Number.NEGATIVE_INFINITY,ee=Number.POSITIVE_INFINITY;return _.forIn(Y,function(re,Q){var ne=V(G,Q)/2;X=Math.max(re+ne,X),ee=Math.min(re-ne,ee)}),X-ee})}function B(G,W){var Y=_.values(W),X=_.min(Y),ee=_.max(Y);_.forEach(["u","d"],function(re){_.forEach(["l","r"],function(Q){var ne=re+Q,ae=G[ne],oe;if(ae!==W){var se=_.values(ae);oe=Q==="l"?X-_.min(se):ee-_.max(se),oe&&(G[ne]=_.mapValues(ae,function(ce){return ce+oe}))}})})}function F(G,W){return _.mapValues(G.ul,function(Y,X){if(W)return G[W.toLowerCase()][X];var ee=_.sortBy(_.map(G,X));return(ee[1]+ee[2])/2})}function j(G){var W=S.buildLayerMatrix(G),Y=_.merge(R(G,W),T(G,W)),X={},ee;_.forEach(["u","d"],function(Q){ee=Q==="u"?W:_.values(W).reverse(),_.forEach(["l","r"],function(ne){ne==="r"&&(ee=_.map(ee,function(ce){return _.values(ce).reverse()}));var ae=(Q==="u"?G.predecessors:G.successors).bind(G),oe=P(G,ee,Y,ae),se=D(G,ee,oe.root,oe.align,ne==="r");ne==="r"&&(se=_.mapValues(se,function(ce){return-ce})),X[Q+ne]=se})});var re=q(G,X);return B(X,re),F(X,G.graph().align)}function z(G,W,Y){return function(X,ee,re){var Q=X.node(ee),ne=X.node(re),ae=0,oe;if(ae+=Q.width/2,_.has(Q,"labelpos"))switch(Q.labelpos.toLowerCase()){case"l":oe=-Q.width/2;break;case"r":oe=Q.width/2;break}if(oe&&(ae+=Y?oe:-oe),oe=0,ae+=(Q.dummy?W:G)/2,ae+=(ne.dummy?W:G)/2,ae+=ne.width/2,_.has(ne,"labelpos"))switch(ne.labelpos.toLowerCase()){case"l":oe=ne.width/2;break;case"r":oe=-ne.width/2;break}return oe&&(ae+=Y?oe:-oe),oe=0,ae}}function V(G,W){return G.node(W).width}return bk}var position_1,hasRequiredPosition;function requirePosition(){if(hasRequiredPosition)return position_1;hasRequiredPosition=1;var _=requireLodash(),v=requireUtil$1(),S=requireBk().positionX;position_1=R;function R(A){A=v.asNonCompoundGraph(A),T(A),_.forEach(S(A),function(k,M){A.node(M).x=k})}function T(A){var k=v.buildLayerMatrix(A),M=A.graph().ranksep,P=0;_.forEach(k,function(D){var L=_.max(_.map(D,function(q){return A.node(q).height}));_.forEach(D,function(q){A.node(q).y=P+L/2}),P+=L+M})}return position_1}var layout_1,hasRequiredLayout;function requireLayout(){if(hasRequiredLayout)return layout_1;hasRequiredLayout=1;var _=requireLodash(),v=requireAcyclic(),S=requireNormalize(),R=requireRank(),T=requireUtil$1().normalizeRanks,A=requireParentDummyChains(),k=requireUtil$1().removeEmptyRanks,M=requireNestingGraph(),P=requireAddBorderSegments(),D=requireCoordinateSystem(),L=requireOrder(),q=requirePosition(),B=requireUtil$1(),F=requireGraphlib().Graph;layout_1=j;function j(Se,Me){var Oe=Me&&Me.debugTiming?B.time:B.notime;Oe("layout",function(){var Ce=Oe("  buildLayoutGraph",function(){return ae(Se)});Oe("  runLayout",function(){z(Ce,Oe)}),Oe("  updateInputGraph",function(){V(Se,Ce)})})}function z(Se,Me){Me("    makeSpaceForEdgeLabels",function(){oe(Se)}),Me("    removeSelfEdges",function(){ke(Se)}),Me("    acyclic",function(){v.run(Se)}),Me("    nestingGraph.run",function(){M.run(Se)}),Me("    rank",function(){R(B.asNonCompoundGraph(Se))}),Me("    injectEdgeLabelProxies",function(){se(Se)}),Me("    removeEmptyRanks",function(){k(Se)}),Me("    nestingGraph.cleanup",function(){M.cleanup(Se)}),Me("    normalizeRanks",function(){T(Se)}),Me("    assignRankMinMax",function(){ce(Se)}),Me("    removeEdgeLabelProxies",function(){de(Se)}),Me("    normalize.run",function(){S.run(Se)}),Me("    parentDummyChains",function(){A(Se)}),Me("    addBorderSegments",function(){P(Se)}),Me("    order",function(){L(Se)}),Me("    insertSelfEdges",function(){me(Se)}),Me("    adjustCoordinateSystem",function(){D.adjust(Se)}),Me("    position",function(){q(Se)}),Me("    positionSelfEdges",function(){fe(Se)}),Me("    removeBorderNodes",function(){be(Se)}),Me("    normalize.undo",function(){S.undo(Se)}),Me("    fixupEdgeLabelCoords",function(){ge(Se)}),Me("    undoCoordinateSystem",function(){D.undo(Se)}),Me("    translateGraph",function(){ye(Se)}),Me("    assignNodeIntersects",function(){we(Se)}),Me("    reversePoints",function(){ve(Se)}),Me("    acyclic.undo",function(){v.undo(Se)})}function V(Se,Me){_.forEach(Se.nodes(),function(Oe){var Ce=Se.node(Oe),$e=Me.node(Oe);Ce&&(Ce.x=$e.x,Ce.y=$e.y,Me.children(Oe).length&&(Ce.width=$e.width,Ce.height=$e.height))}),_.forEach(Se.edges(),function(Oe){var Ce=Se.edge(Oe),$e=Me.edge(Oe);Ce.points=$e.points,_.has($e,"x")&&(Ce.x=$e.x,Ce.y=$e.y)}),Se.graph().width=Me.graph().width,Se.graph().height=Me.graph().height}var G=["nodesep","edgesep","ranksep","marginx","marginy"],W={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Y=["acyclicer","ranker","rankdir","align"],X=["width","height"],ee={width:0,height:0},re=["minlen","weight","width","height","labeloffset"],Q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ne=["labelpos"];function ae(Se){var Me=new F({multigraph:!0,compound:!0}),Oe=Ae(Se.graph());return Me.setGraph(_.merge({},W,xe(Oe,G),_.pick(Oe,Y))),_.forEach(Se.nodes(),function(Ce){var $e=Ae(Se.node(Ce));Me.setNode(Ce,_.defaults(xe($e,X),ee)),Me.setParent(Ce,Se.parent(Ce))}),_.forEach(Se.edges(),function(Ce){var $e=Ae(Se.edge(Ce));Me.setEdge(Ce,_.merge({},Q,xe($e,re),_.pick($e,ne)))}),Me}function oe(Se){var Me=Se.graph();Me.ranksep/=2,_.forEach(Se.edges(),function(Oe){var Ce=Se.edge(Oe);Ce.minlen*=2,Ce.labelpos.toLowerCase()!=="c"&&(Me.rankdir==="TB"||Me.rankdir==="BT"?Ce.width+=Ce.labeloffset:Ce.height+=Ce.labeloffset)})}function se(Se){_.forEach(Se.edges(),function(Me){var Oe=Se.edge(Me);if(Oe.width&&Oe.height){var Ce=Se.node(Me.v),$e=Se.node(Me.w),Be={rank:($e.rank-Ce.rank)/2+Ce.rank,e:Me};B.addDummyNode(Se,"edge-proxy",Be,"_ep")}})}function ce(Se){var Me=0;_.forEach(Se.nodes(),function(Oe){var Ce=Se.node(Oe);Ce.borderTop&&(Ce.minRank=Se.node(Ce.borderTop).rank,Ce.maxRank=Se.node(Ce.borderBottom).rank,Me=_.max(Me,Ce.maxRank))}),Se.graph().maxRank=Me}function de(Se){_.forEach(Se.nodes(),function(Me){var Oe=Se.node(Me);Oe.dummy==="edge-proxy"&&(Se.edge(Oe.e).labelRank=Oe.rank,Se.removeNode(Me))})}function ye(Se){var Me=Number.POSITIVE_INFINITY,Oe=0,Ce=Number.POSITIVE_INFINITY,$e=0,Be=Se.graph(),Pe=Be.marginx||0,De=Be.marginy||0;function Le(Ne){var tt=Ne.x,it=Ne.y,dt=Ne.width,pt=Ne.height;Me=Math.min(Me,tt-dt/2),Oe=Math.max(Oe,tt+dt/2),Ce=Math.min(Ce,it-pt/2),$e=Math.max($e,it+pt/2)}_.forEach(Se.nodes(),function(Ne){Le(Se.node(Ne))}),_.forEach(Se.edges(),function(Ne){var tt=Se.edge(Ne);_.has(tt,"x")&&Le(tt)}),Me-=Pe,Ce-=De,_.forEach(Se.nodes(),function(Ne){var tt=Se.node(Ne);tt.x-=Me,tt.y-=Ce}),_.forEach(Se.edges(),function(Ne){var tt=Se.edge(Ne);_.forEach(tt.points,function(it){it.x-=Me,it.y-=Ce}),_.has(tt,"x")&&(tt.x-=Me),_.has(tt,"y")&&(tt.y-=Ce)}),Be.width=Oe-Me+Pe,Be.height=$e-Ce+De}function we(Se){_.forEach(Se.edges(),function(Me){var Oe=Se.edge(Me),Ce=Se.node(Me.v),$e=Se.node(Me.w),Be,Pe;Oe.points?(Be=Oe.points[0],Pe=Oe.points[Oe.points.length-1]):(Oe.points=[],Be=$e,Pe=Ce),Oe.points.unshift(B.intersectRect(Ce,Be)),Oe.points.push(B.intersectRect($e,Pe))})}function ge(Se){_.forEach(Se.edges(),function(Me){var Oe=Se.edge(Me);if(_.has(Oe,"x"))switch((Oe.labelpos==="l"||Oe.labelpos==="r")&&(Oe.width-=Oe.labeloffset),Oe.labelpos){case"l":Oe.x-=Oe.width/2+Oe.labeloffset;break;case"r":Oe.x+=Oe.width/2+Oe.labeloffset;break}})}function ve(Se){_.forEach(Se.edges(),function(Me){var Oe=Se.edge(Me);Oe.reversed&&Oe.points.reverse()})}function be(Se){_.forEach(Se.nodes(),function(Me){if(Se.children(Me).length){var Oe=Se.node(Me),Ce=Se.node(Oe.borderTop),$e=Se.node(Oe.borderBottom),Be=Se.node(_.last(Oe.borderLeft)),Pe=Se.node(_.last(Oe.borderRight));Oe.width=Math.abs(Pe.x-Be.x),Oe.height=Math.abs($e.y-Ce.y),Oe.x=Be.x+Oe.width/2,Oe.y=Ce.y+Oe.height/2}}),_.forEach(Se.nodes(),function(Me){Se.node(Me).dummy==="border"&&Se.removeNode(Me)})}function ke(Se){_.forEach(Se.edges(),function(Me){if(Me.v===Me.w){var Oe=Se.node(Me.v);Oe.selfEdges||(Oe.selfEdges=[]),Oe.selfEdges.push({e:Me,label:Se.edge(Me)}),Se.removeEdge(Me)}})}function me(Se){var Me=B.buildLayerMatrix(Se);_.forEach(Me,function(Oe){var Ce=0;_.forEach(Oe,function($e,Be){var Pe=Se.node($e);Pe.order=Be+Ce,_.forEach(Pe.selfEdges,function(De){B.addDummyNode(Se,"selfedge",{width:De.label.width,height:De.label.height,rank:Pe.rank,order:Be+ ++Ce,e:De.e,label:De.label},"_se")}),delete Pe.selfEdges})})}function fe(Se){_.forEach(Se.nodes(),function(Me){var Oe=Se.node(Me);if(Oe.dummy==="selfedge"){var Ce=Se.node(Oe.e.v),$e=Ce.x+Ce.width/2,Be=Ce.y,Pe=Oe.x-$e,De=Ce.height/2;Se.setEdge(Oe.e,Oe.label),Se.removeNode(Me),Oe.label.points=[{x:$e+2*Pe/3,y:Be-De},{x:$e+5*Pe/6,y:Be-De},{x:$e+Pe,y:Be},{x:$e+5*Pe/6,y:Be+De},{x:$e+2*Pe/3,y:Be+De}],Oe.label.x=Oe.x,Oe.label.y=Oe.y}})}function xe(Se,Me){return _.mapValues(_.pick(Se,Me),Number)}function Ae(Se){var Me={};return _.forEach(Se,function(Oe,Ce){Me[Ce.toLowerCase()]=Oe}),Me}return layout_1}var debug,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug;hasRequiredDebug=1;var _=requireLodash(),v=requireUtil$1(),S=requireGraphlib().Graph;debug={debugOrdering:R};function R(T){var A=v.buildLayerMatrix(T),k=new S({compound:!0,multigraph:!0}).setGraph({});return _.forEach(T.nodes(),function(M){k.setNode(M,{label:M}),k.setParent(M,"layer"+T.node(M).rank)}),_.forEach(T.edges(),function(M){k.setEdge(M.v,M.w,{},M.name)}),_.forEach(A,function(M,P){var D="layer"+P;k.setNode(D,{rank:"same"}),_.reduce(M,function(L,q){return k.setEdge(L,q,{style:"invis"}),q})}),k}return debug}var version,hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,version="0.8.5"),version}var dagre$1,hasRequiredDagre;function requireDagre(){return hasRequiredDagre||(hasRequiredDagre=1,dagre$1={graphlib:requireGraphlib(),layout:requireLayout(),debug:requireDebug(),util:{time:requireUtil$1().time,notime:requireUtil$1().notime},version:requireVersion()}),dagre$1}var cytoscapeDagre=cytoscapeDagre$1.exports,hasRequiredCytoscapeDagre;function requireCytoscapeDagre(){return hasRequiredCytoscapeDagre||(hasRequiredCytoscapeDagre=1,(function(_,v){(function(R,T){_.exports=T(requireDagre())})(cytoscapeDagre,function(S){return(function(R){var T={};function A(k){if(T[k])return T[k].exports;var M=T[k]={i:k,l:!1,exports:{}};return R[k].call(M.exports,M,M.exports,A),M.l=!0,M.exports}return A.m=R,A.c=T,A.d=function(k,M,P){A.o(k,M)||Object.defineProperty(k,M,{enumerable:!0,get:P})},A.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},A.t=function(k,M){if(M&1&&(k=A(k)),M&8||M&4&&typeof k=="object"&&k&&k.__esModule)return k;var P=Object.create(null);if(A.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:k}),M&2&&typeof k!="string")for(var D in k)A.d(P,D,(function(L){return k[L]}).bind(null,D));return P},A.n=function(k){var M=k&&k.__esModule?function(){return k.default}:function(){return k};return A.d(M,"a",M),M},A.o=function(k,M){return Object.prototype.hasOwnProperty.call(k,M)},A.p="",A(A.s=0)})([(function(R,T,A){var k=A(1),M=function(D){D&&D("layout","dagre",k)};typeof cytoscape<"u"&&M(cytoscape),R.exports=M}),(function(R,T,A){function k(B){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(j){return typeof j}:k=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},k(B)}var M=function(F){return typeof F=="function"},P=A(2),D=A(3),L=A(4);function q(B){this.options=D({},P,B)}q.prototype.run=function(){var B=this.options,F=this,j=B.cy,z=B.eles,V=function(fe,xe){return M(xe)?xe.apply(fe,[fe]):xe},G=B.boundingBox||{x1:0,y1:0,w:j.width(),h:j.height()};G.x2===void 0&&(G.x2=G.x1+G.w),G.w===void 0&&(G.w=G.x2-G.x1),G.y2===void 0&&(G.y2=G.y1+G.h),G.h===void 0&&(G.h=G.y2-G.y1);var W=new L.graphlib.Graph({multigraph:!0,compound:!0}),Y={},X=function(fe,xe){xe!=null&&(Y[fe]=xe)};X("nodesep",B.nodeSep),X("edgesep",B.edgeSep),X("ranksep",B.rankSep),X("rankdir",B.rankDir),X("align",B.align),X("ranker",B.ranker),X("acyclicer",B.acyclicer),W.setGraph(Y),W.setDefaultEdgeLabel(function(){return{}}),W.setDefaultNodeLabel(function(){return{}});var ee=z.nodes();M(B.sort)&&(ee=ee.sort(B.sort));for(var re=0;re<ee.length;re++){var Q=ee[re],ne=Q.layoutDimensions(B);W.setNode(Q.id(),{width:ne.w,height:ne.h,name:Q.id()})}for(var ae=0;ae<ee.length;ae++){var oe=ee[ae];oe.isChild()&&W.setParent(oe.id(),oe.parent().id())}var se=z.edges().stdFilter(function(me){return!me.source().isParent()&&!me.target().isParent()});M(B.sort)&&(se=se.sort(B.sort));for(var ce=0;ce<se.length;ce++){var de=se[ce];W.setEdge(de.source().id(),de.target().id(),{minlen:V(de,B.minLen),weight:V(de,B.edgeWeight),name:de.id()},de.id())}L.layout(W);for(var ye=W.nodes(),we=0;we<ye.length;we++){var ge=ye[we],ve=W.node(ge);j.getElementById(ge).scratch().dagre=ve}var be;B.boundingBox?(be={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},ee.forEach(function(me){var fe=me.scratch().dagre;be.x1=Math.min(be.x1,fe.x),be.x2=Math.max(be.x2,fe.x),be.y1=Math.min(be.y1,fe.y),be.y2=Math.max(be.y2,fe.y)}),be.w=be.x2-be.x1,be.h=be.y2-be.y1):be=G;var ke=function(fe){if(B.boundingBox){var xe=be.w===0?0:(fe.x-be.x1)/be.w,Ae=be.h===0?0:(fe.y-be.y1)/be.h;return{x:G.x1+xe*G.w,y:G.y1+Ae*G.h}}else return fe};return ee.layoutPositions(F,B,function(me){me=k(me)==="object"?me:this;var fe=me.scratch().dagre;return ke({x:fe.x,y:fe.y})}),this},R.exports=q}),(function(R,T){var A={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(M){return 1},edgeWeight:function(M){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(M,P){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(M,P){return P},ready:function(){},sort:void 0,stop:function(){}};R.exports=A}),(function(R,T){R.exports=Object.assign!=null?Object.assign.bind(Object):function(A){for(var k=arguments.length,M=new Array(k>1?k-1:0),P=1;P<k;P++)M[P-1]=arguments[P];return M.forEach(function(D){Object.keys(D).forEach(function(L){return A[L]=D[L]})}),A}}),(function(R,T){R.exports=S})])})})(cytoscapeDagre$1)),cytoscapeDagre$1.exports}var cytoscapeDagreExports=requireCytoscapeDagre();const dagre=getDefaultExportFromCjs$1(cytoscapeDagreExports);function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var R in S)({}).hasOwnProperty.call(S,R)&&(_[R]=S[R])}return _},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(_,v){if(_==null)return{};var S={};for(var R in _)if({}.hasOwnProperty.call(_,R)){if(v.indexOf(R)!==-1)continue;S[R]=_[R]}return S}let rangeFrom=[],rangeTo=[];(()=>{let _="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(v=>v?parseInt(v,36):1);for(let v=0,S=0;v<_.length;v++)(v%2?rangeTo:rangeFrom).push(S=S+_[v])})();function isExtendingChar(_){if(_<768)return!1;for(let v=0,S=rangeFrom.length;;){let R=v+S>>1;if(_<rangeFrom[R])S=R;else if(_>=rangeTo[R])v=R+1;else return!0;if(v==S)return!1}}function isRegionalIndicator(_){return _>=127462&&_<=127487}const ZWJ=8205;function findClusterBreak$1(_,v,S=!0,R=!0){return(S?nextClusterBreak:prevClusterBreak)(_,v,R)}function nextClusterBreak(_,v,S){if(v==_.length)return v;v&&surrogateLow$1(_.charCodeAt(v))&&surrogateHigh$1(_.charCodeAt(v-1))&&v--;let R=codePointAt$1(_,v);for(v+=codePointSize$1(R);v<_.length;){let T=codePointAt$1(_,v);if(R==ZWJ||T==ZWJ||S&&isExtendingChar(T))v+=codePointSize$1(T),R=T;else if(isRegionalIndicator(T)){let A=0,k=v-2;for(;k>=0&&isRegionalIndicator(codePointAt$1(_,k));)A++,k-=2;if(A%2==0)break;v+=2}else break}return v}function prevClusterBreak(_,v,S){for(;v>0;){let R=nextClusterBreak(_,v-2,S);if(R<v)return R;v--}return 0}function codePointAt$1(_,v){let S=_.charCodeAt(v);if(!surrogateHigh$1(S)||v+1==_.length)return S;let R=_.charCodeAt(v+1);return surrogateLow$1(R)?(S-55296<<10)+(R-56320)+65536:S}function surrogateLow$1(_){return _>=56320&&_<57344}function surrogateHigh$1(_){return _>=55296&&_<56320}function codePointSize$1(_){return _<65536?1:2}class Text{lineAt(v){if(v<0||v>this.length)throw new RangeError(`Invalid position ${v} in document of length ${this.length}`);return this.lineInner(v,!1,1,0)}line(v){if(v<1||v>this.lines)throw new RangeError(`Invalid line number ${v} in ${this.lines}-line document`);return this.lineInner(v,!0,1,0)}replace(v,S,R){[v,S]=clip(this,v,S);let T=[];return this.decompose(0,v,T,2),R.length&&R.decompose(0,R.length,T,3),this.decompose(S,this.length,T,1),TextNode.from(T,this.length-(S-v)+R.length)}append(v){return this.replace(this.length,this.length,v)}slice(v,S=this.length){[v,S]=clip(this,v,S);let R=[];return this.decompose(v,S,R,0),TextNode.from(R,S-v)}eq(v){if(v==this)return!0;if(v.length!=this.length||v.lines!=this.lines)return!1;let S=this.scanIdentical(v,1),R=this.length-this.scanIdentical(v,-1),T=new RawTextCursor(this),A=new RawTextCursor(v);for(let k=S,M=S;;){if(T.next(k),A.next(k),k=0,T.lineBreak!=A.lineBreak||T.done!=A.done||T.value!=A.value)return!1;if(M+=T.value.length,T.done||M>=R)return!0}}iter(v=1){return new RawTextCursor(this,v)}iterRange(v,S=this.length){return new PartialTextCursor(this,v,S)}iterLines(v,S){let R;if(v==null)R=this.iter();else{S==null&&(S=this.lines+1);let T=this.line(v).from;R=this.iterRange(T,Math.max(T,S==this.lines+1?this.length:S<=1?0:this.line(S-1).to))}return new LineCursor(R)}toString(){return this.sliceString(0)}toJSON(){let v=[];return this.flatten(v),v}constructor(){}static of(v){if(v.length==0)throw new RangeError("A document must have at least one line");return v.length==1&&!v[0]?Text.empty:v.length<=32?new TextLeaf(v):TextNode.from(TextLeaf.split(v,[]))}}class TextLeaf extends Text{constructor(v,S=textLength(v)){super(),this.text=v,this.length=S}get lines(){return this.text.length}get children(){return null}lineInner(v,S,R,T){for(let A=0;;A++){let k=this.text[A],M=T+k.length;if((S?R:M)>=v)return new Line(T,M,R,k);T=M+1,R++}}decompose(v,S,R,T){let A=v<=0&&S>=this.length?this:new TextLeaf(sliceText(this.text,v,S),Math.min(S,this.length)-Math.max(0,v));if(T&1){let k=R.pop(),M=appendText(A.text,k.text.slice(),0,A.length);if(M.length<=32)R.push(new TextLeaf(M,k.length+A.length));else{let P=M.length>>1;R.push(new TextLeaf(M.slice(0,P)),new TextLeaf(M.slice(P)))}}else R.push(A)}replace(v,S,R){if(!(R instanceof TextLeaf))return super.replace(v,S,R);[v,S]=clip(this,v,S);let T=appendText(this.text,appendText(R.text,sliceText(this.text,0,v)),S),A=this.length+R.length-(S-v);return T.length<=32?new TextLeaf(T,A):TextNode.from(TextLeaf.split(T,[]),A)}sliceString(v,S=this.length,R=`
`){[v,S]=clip(this,v,S);let T="";for(let A=0,k=0;A<=S&&k<this.text.length;k++){let M=this.text[k],P=A+M.length;A>v&&k&&(T+=R),v<P&&S>A&&(T+=M.slice(Math.max(0,v-A),S-A)),A=P+1}return T}flatten(v){for(let S of this.text)v.push(S)}scanIdentical(){return 0}static split(v,S){let R=[],T=-1;for(let A of v)R.push(A),T+=A.length+1,R.length==32&&(S.push(new TextLeaf(R,T)),R=[],T=-1);return T>-1&&S.push(new TextLeaf(R,T)),S}}class TextNode extends Text{constructor(v,S){super(),this.children=v,this.length=S,this.lines=0;for(let R of v)this.lines+=R.lines}lineInner(v,S,R,T){for(let A=0;;A++){let k=this.children[A],M=T+k.length,P=R+k.lines-1;if((S?P:M)>=v)return k.lineInner(v,S,R,T);T=M+1,R=P+1}}decompose(v,S,R,T){for(let A=0,k=0;k<=S&&A<this.children.length;A++){let M=this.children[A],P=k+M.length;if(v<=P&&S>=k){let D=T&((k<=v?1:0)|(P>=S?2:0));k>=v&&P<=S&&!D?R.push(M):M.decompose(v-k,S-k,R,D)}k=P+1}}replace(v,S,R){if([v,S]=clip(this,v,S),R.lines<this.lines)for(let T=0,A=0;T<this.children.length;T++){let k=this.children[T],M=A+k.length;if(v>=A&&S<=M){let P=k.replace(v-A,S-A,R),D=this.lines-k.lines+P.lines;if(P.lines<D>>4&&P.lines>D>>6){let L=this.children.slice();return L[T]=P,new TextNode(L,this.length-(S-v)+R.length)}return super.replace(A,M,P)}A=M+1}return super.replace(v,S,R)}sliceString(v,S=this.length,R=`
`){[v,S]=clip(this,v,S);let T="";for(let A=0,k=0;A<this.children.length&&k<=S;A++){let M=this.children[A],P=k+M.length;k>v&&A&&(T+=R),v<P&&S>k&&(T+=M.sliceString(v-k,S-k,R)),k=P+1}return T}flatten(v){for(let S of this.children)S.flatten(v)}scanIdentical(v,S){if(!(v instanceof TextNode))return 0;let R=0,[T,A,k,M]=S>0?[0,0,this.children.length,v.children.length]:[this.children.length-1,v.children.length-1,-1,-1];for(;;T+=S,A+=S){if(T==k||A==M)return R;let P=this.children[T],D=v.children[A];if(P!=D)return R+P.scanIdentical(D,S);R+=P.length+1}}static from(v,S=v.reduce((R,T)=>R+T.length+1,-1)){let R=0;for(let F of v)R+=F.lines;if(R<32){let F=[];for(let j of v)j.flatten(F);return new TextLeaf(F,S)}let T=Math.max(32,R>>5),A=T<<1,k=T>>1,M=[],P=0,D=-1,L=[];function q(F){let j;if(F.lines>A&&F instanceof TextNode)for(let z of F.children)q(z);else F.lines>k&&(P>k||!P)?(B(),M.push(F)):F instanceof TextLeaf&&P&&(j=L[L.length-1])instanceof TextLeaf&&F.lines+j.lines<=32?(P+=F.lines,D+=F.length+1,L[L.length-1]=new TextLeaf(j.text.concat(F.text),j.length+1+F.length)):(P+F.lines>T&&B(),P+=F.lines,D+=F.length+1,L.push(F))}function B(){P!=0&&(M.push(L.length==1?L[0]:TextNode.from(L,D)),D=-1,P=L.length=0)}for(let F of v)q(F);return B(),M.length==1?M[0]:new TextNode(M,S)}}Text.empty=new TextLeaf([""],0);function textLength(_){let v=-1;for(let S of _)v+=S.length+1;return v}function appendText(_,v,S=0,R=1e9){for(let T=0,A=0,k=!0;A<_.length&&T<=R;A++){let M=_[A],P=T+M.length;P>=S&&(P>R&&(M=M.slice(0,R-T)),T<S&&(M=M.slice(S-T)),k?(v[v.length-1]+=M,k=!1):v.push(M)),T=P+1}return v}function sliceText(_,v,S){return appendText(_,[""],v,S)}class RawTextCursor{constructor(v,S=1){this.dir=S,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[v],this.offsets=[S>0?1:(v instanceof TextLeaf?v.text.length:v.children.length)<<1]}nextInner(v,S){for(this.done=this.lineBreak=!1;;){let R=this.nodes.length-1,T=this.nodes[R],A=this.offsets[R],k=A>>1,M=T instanceof TextLeaf?T.text.length:T.children.length;if(k==(S>0?M:0)){if(R==0)return this.done=!0,this.value="",this;S>0&&this.offsets[R-1]++,this.nodes.pop(),this.offsets.pop()}else if((A&1)==(S>0?0:1)){if(this.offsets[R]+=S,v==0)return this.lineBreak=!0,this.value=`
`,this;v--}else if(T instanceof TextLeaf){let P=T.text[k+(S<0?-1:0)];if(this.offsets[R]+=S,P.length>Math.max(0,v))return this.value=v==0?P:S>0?P.slice(v):P.slice(0,P.length-v),this;v-=P.length}else{let P=T.children[k+(S<0?-1:0)];v>P.length?(v-=P.length,this.offsets[R]+=S):(S<0&&this.offsets[R]--,this.nodes.push(P),this.offsets.push(S>0?1:(P instanceof TextLeaf?P.text.length:P.children.length)<<1))}}}next(v=0){return v<0&&(this.nextInner(-v,-this.dir),v=this.value.length),this.nextInner(v,this.dir)}}class PartialTextCursor{constructor(v,S,R){this.value="",this.done=!1,this.cursor=new RawTextCursor(v,S>R?-1:1),this.pos=S>R?v.length:0,this.from=Math.min(S,R),this.to=Math.max(S,R)}nextInner(v,S){if(S<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;v+=Math.max(0,S<0?this.pos-this.to:this.from-this.pos);let R=S<0?this.pos-this.from:this.to-this.pos;v>R&&(v=R),R-=v;let{value:T}=this.cursor.next(v);return this.pos+=(T.length+v)*S,this.value=T.length<=R?T:S<0?T.slice(T.length-R):T.slice(0,R),this.done=!this.value,this}next(v=0){return v<0?v=Math.max(v,this.from-this.pos):v>0&&(v=Math.min(v,this.to-this.pos)),this.nextInner(v,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(v){this.inner=v,this.afterBreak=!0,this.value="",this.done=!1}next(v=0){let{done:S,lineBreak:R,value:T}=this.inner.next(v);return S&&this.afterBreak?(this.value="",this.afterBreak=!1):S?(this.done=!0,this.value=""):R?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=T,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(v,S,R,T){this.from=v,this.to=S,this.number=R,this.text=T}get length(){return this.to-this.from}}function clip(_,v,S){return v=Math.max(0,Math.min(_.length,v)),[v,Math.max(v,Math.min(_.length,S))]}function findClusterBreak(_,v,S=!0,R=!0){return findClusterBreak$1(_,v,S,R)}function surrogateLow(_){return _>=56320&&_<57344}function surrogateHigh(_){return _>=55296&&_<56320}function codePointAt(_,v){let S=_.charCodeAt(v);if(!surrogateHigh(S)||v+1==_.length)return S;let R=_.charCodeAt(v+1);return surrogateLow(R)?(S-55296<<10)+(R-56320)+65536:S}function fromCodePoint(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}function codePointSize(_){return _<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=(function(_){return _[_.Simple=0]="Simple",_[_.TrackDel=1]="TrackDel",_[_.TrackBefore=2]="TrackBefore",_[_.TrackAfter=3]="TrackAfter",_})(MapMode||(MapMode={}));class ChangeDesc{constructor(v){this.sections=v}get length(){let v=0;for(let S=0;S<this.sections.length;S+=2)v+=this.sections[S];return v}get newLength(){let v=0;for(let S=0;S<this.sections.length;S+=2){let R=this.sections[S+1];v+=R<0?this.sections[S]:R}return v}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(v){for(let S=0,R=0,T=0;S<this.sections.length;){let A=this.sections[S++],k=this.sections[S++];k<0?(v(R,T,A),T+=A):T+=k,R+=A}}iterChangedRanges(v,S=!1){iterChanges(this,v,S)}get invertedDesc(){let v=[];for(let S=0;S<this.sections.length;){let R=this.sections[S++],T=this.sections[S++];T<0?v.push(R,T):v.push(T,R)}return new ChangeDesc(v)}composeDesc(v){return this.empty?v:v.empty?this:composeSets(this,v)}mapDesc(v,S=!1){return v.empty?this:mapSet(this,v,S)}mapPos(v,S=-1,R=MapMode.Simple){let T=0,A=0;for(let k=0;k<this.sections.length;){let M=this.sections[k++],P=this.sections[k++],D=T+M;if(P<0){if(D>v)return A+(v-T);A+=M}else{if(R!=MapMode.Simple&&D>=v&&(R==MapMode.TrackDel&&T<v&&D>v||R==MapMode.TrackBefore&&T<v||R==MapMode.TrackAfter&&D>v))return null;if(D>v||D==v&&S<0&&!M)return v==T||S<0?A:A+P;A+=P}T=D}if(v>T)throw new RangeError(`Position ${v} is out of range for changeset of length ${T}`);return A}touchesRange(v,S=v){for(let R=0,T=0;R<this.sections.length&&T<=S;){let A=this.sections[R++],k=this.sections[R++],M=T+A;if(k>=0&&T<=S&&M>=v)return T<v&&M>S?"cover":!0;T=M}return!1}toString(){let v="";for(let S=0;S<this.sections.length;){let R=this.sections[S++],T=this.sections[S++];v+=(v?" ":"")+R+(T>=0?":"+T:"")}return v}toJSON(){return this.sections}static fromJSON(v){if(!Array.isArray(v)||v.length%2||v.some(S=>typeof S!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(v)}static create(v){return new ChangeDesc(v)}}class ChangeSet extends ChangeDesc{constructor(v,S){super(v),this.inserted=S}apply(v){if(this.length!=v.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(S,R,T,A,k)=>v=v.replace(T,T+(R-S),k),!1),v}mapDesc(v,S=!1){return mapSet(this,v,S,!0)}invert(v){let S=this.sections.slice(),R=[];for(let T=0,A=0;T<S.length;T+=2){let k=S[T],M=S[T+1];if(M>=0){S[T]=M,S[T+1]=k;let P=T>>1;for(;R.length<P;)R.push(Text.empty);R.push(k?v.slice(A,A+k):Text.empty)}A+=k}return new ChangeSet(S,R)}compose(v){return this.empty?v:v.empty?this:composeSets(this,v,!0)}map(v,S=!1){return v.empty?this:mapSet(this,v,S,!0)}iterChanges(v,S=!1){iterChanges(this,v,S)}get desc(){return ChangeDesc.create(this.sections)}filter(v){let S=[],R=[],T=[],A=new SectionIter(this);e:for(let k=0,M=0;;){let P=k==v.length?1e9:v[k++];for(;M<P||M==P&&A.len==0;){if(A.done)break e;let L=Math.min(A.len,P-M);addSection(T,L,-1);let q=A.ins==-1?-1:A.off==0?A.ins:0;addSection(S,L,q),q>0&&addInsert(R,S,A.text),A.forward(L),M+=L}let D=v[k++];for(;M<D;){if(A.done)break e;let L=Math.min(A.len,D-M);addSection(S,L,-1),addSection(T,L,A.ins==-1?-1:A.off==0?A.ins:0),A.forward(L),M+=L}}return{changes:new ChangeSet(S,R),filtered:ChangeDesc.create(T)}}toJSON(){let v=[];for(let S=0;S<this.sections.length;S+=2){let R=this.sections[S],T=this.sections[S+1];T<0?v.push(R):T==0?v.push([R]):v.push([R].concat(this.inserted[S>>1].toJSON()))}return v}static of(v,S,R){let T=[],A=[],k=0,M=null;function P(L=!1){if(!L&&!T.length)return;k<S&&addSection(T,S-k,-1);let q=new ChangeSet(T,A);M=M?M.compose(q.map(M)):q,T=[],A=[],k=0}function D(L){if(Array.isArray(L))for(let q of L)D(q);else if(L instanceof ChangeSet){if(L.length!=S)throw new RangeError(`Mismatched change set length (got ${L.length}, expected ${S})`);P(),M=M?M.compose(L.map(M)):L}else{let{from:q,to:B=q,insert:F}=L;if(q>B||q<0||B>S)throw new RangeError(`Invalid change range ${q} to ${B} (in doc of length ${S})`);let j=F?typeof F=="string"?Text.of(F.split(R||DefaultSplit)):F:Text.empty,z=j.length;if(q==B&&z==0)return;q<k&&P(),q>k&&addSection(T,q-k,-1),addSection(T,B-q,z),addInsert(A,T,j),k=B}}return D(v),P(!M),M}static empty(v){return new ChangeSet(v?[v,-1]:[],[])}static fromJSON(v){if(!Array.isArray(v))throw new RangeError("Invalid JSON representation of ChangeSet");let S=[],R=[];for(let T=0;T<v.length;T++){let A=v[T];if(typeof A=="number")S.push(A,-1);else{if(!Array.isArray(A)||typeof A[0]!="number"||A.some((k,M)=>M&&typeof k!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(A.length==1)S.push(A[0],0);else{for(;R.length<T;)R.push(Text.empty);R[T]=Text.of(A.slice(1)),S.push(A[0],R[T].length)}}}return new ChangeSet(S,R)}static createSet(v,S){return new ChangeSet(v,S)}}function addSection(_,v,S,R=!1){if(v==0&&S<=0)return;let T=_.length-2;T>=0&&S<=0&&S==_[T+1]?_[T]+=v:T>=0&&v==0&&_[T]==0?_[T+1]+=S:R?(_[T]+=v,_[T+1]+=S):_.push(v,S)}function addInsert(_,v,S){if(S.length==0)return;let R=v.length-2>>1;if(R<_.length)_[_.length-1]=_[_.length-1].append(S);else{for(;_.length<R;)_.push(Text.empty);_.push(S)}}function iterChanges(_,v,S){let R=_.inserted;for(let T=0,A=0,k=0;k<_.sections.length;){let M=_.sections[k++],P=_.sections[k++];if(P<0)T+=M,A+=M;else{let D=T,L=A,q=Text.empty;for(;D+=M,L+=P,P&&R&&(q=q.append(R[k-2>>1])),!(S||k==_.sections.length||_.sections[k+1]<0);)M=_.sections[k++],P=_.sections[k++];v(T,D,A,L,q),T=D,A=L}}}function mapSet(_,v,S,R=!1){let T=[],A=R?[]:null,k=new SectionIter(_),M=new SectionIter(v);for(let P=-1;;){if(k.done&&M.len||M.done&&k.len)throw new Error("Mismatched change set lengths");if(k.ins==-1&&M.ins==-1){let D=Math.min(k.len,M.len);addSection(T,D,-1),k.forward(D),M.forward(D)}else if(M.ins>=0&&(k.ins<0||P==k.i||k.off==0&&(M.len<k.len||M.len==k.len&&!S))){let D=M.len;for(addSection(T,M.ins,-1);D;){let L=Math.min(k.len,D);k.ins>=0&&P<k.i&&k.len<=L&&(addSection(T,0,k.ins),A&&addInsert(A,T,k.text),P=k.i),k.forward(L),D-=L}M.next()}else if(k.ins>=0){let D=0,L=k.len;for(;L;)if(M.ins==-1){let q=Math.min(L,M.len);D+=q,L-=q,M.forward(q)}else if(M.ins==0&&M.len<L)L-=M.len,M.next();else break;addSection(T,D,P<k.i?k.ins:0),A&&P<k.i&&addInsert(A,T,k.text),P=k.i,k.forward(k.len-L)}else{if(k.done&&M.done)return A?ChangeSet.createSet(T,A):ChangeDesc.create(T);throw new Error("Mismatched change set lengths")}}}function composeSets(_,v,S=!1){let R=[],T=S?[]:null,A=new SectionIter(_),k=new SectionIter(v);for(let M=!1;;){if(A.done&&k.done)return T?ChangeSet.createSet(R,T):ChangeDesc.create(R);if(A.ins==0)addSection(R,A.len,0,M),A.next();else if(k.len==0&&!k.done)addSection(R,0,k.ins,M),T&&addInsert(T,R,k.text),k.next();else{if(A.done||k.done)throw new Error("Mismatched change set lengths");{let P=Math.min(A.len2,k.len),D=R.length;if(A.ins==-1){let L=k.ins==-1?-1:k.off?0:k.ins;addSection(R,P,L,M),T&&L&&addInsert(T,R,k.text)}else k.ins==-1?(addSection(R,A.off?0:A.len,P,M),T&&addInsert(T,R,A.textBit(P))):(addSection(R,A.off?0:A.len,k.off?0:k.ins,M),T&&!k.off&&addInsert(T,R,k.text));M=(A.ins>P||k.ins>=0&&k.len>P)&&(M||R.length>D),A.forward2(P),k.forward(P)}}}}class SectionIter{constructor(v){this.set=v,this.i=0,this.next()}next(){let{sections:v}=this.set;this.i<v.length?(this.len=v[this.i++],this.ins=v[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:v}=this.set,S=this.i-2>>1;return S>=v.length?Text.empty:v[S]}textBit(v){let{inserted:S}=this.set,R=this.i-2>>1;return R>=S.length&&!v?Text.empty:S[R].slice(this.off,v==null?void 0:this.off+v)}forward(v){v==this.len?this.next():(this.len-=v,this.off+=v)}forward2(v){this.ins==-1?this.forward(v):v==this.ins?this.next():(this.ins-=v,this.off+=v)}}class SelectionRange{constructor(v,S,R){this.from=v,this.to=S,this.flags=R}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let v=this.flags&7;return v==7?null:v}get goalColumn(){let v=this.flags>>6;return v==16777215?void 0:v}map(v,S=-1){let R,T;return this.empty?R=T=v.mapPos(this.from,S):(R=v.mapPos(this.from,1),T=v.mapPos(this.to,-1)),R==this.from&&T==this.to?this:new SelectionRange(R,T,this.flags)}extend(v,S=v){if(v<=this.anchor&&S>=this.anchor)return EditorSelection.range(v,S);let R=Math.abs(v-this.anchor)>Math.abs(S-this.anchor)?v:S;return EditorSelection.range(this.anchor,R)}eq(v,S=!1){return this.anchor==v.anchor&&this.head==v.head&&(!S||!this.empty||this.assoc==v.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(v){if(!v||typeof v.anchor!="number"||typeof v.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(v.anchor,v.head)}static create(v,S,R){return new SelectionRange(v,S,R)}}class EditorSelection{constructor(v,S){this.ranges=v,this.mainIndex=S}map(v,S=-1){return v.empty?this:EditorSelection.create(this.ranges.map(R=>R.map(v,S)),this.mainIndex)}eq(v,S=!1){if(this.ranges.length!=v.ranges.length||this.mainIndex!=v.mainIndex)return!1;for(let R=0;R<this.ranges.length;R++)if(!this.ranges[R].eq(v.ranges[R],S))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(v,S=!0){return EditorSelection.create([v].concat(this.ranges),S?0:this.mainIndex+1)}replaceRange(v,S=this.mainIndex){let R=this.ranges.slice();return R[S]=v,EditorSelection.create(R,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(v=>v.toJSON()),main:this.mainIndex}}static fromJSON(v){if(!v||!Array.isArray(v.ranges)||typeof v.main!="number"||v.main>=v.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(v.ranges.map(S=>SelectionRange.fromJSON(S)),v.main)}static single(v,S=v){return new EditorSelection([EditorSelection.range(v,S)],0)}static create(v,S=0){if(v.length==0)throw new RangeError("A selection needs at least one range");for(let R=0,T=0;T<v.length;T++){let A=v[T];if(A.empty?A.from<=R:A.from<R)return EditorSelection.normalized(v.slice(),S);R=A.to}return new EditorSelection(v,S)}static cursor(v,S=0,R,T){return SelectionRange.create(v,v,(S==0?0:S<0?8:16)|(R==null?7:Math.min(6,R))|(T??16777215)<<6)}static range(v,S,R,T){let A=(R??16777215)<<6|(T==null?7:Math.min(6,T));return S<v?SelectionRange.create(S,v,48|A):SelectionRange.create(v,S,(S>v?8:0)|A)}static normalized(v,S=0){let R=v[S];v.sort((T,A)=>T.from-A.from),S=v.indexOf(R);for(let T=1;T<v.length;T++){let A=v[T],k=v[T-1];if(A.empty?A.from<=k.to:A.from<k.to){let M=k.from,P=Math.max(A.to,k.to);T<=S&&S--,v.splice(--T,2,A.anchor>A.head?EditorSelection.range(P,M):EditorSelection.range(M,P))}}return new EditorSelection(v,S)}}function checkSelection(_,v){for(let S of _.ranges)if(S.to>v)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(v,S,R,T,A){this.combine=v,this.compareInput=S,this.compare=R,this.isStatic=T,this.id=nextID++,this.default=v([]),this.extensions=typeof A=="function"?A(this):A}get reader(){return this}static define(v={}){return new Facet(v.combine||(S=>S),v.compareInput||((S,R)=>S===R),v.compare||(v.combine?(S,R)=>S===R:sameArray$1),!!v.static,v.enables)}of(v){return new FacetProvider([],this,0,v)}compute(v,S){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(v,this,1,S)}computeN(v,S){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(v,this,2,S)}from(v,S){return S||(S=R=>R),this.compute([v],R=>S(R.field(v)))}}function sameArray$1(_,v){return _==v||_.length==v.length&&_.every((S,R)=>S===v[R])}class FacetProvider{constructor(v,S,R,T){this.dependencies=v,this.facet=S,this.type=R,this.value=T,this.id=nextID++}dynamicSlot(v){var S;let R=this.value,T=this.facet.compareInput,A=this.id,k=v[A]>>1,M=this.type==2,P=!1,D=!1,L=[];for(let q of this.dependencies)q=="doc"?P=!0:q=="selection"?D=!0:(((S=v[q.id])!==null&&S!==void 0?S:1)&1)==0&&L.push(v[q.id]);return{create(q){return q.values[k]=R(q),1},update(q,B){if(P&&B.docChanged||D&&(B.docChanged||B.selection)||ensureAll(q,L)){let F=R(q);if(M?!compareArray(F,q.values[k],T):!T(F,q.values[k]))return q.values[k]=F,1}return 0},reconfigure:(q,B)=>{let F,j=B.config.address[A];if(j!=null){let z=getAddr(B,j);if(this.dependencies.every(V=>V instanceof Facet?B.facet(V)===q.facet(V):V instanceof StateField?B.field(V,!1)==q.field(V,!1):!0)||(M?compareArray(F=R(q),z,T):T(F=R(q),z)))return q.values[k]=z,0}else F=R(q);return q.values[k]=F,1}}}}function compareArray(_,v,S){if(_.length!=v.length)return!1;for(let R=0;R<_.length;R++)if(!S(_[R],v[R]))return!1;return!0}function ensureAll(_,v){let S=!1;for(let R of v)ensureAddr(_,R)&1&&(S=!0);return S}function dynamicFacetSlot(_,v,S){let R=S.map(P=>_[P.id]),T=S.map(P=>P.type),A=R.filter(P=>!(P&1)),k=_[v.id]>>1;function M(P){let D=[];for(let L=0;L<R.length;L++){let q=getAddr(P,R[L]);if(T[L]==2)for(let B of q)D.push(B);else D.push(q)}return v.combine(D)}return{create(P){for(let D of R)ensureAddr(P,D);return P.values[k]=M(P),1},update(P,D){if(!ensureAll(P,A))return 0;let L=M(P);return v.compare(L,P.values[k])?0:(P.values[k]=L,1)},reconfigure(P,D){let L=ensureAll(P,R),q=D.config.facets[v.id],B=D.facet(v);if(q&&!L&&sameArray$1(S,q))return P.values[k]=B,0;let F=M(P);return v.compare(F,B)?(P.values[k]=B,0):(P.values[k]=F,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(v,S,R,T,A){this.id=v,this.createF=S,this.updateF=R,this.compareF=T,this.spec=A,this.provides=void 0}static define(v){let S=new StateField(nextID++,v.create,v.update,v.compare||((R,T)=>R===T),v);return v.provide&&(S.provides=v.provide(S)),S}create(v){let S=v.facet(initField).find(R=>R.field==this);return(S?.create||this.createF)(v)}slot(v){let S=v[this.id]>>1;return{create:R=>(R.values[S]=this.create(R),1),update:(R,T)=>{let A=R.values[S],k=this.updateF(A,T);return this.compareF(A,k)?0:(R.values[S]=k,1)},reconfigure:(R,T)=>{let A=R.facet(initField),k=T.facet(initField),M;return(M=A.find(P=>P.field==this))&&M!=k.find(P=>P.field==this)?(R.values[S]=M.create(R),1):T.config.address[this.id]!=null?(R.values[S]=T.field(this),0):(R.values[S]=this.create(R),1)}}}init(v){return[this,initField.of({field:this,create:v})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(_){return v=>new PrecExtension(v,_)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(v,S){this.inner=v,this.prec=S}}class Compartment{of(v){return new CompartmentInstance(this,v)}reconfigure(v){return Compartment.reconfigure.of({compartment:this,extension:v})}get(v){return v.config.compartments.get(this)}}class CompartmentInstance{constructor(v,S){this.compartment=v,this.inner=S}}class Configuration{constructor(v,S,R,T,A,k){for(this.base=v,this.compartments=S,this.dynamicSlots=R,this.address=T,this.staticValues=A,this.facets=k,this.statusTemplate=[];this.statusTemplate.length<R.length;)this.statusTemplate.push(0)}staticFacet(v){let S=this.address[v.id];return S==null?v.default:this.staticValues[S>>1]}static resolve(v,S,R){let T=[],A=Object.create(null),k=new Map;for(let B of flatten$1(v,S,k))B instanceof StateField?T.push(B):(A[B.facet.id]||(A[B.facet.id]=[])).push(B);let M=Object.create(null),P=[],D=[];for(let B of T)M[B.id]=D.length<<1,D.push(F=>B.slot(F));let L=R?.config.facets;for(let B in A){let F=A[B],j=F[0].facet,z=L&&L[B]||[];if(F.every(V=>V.type==0))if(M[j.id]=P.length<<1|1,sameArray$1(z,F))P.push(R.facet(j));else{let V=j.combine(F.map(G=>G.value));P.push(R&&j.compare(V,R.facet(j))?R.facet(j):V)}else{for(let V of F)V.type==0?(M[V.id]=P.length<<1|1,P.push(V.value)):(M[V.id]=D.length<<1,D.push(G=>V.dynamicSlot(G)));M[j.id]=D.length<<1,D.push(V=>dynamicFacetSlot(V,j,F))}}let q=D.map(B=>B(M));return new Configuration(v,k,q,M,P,A)}}function flatten$1(_,v,S){let R=[[],[],[],[],[]],T=new Map;function A(k,M){let P=T.get(k);if(P!=null){if(P<=M)return;let D=R[P].indexOf(k);D>-1&&R[P].splice(D,1),k instanceof CompartmentInstance&&S.delete(k.compartment)}if(T.set(k,M),Array.isArray(k))for(let D of k)A(D,M);else if(k instanceof CompartmentInstance){if(S.has(k.compartment))throw new RangeError("Duplicate use of compartment in extensions");let D=v.get(k.compartment)||k.inner;S.set(k.compartment,D),A(D,M)}else if(k instanceof PrecExtension)A(k.inner,k.prec);else if(k instanceof StateField)R[M].push(k),k.provides&&A(k.provides,M);else if(k instanceof FacetProvider)R[M].push(k),k.facet.extensions&&A(k.facet.extensions,Prec_.default);else{let D=k.extension;if(!D)throw new Error(`Unrecognized extension value in extension set (${k}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);A(D,M)}}return A(_,Prec_.default),R.reduce((k,M)=>k.concat(M))}function ensureAddr(_,v){if(v&1)return 2;let S=v>>1,R=_.status[S];if(R==4)throw new Error("Cyclic dependency between fields and/or facets");if(R&2)return R;_.status[S]=4;let T=_.computeSlot(_,_.config.dynamicSlots[S]);return _.status[S]=2|T}function getAddr(_,v){return v&1?_.config.staticValues[v>>1]:_.values[v>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:_=>_.some(v=>v),static:!0}),lineSeparator=Facet.define({combine:_=>_.length?_[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:_=>_.length?_[0]:!1});class Annotation{constructor(v,S){this.type=v,this.value=S}static define(){return new AnnotationType}}class AnnotationType{of(v){return new Annotation(this,v)}}class StateEffectType{constructor(v){this.map=v}of(v){return new StateEffect(this,v)}}class StateEffect{constructor(v,S){this.type=v,this.value=S}map(v){let S=this.type.map(this.value,v);return S===void 0?void 0:S==this.value?this:new StateEffect(this.type,S)}is(v){return this.type==v}static define(v={}){return new StateEffectType(v.map||(S=>S))}static mapEffects(v,S){if(!v.length)return v;let R=[];for(let T of v){let A=T.map(S);A&&R.push(A)}return R}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(v,S,R,T,A,k){this.startState=v,this.changes=S,this.selection=R,this.effects=T,this.annotations=A,this.scrollIntoView=k,this._doc=null,this._state=null,R&&checkSelection(R,S.newLength),A.some(M=>M.type==Transaction.time)||(this.annotations=A.concat(Transaction.time.of(Date.now())))}static create(v,S,R,T,A,k){return new Transaction(v,S,R,T,A,k)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(v){for(let S of this.annotations)if(S.type==v)return S.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(v){let S=this.annotation(Transaction.userEvent);return!!(S&&(S==v||S.length>v.length&&S.slice(0,v.length)==v&&S[v.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(_,v){let S=[];for(let R=0,T=0;;){let A,k;if(R<_.length&&(T==v.length||v[T]>=_[R]))A=_[R++],k=_[R++];else if(T<v.length)A=v[T++],k=v[T++];else return S;!S.length||S[S.length-1]<A?S.push(A,k):S[S.length-1]<k&&(S[S.length-1]=k)}}function mergeTransaction(_,v,S){var R;let T,A,k;return S?(T=v.changes,A=ChangeSet.empty(v.changes.length),k=_.changes.compose(v.changes)):(T=v.changes.map(_.changes),A=_.changes.mapDesc(v.changes,!0),k=_.changes.compose(T)),{changes:k,selection:v.selection?v.selection.map(A):(R=_.selection)===null||R===void 0?void 0:R.map(T),effects:StateEffect.mapEffects(_.effects,T).concat(StateEffect.mapEffects(v.effects,A)),annotations:_.annotations.length?_.annotations.concat(v.annotations):v.annotations,scrollIntoView:_.scrollIntoView||v.scrollIntoView}}function resolveTransactionInner(_,v,S){let R=v.selection,T=asArray$1(v.annotations);return v.userEvent&&(T=T.concat(Transaction.userEvent.of(v.userEvent))),{changes:v.changes instanceof ChangeSet?v.changes:ChangeSet.of(v.changes||[],S,_.facet(lineSeparator)),selection:R&&(R instanceof EditorSelection?R:EditorSelection.single(R.anchor,R.head)),effects:asArray$1(v.effects),annotations:T,scrollIntoView:!!v.scrollIntoView}}function resolveTransaction(_,v,S){let R=resolveTransactionInner(_,v.length?v[0]:{},_.doc.length);v.length&&v[0].filter===!1&&(S=!1);for(let A=1;A<v.length;A++){v[A].filter===!1&&(S=!1);let k=!!v[A].sequential;R=mergeTransaction(R,resolveTransactionInner(_,v[A],k?R.changes.newLength:_.doc.length),k)}let T=Transaction.create(_,R.changes,R.selection,R.effects,R.annotations,R.scrollIntoView);return extendTransaction(S?filterTransaction(T):T)}function filterTransaction(_){let v=_.startState,S=!0;for(let T of v.facet(changeFilter)){let A=T(_);if(A===!1){S=!1;break}Array.isArray(A)&&(S=S===!0?A:joinRanges(S,A))}if(S!==!0){let T,A;if(S===!1)A=_.changes.invertedDesc,T=ChangeSet.empty(v.doc.length);else{let k=_.changes.filter(S);T=k.changes,A=k.filtered.mapDesc(k.changes).invertedDesc}_=Transaction.create(v,T,_.selection&&_.selection.map(A),StateEffect.mapEffects(_.effects,A),_.annotations,_.scrollIntoView)}let R=v.facet(transactionFilter);for(let T=R.length-1;T>=0;T--){let A=R[T](_);A instanceof Transaction?_=A:Array.isArray(A)&&A.length==1&&A[0]instanceof Transaction?_=A[0]:_=resolveTransaction(v,asArray$1(A),!1)}return _}function extendTransaction(_){let v=_.startState,S=v.facet(transactionExtender),R=_;for(let T=S.length-1;T>=0;T--){let A=S[T](_);A&&Object.keys(A).length&&(R=mergeTransaction(R,resolveTransactionInner(v,A,_.changes.newLength),!0))}return R==_?_:Transaction.create(v,_.changes,_.selection,R.effects,R.annotations,R.scrollIntoView)}const none$2=[];function asArray$1(_){return _==null?none$2:Array.isArray(_)?_:[_]}var CharCategory=(function(_){return _[_.Word=0]="Word",_[_.Space=1]="Space",_[_.Other=2]="Other",_})(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(_){if(wordChar)return wordChar.test(_);for(let v=0;v<_.length;v++){let S=_[v];if(/\w/.test(S)||S>""&&(S.toUpperCase()!=S.toLowerCase()||nonASCIISingleCaseWordChar.test(S)))return!0}return!1}function makeCategorizer(_){return v=>{if(!/\S/.test(v))return CharCategory.Space;if(hasWordChar(v))return CharCategory.Word;for(let S=0;S<_.length;S++)if(v.indexOf(_[S])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(v,S,R,T,A,k){this.config=v,this.doc=S,this.selection=R,this.values=T,this.status=v.statusTemplate.slice(),this.computeSlot=A,k&&(k._state=this);for(let M=0;M<this.config.dynamicSlots.length;M++)ensureAddr(this,M<<1);this.computeSlot=null}field(v,S=!0){let R=this.config.address[v.id];if(R==null){if(S)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,R),getAddr(this,R)}update(...v){return resolveTransaction(this,v,!0)}applyTransaction(v){let S=this.config,{base:R,compartments:T}=S;for(let M of v.effects)M.is(Compartment.reconfigure)?(S&&(T=new Map,S.compartments.forEach((P,D)=>T.set(D,P)),S=null),T.set(M.value.compartment,M.value.extension)):M.is(StateEffect.reconfigure)?(S=null,R=M.value):M.is(StateEffect.appendConfig)&&(S=null,R=asArray$1(R).concat(M.value));let A;S?A=v.startState.values.slice():(S=Configuration.resolve(R,T,this),A=new EditorState(S,this.doc,this.selection,S.dynamicSlots.map(()=>null),(P,D)=>D.reconfigure(P,this),null).values);let k=v.startState.facet(allowMultipleSelections)?v.newSelection:v.newSelection.asSingle();new EditorState(S,v.newDoc,k,A,(M,P)=>P.update(M,v),v)}replaceSelection(v){return typeof v=="string"&&(v=this.toText(v)),this.changeByRange(S=>({changes:{from:S.from,to:S.to,insert:v},range:EditorSelection.cursor(S.from+v.length)}))}changeByRange(v){let S=this.selection,R=v(S.ranges[0]),T=this.changes(R.changes),A=[R.range],k=asArray$1(R.effects);for(let M=1;M<S.ranges.length;M++){let P=v(S.ranges[M]),D=this.changes(P.changes),L=D.map(T);for(let B=0;B<M;B++)A[B]=A[B].map(L);let q=T.mapDesc(D,!0);A.push(P.range.map(q)),T=T.compose(L),k=StateEffect.mapEffects(k,L).concat(StateEffect.mapEffects(asArray$1(P.effects),q))}return{changes:T,selection:EditorSelection.create(A,S.mainIndex),effects:k}}changes(v=[]){return v instanceof ChangeSet?v:ChangeSet.of(v,this.doc.length,this.facet(EditorState.lineSeparator))}toText(v){return Text.of(v.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(v=0,S=this.doc.length){return this.doc.sliceString(v,S,this.lineBreak)}facet(v){let S=this.config.address[v.id];return S==null?v.default:(ensureAddr(this,S),getAddr(this,S))}toJSON(v){let S={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(v)for(let R in v){let T=v[R];T instanceof StateField&&this.config.address[T.id]!=null&&(S[R]=T.spec.toJSON(this.field(v[R]),this))}return S}static fromJSON(v,S={},R){if(!v||typeof v.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let T=[];if(R){for(let A in R)if(Object.prototype.hasOwnProperty.call(v,A)){let k=R[A],M=v[A];T.push(k.init(P=>k.spec.fromJSON(M,P)))}}return EditorState.create({doc:v.doc,selection:EditorSelection.fromJSON(v.selection),extensions:S.extensions?T.concat([S.extensions]):T})}static create(v={}){let S=Configuration.resolve(v.extensions||[],new Map),R=v.doc instanceof Text?v.doc:Text.of((v.doc||"").split(S.staticFacet(EditorState.lineSeparator)||DefaultSplit)),T=v.selection?v.selection instanceof EditorSelection?v.selection:EditorSelection.single(v.selection.anchor,v.selection.head):EditorSelection.single(0);return checkSelection(T,R.length),S.staticFacet(allowMultipleSelections)||(T=T.asSingle()),new EditorState(S,R,T,S.dynamicSlots.map(()=>null),(A,k)=>k.create(A),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(v,...S){for(let R of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(R,v)){v=R[v];break}return S.length&&(v=v.replace(/\$(\$|\d*)/g,(R,T)=>{if(T=="$")return"$";let A=+(T||1);return!A||A>S.length?R:S[A-1]})),v}languageDataAt(v,S,R=-1){let T=[];for(let A of this.facet(languageData))for(let k of A(this,S,R))Object.prototype.hasOwnProperty.call(k,v)&&T.push(k[v]);return T}charCategorizer(v){return makeCategorizer(this.languageDataAt("wordChars",v).join(""))}wordAt(v){let{text:S,from:R,length:T}=this.doc.lineAt(v),A=this.charCategorizer(v),k=v-R,M=v-R;for(;k>0;){let P=findClusterBreak(S,k,!1);if(A(S.slice(P,k))!=CharCategory.Word)break;k=P}for(;M<T;){let P=findClusterBreak(S,M);if(A(S.slice(M,P))!=CharCategory.Word)break;M=P}return k==M?null:EditorSelection.range(k+R,M+R)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:_=>_.length?_[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(_,v){let S=Object.keys(_),R=Object.keys(v);return S.length==R.length&&S.every(T=>_[T]==v[T])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(_,v,S={}){let R={};for(let T of _)for(let A of Object.keys(T)){let k=T[A],M=R[A];if(M===void 0)R[A]=k;else if(!(M===k||k===void 0))if(Object.hasOwnProperty.call(S,A))R[A]=S[A](M,k);else throw new Error("Config merge conflict for field "+A)}for(let T in v)R[T]===void 0&&(R[T]=v[T]);return R}class RangeValue{eq(v){return this==v}range(v,S=v){return Range$1.create(v,S,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Mp{constructor(v,S,R){this.from=v,this.to=S,this.value=R}static create(v,S,R){return new Mp(v,S,R)}};function cmpRange(_,v){return _.from-v.from||_.value.startSide-v.value.startSide}class Chunk{constructor(v,S,R,T){this.from=v,this.to=S,this.value=R,this.maxPoint=T}get length(){return this.to[this.to.length-1]}findIndex(v,S,R,T=0){let A=R?this.to:this.from;for(let k=T,M=A.length;;){if(k==M)return k;let P=k+M>>1,D=A[P]-v||(R?this.value[P].endSide:this.value[P].startSide)-S;if(P==k)return D>=0?k:M;D>=0?M=P:k=P+1}}between(v,S,R,T){for(let A=this.findIndex(S,-1e9,!0),k=this.findIndex(R,1e9,!1,A);A<k;A++)if(T(this.from[A]+v,this.to[A]+v,this.value[A])===!1)return!1}map(v,S){let R=[],T=[],A=[],k=-1,M=-1;for(let P=0;P<this.value.length;P++){let D=this.value[P],L=this.from[P]+v,q=this.to[P]+v,B,F;if(L==q){let j=S.mapPos(L,D.startSide,D.mapMode);if(j==null||(B=F=j,D.startSide!=D.endSide&&(F=S.mapPos(L,D.endSide),F<B)))continue}else if(B=S.mapPos(L,D.startSide),F=S.mapPos(q,D.endSide),B>F||B==F&&D.startSide>0&&D.endSide<=0)continue;(F-B||D.endSide-D.startSide)<0||(k<0&&(k=B),D.point&&(M=Math.max(M,F-B)),R.push(D),T.push(B-k),A.push(F-k))}return{mapped:R.length?new Chunk(T,A,R,M):null,pos:k}}}class RangeSet{constructor(v,S,R,T){this.chunkPos=v,this.chunk=S,this.nextLayer=R,this.maxPoint=T}static create(v,S,R,T){return new RangeSet(v,S,R,T)}get length(){let v=this.chunk.length-1;return v<0?0:Math.max(this.chunkEnd(v),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let v=this.nextLayer.size;for(let S of this.chunk)v+=S.value.length;return v}chunkEnd(v){return this.chunkPos[v]+this.chunk[v].length}update(v){let{add:S=[],sort:R=!1,filterFrom:T=0,filterTo:A=this.length}=v,k=v.filter;if(S.length==0&&!k)return this;if(R&&(S=S.slice().sort(cmpRange)),this.isEmpty)return S.length?RangeSet.of(S):this;let M=new LayerCursor(this,null,-1).goto(0),P=0,D=[],L=new RangeSetBuilder;for(;M.value||P<S.length;)if(P<S.length&&(M.from-S[P].from||M.startSide-S[P].value.startSide)>=0){let q=S[P++];L.addInner(q.from,q.to,q.value)||D.push(q)}else M.rangeIndex==1&&M.chunkIndex<this.chunk.length&&(P==S.length||this.chunkEnd(M.chunkIndex)<S[P].from)&&(!k||T>this.chunkEnd(M.chunkIndex)||A<this.chunkPos[M.chunkIndex])&&L.addChunk(this.chunkPos[M.chunkIndex],this.chunk[M.chunkIndex])?M.nextChunk():((!k||T>M.to||A<M.from||k(M.from,M.to,M.value))&&(L.addInner(M.from,M.to,M.value)||D.push(Range$1.create(M.from,M.to,M.value))),M.next());return L.finishInner(this.nextLayer.isEmpty&&!D.length?RangeSet.empty:this.nextLayer.update({add:D,filter:k,filterFrom:T,filterTo:A}))}map(v){if(v.empty||this.isEmpty)return this;let S=[],R=[],T=-1;for(let k=0;k<this.chunk.length;k++){let M=this.chunkPos[k],P=this.chunk[k],D=v.touchesRange(M,M+P.length);if(D===!1)T=Math.max(T,P.maxPoint),S.push(P),R.push(v.mapPos(M));else if(D===!0){let{mapped:L,pos:q}=P.map(M,v);L&&(T=Math.max(T,L.maxPoint),S.push(L),R.push(q))}}let A=this.nextLayer.map(v);return S.length==0?A:new RangeSet(R,S,A||RangeSet.empty,T)}between(v,S,R){if(!this.isEmpty){for(let T=0;T<this.chunk.length;T++){let A=this.chunkPos[T],k=this.chunk[T];if(S>=A&&v<=A+k.length&&k.between(A,v-A,S-A,R)===!1)return}this.nextLayer.between(v,S,R)}}iter(v=0){return HeapCursor.from([this]).goto(v)}get isEmpty(){return this.nextLayer==this}static iter(v,S=0){return HeapCursor.from(v).goto(S)}static compare(v,S,R,T,A=-1){let k=v.filter(q=>q.maxPoint>0||!q.isEmpty&&q.maxPoint>=A),M=S.filter(q=>q.maxPoint>0||!q.isEmpty&&q.maxPoint>=A),P=findSharedChunks(k,M,R),D=new SpanCursor(k,P,A),L=new SpanCursor(M,P,A);R.iterGaps((q,B,F)=>compare(D,q,L,B,F,T)),R.empty&&R.length==0&&compare(D,0,L,0,0,T)}static eq(v,S,R=0,T){T==null&&(T=999999999);let A=v.filter(L=>!L.isEmpty&&S.indexOf(L)<0),k=S.filter(L=>!L.isEmpty&&v.indexOf(L)<0);if(A.length!=k.length)return!1;if(!A.length)return!0;let M=findSharedChunks(A,k),P=new SpanCursor(A,M,0).goto(R),D=new SpanCursor(k,M,0).goto(R);for(;;){if(P.to!=D.to||!sameValues(P.active,D.active)||P.point&&(!D.point||!P.point.eq(D.point)))return!1;if(P.to>T)return!0;P.next(),D.next()}}static spans(v,S,R,T,A=-1){let k=new SpanCursor(v,null,A).goto(S),M=S,P=k.openStart;for(;;){let D=Math.min(k.to,R);if(k.point){let L=k.activeForPoint(k.to),q=k.pointFrom<S?L.length+1:k.point.startSide<0?L.length:Math.min(L.length,P);T.point(M,D,k.point,L,q,k.pointRank),P=Math.min(k.openEnd(D),L.length)}else D>M&&(T.span(M,D,k.active,P),P=k.openEnd(D));if(k.to>R)return P+(k.point&&k.to>R?1:0);M=k.to,k.next()}}static of(v,S=!1){let R=new RangeSetBuilder;for(let T of v instanceof Range$1?[v]:S?lazySort(v):v)R.add(T.from,T.to,T.value);return R.finish()}static join(v){if(!v.length)return RangeSet.empty;let S=v[v.length-1];for(let R=v.length-2;R>=0;R--)for(let T=v[R];T!=RangeSet.empty;T=T.nextLayer)S=new RangeSet(T.chunkPos,T.chunk,S,Math.max(T.maxPoint,S.maxPoint));return S}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(_){if(_.length>1)for(let v=_[0],S=1;S<_.length;S++){let R=_[S];if(cmpRange(v,R)>0)return _.slice().sort(cmpRange);v=R}return _}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(v){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,v&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(v,S,R){this.addInner(v,S,R)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(v,S,R)}addInner(v,S,R){let T=v-this.lastTo||R.startSide-this.last.endSide;if(T<=0&&(v-this.lastFrom||R.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return T<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=v),this.from.push(v-this.chunkStart),this.to.push(S-this.chunkStart),this.last=R,this.lastFrom=v,this.lastTo=S,this.value.push(R),R.point&&(this.maxPoint=Math.max(this.maxPoint,S-v)),!0)}addChunk(v,S){if((v-this.lastTo||S.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,S.maxPoint),this.chunks.push(S),this.chunkPos.push(v);let R=S.value.length-1;return this.last=S.value[R],this.lastFrom=S.from[R]+v,this.lastTo=S.to[R]+v,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(v){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return v;let S=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(v):v,this.setMaxPoint);return this.from=null,S}}function findSharedChunks(_,v,S){let R=new Map;for(let A of _)for(let k=0;k<A.chunk.length;k++)A.chunk[k].maxPoint<=0&&R.set(A.chunk[k],A.chunkPos[k]);let T=new Set;for(let A of v)for(let k=0;k<A.chunk.length;k++){let M=R.get(A.chunk[k]);M!=null&&(S?S.mapPos(M):M)==A.chunkPos[k]&&!S?.touchesRange(M,M+A.chunk[k].length)&&T.add(A.chunk[k])}return T}class LayerCursor{constructor(v,S,R,T=0){this.layer=v,this.skip=S,this.minPoint=R,this.rank=T}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(v,S=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(v,S,!1),this}gotoInner(v,S,R){for(;this.chunkIndex<this.layer.chunk.length;){let T=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(T)||this.layer.chunkEnd(this.chunkIndex)<v||T.maxPoint<this.minPoint))break;this.chunkIndex++,R=!1}if(this.chunkIndex<this.layer.chunk.length){let T=this.layer.chunk[this.chunkIndex].findIndex(v-this.layer.chunkPos[this.chunkIndex],S,!0);(!R||this.rangeIndex<T)&&this.setRangeIndex(T)}this.next()}forward(v,S){(this.to-v||this.endSide-S)<0&&this.gotoInner(v,S,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let v=this.layer.chunkPos[this.chunkIndex],S=this.layer.chunk[this.chunkIndex],R=v+S.from[this.rangeIndex];if(this.from=R,this.to=v+S.to[this.rangeIndex],this.value=S.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(v){if(v==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=v}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(v){return this.from-v.from||this.startSide-v.startSide||this.rank-v.rank||this.to-v.to||this.endSide-v.endSide}}class HeapCursor{constructor(v){this.heap=v}static from(v,S=null,R=-1){let T=[];for(let A=0;A<v.length;A++)for(let k=v[A];!k.isEmpty;k=k.nextLayer)k.maxPoint>=R&&T.push(new LayerCursor(k,S,R,A));return T.length==1?T[0]:new HeapCursor(T)}get startSide(){return this.value?this.value.startSide:0}goto(v,S=-1e9){for(let R of this.heap)R.goto(v,S);for(let R=this.heap.length>>1;R>=0;R--)heapBubble(this.heap,R);return this.next(),this}forward(v,S){for(let R of this.heap)R.forward(v,S);for(let R=this.heap.length>>1;R>=0;R--)heapBubble(this.heap,R);(this.to-v||this.value.endSide-S)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let v=this.heap[0];this.from=v.from,this.to=v.to,this.value=v.value,this.rank=v.rank,v.value&&v.next(),heapBubble(this.heap,0)}}}function heapBubble(_,v){for(let S=_[v];;){let R=(v<<1)+1;if(R>=_.length)break;let T=_[R];if(R+1<_.length&&T.compare(_[R+1])>=0&&(T=_[R+1],R++),S.compare(T)<0)break;_[R]=S,_[v]=T,v=R}}class SpanCursor{constructor(v,S,R){this.minPoint=R,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(v,S,R)}goto(v,S=-1e9){return this.cursor.goto(v,S),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=v,this.endSide=S,this.openStart=-1,this.next(),this}forward(v,S){for(;this.minActive>-1&&(this.activeTo[this.minActive]-v||this.active[this.minActive].endSide-S)<0;)this.removeActive(this.minActive);this.cursor.forward(v,S)}removeActive(v){remove(this.active,v),remove(this.activeTo,v),remove(this.activeRank,v),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(v){let S=0,{value:R,to:T,rank:A}=this.cursor;for(;S<this.activeRank.length&&(A-this.activeRank[S]||T-this.activeTo[S])>0;)S++;insert(this.active,S,R),insert(this.activeTo,S,T),insert(this.activeRank,S,A),v&&insert(v,S,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let v=this.to,S=this.point;this.point=null;let R=this.openStart<0?[]:null;for(;;){let T=this.minActive;if(T>-1&&(this.activeTo[T]-this.cursor.from||this.active[T].endSide-this.cursor.startSide)<0){if(this.activeTo[T]>v){this.to=this.activeTo[T],this.endSide=this.active[T].endSide;break}this.removeActive(T),R&&remove(R,T)}else if(this.cursor.value)if(this.cursor.from>v){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let A=this.cursor.value;if(!A.point)this.addActive(R),this.cursor.next();else if(S&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=A,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=A.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(R){this.openStart=0;for(let T=R.length-1;T>=0&&R[T]<v;T--)this.openStart++}}activeForPoint(v){if(!this.active.length)return this.active;let S=[];for(let R=this.active.length-1;R>=0&&!(this.activeRank[R]<this.pointRank);R--)(this.activeTo[R]>v||this.activeTo[R]==v&&this.active[R].endSide>=this.point.endSide)&&S.push(this.active[R]);return S.reverse()}openEnd(v){let S=0;for(let R=this.activeTo.length-1;R>=0&&this.activeTo[R]>v;R--)S++;return S}}function compare(_,v,S,R,T,A){_.goto(v),S.goto(R);let k=R+T,M=R,P=R-v;for(;;){let D=_.to+P-S.to,L=D||_.endSide-S.endSide,q=L<0?_.to+P:S.to,B=Math.min(q,k);if(_.point||S.point?_.point&&S.point&&(_.point==S.point||_.point.eq(S.point))&&sameValues(_.activeForPoint(_.to),S.activeForPoint(S.to))||A.comparePoint(M,B,_.point,S.point):B>M&&!sameValues(_.active,S.active)&&A.compareRange(M,B,_.active,S.active),q>k)break;(D||_.openEnd!=S.openEnd)&&A.boundChange&&A.boundChange(q),M=q,L<=0&&_.next(),L>=0&&S.next()}}function sameValues(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++)if(_[S]!=v[S]&&!_[S].eq(v[S]))return!1;return!0}function remove(_,v){for(let S=v,R=_.length-1;S<R;S++)_[S]=_[S+1];_.pop()}function insert(_,v,S){for(let R=_.length-1;R>=v;R--)_[R+1]=_[R];_[v]=S}function findMinIndex(_,v){let S=-1,R=1e9;for(let T=0;T<v.length;T++)(v[T]-R||_[T].endSide-_[S].endSide)<0&&(S=T,R=v[T]);return S}function countColumn(_,v,S=_.length){let R=0;for(let T=0;T<S&&T<_.length;)_.charCodeAt(T)==9?(R+=v-R%v,T++):(R++,T=findClusterBreak(_,T));return R}function findColumn(_,v,S,R){for(let T=0,A=0;;){if(A>=v)return T;if(T==_.length)break;A+=_.charCodeAt(T)==9?S-A%S:1,T=findClusterBreak(_,T)}return R===!0?-1:_.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(v,S){this.rules=[];let{finish:R}=S||{};function T(k){return/^@/.test(k)?[k]:k.split(/,\s*/)}function A(k,M,P,D){let L=[],q=/^@(\w+)\b/.exec(k[0]),B=q&&q[1]=="keyframes";if(q&&M==null)return P.push(k[0]+";");for(let F in M){let j=M[F];if(/&/.test(F))A(F.split(/,\s*/).map(z=>k.map(V=>z.replace(/&/,V))).reduce((z,V)=>z.concat(V)),j,P);else if(j&&typeof j=="object"){if(!q)throw new RangeError("The value of a property ("+F+") should be a primitive value.");A(T(F),j,L,B)}else j!=null&&L.push(F.replace(/_.*/,"").replace(/[A-Z]/g,z=>"-"+z.toLowerCase())+": "+j+";")}(L.length||B)&&P.push((R&&!q&&!D?k.map(R):k).join(", ")+" {"+L.join(" ")+"}")}for(let k in v)A(T(k),v[k],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let v=top[COUNT]||1;return top[COUNT]=v+1,C+v.toString(36)}static mount(v,S,R){let T=v[SET],A=R&&R.nonce;T?A&&T.setNonce(A):T=new StyleSet(v,A),T.mount(Array.isArray(S)?S:[S],v)}}let adoptedSet=new Map;class StyleSet{constructor(v,S){let R=v.ownerDocument||v,T=R.defaultView;if(!v.head&&v.adoptedStyleSheets&&T.CSSStyleSheet){let A=adoptedSet.get(R);if(A)return v[SET]=A;this.sheet=new T.CSSStyleSheet,adoptedSet.set(R,this)}else this.styleTag=R.createElement("style"),S&&this.styleTag.setAttribute("nonce",S);this.modules=[],v[SET]=this}mount(v,S){let R=this.sheet,T=0,A=0;for(let k=0;k<v.length;k++){let M=v[k],P=this.modules.indexOf(M);if(P<A&&P>-1&&(this.modules.splice(P,1),A--,P=-1),P==-1){if(this.modules.splice(A++,0,M),R)for(let D=0;D<M.rules.length;D++)R.insertRule(M.rules[D],T++)}else{for(;A<P;)T+=this.modules[A++].rules.length;T+=M.rules.length,A++}}if(R)S.adoptedStyleSheets.indexOf(this.sheet)<0&&(S.adoptedStyleSheets=[this.sheet,...S.adoptedStyleSheets]);else{let k="";for(let P=0;P<this.modules.length;P++)k+=this.modules[P].getRules()+`
`;this.styleTag.textContent=k;let M=S.head||S;this.styleTag.parentNode!=M&&M.insertBefore(this.styleTag,M.firstChild)}}setNonce(v){this.styleTag&&this.styleTag.getAttribute("nonce")!=v&&this.styleTag.setAttribute("nonce",v)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift$3={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift$3[i]=String.fromCharCode(i);for(var code in base)shift$3.hasOwnProperty(code)||(shift$3[code]=base[code]);function keyName(_){var v=mac&&_.metaKey&&_.shiftKey&&!_.ctrlKey&&!_.altKey||ie$1&&_.shiftKey&&_.key&&_.key.length==1||_.key=="Unidentified",S=!v&&_.key||(_.shiftKey?shift$3:base)[_.keyCode]||_.key||"Unidentified";return S=="Esc"&&(S="Escape"),S=="Del"&&(S="Delete"),S=="Left"&&(S="ArrowLeft"),S=="Up"&&(S="ArrowUp"),S=="Right"&&(S="ArrowRight"),S=="Down"&&(S="ArrowDown"),S}function crelt(){var _=arguments[0];typeof _=="string"&&(_=document.createElement(_));var v=1,S=arguments[1];if(S&&typeof S=="object"&&S.nodeType==null&&!Array.isArray(S)){for(var R in S)if(Object.prototype.hasOwnProperty.call(S,R)){var T=S[R];typeof T=="string"?_.setAttribute(R,T):T!=null&&(_[R]=T)}v++}for(;v<arguments.length;v++)add(_,arguments[v]);return _}function add(_,v){if(typeof v=="string")_.appendChild(document.createTextNode(v));else if(v!=null)if(v.nodeType!=null)_.appendChild(v);else if(Array.isArray(v))for(var S=0;S<v.length;S++)add(_,v[S]);else throw new RangeError("Unsupported child node: "+v)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function getSelection(_){let v;return _.nodeType==11?v=_.getSelection?_:_.ownerDocument:v=_,v.getSelection()}function contains(_,v){return v?_==v||_.contains(v.nodeType!=1?v.parentNode:v):!1}function hasSelection(_,v){if(!v.anchorNode)return!1;try{return contains(_,v.anchorNode)}catch{return!1}}function clientRectsFor(_){return _.nodeType==3?textRange(_,0,_.nodeValue.length).getClientRects():_.nodeType==1?_.getClientRects():[]}function isEquivalentPosition(_,v,S,R){return S?scanFor(_,v,S,R,-1)||scanFor(_,v,S,R,1):!1}function domIndex(_){for(var v=0;;v++)if(_=_.previousSibling,!_)return v}function isBlockElement(_){return _.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(_.nodeName)}function scanFor(_,v,S,R,T){for(;;){if(_==S&&v==R)return!0;if(v==(T<0?0:maxOffset(_))){if(_.nodeName=="DIV")return!1;let A=_.parentNode;if(!A||A.nodeType!=1)return!1;v=domIndex(_)+(T<0?0:1),_=A}else if(_.nodeType==1){if(_=_.childNodes[v+(T<0?-1:0)],_.nodeType==1&&_.contentEditable=="false")return!1;v=T<0?maxOffset(_):0}else return!1}}function maxOffset(_){return _.nodeType==3?_.nodeValue.length:_.childNodes.length}function flattenRect(_,v){let S=v?_.left:_.right;return{left:S,right:S,top:_.top,bottom:_.bottom}}function windowRect(_){let v=_.visualViewport;return v?{left:0,right:v.width,top:0,bottom:v.height}:{left:0,right:_.innerWidth,top:0,bottom:_.innerHeight}}function getScale$1(_,v){let S=v.width/_.offsetWidth,R=v.height/_.offsetHeight;return(S>.995&&S<1.005||!isFinite(S)||Math.abs(v.width-_.offsetWidth)<1)&&(S=1),(R>.995&&R<1.005||!isFinite(R)||Math.abs(v.height-_.offsetHeight)<1)&&(R=1),{scaleX:S,scaleY:R}}function scrollRectIntoView(_,v,S,R,T,A,k,M){let P=_.ownerDocument,D=P.defaultView||window;for(let L=_,q=!1;L&&!q;)if(L.nodeType==1){let B,F=L==P.body,j=1,z=1;if(F)B=windowRect(D);else{if(/^(fixed|sticky)$/.test(getComputedStyle(L).position)&&(q=!0),L.scrollHeight<=L.clientHeight&&L.scrollWidth<=L.clientWidth){L=L.assignedSlot||L.parentNode;continue}let W=L.getBoundingClientRect();({scaleX:j,scaleY:z}=getScale$1(L,W)),B={left:W.left,right:W.left+L.clientWidth*j,top:W.top,bottom:W.top+L.clientHeight*z}}let V=0,G=0;if(T=="nearest")v.top<B.top?(G=v.top-(B.top+k),S>0&&v.bottom>B.bottom+G&&(G=v.bottom-B.bottom+k)):v.bottom>B.bottom&&(G=v.bottom-B.bottom+k,S<0&&v.top-G<B.top&&(G=v.top-(B.top+k)));else{let W=v.bottom-v.top,Y=B.bottom-B.top;G=(T=="center"&&W<=Y?v.top+W/2-Y/2:T=="start"||T=="center"&&S<0?v.top-k:v.bottom-Y+k)-B.top}if(R=="nearest"?v.left<B.left?(V=v.left-(B.left+A),S>0&&v.right>B.right+V&&(V=v.right-B.right+A)):v.right>B.right&&(V=v.right-B.right+A,S<0&&v.left<B.left+V&&(V=v.left-(B.left+A))):V=(R=="center"?v.left+(v.right-v.left)/2-(B.right-B.left)/2:R=="start"==M?v.left-A:v.right-(B.right-B.left)+A)-B.left,V||G)if(F)D.scrollBy(V,G);else{let W=0,Y=0;if(G){let X=L.scrollTop;L.scrollTop+=G/z,Y=(L.scrollTop-X)*z}if(V){let X=L.scrollLeft;L.scrollLeft+=V/j,W=(L.scrollLeft-X)*j}v={left:v.left-W,top:v.top-Y,right:v.right-W,bottom:v.bottom-Y},W&&Math.abs(W-V)<1&&(R="nearest"),Y&&Math.abs(Y-G)<1&&(T="nearest")}if(F)break;(v.top<B.top||v.bottom>B.bottom||v.left<B.left||v.right>B.right)&&(v={left:Math.max(v.left,B.left),right:Math.min(v.right,B.right),top:Math.max(v.top,B.top),bottom:Math.min(v.bottom,B.bottom)}),L=L.assignedSlot||L.parentNode}else if(L.nodeType==11)L=L.host;else break}function scrollableParents(_){let v=_.ownerDocument,S,R;for(let T=_.parentNode;T&&!(T==v.body||S&&R);)if(T.nodeType==1)!R&&T.scrollHeight>T.clientHeight&&(R=T),!S&&T.scrollWidth>T.clientWidth&&(S=T),T=T.assignedSlot||T.parentNode;else if(T.nodeType==11)T=T.host;else break;return{x:S,y:R}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(v){return this.anchorNode==v.anchorNode&&this.anchorOffset==v.anchorOffset&&this.focusNode==v.focusNode&&this.focusOffset==v.focusOffset}setRange(v){let{anchorNode:S,focusNode:R}=v;this.set(S,Math.min(v.anchorOffset,S?maxOffset(S):0),R,Math.min(v.focusOffset,R?maxOffset(R):0))}set(v,S,R,T){this.anchorNode=v,this.anchorOffset=S,this.focusNode=R,this.focusOffset=T}}let preventScrollSupported=null;browser.safari&&browser.safari_version>=26&&(preventScrollSupported=!1);function focusPreventScroll(_){if(_.setActive)return _.setActive();if(preventScrollSupported)return _.focus(preventScrollSupported);let v=[];for(let S=_;S&&(v.push(S,S.scrollTop,S.scrollLeft),S!=S.ownerDocument);S=S.parentNode);if(_.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let S=0;S<v.length;){let R=v[S++],T=v[S++],A=v[S++];R.scrollTop!=T&&(R.scrollTop=T),R.scrollLeft!=A&&(R.scrollLeft=A)}}}let scratchRange;function textRange(_,v,S=v){let R=scratchRange||(scratchRange=document.createRange());return R.setEnd(_,S),R.setStart(_,v),R}function dispatchKey(_,v,S,R){let T={key:v,code:v,keyCode:S,which:S,cancelable:!0};R&&({altKey:T.altKey,ctrlKey:T.ctrlKey,shiftKey:T.shiftKey,metaKey:T.metaKey}=R);let A=new KeyboardEvent("keydown",T);A.synthetic=!0,_.dispatchEvent(A);let k=new KeyboardEvent("keyup",T);return k.synthetic=!0,_.dispatchEvent(k),A.defaultPrevented||k.defaultPrevented}function getRoot(_){for(;_;){if(_&&(_.nodeType==9||_.nodeType==11&&_.host))return _;_=_.assignedSlot||_.parentNode}return null}function clearAttributes(_){for(;_.attributes.length;)_.removeAttributeNode(_.attributes[0])}function atElementStart(_,v){let S=v.focusNode,R=v.focusOffset;if(!S||v.anchorNode!=S||v.anchorOffset!=R)return!1;for(R=Math.min(R,maxOffset(S));;)if(R){if(S.nodeType!=1)return!1;let T=S.childNodes[R-1];T.contentEditable=="false"?R--:(S=T,R=maxOffset(S))}else{if(S==_)return!0;R=domIndex(S),S=S.parentNode}}function isScrolledToBottom(_){return _.scrollTop>Math.max(1,_.scrollHeight-_.clientHeight-4)}function textNodeBefore(_,v){for(let S=_,R=v;;){if(S.nodeType==3&&R>0)return{node:S,offset:R};if(S.nodeType==1&&R>0){if(S.contentEditable=="false")return null;S=S.childNodes[R-1],R=maxOffset(S)}else if(S.parentNode&&!isBlockElement(S))R=domIndex(S),S=S.parentNode;else return null}}function textNodeAfter(_,v){for(let S=_,R=v;;){if(S.nodeType==3&&R<S.nodeValue.length)return{node:S,offset:R};if(S.nodeType==1&&R<S.childNodes.length){if(S.contentEditable=="false")return null;S=S.childNodes[R],R=0}else if(S.parentNode&&!isBlockElement(S))R=domIndex(S)+1,S=S.parentNode;else return null}}class DOMPos{constructor(v,S,R=!0){this.node=v,this.offset=S,this.precise=R}static before(v,S){return new DOMPos(v.parentNode,domIndex(v),S)}static after(v,S){return new DOMPos(v.parentNode,domIndex(v)+1,S)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(v){let S=this.posAtStart;for(let R of this.children){if(R==v)return S;S+=R.length+R.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(v){return this.posBefore(v)+v.length}sync(v,S){if(this.flags&2){let R=this.dom,T=null,A;for(let k of this.children){if(k.flags&7){if(!k.dom&&(A=T?T.nextSibling:R.firstChild)){let M=ContentView.get(A);(!M||!M.parent&&M.canReuseDOM(k))&&k.reuseDOM(A)}k.sync(v,S),k.flags&=-8}if(A=T?T.nextSibling:R.firstChild,S&&!S.written&&S.node==R&&A!=k.dom&&(S.written=!0),k.dom.parentNode==R)for(;A&&A!=k.dom;)A=rm$1(A);else R.insertBefore(k.dom,A);T=k.dom}for(A=T?T.nextSibling:R.firstChild,A&&S&&S.node==R&&(S.written=!0);A;)A=rm$1(A)}else if(this.flags&1)for(let R of this.children)R.flags&7&&(R.sync(v,S),R.flags&=-8)}reuseDOM(v){}localPosFromDOM(v,S){let R;if(v==this.dom)R=this.dom.childNodes[S];else{let T=maxOffset(v)==0?0:S==0?-1:1;for(;;){let A=v.parentNode;if(A==this.dom)break;T==0&&A.firstChild!=A.lastChild&&(v==A.firstChild?T=-1:T=1),v=A}T<0?R=v:R=v.nextSibling}if(R==this.dom.firstChild)return 0;for(;R&&!ContentView.get(R);)R=R.nextSibling;if(!R)return this.length;for(let T=0,A=0;;T++){let k=this.children[T];if(k.dom==R)return A;A+=k.length+k.breakAfter}}domBoundsAround(v,S,R=0){let T=-1,A=-1,k=-1,M=-1;for(let P=0,D=R,L=R;P<this.children.length;P++){let q=this.children[P],B=D+q.length;if(D<v&&B>S)return q.domBoundsAround(v,S,D);if(B>=v&&T==-1&&(T=P,A=D),D>S&&q.dom.parentNode==this.dom){k=P,M=L;break}L=B,D=B+q.breakAfter}return{from:A,to:M<0?R+this.length:M,startDOM:(T?this.children[T-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:k<this.children.length&&k>=0?this.children[k].dom:null}}markDirty(v=!1){this.flags|=2,this.markParentsDirty(v)}markParentsDirty(v){for(let S=this.parent;S;S=S.parent){if(v&&(S.flags|=2),S.flags&1)return;S.flags|=1,v=!1}}setParent(v){this.parent!=v&&(this.parent=v,this.flags&7&&this.markParentsDirty(!0))}setDOM(v){this.dom!=v&&(this.dom&&(this.dom.cmView=null),this.dom=v,v.cmView=this)}get rootView(){for(let v=this;;){let S=v.parent;if(!S)return v;v=S}}replaceChildren(v,S,R=noChildren){this.markDirty();for(let T=v;T<S;T++){let A=this.children[T];A.parent==this&&R.indexOf(A)<0&&A.destroy()}R.length<250?this.children.splice(v,S-v,...R):this.children=[].concat(this.children.slice(0,v),R,this.children.slice(S));for(let T=0;T<R.length;T++)R[T].setParent(this)}ignoreMutation(v){return!1}ignoreEvent(v){return!1}childCursor(v=this.length){return new ChildCursor(this.children,v,this.children.length)}childPos(v,S=1){return this.childCursor().findPos(v,S)}toString(){let v=this.constructor.name.replace("View","");return v+(this.children.length?"("+this.children.join()+")":this.length?"["+(v=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(v){return v.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(v,S,R,T,A,k){return!1}become(v){return!1}canReuseDOM(v){return v.constructor==this.constructor&&!((this.flags|v.flags)&8)}getSide(){return 0}destroy(){for(let v of this.children)v.parent==this&&v.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(_){let v=_.nextSibling;return _.parentNode.removeChild(_),v}class ChildCursor{constructor(v,S,R){this.children=v,this.pos=S,this.i=R,this.off=0}findPos(v,S=1){for(;;){if(v>this.pos||v==this.pos&&(S>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=v-this.pos,this;let R=this.children[--this.i];this.pos-=R.length+R.breakAfter}}}function replaceRange(_,v,S,R,T,A,k,M,P){let{children:D}=_,L=D.length?D[v]:null,q=A.length?A[A.length-1]:null,B=q?q.breakAfter:k;if(!(v==R&&L&&!k&&!B&&A.length<2&&L.merge(S,T,A.length?q:null,S==0,M,P))){if(R<D.length){let F=D[R];F&&(T<F.length||F.breakAfter&&q?.breakAfter)?(v==R&&(F=F.split(T),T=0),!B&&q&&F.merge(0,T,q,!0,0,P)?A[A.length-1]=F:((T||F.children.length&&!F.children[0].length)&&F.merge(0,T,null,!1,0,P),A.push(F))):F?.breakAfter&&(q?q.breakAfter=1:k=1),R++}for(L&&(L.breakAfter=k,S>0&&(!k&&A.length&&L.merge(S,L.length,A[0],!1,M,0)?L.breakAfter=A.shift().breakAfter:(S<L.length||L.children.length&&L.children[L.children.length-1].length==0)&&L.merge(S,L.length,null,!1,M,0),v++));v<R&&A.length;)if(D[R-1].become(A[A.length-1]))R--,A.pop(),P=A.length?0:M;else if(D[v].become(A[0]))v++,A.shift(),M=A.length?0:P;else break;!A.length&&v&&R<D.length&&!D[v-1].breakAfter&&D[R].merge(0,0,D[v-1],!1,M,P)&&v--,(v<R||A.length)&&_.replaceChildren(v,R,A)}}function mergeChildrenInto(_,v,S,R,T,A){let k=_.childCursor(),{i:M,off:P}=k.findPos(S,1),{i:D,off:L}=k.findPos(v,-1),q=v-S;for(let B of R)q+=B.length;_.length+=q,replaceRange(_,D,L,M,P,R,0,T,A)}const MaxJoinLen=256;class TextView extends ContentView{constructor(v){super(),this.text=v}get length(){return this.text.length}createDOM(v){this.setDOM(v||document.createTextNode(this.text))}sync(v,S){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(S&&S.node==this.dom&&(S.written=!0),this.dom.nodeValue=this.text)}reuseDOM(v){v.nodeType==3&&this.createDOM(v)}merge(v,S,R){return this.flags&8||R&&(!(R instanceof TextView)||this.length-(S-v)+R.length>MaxJoinLen||R.flags&8)?!1:(this.text=this.text.slice(0,v)+(R?R.text:"")+this.text.slice(S),this.markDirty(),!0)}split(v){let S=new TextView(this.text.slice(v));return this.text=this.text.slice(0,v),this.markDirty(),S.flags|=this.flags&8,S}localPosFromDOM(v,S){return v==this.dom?S:S?this.text.length:0}domAtPos(v){return new DOMPos(this.dom,v)}domBoundsAround(v,S,R){return{from:R,to:R+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(v,S){return textCoords(this.dom,v,S)}}class MarkView extends ContentView{constructor(v,S=[],R=0){super(),this.mark=v,this.children=S,this.length=R;for(let T of S)T.setParent(this)}setAttrs(v){if(clearAttributes(v),this.mark.class&&(v.className=this.mark.class),this.mark.attrs)for(let S in this.mark.attrs)v.setAttribute(S,this.mark.attrs[S]);return v}canReuseDOM(v){return super.canReuseDOM(v)&&!((this.flags|v.flags)&8)}reuseDOM(v){v.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(v),this.flags|=6)}sync(v,S){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(v,S)}merge(v,S,R,T,A,k){return R&&(!(R instanceof MarkView&&R.mark.eq(this.mark))||v&&A<=0||S<this.length&&k<=0)?!1:(mergeChildrenInto(this,v,S,R?R.children.slice():[],A-1,k-1),this.markDirty(),!0)}split(v){let S=[],R=0,T=-1,A=0;for(let M of this.children){let P=R+M.length;P>v&&S.push(R<v?M.split(v-R):M),T<0&&R>=v&&(T=A),R=P,A++}let k=this.length-v;return this.length=v,T>-1&&(this.children.length=T,this.markDirty()),new MarkView(this.mark,S,k)}domAtPos(v){return inlineDOMAtPos(this,v)}coordsAt(v,S){return coordsInChildren(this,v,S)}}function textCoords(_,v,S){let R=_.nodeValue.length;v>R&&(v=R);let T=v,A=v,k=0;v==0&&S<0||v==R&&S>=0?browser.chrome||browser.gecko||(v?(T--,k=1):A<R&&(A++,k=-1)):S<0?T--:A<R&&A++;let M=textRange(_,T,A).getClientRects();if(!M.length)return null;let P=M[(k?k<0:S>=0)?0:M.length-1];return browser.safari&&!k&&P.width==0&&(P=Array.prototype.find.call(M,D=>D.width)||P),k?flattenRect(P,k<0):P||null}class WidgetView extends ContentView{static create(v,S,R){return new WidgetView(v,S,R)}constructor(v,S,R){super(),this.widget=v,this.length=S,this.side=R,this.prevWidget=null}split(v){let S=WidgetView.create(this.widget,this.length-v,this.side);return this.length-=v,S}sync(v){(!this.dom||!this.widget.updateDOM(this.dom,v))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(v)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(v,S,R,T,A,k){return R&&(!(R instanceof WidgetView)||!this.widget.compare(R.widget)||v>0&&A<=0||S<this.length&&k<=0)?!1:(this.length=v+(R?R.length:0)+(this.length-S),!0)}become(v){return v instanceof WidgetView&&v.side==this.side&&this.widget.constructor==v.widget.constructor?(this.widget.compare(v.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=v.widget,this.length=v.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(v){return this.widget.ignoreEvent(v)}get overrideDOMText(){if(this.length==0)return Text.empty;let v=this;for(;v.parent;)v=v.parent;let{view:S}=v,R=S&&S.state.doc,T=this.posAtStart;return R?R.slice(T,T+this.length):Text.empty}domAtPos(v){return(this.length?v==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,v==this.length)}domBoundsAround(){return null}coordsAt(v,S){let R=this.widget.coordsAt(this.dom,v,S);if(R)return R;let T=this.dom.getClientRects(),A=null;if(!T.length)return null;let k=this.side?this.side<0:v>0;for(let M=k?T.length-1:0;A=T[M],!(v>0?M==0:M==T.length-1||A.top<A.bottom);M+=k?-1:1);return flattenRect(A,!k)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(v){super(),this.side=v}get length(){return 0}merge(){return!1}become(v){return v instanceof WidgetBufferView&&v.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let v=document.createElement("img");v.className="cm-widgetBuffer",v.setAttribute("aria-hidden","true"),this.setDOM(v)}}getSide(){return this.side}domAtPos(v){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(v){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(_,v){let S=_.dom,{children:R}=_,T=0;for(let A=0;T<R.length;T++){let k=R[T],M=A+k.length;if(!(M==A&&k.getSide()<=0)){if(v>A&&v<M&&k.dom.parentNode==S)return k.domAtPos(v-A);if(v<=A)break;A=M}}for(let A=T;A>0;A--){let k=R[A-1];if(k.dom.parentNode==S)return k.domAtPos(k.length)}for(let A=T;A<R.length;A++){let k=R[A];if(k.dom.parentNode==S)return k.domAtPos(0)}return new DOMPos(S,0)}function joinInlineInto(_,v,S){let R,{children:T}=_;S>0&&v instanceof MarkView&&T.length&&(R=T[T.length-1])instanceof MarkView&&R.mark.eq(v.mark)?joinInlineInto(R,v.children[0],S-1):(T.push(v),v.setParent(_)),_.length+=v.length}function coordsInChildren(_,v,S){let R=null,T=-1,A=null,k=-1;function M(D,L){for(let q=0,B=0;q<D.children.length&&B<=L;q++){let F=D.children[q],j=B+F.length;j>=L&&(F.children.length?M(F,L-B):(!A||A.isHidden&&(S>0||onSameLine(A,F)))&&(j>L||B==j&&F.getSide()>0)?(A=F,k=L-B):(B<L||B==j&&F.getSide()<0&&!F.isHidden)&&(R=F,T=L-B)),B=j}}M(_,v);let P=(S<0?R:A)||R||A;return P?P.coordsAt(Math.max(0,P==R?T:k),S):fallbackRect(_)}function fallbackRect(_){let v=_.dom.lastChild;if(!v)return _.dom.getBoundingClientRect();let S=clientRectsFor(v);return S[S.length-1]||null}function onSameLine(_,v){let S=_.coordsAt(0,1),R=v.coordsAt(0,1);return S&&R&&R.top<S.bottom}function combineAttrs(_,v){for(let S in _)S=="class"&&v.class?v.class+=" "+_.class:S=="style"&&v.style?v.style+=";"+_.style:v[S]=_[S];return v}const noAttrs$1=Object.create(null);function attrsEq(_,v,S){if(_==v)return!0;_||(_=noAttrs$1),v||(v=noAttrs$1);let R=Object.keys(_),T=Object.keys(v);if(R.length-(S&&R.indexOf(S)>-1?1:0)!=T.length-(S&&T.indexOf(S)>-1?1:0))return!1;for(let A of R)if(A!=S&&(T.indexOf(A)==-1||_[A]!==v[A]))return!1;return!0}function updateAttrs(_,v,S){let R=!1;if(v)for(let T in v)S&&T in S||(R=!0,T=="style"?_.style.cssText="":_.removeAttribute(T));if(S)for(let T in S)v&&v[T]==S[T]||(R=!0,T=="style"?_.style.cssText=S[T]:_.setAttribute(T,S[T]));return R}function getAttrs(_){let v=Object.create(null);for(let S=0;S<_.attributes.length;S++){let R=_.attributes[S];v[R.name]=R.value}return v}class WidgetType{eq(v){return!1}updateDOM(v,S){return!1}compare(v){return this==v||this.constructor==v.constructor&&this.eq(v)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(v){return!0}coordsAt(v,S,R){return null}get isHidden(){return!1}get editable(){return!1}destroy(v){}}var BlockType=(function(_){return _[_.Text=0]="Text",_[_.WidgetBefore=1]="WidgetBefore",_[_.WidgetAfter=2]="WidgetAfter",_[_.WidgetRange=3]="WidgetRange",_})(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(v,S,R,T){super(),this.startSide=v,this.endSide=S,this.widget=R,this.spec=T}get heightRelevant(){return!1}static mark(v){return new MarkDecoration(v)}static widget(v){let S=Math.max(-1e4,Math.min(1e4,v.side||0)),R=!!v.block;return S+=R&&!v.inlineOrder?S>0?3e8:-4e8:S>0?1e8:-1e8,new PointDecoration(v,S,S,R,v.widget||null,!1)}static replace(v){let S=!!v.block,R,T;if(v.isBlockGap)R=-5e8,T=4e8;else{let{start:A,end:k}=getInclusive(v,S);R=(A?S?-3e8:-1:5e8)-1,T=(k?S?2e8:1:-6e8)+1}return new PointDecoration(v,R,T,S,v.widget||null,!0)}static line(v){return new LineDecoration(v)}static set(v,S=!1){return RangeSet.of(v,S)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(v){let{start:S,end:R}=getInclusive(v);super(S?-1:5e8,R?1:-6e8,null,v),this.tagName=v.tagName||"span",this.class=v.class||"",this.attrs=v.attributes||null}eq(v){var S,R;return this==v||v instanceof MarkDecoration&&this.tagName==v.tagName&&(this.class||((S=this.attrs)===null||S===void 0?void 0:S.class))==(v.class||((R=v.attrs)===null||R===void 0?void 0:R.class))&&attrsEq(this.attrs,v.attrs,"class")}range(v,S=v){if(v>=S)throw new RangeError("Mark decorations may not be empty");return super.range(v,S)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(v){super(-2e8,-2e8,null,v)}eq(v){return v instanceof LineDecoration&&this.spec.class==v.spec.class&&attrsEq(this.spec.attributes,v.spec.attributes)}range(v,S=v){if(S!=v)throw new RangeError("Line decoration ranges must be zero-length");return super.range(v,S)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(v,S,R,T,A,k){super(S,R,A,v),this.block=T,this.isReplace=k,this.mapMode=T?S<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(v){return v instanceof PointDecoration&&widgetsEq(this.widget,v.widget)&&this.block==v.block&&this.startSide==v.startSide&&this.endSide==v.endSide}range(v,S=v){if(this.isReplace&&(v>S||v==S&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&S!=v)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(v,S)}}PointDecoration.prototype.point=!0;function getInclusive(_,v=!1){let{inclusiveStart:S,inclusiveEnd:R}=_;return S==null&&(S=_.inclusive),R==null&&(R=_.inclusive),{start:S??v,end:R??v}}function widgetsEq(_,v){return _==v||!!(_&&v&&_.compare(v))}function addRange(_,v,S,R=0){let T=S.length-1;T>=0&&S[T]+R>=_?S[T]=Math.max(S[T],v):S.push(_,v)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(v,S,R,T,A,k){if(R){if(!(R instanceof LineView))return!1;this.dom||R.transferDOM(this)}return T&&this.setDeco(R?R.attrs:null),mergeChildrenInto(this,v,S,R?R.children.slice():[],A,k),!0}split(v){let S=new LineView;if(S.breakAfter=this.breakAfter,this.length==0)return S;let{i:R,off:T}=this.childPos(v);T&&(S.append(this.children[R].split(T),0),this.children[R].merge(T,this.children[R].length,null,!1,0,0),R++);for(let A=R;A<this.children.length;A++)S.append(this.children[A],0);for(;R>0&&this.children[R-1].length==0;)this.children[--R].destroy();return this.children.length=R,this.markDirty(),this.length=v,S}transferDOM(v){this.dom&&(this.markDirty(),v.setDOM(this.dom),v.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(v){attrsEq(this.attrs,v)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=v)}append(v,S){joinInlineInto(this,v,S)}addLineDeco(v){let S=v.spec.attributes,R=v.spec.class;S&&(this.attrs=combineAttrs(S,this.attrs||{})),R&&(this.attrs=combineAttrs({class:R},this.attrs||{}))}domAtPos(v){return inlineDOMAtPos(this,v)}reuseDOM(v){v.nodeName=="DIV"&&(this.setDOM(v),this.flags|=6)}sync(v,S){var R;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(v,S);let T=this.dom.lastChild;for(;T&&ContentView.get(T)instanceof MarkView;)T=T.lastChild;if(!T||!this.length||T.nodeName!="BR"&&((R=ContentView.get(T))===null||R===void 0?void 0:R.isEditable)==!1&&(!browser.ios||!this.children.some(A=>A instanceof TextView))){let A=document.createElement("BR");A.cmIgnore=!0,this.dom.appendChild(A)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let v=0,S;for(let R of this.children){if(!(R instanceof TextView)||/[^ -~]/.test(R.text))return null;let T=clientRectsFor(R.dom);if(T.length!=1)return null;v+=T[0].width,S=T[0].height}return v?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:v/this.length,textHeight:S}:null}coordsAt(v,S){let R=coordsInChildren(this,v,S);if(!this.children.length&&R&&this.parent){let{heightOracle:T}=this.parent.view.viewState,A=R.bottom-R.top;if(Math.abs(A-T.lineHeight)<2&&T.textHeight<A){let k=(A-T.textHeight)/2;return{top:R.top+k,bottom:R.bottom-k,left:R.left,right:R.left}}}return R}become(v){return v instanceof LineView&&this.children.length==0&&v.children.length==0&&attrsEq(this.attrs,v.attrs)&&this.breakAfter==v.breakAfter}covers(){return!0}static find(v,S){for(let R=0,T=0;R<v.children.length;R++){let A=v.children[R],k=T+A.length;if(k>=S){if(A instanceof LineView)return A;if(k>S)break}T=k+A.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(v,S,R){super(),this.widget=v,this.length=S,this.deco=R,this.breakAfter=0,this.prevWidget=null}merge(v,S,R,T,A,k){return R&&(!(R instanceof BlockWidgetView)||!this.widget.compare(R.widget)||v>0&&A<=0||S<this.length&&k<=0)?!1:(this.length=v+(R?R.length:0)+(this.length-S),!0)}domAtPos(v){return v==0?DOMPos.before(this.dom):DOMPos.after(this.dom,v==this.length)}split(v){let S=this.length-v;this.length=v;let R=new BlockWidgetView(this.widget,S,this.deco);return R.breakAfter=this.breakAfter,R}get children(){return noChildren}sync(v){(!this.dom||!this.widget.updateDOM(this.dom,v))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(v)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(v){return v instanceof BlockWidgetView&&v.widget.constructor==this.widget.constructor?(v.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=v.widget,this.length=v.length,this.deco=v.deco,this.breakAfter=v.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(v){return this.widget.ignoreEvent(v)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(v,S){let R=this.widget.coordsAt(this.dom,v,S);return R||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?v==0:S<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(v){let{startSide:S,endSide:R}=this.deco;return S==R?!1:v<0?S<0:R>0}}class BlockGapWidget extends WidgetType{constructor(v){super(),this.height=v}toDOM(){let v=document.createElement("div");return v.className="cm-gap",this.updateDOM(v),v}eq(v){return v.height==this.height}updateDOM(v){return v.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(v,S,R,T){this.doc=v,this.pos=S,this.end=R,this.disallowBlockEffectsFor=T,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=v.iter(),this.skip=S}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let v=this.content[this.content.length-1];return!(v.breakAfter||v instanceof BlockWidgetView&&v.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(v=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),v),v.length),this.pendingBuffer=0)}addBlockWidget(v){this.flushBuffer(),this.curLine=null,this.content.push(v)}finish(v){this.pendingBuffer&&v<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(v&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(v,S,R){for(;v>0;){if(this.textOff==this.text.length){let{value:k,lineBreak:M,done:P}=this.cursor.next(this.skip);if(this.skip=0,P)throw new Error("Ran out of text content when drawing inline views");if(M){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,v--;continue}else this.text=k,this.textOff=0}let T=Math.min(this.text.length-this.textOff,v),A=Math.min(T,512);this.flushBuffer(S.slice(S.length-R)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+A)),S),R),this.atCursorPos=!0,this.textOff+=A,v-=A,R=T<=A?0:S.length}}span(v,S,R,T){this.buildText(S-v,R,T),this.pos=S,this.openStart<0&&(this.openStart=T)}point(v,S,R,T,A,k){if(this.disallowBlockEffectsFor[k]&&R instanceof PointDecoration){if(R.block)throw new RangeError("Block decorations may not be specified via plugins");if(S>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let M=S-v;if(R instanceof PointDecoration)if(R.block)R.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(R.widget||NullWidget.block,M,R));else{let P=WidgetView.create(R.widget||NullWidget.inline,M,M?0:R.startSide),D=this.atCursorPos&&!P.isEditable&&A<=T.length&&(v<S||R.startSide>0),L=!P.isEditable&&(v<S||A>T.length||R.startSide<=0),q=this.getLine();this.pendingBuffer==2&&!D&&!P.isEditable&&(this.pendingBuffer=0),this.flushBuffer(T),D&&(q.append(wrapMarks(new WidgetBufferView(1),T),A),A=T.length+Math.max(0,A-T.length)),q.append(wrapMarks(P,T),A),this.atCursorPos=L,this.pendingBuffer=L?v<S||A>T.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=T.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(R);M&&(this.textOff+M<=this.text.length?this.textOff+=M:(this.skip+=M-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=S),this.openStart<0&&(this.openStart=A)}static build(v,S,R,T,A){let k=new ContentBuilder(v,S,R,A);return k.openEnd=RangeSet.spans(T,S,R,k),k.openStart<0&&(k.openStart=k.openEnd),k.finish(k.openEnd),k}}function wrapMarks(_,v){for(let S of v)_=new MarkView(S,[_],_.length);return _}class NullWidget extends WidgetType{constructor(v){super(),this.tag=v}eq(v){return v.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(v){return v.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=(function(_){return _[_.LTR=0]="LTR",_[_.RTL=1]="RTL",_})(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(_){let v=[];for(let S=0;S<_.length;S++)v.push(1<<+_[S]);return v}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let _ of["()","[]","{}"]){let v=_.charCodeAt(0),S=_.charCodeAt(1);Brackets[v]=S,Brackets[S]=-v}function charType(_){return _<=247?LowTypes[_]:1424<=_&&_<=1524?2:1536<=_&&_<=1785?ArabicTypes[_-1536]:1774<=_&&_<=2220?4:8192<=_&&_<=8204?256:64336<=_&&_<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(v,S,R){this.from=v,this.to=S,this.level=R}side(v,S){return this.dir==S==v?this.to:this.from}forward(v,S){return v==(this.dir==S)}static find(v,S,R,T){let A=-1;for(let k=0;k<v.length;k++){let M=v[k];if(M.from<=S&&M.to>=S){if(M.level==R)return k;(A<0||(T!=0?T<0?M.from<S:M.to>S:v[A].level>M.level))&&(A=k)}}if(A<0)throw new RangeError("Index out of range");return A}}function isolatesEq(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++){let R=_[S],T=v[S];if(R.from!=T.from||R.to!=T.to||R.direction!=T.direction||!isolatesEq(R.inner,T.inner))return!1}return!0}const types=[];function computeCharTypes(_,v,S,R,T){for(let A=0;A<=R.length;A++){let k=A?R[A-1].to:v,M=A<R.length?R[A].from:S,P=A?256:T;for(let D=k,L=P,q=P;D<M;D++){let B=charType(_.charCodeAt(D));B==512?B=L:B==8&&q==4&&(B=16),types[D]=B==4?2:B,B&7&&(q=B),L=B}for(let D=k,L=P,q=P;D<M;D++){let B=types[D];if(B==128)D<M-1&&L==types[D+1]&&L&24?B=types[D]=L:types[D]=256;else if(B==64){let F=D+1;for(;F<M&&types[F]==64;)F++;let j=D&&L==8||F<S&&types[F]==8?q==1?1:8:256;for(let z=D;z<F;z++)types[z]=j;D=F-1}else B==8&&q==1&&(types[D]=1);L=B,B&7&&(q=B)}}}function processBracketPairs(_,v,S,R,T){let A=T==1?2:1;for(let k=0,M=0,P=0;k<=R.length;k++){let D=k?R[k-1].to:v,L=k<R.length?R[k].from:S;for(let q=D,B,F,j;q<L;q++)if(F=Brackets[B=_.charCodeAt(q)])if(F<0){for(let z=M-3;z>=0;z-=3)if(BracketStack[z+1]==-F){let V=BracketStack[z+2],G=V&2?T:V&4?V&1?A:T:0;G&&(types[q]=types[BracketStack[z]]=G),M=z;break}}else{if(BracketStack.length==189)break;BracketStack[M++]=q,BracketStack[M++]=B,BracketStack[M++]=P}else if((j=types[q])==2||j==1){let z=j==T;P=z?0:1;for(let V=M-3;V>=0;V-=3){let G=BracketStack[V+2];if(G&2)break;if(z)BracketStack[V+2]|=2;else{if(G&4)break;BracketStack[V+2]|=4}}}}}function processNeutrals(_,v,S,R){for(let T=0,A=R;T<=S.length;T++){let k=T?S[T-1].to:_,M=T<S.length?S[T].from:v;for(let P=k;P<M;){let D=types[P];if(D==256){let L=P+1;for(;;)if(L==M){if(T==S.length)break;L=S[T++].to,M=T<S.length?S[T].from:v}else if(types[L]==256)L++;else break;let q=A==1,B=(L<v?types[L]:R)==1,F=q==B?q?1:2:R;for(let j=L,z=T,V=z?S[z-1].to:_;j>P;)j==V&&(j=S[--z].from,V=z?S[z-1].to:_),types[--j]=F;P=L}else A=D,P++}}}function emitSpans(_,v,S,R,T,A,k){let M=R%2?2:1;if(R%2==T%2)for(let P=v,D=0;P<S;){let L=!0,q=!1;if(D==A.length||P<A[D].from){let z=types[P];z!=M&&(L=!1,q=z==16)}let B=!L&&M==1?[]:null,F=L?R:R+1,j=P;e:for(;;)if(D<A.length&&j==A[D].from){if(q)break e;let z=A[D];if(!L)for(let V=z.to,G=D+1;;){if(V==S)break e;if(G<A.length&&A[G].from==V)V=A[G++].to;else{if(types[V]==M)break e;break}}if(D++,B)B.push(z);else{z.from>P&&k.push(new BidiSpan(P,z.from,F));let V=z.direction==LTR!=!(F%2);computeSectionOrder(_,V?R+1:R,T,z.inner,z.from,z.to,k),P=z.to}j=z.to}else{if(j==S||(L?types[j]!=M:types[j]==M))break;j++}B?emitSpans(_,P,j,R+1,T,B,k):P<j&&k.push(new BidiSpan(P,j,F)),P=j}else for(let P=S,D=A.length;P>v;){let L=!0,q=!1;if(!D||P>A[D-1].to){let z=types[P-1];z!=M&&(L=!1,q=z==16)}let B=!L&&M==1?[]:null,F=L?R:R+1,j=P;e:for(;;)if(D&&j==A[D-1].to){if(q)break e;let z=A[--D];if(!L)for(let V=z.from,G=D;;){if(V==v)break e;if(G&&A[G-1].to==V)V=A[--G].from;else{if(types[V-1]==M)break e;break}}if(B)B.push(z);else{z.to<P&&k.push(new BidiSpan(z.to,P,F));let V=z.direction==LTR!=!(F%2);computeSectionOrder(_,V?R+1:R,T,z.inner,z.from,z.to,k),P=z.from}j=z.from}else{if(j==v||(L?types[j-1]!=M:types[j-1]==M))break;j--}B?emitSpans(_,j,P,R+1,T,B,k):j<P&&k.push(new BidiSpan(j,P,F)),P=j}}function computeSectionOrder(_,v,S,R,T,A,k){let M=v%2?2:1;computeCharTypes(_,T,A,R,M),processBracketPairs(_,T,A,R,M),processNeutrals(T,A,R,M),emitSpans(_,T,A,v,S,R,k)}function computeOrder(_,v,S){if(!_)return[new BidiSpan(0,0,v==RTL?1:0)];if(v==LTR&&!S.length&&!BidiRE.test(_))return trivialOrder(_.length);if(S.length)for(;_.length>types.length;)types[types.length]=256;let R=[],T=v==LTR?0:1;return computeSectionOrder(_,T,T,S,0,_.length,R),R}function trivialOrder(_){return[new BidiSpan(0,_,0)]}let movedOver="";function moveVisually(_,v,S,R,T){var A;let k=R.head-_.from,M=BidiSpan.find(v,k,(A=R.bidiLevel)!==null&&A!==void 0?A:-1,R.assoc),P=v[M],D=P.side(T,S);if(k==D){let B=M+=T?1:-1;if(B<0||B>=v.length)return null;P=v[M=B],k=P.side(!T,S),D=P.side(T,S)}let L=findClusterBreak(_.text,k,P.forward(T,S));(L<P.from||L>P.to)&&(L=D),movedOver=_.text.slice(Math.min(k,L),Math.max(k,L));let q=M==(T?v.length-1:0)?null:v[M+(T?1:-1)];return q&&L==D&&q.level+(T?0:1)<P.level?EditorSelection.cursor(q.side(!T,S)+_.from,q.forward(T,S)?1:-1,q.level):EditorSelection.cursor(L+_.from,P.forward(T,S)?-1:1,P.level)}function autoDirection(_,v,S){for(let R=v;R<S;R++){let T=charType(_.charCodeAt(R));if(T==1)return LTR;if(T==2||T==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:_=>_.some(v=>v)}),nativeSelectionHidden=Facet.define({combine:_=>_.some(v=>v)}),scrollHandler=Facet.define();class ScrollTarget{constructor(v,S="nearest",R="nearest",T=5,A=5,k=!1){this.range=v,this.y=S,this.x=R,this.yMargin=T,this.xMargin=A,this.isSnapshot=k}map(v){return v.empty?this:new ScrollTarget(this.range.map(v),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(v){return this.range.to<=v.doc.length?this:new ScrollTarget(EditorSelection.cursor(v.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(_,v)=>_.map(v)}),setEditContextFormatting=StateEffect.define();function logException(_,v,S){let R=_.facet(exceptionSink);R.length?R[0](v):window.onerror&&window.onerror(String(v),S,void 0,void 0,v)||(S?console.error(S+":",v):console.error(v))}const editable=Facet.define({combine:_=>_.length?_[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define({combine(_){return _.filter((v,S)=>{for(let R=0;R<S;R++)if(_[R].plugin==v.plugin)return!1;return!0})}});class ViewPlugin{constructor(v,S,R,T,A){this.id=v,this.create=S,this.domEventHandlers=R,this.domEventObservers=T,this.baseExtensions=A(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(v){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:v}))}static define(v,S){const{eventHandlers:R,eventObservers:T,provide:A,decorations:k}=S||{};return new ViewPlugin(nextPluginID++,v,R,T,M=>{let P=[];return k&&P.push(decorations.of(D=>{let L=D.plugin(M);return L?k(L):Decoration.none})),A&&P.push(A(M)),P})}static fromClass(v,S){return ViewPlugin.define((R,T)=>new v(R,T),S)}}class PluginInstance{constructor(v){this.spec=v,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(v){if(this.value){if(this.mustUpdate){let S=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(S)}catch(R){if(logException(S.state,R,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(v,this.spec.arg)}catch(S){logException(v.state,S,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(v){var S;if(!((S=this.value)===null||S===void 0)&&S.destroy)try{this.value.destroy()}catch(R){logException(v.state,R,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(_,v){let S=_.state.facet(bidiIsolatedRanges);if(!S.length)return S;let R=S.map(A=>A instanceof Function?A(_):A),T=[];return RangeSet.spans(R,v.from,v.to,{point(){},span(A,k,M,P){let D=A-v.from,L=k-v.from,q=T;for(let B=M.length-1;B>=0;B--,P--){let F=M[B].spec.bidiIsolate,j;if(F==null&&(F=autoDirection(v.text,D,L)),P>0&&q.length&&(j=q[q.length-1]).to==D&&j.direction==F)j.to=L,q=j.inner;else{let z={from:D,to:L,direction:F,inner:[]};q.push(z),q=z.inner}}}}),T}const scrollMargins=Facet.define();function getScrollMargins(_){let v=0,S=0,R=0,T=0;for(let A of _.state.facet(scrollMargins)){let k=A(_);k&&(k.left!=null&&(v=Math.max(v,k.left)),k.right!=null&&(S=Math.max(S,k.right)),k.top!=null&&(R=Math.max(R,k.top)),k.bottom!=null&&(T=Math.max(T,k.bottom)))}return{left:v,right:S,top:R,bottom:T}}const styleModule=Facet.define();class ChangedRange{constructor(v,S,R,T){this.fromA=v,this.toA=S,this.fromB=R,this.toB=T}join(v){return new ChangedRange(Math.min(this.fromA,v.fromA),Math.max(this.toA,v.toA),Math.min(this.fromB,v.fromB),Math.max(this.toB,v.toB))}addToSet(v){let S=v.length,R=this;for(;S>0;S--){let T=v[S-1];if(!(T.fromA>R.toA)){if(T.toA<R.fromA)break;R=R.join(T),v.splice(S-1,1)}}return v.splice(S,0,R),v}static extendWithRanges(v,S){if(S.length==0)return v;let R=[];for(let T=0,A=0,k=0,M=0;;T++){let P=T==v.length?null:v[T],D=k-M,L=P?P.fromB:1e9;for(;A<S.length&&S[A]<L;){let q=S[A],B=S[A+1],F=Math.max(M,q),j=Math.min(L,B);if(F<=j&&new ChangedRange(F+D,j+D,F,j).addToSet(R),B>L)break;A+=2}if(!P)return R;new ChangedRange(P.fromA,P.toA,P.fromB,P.toB).addToSet(R),k=P.toA,M=P.toB}}}class ViewUpdate{constructor(v,S,R){this.view=v,this.state=S,this.transactions=R,this.flags=0,this.startState=v.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let A of R)this.changes=this.changes.compose(A.changes);let T=[];this.changes.iterChangedRanges((A,k,M,P)=>T.push(new ChangedRange(A,k,M,P))),this.changedRanges=T}static create(v,S,R){return new ViewUpdate(v,S,R)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(v=>v.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(v){super(),this.view=v,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(v.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,v.state.doc.length)],0,null)}update(v){var S;let R=v.changedRanges;this.minWidth>0&&R.length&&(R.every(({fromA:D,toA:L})=>L<this.minWidthFrom||D>this.minWidthTo)?(this.minWidthFrom=v.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=v.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(v);let T=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((S=this.domChanged)===null||S===void 0)&&S.newSel?T=this.domChanged.newSel.head:!touchesComposition(v.changes,this.hasComposition)&&!v.selectionSet&&(T=v.state.selection.main.head));let A=T>-1?findCompositionRange(this.view,v.changes,T):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:D,to:L}=this.hasComposition;R=new ChangedRange(D,L,v.changes.mapPos(D,-1),v.changes.mapPos(L,1)).addToSet(R.slice())}this.hasComposition=A?{from:A.range.fromB,to:A.range.toB}:null,(browser.ie||browser.chrome)&&!A&&v&&v.state.doc.lines!=v.startState.doc.lines&&(this.forceSelection=!0);let k=this.decorations,M=this.updateDeco(),P=findChangedDeco(k,M,v.changes);return R=ChangedRange.extendWithRanges(R,P),!(this.flags&7)&&R.length==0?!1:(this.updateInner(R,v.startState.doc.length,A),v.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(v,S,R){this.view.viewState.mustMeasureContent=!0,this.updateChildren(v,S,R);let{observer:T}=this.view;T.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let k=browser.chrome||browser.ios?{node:T.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,k),this.flags&=-8,k&&(k.written||T.selectionRange.focusNode!=k.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(k=>k.flags&=-9);let A=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let k of this.children)k instanceof BlockWidgetView&&k.widget instanceof BlockGapWidget&&A.push(k.dom);T.updateGaps(A)}updateChildren(v,S,R){let T=R?R.range.addToSet(v.slice()):v,A=this.childCursor(S);for(let k=T.length-1;;k--){let M=k>=0?T[k]:null;if(!M)break;let{fromA:P,toA:D,fromB:L,toB:q}=M,B,F,j,z;if(R&&R.range.fromB<q&&R.range.toB>L){let X=ContentBuilder.build(this.view.state.doc,L,R.range.fromB,this.decorations,this.dynamicDecorationMap),ee=ContentBuilder.build(this.view.state.doc,R.range.toB,q,this.decorations,this.dynamicDecorationMap);F=X.breakAtStart,j=X.openStart,z=ee.openEnd;let re=this.compositionView(R);ee.breakAtStart?re.breakAfter=1:ee.content.length&&re.merge(re.length,re.length,ee.content[0],!1,ee.openStart,0)&&(re.breakAfter=ee.content[0].breakAfter,ee.content.shift()),X.content.length&&re.merge(0,0,X.content[X.content.length-1],!0,0,X.openEnd)&&X.content.pop(),B=X.content.concat(re).concat(ee.content)}else({content:B,breakAtStart:F,openStart:j,openEnd:z}=ContentBuilder.build(this.view.state.doc,L,q,this.decorations,this.dynamicDecorationMap));let{i:V,off:G}=A.findPos(D,1),{i:W,off:Y}=A.findPos(P,-1);replaceRange(this,W,Y,V,G,B,F,j,z)}R&&this.fixCompositionDOM(R)}updateEditContextFormatting(v){this.editContextFormatting=this.editContextFormatting.map(v.changes);for(let S of v.transactions)for(let R of S.effects)R.is(setEditContextFormatting)&&(this.editContextFormatting=R.value)}compositionView(v){let S=new TextView(v.text.nodeValue);S.flags|=8;for(let{deco:T}of v.marks)S=new MarkView(T,[S],S.length);let R=new LineView;return R.append(S,0),R}fixCompositionDOM(v){let S=(A,k)=>{k.flags|=8|(k.children.some(P=>P.flags&7)?1:0),this.markedForComposition.add(k);let M=ContentView.get(A);M&&M!=k&&(M.dom=null),k.setDOM(A)},R=this.childPos(v.range.fromB,1),T=this.children[R.i];S(v.line,T);for(let A=v.marks.length-1;A>=-1;A--)R=T.childPos(R.off,1),T=T.children[R.i],S(A>=0?v.marks[A].node:v.text,T)}updateSelection(v=!1,S=!1){(v||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let R=this.view.root.activeElement,T=R==this.dom,A=!T&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(R&&this.dom.contains(R));if(!(T||S||A))return;let k=this.forceSelection;this.forceSelection=!1;let M=this.view.state.selection.main,P=this.moveToLine(this.domAtPos(M.anchor)),D=M.empty?P:this.moveToLine(this.domAtPos(M.head));if(browser.gecko&&M.empty&&!this.hasComposition&&betweenUneditable(P)){let q=document.createTextNode("");this.view.observer.ignore(()=>P.node.insertBefore(q,P.node.childNodes[P.offset]||null)),P=D=new DOMPos(q,0),k=!0}let L=this.view.observer.selectionRange;(k||!L.focusNode||(!isEquivalentPosition(P.node,P.offset,L.anchorNode,L.anchorOffset)||!isEquivalentPosition(D.node,D.offset,L.focusNode,L.focusOffset))&&!this.suppressWidgetCursorChange(L,M))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(L.focusNode)&&inUneditable(L.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let q=getSelection(this.view.root);if(q)if(M.empty){if(browser.gecko){let B=nextToUneditable(P.node,P.offset);if(B&&B!=3){let F=(B==1?textNodeBefore:textNodeAfter)(P.node,P.offset);F&&(P=new DOMPos(F.node,F.offset))}}q.collapse(P.node,P.offset),M.bidiLevel!=null&&q.caretBidiLevel!==void 0&&(q.caretBidiLevel=M.bidiLevel)}else if(q.extend){q.collapse(P.node,P.offset);try{q.extend(D.node,D.offset)}catch{}}else{let B=document.createRange();M.anchor>M.head&&([P,D]=[D,P]),B.setEnd(D.node,D.offset),B.setStart(P.node,P.offset),q.removeAllRanges(),q.addRange(B)}A&&this.view.root.activeElement==this.dom&&(this.dom.blur(),R&&R.focus())}),this.view.observer.setSelectionRange(P,D)),this.impreciseAnchor=P.precise?null:new DOMPos(L.anchorNode,L.anchorOffset),this.impreciseHead=D.precise?null:new DOMPos(L.focusNode,L.focusOffset)}suppressWidgetCursorChange(v,S){return this.hasComposition&&S.empty&&isEquivalentPosition(v.focusNode,v.focusOffset,v.anchorNode,v.anchorOffset)&&this.posFromDOM(v.focusNode,v.focusOffset)==S.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:v}=this,S=v.state.selection.main,R=getSelection(v.root),{anchorNode:T,anchorOffset:A}=v.observer.selectionRange;if(!R||!S.empty||!S.assoc||!R.modify)return;let k=LineView.find(this,S.head);if(!k)return;let M=k.posAtStart;if(S.head==M||S.head==M+k.length)return;let P=this.coordsAt(S.head,-1),D=this.coordsAt(S.head,1);if(!P||!D||P.bottom>D.top)return;let L=this.domAtPos(S.head+S.assoc);R.collapse(L.node,L.offset),R.modify("move",S.assoc<0?"forward":"backward","lineboundary"),v.observer.readSelectionRange();let q=v.observer.selectionRange;v.docView.posFromDOM(q.anchorNode,q.anchorOffset)!=S.from&&R.collapse(T,A)}moveToLine(v){let S=this.dom,R;if(v.node!=S)return v;for(let T=v.offset;!R&&T<S.childNodes.length;T++){let A=ContentView.get(S.childNodes[T]);A instanceof LineView&&(R=A.domAtPos(0))}for(let T=v.offset-1;!R&&T>=0;T--){let A=ContentView.get(S.childNodes[T]);A instanceof LineView&&(R=A.domAtPos(A.length))}return R?new DOMPos(R.node,R.offset,!0):v}nearest(v){for(let S=v;S;){let R=ContentView.get(S);if(R&&R.rootView==this)return R;S=S.parentNode}return null}posFromDOM(v,S){let R=this.nearest(v);if(!R)throw new RangeError("Trying to find position for a DOM position outside of the document");return R.localPosFromDOM(v,S)+R.posAtStart}domAtPos(v){let{i:S,off:R}=this.childCursor().findPos(v,-1);for(;S<this.children.length-1;){let T=this.children[S];if(R<T.length||T instanceof LineView)break;S++,R=0}return this.children[S].domAtPos(R)}coordsAt(v,S){let R=null,T=0;for(let A=this.length,k=this.children.length-1;k>=0;k--){let M=this.children[k],P=A-M.breakAfter,D=P-M.length;if(P<v)break;if(D<=v&&(D<v||M.covers(-1))&&(P>v||M.covers(1))&&(!R||M instanceof LineView&&!(R instanceof LineView&&S>=0)))R=M,T=D;else if(R&&D==v&&P==v&&M instanceof BlockWidgetView&&Math.abs(S)<2){if(M.deco.startSide<0)break;k&&(R=null)}A=D}return R?R.coordsAt(v-T,S):null}coordsForChar(v){let{i:S,off:R}=this.childPos(v,1),T=this.children[S];if(!(T instanceof LineView))return null;for(;T.children.length;){let{i:M,off:P}=T.childPos(R,1);for(;;M++){if(M==T.children.length)return null;if((T=T.children[M]).length)break}R=P}if(!(T instanceof TextView))return null;let A=findClusterBreak(T.text,R);if(A==R)return null;let k=textRange(T.dom,R,A).getClientRects();for(let M=0;M<k.length;M++){let P=k[M];if(M==k.length-1||P.top<P.bottom&&P.left<P.right)return P}return null}measureVisibleLineHeights(v){let S=[],{from:R,to:T}=v,A=this.view.contentDOM.clientWidth,k=A>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,M=-1,P=this.view.textDirection==Direction.LTR;for(let D=0,L=0;L<this.children.length;L++){let q=this.children[L],B=D+q.length;if(B>T)break;if(D>=R){let F=q.dom.getBoundingClientRect();if(S.push(F.height),k){let j=q.dom.lastChild,z=j?clientRectsFor(j):[];if(z.length){let V=z[z.length-1],G=P?V.right-F.left:F.right-V.left;G>M&&(M=G,this.minWidth=A,this.minWidthFrom=D,this.minWidthTo=B)}}}D=B+q.breakAfter}return S}textDirectionAt(v){let{i:S}=this.childPos(v,1);return getComputedStyle(this.children[S].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let A of this.children)if(A instanceof LineView){let k=A.measureTextSize();if(k)return k}let v=document.createElement("div"),S,R,T;return v.className="cm-line",v.style.width="99999px",v.style.position="absolute",v.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(v);let A=clientRectsFor(v.firstChild)[0];S=v.getBoundingClientRect().height,R=A?A.width/27:7,T=A?A.height:S,v.remove()}),{lineHeight:S,charWidth:R,textHeight:T}}childCursor(v=this.length){let S=this.children.length;return S&&(v-=this.children[--S].length),new ChildCursor(this.children,v,S)}computeBlockGapDeco(){let v=[],S=this.view.viewState;for(let R=0,T=0;;T++){let A=T==S.viewports.length?null:S.viewports[T],k=A?A.from-1:this.length;if(k>R){let M=(S.lineBlockAt(k).bottom-S.lineBlockAt(R).top)/this.view.scaleY;v.push(Decoration.replace({widget:new BlockGapWidget(M),block:!0,inclusive:!0,isBlockGap:!0}).range(R,k))}if(!A)break;R=A.to+1}return Decoration.set(v)}updateDeco(){let v=1,S=this.view.state.facet(decorations).map(A=>(this.dynamicDecorationMap[v++]=typeof A=="function")?A(this.view):A),R=!1,T=this.view.state.facet(outerDecorations).map((A,k)=>{let M=typeof A=="function";return M&&(R=!0),M?A(this.view):A});for(T.length&&(this.dynamicDecorationMap[v++]=R,S.push(RangeSet.join(T))),this.decorations=[this.editContextFormatting,...S,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];v<this.decorations.length;)this.dynamicDecorationMap[v++]=!1;return this.decorations}scrollIntoView(v){if(v.isSnapshot){let D=this.view.viewState.lineBlockAt(v.range.head);this.view.scrollDOM.scrollTop=D.top-v.yMargin,this.view.scrollDOM.scrollLeft=v.xMargin;return}for(let D of this.view.state.facet(scrollHandler))try{if(D(this.view,v.range,v))return!0}catch(L){logException(this.view.state,L,"scroll handler")}let{range:S}=v,R=this.coordsAt(S.head,S.empty?S.assoc:S.head>S.anchor?-1:1),T;if(!R)return;!S.empty&&(T=this.coordsAt(S.anchor,S.anchor>S.head?-1:1))&&(R={left:Math.min(R.left,T.left),top:Math.min(R.top,T.top),right:Math.max(R.right,T.right),bottom:Math.max(R.bottom,T.bottom)});let A=getScrollMargins(this.view),k={left:R.left-A.left,top:R.top-A.top,right:R.right+A.right,bottom:R.bottom+A.bottom},{offsetWidth:M,offsetHeight:P}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,k,S.head<S.anchor?-1:1,v.x,v.y,Math.max(Math.min(v.xMargin,M),-M),Math.max(Math.min(v.yMargin,P),-P),this.view.textDirection==Direction.LTR)}lineHasWidget(v){let{i:S}=this.childCursor().findPos(v);if(S==this.children.length)return!1;let R=T=>T instanceof WidgetView||T.children.some(R);return R(this.children[S])}}function betweenUneditable(_){return _.node.nodeType==1&&_.node.firstChild&&(_.offset==0||_.node.childNodes[_.offset-1].contentEditable=="false")&&(_.offset==_.node.childNodes.length||_.node.childNodes[_.offset].contentEditable=="false")}function findCompositionNode(_,v){let S=_.observer.selectionRange;if(!S.focusNode)return null;let R=textNodeBefore(S.focusNode,S.focusOffset),T=textNodeAfter(S.focusNode,S.focusOffset),A=R||T;if(T&&R&&T.node!=R.node){let M=ContentView.get(T.node);if(!M||M instanceof TextView&&M.text!=T.node.nodeValue)A=T;else if(_.docView.lastCompositionAfterCursor){let P=ContentView.get(R.node);!P||P instanceof TextView&&P.text!=R.node.nodeValue||(A=T)}}if(_.docView.lastCompositionAfterCursor=A!=R,!A)return null;let k=v-A.offset;return{from:k,to:k+A.node.nodeValue.length,node:A.node}}function findCompositionRange(_,v,S){let R=findCompositionNode(_,S);if(!R)return null;let{node:T,from:A,to:k}=R,M=T.nodeValue;if(/[\n\r]/.test(M)||_.state.doc.sliceString(R.from,R.to)!=M)return null;let P=v.invertedDesc,D=new ChangedRange(P.mapPos(A),P.mapPos(k),A,k),L=[];for(let q=T.parentNode;;q=q.parentNode){let B=ContentView.get(q);if(B instanceof MarkView)L.push({node:q,deco:B.mark});else{if(B instanceof LineView||q.nodeName=="DIV"&&q.parentNode==_.contentDOM)return{range:D,text:T,marks:L,line:q};if(q!=_.contentDOM)L.push({node:q,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(q),tagName:q.tagName.toLowerCase()})});else return null}}}function nextToUneditable(_,v){return _.nodeType!=1?0:(v&&_.childNodes[v-1].contentEditable=="false"?1:0)|(v<_.childNodes.length&&_.childNodes[v].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(v,S){addRange(v,S,this.changes)}comparePoint(v,S){addRange(v,S,this.changes)}boundChange(v){addRange(v,v,this.changes)}};function findChangedDeco(_,v,S){let R=new DecorationComparator$1;return RangeSet.compare(_,v,S,R),R.changes}function inUneditable(_,v){for(let S=_;S&&S!=v;S=S.assignedSlot||S.parentNode)if(S.nodeType==1&&S.contentEditable=="false")return!0;return!1}function touchesComposition(_,v){let S=!1;return v&&_.iterChangedRanges((R,T)=>{R<v.to&&T>v.from&&(S=!0)}),S}function groupAt(_,v,S=1){let R=_.charCategorizer(v),T=_.doc.lineAt(v),A=v-T.from;if(T.length==0)return EditorSelection.cursor(v);A==0?S=1:A==T.length&&(S=-1);let k=A,M=A;S<0?k=findClusterBreak(T.text,A,!1):M=findClusterBreak(T.text,A);let P=R(T.text.slice(k,M));for(;k>0;){let D=findClusterBreak(T.text,k,!1);if(R(T.text.slice(D,k))!=P)break;k=D}for(;M<T.length;){let D=findClusterBreak(T.text,M);if(R(T.text.slice(M,D))!=P)break;M=D}return EditorSelection.range(k+T.from,M+T.from)}function getdx(_,v){return v.left>_?v.left-_:Math.max(0,_-v.right)}function getdy(_,v){return v.top>_?v.top-_:Math.max(0,_-v.bottom)}function yOverlap(_,v){return _.top<v.bottom-1&&_.bottom>v.top+1}function upTop(_,v){return v<_.top?{top:v,left:_.left,right:_.right,bottom:_.bottom}:_}function upBot(_,v){return v>_.bottom?{top:_.top,left:_.left,right:_.right,bottom:v}:_}function domPosAtCoords(_,v,S){let R,T,A,k,M=!1,P,D,L,q;for(let j=_.firstChild;j;j=j.nextSibling){let z=clientRectsFor(j);for(let V=0;V<z.length;V++){let G=z[V];T&&yOverlap(T,G)&&(G=upTop(upBot(G,T.bottom),T.top));let W=getdx(v,G),Y=getdy(S,G);if(W==0&&Y==0)return j.nodeType==3?domPosInText(j,v,S):domPosAtCoords(j,v,S);(!R||k>Y||k==Y&&A>W)&&(R=j,T=G,A=W,k=Y,M=W?v<G.left?V>0:V<z.length-1:!0),W==0?S>G.bottom&&(!L||L.bottom<G.bottom)?(P=j,L=G):S<G.top&&(!q||q.top>G.top)&&(D=j,q=G):L&&yOverlap(L,G)?L=upBot(L,G.bottom):q&&yOverlap(q,G)&&(q=upTop(q,G.top))}}if(L&&L.bottom>=S?(R=P,T=L):q&&q.top<=S&&(R=D,T=q),!R)return{node:_,offset:0};let B=Math.max(T.left,Math.min(T.right,v));if(R.nodeType==3)return domPosInText(R,B,S);if(M&&R.contentEditable!="false")return domPosAtCoords(R,B,S);let F=Array.prototype.indexOf.call(_.childNodes,R)+(v>=(T.left+T.right)/2?1:0);return{node:_,offset:F}}function domPosInText(_,v,S){let R=_.nodeValue.length,T=-1,A=1e9,k=0;for(let M=0;M<R;M++){let P=textRange(_,M,M+1).getClientRects();for(let D=0;D<P.length;D++){let L=P[D];if(L.top==L.bottom)continue;k||(k=v-L.left);let q=(L.top>S?L.top-S:S-L.bottom)-1;if(L.left-1<=v&&L.right+1>=v&&q<A){let B=v>=(L.left+L.right)/2,F=B;if(browser.chrome||browser.gecko){let j=textRange(_,M).getBoundingClientRect();Math.abs(j.left-L.right)<.1&&(F=!B)}if(q<=0)return{node:_,offset:M+(F?1:0)};T=M+(F?1:0),A=q}}}return{node:_,offset:T>-1?T:k>0?_.nodeValue.length:0}}function posAtCoords(_,v,S,R=-1){var T,A;let k=_.contentDOM.getBoundingClientRect(),M=k.top+_.viewState.paddingTop,P,{docHeight:D}=_.viewState,{x:L,y:q}=v,B=q-M;if(B<0)return 0;if(B>D)return _.state.doc.length;for(let X=_.viewState.heightOracle.textHeight/2,ee=!1;P=_.elementAtHeight(B),P.type!=BlockType.Text;)for(;B=R>0?P.bottom+X:P.top-X,!(B>=0&&B<=D);){if(ee)return S?null:0;ee=!0,R=-R}q=M+B;let F=P.from;if(F<_.viewport.from)return _.viewport.from==0?0:S?null:posAtCoordsImprecise(_,k,P,L,q);if(F>_.viewport.to)return _.viewport.to==_.state.doc.length?_.state.doc.length:S?null:posAtCoordsImprecise(_,k,P,L,q);let j=_.dom.ownerDocument,z=_.root.elementFromPoint?_.root:j,V=z.elementFromPoint(L,q);V&&!_.contentDOM.contains(V)&&(V=null),V||(L=Math.max(k.left+1,Math.min(k.right-1,L)),V=z.elementFromPoint(L,q),V&&!_.contentDOM.contains(V)&&(V=null));let G,W=-1;if(V&&((T=_.docView.nearest(V))===null||T===void 0?void 0:T.isEditable)!=!1){if(j.caretPositionFromPoint){let X=j.caretPositionFromPoint(L,q);X&&({offsetNode:G,offset:W}=X)}else if(j.caretRangeFromPoint){let X=j.caretRangeFromPoint(L,q);X&&({startContainer:G,startOffset:W}=X)}G&&(!_.contentDOM.contains(G)||browser.safari&&isSuspiciousSafariCaretResult(G,W,L)||browser.chrome&&isSuspiciousChromeCaretResult(G,W,L))&&(G=void 0),G&&(W=Math.min(maxOffset(G),W))}if(!G||!_.docView.dom.contains(G)){let X=LineView.find(_.docView,F);if(!X)return B>P.top+P.height/2?P.to:P.from;({node:G,offset:W}=domPosAtCoords(X.dom,L,q))}let Y=_.docView.nearest(G);if(!Y)return null;if(Y.isWidget&&((A=Y.dom)===null||A===void 0?void 0:A.nodeType)==1){let X=Y.dom.getBoundingClientRect();return v.y<X.top||v.y<=X.bottom&&v.x<=(X.left+X.right)/2?Y.posAtStart:Y.posAtEnd}else return Y.localPosFromDOM(G,W)+Y.posAtStart}function posAtCoordsImprecise(_,v,S,R,T){let A=Math.round((R-v.left)*_.defaultCharacterWidth);if(_.lineWrapping&&S.height>_.defaultLineHeight*1.5){let M=_.viewState.heightOracle.textHeight,P=Math.floor((T-S.top-(_.defaultLineHeight-M)*.5)/M);A+=P*_.viewState.heightOracle.lineLength}let k=_.state.sliceDoc(S.from,S.to);return S.from+findColumn(k,A,_.state.tabSize)}function isEndOfLineBefore(_,v,S){let R,T=_;if(_.nodeType!=3||v!=(R=_.nodeValue.length))return!1;for(;;){let A=T.nextSibling;if(A){if(A.nodeName=="BR")break;return!1}else{let k=T.parentNode;if(!k||k.nodeName=="DIV")break;T=k}}return textRange(_,R-1,R).getBoundingClientRect().right>S}function isSuspiciousSafariCaretResult(_,v,S){return isEndOfLineBefore(_,v,S)}function isSuspiciousChromeCaretResult(_,v,S){if(v!=0)return isEndOfLineBefore(_,v,S);for(let T=_;;){let A=T.parentNode;if(!A||A.nodeType!=1||A.firstChild!=T)return!1;if(A.classList.contains("cm-line"))break;T=A}let R=_.nodeType==1?_.getBoundingClientRect():textRange(_,0,Math.max(_.nodeValue.length,1)).getBoundingClientRect();return S-R.left>5}function blockAt(_,v,S){let R=_.lineBlockAt(v);if(Array.isArray(R.type)){let T;for(let A of R.type){if(A.from>v)break;if(!(A.to<v)){if(A.from<v&&A.to>v)return A;(!T||A.type==BlockType.Text&&(T.type!=A.type||(S<0?A.from<v:A.to>v)))&&(T=A)}}return T||R}return R}function moveToLineBoundary(_,v,S,R){let T=blockAt(_,v.head,v.assoc||-1),A=!R||T.type!=BlockType.Text||!(_.lineWrapping||T.widgetLineBreaks)?null:_.coordsAtPos(v.assoc<0&&v.head>T.from?v.head-1:v.head);if(A){let k=_.dom.getBoundingClientRect(),M=_.textDirectionAt(T.from),P=_.posAtCoords({x:S==(M==Direction.LTR)?k.right-1:k.left+1,y:(A.top+A.bottom)/2});if(P!=null)return EditorSelection.cursor(P,S?-1:1)}return EditorSelection.cursor(S?T.to:T.from,S?-1:1)}function moveByChar(_,v,S,R){let T=_.state.doc.lineAt(v.head),A=_.bidiSpans(T),k=_.textDirectionAt(T.from);for(let M=v,P=null;;){let D=moveVisually(T,A,k,M,S),L=movedOver;if(!D){if(T.number==(S?_.state.doc.lines:1))return M;L=`
`,T=_.state.doc.line(T.number+(S?1:-1)),A=_.bidiSpans(T),D=_.visualLineSide(T,!S)}if(P){if(!P(L))return M}else{if(!R)return D;P=R(L)}M=D}}function byGroup(_,v,S){let R=_.state.charCategorizer(v),T=R(S);return A=>{let k=R(A);return T==CharCategory.Space&&(T=k),T==k}}function moveVertically(_,v,S,R){let T=v.head,A=S?1:-1;if(T==(S?_.state.doc.length:0))return EditorSelection.cursor(T,v.assoc);let k=v.goalColumn,M,P=_.contentDOM.getBoundingClientRect(),D=_.coordsAtPos(T,v.assoc||-1),L=_.documentTop;if(D)k==null&&(k=D.left-P.left),M=A<0?D.top:D.bottom;else{let F=_.viewState.lineBlockAt(T);k==null&&(k=Math.min(P.right-P.left,_.defaultCharacterWidth*(T-F.from))),M=(A<0?F.top:F.bottom)+L}let q=P.left+k,B=R??_.viewState.heightOracle.textHeight>>1;for(let F=0;;F+=10){let j=M+(B+F)*A,z=posAtCoords(_,{x:q,y:j},!1,A);if(j<P.top||j>P.bottom||(A<0?z<T:z>T)){let V=_.docView.coordsForChar(z),G=!V||j<V.top?-1:1;return EditorSelection.cursor(z,G,void 0,k)}}}function skipAtomicRanges(_,v,S){for(;;){let R=0;for(let T of _)T.between(v-1,v+1,(A,k,M)=>{if(v>A&&v<k){let P=R||S||(v-A<k-v?-1:1);v=P<0?A:k,R=P}});if(!R)return v}}function skipAtomsForSelection(_,v){let S=null;for(let R=0;R<v.ranges.length;R++){let T=v.ranges[R],A=null;if(T.empty){let k=skipAtomicRanges(_,T.from,0);k!=T.from&&(A=EditorSelection.cursor(k,-1))}else{let k=skipAtomicRanges(_,T.from,-1),M=skipAtomicRanges(_,T.to,1);(k!=T.from||M!=T.to)&&(A=EditorSelection.range(T.from==T.anchor?k:M,T.from==T.head?k:M))}A&&(S||(S=v.ranges.slice()),S[R]=A)}return S?EditorSelection.create(S,v.mainIndex):v}function skipAtoms(_,v,S){let R=skipAtomicRanges(_.state.facet(atomicRanges).map(T=>T(_)),S.from,v.head>S.from?-1:1);return R==S.from?S:EditorSelection.cursor(R,R<S.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(v,S){this.points=v,this.text="",this.lineSeparator=S.facet(EditorState.lineSeparator)}append(v){this.text+=v}lineBreak(){this.text+=LineBreakPlaceholder}readRange(v,S){if(!v)return this;let R=v.parentNode;for(let T=v;;){this.findPointBefore(R,T);let A=this.text.length;this.readNode(T);let k=T.nextSibling;if(k==S)break;let M=ContentView.get(T),P=ContentView.get(k);(M&&P?M.breakAfter:(M?M.breakAfter:isBlockElement(T))||isBlockElement(k)&&(T.nodeName!="BR"||T.cmIgnore)&&this.text.length>A)&&!isEmptyToEnd(k,S)&&this.lineBreak(),T=k}return this.findPointBefore(R,S),this}readTextNode(v){let S=v.nodeValue;for(let R of this.points)R.node==v&&(R.pos=this.text.length+Math.min(R.offset,S.length));for(let R=0,T=this.lineSeparator?null:/\r\n?|\n/g;;){let A=-1,k=1,M;if(this.lineSeparator?(A=S.indexOf(this.lineSeparator,R),k=this.lineSeparator.length):(M=T.exec(S))&&(A=M.index,k=M[0].length),this.append(S.slice(R,A<0?S.length:A)),A<0)break;if(this.lineBreak(),k>1)for(let P of this.points)P.node==v&&P.pos>this.text.length&&(P.pos-=k-1);R=A+k}}readNode(v){if(v.cmIgnore)return;let S=ContentView.get(v),R=S&&S.overrideDOMText;if(R!=null){this.findPointInside(v,R.length);for(let T=R.iter();!T.next().done;)T.lineBreak?this.lineBreak():this.append(T.value)}else v.nodeType==3?this.readTextNode(v):v.nodeName=="BR"?v.nextSibling&&this.lineBreak():v.nodeType==1&&this.readRange(v.firstChild,null)}findPointBefore(v,S){for(let R of this.points)R.node==v&&v.childNodes[R.offset]==S&&(R.pos=this.text.length)}findPointInside(v,S){for(let R of this.points)(v.nodeType==3?R.node==v:v.contains(R.node))&&(R.pos=this.text.length+(isAtEnd(v,R.node,R.offset)?S:0))}}function isAtEnd(_,v,S){for(;;){if(!v||S<maxOffset(v))return!1;if(v==_)return!0;S=domIndex(v)+1,v=v.parentNode}}function isEmptyToEnd(_,v){let S;for(;!(_==v||!_);_=_.nextSibling){let R=ContentView.get(_);if(!(R?.isWidget||_.cmIgnore))return!1;R&&(S||(S=[])).push(R)}if(S)for(let R of S){let T=R.overrideDOMText;if(T?.length)return!1}return!0}class DOMPoint{constructor(v,S){this.node=v,this.offset=S,this.pos=-1}}class DOMChange{constructor(v,S,R,T){this.typeOver=T,this.bounds=null,this.text="",this.domChanged=S>-1;let{impreciseHead:A,impreciseAnchor:k}=v.docView;if(v.state.readOnly&&S>-1)this.newSel=null;else if(S>-1&&(this.bounds=v.docView.domBoundsAround(S,R,0))){let M=A||k?[]:selectionPoints(v),P=new DOMReader(M,v.state);P.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=P.text,this.newSel=selectionFromPoints(M,this.bounds.from)}else{let M=v.observer.selectionRange,P=A&&A.node==M.focusNode&&A.offset==M.focusOffset||!contains(v.contentDOM,M.focusNode)?v.state.selection.main.head:v.docView.posFromDOM(M.focusNode,M.focusOffset),D=k&&k.node==M.anchorNode&&k.offset==M.anchorOffset||!contains(v.contentDOM,M.anchorNode)?v.state.selection.main.anchor:v.docView.posFromDOM(M.anchorNode,M.anchorOffset),L=v.viewport;if((browser.ios||browser.chrome)&&v.state.selection.main.empty&&P!=D&&(L.from>0||L.to<v.state.doc.length)){let q=Math.min(P,D),B=Math.max(P,D),F=L.from-q,j=L.to-B;(F==0||F==1||q==0)&&(j==0||j==-1||B==v.state.doc.length)&&(P=0,D=v.state.doc.length)}v.inputState.composing>-1&&v.state.selection.ranges.length>1?this.newSel=v.state.selection.replaceRange(EditorSelection.range(D,P)):this.newSel=EditorSelection.single(D,P)}}}function applyDOMChange(_,v){let S,{newSel:R}=v,T=_.state.selection.main,A=_.inputState.lastKeyTime>Date.now()-100?_.inputState.lastKeyCode:-1;if(v.bounds){let{from:k,to:M}=v.bounds,P=T.from,D=null;(A===8||browser.android&&v.text.length<M-k)&&(P=T.to,D="end");let L=findDiff(_.state.doc.sliceString(k,M,LineBreakPlaceholder),v.text,P-k,D);L&&(browser.chrome&&A==13&&L.toB==L.from+2&&v.text.slice(L.from,L.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&L.toB--,S={from:k+L.from,to:k+L.toA,insert:Text.of(v.text.slice(L.from,L.toB).split(LineBreakPlaceholder))})}else R&&(!_.hasFocus&&_.state.facet(editable)||R.main.eq(T))&&(R=null);if(!S&&!R)return!1;if(!S&&v.typeOver&&!T.empty&&R&&R.main.empty?S={from:T.from,to:T.to,insert:_.state.doc.slice(T.from,T.to)}:(browser.mac||browser.android)&&S&&S.from==S.to&&S.from==T.head-1&&/^\. ?$/.test(S.insert.toString())&&_.contentDOM.getAttribute("autocorrect")=="off"?(R&&S.insert.length==2&&(R=EditorSelection.single(R.main.anchor-1,R.main.head-1)),S={from:S.from,to:S.to,insert:Text.of([S.insert.toString().replace("."," ")])}):S&&S.from>=T.from&&S.to<=T.to&&(S.from!=T.from||S.to!=T.to)&&T.to-T.from-(S.to-S.from)<=4?S={from:T.from,to:T.to,insert:_.state.doc.slice(T.from,S.from).append(S.insert).append(_.state.doc.slice(S.to,T.to))}:_.state.doc.lineAt(T.from).to<T.to&&_.docView.lineHasWidget(T.to)&&_.inputState.insertingTextAt>Date.now()-50?S={from:T.from,to:T.to,insert:_.state.toText(_.inputState.insertingText)}:browser.chrome&&S&&S.from==S.to&&S.from==T.head&&S.insert.toString()==`
 `&&_.lineWrapping&&(R&&(R=EditorSelection.single(R.main.anchor-1,R.main.head-1)),S={from:T.from,to:T.to,insert:Text.of([" "])}),S)return applyDOMChangeInner(_,S,R,A);if(R&&!R.main.eq(T)){let k=!1,M="select";return _.inputState.lastSelectionTime>Date.now()-50&&(_.inputState.lastSelectionOrigin=="select"&&(k=!0),M=_.inputState.lastSelectionOrigin,M=="select.pointer"&&(R=skipAtomsForSelection(_.state.facet(atomicRanges).map(P=>P(_)),R))),_.dispatch({selection:R,scrollIntoView:k,userEvent:M}),!0}else return!1}function applyDOMChangeInner(_,v,S,R=-1){if(browser.ios&&_.inputState.flushIOSKey(v))return!0;let T=_.state.selection.main;if(browser.android&&(v.to==T.to&&(v.from==T.from||v.from==T.from-1&&_.state.sliceDoc(v.from,T.from)==" ")&&v.insert.length==1&&v.insert.lines==2&&dispatchKey(_.contentDOM,"Enter",13)||(v.from==T.from-1&&v.to==T.to&&v.insert.length==0||R==8&&v.insert.length<v.to-v.from&&v.to>T.head)&&dispatchKey(_.contentDOM,"Backspace",8)||v.from==T.from&&v.to==T.to+1&&v.insert.length==0&&dispatchKey(_.contentDOM,"Delete",46)))return!0;let A=v.insert.toString();_.inputState.composing>=0&&_.inputState.composing++;let k,M=()=>k||(k=applyDefaultInsert(_,v,S));return _.state.facet(inputHandler$1).some(P=>P(_,v.from,v.to,A,M))||_.dispatch(M()),!0}function applyDefaultInsert(_,v,S){let R,T=_.state,A=T.selection.main,k=-1;if(v.from==v.to&&v.from<A.from||v.from>A.to){let P=v.from<A.from?-1:1,D=P<0?A.from:A.to,L=skipAtomicRanges(T.facet(atomicRanges).map(q=>q(_)),D,P);v.from==L&&(k=L)}if(k>-1)R={changes:v,selection:EditorSelection.cursor(v.from+v.insert.length,-1)};else if(v.from>=A.from&&v.to<=A.to&&v.to-v.from>=(A.to-A.from)/3&&(!S||S.main.empty&&S.main.from==v.from+v.insert.length)&&_.inputState.composing<0){let P=A.from<v.from?T.sliceDoc(A.from,v.from):"",D=A.to>v.to?T.sliceDoc(v.to,A.to):"";R=T.replaceSelection(_.state.toText(P+v.insert.sliceString(0,void 0,_.state.lineBreak)+D))}else{let P=T.changes(v),D=S&&S.main.to<=P.newLength?S.main:void 0;if(T.selection.ranges.length>1&&(_.inputState.composing>=0||_.inputState.compositionPendingChange)&&v.to<=A.to+10&&v.to>=A.to-10){let L=_.state.sliceDoc(v.from,v.to),q,B=S&&findCompositionNode(_,S.main.head);if(B){let j=v.insert.length-(v.to-v.from);q={from:B.from,to:B.to-j}}else q=_.state.doc.lineAt(A.head);let F=A.to-v.to;R=T.changeByRange(j=>{if(j.from==A.from&&j.to==A.to)return{changes:P,range:D||j.map(P)};let z=j.to-F,V=z-L.length;if(_.state.sliceDoc(V,z)!=L||z>=q.from&&V<=q.to)return{range:j};let G=T.changes({from:V,to:z,insert:v.insert}),W=j.to-A.to;return{changes:G,range:D?EditorSelection.range(Math.max(0,D.anchor+W),Math.max(0,D.head+W)):j.map(G)}})}else R={changes:P,selection:D&&T.selection.replaceRange(D)}}let M="input.type";return(_.composing||_.inputState.compositionPendingChange&&_.inputState.compositionEndedAt>Date.now()-50)&&(_.inputState.compositionPendingChange=!1,M+=".compose",_.inputState.compositionFirstChange&&(M+=".start",_.inputState.compositionFirstChange=!1)),T.update(R,{userEvent:M,scrollIntoView:!0})}function findDiff(_,v,S,R){let T=Math.min(_.length,v.length),A=0;for(;A<T&&_.charCodeAt(A)==v.charCodeAt(A);)A++;if(A==T&&_.length==v.length)return null;let k=_.length,M=v.length;for(;k>0&&M>0&&_.charCodeAt(k-1)==v.charCodeAt(M-1);)k--,M--;if(R=="end"){let P=Math.max(0,A-Math.min(k,M));S-=k+P-A}if(k<A&&_.length<v.length){let P=S<=A&&S>=k?A-S:0;A-=P,M=A+(M-k),k=A}else if(M<A){let P=S<=A&&S>=M?A-S:0;A-=P,k=A+(k-M),M=A}return{from:A,toA:k,toB:M}}function selectionPoints(_){let v=[];if(_.root.activeElement!=_.contentDOM)return v;let{anchorNode:S,anchorOffset:R,focusNode:T,focusOffset:A}=_.observer.selectionRange;return S&&(v.push(new DOMPoint(S,R)),(T!=S||A!=R)&&v.push(new DOMPoint(T,A))),v}function selectionFromPoints(_,v){if(_.length==0)return null;let S=_[0].pos,R=_.length==2?_[1].pos:S;return S>-1&&R>-1?EditorSelection.single(S+v,R+v):null}class InputState{setSelectionOrigin(v){this.lastSelectionOrigin=v,this.lastSelectionTime=Date.now()}constructor(v){this.view=v,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=v.hasFocus,browser.safari&&v.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(v.contentDOM.ownerDocument)}handleEvent(v){!eventBelongsToEditor(this.view,v)||this.ignoreDuringComposition(v)||v.type=="keydown"&&this.keydown(v)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(v.type,v)):this.runHandlers(v.type,v))}runHandlers(v,S){let R=this.handlers[v];if(R){for(let T of R.observers)T(this.view,S);for(let T of R.handlers){if(S.defaultPrevented)break;if(T(this.view,S)){S.preventDefault();break}}}}ensureHandlers(v){let S=computeHandlers(v),R=this.handlers,T=this.view.contentDOM;for(let A in S)if(A!="scroll"){let k=!S[A].handlers.length,M=R[A];M&&k!=!M.handlers.length&&(T.removeEventListener(A,this.handleEvent),M=null),M||T.addEventListener(A,this.handleEvent,{passive:k})}for(let A in R)A!="scroll"&&!S[A]&&T.removeEventListener(A,this.handleEvent);this.handlers=S}keydown(v){if(this.lastKeyCode=v.keyCode,this.lastKeyTime=Date.now(),v.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&v.keyCode!=27&&modifierCodes.indexOf(v.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!v.synthetic&&(v.keyCode==13||v.keyCode==8))return this.view.observer.delayAndroidKey(v.key,v.keyCode),!0;let S;return browser.ios&&!v.synthetic&&!v.altKey&&!v.metaKey&&((S=PendingKeys.find(R=>R.keyCode==v.keyCode))&&!v.ctrlKey||EmacsyPendingKeys.indexOf(v.key)>-1&&v.ctrlKey&&!v.shiftKey)?(this.pendingIOSKey=S||v,setTimeout(()=>this.flushIOSKey(),250),!0):(v.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(v){let S=this.pendingIOSKey;return!S||S.key=="Enter"&&v&&v.from<v.to&&/^\S+$/.test(v.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,S.key,S.keyCode,S instanceof KeyboardEvent?S:void 0))}ignoreDuringComposition(v){return!/^key/.test(v.type)||v.synthetic?!1:this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(v){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=v}update(v){this.view.observer.update(v),this.mouseSelection&&this.mouseSelection.update(v),this.draggedContent&&v.docChanged&&(this.draggedContent=this.draggedContent.map(v.changes)),v.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(_,v){return(S,R)=>{try{return v.call(_,R,S)}catch(T){logException(S.state,T)}}}function computeHandlers(_){let v=Object.create(null);function S(R){return v[R]||(v[R]={observers:[],handlers:[]})}for(let R of _){let T=R.spec,A=T&&T.plugin.domEventHandlers,k=T&&T.plugin.domEventObservers;if(A)for(let M in A){let P=A[M];P&&S(M).handlers.push(bindHandler(R.value,P))}if(k)for(let M in k){let P=k[M];P&&S(M).observers.push(bindHandler(R.value,P))}}for(let R in handlers)S(R).handlers.push(handlers[R]);for(let R in observers)S(R).observers.push(observers[R]);return v}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(_){return Math.max(0,_)*.7+8}function dist(_,v){return Math.max(Math.abs(_.clientX-v.clientX),Math.abs(_.clientY-v.clientY))}class MouseSelection{constructor(v,S,R,T){this.view=v,this.startEvent=S,this.style=R,this.mustSelect=T,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=S,this.scrollParents=scrollableParents(v.contentDOM),this.atoms=v.state.facet(atomicRanges).map(k=>k(v));let A=v.contentDOM.ownerDocument;A.addEventListener("mousemove",this.move=this.move.bind(this)),A.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=S.shiftKey,this.multiple=v.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(v,S),this.dragging=isInPrimarySelection(v,S)&&getClickType(S)==1?null:!1}start(v){this.dragging===!1&&this.select(v)}move(v){if(v.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,v)<10)return;this.select(this.lastEvent=v);let S=0,R=0,T=0,A=0,k=this.view.win.innerWidth,M=this.view.win.innerHeight;this.scrollParents.x&&({left:T,right:k}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:A,bottom:M}=this.scrollParents.y.getBoundingClientRect());let P=getScrollMargins(this.view);v.clientX-P.left<=T+dragScrollMargin?S=-dragScrollSpeed(T-v.clientX):v.clientX+P.right>=k-dragScrollMargin&&(S=dragScrollSpeed(v.clientX-k)),v.clientY-P.top<=A+dragScrollMargin?R=-dragScrollSpeed(A-v.clientY):v.clientY+P.bottom>=M-dragScrollMargin&&(R=dragScrollSpeed(v.clientY-M)),this.setScrollSpeed(S,R)}up(v){this.dragging==null&&this.select(this.lastEvent),this.dragging||v.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let v=this.view.contentDOM.ownerDocument;v.removeEventListener("mousemove",this.move),v.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(v,S){this.scrollSpeed={x:v,y:S},v||S?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:v,y:S}=this.scrollSpeed;v&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=v,v=0),S&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=S,S=0),(v||S)&&this.view.win.scrollBy(v,S),this.dragging===!1&&this.select(this.lastEvent)}select(v){let{view:S}=this,R=skipAtomsForSelection(this.atoms,this.style.get(v,this.extend,this.multiple));(this.mustSelect||!R.eq(S.state.selection,this.dragging===!1))&&this.view.dispatch({selection:R,userEvent:"select.pointer"}),this.mustSelect=!1}update(v){v.transactions.some(S=>S.isUserEvent("input.type"))?this.destroy():this.style.update(v)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(_,v){let S=_.state.facet(clickAddsSelectionRange);return S.length?S[0](v):browser.mac?v.metaKey:v.ctrlKey}function dragMovesSelection(_,v){let S=_.state.facet(dragMovesSelection$1);return S.length?S[0](v):browser.mac?!v.altKey:!v.ctrlKey}function isInPrimarySelection(_,v){let{main:S}=_.state.selection;if(S.empty)return!1;let R=getSelection(_.root);if(!R||R.rangeCount==0)return!0;let T=R.getRangeAt(0).getClientRects();for(let A=0;A<T.length;A++){let k=T[A];if(k.left<=v.clientX&&k.right>=v.clientX&&k.top<=v.clientY&&k.bottom>=v.clientY)return!0}return!1}function eventBelongsToEditor(_,v){if(!v.bubbles)return!0;if(v.defaultPrevented)return!1;for(let S=v.target,R;S!=_.contentDOM;S=S.parentNode)if(!S||S.nodeType==11||(R=ContentView.get(S))&&R.ignoreEvent(v))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(_){let v=_.dom.parentNode;if(!v)return;let S=v.appendChild(document.createElement("textarea"));S.style.cssText="position: fixed; left: -10000px; top: 10px",S.focus(),setTimeout(()=>{_.focus(),S.remove(),doPaste(_,S.value)},50)}function textFilter(_,v,S){for(let R of _.facet(v))S=R(S,_);return S}function doPaste(_,v){v=textFilter(_.state,clipboardInputFilter,v);let{state:S}=_,R,T=1,A=S.toText(v),k=A.lines==S.selection.ranges.length;if(lastLinewiseCopy!=null&&S.selection.ranges.every(P=>P.empty)&&lastLinewiseCopy==A.toString()){let P=-1;R=S.changeByRange(D=>{let L=S.doc.lineAt(D.from);if(L.from==P)return{range:D};P=L.from;let q=S.toText((k?A.line(T++).text:v)+S.lineBreak);return{changes:{from:L.from,insert:q},range:EditorSelection.cursor(D.from+q.length)}})}else k?R=S.changeByRange(P=>{let D=A.line(T++);return{changes:{from:P.from,to:P.to,insert:D.text},range:EditorSelection.cursor(P.from+D.length)}}):R=S.replaceSelection(A);_.dispatch(R,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=_=>{_.inputState.lastScrollTop=_.scrollDOM.scrollTop,_.inputState.lastScrollLeft=_.scrollDOM.scrollLeft};handlers.keydown=(_,v)=>(_.inputState.setSelectionOrigin("select"),v.keyCode==27&&_.inputState.tabFocusMode!=0&&(_.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(_,v)=>{_.inputState.lastTouchTime=Date.now(),_.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=_=>{_.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(_,v)=>{if(_.observer.flush(),_.inputState.lastTouchTime>Date.now()-2e3)return!1;let S=null;for(let R of _.state.facet(mouseSelectionStyle))if(S=R(_,v),S)break;if(!S&&v.button==0&&(S=basicMouseSelection(_,v)),S){let R=!_.hasFocus;_.inputState.startMouseSelection(new MouseSelection(_,v,S,R)),R&&_.observer.ignore(()=>{focusPreventScroll(_.contentDOM);let A=_.root.activeElement;A&&!A.contains(_.contentDOM)&&A.blur()});let T=_.inputState.mouseSelection;if(T)return T.start(v),T.dragging===!1}else _.inputState.setSelectionOrigin("select.pointer");return!1};function rangeForClick(_,v,S,R){if(R==1)return EditorSelection.cursor(v,S);if(R==2)return groupAt(_.state,v,S);{let T=LineView.find(_.docView,v),A=_.state.doc.lineAt(T?T.posAtEnd:v),k=T?T.posAtStart:A.from,M=T?T.posAtEnd:A.to;return M<_.state.doc.length&&M==A.to&&M++,EditorSelection.range(k,M)}}let inside=(_,v,S)=>v>=S.top&&v<=S.bottom&&_>=S.left&&_<=S.right;function findPositionSide(_,v,S,R){let T=LineView.find(_.docView,v);if(!T)return 1;let A=v-T.posAtStart;if(A==0)return 1;if(A==T.length)return-1;let k=T.coordsAt(A,-1);if(k&&inside(S,R,k))return-1;let M=T.coordsAt(A,1);return M&&inside(S,R,M)?1:k&&k.bottom>=R?-1:1}function queryPos(_,v){let S=_.posAtCoords({x:v.clientX,y:v.clientY},!1);return{pos:S,bias:findPositionSide(_,S,v.clientX,v.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(_){if(!BadMouseDetail)return _.detail;let v=lastMouseDown,S=lastMouseDownTime;return lastMouseDown=_,lastMouseDownTime=Date.now(),lastMouseDownCount=!v||S>Date.now()-400&&Math.abs(v.clientX-_.clientX)<2&&Math.abs(v.clientY-_.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(_,v){let S=queryPos(_,v),R=getClickType(v),T=_.state.selection;return{update(A){A.docChanged&&(S.pos=A.changes.mapPos(S.pos),T=T.map(A.changes))},get(A,k,M){let P=queryPos(_,A),D,L=rangeForClick(_,P.pos,P.bias,R);if(S.pos!=P.pos&&!k){let q=rangeForClick(_,S.pos,S.bias,R),B=Math.min(q.from,L.from),F=Math.max(q.to,L.to);L=B<L.from?EditorSelection.range(B,F):EditorSelection.range(F,B)}return k?T.replaceRange(T.main.extend(L.from,L.to)):M&&R==1&&T.ranges.length>1&&(D=removeRangeAround(T,P.pos))?D:M?T.addRange(L):EditorSelection.create([L])}}}function removeRangeAround(_,v){for(let S=0;S<_.ranges.length;S++){let{from:R,to:T}=_.ranges[S];if(R<=v&&T>=v)return EditorSelection.create(_.ranges.slice(0,S).concat(_.ranges.slice(S+1)),_.mainIndex==S?0:_.mainIndex-(_.mainIndex>S?1:0))}return null}handlers.dragstart=(_,v)=>{let{selection:{main:S}}=_.state;if(v.target.draggable){let T=_.docView.nearest(v.target);if(T&&T.isWidget){let A=T.posAtStart,k=A+T.length;(A>=S.to||k<=S.from)&&(S=EditorSelection.range(A,k))}}let{inputState:R}=_;return R.mouseSelection&&(R.mouseSelection.dragging=!0),R.draggedContent=S,v.dataTransfer&&(v.dataTransfer.setData("Text",textFilter(_.state,clipboardOutputFilter,_.state.sliceDoc(S.from,S.to))),v.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=_=>(_.inputState.draggedContent=null,!1);function dropText(_,v,S,R){if(S=textFilter(_.state,clipboardInputFilter,S),!S)return;let T=_.posAtCoords({x:v.clientX,y:v.clientY},!1),{draggedContent:A}=_.inputState,k=R&&A&&dragMovesSelection(_,v)?{from:A.from,to:A.to}:null,M={from:T,insert:S},P=_.state.changes(k?[k,M]:M);_.focus(),_.dispatch({changes:P,selection:{anchor:P.mapPos(T,-1),head:P.mapPos(T,1)},userEvent:k?"move.drop":"input.drop"}),_.inputState.draggedContent=null}handlers.drop=(_,v)=>{if(!v.dataTransfer)return!1;if(_.state.readOnly)return!0;let S=v.dataTransfer.files;if(S&&S.length){let R=Array(S.length),T=0,A=()=>{++T==S.length&&dropText(_,v,R.filter(k=>k!=null).join(_.state.lineBreak),!1)};for(let k=0;k<S.length;k++){let M=new FileReader;M.onerror=A,M.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(M.result)||(R[k]=M.result),A()},M.readAsText(S[k])}return!0}else{let R=v.dataTransfer.getData("Text");if(R)return dropText(_,v,R,!0),!0}return!1};handlers.paste=(_,v)=>{if(_.state.readOnly)return!0;_.observer.flush();let S=brokenClipboardAPI?null:v.clipboardData;return S?(doPaste(_,S.getData("text/plain")||S.getData("text/uri-list")),!0):(capturePaste(_),!1)};function captureCopy(_,v){let S=_.dom.parentNode;if(!S)return;let R=S.appendChild(document.createElement("textarea"));R.style.cssText="position: fixed; left: -10000px; top: 10px",R.value=v,R.focus(),R.selectionEnd=v.length,R.selectionStart=0,setTimeout(()=>{R.remove(),_.focus()},50)}function copiedRange(_){let v=[],S=[],R=!1;for(let T of _.selection.ranges)T.empty||(v.push(_.sliceDoc(T.from,T.to)),S.push(T));if(!v.length){let T=-1;for(let{from:A}of _.selection.ranges){let k=_.doc.lineAt(A);k.number>T&&(v.push(k.text),S.push({from:k.from,to:Math.min(_.doc.length,k.to+1)})),T=k.number}R=!0}return{text:textFilter(_,clipboardOutputFilter,v.join(_.lineBreak)),ranges:S,linewise:R}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(_,v)=>{let{text:S,ranges:R,linewise:T}=copiedRange(_.state);if(!S&&!T)return!1;lastLinewiseCopy=T?S:null,v.type=="cut"&&!_.state.readOnly&&_.dispatch({changes:R,scrollIntoView:!0,userEvent:"delete.cut"});let A=brokenClipboardAPI?null:v.clipboardData;return A?(A.clearData(),A.setData("text/plain",S),!0):(captureCopy(_,S),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(_,v){let S=[];for(let R of _.facet(focusChangeEffect)){let T=R(_,v);T&&S.push(T)}return S.length?_.update({effects:S,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(_){setTimeout(()=>{let v=_.hasFocus;if(v!=_.inputState.notifiedFocused){let S=focusChangeTransaction(_.state,v);S?_.dispatch(S):_.update([])}},10)}observers.focus=_=>{_.inputState.lastFocusTime=Date.now(),!_.scrollDOM.scrollTop&&(_.inputState.lastScrollTop||_.inputState.lastScrollLeft)&&(_.scrollDOM.scrollTop=_.inputState.lastScrollTop,_.scrollDOM.scrollLeft=_.inputState.lastScrollLeft),updateForFocusChange(_)};observers.blur=_=>{_.observer.clearSelectionRange(),updateForFocusChange(_)};observers.compositionstart=observers.compositionupdate=_=>{_.observer.editContext||(_.inputState.compositionFirstChange==null&&(_.inputState.compositionFirstChange=!0),_.inputState.composing<0&&(_.inputState.composing=0))};observers.compositionend=_=>{_.observer.editContext||(_.inputState.composing=-1,_.inputState.compositionEndedAt=Date.now(),_.inputState.compositionPendingKey=!0,_.inputState.compositionPendingChange=_.observer.pendingRecords().length>0,_.inputState.compositionFirstChange=null,browser.chrome&&browser.android?_.observer.flushSoon():_.inputState.compositionPendingChange?Promise.resolve().then(()=>_.observer.flush()):setTimeout(()=>{_.inputState.composing<0&&_.docView.hasComposition&&_.update([])},50))};observers.contextmenu=_=>{_.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(_,v)=>{var S,R;if((v.inputType=="insertText"||v.inputType=="insertCompositionText")&&(_.inputState.insertingText=v.data,_.inputState.insertingTextAt=Date.now()),v.inputType=="insertReplacementText"&&_.observer.editContext){let A=(S=v.dataTransfer)===null||S===void 0?void 0:S.getData("text/plain"),k=v.getTargetRanges();if(A&&k.length){let M=k[0],P=_.posAtDOM(M.startContainer,M.startOffset),D=_.posAtDOM(M.endContainer,M.endOffset);return applyDOMChangeInner(_,{from:P,to:D,insert:_.state.toText(A)},null),!0}}let T;if(browser.chrome&&browser.android&&(T=PendingKeys.find(A=>A.inputType==v.inputType))&&(_.observer.delayAndroidKey(T.key,T.keyCode),T.key=="Backspace"||T.key=="Delete")){let A=((R=window.visualViewport)===null||R===void 0?void 0:R.height)||0;setTimeout(()=>{var k;(((k=window.visualViewport)===null||k===void 0?void 0:k.height)||0)>A+10&&_.hasFocus&&(_.contentDOM.blur(),_.focus())},100)}return browser.ios&&v.inputType=="deleteContentForward"&&_.observer.flushSoon(),browser.safari&&v.inputType=="insertText"&&_.inputState.composing>=0&&setTimeout(()=>observers.compositionend(_,v),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(_){appliedFirefoxHack.has(_)||(appliedFirefoxHack.add(_),_.addEventListener("copy",()=>{}),_.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(v){this.lineWrapping=v,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(v,S){let R=this.doc.lineAt(S).number-this.doc.lineAt(v).number+1;return this.lineWrapping&&(R+=Math.max(0,Math.ceil((S-v-R*this.lineLength*.5)/this.lineLength))),this.lineHeight*R}heightForLine(v){return this.lineWrapping?(1+Math.max(0,Math.ceil((v-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(v){return this.doc=v,this}mustRefreshForWrapping(v){return wrappingWhiteSpace.indexOf(v)>-1!=this.lineWrapping}mustRefreshForHeights(v){let S=!1;for(let R=0;R<v.length;R++){let T=v[R];T<0?R++:this.heightSamples[Math.floor(T*10)]||(S=!0,this.heightSamples[Math.floor(T*10)]=!0)}return S}refresh(v,S,R,T,A,k){let M=wrappingWhiteSpace.indexOf(v)>-1,P=Math.round(S)!=Math.round(this.lineHeight)||this.lineWrapping!=M;if(this.lineWrapping=M,this.lineHeight=S,this.charWidth=R,this.textHeight=T,this.lineLength=A,P){this.heightSamples={};for(let D=0;D<k.length;D++){let L=k[D];L<0?D++:this.heightSamples[Math.floor(L*10)]=!0}}return P}}class MeasuredHeights{constructor(v,S){this.from=v,this.heights=S,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(v,S,R,T,A){this.from=v,this.length=S,this.top=R,this.height=T,this._content=A}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(v){let S=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(v._content)?v._content:[v]);return new BlockInfo(this.from,this.length+v.length,this.top,this.height+v.height,S)}}var QueryType$1=(function(_){return _[_.ByPos=0]="ByPos",_[_.ByHeight=1]="ByHeight",_[_.ByPosNoHeight=2]="ByPosNoHeight",_})(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(v,S,R=2){this.length=v,this.height=S,this.flags=R}get outdated(){return(this.flags&2)>0}set outdated(v){this.flags=(v?2:0)|this.flags&-3}setHeight(v){this.height!=v&&(Math.abs(this.height-v)>Epsilon&&(heightChangeFlag=!0),this.height=v)}replace(v,S,R){return HeightMap.of(R)}decomposeLeft(v,S){S.push(this)}decomposeRight(v,S){S.push(this)}applyChanges(v,S,R,T){let A=this,k=R.doc;for(let M=T.length-1;M>=0;M--){let{fromA:P,toA:D,fromB:L,toB:q}=T[M],B=A.lineAt(P,QueryType$1.ByPosNoHeight,R.setDoc(S),0,0),F=B.to>=D?B:A.lineAt(D,QueryType$1.ByPosNoHeight,R,0,0);for(q+=F.to-D,D=F.to;M>0&&B.from<=T[M-1].toA;)P=T[M-1].fromA,L=T[M-1].fromB,M--,P<B.from&&(B=A.lineAt(P,QueryType$1.ByPosNoHeight,R,0,0));L+=B.from-P,P=B.from;let j=NodeBuilder.build(R.setDoc(k),v,L,q);A=replace(A,A.replace(P,D,j))}return A.updateHeight(R,0)}static empty(){return new HeightMapText(0,0)}static of(v){if(v.length==1)return v[0];let S=0,R=v.length,T=0,A=0;for(;;)if(S==R)if(T>A*2){let M=v[S-1];M.break?v.splice(--S,1,M.left,null,M.right):v.splice(--S,1,M.left,M.right),R+=1+M.break,T-=M.size}else if(A>T*2){let M=v[R];M.break?v.splice(R,1,M.left,null,M.right):v.splice(R,1,M.left,M.right),R+=2+M.break,A-=M.size}else break;else if(T<A){let M=v[S++];M&&(T+=M.size)}else{let M=v[--R];M&&(A+=M.size)}let k=0;return v[S-1]==null?(k=1,S--):v[S]==null&&(k=1,R++),new HeightMapBranch(HeightMap.of(v.slice(0,S)),k,HeightMap.of(v.slice(R)))}}function replace(_,v){return _==v?_:(_.constructor!=v.constructor&&(heightChangeFlag=!0),v)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(v,S,R){super(v,S),this.deco=R}blockAt(v,S,R,T){return new BlockInfo(T,this.length,R,this.height,this.deco||0)}lineAt(v,S,R,T,A){return this.blockAt(0,R,T,A)}forEachLine(v,S,R,T,A,k){v<=A+this.length&&S>=A&&k(this.blockAt(0,R,T,A))}updateHeight(v,S=0,R=!1,T){return T&&T.from<=S&&T.more&&this.setHeight(T.heights[T.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(v,S){super(v,S,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(v,S,R,T){return new BlockInfo(T,this.length,R,this.height,this.breaks)}replace(v,S,R){let T=R[0];return R.length==1&&(T instanceof HeightMapText||T instanceof HeightMapGap&&T.flags&4)&&Math.abs(this.length-T.length)<10?(T instanceof HeightMapGap?T=new HeightMapText(T.length,this.height):T.height=this.height,this.outdated||(T.outdated=!1),T):HeightMap.of(R)}updateHeight(v,S=0,R=!1,T){return T&&T.from<=S&&T.more?this.setHeight(T.heights[T.index++]):(R||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,v.heightForLine(this.length-this.collapsed))+this.breaks*v.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(v){super(v,0)}heightMetrics(v,S){let R=v.doc.lineAt(S).number,T=v.doc.lineAt(S+this.length).number,A=T-R+1,k,M=0;if(v.lineWrapping){let P=Math.min(this.height,v.lineHeight*A);k=P/A,this.length>A+1&&(M=(this.height-P)/(this.length-A-1))}else k=this.height/A;return{firstLine:R,lastLine:T,perLine:k,perChar:M}}blockAt(v,S,R,T){let{firstLine:A,lastLine:k,perLine:M,perChar:P}=this.heightMetrics(S,T);if(S.lineWrapping){let D=T+(v<S.lineHeight?0:Math.round(Math.max(0,Math.min(1,(v-R)/this.height))*this.length)),L=S.doc.lineAt(D),q=M+L.length*P,B=Math.max(R,v-q/2);return new BlockInfo(L.from,L.length,B,q,0)}else{let D=Math.max(0,Math.min(k-A,Math.floor((v-R)/M))),{from:L,length:q}=S.doc.line(A+D);return new BlockInfo(L,q,R+M*D,M,0)}}lineAt(v,S,R,T,A){if(S==QueryType$1.ByHeight)return this.blockAt(v,R,T,A);if(S==QueryType$1.ByPosNoHeight){let{from:F,to:j}=R.doc.lineAt(v);return new BlockInfo(F,j-F,0,0,0)}let{firstLine:k,perLine:M,perChar:P}=this.heightMetrics(R,A),D=R.doc.lineAt(v),L=M+D.length*P,q=D.number-k,B=T+M*q+P*(D.from-A-q);return new BlockInfo(D.from,D.length,Math.max(T,Math.min(B,T+this.height-L)),L,0)}forEachLine(v,S,R,T,A,k){v=Math.max(v,A),S=Math.min(S,A+this.length);let{firstLine:M,perLine:P,perChar:D}=this.heightMetrics(R,A);for(let L=v,q=T;L<=S;){let B=R.doc.lineAt(L);if(L==v){let j=B.number-M;q+=P*j+D*(v-A-j)}let F=P+D*B.length;k(new BlockInfo(B.from,B.length,q,F,0)),q+=F,L=B.to+1}}replace(v,S,R){let T=this.length-S;if(T>0){let A=R[R.length-1];A instanceof HeightMapGap?R[R.length-1]=new HeightMapGap(A.length+T):R.push(null,new HeightMapGap(T-1))}if(v>0){let A=R[0];A instanceof HeightMapGap?R[0]=new HeightMapGap(v+A.length):R.unshift(new HeightMapGap(v-1),null)}return HeightMap.of(R)}decomposeLeft(v,S){S.push(new HeightMapGap(v-1),null)}decomposeRight(v,S){S.push(null,new HeightMapGap(this.length-v-1))}updateHeight(v,S=0,R=!1,T){let A=S+this.length;if(T&&T.from<=S+this.length&&T.more){let k=[],M=Math.max(S,T.from),P=-1;for(T.from>S&&k.push(new HeightMapGap(T.from-S-1).updateHeight(v,S));M<=A&&T.more;){let L=v.doc.lineAt(M).length;k.length&&k.push(null);let q=T.heights[T.index++];P==-1?P=q:Math.abs(q-P)>=Epsilon&&(P=-2);let B=new HeightMapText(L,q);B.outdated=!1,k.push(B),M+=L+1}M<=A&&k.push(null,new HeightMapGap(A-M).updateHeight(v,M));let D=HeightMap.of(k);return(P<0||Math.abs(D.height-this.height)>=Epsilon||Math.abs(P-this.heightMetrics(v,S).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,D)}else(R||this.outdated)&&(this.setHeight(v.heightForGap(S,S+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(v,S,R){super(v.length+S+R.length,v.height+R.height,S|(v.outdated||R.outdated?2:0)),this.left=v,this.right=R,this.size=v.size+R.size}get break(){return this.flags&1}blockAt(v,S,R,T){let A=R+this.left.height;return v<A?this.left.blockAt(v,S,R,T):this.right.blockAt(v,S,A,T+this.left.length+this.break)}lineAt(v,S,R,T,A){let k=T+this.left.height,M=A+this.left.length+this.break,P=S==QueryType$1.ByHeight?v<k:v<M,D=P?this.left.lineAt(v,S,R,T,A):this.right.lineAt(v,S,R,k,M);if(this.break||(P?D.to<M:D.from>M))return D;let L=S==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return P?D.join(this.right.lineAt(M,L,R,k,M)):this.left.lineAt(M,L,R,T,A).join(D)}forEachLine(v,S,R,T,A,k){let M=T+this.left.height,P=A+this.left.length+this.break;if(this.break)v<P&&this.left.forEachLine(v,S,R,T,A,k),S>=P&&this.right.forEachLine(v,S,R,M,P,k);else{let D=this.lineAt(P,QueryType$1.ByPos,R,T,A);v<D.from&&this.left.forEachLine(v,D.from-1,R,T,A,k),D.to>=v&&D.from<=S&&k(D),S>D.to&&this.right.forEachLine(D.to+1,S,R,M,P,k)}}replace(v,S,R){let T=this.left.length+this.break;if(S<T)return this.balanced(this.left.replace(v,S,R),this.right);if(v>this.left.length)return this.balanced(this.left,this.right.replace(v-T,S-T,R));let A=[];v>0&&this.decomposeLeft(v,A);let k=A.length;for(let M of R)A.push(M);if(v>0&&mergeGaps(A,k-1),S<this.length){let M=A.length;this.decomposeRight(S,A),mergeGaps(A,M)}return HeightMap.of(A)}decomposeLeft(v,S){let R=this.left.length;if(v<=R)return this.left.decomposeLeft(v,S);S.push(this.left),this.break&&(R++,v>=R&&S.push(null)),v>R&&this.right.decomposeLeft(v-R,S)}decomposeRight(v,S){let R=this.left.length,T=R+this.break;if(v>=T)return this.right.decomposeRight(v-T,S);v<R&&this.left.decomposeRight(v,S),this.break&&v<T&&S.push(null),S.push(this.right)}balanced(v,S){return v.size>2*S.size||S.size>2*v.size?HeightMap.of(this.break?[v,null,S]:[v,S]):(this.left=replace(this.left,v),this.right=replace(this.right,S),this.setHeight(v.height+S.height),this.outdated=v.outdated||S.outdated,this.size=v.size+S.size,this.length=v.length+this.break+S.length,this)}updateHeight(v,S=0,R=!1,T){let{left:A,right:k}=this,M=S+A.length+this.break,P=null;return T&&T.from<=S+A.length&&T.more?P=A=A.updateHeight(v,S,R,T):A.updateHeight(v,S,R),T&&T.from<=M+k.length&&T.more?P=k=k.updateHeight(v,M,R,T):k.updateHeight(v,M,R),P?this.balanced(A,k):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(_,v){let S,R;_[v]==null&&(S=_[v-1])instanceof HeightMapGap&&(R=_[v+1])instanceof HeightMapGap&&_.splice(v-1,3,new HeightMapGap(S.length+1+R.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(v,S){this.pos=v,this.oracle=S,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=v}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(v,S){if(this.lineStart>-1){let R=Math.min(S,this.lineEnd),T=this.nodes[this.nodes.length-1];T instanceof HeightMapText?T.length+=R-this.pos:(R>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(R-this.pos,-1)),this.writtenTo=R,S>R&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=S}point(v,S,R){if(v<S||R.heightRelevant){let T=R.widget?R.widget.estimatedHeight:0,A=R.widget?R.widget.lineBreaks:0;T<0&&(T=this.oracle.lineHeight);let k=S-v;R.block?this.addBlock(new HeightMapBlock(k,T,R)):(k||A||T>=relevantWidgetHeight)&&this.addLineDeco(T,A,k)}else S>v&&this.span(v,S);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:v,to:S}=this.oracle.doc.lineAt(this.pos);this.lineStart=v,this.lineEnd=S,this.writtenTo<v&&((this.writtenTo<v-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,v-1)),this.nodes.push(null)),this.pos>v&&this.nodes.push(new HeightMapText(this.pos-v,-1)),this.writtenTo=this.pos}blankContent(v,S){let R=new HeightMapGap(S-v);return this.oracle.doc.lineAt(v).to==S&&(R.flags|=4),R}ensureLine(){this.enterLine();let v=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(v instanceof HeightMapText)return v;let S=new HeightMapText(0,-1);return this.nodes.push(S),S}addBlock(v){this.enterLine();let S=v.deco;S&&S.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(v),this.writtenTo=this.pos=this.pos+v.length,S&&S.endSide>0&&(this.covering=v)}addLineDeco(v,S,R){let T=this.ensureLine();T.length+=R,T.collapsed+=R,T.widgetHeight=Math.max(T.widgetHeight,v),T.breaks+=S,this.writtenTo=this.pos=this.pos+R}finish(v){let S=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(S instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||S==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let R=v;for(let T of this.nodes)T instanceof HeightMapText&&T.updateHeight(this.oracle,R),R+=T?T.length:1;return this.nodes}static build(v,S,R,T){let A=new NodeBuilder(R,v);return RangeSet.spans(S,R,T,A,0),A.finish(R)}}function heightRelevantDecoChanges(_,v,S){let R=new DecorationComparator;return RangeSet.compare(_,v,S,R,0),R.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(v,S,R,T){(v<S||R&&R.heightRelevant||T&&T.heightRelevant)&&addRange(v,S,this.changes,5)}}function visiblePixelRange(_,v){let S=_.getBoundingClientRect(),R=_.ownerDocument,T=R.defaultView||window,A=Math.max(0,S.left),k=Math.min(T.innerWidth,S.right),M=Math.max(0,S.top),P=Math.min(T.innerHeight,S.bottom);for(let D=_.parentNode;D&&D!=R.body;)if(D.nodeType==1){let L=D,q=window.getComputedStyle(L);if((L.scrollHeight>L.clientHeight||L.scrollWidth>L.clientWidth)&&q.overflow!="visible"){let B=L.getBoundingClientRect();A=Math.max(A,B.left),k=Math.min(k,B.right),M=Math.max(M,B.top),P=Math.min(D==_.parentNode?T.innerHeight:P,B.bottom)}D=q.position=="absolute"||q.position=="fixed"?L.offsetParent:L.parentNode}else if(D.nodeType==11)D=D.host;else break;return{left:A-S.left,right:Math.max(A,k)-S.left,top:M-(S.top+v),bottom:Math.max(M,P)-(S.top+v)}}function inWindow(_){let v=_.getBoundingClientRect(),S=_.ownerDocument.defaultView||window;return v.left<S.innerWidth&&v.right>0&&v.top<S.innerHeight&&v.bottom>0}function fullPixelRange(_,v){let S=_.getBoundingClientRect();return{left:0,right:S.right-S.left,top:v,bottom:S.bottom-(S.top+v)}}class LineGap{constructor(v,S,R,T){this.from=v,this.to=S,this.size=R,this.displaySize=T}static same(v,S){if(v.length!=S.length)return!1;for(let R=0;R<v.length;R++){let T=v[R],A=S[R];if(T.from!=A.from||T.to!=A.to||T.size!=A.size)return!1}return!0}draw(v,S){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(S?v.scaleY:v.scaleX),S)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(v,S){super(),this.size=v,this.vertical=S}eq(v){return v.size==this.size&&v.vertical==this.vertical}toDOM(){let v=document.createElement("div");return this.vertical?v.style.height=this.size+"px":(v.style.width=this.size+"px",v.style.height="2px",v.style.display="inline-block"),v}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(v){this.state=v,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let S=v.facet(contentAttributes).some(R=>typeof R!="function"&&R.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(S),this.stateDeco=v.facet(decorations).filter(R=>typeof R!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(v.doc),[new ChangedRange(0,0,0,v.doc.length)]);for(let R=0;R<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());R++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(R=>R.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let v=[this.viewport],{main:S}=this.state.selection;for(let R=0;R<=1;R++){let T=R?S.head:S.anchor;if(!v.some(({from:A,to:k})=>T>=A&&T<=k)){let{from:A,to:k}=this.lineBlockAt(T);v.push(new Viewport$1(A,k))}}return this.viewports=v.sort((R,T)=>R.from-T.from),this.updateScaler()}updateScaler(){let v=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),v.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,v=>{this.viewportLines.push(scaleBlock(v,this.scaler))})}update(v,S=null){this.state=v.state;let R=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(L=>typeof L!="function");let T=v.changedRanges,A=ChangedRange.extendWithRanges(T,heightRelevantDecoChanges(R,this.stateDeco,v?v.changes:ChangeSet.empty(this.state.doc.length))),k=this.heightMap.height,M=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,v.startState.doc,this.heightOracle.setDoc(this.state.doc),A),(this.heightMap.height!=k||heightChangeFlag)&&(v.flags|=2),M?(this.scrollAnchorPos=v.changes.mapPos(M.from,-1),this.scrollAnchorHeight=M.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=k);let P=A.length?this.mapViewport(this.viewport,v.changes):this.viewport;(S&&(S.range.head<P.from||S.range.head>P.to)||!this.viewportIsAppropriate(P))&&(P=this.getViewport(0,S));let D=P.from!=this.viewport.from||P.to!=this.viewport.to;this.viewport=P,v.flags|=this.updateForViewport(),(D||!v.changes.empty||v.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,v.changes))),v.flags|=this.computeVisibleRanges(v.changes),S&&(this.scrollTarget=S),!this.mustEnforceCursorAssoc&&v.selectionSet&&v.view.lineWrapping&&v.state.selection.main.empty&&v.state.selection.main.assoc&&!v.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(v){let S=v.contentDOM,R=window.getComputedStyle(S),T=this.heightOracle,A=R.whiteSpace;this.defaultTextDirection=R.direction=="rtl"?Direction.RTL:Direction.LTR;let k=this.heightOracle.mustRefreshForWrapping(A),M=S.getBoundingClientRect(),P=k||this.mustMeasureContent||this.contentDOMHeight!=M.height;this.contentDOMHeight=M.height,this.mustMeasureContent=!1;let D=0,L=0;if(M.width&&M.height){let{scaleX:X,scaleY:ee}=getScale$1(S,M);(X>.005&&Math.abs(this.scaleX-X)>.005||ee>.005&&Math.abs(this.scaleY-ee)>.005)&&(this.scaleX=X,this.scaleY=ee,D|=16,k=P=!0)}let q=(parseInt(R.paddingTop)||0)*this.scaleY,B=(parseInt(R.paddingBottom)||0)*this.scaleY;(this.paddingTop!=q||this.paddingBottom!=B)&&(this.paddingTop=q,this.paddingBottom=B,D|=18),this.editorWidth!=v.scrollDOM.clientWidth&&(T.lineWrapping&&(P=!0),this.editorWidth=v.scrollDOM.clientWidth,D|=16);let F=v.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=F&&(this.scrollAnchorHeight=-1,this.scrollTop=F),this.scrolledToBottom=isScrolledToBottom(v.scrollDOM);let j=(this.printing?fullPixelRange:visiblePixelRange)(S,this.paddingTop),z=j.top-this.pixelViewport.top,V=j.bottom-this.pixelViewport.bottom;this.pixelViewport=j;let G=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(G!=this.inView&&(this.inView=G,G&&(P=!0)),!this.inView&&!this.scrollTarget&&!inWindow(v.dom))return 0;let W=M.width;if((this.contentDOMWidth!=W||this.editorHeight!=v.scrollDOM.clientHeight)&&(this.contentDOMWidth=M.width,this.editorHeight=v.scrollDOM.clientHeight,D|=16),P){let X=v.docView.measureVisibleLineHeights(this.viewport);if(T.mustRefreshForHeights(X)&&(k=!0),k||T.lineWrapping&&Math.abs(W-this.contentDOMWidth)>T.charWidth){let{lineHeight:ee,charWidth:re,textHeight:Q}=v.docView.measureTextSize();k=ee>0&&T.refresh(A,ee,re,Q,Math.max(5,W/re),X),k&&(v.docView.minWidth=0,D|=16)}z>0&&V>0?L=Math.max(z,V):z<0&&V<0&&(L=Math.min(z,V)),clearHeightChangeFlag();for(let ee of this.viewports){let re=ee.from==this.viewport.from?X:v.docView.measureVisibleLineHeights(ee);this.heightMap=(k?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,v.state.doc.length)]):this.heightMap).updateHeight(T,0,k,new MeasuredHeights(ee.from,re))}heightChangeFlag&&(D|=2)}let Y=!this.viewportIsAppropriate(this.viewport,L)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Y&&(D&2&&(D|=this.updateScaler()),this.viewport=this.getViewport(L,this.scrollTarget),D|=this.updateForViewport()),(D&2||Y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(k?[]:this.lineGaps,v)),D|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,v.docView.enforceCursorAssoc()),D}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(v,S){let R=.5-Math.max(-.5,Math.min(.5,v/1e3/2)),T=this.heightMap,A=this.heightOracle,{visibleTop:k,visibleBottom:M}=this,P=new Viewport$1(T.lineAt(k-R*1e3,QueryType$1.ByHeight,A,0,0).from,T.lineAt(M+(1-R)*1e3,QueryType$1.ByHeight,A,0,0).to);if(S){let{head:D}=S.range;if(D<P.from||D>P.to){let L=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),q=T.lineAt(D,QueryType$1.ByPos,A,0,0),B;S.y=="center"?B=(q.top+q.bottom)/2-L/2:S.y=="start"||S.y=="nearest"&&D<P.from?B=q.top:B=q.bottom-L,P=new Viewport$1(T.lineAt(B-1e3/2,QueryType$1.ByHeight,A,0,0).from,T.lineAt(B+L+1e3/2,QueryType$1.ByHeight,A,0,0).to)}}return P}mapViewport(v,S){let R=S.mapPos(v.from,-1),T=S.mapPos(v.to,1);return new Viewport$1(this.heightMap.lineAt(R,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(T,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:v,to:S},R=0){if(!this.inView)return!0;let{top:T}=this.heightMap.lineAt(v,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:A}=this.heightMap.lineAt(S,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:k,visibleBottom:M}=this;return(v==0||T<=k-Math.max(10,Math.min(-R,250)))&&(S==this.state.doc.length||A>=M+Math.max(10,Math.min(R,250)))&&T>k-2*1e3&&A<M+2*1e3}mapLineGaps(v,S){if(!v.length||S.empty)return v;let R=[];for(let T of v)S.touchesRange(T.from,T.to)||R.push(new LineGap(S.mapPos(T.from),S.mapPos(T.to),T.size,T.displaySize));return R}ensureLineGaps(v,S){let R=this.heightOracle.lineWrapping,T=R?1e4:2e3,A=T>>1,k=T<<1;if(this.defaultTextDirection!=Direction.LTR&&!R)return[];let M=[],P=(L,q,B,F)=>{if(q-L<A)return;let j=this.state.selection.main,z=[j.from];j.empty||z.push(j.to);for(let G of z)if(G>L&&G<q){P(L,G-10,B,F),P(G+10,q,B,F);return}let V=find(v,G=>G.from>=B.from&&G.to<=B.to&&Math.abs(G.from-L)<A&&Math.abs(G.to-q)<A&&!z.some(W=>G.from<W&&G.to>W));if(!V){if(q<B.to&&S&&R&&S.visibleRanges.some(Y=>Y.from<=q&&Y.to>=q)){let Y=S.moveToLineBoundary(EditorSelection.cursor(q),!1,!0).head;Y>L&&(q=Y)}let G=this.gapSize(B,L,q,F),W=R||G<2e6?G:2e6;V=new LineGap(L,q,G,W)}M.push(V)},D=L=>{if(L.length<k||L.type!=BlockType.Text)return;let q=lineStructure(L.from,L.to,this.stateDeco);if(q.total<k)return;let B=this.scrollTarget?this.scrollTarget.range.head:null,F,j;if(R){let z=T/this.heightOracle.lineLength*this.heightOracle.lineHeight,V,G;if(B!=null){let W=findFraction(q,B),Y=((this.visibleBottom-this.visibleTop)/2+z)/L.height;V=W-Y,G=W+Y}else V=(this.visibleTop-L.top-z)/L.height,G=(this.visibleBottom-L.top+z)/L.height;F=findPosition(q,V),j=findPosition(q,G)}else{let z=q.total*this.heightOracle.charWidth,V=T*this.heightOracle.charWidth,G=0;if(z>2e6)for(let re of v)re.from>=L.from&&re.from<L.to&&re.size!=re.displaySize&&re.from*this.heightOracle.charWidth+G<this.pixelViewport.left&&(G=re.size-re.displaySize);let W=this.pixelViewport.left+G,Y=this.pixelViewport.right+G,X,ee;if(B!=null){let re=findFraction(q,B),Q=((Y-W)/2+V)/z;X=re-Q,ee=re+Q}else X=(W-V)/z,ee=(Y+V)/z;F=findPosition(q,X),j=findPosition(q,ee)}F>L.from&&P(L.from,F,L,q),j<L.to&&P(j,L.to,L,q)};for(let L of this.viewportLines)Array.isArray(L.type)?L.type.forEach(D):D(L);return M}gapSize(v,S,R,T){let A=findFraction(T,R)-findFraction(T,S);return this.heightOracle.lineWrapping?v.height*A:T.total*this.heightOracle.charWidth*A}updateLineGaps(v){LineGap.same(v,this.lineGaps)||(this.lineGaps=v,this.lineGapDeco=Decoration.set(v.map(S=>S.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(v){let S=this.stateDeco;this.lineGaps.length&&(S=S.concat(this.lineGapDeco));let R=[];RangeSet.spans(S,this.viewport.from,this.viewport.to,{span(A,k){R.push({from:A,to:k})},point(){}},20);let T=0;if(R.length!=this.visibleRanges.length)T=12;else for(let A=0;A<R.length&&!(T&8);A++){let k=this.visibleRanges[A],M=R[A];(k.from!=M.from||k.to!=M.to)&&(T|=4,v&&v.mapPos(k.from,-1)==M.from&&v.mapPos(k.to,1)==M.to||(T|=8))}return this.visibleRanges=R,T}lineBlockAt(v){return v>=this.viewport.from&&v<=this.viewport.to&&this.viewportLines.find(S=>S.from<=v&&S.to>=v)||scaleBlock(this.heightMap.lineAt(v,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(v){return v>=this.viewportLines[0].top&&v<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(S=>S.top<=v&&S.bottom>=v)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(v),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(v){let S=this.lineBlockAtHeight(v+8);return S.from>=this.viewport.from||this.viewportLines[0].top-v>200?S:this.viewportLines[0]}elementAtHeight(v){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(v),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Viewport$1=class{constructor(v,S){this.from=v,this.to=S}};function lineStructure(_,v,S){let R=[],T=_,A=0;return RangeSet.spans(S,_,v,{span(){},point(k,M){k>T&&(R.push({from:T,to:k}),A+=k-T),T=M}},20),T<v&&(R.push({from:T,to:v}),A+=v-T),{total:A,ranges:R}}function findPosition({total:_,ranges:v},S){if(S<=0)return v[0].from;if(S>=1)return v[v.length-1].to;let R=Math.floor(_*S);for(let T=0;;T++){let{from:A,to:k}=v[T],M=k-A;if(R<=M)return A+R;R-=M}}function findFraction(_,v){let S=0;for(let{from:R,to:T}of _.ranges){if(v<=T){S+=v-R;break}S+=T-R}return S/_.total}function find(_,v){for(let S of _)if(v(S))return S}const IdScaler={toDOM(_){return _},fromDOM(_){return _},scale:1,eq(_){return _==this}};class BigScaler{constructor(v,S,R){let T=0,A=0,k=0;this.viewports=R.map(({from:M,to:P})=>{let D=S.lineAt(M,QueryType$1.ByPos,v,0,0).top,L=S.lineAt(P,QueryType$1.ByPos,v,0,0).bottom;return T+=L-D,{from:M,to:P,top:D,bottom:L,domTop:0,domBottom:0}}),this.scale=(7e6-T)/(S.height-T);for(let M of this.viewports)M.domTop=k+(M.top-A)*this.scale,k=M.domBottom=M.domTop+(M.bottom-M.top),A=M.bottom}toDOM(v){for(let S=0,R=0,T=0;;S++){let A=S<this.viewports.length?this.viewports[S]:null;if(!A||v<A.top)return T+(v-R)*this.scale;if(v<=A.bottom)return A.domTop+(v-A.top);R=A.bottom,T=A.domBottom}}fromDOM(v){for(let S=0,R=0,T=0;;S++){let A=S<this.viewports.length?this.viewports[S]:null;if(!A||v<A.domTop)return R+(v-T)/this.scale;if(v<=A.domBottom)return A.top+(v-A.domTop);R=A.bottom,T=A.domBottom}}eq(v){return v instanceof BigScaler?this.scale==v.scale&&this.viewports.length==v.viewports.length&&this.viewports.every((S,R)=>S.from==v.viewports[R].from&&S.to==v.viewports[R].to):!1}}function scaleBlock(_,v){if(v.scale==1)return _;let S=v.toDOM(_.top),R=v.toDOM(_.bottom);return new BlockInfo(_.from,_.length,S,R-S,Array.isArray(_._content)?_._content.map(T=>scaleBlock(T,v)):_._content)}const theme=Facet.define({combine:_=>_.join(" ")}),darkTheme=Facet.define({combine:_=>_.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(_,v,S){return new StyleModule(v,{finish(R){return/&/.test(R)?R.replace(/&\w*/,T=>{if(T=="&")return _;if(!S||!S[T])throw new RangeError(`Unsupported selector: ${T}`);return S[T]}):_+" "+R}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(v){this.view=v,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=v.contentDOM,this.observer=new MutationObserver(S=>{for(let R of S)this.queue.push(R);(browser.ie&&browser.ie_version<=11||browser.ios&&v.composing)&&S.some(R=>R.type=="childList"&&R.removedNodes.length||R.type=="characterData"&&R.oldValue.length>R.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&browser.android&&v.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(v),v.state.facet(editable)&&(v.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=S=>{this.queue.push({target:S.target,type:"characterData",oldValue:S.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var S;((S=this.view.docView)===null||S===void 0?void 0:S.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(v.scrollDOM)),this.addWindowListeners(this.win=v.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(S=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),S.length>0&&S[S.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(S=>{S.length>0&&S[S.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(v){this.view.inputState.runHandlers("scroll",v),this.intersecting&&this.view.measure()}onScroll(v){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(v)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(v){(v.type=="change"||!v.type)&&!v.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(v){if(this.gapIntersection&&(v.length!=this.gaps.length||this.gaps.some((S,R)=>S!=v[R]))){this.gapIntersection.disconnect();for(let S of v)this.gapIntersection.observe(S);this.gaps=v}}onSelectionChange(v){let S=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:R}=this,T=this.selectionRange;if(R.state.facet(editable)?R.root.activeElement!=this.dom:!hasSelection(this.dom,T))return;let A=T.anchorNode&&R.docView.nearest(T.anchorNode);if(A&&A.ignoreEvent(v)){S||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!R.state.selection.main.empty&&T.focusNode&&isEquivalentPosition(T.focusNode,T.focusOffset,T.anchorNode,T.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:v}=this,S=getSelection(v.root);if(!S)return!1;let R=browser.safari&&v.root.nodeType==11&&v.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,S)||S;if(!R||this.selectionRange.eq(R))return!1;let T=hasSelection(this.dom,R);return T&&!this.selectionChanged&&v.inputState.lastFocusTime>Date.now()-200&&v.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,R)?(this.view.inputState.lastFocusTime=0,v.docView.updateSelection(),!1):(this.selectionRange.setRange(R),T&&(this.selectionChanged=!0),!0)}setSelectionRange(v,S){this.selectionRange.set(v.node,v.offset,S.node,S.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let v=0,S=null;for(let R=this.dom;R;)if(R.nodeType==1)!S&&v<this.scrollTargets.length&&this.scrollTargets[v]==R?v++:S||(S=this.scrollTargets.slice(0,v)),S&&S.push(R),R=R.assignedSlot||R.parentNode;else if(R.nodeType==11)R=R.host;else break;if(v<this.scrollTargets.length&&!S&&(S=this.scrollTargets.slice(0,v)),S){for(let R of this.scrollTargets)R.removeEventListener("scroll",this.onScroll);for(let R of this.scrollTargets=S)R.addEventListener("scroll",this.onScroll)}}ignore(v){if(!this.active)return v();try{return this.stop(),v()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(v,S){var R;if(!this.delayedAndroidKey){let T=()=>{let A=this.delayedAndroidKey;A&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=A.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&A.force&&dispatchKey(this.dom,A.key,A.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(T)}(!this.delayedAndroidKey||v=="Enter")&&(this.delayedAndroidKey={key:v,keyCode:S,force:this.lastChange<Date.now()-50||!!(!((R=this.delayedAndroidKey)===null||R===void 0)&&R.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let v of this.observer.takeRecords())this.queue.push(v);return this.queue}processRecords(){let v=this.pendingRecords();v.length&&(this.queue=[]);let S=-1,R=-1,T=!1;for(let A of v){let k=this.readMutation(A);k&&(k.typeOver&&(T=!0),S==-1?{from:S,to:R}=k:(S=Math.min(k.from,S),R=Math.max(k.to,R)))}return{from:S,to:R,typeOver:T}}readChange(){let{from:v,to:S,typeOver:R}=this.processRecords(),T=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(v<0&&!T)return null;v>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let A=new DOMChange(this.view,v,S,R);return this.view.docView.domChanged={newSel:A.newSel?A.newSel.main:null},A}flush(v=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;v&&this.readSelectionRange();let S=this.readChange();if(!S)return this.view.requestMeasure(),!1;let R=this.view.state,T=applyDOMChange(this.view,S);return this.view.state==R&&(S.domChanged||S.newSel&&!S.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),T}readMutation(v){let S=this.view.docView.nearest(v.target);if(!S||S.ignoreMutation(v))return null;if(S.markDirty(v.type=="attributes"),v.type=="attributes"&&(S.flags|=4),v.type=="childList"){let R=findChild(S,v.previousSibling||v.target.previousSibling,-1),T=findChild(S,v.nextSibling||v.target.nextSibling,1);return{from:R?S.posAfter(R):S.posAtStart,to:T?S.posBefore(T):S.posAtEnd,typeOver:!1}}else return v.type=="characterData"?{from:S.posAtStart,to:S.posAtEnd,typeOver:v.target.nodeValue==v.oldValue}:null}setWindow(v){v!=this.win&&(this.removeWindowListeners(this.win),this.win=v,this.addWindowListeners(this.win))}addWindowListeners(v){v.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):v.addEventListener("beforeprint",this.onPrint),v.addEventListener("scroll",this.onScroll),v.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(v){v.removeEventListener("scroll",this.onScroll),v.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):v.removeEventListener("beforeprint",this.onPrint),v.document.removeEventListener("selectionchange",this.onSelectionChange)}update(v){this.editContext&&(this.editContext.update(v),v.startState.facet(editable)!=v.state.facet(editable)&&(v.view.contentDOM.editContext=v.state.facet(editable)?this.editContext.editContext:null))}destroy(){var v,S,R;this.stop(),(v=this.intersection)===null||v===void 0||v.disconnect(),(S=this.gapIntersection)===null||S===void 0||S.disconnect(),(R=this.resizeScroll)===null||R===void 0||R.disconnect();for(let T of this.scrollTargets)T.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(_,v,S){for(;v;){let R=ContentView.get(v);if(R&&R.parent==_)return R;let T=v.parentNode;v=T!=_.dom?T:S>0?v.nextSibling:v.previousSibling}return null}function buildSelectionRangeFromRange(_,v){let S=v.startContainer,R=v.startOffset,T=v.endContainer,A=v.endOffset,k=_.docView.domAtPos(_.state.selection.main.anchor);return isEquivalentPosition(k.node,k.offset,T,A)&&([S,R,T,A]=[T,A,S,R]),{anchorNode:S,anchorOffset:R,focusNode:T,focusOffset:A}}function safariSelectionRangeHack(_,v){if(v.getComposedRanges){let T=v.getComposedRanges(_.root)[0];if(T)return buildSelectionRangeFromRange(_,T)}let S=null;function R(T){T.preventDefault(),T.stopImmediatePropagation(),S=T.getTargetRanges()[0]}return _.contentDOM.addEventListener("beforeinput",R,!0),_.dom.ownerDocument.execCommand("indent"),_.contentDOM.removeEventListener("beforeinput",R,!0),S?buildSelectionRangeFromRange(_,S):null}class EditContextManager{constructor(v){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(v.state);let S=this.editContext=new window.EditContext({text:v.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,v.state.selection.main.anchor))),selectionEnd:this.toContextPos(v.state.selection.main.head)});this.handlers.textupdate=R=>{let T=v.state.selection.main,{anchor:A,head:k}=T,M=this.toEditorPos(R.updateRangeStart),P=this.toEditorPos(R.updateRangeEnd);v.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:R.updateRangeStart,editorBase:M,drifted:!1});let D=P-M>R.text.length;M==this.from&&A<this.from?M=A:P==this.to&&A>this.to&&(P=A);let L=findDiff(v.state.sliceDoc(M,P),R.text,(D?T.from:T.to)-M,D?"end":null);if(!L){let B=EditorSelection.single(this.toEditorPos(R.selectionStart),this.toEditorPos(R.selectionEnd));B.main.eq(T)||v.dispatch({selection:B,userEvent:"select"});return}let q={from:L.from+M,to:L.toA+M,insert:Text.of(R.text.slice(L.from,L.toB).split(`
`))};if((browser.mac||browser.android)&&q.from==k-1&&/^\. ?$/.test(R.text)&&v.contentDOM.getAttribute("autocorrect")=="off"&&(q={from:M,to:P,insert:Text.of([R.text.replace("."," ")])}),this.pendingContextChange=q,!v.state.readOnly){let B=this.to-this.from+(q.to-q.from+q.insert.length);applyDOMChangeInner(v,q,EditorSelection.single(this.toEditorPos(R.selectionStart,B),this.toEditorPos(R.selectionEnd,B)))}this.pendingContextChange&&(this.revertPending(v.state),this.setSelection(v.state)),q.from<q.to&&!q.insert.length&&v.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(S.text.slice(Math.max(0,R.updateRangeStart-1),Math.min(S.text.length,R.updateRangeStart+1)))&&this.handlers.compositionend(R)},this.handlers.characterboundsupdate=R=>{let T=[],A=null;for(let k=this.toEditorPos(R.rangeStart),M=this.toEditorPos(R.rangeEnd);k<M;k++){let P=v.coordsForChar(k);A=P&&new DOMRect(P.left,P.top,P.right-P.left,P.bottom-P.top)||A||new DOMRect,T.push(A)}S.updateCharacterBounds(R.rangeStart,T)},this.handlers.textformatupdate=R=>{let T=[];for(let A of R.getTextFormats()){let k=A.underlineStyle,M=A.underlineThickness;if(!/none/i.test(k)&&!/none/i.test(M)){let P=this.toEditorPos(A.rangeStart),D=this.toEditorPos(A.rangeEnd);if(P<D){let L=`text-decoration: underline ${/^[a-z]/.test(k)?k+" ":k=="Dashed"?"dashed ":k=="Squiggle"?"wavy ":""}${/thin/i.test(M)?1:2}px`;T.push(Decoration.mark({attributes:{style:L}}).range(P,D))}}}v.dispatch({effects:setEditContextFormatting.of(Decoration.set(T))})},this.handlers.compositionstart=()=>{v.inputState.composing<0&&(v.inputState.composing=0,v.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(v.inputState.composing=-1,v.inputState.compositionFirstChange=null,this.composing){let{drifted:R}=this.composing;this.composing=null,R&&this.reset(v.state)}};for(let R in this.handlers)S.addEventListener(R,this.handlers[R]);this.measureReq={read:R=>{this.editContext.updateControlBounds(R.contentDOM.getBoundingClientRect());let T=getSelection(R.root);T&&T.rangeCount&&this.editContext.updateSelectionBounds(T.getRangeAt(0).getBoundingClientRect())}}}applyEdits(v){let S=0,R=!1,T=this.pendingContextChange;return v.changes.iterChanges((A,k,M,P,D)=>{if(R)return;let L=D.length-(k-A);if(T&&k>=T.to)if(T.from==A&&T.to==k&&T.insert.eq(D)){T=this.pendingContextChange=null,S+=L,this.to+=L;return}else T=null,this.revertPending(v.state);if(A+=S,k+=S,k<=this.from)this.from+=L,this.to+=L;else if(A<this.to){if(A<this.from||k>this.to||this.to-this.from+D.length>3e4){R=!0;return}this.editContext.updateText(this.toContextPos(A),this.toContextPos(k),D.toString()),this.to+=L}S+=L}),T&&!R&&this.revertPending(v.state),!R}update(v){let S=this.pendingContextChange,R=v.startState.selection.main;this.composing&&(this.composing.drifted||!v.changes.touchesRange(R.from,R.to)&&v.transactions.some(T=>!T.isUserEvent("input.type")&&T.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=v.changes.mapPos(this.composing.editorBase)):!this.applyEdits(v)||!this.rangeIsValid(v.state)?(this.pendingContextChange=null,this.reset(v.state)):(v.docChanged||v.selectionSet||S)&&this.setSelection(v.state),(v.geometryChanged||v.docChanged||v.selectionSet)&&v.view.requestMeasure(this.measureReq)}resetRange(v){let{head:S}=v.selection.main;this.from=Math.max(0,S-1e4),this.to=Math.min(v.doc.length,S+1e4)}reset(v){this.resetRange(v),this.editContext.updateText(0,this.editContext.text.length,v.doc.sliceString(this.from,this.to)),this.setSelection(v)}revertPending(v){let S=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(S.from),this.toContextPos(S.from+S.insert.length),v.doc.sliceString(S.from,S.to))}setSelection(v){let{main:S}=v.selection,R=this.toContextPos(Math.max(this.from,Math.min(this.to,S.anchor))),T=this.toContextPos(S.head);(this.editContext.selectionStart!=R||this.editContext.selectionEnd!=T)&&this.editContext.updateSelection(R,T)}rangeIsValid(v){let{head:S}=v.selection.main;return!(this.from>0&&S-this.from<500||this.to<v.doc.length&&this.to-S<500||this.to-this.from>1e4*3)}toEditorPos(v,S=this.to-this.from){v=Math.min(v,S);let R=this.composing;return R&&R.drifted?R.editorBase+(v-R.contextBase):v+this.from}toContextPos(v){let S=this.composing;return S&&S.drifted?S.contextBase+(v-S.editorBase):v-this.from}destroy(){for(let v in this.handlers)this.editContext.removeEventListener(v,this.handlers[v])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(v={}){var S;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),v.parent&&v.parent.appendChild(this.dom);let{dispatch:R}=v;this.dispatchTransactions=v.dispatchTransactions||R&&(T=>T.forEach(A=>R(A,this)))||(T=>this.update(T)),this.dispatch=this.dispatch.bind(this),this._root=v.root||getRoot(v.parent)||document,this.viewState=new ViewState(v.state||EditorState.create(v)),v.scrollTo&&v.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=v.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(T=>new PluginInstance(T));for(let T of this.plugins)T.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((S=document.fonts)===null||S===void 0)&&S.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...v){let S=v.length==1&&v[0]instanceof Transaction?v:v.length==1&&Array.isArray(v[0])?v[0]:[this.state.update(...v)];this.dispatchTransactions(S,this)}update(v){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let S=!1,R=!1,T,A=this.state;for(let B of v){if(B.startState!=A)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");A=B.state}if(this.destroyed){this.viewState.state=A;return}let k=this.hasFocus,M=0,P=null;v.some(B=>B.annotation(isFocusChange))?(this.inputState.notifiedFocused=k,M=1):k!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=k,P=focusChangeTransaction(A,k),P||(M=1));let D=this.observer.delayedAndroidKey,L=null;if(D?(this.observer.clearDelayedAndroidKey(),L=this.observer.readChange(),(L&&!this.state.doc.eq(A.doc)||!this.state.selection.eq(A.selection))&&(L=null)):this.observer.clear(),A.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(A);T=ViewUpdate.create(this,A,v),T.flags|=M;let q=this.viewState.scrollTarget;try{this.updateState=2;for(let B of v){if(q&&(q=q.map(B.changes)),B.scrollIntoView){let{main:F}=B.state.selection;q=new ScrollTarget(F.empty?F:EditorSelection.cursor(F.head,F.head>F.anchor?-1:1))}for(let F of B.effects)F.is(scrollIntoView$1)&&(q=F.value.clip(this.state))}this.viewState.update(T,q),this.bidiCache=CachedOrder.update(this.bidiCache,T.changes),T.empty||(this.updatePlugins(T),this.inputState.update(T)),S=this.docView.update(T),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),R=this.updateAttrs(),this.showAnnouncements(v),this.docView.updateSelection(S,v.some(B=>B.isUserEvent("select.pointer")))}finally{this.updateState=0}if(T.startState.facet(theme)!=T.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(S||R||q||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),S&&this.docViewUpdate(),!T.empty)for(let B of this.state.facet(updateListener))try{B(T)}catch(F){logException(this.state,F,"update listener")}(P||L)&&Promise.resolve().then(()=>{P&&this.state==P.startState&&this.dispatch(P),L&&!applyDOMChange(this,L)&&D.force&&dispatchKey(this.contentDOM,D.key,D.keyCode)})}setState(v){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=v;return}this.updateState=2;let S=this.hasFocus;try{for(let R of this.plugins)R.destroy(this);this.viewState=new ViewState(v),this.plugins=v.facet(viewPlugin).map(R=>new PluginInstance(R)),this.pluginMap.clear();for(let R of this.plugins)R.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}S&&this.focus(),this.requestMeasure()}updatePlugins(v){let S=v.startState.facet(viewPlugin),R=v.state.facet(viewPlugin);if(S!=R){let T=[];for(let A of R){let k=S.indexOf(A);if(k<0)T.push(new PluginInstance(A));else{let M=this.plugins[k];M.mustUpdate=v,T.push(M)}}for(let A of this.plugins)A.mustUpdate!=v&&A.destroy(this);this.plugins=T,this.pluginMap.clear()}else for(let T of this.plugins)T.mustUpdate=v;for(let T=0;T<this.plugins.length;T++)this.plugins[T].update(this);S!=R&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let v of this.plugins){let S=v.value;if(S&&S.docViewUpdate)try{S.docViewUpdate(this)}catch(R){logException(this.state,R,"doc view update listener")}}}measure(v=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,v&&this.observer.forceFlush();let S=null,R=this.scrollDOM,T=R.scrollTop*this.scaleY,{scrollAnchorPos:A,scrollAnchorHeight:k}=this.viewState;Math.abs(T-this.viewState.scrollTop)>1&&(k=-1),this.viewState.scrollAnchorHeight=-1;try{for(let M=0;;M++){if(k<0)if(isScrolledToBottom(R))A=-1,k=this.viewState.heightMap.height;else{let F=this.viewState.scrollAnchorAt(T);A=F.from,k=F.top}this.updateState=1;let P=this.viewState.measure(this);if(!P&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(M>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let D=[];P&4||([this.measureRequests,D]=[D,this.measureRequests]);let L=D.map(F=>{try{return F.read(this)}catch(j){return logException(this.state,j),BadMeasure}}),q=ViewUpdate.create(this,this.state,[]),B=!1;q.flags|=P,S?S.flags|=P:S=q,this.updateState=2,q.empty||(this.updatePlugins(q),this.inputState.update(q),this.updateAttrs(),B=this.docView.update(q),B&&this.docViewUpdate());for(let F=0;F<D.length;F++)if(L[F]!=BadMeasure)try{let j=D[F];j.write&&j.write(L[F],this)}catch(j){logException(this.state,j)}if(B&&this.docView.updateSelection(!0),!q.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,k=-1;continue}else{let j=(A<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(A).top)-k;if(j>1||j<-1){T=T+j,R.scrollTop=T/this.scaleY,k=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(S&&!S.empty)for(let M of this.state.facet(updateListener))M(S)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let v=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),S={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(S["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,S);let R=this.observer.ignore(()=>{let T=updateAttrs(this.contentDOM,this.contentAttrs,S),A=updateAttrs(this.dom,this.editorAttrs,v);return T||A});return this.editorAttrs=v,this.contentAttrs=S,R}showAnnouncements(v){let S=!0;for(let R of v)for(let T of R.effects)if(T.is(EditorView.announce)){S&&(this.announceDOM.textContent=""),S=!1;let A=this.announceDOM.appendChild(document.createElement("div"));A.textContent=T.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let v=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),v?{nonce:v}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(v){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),v){if(this.measureRequests.indexOf(v)>-1)return;if(v.key!=null){for(let S=0;S<this.measureRequests.length;S++)if(this.measureRequests[S].key===v.key){this.measureRequests[S]=v;return}}this.measureRequests.push(v)}}plugin(v){let S=this.pluginMap.get(v);return(S===void 0||S&&S.plugin!=v)&&this.pluginMap.set(v,S=this.plugins.find(R=>R.plugin==v)||null),S&&S.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(v){return this.readMeasured(),this.viewState.elementAtHeight(v)}lineBlockAtHeight(v){return this.readMeasured(),this.viewState.lineBlockAtHeight(v)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(v){return this.viewState.lineBlockAt(v)}get contentHeight(){return this.viewState.contentHeight}moveByChar(v,S,R){return skipAtoms(this,v,moveByChar(this,v,S,R))}moveByGroup(v,S){return skipAtoms(this,v,moveByChar(this,v,S,R=>byGroup(this,v.head,R)))}visualLineSide(v,S){let R=this.bidiSpans(v),T=this.textDirectionAt(v.from),A=R[S?R.length-1:0];return EditorSelection.cursor(A.side(S,T)+v.from,A.forward(!S,T)?1:-1)}moveToLineBoundary(v,S,R=!0){return moveToLineBoundary(this,v,S,R)}moveVertically(v,S,R){return skipAtoms(this,v,moveVertically(this,v,S,R))}domAtPos(v){return this.docView.domAtPos(v)}posAtDOM(v,S=0){return this.docView.posFromDOM(v,S)}posAtCoords(v,S=!0){return this.readMeasured(),posAtCoords(this,v,S)}coordsAtPos(v,S=1){this.readMeasured();let R=this.docView.coordsAt(v,S);if(!R||R.left==R.right)return R;let T=this.state.doc.lineAt(v),A=this.bidiSpans(T),k=A[BidiSpan.find(A,v-T.from,-1,S)];return flattenRect(R,k.dir==Direction.LTR==S>0)}coordsForChar(v){return this.readMeasured(),this.docView.coordsForChar(v)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(v){return!this.state.facet(perLineTextDirection)||v<this.viewport.from||v>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(v))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(v){if(v.length>MaxBidiLine)return trivialOrder(v.length);let S=this.textDirectionAt(v.from),R;for(let A of this.bidiCache)if(A.from==v.from&&A.dir==S&&(A.fresh||isolatesEq(A.isolates,R=getIsolatedRanges(this,v))))return A.order;R||(R=getIsolatedRanges(this,v));let T=computeOrder(v.text,S,R);return this.bidiCache.push(new CachedOrder(v.from,v.to,S,R,!0,T)),T}get hasFocus(){var v;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((v=this.inputState)===null||v===void 0?void 0:v.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(v){this._root!=v&&(this._root=v,this.observer.setWindow((v.nodeType==9?v:v.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let v of this.plugins)v.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(v,S={}){return scrollIntoView$1.of(new ScrollTarget(typeof v=="number"?EditorSelection.cursor(v):v,S.y,S.x,S.yMargin,S.xMargin))}scrollSnapshot(){let{scrollTop:v,scrollLeft:S}=this.scrollDOM,R=this.viewState.scrollAnchorAt(v);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(R.from),"start","start",R.top-v,S,!0))}setTabFocusMode(v){v==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof v=="boolean"?this.inputState.tabFocusMode=v?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+v)}static domEventHandlers(v){return ViewPlugin.define(()=>({}),{eventHandlers:v})}static domEventObservers(v){return ViewPlugin.define(()=>({}),{eventObservers:v})}static theme(v,S){let R=StyleModule.newName(),T=[theme.of(R),styleModule.of(buildTheme(`.${R}`,v))];return S&&S.dark&&T.push(darkTheme.of(!0)),T}static baseTheme(v){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,v,lightDarkIDs)))}static findFromDOM(v){var S;let R=v.querySelector(".cm-content"),T=R&&ContentView.get(R)||ContentView.get(v);return((S=T?.rootView)===null||S===void 0?void 0:S.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:_=>_.length?_[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(v,S,R,T,A,k){this.from=v,this.to=S,this.dir=R,this.isolates=T,this.fresh=A,this.order=k}static update(v,S){if(S.empty&&!v.some(A=>A.fresh))return v;let R=[],T=v.length?v[v.length-1].dir:Direction.LTR;for(let A=Math.max(0,v.length-10);A<v.length;A++){let k=v[A];k.dir==T&&!S.touchesRange(k.from,k.to)&&R.push(new CachedOrder(S.mapPos(k.from,1),S.mapPos(k.to,-1),k.dir,k.isolates,!1,k.order))}return R}}function attrsFromFacet(_,v,S){for(let R=_.state.facet(v),T=R.length-1;T>=0;T--){let A=R[T],k=typeof A=="function"?A(_):A;k&&combineAttrs(k,S)}return S}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(_,v){const S=_.split(/-(?!$)/);let R=S[S.length-1];R=="Space"&&(R=" ");let T,A,k,M;for(let P=0;P<S.length-1;++P){const D=S[P];if(/^(cmd|meta|m)$/i.test(D))M=!0;else if(/^a(lt)?$/i.test(D))T=!0;else if(/^(c|ctrl|control)$/i.test(D))A=!0;else if(/^s(hift)?$/i.test(D))k=!0;else if(/^mod$/i.test(D))v=="mac"?M=!0:A=!0;else throw new Error("Unrecognized modifier name: "+D)}return T&&(R="Alt-"+R),A&&(R="Ctrl-"+R),M&&(R="Meta-"+R),k&&(R="Shift-"+R),R}function modifiers(_,v,S){return v.altKey&&(_="Alt-"+_),v.ctrlKey&&(_="Ctrl-"+_),v.metaKey&&(_="Meta-"+_),S!==!1&&v.shiftKey&&(_="Shift-"+_),_}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(_,v){return runHandlers(getKeymap(v.state),_,v,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(_){let v=_.facet(keymap),S=Keymaps.get(v);return S||Keymaps.set(v,S=buildKeymap(v.reduce((R,T)=>R.concat(T),[]))),S}function runScopeHandlers(_,v,S){return runHandlers(getKeymap(_.state),v,_,S)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(_,v=currentPlatform){let S=Object.create(null),R=Object.create(null),T=(k,M)=>{let P=R[k];if(P==null)R[k]=M;else if(P!=M)throw new Error("Key binding "+k+" is used both as a regular binding and as a multi-stroke prefix")},A=(k,M,P,D,L)=>{var q,B;let F=S[k]||(S[k]=Object.create(null)),j=M.split(/ (?!$)/).map(G=>normalizeKeyName(G,v));for(let G=1;G<j.length;G++){let W=j.slice(0,G).join(" ");T(W,!0),F[W]||(F[W]={preventDefault:!0,stopPropagation:!1,run:[Y=>{let X=storedPrefix={view:Y,prefix:W,scope:k};return setTimeout(()=>{storedPrefix==X&&(storedPrefix=null)},PrefixTimeout),!0}]})}let z=j.join(" ");T(z,!1);let V=F[z]||(F[z]={preventDefault:!1,stopPropagation:!1,run:((B=(q=F._any)===null||q===void 0?void 0:q.run)===null||B===void 0?void 0:B.slice())||[]});P&&V.run.push(P),D&&(V.preventDefault=!0),L&&(V.stopPropagation=!0)};for(let k of _){let M=k.scope?k.scope.split(" "):["editor"];if(k.any)for(let D of M){let L=S[D]||(S[D]=Object.create(null));L._any||(L._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:q}=k;for(let B in L)L[B].run.push(F=>q(F,currentKeyEvent))}let P=k[v]||k.key;if(P)for(let D of M)A(D,P,k.run,k.preventDefault,k.stopPropagation),k.shift&&A(D,"Shift-"+P,k.shift,k.preventDefault,k.stopPropagation)}return S}let currentKeyEvent=null;function runHandlers(_,v,S,R){currentKeyEvent=v;let T=keyName(v),A=codePointAt(T,0),k=codePointSize(A)==T.length&&T!=" ",M="",P=!1,D=!1,L=!1;storedPrefix&&storedPrefix.view==S&&storedPrefix.scope==R&&(M=storedPrefix.prefix+" ",modifierCodes.indexOf(v.keyCode)<0&&(D=!0,storedPrefix=null));let q=new Set,B=V=>{if(V){for(let G of V.run)if(!q.has(G)&&(q.add(G),G(S)))return V.stopPropagation&&(L=!0),!0;V.preventDefault&&(V.stopPropagation&&(L=!0),D=!0)}return!1},F=_[R],j,z;return F&&(B(F[M+modifiers(T,v,!k)])?P=!0:k&&(v.altKey||v.metaKey||v.ctrlKey)&&!(browser.windows&&v.ctrlKey&&v.altKey)&&!(browser.mac&&v.altKey&&!(v.ctrlKey||v.metaKey))&&(j=base[v.keyCode])&&j!=T?(B(F[M+modifiers(j,v,!0)])||v.shiftKey&&(z=shift$3[v.keyCode])!=T&&z!=j&&B(F[M+modifiers(z,v,!1)]))&&(P=!0):k&&v.shiftKey&&B(F[M+modifiers(T,v,!0)])&&(P=!0),!P&&B(F._any)&&(P=!0)),D&&(P=!0),P&&L&&v.stopPropagation(),currentKeyEvent=null,P}class RectangleMarker{constructor(v,S,R,T,A){this.className=v,this.left=S,this.top=R,this.width=T,this.height=A}draw(){let v=document.createElement("div");return v.className=this.className,this.adjust(v),v}update(v,S){return S.className!=this.className?!1:(this.adjust(v),!0)}adjust(v){v.style.left=this.left+"px",v.style.top=this.top+"px",this.width!=null&&(v.style.width=this.width+"px"),v.style.height=this.height+"px"}eq(v){return this.left==v.left&&this.top==v.top&&this.width==v.width&&this.height==v.height&&this.className==v.className}static forRange(v,S,R){if(R.empty){let T=v.coordsAtPos(R.head,R.assoc||1);if(!T)return[];let A=getBase(v);return[new RectangleMarker(S,T.left-A.left,T.top-A.top,null,T.bottom-T.top)]}else return rectanglesForRange(v,S,R)}}function getBase(_){let v=_.scrollDOM.getBoundingClientRect();return{left:(_.textDirection==Direction.LTR?v.left:v.right-_.scrollDOM.clientWidth*_.scaleX)-_.scrollDOM.scrollLeft*_.scaleX,top:v.top-_.scrollDOM.scrollTop*_.scaleY}}function wrappedLine(_,v,S,R){let T=_.coordsAtPos(v,S*2);if(!T)return R;let A=_.dom.getBoundingClientRect(),k=(T.top+T.bottom)/2,M=_.posAtCoords({x:A.left+1,y:k}),P=_.posAtCoords({x:A.right-1,y:k});return M==null||P==null?R:{from:Math.max(R.from,Math.min(M,P)),to:Math.min(R.to,Math.max(M,P))}}function rectanglesForRange(_,v,S){if(S.to<=_.viewport.from||S.from>=_.viewport.to)return[];let R=Math.max(S.from,_.viewport.from),T=Math.min(S.to,_.viewport.to),A=_.textDirection==Direction.LTR,k=_.contentDOM,M=k.getBoundingClientRect(),P=getBase(_),D=k.querySelector(".cm-line"),L=D&&window.getComputedStyle(D),q=M.left+(L?parseInt(L.paddingLeft)+Math.min(0,parseInt(L.textIndent)):0),B=M.right-(L?parseInt(L.paddingRight):0),F=blockAt(_,R,1),j=blockAt(_,T,-1),z=F.type==BlockType.Text?F:null,V=j.type==BlockType.Text?j:null;if(z&&(_.lineWrapping||F.widgetLineBreaks)&&(z=wrappedLine(_,R,1,z)),V&&(_.lineWrapping||j.widgetLineBreaks)&&(V=wrappedLine(_,T,-1,V)),z&&V&&z.from==V.from&&z.to==V.to)return W(Y(S.from,S.to,z));{let ee=z?Y(S.from,null,z):X(F,!1),re=V?Y(null,S.to,V):X(j,!0),Q=[];return(z||F).to<(V||j).from-(z&&V?1:0)||F.widgetLineBreaks>1&&ee.bottom+_.defaultLineHeight/2<re.top?Q.push(G(q,ee.bottom,B,re.top)):ee.bottom<re.top&&_.elementAtHeight((ee.bottom+re.top)/2).type==BlockType.Text&&(ee.bottom=re.top=(ee.bottom+re.top)/2),W(ee).concat(Q).concat(W(re))}function G(ee,re,Q,ne){return new RectangleMarker(v,ee-P.left,re-P.top,Q-ee,ne-re)}function W({top:ee,bottom:re,horizontal:Q}){let ne=[];for(let ae=0;ae<Q.length;ae+=2)ne.push(G(Q[ae],ee,Q[ae+1],re));return ne}function Y(ee,re,Q){let ne=1e9,ae=-1e9,oe=[];function se(ye,we,ge,ve,be){let ke=_.coordsAtPos(ye,ye==Q.to?-2:2),me=_.coordsAtPos(ge,ge==Q.from?2:-2);!ke||!me||(ne=Math.min(ke.top,me.top,ne),ae=Math.max(ke.bottom,me.bottom,ae),be==Direction.LTR?oe.push(A&&we?q:ke.left,A&&ve?B:me.right):oe.push(!A&&ve?q:me.left,!A&&we?B:ke.right))}let ce=ee??Q.from,de=re??Q.to;for(let ye of _.visibleRanges)if(ye.to>ce&&ye.from<de)for(let we=Math.max(ye.from,ce),ge=Math.min(ye.to,de);;){let ve=_.state.doc.lineAt(we);for(let be of _.bidiSpans(ve)){let ke=be.from+ve.from,me=be.to+ve.from;if(ke>=ge)break;me>we&&se(Math.max(ke,we),ee==null&&ke<=ce,Math.min(me,ge),re==null&&me>=de,be.dir)}if(we=ve.to+1,we>=ge)break}return oe.length==0&&se(ce,ee==null,de,re==null,_.textDirection),{top:ne,bottom:ae,horizontal:oe}}function X(ee,re){let Q=M.top+(re?ee.top:ee.bottom);return{top:Q,bottom:Q,horizontal:[]}}}function sameMarker(_,v){return _.constructor==v.constructor&&_.eq(v)}class LayerView{constructor(v,S){this.view=v,this.layer=S,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=v.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),S.above&&this.dom.classList.add("cm-layer-above"),S.class&&this.dom.classList.add(S.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(v.state),v.requestMeasure(this.measureReq),S.mount&&S.mount(this.dom,v)}update(v){v.startState.facet(layerOrder)!=v.state.facet(layerOrder)&&this.setOrder(v.state),(this.layer.update(v,this.dom)||v.geometryChanged)&&(this.scale(),v.view.requestMeasure(this.measureReq))}docViewUpdate(v){this.layer.updateOnDocViewUpdate!==!1&&v.requestMeasure(this.measureReq)}setOrder(v){let S=0,R=v.facet(layerOrder);for(;S<R.length&&R[S]!=this.layer;)S++;this.dom.style.zIndex=String((this.layer.above?150:-1)-S)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:v,scaleY:S}=this.view;(v!=this.scaleX||S!=this.scaleY)&&(this.scaleX=v,this.scaleY=S,this.dom.style.transform=`scale(${1/v}, ${1/S})`)}draw(v){if(v.length!=this.drawn.length||v.some((S,R)=>!sameMarker(S,this.drawn[R]))){let S=this.dom.firstChild,R=0;for(let T of v)T.update&&S&&T.constructor&&this.drawn[R].constructor&&T.update(S,this.drawn[R])?(S=S.nextSibling,R++):this.dom.insertBefore(T.draw(),S);for(;S;){let T=S.nextSibling;S.remove(),S=T}this.drawn=v,browser.safari&&browser.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(_){return[ViewPlugin.define(v=>new LayerView(v,_)),layerOrder.of(_)]}const selectionConfig=Facet.define({combine(_){return combineConfig(_,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(v,S)=>Math.min(v,S),drawRangeCursor:(v,S)=>v||S})}});function drawSelection(_={}){return[selectionConfig.of(_),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(_){return _.startState.facet(selectionConfig)!=_.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(_){let{state:v}=_,S=v.facet(selectionConfig),R=[];for(let T of v.selection.ranges){let A=T==v.selection.main;if(T.empty||S.drawRangeCursor){let k=A?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",M=T.empty?T:EditorSelection.cursor(T.head,T.head>T.anchor?-1:1);for(let P of RectangleMarker.forRange(_,k,M))R.push(P)}}return R},update(_,v){_.transactions.some(R=>R.selection)&&(v.style.animationName=v.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let S=configChanged(_);return S&&setBlinkRate(_.state,v),_.docChanged||_.selectionSet||S},mount(_,v){setBlinkRate(v.state,_)},class:"cm-cursorLayer"});function setBlinkRate(_,v){v.style.animationDuration=_.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(_){return _.state.selection.ranges.map(v=>v.empty?[]:RectangleMarker.forRange(_,"cm-selectionBackground",v)).reduce((v,S)=>v.concat(S))},update(_,v){return _.docChanged||_.selectionSet||_.viewportChanged||configChanged(_)},class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=StateEffect.define({map(_,v){return _==null?null:v.mapPos(_)}}),dropCursorPos=StateField.define({create(){return null},update(_,v){return _!=null&&(_=v.changes.mapPos(_)),v.effects.reduce((S,R)=>R.is(setDropCursorPos)?R.value:S,_)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(_){var v;let S=_.state.field(dropCursorPos);S==null?this.cursor!=null&&((v=this.cursor)===null||v===void 0||v.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(_.startState.field(dropCursorPos)!=S||_.docChanged||_.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:_}=this,v=_.state.field(dropCursorPos),S=v!=null&&_.coordsAtPos(v);if(!S)return null;let R=_.scrollDOM.getBoundingClientRect();return{left:S.left-R.left+_.scrollDOM.scrollLeft*_.scaleX,top:S.top-R.top+_.scrollDOM.scrollTop*_.scaleY,height:S.bottom-S.top}}drawCursor(_){if(this.cursor){let{scaleX:v,scaleY:S}=this.view;_?(this.cursor.style.left=_.left/v+"px",this.cursor.style.top=_.top/S+"px",this.cursor.style.height=_.height/S+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(_){this.view.state.field(dropCursorPos)!=_&&this.view.dispatch({effects:setDropCursorPos.of(_)})}},{eventObservers:{dragover(_){this.setDropPos(this.view.posAtCoords({x:_.clientX,y:_.clientY}))},dragleave(_){(_.target==this.view.contentDOM||!this.view.contentDOM.contains(_.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(_,v,S,R,T){v.lastIndex=0;for(let A=_.iterRange(S,R),k=S,M;!A.next().done;k+=A.value.length)if(!A.lineBreak)for(;M=v.exec(A.value);)T(k+M.index,M)}function matchRanges(_,v){let S=_.visibleRanges;if(S.length==1&&S[0].from==_.viewport.from&&S[0].to==_.viewport.to)return S;let R=[];for(let{from:T,to:A}of S)T=Math.max(_.state.doc.lineAt(T).from,T-v),A=Math.min(_.state.doc.lineAt(A).to,A+v),R.length&&R[R.length-1].to>=T?R[R.length-1].to=A:R.push({from:T,to:A});return R}class MatchDecorator{constructor(v){const{regexp:S,decoration:R,decorate:T,boundary:A,maxLength:k=1e3}=v;if(!S.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=S,T)this.addMatch=(M,P,D,L)=>T(L,D,D+M[0].length,M,P);else if(typeof R=="function")this.addMatch=(M,P,D,L)=>{let q=R(M,P,D);q&&L(D,D+M[0].length,q)};else if(R)this.addMatch=(M,P,D,L)=>L(D,D+M[0].length,R);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=A,this.maxLength=k}createDeco(v){let S=new RangeSetBuilder,R=S.add.bind(S);for(let{from:T,to:A}of matchRanges(v,this.maxLength))iterMatches(v.state.doc,this.regexp,T,A,(k,M)=>this.addMatch(M,v,k,R));return S.finish()}updateDeco(v,S){let R=1e9,T=-1;return v.docChanged&&v.changes.iterChanges((A,k,M,P)=>{P>=v.view.viewport.from&&M<=v.view.viewport.to&&(R=Math.min(M,R),T=Math.max(P,T))}),v.viewportMoved||T-R>1e3?this.createDeco(v.view):T>-1?this.updateRange(v.view,S.map(v.changes),R,T):S}updateRange(v,S,R,T){for(let A of v.visibleRanges){let k=Math.max(A.from,R),M=Math.min(A.to,T);if(M>=k){let P=v.state.doc.lineAt(k),D=P.to<M?v.state.doc.lineAt(M):P,L=Math.max(A.from,P.from),q=Math.min(A.to,D.to);if(this.boundary){for(;k>P.from;k--)if(this.boundary.test(P.text[k-1-P.from])){L=k;break}for(;M<D.to;M++)if(this.boundary.test(D.text[M-D.from])){q=M;break}}let B=[],F,j=(z,V,G)=>B.push(G.range(z,V));if(P==D)for(this.regexp.lastIndex=L-P.from;(F=this.regexp.exec(P.text))&&F.index<q-P.from;)this.addMatch(F,v,F.index+P.from,j);else iterMatches(v.state.doc,this.regexp,L,q,(z,V)=>this.addMatch(V,v,z,j));S=S.update({filterFrom:L,filterTo:q,filter:(z,V)=>z<L||V>q,add:B})}}return S}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var _;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let v=document.body.style;_supportsTabSize=((_=v.tabSize)!==null&&_!==void 0?_:v.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(_){let v=combineConfig(_,{render:null,specialChars:Specials,addSpecialChars:null});return(v.replaceTabs=!supportsTabSize())&&(v.specialChars=new RegExp("	|"+v.specialChars.source,UnicodeRegexpSupport)),v.addSpecialChars&&(v.specialChars=new RegExp(v.specialChars.source+"|"+v.addSpecialChars.source,UnicodeRegexpSupport)),v}});function highlightSpecialChars(_={}){return[specialCharConfig.of(_),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(_.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(_)}makeDecorator(_){return new MatchDecorator({regexp:_.specialChars,decoration:(v,S,R)=>{let{doc:T}=S.state,A=codePointAt(v[0],0);if(A==9){let k=T.lineAt(R),M=S.state.tabSize,P=countColumn(k.text,M,R-k.from);return Decoration.replace({widget:new TabWidget((M-P%M)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[A]||(this.decorationCache[A]=Decoration.replace({widget:new SpecialCharWidget(_,A)}))},boundary:_.replaceTabs?void 0:/[^]/})}update(_){let v=_.state.facet(specialCharConfig);_.startState.facet(specialCharConfig)!=v?(this.decorator=this.makeDecorator(v),this.decorations=this.decorator.createDeco(_.view)):this.decorations=this.decorator.updateDeco(_,this.decorations)}},{decorations:_=>_.decorations}))}const DefaultPlaceholder="";function placeholder$1(_){return _>=32?DefaultPlaceholder:_==10?"":String.fromCharCode(9216+_)}class SpecialCharWidget extends WidgetType{constructor(v,S){super(),this.options=v,this.code=S}eq(v){return v.code==this.code}toDOM(v){let S=placeholder$1(this.code),R=v.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),T=this.options.render&&this.options.render(this.code,R,S);if(T)return T;let A=document.createElement("span");return A.textContent=S,A.title=R,A.setAttribute("aria-label",R),A.className="cm-specialChar",A}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(v){super(),this.width=v}eq(v){return v.width==this.width}toDOM(){let v=document.createElement("span");return v.textContent="	",v.className="cm-tab",v.style.width=this.width+"px",v}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.docChanged||_.selectionSet)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let v=-1,S=[];for(let R of _.state.selection.ranges){let T=_.lineBlockAt(R.head);T.from>v&&(S.push(lineDeco.range(T.from)),v=T.from)}return Decoration.set(S)}},{decorations:_=>_.decorations});class Placeholder extends WidgetType{constructor(v){super(),this.content=v}toDOM(v){let S=document.createElement("span");return S.className="cm-placeholder",S.style.pointerEvents="none",S.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(v):this.content.cloneNode(!0)),S.setAttribute("aria-hidden","true"),S}coordsAt(v){let S=v.firstChild?clientRectsFor(v.firstChild):[];if(!S.length)return null;let R=window.getComputedStyle(v.parentNode),T=flattenRect(S[0],R.direction!="rtl"),A=parseInt(R.lineHeight);return T.bottom-T.top>A*1.5?{left:T.left,right:T.right,top:T.top,bottom:T.top+A}:T}ignoreEvent(){return!1}}function placeholder(_){let v=ViewPlugin.fromClass(class{constructor(S){this.view=S,this.placeholder=_?Decoration.set([Decoration.widget({widget:new Placeholder(_),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:S=>S.decorations});return typeof _=="string"?[v,EditorView.contentAttributes.of({"aria-placeholder":_})]:v}const MaxOff=2e3;function rectangleFor(_,v,S){let R=Math.min(v.line,S.line),T=Math.max(v.line,S.line),A=[];if(v.off>MaxOff||S.off>MaxOff||v.col<0||S.col<0){let k=Math.min(v.off,S.off),M=Math.max(v.off,S.off);for(let P=R;P<=T;P++){let D=_.doc.line(P);D.length<=M&&A.push(EditorSelection.range(D.from+k,D.to+M))}}else{let k=Math.min(v.col,S.col),M=Math.max(v.col,S.col);for(let P=R;P<=T;P++){let D=_.doc.line(P),L=findColumn(D.text,k,_.tabSize,!0);if(L<0)A.push(EditorSelection.cursor(D.to));else{let q=findColumn(D.text,M,_.tabSize);A.push(EditorSelection.range(D.from+L,D.from+q))}}}return A}function absoluteColumn(_,v){let S=_.coordsAtPos(_.viewport.from);return S?Math.round(Math.abs((S.left-v)/_.defaultCharacterWidth)):-1}function getPos(_,v){let S=_.posAtCoords({x:v.clientX,y:v.clientY},!1),R=_.state.doc.lineAt(S),T=S-R.from,A=T>MaxOff?-1:T==R.length?absoluteColumn(_,v.clientX):countColumn(R.text,_.state.tabSize,S-R.from);return{line:R.number,col:A,off:T}}function rectangleSelectionStyle(_,v){let S=getPos(_,v),R=_.state.selection;return S?{update(T){if(T.docChanged){let A=T.changes.mapPos(T.startState.doc.line(S.line).from),k=T.state.doc.lineAt(A);S={line:k.number,col:S.col,off:Math.min(S.off,k.length)},R=R.map(T.changes)}},get(T,A,k){let M=getPos(_,T);if(!M)return R;let P=rectangleFor(_.state,S,M);return P.length?k?EditorSelection.create(P.concat(R.ranges)):EditorSelection.create(P):R}}:null}function rectangularSelection(_){let v=(S=>S.altKey&&S.button==0);return EditorView.mouseSelectionStyle.of((S,R)=>v(R)?rectangleSelectionStyle(S,R):null)}const keys={Alt:[18,_=>!!_.altKey],Control:[17,_=>!!_.ctrlKey],Shift:[16,_=>!!_.shiftKey],Meta:[91,_=>!!_.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(_={}){let[v,S]=keys[_.key||"Alt"],R=ViewPlugin.fromClass(class{constructor(T){this.view=T,this.isDown=!1}set(T){this.isDown!=T&&(this.isDown=T,this.view.update([]))}},{eventObservers:{keydown(T){this.set(T.keyCode==v||S(T))},keyup(T){(T.keyCode==v||!S(T))&&this.set(!1)},mousemove(T){this.set(S(T))}}});return[R,EditorView.contentAttributes.of(T=>{var A;return!((A=T.plugin(R))===null||A===void 0)&&A.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(v,S,R,T){this.facet=S,this.createTooltipView=R,this.removeTooltipView=T,this.input=v.state.facet(S),this.tooltips=this.input.filter(k=>k);let A=null;this.tooltipViews=this.tooltips.map(k=>A=R(k,A))}update(v,S){var R;let T=v.state.facet(this.facet),A=T.filter(P=>P);if(T===this.input){for(let P of this.tooltipViews)P.update&&P.update(v);return!1}let k=[],M=S?[]:null;for(let P=0;P<A.length;P++){let D=A[P],L=-1;if(D){for(let q=0;q<this.tooltips.length;q++){let B=this.tooltips[q];B&&B.create==D.create&&(L=q)}if(L<0)k[P]=this.createTooltipView(D,P?k[P-1]:null),M&&(M[P]=!!D.above);else{let q=k[P]=this.tooltipViews[L];M&&(M[P]=S[L]),q.update&&q.update(v)}}}for(let P of this.tooltipViews)k.indexOf(P)<0&&(this.removeTooltipView(P),(R=P.destroy)===null||R===void 0||R.call(P));return S&&(M.forEach((P,D)=>S[D]=P),S.length=M.length),this.input=T,this.tooltips=A,this.tooltipViews=k,!0}}function windowSpace(_){let v=_.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:v.clientHeight,right:v.clientWidth}}const tooltipConfig=Facet.define({combine:_=>{var v,S,R;return{position:browser.ios?"absolute":((v=_.find(T=>T.position))===null||v===void 0?void 0:v.position)||"fixed",parent:((S=_.find(T=>T.parent))===null||S===void 0?void 0:S.parent)||null,tooltipSpace:((R=_.find(T=>T.tooltipSpace))===null||R===void 0?void 0:R.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let v=_.state.facet(tooltipConfig);this.position=v.position,this.parent=v.parent,this.classes=_.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(_,showTooltip,(S,R)=>this.createTooltip(S,R),S=>{this.resizeObserver&&this.resizeObserver.unobserve(S.dom),S.dom.remove()}),this.above=this.manager.tooltips.map(S=>!!S.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(S=>{Date.now()>this.lastTransaction-50&&S.length>0&&S[S.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),_.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let _ of this.manager.tooltipViews)this.intersectionObserver.observe(_.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(_){_.transactions.length&&(this.lastTransaction=Date.now());let v=this.manager.update(_,this.above);v&&this.observeIntersection();let S=v||_.geometryChanged,R=_.state.facet(tooltipConfig);if(R.position!=this.position&&!this.madeAbsolute){this.position=R.position;for(let T of this.manager.tooltipViews)T.dom.style.position=this.position;S=!0}if(R.parent!=this.parent){this.parent&&this.container.remove(),this.parent=R.parent,this.createContainer();for(let T of this.manager.tooltipViews)this.container.appendChild(T.dom);S=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);S&&this.maybeMeasure()}createTooltip(_,v){let S=_.create(this.view),R=v?v.dom:null;if(S.dom.classList.add("cm-tooltip"),_.arrow&&!S.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let T=document.createElement("div");T.className="cm-tooltip-arrow",S.dom.appendChild(T)}return S.dom.style.position=this.position,S.dom.style.top=Outside,S.dom.style.left="0px",this.container.insertBefore(S.dom,R),S.mount&&S.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(S.dom),S}destroy(){var _,v,S;this.view.win.removeEventListener("resize",this.measureSoon);for(let R of this.manager.tooltipViews)R.dom.remove(),(_=R.destroy)===null||_===void 0||_.call(R);this.parent&&this.container.remove(),(v=this.resizeObserver)===null||v===void 0||v.disconnect(),(S=this.intersectionObserver)===null||S===void 0||S.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let _=1,v=1,S=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:A}=this.manager.tooltipViews[0];if(browser.safari){let k=A.getBoundingClientRect();S=Math.abs(k.top+1e4)>1||Math.abs(k.left)>1}else S=!!A.offsetParent&&A.offsetParent!=this.container.ownerDocument.body}if(S||this.position=="absolute")if(this.parent){let A=this.parent.getBoundingClientRect();A.width&&A.height&&(_=A.width/this.parent.offsetWidth,v=A.height/this.parent.offsetHeight)}else({scaleX:_,scaleY:v}=this.view.viewState);let R=this.view.scrollDOM.getBoundingClientRect(),T=getScrollMargins(this.view);return{visible:{left:R.left+T.left,top:R.top+T.top,right:R.right-T.right,bottom:R.bottom-T.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((A,k)=>{let M=this.manager.tooltipViews[k];return M.getCoords?M.getCoords(A.pos):this.view.coordsAtPos(A.pos)}),size:this.manager.tooltipViews.map(({dom:A})=>A.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:_,scaleY:v,makeAbsolute:S}}writeMeasure(_){var v;if(_.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let M of this.manager.tooltipViews)M.dom.style.position="absolute"}let{visible:S,space:R,scaleX:T,scaleY:A}=_,k=[];for(let M=0;M<this.manager.tooltips.length;M++){let P=this.manager.tooltips[M],D=this.manager.tooltipViews[M],{dom:L}=D,q=_.pos[M],B=_.size[M];if(!q||P.clip!==!1&&(q.bottom<=Math.max(S.top,R.top)||q.top>=Math.min(S.bottom,R.bottom)||q.right<Math.max(S.left,R.left)-.1||q.left>Math.min(S.right,R.right)+.1)){L.style.top=Outside;continue}let F=P.arrow?D.dom.querySelector(".cm-tooltip-arrow"):null,j=F?7:0,z=B.right-B.left,V=(v=knownHeight.get(D))!==null&&v!==void 0?v:B.bottom-B.top,G=D.offset||noOffset,W=this.view.textDirection==Direction.LTR,Y=B.width>R.right-R.left?W?R.left:R.right-B.width:W?Math.max(R.left,Math.min(q.left-(F?14:0)+G.x,R.right-z)):Math.min(Math.max(R.left,q.left-z+(F?14:0)-G.x),R.right-z),X=this.above[M];!P.strictSide&&(X?q.top-V-j-G.y<R.top:q.bottom+V+j+G.y>R.bottom)&&X==R.bottom-q.bottom>q.top-R.top&&(X=this.above[M]=!X);let ee=(X?q.top-R.top:R.bottom-q.bottom)-j;if(ee<V&&D.resize!==!1){if(ee<this.view.defaultLineHeight){L.style.top=Outside;continue}knownHeight.set(D,V),L.style.height=(V=ee)/A+"px"}else L.style.height&&(L.style.height="");let re=X?q.top-V-j-G.y:q.bottom+j+G.y,Q=Y+z;if(D.overlap!==!0)for(let ne of k)ne.left<Q&&ne.right>Y&&ne.top<re+V&&ne.bottom>re&&(re=X?ne.top-V-2-j:ne.bottom+j+2);if(this.position=="absolute"?(L.style.top=(re-_.parent.top)/A+"px",setLeftStyle(L,(Y-_.parent.left)/T)):(L.style.top=re/A+"px",setLeftStyle(L,Y/T)),F){let ne=q.left+(W?G.x:-G.x)-(Y+14-7);F.style.left=ne/T+"px"}D.overlap!==!0&&k.push({left:Y,top:re,right:Q,bottom:re+V}),L.classList.toggle("cm-tooltip-above",X),L.classList.toggle("cm-tooltip-below",!X),D.positioned&&D.positioned(_.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let _ of this.manager.tooltipViews)_.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(_,v){let S=parseInt(_.style.left,10);(isNaN(S)||Math.abs(v-S)>1)&&(_.style.left=v+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:_=>_.reduce((v,S)=>v.concat(S),[])});class HoverTooltipHost{static create(v){return new HoverTooltipHost(v)}constructor(v){this.view=v,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(v,showHoverTooltip,(S,R)=>this.createHostedView(S,R),S=>S.dom.remove())}createHostedView(v,S){let R=v.create(this.view);return R.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(R.dom,S?S.dom.nextSibling:this.dom.firstChild),this.mounted&&R.mount&&R.mount(this.view),R}mount(v){for(let S of this.manager.tooltipViews)S.mount&&S.mount(v);this.mounted=!0}positioned(v){for(let S of this.manager.tooltipViews)S.positioned&&S.positioned(v)}update(v){this.manager.update(v)}destroy(){var v;for(let S of this.manager.tooltipViews)(v=S.destroy)===null||v===void 0||v.call(S)}passProp(v){let S;for(let R of this.manager.tooltipViews){let T=R[v];if(T!==void 0){if(S===void 0)S=T;else if(S!==T)return}}return S}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],_=>{let v=_.facet(showHoverTooltip);return v.length===0?null:{pos:Math.min(...v.map(S=>S.pos)),end:Math.max(...v.map(S=>{var R;return(R=S.end)!==null&&R!==void 0?R:S.pos})),create:HoverTooltipHost.create,above:v[0].above,arrow:v.some(S=>S.arrow)}});class HoverPlugin{constructor(v,S,R,T,A){this.view=v,this.source=S,this.field=R,this.setHover=T,this.hoverTime=A,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:v.dom,time:0},this.checkHover=this.checkHover.bind(this),v.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),v.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let v=Date.now()-this.lastMove.time;v<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-v):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:v,lastMove:S}=this,R=v.docView.nearest(S.target);if(!R)return;let T,A=1;if(R instanceof WidgetView)T=R.posAtStart;else{if(T=v.posAtCoords(S),T==null)return;let M=v.coordsAtPos(T);if(!M||S.y<M.top||S.y>M.bottom||S.x<M.left-v.defaultCharacterWidth||S.x>M.right+v.defaultCharacterWidth)return;let P=v.bidiSpans(v.state.doc.lineAt(T)).find(L=>L.from<=T&&L.to>=T),D=P&&P.dir==Direction.RTL?-1:1;A=S.x<M.left?-D:D}let k=this.source(v,T,A);if(k?.then){let M=this.pending={pos:T};k.then(P=>{this.pending==M&&(this.pending=null,P&&!(Array.isArray(P)&&!P.length)&&v.dispatch({effects:this.setHover.of(Array.isArray(P)?P:[P])}))},P=>logException(v.state,P,"hover tooltip"))}else k&&!(Array.isArray(k)&&!k.length)&&v.dispatch({effects:this.setHover.of(Array.isArray(k)?k:[k])})}get tooltip(){let v=this.view.plugin(tooltipPlugin),S=v?v.manager.tooltips.findIndex(R=>R.create==HoverTooltipHost.create):-1;return S>-1?v.manager.tooltipViews[S]:null}mousemove(v){var S,R;this.lastMove={x:v.clientX,y:v.clientY,target:v.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:T,tooltip:A}=this;if(T.length&&A&&!isInTooltip(A.dom,v)||this.pending){let{pos:k}=T[0]||this.pending,M=(R=(S=T[0])===null||S===void 0?void 0:S.end)!==null&&R!==void 0?R:k;(k==M?this.view.posAtCoords(this.lastMove)!=k:!isOverRange(this.view,k,M,v.clientX,v.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(v){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:S}=this;if(S.length){let{tooltip:R}=this;R&&R.dom.contains(v.relatedTarget)?this.watchTooltipLeave(R.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(v){let S=R=>{v.removeEventListener("mouseleave",S),this.active.length&&!this.view.dom.contains(R.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};v.addEventListener("mouseleave",S)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(_,v){let{left:S,right:R,top:T,bottom:A}=_.getBoundingClientRect(),k;if(k=_.querySelector(".cm-tooltip-arrow")){let M=k.getBoundingClientRect();T=Math.min(M.top,T),A=Math.max(M.bottom,A)}return v.clientX>=S-tooltipMargin&&v.clientX<=R+tooltipMargin&&v.clientY>=T-tooltipMargin&&v.clientY<=A+tooltipMargin}function isOverRange(_,v,S,R,T,A){let k=_.scrollDOM.getBoundingClientRect(),M=_.documentTop+_.documentPadding.top+_.contentHeight;if(k.left>R||k.right<R||k.top>T||Math.min(k.bottom,M)<T)return!1;let P=_.posAtCoords({x:R,y:T},!1);return P>=v&&P<=S}function hoverTooltip(_,v={}){let S=StateEffect.define(),R=StateField.define({create(){return[]},update(T,A){if(T.length&&(v.hideOnChange&&(A.docChanged||A.selection)?T=[]:v.hideOn&&(T=T.filter(k=>!v.hideOn(A,k))),A.docChanged)){let k=[];for(let M of T){let P=A.changes.mapPos(M.pos,-1,MapMode.TrackDel);if(P!=null){let D=Object.assign(Object.create(null),M);D.pos=P,D.end!=null&&(D.end=A.changes.mapPos(D.end)),k.push(D)}}T=k}for(let k of A.effects)k.is(S)&&(T=k.value),k.is(closeHoverTooltipEffect)&&(T=[]);return T},provide:T=>showHoverTooltip.from(T)});return{active:R,extension:[R,ViewPlugin.define(T=>new HoverPlugin(T,_,R,S,v.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(_,v){let S=_.plugin(tooltipPlugin);if(!S)return null;let R=S.manager.tooltips.indexOf(v);return R<0?null:S.manager.tooltipViews[R]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(_){let v,S;for(let R of _)v=v||R.topContainer,S=S||R.bottomContainer;return{topContainer:v,bottomContainer:S}}});function getPanel(_,v){let S=_.plugin(panelPlugin),R=S?S.specs.indexOf(v):-1;return R>-1?S.panels[R]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(_){this.input=_.state.facet(showPanel),this.specs=this.input.filter(S=>S),this.panels=this.specs.map(S=>S(_));let v=_.state.facet(panelConfig);this.top=new PanelGroup(_,!0,v.topContainer),this.bottom=new PanelGroup(_,!1,v.bottomContainer),this.top.sync(this.panels.filter(S=>S.top)),this.bottom.sync(this.panels.filter(S=>!S.top));for(let S of this.panels)S.dom.classList.add("cm-panel"),S.mount&&S.mount()}update(_){let v=_.state.facet(panelConfig);this.top.container!=v.topContainer&&(this.top.sync([]),this.top=new PanelGroup(_.view,!0,v.topContainer)),this.bottom.container!=v.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(_.view,!1,v.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let S=_.state.facet(showPanel);if(S!=this.input){let R=S.filter(P=>P),T=[],A=[],k=[],M=[];for(let P of R){let D=this.specs.indexOf(P),L;D<0?(L=P(_.view),M.push(L)):(L=this.panels[D],L.update&&L.update(_)),T.push(L),(L.top?A:k).push(L)}this.specs=R,this.panels=T,this.top.sync(A),this.bottom.sync(k);for(let P of M)P.dom.classList.add("cm-panel"),P.mount&&P.mount()}else for(let R of this.panels)R.update&&R.update(_)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:_=>EditorView.scrollMargins.of(v=>{let S=v.plugin(_);return S&&{top:S.top.scrollMargin(),bottom:S.bottom.scrollMargin()}})});class PanelGroup{constructor(v,S,R){this.view=v,this.top=S,this.container=R,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(v){for(let S of this.panels)S.destroy&&v.indexOf(S)<0&&S.destroy();this.panels=v,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let S=this.container||this.view.dom;S.insertBefore(this.dom,this.top?S.firstChild:null)}let v=this.dom.firstChild;for(let S of this.panels)if(S.dom.parentNode==this.dom){for(;v!=S.dom;)v=rm(v);v=v.nextSibling}else this.dom.insertBefore(S.dom,v);for(;v;)v=rm(v)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let v of this.classes.split(" "))v&&this.container.classList.remove(v);for(let v of(this.classes=this.view.themeClasses).split(" "))v&&this.container.classList.add(v)}}}function rm(_){let v=_.nextSibling;return _.remove(),v}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(v){return this==v||this.constructor==v.constructor&&this.eq(v)}eq(v){return!1}destroy(v){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},activeGutters=Facet.define();function gutter(_){return[gutters(),activeGutters.of({...defaults$2,..._})]}const unfixGutters=Facet.define({combine:_=>_.some(v=>v)});function gutters(_){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.domAfter=null,this.prevViewport=_.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=_.state.facet(activeGutters).map(v=>new SingleGutterView(_,v)),this.fixed=!_.state.facet(unfixGutters);for(let v of this.gutters)v.config.side=="after"?this.getDOMAfter().appendChild(v.dom):this.dom.appendChild(v.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),_.scrollDOM.insertBefore(this.dom,_.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(_){if(this.updateGutters(_)){let v=this.prevViewport,S=_.view.viewport,R=Math.min(v.to,S.to)-Math.max(v.from,S.from);this.syncGutters(R<(S.to-S.from)*.8)}if(_.geometryChanged){let v=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=v,this.domAfter&&(this.domAfter.style.minHeight=v)}this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=_.view.viewport}syncGutters(_){let v=this.dom.nextSibling;_&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let S=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),R=[],T=this.gutters.map(A=>new UpdateContext(A,this.view.viewport,-this.view.documentPadding.top));for(let A of this.view.viewportLineBlocks)if(R.length&&(R=[]),Array.isArray(A.type)){let k=!0;for(let M of A.type)if(M.type==BlockType.Text&&k){advanceCursor(S,R,M.from);for(let P of T)P.line(this.view,M,R);k=!1}else if(M.widget)for(let P of T)P.widget(this.view,M)}else if(A.type==BlockType.Text){advanceCursor(S,R,A.from);for(let k of T)k.line(this.view,A,R)}else if(A.widget)for(let k of T)k.widget(this.view,A);for(let A of T)A.finish();_&&(this.view.scrollDOM.insertBefore(this.dom,v),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(_){let v=_.startState.facet(activeGutters),S=_.state.facet(activeGutters),R=_.docChanged||_.heightChanged||_.viewportChanged||!RangeSet.eq(_.startState.facet(gutterLineClass),_.state.facet(gutterLineClass),_.view.viewport.from,_.view.viewport.to);if(v==S)for(let T of this.gutters)T.update(_)&&(R=!0);else{R=!0;let T=[];for(let A of S){let k=v.indexOf(A);k<0?T.push(new SingleGutterView(this.view,A)):(this.gutters[k].update(_),T.push(this.gutters[k]))}for(let A of this.gutters)A.dom.remove(),T.indexOf(A)<0&&A.destroy();for(let A of T)A.config.side=="after"?this.getDOMAfter().appendChild(A.dom):this.dom.appendChild(A.dom);this.gutters=T}return R}destroy(){for(let _ of this.gutters)_.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:_=>EditorView.scrollMargins.of(v=>{let S=v.plugin(_);if(!S||S.gutters.length==0||!S.fixed)return null;let R=S.dom.offsetWidth*v.scaleX,T=S.domAfter?S.domAfter.offsetWidth*v.scaleX:0;return v.textDirection==Direction.LTR?{left:R,right:T}:{right:R,left:T}})});function asArray(_){return Array.isArray(_)?_:[_]}function advanceCursor(_,v,S){for(;_.value&&_.from<=S;)_.from==S&&v.push(_.value),_.next()}class UpdateContext{constructor(v,S,R){this.gutter=v,this.height=R,this.i=0,this.cursor=RangeSet.iter(v.markers,S.from)}addElement(v,S,R){let{gutter:T}=this,A=(S.top-this.height)/v.scaleY,k=S.height/v.scaleY;if(this.i==T.elements.length){let M=new GutterElement(v,k,A,R);T.elements.push(M),T.dom.appendChild(M.dom)}else T.elements[this.i].update(v,k,A,R);this.height=S.bottom,this.i++}line(v,S,R){let T=[];advanceCursor(this.cursor,T,S.from),R.length&&(T=T.concat(R));let A=this.gutter.config.lineMarker(v,S,T);A&&T.unshift(A);let k=this.gutter;T.length==0&&!k.config.renderEmptyElements||this.addElement(v,S,T)}widget(v,S){let R=this.gutter.config.widgetMarker(v,S.widget,S),T=R?[R]:null;for(let A of v.state.facet(gutterWidgetClass)){let k=A(v,S.widget,S);k&&(T||(T=[])).push(k)}T&&this.addElement(v,S,T)}finish(){let v=this.gutter;for(;v.elements.length>this.i;){let S=v.elements.pop();v.dom.removeChild(S.dom),S.destroy()}}}class SingleGutterView{constructor(v,S){this.view=v,this.config=S,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let R in S.domEventHandlers)this.dom.addEventListener(R,T=>{let A=T.target,k;if(A!=this.dom&&this.dom.contains(A)){for(;A.parentNode!=this.dom;)A=A.parentNode;let P=A.getBoundingClientRect();k=(P.top+P.bottom)/2}else k=T.clientY;let M=v.lineBlockAtHeight(k-v.documentTop);S.domEventHandlers[R](v,M,T)&&T.preventDefault()});this.markers=asArray(S.markers(v)),S.initialSpacer&&(this.spacer=new GutterElement(v,0,0,[S.initialSpacer(v)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(v){let S=this.markers;if(this.markers=asArray(this.config.markers(v.view)),this.spacer&&this.config.updateSpacer){let T=this.config.updateSpacer(this.spacer.markers[0],v);T!=this.spacer.markers[0]&&this.spacer.update(v.view,0,0,[T])}let R=v.view.viewport;return!RangeSet.eq(this.markers,S,R.from,R.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(v):!1)}destroy(){for(let v of this.elements)v.destroy()}}class GutterElement{constructor(v,S,R,T){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(v,S,R,T)}update(v,S,R,T){this.height!=S&&(this.height=S,this.dom.style.height=S+"px"),this.above!=R&&(this.dom.style.marginTop=(this.above=R)?R+"px":""),sameMarkers(this.markers,T)||this.setMarkers(v,T)}setMarkers(v,S){let R="cm-gutterElement",T=this.dom.firstChild;for(let A=0,k=0;;){let M=k,P=A<S.length?S[A++]:null,D=!1;if(P){let L=P.elementClass;L&&(R+=" "+L);for(let q=k;q<this.markers.length;q++)if(this.markers[q].compare(P)){M=q,D=!0;break}}else M=this.markers.length;for(;k<M;){let L=this.markers[k++];if(L.toDOM){L.destroy(T);let q=T.nextSibling;T.remove(),T=q}}if(!P)break;P.toDOM&&(D?T=T.nextSibling:this.dom.insertBefore(P.toDOM(v),T)),D&&k++}this.dom.className=R,this.markers=S}destroy(){this.setMarkers(null,[])}}function sameMarkers(_,v){if(_.length!=v.length)return!1;for(let S=0;S<_.length;S++)if(!_[S].compare(v[S]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(_){return combineConfig(_,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(v,S){let R=Object.assign({},v);for(let T in S){let A=R[T],k=S[T];R[T]=A?(M,P,D)=>A(M,P,D)||k(M,P,D):k}return R}})}});class NumberMarker extends GutterMarker{constructor(v){super(),this.number=v}eq(v){return this.number==v.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(_,v){return _.state.facet(lineNumberConfig).formatNumber(v,_.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],_=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(v){return v.state.facet(lineNumberMarkers)},lineMarker(v,S,R){return R.some(T=>T.toDOM)?null:new NumberMarker(formatNumber(v,v.state.doc.lineAt(S.from).number))},widgetMarker:(v,S,R)=>{for(let T of v.state.facet(lineNumberWidgetMarker)){let A=T(v,S,R);if(A)return A}return null},lineMarkerChange:v=>v.startState.facet(lineNumberConfig)!=v.state.facet(lineNumberConfig),initialSpacer(v){return new NumberMarker(formatNumber(v,maxLineNumber(v.state.doc.lines)))},updateSpacer(v,S){let R=formatNumber(S.view,maxLineNumber(S.view.state.doc.lines));return R==v.number?v:new NumberMarker(R)},domEventHandlers:_.facet(lineNumberConfig).domEventHandlers,side:"before"}));function lineNumbers(_={}){return[lineNumberConfig.of(_),gutters(),lineNumberGutter]}function maxLineNumber(_){let v=9;for(;v<_;)v=v*10+9;return v}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],_=>{let v=[],S=-1;for(let R of _.selection.ranges){let T=_.doc.lineAt(R.head).from;T>S&&(S=T,v.push(activeLineGutterMarker.range(T)))}return RangeSet.of(v)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(v,S){this.from=v,this.to=S}}class NodeProp{constructor(v={}){this.id=nextPropID++,this.perNode=!!v.perNode,this.deserialize=v.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=v.combine||null}add(v){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof v!="function"&&(v=NodeType.match(v)),S=>{let R=v(S);return R===void 0?null:[this,R]}}}NodeProp.closedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.group=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.isolate=new NodeProp({deserialize:_=>{if(_&&_!="rtl"&&_!="ltr"&&_!="auto")throw new RangeError("Invalid value for isolate: "+_);return _||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(v,S,R){this.tree=v,this.overlay=S,this.parser=R}static get(v){return v&&v.props&&v.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(v,S,R,T=0){this.name=v,this.props=S,this.id=R,this.flags=T}static define(v){let S=v.props&&v.props.length?Object.create(null):noProps,R=(v.top?1:0)|(v.skipped?2:0)|(v.error?4:0)|(v.name==null?8:0),T=new NodeType(v.name||"",S,v.id,R);if(v.props){for(let A of v.props)if(Array.isArray(A)||(A=A(T)),A){if(A[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");S[A[0].id]=A[1]}}return T}prop(v){return this.props[v.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(v){if(typeof v=="string"){if(this.name==v)return!0;let S=this.prop(NodeProp.group);return S?S.indexOf(v)>-1:!1}return this.id==v}static match(v){let S=Object.create(null);for(let R in v)for(let T of R.split(" "))S[T]=v[R];return R=>{for(let T=R.prop(NodeProp.group),A=-1;A<(T?T.length:0);A++){let k=S[A<0?R.name:T[A]];if(k)return k}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(v){this.types=v;for(let S=0;S<v.length;S++)if(v[S].id!=S)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...v){let S=[];for(let R of this.types){let T=null;for(let A of v){let k=A(R);if(k){T||(T=Object.assign({},R.props));let M=k[1],P=k[0];P.combine&&P.id in T&&(M=P.combine(T[P.id],M)),T[P.id]=M}}S.push(T?new NodeType(R.name,T,R.id,R.flags):R)}return new NodeSet(S)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(_){_[_.ExcludeBuffers=1]="ExcludeBuffers",_[_.IncludeAnonymous=2]="IncludeAnonymous",_[_.IgnoreMounts=4]="IgnoreMounts",_[_.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(v,S,R,T,A){if(this.type=v,this.children=S,this.positions=R,this.length=T,this.props=null,A&&A.length){this.props=Object.create(null);for(let[k,M]of A)this.props[typeof k=="number"?k:k.id]=M}}toString(){let v=MountedTree.get(this);if(v&&!v.overlay)return v.tree.toString();let S="";for(let R of this.children){let T=R.toString();T&&(S&&(S+=","),S+=T)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(S.length?"("+S+")":""):S}cursor(v=0){return new TreeCursor(this.topNode,v)}cursorAt(v,S=0,R=0){let T=CachedNode.get(this)||this.topNode,A=new TreeCursor(T);return A.moveTo(v,S),CachedNode.set(this,A._tree),A}get topNode(){return new TreeNode(this,0,0,null)}resolve(v,S=0){let R=resolveNode(CachedNode.get(this)||this.topNode,v,S,!1);return CachedNode.set(this,R),R}resolveInner(v,S=0){let R=resolveNode(CachedInnerNode.get(this)||this.topNode,v,S,!0);return CachedInnerNode.set(this,R),R}resolveStack(v,S=0){return stackIterator(this,v,S)}iterate(v){let{enter:S,leave:R,from:T=0,to:A=this.length}=v,k=v.mode||0,M=(k&IterMode.IncludeAnonymous)>0;for(let P=this.cursor(k|IterMode.IncludeAnonymous);;){let D=!1;if(P.from<=A&&P.to>=T&&(!M&&P.type.isAnonymous||S(P)!==!1)){if(P.firstChild())continue;D=!0}for(;D&&R&&(M||!P.type.isAnonymous)&&R(P),!P.nextSibling();){if(!P.parent())return;D=!0}}}prop(v){return v.perNode?this.props?this.props[v.id]:void 0:this.type.prop(v)}get propValues(){let v=[];if(this.props)for(let S in this.props)v.push([+S,this.props[S]]);return v}balance(v={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(S,R,T)=>new Tree(this.type,S,R,T,this.propValues),v.makeTree||((S,R,T)=>new Tree(NodeType.none,S,R,T)))}static build(v){return buildTree(v)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(v,S){this.buffer=v,this.index=S}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(v,S,R){this.buffer=v,this.length=S,this.set=R}get type(){return NodeType.none}toString(){let v=[];for(let S=0;S<this.buffer.length;)v.push(this.childString(S)),S=this.buffer[S+3];return v.join(",")}childString(v){let S=this.buffer[v],R=this.buffer[v+3],T=this.set.types[S],A=T.name;if(/\W/.test(A)&&!T.isError&&(A=JSON.stringify(A)),v+=4,R==v)return A;let k=[];for(;v<R;)k.push(this.childString(v)),v=this.buffer[v+3];return A+"("+k.join(",")+")"}findChild(v,S,R,T,A){let{buffer:k}=this,M=-1;for(let P=v;P!=S&&!(checkSide(A,T,k[P+1],k[P+2])&&(M=P,R>0));P=k[P+3]);return M}slice(v,S,R){let T=this.buffer,A=new Uint16Array(S-v),k=0;for(let M=v,P=0;M<S;){A[P++]=T[M++],A[P++]=T[M++]-R;let D=A[P++]=T[M++]-R;A[P++]=T[M++]-v,k=Math.max(k,D)}return new TreeBuffer(A,k,this.set)}}function checkSide(_,v,S,R){switch(_){case-2:return S<v;case-1:return R>=v&&S<v;case 0:return S<v&&R>v;case 1:return S<=v&&R>v;case 2:return R>v;case 4:return!0}}function resolveNode(_,v,S,R){for(var T;_.from==_.to||(S<1?_.from>=v:_.from>v)||(S>-1?_.to<=v:_.to<v);){let k=!R&&_ instanceof TreeNode&&_.index<0?null:_.parent;if(!k)return _;_=k}let A=R?0:IterMode.IgnoreOverlays;if(R)for(let k=_,M=k.parent;M;k=M,M=k.parent)k instanceof TreeNode&&k.index<0&&((T=M.enter(v,S,A))===null||T===void 0?void 0:T.from)!=k.from&&(_=M);for(;;){let k=_.enter(v,S,A);if(!k)return _;_=k}}class BaseNode{cursor(v=0){return new TreeCursor(this,v)}getChild(v,S=null,R=null){let T=getChildren(this,v,S,R);return T.length?T[0]:null}getChildren(v,S=null,R=null){return getChildren(this,v,S,R)}resolve(v,S=0){return resolveNode(this,v,S,!1)}resolveInner(v,S=0){return resolveNode(this,v,S,!0)}matchContext(v){return matchNodeContext(this.parent,v)}enterUnfinishedNodesBefore(v){let S=this.childBefore(v),R=this;for(;S;){let T=S.lastChild;if(!T||T.to!=S.to)break;T.type.isError&&T.from==T.to?(R=S,S=T.prevSibling):S=T}return R}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(v,S,R,T){super(),this._tree=v,this.from=S,this.index=R,this._parent=T}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(v,S,R,T,A=0){for(let k=this;;){for(let{children:M,positions:P}=k._tree,D=S>0?M.length:-1;v!=D;v+=S){let L=M[v],q=P[v]+k.from;if(checkSide(T,R,q,q+L.length)){if(L instanceof TreeBuffer){if(A&IterMode.ExcludeBuffers)continue;let B=L.findChild(0,L.buffer.length,S,R-q,T);if(B>-1)return new BufferNode(new BufferContext(k,L,v,q),null,B)}else if(A&IterMode.IncludeAnonymous||!L.type.isAnonymous||hasChild(L)){let B;if(!(A&IterMode.IgnoreMounts)&&(B=MountedTree.get(L))&&!B.overlay)return new TreeNode(B.tree,q,v,k);let F=new TreeNode(L,q,v,k);return A&IterMode.IncludeAnonymous||!F.type.isAnonymous?F:F.nextChild(S<0?L.children.length-1:0,S,R,T)}}}if(A&IterMode.IncludeAnonymous||!k.type.isAnonymous||(k.index>=0?v=k.index+S:v=S<0?-1:k._parent._tree.children.length,k=k._parent,!k))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(v){return this.nextChild(0,1,v,2)}childBefore(v){return this.nextChild(this._tree.children.length-1,-1,v,-2)}prop(v){return this._tree.prop(v)}enter(v,S,R=0){let T;if(!(R&IterMode.IgnoreOverlays)&&(T=MountedTree.get(this._tree))&&T.overlay){let A=v-this.from;for(let{from:k,to:M}of T.overlay)if((S>0?k<=A:k<A)&&(S<0?M>=A:M>A))return new TreeNode(T.tree,T.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,v,S,R)}nextSignificantParent(){let v=this;for(;v.type.isAnonymous&&v._parent;)v=v._parent;return v}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(_,v,S,R){let T=_.cursor(),A=[];if(!T.firstChild())return A;if(S!=null){for(let k=!1;!k;)if(k=T.type.is(S),!T.nextSibling())return A}for(;;){if(R!=null&&T.type.is(R))return A;if(T.type.is(v)&&A.push(T.node),!T.nextSibling())return R==null?A:[]}}function matchNodeContext(_,v,S=v.length-1){for(let R=_;S>=0;R=R.parent){if(!R)return!1;if(!R.type.isAnonymous){if(v[S]&&v[S]!=R.name)return!1;S--}}return!0}class BufferContext{constructor(v,S,R,T){this.parent=v,this.buffer=S,this.index=R,this.start=T}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(v,S,R){super(),this.context=v,this._parent=S,this.index=R,this.type=v.buffer.set.types[v.buffer.buffer[R]]}child(v,S,R){let{buffer:T}=this.context,A=T.findChild(this.index+4,T.buffer[this.index+3],v,S-this.context.start,R);return A<0?null:new BufferNode(this.context,this,A)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(v){return this.child(1,v,2)}childBefore(v){return this.child(-1,v,-2)}prop(v){return this.type.prop(v)}enter(v,S,R=0){if(R&IterMode.ExcludeBuffers)return null;let{buffer:T}=this.context,A=T.findChild(this.index+4,T.buffer[this.index+3],S>0?1:-1,v-this.context.start,S);return A<0?null:new BufferNode(this.context,this,A)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(v){return this._parent?null:this.context.parent.nextChild(this.context.index+v,v,0,4)}get nextSibling(){let{buffer:v}=this.context,S=v.buffer[this.index+3];return S<(this._parent?v.buffer[this._parent.index+3]:v.buffer.length)?new BufferNode(this.context,this._parent,S):this.externalSibling(1)}get prevSibling(){let{buffer:v}=this.context,S=this._parent?this._parent.index+4:0;return this.index==S?this.externalSibling(-1):new BufferNode(this.context,this._parent,v.findChild(S,this.index,-1,0,4))}get tree(){return null}toTree(){let v=[],S=[],{buffer:R}=this.context,T=this.index+4,A=R.buffer[this.index+3];if(A>T){let k=R.buffer[this.index+1];v.push(R.slice(T,A,k)),S.push(0)}return new Tree(this.type,v,S,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(_){if(!_.length)return null;let v=0,S=_[0];for(let A=1;A<_.length;A++){let k=_[A];(k.from>S.from||k.to<S.to)&&(S=k,v=A)}let R=S instanceof TreeNode&&S.index<0?null:S.parent,T=_.slice();return R?T[v]=R:T.splice(v,1),new StackIterator(T,S)}class StackIterator{constructor(v,S){this.heads=v,this.node=S}get next(){return iterStack(this.heads)}}function stackIterator(_,v,S){let R=_.resolveInner(v,S),T=null;for(let A=R instanceof TreeNode?R:R.context.parent;A;A=A.parent)if(A.index<0){let k=A.parent;(T||(T=[R])).push(k.resolve(v,S)),A=k}else{let k=MountedTree.get(A.tree);if(k&&k.overlay&&k.overlay[0].from<=v&&k.overlay[k.overlay.length-1].to>=v){let M=new TreeNode(k.tree,k.overlay[0].from+A.from,-1,A);(T||(T=[R])).push(resolveNode(M,v,S,!1))}}return T?iterStack(T):R}class TreeCursor{get name(){return this.type.name}constructor(v,S=0){if(this.mode=S,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,v instanceof TreeNode)this.yieldNode(v);else{this._tree=v.context.parent,this.buffer=v.context;for(let R=v._parent;R;R=R._parent)this.stack.unshift(R.index);this.bufferNode=v,this.yieldBuf(v.index)}}yieldNode(v){return v?(this._tree=v,this.type=v.type,this.from=v.from,this.to=v.to,!0):!1}yieldBuf(v,S){this.index=v;let{start:R,buffer:T}=this.buffer;return this.type=S||T.set.types[T.buffer[v]],this.from=R+T.buffer[v+1],this.to=R+T.buffer[v+2],!0}yield(v){return v?v instanceof TreeNode?(this.buffer=null,this.yieldNode(v)):(this.buffer=v.context,this.yieldBuf(v.index,v.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(v,S,R){if(!this.buffer)return this.yield(this._tree.nextChild(v<0?this._tree._tree.children.length-1:0,v,S,R,this.mode));let{buffer:T}=this.buffer,A=T.findChild(this.index+4,T.buffer[this.index+3],v,S-this.buffer.start,R);return A<0?!1:(this.stack.push(this.index),this.yieldBuf(A))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(v){return this.enterChild(1,v,2)}childBefore(v){return this.enterChild(-1,v,-2)}enter(v,S,R=this.mode){return this.buffer?R&IterMode.ExcludeBuffers?!1:this.enterChild(1,v,S):this.yield(this._tree.enter(v,S,R))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let v=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(v)}sibling(v){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+v,v,0,4,this.mode)):!1;let{buffer:S}=this.buffer,R=this.stack.length-1;if(v<0){let T=R<0?0:this.stack[R]+4;if(this.index!=T)return this.yieldBuf(S.findChild(T,this.index,-1,0,4))}else{let T=S.buffer[this.index+3];if(T<(R<0?S.buffer.length:S.buffer[this.stack[R]+3]))return this.yieldBuf(T)}return R<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+v,v,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(v){let S,R,{buffer:T}=this;if(T){if(v>0){if(this.index<T.buffer.buffer.length)return!1}else for(let A=0;A<this.index;A++)if(T.buffer.buffer[A+3]<this.index)return!1;({index:S,parent:R}=T)}else({index:S,_parent:R}=this._tree);for(;R;{index:S,_parent:R}=R)if(S>-1)for(let A=S+v,k=v<0?-1:R._tree.children.length;A!=k;A+=v){let M=R._tree.children[A];if(this.mode&IterMode.IncludeAnonymous||M instanceof TreeBuffer||!M.type.isAnonymous||hasChild(M))return!1}return!0}move(v,S){if(S&&this.enterChild(v,0,4))return!0;for(;;){if(this.sibling(v))return!0;if(this.atLastNode(v)||!this.parent())return!1}}next(v=!0){return this.move(1,v)}prev(v=!0){return this.move(-1,v)}moveTo(v,S=0){for(;(this.from==this.to||(S<1?this.from>=v:this.from>v)||(S>-1?this.to<=v:this.to<v))&&this.parent(););for(;this.enterChild(1,v,S););return this}get node(){if(!this.buffer)return this._tree;let v=this.bufferNode,S=null,R=0;if(v&&v.context==this.buffer)e:for(let T=this.index,A=this.stack.length;A>=0;){for(let k=v;k;k=k._parent)if(k.index==T){if(T==this.index)return k;S=k,R=A+1;break e}T=this.stack[--A]}for(let T=R;T<this.stack.length;T++)S=new BufferNode(this.buffer,S,this.stack[T]);return this.bufferNode=new BufferNode(this.buffer,S,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(v,S){for(let R=0;;){let T=!1;if(this.type.isAnonymous||v(this)!==!1){if(this.firstChild()){R++;continue}this.type.isAnonymous||(T=!0)}for(;;){if(T&&S&&S(this),T=this.type.isAnonymous,!R)return;if(this.nextSibling())break;this.parent(),R--,T=!0}}}matchContext(v){if(!this.buffer)return matchNodeContext(this.node.parent,v);let{buffer:S}=this.buffer,{types:R}=S.set;for(let T=v.length-1,A=this.stack.length-1;T>=0;A--){if(A<0)return matchNodeContext(this._tree,v,T);let k=R[S.buffer[this.stack[A]]];if(!k.isAnonymous){if(v[T]&&v[T]!=k.name)return!1;T--}}return!0}}function hasChild(_){return _.children.some(v=>v instanceof TreeBuffer||!v.type.isAnonymous||hasChild(v))}function buildTree(_){var v;let{buffer:S,nodeSet:R,maxBufferLength:T=DefaultBufferLength,reused:A=[],minRepeatType:k=R.types.length}=_,M=Array.isArray(S)?new FlatBufferCursor(S,S.length):S,P=R.types,D=0,L=0;function q(ee,re,Q,ne,ae,oe){let{id:se,start:ce,end:de,size:ye}=M,we=L,ge=D;if(ye<0)if(M.next(),ye==-1){let fe=A[se];Q.push(fe),ne.push(ce-ee);return}else if(ye==-3){D=se;return}else if(ye==-4){L=se;return}else throw new RangeError(`Unrecognized record size: ${ye}`);let ve=P[se],be,ke,me=ce-ee;if(de-ce<=T&&(ke=V(M.pos-re,ae))){let fe=new Uint16Array(ke.size-ke.skip),xe=M.pos-ke.size,Ae=fe.length;for(;M.pos>xe;)Ae=G(ke.start,fe,Ae);be=new TreeBuffer(fe,de-ke.start,R),me=ke.start-ee}else{let fe=M.pos-ye;M.next();let xe=[],Ae=[],Se=se>=k?se:-1,Me=0,Oe=de;for(;M.pos>fe;)Se>=0&&M.id==Se&&M.size>=0?(M.end<=Oe-T&&(j(xe,Ae,ce,Me,M.end,Oe,Se,we,ge),Me=xe.length,Oe=M.end),M.next()):oe>2500?B(ce,fe,xe,Ae):q(ce,fe,xe,Ae,Se,oe+1);if(Se>=0&&Me>0&&Me<xe.length&&j(xe,Ae,ce,Me,ce,Oe,Se,we,ge),xe.reverse(),Ae.reverse(),Se>-1&&Me>0){let Ce=F(ve,ge);be=balanceRange(ve,xe,Ae,0,xe.length,0,de-ce,Ce,Ce)}else be=z(ve,xe,Ae,de-ce,we-de,ge)}Q.push(be),ne.push(me)}function B(ee,re,Q,ne){let ae=[],oe=0,se=-1;for(;M.pos>re;){let{id:ce,start:de,end:ye,size:we}=M;if(we>4)M.next();else{if(se>-1&&de<se)break;se<0&&(se=ye-T),ae.push(ce,de,ye),oe++,M.next()}}if(oe){let ce=new Uint16Array(oe*4),de=ae[ae.length-2];for(let ye=ae.length-3,we=0;ye>=0;ye-=3)ce[we++]=ae[ye],ce[we++]=ae[ye+1]-de,ce[we++]=ae[ye+2]-de,ce[we++]=we;Q.push(new TreeBuffer(ce,ae[2]-de,R)),ne.push(de-ee)}}function F(ee,re){return(Q,ne,ae)=>{let oe=0,se=Q.length-1,ce,de;if(se>=0&&(ce=Q[se])instanceof Tree){if(!se&&ce.type==ee&&ce.length==ae)return ce;(de=ce.prop(NodeProp.lookAhead))&&(oe=ne[se]+ce.length+de)}return z(ee,Q,ne,ae,oe,re)}}function j(ee,re,Q,ne,ae,oe,se,ce,de){let ye=[],we=[];for(;ee.length>ne;)ye.push(ee.pop()),we.push(re.pop()+Q-ae);ee.push(z(R.types[se],ye,we,oe-ae,ce-oe,de)),re.push(ae-Q)}function z(ee,re,Q,ne,ae,oe,se){if(oe){let ce=[NodeProp.contextHash,oe];se=se?[ce].concat(se):[ce]}if(ae>25){let ce=[NodeProp.lookAhead,ae];se=se?[ce].concat(se):[ce]}return new Tree(ee,re,Q,ne,se)}function V(ee,re){let Q=M.fork(),ne=0,ae=0,oe=0,se=Q.end-T,ce={size:0,start:0,skip:0};e:for(let de=Q.pos-ee;Q.pos>de;){let ye=Q.size;if(Q.id==re&&ye>=0){ce.size=ne,ce.start=ae,ce.skip=oe,oe+=4,ne+=4,Q.next();continue}let we=Q.pos-ye;if(ye<0||we<de||Q.start<se)break;let ge=Q.id>=k?4:0,ve=Q.start;for(Q.next();Q.pos>we;){if(Q.size<0)if(Q.size==-3||Q.size==-4)ge+=4;else break e;else Q.id>=k&&(ge+=4);Q.next()}ae=ve,ne+=ye,oe+=ge}return(re<0||ne==ee)&&(ce.size=ne,ce.start=ae,ce.skip=oe),ce.size>4?ce:void 0}function G(ee,re,Q){let{id:ne,start:ae,end:oe,size:se}=M;if(M.next(),se>=0&&ne<k){let ce=Q;if(se>4){let de=M.pos-(se-4);for(;M.pos>de;)Q=G(ee,re,Q)}re[--Q]=ce,re[--Q]=oe-ee,re[--Q]=ae-ee,re[--Q]=ne}else se==-3?D=ne:se==-4&&(L=ne);return Q}let W=[],Y=[];for(;M.pos>0;)q(_.start||0,_.bufferStart||0,W,Y,-1,0);let X=(v=_.length)!==null&&v!==void 0?v:W.length?Y[0]+W[0].length:0;return new Tree(P[_.topID],W.reverse(),Y.reverse(),X)}const nodeSizeCache=new WeakMap;function nodeSize(_,v){if(!_.isAnonymous||v instanceof TreeBuffer||v.type!=_)return 1;let S=nodeSizeCache.get(v);if(S==null){S=1;for(let R of v.children){if(R.type!=_||!(R instanceof Tree)){S=1;break}S+=nodeSize(_,R)}nodeSizeCache.set(v,S)}return S}function balanceRange(_,v,S,R,T,A,k,M,P){let D=0;for(let j=R;j<T;j++)D+=nodeSize(_,v[j]);let L=Math.ceil(D*1.5/8),q=[],B=[];function F(j,z,V,G,W){for(let Y=V;Y<G;){let X=Y,ee=z[Y],re=nodeSize(_,j[Y]);for(Y++;Y<G;Y++){let Q=nodeSize(_,j[Y]);if(re+Q>=L)break;re+=Q}if(Y==X+1){if(re>L){let Q=j[X];F(Q.children,Q.positions,0,Q.children.length,z[X]+W);continue}q.push(j[X])}else{let Q=z[Y-1]+j[Y-1].length-ee;q.push(balanceRange(_,j,z,X,Y,ee,Q,null,P))}B.push(ee+W-A)}}return F(v,S,R,T,0),(M||P)(q,B,k)}class TreeFragment{constructor(v,S,R,T,A=!1,k=!1){this.from=v,this.to=S,this.tree=R,this.offset=T,this.open=(A?1:0)|(k?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(v,S=[],R=!1){let T=[new TreeFragment(0,v.length,v,0,!1,R)];for(let A of S)A.to>v.length&&T.push(A);return T}static applyChanges(v,S,R=128){if(!S.length)return v;let T=[],A=1,k=v.length?v[0]:null;for(let M=0,P=0,D=0;;M++){let L=M<S.length?S[M]:null,q=L?L.fromA:1e9;if(q-P>=R)for(;k&&k.from<q;){let B=k;if(P>=B.from||q<=B.to||D){let F=Math.max(B.from,P)-D,j=Math.min(B.to,q)-D;B=F>=j?null:new TreeFragment(F,j,B.tree,B.offset+D,M>0,!!L)}if(B&&T.push(B),k.to>q)break;k=A<v.length?v[A++]:null}if(!L)break;P=L.toA,D=L.toA-L.toB}return T}}class Parser{startParse(v,S,R){return typeof v=="string"&&(v=new StringInput(v)),R=R?R.length?R.map(T=>new Range(T.from,T.to)):[new Range(0,0)]:[new Range(0,v.length)],this.createParse(v,S||[],R)}parse(v,S,R){let T=this.startParse(v,S,R);for(;;){let A=T.advance();if(A)return A}}}class StringInput{constructor(v){this.string=v}get length(){return this.string.length}chunk(v){return this.string.slice(v)}get lineChunks(){return!1}read(v,S){return this.string.slice(v,S)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(v,S,R,T){this.name=v,this.set=S,this.base=R,this.modified=T,this.id=nextTagID++}toString(){let{name:v}=this;for(let S of this.modified)S.name&&(v=`${S.name}(${v})`);return v}static define(v,S){let R=typeof v=="string"?v:"?";if(v instanceof Tag&&(S=v),S?.base)throw new Error("Can not derive from a modified tag");let T=new Tag(R,[],null,[]);if(T.set.push(T),S)for(let A of S.set)T.set.push(A);return T}static defineModifier(v){let S=new Modifier(v);return R=>R.modified.indexOf(S)>-1?R:Modifier.get(R.base||R,R.modified.concat(S).sort((T,A)=>T.id-A.id))}}let nextModifierID=0;class Modifier{constructor(v){this.name=v,this.instances=[],this.id=nextModifierID++}static get(v,S){if(!S.length)return v;let R=S[0].instances.find(M=>M.base==v&&sameArray(S,M.modified));if(R)return R;let T=[],A=new Tag(v.name,T,v,S);for(let M of S)M.instances.push(A);let k=powerSet(S);for(let M of v.set)if(!M.modified.length)for(let P of k)T.push(Modifier.get(M,P));return A}}function sameArray(_,v){return _.length==v.length&&_.every((S,R)=>S==v[R])}function powerSet(_){let v=[[]];for(let S=0;S<_.length;S++)for(let R=0,T=v.length;R<T;R++)v.push(v[R].concat(_[S]));return v.sort((S,R)=>R.length-S.length)}function styleTags(_){let v=Object.create(null);for(let S in _){let R=_[S];Array.isArray(R)||(R=[R]);for(let T of S.split(" "))if(T){let A=[],k=2,M=T;for(let q=0;;){if(M=="..."&&q>0&&q+3==T.length){k=1;break}let B=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(M);if(!B)throw new RangeError("Invalid path: "+T);if(A.push(B[0]=="*"?"":B[0][0]=='"'?JSON.parse(B[0]):B[0]),q+=B[0].length,q==T.length)break;let F=T[q++];if(q==T.length&&F=="!"){k=0;break}if(F!="/")throw new RangeError("Invalid path: "+T);M=T.slice(q)}let P=A.length-1,D=A[P];if(!D)throw new RangeError("Invalid path: "+T);let L=new Rule(R,k,P>0?A.slice(0,P):null);v[D]=L.sort(v[D])}}return ruleNodeProp.add(v)}const ruleNodeProp=new NodeProp({combine(_,v){let S,R,T;for(;_||v;){if(!_||v&&_.depth>=v.depth?(T=v,v=v.next):(T=_,_=_.next),S&&S.mode==T.mode&&!T.context&&!S.context)continue;let A=new Rule(T.tags,T.mode,T.context);S?S.next=A:R=A,S=A}return R}});class Rule{constructor(v,S,R,T){this.tags=v,this.mode=S,this.context=R,this.next=T}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(v){return!v||v.depth<this.depth?(this.next=v,this):(v.next=this.sort(v.next),v)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(_,v){let S=Object.create(null);for(let A of _)if(!Array.isArray(A.tag))S[A.tag.id]=A.class;else for(let k of A.tag)S[k.id]=A.class;let{scope:R,all:T=null}=v||{};return{style:A=>{let k=T;for(let M of A)for(let P of M.set){let D=S[P.id];if(D){k=k?k+" "+D:D;break}}return k},scope:R}}function highlightTags(_,v){let S=null;for(let R of _){let T=R.style(v);T&&(S=S?S+" "+T:T)}return S}function highlightTree(_,v,S,R=0,T=_.length){let A=new HighlightBuilder(R,Array.isArray(v)?v:[v],S);A.highlightRange(_.cursor(),R,T,"",A.highlighters),A.flush(T)}class HighlightBuilder{constructor(v,S,R){this.at=v,this.highlighters=S,this.span=R,this.class=""}startSpan(v,S){S!=this.class&&(this.flush(v),v>this.at&&(this.at=v),this.class=S)}flush(v){v>this.at&&this.class&&this.span(this.at,v,this.class)}highlightRange(v,S,R,T,A){let{type:k,from:M,to:P}=v;if(M>=R||P<=S)return;k.isTop&&(A=this.highlighters.filter(F=>!F.scope||F.scope(k)));let D=T,L=getStyleTags(v)||Rule.empty,q=highlightTags(A,L.tags);if(q&&(D&&(D+=" "),D+=q,L.mode==1&&(T+=(T?" ":"")+q)),this.startSpan(Math.max(S,M),D),L.opaque)return;let B=v.tree&&v.tree.prop(NodeProp.mounted);if(B&&B.overlay){let F=v.node.enter(B.overlay[0].from+M,1),j=this.highlighters.filter(V=>!V.scope||V.scope(B.tree.type)),z=v.firstChild();for(let V=0,G=M;;V++){let W=V<B.overlay.length?B.overlay[V]:null,Y=W?W.from+M:P,X=Math.max(S,G),ee=Math.min(R,Y);if(X<ee&&z)for(;v.from<ee&&(this.highlightRange(v,X,ee,T,A),this.startSpan(Math.min(ee,v.to),D),!(v.to>=Y||!v.nextSibling())););if(!W||Y>R)break;G=W.to+M,G>S&&(this.highlightRange(F.cursor(),Math.max(S,W.from+M),Math.min(R,G),"",j),this.startSpan(Math.min(R,G),D))}z&&v.parent()}else if(v.firstChild()){B&&(T="");do if(!(v.to<=S)){if(v.from>=R)break;this.highlightRange(v,S,R,T,A),this.startSpan(Math.min(R,v.to),D)}while(v.nextSibling());v.parent()}}}function getStyleTags(_){let v=_.type.prop(ruleNodeProp);for(;v&&v.context&&!_.matchContext(v.context);)v=v.next;return v||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let _ in tags){let v=tags[_];v instanceof Tag&&(v.name=_)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(_){return Facet.define({combine:_?v=>v.concat(_):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(v,S,R=[],T=""){this.data=v,this.name=T,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=S,this.extension=[language.of(this),EditorState.languageData.of((A,k,M)=>{let P=topNodeAt(A,k,M),D=P.type.prop(languageDataProp);if(!D)return[];let L=A.facet(D),q=P.type.prop(sublanguageProp);if(q){let B=P.resolve(k-P.from,M);for(let F of q)if(F.test(B,A)){let j=A.facet(F.facet);return F.type=="replace"?j:j.concat(L)}}return L})].concat(R)}isActiveAt(v,S,R=-1){return topNodeAt(v,S,R).type.prop(languageDataProp)==this.data}findRegions(v){let S=v.facet(language);if(S?.data==this.data)return[{from:0,to:v.doc.length}];if(!S||!S.allowsNesting)return[];let R=[],T=(A,k)=>{if(A.prop(languageDataProp)==this.data){R.push({from:k,to:k+A.length});return}let M=A.prop(NodeProp.mounted);if(M){if(M.tree.prop(languageDataProp)==this.data){if(M.overlay)for(let P of M.overlay)R.push({from:P.from+k,to:P.to+k});else R.push({from:k,to:k+A.length});return}else if(M.overlay){let P=R.length;if(T(M.tree,M.overlay[0].from+k),R.length>P)return}}for(let P=0;P<A.children.length;P++){let D=A.children[P];D instanceof Tree&&T(D,A.positions[P]+k)}};return T(syntaxTree(v),0),R}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(_,v,S){let R=_.facet(language),T=syntaxTree(_).topNode;if(!R||R.allowsNesting)for(let A=T;A;A=A.enter(v,S,IterMode.ExcludeBuffers))A.type.isTop&&(T=A);return T}function syntaxTree(_){let v=_.field(Language.state,!1);return v?v.tree:Tree.empty}class DocInput{constructor(v){this.doc=v,this.cursorPos=0,this.string="",this.cursor=v.iter()}get length(){return this.doc.length}syncTo(v){return this.string=this.cursor.next(v-this.cursorPos).value,this.cursorPos=v+this.string.length,this.cursorPos-this.string.length}chunk(v){return this.syncTo(v),this.string}get lineChunks(){return!0}read(v,S){let R=this.cursorPos-this.string.length;return v<R||S>=this.cursorPos?this.doc.sliceString(v,S):this.string.slice(v-R,S-R)}}let currentContext=null;class ParseContext{constructor(v,S,R=[],T,A,k,M,P){this.parser=v,this.state=S,this.fragments=R,this.tree=T,this.treeLen=A,this.viewport=k,this.skipped=M,this.scheduleOn=P,this.parse=null,this.tempSkipped=[]}static create(v,S,R){return new ParseContext(v,S,[],Tree.empty,0,R,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(v,S){return S!=null&&S>=this.state.doc.length&&(S=void 0),this.tree!=Tree.empty&&this.isDone(S??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var R;if(typeof v=="number"){let T=Date.now()+v;v=()=>Date.now()>T}for(this.parse||(this.parse=this.startParse()),S!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>S)&&S<this.state.doc.length&&this.parse.stopAt(S);;){let T=this.parse.advance();if(T)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(T,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(R=this.parse.stoppedAt)!==null&&R!==void 0?R:this.state.doc.length,this.tree=T,this.parse=null,this.treeLen<(S??this.state.doc.length))this.parse=this.startParse();else return!0;if(v())return!1}})}takeTree(){let v,S;this.parse&&(v=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>v)&&this.parse.stopAt(v),this.withContext(()=>{for(;!(S=this.parse.advance()););}),this.treeLen=v,this.tree=S,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(v){let S=currentContext;currentContext=this;try{return v()}finally{currentContext=S}}withoutTempSkipped(v){for(let S;S=this.tempSkipped.pop();)v=cutFragments(v,S.from,S.to);return v}changes(v,S){let{fragments:R,tree:T,treeLen:A,viewport:k,skipped:M}=this;if(this.takeTree(),!v.empty){let P=[];if(v.iterChangedRanges((D,L,q,B)=>P.push({fromA:D,toA:L,fromB:q,toB:B})),R=TreeFragment.applyChanges(R,P),T=Tree.empty,A=0,k={from:v.mapPos(k.from,-1),to:v.mapPos(k.to,1)},this.skipped.length){M=[];for(let D of this.skipped){let L=v.mapPos(D.from,1),q=v.mapPos(D.to,-1);L<q&&M.push({from:L,to:q})}}}return new ParseContext(this.parser,S,R,T,A,k,M,this.scheduleOn)}updateViewport(v){if(this.viewport.from==v.from&&this.viewport.to==v.to)return!1;this.viewport=v;let S=this.skipped.length;for(let R=0;R<this.skipped.length;R++){let{from:T,to:A}=this.skipped[R];T<v.to&&A>v.from&&(this.fragments=cutFragments(this.fragments,T,A),this.skipped.splice(R--,1))}return this.skipped.length>=S?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(v,S){this.skipped.push({from:v,to:S})}static getSkippingParser(v){return new class extends Parser{createParse(S,R,T){let A=T[0].from,k=T[T.length-1].to;return{parsedPos:A,advance(){let P=currentContext;if(P){for(let D of T)P.tempSkipped.push(D);v&&(P.scheduleOn=P.scheduleOn?Promise.all([P.scheduleOn,v]):v)}return this.parsedPos=k,new Tree(NodeType.none,[],[],k-A)},stoppedAt:null,stopAt(){}}}}}isDone(v){v=Math.min(v,this.state.doc.length);let S=this.fragments;return this.treeLen>=v&&S.length&&S[0].from==0&&S[0].to>=v}static get(){return currentContext}}function cutFragments(_,v,S){return TreeFragment.applyChanges(_,[{fromA:v,toA:S,fromB:v,toB:S}])}class LanguageState{constructor(v){this.context=v,this.tree=v.tree}apply(v){if(!v.docChanged&&this.tree==this.context.tree)return this;let S=this.context.changes(v.changes,v.state),R=this.context.treeLen==v.startState.doc.length?void 0:Math.max(v.changes.mapPos(this.context.treeLen),S.viewport.to);return S.work(20,R)||S.takeTree(),new LanguageState(S)}static init(v){let S=Math.min(3e3,v.doc.length),R=ParseContext.create(v.facet(language).parser,v,{from:0,to:S});return R.work(20,S)||R.takeTree(),new LanguageState(R)}}Language.state=StateField.define({create:LanguageState.init,update(_,v){for(let S of v.effects)if(S.is(Language.setState))return S.value;return v.startState.facet(language)!=v.state.facet(language)?LanguageState.init(v.state):_.apply(v)}});let requestIdle=_=>{let v=setTimeout(()=>_(),500);return()=>clearTimeout(v)};typeof requestIdleCallback<"u"&&(requestIdle=_=>{let v=-1,S=setTimeout(()=>{v=requestIdleCallback(_,{timeout:400})},100);return()=>v<0?clearTimeout(S):cancelIdleCallback(v)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(v){this.view=v,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(v){let S=this.view.state.field(Language.state).context;(S.updateViewport(v.view.viewport)||this.view.viewport.to>S.treeLen)&&this.scheduleWork(),(v.docChanged||v.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(S)}scheduleWork(){if(this.working)return;let{state:v}=this.view,S=v.field(Language.state);(S.tree!=S.context.tree||!S.context.isDone(v.doc.length))&&(this.working=requestIdle(this.work))}work(v){this.working=null;let S=Date.now();if(this.chunkEnd<S&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=S+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:R,viewport:{to:T}}=this.view,A=R.field(Language.state);if(A.tree==A.context.tree&&A.context.isDone(T+1e5))return;let k=Date.now()+Math.min(this.chunkBudget,100,v&&!isInputPending?Math.max(25,v.timeRemaining()-5):1e9),M=A.context.treeLen<T&&R.doc.length>T+1e3,P=A.context.work(()=>isInputPending&&isInputPending()||Date.now()>k,T+(M?0:1e5));this.chunkBudget-=Date.now()-S,(P||this.chunkBudget<=0)&&(A.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(A.context))})),this.chunkBudget>0&&!(P&&!M)&&this.scheduleWork(),this.checkAsyncSchedule(A.context)}checkAsyncSchedule(v){v.scheduleOn&&(this.workScheduled++,v.scheduleOn.then(()=>this.scheduleWork()).catch(S=>logException(this.view.state,S)).then(()=>this.workScheduled--),v.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(_){return _.length?_[0]:null},enables:_=>[Language.state,parseWorker,EditorView.contentAttributes.compute([_],v=>{let S=v.facet(_);return S&&S.name?{"data-language":S.name}:{}})]}),indentService=Facet.define(),indentUnit=Facet.define({combine:_=>{if(!_.length)return"  ";let v=_[0];if(!v||/\S/.test(v)||Array.from(v).some(S=>S!=v[0]))throw new Error("Invalid indent unit: "+JSON.stringify(_[0]));return v}});function getIndentUnit(_){let v=_.facet(indentUnit);return v.charCodeAt(0)==9?_.tabSize*v.length:v.length}function indentString(_,v){let S="",R=_.tabSize,T=_.facet(indentUnit)[0];if(T=="	"){for(;v>=R;)S+="	",v-=R;T=" "}for(let A=0;A<v;A++)S+=T;return S}function getIndentation(_,v){_ instanceof EditorState&&(_=new IndentContext(_));for(let R of _.state.facet(indentService)){let T=R(_,v);if(T!==void 0)return T}let S=syntaxTree(_.state);return S.length>=v?syntaxIndentation(_,S,v):null}class IndentContext{constructor(v,S={}){this.state=v,this.options=S,this.unit=getIndentUnit(v)}lineAt(v,S=1){let R=this.state.doc.lineAt(v),{simulateBreak:T,simulateDoubleBreak:A}=this.options;return T!=null&&T>=R.from&&T<=R.to?A&&T==v?{text:"",from:v}:(S<0?T<v:T<=v)?{text:R.text.slice(T-R.from),from:T}:{text:R.text.slice(0,T-R.from),from:R.from}:R}textAfterPos(v,S=1){if(this.options.simulateDoubleBreak&&v==this.options.simulateBreak)return"";let{text:R,from:T}=this.lineAt(v,S);return R.slice(v-T,Math.min(R.length,v+100-T))}column(v,S=1){let{text:R,from:T}=this.lineAt(v,S),A=this.countColumn(R,v-T),k=this.options.overrideIndentation?this.options.overrideIndentation(T):-1;return k>-1&&(A+=k-this.countColumn(R,R.search(/\S|$/))),A}countColumn(v,S=v.length){return countColumn(v,this.state.tabSize,S)}lineIndent(v,S=1){let{text:R,from:T}=this.lineAt(v,S),A=this.options.overrideIndentation;if(A){let k=A(T);if(k>-1)return k}return this.countColumn(R,R.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(_,v,S){let R=v.resolveStack(S),T=v.resolveInner(S,-1).resolve(S,0).enterUnfinishedNodesBefore(S);if(T!=R.node){let A=[];for(let k=T;k&&!(k.from<R.node.from||k.to>R.node.to||k.from==R.node.from&&k.type==R.node.type);k=k.parent)A.push(k);for(let k=A.length-1;k>=0;k--)R={node:A[k],next:R}}return indentFor(R,_,S)}function indentFor(_,v,S){for(let R=_;R;R=R.next){let T=indentStrategy(R.node);if(T)return T(TreeIndentContext.create(v,S,R))}return 0}function ignoreClosed(_){return _.pos==_.options.simulateBreak&&_.options.simulateDoubleBreak}function indentStrategy(_){let v=_.type.prop(indentNodeProp);if(v)return v;let S=_.firstChild,R;if(S&&(R=S.type.prop(NodeProp.closedBy))){let T=_.lastChild,A=T&&R.indexOf(T.name)>-1;return k=>delimitedStrategy(k,!0,1,void 0,A&&!ignoreClosed(k)?T.from:void 0)}return _.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(v,S,R){super(v.state,v.options),this.base=v,this.pos=S,this.context=R}get node(){return this.context.node}static create(v,S,R){return new TreeIndentContext(v,S,R)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(v){let S=this.state.doc.lineAt(v.from);for(;;){let R=v.resolve(S.from);for(;R.parent&&R.parent.from==R.from;)R=R.parent;if(isParent(R,v))break;S=this.state.doc.lineAt(R.from)}return this.lineIndent(S.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(_,v){for(let S=v;S;S=S.parent)if(_==S)return!0;return!1}function bracketedAligned(_){let v=_.node,S=v.childAfter(v.from),R=v.lastChild;if(!S)return null;let T=_.options.simulateBreak,A=_.state.doc.lineAt(S.from),k=T==null||T<=A.from?A.to:Math.min(A.to,T);for(let M=S.to;;){let P=v.childAfter(M);if(!P||P==R)return null;if(!P.type.isSkipped){if(P.from>=k)return null;let D=/^ */.exec(A.text.slice(S.to-A.from))[0].length;return{from:S.from,to:S.to+D}}M=P.to}}function delimitedStrategy(_,v,S,R,T){let A=_.textAfter,k=A.match(/^\s*/)[0].length,M=R&&A.slice(k,k+R.length)==R||T==_.pos+k,P=bracketedAligned(_);return P?M?_.column(P.from):_.column(P.to):_.baseIndent+(M?0:_.unit*S)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(_=>{if(!_.docChanged||!_.isUserEvent("input.type")&&!_.isUserEvent("input.complete"))return _;let v=_.startState.languageDataAt("indentOnInput",_.startState.selection.main.head);if(!v.length)return _;let S=_.newDoc,{head:R}=_.newSelection.main,T=S.lineAt(R);if(R>T.from+DontIndentBeyond)return _;let A=S.sliceString(T.from,R);if(!v.some(D=>D.test(A)))return _;let{state:k}=_,M=-1,P=[];for(let{head:D}of k.selection.ranges){let L=k.doc.lineAt(D);if(L.from==M)continue;M=L.from;let q=getIndentation(k,L.from);if(q==null)continue;let B=/^\s*/.exec(L.text)[0],F=indentString(k,q);B!=F&&P.push({from:L.from,to:L.from+B.length,insert:F})}return P.length?[_,{changes:P,sequential:!0}]:_})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function syntaxFolding(_,v,S){let R=syntaxTree(_);if(R.length<S)return null;let T=R.resolveStack(S,1),A=null;for(let k=T;k;k=k.next){let M=k.node;if(M.to<=S||M.from>S)continue;if(A&&M.from<v)break;let P=M.type.prop(foldNodeProp);if(P&&(M.to<R.length-50||R.length==_.doc.length||!isUnfinished(M))){let D=P(M,_);D&&D.from<=S&&D.from>=v&&D.to>S&&(A=D)}}return A}function isUnfinished(_){let v=_.lastChild;return v&&v.to==_.to&&v.type.isError}function foldable(_,v,S){for(let R of _.facet(foldService)){let T=R(_,v,S);if(T)return T}return syntaxFolding(_,v,S)}function mapRange(_,v){let S=v.mapPos(_.from,1),R=v.mapPos(_.to,-1);return S>=R?void 0:{from:S,to:R}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(_){let v=[];for(let{head:S}of _.state.selection.ranges)v.some(R=>R.from<=S&&R.to>=S)||v.push(_.lineBlockAt(S));return v}const foldState=StateField.define({create(){return Decoration.none},update(_,v){v.isUserEvent("delete")&&v.changes.iterChangedRanges((S,R)=>_=clearTouchedFolds(_,S,R)),_=_.map(v.changes);for(let S of v.effects)if(S.is(foldEffect)&&!foldExists(_,S.value.from,S.value.to)){let{preparePlaceholder:R}=v.state.facet(foldConfig),T=R?Decoration.replace({widget:new PreparedFoldWidget(R(v.state,S.value))}):foldWidget;_=_.update({add:[T.range(S.value.from,S.value.to)]})}else S.is(unfoldEffect)&&(_=_.update({filter:(R,T)=>S.value.from!=R||S.value.to!=T,filterFrom:S.value.from,filterTo:S.value.to}));return v.selection&&(_=clearTouchedFolds(_,v.selection.main.head)),_},provide:_=>EditorView.decorations.from(_),toJSON(_,v){let S=[];return _.between(0,v.doc.length,(R,T)=>{S.push(R,T)}),S},fromJSON(_){if(!Array.isArray(_)||_.length%2)throw new RangeError("Invalid JSON for fold state");let v=[];for(let S=0;S<_.length;){let R=_[S++],T=_[S++];if(typeof R!="number"||typeof T!="number")throw new RangeError("Invalid JSON for fold state");v.push(foldWidget.range(R,T))}return Decoration.set(v,!0)}});function clearTouchedFolds(_,v,S=v){let R=!1;return _.between(v,S,(T,A)=>{T<S&&A>v&&(R=!0)}),R?_.update({filterFrom:v,filterTo:S,filter:(T,A)=>T>=S||A<=v}):_}function findFold(_,v,S){var R;let T=null;return(R=_.field(foldState,!1))===null||R===void 0||R.between(v,S,(A,k)=>{(!T||T.from>A)&&(T={from:A,to:k})}),T}function foldExists(_,v,S){let R=!1;return _.between(v,v,(T,A)=>{T==v&&A==S&&(R=!0)}),R}function maybeEnable(_,v){return _.field(foldState,!1)?v:v.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=_=>{for(let v of selectedLines(_)){let S=foldable(_.state,v.from,v.to);if(S)return _.dispatch({effects:maybeEnable(_.state,[foldEffect.of(S),announceFold(_,S)])}),!0}return!1},unfoldCode=_=>{if(!_.state.field(foldState,!1))return!1;let v=[];for(let S of selectedLines(_)){let R=findFold(_.state,S.from,S.to);R&&v.push(unfoldEffect.of(R),announceFold(_,R,!1))}return v.length&&_.dispatch({effects:v}),v.length>0};function announceFold(_,v,S=!0){let R=_.state.doc.lineAt(v.from).number,T=_.state.doc.lineAt(v.to).number;return EditorView.announce.of(`${_.state.phrase(S?"Folded lines":"Unfolded lines")} ${R} ${_.state.phrase("to")} ${T}.`)}const foldAll=_=>{let{state:v}=_,S=[];for(let R=0;R<v.doc.length;){let T=_.lineBlockAt(R),A=foldable(v,T.from,T.to);A&&S.push(foldEffect.of(A)),R=(A?_.lineBlockAt(A.to):T).to+1}return S.length&&_.dispatch({effects:maybeEnable(_.state,S)}),!!S.length},unfoldAll=_=>{let v=_.state.field(foldState,!1);if(!v||!v.size)return!1;let S=[];return v.between(0,_.state.doc.length,(R,T)=>{S.push(unfoldEffect.of({from:R,to:T}))}),_.dispatch({effects:S}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(_){return combineConfig(_,defaultConfig)}});function codeFolding(_){return[foldState,baseTheme$1$2]}function widgetToDOM(_,v){let{state:S}=_,R=S.facet(foldConfig),T=k=>{let M=_.lineBlockAt(_.posAtDOM(k.target)),P=findFold(_.state,M.from,M.to);P&&_.dispatch({effects:unfoldEffect.of(P)}),k.preventDefault()};if(R.placeholderDOM)return R.placeholderDOM(_,T,v);let A=document.createElement("span");return A.textContent=R.placeholderText,A.setAttribute("aria-label",S.phrase("folded code")),A.title=S.phrase("unfold"),A.className="cm-foldPlaceholder",A.onclick=T,A}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(_){return widgetToDOM(_,null)}}});class PreparedFoldWidget extends WidgetType{constructor(v){super(),this.value=v}eq(v){return this.value==v.value}toDOM(v){return widgetToDOM(v,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(v,S){super(),this.config=v,this.open=S}eq(v){return this.config==v.config&&this.open==v.open}toDOM(v){if(this.config.markerDOM)return this.config.markerDOM(this.open);let S=document.createElement("span");return S.textContent=this.open?this.config.openText:this.config.closedText,S.title=v.state.phrase(this.open?"Fold line":"Unfold line"),S}}function foldGutter(_={}){let v={...foldGutterDefaults,..._},S=new FoldMarker(v,!0),R=new FoldMarker(v,!1),T=ViewPlugin.fromClass(class{constructor(k){this.from=k.viewport.from,this.markers=this.buildMarkers(k)}update(k){(k.docChanged||k.viewportChanged||k.startState.facet(language)!=k.state.facet(language)||k.startState.field(foldState,!1)!=k.state.field(foldState,!1)||syntaxTree(k.startState)!=syntaxTree(k.state)||v.foldingChanged(k))&&(this.markers=this.buildMarkers(k.view))}buildMarkers(k){let M=new RangeSetBuilder;for(let P of k.viewportLineBlocks){let D=findFold(k.state,P.from,P.to)?R:foldable(k.state,P.from,P.to)?S:null;D&&M.add(P.from,P.from,D)}return M.finish()}}),{domEventHandlers:A}=v;return[T,gutter({class:"cm-foldGutter",markers(k){var M;return((M=k.plugin(T))===null||M===void 0?void 0:M.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(v,!1)},domEventHandlers:{...A,click:(k,M,P)=>{if(A.click&&A.click(k,M,P))return!0;let D=findFold(k.state,M.from,M.to);if(D)return k.dispatch({effects:unfoldEffect.of(D)}),!0;let L=foldable(k.state,M.from,M.to);return L?(k.dispatch({effects:foldEffect.of(L)}),!0):!1}}}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(v,S){this.specs=v;let R;function T(M){let P=StyleModule.newName();return(R||(R=Object.create(null)))["."+P]=M,P}const A=typeof S.all=="string"?S.all:S.all?T(S.all):void 0,k=S.scope;this.scope=k instanceof Language?M=>M.prop(languageDataProp)==k.data:k?M=>M==k:void 0,this.style=tagHighlighter(v.map(M=>({tag:M.tag,class:M.class||T(Object.assign({},M,{tag:null}))})),{all:A}).style,this.module=R?new StyleModule(R):null,this.themeType=S.themeType}static define(v,S){return new HighlightStyle(v,S||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(_){return _.length?[_[0]]:null}});function getHighlighters(_){let v=_.facet(highlighterFacet);return v.length?v:_.facet(fallbackHighlighter)}function syntaxHighlighting(_,v){let S=[treeHighlighter],R;return _ instanceof HighlightStyle&&(_.module&&S.push(EditorView.styleModule.of(_.module)),R=_.themeType),v?.fallback?S.push(fallbackHighlighter.of(_)):R?S.push(highlighterFacet.computeN([EditorView.darkTheme],T=>T.facet(EditorView.darkTheme)==(R=="dark")?[_]:[])):S.push(highlighterFacet.of(_)),S}class TreeHighlighter{constructor(v){this.markCache=Object.create(null),this.tree=syntaxTree(v.state),this.decorations=this.buildDeco(v,getHighlighters(v.state)),this.decoratedTo=v.viewport.to}update(v){let S=syntaxTree(v.state),R=getHighlighters(v.state),T=R!=getHighlighters(v.startState),{viewport:A}=v.view,k=v.changes.mapPos(this.decoratedTo,1);S.length<A.to&&!T&&S.type==this.tree.type&&k>=A.to?(this.decorations=this.decorations.map(v.changes),this.decoratedTo=k):(S!=this.tree||v.viewportChanged||T)&&(this.tree=S,this.decorations=this.buildDeco(v.view,R),this.decoratedTo=A.to)}buildDeco(v,S){if(!S||!this.tree.length)return Decoration.none;let R=new RangeSetBuilder;for(let{from:T,to:A}of v.visibleRanges)highlightTree(this.tree,S,(k,M,P)=>{R.add(k,M,this.markCache[P]||(this.markCache[P]=Decoration.mark({class:P})))},T,A);return R.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:_=>_.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(_){return combineConfig(_,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(_){let v=[],S=_.matched?matchingMark:nonmatchingMark;return v.push(S.range(_.start.from,_.start.to)),_.end&&v.push(S.range(_.end.from,_.end.to)),v}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(_,v){if(!v.docChanged&&!v.selection)return _;let S=[],R=v.state.facet(bracketMatchingConfig);for(let T of v.state.selection.ranges){if(!T.empty)continue;let A=matchBrackets(v.state,T.head,-1,R)||T.head>0&&matchBrackets(v.state,T.head-1,1,R)||R.afterCursor&&(matchBrackets(v.state,T.head,1,R)||T.head<v.state.doc.length&&matchBrackets(v.state,T.head+1,-1,R));A&&(S=S.concat(R.renderMatch(A,v.state)))}return Decoration.set(S,!0)},provide:_=>EditorView.decorations.from(_)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(_={}){return[bracketMatchingConfig.of(_),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(_,v,S){let R=_.prop(v<0?NodeProp.openedBy:NodeProp.closedBy);if(R)return R;if(_.name.length==1){let T=S.indexOf(_.name);if(T>-1&&T%2==(v<0?1:0))return[S[T+v]]}return null}function findHandle(_){let v=_.type.prop(bracketMatchingHandle);return v?v(_.node):_}function matchBrackets(_,v,S,R={}){let T=R.maxScanDistance||DefaultScanDist,A=R.brackets||DefaultBrackets,k=syntaxTree(_),M=k.resolveInner(v,S);for(let P=M;P;P=P.parent){let D=matchingNodes(P.type,S,A);if(D&&P.from<P.to){let L=findHandle(P);if(L&&(S>0?v>=L.from&&v<L.to:v>L.from&&v<=L.to))return matchMarkedBrackets(_,v,S,P,L,D,A)}}return matchPlainBrackets(_,v,S,k,M.type,T,A)}function matchMarkedBrackets(_,v,S,R,T,A,k){let M=R.parent,P={from:T.from,to:T.to},D=0,L=M?.cursor();if(L&&(S<0?L.childBefore(R.from):L.childAfter(R.to)))do if(S<0?L.to<=R.from:L.from>=R.to){if(D==0&&A.indexOf(L.type.name)>-1&&L.from<L.to){let q=findHandle(L);return{start:P,end:q?{from:q.from,to:q.to}:void 0,matched:!0}}else if(matchingNodes(L.type,S,k))D++;else if(matchingNodes(L.type,-S,k)){if(D==0){let q=findHandle(L);return{start:P,end:q&&q.from<q.to?{from:q.from,to:q.to}:void 0,matched:!1}}D--}}while(S<0?L.prevSibling():L.nextSibling());return{start:P,matched:!1}}function matchPlainBrackets(_,v,S,R,T,A,k){let M=S<0?_.sliceDoc(v-1,v):_.sliceDoc(v,v+1),P=k.indexOf(M);if(P<0||P%2==0!=S>0)return null;let D={from:S<0?v-1:v,to:S>0?v+1:v},L=_.doc.iterRange(v,S>0?_.doc.length:0),q=0;for(let B=0;!L.next().done&&B<=A;){let F=L.value;S<0&&(B+=F.length);let j=v+B*S;for(let z=S>0?0:F.length-1,V=S>0?F.length:-1;z!=V;z+=S){let G=k.indexOf(F[z]);if(!(G<0||R.resolveInner(j+z,1).type!=T))if(G%2==0==S>0)q++;else{if(q==1)return{start:D,end:{from:j+z,to:j+z+1},matched:G>>1==P>>1};q--}}S>0&&(B+=F.length)}return L.done?{start:D,matched:!1}:null}function countCol(_,v,S,R=0,T=0){v==null&&(v=_.search(/[^\s\u00a0]/),v==-1&&(v=_.length));let A=T;for(let k=R;k<v;k++)_.charCodeAt(k)==9?A+=S-A%S:A++;return A}class StringStream{constructor(v,S,R,T){this.string=v,this.tabSize=S,this.indentUnit=R,this.overrideIndent=T,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(v){let S=this.string.charAt(this.pos),R;if(typeof v=="string"?R=S==v:R=S&&(v instanceof RegExp?v.test(S):v(S)),R)return++this.pos,S}eatWhile(v){let S=this.pos;for(;this.eat(v););return this.pos>S}eatSpace(){let v=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>v}skipToEnd(){this.pos=this.string.length}skipTo(v){let S=this.string.indexOf(v,this.pos);if(S>-1)return this.pos=S,!0}backUp(v){this.pos-=v}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var v;return(v=this.overrideIndent)!==null&&v!==void 0?v:countCol(this.string,null,this.tabSize)}match(v,S,R){if(typeof v=="string"){let T=k=>R?k.toLowerCase():k,A=this.string.substr(this.pos,v.length);return T(A)==T(v)?(S!==!1&&(this.pos+=v.length),!0):null}else{let T=this.string.slice(this.pos).match(v);return T&&T.index>0?null:(T&&S!==!1&&(this.pos+=T[0].length),T)}}current(){return this.string.slice(this.start,this.pos)}}function fullParser(_){return{name:_.name||"",token:_.token,blankLine:_.blankLine||(()=>{}),startState:_.startState||(()=>!0),copyState:_.copyState||defaultCopyState,indent:_.indent||(()=>null),languageData:_.languageData||{},tokenTable:_.tokenTable||noTokens,mergeTokens:_.mergeTokens!==!1}}function defaultCopyState(_){if(typeof _!="object")return _;let v={};for(let S in _){let R=_[S];v[S]=R instanceof Array?R.slice():R}return v}const IndentedFrom=new WeakMap;class StreamLanguage extends Language{constructor(v){let S=defineLanguageFacet(v.languageData),R=fullParser(v),T,A=new class extends Parser{createParse(k,M,P){return new Parse(T,k,M,P)}};super(S,A,[],v.name),this.topNode=docID(S,this),T=this,this.streamParser=R,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=v.tokenTable?new TokenTable(R.tokenTable):defaultTokenTable}static define(v){return new StreamLanguage(v)}getIndent(v){let S,{overrideIndentation:R}=v.options;R&&(S=IndentedFrom.get(v.state),S!=null&&S<v.pos-1e4&&(S=void 0));let T=findState(this,v.node.tree,v.node.from,v.node.from,S??v.pos),A,k;if(T?(k=T.state,A=T.pos+1):(k=this.streamParser.startState(v.unit),A=v.node.from),v.pos-A>1e4)return null;for(;A<v.pos;){let P=v.state.doc.lineAt(A),D=Math.min(v.pos,P.to);if(P.length){let L=R?R(P.from):-1,q=new StringStream(P.text,v.state.tabSize,v.unit,L<0?void 0:L);for(;q.pos<D-P.from;)readToken(this.streamParser.token,q,k)}else this.streamParser.blankLine(k,v.unit);if(D==v.pos)break;A=P.to+1}let M=v.lineAt(v.pos);return R&&S==null&&IndentedFrom.set(v.state,M.from),this.streamParser.indent(k,/^\s*(.*)/.exec(M.text)[1],v)}get allowsNesting(){return!1}}function findState(_,v,S,R,T){let A=S>=R&&S+v.length<=T&&v.prop(_.stateAfter);if(A)return{state:_.streamParser.copyState(A),pos:S+v.length};for(let k=v.children.length-1;k>=0;k--){let M=v.children[k],P=S+v.positions[k],D=M instanceof Tree&&P<T&&findState(_,M,P,R,T);if(D)return D}return null}function cutTree(_,v,S,R,T){if(T&&S<=0&&R>=v.length)return v;!T&&S==0&&v.type==_.topNode&&(T=!0);for(let A=v.children.length-1;A>=0;A--){let k=v.positions[A],M=v.children[A],P;if(k<R&&M instanceof Tree){if(!(P=cutTree(_,M,S-k,R-k,T)))break;return T?new Tree(v.type,v.children.slice(0,A).concat(P),v.positions.slice(0,A+1),k+P.length):P}}return null}function findStartInFragments(_,v,S,R,T){for(let A of v){let k=A.from+(A.openStart?25:0),M=A.to-(A.openEnd?25:0),P=k<=S&&M>S&&findState(_,A.tree,0-A.offset,S,M),D;if(P&&P.pos<=R&&(D=cutTree(_,A.tree,S+A.offset,P.pos+A.offset,!1)))return{state:P.state,tree:D}}return{state:_.streamParser.startState(T?getIndentUnit(T):4),tree:Tree.empty}}class Parse{constructor(v,S,R,T){this.lang=v,this.input=S,this.fragments=R,this.ranges=T,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=T[T.length-1].to;let A=ParseContext.get(),k=T[0].from,{state:M,tree:P}=findStartInFragments(v,R,k,this.to,A?.state);this.state=M,this.parsedPos=this.chunkStart=k+P.length;for(let D=0;D<P.children.length;D++)this.chunks.push(P.children[D]),this.chunkPos.push(P.positions[D]);A&&this.parsedPos<A.viewport.from-1e5&&T.some(D=>D.from<=A.viewport.from&&D.to>=A.viewport.from)&&(this.state=this.lang.streamParser.startState(getIndentUnit(A.state)),A.skipUntilInView(this.parsedPos,A.viewport.from),this.parsedPos=A.viewport.from),this.moveRangeIndex()}advance(){let v=ParseContext.get(),S=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),R=Math.min(S,this.chunkStart+512);for(v&&(R=Math.min(R,v.viewport.to));this.parsedPos<R;)this.parseLine(v);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=S?this.finish():v&&this.parsedPos>=v.viewport.to?(v.skipUntilInView(this.parsedPos,S),this.finish()):null}stopAt(v){this.stoppedAt=v}lineAfter(v){let S=this.input.chunk(v);if(this.input.lineChunks)S==`
`&&(S="");else{let R=S.indexOf(`
`);R>-1&&(S=S.slice(0,R))}return v+S.length<=this.to?S:S.slice(0,this.to-v)}nextLine(){let v=this.parsedPos,S=this.lineAfter(v),R=v+S.length;for(let T=this.rangeIndex;;){let A=this.ranges[T].to;if(A>=R||(S=S.slice(0,A-(R-S.length)),T++,T==this.ranges.length))break;let k=this.ranges[T].from,M=this.lineAfter(k);S+=M,R=k+M.length}return{line:S,end:R}}skipGapsTo(v,S,R){for(;;){let T=this.ranges[this.rangeIndex].to,A=v+S;if(R>0?T>A:T>=A)break;let k=this.ranges[++this.rangeIndex].from;S+=k-T}return S}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(v,S,R,T){let A=4;if(this.ranges.length>1){T=this.skipGapsTo(S,T,1),S+=T;let M=this.chunk.length;T=this.skipGapsTo(R,T,-1),R+=T,A+=this.chunk.length-M}let k=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&A==4&&k>=0&&this.chunk[k]==v&&this.chunk[k+2]==S?this.chunk[k+2]=R:this.chunk.push(v,S,R,A),T}parseLine(v){let{line:S,end:R}=this.nextLine(),T=0,{streamParser:A}=this.lang,k=new StringStream(S,v?v.state.tabSize:4,v?getIndentUnit(v.state):2);if(k.eol())A.blankLine(this.state,k.indentUnit);else for(;!k.eol();){let M=readToken(A.token,k,this.state);if(M&&(T=this.emitToken(this.lang.tokenTable.resolve(M),this.parsedPos+k.start,this.parsedPos+k.pos,T)),k.start>1e4)break}this.parsedPos=R,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let v=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet,topID:0,maxBufferLength:512,reused:this.chunkReused});v=new Tree(v.type,v.children,v.positions,v.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(v),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function readToken(_,v,S){v.start=v.pos;for(let R=0;R<10;R++){let T=_(v,S);if(v.pos>v.start)return T}throw new Error("Stream parser failed to advance stream.")}const noTokens=Object.create(null),typeArray=[NodeType.none],nodeSet=new NodeSet(typeArray),warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[_,v]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[_]=createTokenType(noTokens,v);class TokenTable{constructor(v){this.extra=v,this.table=Object.assign(Object.create(null),defaultTable)}resolve(v){return v?this.table[v]||(this.table[v]=createTokenType(this.extra,v)):0}}const defaultTokenTable=new TokenTable(noTokens);function warnForPart(_,v){warned.indexOf(_)>-1||(warned.push(_),console.warn(v))}function createTokenType(_,v){let S=[];for(let M of v.split(" ")){let P=[];for(let D of M.split(".")){let L=_[D]||tags[D];L?typeof L=="function"?P.length?P=P.map(L):warnForPart(D,`Modifier ${D} used at start of tag`):P.length?warnForPart(D,`Tag ${D} used as modifier`):P=Array.isArray(L)?L:[L]:warnForPart(D,`Unknown highlighting tag ${D}`)}for(let D of P)S.push(D)}if(!S.length)return 0;let R=v.replace(/ /g,"_"),T=R+" "+S.map(M=>M.id),A=byTag[T];if(A)return A.id;let k=byTag[T]=NodeType.define({id:typeArray.length,name:R,props:[styleTags({[R]:S})]});return typeArray.push(k),k.id}function docID(_,v){let S=NodeType.define({id:typeArray.length,name:"Document",props:[languageDataProp.add(()=>_),indentNodeProp.add(()=>R=>v.getIndent(R))],top:!0});return typeArray.push(S),S}Direction.RTL,Direction.LTR;const toggleComment=_=>{let{state:v}=_,S=v.doc.lineAt(v.selection.main.from),R=getConfig(_.state,S.from);return R.line?toggleLineComment(_):R.block?toggleBlockCommentByLine(_):!1};function command(_,v){return({state:S,dispatch:R})=>{if(S.readOnly)return!1;let T=_(v,S);return T?(R(S.update(T)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((_,v)=>changeBlockComment(_,v,selectedLineRanges(v)),0);function getConfig(_,v){let S=_.languageDataAt("commentTokens",v,1);return S.length?S[0]:{}}const SearchMargin=50;function findBlockComment(_,{open:v,close:S},R,T){let A=_.sliceDoc(R-SearchMargin,R),k=_.sliceDoc(T,T+SearchMargin),M=/\s*$/.exec(A)[0].length,P=/^\s*/.exec(k)[0].length,D=A.length-M;if(A.slice(D-v.length,D)==v&&k.slice(P,P+S.length)==S)return{open:{pos:R-M,margin:M&&1},close:{pos:T+P,margin:P&&1}};let L,q;T-R<=2*SearchMargin?L=q=_.sliceDoc(R,T):(L=_.sliceDoc(R,R+SearchMargin),q=_.sliceDoc(T-SearchMargin,T));let B=/^\s*/.exec(L)[0].length,F=/\s*$/.exec(q)[0].length,j=q.length-F-S.length;return L.slice(B,B+v.length)==v&&q.slice(j,j+S.length)==S?{open:{pos:R+B+v.length,margin:/\s/.test(L.charAt(B+v.length))?1:0},close:{pos:T-F-S.length,margin:/\s/.test(q.charAt(j-1))?1:0}}:null}function selectedLineRanges(_){let v=[];for(let S of _.selection.ranges){let R=_.doc.lineAt(S.from),T=S.to<=R.to?R:_.doc.lineAt(S.to);T.from>R.from&&T.from==S.to&&(T=S.to==R.to+1?R:_.doc.lineAt(S.to-1));let A=v.length-1;A>=0&&v[A].to>R.from?v[A].to=T.to:v.push({from:R.from+/^\s*/.exec(R.text)[0].length,to:T.to})}return v}function changeBlockComment(_,v,S=v.selection.ranges){let R=S.map(A=>getConfig(v,A.from).block);if(!R.every(A=>A))return null;let T=S.map((A,k)=>findBlockComment(v,R[k],A.from,A.to));if(_!=2&&!T.every(A=>A))return{changes:v.changes(S.map((A,k)=>T[k]?[]:[{from:A.from,insert:R[k].open+" "},{from:A.to,insert:" "+R[k].close}]))};if(_!=1&&T.some(A=>A)){let A=[];for(let k=0,M;k<T.length;k++)if(M=T[k]){let P=R[k],{open:D,close:L}=M;A.push({from:D.pos-P.open.length,to:D.pos+D.margin},{from:L.pos-L.margin,to:L.pos+P.close.length})}return{changes:A}}return null}function changeLineComment(_,v,S=v.selection.ranges){let R=[],T=-1;for(let{from:A,to:k}of S){let M=R.length,P=1e9,D=getConfig(v,A).line;if(D){for(let L=A;L<=k;){let q=v.doc.lineAt(L);if(q.from>T&&(A==k||k>q.from)){T=q.from;let B=/^\s*/.exec(q.text)[0].length,F=B==q.length,j=q.text.slice(B,B+D.length)==D?B:-1;B<q.text.length&&B<P&&(P=B),R.push({line:q,comment:j,token:D,indent:B,empty:F,single:!1})}L=q.to+1}if(P<1e9)for(let L=M;L<R.length;L++)R[L].indent<R[L].line.text.length&&(R[L].indent=P);R.length==M+1&&(R[M].single=!0)}}if(_!=2&&R.some(A=>A.comment<0&&(!A.empty||A.single))){let A=[];for(let{line:M,token:P,indent:D,empty:L,single:q}of R)(q||!L)&&A.push({from:M.from+D,insert:P+" "});let k=v.changes(A);return{changes:k,selection:v.selection.map(k,1)}}else if(_!=1&&R.some(A=>A.comment>=0)){let A=[];for(let{line:k,comment:M,token:P}of R)if(M>=0){let D=k.from+M,L=D+P.length;k.text[L-k.from]==" "&&L++,A.push({from:D,to:L})}return{changes:A}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(_){return combineConfig(_,{minDepth:100,newGroupDelay:500,joinToEvent:(v,S)=>S},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(v,S)=>(R,T)=>v(R,T)||S(R,T)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(_,v){let S=v.state.facet(historyConfig),R=v.annotation(fromHistory);if(R){let P=HistEvent.fromTransaction(v,R.selection),D=R.side,L=D==0?_.undone:_.done;return P?L=updateBranch(L,L.length,S.minDepth,P):L=addSelection(L,v.startState.selection),new HistoryState(D==0?R.rest:L,D==0?L:R.rest)}let T=v.annotation(isolateHistory);if((T=="full"||T=="before")&&(_=_.isolate()),v.annotation(Transaction.addToHistory)===!1)return v.changes.empty?_:_.addMapping(v.changes.desc);let A=HistEvent.fromTransaction(v),k=v.annotation(Transaction.time),M=v.annotation(Transaction.userEvent);return A?_=_.addChanges(A,k,M,S,v):v.selection&&(_=_.addSelection(v.startState.selection,k,M,S.newGroupDelay)),(T=="full"||T=="after")&&(_=_.isolate()),_},toJSON(_){return{done:_.done.map(v=>v.toJSON()),undone:_.undone.map(v=>v.toJSON())}},fromJSON(_){return new HistoryState(_.done.map(HistEvent.fromJSON),_.undone.map(HistEvent.fromJSON))}});function history(_={}){return[historyField_,historyConfig.of(_),EditorView.domEventHandlers({beforeinput(v,S){let R=v.inputType=="historyUndo"?undo:v.inputType=="historyRedo"?redo:null;return R?(v.preventDefault(),R(S)):!1}})]}function cmd(_,v){return function({state:S,dispatch:R}){if(!v&&S.readOnly)return!1;let T=S.field(historyField_,!1);if(!T)return!1;let A=T.pop(_,S,v);return A?(R(A),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(v,S,R,T,A){this.changes=v,this.effects=S,this.mapped=R,this.startSelection=T,this.selectionsAfter=A}setSelAfter(v){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,v)}toJSON(){var v,S,R;return{changes:(v=this.changes)===null||v===void 0?void 0:v.toJSON(),mapped:(S=this.mapped)===null||S===void 0?void 0:S.toJSON(),startSelection:(R=this.startSelection)===null||R===void 0?void 0:R.toJSON(),selectionsAfter:this.selectionsAfter.map(T=>T.toJSON())}}static fromJSON(v){return new HistEvent(v.changes&&ChangeSet.fromJSON(v.changes),[],v.mapped&&ChangeDesc.fromJSON(v.mapped),v.startSelection&&EditorSelection.fromJSON(v.startSelection),v.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(v,S){let R=none$1;for(let T of v.startState.facet(invertedEffects)){let A=T(v);A.length&&(R=R.concat(A))}return!R.length&&v.changes.empty?null:new HistEvent(v.changes.invert(v.startState.doc),R,void 0,S||v.startState.selection,none$1)}static selection(v){return new HistEvent(void 0,none$1,void 0,void 0,v)}}function updateBranch(_,v,S,R){let T=v+1>S+20?v-S-1:0,A=_.slice(T,v);return A.push(R),A}function isAdjacent(_,v){let S=[],R=!1;return _.iterChangedRanges((T,A)=>S.push(T,A)),v.iterChangedRanges((T,A,k,M)=>{for(let P=0;P<S.length;){let D=S[P++],L=S[P++];M>=D&&k<=L&&(R=!0)}}),R}function eqSelectionShape(_,v){return _.ranges.length==v.ranges.length&&_.ranges.filter((S,R)=>S.empty!=v.ranges[R].empty).length===0}function conc(_,v){return _.length?v.length?_.concat(v):_:v}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(_,v){if(_.length){let S=_[_.length-1],R=S.selectionsAfter.slice(Math.max(0,S.selectionsAfter.length-MaxSelectionsPerEvent));return R.length&&R[R.length-1].eq(v)?_:(R.push(v),updateBranch(_,_.length-1,1e9,S.setSelAfter(R)))}else return[HistEvent.selection([v])]}function popSelection(_){let v=_[_.length-1],S=_.slice();return S[_.length-1]=v.setSelAfter(v.selectionsAfter.slice(0,v.selectionsAfter.length-1)),S}function addMappingToBranch(_,v){if(!_.length)return _;let S=_.length,R=none$1;for(;S;){let T=mapEvent(_[S-1],v,R);if(T.changes&&!T.changes.empty||T.effects.length){let A=_.slice(0,S);return A[S-1]=T,A}else v=T.mapped,S--,R=T.selectionsAfter}return R.length?[HistEvent.selection(R)]:none$1}function mapEvent(_,v,S){let R=conc(_.selectionsAfter.length?_.selectionsAfter.map(M=>M.map(v)):none$1,S);if(!_.changes)return HistEvent.selection(R);let T=_.changes.map(v),A=v.mapDesc(_.changes,!0),k=_.mapped?_.mapped.composeDesc(A):A;return new HistEvent(T,StateEffect.mapEffects(_.effects,v),k,_.startSelection.map(A),R)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(v,S,R=0,T=void 0){this.done=v,this.undone=S,this.prevTime=R,this.prevUserEvent=T}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(v,S,R,T,A){let k=this.done,M=k[k.length-1];return M&&M.changes&&!M.changes.empty&&v.changes&&(!R||joinableUserEvent.test(R))&&(!M.selectionsAfter.length&&S-this.prevTime<T.newGroupDelay&&T.joinToEvent(A,isAdjacent(M.changes,v.changes))||R=="input.type.compose")?k=updateBranch(k,k.length-1,T.minDepth,new HistEvent(v.changes.compose(M.changes),conc(StateEffect.mapEffects(v.effects,M.changes),M.effects),M.mapped,M.startSelection,none$1)):k=updateBranch(k,k.length,T.minDepth,v),new HistoryState(k,none$1,S,R)}addSelection(v,S,R,T){let A=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return A.length>0&&S-this.prevTime<T&&R==this.prevUserEvent&&R&&/^select($|\.)/.test(R)&&eqSelectionShape(A[A.length-1],v)?this:new HistoryState(addSelection(this.done,v),this.undone,S,R)}addMapping(v){return new HistoryState(addMappingToBranch(this.done,v),addMappingToBranch(this.undone,v),this.prevTime,this.prevUserEvent)}pop(v,S,R){let T=v==0?this.done:this.undone;if(T.length==0)return null;let A=T[T.length-1],k=A.selectionsAfter[0]||S.selection;if(R&&A.selectionsAfter.length)return S.update({selection:A.selectionsAfter[A.selectionsAfter.length-1],annotations:fromHistory.of({side:v,rest:popSelection(T),selection:k}),userEvent:v==0?"select.undo":"select.redo",scrollIntoView:!0});if(A.changes){let M=T.length==1?none$1:T.slice(0,T.length-1);return A.mapped&&(M=addMappingToBranch(M,A.mapped)),S.update({changes:A.changes,selection:A.startSelection,effects:A.effects,annotations:fromHistory.of({side:v,rest:M,selection:k}),filter:!1,userEvent:v==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(_,v){return EditorSelection.create(_.ranges.map(v),_.mainIndex)}function setSel(_,v){return _.update({selection:v,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:_,dispatch:v},S){let R=updateSel(_.selection,S);return R.eq(_.selection,!0)?!1:(v(setSel(_,R)),!0)}function rangeEnd(_,v){return EditorSelection.cursor(v?_.to:_.from)}function cursorByChar(_,v){return moveSel(_,S=>S.empty?_.moveByChar(S,v):rangeEnd(S,v))}function ltrAtCursor(_){return _.textDirectionAt(_.state.selection.main.head)==Direction.LTR}const cursorCharLeft=_=>cursorByChar(_,!ltrAtCursor(_)),cursorCharRight=_=>cursorByChar(_,ltrAtCursor(_));function cursorByGroup(_,v){return moveSel(_,S=>S.empty?_.moveByGroup(S,v):rangeEnd(S,v))}const cursorGroupLeft=_=>cursorByGroup(_,!ltrAtCursor(_)),cursorGroupRight=_=>cursorByGroup(_,ltrAtCursor(_));function interestingNode(_,v,S){if(v.type.prop(S))return!0;let R=v.to-v.from;return R&&(R>2||/[^\s,.;:]/.test(_.sliceDoc(v.from,v.to)))||v.firstChild}function moveBySyntax(_,v,S){let R=syntaxTree(_).resolveInner(v.head),T=S?NodeProp.closedBy:NodeProp.openedBy;for(let P=v.head;;){let D=S?R.childAfter(P):R.childBefore(P);if(!D)break;interestingNode(_,D,T)?R=D:P=S?D.to:D.from}let A=R.type.prop(T),k,M;return A&&(k=S?matchBrackets(_,R.from,1):matchBrackets(_,R.to,-1))&&k.matched?M=S?k.end.to:k.end.from:M=S?R.to:R.from,EditorSelection.cursor(M,S?-1:1)}const cursorSyntaxLeft=_=>moveSel(_,v=>moveBySyntax(_.state,v,!ltrAtCursor(_))),cursorSyntaxRight=_=>moveSel(_,v=>moveBySyntax(_.state,v,ltrAtCursor(_)));function cursorByLine(_,v){return moveSel(_,S=>{if(!S.empty)return rangeEnd(S,v);let R=_.moveVertically(S,v);return R.head!=S.head?R:_.moveToLineBoundary(S,v)})}const cursorLineUp=_=>cursorByLine(_,!1),cursorLineDown=_=>cursorByLine(_,!0);function pageInfo(_){let v=_.scrollDOM.clientHeight<_.scrollDOM.scrollHeight-2,S=0,R=0,T;if(v){for(let A of _.state.facet(EditorView.scrollMargins)){let k=A(_);k?.top&&(S=Math.max(k?.top,S)),k?.bottom&&(R=Math.max(k?.bottom,R))}T=_.scrollDOM.clientHeight-S-R}else T=(_.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:S,marginBottom:R,selfScroll:v,height:Math.max(_.defaultLineHeight,T-5)}}function cursorByPage(_,v){let S=pageInfo(_),{state:R}=_,T=updateSel(R.selection,k=>k.empty?_.moveVertically(k,v,S.height):rangeEnd(k,v));if(T.eq(R.selection))return!1;let A;if(S.selfScroll){let k=_.coordsAtPos(R.selection.main.head),M=_.scrollDOM.getBoundingClientRect(),P=M.top+S.marginTop,D=M.bottom-S.marginBottom;k&&k.top>P&&k.bottom<D&&(A=EditorView.scrollIntoView(T.main.head,{y:"start",yMargin:k.top-P}))}return _.dispatch(setSel(R,T),{effects:A}),!0}const cursorPageUp=_=>cursorByPage(_,!1),cursorPageDown=_=>cursorByPage(_,!0);function moveByLineBoundary(_,v,S){let R=_.lineBlockAt(v.head),T=_.moveToLineBoundary(v,S);if(T.head==v.head&&T.head!=(S?R.to:R.from)&&(T=_.moveToLineBoundary(v,S,!1)),!S&&T.head==R.from&&R.length){let A=/^\s*/.exec(_.state.sliceDoc(R.from,Math.min(R.from+100,R.to)))[0].length;A&&v.head!=R.from+A&&(T=EditorSelection.cursor(R.from+A))}return T}const cursorLineBoundaryForward=_=>moveSel(_,v=>moveByLineBoundary(_,v,!0)),cursorLineBoundaryBackward=_=>moveSel(_,v=>moveByLineBoundary(_,v,!1)),cursorLineBoundaryLeft=_=>moveSel(_,v=>moveByLineBoundary(_,v,!ltrAtCursor(_))),cursorLineBoundaryRight=_=>moveSel(_,v=>moveByLineBoundary(_,v,ltrAtCursor(_))),cursorLineStart=_=>moveSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).from,1)),cursorLineEnd=_=>moveSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).to,-1));function toMatchingBracket(_,v,S){let R=!1,T=updateSel(_.selection,A=>{let k=matchBrackets(_,A.head,-1)||matchBrackets(_,A.head,1)||A.head>0&&matchBrackets(_,A.head-1,1)||A.head<_.doc.length&&matchBrackets(_,A.head+1,-1);if(!k||!k.end)return A;R=!0;let M=k.start.from==A.head?k.end.to:k.end.from;return EditorSelection.cursor(M)});return R?(v(setSel(_,T)),!0):!1}const cursorMatchingBracket=({state:_,dispatch:v})=>toMatchingBracket(_,v);function extendSel(_,v){let S=updateSel(_.state.selection,R=>{let T=v(R);return EditorSelection.range(R.anchor,T.head,T.goalColumn,T.bidiLevel||void 0)});return S.eq(_.state.selection)?!1:(_.dispatch(setSel(_.state,S)),!0)}function selectByChar(_,v){return extendSel(_,S=>_.moveByChar(S,v))}const selectCharLeft=_=>selectByChar(_,!ltrAtCursor(_)),selectCharRight=_=>selectByChar(_,ltrAtCursor(_));function selectByGroup(_,v){return extendSel(_,S=>_.moveByGroup(S,v))}const selectGroupLeft=_=>selectByGroup(_,!ltrAtCursor(_)),selectGroupRight=_=>selectByGroup(_,ltrAtCursor(_)),selectSyntaxLeft=_=>extendSel(_,v=>moveBySyntax(_.state,v,!ltrAtCursor(_))),selectSyntaxRight=_=>extendSel(_,v=>moveBySyntax(_.state,v,ltrAtCursor(_)));function selectByLine(_,v){return extendSel(_,S=>_.moveVertically(S,v))}const selectLineUp=_=>selectByLine(_,!1),selectLineDown=_=>selectByLine(_,!0);function selectByPage(_,v){return extendSel(_,S=>_.moveVertically(S,v,pageInfo(_).height))}const selectPageUp=_=>selectByPage(_,!1),selectPageDown=_=>selectByPage(_,!0),selectLineBoundaryForward=_=>extendSel(_,v=>moveByLineBoundary(_,v,!0)),selectLineBoundaryBackward=_=>extendSel(_,v=>moveByLineBoundary(_,v,!1)),selectLineBoundaryLeft=_=>extendSel(_,v=>moveByLineBoundary(_,v,!ltrAtCursor(_))),selectLineBoundaryRight=_=>extendSel(_,v=>moveByLineBoundary(_,v,ltrAtCursor(_))),selectLineStart=_=>extendSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).from)),selectLineEnd=_=>extendSel(_,v=>EditorSelection.cursor(_.lineBlockAt(v.head).to)),cursorDocStart=({state:_,dispatch:v})=>(v(setSel(_,{anchor:0})),!0),cursorDocEnd=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.doc.length})),!0),selectDocStart=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.selection.main.anchor,head:0})),!0),selectDocEnd=({state:_,dispatch:v})=>(v(setSel(_,{anchor:_.selection.main.anchor,head:_.doc.length})),!0),selectAll=({state:_,dispatch:v})=>(v(_.update({selection:{anchor:0,head:_.doc.length},userEvent:"select"})),!0),selectLine=({state:_,dispatch:v})=>{let S=selectedLineBlocks(_).map(({from:R,to:T})=>EditorSelection.range(R,Math.min(T+1,_.doc.length)));return v(_.update({selection:EditorSelection.create(S),userEvent:"select"})),!0},selectParentSyntax=({state:_,dispatch:v})=>{let S=updateSel(_.selection,R=>{let T=syntaxTree(_),A=T.resolveStack(R.from,1);if(R.empty){let k=T.resolveStack(R.from,-1);k.node.from>=A.node.from&&k.node.to<=A.node.to&&(A=k)}for(let k=A;k;k=k.next){let{node:M}=k;if((M.from<R.from&&M.to>=R.to||M.to>R.to&&M.from<=R.from)&&k.next)return EditorSelection.range(M.to,M.from)}return R});return S.eq(_.selection)?!1:(v(setSel(_,S)),!0)};function addCursorVertically(_,v){let{state:S}=_,R=S.selection,T=S.selection.ranges.slice();for(let A of S.selection.ranges){let k=S.doc.lineAt(A.head);if(v?k.to<_.state.doc.length:k.from>0)for(let M=A;;){let P=_.moveVertically(M,v);if(P.head<k.from||P.head>k.to){T.some(D=>D.head==P.head)||T.push(P);break}else{if(P.head==M.head)break;M=P}}}return T.length==R.ranges.length?!1:(_.dispatch(setSel(S,EditorSelection.create(T,T.length-1))),!0)}const addCursorAbove=_=>addCursorVertically(_,!1),addCursorBelow=_=>addCursorVertically(_,!0),simplifySelection=({state:_,dispatch:v})=>{let S=_.selection,R=null;return S.ranges.length>1?R=EditorSelection.create([S.main]):S.main.empty||(R=EditorSelection.create([EditorSelection.cursor(S.main.head)])),R?(v(setSel(_,R)),!0):!1};function deleteBy(_,v){if(_.state.readOnly)return!1;let S="delete.selection",{state:R}=_,T=R.changeByRange(A=>{let{from:k,to:M}=A;if(k==M){let P=v(A);P<k?(S="delete.backward",P=skipAtomic(_,P,!1)):P>k&&(S="delete.forward",P=skipAtomic(_,P,!0)),k=Math.min(k,P),M=Math.max(M,P)}else k=skipAtomic(_,k,!1),M=skipAtomic(_,M,!0);return k==M?{range:A}:{changes:{from:k,to:M},range:EditorSelection.cursor(k,k<A.head?-1:1)}});return T.changes.empty?!1:(_.dispatch(R.update(T,{scrollIntoView:!0,userEvent:S,effects:S=="delete.selection"?EditorView.announce.of(R.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(_,v,S){if(_ instanceof EditorView)for(let R of _.state.facet(EditorView.atomicRanges).map(T=>T(_)))R.between(v,v,(T,A)=>{T<v&&A>v&&(v=S?A:T)});return v}const deleteByChar=(_,v,S)=>deleteBy(_,R=>{let T=R.from,{state:A}=_,k=A.doc.lineAt(T),M,P;if(S&&!v&&T>k.from&&T<k.from+200&&!/[^ \t]/.test(M=k.text.slice(0,T-k.from))){if(M[M.length-1]=="	")return T-1;let D=countColumn(M,A.tabSize),L=D%getIndentUnit(A)||getIndentUnit(A);for(let q=0;q<L&&M[M.length-1-q]==" ";q++)T--;P=T}else P=findClusterBreak(k.text,T-k.from,v,v)+k.from,P==T&&k.number!=(v?A.doc.lines:1)?P+=v?1:-1:!v&&/[\ufe00-\ufe0f]/.test(k.text.slice(P-k.from,T-k.from))&&(P=findClusterBreak(k.text,P-k.from,!1,!1)+k.from);return P}),deleteCharBackward=_=>deleteByChar(_,!1,!0),deleteCharForward=_=>deleteByChar(_,!0,!1),deleteByGroup=(_,v)=>deleteBy(_,S=>{let R=S.head,{state:T}=_,A=T.doc.lineAt(R),k=T.charCategorizer(R);for(let M=null;;){if(R==(v?A.to:A.from)){R==S.head&&A.number!=(v?T.doc.lines:1)&&(R+=v?1:-1);break}let P=findClusterBreak(A.text,R-A.from,v)+A.from,D=A.text.slice(Math.min(R,P)-A.from,Math.max(R,P)-A.from),L=k(D);if(M!=null&&L!=M)break;(D!=" "||R!=S.head)&&(M=L),R=P}return R}),deleteGroupBackward=_=>deleteByGroup(_,!1),deleteGroupForward=_=>deleteByGroup(_,!0),deleteToLineEnd=_=>deleteBy(_,v=>{let S=_.lineBlockAt(v.head).to;return v.head<S?S:Math.min(_.state.doc.length,v.head+1)}),deleteLineBoundaryBackward=_=>deleteBy(_,v=>{let S=_.moveToLineBoundary(v,!1).head;return v.head>S?S:Math.max(0,v.head-1)}),deleteLineBoundaryForward=_=>deleteBy(_,v=>{let S=_.moveToLineBoundary(v,!0).head;return v.head<S?S:Math.min(_.state.doc.length,v.head+1)}),splitLine=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=_.changeByRange(R=>({changes:{from:R.from,to:R.to,insert:Text.of(["",""])},range:EditorSelection.cursor(R.from)}));return v(_.update(S,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=_.changeByRange(R=>{if(!R.empty||R.from==0||R.from==_.doc.length)return{range:R};let T=R.from,A=_.doc.lineAt(T),k=T==A.from?T-1:findClusterBreak(A.text,T-A.from,!1)+A.from,M=T==A.to?T+1:findClusterBreak(A.text,T-A.from,!0)+A.from;return{changes:{from:k,to:M,insert:_.doc.slice(T,M).append(_.doc.slice(k,T))},range:EditorSelection.cursor(M)}});return S.changes.empty?!1:(v(_.update(S,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(_){let v=[],S=-1;for(let R of _.selection.ranges){let T=_.doc.lineAt(R.from),A=_.doc.lineAt(R.to);if(!R.empty&&R.to==A.from&&(A=_.doc.lineAt(R.to-1)),S>=T.number){let k=v[v.length-1];k.to=A.to,k.ranges.push(R)}else v.push({from:T.from,to:A.to,ranges:[R]});S=A.number+1}return v}function moveLine(_,v,S){if(_.readOnly)return!1;let R=[],T=[];for(let A of selectedLineBlocks(_)){if(S?A.to==_.doc.length:A.from==0)continue;let k=_.doc.lineAt(S?A.to+1:A.from-1),M=k.length+1;if(S){R.push({from:A.to,to:k.to},{from:A.from,insert:k.text+_.lineBreak});for(let P of A.ranges)T.push(EditorSelection.range(Math.min(_.doc.length,P.anchor+M),Math.min(_.doc.length,P.head+M)))}else{R.push({from:k.from,to:A.from},{from:A.to,insert:_.lineBreak+k.text});for(let P of A.ranges)T.push(EditorSelection.range(P.anchor-M,P.head-M))}}return R.length?(v(_.update({changes:R,scrollIntoView:!0,selection:EditorSelection.create(T,_.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:_,dispatch:v})=>moveLine(_,v,!1),moveLineDown=({state:_,dispatch:v})=>moveLine(_,v,!0);function copyLine(_,v,S){if(_.readOnly)return!1;let R=[];for(let T of selectedLineBlocks(_))S?R.push({from:T.from,insert:_.doc.slice(T.from,T.to)+_.lineBreak}):R.push({from:T.to,insert:_.lineBreak+_.doc.slice(T.from,T.to)});return v(_.update({changes:R,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:_,dispatch:v})=>copyLine(_,v,!1),copyLineDown=({state:_,dispatch:v})=>copyLine(_,v,!0),deleteLine=_=>{if(_.state.readOnly)return!1;let{state:v}=_,S=v.changes(selectedLineBlocks(v).map(({from:T,to:A})=>(T>0?T--:A<v.doc.length&&A++,{from:T,to:A}))),R=updateSel(v.selection,T=>{let A;if(_.lineWrapping){let k=_.lineBlockAt(T.head),M=_.coordsAtPos(T.head,T.assoc||1);M&&(A=k.bottom+_.documentTop-M.bottom+_.defaultLineHeight/2)}return _.moveVertically(T,!0,A)}).map(S);return _.dispatch({changes:S,selection:R,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(_,v){if(/\(\)|\[\]|\{\}/.test(_.sliceDoc(v-1,v+1)))return{from:v,to:v};let S=syntaxTree(_).resolveInner(v),R=S.childBefore(v),T=S.childAfter(v),A;return R&&T&&R.to<=v&&T.from>=v&&(A=R.type.prop(NodeProp.closedBy))&&A.indexOf(T.name)>-1&&_.doc.lineAt(R.to).from==_.doc.lineAt(T.from).from&&!/\S/.test(_.sliceDoc(R.to,T.from))?{from:R.to,to:T.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(_){return({state:v,dispatch:S})=>{if(v.readOnly)return!1;let R=v.changeByRange(T=>{let{from:A,to:k}=T,M=v.doc.lineAt(A),P=!_&&A==k&&isBetweenBrackets(v,A);_&&(A=k=(k<=M.to?M:v.doc.lineAt(k)).to);let D=new IndentContext(v,{simulateBreak:A,simulateDoubleBreak:!!P}),L=getIndentation(D,A);for(L==null&&(L=countColumn(/^\s*/.exec(v.doc.lineAt(A).text)[0],v.tabSize));k<M.to&&/\s/.test(M.text[k-M.from]);)k++;P?{from:A,to:k}=P:A>M.from&&A<M.from+100&&!/\S/.test(M.text.slice(0,A))&&(A=M.from);let q=["",indentString(v,L)];return P&&q.push(indentString(v,D.lineIndent(M.from,-1))),{changes:{from:A,to:k,insert:Text.of(q)},range:EditorSelection.cursor(A+1+q[1].length)}});return S(v.update(R,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(_,v){let S=-1;return _.changeByRange(R=>{let T=[];for(let k=R.from;k<=R.to;){let M=_.doc.lineAt(k);M.number>S&&(R.empty||R.to>M.from)&&(v(M,T,R),S=M.number),k=M.to+1}let A=_.changes(T);return{changes:T,range:EditorSelection.range(A.mapPos(R.anchor,1),A.mapPos(R.head,1))}})}const indentSelection=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let S=Object.create(null),R=new IndentContext(_,{overrideIndentation:A=>{let k=S[A];return k??-1}}),T=changeBySelectedLine(_,(A,k,M)=>{let P=getIndentation(R,A.from);if(P==null)return;/\S/.test(A.text)||(P=0);let D=/^\s*/.exec(A.text)[0],L=indentString(_,P);(D!=L||M.from<A.from+D.length)&&(S[A.from]=P,k.push({from:A.from,to:A.from+D.length,insert:L}))});return T.changes.empty||v(_.update(T,{userEvent:"indent"})),!0},indentMore=({state:_,dispatch:v})=>_.readOnly?!1:(v(_.update(changeBySelectedLine(_,(S,R)=>{R.push({from:S.from,insert:_.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:_,dispatch:v})=>_.readOnly?!1:(v(_.update(changeBySelectedLine(_,(S,R)=>{let T=/^\s*/.exec(S.text)[0];if(!T)return;let A=countColumn(T,_.tabSize),k=0,M=indentString(_,Math.max(0,A-getIndentUnit(_)));for(;k<T.length&&k<M.length&&T.charCodeAt(k)==M.charCodeAt(k);)k++;R.push({from:S.from+k,to:S.from+T.length,insert:M.slice(k)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=_=>(_.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(_=>({mac:_.key,run:_.run,shift:_.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess},basicNormalize=typeof String.prototype.normalize=="function"?_=>_.normalize("NFKD"):_=>_;class SearchCursor{constructor(v,S,R=0,T=v.length,A,k){this.test=k,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=v.iterRange(R,T),this.bufferStart=R,this.normalize=A?M=>A(basicNormalize(M)):basicNormalize,this.query=this.normalize(S)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let v=this.peek();if(v<0)return this.done=!0,this;let S=fromCodePoint(v),R=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(v);let T=this.normalize(S);if(T.length)for(let A=0,k=R;;A++){let M=T.charCodeAt(A),P=this.match(M,k,this.bufferPos+this.bufferStart);if(A==T.length-1){if(P)return this.value=P,this;break}k==R&&A<S.length&&S.charCodeAt(A)==M&&k++}}}match(v,S,R){let T=null;for(let A=0;A<this.matches.length;A+=2){let k=this.matches[A],M=!1;this.query.charCodeAt(k)==v&&(k==this.query.length-1?T={from:this.matches[A+1],to:R}:(this.matches[A]++,M=!0)),M||(this.matches.splice(A,2),A-=2)}return this.query.charCodeAt(0)==v&&(this.query.length==1?T={from:S,to:R}:this.matches.push(1,S)),T&&this.test&&!this.test(T.from,T.to,this.buffer,this.bufferStart)&&(T=null),T}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(v,S,R,T=0,A=v.length){if(this.text=v,this.to=A,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(S))return new MultilineRegExpCursor(v,S,R,T,A);this.re=new RegExp(S,baseFlags+(R?.ignoreCase?"i":"")),this.test=R?.test,this.iter=v.iter();let k=v.lineAt(T);this.curLineStart=k.from,this.matchPos=toCharEnd(v,T),this.getLine(this.curLineStart)}getLine(v){this.iter.next(v),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let v=this.matchPos-this.curLineStart;;){this.re.lastIndex=v;let S=this.matchPos<=this.to&&this.re.exec(this.curLine);if(S){let R=this.curLineStart+S.index,T=R+S[0].length;if(this.matchPos=toCharEnd(this.text,T+(R==T?1:0)),R==this.curLineStart+this.curLine.length&&this.nextLine(),(R<T||R>this.value.to)&&(!this.test||this.test(R,T,S)))return this.value={from:R,to:T,match:S},this;v=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),v=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(v,S){this.from=v,this.text=S}get to(){return this.from+this.text.length}static get(v,S,R){let T=flattened.get(v);if(!T||T.from>=R||T.to<=S){let M=new FlattenedDoc(S,v.sliceString(S,R));return flattened.set(v,M),M}if(T.from==S&&T.to==R)return T;let{text:A,from:k}=T;return k>S&&(A=v.sliceString(S,k)+A,k=S),T.to<R&&(A+=v.sliceString(T.to,R)),flattened.set(v,new FlattenedDoc(k,A)),new FlattenedDoc(S,A.slice(S-k,R-k))}}class MultilineRegExpCursor{constructor(v,S,R,T,A){this.text=v,this.to=A,this.done=!1,this.value=empty,this.matchPos=toCharEnd(v,T),this.re=new RegExp(S,baseFlags+(R?.ignoreCase?"i":"")),this.test=R?.test,this.flat=FlattenedDoc.get(v,T,this.chunkEnd(T+5e3))}chunkEnd(v){return v>=this.to?this.to:this.text.lineAt(v).to}next(){for(;;){let v=this.re.lastIndex=this.matchPos-this.flat.from,S=this.re.exec(this.flat.text);if(S&&!S[0]&&S.index==v&&(this.re.lastIndex=v+1,S=this.re.exec(this.flat.text)),S){let R=this.flat.from+S.index,T=R+S[0].length;if((this.flat.to>=this.to||S.index+S[0].length<=this.flat.text.length-10)&&(!this.test||this.test(R,T,S)))return this.value={from:R,to:T,match:S},this.matchPos=toCharEnd(this.text,T+(R==T?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(_){try{return new RegExp(_,baseFlags),!0}catch{return!1}}function toCharEnd(_,v){if(v>=_.length)return v;let S=_.lineAt(v),R;for(;v<S.to&&(R=S.text.charCodeAt(v-S.from))>=56320&&R<57344;)v++;return v}function createLineDialog(_){let v=String(_.state.doc.lineAt(_.state.selection.main.head).number),S=crelt("input",{class:"cm-textfield",name:"line",value:v}),R=crelt("form",{class:"cm-gotoLine",onkeydown:A=>{A.keyCode==27?(A.preventDefault(),_.dispatch({effects:dialogEffect.of(!1)}),_.focus()):A.keyCode==13&&(A.preventDefault(),T())},onsubmit:A=>{A.preventDefault(),T()}},crelt("label",_.state.phrase("Go to line"),": ",S)," ",crelt("button",{class:"cm-button",type:"submit"},_.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{_.dispatch({effects:dialogEffect.of(!1)}),_.focus()},"aria-label":_.state.phrase("close"),type:"button"},[""]));function T(){let A=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(S.value);if(!A)return;let{state:k}=_,M=k.doc.lineAt(k.selection.main.head),[,P,D,L,q]=A,B=L?+L.slice(1):0,F=D?+D:M.number;if(D&&q){let V=F/100;P&&(V=V*(P=="-"?-1:1)+M.number/k.doc.lines),F=Math.round(k.doc.lines*V)}else D&&P&&(F=F*(P=="-"?-1:1)+M.number);let j=k.doc.line(Math.max(1,Math.min(k.doc.lines,F))),z=EditorSelection.cursor(j.from+Math.max(0,Math.min(B,j.length)));_.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(z.from,{y:"center"})],selection:z}),_.focus()}return{dom:R}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(_,v){for(let S of v.effects)S.is(dialogEffect)&&(_=S.value);return _},provide:_=>showPanel.from(_,v=>v?createLineDialog:null)}),gotoLine=_=>{let v=getPanel(_,createLineDialog);if(!v){let S=[dialogEffect.of(!0)];_.state.field(dialogField,!1)==null&&S.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),_.dispatch({effects:S}),v=getPanel(_,createLineDialog)}return v&&v.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(_){return combineConfig(_,defaultHighlightOptions,{highlightWordAroundCursor:(v,S)=>v||S,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(_){return[defaultTheme,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(_,v,S,R){return(S==0||_(v.sliceDoc(S-1,S))!=CharCategory.Word)&&(R==v.doc.length||_(v.sliceDoc(R,R+1))!=CharCategory.Word)}function insideWord(_,v,S,R){return _(v.sliceDoc(S,S+1))==CharCategory.Word&&_(v.sliceDoc(R-1,R))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.selectionSet||_.docChanged||_.viewportChanged)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let v=_.state.facet(highlightConfig),{state:S}=_,R=S.selection;if(R.ranges.length>1)return Decoration.none;let T=R.main,A,k=null;if(T.empty){if(!v.highlightWordAroundCursor)return Decoration.none;let P=S.wordAt(T.head);if(!P)return Decoration.none;k=S.charCategorizer(T.head),A=S.sliceDoc(P.from,P.to)}else{let P=T.to-T.from;if(P<v.minSelectionLength||P>200)return Decoration.none;if(v.wholeWords){if(A=S.sliceDoc(T.from,T.to),k=S.charCategorizer(T.head),!(insideWordBoundaries(k,S,T.from,T.to)&&insideWord(k,S,T.from,T.to)))return Decoration.none}else if(A=S.sliceDoc(T.from,T.to),!A)return Decoration.none}let M=[];for(let P of _.visibleRanges){let D=new SearchCursor(S.doc,A,P.from,P.to);for(;!D.next().done;){let{from:L,to:q}=D.value;if((!k||insideWordBoundaries(k,S,L,q))&&(T.empty&&L<=T.from&&q>=T.to?M.push(mainMatchDeco.range(L,q)):(L>=T.to||q<=T.from)&&M.push(matchDeco.range(L,q)),M.length>v.maxMatches))return Decoration.none}}return Decoration.set(M)}},{decorations:_=>_.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:_,dispatch:v})=>{let{selection:S}=_,R=EditorSelection.create(S.ranges.map(T=>_.wordAt(T.head)||EditorSelection.cursor(T.head)),S.mainIndex);return R.eq(S)?!1:(v(_.update({selection:R})),!0)};function findNextOccurrence(_,v){let{main:S,ranges:R}=_.selection,T=_.wordAt(S.head),A=T&&T.from==S.from&&T.to==S.to;for(let k=!1,M=new SearchCursor(_.doc,v,R[R.length-1].to);;)if(M.next(),M.done){if(k)return null;M=new SearchCursor(_.doc,v,0,Math.max(0,R[R.length-1].from-1)),k=!0}else{if(k&&R.some(P=>P.from==M.value.from))continue;if(A){let P=_.wordAt(M.value.from);if(!P||P.from!=M.value.from||P.to!=M.value.to)continue}return M.value}}const selectNextOccurrence=({state:_,dispatch:v})=>{let{ranges:S}=_.selection;if(S.some(A=>A.from===A.to))return selectWord({state:_,dispatch:v});let R=_.sliceDoc(S[0].from,S[0].to);if(_.selection.ranges.some(A=>_.sliceDoc(A.from,A.to)!=R))return!1;let T=findNextOccurrence(_,R);return T?(v(_.update({selection:_.selection.addRange(EditorSelection.range(T.from,T.to),!1),effects:EditorView.scrollIntoView(T.to)})),!0):!1},searchConfigFacet=Facet.define({combine(_){return combineConfig(_,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:v=>new SearchPanel(v),scrollToMatch:v=>EditorView.scrollIntoView(v)})}});class SearchQuery{constructor(v){this.search=v.search,this.caseSensitive=!!v.caseSensitive,this.literal=!!v.literal,this.regexp=!!v.regexp,this.replace=v.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!v.wholeWord}unquote(v){return this.literal?v:v.replace(/\\([nrt\\])/g,(S,R)=>R=="n"?`
`:R=="r"?"\r":R=="t"?"	":"\\")}eq(v){return this.search==v.search&&this.replace==v.replace&&this.caseSensitive==v.caseSensitive&&this.regexp==v.regexp&&this.wholeWord==v.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(v,S=0,R){let T=v.doc?v:EditorState.create({doc:v});return R==null&&(R=T.doc.length),this.regexp?regexpCursor(this,T,S,R):stringCursor(this,T,S,R)}}class QueryType{constructor(v){this.spec=v}}function stringCursor(_,v,S,R){return new SearchCursor(v.doc,_.unquoted,S,R,_.caseSensitive?void 0:T=>T.toLowerCase(),_.wholeWord?stringWordTest(v.doc,v.charCategorizer(v.selection.main.head)):void 0)}function stringWordTest(_,v){return(S,R,T,A)=>((A>S||A+T.length<R)&&(A=Math.max(0,S-2),T=_.sliceString(A,Math.min(_.length,R+2))),(v(charBefore(T,S-A))!=CharCategory.Word||v(charAfter(T,S-A))!=CharCategory.Word)&&(v(charAfter(T,R-A))!=CharCategory.Word||v(charBefore(T,R-A))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(v){super(v)}nextMatch(v,S,R){let T=stringCursor(this.spec,v,R,v.doc.length).nextOverlapping();if(T.done){let A=Math.min(v.doc.length,S+this.spec.unquoted.length);T=stringCursor(this.spec,v,0,A).nextOverlapping()}return T.done||T.value.from==S&&T.value.to==R?null:T.value}prevMatchInRange(v,S,R){for(let T=R;;){let A=Math.max(S,T-1e4-this.spec.unquoted.length),k=stringCursor(this.spec,v,A,T),M=null;for(;!k.nextOverlapping().done;)M=k.value;if(M)return M;if(A==S)return null;T-=1e4}}prevMatch(v,S,R){let T=this.prevMatchInRange(v,0,S);return T||(T=this.prevMatchInRange(v,Math.max(0,R-this.spec.unquoted.length),v.doc.length)),T&&(T.from!=S||T.to!=R)?T:null}getReplacement(v){return this.spec.unquote(this.spec.replace)}matchAll(v,S){let R=stringCursor(this.spec,v,0,v.doc.length),T=[];for(;!R.next().done;){if(T.length>=S)return null;T.push(R.value)}return T}highlight(v,S,R,T){let A=stringCursor(this.spec,v,Math.max(0,S-this.spec.unquoted.length),Math.min(R+this.spec.unquoted.length,v.doc.length));for(;!A.next().done;)T(A.value.from,A.value.to)}}function regexpCursor(_,v,S,R){return new RegExpCursor(v.doc,_.search,{ignoreCase:!_.caseSensitive,test:_.wholeWord?regexpWordTest(v.charCategorizer(v.selection.main.head)):void 0},S,R)}function charBefore(_,v){return _.slice(findClusterBreak(_,v,!1),v)}function charAfter(_,v){return _.slice(v,findClusterBreak(_,v))}function regexpWordTest(_){return(v,S,R)=>!R[0].length||(_(charBefore(R.input,R.index))!=CharCategory.Word||_(charAfter(R.input,R.index))!=CharCategory.Word)&&(_(charAfter(R.input,R.index+R[0].length))!=CharCategory.Word||_(charBefore(R.input,R.index+R[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(v,S,R){let T=regexpCursor(this.spec,v,R,v.doc.length).next();return T.done&&(T=regexpCursor(this.spec,v,0,S).next()),T.done?null:T.value}prevMatchInRange(v,S,R){for(let T=1;;T++){let A=Math.max(S,R-T*1e4),k=regexpCursor(this.spec,v,A,R),M=null;for(;!k.next().done;)M=k.value;if(M&&(A==S||M.from>A+10))return M;if(A==S)return null}}prevMatch(v,S,R){return this.prevMatchInRange(v,0,S)||this.prevMatchInRange(v,R,v.doc.length)}getReplacement(v){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(S,R)=>{if(R=="&")return v.match[0];if(R=="$")return"$";for(let T=R.length;T>0;T--){let A=+R.slice(0,T);if(A>0&&A<v.match.length)return v.match[A]+R.slice(T)}return S})}matchAll(v,S){let R=regexpCursor(this.spec,v,0,v.doc.length),T=[];for(;!R.next().done;){if(T.length>=S)return null;T.push(R.value)}return T}highlight(v,S,R,T){let A=regexpCursor(this.spec,v,Math.max(0,S-250),Math.min(R+250,v.doc.length));for(;!A.next().done;)T(A.value.from,A.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(_){return new SearchState(defaultQuery(_).create(),null)},update(_,v){for(let S of v.effects)S.is(setSearchQuery)?_=new SearchState(S.value.create(),_.panel):S.is(togglePanel$1)&&(_=new SearchState(_.query,S.value?createSearchPanel:null));return _},provide:_=>showPanel.from(_,v=>v.panel)});class SearchState{constructor(v,S){this.query=v,this.panel=S}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=this.highlight(_.state.field(searchState))}update(_){let v=_.state.field(searchState);(v!=_.startState.field(searchState)||_.docChanged||_.selectionSet||_.viewportChanged)&&(this.decorations=this.highlight(v))}highlight({query:_,panel:v}){if(!v||!_.spec.valid)return Decoration.none;let{view:S}=this,R=new RangeSetBuilder;for(let T=0,A=S.visibleRanges,k=A.length;T<k;T++){let{from:M,to:P}=A[T];for(;T<k-1&&P>A[T+1].from-500;)P=A[++T].to;_.highlight(S.state,M,P,(D,L)=>{let q=S.state.selection.ranges.some(B=>B.from==D&&B.to==L);R.add(D,L,q?selectedMatchMark:matchMark)})}return R.finish()}},{decorations:_=>_.decorations});function searchCommand(_){return v=>{let S=v.state.field(searchState,!1);return S&&S.query.spec.valid?_(v,S):openSearchPanel(v)}}const findNext=searchCommand((_,{query:v})=>{let{to:S}=_.state.selection.main,R=v.nextMatch(_.state,S,S);if(!R)return!1;let T=EditorSelection.single(R.from,R.to),A=_.state.facet(searchConfigFacet);return _.dispatch({selection:T,effects:[announceMatch(_,R),A.scrollToMatch(T.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),findPrevious=searchCommand((_,{query:v})=>{let{state:S}=_,{from:R}=S.selection.main,T=v.prevMatch(S,R,R);if(!T)return!1;let A=EditorSelection.single(T.from,T.to),k=_.state.facet(searchConfigFacet);return _.dispatch({selection:A,effects:[announceMatch(_,T),k.scrollToMatch(A.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),selectMatches=searchCommand((_,{query:v})=>{let S=v.matchAll(_.state,1e3);return!S||!S.length?!1:(_.dispatch({selection:EditorSelection.create(S.map(R=>EditorSelection.range(R.from,R.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:_,dispatch:v})=>{let S=_.selection;if(S.ranges.length>1||S.main.empty)return!1;let{from:R,to:T}=S.main,A=[],k=0;for(let M=new SearchCursor(_.doc,_.sliceDoc(R,T));!M.next().done;){if(A.length>1e3)return!1;M.value.from==R&&(k=A.length),A.push(EditorSelection.range(M.value.from,M.value.to))}return v(_.update({selection:EditorSelection.create(A,k),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((_,{query:v})=>{let{state:S}=_,{from:R,to:T}=S.selection.main;if(S.readOnly)return!1;let A=v.nextMatch(S,R,R);if(!A)return!1;let k=A,M=[],P,D,L=[];k.from==R&&k.to==T&&(D=S.toText(v.getReplacement(k)),M.push({from:k.from,to:k.to,insert:D}),k=v.nextMatch(S,k.from,k.to),L.push(EditorView.announce.of(S.phrase("replaced match on line $",S.doc.lineAt(R).number)+".")));let q=_.state.changes(M);return k&&(P=EditorSelection.single(k.from,k.to).map(q),L.push(announceMatch(_,k)),L.push(S.facet(searchConfigFacet).scrollToMatch(P.main,_))),_.dispatch({changes:q,selection:P,effects:L,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((_,{query:v})=>{if(_.state.readOnly)return!1;let S=v.matchAll(_.state,1e9).map(T=>{let{from:A,to:k}=T;return{from:A,to:k,insert:v.getReplacement(T)}});if(!S.length)return!1;let R=_.state.phrase("replaced $ matches",S.length)+".";return _.dispatch({changes:S,effects:EditorView.announce.of(R),userEvent:"input.replace.all"}),!0});function createSearchPanel(_){return _.state.facet(searchConfigFacet).createPanel(_)}function defaultQuery(_,v){var S,R,T,A,k;let M=_.selection.main,P=M.empty||M.to>M.from+100?"":_.sliceDoc(M.from,M.to);if(v&&!P)return v;let D=_.facet(searchConfigFacet);return new SearchQuery({search:((S=v?.literal)!==null&&S!==void 0?S:D.literal)?P:P.replace(/\n/g,"\\n"),caseSensitive:(R=v?.caseSensitive)!==null&&R!==void 0?R:D.caseSensitive,literal:(T=v?.literal)!==null&&T!==void 0?T:D.literal,regexp:(A=v?.regexp)!==null&&A!==void 0?A:D.regexp,wholeWord:(k=v?.wholeWord)!==null&&k!==void 0?k:D.wholeWord})}function getSearchInput(_){let v=getPanel(_,createSearchPanel);return v&&v.dom.querySelector("[main-field]")}function selectSearchInput(_){let v=getSearchInput(_);v&&v==_.root.activeElement&&v.select()}const openSearchPanel=_=>{let v=_.state.field(searchState,!1);if(v&&v.panel){let S=getSearchInput(_);if(S&&S!=_.root.activeElement){let R=defaultQuery(_.state,v.query.spec);R.valid&&_.dispatch({effects:setSearchQuery.of(R)}),S.focus(),S.select()}}else _.dispatch({effects:[togglePanel$1.of(!0),v?setSearchQuery.of(defaultQuery(_.state,v.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=_=>{let v=_.state.field(searchState,!1);if(!v||!v.panel)return!1;let S=getPanel(_,createSearchPanel);return S&&S.dom.contains(_.root.activeElement)&&_.focus(),_.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(v){this.view=v;let S=this.query=v.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:S.search,placeholder:phrase(v,"Find"),"aria-label":phrase(v,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:S.replace,placeholder:phrase(v,"Replace"),"aria-label":phrase(v,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:S.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:S.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:S.wholeWord,onchange:this.commit});function R(T,A,k){return crelt("button",{class:"cm-button",name:T,onclick:A,type:"button"},k)}this.dom=crelt("div",{onkeydown:T=>this.keydown(T),class:"cm-search"},[this.searchField,R("next",()=>findNext(v),[phrase(v,"next")]),R("prev",()=>findPrevious(v),[phrase(v,"previous")]),R("select",()=>selectMatches(v),[phrase(v,"all")]),crelt("label",null,[this.caseField,phrase(v,"match case")]),crelt("label",null,[this.reField,phrase(v,"regexp")]),crelt("label",null,[this.wordField,phrase(v,"by word")]),...v.state.readOnly?[]:[crelt("br"),this.replaceField,R("replace",()=>replaceNext(v),[phrase(v,"replace")]),R("replaceAll",()=>replaceAll(v),[phrase(v,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(v),"aria-label":phrase(v,"close"),type:"button"},[""])])}commit(){let v=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});v.eq(this.query)||(this.query=v,this.view.dispatch({effects:setSearchQuery.of(v)}))}keydown(v){runScopeHandlers(this.view,v,"search-panel")?v.preventDefault():v.keyCode==13&&v.target==this.searchField?(v.preventDefault(),(v.shiftKey?findPrevious:findNext)(this.view)):v.keyCode==13&&v.target==this.replaceField&&(v.preventDefault(),replaceNext(this.view))}update(v){for(let S of v.transactions)for(let R of S.effects)R.is(setSearchQuery)&&!R.value.eq(this.query)&&this.setQuery(R.value)}setQuery(v){this.query=v,this.searchField.value=v.search,this.replaceField.value=v.replace,this.caseField.checked=v.caseSensitive,this.reField.checked=v.regexp,this.wordField.checked=v.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(_,v){return _.state.phrase(v)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(_,{from:v,to:S}){let R=_.state.doc.lineAt(v),T=_.state.doc.lineAt(S).to,A=Math.max(R.from,v-AnnounceMargin),k=Math.min(T,S+AnnounceMargin),M=_.state.sliceDoc(A,k);if(A!=R.from){for(let P=0;P<AnnounceMargin;P++)if(!Break.test(M[P+1])&&Break.test(M[P])){M=M.slice(P);break}}if(k!=T){for(let P=M.length-1;P>M.length-AnnounceMargin;P--)if(!Break.test(M[P-1])&&Break.test(M[P])){M=M.slice(0,P);break}}return EditorView.announce.of(`${_.state.phrase("current match")}. ${M} ${_.state.phrase("on line")} ${R.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(v,S,R,T){this.state=v,this.pos=S,this.explicit=R,this.view=T,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(v){let S=syntaxTree(this.state).resolveInner(this.pos,-1);for(;S&&v.indexOf(S.name)<0;)S=S.parent;return S?{from:S.from,to:this.pos,text:this.state.sliceDoc(S.from,this.pos),type:S.type}:null}matchBefore(v){let S=this.state.doc.lineAt(this.pos),R=Math.max(S.from,this.pos-250),T=S.text.slice(R-S.from,this.pos-S.from),A=T.search(ensureAnchor(v,!1));return A<0?null:{from:R+A,to:this.pos,text:T.slice(A)}}get aborted(){return this.abortListeners==null}addEventListener(v,S,R){v=="abort"&&this.abortListeners&&(this.abortListeners.push(S),R&&R.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(_){let v=Object.keys(_).join(""),S=/\w/.test(v);return S&&(v=v.replace(/\w/g,"")),`[${S?"\\w":""}${v.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(_){let v=Object.create(null),S=Object.create(null);for(let{label:T}of _){v[T[0]]=!0;for(let A=1;A<T.length;A++)S[T[A]]=!0}let R=toSet(v)+toSet(S)+"*$";return[new RegExp("^"+R),new RegExp(R)]}function completeFromList(_){let v=_.map(T=>typeof T=="string"?{label:T}:T),[S,R]=v.every(T=>/^\w+$/.test(T.label))?[/\w*$/,/\w+$/]:prefixMatch(v);return T=>{let A=T.matchBefore(R);return A||T.explicit?{from:A?A.from:T.pos,options:v,validFor:S}:null}}class Option{constructor(v,S,R,T){this.completion=v,this.source=S,this.match=R,this.score=T}}function cur(_){return _.selection.main.from}function ensureAnchor(_,v){var S;let{source:R}=_,T=v&&R[0]!="^",A=R[R.length-1]!="$";return!T&&!A?_:new RegExp(`${T?"^":""}(?:${R})${A?"$":""}`,(S=_.flags)!==null&&S!==void 0?S:_.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(_,v,S,R){let{main:T}=_.selection,A=S-T.from,k=R-T.from;return{..._.changeByRange(M=>{if(M!=T&&S!=R&&_.sliceDoc(M.from+A,M.from+k)!=_.sliceDoc(S,R))return{range:M};let P=_.toText(v);return{changes:{from:M.from+A,to:R==T.from?M.to:M.from+k,insert:P},range:EditorSelection.cursor(M.from+A+P.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(_){if(!Array.isArray(_))return _;let v=SourceCache.get(_);return v||SourceCache.set(_,v=completeFromList(_)),v}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(v){this.pattern=v,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let S=0;S<v.length;){let R=codePointAt(v,S),T=codePointSize(R);this.chars.push(R);let A=v.slice(S,S+T),k=A.toUpperCase();this.folded.push(codePointAt(k==A?A.toLowerCase():k,0)),S+=T}this.astral=v.length!=this.chars.length}ret(v,S){return this.score=v,this.matched=S,this}match(v){if(this.pattern.length==0)return this.ret(-100,[]);if(v.length<this.pattern.length)return null;let{chars:S,folded:R,any:T,precise:A,byWord:k}=this;if(S.length==1){let W=codePointAt(v,0),Y=codePointSize(W),X=Y==v.length?0:-100;if(W!=S[0])if(W==R[0])X+=-200;else return null;return this.ret(X,[0,Y])}let M=v.indexOf(this.pattern);if(M==0)return this.ret(v.length==this.pattern.length?0:-100,[0,this.pattern.length]);let P=S.length,D=0;if(M<0){for(let W=0,Y=Math.min(v.length,200);W<Y&&D<P;){let X=codePointAt(v,W);(X==S[D]||X==R[D])&&(T[D++]=W),W+=codePointSize(X)}if(D<P)return null}let L=0,q=0,B=!1,F=0,j=-1,z=-1,V=/[a-z]/.test(v),G=!0;for(let W=0,Y=Math.min(v.length,200),X=0;W<Y&&q<P;){let ee=codePointAt(v,W);M<0&&(L<P&&ee==S[L]&&(A[L++]=W),F<P&&(ee==S[F]||ee==R[F]?(F==0&&(j=W),z=W+1,F++):F=0));let re,Q=ee<255?ee>=48&&ee<=57||ee>=97&&ee<=122?2:ee>=65&&ee<=90?1:0:(re=fromCodePoint(ee))!=re.toLowerCase()?1:re!=re.toUpperCase()?2:0;(!W||Q==1&&V||X==0&&Q!=0)&&(S[q]==ee||R[q]==ee&&(B=!0)?k[q++]=W:k.length&&(G=!1)),X=Q,W+=codePointSize(ee)}return q==P&&k[0]==0&&G?this.result(-100+(B?-200:0),k,v):F==P&&j==0?this.ret(-200-v.length+(z==v.length?0:-100),[0,z]):M>-1?this.ret(-700-v.length,[M,M+this.pattern.length]):F==P?this.ret(-900-v.length,[j,z]):q==P?this.result(-100+(B?-200:0)+-700+(G?0:-1100),k,v):S.length==2?null:this.result((T[0]?-700:0)+-200+-1100,T,v)}result(v,S,R){let T=[],A=0;for(let k of S){let M=k+(this.astral?codePointSize(codePointAt(R,k)):1);A&&T[A-1]==k?T[A-1]=M:(T[A++]=k,T[A++]=M)}return this.ret(v-R.length,T)}}class StrictMatcher{constructor(v){this.pattern=v,this.matched=[],this.score=0,this.folded=v.toLowerCase()}match(v){if(v.length<this.pattern.length)return null;let S=v.slice(0,this.pattern.length),R=S==this.pattern?0:S.toLowerCase()==this.folded?-200:null;return R==null?null:(this.matched=[0,S.length],this.score=R+(v.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(_){return combineConfig(_,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(v,S)=>(v.sortText||v.label).localeCompare(S.sortText||S.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(v,S)=>v&&S,closeOnBlur:(v,S)=>v&&S,icons:(v,S)=>v&&S,tooltipClass:(v,S)=>R=>joinClass(v(R),S(R)),optionClass:(v,S)=>R=>joinClass(v(R),S(R)),addToOptions:(v,S)=>v.concat(S),filterStrict:(v,S)=>v||S})}});function joinClass(_,v){return _?v?_+" "+v:_:v}function defaultPositionInfo(_,v,S,R,T,A){let k=_.textDirection==Direction.RTL,M=k,P=!1,D="top",L,q,B=v.left-T.left,F=T.right-v.right,j=R.right-R.left,z=R.bottom-R.top;if(M&&B<Math.min(j,F)?M=!1:!M&&F<Math.min(j,B)&&(M=!0),j<=(M?B:F))L=Math.max(T.top,Math.min(S.top,T.bottom-z))-v.top,q=Math.min(400,M?B:F);else{P=!0,q=Math.min(400,(k?v.right:T.right-v.left)-30);let W=T.bottom-v.bottom;W>=z||W>v.top?L=S.bottom-v.top:(D="bottom",L=v.bottom-S.top)}let V=(v.bottom-v.top)/A.offsetHeight,G=(v.right-v.left)/A.offsetWidth;return{style:`${D}: ${L/V}px; max-width: ${q/G}px`,class:"cm-completionInfo-"+(P?k?"left-narrow":"right-narrow":M?"left":"right")}}function optionContent(_){let v=_.addToOptions.slice();return _.icons&&v.push({render(S){let R=document.createElement("div");return R.classList.add("cm-completionIcon"),S.type&&R.classList.add(...S.type.split(/\s+/g).map(T=>"cm-completionIcon-"+T)),R.setAttribute("aria-hidden","true"),R},position:20}),v.push({render(S,R,T,A){let k=document.createElement("span");k.className="cm-completionLabel";let M=S.displayLabel||S.label,P=0;for(let D=0;D<A.length;){let L=A[D++],q=A[D++];L>P&&k.appendChild(document.createTextNode(M.slice(P,L)));let B=k.appendChild(document.createElement("span"));B.appendChild(document.createTextNode(M.slice(L,q))),B.className="cm-completionMatchedText",P=q}return P<M.length&&k.appendChild(document.createTextNode(M.slice(P))),k},position:50},{render(S){if(!S.detail)return null;let R=document.createElement("span");return R.className="cm-completionDetail",R.textContent=S.detail,R},position:80}),v.sort((S,R)=>S.position-R.position).map(S=>S.render)}function rangeAroundSelected(_,v,S){if(_<=S)return{from:0,to:_};if(v<0&&(v=0),v<=_>>1){let T=Math.floor(v/S);return{from:T*S,to:(T+1)*S}}let R=Math.floor((_-v)/S);return{from:_-(R+1)*S,to:_-R*S}}class CompletionTooltip{constructor(v,S,R){this.view=v,this.stateField=S,this.applyCompletion=R,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:P=>this.placeInfo(P),key:this},this.space=null,this.currentClass="";let T=v.state.field(S),{options:A,selected:k}=T.open,M=v.state.facet(completionConfig);this.optionContent=optionContent(M),this.optionClass=M.optionClass,this.tooltipClass=M.tooltipClass,this.range=rangeAroundSelected(A.length,k,M.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(v.state),this.dom.addEventListener("mousedown",P=>{let{options:D}=v.state.field(S).open;for(let L=P.target,q;L&&L!=this.dom;L=L.parentNode)if(L.nodeName=="LI"&&(q=/-(\d+)$/.exec(L.id))&&+q[1]<D.length){this.applyCompletion(v,D[+q[1]]),P.preventDefault();return}}),this.dom.addEventListener("focusout",P=>{let D=v.state.field(this.stateField,!1);D&&D.tooltip&&v.state.facet(completionConfig).closeOnBlur&&P.relatedTarget!=v.contentDOM&&v.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(A,T.id)}mount(){this.updateSel()}showOptions(v,S){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(v,S,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(v){var S;let R=v.state.field(this.stateField),T=v.startState.field(this.stateField);if(this.updateTooltipClass(v.state),R!=T){let{options:A,selected:k,disabled:M}=R.open;(!T.open||T.open.options!=A)&&(this.range=rangeAroundSelected(A.length,k,v.state.facet(completionConfig).maxRenderedOptions),this.showOptions(A,R.id)),this.updateSel(),M!=((S=T.open)===null||S===void 0?void 0:S.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!M)}}updateTooltipClass(v){let S=this.tooltipClass(v);if(S!=this.currentClass){for(let R of this.currentClass.split(" "))R&&this.dom.classList.remove(R);for(let R of S.split(" "))R&&this.dom.classList.add(R);this.currentClass=S}}positioned(v){this.space=v,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let v=this.view.state.field(this.stateField),S=v.open;(S.selected>-1&&S.selected<this.range.from||S.selected>=this.range.to)&&(this.range=rangeAroundSelected(S.options.length,S.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(S.options,v.id));let R=this.updateSelectedOption(S.selected);if(R){this.destroyInfo();let{completion:T}=S.options[S.selected],{info:A}=T;if(!A)return;let k=typeof A=="string"?document.createTextNode(A):A(T);if(!k)return;"then"in k?k.then(M=>{M&&this.view.state.field(this.stateField,!1)==v&&this.addInfoPane(M,T)}).catch(M=>logException(this.view.state,M,"completion info")):(this.addInfoPane(k,T),R.setAttribute("aria-describedby",this.info.id))}}addInfoPane(v,S){this.destroyInfo();let R=this.info=document.createElement("div");if(R.className="cm-tooltip cm-completionInfo",R.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),v.nodeType!=null)R.appendChild(v),this.infoDestroy=null;else{let{dom:T,destroy:A}=v;R.appendChild(T),this.infoDestroy=A||null}this.dom.appendChild(R),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(v){let S=null;for(let R=this.list.firstChild,T=this.range.from;R;R=R.nextSibling,T++)R.nodeName!="LI"||!R.id?T--:T==v?R.hasAttribute("aria-selected")||(R.setAttribute("aria-selected","true"),S=R):R.hasAttribute("aria-selected")&&(R.removeAttribute("aria-selected"),R.removeAttribute("aria-describedby"));return S&&scrollIntoView(this.list,S),S}measureInfo(){let v=this.dom.querySelector("[aria-selected]");if(!v||!this.info)return null;let S=this.dom.getBoundingClientRect(),R=this.info.getBoundingClientRect(),T=v.getBoundingClientRect(),A=this.space;if(!A){let k=this.dom.ownerDocument.documentElement;A={left:0,top:0,right:k.clientWidth,bottom:k.clientHeight}}return T.top>Math.min(A.bottom,S.bottom)-10||T.bottom<Math.max(A.top,S.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,S,T,R,A,this.dom)}placeInfo(v){this.info&&(v?(v.style&&(this.info.style.cssText=v.style),this.info.className="cm-tooltip cm-completionInfo "+(v.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(v,S,R){const T=document.createElement("ul");T.id=S,T.setAttribute("role","listbox"),T.setAttribute("aria-expanded","true"),T.setAttribute("aria-label",this.view.state.phrase("Completions")),T.addEventListener("mousedown",k=>{k.target==T&&k.preventDefault()});let A=null;for(let k=R.from;k<R.to;k++){let{completion:M,match:P}=v[k],{section:D}=M;if(D){let B=typeof D=="string"?D:D.name;if(B!=A&&(k>R.from||R.from==0))if(A=B,typeof D!="string"&&D.header)T.appendChild(D.header(D));else{let F=T.appendChild(document.createElement("completion-section"));F.textContent=B}}const L=T.appendChild(document.createElement("li"));L.id=S+"-"+k,L.setAttribute("role","option");let q=this.optionClass(M);q&&(L.className=q);for(let B of this.optionContent){let F=B(M,this.view.state,this.view,P);F&&L.appendChild(F)}}return R.from&&T.classList.add("cm-completionListIncompleteTop"),R.to<v.length&&T.classList.add("cm-completionListIncompleteBottom"),T}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(_,v){return S=>new CompletionTooltip(S,_,v)}function scrollIntoView(_,v){let S=_.getBoundingClientRect(),R=v.getBoundingClientRect(),T=S.height/_.offsetHeight;R.top<S.top?_.scrollTop-=(S.top-R.top)/T:R.bottom>S.bottom&&(_.scrollTop+=(R.bottom-S.bottom)/T)}function score(_){return(_.boost||0)*100+(_.apply?10:0)+(_.info?5:0)+(_.type?1:0)}function sortOptions(_,v){let S=[],R=null,T=null,A=L=>{S.push(L);let{section:q}=L.completion;if(q){R||(R=[]);let B=typeof q=="string"?q:q.name;R.some(F=>F.name==B)||R.push(typeof q=="string"?{name:B}:q)}},k=v.facet(completionConfig);for(let L of _)if(L.hasResult()){let q=L.result.getMatch;if(L.result.filter===!1)for(let B of L.result.options)A(new Option(B,L.source,q?q(B):[],1e9-S.length));else{let B=v.sliceDoc(L.from,L.to),F,j=k.filterStrict?new StrictMatcher(B):new FuzzyMatcher(B);for(let z of L.result.options)if(F=j.match(z.label)){let V=z.displayLabel?q?q(z,F.matched):[]:F.matched,G=F.score+(z.boost||0);if(A(new Option(z,L.source,V,G)),typeof z.section=="object"&&z.section.rank==="dynamic"){let{name:W}=z.section;T||(T=Object.create(null)),T[W]=Math.max(G,T[W]||-1e9)}}}}if(R){let L=Object.create(null),q=0,B=(F,j)=>(F.rank==="dynamic"&&j.rank==="dynamic"?T[j.name]-T[F.name]:0)||(typeof F.rank=="number"?F.rank:1e9)-(typeof j.rank=="number"?j.rank:1e9)||(F.name<j.name?-1:1);for(let F of R.sort(B))q-=1e5,L[F.name]=q;for(let F of S){let{section:j}=F.completion;j&&(F.score+=L[typeof j=="string"?j:j.name])}}let M=[],P=null,D=k.compareCompletions;for(let L of S.sort((q,B)=>B.score-q.score||D(q.completion,B.completion))){let q=L.completion;!P||P.label!=q.label||P.detail!=q.detail||P.type!=null&&q.type!=null&&P.type!=q.type||P.apply!=q.apply||P.boost!=q.boost?M.push(L):score(L.completion)>score(P)&&(M[M.length-1]=L),P=L.completion}return M}class CompletionDialog{constructor(v,S,R,T,A,k){this.options=v,this.attrs=S,this.tooltip=R,this.timestamp=T,this.selected=A,this.disabled=k}setSelected(v,S){return v==this.selected||v>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(S,v),this.tooltip,this.timestamp,v,this.disabled)}static build(v,S,R,T,A,k){if(T&&!k&&v.some(D=>D.isPending))return T.setDisabled();let M=sortOptions(v,S);if(!M.length)return T&&v.some(D=>D.isPending)?T.setDisabled():null;let P=S.facet(completionConfig).selectOnOpen?0:-1;if(T&&T.selected!=P&&T.selected!=-1){let D=T.options[T.selected].completion;for(let L=0;L<M.length;L++)if(M[L].completion==D){P=L;break}}return new CompletionDialog(M,makeAttrs(R,P),{pos:v.reduce((D,L)=>L.hasResult()?Math.min(D,L.from):D,1e8),create:createTooltip,above:A.aboveCursor},T?T.timestamp:Date.now(),P,!1)}map(v){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:v.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(v,S,R){this.active=v,this.id=S,this.open=R}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(v){let{state:S}=v,R=S.facet(completionConfig),A=(R.override||S.languageDataAt("autocomplete",cur(S)).map(asSource)).map(P=>(this.active.find(L=>L.source==P)||new ActiveSource(P,this.active.some(L=>L.state!=0)?1:0)).update(v,R));A.length==this.active.length&&A.every((P,D)=>P==this.active[D])&&(A=this.active);let k=this.open,M=v.effects.some(P=>P.is(setActiveEffect));k&&v.docChanged&&(k=k.map(v.changes)),v.selection||A.some(P=>P.hasResult()&&v.changes.touchesRange(P.from,P.to))||!sameResults(A,this.active)||M?k=CompletionDialog.build(A,S,this.id,k,R,M):k&&k.disabled&&!A.some(P=>P.isPending)&&(k=null),!k&&A.every(P=>!P.isPending)&&A.some(P=>P.hasResult())&&(A=A.map(P=>P.hasResult()?new ActiveSource(P.source,0):P));for(let P of v.effects)P.is(setSelectedEffect)&&(k=k&&k.setSelected(P.value,this.id));return A==this.active&&k==this.open?this:new CompletionState(A,this.id,k)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(_,v){if(_==v)return!0;for(let S=0,R=0;;){for(;S<_.length&&!_[S].hasResult();)S++;for(;R<v.length&&!v[R].hasResult();)R++;let T=S==_.length,A=R==v.length;if(T||A)return T==A;if(_[S++].result!=v[R++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(_,v){let S={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":_};return v>-1&&(S["aria-activedescendant"]=_+"-"+v),S}const none=[];function getUpdateType(_,v){if(_.isUserEvent("input.complete")){let R=_.annotation(pickedCompletion);if(R&&v.activateOnCompletion(R))return 12}let S=_.isUserEvent("input.type");return S&&v.activateOnTyping?5:S?1:_.isUserEvent("delete.backward")?2:_.selection?8:_.docChanged?16:0}class ActiveSource{constructor(v,S,R=!1){this.source=v,this.state=S,this.explicit=R}hasResult(){return!1}get isPending(){return this.state==1}update(v,S){let R=getUpdateType(v,S),T=this;(R&8||R&16&&this.touches(v))&&(T=new ActiveSource(T.source,0)),R&4&&T.state==0&&(T=new ActiveSource(this.source,1)),T=T.updateFor(v,R);for(let A of v.effects)if(A.is(startCompletionEffect))T=new ActiveSource(T.source,1,A.value);else if(A.is(closeCompletionEffect))T=new ActiveSource(T.source,0);else if(A.is(setActiveEffect))for(let k of A.value)k.source==T.source&&(T=k);return T}updateFor(v,S){return this.map(v.changes)}map(v){return this}touches(v){return v.changes.touchesRange(cur(v.state))}}class ActiveResult extends ActiveSource{constructor(v,S,R,T,A,k){super(v,3,S),this.limit=R,this.result=T,this.from=A,this.to=k}hasResult(){return!0}updateFor(v,S){var R;if(!(S&3))return this.map(v.changes);let T=this.result;T.map&&!v.changes.empty&&(T=T.map(T,v.changes));let A=v.changes.mapPos(this.from),k=v.changes.mapPos(this.to,1),M=cur(v.state);if(M>k||!T||S&2&&(cur(v.startState)==this.from||M<this.limit))return new ActiveSource(this.source,S&4?1:0);let P=v.changes.mapPos(this.limit);return checkValid(T.validFor,v.state,A,k)?new ActiveResult(this.source,this.explicit,P,T,A,k):T.update&&(T=T.update(T,A,k,new CompletionContext(v.state,M,!1)))?new ActiveResult(this.source,this.explicit,P,T,T.from,(R=T.to)!==null&&R!==void 0?R:cur(v.state)):new ActiveSource(this.source,1,this.explicit)}map(v){return v.empty?this:(this.result.map?this.result.map(this.result,v):this.result)?new ActiveResult(this.source,this.explicit,v.mapPos(this.limit),this.result,v.mapPos(this.from),v.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(v){return v.changes.touchesRange(this.from,this.to)}}function checkValid(_,v,S,R){if(!_)return!1;let T=v.sliceDoc(S,R);return typeof _=="function"?_(T,S,R,v):ensureAnchor(_,!0).test(T)}const setActiveEffect=StateEffect.define({map(_,v){return _.map(S=>S.map(v))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(_,v){return _.update(v)},provide:_=>[showTooltip.from(_,v=>v.tooltip),EditorView.contentAttributes.from(_,v=>v.attrs)]});function applyCompletion(_,v){const S=v.completion.apply||v.completion.label;let R=_.state.field(completionState).active.find(T=>T.source==v.source);return R instanceof ActiveResult?(typeof S=="string"?_.dispatch({...insertCompletionText(_.state,S,R.from,R.to),annotations:pickedCompletion.of(v.completion)}):S(_,v.completion,R.from,R.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(_,v="option"){return S=>{let R=S.state.field(completionState,!1);if(!R||!R.open||R.open.disabled||Date.now()-R.open.timestamp<S.state.facet(completionConfig).interactionDelay)return!1;let T=1,A;v=="page"&&(A=getTooltip(S,R.open.tooltip))&&(T=Math.max(2,Math.floor(A.dom.offsetHeight/A.dom.querySelector("li").offsetHeight)-1));let{length:k}=R.open.options,M=R.open.selected>-1?R.open.selected+T*(_?1:-1):_?0:k-1;return M<0?M=v=="page"?0:k-1:M>=k&&(M=v=="page"?k-1:0),S.dispatch({effects:setSelectedEffect.of(M)}),!0}}const acceptCompletion=_=>{let v=_.state.field(completionState,!1);return _.state.readOnly||!v||!v.open||v.open.selected<0||v.open.disabled||Date.now()-v.open.timestamp<_.state.facet(completionConfig).interactionDelay?!1:applyCompletion(_,v.open.options[v.open.selected])},startCompletion=_=>_.state.field(completionState,!1)?(_.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=_=>{let v=_.state.field(completionState,!1);return!v||!v.active.some(S=>S.state!=0)?!1:(_.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(v,S){this.active=v,this.context=S,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let v of _.state.field(completionState).active)v.isPending&&this.startQuery(v)}update(_){let v=_.state.field(completionState),S=_.state.facet(completionConfig);if(!_.selectionSet&&!_.docChanged&&_.startState.field(completionState)==v)return;let R=_.transactions.some(A=>{let k=getUpdateType(A,S);return k&8||(A.selection||A.docChanged)&&!(k&3)});for(let A=0;A<this.running.length;A++){let k=this.running[A];if(R||k.context.abortOnDocChange&&_.docChanged||k.updates.length+_.transactions.length>MaxUpdateCount&&Date.now()-k.time>MinAbortTime){for(let M of k.context.abortListeners)try{M()}catch(P){logException(this.view.state,P)}k.context.abortListeners=null,this.running.splice(A--,1)}else k.updates.push(..._.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),_.transactions.some(A=>A.effects.some(k=>k.is(startCompletionEffect)))&&(this.pendingStart=!0);let T=this.pendingStart?50:S.activateOnTypingDelay;if(this.debounceUpdate=v.active.some(A=>A.isPending&&!this.running.some(k=>k.active.source==A.source))?setTimeout(()=>this.startUpdate(),T):-1,this.composing!=0)for(let A of _.transactions)A.isUserEvent("input.type")?this.composing=2:this.composing==2&&A.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:_}=this.view,v=_.field(completionState);for(let S of v.active)S.isPending&&!this.running.some(R=>R.active.source==S.source)&&this.startQuery(S);this.running.length&&v.open&&v.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(_){let{state:v}=this.view,S=cur(v),R=new CompletionContext(v,S,_.explicit,this.view),T=new RunningQuery(_,R);this.running.push(T),Promise.resolve(_.source(R)).then(A=>{T.context.aborted||(T.done=A||null,this.scheduleAccept())},A=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,A)})}scheduleAccept(){this.running.every(_=>_.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var _;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let v=[],S=this.view.state.facet(completionConfig),R=this.view.state.field(completionState);for(let T=0;T<this.running.length;T++){let A=this.running[T];if(A.done===void 0)continue;if(this.running.splice(T--,1),A.done){let M=cur(A.updates.length?A.updates[0].startState:this.view.state),P=Math.min(M,A.done.from+(A.active.explicit?0:1)),D=new ActiveResult(A.active.source,A.active.explicit,P,A.done,A.done.from,(_=A.done.to)!==null&&_!==void 0?_:M);for(let L of A.updates)D=D.update(L,S);if(D.hasResult()){v.push(D);continue}}let k=R.active.find(M=>M.source==A.active.source);if(k&&k.isPending)if(A.done==null){let M=new ActiveSource(A.active.source,0);for(let P of A.updates)M=M.update(P,S);M.isPending||v.push(M)}else this.startQuery(k)}(v.length||R.open&&R.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(v)})}},{eventHandlers:{blur(_){let v=this.view.state.field(completionState,!1);if(v&&v.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let S=v.open&&getTooltip(this.view,v.open.tooltip);(!S||!S.dom.contains(_.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(_,v){let S=v.state.field(completionState,!1);if(!S||!S.open||S.open.disabled||S.open.selected<0||_.key.length>1||_.ctrlKey&&!(windows&&_.altKey)||_.metaKey)return!1;let R=S.open.options[S.open.selected],T=S.active.find(k=>k.source==R.source),A=R.completion.commitCharacters||T.result.commitCharacters;return A&&A.indexOf(_.key)>-1&&applyCompletion(v,R),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults$1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(_,v){let S=v.mapPos(_,-1,MapMode.TrackAfter);return S??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(_,v){if(_=_.map(v.changes),v.selection){let S=v.state.doc.lineAt(v.selection.main.head);_=_.update({filter:R=>R>=S.from&&R<=S.to})}for(let S of v.effects)S.is(closeBracketEffect)&&(_=_.update({add:[closedBracket.range(S.value,S.value+1)]}));return _}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(_){for(let v=0;v<definedClosing.length;v+=2)if(definedClosing.charCodeAt(v)==_)return definedClosing.charAt(v+1);return fromCodePoint(_<128?_:_+1)}function config(_,v){return _.languageDataAt("closeBrackets",v)[0]||defaults$1}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((_,v,S,R)=>{if((android?_.composing:_.compositionStarted)||_.state.readOnly)return!1;let T=_.state.selection.main;if(R.length>2||R.length==2&&codePointSize(codePointAt(R,0))==1||v!=T.from||S!=T.to)return!1;let A=insertBracket(_.state,R);return A?(_.dispatch(A),!0):!1}),deleteBracketPair=({state:_,dispatch:v})=>{if(_.readOnly)return!1;let R=config(_,_.selection.main.head).brackets||defaults$1.brackets,T=null,A=_.changeByRange(k=>{if(k.empty){let M=prevChar(_.doc,k.head);for(let P of R)if(P==M&&nextChar(_.doc,k.head)==closing(codePointAt(P,0)))return{changes:{from:k.head-P.length,to:k.head+P.length},range:EditorSelection.cursor(k.head-P.length)}}return{range:T=k}});return T||v(_.update(A,{scrollIntoView:!0,userEvent:"delete.backward"})),!T},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(_,v){let S=config(_,_.selection.main.head),R=S.brackets||defaults$1.brackets;for(let T of R){let A=closing(codePointAt(T,0));if(v==T)return A==T?handleSame(_,T,R.indexOf(T+T+T)>-1,S):handleOpen(_,T,A,S.before||defaults$1.before);if(v==A&&closedBracketAt(_,_.selection.main.from))return handleClose(_,T,A)}return null}function closedBracketAt(_,v){let S=!1;return _.field(bracketState).between(0,_.doc.length,R=>{R==v&&(S=!0)}),S}function nextChar(_,v){let S=_.sliceString(v,v+2);return S.slice(0,codePointSize(codePointAt(S,0)))}function prevChar(_,v){let S=_.sliceString(v-2,v);return codePointSize(codePointAt(S,0))==S.length?S:S.slice(1)}function handleOpen(_,v,S,R){let T=null,A=_.changeByRange(k=>{if(!k.empty)return{changes:[{insert:v,from:k.from},{insert:S,from:k.to}],effects:closeBracketEffect.of(k.to+v.length),range:EditorSelection.range(k.anchor+v.length,k.head+v.length)};let M=nextChar(_.doc,k.head);return!M||/\s/.test(M)||R.indexOf(M)>-1?{changes:{insert:v+S,from:k.head},effects:closeBracketEffect.of(k.head+v.length),range:EditorSelection.cursor(k.head+v.length)}:{range:T=k}});return T?null:_.update(A,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(_,v,S){let R=null,T=_.changeByRange(A=>A.empty&&nextChar(_.doc,A.head)==S?{changes:{from:A.head,to:A.head+S.length,insert:S},range:EditorSelection.cursor(A.head+S.length)}:R={range:A});return R?null:_.update(T,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(_,v,S,R){let T=R.stringPrefixes||defaults$1.stringPrefixes,A=null,k=_.changeByRange(M=>{if(!M.empty)return{changes:[{insert:v,from:M.from},{insert:v,from:M.to}],effects:closeBracketEffect.of(M.to+v.length),range:EditorSelection.range(M.anchor+v.length,M.head+v.length)};let P=M.head,D=nextChar(_.doc,P),L;if(D==v){if(nodeStart(_,P))return{changes:{insert:v+v,from:P},effects:closeBracketEffect.of(P+v.length),range:EditorSelection.cursor(P+v.length)};if(closedBracketAt(_,P)){let B=S&&_.sliceDoc(P,P+v.length*3)==v+v+v?v+v+v:v;return{changes:{from:P,to:P+B.length,insert:B},range:EditorSelection.cursor(P+B.length)}}}else{if(S&&_.sliceDoc(P-2*v.length,P)==v+v&&(L=canStartStringAt(_,P-2*v.length,T))>-1&&nodeStart(_,L))return{changes:{insert:v+v+v+v,from:P},effects:closeBracketEffect.of(P+v.length),range:EditorSelection.cursor(P+v.length)};if(_.charCategorizer(P)(D)!=CharCategory.Word&&canStartStringAt(_,P,T)>-1&&!probablyInString(_,P,v,T))return{changes:{insert:v+v,from:P},effects:closeBracketEffect.of(P+v.length),range:EditorSelection.cursor(P+v.length)}}return{range:A=M}});return A?null:_.update(k,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(_,v){let S=syntaxTree(_).resolveInner(v+1);return S.parent&&S.from==v}function probablyInString(_,v,S,R){let T=syntaxTree(_).resolveInner(v,-1),A=R.reduce((k,M)=>Math.max(k,M.length),0);for(let k=0;k<5;k++){let M=_.sliceDoc(T.from,Math.min(T.to,T.from+S.length+A)),P=M.indexOf(S);if(!P||P>-1&&R.indexOf(M.slice(0,P))>-1){let L=T.firstChild;for(;L&&L.from==T.from&&L.to-L.from>S.length+P;){if(_.sliceDoc(L.to-S.length,L.to)==S)return!1;L=L.firstChild}return!0}let D=T.to==v&&T.parent;if(!D)break;T=D}return!1}function canStartStringAt(_,v,S){let R=_.charCategorizer(v);if(R(_.sliceDoc(v-1,v))!=CharCategory.Word)return v;for(let T of S){let A=v-T.length;if(_.sliceDoc(A,v)==T&&R(_.sliceDoc(A-1,A))!=CharCategory.Word)return A}return-1}function autocompletion(_={}){return[commitCharacters,completionState,completionConfig.of(_),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],_=>_.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(v,S,R){this.from=v,this.to=S,this.diagnostic=R}}class LintState{constructor(v,S,R){this.diagnostics=v,this.panel=S,this.selected=R}static init(v,S,R){let T=R.facet(lintConfig).markerFilter;T&&(v=T(v,R));let A=v.slice().sort((F,j)=>F.from-j.from||F.to-j.to),k=new RangeSetBuilder,M=[],P=0,D=R.doc.iter(),L=0,q=R.doc.length;for(let F=0;;){let j=F==A.length?null:A[F];if(!j&&!M.length)break;let z,V;if(M.length)z=P,V=M.reduce((Y,X)=>Math.min(Y,X.to),j&&j.from>z?j.from:1e8);else{if(z=j.from,z>q)break;V=j.to,M.push(j),F++}for(;F<A.length;){let Y=A[F];if(Y.from==z&&(Y.to>Y.from||Y.to==z))M.push(Y),F++,V=Math.min(Y.to,V);else{V=Math.min(Y.from,V);break}}V=Math.min(V,q);let G=!1;if(M.some(Y=>Y.from==z&&(Y.to==V||V==q))&&(G=z==V,!G&&V-z<10)){let Y=z-(L+D.value.length);Y>0&&(D.next(Y),L=z);for(let X=z;;){if(X>=V){G=!0;break}if(!D.lineBreak&&L+D.value.length>X)break;X=L+D.value.length,L+=D.value.length,D.next()}}let W=maxSeverity(M);if(G)k.add(z,z,Decoration.widget({widget:new DiagnosticWidget(W),diagnostics:M.slice()}));else{let Y=M.reduce((X,ee)=>ee.markClass?X+" "+ee.markClass:X,"");k.add(z,V,Decoration.mark({class:"cm-lintRange cm-lintRange-"+W+Y,diagnostics:M.slice(),inclusiveEnd:M.some(X=>X.to>V)}))}if(P=V,P==q)break;for(let Y=0;Y<M.length;Y++)M[Y].to<=P&&M.splice(Y--,1)}let B=k.finish();return new LintState(B,S,findDiagnostic(B))}}function findDiagnostic(_,v=null,S=0){let R=null;return _.between(S,1e9,(T,A,{spec:k})=>{if(!(v&&k.diagnostics.indexOf(v)<0))if(!R)R=new SelectedDiagnostic(T,A,v||k.diagnostics[0]);else{if(k.diagnostics.indexOf(R.diagnostic)<0)return!1;R=new SelectedDiagnostic(R.from,A,R.diagnostic)}}),R}function hideTooltip(_,v){let S=v.pos,R=v.end||S,T=_.state.facet(lintConfig).hideOn(_,S,R);if(T!=null)return T;let A=_.startState.doc.lineAt(v.pos);return!!(_.effects.some(k=>k.is(setDiagnosticsEffect))||_.changes.touchesRange(A.from,Math.max(A.to,R)))}function maybeEnableLint(_,v){return _.field(lintState,!1)?v:v.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(_,v){if(v.docChanged&&_.diagnostics.size){let S=_.diagnostics.map(v.changes),R=null,T=_.panel;if(_.selected){let A=v.changes.mapPos(_.selected.from,1);R=findDiagnostic(S,_.selected.diagnostic,A)||findDiagnostic(S,null,A)}!S.size&&T&&v.state.facet(lintConfig).autoPanel&&(T=null),_=new LintState(S,T,R)}for(let S of v.effects)if(S.is(setDiagnosticsEffect)){let R=v.state.facet(lintConfig).autoPanel?S.value.length?LintPanel.open:null:_.panel;_=LintState.init(S.value,R,v.state)}else S.is(togglePanel)?_=new LintState(_.diagnostics,S.value?LintPanel.open:null,_.selected):S.is(movePanelSelection)&&(_=new LintState(_.diagnostics,_.panel,S.value));return _},provide:_=>[showPanel.from(_,v=>v.panel),EditorView.decorations.from(_,v=>v.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(_,v,S){let{diagnostics:R}=_.state.field(lintState),T,A=-1,k=-1;R.between(v-(S<0?1:0),v+(S>0?1:0),(P,D,{spec:L})=>{if(v>=P&&v<=D&&(P==D||(v>P||S>0)&&(v<D||S<0)))return T=L.diagnostics,A=P,k=D,!1});let M=_.state.facet(lintConfig).tooltipFilter;return T&&M&&(T=M(T,_.state)),T?{pos:A,end:k,above:_.state.doc.lineAt(A).to<k,create(){return{dom:diagnosticsTooltip(_,T)}}}:null}function diagnosticsTooltip(_,v){return crelt("ul",{class:"cm-tooltip-lint"},v.map(S=>renderDiagnostic(_,S,!1)))}const openLintPanel=_=>{let v=_.state.field(lintState,!1);(!v||!v.panel)&&_.dispatch({effects:maybeEnableLint(_.state,[togglePanel.of(!0)])});let S=getPanel(_,LintPanel.open);return S&&S.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=_=>{let v=_.state.field(lintState,!1);return!v||!v.panel?!1:(_.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=_=>{let v=_.state.field(lintState,!1);if(!v)return!1;let S=_.state.selection.main,R=v.diagnostics.iter(S.to+1);return!R.value&&(R=v.diagnostics.iter(0),!R.value||R.from==S.from&&R.to==S.to)?!1:(_.dispatch({selection:{anchor:R.from,head:R.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(_){return{sources:_.map(v=>v.source).filter(v=>v!=null),...combineConfig(_.map(v=>v.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:combineFilter,tooltipFilter:combineFilter,needsRefresh:(v,S)=>v?S?R=>v(R)||S(R):v:S,hideOn:(v,S)=>v?S?(R,T,A)=>v(R,T,A)||S(R,T,A):v:S,autoPanel:(v,S)=>v||S})}}});function combineFilter(_,v){return _?v?(S,R)=>v(_(S,R),R):_:v}function assignKeys(_){let v=[];if(_)e:for(let{name:S}of _){for(let R=0;R<S.length;R++){let T=S[R];if(/[a-zA-Z]/.test(T)&&!v.some(A=>A.toLowerCase()==T.toLowerCase())){v.push(T);continue e}}v.push("")}return v}function renderDiagnostic(_,v,S){var R;let T=S?assignKeys(v.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+v.severity},crelt("span",{class:"cm-diagnosticText"},v.renderMessage?v.renderMessage(_):v.message),(R=v.actions)===null||R===void 0?void 0:R.map((A,k)=>{let M=!1,P=F=>{if(F.preventDefault(),M)return;M=!0;let j=findDiagnostic(_.state.field(lintState).diagnostics,v);j&&A.apply(_,j.from,j.to)},{name:D}=A,L=T[k]?D.indexOf(T[k]):-1,q=L<0?D:[D.slice(0,L),crelt("u",D.slice(L,L+1)),D.slice(L+1)],B=A.markClass?" "+A.markClass:"";return crelt("button",{type:"button",class:"cm-diagnosticAction"+B,onclick:P,onmousedown:P,"aria-label":` Action: ${D}${L<0?"":` (access key "${T[k]})"`}.`},q)}),v.source&&crelt("div",{class:"cm-diagnosticSource"},v.source))}class DiagnosticWidget extends WidgetType{constructor(v){super(),this.sev=v}eq(v){return v.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(v,S){this.diagnostic=S,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(v,S,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(v){this.view=v,this.items=[];let S=T=>{if(T.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(T.keyCode==38||T.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(T.keyCode==40||T.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(T.keyCode==36)this.moveSelection(0);else if(T.keyCode==35)this.moveSelection(this.items.length-1);else if(T.keyCode==13)this.view.focus();else if(T.keyCode>=65&&T.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:A}=this.items[this.selectedIndex],k=assignKeys(A.actions);for(let M=0;M<k.length;M++)if(k[M].toUpperCase().charCodeAt(0)==T.keyCode){let P=findDiagnostic(this.view.state.field(lintState).diagnostics,A);P&&A.actions[M].apply(v,P.from,P.to)}}else return;T.preventDefault()},R=T=>{for(let A=0;A<this.items.length;A++)this.items[A].dom.contains(T.target)&&this.moveSelection(A)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:S,onclick:R}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let v=this.view.state.field(lintState).selected;if(!v)return-1;for(let S=0;S<this.items.length;S++)if(this.items[S].diagnostic==v.diagnostic)return S;return-1}update(){let{diagnostics:v,selected:S}=this.view.state.field(lintState),R=0,T=!1,A=null,k=new Set;for(v.between(0,this.view.state.doc.length,(M,P,{spec:D})=>{for(let L of D.diagnostics){if(k.has(L))continue;k.add(L);let q=-1,B;for(let F=R;F<this.items.length;F++)if(this.items[F].diagnostic==L){q=F;break}q<0?(B=new PanelItem(this.view,L),this.items.splice(R,0,B),T=!0):(B=this.items[q],q>R&&(this.items.splice(R,q-R),T=!0)),S&&B.diagnostic==S.diagnostic?B.dom.hasAttribute("aria-selected")||(B.dom.setAttribute("aria-selected","true"),A=B):B.dom.hasAttribute("aria-selected")&&B.dom.removeAttribute("aria-selected"),R++}});R<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)T=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),T=!0),A?(this.list.setAttribute("aria-activedescendant",A.id),this.view.requestMeasure({key:this,read:()=>({sel:A.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:M,panel:P})=>{let D=P.height/this.list.offsetHeight;M.top<P.top?this.list.scrollTop-=(P.top-M.top)/D:M.bottom>P.bottom&&(this.list.scrollTop+=(M.bottom-P.bottom)/D)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),T&&this.sync()}sync(){let v=this.list.firstChild;function S(){let R=v;v=R.nextSibling,R.remove()}for(let R of this.items)if(R.dom.parentNode==this.list){for(;v!=R.dom;)S();v=R.dom.nextSibling}else this.list.insertBefore(R.dom,v);for(;v;)S()}moveSelection(v){if(this.selectedIndex<0)return;let S=this.view.state.field(lintState),R=findDiagnostic(S.diagnostics,this.items[v].diagnostic);R&&this.view.dispatch({selection:{anchor:R.from,head:R.to},scrollIntoView:!0,effects:movePanelSelection.of(R)})}static open(v){return new LintPanel(v)}}function svg(_,v='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${v}>${encodeURIComponent(_)}</svg>')`}function underline(_){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${_}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(_){return _=="error"?4:_=="warning"?3:_=="info"?2:1}function maxSeverity(_){let v="hint",S=1;for(let R of _){let T=severityWeight(R.severity);T>S&&(S=T,v=R.severity)}return v}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],_=>{let{selected:v,panel:S}=_.field(lintState);return!v||!S||v.from==v.to?Decoration.none:Decoration.set([activeMark.range(v.from,v.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function(v){v===void 0&&(v={});var{crosshairCursor:S=!1}=v,R=[];v.closeBracketsKeymap!==!1&&(R=R.concat(closeBracketsKeymap)),v.defaultKeymap!==!1&&(R=R.concat(defaultKeymap)),v.searchKeymap!==!1&&(R=R.concat(searchKeymap)),v.historyKeymap!==!1&&(R=R.concat(historyKeymap)),v.foldKeymap!==!1&&(R=R.concat(foldKeymap)),v.completionKeymap!==!1&&(R=R.concat(completionKeymap)),v.lintKeymap!==!1&&(R=R.concat(lintKeymap));var T=[];return v.lineNumbers!==!1&&T.push(lineNumbers()),v.highlightActiveLineGutter!==!1&&T.push(highlightActiveLineGutter()),v.highlightSpecialChars!==!1&&T.push(highlightSpecialChars()),v.history!==!1&&T.push(history()),v.foldGutter!==!1&&T.push(foldGutter()),v.drawSelection!==!1&&T.push(drawSelection()),v.dropCursor!==!1&&T.push(dropCursor()),v.allowMultipleSelections!==!1&&T.push(EditorState.allowMultipleSelections.of(!0)),v.indentOnInput!==!1&&T.push(indentOnInput()),v.syntaxHighlighting!==!1&&T.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),v.bracketMatching!==!1&&T.push(bracketMatching()),v.closeBrackets!==!1&&T.push(closeBrackets()),v.autocompletion!==!1&&T.push(autocompletion()),v.rectangularSelection!==!1&&T.push(rectangularSelection()),S!==!1&&T.push(crosshairCursor()),v.highlightActiveLine!==!1&&T.push(highlightActiveLine()),v.highlightSelectionMatches!==!1&&T.push(highlightSelectionMatches()),v.tabSize&&typeof v.tabSize=="number"&&T.push(indentUnit.of(" ".repeat(v.tabSize))),T.concat([keymap.of(R.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function(v){v===void 0&&(v={});var{indentWithTab:S=!0,editable:R=!0,readOnly:T=!1,theme:A="light",placeholder:k="",basicSetup:M=!0}=v,P=[];switch(S&&P.unshift(keymap.of([indentWithTab])),M&&(typeof M=="boolean"?P.unshift(basicSetup()):P.unshift(basicSetup(M))),k&&P.unshift(placeholder(k)),A){case"light":P.push(defaultLightThemeOption);break;case"dark":P.push(oneDark);break;case"none":break;default:P.push(A);break}return R===!1&&P.push(EditorView.editable.of(!1)),T&&P.push(EditorState.readOnly.of(!0)),[...P]},getStatistics=_=>({line:_.state.doc.lineAt(_.state.selection.main.from),lineCount:_.state.doc.lines,lineBreak:_.state.lineBreak,length:_.state.doc.length,readOnly:_.state.readOnly,tabSize:_.state.tabSize,selection:_.state.selection,selectionAsSingle:_.state.selection.asSingle().main,ranges:_.state.selection.ranges,selectionCode:_.state.sliceDoc(_.state.selection.main.from,_.state.selection.main.to),selections:_.state.selection.ranges.map(v=>_.state.sliceDoc(v.from,v.to)),selectedText:_.state.selection.ranges.some(v=>!v.empty)});class TimeoutLatch{constructor(v,S){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=S,this.timeoutMS=S,this.callbacks.push(v)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var v=this.callbacks.slice();this.callbacks.length=0,v.forEach(S=>{try{S()}catch(R){console.error("TimeoutLatch callback error:",R)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Scheduler{constructor(){this.interval=null,this.latches=new Set}add(v){this.latches.add(v),this.start()}remove(v){this.latches.delete(v),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(v=>{v.tick(),v.isDone&&this.remove(v)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var globalScheduler=null,getScheduler=()=>typeof window>"u"?new Scheduler:(globalScheduler||(globalScheduler=new Scheduler),globalScheduler),ExternalChange=Annotation.define(),TYPING_TIMOUT=200,emptyExtensions=[];function useCodeMirror(_){var{value:v,selection:S,onChange:R,onStatistics:T,onCreateEditor:A,onUpdate:k,extensions:M=emptyExtensions,autoFocus:P,theme:D="light",height:L=null,minHeight:q=null,maxHeight:B=null,width:F=null,minWidth:j=null,maxWidth:z=null,placeholder:V="",editable:G=!0,readOnly:W=!1,indentWithTab:Y=!0,basicSetup:X=!0,root:ee,initialState:re}=_,[Q,ne]=reactExports.useState(),[ae,oe]=reactExports.useState(),[se,ce]=reactExports.useState(),de=reactExports.useState(()=>({current:null}))[0],ye=reactExports.useState(()=>({current:null}))[0],we=EditorView.theme({"&":{height:L,minHeight:q,maxHeight:B,width:F,minWidth:j,maxWidth:z},"& .cm-scroller":{height:"100% !important"}}),ge=EditorView.updateListener.of(ke=>{if(ke.docChanged&&typeof R=="function"&&!ke.transactions.some(xe=>xe.annotation(ExternalChange))){de.current?de.current.reset():(de.current=new TimeoutLatch(()=>{if(ye.current){var xe=ye.current;ye.current=null,xe()}de.current=null},TYPING_TIMOUT),getScheduler().add(de.current));var me=ke.state.doc,fe=me.toString();R(fe,ke)}T&&T(getStatistics(ke))}),ve=getDefaultExtensions({theme:D,editable:G,readOnly:W,placeholder:V,indentWithTab:Y,basicSetup:X}),be=[ge,we,...ve];return k&&typeof k=="function"&&be.push(EditorView.updateListener.of(k)),be=be.concat(M),reactExports.useLayoutEffect(()=>{if(Q&&!se){var ke={doc:v,selection:S,extensions:be},me=re?EditorState.fromJSON(re.json,ke,re.fields):EditorState.create(ke);if(ce(me),!ae){var fe=new EditorView({state:me,parent:Q,root:ee});oe(fe),A&&A(fe,me)}}return()=>{ae&&(ce(void 0),oe(void 0))}},[Q,se]),reactExports.useEffect(()=>{_.container&&ne(_.container)},[_.container]),reactExports.useEffect(()=>()=>{ae&&(ae.destroy(),oe(void 0)),de.current&&(de.current.cancel(),de.current=null)},[ae]),reactExports.useEffect(()=>{P&&ae&&ae.focus()},[P,ae]),reactExports.useEffect(()=>{ae&&ae.dispatch({effects:StateEffect.reconfigure.of(be)})},[D,M,L,q,B,F,j,z,V,G,W,Y,X,R,k]),reactExports.useEffect(()=>{if(v!==void 0){var ke=ae?ae.state.doc.toString():"";if(ae&&v!==ke){var me=de.current&&!de.current.isDone,fe=()=>{ae&&v!==ae.state.doc.toString()&&ae.dispatch({changes:{from:0,to:ae.state.doc.toString().length,insert:v||""},annotations:[ExternalChange.of(!0)]})};me?ye.current=fe:fe()}}},[v,ae]),{state:se,setState:ce,view:ae,setView:oe,container:Q,setContainer:ne}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((_,v)=>{var{className:S,value:R="",selection:T,extensions:A=[],onChange:k,onStatistics:M,onCreateEditor:P,onUpdate:D,autoFocus:L,theme:q="light",height:B,minHeight:F,maxHeight:j,width:z,minWidth:V,maxWidth:G,basicSetup:W,placeholder:Y,indentWithTab:X,editable:ee,readOnly:re,root:Q,initialState:ne}=_,ae=_objectWithoutPropertiesLoose(_,_excluded),oe=reactExports.useRef(null),{state:se,view:ce,container:de,setContainer:ye}=useCodeMirror({root:Q,value:R,autoFocus:L,theme:q,height:B,minHeight:F,maxHeight:j,width:z,minWidth:V,maxWidth:G,basicSetup:W,placeholder:Y,indentWithTab:X,editable:ee,readOnly:re,selection:T,onChange:k,onStatistics:M,onCreateEditor:P,onUpdate:D,extensions:A,initialState:ne});reactExports.useImperativeHandle(v,()=>({editor:oe.current,state:se,view:ce}),[oe,de,se,ce]);var we=reactExports.useCallback(ve=>{oe.current=ve,ye(ve)},[ye]);if(typeof R!="string")throw new Error("value must be typeof string but got "+typeof R);var ge=typeof q=="string"?"cm-theme-"+q:"cm-theme";return jsxRuntimeExports.jsx("div",_extends({ref:we,className:""+ge+(S?" "+S:"")},ae))});ReactCodeMirror.displayName="CodeMirror";function r(_){var v,S,R="";if(typeof _=="string"||typeof _=="number")R+=_;else if(typeof _=="object")if(Array.isArray(_)){var T=_.length;for(v=0;v<T;v++)_[v]&&(S=r(_[v]))&&(R&&(R+=" "),R+=S)}else for(S in _)_[S]&&(R&&(R+=" "),R+=S);return R}function clsx(){for(var _,v,S=0,R="",T=arguments.length;S<T;S++)(_=arguments[S])&&(v=r(_))&&(R&&(R+=" "),R+=v);return R}const concatArrays=(_,v)=>{const S=new Array(_.length+v.length);for(let R=0;R<_.length;R++)S[R]=_[R];for(let R=0;R<v.length;R++)S[_.length+R]=v[R];return S},createClassValidatorObject=(_,v)=>({classGroupId:_,validator:v}),createClassPartObject=(_=new Map,v=null,S)=>({nextPart:_,validators:v,classGroupId:S}),CLASS_PART_SEPARATOR="-",EMPTY_CONFLICTS=[],ARBITRARY_PROPERTY_PREFIX="arbitrary..",createClassGroupUtils=_=>{const v=createClassMap(_),{conflictingClassGroups:S,conflictingClassGroupModifiers:R}=_;return{getClassGroupId:k=>{if(k.startsWith("[")&&k.endsWith("]"))return getGroupIdForArbitraryProperty(k);const M=k.split(CLASS_PART_SEPARATOR),P=M[0]===""&&M.length>1?1:0;return getGroupRecursive(M,P,v)},getConflictingClassGroupIds:(k,M)=>{if(M){const P=R[k],D=S[k];return P?D?concatArrays(D,P):P:D||EMPTY_CONFLICTS}return S[k]||EMPTY_CONFLICTS}}},getGroupRecursive=(_,v,S)=>{if(_.length-v===0)return S.classGroupId;const T=_[v],A=S.nextPart.get(T);if(A){const D=getGroupRecursive(_,v+1,A);if(D)return D}const k=S.validators;if(k===null)return;const M=v===0?_.join(CLASS_PART_SEPARATOR):_.slice(v).join(CLASS_PART_SEPARATOR),P=k.length;for(let D=0;D<P;D++){const L=k[D];if(L.validator(M))return L.classGroupId}},getGroupIdForArbitraryProperty=_=>_.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const v=_.slice(1,-1),S=v.indexOf(":"),R=v.slice(0,S);return R?ARBITRARY_PROPERTY_PREFIX+R:void 0})(),createClassMap=_=>{const{theme:v,classGroups:S}=_;return processClassGroups(S,v)},processClassGroups=(_,v)=>{const S=createClassPartObject();for(const R in _){const T=_[R];processClassesRecursively(T,S,R,v)}return S},processClassesRecursively=(_,v,S,R)=>{const T=_.length;for(let A=0;A<T;A++){const k=_[A];processClassDefinition(k,v,S,R)}},processClassDefinition=(_,v,S,R)=>{if(typeof _=="string"){processStringDefinition(_,v,S);return}if(typeof _=="function"){processFunctionDefinition(_,v,S,R);return}processObjectDefinition(_,v,S,R)},processStringDefinition=(_,v,S)=>{const R=_===""?v:getPart(v,_);R.classGroupId=S},processFunctionDefinition=(_,v,S,R)=>{if(isThemeGetter(_)){processClassesRecursively(_(R),v,S,R);return}v.validators===null&&(v.validators=[]),v.validators.push(createClassValidatorObject(S,_))},processObjectDefinition=(_,v,S,R)=>{const T=Object.entries(_),A=T.length;for(let k=0;k<A;k++){const[M,P]=T[k];processClassesRecursively(P,getPart(v,M),S,R)}},getPart=(_,v)=>{let S=_;const R=v.split(CLASS_PART_SEPARATOR),T=R.length;for(let A=0;A<T;A++){const k=R[A];let M=S.nextPart.get(k);M||(M=createClassPartObject(),S.nextPart.set(k,M)),S=M}return S},isThemeGetter=_=>"isThemeGetter"in _&&_.isThemeGetter===!0,createLruCache=_=>{if(_<1)return{get:()=>{},set:()=>{}};let v=0,S=Object.create(null),R=Object.create(null);const T=(A,k)=>{S[A]=k,v++,v>_&&(v=0,R=S,S=Object.create(null))};return{get(A){let k=S[A];if(k!==void 0)return k;if((k=R[A])!==void 0)return T(A,k),k},set(A,k){A in S?S[A]=k:T(A,k)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",EMPTY_MODIFIERS=[],createResultObject=(_,v,S,R,T)=>({modifiers:_,hasImportantModifier:v,baseClassName:S,maybePostfixModifierPosition:R,isExternal:T}),createParseClassName=_=>{const{prefix:v,experimentalParseClassName:S}=_;let R=T=>{const A=[];let k=0,M=0,P=0,D;const L=T.length;for(let z=0;z<L;z++){const V=T[z];if(k===0&&M===0){if(V===MODIFIER_SEPARATOR){A.push(T.slice(P,z)),P=z+1;continue}if(V==="/"){D=z;continue}}V==="["?k++:V==="]"?k--:V==="("?M++:V===")"&&M--}const q=A.length===0?T:T.slice(P);let B=q,F=!1;q.endsWith(IMPORTANT_MODIFIER)?(B=q.slice(0,-1),F=!0):q.startsWith(IMPORTANT_MODIFIER)&&(B=q.slice(1),F=!0);const j=D&&D>P?D-P:void 0;return createResultObject(A,F,B,j)};if(v){const T=v+MODIFIER_SEPARATOR,A=R;R=k=>k.startsWith(T)?A(k.slice(T.length)):createResultObject(EMPTY_MODIFIERS,!1,k,void 0,!0)}if(S){const T=R;R=A=>S({className:A,parseClassName:T})}return R},createSortModifiers=_=>{const v=new Map;return _.orderSensitiveModifiers.forEach((S,R)=>{v.set(S,1e6+R)}),S=>{const R=[];let T=[];for(let A=0;A<S.length;A++){const k=S[A],M=k[0]==="[",P=v.has(k);M||P?(T.length>0&&(T.sort(),R.push(...T),T=[]),R.push(k)):T.push(k)}return T.length>0&&(T.sort(),R.push(...T)),R}},createConfigUtils=_=>({cache:createLruCache(_.cacheSize),parseClassName:createParseClassName(_),sortModifiers:createSortModifiers(_),...createClassGroupUtils(_)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_,v)=>{const{parseClassName:S,getClassGroupId:R,getConflictingClassGroupIds:T,sortModifiers:A}=v,k=[],M=_.trim().split(SPLIT_CLASSES_REGEX);let P="";for(let D=M.length-1;D>=0;D-=1){const L=M[D],{isExternal:q,modifiers:B,hasImportantModifier:F,baseClassName:j,maybePostfixModifierPosition:z}=S(L);if(q){P=L+(P.length>0?" "+P:P);continue}let V=!!z,G=R(V?j.substring(0,z):j);if(!G){if(!V){P=L+(P.length>0?" "+P:P);continue}if(G=R(j),!G){P=L+(P.length>0?" "+P:P);continue}V=!1}const W=B.length===0?"":B.length===1?B[0]:A(B).join(":"),Y=F?W+IMPORTANT_MODIFIER:W,X=Y+G;if(k.indexOf(X)>-1)continue;k.push(X);const ee=T(G,V);for(let re=0;re<ee.length;++re){const Q=ee[re];k.push(Y+Q)}P=L+(P.length>0?" "+P:P)}return P},twJoin=(..._)=>{let v=0,S,R,T="";for(;v<_.length;)(S=_[v++])&&(R=toValue(S))&&(T&&(T+=" "),T+=R);return T},toValue=_=>{if(typeof _=="string")return _;let v,S="";for(let R=0;R<_.length;R++)_[R]&&(v=toValue(_[R]))&&(S&&(S+=" "),S+=v);return S},createTailwindMerge=(_,...v)=>{let S,R,T,A;const k=P=>{const D=v.reduce((L,q)=>q(L),_());return S=createConfigUtils(D),R=S.cache.get,T=S.cache.set,A=M,M(P)},M=P=>{const D=R(P);if(D)return D;const L=mergeClassList(P,S);return T(P,L),L};return A=k,(...P)=>A(twJoin(...P))},fallbackThemeArr=[],fromTheme=_=>{const v=S=>S[_]||fallbackThemeArr;return v.isThemeGetter=!0,v},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=_=>fractionRegex.test(_),isNumber=_=>!!_&&!Number.isNaN(Number(_)),isInteger=_=>!!_&&Number.isInteger(Number(_)),isPercent=_=>_.endsWith("%")&&isNumber(_.slice(0,-1)),isTshirtSize=_=>tshirtUnitRegex.test(_),isAny=()=>!0,isLengthOnly=_=>lengthUnitRegex.test(_)&&!colorFunctionRegex.test(_),isNever=()=>!1,isShadow=_=>shadowRegex.test(_),isImage=_=>imageRegex.test(_),isAnyNonArbitrary=_=>!isArbitraryValue(_)&&!isArbitraryVariable(_),isArbitrarySize=_=>getIsArbitraryValue(_,isLabelSize,isNever),isArbitraryValue=_=>arbitraryValueRegex.test(_),isArbitraryLength=_=>getIsArbitraryValue(_,isLabelLength,isLengthOnly),isArbitraryNumber=_=>getIsArbitraryValue(_,isLabelNumber,isNumber),isArbitraryPosition=_=>getIsArbitraryValue(_,isLabelPosition,isNever),isArbitraryImage=_=>getIsArbitraryValue(_,isLabelImage,isImage),isArbitraryShadow=_=>getIsArbitraryValue(_,isLabelShadow,isShadow),isArbitraryVariable=_=>arbitraryVariableRegex.test(_),isArbitraryVariableLength=_=>getIsArbitraryVariable(_,isLabelLength),isArbitraryVariableFamilyName=_=>getIsArbitraryVariable(_,isLabelFamilyName),isArbitraryVariablePosition=_=>getIsArbitraryVariable(_,isLabelPosition),isArbitraryVariableSize=_=>getIsArbitraryVariable(_,isLabelSize),isArbitraryVariableImage=_=>getIsArbitraryVariable(_,isLabelImage),isArbitraryVariableShadow=_=>getIsArbitraryVariable(_,isLabelShadow,!0),getIsArbitraryValue=(_,v,S)=>{const R=arbitraryValueRegex.exec(_);return R?R[1]?v(R[1]):S(R[2]):!1},getIsArbitraryVariable=(_,v,S=!1)=>{const R=arbitraryVariableRegex.exec(_);return R?R[1]?v(R[1]):S:!1},isLabelPosition=_=>_==="position"||_==="percentage",isLabelImage=_=>_==="image"||_==="url",isLabelSize=_=>_==="length"||_==="size"||_==="bg-size",isLabelLength=_=>_==="length",isLabelNumber=_=>_==="number",isLabelFamilyName=_=>_==="family-name",isLabelShadow=_=>_==="shadow",getDefaultConfig=()=>{const _=fromTheme("color"),v=fromTheme("font"),S=fromTheme("text"),R=fromTheme("font-weight"),T=fromTheme("tracking"),A=fromTheme("leading"),k=fromTheme("breakpoint"),M=fromTheme("container"),P=fromTheme("spacing"),D=fromTheme("radius"),L=fromTheme("shadow"),q=fromTheme("inset-shadow"),B=fromTheme("text-shadow"),F=fromTheme("drop-shadow"),j=fromTheme("blur"),z=fromTheme("perspective"),V=fromTheme("aspect"),G=fromTheme("ease"),W=fromTheme("animate"),Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ee=()=>[...X(),isArbitraryVariable,isArbitraryValue],re=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto","contain","none"],ne=()=>[isArbitraryVariable,isArbitraryValue,P],ae=()=>[isFraction,"full","auto",...ne()],oe=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],se=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],ce=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],de=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],we=()=>["start","end","center","stretch","center-safe","end-safe"],ge=()=>["auto",...ne()],ve=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ne()],be=()=>[_,isArbitraryVariable,isArbitraryValue],ke=()=>[...X(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],fe=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],xe=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],Ae=()=>["","none","full",D,isArbitraryVariable,isArbitraryValue],Se=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength],Me=()=>["solid","dashed","dotted","double"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition],$e=()=>["","none",j,isArbitraryVariable,isArbitraryValue],Be=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],Pe=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],De=()=>[isNumber,isArbitraryVariable,isArbitraryValue],Le=()=>[isFraction,"full",...ne()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,V]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,M]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ee()}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ae()}],"inset-x":[{"inset-x":ae()}],"inset-y":[{"inset-y":ae()}],start:[{start:ae()}],end:[{end:ae()}],top:[{top:ae()}],right:[{right:ae()}],bottom:[{bottom:ae()}],left:[{left:ae()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",M,...ne()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":oe()}],"col-start-end":[{col:se()}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":oe()}],"row-start-end":[{row:se()}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":de()}],"auto-rows":[{"auto-rows":de()}],gap:[{gap:ne()}],"gap-x":[{"gap-x":ne()}],"gap-y":[{"gap-y":ne()}],"justify-content":[{justify:[...ye(),"normal"]}],"justify-items":[{"justify-items":[...we(),"normal"]}],"justify-self":[{"justify-self":["auto",...we()]}],"align-content":[{content:["normal",...ye()]}],"align-items":[{items:[...we(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...we(),{baseline:["","last"]}]}],"place-content":[{"place-content":ye()}],"place-items":[{"place-items":[...we(),"baseline"]}],"place-self":[{"place-self":["auto",...we()]}],p:[{p:ne()}],px:[{px:ne()}],py:[{py:ne()}],ps:[{ps:ne()}],pe:[{pe:ne()}],pt:[{pt:ne()}],pr:[{pr:ne()}],pb:[{pb:ne()}],pl:[{pl:ne()}],m:[{m:ge()}],mx:[{mx:ge()}],my:[{my:ge()}],ms:[{ms:ge()}],me:[{me:ge()}],mt:[{mt:ge()}],mr:[{mr:ge()}],mb:[{mb:ge()}],ml:[{ml:ge()}],"space-x":[{"space-x":ne()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ne()}],"space-y-reverse":["space-y-reverse"],size:[{size:ve()}],w:[{w:[M,"screen",...ve()]}],"min-w":[{"min-w":[M,"screen","none",...ve()]}],"max-w":[{"max-w":[M,"screen","none","prose",{screen:[k]},...ve()]}],h:[{h:["screen","lh",...ve()]}],"min-h":[{"min-h":["screen","lh","none",...ve()]}],"max-h":[{"max-h":["screen","lh",...ve()]}],"font-size":[{text:["base",S,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[R,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,v]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[T,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[A,...ne()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:be()}],"text-color":[{text:be()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:be()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ke()}],"bg-repeat":[{bg:me()}],"bg-size":[{bg:fe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:be()}],"gradient-from-pos":[{from:xe()}],"gradient-via-pos":[{via:xe()}],"gradient-to-pos":[{to:xe()}],"gradient-from":[{from:be()}],"gradient-via":[{via:be()}],"gradient-to":[{to:be()}],rounded:[{rounded:Ae()}],"rounded-s":[{"rounded-s":Ae()}],"rounded-e":[{"rounded-e":Ae()}],"rounded-t":[{"rounded-t":Ae()}],"rounded-r":[{"rounded-r":Ae()}],"rounded-b":[{"rounded-b":Ae()}],"rounded-l":[{"rounded-l":Ae()}],"rounded-ss":[{"rounded-ss":Ae()}],"rounded-se":[{"rounded-se":Ae()}],"rounded-ee":[{"rounded-ee":Ae()}],"rounded-es":[{"rounded-es":Ae()}],"rounded-tl":[{"rounded-tl":Ae()}],"rounded-tr":[{"rounded-tr":Ae()}],"rounded-br":[{"rounded-br":Ae()}],"rounded-bl":[{"rounded-bl":Ae()}],"border-w":[{border:Se()}],"border-w-x":[{"border-x":Se()}],"border-w-y":[{"border-y":Se()}],"border-w-s":[{"border-s":Se()}],"border-w-e":[{"border-e":Se()}],"border-w-t":[{"border-t":Se()}],"border-w-r":[{"border-r":Se()}],"border-w-b":[{"border-b":Se()}],"border-w-l":[{"border-l":Se()}],"divide-x":[{"divide-x":Se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:be()}],"border-color-x":[{"border-x":be()}],"border-color-y":[{"border-y":be()}],"border-color-s":[{"border-s":be()}],"border-color-e":[{"border-e":be()}],"border-color-t":[{"border-t":be()}],"border-color-r":[{"border-r":be()}],"border-color-b":[{"border-b":be()}],"border-color-l":[{"border-l":be()}],"divide-color":[{divide:be()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:be()}],shadow:[{shadow:["","none",L,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:be()}],"inset-shadow":[{"inset-shadow":["none",q,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":be()}],"ring-w":[{ring:Se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:be()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":be()}],"inset-ring-w":[{"inset-ring":Se()}],"inset-ring-color":[{"inset-ring":be()}],"text-shadow":[{"text-shadow":["none",B,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":be()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":be()}],"mask-image-linear-to-color":[{"mask-linear-to":be()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":be()}],"mask-image-t-to-color":[{"mask-t-to":be()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":be()}],"mask-image-r-to-color":[{"mask-r-to":be()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":be()}],"mask-image-b-to-color":[{"mask-b-to":be()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":be()}],"mask-image-l-to-color":[{"mask-l-to":be()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":be()}],"mask-image-x-to-color":[{"mask-x-to":be()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":be()}],"mask-image-y-to-color":[{"mask-y-to":be()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":be()}],"mask-image-radial-to-color":[{"mask-radial-to":be()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":X()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":be()}],"mask-image-conic-to-color":[{"mask-conic-to":be()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ke()}],"mask-repeat":[{mask:me()}],"mask-size":[{mask:fe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:$e()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",F,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":be()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":$e()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ne()}],"border-spacing-x":[{"border-spacing-x":ne()}],"border-spacing-y":[{"border-spacing-y":ne()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",G,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",W,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[z,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":ee()}],rotate:[{rotate:Be()}],"rotate-x":[{"rotate-x":Be()}],"rotate-y":[{"rotate-y":Be()}],"rotate-z":[{"rotate-z":Be()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:De()}],"skew-x":[{"skew-x":De()}],"skew-y":[{"skew-y":De()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:be()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:be()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...be()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...be()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn$1(..._){return twMerge(clsx(_))}const ccsHighlightStyle=HighlightStyle.define([{tag:tags.typeName,color:"#00796b",fontWeight:"bold"},{tag:tags.keyword,color:"#7e57c2"},{tag:tags.variableName,color:"#1976d2"},{tag:tags.labelName,color:"#1976d2",textDecoration:"overline",textDecorationThickness:"1px"},{tag:tags.operator,color:"#546e7a"},{tag:tags.punctuation,color:"#546e7a"},{tag:tags.lineComment,color:"#90a4ae",fontStyle:"italic"},{tag:tags.invalid,color:"red",borderBottom:"1px dotted red"}]),ccsLanguage=StreamLanguage.define({token:_=>_.eatSpace()?null:_.match("//")?(_.skipToEnd(),"lineComment"):_.match(/^'[a-z][a-zA-Z0-9_]*/)?"labelName":_.match(/^tau\b/)?"atom":_.match(/^[a-z][a-zA-Z0-9_]*/)?"variableName":_.match(/^[A-Z][a-zA-Z0-9_]*/)?"typeName":_.match(/^(Nil|0|def)\b/)?"keyword":_.match(/^[.|=+\\\/]/)?"operator":_.match(/^[\(\)\{\}\[\],]/)?"punctuation":(_.next(),"invalid")}),highlightTheme=EditorView.baseTheme({".cm-ast-highlight":{backgroundColor:"rgba(255, 59, 59, 0.3)"}});function TextEditor({initValue:_,onTextChange:v,highlightRange:S,className:R,...T}){const[A,k]=reactExports.useState(_??""),M=reactExports.useCallback(D=>{k(D),v&&v(D)},[v]),P=reactExports.useMemo(()=>{if(!S)return[];const D=Decoration.mark({class:"cm-ast-highlight"}),L=Decoration.set([D.range(S.from,S.to)]);return EditorView.decorations.of(L)},[S]);return jsxRuntimeExports.jsx("div",{className:cn$1("flex",R),...T,children:jsxRuntimeExports.jsx(ReactCodeMirror,{value:A,style:{fontSize:"1.2em",flex:1},basicSetup:{closeBrackets:!1},extensions:[ccsLanguage,syntaxHighlighting(ccsHighlightStyle),highlightTheme,P,EditorView.theme({"&":{height:"100%",maxHeight:"500px"}})],onChange:M})})}const minimalTheme=EditorView.theme({"&":{backgroundColor:"transparent !important",fontSize:"inherit",fontFamily:"'Consolas', monospace"},".cm-scroller":{fontFamily:"inherit",overflow:"hidden !important"},".cm-content":{padding:"0",caretColor:"transparent"},".cm-line":{paddingLeft:"0"},"&.cm-focused":{outline:"none"}});function CCSViewer({code:_,className:v}){return jsxRuntimeExports.jsx("div",{className:v,style:{display:"inline-block",width:"100%"},children:jsxRuntimeExports.jsx(ReactCodeMirror,{value:_,readOnly:!0,editable:!1,basicSetup:{lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightSelectionMatches:!1,bracketMatching:!1,history:!1,drawSelection:!1},extensions:[ccsLanguage,syntaxHighlighting(ccsHighlightStyle),minimalTheme,EditorView.lineWrapping]})})}function setRef(_,v){if(typeof _=="function")return _(v);_!=null&&(_.current=v)}function composeRefs(..._){return v=>{let S=!1;const R=_.map(T=>{const A=setRef(T,v);return!S&&typeof A=="function"&&(S=!0),A});if(S)return()=>{for(let T=0;T<R.length;T++){const A=R[T];typeof A=="function"?A():setRef(_[T],null)}}}}function useComposedRefs(..._){return reactExports.useCallback(composeRefs(..._),_)}var REACT_LAZY_TYPE=Symbol.for("react.lazy"),use=React$1[" use ".trim().toString()];function isPromiseLike(_){return typeof _=="object"&&_!==null&&"then"in _}function isLazyComponent(_){return _!=null&&typeof _=="object"&&"$$typeof"in _&&_.$$typeof===REACT_LAZY_TYPE&&"_payload"in _&&isPromiseLike(_._payload)}function createSlot$4(_){const v=createSlotClone$4(_),S=reactExports.forwardRef((R,T)=>{let{children:A,...k}=R;isLazyComponent(A)&&typeof use=="function"&&(A=use(A._payload));const M=reactExports.Children.toArray(A),P=M.find(isSlottable$4);if(P){const D=P.props.children,L=M.map(q=>q===P?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,L):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}var Slot$2=createSlot$4("Slot");function createSlotClone$4(_){const v=reactExports.forwardRef((S,R)=>{let{children:T,...A}=S;if(isLazyComponent(T)&&typeof use=="function"&&(T=use(T._payload)),reactExports.isValidElement(T)){const k=getElementRef$5(T),M=mergeProps$4(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$5=Symbol("radix.slottable");function isSlottable$4(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$5}function mergeProps$4(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const P=A(...M);return T(...M),P}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$5(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}const falsyToString=_=>typeof _=="boolean"?`${_}`:_===0?"0":_,cx=clsx,cva=(_,v)=>S=>{var R;if(v?.variants==null)return cx(_,S?.class,S?.className);const{variants:T,defaultVariants:A}=v,k=Object.keys(T).map(D=>{const L=S?.[D],q=A?.[D];if(L===null)return null;const B=falsyToString(L)||falsyToString(q);return T[D][B]}),M=S&&Object.entries(S).reduce((D,L)=>{let[q,B]=L;return B===void 0||(D[q]=B),D},{}),P=v==null||(R=v.compoundVariants)===null||R===void 0?void 0:R.reduce((D,L)=>{let{class:q,className:B,...F}=L;return Object.entries(F).every(j=>{let[z,V]=j;return Array.isArray(V)?V.includes({...A,...M}[z]):{...A,...M}[z]===V})?[...D,q,B]:D},[]);return cx(_,k,P,S?.class,S?.className)},buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_,variant:v,size:S,asChild:R=!1,...T},A)=>{const k=R?Slot$2:"button";return jsxRuntimeExports.jsx(k,{className:cn$1(buttonVariants({variant:v,size:S,className:_})),ref:A,...T})});Button.displayName="Button";const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=_=>_.replace(/^([A-Z])|[\s-_]+(\w)/g,(v,S,R)=>R?R.toUpperCase():S.toLowerCase()),toPascalCase=_=>{const v=toCamelCase(_);return v.charAt(0).toUpperCase()+v.slice(1)},mergeClasses=(..._)=>_.filter((v,S,R)=>!!v&&v.trim()!==""&&R.indexOf(v)===S).join(" ").trim(),hasA11yProp=_=>{for(const v in _)if(v.startsWith("aria-")||v==="role"||v==="title")return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon$1=reactExports.forwardRef(({color:_="currentColor",size:v=24,strokeWidth:S=2,absoluteStrokeWidth:R,className:T="",children:A,iconNode:k,...M},P)=>reactExports.createElement("svg",{ref:P,...defaultAttributes,width:v,height:v,stroke:_,strokeWidth:R?Number(S)*24/Number(v):S,className:mergeClasses("lucide",T),...!A&&!hasA11yProp(M)&&{"aria-hidden":"true"},...M},[...k.map(([D,L])=>reactExports.createElement(D,L)),...Array.isArray(A)?A:[A]]));const createLucideIcon=(_,v)=>{const S=reactExports.forwardRef(({className:R,...T},A)=>reactExports.createElement(Icon$1,{ref:A,iconNode:v,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(_))}`,`lucide-${_}`,R),...T}));return S.displayName=toPascalCase(_),S};const __iconNode$i=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$i);const __iconNode$h=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$h);const __iconNode$g=[["path",{d:"M10 6h8",key:"zvc2xc"}],["path",{d:"M12 16h6",key:"yi5mkt"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 11h7",key:"wz2hg0"}]],ChartGantt=createLucideIcon("chart-gantt",__iconNode$g);const __iconNode$f=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$f);const __iconNode$e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$e);const __iconNode$d=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$d);const __iconNode$c=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$c);const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$b);const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle=createLucideIcon("circle",__iconNode$a);const __iconNode$9=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],CornerDownRight=createLucideIcon("corner-down-right",__iconNode$9);const __iconNode$8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$8);const __iconNode$7=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Earth=createLucideIcon("earth",__iconNode$7);const __iconNode$6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$6);const __iconNode$5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$5);const __iconNode$4=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$4);const __iconNode$3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$3);const __iconNode$2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$2);const __iconNode$1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$1);const __iconNode=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode);function composeEventHandlers(_,v,{checkForDefaultPrevented:S=!0}={}){return function(T){if(_?.(T),S===!1||!T.defaultPrevented)return v?.(T)}}function createContextScope(_,v=[]){let S=[];function R(A,k){const M=reactExports.createContext(k),P=S.length;S=[...S,k];const D=q=>{const{scope:B,children:F,...j}=q,z=B?.[_]?.[P]||M,V=reactExports.useMemo(()=>j,Object.values(j));return jsxRuntimeExports.jsx(z.Provider,{value:V,children:F})};D.displayName=A+"Provider";function L(q,B){const F=B?.[_]?.[P]||M,j=reactExports.useContext(F);if(j)return j;if(k!==void 0)return k;throw new Error(`\`${q}\` must be used within \`${A}\``)}return[D,L]}const T=()=>{const A=S.map(k=>reactExports.createContext(k));return function(M){const P=M?.[_]||A;return reactExports.useMemo(()=>({[`__scope${_}`]:{...M,[_]:P}}),[M,P])}};return T.scopeName=_,[R,composeContextScopes(T,...v)]}function composeContextScopes(..._){const v=_[0];if(_.length===1)return v;const S=()=>{const R=_.map(T=>({useScope:T(),scopeName:T.scopeName}));return function(A){const k=R.reduce((M,{useScope:P,scopeName:D})=>{const q=P(A)[`__scope${D}`];return{...M,...q}},{});return reactExports.useMemo(()=>({[`__scope${v.scopeName}`]:k}),[k])}};return S.scopeName=v.scopeName,S}var useLayoutEffect2=globalThis?.document?reactExports.useLayoutEffect:()=>{},useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:_,defaultProp:v,onChange:S=()=>{},caller:R}){const[T,A,k]=useUncontrolledState({defaultProp:v,onChange:S}),M=_!==void 0,P=M?_:T;{const L=reactExports.useRef(_!==void 0);reactExports.useEffect(()=>{const q=L.current;q!==M&&console.warn(`${R} is changing from ${q?"controlled":"uncontrolled"} to ${M?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),L.current=M},[M,R])}const D=reactExports.useCallback(L=>{if(M){const q=isFunction$1(L)?L(_):L;q!==_&&k.current?.(q)}else A(L)},[M,_,A,k]);return[P,D]}function useUncontrolledState({defaultProp:_,onChange:v}){const[S,R]=reactExports.useState(_),T=reactExports.useRef(S),A=reactExports.useRef(v);return useInsertionEffect(()=>{A.current=v},[v]),reactExports.useEffect(()=>{T.current!==S&&(A.current?.(S),T.current=S)},[S,T]),[S,R,A]}function isFunction$1(_){return typeof _=="function"}function createSlot$3(_){const v=createSlotClone$3(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),P=M.find(isSlottable$3);if(P){const D=P.props.children,L=M.map(q=>q===P?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,L):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$3(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$4(T),M=mergeProps$3(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$4=Symbol("radix.slottable");function isSlottable$3(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$4}function mergeProps$3(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const P=A(...M);return T(...M),P}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$4(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((_,v)=>{const S=createSlot$3(`Primitive.${v}`),R=reactExports.forwardRef((T,A)=>{const{asChild:k,...M}=T,P=k?S:v;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(P,{...M,ref:A})});return R.displayName=`Primitive.${v}`,{..._,[v]:R}},{});function dispatchDiscreteCustomEvent(_,v){_&&reactDomExports.flushSync(()=>_.dispatchEvent(v))}function createSlot$2(_){const v=createSlotClone$2(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),P=M.find(isSlottable$2);if(P){const D=P.props.children,L=M.map(q=>q===P?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,L):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$2(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$3(T),M=mergeProps$2(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$3=Symbol("radix.slottable");function isSlottable$2(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$3}function mergeProps$2(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const P=A(...M);return T(...M),P}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$3(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}function createCollection(_){const v=_+"CollectionProvider",[S,R]=createContextScope(v),[T,A]=S(v,{collectionRef:{current:null},itemMap:new Map}),k=z=>{const{scope:V,children:G}=z,W=React.useRef(null),Y=React.useRef(new Map).current;return jsxRuntimeExports.jsx(T,{scope:V,itemMap:Y,collectionRef:W,children:G})};k.displayName=v;const M=_+"CollectionSlot",P=createSlot$2(M),D=React.forwardRef((z,V)=>{const{scope:G,children:W}=z,Y=A(M,G),X=useComposedRefs(V,Y.collectionRef);return jsxRuntimeExports.jsx(P,{ref:X,children:W})});D.displayName=M;const L=_+"CollectionItemSlot",q="data-radix-collection-item",B=createSlot$2(L),F=React.forwardRef((z,V)=>{const{scope:G,children:W,...Y}=z,X=React.useRef(null),ee=useComposedRefs(V,X),re=A(L,G);return React.useEffect(()=>(re.itemMap.set(X,{ref:X,...Y}),()=>void re.itemMap.delete(X))),jsxRuntimeExports.jsx(B,{[q]:"",ref:ee,children:W})});F.displayName=L;function j(z){const V=A(_+"CollectionConsumer",z);return React.useCallback(()=>{const W=V.collectionRef.current;if(!W)return[];const Y=Array.from(W.querySelectorAll(`[${q}]`));return Array.from(V.itemMap.values()).sort((re,Q)=>Y.indexOf(re.ref.current)-Y.indexOf(Q.ref.current))},[V.collectionRef,V.itemMap])}return[{Provider:k,Slot:D,ItemSlot:F},j,R]}var DirectionContext=reactExports.createContext(void 0);function useDirection(_){const v=reactExports.useContext(DirectionContext);return _||v||"ltr"}function useCallbackRef$1(_){const v=reactExports.useRef(_);return reactExports.useEffect(()=>{v.current=_}),reactExports.useMemo(()=>(...S)=>v.current?.(...S),[])}function useEscapeKeydown(_,v=globalThis?.document){const S=useCallbackRef$1(_);reactExports.useEffect(()=>{const R=T=>{T.key==="Escape"&&S(T)};return v.addEventListener("keydown",R,{capture:!0}),()=>v.removeEventListener("keydown",R,{capture:!0})},[S,v])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_,v)=>{const{disableOutsidePointerEvents:S=!1,onEscapeKeyDown:R,onPointerDownOutside:T,onFocusOutside:A,onInteractOutside:k,onDismiss:M,...P}=_,D=reactExports.useContext(DismissableLayerContext),[L,q]=reactExports.useState(null),B=L?.ownerDocument??globalThis?.document,[,F]=reactExports.useState({}),j=useComposedRefs(v,Q=>q(Q)),z=Array.from(D.layers),[V]=[...D.layersWithOutsidePointerEventsDisabled].slice(-1),G=z.indexOf(V),W=L?z.indexOf(L):-1,Y=D.layersWithOutsidePointerEventsDisabled.size>0,X=W>=G,ee=usePointerDownOutside(Q=>{const ne=Q.target,ae=[...D.branches].some(oe=>oe.contains(ne));!X||ae||(T?.(Q),k?.(Q),Q.defaultPrevented||M?.())},B),re=useFocusOutside(Q=>{const ne=Q.target;[...D.branches].some(oe=>oe.contains(ne))||(A?.(Q),k?.(Q),Q.defaultPrevented||M?.())},B);return useEscapeKeydown(Q=>{W===D.layers.size-1&&(R?.(Q),!Q.defaultPrevented&&M&&(Q.preventDefault(),M()))},B),reactExports.useEffect(()=>{if(L)return S&&(D.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=B.body.style.pointerEvents,B.body.style.pointerEvents="none"),D.layersWithOutsidePointerEventsDisabled.add(L)),D.layers.add(L),dispatchUpdate(),()=>{S&&D.layersWithOutsidePointerEventsDisabled.size===1&&(B.body.style.pointerEvents=originalBodyPointerEvents)}},[L,B,S,D]),reactExports.useEffect(()=>()=>{L&&(D.layers.delete(L),D.layersWithOutsidePointerEventsDisabled.delete(L),dispatchUpdate())},[L,D]),reactExports.useEffect(()=>{const Q=()=>F({});return document.addEventListener(CONTEXT_UPDATE,Q),()=>document.removeEventListener(CONTEXT_UPDATE,Q)},[]),jsxRuntimeExports.jsx(Primitive.div,{...P,ref:j,style:{pointerEvents:Y?X?"auto":"none":void 0,..._.style},onFocusCapture:composeEventHandlers(_.onFocusCapture,re.onFocusCapture),onBlurCapture:composeEventHandlers(_.onBlurCapture,re.onBlurCapture),onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,ee.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_,v)=>{const S=reactExports.useContext(DismissableLayerContext),R=reactExports.useRef(null),T=useComposedRefs(v,R);return reactExports.useEffect(()=>{const A=R.current;if(A)return S.branches.add(A),()=>{S.branches.delete(A)}},[S.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._,ref:T})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_,v=globalThis?.document){const S=useCallbackRef$1(_),R=reactExports.useRef(!1),T=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const A=M=>{if(M.target&&!R.current){let P=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,S,D,{discrete:!0})};const D={originalEvent:M};M.pointerType==="touch"?(v.removeEventListener("click",T.current),T.current=P,v.addEventListener("click",T.current,{once:!0})):P()}else v.removeEventListener("click",T.current);R.current=!1},k=window.setTimeout(()=>{v.addEventListener("pointerdown",A)},0);return()=>{window.clearTimeout(k),v.removeEventListener("pointerdown",A),v.removeEventListener("click",T.current)}},[v,S]),{onPointerDownCapture:()=>R.current=!0}}function useFocusOutside(_,v=globalThis?.document){const S=useCallbackRef$1(_),R=reactExports.useRef(!1);return reactExports.useEffect(()=>{const T=A=>{A.target&&!R.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,S,{originalEvent:A},{discrete:!1})};return v.addEventListener("focusin",T),()=>v.removeEventListener("focusin",T)},[v,S]),{onFocusCapture:()=>R.current=!0,onBlurCapture:()=>R.current=!1}}function dispatchUpdate(){const _=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_)}function handleAndDispatchCustomEvent(_,v,S,{discrete:R}){const T=S.originalEvent.target,A=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:S});v&&T.addEventListener(_,v,{once:!0}),R?dispatchDiscreteCustomEvent(T,A):T.dispatchEvent(A)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(v=>v.remove()),count$1--}},[])}function createFocusGuard(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.outline="none",_.style.opacity="0",_.style.position="fixed",_.style.pointerEvents="none",_}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_,v)=>{const{loop:S=!1,trapped:R=!1,onMountAutoFocus:T,onUnmountAutoFocus:A,...k}=_,[M,P]=reactExports.useState(null),D=useCallbackRef$1(T),L=useCallbackRef$1(A),q=reactExports.useRef(null),B=useComposedRefs(v,z=>P(z)),F=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(R){let z=function(Y){if(F.paused||!M)return;const X=Y.target;M.contains(X)?q.current=X:focus(q.current,{select:!0})},V=function(Y){if(F.paused||!M)return;const X=Y.relatedTarget;X!==null&&(M.contains(X)||focus(q.current,{select:!0}))},G=function(Y){if(document.activeElement===document.body)for(const ee of Y)ee.removedNodes.length>0&&focus(M)};document.addEventListener("focusin",z),document.addEventListener("focusout",V);const W=new MutationObserver(G);return M&&W.observe(M,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",z),document.removeEventListener("focusout",V),W.disconnect()}}},[R,M,F.paused]),reactExports.useEffect(()=>{if(M){focusScopesStack.add(F);const z=document.activeElement;if(!M.contains(z)){const G=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);M.addEventListener(AUTOFOCUS_ON_MOUNT,D),M.dispatchEvent(G),G.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(M)),{select:!0}),document.activeElement===z&&focus(M))}return()=>{M.removeEventListener(AUTOFOCUS_ON_MOUNT,D),setTimeout(()=>{const G=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);M.addEventListener(AUTOFOCUS_ON_UNMOUNT,L),M.dispatchEvent(G),G.defaultPrevented||focus(z??document.body,{select:!0}),M.removeEventListener(AUTOFOCUS_ON_UNMOUNT,L),focusScopesStack.remove(F)},0)}}},[M,D,L,F]);const j=reactExports.useCallback(z=>{if(!S&&!R||F.paused)return;const V=z.key==="Tab"&&!z.altKey&&!z.ctrlKey&&!z.metaKey,G=document.activeElement;if(V&&G){const W=z.currentTarget,[Y,X]=getTabbableEdges(W);Y&&X?!z.shiftKey&&G===X?(z.preventDefault(),S&&focus(Y,{select:!0})):z.shiftKey&&G===Y&&(z.preventDefault(),S&&focus(X,{select:!0})):G===W&&z.preventDefault()}},[S,R,F.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...k,ref:B,onKeyDown:j})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(_,{select:v=!1}={}){const S=document.activeElement;for(const R of _)if(focus(R,{select:v}),document.activeElement!==S)return}function getTabbableEdges(_){const v=getTabbableCandidates(_),S=findVisible(v,_),R=findVisible(v.reverse(),_);return[S,R]}function getTabbableCandidates(_){const v=[],S=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:R=>{const T=R.tagName==="INPUT"&&R.type==="hidden";return R.disabled||R.hidden||T?NodeFilter.FILTER_SKIP:R.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;S.nextNode();)v.push(S.currentNode);return v}function findVisible(_,v){for(const S of _)if(!isHidden(S,{upTo:v}))return S}function isHidden(_,{upTo:v}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if(v!==void 0&&_===v)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function isSelectableInput(_){return _ instanceof HTMLInputElement&&"select"in _}function focus(_,{select:v=!1}={}){if(_&&_.focus){const S=document.activeElement;_.focus({preventScroll:!0}),_!==S&&isSelectableInput(_)&&v&&_.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _=[];return{add(v){const S=_[0];v!==S&&S?.pause(),_=arrayRemove(_,v),_.unshift(v)},remove(v){_=arrayRemove(_,v),_[0]?.resume()}}}function arrayRemove(_,v){const S=[..._],R=S.indexOf(v);return R!==-1&&S.splice(R,1),S}function removeLinks(_){return _.filter(v=>v.tagName!=="A")}var useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count=0;function useId(_){const[v,S]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{S(R=>R??String(count++))},[_]),v?`radix-${v}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_=>({x:_,y:_}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_,v,S){return max(_,min(v,S))}function evaluate(_,v){return typeof _=="function"?_(v):_}function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getOppositeAxis(_){return _==="x"?"y":"x"}function getAxisLength(_){return _==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(_){return yAxisSides.has(getSide(_))?"y":"x"}function getAlignmentAxis(_){return getOppositeAxis(getSideAxis(_))}function getAlignmentSides(_,v,S){S===void 0&&(S=!1);const R=getAlignment(_),T=getAlignmentAxis(_),A=getAxisLength(T);let k=T==="x"?R===(S?"end":"start")?"right":"left":R==="start"?"bottom":"top";return v.reference[A]>v.floating[A]&&(k=getOppositePlacement(k)),[k,getOppositePlacement(k)]}function getExpandedPlacements(_){const v=getOppositePlacement(_);return[getOppositeAlignmentPlacement(_),v,getOppositeAlignmentPlacement(v)]}function getOppositeAlignmentPlacement(_){return _.replace(/start|end/g,v=>oppositeAlignmentMap[v])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(_,v,S){switch(_){case"top":case"bottom":return S?v?rlPlacement:lrPlacement:v?lrPlacement:rlPlacement;case"left":case"right":return v?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(_,v,S,R){const T=getAlignment(_);let A=getSideList(getSide(_),S==="start",R);return T&&(A=A.map(k=>k+"-"+T),v&&(A=A.concat(A.map(getOppositeAlignmentPlacement)))),A}function getOppositePlacement(_){return _.replace(/left|right|bottom|top/g,v=>oppositeSideMap[v])}function expandPaddingObject(_){return{top:0,right:0,bottom:0,left:0,..._}}function getPaddingObject(_){return typeof _!="number"?expandPaddingObject(_):{top:_,right:_,bottom:_,left:_}}function rectToClientRect(_){const{x:v,y:S,width:R,height:T}=_;return{width:R,height:T,top:S,left:v,right:v+R,bottom:S+T,x:v,y:S}}function computeCoordsFromPlacement(_,v,S){let{reference:R,floating:T}=_;const A=getSideAxis(v),k=getAlignmentAxis(v),M=getAxisLength(k),P=getSide(v),D=A==="y",L=R.x+R.width/2-T.width/2,q=R.y+R.height/2-T.height/2,B=R[M]/2-T[M]/2;let F;switch(P){case"top":F={x:L,y:R.y-T.height};break;case"bottom":F={x:L,y:R.y+R.height};break;case"right":F={x:R.x+R.width,y:q};break;case"left":F={x:R.x-T.width,y:q};break;default:F={x:R.x,y:R.y}}switch(getAlignment(v)){case"start":F[k]-=B*(S&&D?-1:1);break;case"end":F[k]+=B*(S&&D?-1:1);break}return F}const computePosition$1=async(_,v,S)=>{const{placement:R="bottom",strategy:T="absolute",middleware:A=[],platform:k}=S,M=A.filter(Boolean),P=await(k.isRTL==null?void 0:k.isRTL(v));let D=await k.getElementRects({reference:_,floating:v,strategy:T}),{x:L,y:q}=computeCoordsFromPlacement(D,R,P),B=R,F={},j=0;for(let z=0;z<M.length;z++){const{name:V,fn:G}=M[z],{x:W,y:Y,data:X,reset:ee}=await G({x:L,y:q,initialPlacement:R,placement:B,strategy:T,middlewareData:F,rects:D,platform:k,elements:{reference:_,floating:v}});L=W??L,q=Y??q,F={...F,[V]:{...F[V],...X}},ee&&j<=50&&(j++,typeof ee=="object"&&(ee.placement&&(B=ee.placement),ee.rects&&(D=ee.rects===!0?await k.getElementRects({reference:_,floating:v,strategy:T}):ee.rects),{x:L,y:q}=computeCoordsFromPlacement(D,B,P)),z=-1)}return{x:L,y:q,placement:B,strategy:T,middlewareData:F}};async function detectOverflow(_,v){var S;v===void 0&&(v={});const{x:R,y:T,platform:A,rects:k,elements:M,strategy:P}=_,{boundary:D="clippingAncestors",rootBoundary:L="viewport",elementContext:q="floating",altBoundary:B=!1,padding:F=0}=evaluate(v,_),j=getPaddingObject(F),V=M[B?q==="floating"?"reference":"floating":q],G=rectToClientRect(await A.getClippingRect({element:(S=await(A.isElement==null?void 0:A.isElement(V)))==null||S?V:V.contextElement||await(A.getDocumentElement==null?void 0:A.getDocumentElement(M.floating)),boundary:D,rootBoundary:L,strategy:P})),W=q==="floating"?{x:R,y:T,width:k.floating.width,height:k.floating.height}:k.reference,Y=await(A.getOffsetParent==null?void 0:A.getOffsetParent(M.floating)),X=await(A.isElement==null?void 0:A.isElement(Y))?await(A.getScale==null?void 0:A.getScale(Y))||{x:1,y:1}:{x:1,y:1},ee=rectToClientRect(A.convertOffsetParentRelativeRectToViewportRelativeRect?await A.convertOffsetParentRelativeRectToViewportRelativeRect({elements:M,rect:W,offsetParent:Y,strategy:P}):W);return{top:(G.top-ee.top+j.top)/X.y,bottom:(ee.bottom-G.bottom+j.bottom)/X.y,left:(G.left-ee.left+j.left)/X.x,right:(ee.right-G.right+j.right)/X.x}}const arrow$3=_=>({name:"arrow",options:_,async fn(v){const{x:S,y:R,placement:T,rects:A,platform:k,elements:M,middlewareData:P}=v,{element:D,padding:L=0}=evaluate(_,v)||{};if(D==null)return{};const q=getPaddingObject(L),B={x:S,y:R},F=getAlignmentAxis(T),j=getAxisLength(F),z=await k.getDimensions(D),V=F==="y",G=V?"top":"left",W=V?"bottom":"right",Y=V?"clientHeight":"clientWidth",X=A.reference[j]+A.reference[F]-B[F]-A.floating[j],ee=B[F]-A.reference[F],re=await(k.getOffsetParent==null?void 0:k.getOffsetParent(D));let Q=re?re[Y]:0;(!Q||!await(k.isElement==null?void 0:k.isElement(re)))&&(Q=M.floating[Y]||A.floating[j]);const ne=X/2-ee/2,ae=Q/2-z[j]/2-1,oe=min(q[G],ae),se=min(q[W],ae),ce=oe,de=Q-z[j]-se,ye=Q/2-z[j]/2+ne,we=clamp$1(ce,ye,de),ge=!P.arrow&&getAlignment(T)!=null&&ye!==we&&A.reference[j]/2-(ye<ce?oe:se)-z[j]/2<0,ve=ge?ye<ce?ye-ce:ye-de:0;return{[F]:B[F]+ve,data:{[F]:we,centerOffset:ye-we-ve,...ge&&{alignmentOffset:ve}},reset:ge}}}),flip$2=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn(v){var S,R;const{placement:T,middlewareData:A,rects:k,initialPlacement:M,platform:P,elements:D}=v,{mainAxis:L=!0,crossAxis:q=!0,fallbackPlacements:B,fallbackStrategy:F="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:z=!0,...V}=evaluate(_,v);if((S=A.arrow)!=null&&S.alignmentOffset)return{};const G=getSide(T),W=getSideAxis(M),Y=getSide(M)===M,X=await(P.isRTL==null?void 0:P.isRTL(D.floating)),ee=B||(Y||!z?[getOppositePlacement(M)]:getExpandedPlacements(M)),re=j!=="none";!B&&re&&ee.push(...getOppositeAxisPlacements(M,z,j,X));const Q=[M,...ee],ne=await detectOverflow(v,V),ae=[];let oe=((R=A.flip)==null?void 0:R.overflows)||[];if(L&&ae.push(ne[G]),q){const ye=getAlignmentSides(T,k,X);ae.push(ne[ye[0]],ne[ye[1]])}if(oe=[...oe,{placement:T,overflows:ae}],!ae.every(ye=>ye<=0)){var se,ce;const ye=(((se=A.flip)==null?void 0:se.index)||0)+1,we=Q[ye];if(we&&(!(q==="alignment"?W!==getSideAxis(we):!1)||oe.every(be=>getSideAxis(be.placement)===W?be.overflows[0]>0:!0)))return{data:{index:ye,overflows:oe},reset:{placement:we}};let ge=(ce=oe.filter(ve=>ve.overflows[0]<=0).sort((ve,be)=>ve.overflows[1]-be.overflows[1])[0])==null?void 0:ce.placement;if(!ge)switch(F){case"bestFit":{var de;const ve=(de=oe.filter(be=>{if(re){const ke=getSideAxis(be.placement);return ke===W||ke==="y"}return!0}).map(be=>[be.placement,be.overflows.filter(ke=>ke>0).reduce((ke,me)=>ke+me,0)]).sort((be,ke)=>be[1]-ke[1])[0])==null?void 0:de[0];ve&&(ge=ve);break}case"initialPlacement":ge=M;break}if(T!==ge)return{reset:{placement:ge}}}return{}}}};function getSideOffsets(_,v){return{top:_.top-v.height,right:_.right-v.width,bottom:_.bottom-v.height,left:_.left-v.width}}function isAnySideFullyClipped(_){return sides.some(v=>_[v]>=0)}const hide$2=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn(v){const{rects:S}=v,{strategy:R="referenceHidden",...T}=evaluate(_,v);switch(R){case"referenceHidden":{const A=await detectOverflow(v,{...T,elementContext:"reference"}),k=getSideOffsets(A,S.reference);return{data:{referenceHiddenOffsets:k,referenceHidden:isAnySideFullyClipped(k)}}}case"escaped":{const A=await detectOverflow(v,{...T,altBoundary:!0}),k=getSideOffsets(A,S.floating);return{data:{escapedOffsets:k,escaped:isAnySideFullyClipped(k)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(_,v){const{placement:S,platform:R,elements:T}=_,A=await(R.isRTL==null?void 0:R.isRTL(T.floating)),k=getSide(S),M=getAlignment(S),P=getSideAxis(S)==="y",D=originSides.has(k)?-1:1,L=A&&P?-1:1,q=evaluate(v,_);let{mainAxis:B,crossAxis:F,alignmentAxis:j}=typeof q=="number"?{mainAxis:q,crossAxis:0,alignmentAxis:null}:{mainAxis:q.mainAxis||0,crossAxis:q.crossAxis||0,alignmentAxis:q.alignmentAxis};return M&&typeof j=="number"&&(F=M==="end"?j*-1:j),P?{x:F*L,y:B*D}:{x:B*D,y:F*L}}const offset$2=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn(v){var S,R;const{x:T,y:A,placement:k,middlewareData:M}=v,P=await convertValueToCoords(v,_);return k===((S=M.offset)==null?void 0:S.placement)&&(R=M.arrow)!=null&&R.alignmentOffset?{}:{x:T+P.x,y:A+P.y,data:{...P,placement:k}}}}},shift$2=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn(v){const{x:S,y:R,placement:T}=v,{mainAxis:A=!0,crossAxis:k=!1,limiter:M={fn:V=>{let{x:G,y:W}=V;return{x:G,y:W}}},...P}=evaluate(_,v),D={x:S,y:R},L=await detectOverflow(v,P),q=getSideAxis(getSide(T)),B=getOppositeAxis(q);let F=D[B],j=D[q];if(A){const V=B==="y"?"top":"left",G=B==="y"?"bottom":"right",W=F+L[V],Y=F-L[G];F=clamp$1(W,F,Y)}if(k){const V=q==="y"?"top":"left",G=q==="y"?"bottom":"right",W=j+L[V],Y=j-L[G];j=clamp$1(W,j,Y)}const z=M.fn({...v,[B]:F,[q]:j});return{...z,data:{x:z.x-S,y:z.y-R,enabled:{[B]:A,[q]:k}}}}}},limitShift$2=function(_){return _===void 0&&(_={}),{options:_,fn(v){const{x:S,y:R,placement:T,rects:A,middlewareData:k}=v,{offset:M=0,mainAxis:P=!0,crossAxis:D=!0}=evaluate(_,v),L={x:S,y:R},q=getSideAxis(T),B=getOppositeAxis(q);let F=L[B],j=L[q];const z=evaluate(M,v),V=typeof z=="number"?{mainAxis:z,crossAxis:0}:{mainAxis:0,crossAxis:0,...z};if(P){const Y=B==="y"?"height":"width",X=A.reference[B]-A.floating[Y]+V.mainAxis,ee=A.reference[B]+A.reference[Y]-V.mainAxis;F<X?F=X:F>ee&&(F=ee)}if(D){var G,W;const Y=B==="y"?"width":"height",X=originSides.has(getSide(T)),ee=A.reference[q]-A.floating[Y]+(X&&((G=k.offset)==null?void 0:G[q])||0)+(X?0:V.crossAxis),re=A.reference[q]+A.reference[Y]+(X?0:((W=k.offset)==null?void 0:W[q])||0)-(X?V.crossAxis:0);j<ee?j=ee:j>re&&(j=re)}return{[B]:F,[q]:j}}}},size$2=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn(v){var S,R;const{placement:T,rects:A,platform:k,elements:M}=v,{apply:P=()=>{},...D}=evaluate(_,v),L=await detectOverflow(v,D),q=getSide(T),B=getAlignment(T),F=getSideAxis(T)==="y",{width:j,height:z}=A.floating;let V,G;q==="top"||q==="bottom"?(V=q,G=B===(await(k.isRTL==null?void 0:k.isRTL(M.floating))?"start":"end")?"left":"right"):(G=q,V=B==="end"?"top":"bottom");const W=z-L.top-L.bottom,Y=j-L.left-L.right,X=min(z-L[V],W),ee=min(j-L[G],Y),re=!v.middlewareData.shift;let Q=X,ne=ee;if((S=v.middlewareData.shift)!=null&&S.enabled.x&&(ne=Y),(R=v.middlewareData.shift)!=null&&R.enabled.y&&(Q=W),re&&!B){const oe=max(L.left,0),se=max(L.right,0),ce=max(L.top,0),de=max(L.bottom,0);F?ne=j-2*(oe!==0||se!==0?oe+se:max(L.left,L.right)):Q=z-2*(ce!==0||de!==0?ce+de:max(L.top,L.bottom))}await P({...v,availableWidth:ne,availableHeight:Q});const ae=await k.getDimensions(M.floating);return j!==ae.width||z!==ae.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_){return isNode(_)?(_.nodeName||"").toLowerCase():"#document"}function getWindow(_){var v;return(_==null||(v=_.ownerDocument)==null?void 0:v.defaultView)||window}function getDocumentElement(_){var v;return(v=(isNode(_)?_.ownerDocument:_.document)||window.document)==null?void 0:v.documentElement}function isNode(_){return hasWindow()?_ instanceof Node||_ instanceof getWindow(_).Node:!1}function isElement(_){return hasWindow()?_ instanceof Element||_ instanceof getWindow(_).Element:!1}function isHTMLElement(_){return hasWindow()?_ instanceof HTMLElement||_ instanceof getWindow(_).HTMLElement:!1}function isShadowRoot(_){return!hasWindow()||typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof getWindow(_).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(_){const{overflow:v,overflowX:S,overflowY:R,display:T}=getComputedStyle$1(_);return/auto|scroll|overlay|hidden|clip/.test(v+R+S)&&!invalidOverflowDisplayValues.has(T)}const tableElements=new Set(["table","td","th"]);function isTableElement(_){return tableElements.has(getNodeName(_))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(_){return topLayerSelectors.some(v=>{try{return _.matches(v)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(_){const v=isWebKit(),S=isElement(_)?getComputedStyle$1(_):_;return transformProperties.some(R=>S[R]?S[R]!=="none":!1)||(S.containerType?S.containerType!=="normal":!1)||!v&&(S.backdropFilter?S.backdropFilter!=="none":!1)||!v&&(S.filter?S.filter!=="none":!1)||willChangeValues.some(R=>(S.willChange||"").includes(R))||containValues.some(R=>(S.contain||"").includes(R))}function getContainingBlock(_){let v=getParentNode(_);for(;isHTMLElement(v)&&!isLastTraversableNode(v);){if(isContainingBlock(v))return v;if(isTopLayer(v))return null;v=getParentNode(v)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(_){return lastTraversableNodeNames.has(getNodeName(_))}function getComputedStyle$1(_){return getWindow(_).getComputedStyle(_)}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function getParentNode(_){if(getNodeName(_)==="html")return _;const v=_.assignedSlot||_.parentNode||isShadowRoot(_)&&_.host||getDocumentElement(_);return isShadowRoot(v)?v.host:v}function getNearestOverflowAncestor(_){const v=getParentNode(_);return isLastTraversableNode(v)?_.ownerDocument?_.ownerDocument.body:_.body:isHTMLElement(v)&&isOverflowElement(v)?v:getNearestOverflowAncestor(v)}function getOverflowAncestors(_,v,S){var R;v===void 0&&(v=[]),S===void 0&&(S=!0);const T=getNearestOverflowAncestor(_),A=T===((R=_.ownerDocument)==null?void 0:R.body),k=getWindow(T);if(A){const M=getFrameElement(k);return v.concat(k,k.visualViewport||[],isOverflowElement(T)?T:[],M&&S?getOverflowAncestors(M):[])}return v.concat(T,getOverflowAncestors(T,[],S))}function getFrameElement(_){return _.parent&&Object.getPrototypeOf(_.parent)?_.frameElement:null}function getCssDimensions(_){const v=getComputedStyle$1(_);let S=parseFloat(v.width)||0,R=parseFloat(v.height)||0;const T=isHTMLElement(_),A=T?_.offsetWidth:S,k=T?_.offsetHeight:R,M=round(S)!==A||round(R)!==k;return M&&(S=A,R=k),{width:S,height:R,$:M}}function unwrapElement(_){return isElement(_)?_:_.contextElement}function getScale(_){const v=unwrapElement(_);if(!isHTMLElement(v))return createCoords(1);const S=v.getBoundingClientRect(),{width:R,height:T,$:A}=getCssDimensions(v);let k=(A?round(S.width):S.width)/R,M=(A?round(S.height):S.height)/T;return(!k||!Number.isFinite(k))&&(k=1),(!M||!Number.isFinite(M))&&(M=1),{x:k,y:M}}const noOffsets=createCoords(0);function getVisualOffsets(_){const v=getWindow(_);return!isWebKit()||!v.visualViewport?noOffsets:{x:v.visualViewport.offsetLeft,y:v.visualViewport.offsetTop}}function shouldAddVisualOffsets(_,v,S){return v===void 0&&(v=!1),!S||v&&S!==getWindow(_)?!1:v}function getBoundingClientRect(_,v,S,R){v===void 0&&(v=!1),S===void 0&&(S=!1);const T=_.getBoundingClientRect(),A=unwrapElement(_);let k=createCoords(1);v&&(R?isElement(R)&&(k=getScale(R)):k=getScale(_));const M=shouldAddVisualOffsets(A,S,R)?getVisualOffsets(A):createCoords(0);let P=(T.left+M.x)/k.x,D=(T.top+M.y)/k.y,L=T.width/k.x,q=T.height/k.y;if(A){const B=getWindow(A),F=R&&isElement(R)?getWindow(R):R;let j=B,z=getFrameElement(j);for(;z&&R&&F!==j;){const V=getScale(z),G=z.getBoundingClientRect(),W=getComputedStyle$1(z),Y=G.left+(z.clientLeft+parseFloat(W.paddingLeft))*V.x,X=G.top+(z.clientTop+parseFloat(W.paddingTop))*V.y;P*=V.x,D*=V.y,L*=V.x,q*=V.y,P+=Y,D+=X,j=getWindow(z),z=getFrameElement(j)}}return rectToClientRect({width:L,height:q,x:P,y:D})}function getWindowScrollBarX(_,v){const S=getNodeScroll(_).scrollLeft;return v?v.left+S:getBoundingClientRect(getDocumentElement(_)).left+S}function getHTMLOffset(_,v){const S=_.getBoundingClientRect(),R=S.left+v.scrollLeft-getWindowScrollBarX(_,S),T=S.top+v.scrollTop;return{x:R,y:T}}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{elements:v,rect:S,offsetParent:R,strategy:T}=_;const A=T==="fixed",k=getDocumentElement(R),M=v?isTopLayer(v.floating):!1;if(R===k||M&&A)return S;let P={scrollLeft:0,scrollTop:0},D=createCoords(1);const L=createCoords(0),q=isHTMLElement(R);if((q||!q&&!A)&&((getNodeName(R)!=="body"||isOverflowElement(k))&&(P=getNodeScroll(R)),isHTMLElement(R))){const F=getBoundingClientRect(R);D=getScale(R),L.x=F.x+R.clientLeft,L.y=F.y+R.clientTop}const B=k&&!q&&!A?getHTMLOffset(k,P):createCoords(0);return{width:S.width*D.x,height:S.height*D.y,x:S.x*D.x-P.scrollLeft*D.x+L.x+B.x,y:S.y*D.y-P.scrollTop*D.y+L.y+B.y}}function getClientRects(_){return Array.from(_.getClientRects())}function getDocumentRect(_){const v=getDocumentElement(_),S=getNodeScroll(_),R=_.ownerDocument.body,T=max(v.scrollWidth,v.clientWidth,R.scrollWidth,R.clientWidth),A=max(v.scrollHeight,v.clientHeight,R.scrollHeight,R.clientHeight);let k=-S.scrollLeft+getWindowScrollBarX(_);const M=-S.scrollTop;return getComputedStyle$1(R).direction==="rtl"&&(k+=max(v.clientWidth,R.clientWidth)-T),{width:T,height:A,x:k,y:M}}const SCROLLBAR_MAX=25;function getViewportRect(_,v){const S=getWindow(_),R=getDocumentElement(_),T=S.visualViewport;let A=R.clientWidth,k=R.clientHeight,M=0,P=0;if(T){A=T.width,k=T.height;const L=isWebKit();(!L||L&&v==="fixed")&&(M=T.offsetLeft,P=T.offsetTop)}const D=getWindowScrollBarX(R);if(D<=0){const L=R.ownerDocument,q=L.body,B=getComputedStyle(q),F=L.compatMode==="CSS1Compat"&&parseFloat(B.marginLeft)+parseFloat(B.marginRight)||0,j=Math.abs(R.clientWidth-q.clientWidth-F);j<=SCROLLBAR_MAX&&(A-=j)}else D<=SCROLLBAR_MAX&&(A+=D);return{width:A,height:k,x:M,y:P}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(_,v){const S=getBoundingClientRect(_,!0,v==="fixed"),R=S.top+_.clientTop,T=S.left+_.clientLeft,A=isHTMLElement(_)?getScale(_):createCoords(1),k=_.clientWidth*A.x,M=_.clientHeight*A.y,P=T*A.x,D=R*A.y;return{width:k,height:M,x:P,y:D}}function getClientRectFromClippingAncestor(_,v,S){let R;if(v==="viewport")R=getViewportRect(_,S);else if(v==="document")R=getDocumentRect(getDocumentElement(_));else if(isElement(v))R=getInnerBoundingClientRect(v,S);else{const T=getVisualOffsets(_);R={x:v.x-T.x,y:v.y-T.y,width:v.width,height:v.height}}return rectToClientRect(R)}function hasFixedPositionAncestor(_,v){const S=getParentNode(_);return S===v||!isElement(S)||isLastTraversableNode(S)?!1:getComputedStyle$1(S).position==="fixed"||hasFixedPositionAncestor(S,v)}function getClippingElementAncestors(_,v){const S=v.get(_);if(S)return S;let R=getOverflowAncestors(_,[],!1).filter(M=>isElement(M)&&getNodeName(M)!=="body"),T=null;const A=getComputedStyle$1(_).position==="fixed";let k=A?getParentNode(_):_;for(;isElement(k)&&!isLastTraversableNode(k);){const M=getComputedStyle$1(k),P=isContainingBlock(k);!P&&M.position==="fixed"&&(T=null),(A?!P&&!T:!P&&M.position==="static"&&!!T&&absoluteOrFixed.has(T.position)||isOverflowElement(k)&&!P&&hasFixedPositionAncestor(_,k))?R=R.filter(L=>L!==k):T=M,k=getParentNode(k)}return v.set(_,R),R}function getClippingRect(_){let{element:v,boundary:S,rootBoundary:R,strategy:T}=_;const k=[...S==="clippingAncestors"?isTopLayer(v)?[]:getClippingElementAncestors(v,this._c):[].concat(S),R],M=k[0],P=k.reduce((D,L)=>{const q=getClientRectFromClippingAncestor(v,L,T);return D.top=max(q.top,D.top),D.right=min(q.right,D.right),D.bottom=min(q.bottom,D.bottom),D.left=max(q.left,D.left),D},getClientRectFromClippingAncestor(v,M,T));return{width:P.right-P.left,height:P.bottom-P.top,x:P.left,y:P.top}}function getDimensions(_){const{width:v,height:S}=getCssDimensions(_);return{width:v,height:S}}function getRectRelativeToOffsetParent(_,v,S){const R=isHTMLElement(v),T=getDocumentElement(v),A=S==="fixed",k=getBoundingClientRect(_,!0,A,v);let M={scrollLeft:0,scrollTop:0};const P=createCoords(0);function D(){P.x=getWindowScrollBarX(T)}if(R||!R&&!A)if((getNodeName(v)!=="body"||isOverflowElement(T))&&(M=getNodeScroll(v)),R){const F=getBoundingClientRect(v,!0,A,v);P.x=F.x+v.clientLeft,P.y=F.y+v.clientTop}else T&&D();A&&!R&&T&&D();const L=T&&!R&&!A?getHTMLOffset(T,M):createCoords(0),q=k.left+M.scrollLeft-P.x-L.x,B=k.top+M.scrollTop-P.y-L.y;return{x:q,y:B,width:k.width,height:k.height}}function isStaticPositioned(_){return getComputedStyle$1(_).position==="static"}function getTrueOffsetParent(_,v){if(!isHTMLElement(_)||getComputedStyle$1(_).position==="fixed")return null;if(v)return v(_);let S=_.offsetParent;return getDocumentElement(_)===S&&(S=S.ownerDocument.body),S}function getOffsetParent(_,v){const S=getWindow(_);if(isTopLayer(_))return S;if(!isHTMLElement(_)){let T=getParentNode(_);for(;T&&!isLastTraversableNode(T);){if(isElement(T)&&!isStaticPositioned(T))return T;T=getParentNode(T)}return S}let R=getTrueOffsetParent(_,v);for(;R&&isTableElement(R)&&isStaticPositioned(R);)R=getTrueOffsetParent(R,v);return R&&isLastTraversableNode(R)&&isStaticPositioned(R)&&!isContainingBlock(R)?S:R||getContainingBlock(_)||S}const getElementRects=async function(_){const v=this.getOffsetParent||getOffsetParent,S=this.getDimensions,R=await S(_.floating);return{reference:getRectRelativeToOffsetParent(_.reference,await v(_.floating),_.strategy),floating:{x:0,y:0,width:R.width,height:R.height}}};function isRTL(_){return getComputedStyle$1(_).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(_,v){return _.x===v.x&&_.y===v.y&&_.width===v.width&&_.height===v.height}function observeMove(_,v){let S=null,R;const T=getDocumentElement(_);function A(){var M;clearTimeout(R),(M=S)==null||M.disconnect(),S=null}function k(M,P){M===void 0&&(M=!1),P===void 0&&(P=1),A();const D=_.getBoundingClientRect(),{left:L,top:q,width:B,height:F}=D;if(M||v(),!B||!F)return;const j=floor(q),z=floor(T.clientWidth-(L+B)),V=floor(T.clientHeight-(q+F)),G=floor(L),Y={rootMargin:-j+"px "+-z+"px "+-V+"px "+-G+"px",threshold:max(0,min(1,P))||1};let X=!0;function ee(re){const Q=re[0].intersectionRatio;if(Q!==P){if(!X)return k();Q?k(!1,Q):R=setTimeout(()=>{k(!1,1e-7)},1e3)}Q===1&&!rectsAreEqual(D,_.getBoundingClientRect())&&k(),X=!1}try{S=new IntersectionObserver(ee,{...Y,root:T.ownerDocument})}catch{S=new IntersectionObserver(ee,Y)}S.observe(_)}return k(!0),A}function autoUpdate(_,v,S,R){R===void 0&&(R={});const{ancestorScroll:T=!0,ancestorResize:A=!0,elementResize:k=typeof ResizeObserver=="function",layoutShift:M=typeof IntersectionObserver=="function",animationFrame:P=!1}=R,D=unwrapElement(_),L=T||A?[...D?getOverflowAncestors(D):[],...getOverflowAncestors(v)]:[];L.forEach(G=>{T&&G.addEventListener("scroll",S,{passive:!0}),A&&G.addEventListener("resize",S)});const q=D&&M?observeMove(D,S):null;let B=-1,F=null;k&&(F=new ResizeObserver(G=>{let[W]=G;W&&W.target===D&&F&&(F.unobserve(v),cancelAnimationFrame(B),B=requestAnimationFrame(()=>{var Y;(Y=F)==null||Y.observe(v)})),S()}),D&&!P&&F.observe(D),F.observe(v));let j,z=P?getBoundingClientRect(_):null;P&&V();function V(){const G=getBoundingClientRect(_);z&&!rectsAreEqual(z,G)&&S(),z=G,j=requestAnimationFrame(V)}return S(),()=>{var G;L.forEach(W=>{T&&W.removeEventListener("scroll",S),A&&W.removeEventListener("resize",S)}),q?.(),(G=F)==null||G.disconnect(),F=null,P&&cancelAnimationFrame(j)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_,v,S)=>{const R=new Map,T={platform,...S},A={...T.platform,_c:R};return computePosition$1(_,v,{...T,platform:A})};var isClient=typeof document<"u",noop$1=function(){},index=isClient?reactExports.useLayoutEffect:noop$1;function deepEqual(_,v){if(_===v)return!0;if(typeof _!=typeof v)return!1;if(typeof _=="function"&&_.toString()===v.toString())return!0;let S,R,T;if(_&&v&&typeof _=="object"){if(Array.isArray(_)){if(S=_.length,S!==v.length)return!1;for(R=S;R--!==0;)if(!deepEqual(_[R],v[R]))return!1;return!0}if(T=Object.keys(_),S=T.length,S!==Object.keys(v).length)return!1;for(R=S;R--!==0;)if(!{}.hasOwnProperty.call(v,T[R]))return!1;for(R=S;R--!==0;){const A=T[R];if(!(A==="_owner"&&_.$$typeof)&&!deepEqual(_[A],v[A]))return!1}return!0}return _!==_&&v!==v}function getDPR(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_,v){const S=getDPR(_);return Math.round(v*S)/S}function useLatestRef(_){const v=reactExports.useRef(_);return index(()=>{v.current=_}),v}function useFloating(_){_===void 0&&(_={});const{placement:v="bottom",strategy:S="absolute",middleware:R=[],platform:T,elements:{reference:A,floating:k}={},transform:M=!0,whileElementsMounted:P,open:D}=_,[L,q]=reactExports.useState({x:0,y:0,strategy:S,placement:v,middlewareData:{},isPositioned:!1}),[B,F]=reactExports.useState(R);deepEqual(B,R)||F(R);const[j,z]=reactExports.useState(null),[V,G]=reactExports.useState(null),W=reactExports.useCallback(be=>{be!==re.current&&(re.current=be,z(be))},[]),Y=reactExports.useCallback(be=>{be!==Q.current&&(Q.current=be,G(be))},[]),X=A||j,ee=k||V,re=reactExports.useRef(null),Q=reactExports.useRef(null),ne=reactExports.useRef(L),ae=P!=null,oe=useLatestRef(P),se=useLatestRef(T),ce=useLatestRef(D),de=reactExports.useCallback(()=>{if(!re.current||!Q.current)return;const be={placement:v,strategy:S,middleware:B};se.current&&(be.platform=se.current),computePosition(re.current,Q.current,be).then(ke=>{const me={...ke,isPositioned:ce.current!==!1};ye.current&&!deepEqual(ne.current,me)&&(ne.current=me,reactDomExports.flushSync(()=>{q(me)}))})},[B,v,S,se,ce]);index(()=>{D===!1&&ne.current.isPositioned&&(ne.current.isPositioned=!1,q(be=>({...be,isPositioned:!1})))},[D]);const ye=reactExports.useRef(!1);index(()=>(ye.current=!0,()=>{ye.current=!1}),[]),index(()=>{if(X&&(re.current=X),ee&&(Q.current=ee),X&&ee){if(oe.current)return oe.current(X,ee,de);de()}},[X,ee,de,oe,ae]);const we=reactExports.useMemo(()=>({reference:re,floating:Q,setReference:W,setFloating:Y}),[W,Y]),ge=reactExports.useMemo(()=>({reference:X,floating:ee}),[X,ee]),ve=reactExports.useMemo(()=>{const be={position:S,left:0,top:0};if(!ge.floating)return be;const ke=roundByDPR(ge.floating,L.x),me=roundByDPR(ge.floating,L.y);return M?{...be,transform:"translate("+ke+"px, "+me+"px)",...getDPR(ge.floating)>=1.5&&{willChange:"transform"}}:{position:S,left:ke,top:me}},[S,M,ge.floating,L.x,L.y]);return reactExports.useMemo(()=>({...L,update:de,refs:we,elements:ge,floatingStyles:ve}),[L,de,we,ge,ve])}const arrow$1=_=>{function v(S){return{}.hasOwnProperty.call(S,"current")}return{name:"arrow",options:_,fn(S){const{element:R,padding:T}=typeof _=="function"?_(S):_;return R&&v(R)?R.current!=null?arrow$2({element:R.current,padding:T}).fn(S):{}:R?arrow$2({element:R,padding:T}).fn(S):{}}}},offset=(_,v)=>({...offset$1(_),options:[_,v]}),shift=(_,v)=>({...shift$1(_),options:[_,v]}),limitShift=(_,v)=>({...limitShift$1(_),options:[_,v]}),flip=(_,v)=>({...flip$1(_),options:[_,v]}),size=(_,v)=>({...size$1(_),options:[_,v]}),hide=(_,v)=>({...hide$1(_),options:[_,v]}),arrow=(_,v)=>({...arrow$1(_),options:[_,v]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((_,v)=>{const{children:S,width:R=10,height:T=5,...A}=_;return jsxRuntimeExports.jsx(Primitive.svg,{...A,ref:v,width:R,height:T,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?S:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$2=Arrow$1;function useSize(_){const[v,S]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_){S({width:_.offsetWidth,height:_.offsetHeight});const R=new ResizeObserver(T=>{if(!Array.isArray(T)||!T.length)return;const A=T[0];let k,M;if("borderBoxSize"in A){const P=A.borderBoxSize,D=Array.isArray(P)?P[0]:P;k=D.inlineSize,M=D.blockSize}else k=_.offsetWidth,M=_.offsetHeight;S({width:k,height:M})});return R.observe(_,{box:"border-box"}),()=>R.unobserve(_)}else S(void 0)},[_]),v}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_=>{const{__scopePopper:v,children:S}=_,[R,T]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:v,anchor:R,onAnchorChange:T,children:S})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((_,v)=>{const{__scopePopper:S,virtualRef:R,...T}=_,A=usePopperContext(ANCHOR_NAME$1,S),k=reactExports.useRef(null),M=useComposedRefs(v,k),P=reactExports.useRef(null);return reactExports.useEffect(()=>{const D=P.current;P.current=R?.current||k.current,D!==P.current&&A.onAnchorChange(P.current)}),R?null:jsxRuntimeExports.jsx(Primitive.div,{...T,ref:M})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$4="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$4),PopperContent=reactExports.forwardRef((_,v)=>{const{__scopePopper:S,side:R="bottom",sideOffset:T=0,align:A="center",alignOffset:k=0,arrowPadding:M=0,avoidCollisions:P=!0,collisionBoundary:D=[],collisionPadding:L=0,sticky:q="partial",hideWhenDetached:B=!1,updatePositionStrategy:F="optimized",onPlaced:j,...z}=_,V=usePopperContext(CONTENT_NAME$4,S),[G,W]=reactExports.useState(null),Y=useComposedRefs(v,Ce=>W(Ce)),[X,ee]=reactExports.useState(null),re=useSize(X),Q=re?.width??0,ne=re?.height??0,ae=R+(A!=="center"?"-"+A:""),oe=typeof L=="number"?L:{top:0,right:0,bottom:0,left:0,...L},se=Array.isArray(D)?D:[D],ce=se.length>0,de={padding:oe,boundary:se.filter(isNotNull),altBoundary:ce},{refs:ye,floatingStyles:we,placement:ge,isPositioned:ve,middlewareData:be}=useFloating({strategy:"fixed",placement:ae,whileElementsMounted:(...Ce)=>autoUpdate(...Ce,{animationFrame:F==="always"}),elements:{reference:V.anchor},middleware:[offset({mainAxis:T+ne,alignmentAxis:k}),P&&shift({mainAxis:!0,crossAxis:!1,limiter:q==="partial"?limitShift():void 0,...de}),P&&flip({...de}),size({...de,apply:({elements:Ce,rects:$e,availableWidth:Be,availableHeight:Pe})=>{const{width:De,height:Le}=$e.reference,Ne=Ce.floating.style;Ne.setProperty("--radix-popper-available-width",`${Be}px`),Ne.setProperty("--radix-popper-available-height",`${Pe}px`),Ne.setProperty("--radix-popper-anchor-width",`${De}px`),Ne.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),X&&arrow({element:X,padding:M}),transformOrigin({arrowWidth:Q,arrowHeight:ne}),B&&hide({strategy:"referenceHidden",...de})]}),[ke,me]=getSideAndAlignFromPlacement(ge),fe=useCallbackRef$1(j);useLayoutEffect2(()=>{ve&&fe?.()},[ve,fe]);const xe=be.arrow?.x,Ae=be.arrow?.y,Se=be.arrow?.centerOffset!==0,[Me,Oe]=reactExports.useState();return useLayoutEffect2(()=>{G&&Oe(window.getComputedStyle(G).zIndex)},[G]),jsxRuntimeExports.jsx("div",{ref:ye.setFloating,"data-radix-popper-content-wrapper":"",style:{...we,transform:ve?we.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[be.transformOrigin?.x,be.transformOrigin?.y].join(" "),...be.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:S,placedSide:ke,onArrowChange:ee,arrowX:xe,arrowY:Ae,shouldHideArrow:Se,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":ke,"data-align":me,...z,ref:Y,style:{...z.style,animation:ve?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$4;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(v,S){const{__scopePopper:R,...T}=v,A=useContentContext(ARROW_NAME$4,R),k=OPPOSITE_SIDE[A.placedSide];return jsxRuntimeExports.jsx("span",{ref:A.onArrowChange,style:{position:"absolute",left:A.arrowX,top:A.arrowY,[k]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[A.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[A.placedSide],visibility:A.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$2,{...T,ref:S,style:{...T.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(_){return _!==null}var transformOrigin=_=>({name:"transformOrigin",options:_,fn(v){const{placement:S,rects:R,middlewareData:T}=v,k=T.arrow?.centerOffset!==0,M=k?0:_.arrowWidth,P=k?0:_.arrowHeight,[D,L]=getSideAndAlignFromPlacement(S),q={start:"0%",center:"50%",end:"100%"}[L],B=(T.arrow?.x??0)+M/2,F=(T.arrow?.y??0)+P/2;let j="",z="";return D==="bottom"?(j=k?q:`${B}px`,z=`${-P}px`):D==="top"?(j=k?q:`${B}px`,z=`${R.floating.height+P}px`):D==="right"?(j=`${-P}px`,z=k?q:`${F}px`):D==="left"&&(j=`${R.floating.width+P}px`,z=k?q:`${F}px`),{data:{x:j,y:z}}}});function getSideAndAlignFromPlacement(_){const[v,S="center"]=_.split("-");return[v,S]}var Root2$2=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,PORTAL_NAME$4="Portal",Portal$3=reactExports.forwardRef((_,v)=>{const{container:S,...R}=_,[T,A]=reactExports.useState(!1);useLayoutEffect2(()=>A(!0),[]);const k=S||T&&globalThis?.document?.body;return k?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...R,ref:v}),k):null});Portal$3.displayName=PORTAL_NAME$4;function useStateMachine(_,v){return reactExports.useReducer((S,R)=>v[S][R]??S,_)}var Presence=_=>{const{present:v,children:S}=_,R=usePresence(v),T=typeof S=="function"?S({present:R.isPresent}):reactExports.Children.only(S),A=useComposedRefs(R.ref,getElementRef$2(T));return typeof S=="function"||R.isPresent?reactExports.cloneElement(T,{ref:A}):null};Presence.displayName="Presence";function usePresence(_){const[v,S]=reactExports.useState(),R=reactExports.useRef(null),T=reactExports.useRef(_),A=reactExports.useRef("none"),k=_?"mounted":"unmounted",[M,P]=useStateMachine(k,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const D=getAnimationName(R.current);A.current=M==="mounted"?D:"none"},[M]),useLayoutEffect2(()=>{const D=R.current,L=T.current;if(L!==_){const B=A.current,F=getAnimationName(D);_?P("MOUNT"):F==="none"||D?.display==="none"?P("UNMOUNT"):P(L&&B!==F?"ANIMATION_OUT":"UNMOUNT"),T.current=_}},[_,P]),useLayoutEffect2(()=>{if(v){let D;const L=v.ownerDocument.defaultView??window,q=F=>{const z=getAnimationName(R.current).includes(CSS.escape(F.animationName));if(F.target===v&&z&&(P("ANIMATION_END"),!T.current)){const V=v.style.animationFillMode;v.style.animationFillMode="forwards",D=L.setTimeout(()=>{v.style.animationFillMode==="forwards"&&(v.style.animationFillMode=V)})}},B=F=>{F.target===v&&(A.current=getAnimationName(R.current))};return v.addEventListener("animationstart",B),v.addEventListener("animationcancel",q),v.addEventListener("animationend",q),()=>{L.clearTimeout(D),v.removeEventListener("animationstart",B),v.removeEventListener("animationcancel",q),v.removeEventListener("animationend",q)}}else P("ANIMATION_END")},[v,P]),{isPresent:["mounted","unmountSuspended"].includes(M),ref:reactExports.useCallback(D=>{R.current=D?getComputedStyle(D):null,S(D)},[])}}function getAnimationName(_){return _?.animationName||"none"}function getElementRef$2(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$2]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((_,v)=>jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._,ref:v})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((_,v)=>{const{__scopeRovingFocusGroup:S,orientation:R,loop:T=!1,dir:A,currentTabStopId:k,defaultCurrentTabStopId:M,onCurrentTabStopIdChange:P,onEntryFocus:D,preventScrollOnEntryFocus:L=!1,...q}=_,B=reactExports.useRef(null),F=useComposedRefs(v,B),j=useDirection(A),[z,V]=useControllableState({prop:k,defaultProp:M??null,onChange:P,caller:GROUP_NAME$3}),[G,W]=reactExports.useState(!1),Y=useCallbackRef$1(D),X=useCollection$2(S),ee=reactExports.useRef(!1),[re,Q]=reactExports.useState(0);return reactExports.useEffect(()=>{const ne=B.current;if(ne)return ne.addEventListener(ENTRY_FOCUS,Y),()=>ne.removeEventListener(ENTRY_FOCUS,Y)},[Y]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:S,orientation:R,dir:j,loop:T,currentTabStopId:z,onItemFocus:reactExports.useCallback(ne=>V(ne),[V]),onItemShiftTab:reactExports.useCallback(()=>W(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>Q(ne=>ne+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>Q(ne=>ne-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:G||re===0?-1:0,"data-orientation":R,...q,ref:F,style:{outline:"none",..._.style},onMouseDown:composeEventHandlers(_.onMouseDown,()=>{ee.current=!0}),onFocus:composeEventHandlers(_.onFocus,ne=>{const ae=!ee.current;if(ne.target===ne.currentTarget&&ae&&!G){const oe=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(ne.currentTarget.dispatchEvent(oe),!oe.defaultPrevented){const se=X().filter(ge=>ge.focusable),ce=se.find(ge=>ge.active),de=se.find(ge=>ge.id===z),we=[ce,de,...se].filter(Boolean).map(ge=>ge.ref.current);focusFirst$1(we,L)}}ee.current=!1}),onBlur:composeEventHandlers(_.onBlur,()=>W(!1))})})}),ITEM_NAME$3="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_,v)=>{const{__scopeRovingFocusGroup:S,focusable:R=!0,active:T=!1,tabStopId:A,children:k,...M}=_,P=useId(),D=A||P,L=useRovingFocusContext(ITEM_NAME$3,S),q=L.currentTabStopId===D,B=useCollection$2(S),{onFocusableItemAdd:F,onFocusableItemRemove:j,currentTabStopId:z}=L;return reactExports.useEffect(()=>{if(R)return F(),()=>j()},[R,F,j]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:S,id:D,focusable:R,active:T,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:q?0:-1,"data-orientation":L.orientation,...M,ref:v,onMouseDown:composeEventHandlers(_.onMouseDown,V=>{R?L.onItemFocus(D):V.preventDefault()}),onFocus:composeEventHandlers(_.onFocus,()=>L.onItemFocus(D)),onKeyDown:composeEventHandlers(_.onKeyDown,V=>{if(V.key==="Tab"&&V.shiftKey){L.onItemShiftTab();return}if(V.target!==V.currentTarget)return;const G=getFocusIntent(V,L.orientation,L.dir);if(G!==void 0){if(V.metaKey||V.ctrlKey||V.altKey||V.shiftKey)return;V.preventDefault();let Y=B().filter(X=>X.focusable).map(X=>X.ref.current);if(G==="last")Y.reverse();else if(G==="prev"||G==="next"){G==="prev"&&Y.reverse();const X=Y.indexOf(V.currentTarget);Y=L.loop?wrapArray$2(Y,X+1):Y.slice(X+1)}setTimeout(()=>focusFirst$1(Y))}}),children:typeof k=="function"?k({isCurrentTabStop:q,hasTabStop:z!=null}):k})})});RovingFocusGroupItem.displayName=ITEM_NAME$3;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_,v){return v!=="rtl"?_:_==="ArrowLeft"?"ArrowRight":_==="ArrowRight"?"ArrowLeft":_}function getFocusIntent(_,v,S){const R=getDirectionAwareKey(_.key,S);if(!(v==="vertical"&&["ArrowLeft","ArrowRight"].includes(R))&&!(v==="horizontal"&&["ArrowUp","ArrowDown"].includes(R)))return MAP_KEY_TO_FOCUS_INTENT[R]}function focusFirst$1(_,v=!1){const S=document.activeElement;for(const R of _)if(R===S||(R.focus({preventScroll:v}),document.activeElement!==S))return}function wrapArray$2(_,v){return _.map((S,R)=>_[(v+R)%_.length])}var Root$1=RovingFocusGroup,Item$1=RovingFocusGroupItem;function createSlot$1(_){const v=createSlotClone$1(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),P=M.find(isSlottable$1);if(P){const D=P.props.children,L=M.map(q=>q===P?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,L):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone$1(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef$1(T),M=mergeProps$1(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$2=Symbol("radix.slottable");function isSlottable$1(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$2}function mergeProps$1(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const P=A(...M);return T(...M),P}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef$1(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}var getDefaultParent=function(_){if(typeof document>"u")return null;var v=Array.isArray(_)?_[0]:_;return v.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_){return _&&(_.host||unwrapHost(_.parentNode))},correctTargets=function(_,v){return v.map(function(S){if(_.contains(S))return S;var R=unwrapHost(S);return R&&_.contains(R)?R:(console.error("aria-hidden",S,"in not contained inside",_,". Doing nothing"),null)}).filter(function(S){return!!S})},applyAttributeToOthers=function(_,v,S,R){var T=correctTargets(v,Array.isArray(_)?_:[_]);markerMap[S]||(markerMap[S]=new WeakMap);var A=markerMap[S],k=[],M=new Set,P=new Set(T),D=function(q){!q||M.has(q)||(M.add(q),D(q.parentNode))};T.forEach(D);var L=function(q){!q||P.has(q)||Array.prototype.forEach.call(q.children,function(B){if(M.has(B))L(B);else try{var F=B.getAttribute(R),j=F!==null&&F!=="false",z=(counterMap.get(B)||0)+1,V=(A.get(B)||0)+1;counterMap.set(B,z),A.set(B,V),k.push(B),z===1&&j&&uncontrolledNodes.set(B,!0),V===1&&B.setAttribute(S,"true"),j||B.setAttribute(R,"true")}catch(G){console.error("aria-hidden: cannot operate on ",B,G)}})};return L(v),M.clear(),lockCount++,function(){k.forEach(function(q){var B=counterMap.get(q)-1,F=A.get(q)-1;counterMap.set(q,B),A.set(q,F),B||(uncontrolledNodes.has(q)||q.removeAttribute(R),uncontrolledNodes.delete(q)),F||q.removeAttribute(S)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_,v,S){S===void 0&&(S="data-aria-hidden");var R=Array.from(Array.isArray(_)?_:[_]),T=getDefaultParent(_);return T?(R.push.apply(R,Array.from(T.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(R,T,S,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(v){for(var S,R=1,T=arguments.length;R<T;R++){S=arguments[R];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(v[A]=S[A])}return v},__assign.apply(this,arguments)};function __rest(_,v){var S={};for(var R in _)Object.prototype.hasOwnProperty.call(_,R)&&v.indexOf(R)<0&&(S[R]=_[R]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,R=Object.getOwnPropertySymbols(_);T<R.length;T++)v.indexOf(R[T])<0&&Object.prototype.propertyIsEnumerable.call(_,R[T])&&(S[R[T]]=_[R[T]]);return S}function __spreadArray(_,v,S){if(S||arguments.length===2)for(var R=0,T=v.length,A;R<T;R++)(A||!(R in v))&&(A||(A=Array.prototype.slice.call(v,0,R)),A[R]=v[R]);return _.concat(A||Array.prototype.slice.call(v))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_,v){return typeof _=="function"?_(v):_&&(_.current=v),_}function useCallbackRef(_,v){var S=reactExports.useState(function(){return{value:_,callback:v,facade:{get current(){return S.value},set current(R){var T=S.value;T!==R&&(S.value=R,S.callback(R,T))}}}})[0];return S.callback=v,S.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_,v){var S=useCallbackRef(null,function(R){return _.forEach(function(T){return assignRef(T,R)})});return useIsomorphicLayoutEffect(function(){var R=currentValues.get(S);if(R){var T=new Set(R),A=new Set(_),k=S.current;T.forEach(function(M){A.has(M)||assignRef(M,null)}),A.forEach(function(M){T.has(M)||assignRef(M,k)})}currentValues.set(S,_)},[_]),S}function ItoI(_){return _}function innerCreateMedium(_,v){v===void 0&&(v=ItoI);var S=[],R=!1,T={read:function(){if(R)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return S.length?S[S.length-1]:_},useMedium:function(A){var k=v(A,R);return S.push(k),function(){S=S.filter(function(M){return M!==k})}},assignSyncMedium:function(A){for(R=!0;S.length;){var k=S;S=[],k.forEach(A)}S={push:function(M){return A(M)},filter:function(){return S}}},assignMedium:function(A){R=!0;var k=[];if(S.length){var M=S;S=[],M.forEach(A),k=S}var P=function(){var L=k;k=[],L.forEach(A)},D=function(){return Promise.resolve().then(P)};D(),S={push:function(L){k.push(L),D()},filter:function(L){return k=k.filter(L),S}}}};return T}function createSidecarMedium(_){_===void 0&&(_={});var v=innerCreateMedium(null);return v.options=__assign({async:!0,ssr:!1},_),v}var SideCar$1=function(_){var v=_.sideCar,S=__rest(_,["sideCar"]);if(!v)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var R=v.read();if(!R)throw new Error("Sidecar medium not found");return reactExports.createElement(R,__assign({},S))};SideCar$1.isSideCarExport=!0;function exportSidecar(_,v){return _.useMedium(v),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_,v){var S=reactExports.useRef(null),R=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),T=R[0],A=R[1],k=_.forwardProps,M=_.children,P=_.className,D=_.removeScrollBar,L=_.enabled,q=_.shards,B=_.sideCar,F=_.noRelative,j=_.noIsolation,z=_.inert,V=_.allowPinchZoom,G=_.as,W=G===void 0?"div":G,Y=_.gapMode,X=__rest(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ee=B,re=useMergeRefs([S,v]),Q=__assign(__assign({},X),T);return reactExports.createElement(reactExports.Fragment,null,L&&reactExports.createElement(ee,{sideCar:effectCar,removeScrollBar:D,shards:q,noRelative:F,noIsolation:j,inert:z,setCallbacks:A,allowPinchZoom:!!V,lockRef:S,gapMode:Y}),k?reactExports.cloneElement(reactExports.Children.only(M),__assign(__assign({},Q),{ref:re})):reactExports.createElement(W,__assign({},Q,{className:P,ref:re}),M))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var v=getNonce();return v&&_.setAttribute("nonce",v),_}function injectStyles(_,v){_.styleSheet?_.styleSheet.cssText=v:_.appendChild(document.createTextNode(v))}function insertStyleTag(_){var v=document.head||document.getElementsByTagName("head")[0];v.appendChild(_)}var stylesheetSingleton=function(){var _=0,v=null;return{add:function(S){_==0&&(v=makeStyleTag())&&(injectStyles(v,S),insertStyleTag(v)),_++},remove:function(){_--,!_&&v&&(v.parentNode&&v.parentNode.removeChild(v),v=null)}}},styleHookSingleton=function(){var _=stylesheetSingleton();return function(v,S){reactExports.useEffect(function(){return _.add(v),function(){_.remove()}},[v&&S])}},styleSingleton=function(){var _=styleHookSingleton(),v=function(S){var R=S.styles,T=S.dynamic;return _(R,T),null};return v},zeroGap={left:0,top:0,right:0,gap:0},parse=function(_){return parseInt(_||"",10)||0},getOffset=function(_){var v=window.getComputedStyle(document.body),S=v[_==="padding"?"paddingLeft":"marginLeft"],R=v[_==="padding"?"paddingTop":"marginTop"],T=v[_==="padding"?"paddingRight":"marginRight"];return[parse(S),parse(R),parse(T)]},getGapWidth=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return zeroGap;var v=getOffset(_),S=document.documentElement.clientWidth,R=window.innerWidth;return{left:v[0],top:v[1],right:v[2],gap:Math.max(0,R-S+v[2]-v[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_,v,S,R){var T=_.left,A=_.top,k=_.right,M=_.gap;return S===void 0&&(S="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(R,`;
   padding-right: `).concat(M,"px ").concat(R,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(R,`;
    overscroll-behavior: contain;
    `).concat([v&&"position: relative ".concat(R,";"),S==="margin"&&`
    padding-left: `.concat(T,`px;
    padding-top: `).concat(A,`px;
    padding-right: `).concat(k,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(M,"px ").concat(R,`;
    `),S==="padding"&&"padding-right: ".concat(M,"px ").concat(R,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(M,"px ").concat(R,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(M,"px ").concat(R,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(R,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(R,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(M,`px;
  }
`)},getCurrentUseCounter=function(){var _=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_)?_:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _=getCurrentUseCounter()-1;_<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_.toString())}},[])},RemoveScrollBar=function(_){var v=_.noRelative,S=_.noImportant,R=_.gapMode,T=R===void 0?"margin":R;useLockAttribute();var A=reactExports.useMemo(function(){return getGapWidth(T)},[T]);return reactExports.createElement(Style,{styles:getStyles(A,!v,T,S?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_){return _.tagName==="TEXTAREA"},elementCanBeScrolled=function(_,v){if(!(_ instanceof Element))return!1;var S=window.getComputedStyle(_);return S[v]!=="hidden"&&!(S.overflowY===S.overflowX&&!alwaysContainsScroll(_)&&S[v]==="visible")},elementCouldBeVScrolled=function(_){return elementCanBeScrolled(_,"overflowY")},elementCouldBeHScrolled=function(_){return elementCanBeScrolled(_,"overflowX")},locationCouldBeScrolled=function(_,v){var S=v.ownerDocument,R=v;do{typeof ShadowRoot<"u"&&R instanceof ShadowRoot&&(R=R.host);var T=elementCouldBeScrolled(_,R);if(T){var A=getScrollVariables(_,R),k=A[1],M=A[2];if(k>M)return!0}R=R.parentNode}while(R&&R!==S.body);return!1},getVScrollVariables=function(_){var v=_.scrollTop,S=_.scrollHeight,R=_.clientHeight;return[v,S,R]},getHScrollVariables=function(_){var v=_.scrollLeft,S=_.scrollWidth,R=_.clientWidth;return[v,S,R]},elementCouldBeScrolled=function(_,v){return _==="v"?elementCouldBeVScrolled(v):elementCouldBeHScrolled(v)},getScrollVariables=function(_,v){return _==="v"?getVScrollVariables(v):getHScrollVariables(v)},getDirectionFactor=function(_,v){return _==="h"&&v==="rtl"?-1:1},handleScroll=function(_,v,S,R,T){var A=getDirectionFactor(_,window.getComputedStyle(v).direction),k=A*R,M=S.target,P=v.contains(M),D=!1,L=k>0,q=0,B=0;do{if(!M)break;var F=getScrollVariables(_,M),j=F[0],z=F[1],V=F[2],G=z-V-A*j;(j||G)&&elementCouldBeScrolled(_,M)&&(q+=G,B+=j);var W=M.parentNode;M=W&&W.nodeType===Node.DOCUMENT_FRAGMENT_NODE?W.host:W}while(!P&&M!==document.body||P&&(v.contains(M)||v===M));return(L&&Math.abs(q)<1||!L&&Math.abs(B)<1)&&(D=!0),D},getTouchXY=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_){return[_.deltaX,_.deltaY]},extractRef=function(_){return _&&"current"in _?_.current:_},deltaCompare=function(_,v){return _[0]===v[0]&&_[1]===v[1]},generateStyle=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},idCounter$1=0,lockStack=[];function RemoveScrollSideCar(_){var v=reactExports.useRef([]),S=reactExports.useRef([0,0]),R=reactExports.useRef(),T=reactExports.useState(idCounter$1++)[0],A=reactExports.useState(styleSingleton)[0],k=reactExports.useRef(_);reactExports.useEffect(function(){k.current=_},[_]),reactExports.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat(T));var z=__spreadArray([_.lockRef.current],(_.shards||[]).map(extractRef),!0).filter(Boolean);return z.forEach(function(V){return V.classList.add("allow-interactivity-".concat(T))}),function(){document.body.classList.remove("block-interactivity-".concat(T)),z.forEach(function(V){return V.classList.remove("allow-interactivity-".concat(T))})}}},[_.inert,_.lockRef.current,_.shards]);var M=reactExports.useCallback(function(z,V){if("touches"in z&&z.touches.length===2||z.type==="wheel"&&z.ctrlKey)return!k.current.allowPinchZoom;var G=getTouchXY(z),W=S.current,Y="deltaX"in z?z.deltaX:W[0]-G[0],X="deltaY"in z?z.deltaY:W[1]-G[1],ee,re=z.target,Q=Math.abs(Y)>Math.abs(X)?"h":"v";if("touches"in z&&Q==="h"&&re.type==="range")return!1;var ne=window.getSelection(),ae=ne&&ne.anchorNode,oe=ae?ae===re||ae.contains(re):!1;if(oe)return!1;var se=locationCouldBeScrolled(Q,re);if(!se)return!0;if(se?ee=Q:(ee=Q==="v"?"h":"v",se=locationCouldBeScrolled(Q,re)),!se)return!1;if(!R.current&&"changedTouches"in z&&(Y||X)&&(R.current=ee),!ee)return!0;var ce=R.current||ee;return handleScroll(ce,V,z,ce==="h"?Y:X)},[]),P=reactExports.useCallback(function(z){var V=z;if(!(!lockStack.length||lockStack[lockStack.length-1]!==A)){var G="deltaY"in V?getDeltaXY(V):getTouchXY(V),W=v.current.filter(function(ee){return ee.name===V.type&&(ee.target===V.target||V.target===ee.shadowParent)&&deltaCompare(ee.delta,G)})[0];if(W&&W.should){V.cancelable&&V.preventDefault();return}if(!W){var Y=(k.current.shards||[]).map(extractRef).filter(Boolean).filter(function(ee){return ee.contains(V.target)}),X=Y.length>0?M(V,Y[0]):!k.current.noIsolation;X&&V.cancelable&&V.preventDefault()}}},[]),D=reactExports.useCallback(function(z,V,G,W){var Y={name:z,delta:V,target:G,should:W,shadowParent:getOutermostShadowParent(G)};v.current.push(Y),setTimeout(function(){v.current=v.current.filter(function(X){return X!==Y})},1)},[]),L=reactExports.useCallback(function(z){S.current=getTouchXY(z),R.current=void 0},[]),q=reactExports.useCallback(function(z){D(z.type,getDeltaXY(z),z.target,M(z,_.lockRef.current))},[]),B=reactExports.useCallback(function(z){D(z.type,getTouchXY(z),z.target,M(z,_.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(A),_.setCallbacks({onScrollCapture:q,onWheelCapture:q,onTouchMoveCapture:B}),document.addEventListener("wheel",P,nonPassive),document.addEventListener("touchmove",P,nonPassive),document.addEventListener("touchstart",L,nonPassive),function(){lockStack=lockStack.filter(function(z){return z!==A}),document.removeEventListener("wheel",P,nonPassive),document.removeEventListener("touchmove",P,nonPassive),document.removeEventListener("touchstart",L,nonPassive)}},[]);var F=_.removeScrollBar,j=_.inert;return reactExports.createElement(reactExports.Fragment,null,j?reactExports.createElement(A,{styles:generateStyle(T)}):null,F?reactExports.createElement(RemoveScrollBar,{noRelative:_.noRelative,gapMode:_.gapMode}):null)}function getOutermostShadowParent(_){for(var v=null;_!==null;)_ instanceof ShadowRoot&&(v=_.host,_=_.host),_=_.parentNode;return v}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_,v){return reactExports.createElement(RemoveScroll,__assign({},_,{ref:v,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope$1,createPopperScope,createRovingFocusGroupScope]),usePopperScope$2=createPopperScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=_=>{const{__scopeMenu:v,open:S=!1,children:R,dir:T,onOpenChange:A,modal:k=!0}=_,M=usePopperScope$2(v),[P,D]=reactExports.useState(null),L=reactExports.useRef(!1),q=useCallbackRef$1(A),B=useDirection(T);return reactExports.useEffect(()=>{const F=()=>{L.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>L.current=!1;return document.addEventListener("keydown",F,{capture:!0}),()=>{document.removeEventListener("keydown",F,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$2,{...M,children:jsxRuntimeExports.jsx(MenuProvider,{scope:v,open:S,onOpenChange:q,content:P,onContentChange:D,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:v,onClose:reactExports.useCallback(()=>q(!1),[q]),isUsingKeyboardRef:L,dir:B,modal:k,children:R})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_,T=usePopperScope$2(S);return jsxRuntimeExports.jsx(Anchor,{...T,...R,ref:v})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$3="MenuPortal",[PortalProvider$1,usePortalContext$1]=createMenuContext(PORTAL_NAME$3,{forceMount:void 0}),MenuPortal=_=>{const{__scopeMenu:v,forceMount:S,children:R,container:T}=_,A=useMenuContext(PORTAL_NAME$3,v);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:v,forceMount:S,children:jsxRuntimeExports.jsx(Presence,{present:S||A.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:T,children:R})})})};MenuPortal.displayName=PORTAL_NAME$3;var CONTENT_NAME$3="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$3),MenuContent=reactExports.forwardRef((_,v)=>{const S=usePortalContext$1(CONTENT_NAME$3,_.__scopeMenu),{forceMount:R=S.forceMount,...T}=_,A=useMenuContext(CONTENT_NAME$3,_.__scopeMenu),k=useMenuRootContext(CONTENT_NAME$3,_.__scopeMenu);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:R||A.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_.__scopeMenu,children:k.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...T,ref:v}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...T,ref:v})})})})}),MenuRootContentModal=reactExports.forwardRef((_,v)=>{const S=useMenuContext(CONTENT_NAME$3,_.__scopeMenu),R=reactExports.useRef(null),T=useComposedRefs(v,R);return reactExports.useEffect(()=>{const A=R.current;if(A)return hideOthers(A)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{..._,ref:T,trapFocus:S.open,disableOutsidePointerEvents:S.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(_.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>S.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((_,v)=>{const S=useMenuContext(CONTENT_NAME$3,_.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{..._,ref:v,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>S.onOpenChange(!1)})}),Slot$1=createSlot$1("MenuContent.ScrollLock"),MenuContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,loop:R=!1,trapFocus:T,onOpenAutoFocus:A,onCloseAutoFocus:k,disableOutsidePointerEvents:M,onEntryFocus:P,onEscapeKeyDown:D,onPointerDownOutside:L,onFocusOutside:q,onInteractOutside:B,onDismiss:F,disableOutsideScroll:j,...z}=_,V=useMenuContext(CONTENT_NAME$3,S),G=useMenuRootContext(CONTENT_NAME$3,S),W=usePopperScope$2(S),Y=useRovingFocusGroupScope(S),X=useCollection$1(S),[ee,re]=reactExports.useState(null),Q=reactExports.useRef(null),ne=useComposedRefs(v,Q,V.onContentChange),ae=reactExports.useRef(0),oe=reactExports.useRef(""),se=reactExports.useRef(0),ce=reactExports.useRef(null),de=reactExports.useRef("right"),ye=reactExports.useRef(0),we=j?ReactRemoveScroll:reactExports.Fragment,ge=j?{as:Slot$1,allowPinchZoom:!0}:void 0,ve=ke=>{const me=oe.current+ke,fe=X().filter(Ce=>!Ce.disabled),xe=document.activeElement,Ae=fe.find(Ce=>Ce.ref.current===xe)?.textValue,Se=fe.map(Ce=>Ce.textValue),Me=getNextMatch(Se,me,Ae),Oe=fe.find(Ce=>Ce.textValue===Me)?.ref.current;(function Ce($e){oe.current=$e,window.clearTimeout(ae.current),$e!==""&&(ae.current=window.setTimeout(()=>Ce(""),1e3))})(me),Oe&&setTimeout(()=>Oe.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(ae.current),[]),useFocusGuards();const be=reactExports.useCallback(ke=>de.current===ce.current?.side&&isPointerInGraceArea(ke,ce.current?.area),[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:S,searchRef:oe,onItemEnter:reactExports.useCallback(ke=>{be(ke)&&ke.preventDefault()},[be]),onItemLeave:reactExports.useCallback(ke=>{be(ke)||(Q.current?.focus(),re(null))},[be]),onTriggerLeave:reactExports.useCallback(ke=>{be(ke)&&ke.preventDefault()},[be]),pointerGraceTimerRef:se,onPointerGraceIntentChange:reactExports.useCallback(ke=>{ce.current=ke},[]),children:jsxRuntimeExports.jsx(we,{...ge,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:T,onMountAutoFocus:composeEventHandlers(A,ke=>{ke.preventDefault(),Q.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:k,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:M,onEscapeKeyDown:D,onPointerDownOutside:L,onFocusOutside:q,onInteractOutside:B,onDismiss:F,children:jsxRuntimeExports.jsx(Root$1,{asChild:!0,...Y,dir:G.dir,orientation:"vertical",loop:R,currentTabStopId:ee,onCurrentTabStopIdChange:re,onEntryFocus:composeEventHandlers(P,ke=>{G.isUsingKeyboardRef.current||ke.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(V.open),"data-radix-menu-content":"",dir:G.dir,...W,...z,ref:ne,style:{outline:"none",...z.style},onKeyDown:composeEventHandlers(z.onKeyDown,ke=>{const fe=ke.target.closest("[data-radix-menu-content]")===ke.currentTarget,xe=ke.ctrlKey||ke.altKey||ke.metaKey,Ae=ke.key.length===1;fe&&(ke.key==="Tab"&&ke.preventDefault(),!xe&&Ae&&ve(ke.key));const Se=Q.current;if(ke.target!==Se||!FIRST_LAST_KEYS.includes(ke.key))return;ke.preventDefault();const Oe=X().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);LAST_KEYS.includes(ke.key)&&Oe.reverse(),focusFirst(Oe)}),onBlur:composeEventHandlers(_.onBlur,ke=>{ke.currentTarget.contains(ke.target)||(window.clearTimeout(ae.current),oe.current="")}),onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(ke=>{const me=ke.target,fe=ye.current!==ke.clientX;if(ke.currentTarget.contains(me)&&fe){const xe=ke.clientX>ye.current?"right":"left";de.current=xe,ye.current=ke.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$3;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...R,ref:v})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{...R,ref:v})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$2="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((_,v)=>{const{disabled:S=!1,onSelect:R,...T}=_,A=reactExports.useRef(null),k=useMenuRootContext(ITEM_NAME$2,_.__scopeMenu),M=useMenuContentContext(ITEM_NAME$2,_.__scopeMenu),P=useComposedRefs(v,A),D=reactExports.useRef(!1),L=()=>{const q=A.current;if(!S&&q){const B=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});q.addEventListener(ITEM_SELECT,F=>R?.(F),{once:!0}),dispatchDiscreteCustomEvent(q,B),B.defaultPrevented?D.current=!1:k.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...T,ref:P,disabled:S,onClick:composeEventHandlers(_.onClick,L),onPointerDown:q=>{_.onPointerDown?.(q),D.current=!0},onPointerUp:composeEventHandlers(_.onPointerUp,q=>{D.current||q.currentTarget?.click()}),onKeyDown:composeEventHandlers(_.onKeyDown,q=>{const B=M.searchRef.current!=="";S||B&&q.key===" "||SELECTION_KEYS$1.includes(q.key)&&(q.currentTarget.click(),q.preventDefault())})})});MenuItem.displayName=ITEM_NAME$2;var MenuItemImpl=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,disabled:R=!1,textValue:T,...A}=_,k=useMenuContentContext(ITEM_NAME$2,S),M=useRovingFocusGroupScope(S),P=reactExports.useRef(null),D=useComposedRefs(v,P),[L,q]=reactExports.useState(!1),[B,F]=reactExports.useState("");return reactExports.useEffect(()=>{const j=P.current;j&&F((j.textContent??"").trim())},[A.children]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:S,disabled:R,textValue:T??B,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,...M,focusable:!R,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":L?"":void 0,"aria-disabled":R||void 0,"data-disabled":R?"":void 0,...A,ref:D,onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(j=>{R?k.onItemLeave(j):(k.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(_.onPointerLeave,whenMouse(j=>k.onItemLeave(j))),onFocus:composeEventHandlers(_.onFocus,()=>q(!0)),onBlur:composeEventHandlers(_.onBlur,()=>q(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((_,v)=>{const{checked:S=!1,onCheckedChange:R,...T}=_;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_.__scopeMenu,checked:S,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate$1(S)?"mixed":S,...T,ref:v,"data-state":getCheckedState(S),onSelect:composeEventHandlers(T.onSelect,()=>R?.(isIndeterminate$1(S)?!0:!S),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((_,v)=>{const{value:S,onValueChange:R,...T}=_,A=useCallbackRef$1(R);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:_.__scopeMenu,value:S,onValueChange:A,children:jsxRuntimeExports.jsx(MenuGroup,{...T,ref:v})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((_,v)=>{const{value:S,...R}=_,T=useRadioGroupContext(RADIO_ITEM_NAME$1,_.__scopeMenu),A=S===T.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_.__scopeMenu,checked:A,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":A,...R,ref:v,"data-state":getCheckedState(A),onSelect:composeEventHandlers(R.onSelect,()=>T.onValueChange?.(S),{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,forceMount:R,...T}=_,A=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,S);return jsxRuntimeExports.jsx(Presence,{present:R||isIndeterminate$1(A.checked)||A.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...T,ref:v,"data-state":getCheckedState(A.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...R,ref:v})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$3="MenuArrow",MenuArrow=reactExports.forwardRef((_,v)=>{const{__scopeMenu:S,...R}=_,T=usePopperScope$2(S);return jsxRuntimeExports.jsx(Arrow,{...T,...R,ref:v})});MenuArrow.displayName=ARROW_NAME$3;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((_,v)=>{const S=useMenuContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),R=useMenuRootContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),T=useMenuSubContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),A=useMenuContentContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),k=reactExports.useRef(null),{pointerGraceTimerRef:M,onPointerGraceIntentChange:P}=A,D={__scopeMenu:_.__scopeMenu},L=reactExports.useCallback(()=>{k.current&&window.clearTimeout(k.current),k.current=null},[]);return reactExports.useEffect(()=>L,[L]),reactExports.useEffect(()=>{const q=M.current;return()=>{window.clearTimeout(q),P(null)}},[M,P]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...D,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:T.triggerId,"aria-haspopup":"menu","aria-expanded":S.open,"aria-controls":T.contentId,"data-state":getOpenState(S.open),..._,ref:composeRefs(v,T.onTriggerChange),onClick:q=>{_.onClick?.(q),!(_.disabled||q.defaultPrevented)&&(q.currentTarget.focus(),S.open||S.onOpenChange(!0))},onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(q=>{A.onItemEnter(q),!q.defaultPrevented&&!_.disabled&&!S.open&&!k.current&&(A.onPointerGraceIntentChange(null),k.current=window.setTimeout(()=>{S.onOpenChange(!0),L()},100))})),onPointerLeave:composeEventHandlers(_.onPointerLeave,whenMouse(q=>{L();const B=S.content?.getBoundingClientRect();if(B){const F=S.content?.dataset.side,j=F==="right",z=j?-5:5,V=B[j?"left":"right"],G=B[j?"right":"left"];A.onPointerGraceIntentChange({area:[{x:q.clientX+z,y:q.clientY},{x:V,y:B.top},{x:G,y:B.top},{x:G,y:B.bottom},{x:V,y:B.bottom}],side:F}),window.clearTimeout(M.current),M.current=window.setTimeout(()=>A.onPointerGraceIntentChange(null),300)}else{if(A.onTriggerLeave(q),q.defaultPrevented)return;A.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(_.onKeyDown,q=>{const B=A.searchRef.current!=="";_.disabled||B&&q.key===" "||SUB_OPEN_KEYS[R.dir].includes(q.key)&&(S.onOpenChange(!0),S.content?.focus(),q.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((_,v)=>{const S=usePortalContext$1(CONTENT_NAME$3,_.__scopeMenu),{forceMount:R=S.forceMount,...T}=_,A=useMenuContext(CONTENT_NAME$3,_.__scopeMenu),k=useMenuRootContext(CONTENT_NAME$3,_.__scopeMenu),M=useMenuSubContext(SUB_CONTENT_NAME$1,_.__scopeMenu),P=reactExports.useRef(null),D=useComposedRefs(v,P);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:R||A.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:M.contentId,"aria-labelledby":M.triggerId,...T,ref:D,align:"start",side:k.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:L=>{k.isUsingKeyboardRef.current&&P.current?.focus(),L.preventDefault()},onCloseAutoFocus:L=>L.preventDefault(),onFocusOutside:composeEventHandlers(_.onFocusOutside,L=>{L.target!==M.trigger&&A.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(_.onEscapeKeyDown,L=>{k.onClose(),L.preventDefault()}),onKeyDown:composeEventHandlers(_.onKeyDown,L=>{const q=L.currentTarget.contains(L.target),B=SUB_CLOSE_KEYS[k.dir].includes(L.key);q&&B&&(A.onOpenChange(!1),M.trigger?.focus(),L.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(_){return _?"open":"closed"}function isIndeterminate$1(_){return _==="indeterminate"}function getCheckedState(_){return isIndeterminate$1(_)?"indeterminate":_?"checked":"unchecked"}function focusFirst(_){const v=document.activeElement;for(const S of _)if(S===v||(S.focus(),document.activeElement!==v))return}function wrapArray$1(_,v){return _.map((S,R)=>_[(v+R)%_.length])}function getNextMatch(_,v,S){const T=v.length>1&&Array.from(v).every(D=>D===v[0])?v[0]:v,A=S?_.indexOf(S):-1;let k=wrapArray$1(_,Math.max(A,0));T.length===1&&(k=k.filter(D=>D!==S));const P=k.find(D=>D.toLowerCase().startsWith(T.toLowerCase()));return P!==S?P:void 0}function isPointInPolygon$1(_,v){const{x:S,y:R}=_;let T=!1;for(let A=0,k=v.length-1;A<v.length;k=A++){const M=v[A],P=v[k],D=M.x,L=M.y,q=P.x,B=P.y;L>R!=B>R&&S<(q-D)*(R-L)/(B-L)+D&&(T=!T)}return T}function isPointerInGraceArea(_,v){if(!v)return!1;const S={x:_.clientX,y:_.clientY};return isPointInPolygon$1(S,v)}function whenMouse(_){return v=>v.pointerType==="mouse"?_(v):void 0}var Root3$1=Menu,Anchor2=MenuAnchor,Portal$2=MenuPortal,Content2$3=MenuContent,Group$1=MenuGroup,Label$1=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator$1=MenuSeparator,Arrow2=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=_=>{const{__scopeDropdownMenu:v,children:S,dir:R,open:T,defaultOpen:A,onOpenChange:k,modal:M=!0}=_,P=useMenuScope(v),D=reactExports.useRef(null),[L,q]=useControllableState({prop:T,defaultProp:A??!1,onChange:k,caller:DROPDOWN_MENU_NAME});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:v,triggerId:useId(),triggerRef:D,contentId:useId(),open:L,onOpenChange:q,onOpenToggle:reactExports.useCallback(()=>q(B=>!B),[q]),modal:M,children:jsxRuntimeExports.jsx(Root3$1,{...P,open:L,onOpenChange:q,dir:R,modal:M,children:S})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$3="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,disabled:R=!1,...T}=_,A=useDropdownMenuContext(TRIGGER_NAME$3,S),k=useMenuScope(S);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...k,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:A.triggerId,"aria-haspopup":"menu","aria-expanded":A.open,"aria-controls":A.open?A.contentId:void 0,"data-state":A.open?"open":"closed","data-disabled":R?"":void 0,disabled:R,...T,ref:composeRefs(v,A.triggerRef),onPointerDown:composeEventHandlers(_.onPointerDown,M=>{!R&&M.button===0&&M.ctrlKey===!1&&(A.onOpenToggle(),A.open||M.preventDefault())}),onKeyDown:composeEventHandlers(_.onKeyDown,M=>{R||(["Enter"," "].includes(M.key)&&A.onOpenToggle(),M.key==="ArrowDown"&&A.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(M.key)&&M.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$3;var PORTAL_NAME$2="DropdownMenuPortal",DropdownMenuPortal=_=>{const{__scopeDropdownMenu:v,...S}=_,R=useMenuScope(v);return jsxRuntimeExports.jsx(Portal$2,{...R,...S})};DropdownMenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$2="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useDropdownMenuContext(CONTENT_NAME$2,S),A=useMenuScope(S),k=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$3,{id:T.contentId,"aria-labelledby":T.triggerId,...A,...R,ref:v,onCloseAutoFocus:composeEventHandlers(_.onCloseAutoFocus,M=>{k.current||T.triggerRef.current?.focus(),k.current=!1,M.preventDefault()}),onInteractOutside:composeEventHandlers(_.onInteractOutside,M=>{const P=M.detail.originalEvent,D=P.button===0&&P.ctrlKey===!0,L=P.button===2||D;(!T.modal||L)&&(k.current=!0)}),style:{..._.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$2;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Group$1,{...T,...R,ref:v})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Label$1,{...T,...R,ref:v})});DropdownMenuLabel$1.displayName=LABEL_NAME$1;var ITEM_NAME$1="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Item2$1,{...T,...R,ref:v})});DropdownMenuItem$1.displayName=ITEM_NAME$1;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(CheckboxItem,{...T,...R,ref:v})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(RadioGroup,{...T,...R,ref:v})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(RadioItem,{...T,...R,ref:v})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME$1="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(ItemIndicator$1,{...T,...R,ref:v})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME$1;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Separator$1,{...T,...R,ref:v})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME$1;var ARROW_NAME$2="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(Arrow2,{...T,...R,ref:v})});DropdownMenuArrow.displayName=ARROW_NAME$2;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(SubTrigger,{...T,...R,ref:v})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((_,v)=>{const{__scopeDropdownMenu:S,...R}=_,T=useMenuScope(S);return jsxRuntimeExports.jsx(SubContent,{...T,...R,ref:v,style:{..._.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$1=DropdownMenu$1,Trigger$2=DropdownMenuTrigger$1,Portal2=DropdownMenuPortal,Content2$2=DropdownMenuContent$1,Label2=DropdownMenuLabel$1,Item2=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$1,DropdownMenuTrigger=Trigger$2,DropdownMenuSubTrigger=reactExports.forwardRef(({className:_,inset:v,children:S,...R},T)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:T,className:cn$1("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",v&&"pl-8",_),...R,children:[S,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(SubContent2,{ref:S,className:cn$1("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",_),...v}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:_,sideOffset:v=4,...S},R)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2$2,{ref:R,sideOffset:v,className:cn$1("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",_),...S})}));DropdownMenuContent.displayName=Content2$2.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:_,inset:v,...S},R)=>jsxRuntimeExports.jsx(Item2,{ref:R,className:cn$1("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",v&&"pl-8",_),...S}));DropdownMenuItem.displayName=Item2.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:_,children:v,checked:S,...R},T)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:T,className:cn$1("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),checked:S,...R,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),v]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:R,className:cn$1("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...S,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),v]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:_,inset:v,...S},R)=>jsxRuntimeExports.jsx(Label2,{ref:R,className:cn$1("px-2 py-1.5 text-sm font-semibold",v&&"pl-8",_),...S}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Separator2,{ref:S,className:cn$1("-mx-1 my-1 h-px bg-muted",_),...v}));DropdownMenuSeparator.displayName=Separator2.displayName;let idCounter=0;const getId=()=>`n_${idCounter++}`;function traverse(_,v=null){if(!_)return[];const S=getId(),R=[];let T="",A=_.type.toLowerCase();switch(_.type){case"Definition":T=_.name,A+=" process-name";break;case"Prefix":_.action.label==="tau"?(T="",A+=" keyword"):_.action.isOutput?(T=`'${_.action.label}`,A+=" output-action"):(T=_.action.label,A+=" input-action");break;case"Summation":T="+",A+=" operator";break;case"Parallel":T="|",A+=" operator";break;case"Nil":T="0",A+=" keyword";break;case"ProcessRef":T=_.name,A+=" process-name";break;case"Restriction":T="\\{}",A+=" operator";break;case"Relabeling":T="[f]",A+=" operator";break}switch(R.push({data:{id:S,label:T,type:_.type,locStart:_.loc?_.loc.start.offset:null,locEnd:_.loc?_.loc.end.offset:null},classes:A}),v&&R.push({data:{source:v,target:S}}),_.type){case"Definition":R.push(...traverse(_.process,S));break;case"Summation":case"Parallel":R.push(...traverse(_.left,S)),R.push(...traverse(_.right,S));break;case"Prefix":R.push(...traverse(_.next,S));break;case"Restriction":case"Relabeling":R.push(...traverse(_.process,S));break}return R}function transformAstToSyntaxTree(_){if(idCounter=0,!_)return[];const v=getId(),S=[];if(Array.isArray(_))S.push({data:{id:v,label:"Program"},classes:"root-node"}),_.forEach(R=>{S.push(...traverse(R,v))});else return traverse(_);return S}function downloadBlob(_,v){const S=URL.createObjectURL(_),R=document.createElement("a");R.href=S,R.download=v,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(S)}async function handleExport(_,v){if(_){if(v==="png"){const S=_.png({output:"blob",bg:"white",full:!0,scale:2});downloadBlob(S,"ccs-export.png")}else if(v==="svg"){const S=_.svg({full:!0,bg:"white",scale:1}),R=new Blob([S],{type:"image/svg+xml;charset=utf-8"});downloadBlob(R,"ccs-export.svg")}else if(v==="json"){const S=JSON.stringify(_.json(),null,2),R=new Blob([S],{type:"application/json"});downloadBlob(R,"ccs-export.json")}}}cytoscape$1.use(dagre);const baseNodeStyle=_=>({selector:"node",style:{"background-color":"#fff101","border-color":"#000000","border-width":2,color:"#000000",label:"data(label)","font-size":"data(fontSize)","text-wrap":"wrap","text-max-width":"140px","text-valign":"center","text-halign":"center",width:_=="full"?"label":40,height:_=="full"?"label":40,shape:_=="full"?"round-rectangle":"ellipse",padding:_=="full"?"6px":"2px","transition-property":"background-color, border-width, width, height, font-size","transition-duration":150}}),stylesheetDef=[{selector:"core",style:{"active-bg-size":0}},{selector:"edge",style:{width:2,"line-color":"#000000","target-arrow-color":"#000000","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(label)","font-size":16,color:"#000000","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"2px","text-background-shape":"roundrectangle","transition-property":"background-color, border-width, width, height, font-size","transition-duration":100}},{selector:".active-state",style:{"background-color":"#b7d6ff","border-width":2,"border-color":"#000000","z-index":1e3}},{selector:".highlighted-target",style:{"background-color":"#b7d6ff","border-color":"#000","border-width":2,"border-style":"dashed"}},{selector:".highlighted-edge",style:{"line-color":"#2563eb","target-arrow-color":"#2563eb",width:4,"z-index":999}}];function LTSGraph({elements:_,activeNodeId:v,edgeHighlight:S,viewMode:R}){const T=reactExports.useRef(null),A=reactExports.useRef(null),[k,M]=reactExports.useState(null),P=reactExports.useMemo(()=>[baseNodeStyle(R),...stylesheetDef],[R]);reactExports.useEffect(()=>{if(!T.current||!_)return;const B=T.current;B.batch(()=>{if(B.nodes().forEach(F=>{const j=F.data("id"),z=F.data("ccs")||"";let V=j;R==="full"?V=z:R==="mixed"&&(V=z.length<=5?z:j);let G=15;V.length>0&&V.length<5&&(G=V.length<=2?22:17),F.data("label",V),F.data("fontSize",G)}),B.elements().removeClass("active-state highlighted-edge highlighted-target"),v&&B.$id(v).addClass("active-state"),S){const{sourceId:F,targetId:j,action:z}=S,V=B.edges().filter(G=>{const W=G.data();return W.source===F&&W.target===j&&Array.isArray(W.actions)&&W.actions.includes(z)});V.length>0&&(V.addClass("highlighted-edge"),B.$id(j).addClass("highlighted-target"))}})},[_,R,v,S]),reactExports.useEffect(()=>{if(!T.current)return;const B=T.current;B.style().update();const F=B.layout({name:"dagre",rankDir:"LR",animate:!1,nodeSep:40,rankSep:60,align:"UL",ranker:"network-simplex"});F.on("layoutstop",()=>{B.zoom()>1.15&&(B.zoom(1.15),B.center())}),F.run()},[R,_]);const D=reactExports.useCallback(()=>M(null),[]),L=reactExports.useCallback(B=>{const F=B.target,j=F.renderedBoundingBox(),z=A.current;if(!z)return;const V=z.getBoundingClientRect(),G=V.left+j.x1+j.w/2,W=V.top+j.y1;M({x:G,y:W,text:F.data("ccs"),nodeId:F.data("id")})},[]);reactExports.useEffect(()=>{if(!T.current)return;const B=T.current;return B.on("mouseover","node",L),B.on("mouseout","node",D),B.on("pan zoom",D),()=>{B.off("mouseover","node",L),B.off("mouseout","node",D),B.off("pan zoom",D)}},[L,D]);const q=()=>{if(!k)return null;const B=10,F=350,j=k.y-B,V={position:"fixed",left:k.x,top:j,transform:"translate(-50%, -100%)",maxWidth:`${F}px`,zIndex:99999,pointerEvents:"none"};return reactDomExports.createPortal(jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 text-sm bg-card/70 backdrop-blur-sm rounded-lg shadow-xl text-foreground border",style:V,children:[jsxRuntimeExports.jsx("div",{className:"font-mono border-b border-stone-400 pb-1 mb-2 font-bold text-xs uppercase tracking-wider flex justify-between",children:jsxRuntimeExports.jsxs("span",{children:["Vrchol ",k.nodeId]})}),jsxRuntimeExports.jsx("div",{className:"font-mono wrap-break-word border border-primary/8 bg-[color-mix(in_srgb,var(--primary)_15%,white)] p-2 rounded-md",children:jsxRuntimeExports.jsx(CCSViewer,{code:k.text})}),jsxRuntimeExports.jsx("div",{className:"absolute w-0 h-0 border-8 border-transparent border-t-card/90 bottom-0 translate-y-full",style:{left:"50.25%",transform:"translateX(-50%)"}})]}),document.body)};return jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full overflow-hidden",ref:A,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 z-10",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",className:"bg-stone-100/50 backdrop-blur-sm shadow-sm hover:bg-stone-50 cursor-pointer",children:jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(T.current,"png"),children:"Sthnout jako PNG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(T.current,"svg"),children:"Sthnout jako SVG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(T.current,"json"),children:"Sthnout jako JSON"})]})]})}),jsxRuntimeExports.jsx(w,{elements:_??[],style:{width:"100%",height:"100%"},stylesheet:P,cy:B=>{T.current=B},pixelRatio:1.5}),q()]})}function getPrecedence(_){switch(_.type){case"Nil":case"ProcessRef":return 4;case"Prefix":case"Restriction":case"Relabeling":return 3;case"Parallel":return 2;case"Summation":return 1;default:return 0}}function flatten(_,v){return _.type===v?[...flatten(_.left,v),...flatten(_.right,v)]:[_]}function areActionsEqual(_,v){return _.label===v.label&&_.isOutput===v.isOutput}function areProcessesEqual(_,v){return ccsToString(_,!0)===ccsToString(v,!0)}function findDefinition(_,v){const S=v.find(R=>R.name===_);return S?S.process:null}function ccsToString(_,v=!1){const S=getPrecedence(_),R=T=>{const A=ccsToString(T,v),k=getPrecedence(T);return k<S?`(${A})`:!v&&k===S&&(T.type==="Parallel"||T.type==="Summation")?`(${A})`:A};switch(_.type){case"Definition":return`${_.name} = ${ccsToString(_.process,v)}`;case"Nil":return"0";case"ProcessRef":return _.name;case"Prefix":return`${_.action.isOutput?`'${_.action.label}`:_.action.label}.${R(_.next)}`;case"Restriction":{const T=v?[..._.labels].sort():_.labels;return`${R(_.process)} \\ {${T.join(", ")}}`}case"Relabeling":{let T=_.relabels;v&&(T=[..._.relabels].sort((k,M)=>k.old.localeCompare(M.old)));const A=T.map(k=>`${k.new}/${k.old}`).join(", ");return`${R(_.process)} [${A}]`}case"Summation":case"Parallel":{let T;if(v){T=flatten(_,_.type);const A=T.filter(D=>D.type!=="Nil");if(A.length===0)return"0";T=A;let k=T.map(D=>({node:D,str:ccsToString(D,v),precedence:getPrecedence(D)}));if(k.sort((D,L)=>D.str.localeCompare(L.str)),_.type==="Summation"){const D=[],L=new Set;for(const q of k)L.has(q.str)||(L.add(q.str),D.push(q));k=D}const M=k.map(D=>D.precedence<S?`(${D.str})`:D.str),P=_.type==="Parallel"?" | ":" + ";return M.join(P)}else return`${R(_.left)} ${_.type==="Parallel"?"|":"+"} ${R(_.right)}`}default:return""}}const alertStyles={warning:{container:"border-amber-200 bg-amber-50",icon:"text-amber-600",text:"text-amber-800",IconComponent:TriangleAlert},error:{container:"border-red-200 bg-red-50",icon:"text-red-600",text:"text-red-700",IconComponent:CircleX},success:{container:"border-green-200 bg-green-50",icon:"text-green-600",text:"text-green-700",IconComponent:Check},info:{container:"border-indigo-200 bg-indigo-50",icon:"text-indigo-600",text:"text-indigo-700",IconComponent:Info}};function AlertBox({type:_,className:v,children:S,...R}){const T=alertStyles[_],A=T.IconComponent;return jsxRuntimeExports.jsxs("div",{className:cn$1("border p-2 rounded-md flex w-fit gap-2 shadow-xs animate-in fade-in duration-300",T.container,v),...R,children:[jsxRuntimeExports.jsx(A,{className:cn$1("shrink-0 mt-0.5",T.icon),size:20}),jsxRuntimeExports.jsx("span",{className:cn$1("text-xs mt-0.5",T.text),children:S})]})}function SimulationPanel({currentCCS:_,transitions:v,historyLength:S,onStep:R,onBack:T,onReset:A,onTransitionHover:k,getTargetLabel:M,forceStructuralReduction:P,isOffGraph:D}){const L=reactExports.useMemo(()=>{const q=new Map;return v.forEach(B=>{const F=ccsToString(B.target,P),j=`${B.action} -> ${F}`;q.has(j)||q.set(j,B)}),Array.from(q.values())},[v,P]);return jsxRuntimeExports.jsxs("div",{className:"p-3 text-sm bg-card/60 backdrop-blur-sm rounded-lg shadow-xl transition-opacity duration-200 border max-w-[350px] max-h-[500px] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:T,disabled:S===0,size:"sm",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:14})," Zpt"]}),jsxRuntimeExports.jsxs(Button,{onClick:A,variant:"destructive",size:"sm",children:[jsxRuntimeExports.jsx(RotateCcw,{size:14})," Reset"]})]})}),jsxRuntimeExports.jsxs("div",{className:"grow overflow-y-auto pt-4 flex flex-col gap-6",children:[D&&jsxRuntimeExports.jsx(AlertBox,{type:"warning",className:"border-none shadow-none bg-amber-100 max-w-[210px]",children:"Dal kroky se v grafu nezobraz, stle se ale potaj."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs px-2 uppercase tracking-wider text-foreground/90 font-bold mb-1",children:"Aktuln proces"}),jsxRuntimeExports.jsx("div",{className:"font-mono wrap-break-word border border-primary/15 bg-primary/8 p-2 rounded-md",children:jsxRuntimeExports.jsx(CCSViewer,{code:_})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs px-2 uppercase tracking-wider text-foreground/90 font-bold mb-1",children:"Dostupn pechody"}),L.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-foreground bg-foreground/5 border border-foreground/10 rounded font-mono uppercase",children:"Deadlock"}):jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:L.map(q=>{const B=ccsToString(q.target,P),F=M(B);return jsxRuntimeExports.jsx("button",{onClick:()=>R(q.id),onMouseEnter:()=>k(q.id),onMouseLeave:()=>k(null),className:"text-left px-3 py-2 bg-foreground/5 border border-foreground/10 rounded-lg hover:bg-foreground/10 hover:border-foreground/20 transition-all group relative overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between z-10 relative",children:[jsxRuntimeExports.jsx("span",{className:"font-bold font-mono **:text-foreground/90! **:font-normal px-2 py-0.5 rounded text-sm",children:jsxRuntimeExports.jsx(CCSViewer,{code:q.action})}),jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"text-primary mx-2"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 text-foreground/90 group-hover:text-foreground max-w-[120px]",children:[jsxRuntimeExports.jsx(Target,{size:12,className:"opacity-50"}),jsxRuntimeExports.jsx("span",{className:"font-mono truncate",title:B,children:F})]})]})},q.id)})})]})]})]})}function getActionBaseName(_){return _==="tau"?"tau":_.startsWith("'")?_.slice(1):_}function isOutputAction(_){return _.startsWith("'")}function areComplementary(_,v){if(_==="tau"||v==="tau")return!1;const S=getActionBaseName(_),R=getActionBaseName(v),T=isOutputAction(_),A=isOutputAction(v);return S===R&&T!==A}function getPossibleTransitions(_,v,S=new Set){if(!_)return[];switch(_.type){case"Nil":return[];case"Prefix":return[{action:`${_.action.isOutput?"'":""}${_.action.label}`,targetExpr:_.next}];case"Summation":return[...getPossibleTransitions(_.left,v,S),...getPossibleTransitions(_.right,v,S)];case"ProcessRef":if(S.has(_.name))return[];const T=new Set(S);T.add(_.name);const A=v.get(_.name);return A?getPossibleTransitions(A,v,T):[];case"Parallel":{const k=getPossibleTransitions(_.left,v,S),M=getPossibleTransitions(_.right,v,S),P=[];return k.forEach(D=>{P.push({action:D.action,targetExpr:{type:"Parallel",left:D.targetExpr,right:_.right}})}),M.forEach(D=>{P.push({action:D.action,targetExpr:{type:"Parallel",left:_.left,right:D.targetExpr}})}),k.forEach(D=>{M.forEach(L=>{areComplementary(D.action,L.action)&&P.push({action:"tau",targetExpr:{type:"Parallel",left:D.targetExpr,right:L.targetExpr}})})}),P}case"Restriction":return getPossibleTransitions(_.process,v,S).filter(M=>{if(M.action==="tau")return!0;const P=getActionBaseName(M.action);return!_.labels.includes(P)}).map(M=>({action:M.action,targetExpr:{type:"Restriction",process:M.targetExpr,labels:_.labels}}));case"Relabeling":return getPossibleTransitions(_.process,v,S).map(M=>{let P=M.action;if(M.action!=="tau"){const D=getActionBaseName(M.action),L=isOutputAction(M.action),q=_.relabels.find(B=>B.old===D);q&&(P=(L?"'":"")+q.new)}return{action:P,targetExpr:{type:"Relabeling",process:M.targetExpr,relabels:_.relabels}}});default:return[]}}function generateLTS(_,v,S={maxDepth:20,maxStates:150,useStructuralReduction:!1}){const R=[],T=new Map,A=new Map;if(_.forEach(j=>A.set(j.name,j.process)),!A.get(v))return[];const M=[],P=new Set,D=new Map,L=ccsToString({type:"ProcessRef",name:v},S.useStructuralReduction);M.push({expr:{type:"ProcessRef",name:v},depth:0});const q="1";D.set(L,q),P.add(L),R.push({data:{id:q,label:q,ccs:L,isInitial:!0}});let B=1;for(;M.length>0&&!(R.length>=S.maxStates);){const{expr:j,depth:z}=M.shift(),V=ccsToString(j,S.useStructuralReduction),G=D.get(V);if(z>=S.maxDepth)continue;const W=getPossibleTransitions(j,A);for(const Y of W){const X=ccsToString(Y.targetExpr,S.useStructuralReduction);let ee=D.get(X);if(ee||P.has(X)||(B++,ee=`${B}`,D.set(X,ee),P.add(X),R.push({data:{id:ee,label:ee,ccs:X,isInitial:!1}}),M.push({expr:Y.targetExpr,depth:z+1})),ee){const re=`${G}_${ee}`;T.has(re)||T.set(re,{source:G,target:ee,actions:new Set}),T.get(re).actions.add(Y.action)}}}const F=[];return T.forEach((j,z)=>{const V=Array.from(j.actions),G=V.join(", ");F.push({data:{id:`e_${z}`,source:j.source,target:j.target,label:G,actions:V}})}),[...R,...F]}function useSimulation(_,v){const S=reactExports.useMemo(()=>{const D=new Map;return _.forEach(L=>D.set(L.name,L.process)),D},[_]),[R,T]=reactExports.useState({currentExpr:null,history:[],availableTransitions:[],isFinished:!1}),A=reactExports.useCallback((D,L)=>{const q=getPossibleTransitions(D,S);return{currentExpr:D,history:L,availableTransitions:q.map((B,F)=>({action:B.action,target:B.targetExpr,id:F})),isFinished:q.length===0}},[S]),k=reactExports.useCallback(()=>{if(!S.has(v))return;T(A({type:"ProcessRef",name:v},[]))},[v,S,A]),M=D=>{if(!R.currentExpr)return;const L=R.availableTransitions[D],q=[...R.history,R.currentExpr];T(A(L.target,q))},P=()=>{if(R.history.length===0)return;const D=R.history[R.history.length-1],L=R.history.slice(0,-1);T(A(D,L))};return reactExports.useEffect(()=>{k()},[k]),{...R,currentCCSString:R.currentExpr?ccsToString(R.currentExpr):"",step:M,back:P,reset:k}}function clamp(_,[v,S]){return Math.min(S,Math.max(v,_))}function createSlot(_){const v=createSlotClone(_),S=reactExports.forwardRef((R,T)=>{const{children:A,...k}=R,M=reactExports.Children.toArray(A),P=M.find(isSlottable);if(P){const D=P.props.children,L=M.map(q=>q===P?reactExports.Children.count(D)>1?reactExports.Children.only(null):reactExports.isValidElement(D)?D.props.children:null:q);return jsxRuntimeExports.jsx(v,{...k,ref:T,children:reactExports.isValidElement(D)?reactExports.cloneElement(D,void 0,L):null})}return jsxRuntimeExports.jsx(v,{...k,ref:T,children:A})});return S.displayName=`${_}.Slot`,S}function createSlotClone(_){const v=reactExports.forwardRef((S,R)=>{const{children:T,...A}=S;if(reactExports.isValidElement(T)){const k=getElementRef(T),M=mergeProps(A,T.props);return T.type!==reactExports.Fragment&&(M.ref=R?composeRefs(R,k):k),reactExports.cloneElement(T,M)}return reactExports.Children.count(T)>1?reactExports.Children.only(null):null});return v.displayName=`${_}.SlotClone`,v}var SLOTTABLE_IDENTIFIER$1=Symbol("radix.slottable");function isSlottable(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$1}function mergeProps(_,v){const S={...v};for(const R in v){const T=_[R],A=v[R];/^on[A-Z]/.test(R)?T&&A?S[R]=(...M)=>{const P=A(...M);return T(...M),P}:T&&(S[R]=T):R==="style"?S[R]={...T,...A}:R==="className"&&(S[R]=[T,A].filter(Boolean).join(" "))}return{..._,...S}}function getElementRef(_){let v=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning;return S?_.ref:(v=Object.getOwnPropertyDescriptor(_,"ref")?.get,S=v&&"isReactWarning"in v&&v.isReactWarning,S?_.props.ref:_.props.ref||_.ref)}function usePrevious(_){const v=reactExports.useRef({value:_,previous:_});return reactExports.useMemo(()=>(v.current.value!==_&&(v.current.previous=v.current.value,v.current.value=_),v.current.previous),[_])}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_,v)=>jsxRuntimeExports.jsx(Primitive.span,{..._,ref:v,style:{...VISUALLY_HIDDEN_STYLES,..._.style}}));VisuallyHidden.displayName=NAME;var Root=VisuallyHidden,OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope$1=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_=>{const{__scopeSelect:v,children:S,open:R,defaultOpen:T,onOpenChange:A,value:k,defaultValue:M,onValueChange:P,dir:D,name:L,autoComplete:q,disabled:B,required:F,form:j}=_,z=usePopperScope$1(v),[V,G]=reactExports.useState(null),[W,Y]=reactExports.useState(null),[X,ee]=reactExports.useState(!1),re=useDirection(D),[Q,ne]=useControllableState({prop:R,defaultProp:T??!1,onChange:A,caller:SELECT_NAME}),[ae,oe]=useControllableState({prop:k,defaultProp:M,onChange:P,caller:SELECT_NAME}),se=reactExports.useRef(null),ce=V?j||!!V.closest("form"):!0,[de,ye]=reactExports.useState(new Set),we=Array.from(de).map(ge=>ge.props.value).join(";");return jsxRuntimeExports.jsx(Root2$2,{...z,children:jsxRuntimeExports.jsxs(SelectProvider,{required:F,scope:v,trigger:V,onTriggerChange:G,valueNode:W,onValueNodeChange:Y,valueNodeHasChildren:X,onValueNodeHasChildrenChange:ee,contentId:useId(),value:ae,onValueChange:oe,open:Q,onOpenChange:ne,dir:re,triggerPointerDownPosRef:se,disabled:B,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:v,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(ge=>{ye(ve=>new Set(ve).add(ge))},[]),onNativeOptionRemove:reactExports.useCallback(ge=>{ye(ve=>{const be=new Set(ve);return be.delete(ge),be})},[]),children:S})}),ce?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:F,tabIndex:-1,name:L,autoComplete:q,value:ae,onChange:ge=>oe(ge.target.value),disabled:B,form:j,children:[ae===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(de)]},we):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$2="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,disabled:R=!1,...T}=_,A=usePopperScope$1(S),k=useSelectContext(TRIGGER_NAME$2,S),M=k.disabled||R,P=useComposedRefs(v,k.onTriggerChange),D=useCollection(S),L=reactExports.useRef("touch"),[q,B,F]=useTypeaheadSearch(z=>{const V=D().filter(Y=>!Y.disabled),G=V.find(Y=>Y.value===k.value),W=findNextItem(V,z,G);W!==void 0&&k.onValueChange(W.value)}),j=z=>{M||(k.onOpenChange(!0),F()),z&&(k.triggerPointerDownPosRef.current={x:Math.round(z.pageX),y:Math.round(z.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...A,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":k.contentId,"aria-expanded":k.open,"aria-required":k.required,"aria-autocomplete":"none",dir:k.dir,"data-state":k.open?"open":"closed",disabled:M,"data-disabled":M?"":void 0,"data-placeholder":shouldShowPlaceholder(k.value)?"":void 0,...T,ref:P,onClick:composeEventHandlers(T.onClick,z=>{z.currentTarget.focus(),L.current!=="mouse"&&j(z)}),onPointerDown:composeEventHandlers(T.onPointerDown,z=>{L.current=z.pointerType;const V=z.target;V.hasPointerCapture(z.pointerId)&&V.releasePointerCapture(z.pointerId),z.button===0&&z.ctrlKey===!1&&z.pointerType==="mouse"&&(j(z),z.preventDefault())}),onKeyDown:composeEventHandlers(T.onKeyDown,z=>{const V=q.current!=="";!(z.ctrlKey||z.altKey||z.metaKey)&&z.key.length===1&&B(z.key),!(V&&z.key===" ")&&OPEN_KEYS.includes(z.key)&&(j(),z.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$2;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,className:R,style:T,children:A,placeholder:k="",...M}=_,P=useSelectContext(VALUE_NAME,S),{onValueNodeHasChildrenChange:D}=P,L=A!==void 0,q=useComposedRefs(v,P.onValueNodeChange);return useLayoutEffect2(()=>{D(L)},[D,L]),jsxRuntimeExports.jsx(Primitive.span,{...M,ref:q,style:{pointerEvents:"none"},children:shouldShowPlaceholder(P.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:k}):A})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,children:R,...T}=_;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...T,ref:v,children:R||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$1="SelectPortal",SelectPortal=_=>jsxRuntimeExports.jsx(Portal$3,{asChild:!0,..._});SelectPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="SelectContent",SelectContent$1=reactExports.forwardRef((_,v)=>{const S=useSelectContext(CONTENT_NAME$1,_.__scopeSelect),[R,T]=reactExports.useState();if(useLayoutEffect2(()=>{T(new DocumentFragment)},[]),!S.open){const A=R;return A?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_.children})})}),A):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._,ref:v})});SelectContent$1.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,position:R="item-aligned",onCloseAutoFocus:T,onEscapeKeyDown:A,onPointerDownOutside:k,side:M,sideOffset:P,align:D,alignOffset:L,arrowPadding:q,collisionBoundary:B,collisionPadding:F,sticky:j,hideWhenDetached:z,avoidCollisions:V,...G}=_,W=useSelectContext(CONTENT_NAME$1,S),[Y,X]=reactExports.useState(null),[ee,re]=reactExports.useState(null),Q=useComposedRefs(v,Ce=>X(Ce)),[ne,ae]=reactExports.useState(null),[oe,se]=reactExports.useState(null),ce=useCollection(S),[de,ye]=reactExports.useState(!1),we=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Y)return hideOthers(Y)},[Y]),useFocusGuards();const ge=reactExports.useCallback(Ce=>{const[$e,...Be]=ce().map(Le=>Le.ref.current),[Pe]=Be.slice(-1),De=document.activeElement;for(const Le of Ce)if(Le===De||(Le?.scrollIntoView({block:"nearest"}),Le===$e&&ee&&(ee.scrollTop=0),Le===Pe&&ee&&(ee.scrollTop=ee.scrollHeight),Le?.focus(),document.activeElement!==De))return},[ce,ee]),ve=reactExports.useCallback(()=>ge([ne,Y]),[ge,ne,Y]);reactExports.useEffect(()=>{de&&ve()},[de,ve]);const{onOpenChange:be,triggerPointerDownPosRef:ke}=W;reactExports.useEffect(()=>{if(Y){let Ce={x:0,y:0};const $e=Pe=>{Ce={x:Math.abs(Math.round(Pe.pageX)-(ke.current?.x??0)),y:Math.abs(Math.round(Pe.pageY)-(ke.current?.y??0))}},Be=Pe=>{Ce.x<=10&&Ce.y<=10?Pe.preventDefault():Y.contains(Pe.target)||be(!1),document.removeEventListener("pointermove",$e),ke.current=null};return ke.current!==null&&(document.addEventListener("pointermove",$e),document.addEventListener("pointerup",Be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$e),document.removeEventListener("pointerup",Be,{capture:!0})}}},[Y,be,ke]),reactExports.useEffect(()=>{const Ce=()=>be(!1);return window.addEventListener("blur",Ce),window.addEventListener("resize",Ce),()=>{window.removeEventListener("blur",Ce),window.removeEventListener("resize",Ce)}},[be]);const[me,fe]=useTypeaheadSearch(Ce=>{const $e=ce().filter(De=>!De.disabled),Be=$e.find(De=>De.ref.current===document.activeElement),Pe=findNextItem($e,Ce,Be);Pe&&setTimeout(()=>Pe.ref.current.focus())}),xe=reactExports.useCallback((Ce,$e,Be)=>{const Pe=!we.current&&!Be;(W.value!==void 0&&W.value===$e||Pe)&&(ae(Ce),Pe&&(we.current=!0))},[W.value]),Ae=reactExports.useCallback(()=>Y?.focus(),[Y]),Se=reactExports.useCallback((Ce,$e,Be)=>{const Pe=!we.current&&!Be;(W.value!==void 0&&W.value===$e||Pe)&&se(Ce)},[W.value]),Me=R==="popper"?SelectPopperPosition:SelectItemAlignedPosition,Oe=Me===SelectPopperPosition?{side:M,sideOffset:P,align:D,alignOffset:L,arrowPadding:q,collisionBoundary:B,collisionPadding:F,sticky:j,hideWhenDetached:z,avoidCollisions:V}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:S,content:Y,viewport:ee,onViewportChange:re,itemRefCallback:xe,selectedItem:ne,onItemLeave:Ae,itemTextRefCallback:Se,focusSelectedItem:ve,selectedItemText:oe,position:R,isPositioned:de,searchRef:me,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:W.open,onMountAutoFocus:Ce=>{Ce.preventDefault()},onUnmountAutoFocus:composeEventHandlers(T,Ce=>{W.trigger?.focus({preventScroll:!0}),Ce.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:A,onPointerDownOutside:k,onFocusOutside:Ce=>Ce.preventDefault(),onDismiss:()=>W.onOpenChange(!1),children:jsxRuntimeExports.jsx(Me,{role:"listbox",id:W.contentId,"data-state":W.open?"open":"closed",dir:W.dir,onContextMenu:Ce=>Ce.preventDefault(),...G,...Oe,onPlaced:()=>ye(!0),ref:Q,style:{display:"flex",flexDirection:"column",outline:"none",...G.style},onKeyDown:composeEventHandlers(G.onKeyDown,Ce=>{const $e=Ce.ctrlKey||Ce.altKey||Ce.metaKey;if(Ce.key==="Tab"&&Ce.preventDefault(),!$e&&Ce.key.length===1&&fe(Ce.key),["ArrowUp","ArrowDown","Home","End"].includes(Ce.key)){let Pe=ce().filter(De=>!De.disabled).map(De=>De.ref.current);if(["ArrowUp","End"].includes(Ce.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ce.key)){const De=Ce.target,Le=Pe.indexOf(De);Pe=Pe.slice(Le+1)}setTimeout(()=>ge(Pe)),Ce.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,onPlaced:R,...T}=_,A=useSelectContext(CONTENT_NAME$1,S),k=useSelectContentContext(CONTENT_NAME$1,S),[M,P]=reactExports.useState(null),[D,L]=reactExports.useState(null),q=useComposedRefs(v,Q=>L(Q)),B=useCollection(S),F=reactExports.useRef(!1),j=reactExports.useRef(!0),{viewport:z,selectedItem:V,selectedItemText:G,focusSelectedItem:W}=k,Y=reactExports.useCallback(()=>{if(A.trigger&&A.valueNode&&M&&D&&z&&V&&G){const Q=A.trigger.getBoundingClientRect(),ne=D.getBoundingClientRect(),ae=A.valueNode.getBoundingClientRect(),oe=G.getBoundingClientRect();if(A.dir!=="rtl"){const De=oe.left-ne.left,Le=ae.left-De,Ne=Q.left-Le,tt=Q.width+Ne,it=Math.max(tt,ne.width),dt=window.innerWidth-CONTENT_MARGIN,pt=clamp(Le,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,dt-it)]);M.style.minWidth=tt+"px",M.style.left=pt+"px"}else{const De=ne.right-oe.right,Le=window.innerWidth-ae.right-De,Ne=window.innerWidth-Q.right-Le,tt=Q.width+Ne,it=Math.max(tt,ne.width),dt=window.innerWidth-CONTENT_MARGIN,pt=clamp(Le,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,dt-it)]);M.style.minWidth=tt+"px",M.style.right=pt+"px"}const se=B(),ce=window.innerHeight-CONTENT_MARGIN*2,de=z.scrollHeight,ye=window.getComputedStyle(D),we=parseInt(ye.borderTopWidth,10),ge=parseInt(ye.paddingTop,10),ve=parseInt(ye.borderBottomWidth,10),be=parseInt(ye.paddingBottom,10),ke=we+ge+de+be+ve,me=Math.min(V.offsetHeight*5,ke),fe=window.getComputedStyle(z),xe=parseInt(fe.paddingTop,10),Ae=parseInt(fe.paddingBottom,10),Se=Q.top+Q.height/2-CONTENT_MARGIN,Me=ce-Se,Oe=V.offsetHeight/2,Ce=V.offsetTop+Oe,$e=we+ge+Ce,Be=ke-$e;if($e<=Se){const De=se.length>0&&V===se[se.length-1].ref.current;M.style.bottom="0px";const Le=D.clientHeight-z.offsetTop-z.offsetHeight,Ne=Math.max(Me,Oe+(De?Ae:0)+Le+ve),tt=$e+Ne;M.style.height=tt+"px"}else{const De=se.length>0&&V===se[0].ref.current;M.style.top="0px";const Ne=Math.max(Se,we+z.offsetTop+(De?xe:0)+Oe)+Be;M.style.height=Ne+"px",z.scrollTop=$e-Se+z.offsetTop}M.style.margin=`${CONTENT_MARGIN}px 0`,M.style.minHeight=me+"px",M.style.maxHeight=ce+"px",R?.(),requestAnimationFrame(()=>F.current=!0)}},[B,A.trigger,A.valueNode,M,D,z,V,G,A.dir,R]);useLayoutEffect2(()=>Y(),[Y]);const[X,ee]=reactExports.useState();useLayoutEffect2(()=>{D&&ee(window.getComputedStyle(D).zIndex)},[D]);const re=reactExports.useCallback(Q=>{Q&&j.current===!0&&(Y(),W?.(),j.current=!1)},[Y,W]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:S,contentWrapper:M,shouldExpandOnScrollRef:F,onScrollButtonChange:re,children:jsxRuntimeExports.jsx("div",{ref:P,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:X},children:jsxRuntimeExports.jsx(Primitive.div,{...T,ref:q,style:{boxSizing:"border-box",maxHeight:"100%",...T.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,align:R="start",collisionPadding:T=CONTENT_MARGIN,...A}=_,k=usePopperScope$1(S);return jsxRuntimeExports.jsx(Content,{...k,...A,ref:v,align:R,collisionPadding:T,style:{boxSizing:"border-box",...A.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,nonce:R,...T}=_,A=useSelectContentContext(VIEWPORT_NAME,S),k=useSelectViewportContext(VIEWPORT_NAME,S),M=useComposedRefs(v,A.onViewportChange),P=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:R}),jsxRuntimeExports.jsx(Collection.Slot,{scope:S,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...T,ref:M,style:{position:"relative",flex:1,overflow:"hidden auto",...T.style},onScroll:composeEventHandlers(T.onScroll,D=>{const L=D.currentTarget,{contentWrapper:q,shouldExpandOnScrollRef:B}=k;if(B?.current&&q){const F=Math.abs(P.current-L.scrollTop);if(F>0){const j=window.innerHeight-CONTENT_MARGIN*2,z=parseFloat(q.style.minHeight),V=parseFloat(q.style.height),G=Math.max(z,V);if(G<j){const W=G+F,Y=Math.min(j,W),X=W-Y;q.style.height=Y+"px",q.style.bottom==="0px"&&(L.scrollTop=X>0?X:0,q.style.justifyContent="flex-end")}}}P.current=L.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_,T=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:S,id:T,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":T,...R,ref:v})})});SelectGroup$1.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_,T=useSelectGroupContext(LABEL_NAME,S);return jsxRuntimeExports.jsx(Primitive.div,{id:T.id,...R,ref:v})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,value:R,disabled:T=!1,textValue:A,...k}=_,M=useSelectContext(ITEM_NAME,S),P=useSelectContentContext(ITEM_NAME,S),D=M.value===R,[L,q]=reactExports.useState(A??""),[B,F]=reactExports.useState(!1),j=useComposedRefs(v,W=>P.itemRefCallback?.(W,R,T)),z=useId(),V=reactExports.useRef("touch"),G=()=>{T||(M.onValueChange(R),M.onOpenChange(!1))};if(R==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:S,value:R,disabled:T,textId:z,isSelected:D,onItemTextChange:reactExports.useCallback(W=>{q(Y=>Y||(W?.textContent??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:S,value:R,disabled:T,textValue:L,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":z,"data-highlighted":B?"":void 0,"aria-selected":D&&B,"data-state":D?"checked":"unchecked","aria-disabled":T||void 0,"data-disabled":T?"":void 0,tabIndex:T?void 0:-1,...k,ref:j,onFocus:composeEventHandlers(k.onFocus,()=>F(!0)),onBlur:composeEventHandlers(k.onBlur,()=>F(!1)),onClick:composeEventHandlers(k.onClick,()=>{V.current!=="mouse"&&G()}),onPointerUp:composeEventHandlers(k.onPointerUp,()=>{V.current==="mouse"&&G()}),onPointerDown:composeEventHandlers(k.onPointerDown,W=>{V.current=W.pointerType}),onPointerMove:composeEventHandlers(k.onPointerMove,W=>{V.current=W.pointerType,T?P.onItemLeave?.():V.current==="mouse"&&W.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(k.onPointerLeave,W=>{W.currentTarget===document.activeElement&&P.onItemLeave?.()}),onKeyDown:composeEventHandlers(k.onKeyDown,W=>{P.searchRef?.current!==""&&W.key===" "||(SELECTION_KEYS.includes(W.key)&&G(),W.key===" "&&W.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,className:R,style:T,...A}=_,k=useSelectContext(ITEM_TEXT_NAME,S),M=useSelectContentContext(ITEM_TEXT_NAME,S),P=useSelectItemContext(ITEM_TEXT_NAME,S),D=useSelectNativeOptionsContext(ITEM_TEXT_NAME,S),[L,q]=reactExports.useState(null),B=useComposedRefs(v,G=>q(G),P.onItemTextChange,G=>M.itemTextRefCallback?.(G,P.value,P.disabled)),F=L?.textContent,j=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:P.value,disabled:P.disabled,children:F},P.value),[P.disabled,P.value,F]),{onNativeOptionAdd:z,onNativeOptionRemove:V}=D;return useLayoutEffect2(()=>(z(j),()=>V(j)),[z,V,j]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:P.textId,...A,ref:B}),P.isSelected&&k.valueNode&&!k.valueNodeHasChildren?reactDomExports.createPortal(A.children,k.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_;return useSelectItemContext(ITEM_INDICATOR_NAME,S).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...R,ref:v}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_,v)=>{const S=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),R=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),[T,A]=reactExports.useState(!1),k=useComposedRefs(v,R.onScrollButtonChange);return useLayoutEffect2(()=>{if(S.viewport&&S.isPositioned){let M=function(){const D=P.scrollTop>0;A(D)};const P=S.viewport;return M(),P.addEventListener("scroll",M),()=>P.removeEventListener("scroll",M)}},[S.viewport,S.isPositioned]),T?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:k,onAutoScroll:()=>{const{viewport:M,selectedItem:P}=S;M&&P&&(M.scrollTop=M.scrollTop-P.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_,v)=>{const S=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),R=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),[T,A]=reactExports.useState(!1),k=useComposedRefs(v,R.onScrollButtonChange);return useLayoutEffect2(()=>{if(S.viewport&&S.isPositioned){let M=function(){const D=P.scrollHeight-P.clientHeight,L=Math.ceil(P.scrollTop)<D;A(L)};const P=S.viewport;return M(),P.addEventListener("scroll",M),()=>P.removeEventListener("scroll",M)}},[S.viewport,S.isPositioned]),T?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:k,onAutoScroll:()=>{const{viewport:M,selectedItem:P}=S;M&&P&&(M.scrollTop=M.scrollTop+P.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,onAutoScroll:R,...T}=_,A=useSelectContentContext("SelectScrollButton",S),k=reactExports.useRef(null),M=useCollection(S),P=reactExports.useCallback(()=>{k.current!==null&&(window.clearInterval(k.current),k.current=null)},[]);return reactExports.useEffect(()=>()=>P(),[P]),useLayoutEffect2(()=>{M().find(L=>L.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[M]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...T,ref:v,style:{flexShrink:0,...T.style},onPointerDown:composeEventHandlers(T.onPointerDown,()=>{k.current===null&&(k.current=window.setInterval(R,50))}),onPointerMove:composeEventHandlers(T.onPointerMove,()=>{A.onItemLeave?.(),k.current===null&&(k.current=window.setInterval(R,50))}),onPointerLeave:composeEventHandlers(T.onPointerLeave,()=>{P()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...R,ref:v})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME$1="SelectArrow",SelectArrow=reactExports.forwardRef((_,v)=>{const{__scopeSelect:S,...R}=_,T=usePopperScope$1(S),A=useSelectContext(ARROW_NAME$1,S),k=useSelectContentContext(ARROW_NAME$1,S);return A.open&&k.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...T,...R,ref:v}):null});SelectArrow.displayName=ARROW_NAME$1;var BUBBLE_INPUT_NAME$1="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:_,value:v,...S},R)=>{const T=reactExports.useRef(null),A=useComposedRefs(R,T),k=usePrevious(v);return reactExports.useEffect(()=>{const M=T.current;if(!M)return;const P=window.HTMLSelectElement.prototype,L=Object.getOwnPropertyDescriptor(P,"value").set;if(k!==v&&L){const q=new Event("change",{bubbles:!0});L.call(M,v),M.dispatchEvent(q)}},[k,v]),jsxRuntimeExports.jsx(Primitive.select,{...S,style:{...VISUALLY_HIDDEN_STYLES,...S.style},ref:A,defaultValue:v})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME$1;function shouldShowPlaceholder(_){return _===""||_===void 0}function useTypeaheadSearch(_){const v=useCallbackRef$1(_),S=reactExports.useRef(""),R=reactExports.useRef(0),T=reactExports.useCallback(k=>{const M=S.current+k;v(M),(function P(D){S.current=D,window.clearTimeout(R.current),D!==""&&(R.current=window.setTimeout(()=>P(""),1e3))})(M)},[v]),A=reactExports.useCallback(()=>{S.current="",window.clearTimeout(R.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(R.current),[]),[S,T,A]}function findNextItem(_,v,S){const T=v.length>1&&Array.from(v).every(D=>D===v[0])?v[0]:v,A=S?_.indexOf(S):-1;let k=wrapArray(_,Math.max(A,0));T.length===1&&(k=k.filter(D=>D!==S));const P=k.find(D=>D.textValue.toLowerCase().startsWith(T.toLowerCase()));return P!==S?P:void 0}function wrapArray(_,v){return _.map((S,R)=>_[(v+R)%_.length])}var Root2=Select$1,Trigger$1=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal$1=SelectPortal,Content2$1=SelectContent$1,Viewport=SelectViewport,Group=SelectGroup$1,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2,SelectGroup=Group,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(Trigger$1,{ref:R,className:cn$1("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),...S,children:[v,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$1.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:S,className:cn$1("flex cursor-default items-center justify-center py-1",_),...v,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:S,className:cn$1("flex cursor-default items-center justify-center py-1",_),...v,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_,children:v,position:S="popper",...R},T)=>jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsxs(Content2$1,{ref:T,className:cn$1("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",S==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:S,...R,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn$1("p-1",S==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:v}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$1.displayName;const SelectLabel=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Label,{ref:S,className:cn$1("px-2 py-1.5 text-sm font-semibold",_),...v}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:_,children:v,...S},R)=>jsxRuntimeExports.jsxs(Item,{ref:R,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...S,children:[jsxRuntimeExports.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:v})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Separator,{ref:S,className:cn$1("-mx-1 my-1 h-px bg-muted",_),...v}));SelectSeparator.displayName=Separator.displayName;function normalize(_){return _.replace(/\s+/g,"")}function SimulationWithGraph({ast:_,startProcessName:v,initialViewMode:S,forceStructuralReduction:R}){const[T,A]=reactExports.useState(S||"id"),[k,M]=reactExports.useState(R??!1),[P,D]=reactExports.useState(v||(_.length>0?_[0].name:""));reactExports.useEffect(()=>{if(v){D(v);return}_.length>0?_.some(ne=>ne.name===P)||D(_[0].name):D("")},[_,v]),reactExports.useEffect(()=>{v&&D(v)},[v]),reactExports.useEffect(()=>{if(!S){const Q=localStorage.getItem("lts_view_mode");Q&&["id","mixed","full"].includes(Q)&&A(Q)}},[S]);const L=Q=>{A(Q),S||localStorage.setItem("lts_view_mode",Q)},q=useSimulation(_,P),B=reactExports.useMemo(()=>generateLTS(_,P,{maxDepth:50,maxStates:200,useStructuralReduction:k}),[_,P,k]),{nodeLabelMap:F,ccsToIdMap:j,initialNodeId:z}=reactExports.useMemo(()=>{const Q=new Map,ne=new Map;let ae=null;return B.forEach(oe=>{if(oe.data.source)return;const se=oe.data.id,ce=oe.data.ccs;if(!se||!ce)return;const de=normalize(ce);oe.data.isInitial&&(ae=se);let ye=se;T==="full"?ye=ce:T==="mixed"&&(ye=ce.length<15?ce:se),Q.set(ce,ye),ne.set(de,se)}),{nodeLabelMap:Q,ccsToIdMap:ne,initialNodeId:ae}},[B,T]),V=Q=>F.has(Q)?F.get(Q):T==="id"?"?":Q,G=reactExports.useMemo(()=>q.currentExpr?ccsToString(q.currentExpr,k):"",[q.currentExpr,k]);let W=j.get(normalize(G));!W&&q.history.length===0&&z&&(W=z);const[Y,X]=reactExports.useState(null),ee=reactExports.useMemo(()=>{if(Y===null)return null;const Q=q.availableTransitions.find(ce=>ce.id===Y);if(!Q)return null;const ne=ccsToString(Q.target,k),ae=q.currentExpr?ccsToString(q.currentExpr,k):"";let oe=j.get(normalize(ae));!oe&&q.history.length===0&&z&&(oe=z);const se=j.get(normalize(ne));return!oe||!se?null:{sourceId:oe,targetId:se,action:Q.action}},[Y,q.availableTransitions,q.currentExpr,k,j,z,q.history.length]),re=!W&&(q.history.length>0||!z);return jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-2 relative",children:[!v&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg border self-stretch",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase px-1",children:"Proces:"}),jsxRuntimeExports.jsxs(Select,{value:P,onValueChange:Q=>{D(Q),q.reset()},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px] max-w-64 bg-white h-8 text-sm",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Proces"})}),jsxRuntimeExports.jsx(SelectContent,{children:jsxRuntimeExports.jsx(SelectGroup,{className:"max-h-64",children:_.map(Q=>jsxRuntimeExports.jsx(SelectItem,{value:Q.name,children:Q.name},Q.name))})})]})]}),!S&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg border self-stretch",children:[jsxRuntimeExports.jsx(Settings,{size:16,className:"text-gray-500 ml-2 mr-1"}),["id","mixed","full"].map(Q=>jsxRuntimeExports.jsx("button",{onClick:()=>L(Q),className:`px-3 py-1 text-xs rounded-md transition-colors font-medium ${T===Q?"bg-white shadow text-indigo-600":"text-gray-600 hover:bg-gray-200"}`,children:Q==="id"?"ID":Q==="mixed"?"Mix":"CCS"},Q))]}),R===void 0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg border cursor-pointer hover:bg-gray-200 transition-colors px-3 self-stretch",onClick:()=>M(!k),children:[jsxRuntimeExports.jsx(Layers,{size:16,className:`${k?"text-indigo-600":"text-gray-400"}`}),jsxRuntimeExports.jsxs("span",{className:`text-xs font-medium ${k?"text-indigo-600":"text-gray-600"}`,children:["Strukturln redukce ",k?"(Zap)":"(Vyp)"]})]}),jsxRuntimeExports.jsx("div",{className:"grow"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400",children:["Stav: ",B.filter(Q=>!Q.data.source).length]})]}),jsxRuntimeExports.jsx("div",{className:"h-[600px]",children:jsxRuntimeExports.jsx(LTSGraph,{elements:B,activeNodeId:W||null,edgeHighlight:ee,viewMode:T})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0",children:jsxRuntimeExports.jsx(SimulationPanel,{currentCCS:G,transitions:q.availableTransitions,historyLength:q.history.length,onStep:q.step,onBack:q.back,onReset:q.reset,onTransitionHover:X,getTargetLabel:V,forceStructuralReduction:k,isOffGraph:re})})]})})}const badgeVariants=cva("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:_,variant:v,...S}){return jsxRuntimeExports.jsx("div",{className:cn$1(badgeVariants({variant:v}),_),...S})}var CHECKBOX_NAME="Checkbox",[createCheckboxContext]=createContextScope(CHECKBOX_NAME),[CheckboxProviderImpl,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME);function CheckboxProvider(_){const{__scopeCheckbox:v,checked:S,children:R,defaultChecked:T,disabled:A,form:k,name:M,onCheckedChange:P,required:D,value:L="on",internal_do_not_use_render:q}=_,[B,F]=useControllableState({prop:S,defaultProp:T??!1,onChange:P,caller:CHECKBOX_NAME}),[j,z]=reactExports.useState(null),[V,G]=reactExports.useState(null),W=reactExports.useRef(!1),Y=j?!!k||!!j.closest("form"):!0,X={checked:B,disabled:A,setChecked:F,control:j,setControl:z,name:M,form:k,value:L,hasConsumerStoppedPropagationRef:W,required:D,defaultChecked:isIndeterminate(T)?!1:T,isFormControl:Y,bubbleInput:V,setBubbleInput:G};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:v,...X,children:isFunction(q)?q(X):R})}var TRIGGER_NAME$1="CheckboxTrigger",CheckboxTrigger=reactExports.forwardRef(({__scopeCheckbox:_,onKeyDown:v,onClick:S,...R},T)=>{const{control:A,value:k,disabled:M,checked:P,required:D,setControl:L,setChecked:q,hasConsumerStoppedPropagationRef:B,isFormControl:F,bubbleInput:j}=useCheckboxContext(TRIGGER_NAME$1,_),z=useComposedRefs(T,L),V=reactExports.useRef(P);return reactExports.useEffect(()=>{const G=A?.form;if(G){const W=()=>q(V.current);return G.addEventListener("reset",W),()=>G.removeEventListener("reset",W)}},[A,q]),jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(P)?"mixed":P,"aria-required":D,"data-state":getState(P),"data-disabled":M?"":void 0,disabled:M,value:k,...R,ref:z,onKeyDown:composeEventHandlers(v,G=>{G.key==="Enter"&&G.preventDefault()}),onClick:composeEventHandlers(S,G=>{q(W=>isIndeterminate(W)?!0:!W),j&&F&&(B.current=G.isPropagationStopped(),B.current||G.stopPropagation())})})});CheckboxTrigger.displayName=TRIGGER_NAME$1;var Checkbox$1=reactExports.forwardRef((_,v)=>{const{__scopeCheckbox:S,name:R,checked:T,defaultChecked:A,required:k,disabled:M,value:P,onCheckedChange:D,form:L,...q}=_;return jsxRuntimeExports.jsx(CheckboxProvider,{__scopeCheckbox:S,checked:T,defaultChecked:A,disabled:M,required:k,onCheckedChange:D,name:R,form:L,value:P,internal_do_not_use_render:({isFormControl:B})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckboxTrigger,{...q,ref:v,__scopeCheckbox:S}),B&&jsxRuntimeExports.jsx(CheckboxBubbleInput,{__scopeCheckbox:S})]})})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((_,v)=>{const{__scopeCheckbox:S,forceMount:R,...T}=_,A=useCheckboxContext(INDICATOR_NAME,S);return jsxRuntimeExports.jsx(Presence,{present:R||isIndeterminate(A.checked)||A.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(A.checked),"data-disabled":A.disabled?"":void 0,...T,ref:v,style:{pointerEvents:"none",..._.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME;var BUBBLE_INPUT_NAME="CheckboxBubbleInput",CheckboxBubbleInput=reactExports.forwardRef(({__scopeCheckbox:_,...v},S)=>{const{control:R,hasConsumerStoppedPropagationRef:T,checked:A,defaultChecked:k,required:M,disabled:P,name:D,value:L,form:q,bubbleInput:B,setBubbleInput:F}=useCheckboxContext(BUBBLE_INPUT_NAME,_),j=useComposedRefs(S,F),z=usePrevious(A),V=useSize(R);reactExports.useEffect(()=>{const W=B;if(!W)return;const Y=window.HTMLInputElement.prototype,ee=Object.getOwnPropertyDescriptor(Y,"checked").set,re=!T.current;if(z!==A&&ee){const Q=new Event("click",{bubbles:re});W.indeterminate=isIndeterminate(A),ee.call(W,isIndeterminate(A)?!1:A),W.dispatchEvent(Q)}},[B,z,A,T]);const G=reactExports.useRef(isIndeterminate(A)?!1:A);return jsxRuntimeExports.jsx(Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:k??G.current,required:M,disabled:P,name:D,value:L,form:q,...v,tabIndex:-1,ref:j,style:{...v.style,...V,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CheckboxBubbleInput.displayName=BUBBLE_INPUT_NAME;function isFunction(_){return typeof _=="function"}function isIndeterminate(_){return _==="indeterminate"}function getState(_){return isIndeterminate(_)?"indeterminate":_?"checked":"unchecked"}const Checkbox=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx(Checkbox$1,{ref:S,className:cn$1("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",_),...v,children:jsxRuntimeExports.jsx(CheckboxIndicator,{className:cn$1("grid place-content-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Checkbox$1.displayName;const Input=reactExports.forwardRef(({className:_,type:v,...S},R)=>jsxRuntimeExports.jsx("input",{type:v,className:cn$1("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",_),ref:R,...S}));Input.displayName="Input";function ProofControls({step:_,onApplyRule:v,showHints:S}){const[R,T]=reactExports.useState("a"),[A,k]=reactExports.useState(!0),[M,P]=reactExports.useState(""),{type:D}=_.source,{label:L}=_.action,q=reactExports.useMemo(()=>{if(_.source.type!=="Relabeling")return[];const Q=_.action.label;if(Q==="tau")return["tau"];const ne=_.source.relabels,ae=ne.filter(ce=>ce.new===Q).map(ce=>ce.old),se=ne.some(ce=>ce.old===Q)?[]:[Q];return Array.from(new Set([...ae,...se]))},[_.source,_.action]);reactExports.useEffect(()=>{q.length>0&&P(q[0])},[q]);const[B,F]=reactExports.useState(""),[j,z]=reactExports.useState(""),[V,G]=reactExports.useState(!0),W=[{value:"ACT",label:"ACT (Prefix)"},{value:"SUM_LEFT",label:"SUM_L (Lev volba)"},{value:"SUM_RIGHT",label:"SUM_R (Prav volba)"},{value:"COM_LEFT",label:"COM_L (Paraleln vlevo)"},{value:"COM_RIGHT",label:"COM_R (Paraleln vpravo)"},{value:"COM_SYNC",label:"COM_SYNC (Synchronizace)"},{value:"RES",label:"RES (Restrikce)"},{value:"REL",label:"REL (Pejmenovn)"},{value:"CON",label:"CON (Konstanta)"}];reactExports.useEffect(()=>{F(""),z(""),G(!0)},[_.id]);const Y=B==="COM_SYNC"||B==="REL",X=B==="COM_SYNC",ee=()=>B==="COM_SYNC"?"Sync akce (nap. a)":B==="REL"?"Pvodn akce (old)":"Parametr",re=()=>{if(!B)return;let Q;B==="COM_SYNC"?Q={label:j,leftSends:V}:B==="REL"&&(Q={oldLabel:j}),v(_.id,B,Q)};return S?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[D==="Prefix"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"ACT"),children:"ACT"}),D==="Summation"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"SUM_LEFT"),children:"SUM Left"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"SUM_RIGHT"),children:"SUM Right"})]}),D==="Parallel"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"COM_LEFT"),children:"COM Left"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"COM_RIGHT"),children:"COM Right"}),L==="tau"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-secondary p-1 px-2 rounded-md border shadow ml-2",children:[jsxRuntimeExports.jsx(Badge,{className:"bg-white text-foreground hover:bg-accent hover:text-accent-foreground",children:"COM Sync"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-stone-800 pl-1",children:"na:"}),jsxRuntimeExports.jsx(Input,{className:"h-7 w-16 text-xs font-mono bg-white",value:R,onChange:Q=>T(Q.target.value),placeholder:"akce"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx(Checkbox,{id:`ls-${_.id}`,checked:A,onCheckedChange:Q=>k(Q)}),jsxRuntimeExports.jsx("label",{htmlFor:`ls-${_.id}`,className:"text-xs cursor-pointer select-none",children:"Lev posl"})]}),jsxRuntimeExports.jsx(Button,{size:"icon",className:"h-7 w-7",onClick:()=>v(_.id,"COM_SYNC",{label:R,leftSends:A}),children:jsxRuntimeExports.jsx(Check,{className:"h-3 w-3"})})]})]}),D==="Restriction"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"RES"),children:"RES"}),D==="Relabeling"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-secondary p-1 px-2 rounded-md border shadow",children:[jsxRuntimeExports.jsx(Badge,{className:"bg-white text-foreground hover:bg-accent hover:text-accent-foreground",children:"REL"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-stone-800 pl-1",children:"Pejm.:"}),q.length>0?jsxRuntimeExports.jsxs(Select,{value:M,onValueChange:P,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 w-24 text-xs bg-white",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:q.map(Q=>jsxRuntimeExports.jsx(SelectItem,{value:Q,children:Q},Q))})]}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-600 italic px-2",children:"dn shoda"}),jsxRuntimeExports.jsx(Button,{size:"icon",className:"h-7 w-7",onClick:()=>v(_.id,"REL",{oldLabel:M}),children:jsxRuntimeExports.jsx(Check,{className:"h-3 w-3"})})]}),D==="ProcessRef"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>v(_.id,"CON"),children:"CON"})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full",children:[jsxRuntimeExports.jsxs(Select,{value:B,onValueChange:Q=>F(Q),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-9 w-[180px] bg-white",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Vyberte pravidlo..."})}),jsxRuntimeExports.jsx(SelectContent,{children:W.map(Q=>jsxRuntimeExports.jsx(SelectItem,{value:Q.value,children:Q.label},Q.value))})]}),Y&&jsxRuntimeExports.jsx(Input,{className:"h-9 w-32 font-mono",placeholder:ee(),value:j,onChange:Q=>z(Q.target.value)}),X&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 border px-3 h-9 rounded-md bg-white",children:[jsxRuntimeExports.jsx(Checkbox,{id:`manual-ls-${_.id}`,checked:V,onCheckedChange:Q=>G(Q)}),jsxRuntimeExports.jsx("label",{htmlFor:`manual-ls-${_.id}`,className:"text-sm cursor-pointer select-none",children:"Left sends"})]}),jsxRuntimeExports.jsx(Button,{disabled:!B,onClick:re,children:"Aplikovat"})]})}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(_){const v=({children:S})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:S});return v.displayName=`${_}.Slottable`,v.__radixId=SLOTTABLE_IDENTIFIER,v}var[createTooltipContext]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=_=>{const{__scopeTooltip:v,delayDuration:S=DEFAULT_DELAY_DURATION,skipDelayDuration:R=300,disableHoverableContent:T=!1,children:A}=_,k=reactExports.useRef(!0),M=reactExports.useRef(!1),P=reactExports.useRef(0);return reactExports.useEffect(()=>{const D=P.current;return()=>window.clearTimeout(D)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:v,isOpenDelayedRef:k,delayDuration:S,onOpen:reactExports.useCallback(()=>{window.clearTimeout(P.current),k.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(P.current),P.current=window.setTimeout(()=>k.current=!0,R)},[R]),isPointerInTransitRef:M,onPointerInTransitChange:reactExports.useCallback(D=>{M.current=D},[]),disableHoverableContent:T,children:A})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=_=>{const{__scopeTooltip:v,children:S,open:R,defaultOpen:T,onOpenChange:A,disableHoverableContent:k,delayDuration:M}=_,P=useTooltipProviderContext(TOOLTIP_NAME,_.__scopeTooltip),D=usePopperScope(v),[L,q]=reactExports.useState(null),B=useId(),F=reactExports.useRef(0),j=k??P.disableHoverableContent,z=M??P.delayDuration,V=reactExports.useRef(!1),[G,W]=useControllableState({prop:R,defaultProp:T??!1,onChange:Q=>{Q?(P.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):P.onClose(),A?.(Q)},caller:TOOLTIP_NAME}),Y=reactExports.useMemo(()=>G?V.current?"delayed-open":"instant-open":"closed",[G]),X=reactExports.useCallback(()=>{window.clearTimeout(F.current),F.current=0,V.current=!1,W(!0)},[W]),ee=reactExports.useCallback(()=>{window.clearTimeout(F.current),F.current=0,W(!1)},[W]),re=reactExports.useCallback(()=>{window.clearTimeout(F.current),F.current=window.setTimeout(()=>{V.current=!0,W(!0),F.current=0},z)},[z,W]);return reactExports.useEffect(()=>()=>{F.current&&(window.clearTimeout(F.current),F.current=0)},[]),jsxRuntimeExports.jsx(Root2$2,{...D,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:v,contentId:B,open:G,stateAttribute:Y,trigger:L,onTriggerChange:q,onTriggerEnter:reactExports.useCallback(()=>{P.isOpenDelayedRef.current?re():X()},[P.isOpenDelayedRef,re,X]),onTriggerLeave:reactExports.useCallback(()=>{j?ee():(window.clearTimeout(F.current),F.current=0)},[ee,j]),onOpen:X,onClose:ee,disableHoverableContent:j,children:S})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((_,v)=>{const{__scopeTooltip:S,...R}=_,T=useTooltipContext(TRIGGER_NAME,S),A=useTooltipProviderContext(TRIGGER_NAME,S),k=usePopperScope(S),M=reactExports.useRef(null),P=useComposedRefs(v,M,T.onTriggerChange),D=reactExports.useRef(!1),L=reactExports.useRef(!1),q=reactExports.useCallback(()=>D.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",q),[q]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...k,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":T.open?T.contentId:void 0,"data-state":T.stateAttribute,...R,ref:P,onPointerMove:composeEventHandlers(_.onPointerMove,B=>{B.pointerType!=="touch"&&!L.current&&!A.isPointerInTransitRef.current&&(T.onTriggerEnter(),L.current=!0)}),onPointerLeave:composeEventHandlers(_.onPointerLeave,()=>{T.onTriggerLeave(),L.current=!1}),onPointerDown:composeEventHandlers(_.onPointerDown,()=>{T.open&&T.onClose(),D.current=!0,document.addEventListener("pointerup",q,{once:!0})}),onFocus:composeEventHandlers(_.onFocus,()=>{D.current||T.onOpen()}),onBlur:composeEventHandlers(_.onBlur,T.onClose),onClick:composeEventHandlers(_.onClick,T.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),TooltipPortal=_=>{const{__scopeTooltip:v,forceMount:S,children:R,container:T}=_,A=useTooltipContext(PORTAL_NAME,v);return jsxRuntimeExports.jsx(PortalProvider,{scope:v,forceMount:S,children:jsxRuntimeExports.jsx(Presence,{present:S||A.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:T,children:R})})})};TooltipPortal.displayName=PORTAL_NAME;var CONTENT_NAME="TooltipContent",TooltipContent$1=reactExports.forwardRef((_,v)=>{const S=usePortalContext(CONTENT_NAME,_.__scopeTooltip),{forceMount:R=S.forceMount,side:T="top",...A}=_,k=useTooltipContext(CONTENT_NAME,_.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:R||k.open,children:k.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:T,...A,ref:v}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:T,...A,ref:v})})}),TooltipContentHoverable=reactExports.forwardRef((_,v)=>{const S=useTooltipContext(CONTENT_NAME,_.__scopeTooltip),R=useTooltipProviderContext(CONTENT_NAME,_.__scopeTooltip),T=reactExports.useRef(null),A=useComposedRefs(v,T),[k,M]=reactExports.useState(null),{trigger:P,onClose:D}=S,L=T.current,{onPointerInTransitChange:q}=R,B=reactExports.useCallback(()=>{M(null),q(!1)},[q]),F=reactExports.useCallback((j,z)=>{const V=j.currentTarget,G={x:j.clientX,y:j.clientY},W=getExitSideFromRect(G,V.getBoundingClientRect()),Y=getPaddedExitPoints(G,W),X=getPointsFromRect(z.getBoundingClientRect()),ee=getHull([...Y,...X]);M(ee),q(!0)},[q]);return reactExports.useEffect(()=>()=>B(),[B]),reactExports.useEffect(()=>{if(P&&L){const j=V=>F(V,L),z=V=>F(V,P);return P.addEventListener("pointerleave",j),L.addEventListener("pointerleave",z),()=>{P.removeEventListener("pointerleave",j),L.removeEventListener("pointerleave",z)}}},[P,L,F,B]),reactExports.useEffect(()=>{if(k){const j=z=>{const V=z.target,G={x:z.clientX,y:z.clientY},W=P?.contains(V)||L?.contains(V),Y=!isPointInPolygon(G,k);W?B():Y&&(B(),D())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[P,L,k,D,B]),jsxRuntimeExports.jsx(TooltipContentImpl,{..._,ref:A})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((_,v)=>{const{__scopeTooltip:S,children:R,"aria-label":T,onEscapeKeyDown:A,onPointerDownOutside:k,...M}=_,P=useTooltipContext(CONTENT_NAME,S),D=usePopperScope(S),{onClose:L}=P;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,L),()=>document.removeEventListener(TOOLTIP_OPEN,L)),[L]),reactExports.useEffect(()=>{if(P.trigger){const q=B=>{B.target?.contains(P.trigger)&&L()};return window.addEventListener("scroll",q,{capture:!0}),()=>window.removeEventListener("scroll",q,{capture:!0})}},[P.trigger,L]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:A,onPointerDownOutside:k,onFocusOutside:q=>q.preventDefault(),onDismiss:L,children:jsxRuntimeExports.jsxs(Content,{"data-state":P.stateAttribute,...D,...M,ref:v,style:{...M.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:R}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:S,isInside:!0,children:jsxRuntimeExports.jsx(Root,{id:P.contentId,role:"tooltip",children:T||R})})]})})});TooltipContent$1.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((_,v)=>{const{__scopeTooltip:S,...R}=_,T=usePopperScope(S);return useVisuallyHiddenContentContext(ARROW_NAME,S).isInside?null:jsxRuntimeExports.jsx(Arrow,{...T,...R,ref:v})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(_,v){const S=Math.abs(v.top-_.y),R=Math.abs(v.bottom-_.y),T=Math.abs(v.right-_.x),A=Math.abs(v.left-_.x);switch(Math.min(S,R,T,A)){case A:return"left";case T:return"right";case S:return"top";case R:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(_,v,S=5){const R=[];switch(v){case"top":R.push({x:_.x-S,y:_.y+S},{x:_.x+S,y:_.y+S});break;case"bottom":R.push({x:_.x-S,y:_.y-S},{x:_.x+S,y:_.y-S});break;case"left":R.push({x:_.x+S,y:_.y-S},{x:_.x+S,y:_.y+S});break;case"right":R.push({x:_.x-S,y:_.y-S},{x:_.x-S,y:_.y+S});break}return R}function getPointsFromRect(_){const{top:v,right:S,bottom:R,left:T}=_;return[{x:T,y:v},{x:S,y:v},{x:S,y:R},{x:T,y:R}]}function isPointInPolygon(_,v){const{x:S,y:R}=_;let T=!1;for(let A=0,k=v.length-1;A<v.length;k=A++){const M=v[A],P=v[k],D=M.x,L=M.y,q=P.x,B=P.y;L>R!=B>R&&S<(q-D)*(R-L)/(B-L)+D&&(T=!T)}return T}function getHull(_){const v=_.slice();return v.sort((S,R)=>S.x<R.x?-1:S.x>R.x?1:S.y<R.y?-1:S.y>R.y?1:0),getHullPresorted(v)}function getHullPresorted(_){if(_.length<=1)return _.slice();const v=[];for(let R=0;R<_.length;R++){const T=_[R];for(;v.length>=2;){const A=v[v.length-1],k=v[v.length-2];if((A.x-k.x)*(T.y-k.y)>=(A.y-k.y)*(T.x-k.x))v.pop();else break}v.push(T)}v.pop();const S=[];for(let R=_.length-1;R>=0;R--){const T=_[R];for(;S.length>=2;){const A=S[S.length-1],k=S[S.length-2];if((A.x-k.x)*(T.y-k.y)>=(A.y-k.y)*(T.x-k.x))S.pop();else break}S.push(T)}return S.pop(),v.length===1&&S.length===1&&v[0].x===S[0].x&&v[0].y===S[0].y?v:v.concat(S)}var Provider=TooltipProvider$1,Root3=Tooltip$1,Trigger=TooltipTrigger$1,Portal=TooltipPortal,Content2=TooltipContent$1;const TooltipProvider=Provider,Tooltip=Root3,TooltipTrigger=Trigger,TooltipContent=reactExports.forwardRef(({className:_,sideOffset:v=4,...S},R)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Content2,{ref:R,sideOffset:v,className:cn$1("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",_),...S})}));TooltipContent.displayName=Content2.displayName;function DivHover({hoverContent:_,...v}){return jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{delayDuration:250,disableHoverableContent:!0,children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx("div",{...v})}),jsxRuntimeExports.jsx(TooltipContent,{children:_})]})})}function ButtonHover({hoverContent:_,...v}){return jsxRuntimeExports.jsx(DivHover,{hoverContent:_,children:jsxRuntimeExports.jsx(Button,{...v})})}function getStatusStyle(_){switch(_){case"proved":return"border-y-green-300 border-r-green-300 bg-green-50/50";case"invalid":return"border-y-red-300 border-r-red-300 bg-red-50/50";default:return"border-l-4 border-l-transparent border-gray-200 bg-white"}}function ProofNode({step:_,program:v,showHints:S,depth:R,onApplyRule:T,onReset:A}){return jsxRuntimeExports.jsxs("div",{className:"relative group",children:[R>0&&jsxRuntimeExports.jsx("div",{className:"absolute left-[-16px] top-6 w-[15px] h-px bg-gray-300 hidden md:block"}),jsxRuntimeExports.jsx("div",{className:cn$1("mb-2 relative animate-in fade-in transition-all duration-300 z-10 shadow-xs rounded-lg overflow-hidden border-y border-r bg-card",getStatusStyle(_.status)),children:jsxRuntimeExports.jsxs("div",{className:"flex items-stretch",children:[jsxRuntimeExports.jsx("div",{className:cn$1("w-1 shrink-0",_.status==="proved"?"bg-green-500":_.status==="invalid"?"bg-red-500":"bg-primary")}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center px-1 gap-x-2 font-mono",children:[jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(_.source),className:"w-auto! wrap-break-word p-1"}),jsxRuntimeExports.jsxs("span",{className:"shrink-0",children:[" ",jsxRuntimeExports.jsx("span",{className:`text-[#1976d2] ${_.action.isOutput?"overline":""}`,children:_.action.isOutput?`'${_.action.label}`:_.action.label})," "]}),jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(_.target),className:"w-auto! wrap-break-word p-1"})]}),_.status==="proved"&&jsxRuntimeExports.jsx(AlertBox,{type:"success",className:"border-none shadow-none bg-green-100",children:"Dokzno"}),_.status==="invalid"&&jsxRuntimeExports.jsx(AlertBox,{type:"error",className:"border-none shadow-none bg-red-100",children:_.errorMessage})]}),jsxRuntimeExports.jsx("div",{className:"min-h-[40px] flex items-center",children:_.status==="pending"?jsxRuntimeExports.jsx("div",{className:"w-full animate-in fade-in duration-300",children:jsxRuntimeExports.jsx(ProofControls,{step:_,onApplyRule:T,showHints:S})}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between w-full animate-in slide-in-from-left-2 duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 font-mono",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-foreground/90 shrink-0",children:"Pouit pravidlo:"}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"px-3 py-1 border-stone-300 bg-stone-100",children:_.appliedRule})]}),jsxRuntimeExports.jsx(ButtonHover,{variant:"ghost",size:"sm",onClick:()=>A(_.id),className:"h-8 w-8 p-0 border border-stone-300 bg-stone-100 hover:bg-stone-200",hoverContent:"Resetovat tento krok",children:jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4"})})]})})]})]})}),_.children.length>0&&jsxRuntimeExports.jsxs("div",{className:"pl-4 md:pl-8 space-y-2 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-2 md:left-4 -top-2 bottom-4 w-px bg-gray-300 border-l border-gray-300"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-muted-foreground uppercase tracking-wider font-semibold pl-2",children:[jsxRuntimeExports.jsx(CornerDownRight,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-[1rem]",children:_.appliedRule})]}),_.children.map(k=>jsxRuntimeExports.jsx(ProofNode,{step:k,program:v,showHints:S,depth:R+1,onApplyRule:T,onReset:A},k.id))]})]})}function getStatusColor(_){switch(_){case"proved":return"bg-green-50 text-green-600 font-bold";case"invalid":return"bg-red-50 text-red-600 font-bold";default:return"bg-stone-100"}}function ProofBuilder({initialSource:_,initialTarget:v,initialAction:S,program:R,showHints:T}){const[A,k]=reactExports.useState({id:"root",source:_,target:v,action:S,status:"pending",children:[]});reactExports.useEffect(()=>{k({id:"root",source:_,target:v,action:S,status:"pending",children:[]})},[_,v,S]);const M=B=>{const F=B.children.map(M),j={...B,children:F};if(j.status=="pending"&&j.children.length>0){if(j.children.some(z=>z.status==="invalid"))return{...j,status:"invalid",errorMessage:"Premisa selhala."};if(j.children.every(z=>z.status==="proved"))return{...j,status:"proved"}}return(j.status==="proved"||j.status==="invalid")&&j.appliedRule!=="ACT"&&j.children.some(V=>V.status==="pending")?{...j,status:"pending",errorMessage:void 0}:j},P=(B,F,j)=>B.id===F?j(B):{...B,children:B.children.map(z=>P(z,F,j))},D=(B,F,j)=>{k(z=>{const V=P(z,B,G=>{const W={...G,appliedRule:F},{source:Y,target:X,action:ee}=G,re=ae=>({...W,status:"invalid",errorMessage:ae,children:[]}),Q=()=>({...W,status:"proved",children:[]}),ne=(ae,oe,se)=>({...W,children:[q(ae,oe,se)]});if(F==="ACT")return Y.type!=="Prefix"?re("Zdroj nem prefix."):areActionsEqual(Y.action,ee)?areProcessesEqual(Y.next,X)?Q():re("Vsledn proces nesed."):re(`Akce se neshoduje (${Y.action.label} vs ${ee.label}).`);if(F==="SUM_LEFT")return Y.type!=="Summation"?re("Nejedn se o sumu."):ne(Y.left,X,ee);if(F==="SUM_RIGHT")return Y.type!=="Summation"?re("Nejedn se o sumu."):ne(Y.right,X,ee);if(F==="COM_LEFT")return Y.type!=="Parallel"||X.type!=="Parallel"?re("Nejedn se o paraleln proces."):areProcessesEqual(Y.right,X.right)?ne(Y.left,X.left,ee):re("Prav strana se zmnila.");if(F==="COM_RIGHT")return Y.type!=="Parallel"||X.type!=="Parallel"?re("Nejedn se o paraleln proces."):areProcessesEqual(Y.left,X.left)?ne(Y.right,X.right,ee):re("Lev strana se zmnila.");if(F==="COM_SYNC"){if(Y.type!=="Parallel"||X.type!=="Parallel")return re("Nejedn se o paraleln proces.");if(ee.label!=="tau")return re("Synchronizace mus vst na tau akci.");const ae=j?.label,oe=j?.leftSends;return ae?{...W,children:[q(Y.left,X.left,{label:ae,isOutput:oe}),q(Y.right,X.right,{label:ae,isOutput:!oe})]}:re("Chyb synchronizan akce.")}if(F==="CON"){if(Y.type!=="ProcessRef")return re("Nejedn se o odkaz na proces.");const ae=findDefinition(Y.name,R);return ae?ne(ae,X,ee):re(`Definice ${Y.name} nenalezena.`)}if(F==="RES"){if(Y.type!=="Restriction"||X.type!=="Restriction")return re("Neshoda v restrikci.");if(Y.labels.includes(ee.label))return re(`Akce '${ee.label}' je restrikc zakzna.`);const ae=[...Y.labels].sort(),oe=[...X.labels].sort();return ae.join(",")!==oe.join(",")?re("Restrikn mnoina se nesm mnit."):ne(Y.process,X.process,ee)}if(F==="REL"){if(Y.type!=="Relabeling"||X.type!=="Relabeling")return re("Nejedn se o pejmenovn.");const ae=j?.oldLabel;if(!ae&&ee.label!=="tau")return re("Nebyla vybrna pvodn akce.");const oe=[...Y.relabels].sort(),se=[...X.relabels].sort();if(oe.map(de=>de.old+"/"+de.new).join(",")!==se.map(de=>de.old+"/"+de.new).join(","))return re("Sada pejmenovn se nesm mnit.");let ce;if(ee.label==="tau")ce={label:"tau",isOutput:!1};else{ce={label:ae,isOutput:ee.isOutput};const de=Y.relabels.find(we=>we.old===ae),ye=de?de.new:ae;if(ye!==ee.label)return re(`Neplatn pejmenovn (${ae} -> ${ye}).`)}return ne(Y.process,X.process,ce)}return re("Neznm pravidlo.")});return M(V)})},L=B=>{k(F=>{const j=P(F,B,z=>({...z,status:"pending",appliedRule:void 0,errorMessage:void 0,children:[]}));return M(j)})},q=(B,F,j)=>({id:Math.random().toString(36).substr(2,9),source:B,target:F,action:j,status:"pending",children:[]});return jsxRuntimeExports.jsxs("div",{className:"md:shadow rounded-xl md:border border-stone-300 animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 px-4 mx-0 md:mx-4 mb-2 flex justify-between items-center flex-wrap gap-2 rounded-lg md:rounded-none border md:border-0 md:border-b border-stone-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap font-mono",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-foreground/90 shrink-0",children:"Dokazujete:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center px-1 gap-x-2 font-mono border border-primary/10 bg-primary/5 rounded-md",children:[jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(_),className:"w-auto! wrap-break-word p-1"}),jsxRuntimeExports.jsxs("span",{className:"shrink-0",children:[" ",jsxRuntimeExports.jsx("span",{className:`text-[#1976d2] ${S.isOutput?"overline":""}`,children:S.isOutput?`'${S.label}`:S.label})," "]}),jsxRuntimeExports.jsx(CCSViewer,{code:ccsToString(v),className:"w-auto! wrap-break-word p-1"})]})]}),jsxRuntimeExports.jsx("div",{className:cn$1("text-xs text-gray-500 p-2 rounded-md uppercase",getStatusColor(A.status)),children:A.status==="proved"?"Dokzno":A.status==="invalid"?"Chyba dkazu":"Probh"})]}),jsxRuntimeExports.jsx("div",{className:"p-2 px-0 md:px-4 mx-0 md:mx-4 my-2",children:jsxRuntimeExports.jsx(ProofNode,{step:A,program:R,onApplyRule:D,onReset:L,showHints:T,depth:0})})]})}function parseCCSAction(_){if(!_||_.trim()==="")return{error:"Akce nesm bt przdn"};const v=_.trim(),S=v.startsWith("'"),R=S?v.substring(1):v;return R==="tau"||R===""?S?{error:"Tau neme bt vstupn akc"}:{label:"tau",isOutput:!1}:/^[a-z][a-z0-9_]*$/.test(R)?{label:R,isOutput:S}:{error:"Neplatn nzev akce"}}function getExpressionByName(_,v){return _.find(S=>S.name===v)?.process}function ProofWrapper({program:_}){const[v,S]=reactExports.useState(_[0].name),[R,T]=reactExports.useState(_[0].name),[A,k]=reactExports.useState("a"),[M,P]=reactExports.useState(null),[D,L]=reactExports.useState(null),[q,B]=reactExports.useState(!0);reactExports.useEffect(()=>{const z=localStorage.getItem("sos-proof-hints");z!==null&&B(JSON.parse(z))},[]),reactExports.useEffect(()=>{localStorage.setItem("sos-proof-hints",JSON.stringify(q))},[q]),reactExports.useEffect(()=>{_.length>0?_.some(V=>V.name===v)||S(_[0].name):S("")},[_,v]),reactExports.useEffect(()=>{_.length>0?_.some(V=>V.name===R)||T(_[0].name):T("")},[_,R]);const F=()=>{L(null),P(null)},j=()=>{F();const z=getExpressionByName(_,v),V=getExpressionByName(_,R),G=parseCCSAction(A);if("error"in G){P(G.error);return}if(!z||!V){P(`Proces ${z?R:v} neexistuje.`);return}P(null),L({program:_,source:z,target:V,action:G})};return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("div",{children:M&&jsxRuntimeExports.jsx(AlertBox,{type:"error",children:M})}),jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 bg-gray-100 rounded-lg border cursor-pointer hover:bg-gray-200 transition-colors px-3 py-2",onClick:()=>B(!q),children:[jsxRuntimeExports.jsx(Lightbulb,{size:16,className:`${q?"text-indigo-600":"text-gray-400"}`}),jsxRuntimeExports.jsxs("span",{className:`text-xs font-medium ${q?"text-indigo-600":"text-gray-600"}`,children:["Interaktivn npovda ",q?"(Zap)":"(Vyp)"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-end flex-wrap md:flex-nowrap mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"pl-1 text-sm font-semibold",children:"Poten proces"}),jsxRuntimeExports.jsxs(Select,{value:v,onValueChange:z=>S(z),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:jsxRuntimeExports.jsx(SelectGroup,{className:"max-h-64",children:_.map(z=>jsxRuntimeExports.jsx(SelectItem,{value:z.name,children:z.name},z.name))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-48 space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"pl-1 text-sm font-semibold",children:"Akce"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Input,{value:A,onChange:z=>k(z.target.value),className:"font-mono text-center pl-6 pr-6"}),jsxRuntimeExports.jsx("span",{className:"absolute left-2 top-1.5 text-muted-foreground",children:""}),jsxRuntimeExports.jsx("span",{className:"absolute right-2 top-1.5 text-muted-foreground",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"pl-1 text-sm font-semibold",children:"Clov proces"}),jsxRuntimeExports.jsxs(Select,{value:R,onValueChange:z=>T(z),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:jsxRuntimeExports.jsx(SelectGroup,{className:"max-h-64",children:_.map(z=>jsxRuntimeExports.jsx(SelectItem,{value:z.name,children:z.name},z.name))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pb-0.5",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:F,size:"icon",title:"Resetovat",children:jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs(Button,{onClick:j,className:"w-32",children:[jsxRuntimeExports.jsx(ChartGantt,{className:"h-4 w-4 mr-2"}),"Dokzat"]})]})]}),D&&jsxRuntimeExports.jsx(ProofBuilder,{showHints:q,initialSource:D.source,initialTarget:D.target,initialAction:D.action,program:D.program})]})}var cytoscapeSvg={exports:{}},hasRequiredCytoscapeSvg;function requireCytoscapeSvg(){return hasRequiredCytoscapeSvg||(hasRequiredCytoscapeSvg=1,(function(_,v){(function(S,R){_.exports=R()})(window,(function(){return(function(S){var R={};function T(A){if(R[A])return R[A].exports;var k=R[A]={i:A,l:!1,exports:{}};return S[A].call(k.exports,k,k.exports,T),k.l=!0,k.exports}return T.m=S,T.c=R,T.d=function(A,k,M){T.o(A,k)||Object.defineProperty(A,k,{enumerable:!0,get:M})},T.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},T.t=function(A,k){if(1&k&&(A=T(A)),8&k||4&k&&typeof A=="object"&&A&&A.__esModule)return A;var M=Object.create(null);if(T.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:A}),2&k&&typeof A!="string")for(var P in A)T.d(M,P,(function(D){return A[D]}).bind(null,P));return M},T.n=function(A){var k=A&&A.__esModule?function(){return A.default}:function(){return A};return T.d(k,"a",k),k},T.o=function(A,k){return Object.prototype.hasOwnProperty.call(A,k)},T.p="",T(T.s=0)})([function(S,R,T){var A=T(1),k=function(M){M&&M("core","svg",A.svg)};typeof cytoscape<"u"&&k(cytoscape),S.exports=k},function(S,R,T){var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},k=T(2),M={},P={};P.number=function(D){return D!=null&&(D===void 0?"undefined":A(D))===A(1)&&!isNaN(D)},M.bufferCanvasImage=function(D,L){var q=L.renderer().usePaths;L.renderer().usePaths=function(){return!1},L.elements().forEach((function(se){se._private.rscratch.pathCacheKey=null,se._private.rscratch.pathCache=null}));var B=L.renderer(),F=L.mutableElements().boundingBox(),j=B.findContainerClientCoords(),z=D.full?Math.ceil(F.w):j[2],V=D.full?Math.ceil(F.h):j[3],G=P.number(D.maxWidth)||P.number(D.maxHeight),W=B.getPixelRatio(),Y=1;if(D.scale!==void 0)z*=D.scale,V*=D.scale,Y=D.scale;else if(G){var X=1/0,ee=1/0;P.number(D.maxWidth)&&(X=Y*D.maxWidth/z),P.number(D.maxHeight)&&(ee=Y*D.maxHeight/V),z*=Y=Math.min(X,ee),V*=Y}G||(z*=W,V*=W,Y*=W);var re=null,Q=re=new k(z,V);if(z>0&&V>0){re.clearRect(0,0,z,V),D.bg&&(re.globalCompositeOperation="destination-over",re.fillStyle=D.bg,re.fillRect(0,0,z,V)),re.globalCompositeOperation="source-over";var ne=B.getCachedZSortedEles();if(D.full)re.translate(-F.x1*Y,-F.y1*Y),re.scale(Y,Y),B.drawElements(re,ne),re.scale(1/Y,1/Y),re.translate(F.x1*Y,F.y1*Y);else{var ae=L.pan(),oe={x:ae.x*Y,y:ae.y*Y};Y*=L.zoom(),re.translate(oe.x,oe.y),re.scale(Y,Y),B.drawElements(re,ne),re.scale(1/Y,1/Y),re.translate(-oe.x,-oe.y)}}return L.renderer().usePaths=q,Q},M.svg=function(D){return M.bufferCanvasImage(D||{},this).getSerializedSvg()},S.exports=M},function(S,R,T){(function(){var A,k,M,P,D;function L(j,z){var V,G=Object.keys(z);for(V=0;V<G.length;V++)j=j.replace(new RegExp("\\{"+G[V]+"\\}","gi"),z[G[V]]);return j}function q(j){var z,V,G;if(!j)throw new Error("cannot create a random attribute name for an undefined object");z="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",V="";do for(V="",G=0;G<12;G++)V+=z[Math.floor(Math.random()*z.length)];while(j[V]);return V}function B(j){var z={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return z[j]||z.alphabetic}D=(function(j,z){var V,G,W,Y={};for(j=j.split(","),z=z||10,V=0;V<j.length;V+=2)G="&"+j[V+1]+";",W=parseInt(j[V],z),Y[G]="&#"+W+";";return Y["\\xa0"]="&#160;",Y})("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),A={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(M=function(j,z){this.__root=j,this.__ctx=z}).prototype.addColorStop=function(j,z){var V,G=this.__ctx.__createElement("stop");G.setAttribute("offset",j),z.indexOf("rgba")!==-1?(V=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(z),G.setAttribute("stop-color",L("rgb({r},{g},{b})",{r:V[1],g:V[2],b:V[3]})),G.setAttribute("stop-opacity",V[4])):G.setAttribute("stop-color",z),this.__root.appendChild(G)},P=function(j,z){this.__root=j,this.__ctx=z},(k=function(j){var z,V={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((z=V).width=arguments[0],z.height=arguments[1]):z=j||V,!(this instanceof k))return new k(z);this.width=z.width||V.width,this.height=z.height||V.height,this.enableMirroring=z.enableMirroring!==void 0?z.enableMirroring:V.enableMirroring,this.canvas=this,this.__document=z.document||document,z.ctx?this.__ctx=z.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(j,z,V){z===void 0&&(z={});var G,W,Y=this.__document.createElementNS("http://www.w3.org/2000/svg",j),X=Object.keys(z);for(V&&(Y.setAttribute("fill","none"),Y.setAttribute("stroke","none")),G=0;G<X.length;G++)W=X[G],Y.setAttribute(W,z[W]);return Y},k.prototype.__setDefaultStyles=function(){var j,z,V=Object.keys(A);for(j=0;j<V.length;j++)this[z=V[j]]=A[z].canvas},k.prototype.__applyStyleState=function(j){if(j){var z,V,G=Object.keys(j);for(z=0;z<G.length;z++)this[V=G[z]]=j[V]}},k.prototype.__getStyleState=function(){var j,z,V={},G=Object.keys(A);for(j=0;j<G.length;j++)V[z=G[j]]=this[z];return V},k.prototype.__applyStyleToCurrentElement=function(j){var z=this.__currentElement;this.__currentElementsToStyle;var V,G,W,Y,X,ee=Object.keys(A);for(V=0;V<ee.length;V++)if(G=A[ee[V]],W=this[ee[V]],G.apply){if(W instanceof P){if(W.__ctx)for(;W.__ctx.__defs.childNodes.length;)Y=W.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[Y]=Y,this.__defs.appendChild(W.__ctx.__defs.childNodes[0]);z.setAttribute(G.apply,L("url(#{id})",{id:W.__root.getAttribute("id")}))}else if(W instanceof M)z.setAttribute(G.apply,L("url(#{id})",{id:W.__root.getAttribute("id")}));else if(G.apply.indexOf(j)!==-1&&G.svg!==W)if(G.svgAttr!=="stroke"&&G.svgAttr!=="fill"||W.indexOf("rgba")===-1){var re=G.svgAttr;if(ee[V]==="globalAlpha"&&(re=j+"-"+G.svgAttr,z.getAttribute(re)))continue;z.setAttribute(re,W)}else{X=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(W),z.setAttribute(G.svgAttr,L("rgb({r},{g},{b})",{r:X[1],g:X[2],b:X[3]}));var Q=X[4],ne=this.globalAlpha;ne!=null&&(Q*=ne),z.setAttribute(G.svgAttr+"-opacity",Q)}}},k.prototype.__closestGroupOrSvg=function(j){return(j=j||this.__currentElement).nodeName==="g"||j.nodeName==="svg"?j:this.__closestGroupOrSvg(j.parentNode)},k.prototype.getSerializedSvg=function(j){var z,V,G,W,Y,X=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(X)&&(X=X.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),j)for(z=Object.keys(D),V=0;V<z.length;V++)G=z[V],W=D[G],(Y=new RegExp(G,"gi")).test(X)&&(X=X.replace(Y,W));return X},k.prototype.getSvg=function(){return this.__root},k.prototype.save=function(){var j=this.__createElement("g"),z=this.__closestGroupOrSvg();this.__groupStack.push(z),z.appendChild(j),this.__currentElement=j,this.__stack.push(this.__getStyleState())},k.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var j=this.__stack.pop();this.__applyStyleState(j)},k.prototype.__addTransform=function(j){var z=this.__closestGroupOrSvg();if(z.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:z,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var V=this.__createElement("g");z.appendChild(V),this.__currentElement=V}var G=this.__currentElement.getAttribute("transform");G?G+=" ":G="",G+=j,this.__currentElement.setAttribute("transform",G)},k.prototype.scale=function(j,z){z===void 0&&(z=j),this.__addTransform(L("scale({x},{y})",{x:j,y:z}))},k.prototype.rotate=function(j){var z=180*j/Math.PI;this.__addTransform(L("rotate({angle},{cx},{cy})",{angle:z,cx:0,cy:0}))},k.prototype.translate=function(j,z){this.__addTransform(L("translate({x},{y})",{x:j,y:z}))},k.prototype.transform=function(j,z,V,G,W,Y){this.__addTransform(L("matrix({a},{b},{c},{d},{e},{f})",{a:j,b:z,c:V,d:G,e:W,f:Y}))},k.prototype.beginPath=function(){var j;this.__currentDefaultPath="",this.__currentPosition={},j=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(j),this.__currentElement=j},k.prototype.__applyCurrentDefaultPath=function(){var j=this.__currentElement;j.nodeName==="path"?j.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",j.nodeName)},k.prototype.__addPathCommand=function(j){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=j},k.prototype.moveTo=function(j,z){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:j,y:z},this.__addPathCommand(L("M {x} {y}",{x:j,y:z}))},k.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},k.prototype.lineTo=function(j,z){this.__currentPosition={x:j,y:z},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(L("L {x} {y}",{x:j,y:z})):this.__addPathCommand(L("M {x} {y}",{x:j,y:z}))},k.prototype.bezierCurveTo=function(j,z,V,G,W,Y){this.__currentPosition={x:W,y:Y},this.__addPathCommand(L("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:j,cp1y:z,cp2x:V,cp2y:G,x:W,y:Y}))},k.prototype.quadraticCurveTo=function(j,z,V,G){this.__currentPosition={x:V,y:G},this.__addPathCommand(L("Q {cpx} {cpy} {x} {y}",{cpx:j,cpy:z,x:V,y:G}))};var F=function(j){var z=Math.sqrt(j[0]*j[0]+j[1]*j[1]);return[j[0]/z,j[1]/z]};k.prototype.arcTo=function(j,z,V,G,W){var Y=this.__currentPosition&&this.__currentPosition.x,X=this.__currentPosition&&this.__currentPosition.y;if(Y!==void 0&&X!==void 0){if(W<0)throw new Error("IndexSizeError: The radius provided ("+W+") is negative.");if(Y===j&&X===z||j===V&&z===G||W===0)this.lineTo(j,z);else{var ee=F([Y-j,X-z]),re=F([V-j,G-z]);if(ee[0]*re[1]!=ee[1]*re[0]){var Q=ee[0]*re[0]+ee[1]*re[1],ne=Math.acos(Math.abs(Q)),ae=F([ee[0]+re[0],ee[1]+re[1]]),oe=W/Math.sin(ne/2),se=j+oe*ae[0],ce=z+oe*ae[1],de=[-ee[1],ee[0]],ye=[re[1],-re[0]],we=function(be){var ke=be[0];return be[1]>=0?Math.acos(ke):-Math.acos(ke)},ge=we(de),ve=we(ye);this.lineTo(se+de[0]*W,ce+de[1]*W),this.arc(se,ce,W,ge,ve)}else this.lineTo(j,z)}}},k.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},k.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},k.prototype.rect=function(j,z,V,G){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(j,z),this.lineTo(j+V,z),this.lineTo(j+V,z+G),this.lineTo(j,z+G),this.lineTo(j,z),this.closePath()},k.prototype.fillRect=function(j,z,V,G){var W;W=this.__createElement("rect",{x:j,y:z,width:V,height:G},!0),this.__closestGroupOrSvg().appendChild(W),this.__currentElement=W,this.__applyStyleToCurrentElement("fill")},k.prototype.strokeRect=function(j,z,V,G){var W;W=this.__createElement("rect",{x:j,y:z,width:V,height:G},!0),this.__closestGroupOrSvg().appendChild(W),this.__currentElement=W,this.__applyStyleToCurrentElement("stroke")},k.prototype.__clearCanvas=function(){for(var j=this.__closestGroupOrSvg().getAttribute("transform"),z=this.__root.childNodes[1],V=z.childNodes,G=V.length-1;G>=0;G--)V[G]&&z.removeChild(V[G]);this.__currentElement=z,this.__groupStack=[],j&&this.__addTransform(j)},k.prototype.clearRect=function(j,z,V,G){if(j!==0||z!==0||V!==this.width||G!==this.height){var W,Y=this.__closestGroupOrSvg();W=this.__createElement("rect",{x:j,y:z,width:V,height:G,fill:"#FFFFFF"},!0),Y.appendChild(W)}else this.__clearCanvas()},k.prototype.createLinearGradient=function(j,z,V,G){var W=this.__createElement("linearGradient",{id:q(this.__ids),x1:j+"px",x2:V+"px",y1:z+"px",y2:G+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(W),new M(W,this)},k.prototype.createRadialGradient=function(j,z,V,G,W,Y){var X=this.__createElement("radialGradient",{id:q(this.__ids),cx:G+"px",cy:W+"px",r:Y+"px",fx:j+"px",fy:z+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(X),new M(X,this)},k.prototype.__parseFont=function(){var j=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),z={style:j[1]||"normal",size:j[4]||"10px",family:j[6]||"sans-serif",weight:j[3]||"normal",decoration:j[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(z.decoration="underline"),this.__fontHref&&(z.href=this.__fontHref),z},k.prototype.__wrapTextLink=function(j,z){if(j.href){var V=this.__createElement("a");return V.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j.href),V.appendChild(z),V}return z},k.prototype.__applyText=function(j,z,V,G){var W,Y,X=this.__parseFont(),ee=this.__closestGroupOrSvg(),re=this.__createElement("text",{"font-family":X.family,"font-size":X.size,"font-style":X.style,"font-weight":X.weight,"text-decoration":X.decoration,x:z,y:V,"text-anchor":(W=this.textAlign,Y={left:"start",right:"end",center:"middle",start:"start",end:"end"},Y[W]||Y.start),"dominant-baseline":B(this.textBaseline)},!0);re.appendChild(this.__document.createTextNode(j)),this.__currentElement=re,this.__applyStyleToCurrentElement(G),ee.appendChild(this.__wrapTextLink(X,re))},k.prototype.fillText=function(j,z,V){this.__applyText(j,z,V,"fill")},k.prototype.strokeText=function(j,z,V){this.__applyText(j,z,V,"stroke")},k.prototype.measureText=function(j){return this.__ctx.font=this.font,this.__ctx.measureText(j)},k.prototype.arc=function(j,z,V,G,W,Y){if(G!==W){(G%=2*Math.PI)===(W%=2*Math.PI)&&(W=(W+2*Math.PI-.001*(Y?-1:1))%(2*Math.PI));var X=j+V*Math.cos(W),ee=z+V*Math.sin(W),re=j+V*Math.cos(G),Q=z+V*Math.sin(G),ne=Y?0:1,ae=0,oe=W-G;oe<0&&(oe+=2*Math.PI),ae=Y?oe>Math.PI?0:1:oe>Math.PI?1:0,this.lineTo(re,Q),this.__addPathCommand(L("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:V,ry:V,xAxisRotation:0,largeArcFlag:ae,sweepFlag:ne,endX:X,endY:ee})),this.__currentPosition={x:X,y:ee}}},k.prototype.clip=function(){var j=this.__closestGroupOrSvg(),z=this.__createElement("clipPath"),V=q(this.__ids),G=this.__createElement("g");this.__applyCurrentDefaultPath(),j.removeChild(this.__currentElement),z.setAttribute("id",V),z.appendChild(this.__currentElement),this.__defs.appendChild(z),j.setAttribute("clip-path",L("url(#{id})",{id:V})),j.appendChild(G),this.__currentElement=G},k.prototype.drawImage=function(){var j,z,V,G,W,Y,X,ee,re,Q,ne,ae,oe,se=Array.prototype.slice.call(arguments),ce=se[0],de=0,ye=0;if(se.length===3)j=se[1],z=se[2],V=W=ce.width,G=Y=ce.height;else if(se.length===5)j=se[1],z=se[2],V=se[3],G=se[4],W=ce.width,Y=ce.height;else{if(se.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);de=se[1],ye=se[2],W=se[3],Y=se[4],j=se[5],z=se[6],V=se[7],G=se[8]}X=this.__closestGroupOrSvg(),this.__currentElement;var we="translate("+j+", "+z+")";if(ce instanceof k){if((ee=ce.getSvg().cloneNode(!0)).childNodes&&ee.childNodes.length>1){for(re=ee.childNodes[0];re.childNodes.length;)oe=re.childNodes[0].getAttribute("id"),this.__ids[oe]=oe,this.__defs.appendChild(re.childNodes[0]);if(Q=ee.childNodes[1]){var ge,ve=Q.getAttribute("transform");ge=ve?ve+" "+we:we,Q.setAttribute("transform",ge),X.appendChild(Q)}}}else ce.nodeName!=="CANVAS"&&ce.nodeName!=="IMG"||((ne=this.__createElement("image")).setAttribute("width",V),ne.setAttribute("height",G),ne.setAttribute("opacity",this.globalAlpha),ne.setAttribute("preserveAspectRatio","none"),(ae=this.__document.createElement("canvas")).width=V,ae.height=G,ae.getContext("2d").drawImage(ce,de,ye,W,Y,0,0,V,G),ce=ae,ne.setAttribute("transform",we),ne.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ce.nodeName==="CANVAS"?ce.toDataURL():ce.getAttribute("src")),X.appendChild(ne))},k.prototype.createPattern=function(j,z){var V,G=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),W=q(this.__ids);return G.setAttribute("id",W),G.setAttribute("width",j.width),G.setAttribute("height",j.height),j.nodeName==="CANVAS"||j.nodeName==="IMG"?((V=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",j.width),V.setAttribute("height",j.height),V.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j.nodeName==="CANVAS"?j.toDataURL():j.getAttribute("src")),G.appendChild(V),this.__defs.appendChild(G)):j instanceof k&&(G.appendChild(j.__root.childNodes[1]),this.__defs.appendChild(G)),new P(G,this)},k.prototype.setLineDash=function(j){j&&j.length>0?this.lineDash=j.join(","):this.lineDash=null},k.prototype.drawFocusRing=function(){},k.prototype.createImageData=function(){},k.prototype.getImageData=function(){},k.prototype.putImageData=function(){},k.prototype.globalCompositeOperation=function(){},k.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=k),typeof S.exports=="object"&&(S.exports=k)})()}])}))})(cytoscapeSvg)),cytoscapeSvg.exports}var cytoscapeSvgExports=requireCytoscapeSvg();const cysvg=getDefaultExportFromCjs$1(cytoscapeSvgExports);cytoscape$1.use(dagre);cytoscape$1.use(cysvg);const mainStylesheet=[{selector:"core",style:{"active-bg-size":0}},{selector:"node",style:{"background-opacity":0,"border-width":0,label:"data(label)","text-valign":"center","text-halign":"center","font-family":'Consolas, "Courier New", monospace',"font-size":"20px",events:"no"}},{selector:"edge",style:{width:1,"line-color":"#000","target-arrow-color":"#000","target-arrow-shape":"triangle","curve-style":"bezier","arrow-scale":.8,events:"no"}},{selector:".process-name",style:{color:"#00796b","font-weight":"bold"}},{selector:".keyword",style:{color:"#7e57c2","font-weight":"normal"}},{selector:".root-node",style:{color:"#7e57c2","font-size":"14px","text-transform":"uppercase"}},{selector:".input-action",style:{color:"#1976d2"}},{selector:".output-action",style:{color:"#1976d2"}},{selector:".operator",style:{color:"#546e7a","font-size":"24px","font-weight":"bold"}}];function SyntaxTree({parsedAst:_,onHoverNode:v,onContentResize:S,className:R,...T}){const A=reactExports.useRef(null),k=reactExports.useRef(null),M=reactExports.useMemo(()=>transformAstToSyntaxTree(_),[_]),P=D=>{D.resize(),D.fit(void 0,5),D.zoom()>1.15&&(D.zoom(1.15),D.center()),D.zoom()<.6&&(D.zoom(.6),D.center());const L=D.pan();D.pan({x:L.x,y:L.y})};return reactExports.useEffect(()=>{const D=A.current;if(D&&D){const L=D.layout({name:"dagre",rankDir:"TB",spacingFactor:.7,nodeSep:70,rankSep:70,fit:!1});L.on("layoutstop",()=>{const q=D.elements().boundingBox();S&&S({width:q.w+50,height:q.h+0}),P(D)}),L.run()}},[M,S]),reactExports.useEffect(()=>{if(!k.current)return;const D=new ResizeObserver(()=>{A.current&&requestAnimationFrame(()=>{A.current&&P(A.current)})});return D.observe(k.current),()=>D.disconnect()},[]),jsxRuntimeExports.jsxs("div",{ref:k,className:cn$1("relative",R),...T,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-0 z-10",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",className:"bg-stone-100/50 backdrop-blur-sm shadow-sm hover:bg-stone-50 cursor-pointer",children:jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(A.current,"png"),children:"Sthnout jako PNG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(A.current,"svg"),children:"Sthnout jako SVG"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>handleExport(A.current,"json"),children:"Sthnout jako JSON"})]})]})}),jsxRuntimeExports.jsx(w,{elements:M,style:{width:"100%",height:"100%"},stylesheet:mainStylesheet,textureOnViewport:!1,hideEdgesOnViewport:!1,pixelRatio:1.5,cy:D=>{A.current=D,D.container().style.cursor="grab",D.autoungrabify(!0),D.boxSelectionEnabled(!1),D.maxZoom(1.15),v&&(D.on("mousemove",L=>{const q=L.position,B=D.nodes().filter(F=>{const j=F.boundingBox();return q.x>=j.x1&&q.x<=j.x2&&q.y>=j.y1&&q.y<=j.y2}).first();if(B.length>0){const F=B.data("locStart"),j=B.data("locEnd");typeof F=="number"&&typeof j=="number"&&v({from:F,to:j})}else v(null)}),D.on("mouseout",()=>{v(null)}))}})]})}var peggy_min$1={exports:{}},peggy_min=peggy_min$1.exports,hasRequiredPeggy_min;function requirePeggy_min(){return hasRequiredPeggy_min||(hasRequiredPeggy_min=1,(function(module,exports){function _array_like_to_array(_,v){(v==null||v>_.length)&&(v=_.length);for(var S=0,R=new Array(v);S<v;S++)R[S]=_[S];return R}function _array_with_holes(_){if(Array.isArray(_))return _}function _array_without_holes(_){if(Array.isArray(_))return _array_like_to_array(_)}function _assert_this_initialized(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _call_super(_,v,S){return v=_get_prototype_of(v),_possible_constructor_return(_,_is_native_reflect_construct()?Reflect.construct(v,S||[],_get_prototype_of(_).constructor):v.apply(_,S))}function _class_call_check(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function _construct(_,v,S){return _is_native_reflect_construct()?_construct=Reflect.construct:_construct=function(R,T,A){var k=[null];k.push.apply(k,T);var M=Function.bind.apply(R,k),P=new M;return A&&_set_prototype_of(P,A.prototype),P},_construct.apply(null,arguments)}function _defineProperties(_,v){for(var S=0;S<v.length;S++){var R=v[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,R.key,R)}}function _create_class(_,v,S){return v&&_defineProperties(_.prototype,v),S&&_defineProperties(_,S),_}function _define_property(_,v,S){return v in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}function _get(_,v,S){return typeof Reflect<"u"&&Reflect.get?_get=Reflect.get:_get=function(R,T,A){var k=_super_prop_base(R,T);if(k){var M=Object.getOwnPropertyDescriptor(k,T);return M.get?M.get.call(A||R):M.value}},_get(_,v,S||_)}function _get_prototype_of(_){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},_get_prototype_of(_)}function _inherits(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&_set_prototype_of(_,v)}function _instanceof(_,v){return v!=null&&typeof Symbol<"u"&&v[Symbol.hasInstance]?!!v[Symbol.hasInstance](_):_ instanceof v}function _is_native_function(_){return Function.toString.call(_).indexOf("[native code]")!==-1}function _iterable_to_array(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _iterable_to_array_limit(_,v){var S=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(S!=null){var R=[],T=!0,A=!1,k,M;try{for(S=S.call(_);!(T=(k=S.next()).done)&&(R.push(k.value),!(v&&R.length===v));T=!0);}catch(P){A=!0,M=P}finally{try{!T&&S.return!=null&&S.return()}finally{if(A)throw M}}return R}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(_){for(var v=1;v<arguments.length;v++){var S=arguments[v]!=null?arguments[v]:{},R=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(S).filter(function(T){return Object.getOwnPropertyDescriptor(S,T).enumerable}))),R.forEach(function(T){_define_property(_,T,S[T])})}return _}function ownKeys(_,v){var S=Object.keys(_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(_);S.push.apply(S,R)}return S}function _object_spread_props(_,v){return v=v??{},Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(v)):ownKeys(Object(v)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(v,S))}),_}function _possible_constructor_return(_,v){return v&&(_type_of(v)==="object"||typeof v=="function")?v:_assert_this_initialized(_)}function _set_prototype_of(_,v){return _set_prototype_of=Object.setPrototypeOf||function(S,R){return S.__proto__=R,S},_set_prototype_of(_,v)}function _sliced_to_array(_,v){return _array_with_holes(_)||_iterable_to_array_limit(_,v)||_unsupported_iterable_to_array(_,v)||_non_iterable_rest()}function _super_prop_base(_,v){for(;!Object.prototype.hasOwnProperty.call(_,v)&&(_=_get_prototype_of(_),_!==null););return _}function _to_consumable_array(_){return _array_without_holes(_)||_iterable_to_array(_)||_unsupported_iterable_to_array(_)||_non_iterable_spread()}function _type_of(_){"@swc/helpers - typeof";return _&&typeof Symbol<"u"&&_.constructor===Symbol?"symbol":typeof _}function _unsupported_iterable_to_array(_,v){if(_){if(typeof _=="string")return _array_like_to_array(_,v);var S=Object.prototype.toString.call(_).slice(8,-1);if(S==="Object"&&_.constructor&&(S=_.constructor.name),S==="Map"||S==="Set")return Array.from(S);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return _array_like_to_array(_,v)}}function _wrap_native_super(_){var v=typeof Map=="function"?new Map:void 0;return _wrap_native_super=function(S){if(S===null||!_is_native_function(S))return S;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v<"u"){if(v.has(S))return v.get(S);v.set(S,R)}function R(){return _construct(S,arguments,_get_prototype_of(this).constructor)}return R.prototype=Object.create(S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(R,S)},_wrap_native_super(_)}function _is_native_reflect_construct(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_is_native_reflect_construct=function(){return!!_})()}(function(_,v){_type_of(exports)=="object"&&_type_of(module)<"u"?module.exports=v():_.peggy=v()})((typeof globalThis>"u"?"undefined":_type_of(globalThis))<"u"?globalThis:(typeof self>"u"?"undefined":_type_of(self))<"u"?self:peggy_min,function(){var exports={},__exports=exports,module={exports},U=function(_,v){return function(){return v||_((v={exports:{}}).exports,v),v.exports}},Ve=U(function(_,v){var S=(function(){function R(T,A){_class_call_check(this,R),this.source=T,this.start=A}return _create_class(R,[{key:"toString",value:function(){return String(this.source)}},{key:"offset",value:function(T){return{line:T.line+this.start.line-1,column:T.line===1?T.column+this.start.column-1:T.column,offset:T.offset+this.start.offset}}}],[{key:"offsetStart",value:function(T){return T.source&&typeof T.source.offset=="function"?T.source.offset(T.start):T.start}},{key:"offsetEnd",value:function(T){return T.source&&typeof T.source.offset=="function"?T.source.offset(T.end):T.end}}]),R})();v.exports=S}),ft=U(function(_,v){var S=Ve(),R=(function(T){_inherits(A,T);function A(k,M,P){_class_call_check(this,A);var D;return D=_call_super(this,A,[k]),D.name="GrammarError",D.location=M,P===void 0&&(P=[]),D.diagnostics=P,D.stage=null,D.problems=[["error",k,M,P]],D}return _create_class(A,[{key:"toString",value:function(){var M=_get(_get_prototype_of(A.prototype),"toString",this).call(this);this.location&&(M+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(M+="".concat(this.location.source,":")),M+="".concat(this.location.start.line,":").concat(this.location.start.column));var P=!0,D=!1,L=void 0;try{for(var q=this.diagnostics[Symbol.iterator](),B;!(P=(B=q.next()).done);P=!0){var F=B.value;M+=`
 from `,F.location.source!==void 0&&F.location.source!==null&&(M+="".concat(F.location.source,":")),M+="".concat(F.location.start.line,":").concat(F.location.start.column,": ").concat(F.message)}}catch(j){D=!0,L=j}finally{try{!P&&q.return!=null&&q.return()}finally{if(D)throw L}}return M}},{key:"format",value:function(k){var M=k.map(function(L){var q=L.source,B=L.text;return{source:q,text:B!=null?String(B).split(/\r\n|\n|\r/g):[]}});function P(L,q){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",F="",j=M.find(function(X){var ee=X.source;return ee===L.source}),z=L.start,V=S.offsetStart(L);if(j){var G=L.end,W=j.text[z.line-1],Y=(z.line===G.line?G.column:W.length+1)-z.column||1;B&&(F+=`
note: `.concat(B)),F+=`
 --> `.concat(L.source,":").concat(V.line,":").concat(V.column,`
`).concat("".padEnd(q),` |
`).concat(V.line.toString().padStart(q)," | ").concat(W,`
`).concat("".padEnd(q)," | ").concat("".padEnd(z.column-1)).concat("".padEnd(Y,"^"))}else F+=`
 at `.concat(L.source,":").concat(V.line,":").concat(V.column),B&&(F+=": ".concat(B));return F}function D(L,q,B){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],j=-1/0;B?j=F.reduce(function(re,Q){var ne=Q.location;return Math.max(re,S.offsetStart(ne).line)},B.start.line):j=Math.max.apply(null,F.map(function(re){return re.location.start.line})),j=j.toString().length;var z="".concat(L,": ").concat(q);B&&(z+=P(B,j));var V=!0,G=!1,W=void 0;try{for(var Y=F[Symbol.iterator](),X;!(V=(X=Y.next()).done);V=!0){var ee=X.value;z+=P(ee.location,j,ee.message)}}catch(re){G=!0,W=re}finally{try{!V&&Y.return!=null&&Y.return()}finally{if(G)throw W}}return z}return this.problems.filter(function(L){return L[0]!=="info"}).map(function(L){return D.apply(void 0,_to_consumable_array(L))}).join(`

`)}}]),A})(_wrap_native_super(SyntaxError));v.exports=R}),K=U(function(_,v){var S={build:function(R){function T(D){for(var L=arguments.length,q=new Array(L>1?L-1:0),B=1;B<L;B++)q[B-1]=arguments[B];var F;return(F=R)[D.type].apply(F,[D].concat(_to_consumable_array(q)))}function A(){}function k(D){for(var L=arguments.length,q=new Array(L>1?L-1:0),B=1;B<L;B++)q[B-1]=arguments[B];return T.apply(void 0,[D.expression].concat(_to_consumable_array(q)))}function M(D){return function(L){for(var q=arguments.length,B=new Array(q>1?q-1:0),F=1;F<q;F++)B[F-1]=arguments[F];L[D].forEach(function(j){return T.apply(void 0,[j].concat(_to_consumable_array(B)))})}}var P={grammar:function(D){for(var L=arguments.length,q=new Array(L>1?L-1:0),B=1;B<L;B++)q[B-1]=arguments[B];var F=!0,j=!1,z=void 0;try{for(var V=D.imports[Symbol.iterator](),G;!(F=(G=V.next()).done);F=!0){var W=G.value;T.apply(void 0,[W].concat(_to_consumable_array(q)))}}catch(we){j=!0,z=we}finally{try{!F&&V.return!=null&&V.return()}finally{if(j)throw z}}var Y=!0,X=!1,ee=void 0;if(D.topLevelInitializer)if(Array.isArray(D.topLevelInitializer))try{for(var re=D.topLevelInitializer[Symbol.iterator](),Q;!(Y=(Q=re.next()).done);Y=!0){var ne=Q.value;T.apply(void 0,[ne].concat(_to_consumable_array(q)))}}catch(we){X=!0,ee=we}finally{try{!Y&&re.return!=null&&re.return()}finally{if(X)throw ee}}else T.apply(void 0,[D.topLevelInitializer].concat(_to_consumable_array(q)));var ae=!0,oe=!1,se=void 0;if(D.initializer)if(Array.isArray(D.initializer))try{for(var ce=D.initializer[Symbol.iterator](),de;!(ae=(de=ce.next()).done);ae=!0){var ye=de.value;T.apply(void 0,[ye].concat(_to_consumable_array(q)))}}catch(we){oe=!0,se=we}finally{try{!ae&&ce.return!=null&&ce.return()}finally{if(oe)throw se}}else T.apply(void 0,[D.initializer].concat(_to_consumable_array(q)));D.rules.forEach(function(we){return T.apply(void 0,[we].concat(_to_consumable_array(q)))})},grammar_import:A,top_level_initializer:A,initializer:A,rule:k,named:k,choice:M("alternatives"),action:k,sequence:M("elements"),labeled:k,text:k,simple_and:k,simple_not:k,optional:k,zero_or_more:k,one_or_more:k,repeated:function(D){for(var L=arguments.length,q=new Array(L>1?L-1:0),B=1;B<L;B++)q[B-1]=arguments[B];return D.delimiter&&T.apply(void 0,[D.delimiter].concat(_to_consumable_array(q))),T.apply(void 0,[D.expression].concat(_to_consumable_array(q)))},group:k,semantic_and:A,semantic_not:A,rule_ref:A,library_ref:A,literal:A,class:A,any:A};return Object.keys(P).forEach(function(D){Object.prototype.hasOwnProperty.call(R,D)||(R[D]=P[D])}),T}};v.exports=S}),he=U(function(_,v){var S=function(A,k){if(!(A&&k))return A||k;var M=Array.isArray(A)?A:[A];return M.push(k),M},R=K(),T={findRule:function(A,k){for(var M=0;M<A.rules.length;M++)if(A.rules[M].name===k)return A.rules[M]},indexOfRule:function(A,k){for(var M=0;M<A.rules.length;M++)if(A.rules[M].name===k)return M;return-1},alwaysConsumesOnSuccess:function(A,k){function M(){return!0}function P(){return!1}var D=R.build({choice:function(L){return L.alternatives.every(D)},sequence:function(L){return L.elements.some(D)},simple_and:P,simple_not:P,optional:P,zero_or_more:P,repeated:function(L){var q=L.min?L.min:L.max;return q.type!=="constant"||q.value===0?!1:!!(D(L.expression)||q.value>1&&L.delimiter&&D(L.delimiter))},semantic_and:P,semantic_not:P,rule_ref:function(L){var q=T.findRule(A,L.name);return q?D(q):void 0},library_ref:P,literal:function(L){return L.value!==""},class:M,any:M});return D(k)},combine:function(A){return A.reduce(function(k,M){return k.topLevelInitializer=S(k.topLevelInitializer,M.topLevelInitializer),k.initializer=S(k.initializer,M.initializer),k.rules=k.rules.concat(M.rules),k})}};v.exports=T}),Xs=U(function(_,v){var S=function(R){var T=0,A=!0,k=!1,M=void 0;try{for(var P=R.imports[Symbol.iterator](),D;!(A=(D=P.next()).done);A=!0){var L=D.value,q=!0,B=!1,F=void 0;try{for(var j=L.what[Symbol.iterator](),z;!(q=(z=j.next()).done);q=!0){var V=z.value,G=void 0;switch(V.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":G=V.binding;break;case"import_binding_rename":G=V.rename;break;default:throw new TypeError("Unknown binding type")}R.rules.push({type:"rule",name:V.binding,nameLocation:V.location,expression:{type:"library_ref",name:G,library:L.from.module,libraryNumber:T,location:V.location},location:L.from.location})}}catch(W){B=!0,F=W}finally{try{!q&&j.return!=null&&j.return()}finally{if(B)throw F}}T++}}catch(W){k=!0,M=W}finally{try{!A&&P.return!=null&&P.return()}finally{if(k)throw M}}};v.exports=S}),Ks=U(function(_,v){var S=function(A,k){var M=0,P=!0,D=!1,L=void 0;try{for(var q=A.imports[Symbol.iterator](),B;!(P=(B=q.next()).done);P=!0){var F=B.value,j=!0,z=!1,V=void 0;try{for(var G=F.what[Symbol.iterator](),W;!(j=(W=G.next()).done);j=!0){var Y=W.value;if(Y.type==="import_binding_all"&&Y.binding===k)return M}}catch(X){z=!0,V=X}finally{try{!j&&G.return!=null&&G.return()}finally{if(z)throw V}}M++}}catch(X){D=!0,L=X}finally{try{!P&&q.return!=null&&q.return()}finally{if(D)throw L}}return-1},R=function(A,k,M){T.build({library_ref:function(P){P.libraryNumber===-1&&(P.libraryNumber=S(A,P.library),P.libraryNumber===-1&&M.error('Unknown module "'.concat(P.library,'"'),P.location))}})(A)},T=K();v.exports=R}),Ht=U(function(_,v){var S={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};v.exports=S}),tr=U(function(_,v){var S=(function(){function R(T){_class_call_check(this,R),this.options=_object_spread({stringify:String,convert:function(A){return A}},T),this.items=[],this.offsets=Object.create(null)}return _create_class(R,[{key:"add",value:function(T){var A=this.options.convert(T);if(!A)return-1;var k=this.options.stringify(A),M=this.offsets[k];return M===void 0&&(M=this.items.push(A)-1,this.offsets[k]=M),M}},{key:"get",value:function(T){return this.items[T]}},{key:"map",value:function(T){return this.items.map(T)}}]),R})();v.exports=S}),ht=U(function(_,v){var S=function(D){function L(z){return z.match=M}function q(z){return j(z.expression),z.match=k}function B(z){return z.match=j(z.expression)}function F(z,V){for(var G=z.length,W=0,Y=0,X=0;X<G;++X){var ee=j(z[X]);ee===k&&++W,ee===P&&++Y}return W===G?k:V?Y===G?P:M:Y>0?P:M}var j=R.build({rule:function(z){var V,G=0;if(_type_of(z.match)>"u"){z.match=M;do if(V=z.match,z.match=j(z.expression),++G>6)throw new A("Infinity cycle detected when trying to evaluate node match result",z.location);while(V!==z.match)}return z.match},named:B,choice:function(z){return z.match=F(z.alternatives,!0)},action:B,sequence:function(z){return z.match=F(z.elements,!1)},labeled:B,text:B,simple_and:B,simple_not:function(z){return z.match=-j(z.expression)},optional:q,zero_or_more:q,one_or_more:B,repeated:function(z){var V=j(z.expression),G=z.delimiter?j(z.delimiter):P,W=z.min?z.min:z.max;return W.type!=="constant"||z.max.type!=="constant"?z.match=M:z.max.value===0||z.max.value!==null&&W.value>z.max.value?z.match=P:V===P?z.match=W.value===0?k:P:V===k?z.delimiter&&W.value>=2?z.match=G:z.match=k:z.delimiter&&W.value>=2?z.match=G===P?P:M:z.match=W.value===0?k:M},group:B,semantic_and:L,semantic_not:L,rule_ref:function(z){var V=T.findRule(D,z.name);return V?z.match=j(V):M},library_ref:function(){return 0},literal:function(z){var V=z.value.length===0?k:M;return z.match=V},class:function(z){var V=z.parts.length===0?P:M;return z.match=V},any:L});j(D)},R=K(),T=he(),A=ft(),k=1,M=0,P=-1;S.ALWAYS_MATCH=k,S.SOMETIMES_MATCH=M,S.NEVER_MATCH=P,v.exports=S}),ir=U(function(_,v){var S=function(q,B){var F=new k,j=new k({stringify:JSON.stringify,convert:function(me){return{value:me.parts,inverted:me.inverted,ignoreCase:me.ignoreCase,unicode:me.unicode}}}),z=new k({stringify:JSON.stringify}),V=new k,G=[],W=[];function Y(me,fe,xe){var Ae={predicate:me,params:fe,body:xe.code,location:xe.codeLocation},Se=JSON.stringify(Ae),Me=G.findIndex(function(Oe){return JSON.stringify(Oe)===Se});return Me===-1?G.push(Ae)-1:Me}function X(me){return W.push(me)-1}function ee(me){var fe={};return Object.keys(me).forEach(function(xe){fe[xe]=me[xe]}),fe}function re(me){for(var fe=arguments.length,xe=new Array(fe>1?fe-1:0),Ae=1;Ae<fe;Ae++)xe[Ae-1]=arguments[Ae];var Se;return(Se=me).concat.apply(Se,_to_consumable_array(xe))}function Q(me,fe,xe,Ae){return me===P?xe:me===L?Ae:fe.concat([xe.length,Ae.length],xe,Ae)}function ne(me,fe){return me.concat([fe.length],fe)}function ae(me,fe,xe,Ae){var Se=Object.keys(xe).map(function(Me){return Ae-xe[Me]});return[T.CALL,me,fe,Se.length].concat(Se)}function oe(me,fe,xe){var Ae=me.match||0;return re([T.PUSH_CURR_POS],[T.SILENT_FAILS_ON],ke(me,{sp:xe.sp+1,env:ee(xe.env),action:null}),[T.SILENT_FAILS_OFF],Q(fe?-Ae:Ae,[fe?T.IF_ERROR:T.IF_NOT_ERROR],re([T.POP],[fe?T.POP:T.POP_CURR_POS],[T.PUSH_UNDEFINED]),re([T.POP],[fe?T.POP_CURR_POS:T.POP],[T.PUSH_FAILED])))}function se(me,fe,xe){var Ae=Y(!0,Object.keys(xe.env),me);return re([T.UPDATE_SAVED_POS],ae(Ae,0,xe.env,xe.sp),Q(me.match||0,[T.IF],re([T.POP],fe?[T.PUSH_FAILED]:[T.PUSH_UNDEFINED]),re([T.POP],fe?[T.PUSH_UNDEFINED]:[T.PUSH_FAILED])))}function ce(me){return ne([T.WHILE_NOT_ERROR],re([T.APPEND],me))}function de(me){var fe=me;return new Error('Unknown boundary type "'.concat(fe.type,'" for the "repeated" node'))}function ye(me,fe,xe,Ae){switch(me.type){case"constant":return{pre:[],post:[],sp:xe};case"variable":return me.sp=Ae+xe-fe[me.value],{pre:[],post:[],sp:xe};case"function":{me.sp=Ae;var Se=Y(!0,Object.keys(fe),{code:me.value,codeLocation:me.codeLocation});return{pre:ae(Se,0,fe,xe),post:[T.NIP],sp:xe+1}}default:throw de(me)}}function we(me,fe){if(fe.value!==null){var xe=fe.type==="constant"?[T.IF_GE,fe.value]:[T.IF_GE_DYNAMIC,fe.sp||0];return Q(D,xe,[T.PUSH_FAILED],me)}return me}function ge(me,fe){var xe=fe.type==="constant"?[T.IF_LT,fe.value]:[T.IF_LT_DYNAMIC,fe.sp||0];return re(me,Q(D,xe,[T.POP,T.POP_CURR_POS,T.PUSH_FAILED],[T.NIP]))}function ve(me,fe,xe,Ae,Se){return me?re([T.PUSH_CURR_POS],ke(me,{sp:Ae.sp+Se+1,env:ee(Ae.env),action:null}),Q(me.match||0,[T.IF_NOT_ERROR],re([T.POP],xe,Q(-fe,[T.IF_ERROR],[T.POP,T.POP_CURR_POS,T.PUSH_FAILED],[T.NIP])),[T.NIP])):xe}function be(me){return B&&B.output==="source-and-map"&&Object.keys(me).forEach(function(fe){var xe=me[fe];me[fe]=function(Ae){for(var Se=arguments.length,Me=new Array(Se>1?Se-1:0),Oe=1;Oe<Se;Oe++)Me[Oe-1]=arguments[Oe];var Ce=xe.apply(void 0,[Ae].concat(_to_consumable_array(Me)));return Ce===void 0||!Ae.location?Ce:re([T.SOURCE_MAP_PUSH,X(Ae.location)],Ce,[T.SOURCE_MAP_POP])}}),A.build(me)}var ke=be({grammar:function(me){me.rules.forEach(ke),me.literals=F.items,me.classes=j.items,me.expectations=z.items,me.importedNames=V.items,me.functions=G,me.locations=W},rule:function(me){me.bytecode=ke(me.expression,{sp:-1,env:{},pluck:[],action:null})},named:function(me,fe){var xe=me.match||0,Ae=xe===P?-1:z.add({type:"rule",value:me.name});return re([T.SILENT_FAILS_ON],ke(me.expression,fe),[T.SILENT_FAILS_OFF],Q(-xe,[T.IF_ERROR],[T.FAIL,Ae],[]))},choice:function(me,fe){function xe(Ae,Se){var Me=Ae[0].match||0,Oe=ke(Ae[0],{sp:Se.sp,env:ee(Se.env),action:null});return Me===P?Oe:re(Oe,Ae.length>1?Q(D,[T.IF_ERROR],re([T.POP],xe(Ae.slice(1),Se)),[]):[])}return xe(me.alternatives,fe)},action:function(me,fe){var xe=ee(fe.env),Ae=me.expression.type!=="sequence"||me.expression.elements.length===0,Se=ke(me.expression,{sp:fe.sp+(Ae?1:0),env:xe,action:me}),Me=me.expression.match||0,Oe=Ae&&Me!==L?Y(!1,Object.keys(xe),me):-1;return Ae?re([T.PUSH_CURR_POS],Se,Q(Me,[T.IF_NOT_ERROR],re([T.LOAD_SAVED_POS,1],ae(Oe,1,xe,fe.sp+2)),[]),[T.NIP]):Se},sequence:function(me,fe){function xe(Ae,Se){if(Ae.length>0){var Me=me.elements.length-Ae.length+1;return re(ke(Ae[0],{sp:Se.sp,env:Se.env,pluck:Se.pluck,action:null}),Q(Ae[0].match||0,[T.IF_NOT_ERROR],xe(Ae.slice(1),{sp:Se.sp+1,env:Se.env,pluck:Se.pluck,action:Se.action}),re(Me>1?[T.POP_N,Me]:[T.POP],[T.POP_CURR_POS],[T.PUSH_FAILED])))}else{if(Se.pluck&&Se.pluck.length>0)return re([T.PLUCK,me.elements.length+1,Se.pluck.length],Se.pluck.map(function(Ce){return Se.sp-Ce}));if(Se.action){var Oe=Y(!1,Object.keys(Se.env),Se.action);return re([T.LOAD_SAVED_POS,me.elements.length],ae(Oe,me.elements.length+1,Se.env,Se.sp))}else return re([T.WRAP,me.elements.length],[T.NIP])}}return re([T.PUSH_CURR_POS],xe(me.elements,{sp:fe.sp+1,env:fe.env,pluck:[],action:fe.action}))},labeled:function(me,fe){var xe=fe.env,Ae=me.label,Se=fe.sp+1;Ae&&(xe=ee(fe.env),fe.env[Ae]=Se),me.pick&&fe.pluck.push(Se);var Me=ke(me.expression,{sp:fe.sp,env:xe,action:null});return Ae&&me.labelLocation&&B&&B.output==="source-and-map"?re([T.SOURCE_MAP_LABEL_PUSH,Se,F.add(Ae),X(me.labelLocation)],Me,[T.SOURCE_MAP_LABEL_POP,Se]):Me},text:function(me,fe){return re([T.PUSH_CURR_POS],ke(me.expression,{sp:fe.sp+1,env:ee(fe.env),action:null}),Q(me.match||0,[T.IF_NOT_ERROR],re([T.POP],[T.TEXT]),[T.NIP]))},simple_and:function(me,fe){return oe(me.expression,!1,fe)},simple_not:function(me,fe){return oe(me.expression,!0,fe)},optional:function(me,fe){return re(ke(me.expression,{sp:fe.sp,env:ee(fe.env),action:null}),Q(-(me.expression.match||0),[T.IF_ERROR],re([T.POP],[T.PUSH_NULL]),[]))},zero_or_more:function(me,fe){var xe=ke(me.expression,{sp:fe.sp+1,env:ee(fe.env),action:null});return re([T.PUSH_EMPTY_ARRAY],xe,ce(xe),[T.POP])},one_or_more:function(me,fe){var xe=ke(me.expression,{sp:fe.sp+1,env:ee(fe.env),action:null});return re([T.PUSH_EMPTY_ARRAY],xe,Q(me.expression.match||0,[T.IF_NOT_ERROR],re(ce(xe),[T.POP]),re([T.POP],[T.POP],[T.PUSH_FAILED])))},repeated:function(me,fe){var xe=me.min?me.min:me.max,Ae=xe.type!=="constant"||xe.value>0,Se=me.max.type!=="constant"&&me.max.value!==null,Me=Ae?2:1,Oe=me.min?ye(me.min,fe.env,fe.sp,2+(me.max.type==="function"?1:0)):{pre:[],post:[],sp:fe.sp},Ce=ye(me.max,fe.env,Oe.sp,Me),$e=ke(me.expression,{sp:Ce.sp+Me,env:ee(fe.env),action:null}),Be=me.delimiter!==null?ke(me.expression,{sp:Ce.sp+Me+1,env:ee(fe.env),action:null}):$e,Pe=ve(me.delimiter,me.expression.match||0,Be,fe,Me),De=we(Pe,me.max),Le=Se?we($e,me.max):$e,Ne=re(Ae?[T.PUSH_CURR_POS]:[],[T.PUSH_EMPTY_ARRAY],Le,ce(De),[T.POP]);return re(Oe.pre,Ce.pre,Ae?ge(Ne,xe):Ne,Ce.post,Oe.post)},group:function(me,fe){return ke(me.expression,{sp:fe.sp,env:ee(fe.env),action:null})},semantic_and:function(me,fe){return se(me,!1,fe)},semantic_not:function(me,fe){return se(me,!0,fe)},rule_ref:function(me){return[T.RULE,R.indexOfRule(q,me.name)]},library_ref:function(me){return[T.LIBRARY_RULE,me.libraryNumber,V.add(me.name)]},literal:function(me){if(me.value.length>0){var fe=me.match||0,xe=fe===D||fe===P&&!me.ignoreCase?F.add(me.ignoreCase?me.value.toLowerCase():me.value):-1,Ae=fe!==P?z.add({type:"literal",value:me.value,ignoreCase:me.ignoreCase}):-1;return Q(fe,me.ignoreCase?[T.MATCH_STRING_IC,xe]:[T.MATCH_STRING,xe],me.ignoreCase?[T.ACCEPT_N,me.value.length]:[T.ACCEPT_STRING,xe],[T.FAIL,Ae])}return[T.PUSH_EMPTY_STRING]},class:function(me){var fe=me.match||0,xe=fe===D?j.add(me):-1,Ae=fe!==P?z.add({type:"class",value:me.parts,inverted:me.inverted,ignoreCase:me.ignoreCase,unicode:me.unicode}):-1;return Q(fe,[me.unicode?T.MATCH_UNICODE_CLASS:T.MATCH_CHAR_CLASS,xe],[T.ACCEPT_N,me.unicode?-1:1],[T.FAIL,Ae])},any:function(me){var fe=me.match||0,xe=fe!==P?z.add({type:"any"}):-1;return Q(fe,[T.MATCH_ANY],[T.ACCEPT_N,1],[T.FAIL,xe])}});ke(q)},R=he(),T=Ht(),A=K(),k=tr(),M=ht(),P=M.ALWAYS_MATCH,D=M.SOMETIMES_MATCH,L=M.NEVER_MATCH;v.exports=S}),lr=U(function(_){var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_.encode=function(S){if(0<=S&&S<v.length)return v[S];throw new TypeError("Must be between 0 and 63: "+S)}}),pr=U(function(_){var v=function(M){return M<0?(-M<<1)+1:(M<<1)+0},S=lr(),R=5,T=1<<R,A=T-1,k=T;_.encode=function(M){var P="",D,L=v(M);do D=L&A,L>>>=R,L>0&&(D|=k),P+=S.encode(D);while(L>0);return P}}),mt=U(function(_){var v=function(Q,ne,ae){if(ne in Q)return Q[ne];if(arguments.length===3)return ae;throw new Error('"'+ne+'" is a required argument.')},S=function(Q){return Q},R=function(Q){return A(Q)?"$"+Q:Q},T=function(Q){return A(Q)?Q.slice(1):Q},A=function(Q){if(!Q)return!1;var ne=Q.length;if(ne<9||Q.charCodeAt(ne-1)!==95||Q.charCodeAt(ne-2)!==95||Q.charCodeAt(ne-3)!==111||Q.charCodeAt(ne-4)!==116||Q.charCodeAt(ne-5)!==111||Q.charCodeAt(ne-6)!==114||Q.charCodeAt(ne-7)!==112||Q.charCodeAt(ne-8)!==95||Q.charCodeAt(ne-9)!==95)return!1;for(var ae=ne-10;ae>=0;ae--)if(Q.charCodeAt(ae)!==36)return!1;return!0},k=function(Q,ne){return Q===ne?0:Q===null?1:ne===null?-1:Q>ne?1:-1},M=function(Q,ne){var ae=Q.generatedLine-ne.generatedLine;return ae!==0||(ae=Q.generatedColumn-ne.generatedColumn,ae!==0)||(ae=k(Q.source,ne.source),ae!==0)||(ae=Q.originalLine-ne.originalLine,ae!==0)||(ae=Q.originalColumn-ne.originalColumn,ae!==0)?ae:k(Q.name,ne.name)},P=function(Q){return function(ne){var ae=B(ne),oe=q(ne),se=new URL(ne,oe);Q(se);var ce=se.toString();return ae==="absolute"?ce:ae==="scheme-relative"?ce.slice(W.length):ae==="path-absolute"?ce.slice(Y.length):F(oe,ce)}},D=function(Q,ne){return new URL(Q,ne).toString()},L=function(Q,ne){var ae=0;do{var oe=Q+ae++;if(ne.indexOf(oe)===-1)return oe}while(!0)},q=function(Q){for(var ne=Q.split("..").length-1,ae=L("p",Q),oe="".concat(Y,"/"),se=0;se<ne;se++)oe+="".concat(ae,"/");return oe},B=function(Q){return Q[0]==="/"?Q[1]==="/"?"scheme-relative":"path-absolute":X.test(Q)?"absolute":"path-relative"},F=function(Q,ne){typeof Q=="string"&&(Q=new URL(Q)),typeof ne=="string"&&(ne=new URL(ne));var ae=ne.pathname.split("/"),oe=Q.pathname.split("/");for(oe.length>0&&!oe[oe.length-1]&&oe.pop();ae.length>0&&oe.length>0&&ae[0]===oe[0];)ae.shift(),oe.shift();return oe.map(function(){return".."}).concat(ae).join("/")+ne.search+ne.hash},j=function(Q,ne){var ae=B(ne),oe=B(Q);if(Q=ee(Q),ae==="absolute")return D(ne,void 0);if(oe==="absolute")return D(ne,Q);if(ae==="scheme-relative")return re(ne);if(oe==="scheme-relative")return D(ne,D(Q,Y)).slice(W.length);if(ae==="path-absolute")return re(ne);if(oe==="path-absolute")return D(ne,D(Q,Y)).slice(Y.length);var se=q(ne+Q),ce=D(ne,D(Q,se));return F(se,ce)},z=function(Q,ne){var ae=V(Q,ne);return typeof ae=="string"?ae:re(ne)},V=function(Q,ne){if(B(Q)!==B(ne))return null;var ae=q(Q+ne),oe=new URL(Q,ae),se=new URL(ne,ae);try{new URL("",se.toString())}catch{return null}return se.protocol!==oe.protocol||se.user!==oe.user||se.password!==oe.password||se.hostname!==oe.hostname||se.port!==oe.port?null:F(oe,se)};_.getArg=v;var G=(function(){return!("__proto__"in Object.create(null))})();_.toSetString=G?S:R,_.fromSetString=G?S:T,_.compareByGeneratedPositionsInflated=M;var W="http:",Y="".concat(W,"//host"),X=/^[A-Za-z0-9\+\-\.]+:/,ee=P(function(Q){Q.pathname=Q.pathname.replace(/\/?$/,"/")}),re=P(function(Q){});_.normalize=re,_.join=j,_.relative=z}),yr=U(function(_){var v=(function(){function S(){_class_call_check(this,S),this._array=[],this._set=new Map}return _create_class(S,[{key:"size",value:function(){return this._set.size}},{key:"add",value:function(R,T){var A=this.has(R),k=this._array.length;(!A||T)&&this._array.push(R),A||this._set.set(R,k)}},{key:"has",value:function(R){return this._set.has(R)}},{key:"indexOf",value:function(R){var T=this._set.get(R);if(T>=0)return T;throw new Error('"'+R+'" is not in the set.')}},{key:"at",value:function(R){if(R>=0&&R<this._array.length)return this._array[R];throw new Error("No element indexed by "+R)}},{key:"toArray",value:function(){return this._array.slice()}}],[{key:"fromArray",value:function(R,T){for(var A=new S,k=0,M=R.length;k<M;k++)A.add(R[k],T);return A}}]),S})();_.ArraySet=v}),xr=U(function(_){var v=function(T,A){var k=T.generatedLine,M=A.generatedLine,P=T.generatedColumn,D=A.generatedColumn;return M>k||M==k&&D>=P||S.compareByGeneratedPositionsInflated(T,A)<=0},S=mt(),R=(function(){function T(){_class_call_check(this,T),this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return _create_class(T,[{key:"unsortedForEach",value:function(A,k){this._array.forEach(A,k)}},{key:"add",value:function(A){v(this._last,A)?(this._last=A,this._array.push(A)):(this._sorted=!1,this._array.push(A))}},{key:"toArray",value:function(){return this._sorted||(this._array.sort(S.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}]),T})();_.MappingList=R}),Jt=U(function(_){var v=pr(),S=mt(),R=yr().ArraySet,T=xr().MappingList,A=(function(){function k(M){_class_call_check(this,k),M||(M={}),this._file=S.getArg(M,"file",null),this._sourceRoot=S.getArg(M,"sourceRoot",null),this._skipValidation=S.getArg(M,"skipValidation",!1),this._sources=new R,this._names=new R,this._mappings=new T,this._sourcesContents=null}return _create_class(k,[{key:"addMapping",value:function(M){var P=S.getArg(M,"generated"),D=S.getArg(M,"original",null),L=S.getArg(M,"source",null),q=S.getArg(M,"name",null);this._skipValidation||this._validateMapping(P,D,L,q),L!=null&&(L=String(L),this._sources.has(L)||this._sources.add(L)),q!=null&&(q=String(q),this._names.has(q)||this._names.add(q)),this._mappings.add({generatedLine:P.line,generatedColumn:P.column,originalLine:D&&D.line,originalColumn:D&&D.column,source:L,name:q})}},{key:"setSourceContent",value:function(M,P){var D=M;this._sourceRoot!=null&&(D=S.relative(this._sourceRoot,D)),P!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[S.toSetString(D)]=P):this._sourcesContents&&(delete this._sourcesContents[S.toSetString(D)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}},{key:"applySourceMap",value:function(M,P,D){var L=P;if(P==null){if(M.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);L=M.file}var q=this._sourceRoot;q!=null&&(L=S.relative(q,L));var B=this._mappings.toArray().length>0?new R:this._sources,F=new R;this._mappings.unsortedForEach(function(j){if(j.source===L&&j.originalLine!=null){var z=M.originalPositionFor({line:j.originalLine,column:j.originalColumn});z.source!=null&&(j.source=z.source,D!=null&&(j.source=S.join(D,j.source)),q!=null&&(j.source=S.relative(q,j.source)),j.originalLine=z.line,j.originalColumn=z.column,z.name!=null&&(j.name=z.name))}var V=j.source;V!=null&&!B.has(V)&&B.add(V);var G=j.name;G!=null&&!F.has(G)&&F.add(G)},this),this._sources=B,this._names=F,M.sources.forEach(function(j){var z=M.sourceContentFor(j);z!=null&&(D!=null&&(j=S.join(D,j)),q!=null&&(j=S.relative(q,j)),this.setSourceContent(j,z))},this)}},{key:"_validateMapping",value:function(M,P,D,L){if(P&&typeof P.line!="number"&&typeof P.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(M&&"line"in M&&"column"in M&&M.line>0&&M.column>=0&&!P&&!D&&!L)&&!(M&&"line"in M&&"column"in M&&P&&"line"in P&&"column"in P&&M.line>0&&M.column>=0&&P.line>0&&P.column>=0&&D))throw new Error("Invalid mapping: "+JSON.stringify({generated:M,source:D,original:P,name:L}))}},{key:"_serializeMappings",value:function(){for(var P=0,D=1,L=0,q=0,B=0,F=0,j="",z,V,G,W,Y=this._mappings.toArray(),X=0,ee=Y.length;X<ee;X++){if(V=Y[X],z="",V.generatedLine!==D)for(P=0;V.generatedLine!==D;)z+=";",D++;else if(X>0){if(!S.compareByGeneratedPositionsInflated(V,Y[X-1]))continue;z+=","}z+=v.encode(V.generatedColumn-P),P=V.generatedColumn,V.source!=null&&(W=this._sources.indexOf(V.source),z+=v.encode(W-F),F=W,z+=v.encode(V.originalLine-1-q),q=V.originalLine-1,z+=v.encode(V.originalColumn-L),L=V.originalColumn,V.name!=null&&(G=this._names.indexOf(V.name),z+=v.encode(G-B),B=G)),j+=z}return j}},{key:"_generateSourcesContent",value:function(M,P){return M.map(function(D){if(!this._sourcesContents)return null;P!=null&&(D=S.relative(P,D));var L=S.toSetString(D);return Object.prototype.hasOwnProperty.call(this._sourcesContents,L)?this._sourcesContents[L]:null},this)}},{key:"toJSON",value:function(){var P={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(P.file=this._file),this._sourceRoot!=null&&(P.sourceRoot=this._sourceRoot),this._sourcesContents&&(P.sourcesContent=this._generateSourcesContent(P.sources,P.sourceRoot)),P}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"fromSourceMap",value:function(M){var P=M.sourceRoot,D=new k({file:M.file,sourceRoot:P});return M.eachMapping(function(L){var q={generated:{line:L.generatedLine,column:L.generatedColumn}};L.source!=null&&(q.source=L.source,P!=null&&(q.source=S.relative(P,q.source)),q.original={line:L.originalLine,column:L.originalColumn},L.name!=null&&(q.name=L.name)),D.addMapping(q)}),M.sources.forEach(function(L){var q=L;P!=null&&(q=S.relative(P,L)),D._sources.has(q)||D._sources.add(q);var B=M.sourceContentFor(L);B!=null&&D.setSourceContent(L,B)}),D}}]),k})();A.prototype._version=3,_.SourceMapGenerator=A}),Ar=U(function(_){var v=Jt().SourceMapGenerator,S=mt(),R=/(\r?\n)/,T=10,A="$$$isSourceNode$$$",k=(function(){function M(P,D,L,q,B){_class_call_check(this,M),this.children=[],this.sourceContents={},this.line=P??null,this.column=D??null,this.source=L??null,this.name=B??null,this[A]=!0,q!=null&&this.add(q)}return _create_class(M,[{key:"add",value:function(P){if(Array.isArray(P))P.forEach(function(D){this.add(D)},this);else if(P[A]||typeof P=="string")P&&this.children.push(P);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+P);return this}},{key:"prepend",value:function(P){if(Array.isArray(P))for(var D=P.length-1;D>=0;D--)this.prepend(P[D]);else if(P[A]||typeof P=="string")this.children.unshift(P);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+P);return this}},{key:"walk",value:function(P){for(var D,L=0,q=this.children.length;L<q;L++)D=this.children[L],D[A]?D.walk(P):D!==""&&P(D,{source:this.source,line:this.line,column:this.column,name:this.name})}},{key:"join",value:function(P){var D,L,q=this.children.length;if(q>0){for(D=[],L=0;L<q-1;L++)D.push(this.children[L]),D.push(P);D.push(this.children[L]),this.children=D}return this}},{key:"replaceRight",value:function(P,D){var L=this.children[this.children.length-1];return L[A]?L.replaceRight(P,D):typeof L=="string"?this.children[this.children.length-1]=L.replace(P,D):this.children.push("".replace(P,D)),this}},{key:"setSourceContent",value:function(P,D){this.sourceContents[S.toSetString(P)]=D}},{key:"walkSourceContents",value:function(P){for(var D=0,L=this.children.length;D<L;D++)this.children[D][A]&&this.children[D].walkSourceContents(P);for(var q=Object.keys(this.sourceContents),B=0,F=q.length;B<F;B++)P(S.fromSetString(q[B]),this.sourceContents[q[B]])}},{key:"toString",value:function(){var D="";return this.walk(function(L){D+=L}),D}},{key:"toStringWithSourceMap",value:function(P){var D={code:"",line:1,column:0},L=new v(P),q=!1,B=null,F=null,j=null,z=null;return this.walk(function(V,G){D.code+=V,G.source!==null&&G.line!==null&&G.column!==null?((B!==G.source||F!==G.line||j!==G.column||z!==G.name)&&L.addMapping({source:G.source,original:{line:G.line,column:G.column},generated:{line:D.line,column:D.column},name:G.name}),B=G.source,F=G.line,j=G.column,z=G.name,q=!0):q&&(L.addMapping({generated:{line:D.line,column:D.column}}),B=null,q=!1);for(var W=0,Y=V.length;W<Y;W++)V.charCodeAt(W)===T?(D.line++,D.column=0,W+1===Y?(B=null,q=!1):q&&L.addMapping({source:G.source,original:{line:G.line,column:G.column},generated:{line:D.line,column:D.column},name:G.name})):D.column++}),this.walkSourceContents(function(V,G){L.setSourceContent(V,G)}),{code:D.code,map:L}}}],[{key:"fromStringWithSourceMap",value:function(P,D,L){var q=new M,B=P.split(R),F=0,j=function(){var ee=Q(),re=Q()||"";return ee+re;function Q(){return F<B.length?B[F++]:void 0}},z=1,V=0,G=null,W;return D.eachMapping(function(X){if(G!==null)if(z<X.generatedLine)Y(G,j()),z++,V=0;else{W=B[F]||"";var ee=W.substr(0,X.generatedColumn-V);B[F]=W.substr(X.generatedColumn-V),V=X.generatedColumn,Y(G,ee),G=X;return}for(;z<X.generatedLine;)q.add(j()),z++;V<X.generatedColumn&&(W=B[F]||"",q.add(W.substr(0,X.generatedColumn)),B[F]=W.substr(X.generatedColumn),V=X.generatedColumn),G=X},this),F<B.length&&(G&&Y(G,j()),q.add(B.splice(F).join(""))),D.sources.forEach(function(X){var ee=D.sourceContentFor(X);ee!=null&&(L!=null&&(X=S.join(L,X)),q.setSourceContent(X,ee))}),q;function Y(X,ee){if(X===null||X.source===void 0)q.add(ee);else{var re=L?S.join(L,X.source):X.source;q.add(new M(X.originalLine,X.originalColumn,re,ee,X.name))}}}}]),M})();_.SourceNode=k}),Kt=U(function(_){_.SourceMapGenerator=Jt().SourceMapGenerator,_.SourceNode=Ar().SourceNode}),Rr=U(function(_,v){var S=Kt(),R=S.SourceNode,T=Ve(),A=(function(){function k(M,P,D,L){_class_call_check(this,k),this.sp=-1,this.maxSp=-1,this.varName=P,this.ruleName=M,this.type=D,this.bytecode=L,this.labels={},this.sourceMapStack=[]}return _create_class(k,[{key:"name",value:function(M){if(M<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack underflow: attempt to use a variable '").concat(this.varName,"<x>' at an index ").concat(M,`.
Bytecode: `).concat(this.bytecode));return this.varName+M}},{key:"push",value:function(M){++this.sp>this.maxSp&&(this.maxSp=this.sp);var P=this.labels[this.sp],D=[this.name(this.sp)," = ",M,";"];if(P)if(this.sourceMapStack.length){var L=k.sourceNode(P.location,D.splice(0,2),P.label),q=this.sourceMapPopInternal(),B=q.parts,F=q.location,j=F.start.offset<P.location.end.offset?{start:P.location.end,end:F.end,source:F.source}:F,z=k.sourceNode(j,D.concat(`
`));return this.sourceMapStack.push([B,B.length+1,F]),new R(null,null,P.location.source,[L,z])}else return k.sourceNode(P.location,D.concat(`
`));return D.join("")}},{key:"pop",value:function(M){var P=this;return M!==void 0?(this.sp-=M,Array.from({length:M},function(D,L){return P.name(P.sp+1+L)})):this.name(this.sp--)}},{key:"top",value:function(){return this.name(this.sp)}},{key:"index",value:function(M){if(M<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack overflow: attempt to get a variable at a negative index ").concat(M,`.
Bytecode: `).concat(this.bytecode));return this.name(this.sp-M)}},{key:"result",value:function(){if(this.maxSp<0)throw new RangeError("Rule '".concat(this.ruleName,`': The variable stack is empty, can't get the result.
Bytecode: `).concat(this.bytecode));return this.name(0)}},{key:"defines",value:function(){var P=this;return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},function(D,L){return P.name(L)}).join(", ")+";"}},{key:"checkedIf",value:function(M,P,D){var L=this.sp,q=P();if(!D)return[q];var B=this.sp;this.sp=L;var F=D();if(B!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+M+": Branches of a condition can't move the stack pointer differently (before: "+L+", after then: "+B+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[q,F]}},{key:"checkedLoop",value:function(M,P){var D=this.sp,L=P();if(D!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+M+": Body of a loop can't move the stack pointer (before: "+D+", after: "+this.sp+"). Bytecode: "+this.bytecode);return L}},{key:"sourceMapPush",value:function(M,P){if(this.sourceMapStack.length){var D=this.sourceMapStack[this.sourceMapStack.length-1];D[2].start.offset===P.start.offset&&D[2].end.offset>P.end.offset&&(D[2]={start:P.end,end:D[2].end,source:D[2].source})}this.sourceMapStack.push([M,M.length,P])}},{key:"sourceMapPopInternal",value:function(){var P=this.sourceMapStack.pop();if(!P)throw new RangeError("Rule '".concat(this.ruleName,`': Attempting to pop an empty source map stack.
Bytecode: `).concat(this.bytecode));var D=_sliced_to_array(P,3),L=D[0],q=D[1],B=D[2],F=L.splice(q).map(function(z){return _instanceof(z,R)?z:z+`
`});if(F.length){var j=T.offsetStart(B);L.push(new R(j.line,j.column-1,String(B.source),F))}return{parts:L,location:B}}},{key:"sourceMapPop",value:function(M){var P=this.sourceMapPopInternal(),D=P.location;if(this.sourceMapStack.length&&D.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){var L=this.sourceMapPopInternal(),q=L.parts,B=L.location,F=B.start.offset<D.end.offset?{start:D.end,end:B.end,source:B.source}:B;this.sourceMapStack.push([q,q.length+(M||0),F])}}}],[{key:"sourceNode",value:function(M,P,D){var L=T.offsetStart(M);return new R(L.line,L.column?L.column-1:null,String(M.source),P,D)}}]),k})();v.exports=A}),es=U(function(_){_.version="5.0.6"}),Qe=U(function(_){var v=function(k){return k.codePointAt(0).toString(16).toUpperCase()},S=function(k){return(typeof k>"u"?"undefined":_type_of(k))=="object"?"\\\\".concat(k.value):k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(M){return"\\u{".concat(v(M),"}")}).replace(/[\x00-\x0F]/g,function(M){return"\\x0"+v(M)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(M){return"\\x"+v(M)}).replace(/[\u0100-\u0FFF]/g,function(M){return"\\u0"+v(M)}).replace(/[\u1000-\uFFFF]/g,function(M){return"\\u"+v(M)})},R=function(k){return(typeof k>"u"?"undefined":_type_of(k))=="object"?"\\".concat(k.value):k.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(M){return"\\x0"+v(M)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(M){return"\\x"+v(M)}).replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(M){return"\\u{"+v(M)+"}"}).replace(/[\u0100-\u0FFF]/g,function(M){return"\\u0"+v(M)}).replace(/[\u1000-\uFFFF]/g,function(M){return"\\u"+v(M)})},T=function(k){for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=k.length%3,D=k.length-P,L="",q=0;q<D;q+=3)L+=M[k[q]>>2],L+=M[(k[q]&3)<<4|k[q+1]>>4],L+=M[(k[q+1]&15)<<2|k[q+2]>>6],L+=M[k[q+2]&63];return P===1?(L+=M[k[D]>>2],L+=M[(k[D]&3)<<4],L+="=="):P===2&&(L+=M[k[D]>>2],L+=M[(k[D]&3)<<4|k[D+1]>>4],L+=M[(k[D+1]&15)<<2],L+="="),L},A=function(k){var M=k[Symbol.iterator](),P=M.next();return P.done||!M.next().done?-1:P.value.codePointAt(0)};_.hex=v,_.stringEscape=S,_.regexpClassEscape=R,_.base64=T,_.codePointLen1=A}),ts=U(function(_,v){var S=function(M,P){P=P!==void 0?P:{};var D={},L=P.grammarSource,q={Grammar:wn,ImportsAndSource:Fi},B=wn,F="import",j=";",z=",",V="*",G="as",W="{",Y="}",X="from",ee="=",re="/",Q="@",ne=":",ae="|",oe="..",se="(",ce=")",de=".",ye=`
`,we=`\r
`,ge="/*",ve="*/",be="//",ke="\\",me="i",fe='"',xe="'",Ae="[",Se="^",Me="]",Oe="p",Ce="_",$e="u",Be="-",Pe="0",De="b",Le="f",Ne="n",tt="r",it="t",dt="v",pt="x",We=/^[!$&]/,Et=/^[*-+?]/,st=/^[!&]/,xt=/^[\0-\uD7FF\uE000-\uFFFF]/,gt=/^[\uD800-\uDBFF]/,_t=/^[\uDC00-\uDFFF]/,St=/^[\uD800-\uDFFF]/,Lt=RegExp("^[\\t\\v-\\f \\p{Zs}\\xA0\\uFEFF]","u"),jt=/^[\n\r\u2028\u2029]/,Gt=/^[\r\u2028-\u2029]/,At=RegExp("^[\\p{ID_Start}_]","u"),Nt=RegExp("^[$\\p{ID_Continue}]","u"),Ct=/^[\n\r"\\\u2028-\u2029]/,bt=/^[\n\r'\\\u2028-\u2029]/,et=/^[a-z]/i,Re=/^[\n\r\\-\]\u2028-\u2029]/,je=/^["'\\]/,Ue=/^[0-9pux]/,Ze=/^[0-9]/,nt=/^[0-9a-f]/i,wt=/^[{}]/,lt=ml(),Tt=Ut("import",!1),Rt=Ut(";",!1),Mt=Ut(",",!1),$t=Ut("*",!1),yt=Ut("as",!1),vt=Ut("{",!1),Ot=Ut("}",!1),It=Ut("from",!1),sr=Ut("=",!1),zt=Ut("/",!1),ur=Ut("@",!1),hr=Ut(":",!1),or=Mr(["!","$","&"],!1,!1,!1),rr=Mr([["*","+"],"?"],!1,!1,!1),wr=Ut("|",!1),qr=Ut("..",!1),_r=Ut("(",!1),kn=Ut(")",!1),Fr=Ut(".",!1),Tr=Mr(["!","&"],!1,!1,!1),zr=Mr([["\0",""],["",""]],!1,!1,!1),xn=Mr([["\uD800","\uDBFF"]],!1,!1,!1),Kr=Mr([["\uDC00","\uDFFF"]],!1,!1,!1),Wr=Mr([["\uD800","\uDFFF"]],!1,!1,!1),pn=ha("whitespace"),Ea=Mr(["	",["\v","\f"]," ","\\p{Zs}","","\uFEFF"],!1,!1,!0),Xr=Mr([`
`,"\r","\u2028","\u2029"],!1,!1,!1),ti=ha("end of line"),wa=Ut(`
`,!1),Ca=Ut(`\r
`,!1),Ia=Mr(["\r",["\u2028","\u2029"]],!1,!1,!1),Ra=ha("comment"),Lr=Ut("/*",!1),sa=Ut("*/",!1),no=Ut("//",!1),_n=ha("identifier"),Xn=Mr(["\\p{ID_Start}","_"],!1,!1,!0),zn=Ut("\\",!1),Oi=Mr(["$","\\p{ID_Continue}"],!1,!1,!0),Di=ha("literal"),ao=Ut("i",!1),gn=ha("string"),la=Ut('"',!1),Rn=Ut("'",!1),en=Mr([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),Sn=Mr([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),zo=ha("character class"),io=Ut("[",!1),oo=Ut("^",!1),so=Ut("]",!1),Tu=Ut("p",!0),Mn=Ut("_",!1),Vo=Mr([["a","z"]],!1,!0,!1),lo=Ut("u",!1),Ho=Ut("-",!1),ri=Mr([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),el=Ut("0",!1),tl=Mr(['"',"'","\\"],!1,!1,!1),ni=Ut("b",!1),Au=Ut("f",!1),rl=Ut("n",!1),nl=Ut("r",!1),Uo=Ut("t",!1),ku=Ut("v",!1),Mu=Mr([["0","9"],"p","u","x"],!1,!1,!1),uo=Ut("x",!1),ua=Mr([["0","9"]],!1,!1,!1),Go=Mr([["0","9"],["a","f"]],!1,!0,!1),Ko=ha("code block"),ca=Mr(["{","}"],!1,!1,!1);function ai(J,ue,Ee,_e){return{type:"grammar",imports:J,topLevelInitializer:ue,initializer:Ee,rules:_e,location:Xt()}}function al(J,ue){return[J,ue]}function Wo(J){return{type:"top_level_initializer",code:J,codeLocation:Xt()}}function il(J){return{type:"top_level_initializer",code:J,codeLocation:Xt()}}function Pi(J,ue){return{type:"grammar_import",what:J,from:ue,location:Xt()}}function fa(J){return{type:"grammar_import",what:[],from:J,location:Xt()}}function Yo(J,ue){return ue?(ue.unshift(J),ue):[J]}function Ni(J){return{type:"import_binding_default",binding:J[0],location:J[1]}}function Ta(J){return[{type:"import_binding_all",binding:J[0],location:J[1]}]}function Xo(){return[]}function co(J,ue){return{type:"import_binding_rename",rename:J[0],renameLocation:J[1],binding:ue[0],location:ue[1]}}function ol(J){return{type:"import_binding",binding:J[0],location:J[1]}}function fo(J){return{type:"import_module_specifier",module:J,location:Xt()}}function ho(J){return[J,Xt()]}function sl(J){return[J,Xt()]}function En(J){return Na.has(J[0])&&Aa(`Binding identifier can't be a reserved word "`.concat(J[0],'"'),J[1]),J[0]}function Ba(J){return{type:"top_level_initializer",code:J[0],codeLocation:J[1],location:Xt()}}function po(J){return{type:"initializer",code:J[0],codeLocation:J[1],location:Xt()}}function Li(J,ue,Ee){return{type:"rule",name:J[0],nameLocation:J[1],expression:ue!==null?{type:"named",name:ue,expression:Ee,location:Xt()}:Ee,location:Xt()}}function Ou(J,ue){return ue.length>0?{type:"choice",alternatives:[J].concat(ue),location:Xt()}:J}function Qo(J,ue){return ue!==null?{type:"action",expression:J,code:ue[0],codeLocation:ue[1],location:Xt()}:J}function Zo(J,ue){return ue.length>0||J.type==="labeled"&&J.pick?{type:"sequence",elements:[J].concat(ue),location:Xt()}:J}function qi(J,ue,Ee){return Ee.type.startsWith("semantic_")&&Aa('"@" cannot be used on a semantic predicate',J),{type:"labeled",label:ue!==null?ue[0]:null,labelLocation:ue!==null?ue[1]:J,pick:!0,expression:Ee,location:Xt()}}function go(J,ue){return{type:"labeled",label:J[0],labelLocation:J[1],expression:ue,location:Xt()}}function ll(){return Xt()}function Du(J){return Na.has(J[0])&&Aa(`Label can't be a reserved word "`.concat(J[0],'"'),J[1]),J}function Pu(J,ue){return{type:R[J],expression:ue,location:Xt()}}function Nu(J,ue){return{type:T[ue],expression:J,location:Xt()}}function Jo(J,ue,Ee){var _e=ue[0],qe=ue[1];return qe.type==="constant"&&qe.value===0&&Aa("The maximum count of repetitions of the rule must be > 0",qe.location),{type:"repeated",min:_e,max:qe,expression:J,delimiter:Ee,location:Xt()}}function Lu(J,ue){return[J!==null?J:{type:"constant",value:0},ue!==null?ue:{type:"constant",value:null}]}function qu(J){return[null,J]}function Iu(J){return{type:"constant",value:J,location:Xt()}}function Bu(J){return{type:"variable",value:J[0],location:Xt()}}function $u(J){return{type:"function",value:J[0],codeLocation:J[1],location:Xt()}}function ul(J){return J.type==="labeled"||J.type==="sequence"?{type:"group",expression:J,location:Xt()}:J}function Fu(J,ue){return{type:"library_ref",name:ue[0],library:J[0],libraryNumber:-1,location:Xt()}}function ju(J){return{type:"rule_ref",name:J[0],location:Xt()}}function zu(J,ue){return{type:A[J],code:ue[0],codeLocation:ue[1],location:Xt()}}function Vu(J,ue){return[J+ue.join(""),Xt()]}function rs(J,ue){return{type:"literal",value:J,ignoreCase:ue!==null,location:Xt()}}function Hu(J){return J.join("")}function Uu(J){return J.join("")}function Gu(J,ue,Ee){if(J&&ue.length===0)if(Ee.unicode)ue=[["\uD800","\uDFFF"]];else return{type:"any",location:Xt()};return{type:"class",parts:ue.filter(function(_e){return _e!==""}),inverted:!!J,ignoreCase:!!Ee.ignoreCase,location:Xt(),unicode:!!Ee.unicode||ue.flat().some(function(_e){return(typeof _e>"u"?"undefined":_type_of(_e))=="object"&&_e.unicode||_e.codePointAt(0)>65535})}}function cl(J){try{new RegExp("[\\".concat(J,"]"),"u")}catch{Aa("Invalid Unicode property escape")}return{type:"classEscape",value:J,unicode:!0,location:Xt()}}function Ku(J){var ue=Object.fromEntries(J);return Object.keys(ue).length!==J.length&&Aa("Invalid flags"),ue}function Wu(){return["ignoreCase",!0]}function Yu(){return["unicode",!0]}function Xu(J,ue){return J.codePointAt(0)>ue.codePointAt(0)&&Aa("Invalid character range: "+nc()+"."),[J,ue]}function Qu(){return""}function Zu(){return"\0"}function Ju(){return"\b"}function ec(){return"\f"}function tc(){return`
`}function ns(){return"\r"}function Ii(){return"	"}function rc(){return"\v"}function fl(J){return String.fromCharCode(parseInt(J,16))}function dl(J){return String.fromCharCode(parseInt(J,16))}function hl(J){return String.fromCodePoint(parseInt(J,16))}function pl(){return{type:"any",location:Xt()}}function gl(J){return[J,Xt()]}function ii(J){return parseInt(J,10)}var le=P.peg$currPos|0,kt=le,oi=[{line:1,column:1}],On=le,Bi=P.peg$maxFailExpected||[],He=P.peg$silentFails|0,da;if(P.startRule){if(!(P.startRule in q))throw new Error(`Can't start parsing from rule "`+P.startRule+'".');B=q[P.startRule]}function nc(){return M.substring(kt,le)}function Xt(){return mo(kt,le)}function Aa(J,ue){throw ue=ue!==void 0?ue:mo(kt,le),ac(J,ue)}function $i(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:le,ue=M.codePointAt(J);return ue===void 0?"":String.fromCodePoint(ue)}function Ut(J,ue){return{type:"literal",text:J,ignoreCase:ue}}function Mr(J,ue,Ee,_e){return{type:"class",parts:J,inverted:ue,ignoreCase:Ee,unicode:_e}}function ml(){return{type:"any"}}function vl(){return{type:"end"}}function ha(J){return{type:"other",description:J}}function yl(J){var ue=oi[J],Ee;if(ue)return ue;if(J>=oi.length)Ee=oi.length-1;else for(Ee=J;!oi[--Ee];);for(ue=oi[Ee],ue={line:ue.line,column:ue.column};Ee<J;)M.charCodeAt(Ee)===10?(ue.line++,ue.column=1):ue.column++,Ee++;return oi[J]=ue,ue}function mo(J,ue,Ee){var _e=yl(J),qe=yl(ue),Xe={source:L,start:{offset:J,line:_e.line,column:_e.column},end:{offset:ue,line:qe.line,column:qe.column}};return Xe}function ot(J){le<On||(le>On&&(On=le,Bi=[]),Bi.push(J))}function ac(J,ue){return new k(J,null,null,ue)}function ic(J,ue,Ee){return new k(k.buildMessage(J,ue),J,ue,Ee)}function wn(){var J,ue,Ee,_e,qe,Xe,Vt,Dr;if(J=le,ue=as(),Ee=le,_e=qt(),qe=Fa(),qe!==D?Ee=qe:(le=Ee,Ee=D),Ee===D&&(Ee=null),_e=le,qe=qt(),Xe=El(),Xe!==D?_e=Xe:(le=_e,_e=D),_e===D&&(_e=null),qe=qt(),Xe=[],Vt=le,Dr=cs(),Dr!==D?(qt(),Vt=Dr):(le=Vt,Vt=D),Vt!==D)for(;Vt!==D;)Xe.push(Vt),Vt=le,Dr=cs(),Dr!==D?(qt(),Vt=Dr):(le=Vt,Vt=D);else Xe=D;return Xe!==D?(kt=J,J=ai(ue,Ee,_e,Xe)):(le=J,J=D),J}function Fi(){var J,ue,Ee;return J=le,ue=xl(),Ee=bl(),kt=J,J=al(ue,Ee),J}function bl(){var J,ue,Ee,_e;for(J=le,ue=le,Ee=[],M.length>le?(_e=M.charAt(le),le++):(_e=D,He===0&&ot(lt));_e!==D;)Ee.push(_e),M.length>le?(_e=M.charAt(le),le++):(_e=D,He===0&&ot(lt));return ue=M.substring(ue,le),kt=J,ue=Wo(ue),J=ue,J}function xl(){var J,ue;return J=le,ue=le,as(),ue=M.substring(ue,le),kt=J,ue=il(ue),J=ue,J}function as(){var J,ue;for(J=[],ue=is();ue!==D;)J.push(ue),ue=is();return J}function is(){var J,ue,Ee,_e,qe,Xe,Vt,Dr;return J=le,qt(),M.substr(le,6)===F?(ue=F,le+=6):(ue=D,He===0&&ot(Tt)),ue!==D?(qt(),Ee=os(),Ee!==D?(_e=qt(),qe=ji(),qe!==D?(Xe=le,Vt=qt(),M.charCodeAt(le)===59?(Dr=j,le++):(Dr=D,He===0&&ot(Rt)),Dr!==D?(Vt=[Vt,Dr],Xe=Vt):(le=Xe,Xe=D),Xe===D&&(Xe=null),kt=J,J=Pi(Ee,qe)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J===D&&(J=le,qt(),M.substr(le,6)===F?(ue=F,le+=6):(ue=D,He===0&&ot(Tt)),ue!==D?(qt(),Ee=ka(),Ee!==D?(_e=le,qe=qt(),M.charCodeAt(le)===59?(Xe=j,le++):(Xe=D,He===0&&ot(Rt)),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D),_e===D&&(_e=null),kt=J,J=fa(Ee)):(le=J,J=D)):(le=J,J=D)),J}function os(){var J,ue,Ee,_e,qe;return J=$a(),J===D&&(J=vo(),J===D&&(J=le,ue=oc(),ue!==D?(Ee=le,qt(),M.charCodeAt(le)===44?(_e=z,le++):(_e=D,He===0&&ot(Mt)),_e!==D?(qt(),qe=$a(),qe===D&&(qe=vo()),qe!==D?Ee=qe:(le=Ee,Ee=D)):(le=Ee,Ee=D),Ee===D&&(Ee=null),kt=J,J=Yo(ue,Ee)):(le=J,J=D))),J}function oc(){var J,ue;return J=le,ue=pa(),ue!==D&&(kt=J,ue=Ni(ue)),J=ue,J}function $a(){var J,ue,Ee,_e;return J=le,M.charCodeAt(le)===42?(ue=V,le++):(ue=D,He===0&&ot($t)),ue!==D?(qt(),M.substr(le,2)===G?(Ee=G,le+=2):(Ee=D,He===0&&ot(yt)),Ee!==D?(qt(),_e=pa(),_e!==D?(kt=J,J=Ta(_e)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J}function vo(){var J,ue,Ee,_e,qe,Xe;return J=le,M.charCodeAt(le)===123?(ue=W,le++):(ue=D,He===0&&ot(vt)),ue!==D?(qt(),M.charCodeAt(le)===125?(Ee=Y,le++):(Ee=D,He===0&&ot(Ot)),Ee!==D?(kt=J,J=Xo()):(le=J,J=D)):(le=J,J=D),J===D&&(J=le,M.charCodeAt(le)===123?(ue=W,le++):(ue=D,He===0&&ot(vt)),ue!==D?(qt(),Ee=ss(),Ee!==D?(qt(),_e=le,M.charCodeAt(le)===44?(qe=z,le++):(qe=D,He===0&&ot(Mt)),qe!==D?(Xe=qt(),qe=[qe,Xe],_e=qe):(le=_e,_e=D),_e===D&&(_e=null),M.charCodeAt(le)===125?(qe=Y,le++):(qe=D,He===0&&ot(Ot)),qe!==D?J=Ee:(le=J,J=D)):(le=J,J=D)):(le=J,J=D)),J}function ji(){var J,ue,Ee;return J=le,M.substr(le,4)===X?(ue=X,le+=4):(ue=D,He===0&&ot(It)),ue!==D?(qt(),Ee=ka(),Ee!==D?J=Ee:(le=J,J=D)):(le=J,J=D),J}function ss(){var J,ue,Ee,_e,qe,Xe,Vt;for(J=le,ue=[],Ee=ls();Ee!==D;)ue.push(Ee),Ee=le,_e=le,qe=qt(),M.charCodeAt(le)===44?(Xe=z,le++):(Xe=D,He===0&&ot(Mt)),Xe!==D?(Vt=qt(),qe=[qe,Xe,Vt],_e=qe):(le=_e,_e=D),_e!==D?(_e=ls(),_e===D?(le=Ee,Ee=D):Ee=_e):Ee=_e;return ue.length<1?(le=J,J=D):J=ue,J}function ls(){var J,ue,Ee,_e;return J=le,ue=us(),ue!==D?(qt(),M.substr(le,2)===G?(Ee=G,le+=2):(Ee=D,He===0&&ot(yt)),Ee!==D?(qt(),_e=pa(),_e!==D?(kt=J,J=co(ue,_e)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J===D&&(J=le,ue=pa(),ue!==D&&(kt=J,ue=ol(ue)),J=ue),J}function ka(){var J,ue;return J=le,ue=Qn(),ue!==D&&(kt=J,ue=fo(ue)),J=ue,J}function pa(){var J,ue;return J=le,ue=Sl(),ue!==D&&(kt=J,ue=ho(ue)),J=ue,J}function us(){var J,ue;return J=ga(),J===D&&(J=le,ue=Qn(),ue!==D&&(kt=J,ue=sl(ue)),J=ue),J}function Sl(){var J,ue;return J=le,ue=ga(),ue!==D&&(kt=J,ue=En(ue)),J=ue,J}function Fa(){var J,ue,Ee,_e,qe;return J=le,M.charCodeAt(le)===123?(ue=W,le++):(ue=D,He===0&&ot(vt)),ue!==D?(Ee=Hn(),Ee!==D?(M.charCodeAt(le)===125?(_e=Y,le++):(_e=D,He===0&&ot(Ot)),_e!==D?(qe=Pa(),qe!==D?(kt=J,J=Ba(Ee)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J}function El(){var J,ue,Ee;return J=le,ue=Hn(),ue!==D?(Ee=Pa(),Ee!==D?(kt=J,J=po(ue)):(le=J,J=D)):(le=J,J=D),J}function cs(){var J,ue,Ee,_e,qe,Xe;return J=le,ue=ga(),ue!==D?(qt(),Ee=le,_e=Qn(),_e!==D?(qt(),Ee=_e):(le=Ee,Ee=D),Ee===D&&(Ee=null),M.charCodeAt(le)===61?(_e=ee,le++):(_e=D,He===0&&ot(sr)),_e!==D?(qt(),qe=yo(),qe!==D?(Xe=Pa(),Xe!==D?(kt=J,J=Li(ue,Ee,qe)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J}function yo(){var J,ue,Ee,_e,qe,Xe;if(J=le,ue=fs(),ue!==D){for(Ee=[],_e=le,qt(),M.charCodeAt(le)===47?(qe=re,le++):(qe=D,He===0&&ot(zt)),qe!==D?(qt(),Xe=fs(),Xe!==D?_e=Xe:(le=_e,_e=D)):(le=_e,_e=D);_e!==D;)Ee.push(_e),_e=le,qt(),M.charCodeAt(le)===47?(qe=re,le++):(qe=D,He===0&&ot(zt)),qe!==D?(qt(),Xe=fs(),Xe!==D?_e=Xe:(le=_e,_e=D)):(le=_e,_e=D);kt=J,J=Ou(ue,Ee)}else le=J,J=D;return J}function fs(){var J,ue,Ee,_e;return J=le,ue=sc(),ue!==D?(Ee=le,qt(),_e=Hn(),_e!==D?Ee=_e:(le=Ee,Ee=D),Ee===D&&(Ee=null),kt=J,J=Qo(ue,Ee)):(le=J,J=D),J}function sc(){var J,ue,Ee,_e,qe;if(J=le,ue=ds(),ue!==D){for(Ee=[],_e=le,qt(),qe=ds(),qe!==D?_e=qe:(le=_e,_e=D);_e!==D;)Ee.push(_e),_e=le,qt(),qe=ds(),qe!==D?_e=qe:(le=_e,_e=D);kt=J,J=Zo(ue,Ee)}else le=J,J=D;return J}function ds(){var J,ue,Ee,_e;return J=le,ue=wl(),ue!==D?(Ee=hs(),Ee===D&&(Ee=null),_e=zi(),_e!==D?(kt=J,J=qi(ue,Ee,_e)):(le=J,J=D)):(le=J,J=D),J===D&&(J=le,ue=hs(),ue!==D?(Ee=zi(),Ee!==D?(kt=J,J=go(ue,Ee)):(le=J,J=D)):(le=J,J=D),J===D&&(J=zi())),J}function wl(){var J,ue;return J=le,M.charCodeAt(le)===64?(ue=Q,le++):(ue=D,He===0&&ot(ur)),ue!==D&&(kt=J,ue=ll()),J=ue,J}function hs(){var J,ue,Ee;return J=le,ue=ga(),ue!==D?(qt(),M.charCodeAt(le)===58?(Ee=ne,le++):(Ee=D,He===0&&ot(hr)),Ee!==D?(qt(),kt=J,J=Du(ue)):(le=J,J=D)):(le=J,J=D),J}function zi(){var J,ue,Ee;return J=le,ue=Vn(),ue!==D?(qt(),Ee=Vi(),Ee!==D?(kt=J,J=Pu(ue,Ee)):(le=J,J=D)):(le=J,J=D),J===D&&(J=Vi()),J}function Vn(){var J;return J=M.charAt(le),We.test(J)?le++:(J=D,He===0&&ot(or)),J}function Vi(){var J,ue,Ee;return J=le,ue=ui(),ue!==D?(qt(),Ee=Dn(),Ee!==D?(kt=J,J=Nu(ue,Ee)):(le=J,J=D)):(le=J,J=D),J===D&&(J=si(),J===D&&(J=ui())),J}function Dn(){var J;return J=M.charAt(le),Et.test(J)?le++:(J=D,He===0&&ot(rr)),J}function si(){var J,ue,Ee,_e,qe,Xe,Vt;return J=le,ue=ui(),ue!==D?(qt(),M.charCodeAt(le)===124?(Ee=ae,le++):(Ee=D,He===0&&ot(wr)),Ee!==D?(qt(),_e=ps(),_e!==D?(qt(),qe=le,M.charCodeAt(le)===44?(Xe=z,le++):(Xe=D,He===0&&ot(Mt)),Xe!==D?(qt(),Vt=yo(),Vt!==D?(qt(),qe=Vt):(le=qe,qe=D)):(le=qe,qe=D),qe===D&&(qe=null),M.charCodeAt(le)===124?(Xe=ae,le++):(Xe=D,He===0&&ot(wr)),Xe!==D?(kt=J,J=Jo(ue,_e,qe)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J}function ps(){var J,ue,Ee,_e;return J=le,ue=li(),ue===D&&(ue=null),qt(),M.substr(le,2)===oe?(Ee=oe,le+=2):(Ee=D,He===0&&ot(qr)),Ee!==D?(qt(),_e=li(),_e===D&&(_e=null),kt=J,J=Lu(ue,_e)):(le=J,J=D),J===D&&(J=le,ue=li(),ue!==D&&(kt=J,ue=qu(ue)),J=ue),J}function li(){var J,ue;return J=le,ue=ba(),ue!==D&&(kt=J,ue=Iu(ue)),J=ue,J===D&&(J=le,ue=ga(),ue!==D&&(kt=J,ue=Bu(ue)),J=ue,J===D&&(J=le,ue=Hn(),ue!==D&&(kt=J,ue=$u(ue)),J=ue)),J}function ui(){var J,ue,Ee,_e;return J=Nn(),J===D&&(J=Ui(),J===D&&(J=Es(),J===D&&(J=gs(),J===D&&(J=ja(),J===D&&(J=le,M.charCodeAt(le)===40?(ue=se,le++):(ue=D,He===0&&ot(_r)),ue!==D?(qt(),Ee=yo(),Ee!==D?(qt(),M.charCodeAt(le)===41?(_e=ce,le++):(_e=D,He===0&&ot(kn)),_e!==D?(kt=J,J=ul(Ee)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D)))))),J}function gs(){var J,ue,Ee,_e,qe,Xe,Vt,Dr;return J=le,ue=ga(),ue!==D?(M.charCodeAt(le)===46?(Ee=de,le++):(Ee=D,He===0&&ot(Fr)),Ee!==D?(_e=ga(),_e!==D?(kt=J,J=Fu(ue,_e)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J===D&&(J=le,ue=ga(),ue!==D?(Ee=le,He++,_e=le,qe=qt(),Xe=le,Vt=Qn(),Vt!==D?(Dr=qt(),Vt=[Vt,Dr],Xe=Vt):(le=Xe,Xe=D),Xe===D&&(Xe=null),M.charCodeAt(le)===61?(Vt=ee,le++):(Vt=D,He===0&&ot(sr)),Vt!==D?(qe=[qe,Xe,Vt],_e=qe):(le=_e,_e=D),He--,_e===D?Ee=void 0:(le=Ee,Ee=D),Ee!==D?(kt=J,J=ju(ue)):(le=J,J=D)):(le=J,J=D)),J}function ja(){var J,ue,Ee;return J=le,ue=Cl(),ue!==D?(qt(),Ee=Hn(),Ee!==D?(kt=J,J=zu(ue,Ee)):(le=J,J=D)):(le=J,J=D),J}function Cl(){var J;return J=M.charAt(le),st.test(J)?le++:(J=D,He===0&&ot(Tr)),J}function dn(){var J;return J=ci(),J===D&&(J=lc()),J}function ci(){var J;return J=M.charAt(le),xt.test(J)?le++:(J=D,He===0&&ot(zr)),J}function lc(){var J,ue,Ee,_e;return J=le,ue=le,Ee=M.charAt(le),gt.test(Ee)?le++:(Ee=D,He===0&&ot(xn)),Ee!==D?(_e=M.charAt(le),_t.test(_e)?le++:(_e=D,He===0&&ot(Kr)),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D)):(le=ue,ue=D),ue!==D?J=M.substring(J,le):J=ue,J===D&&(J=M.charAt(le),St.test(J)?le++:(J=D,He===0&&ot(Wr))),J}function mn(){var J;return He++,J=$i(),Lt.test(J)?le+=J.length:(J=D,He===0&&ot(Ea)),He--,J===D&&He===0&&ot(pn),J}function za(){var J;return J=M.charAt(le),jt.test(J)?le++:(J=D,He===0&&ot(Xr)),J}function Pn(){var J;return He++,M.charCodeAt(le)===10?(J=ye,le++):(J=D,He===0&&ot(wa)),J===D&&(M.substr(le,2)===we?(J=we,le+=2):(J=D,He===0&&ot(Ca)),J===D&&(J=M.charAt(le),Gt.test(J)?le++:(J=D,He===0&&ot(Ia)))),He--,J===D&&He===0&&ot(ti),J}function vs(){var J;return He++,J=bo(),J===D&&(J=xo()),He--,J===D&&He===0&&ot(Ra),J}function bo(){var J,ue,Ee,_e,qe,Xe;if(J=le,M.substr(le,2)===ge?(ue=ge,le+=2):(ue=D,He===0&&ot(Lr)),ue!==D){for(Ee=[],_e=le,qe=le,He++,M.substr(le,2)===ve?(Xe=ve,le+=2):(Xe=D,He===0&&ot(sa)),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);_e!==D;)Ee.push(_e),_e=le,qe=le,He++,M.substr(le,2)===ve?(Xe=ve,le+=2):(Xe=D,He===0&&ot(sa)),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);M.substr(le,2)===ve?(_e=ve,le+=2):(_e=D,He===0&&ot(sa)),_e!==D?(ue=[ue,Ee,_e],J=ue):(le=J,J=D)}else le=J,J=D;return J}function Ma(){var J,ue,Ee,_e,qe,Xe;if(J=le,M.substr(le,2)===ge?(ue=ge,le+=2):(ue=D,He===0&&ot(Lr)),ue!==D){for(Ee=[],_e=le,qe=le,He++,M.substr(le,2)===ve?(Xe=ve,le+=2):(Xe=D,He===0&&ot(sa)),Xe===D&&(Xe=za()),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);_e!==D;)Ee.push(_e),_e=le,qe=le,He++,M.substr(le,2)===ve?(Xe=ve,le+=2):(Xe=D,He===0&&ot(sa)),Xe===D&&(Xe=za()),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);M.substr(le,2)===ve?(_e=ve,le+=2):(_e=D,He===0&&ot(sa)),_e!==D?(ue=[ue,Ee,_e],J=ue):(le=J,J=D)}else le=J,J=D;return J}function xo(){var J,ue,Ee,_e,qe,Xe;if(J=le,M.substr(le,2)===be?(ue=be,le+=2):(ue=D,He===0&&ot(no)),ue!==D){for(Ee=[],_e=le,qe=le,He++,Xe=za(),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);_e!==D;)Ee.push(_e),_e=le,qe=le,He++,Xe=za(),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);ue=[ue,Ee],J=ue}else le=J,J=D;return J}function ga(){var J,ue,Ee,_e;if(He++,J=le,ue=ys(),ue!==D){for(Ee=[],_e=bs();_e!==D;)Ee.push(_e),_e=bs();kt=J,J=Vu(ue,Ee)}else le=J,J=D;return He--,J===D&&(ue=D,He===0&&ot(_n)),J}function ys(){var J,ue,Ee;return J=$i(),At.test(J)?le+=J.length:(J=D,He===0&&ot(Xn)),J===D&&(J=le,M.charCodeAt(le)===92?(ue=ke,le++):(ue=D,He===0&&ot(zn)),ue!==D?(Ee=Da(),Ee!==D?J=Ee:(le=J,J=D)):(le=J,J=D)),J}function bs(){var J;return J=$i(),Nt.test(J)?le+=J.length:(J=D,He===0&&ot(Oi)),J}function Nn(){var J,ue,Ee;return He++,J=le,ue=Qn(),ue!==D?(M.charCodeAt(le)===105?(Ee=me,le++):(Ee=D,He===0&&ot(ao)),Ee===D&&(Ee=null),kt=J,J=rs(ue,Ee)):(le=J,J=D),He--,J===D&&(ue=D,He===0&&ot(Di)),J}function Qn(){var J,ue,Ee,_e;if(He++,J=le,M.charCodeAt(le)===34?(ue=fe,le++):(ue=D,He===0&&ot(la)),ue!==D){for(Ee=[],_e=Va();_e!==D;)Ee.push(_e),_e=Va();M.charCodeAt(le)===34?(_e=fe,le++):(_e=D,He===0&&ot(la)),_e!==D?(kt=J,J=Hu(Ee)):(le=J,J=D)}else le=J,J=D;if(J===D)if(J=le,M.charCodeAt(le)===39?(ue=xe,le++):(ue=D,He===0&&ot(Rn)),ue!==D){for(Ee=[],_e=Hi();_e!==D;)Ee.push(_e),_e=Hi();M.charCodeAt(le)===39?(_e=xe,le++):(_e=D,He===0&&ot(Rn)),_e!==D?(kt=J,J=Uu(Ee)):(le=J,J=D)}else le=J,J=D;return He--,J===D&&(ue=D,He===0&&ot(gn)),J}function Va(){var J,ue,Ee,_e;return J=le,ue=le,Ee=le,He++,_e=M.charAt(le),Ct.test(_e)?le++:(_e=D,He===0&&ot(en)),He--,_e===D?Ee=void 0:(le=Ee,Ee=D),Ee!==D?(_e=dn(),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D)):(le=ue,ue=D),ue!==D?J=M.substring(J,le):J=ue,J===D&&(J=le,M.charCodeAt(le)===92?(ue=ke,le++):(ue=D,He===0&&ot(zn)),ue!==D?(Ee=Cn(),Ee!==D?J=Ee:(le=J,J=D)):(le=J,J=D),J===D&&(J=ra())),J}function Hi(){var J,ue,Ee,_e;return J=le,ue=le,Ee=le,He++,_e=M.charAt(le),bt.test(_e)?le++:(_e=D,He===0&&ot(Sn)),He--,_e===D?Ee=void 0:(le=Ee,Ee=D),Ee!==D?(_e=dn(),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D)):(le=ue,ue=D),ue!==D?J=M.substring(J,le):J=ue,J===D&&(J=le,M.charCodeAt(le)===92?(ue=ke,le++):(ue=D,He===0&&ot(zn)),ue!==D?(Ee=Cn(),Ee!==D?J=Ee:(le=J,J=D)):(le=J,J=D),J===D&&(J=ra())),J}function Ui(){var J,ue,Ee,_e,qe,Xe;if(He++,J=le,M.charCodeAt(le)===91?(ue=Ae,le++):(ue=D,He===0&&ot(io)),ue!==D){for(M.charCodeAt(le)===94?(Ee=Se,le++):(Ee=D,He===0&&ot(oo)),Ee===D&&(Ee=null),_e=[],qe=Tn(),qe===D&&(qe=vr(),qe===D&&(qe=Qt()));qe!==D;)_e.push(qe),qe=Tn(),qe===D&&(qe=vr(),qe===D&&(qe=Qt()));M.charCodeAt(le)===93?(qe=Me,le++):(qe=D,He===0&&ot(so)),qe!==D?(Xe=_l(),kt=J,J=Gu(Ee,_e,Xe)):(le=J,J=D)}else le=J,J=D;return He--,J===D&&(ue=D,He===0&&ot(zo)),J}function Tn(){var J,ue,Ee;return J=le,M.charCodeAt(le)===92?(ue=ke,le++):(ue=D,He===0&&ot(zn)),ue!==D?(Ee=Ln(),Ee!==D?J=Ee:(le=J,J=D)):(le=J,J=D),J}function Ln(){var J,ue,Ee,_e,qe,Xe,Vt;return J=le,ue=le,Ee=le,_e=M.charAt(le),_e.toLowerCase()===Oe?le++:(_e=D,He===0&&ot(Tu)),_e!==D?(M.charCodeAt(le)===123?(qe=W,le++):(qe=D,He===0&&ot(vt)),qe!==D?(Xe=Oa(),Xe!==D?(M.charCodeAt(le)===125?(Vt=Y,le++):(Vt=D,He===0&&ot(Ot)),Vt!==D?(_e=[_e,qe,Xe,Vt],Ee=_e):(le=Ee,Ee=D)):(le=Ee,Ee=D)):(le=Ee,Ee=D)):(le=Ee,Ee=D),Ee!==D?ue=M.substring(ue,le):ue=Ee,ue!==D&&(kt=J,ue=cl(ue)),J=ue,J}function Oa(){var J,ue,Ee,_e;return J=le,ue=Zn(),ue!==D?(M.charCodeAt(le)===61?(Ee=ee,le++):(Ee=D,He===0&&ot(sr)),Ee!==D?(_e=Jn(),_e!==D?(ue=[ue,Ee,_e],J=ue):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J===D&&(J=ma()),J}function Zn(){var J,ue,Ee;if(J=le,ue=[],Ee=Ki(),Ee!==D)for(;Ee!==D;)ue.push(Ee),Ee=Ki();else ue=D;return ue!==D?J=M.substring(J,le):J=ue,J}function Jn(){var J,ue,Ee;if(J=le,ue=[],Ee=Gi(),Ee!==D)for(;Ee!==D;)ue.push(Ee),Ee=Gi();else ue=D;return ue!==D?J=M.substring(J,le):J=ue,J}function ma(){var J,ue,Ee;if(J=le,ue=[],Ee=Gi(),Ee!==D)for(;Ee!==D;)ue.push(Ee),Ee=Gi();else ue=D;return ue!==D?J=M.substring(J,le):J=ue,J}function Gi(){var J;return J=Ki(),J===D&&(J=di()),J}function Ki(){var J;return J=xs(),J===D&&(M.charCodeAt(le)===95?(J=Ce,le++):(J=D,He===0&&ot(Mn))),J}function xs(){var J;return J=M.charAt(le),et.test(J)?le++:(J=D,He===0&&ot(Vo)),J}function _l(){var J,ue,Ee;for(J=le,ue=[],Ee=nn();Ee!==D;)ue.push(Ee),Ee=nn();return kt=J,ue=Ku(ue),J=ue,J}function nn(){var J,ue;return J=le,M.charCodeAt(le)===105?(ue=me,le++):(ue=D,He===0&&ot(ao)),ue!==D&&(kt=J,ue=Wu()),J=ue,J===D&&(J=le,M.charCodeAt(le)===117?(ue=$e,le++):(ue=D,He===0&&ot(lo)),ue!==D&&(kt=J,ue=Yu()),J=ue),J}function vr(){var J,ue,Ee,_e;return J=le,ue=Qt(),ue!==D?(M.charCodeAt(le)===45?(Ee=Be,le++):(Ee=D,He===0&&ot(Ho)),Ee!==D?(_e=Qt(),_e!==D?(kt=J,J=Xu(ue,_e)):(le=J,J=D)):(le=J,J=D)):(le=J,J=D),J}function Qt(){var J,ue,Ee,_e;return J=le,ue=le,Ee=le,He++,_e=M.charAt(le),Re.test(_e)?le++:(_e=D,He===0&&ot(ri)),He--,_e===D?Ee=void 0:(le=Ee,Ee=D),Ee!==D?(_e=dn(),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D)):(le=ue,ue=D),ue!==D?J=M.substring(J,le):J=ue,J===D&&(J=le,M.charCodeAt(le)===92?(ue=ke,le++):(ue=D,He===0&&ot(zn)),ue!==D?(Ee=Cn(),Ee!==D?J=Ee:(le=J,J=D)):(le=J,J=D),J===D&&(J=ra())),J}function ra(){var J,ue,Ee;return J=le,M.charCodeAt(le)===92?(ue=ke,le++):(ue=D,He===0&&ot(zn)),ue!==D?(Ee=Pn(),Ee!==D?(kt=J,J=Qu()):(le=J,J=D)):(le=J,J=D),J}function Cn(){var J,ue,Ee,_e;return J=Ss(),J===D&&(J=le,M.charCodeAt(le)===48?(ue=Pe,le++):(ue=D,He===0&&ot(el)),ue!==D?(Ee=le,He++,_e=di(),He--,_e===D?Ee=void 0:(le=Ee,Ee=D),Ee!==D?(kt=J,J=Zu()):(le=J,J=D)):(le=J,J=D),J===D&&(J=fi(),J===D&&(J=Da()))),J}function Ss(){var J;return J=va(),J===D&&(J=Rl()),J}function va(){var J,ue;return J=M.charAt(le),je.test(J)?le++:(J=D,He===0&&ot(tl)),J===D&&(J=le,M.charCodeAt(le)===98?(ue=De,le++):(ue=D,He===0&&ot(ni)),ue!==D&&(kt=J,ue=Ju()),J=ue,J===D&&(J=le,M.charCodeAt(le)===102?(ue=Le,le++):(ue=D,He===0&&ot(Au)),ue!==D&&(kt=J,ue=ec()),J=ue,J===D&&(J=le,M.charCodeAt(le)===110?(ue=Ne,le++):(ue=D,He===0&&ot(rl)),ue!==D&&(kt=J,ue=tc()),J=ue,J===D&&(J=le,M.charCodeAt(le)===114?(ue=tt,le++):(ue=D,He===0&&ot(nl)),ue!==D&&(kt=J,ue=ns()),J=ue,J===D&&(J=le,M.charCodeAt(le)===116?(ue=it,le++):(ue=D,He===0&&ot(Uo)),ue!==D&&(kt=J,ue=Ii()),J=ue,J===D&&(J=le,M.charCodeAt(le)===118?(ue=dt,le++):(ue=D,He===0&&ot(ku)),ue!==D&&(kt=J,ue=rc()),J=ue)))))),J}function Rl(){var J,ue,Ee,_e;return J=le,ue=le,Ee=le,He++,_e=Tl(),_e===D&&(_e=za()),He--,_e===D?Ee=void 0:(le=Ee,Ee=D),Ee!==D?(_e=dn(),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D)):(le=ue,ue=D),ue!==D?J=M.substring(J,le):J=ue,J}function Tl(){var J;return J=va(),J===D&&(J=M.charAt(le),Ue.test(J)?le++:(J=D,He===0&&ot(Mu))),J}function fi(){var J,ue,Ee,_e,qe,Xe;return J=le,M.charCodeAt(le)===120?(ue=pt,le++):(ue=D,He===0&&ot(uo)),ue!==D?(Ee=le,_e=le,qe=qn(),qe!==D?(Xe=qn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D),_e!==D?Ee=M.substring(Ee,le):Ee=_e,Ee!==D?(kt=J,J=fl(Ee)):(le=J,J=D)):(le=J,J=D),J}function Da(){var J,ue,Ee,_e,qe,Xe,Vt,Dr;if(J=le,M.charCodeAt(le)===117?(ue=$e,le++):(ue=D,He===0&&ot(lo)),ue!==D?(Ee=le,_e=le,qe=qn(),qe!==D?(Xe=qn(),Xe!==D?(Vt=qn(),Vt!==D?(Dr=qn(),Dr!==D?(qe=[qe,Xe,Vt,Dr],_e=qe):(le=_e,_e=D)):(le=_e,_e=D)):(le=_e,_e=D)):(le=_e,_e=D),_e!==D?Ee=M.substring(Ee,le):Ee=_e,Ee!==D?(kt=J,J=dl(Ee)):(le=J,J=D)):(le=J,J=D),J===D)if(J=le,M.charCodeAt(le)===117?(ue=$e,le++):(ue=D,He===0&&ot(lo)),ue!==D)if(M.charCodeAt(le)===123?(Ee=W,le++):(Ee=D,He===0&&ot(vt)),Ee!==D){if(_e=le,qe=[],Xe=qn(),Xe!==D)for(;Xe!==D;)qe.push(Xe),Xe=qn();else qe=D;qe!==D?_e=M.substring(_e,le):_e=qe,_e!==D?(M.charCodeAt(le)===125?(qe=Y,le++):(qe=D,He===0&&ot(Ot)),qe!==D?(kt=J,J=hl(_e)):(le=J,J=D)):(le=J,J=D)}else le=J,J=D;else le=J,J=D;return J}function di(){var J;return J=M.charAt(le),Ze.test(J)?le++:(J=D,He===0&&ot(ua)),J}function qn(){var J;return J=M.charAt(le),nt.test(J)?le++:(J=D,He===0&&ot(Go)),J}function Es(){var J,ue;return J=le,M.charCodeAt(le)===46?(ue=de,le++):(ue=D,He===0&&ot(Fr)),ue!==D&&(kt=J,ue=pl()),J=ue,J}function Hn(){var J,ue,Ee,_e;return He++,J=le,M.charCodeAt(le)===123?(ue=W,le++):(ue=D,He===0&&ot(vt)),ue!==D?(Ee=ya(),M.charCodeAt(le)===125?(_e=Y,le++):(_e=D,He===0&&ot(Ot)),_e!==D?J=Ee:(le=J,J=D)):(le=J,J=D),He--,J===D&&(ue=D,He===0&&ot(Ko)),J}function ya(){var J,ue;return J=le,ue=na(),kt=J,ue=gl(ue),J=ue,J}function na(){var J,ue,Ee,_e,qe,Xe;if(J=le,ue=[],Ee=[],_e=le,qe=le,He++,Xe=M.charAt(le),wt.test(Xe)?le++:(Xe=D,He===0&&ot(ca)),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D),_e!==D)for(;_e!==D;)Ee.push(_e),_e=le,qe=le,He++,Xe=M.charAt(le),wt.test(Xe)?le++:(Xe=D,He===0&&ot(ca)),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);else Ee=D;for(Ee===D&&(Ee=le,M.charCodeAt(le)===123?(_e=W,le++):(_e=D,He===0&&ot(vt)),_e!==D?(qe=na(),M.charCodeAt(le)===125?(Xe=Y,le++):(Xe=D,He===0&&ot(Ot)),Xe!==D?(_e=[_e,qe,Xe],Ee=_e):(le=Ee,Ee=D)):(le=Ee,Ee=D));Ee!==D;){if(ue.push(Ee),Ee=[],_e=le,qe=le,He++,Xe=M.charAt(le),wt.test(Xe)?le++:(Xe=D,He===0&&ot(ca)),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D),_e!==D)for(;_e!==D;)Ee.push(_e),_e=le,qe=le,He++,Xe=M.charAt(le),wt.test(Xe)?le++:(Xe=D,He===0&&ot(ca)),He--,Xe===D?qe=void 0:(le=qe,qe=D),qe!==D?(Xe=dn(),Xe!==D?(qe=[qe,Xe],_e=qe):(le=_e,_e=D)):(le=_e,_e=D);else Ee=D;Ee===D&&(Ee=le,M.charCodeAt(le)===123?(_e=W,le++):(_e=D,He===0&&ot(vt)),_e!==D?(qe=na(),M.charCodeAt(le)===125?(Xe=Y,le++):(Xe=D,He===0&&ot(Ot)),Xe!==D?(_e=[_e,qe,Xe],Ee=_e):(le=Ee,Ee=D)):(le=Ee,Ee=D))}return J=M.substring(J,le),J}function ba(){var J,ue,Ee,_e;if(J=le,ue=le,Ee=[],_e=di(),_e!==D)for(;_e!==D;)Ee.push(_e),_e=di();else Ee=D;return Ee!==D?ue=M.substring(ue,le):ue=Ee,ue!==D&&(kt=J,ue=ii(ue)),J=ue,J}function qt(){var J,ue;for(J=[],ue=mn(),ue===D&&(ue=Pn(),ue===D&&(ue=vs()));ue!==D;)J.push(ue),ue=mn(),ue===D&&(ue=Pn(),ue===D&&(ue=vs()));return J}function ws(){var J,ue;for(J=[],ue=mn(),ue===D&&(ue=Ma());ue!==D;)J.push(ue),ue=mn(),ue===D&&(ue=Ma());return J}function Pa(){var J,ue,Ee,_e;if(J=[],ue=le,Ee=qt(),M.charCodeAt(le)===59?(_e=j,le++):(_e=D,He===0&&ot(Rt)),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D),ue!==D)for(;ue!==D;)J.push(ue),ue=le,Ee=qt(),M.charCodeAt(le)===59?(_e=j,le++):(_e=D,He===0&&ot(Rt)),_e!==D?(Ee=[Ee,_e],ue=Ee):(le=ue,ue=D);else J=D;return J===D&&(J=le,ue=ws(),Ee=xo(),Ee===D&&(Ee=null),_e=Pn(),_e!==D?(ue=[ue,Ee,_e],J=ue):(le=J,J=D),J===D&&(J=le,ue=qt(),Ee=So(),Ee!==D?(ue=[ue,Ee],J=ue):(le=J,J=D))),J}function So(){var J,ue;return J=le,He++,M.length>le?(ue=M.charAt(le),le++):(ue=D,He===0&&ot(lt)),He--,ue===D?J=void 0:(le=J,J=D),J}var Na=new Set(P.reservedWords);da=B();var Vr=da!==D&&le===M.length;function Wi(){throw da!==D&&le<M.length&&ot(vl()),ic(Bi,On<M.length?$i(On):null,On<M.length?mo(On,On+1):mo(On,On))}if(P.peg$library)return{peg$result:da,peg$currPos:le,peg$FAILED:D,peg$maxFailExpected:Bi,peg$maxFailPos:On,peg$success:Vr,peg$throw:Vr?void 0:Wi};if(Vr)return da;Wi()},R={$:"text","&":"simple_and","!":"simple_not"},T={"?":"optional","*":"zero_or_more","+":"one_or_more"},A={"&":"semantic_and","!":"semantic_not"},k=(function(M){_inherits(P,M);function P(D,L,q,B){_class_call_check(this,P);var F;return F=_call_super(this,P,[D]),F.expected=L,F.found=q,F.location=B,F.name="SyntaxError",F}return _create_class(P,[{key:"format",value:function(D){var L=this,q="Error: "+this.message;if(this.location){var B=null,F=D.find(function(ee){return ee.source===L.location.source});F&&(B=F.text.split(/\r\n|\n|\r/g));var j=this.location.start,z=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(j):j,V=this.location.source+":"+z.line+":"+z.column;if(B){var G=this.location.end,W="".padEnd(z.line.toString().length," "),Y=B[j.line-1],X=(j.line===G.line?G.column:Y.length+1)-j.column||1;q+=`
 --> `+V+`
`+W+` |
`+z.line+" | "+Y+`
`+W+" | "+"".padEnd(j.column-1," ")+"".padEnd(X,"^")}else q+=`
 at `+V}return q}}],[{key:"buildMessage",value:function(D,L){function q(X){return X.codePointAt(0).toString(16).toUpperCase()}var B=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function F(X){return B?X.replace(B,function(ee){return"\\u{"+q(ee)+"}"}):X}function j(X){return F(X.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ee){return"\\x0"+q(ee)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ee){return"\\x"+q(ee)}))}function z(X){return F(X.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ee){return"\\x0"+q(ee)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ee){return"\\x"+q(ee)}))}var V={literal:function(X){return'"'+j(X.text)+'"'},class:function(X){var ee=X.parts.map(function(re){return Array.isArray(re)?z(re[0])+"-"+z(re[1]):z(re)});return"["+(X.inverted?"^":"")+ee.join("")+"]"+(X.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(X){return X.description}};function G(X){return V[X.type](X)}function W(X){var ee=X.map(G);if(ee.sort(),ee.length>0){for(var re=1,Q=1;Q<ee.length;Q++)ee[Q-1]!==ee[Q]&&(ee[re]=ee[Q],re++);ee.length=re}switch(ee.length){case 1:return ee[0];case 2:return ee[0]+" or "+ee[1];default:return ee.slice(0,-1).join(", ")+", or "+ee[ee.length-1]}}function Y(X){return X?'"'+j(X)+'"':"end of input"}return"Expected "+W(D)+" but "+Y(L)+" found."}}]),P})(_wrap_native_super(SyntaxError));v.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:k,parse:S}}),Nr=U(function(_,v){var S=function(W,Y,X){var ee=z.offsetStart(Y),re=ee.line,Q=ee.column-1,ne=W.split(`
`);return ne.length===1?new j(re,Q,String(Y.source),W,X):new j(null,null,String(Y.source),ne.map(function(ae,oe){return new j(re+oe,oe===0?Q:0,String(Y.source),oe===ne.length-1?ae:[ae,`
`],X)}))},R=function(W,Y,X,ee,re){if(X){var Q=z.offsetEnd(X);return new j(null,null,String(X.source),[W,S(Y,X,re),new j(Q.line,Q.column-1,String(X.source),ee)])}return new j(null,null,null,[W,Y,ee])},T=function(W,Y){if(!W.literals||!W.locations||!W.classes||!W.expectations||!W.functions||!W.importedNames)throw new Error("generateJS: generate bytecode was not called.");var X=W.literals,ee=W.locations,re=W.classes,Q=W.expectations,ne=W.functions,ae=W.importedNames;if(!Y.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");var oe=Y.allowedStartRules,se=Y.dependencies||{};function ce(Ce){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Be=Ce.match(/^\n*([ \t]+)/);return(Be?Ce.replace(new RegExp("^".concat(Be[1]),"gm"),$e):Ce).replace(/[ \t]+$/,"")}function de(Ce){var $e=!0,Be=0;function Pe(De){return Array.isArray(De)?De.map(function(Le){return Pe(Le)}):_instanceof(De,j)?(Be++,De.children=Pe(De.children),Be--,De):($e?De=De.replace(/^(.+)$/gm,"  $1"):De=De.replace(/\n(\s*\S)/g,`
  $1`),$e=!Be||De.endsWith(`
`),De)}return Pe(Ce)}function ye(Ce){return"peg$c"+Ce}function we(Ce){return"peg$r"+Ce}function ge(Ce){return"peg$e"+Ce}function ve(Ce){return"peg$f"+Ce}function be(Ce){return"peg$import"+Ce}function ke(Ce){return"peg$parse"+Ce}function me(){function Ce(De){return'"'+q(De)+'"'}function $e(De){return"/^["+(De.inverted?"^":"")+De.value.map(function(Le){return Array.isArray(Le)?B(Le[0])+"-"+B(Le[1]):B(Le)}).join("")+"]/"+(De.ignoreCase?"i":"")+(De.unicode?"u":"")}function Be(De){switch(De.type){case"rule":return'peg$otherExpectation("'+q(De.value)+'")';case"literal":return'peg$literalExpectation("'+q(De.value)+'", '+De.ignoreCase+")";case"class":return"peg$classExpectation(["+De.value.map(function(Le){return Array.isArray(Le)?'["'+q(Le[0])+'", "'+q(Le[1])+'"]':'"'+q(Le)+'"'}).join(", ")+"], "+De.inverted+", "+De.ignoreCase+", "+De.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(De)+")")}}function Pe(De,Le){return R(`
  function `.concat(ve(Le),"(").concat(De.params.join(", "),") {"),ce(De.body,"    "),De.location,"  }")}return new j(null,null,Y.grammarSource,[X.map(function(De,Le){return"  const "+ye(Le)+" = "+Ce(De)+";"}).concat("",re.map(function(De,Le){return"  const "+we(Le)+" = "+$e(De)+";"})).concat("",Q.map(function(De,Le){return"  const "+ge(Le)+" = "+Be(De)+";"})).concat("").join(`
`)].concat(_to_consumable_array(ne.map(Pe))))}function fe(Ce,$e){var Be=[];return Be.push(""),Y.trace&&Be.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+Ce+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),Y.cache&&(Be.push("const key = peg$currPos * "+W.rules.length+" + "+$e+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),Y.trace&&Be.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Ce+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Ce+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),Be.push("  return cached.result;","}","")),Be}function xe(Ce,$e){var Be=[];return Y.cache&&Be.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+$e+" };"),Y.trace&&Be.push("","if ("+$e+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Ce+",","    result: "+$e+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Ce+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),Be.push("","return "+$e+";"),Be}function Ae(Ce){var $e,Be,Pe,De=[],Le=Ce.bytecode,Ne=new M(Ce.name,"s","let",Le);function tt(dt){var pt=function(){switch(dt[We]){case k.PUSH_EMPTY_STRING:st.push(Ne.push("''")),We++;break;case k.PUSH_CURR_POS:st.push(Ne.push("peg$currPos")),We++;break;case k.PUSH_UNDEFINED:st.push(Ne.push("undefined")),We++;break;case k.PUSH_NULL:st.push(Ne.push("null")),We++;break;case k.PUSH_FAILED:st.push(Ne.push("peg$FAILED")),We++;break;case k.PUSH_EMPTY_ARRAY:st.push(Ne.push("[]")),We++;break;case k.POP:Ne.pop(),We++;break;case k.POP_CURR_POS:st.push("peg$currPos = "+Ne.pop()+";"),We++;break;case k.POP_N:Ne.pop(dt[We+1]),We+=2;break;case k.NIP:xt=Ne.pop(),Ne.pop(),st.push(Ne.push(xt)),We++;break;case k.APPEND:xt=Ne.pop(),st.push(Ne.top()+".push("+xt+");"),We++;break;case k.WRAP:st.push(Ne.push("["+Ne.pop(dt[We+1]).join(", ")+"]")),We+=2;break;case k.TEXT:st.push(Ne.push("input.substring("+Ne.pop()+", peg$currPos)")),We++;break;case k.PLUCK:{var At=dt[We+3-1],Nt=3+At;xt=dt.slice(We+3,We+Nt),xt=At===1?Ne.index(xt[0]):"[ ".concat(xt.map(function(nt){return Ne.index(nt)}).join(", ")," ]"),Ne.pop(dt[We+1]),st.push(Ne.push(xt)),We+=Nt;break}case k.IF:gt(Ne.top(),0);break;case k.IF_ERROR:gt(Ne.top()+" === peg$FAILED",0);break;case k.IF_NOT_ERROR:gt(Ne.top()+" !== peg$FAILED",0);break;case k.IF_LT:gt(Ne.top()+".length < "+dt[We+1],1);break;case k.IF_GE:gt(Ne.top()+".length >= "+dt[We+1],1);break;case k.IF_LT_DYNAMIC:gt(Ne.top()+".length < ("+Ne.index(dt[We+1])+"|0)",1);break;case k.IF_GE_DYNAMIC:gt(Ne.top()+".length >= ("+Ne.index(dt[We+1])+"|0)",1);break;case k.WHILE_NOT_ERROR:jt(Ne.top()+" !== peg$FAILED");break;case k.MATCH_ANY:gt("input.length > peg$currPos",0);break;case k.MATCH_STRING:{var Ct=dt[We+1],bt=X[Ct];Lt(function(nt,wt){return bt.length>1?"".concat(nt," === ").concat(ye(Ct)):(nt=wt?"".concat(nt,".charCodeAt(0)"):"input.charCodeAt(peg$currPos)","".concat(nt," === ").concat(bt.charCodeAt(0)))},1,bt.length);break}case k.MATCH_STRING_IC:{var et=dt[We+1];Lt(function(nt){return"".concat(nt,".toLowerCase() === ").concat(ye(et))},1,X[et].length);break}case k.MATCH_CHAR_CLASS:{var Re=dt[We+1];Lt(function(nt){return"".concat(we(Re),".test(").concat(nt,")")},1,1);break}case k.MATCH_UNICODE_CLASS:{var je=dt[We+1];Lt(function(nt){return"".concat(we(je),".test(").concat(nt,")")},1,-1);break}case k.ACCEPT_N:st.push(Ne.push(_t(dt[We+1]))),st.push(St(dt[We+1],Ne.top())),We+=2;break;case k.ACCEPT_STRING:st.push(Ne.push(ye(dt[We+1]))),st.push(X[dt[We+1]].length>1?"peg$currPos += "+X[dt[We+1]].length+";":"peg$currPos++;"),We+=2;break;case k.FAIL:st.push(Ne.push("peg$FAILED")),st.push("if (peg$silentFails === 0) { peg$fail("+ge(dt[We+1])+"); }"),We+=2;break;case k.LOAD_SAVED_POS:st.push("peg$savedPos = "+Ne.index(dt[We+1])+";"),We+=2;break;case k.UPDATE_SAVED_POS:st.push("peg$savedPos = peg$currPos;"),We++;break;case k.CALL:xt=Gt(4),Ne.pop(dt[We+2]),st.push(Ne.push(xt)),We+=4+dt[We+3];break;case k.RULE:st.push(Ne.push(ke(W.rules[dt[We+1]].name)+"()")),We+=2;break;case k.LIBRARY_RULE:{var Ue=dt[We+2],Ze=Ue===-1?"":', "'+ae[Ue]+'"';st.push(Ne.push("peg$callLibrary("+be(dt[We+1])+Ze+")")),We+=3;break}case k.SILENT_FAILS_ON:st.push("peg$silentFails++;"),We++;break;case k.SILENT_FAILS_OFF:st.push("peg$silentFails--;"),We++;break;case k.SOURCE_MAP_PUSH:Ne.sourceMapPush(st,ee[dt[We+1]]),We+=2;break;case k.SOURCE_MAP_POP:{Ne.sourceMapPop(),We++;break}case k.SOURCE_MAP_LABEL_PUSH:Ne.labels[dt[We+1]]={label:X[dt[We+2]],location:ee[dt[We+3]]},We+=4;break;case k.SOURCE_MAP_LABEL_POP:delete Ne.labels[dt[We+1]],We+=2;break;default:throw new Error("Invalid opcode: "+dt[We]+".")}},We=0,Et=dt.length,st=[],xt;function gt(At,Nt,Ct){var bt,et,Re=Nt+3,je=dt[We+Re-2],Ue=dt[We+Re-1],Ze=_sliced_to_array(Ne.checkedIf(We,function(){return We+=Re+je,(Ct||tt)(dt.slice(We-je,We))},Ue>0?function(){return We+=Ue,tt(dt.slice(We-Ue,We))}:null),2),nt=Ze[0],wt=Ze[1];st.push("if ("+At+") {"),(bt=st).push.apply(bt,_to_consumable_array(de(nt))),Ue>0&&(st.push("} else {"),(et=st).push.apply(et,_to_consumable_array(de(wt)))),st.push("}")}function _t(At){switch(At){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return"input.substr(peg$currPos, ".concat(At,")")}}function St(At,Nt){switch(At){case-1:return"peg$currPos += ".concat(Nt,".length;");case 1:return"peg$currPos++;";default:return"peg$currPos += ("+At+");"}}function Lt(At,Nt,Ct){var bt=Nt+3,et=_t(Ct),Re=null;dt[We+bt]===k.ACCEPT_N&&dt[We+bt+1]===Ct&&(st.push(Ne.push(et)),et=Ne.pop(),Re=function(je){Ne.sp++;var Ue=tt(je.slice(2));return Ue.unshift(St(Ct,et)),Ue}),gt(At(et,Re!==null),Nt,Re)}function jt(At){var Nt,Ct=dt[We+2-1],bt=Ne.checkedLoop(We,function(){return We+=2+Ct,tt(dt.slice(We-Ct,We))});st.push("while ("+At+") {"),(Nt=st).push.apply(Nt,_to_consumable_array(de(bt))),st.push("}")}function Gt(At){var Nt=dt[We+At-1];return ve(dt[We+1])+"("+dt.slice(We+At,We+At+Nt).map(function(Ct){return Ne.index(Ct)}).join(", ")+")"}for(;We<Et;)pt();return st}var it=tt(Le);return De.push(R("function ",ke(Ce.name),Ce.nameLocation,`() {
`,Ce.name)),Y.trace&&De.push("  var startPos = peg$currPos;"),De.push(de(Ne.defines())),($e=De).push.apply($e,_to_consumable_array(de(fe('"'+q(Ce.name)+'"',A.indexOfRule(W,Ce.name))))),(Be=De).push.apply(Be,_to_consumable_array(de(it))),(Pe=De).push.apply(Pe,_to_consumable_array(de(xe('"'+q(Ce.name)+'"',Ne.result())))),De.push("}"),De.push(""),De}function Se(Ce){return Ce.codeLocation?S(Ce.code,Ce.codeLocation,"$"+Ce.type):Ce.code}function Me(){var Ce=[],$e=W.topLevelInitializer;if($e)if(Array.isArray($e)){if(Y.format==="es"){var Be=[],Pe=[],De=!0,Le=!1,Ne=void 0;try{for(var tt=$e[Symbol.iterator](),it;!(De=(it=tt.next()).done);De=!0){var dt=it.value,pt=_sliced_to_array(G(dt.code,{startRule:"ImportsAndSource",grammarSource:new z(dt.codeLocation.source,dt.codeLocation.start)}),2),We=pt[0],Et=pt[1];We.code?(Be.push(We),Pe.push(Et)):Pe.push(dt)}}catch(Ue){Le=!0,Ne=Ue}finally{try{!De&&tt.return!=null&&tt.return()}finally{if(Le)throw Ne}}$e=Pe.concat(Be)}var st=$e.slice(0).reverse(),xt=!0,gt=!1,_t=void 0;try{for(var St=st[Symbol.iterator](),Lt;!(xt=(Lt=St.next()).done);xt=!0){var jt=Lt.value;Ce.push(Se(jt)),Ce.push("")}}catch(Ue){gt=!0,_t=Ue}finally{try{!xt&&St.return!=null&&St.return()}finally{if(gt)throw _t}}}else Ce.push(Se($e)),Ce.push("");Ce.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),Y.trace&&Ce.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");var Gt=`{
`+oe.map(function(Ue){return"    ".concat(Ue,": ").concat(ke(Ue),`,
`)}).join("")+"  }",At=ke(oe[0]),Nt=!0,Ct=!1,bt=void 0;if(Ce.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+Gt+";","  let peg$startRuleFunction = "+At+";","",me(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),Y.cache&&Ce.push("  let peg$resultsCache = {};",""),Y.trace&&Ce.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),Ce.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),W.imports.length>0&&Ce.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),W.rules.forEach(function(Ue){var Ze;(Ze=Ce).push.apply(Ze,_to_consumable_array(de(Ae(Ue))))}),W.initializer)if(Array.isArray(W.initializer))try{for(var et=W.initializer[Symbol.iterator](),Re;!(Nt=(Re=et.next()).done);Nt=!0){var je=Re.value;Ce.push(Se(je)),Ce.push("")}}catch(Ue){Ct=!0,bt=Ue}finally{try{!Nt&&et.return!=null&&et.return()}finally{if(Ct)throw bt}}else Ce.push(Se(W.initializer)),Ce.push("");return Ce.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new j(null,null,Y.grammarSource,Ce.map(function(Ue){return _instanceof(Ue,j)?Ue:Ue+`
`}))}function Oe(Ce){function $e(){return["// @generated by Peggy ".concat(D,"."),"//","// https://peggyjs.org/"]}function Be(){var De=["{"];return Y.trace&&De.push("  DefaultTracer: peg$DefaultTracer,"),Y.allowedStartRules&&De.push("  StartRules: ["+Y.allowedStartRules.map(function(Le){return'"'+Le+'"'}).join(", ")+"],"),De.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),De.push("}"),De.join(`
`)}var Pe={bare:function(){if(Object.keys(se).length>0||W.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return _to_consumable_array($e()).concat(["(function() {",'  "use strict";',Ce,de("return "+Be()+";"),"})()"])},commonjs:function(){var Le=Object.keys(se),Ne=$e();Ne.push("",'"use strict";'),Le.length>0&&(Le.forEach(function(dt){Ne.push("const "+dt+' = require("'+q(se[dt])+'");')}),Ne.push(""));for(var tt=W.imports.length,it=0;it<tt;it++)Ne.push("const "+be(it)+' = require("'+q(W.imports[it].from.module)+'");');return Ne.push("",Ce,"","module.exports = "+Be()+";"),Ne},es:function(){var Le=Object.keys(se),Ne=$e();Ne.push(""),Le.length>0&&(Le.forEach(function(it){Ne.push("import "+it+' from "'+q(se[it])+'";')}),Ne.push(""));for(var tt=0;tt<W.imports.length;tt++)Ne.push("import * as "+be(tt)+' from "'+q(W.imports[tt].from.module)+'";');return Ne.push("",Ce,""),Ne.push("const peg$allowedStartRules = [","  "+(Y.allowedStartRules?Y.allowedStartRules.map(function(it){return'"'+it+'"'}).join(`,
  `):""),"];",""),Ne.push("export {"),Y.trace&&Ne.push("  peg$DefaultTracer as DefaultTracer,"),Ne.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),Ne},amd:function(){if(W.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");var Le=Object.keys(se),Ne="["+Le.map(function(it){return se[it]}).map(function(it){return'"'+q(it)+'"'}).join(", ")+"]",tt=Le.join(", ");return _to_consumable_array($e()).concat(["define("+Ne+", function("+tt+") {",'  "use strict";',Ce,"",de("return "+Be()+";"),"});"])},globals:function(){if(Object.keys(se).length>0||W.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!Y.exportVar)throw new Error("No export variable defined for format 'globals'.");return _to_consumable_array($e()).concat(["(function(root) {",'  "use strict";',Ce,"",de("root."+Y.exportVar+" = "+Be()+";"),"})(this);"])},umd:function(){if(W.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");var Le=Object.keys(se),Ne=Le.map(function(We){return se[We]}),tt="["+Ne.map(function(We){return'"'+q(We)+'"'}).join(", ")+"]",it=Ne.map(function(We){return'require("'+q(We)+'")'}).join(", "),dt=Le.join(", "),pt=$e();return pt.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+tt+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+it+");"),Y.exportVar&&pt.push("  } else {","    root."+Y.exportVar+" = factory();"),pt.push("  }","})(this, function("+dt+") {",'  "use strict";',Ce,"",de("return "+Be()+";"),"});"),pt}}[Y.format||"bare"]();return new j(null,null,Y.grammarSource,Pe.map(function(De){return _instanceof(De,j)?De:De+`
`}))}W.code=Oe(Me())},A=he(),k=Ht(),M=Rr(),P=es(),D=P.version,L=Qe(),q=L.stringEscape,B=L.regexpClassEscape,F=Kt(),j=F.SourceNode,z=Ve(),V=ts(),G=V.parse;v.exports=T}),kr=U(function(_,v){var S=function(A,k,M){function P(L){return L.type==="rule"&&L.expression.type==="rule_ref"}function D(L,q,B){T.build({rule_ref:function(F){F.name===q&&(F.name=B,M.info('Proxy rule "'.concat(q,'" replaced by the rule "').concat(B,'"'),F.location,[{message:"This rule will be used",location:R.findRule(L,B).nameLocation}]))}})(L)}A.rules.forEach(function(L){P(L)&&D(A,L.name,L.expression.name)})},R=he(),T=K();v.exports=S}),jr=U(function(_,v){var S=function(z,V){var G=z,W=V;Object.keys(G).forEach(function(Y){return delete G[Y]}),Object.keys(W).forEach(function(Y){G[Y]=W[Y]})},R=function(z){z.sort(function(Q,ne){var ae=_sliced_to_array(Array.isArray(Q)?Q:[Q,Q],2),oe=ae[0],se=ae[1],ce=_sliced_to_array(Array.isArray(ne)?ne:[ne,ne],2),de=ce[0],ye=ce[1];return oe!==de?oe<de?-1:1:se!==ye?se>ye?-1:1:0});for(var V="",G="",W=0;W<z.length;W++){var Y=z[W],X=_sliced_to_array(Array.isArray(Y)?Y:[Y,Y],2),ee=X[0],re=X[1];if(typeof ee=="string"&&typeof re=="string"&&typeof V=="string"&&typeof G=="string"){if(re<=G){z.splice(W--,1);continue}if(G.charCodeAt(0)+1>=ee.charCodeAt(0)){z.splice(W--,1),z[W]=[V,G=re];continue}}V=ee,G=re}return z},T=function(z,V){P.build({class:function(G){var W;if(G.unicode){var Y=[],X=!0,ee=!1,re=void 0;try{for(var Q=G.parts[Symbol.iterator](),ne;!(X=(ne=Q.next()).done);X=!0){var ae=ne.value;if(Array.isArray(ae)){var oe=_sliced_to_array(ae.map(function(de){return de.codePointAt(0)}),2),se=oe[0],ce=oe[1];se<B&&ce>F&&(V.info("Removing surrogate range from [".concat(M(ae[0]),"-").concat(M(ae[1]),"]"),G.location),Y.push([j,ae[1]]),ae[1]=q)}}}catch(de){ee=!0,re=de}finally{try{!X&&Q.return!=null&&Q.return()}finally{if(ee)throw re}}(W=G.parts).push.apply(W,_to_consumable_array(Y))}}})(z)},A=function(z,V,G){var W=Object.create(null);z.rules.forEach(function(Q){return W[Q.name]=Q.expression});var Y=new Set;T(z,G);var X=[function(Q){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(Q.type){case"class":if(Q.inverted)break;return ne?_object_spread_props(_object_spread({},Q),{parts:_to_consumable_array(Q.parts)}):Q;case"literal":{var ae=L(Q.value);if(ae<0)break;return{type:"class",parts:[Q.value],inverted:!1,ignoreCase:Q.ignoreCase,location:Q.location,unicode:ae>65535}}case"rule_ref":{var oe=W[Q.name];if(!oe)break;Y.has(Q.name)||(Y.add(Q.name),re(oe));var se=ee(oe,!0);return se&&(se.location=Q.location),se}}return null},P.build({choice:function(Q){var ne=null,ae=!1;Q.alternatives.forEach(function(oe,se){var ce;re(oe);var de=ee(oe);if(!de){ne=null;return}ne&&ne.ignoreCase===de.ignoreCase?((ce=ne.parts).push.apply(ce,_to_consumable_array(de.parts)),Q.alternatives[se-1]=ne,Q.alternatives[se]=ne,ne.unicode=ne.unicode||de.unicode,ne.location={source:ne.location.source,start:ne.location.start,end:de.location.end},ae=!0):ne=de}),ae&&(Q.alternatives=Q.alternatives.filter(function(oe,se,ce){return!se||oe!==ce[se-1]}),Q.alternatives.forEach(function(oe,se){oe.type==="class"&&(oe.parts=R(oe.parts),oe.parts.length===1&&!Array.isArray(oe.parts[0])&&typeof oe.parts[0]=="string"&&!oe.inverted&&(Q.alternatives[se]={type:"literal",value:oe.parts[0],ignoreCase:oe.ignoreCase,location:oe.location}))}),Q.alternatives.length===1&&S(Q,Q.alternatives[0]))},text:function(Q){if(re(Q.expression),Q.expression.type==="class"||Q.expression.type==="literal"){var ne=Q.location;S(Q,Q.expression),Q.location=ne}}})],ee=X[0],re=X[1];z.rules.forEach(function(Q){Y.add(Q.name),re(Q.expression)})},k=Qe(),M=k.stringEscape,P=K(),D=Qe(),L=D.codePointLen1,q=String.fromCodePoint(55295),B=55296,F=57343,j=String.fromCodePoint(57344);v.exports=A}),Br=U(function(_,v){var S=function(T,A,k){var M=Object.create(null);T.rules.forEach(function(B){M[B.name]=B});for(var P=_to_consumable_array(A.allowedStartRules),D=new Set,L=R.build({rule_ref:function(B){P.push(B.name)}});P.length;){var q=P.shift();D.has(q)||(D.add(q),L(M[q]))}T.rules=T.rules.filter(function(B){return D.has(B.name)?!0:(k.info('Removing unused rule: "'.concat(B.name,'"'),B.location),!1)})},R=K();v.exports=S}),Gr=U(function(_,v){var S=function(R,T,A){var k={},M=!0,P=!1,D=void 0,L=!0,q=!1,B=void 0;try{for(var F=R.imports[Symbol.iterator](),j;!(L=(j=F.next()).done);L=!0){var z=j.value;try{for(var V=z.what[Symbol.iterator](),G;!(M=(G=V.next()).done);M=!0){var W=G.value;W.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(k,W.binding)&&A.error('Module "'.concat(W.binding,'" is already imported'),W.location,[{message:"Original module location",location:k[W.binding]}]),k[W.binding]=W.location)}}catch(Y){P=!0,D=Y}finally{try{!M&&V.return!=null&&V.return()}finally{if(P)throw D}}}}catch(Y){q=!0,B=Y}finally{try{!L&&F.return!=null&&F.return()}finally{if(q)throw B}}};v.exports=S}),Yr=U(function(_,v){var S=function(T,A,k){function M(L){var q={};return Object.keys(L).forEach(function(B){q[B]=L[B]}),q}function P(L,q){D(L.expression,M(q))}var D=R.build({rule:function(L){D(L.expression,{})},choice:function(L,q){L.alternatives.forEach(function(B){D(B,M(q))})},action:P,labeled:function(L,q){var B=L.label;B&&Object.prototype.hasOwnProperty.call(q,B)&&k.error('Label "'.concat(L.label,'" is already defined'),L.labelLocation,[{message:"Original label location",location:q[B]}]),D(L.expression,q),q[L.label]=L.labelLocation},text:P,simple_and:P,simple_not:P,optional:P,zero_or_more:P,one_or_more:P,repeated:function(L,q){L.delimiter&&D(L.delimiter,M(q)),D(L.expression,M(q))},group:P});D(T)},R=K();v.exports=S}),Jr=U(function(_,v){var S=function(T,A,k){var M={};R.build({rule:function(P){if(Object.prototype.hasOwnProperty.call(M,P.name)){k.error('Rule "'.concat(P.name,'" is already defined'),P.nameLocation,[{message:"Original rule location",location:M[P.name]}]);return}M[P.name]=P.nameLocation}})(T)},R=K();v.exports=S}),Qr=U(function(_,v){var S=function(A,k,M){var P=[],D=[],L=new Set,q=T.build({rule:function(B){M.errors>0||L.has(B.name)||(L.add(B.name),P.push(B.name),q(B.expression),P.pop())},sequence:function(B){M.errors>0||B.elements.every(function(F){return q(F),M.errors>0?!1:!R.alwaysConsumesOnSuccess(A,F)})},repeated:function(B){M.errors>0||(q(B.expression),B.delimiter&&!R.alwaysConsumesOnSuccess(A,B.expression)&&q(B.delimiter))},rule_ref:function(B){if(!(M.errors>0)){D.push(B);var F=R.findRule(A,B.name);if(P.indexOf(B.name)!==-1){P.push(B.name),M.error("Possible infinite loop when parsing (left recursion: "+P.join(" -> ")+")",F.nameLocation,D.map(function(j,z,V){return{message:z+1!==V.length?"Step ".concat(z+1,': call of the rule "').concat(j.name,'" without input consumption'):"Step ".concat(z+1,": calls itself without input consumption - left recursion"),location:j.location}}));return}F&&q(F),D.pop()}}});q(A)},R=he(),T=K();v.exports=S}),Zr=U(function(_,v){var S=function(A,k,M){var P=T.build({zero_or_more:function(D){R.alwaysConsumesOnSuccess(A,D.expression)||M.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",D.location)},one_or_more:function(D){R.alwaysConsumesOnSuccess(A,D.expression)||M.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",D.location)},repeated:function(D){if(D.delimiter&&P(D.delimiter),!(R.alwaysConsumesOnSuccess(A,D.expression)||D.delimiter&&R.alwaysConsumesOnSuccess(A,D.delimiter)))if(D.max.value===null)M.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",D.location);else{var L=D.min?D.min:D.max;M.warning(L.type==="constant"&&D.max.type==="constant"?"An expression may not consume any input and may always match ".concat(D.max.value," times"):"An expression may not consume any input and may always match with a maximum repetition count",D.location)}}});P(A)},R=he(),T=K();v.exports=S}),tn=U(function(_,v){var S=function(A,k,M){T.build({rule_ref:function(P){R.findRule(A,P.name)||M.error('Rule "'.concat(P.name,'" is not defined'),P.location)}})(A)},R=he(),T=K();v.exports=S}),rn=U(function(_,v){var S=function(T,A,k){var M=R.build({action:function(P){M(P.expression,P)},labeled:function(P,D){P.pick&&D&&k.error('"@" cannot be used with an action block',P.labelLocation,[{message:"Action block location",location:D.codeLocation}]),M(P.expression)}});M(T)},R=K();v.exports=S}),cn=U(function(_,v){var S=function(M,P,D){var L=R.build({choice:function(q){q.alternatives.forEach(function(j){return L(j)});for(var B=0;B<q.alternatives.length-1;B++){var F=q.alternatives[B];F.match===A&&D.warning("Always matches.  Following alternatives may not be reachable.",F.location)}},simple_and:function(q){L(q.expression),q.expression.match===A?D.warning("Always matches, making the & predicate redundant.",q.expression.location):q.expression.match===k&&D.warning("Never matches, making the & predicate always fail.",q.expression.location)},simple_not:function(q){L(q.expression),q.expression.match===A?D.warning("Always matches, making the ! predicate always fail.",q.expression.location):q.expression.match===k&&D.warning("Never matches, making the ! predicate redundant.",q.expression.location)}});L(M)},R=K(),T=ht(),A=T.ALWAYS_MATCH,k=T.NEVER_MATCH;v.exports=S}),an=U(function(_,v){var S=ft(),R=(function(){function A(k){_class_call_check(this,A),k=(typeof k>"u"?"undefined":_type_of(k))<"u"?k:{},typeof k.error=="function"&&(this.error=k.error),typeof k.warning=="function"&&(this.warning=k.warning),typeof k.info=="function"&&(this.info=k.info)}return _create_class(A,[{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}}]),A})(),T=(function(){function A(k){_class_call_check(this,A),this._callbacks=new R(k),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}return _create_class(A,[{key:"error",value:function(){for(var M=arguments.length,P=new Array(M),D=0;D<M;D++)P[D]=arguments[D];var L;++this.errors,this._firstError===null&&(this._firstError=_construct(S,_to_consumable_array(P)),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error"].concat(_to_consumable_array(P))),(L=this._callbacks).error.apply(L,[this.stage].concat(_to_consumable_array(P)))}},{key:"warning",value:function(){for(var M=arguments.length,P=new Array(M),D=0;D<M;D++)P[D]=arguments[D];var L;this.problems.push(["warning"].concat(_to_consumable_array(P))),(L=this._callbacks).warning.apply(L,[this.stage].concat(_to_consumable_array(P)))}},{key:"info",value:function(){for(var M=arguments.length,P=new Array(M),D=0;D<M;D++)P[D]=arguments[D];var L;this.problems.push(["info"].concat(_to_consumable_array(P))),(L=this._callbacks).info.apply(L,[this.stage].concat(_to_consumable_array(P)))}},{key:"checkErrors",value:function(){if(this.errors!==0)throw this._firstError}}]),A})();v.exports=T}),un=U(function(exports,module){var processOptions=function(_,v){var S={};return Object.keys(_).forEach(function(R){S[R]=_[R]}),Object.keys(v).forEach(function(R){Object.prototype.hasOwnProperty.call(S,R)||(S[R]=v[R])}),S},isSourceMapCapable=function(_){return typeof _=="string"?_.length>0:_&&typeof _.offset=="function"},addImportedRules=Xs(),fixLibraryNumbers=Ks(),generateBytecode=ir(),generateJS=Nr(),inferenceMatchResult=ht(),removeProxyRules=kr(),mergeCharacterClasses=jr(),removeUnusedRules=Br(),reportDuplicateImports=Gr(),reportDuplicateLabels=Yr(),reportDuplicateRules=Jr(),reportInfiniteRecursion=Qr(),reportInfiniteRepetition=Zr(),reportUndefinedRules=tn(),reportIncorrectPlucking=rn(),reportUnreachable=cn(),Session=an(),visitor=K(),base64=Qe().base64,compiler={visitor,passes:{prepare:[addImportedRules,reportInfiniteRecursion],check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRepetition,reportIncorrectPlucking,reportDuplicateImports],transform:[fixLibraryNumbers,removeProxyRules,mergeCharacterClasses,removeUnusedRules,inferenceMatchResult],semantic:[reportUnreachable],generate:[generateBytecode,generateJS]},compile:function compile(ast,passes,options){options=options!==void 0?options:{};var defaultStartRules=[ast.rules[0].name];if(options=processOptions(options,{allowedStartRules:defaultStartRules,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(options.allowedStartRules===null||options.allowedStartRules===void 0)&&(options.allowedStartRules=defaultStartRules),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");options.allowedStartRules.length===0&&(options.allowedStartRules=defaultStartRules);var allRules=ast.rules.map(function(_){return _.name}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(options.allowedStartRules.some(function(_){return _==="*"}))options.allowedStartRules=allRules;else try{for(var _iterator=options.allowedStartRules[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;if(allRules.indexOf(i)===-1)throw new Error('Unknown start rule "'.concat(i,'"'))}}catch(_){_didIteratorError=!0,_iteratorError=_}finally{try{!_iteratorNormalCompletion&&_iterator.return!=null&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");var session=new Session(options);switch(Object.keys(passes).forEach(function(_){session.stage=_,session.info("Process stage ".concat(_)),passes[_].forEach(function(v){session.info("Process pass ".concat(_,".").concat(v.name)),v(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if((typeof TextEncoder>"u"?"undefined":_type_of(TextEncoder))>"u")throw new Error("TextEncoder is not supported by this platform");var i=ast.code.toStringWithSourceMap(),n=new TextEncoder,e=base64(n.encode(JSON.stringify(i.map.toJSON())));return i.code+"//# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e,`
`)}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),Jl=ft(),Xl=Ve(),Ql=he(),Kl=un(),Zl=ts(),_es=es(),ea=_es.version,ta=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],Ke={VERSION:ea,RESERVED_WORDS:ta,GrammarError:Jl,GrammarLocation:Xl,parser:Zl,compiler:Kl,generate:function _(_,v){v=v!==void 0?v:{};function S(k){var M={};return Object.keys(k).forEach(function(P){M[P]=k[P].slice()}),M}var R="plugins"in v?v.plugins:[],T={parser:Ke.parser,passes:S(Ke.compiler.passes),reservedWords:Ke.RESERVED_WORDS.slice()};R.forEach(function(k){k.use(T,v)}),Array.isArray(_)||(_=[{source:v.grammarSource,text:_}]);var A=Ql.combine(_.map(function(k){var M=k.source,P=k.text;return T.parser.parse(P,{grammarSource:M,reservedWords:T.reservedWords})}));return Ke.compiler.compile(A,T.passes,v)}};return module.exports=Ke,__exports!=exports&&(module.exports=exports),module.exports})})(peggy_min$1,peggy_min$1.exports)),peggy_min$1.exports}var peggy_minExports=requirePeggy_min();const peggy=getDefaultExportFromCjs$1(peggy_minExports),grammarSource=`/*
 * CCS Grammar pro Peggy.js
 */

{
  function node(type, props) {
    return { type, ...props, loc: location() };
  }
}

Start
  = _ prog:Program _ !. { return prog; }

Program
  = head:Definition tail:(_ Definition)* {
      return [head, ...tail.map(t => t[1])];
    }

Definition
  = name:ProcessId _ "=" _ expr:Expression {
      return node("Definition", { name, process: expr });
    }



Expression
  = head:ParallelComponent tail:(_ "+" _ ParallelComponent)* {
      if(tail.length === 0) {
        return head;
      }
      return tail.reduce((acc, curr) => 
        node("Summation", { left: acc, right: curr[3] }), head);
    }


ParallelComponent
  = head:RestrictionComponent tail:(_ "|" _ RestrictionComponent)* {
      if(tail.length === 0) {
        return head;
      }
      return tail.reduce((acc, curr) => 
        node("Parallel", { left: acc, right: curr[3] }), head);
    }

RestrictionComponent
  = base:PrefixComponent ops:(_ (Restriction / Relabeling))* {
      return ops.reduce((acc, op) => {
        const operation = op[1];
        if(operation.type === "Restriction") {
          return node("Restriction", { process: acc, labels: operation.labels });
        } 
        else {
          return node("Relabeling", { process: acc, relabels: operation.relabels });
        }
      }, base);
    }


PrefixComponent
  = action:Action _ "." _ next:PrefixComponent {
      return node("Prefix", { action, next });
    }
  / Primary



TightComponent
  = base:Primary ops:(_ (Restriction / Relabeling))* {
      return ops.reduce((acc, op) => {
        const operation = op[1];
        if(operation.type === "Restriction") {
          return node("Restriction", { process: acc, labels: operation.labels });
        } 
        else {
          return node("Relabeling", { process: acc, relabels: operation.relabels });
        }
      }, base);
    }

Restriction
  = "\\\\" _ "{" _ labels:LabelList _ "}" { 
      if(labels.includes("tau")) {
        error("Cannot restrict 'tau'.");
      }
      return { type: "Restriction", labels }; 
    }

Relabeling
  = "[" _ relabels:RelabelList _ "]" { return { type: "Relabeling", relabels }; }



Primary
  = "(" _ expr:Expression _ ")" { return expr; }
  / "0" { return node("Nil"); }
  / "Nil" { return node("Nil"); }
  / id:ProcessId { return node("ProcessRef", { name: id }); }



Action
  = "tau" { return { label: "tau", isOutput: false }; }
  / "'" name:LabelName { return { label: name, isOutput: true }; } 
  / name:LabelName { return { label: name, isOutput: false }; }

LabelName "label"
  = head:[a-z] tail:[a-zA-Z0-9_]* { return head + tail.join(""); }

ProcessId "process identifier"
  = head:[A-Z] tail:[a-zA-Z0-9_]* { return head + tail.join(""); }

LabelList
  = head:LabelName tail:(_ "," _ LabelName)* { return [head, ...tail.map(t => t[3])]; }

RelabelList
  = head:RelabelPair tail:(_ "," _ RelabelPair)* { return [head, ...tail.map(t => t[3])]; }

RelabelPair
  = newLabel:LabelName _ "/" _ oldLabel:LabelName { 
      if(oldLabel === "tau") {
        error("Cannot rename 'tau'.");
      }
      return { new: newLabel, old: oldLabel }; 
    }

_ "whitespace"
  = (White / Comment)*

White
  = [ \\t\\n\\r]+

Comment
  = "//" [^\\n]*
  / "/*" (!"*/" .)* "*/"`;function validateCCS(_){const v=new Set;let S=null;for(const T of _){if(v.has(T.name))return`Process '${T.name}' is defined multiple times.`;v.add(T.name)}function R(T){if(!(S||!T))switch(T.type){case"ProcessRef":v.has(T.name)||(S=`Used undefined process '${T.name}'.`);break;case"Prefix":R(T.next);break;case"Summation":case"Parallel":R(T.left),R(T.right);break;case"Restriction":case"Relabeling":R(T.process);break}}for(const T of _)if(R(T.process),S)return S;return null}function ccsParser(){try{return peggy.generate(grammarSource)}catch(_){return console.error("Chyba pi generovn parseru: ",_),null}}function TextCCSParser({onCCSSubmit:_,onCCSChange:v,initValue:S,highlightRange:R,className:T,...A}){const[k,M]=reactExports.useState(S??""),[P,D]=reactExports.useState(null),L=reactExports.useMemo(()=>{const B=ccsParser();return B===null&&D("CCS parser was not initialized."),B},[]),q=B=>{M(B)};return reactExports.useEffect(()=>{if(!L)return;const B=setTimeout(()=>{try{const F=L.parse(k),j=validateCCS(F);if(j){D(j);return}v?.(F),_?.(F),D(null)}catch(F){F.location?D(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("b",{children:["Line ",F.location.start.line,":"]})," ",F.message]})):D(F.message)}},300);return()=>{clearTimeout(B)}},[k,L]),jsxRuntimeExports.jsxs("div",{className:cn$1("flex flex-col min-w-0",T),...A,children:[jsxRuntimeExports.jsx(TextEditor,{className:"flex-1 w-full h-full font-mono text-sm overflow-auto",onTextChange:q,initValue:k,highlightRange:R}),jsxRuntimeExports.jsx("div",{className:"shrink-0 flex justify-between items-end mt-2",children:P?jsxRuntimeExports.jsx(AlertBox,{type:"error",className:"shrink-0",children:P}):jsxRuntimeExports.jsx("span",{})})]})}const MIN_EDITOR_WIDTH=750,GAP$1=16;function EditorWrap({onSubmit:_,initValue:v}){const[S,R]=reactExports.useState(null),[T,A]=reactExports.useState(null),[k,M]=reactExports.useState(0),[P,D]=reactExports.useState({width:300,height:400}),L=reactExports.useRef(null),q=z=>{R(z)},B=z=>{R(z),_?.(z)};reactExports.useEffect(()=>{if(!L.current)return;const z=new ResizeObserver(V=>{for(const G of V)M(G.contentRect.width)});return z.observe(L.current),()=>z.disconnect()},[]);const F=k>0&&k<MIN_EDITOR_WIDTH+P.width+GAP$1,j=P.height;return jsxRuntimeExports.jsxs("div",{ref:L,className:`flex gap-x-4 transition-all duration-100 ease-in-out ${F?"flex-col":"flex-row justify-between"}`,children:[jsxRuntimeExports.jsx(TextCCSParser,{className:`grow min-h-[500px] ${F?"w-full":""}`,onCCSChange:q,onCCSSubmit:B,highlightRange:T,initValue:v}),jsxRuntimeExports.jsx(SyntaxTree,{parsedAst:S,onHoverNode:A,onContentResize:D,className:`transition-all duration-100 shrink-0 ${F?"w-full pt-4":"min-w-[300px]"}`,style:{width:F?"100%":Math.min(P.width,k*.5),height:F?j:"auto"}})]})}const Card=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("rounded-xl border bg-card text-card-foreground shadow",_),...v}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("flex flex-col space-y-1.5 p-6",_),...v}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("font-semibold leading-none tracking-tight",_),...v}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("text-sm text-muted-foreground",_),...v}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("p-6 pt-0",_),...v}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_,...v},S)=>jsxRuntimeExports.jsx("div",{ref:S,className:cn$1("flex items-center p-6 pt-0",_),...v}));CardFooter.displayName="CardFooter";const isString$1=_=>typeof _=="string",defer=()=>{let _,v;const S=new Promise((R,T)=>{_=R,v=T});return S.resolve=_,S.reject=v,S},makeString=_=>_==null?"":""+_,copy=(_,v,S)=>{_.forEach(R=>{v[R]&&(S[R]=v[R])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=_=>_&&_.indexOf("###")>-1?_.replace(lastOfPathSeparatorRegExp,"."):_,canNotTraverseDeeper=_=>!_||isString$1(_),getLastOfPath=(_,v,S)=>{const R=isString$1(v)?v.split("."):v;let T=0;for(;T<R.length-1;){if(canNotTraverseDeeper(_))return{};const A=cleanKey(R[T]);!_[A]&&S&&(_[A]=new S),Object.prototype.hasOwnProperty.call(_,A)?_=_[A]:_={},++T}return canNotTraverseDeeper(_)?{}:{obj:_,k:cleanKey(R[T])}},setPath=(_,v,S)=>{const{obj:R,k:T}=getLastOfPath(_,v,Object);if(R!==void 0||v.length===1){R[T]=S;return}let A=v[v.length-1],k=v.slice(0,v.length-1),M=getLastOfPath(_,k,Object);for(;M.obj===void 0&&k.length;)A=`${k[k.length-1]}.${A}`,k=k.slice(0,k.length-1),M=getLastOfPath(_,k,Object),M?.obj&&typeof M.obj[`${M.k}.${A}`]<"u"&&(M.obj=void 0);M.obj[`${M.k}.${A}`]=S},pushPath=(_,v,S,R)=>{const{obj:T,k:A}=getLastOfPath(_,v,Object);T[A]=T[A]||[],T[A].push(S)},getPath=(_,v)=>{const{obj:S,k:R}=getLastOfPath(_,v);if(S&&Object.prototype.hasOwnProperty.call(S,R))return S[R]},getPathWithDefaults=(_,v,S)=>{const R=getPath(_,S);return R!==void 0?R:getPath(v,S)},deepExtend=(_,v,S)=>{for(const R in v)R!=="__proto__"&&R!=="constructor"&&(R in _?isString$1(_[R])||_[R]instanceof String||isString$1(v[R])||v[R]instanceof String?S&&(_[R]=v[R]):deepExtend(_[R],v[R],S):_[R]=v[R]);return _},regexEscape=_=>_.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=_=>isString$1(_)?_.replace(/[&<>"'\/]/g,v=>_entityMap[v]):_;class RegExpCache{constructor(v){this.capacity=v,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(v){const S=this.regExpMap.get(v);if(S!==void 0)return S;const R=new RegExp(v);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(v,R),this.regExpQueue.push(v),R}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(_,v,S)=>{v=v||"",S=S||"";const R=chars.filter(k=>v.indexOf(k)<0&&S.indexOf(k)<0);if(R.length===0)return!0;const T=looksLikeObjectPathRegExpCache.getRegExp(`(${R.map(k=>k==="?"?"\\?":k).join("|")})`);let A=!T.test(_);if(!A){const k=_.indexOf(S);k>0&&!T.test(_.substring(0,k))&&(A=!0)}return A},deepFind=(_,v,S=".")=>{if(!_)return;if(_[v])return Object.prototype.hasOwnProperty.call(_,v)?_[v]:void 0;const R=v.split(S);let T=_;for(let A=0;A<R.length;){if(!T||typeof T!="object")return;let k,M="";for(let P=A;P<R.length;++P)if(P!==A&&(M+=S),M+=R[P],k=T[M],k!==void 0){if(["string","number","boolean"].indexOf(typeof k)>-1&&P<R.length-1)continue;A+=P-A+1;break}T=k}return T},getCleanedCode=_=>_?.replace("_","-"),consoleLogger={type:"logger",log(_){this.output("log",_)},warn(_){this.output("warn",_)},error(_){this.output("error",_)},output(_,v){console?.[_]?.apply?.(console,v)}};class Logger{constructor(v,S={}){this.init(v,S)}init(v,S={}){this.prefix=S.prefix||"i18next:",this.logger=v||consoleLogger,this.options=S,this.debug=S.debug}log(...v){return this.forward(v,"log","",!0)}warn(...v){return this.forward(v,"warn","",!0)}error(...v){return this.forward(v,"error","")}deprecate(...v){return this.forward(v,"warn","WARNING DEPRECATED: ",!0)}forward(v,S,R,T){return T&&!this.debug?null:(isString$1(v[0])&&(v[0]=`${R}${this.prefix} ${v[0]}`),this.logger[S](v))}create(v){return new Logger(this.logger,{prefix:`${this.prefix}:${v}:`,...this.options})}clone(v){return v=v||this.options,v.prefix=v.prefix||this.prefix,new Logger(this.logger,v)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(v,S){return v.split(" ").forEach(R=>{this.observers[R]||(this.observers[R]=new Map);const T=this.observers[R].get(S)||0;this.observers[R].set(S,T+1)}),this}off(v,S){if(this.observers[v]){if(!S){delete this.observers[v];return}this.observers[v].delete(S)}}emit(v,...S){this.observers[v]&&Array.from(this.observers[v].entries()).forEach(([T,A])=>{for(let k=0;k<A;k++)T(...S)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([T,A])=>{for(let k=0;k<A;k++)T.apply(T,[v,...S])})}}class ResourceStore extends EventEmitter{constructor(v,S={ns:["translation"],defaultNS:"translation"}){super(),this.data=v||{},this.options=S,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(v){this.options.ns.indexOf(v)<0&&this.options.ns.push(v)}removeNamespaces(v){const S=this.options.ns.indexOf(v);S>-1&&this.options.ns.splice(S,1)}getResource(v,S,R,T={}){const A=T.keySeparator!==void 0?T.keySeparator:this.options.keySeparator,k=T.ignoreJSONStructure!==void 0?T.ignoreJSONStructure:this.options.ignoreJSONStructure;let M;v.indexOf(".")>-1?M=v.split("."):(M=[v,S],R&&(Array.isArray(R)?M.push(...R):isString$1(R)&&A?M.push(...R.split(A)):M.push(R)));const P=getPath(this.data,M);return!P&&!S&&!R&&v.indexOf(".")>-1&&(v=M[0],S=M[1],R=M.slice(2).join(".")),P||!k||!isString$1(R)?P:deepFind(this.data?.[v]?.[S],R,A)}addResource(v,S,R,T,A={silent:!1}){const k=A.keySeparator!==void 0?A.keySeparator:this.options.keySeparator;let M=[v,S];R&&(M=M.concat(k?R.split(k):R)),v.indexOf(".")>-1&&(M=v.split("."),T=S,S=M[1]),this.addNamespaces(S),setPath(this.data,M,T),A.silent||this.emit("added",v,S,R,T)}addResources(v,S,R,T={silent:!1}){for(const A in R)(isString$1(R[A])||Array.isArray(R[A]))&&this.addResource(v,S,A,R[A],{silent:!0});T.silent||this.emit("added",v,S,R)}addResourceBundle(v,S,R,T,A,k={silent:!1,skipCopy:!1}){let M=[v,S];v.indexOf(".")>-1&&(M=v.split("."),T=R,R=S,S=M[1]),this.addNamespaces(S);let P=getPath(this.data,M)||{};k.skipCopy||(R=JSON.parse(JSON.stringify(R))),T?deepExtend(P,R,A):P={...P,...R},setPath(this.data,M,P),k.silent||this.emit("added",v,S,R)}removeResourceBundle(v,S){this.hasResourceBundle(v,S)&&delete this.data[v][S],this.removeNamespaces(S),this.emit("removed",v,S)}hasResourceBundle(v,S){return this.getResource(v,S)!==void 0}getResourceBundle(v,S){return S||(S=this.options.defaultNS),this.getResource(v,S)}getDataByLanguage(v){return this.data[v]}hasLanguageSomeTranslations(v){const S=this.getDataByLanguage(v);return!!(S&&Object.keys(S)||[]).find(T=>S[T]&&Object.keys(S[T]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(_){this.processors[_.name]=_},handle(_,v,S,R,T){return _.forEach(A=>{v=this.processors[A]?.process(v,S,R,T)??v}),v}};const PATH_KEY=Symbol("i18next/PATH_KEY");function createProxy(){const _=[],v=Object.create(null);let S;return v.get=(R,T)=>(S?.revoke?.(),T===PATH_KEY?_:(_.push(T),S=Proxy.revocable(R,v),S.proxy)),Proxy.revocable(Object.create(null),v).proxy}function keysFromSelector(_,v){const{[PATH_KEY]:S}=_(createProxy());return S.join(v?.keySeparator??".")}const checkedLoadedFor={},shouldHandleAsObject=_=>!isString$1(_)&&typeof _!="boolean"&&typeof _!="number";class Translator extends EventEmitter{constructor(v,S={}){super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],v,this),this.options=S,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(v){v&&(this.language=v)}exists(v,S={interpolation:{}}){const R={...S};if(v==null)return!1;const T=this.resolve(v,R);if(T?.res===void 0)return!1;const A=shouldHandleAsObject(T.res);return!(R.returnObjects===!1&&A)}extractFromKey(v,S){let R=S.nsSeparator!==void 0?S.nsSeparator:this.options.nsSeparator;R===void 0&&(R=":");const T=S.keySeparator!==void 0?S.keySeparator:this.options.keySeparator;let A=S.ns||this.options.defaultNS||[];const k=R&&v.indexOf(R)>-1,M=!this.options.userDefinedKeySeparator&&!S.keySeparator&&!this.options.userDefinedNsSeparator&&!S.nsSeparator&&!looksLikeObjectPath(v,R,T);if(k&&!M){const P=v.match(this.interpolator.nestingRegexp);if(P&&P.length>0)return{key:v,namespaces:isString$1(A)?[A]:A};const D=v.split(R);(R!==T||R===T&&this.options.ns.indexOf(D[0])>-1)&&(A=D.shift()),v=D.join(T)}return{key:v,namespaces:isString$1(A)?[A]:A}}translate(v,S,R){let T=typeof S=="object"?{...S}:S;if(typeof T!="object"&&this.options.overloadTranslationOptionHandler&&(T=this.options.overloadTranslationOptionHandler(arguments)),typeof T=="object"&&(T={...T}),T||(T={}),v==null)return"";typeof v=="function"&&(v=keysFromSelector(v,{...this.options,...T})),Array.isArray(v)||(v=[String(v)]);const A=T.returnDetails!==void 0?T.returnDetails:this.options.returnDetails,k=T.keySeparator!==void 0?T.keySeparator:this.options.keySeparator,{key:M,namespaces:P}=this.extractFromKey(v[v.length-1],T),D=P[P.length-1];let L=T.nsSeparator!==void 0?T.nsSeparator:this.options.nsSeparator;L===void 0&&(L=":");const q=T.lng||this.language,B=T.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(q?.toLowerCase()==="cimode")return B?A?{res:`${D}${L}${M}`,usedKey:M,exactUsedKey:M,usedLng:q,usedNS:D,usedParams:this.getUsedParamsDetails(T)}:`${D}${L}${M}`:A?{res:M,usedKey:M,exactUsedKey:M,usedLng:q,usedNS:D,usedParams:this.getUsedParamsDetails(T)}:M;const F=this.resolve(v,T);let j=F?.res;const z=F?.usedKey||M,V=F?.exactUsedKey||M,G=["[object Number]","[object Function]","[object RegExp]"],W=T.joinArrays!==void 0?T.joinArrays:this.options.joinArrays,Y=!this.i18nFormat||this.i18nFormat.handleAsObject,X=T.count!==void 0&&!isString$1(T.count),ee=Translator.hasDefaultValue(T),re=X?this.pluralResolver.getSuffix(q,T.count,T):"",Q=T.ordinal&&X?this.pluralResolver.getSuffix(q,T.count,{ordinal:!1}):"",ne=X&&!T.ordinal&&T.count===0,ae=ne&&T[`defaultValue${this.options.pluralSeparator}zero`]||T[`defaultValue${re}`]||T[`defaultValue${Q}`]||T.defaultValue;let oe=j;Y&&!j&&ee&&(oe=ae);const se=shouldHandleAsObject(oe),ce=Object.prototype.toString.apply(oe);if(Y&&oe&&se&&G.indexOf(ce)<0&&!(isString$1(W)&&Array.isArray(oe))){if(!T.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const de=this.options.returnedObjectHandler?this.options.returnedObjectHandler(z,oe,{...T,ns:P}):`key '${M} (${this.language})' returned an object instead of string.`;return A?(F.res=de,F.usedParams=this.getUsedParamsDetails(T),F):de}if(k){const de=Array.isArray(oe),ye=de?[]:{},we=de?V:z;for(const ge in oe)if(Object.prototype.hasOwnProperty.call(oe,ge)){const ve=`${we}${k}${ge}`;ee&&!j?ye[ge]=this.translate(ve,{...T,defaultValue:shouldHandleAsObject(ae)?ae[ge]:void 0,joinArrays:!1,ns:P}):ye[ge]=this.translate(ve,{...T,joinArrays:!1,ns:P}),ye[ge]===ve&&(ye[ge]=oe[ge])}j=ye}}else if(Y&&isString$1(W)&&Array.isArray(j))j=j.join(W),j&&(j=this.extendTranslation(j,v,T,R));else{let de=!1,ye=!1;!this.isValidLookup(j)&&ee&&(de=!0,j=ae),this.isValidLookup(j)||(ye=!0,j=M);const ge=(T.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ye?void 0:j,ve=ee&&ae!==j&&this.options.updateMissing;if(ye||de||ve){if(this.logger.log(ve?"updateKey":"missingKey",q,D,M,ve?ae:j),k){const fe=this.resolve(M,{...T,keySeparator:!1});fe&&fe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let be=[];const ke=this.languageUtils.getFallbackCodes(this.options.fallbackLng,T.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ke&&ke[0])for(let fe=0;fe<ke.length;fe++)be.push(ke[fe]);else this.options.saveMissingTo==="all"?be=this.languageUtils.toResolveHierarchy(T.lng||this.language):be.push(T.lng||this.language);const me=(fe,xe,Ae)=>{const Se=ee&&Ae!==j?Ae:ge;this.options.missingKeyHandler?this.options.missingKeyHandler(fe,D,xe,Se,ve,T):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(fe,D,xe,Se,ve,T),this.emit("missingKey",fe,D,xe,j)};this.options.saveMissing&&(this.options.saveMissingPlurals&&X?be.forEach(fe=>{const xe=this.pluralResolver.getSuffixes(fe,T);ne&&T[`defaultValue${this.options.pluralSeparator}zero`]&&xe.indexOf(`${this.options.pluralSeparator}zero`)<0&&xe.push(`${this.options.pluralSeparator}zero`),xe.forEach(Ae=>{me([fe],M+Ae,T[`defaultValue${Ae}`]||ae)})}):me(be,M,ae))}j=this.extendTranslation(j,v,T,F,R),ye&&j===M&&this.options.appendNamespaceToMissingKey&&(j=`${D}${L}${M}`),(ye||de)&&this.options.parseMissingKeyHandler&&(j=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${D}${L}${M}`:M,de?j:void 0,T))}return A?(F.res=j,F.usedParams=this.getUsedParamsDetails(T),F):j}extendTranslation(v,S,R,T,A){if(this.i18nFormat?.parse)v=this.i18nFormat.parse(v,{...this.options.interpolation.defaultVariables,...R},R.lng||this.language||T.usedLng,T.usedNS,T.usedKey,{resolved:T});else if(!R.skipInterpolation){R.interpolation&&this.interpolator.init({...R,interpolation:{...this.options.interpolation,...R.interpolation}});const P=isString$1(v)&&(R?.interpolation?.skipOnVariables!==void 0?R.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let D;if(P){const q=v.match(this.interpolator.nestingRegexp);D=q&&q.length}let L=R.replace&&!isString$1(R.replace)?R.replace:R;if(this.options.interpolation.defaultVariables&&(L={...this.options.interpolation.defaultVariables,...L}),v=this.interpolator.interpolate(v,L,R.lng||this.language||T.usedLng,R),P){const q=v.match(this.interpolator.nestingRegexp),B=q&&q.length;D<B&&(R.nest=!1)}!R.lng&&T&&T.res&&(R.lng=this.language||T.usedLng),R.nest!==!1&&(v=this.interpolator.nest(v,(...q)=>A?.[0]===q[0]&&!R.context?(this.logger.warn(`It seems you are nesting recursively key: ${q[0]} in key: ${S[0]}`),null):this.translate(...q,S),R)),R.interpolation&&this.interpolator.reset()}const k=R.postProcess||this.options.postProcess,M=isString$1(k)?[k]:k;return v!=null&&M?.length&&R.applyPostProcessor!==!1&&(v=postProcessor.handle(M,v,S,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...T,usedParams:this.getUsedParamsDetails(R)},...R}:R,this)),v}resolve(v,S={}){let R,T,A,k,M;return isString$1(v)&&(v=[v]),v.forEach(P=>{if(this.isValidLookup(R))return;const D=this.extractFromKey(P,S),L=D.key;T=L;let q=D.namespaces;this.options.fallbackNS&&(q=q.concat(this.options.fallbackNS));const B=S.count!==void 0&&!isString$1(S.count),F=B&&!S.ordinal&&S.count===0,j=S.context!==void 0&&(isString$1(S.context)||typeof S.context=="number")&&S.context!=="",z=S.lngs?S.lngs:this.languageUtils.toResolveHierarchy(S.lng||this.language,S.fallbackLng);q.forEach(V=>{this.isValidLookup(R)||(M=V,!checkedLoadedFor[`${z[0]}-${V}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(M)&&(checkedLoadedFor[`${z[0]}-${V}`]=!0,this.logger.warn(`key "${T}" for languages "${z.join(", ")}" won't get resolved as namespace "${M}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),z.forEach(G=>{if(this.isValidLookup(R))return;k=G;const W=[L];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(W,L,G,V,S);else{let X;B&&(X=this.pluralResolver.getSuffix(G,S.count,S));const ee=`${this.options.pluralSeparator}zero`,re=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(B&&(S.ordinal&&X.indexOf(re)===0&&W.push(L+X.replace(re,this.options.pluralSeparator)),W.push(L+X),F&&W.push(L+ee)),j){const Q=`${L}${this.options.contextSeparator||"_"}${S.context}`;W.push(Q),B&&(S.ordinal&&X.indexOf(re)===0&&W.push(Q+X.replace(re,this.options.pluralSeparator)),W.push(Q+X),F&&W.push(Q+ee))}}let Y;for(;Y=W.pop();)this.isValidLookup(R)||(A=Y,R=this.getResource(G,V,Y,S))}))})}),{res:R,usedKey:T,exactUsedKey:A,usedLng:k,usedNS:M}}isValidLookup(v){return v!==void 0&&!(!this.options.returnNull&&v===null)&&!(!this.options.returnEmptyString&&v==="")}getResource(v,S,R,T={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(v,S,R,T):this.resourceStore.getResource(v,S,R,T)}getUsedParamsDetails(v={}){const S=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],R=v.replace&&!isString$1(v.replace);let T=R?v.replace:v;if(R&&typeof v.count<"u"&&(T.count=v.count),this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),!R){T={...T};for(const A of S)delete T[A]}return T}static hasDefaultValue(v){const S="defaultValue";for(const R in v)if(Object.prototype.hasOwnProperty.call(v,R)&&S===R.substring(0,S.length)&&v[R]!==void 0)return!0;return!1}}class LanguageUtil{constructor(v){this.options=v,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(v){if(v=getCleanedCode(v),!v||v.indexOf("-")<0)return null;const S=v.split("-");return S.length===2||(S.pop(),S[S.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(S.join("-"))}getLanguagePartFromCode(v){if(v=getCleanedCode(v),!v||v.indexOf("-")<0)return v;const S=v.split("-");return this.formatLanguageCode(S[0])}formatLanguageCode(v){if(isString$1(v)&&v.indexOf("-")>-1){let S;try{S=Intl.getCanonicalLocales(v)[0]}catch{}return S&&this.options.lowerCaseLng&&(S=S.toLowerCase()),S||(this.options.lowerCaseLng?v.toLowerCase():v)}return this.options.cleanCode||this.options.lowerCaseLng?v.toLowerCase():v}isSupportedCode(v){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(v=this.getLanguagePartFromCode(v)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(v)>-1}getBestMatchFromCodes(v){if(!v)return null;let S;return v.forEach(R=>{if(S)return;const T=this.formatLanguageCode(R);(!this.options.supportedLngs||this.isSupportedCode(T))&&(S=T)}),!S&&this.options.supportedLngs&&v.forEach(R=>{if(S)return;const T=this.getScriptPartFromCode(R);if(this.isSupportedCode(T))return S=T;const A=this.getLanguagePartFromCode(R);if(this.isSupportedCode(A))return S=A;S=this.options.supportedLngs.find(k=>{if(k===A)return k;if(!(k.indexOf("-")<0&&A.indexOf("-")<0)&&(k.indexOf("-")>0&&A.indexOf("-")<0&&k.substring(0,k.indexOf("-"))===A||k.indexOf(A)===0&&A.length>1))return k})}),S||(S=this.getFallbackCodes(this.options.fallbackLng)[0]),S}getFallbackCodes(v,S){if(!v)return[];if(typeof v=="function"&&(v=v(S)),isString$1(v)&&(v=[v]),Array.isArray(v))return v;if(!S)return v.default||[];let R=v[S];return R||(R=v[this.getScriptPartFromCode(S)]),R||(R=v[this.formatLanguageCode(S)]),R||(R=v[this.getLanguagePartFromCode(S)]),R||(R=v.default),R||[]}toResolveHierarchy(v,S){const R=this.getFallbackCodes((S===!1?[]:S)||this.options.fallbackLng||[],v),T=[],A=k=>{k&&(this.isSupportedCode(k)?T.push(k):this.logger.warn(`rejecting language code not found in supportedLngs: ${k}`))};return isString$1(v)&&(v.indexOf("-")>-1||v.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&A(this.formatLanguageCode(v)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&A(this.getScriptPartFromCode(v)),this.options.load!=="currentOnly"&&A(this.getLanguagePartFromCode(v))):isString$1(v)&&A(this.formatLanguageCode(v)),R.forEach(k=>{T.indexOf(k)<0&&A(this.formatLanguageCode(k))}),T}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:_=>_===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(v,S={}){this.languageUtils=v,this.options=S,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(v,S={}){const R=getCleanedCode(v==="dev"?"en":v),T=S.ordinal?"ordinal":"cardinal",A=JSON.stringify({cleanedCode:R,type:T});if(A in this.pluralRulesCache)return this.pluralRulesCache[A];let k;try{k=new Intl.PluralRules(R,{type:T})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!v.match(/-|_/))return dummyRule;const P=this.languageUtils.getLanguagePartFromCode(v);k=this.getRule(P,S)}return this.pluralRulesCache[A]=k,k}needsPlural(v,S={}){let R=this.getRule(v,S);return R||(R=this.getRule("dev",S)),R?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(v,S,R={}){return this.getSuffixes(v,R).map(T=>`${S}${T}`)}getSuffixes(v,S={}){let R=this.getRule(v,S);return R||(R=this.getRule("dev",S)),R?R.resolvedOptions().pluralCategories.sort((T,A)=>suffixesOrder[T]-suffixesOrder[A]).map(T=>`${this.options.prepend}${S.ordinal?`ordinal${this.options.prepend}`:""}${T}`):[]}getSuffix(v,S,R={}){const T=this.getRule(v,R);return T?`${this.options.prepend}${R.ordinal?`ordinal${this.options.prepend}`:""}${T.select(S)}`:(this.logger.warn(`no plural rule found for: ${v}`),this.getSuffix("dev",S,R))}}const deepFindWithDefaults=(_,v,S,R=".",T=!0)=>{let A=getPathWithDefaults(_,v,S);return!A&&T&&isString$1(S)&&(A=deepFind(_,S,R),A===void 0&&(A=deepFind(v,S,R))),A},regexSafe=_=>_.replace(/\$/g,"$$$$");class Interpolator{constructor(v={}){this.logger=baseLogger.create("interpolator"),this.options=v,this.format=v?.interpolation?.format||(S=>S),this.init(v)}init(v={}){v.interpolation||(v.interpolation={escapeValue:!0});const{escape:S,escapeValue:R,useRawValueToEscape:T,prefix:A,prefixEscaped:k,suffix:M,suffixEscaped:P,formatSeparator:D,unescapeSuffix:L,unescapePrefix:q,nestingPrefix:B,nestingPrefixEscaped:F,nestingSuffix:j,nestingSuffixEscaped:z,nestingOptionsSeparator:V,maxReplaces:G,alwaysFormat:W}=v.interpolation;this.escape=S!==void 0?S:escape,this.escapeValue=R!==void 0?R:!0,this.useRawValueToEscape=T!==void 0?T:!1,this.prefix=A?regexEscape(A):k||"{{",this.suffix=M?regexEscape(M):P||"}}",this.formatSeparator=D||",",this.unescapePrefix=L?"":q||"-",this.unescapeSuffix=this.unescapePrefix?"":L||"",this.nestingPrefix=B?regexEscape(B):F||regexEscape("$t("),this.nestingSuffix=j?regexEscape(j):z||regexEscape(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=G||1e3,this.alwaysFormat=W!==void 0?W:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const v=(S,R)=>S?.source===R?(S.lastIndex=0,S):new RegExp(R,"g");this.regexp=v(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=v(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=v(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(v,S,R,T){let A,k,M;const P=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},D=F=>{if(F.indexOf(this.formatSeparator)<0){const G=deepFindWithDefaults(S,P,F,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(G,void 0,R,{...T,...S,interpolationkey:F}):G}const j=F.split(this.formatSeparator),z=j.shift().trim(),V=j.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(S,P,z,this.options.keySeparator,this.options.ignoreJSONStructure),V,R,{...T,...S,interpolationkey:z})};this.resetRegExp();const L=T?.missingInterpolationHandler||this.options.missingInterpolationHandler,q=T?.interpolation?.skipOnVariables!==void 0?T.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:F=>regexSafe(F)},{regex:this.regexp,safeValue:F=>this.escapeValue?regexSafe(this.escape(F)):regexSafe(F)}].forEach(F=>{for(M=0;A=F.regex.exec(v);){const j=A[1].trim();if(k=D(j),k===void 0)if(typeof L=="function"){const V=L(v,A,T);k=isString$1(V)?V:""}else if(T&&Object.prototype.hasOwnProperty.call(T,j))k="";else if(q){k=A[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${v}`),k="";else!isString$1(k)&&!this.useRawValueToEscape&&(k=makeString(k));const z=F.safeValue(k);if(v=v.replace(A[0],z),q?(F.regex.lastIndex+=k.length,F.regex.lastIndex-=A[0].length):F.regex.lastIndex=0,M++,M>=this.maxReplaces)break}}),v}nest(v,S,R={}){let T,A,k;const M=(P,D)=>{const L=this.nestingOptionsSeparator;if(P.indexOf(L)<0)return P;const q=P.split(new RegExp(`${L}[ ]*{`));let B=`{${q[1]}`;P=q[0],B=this.interpolate(B,k);const F=B.match(/'/g),j=B.match(/"/g);((F?.length??0)%2===0&&!j||j.length%2!==0)&&(B=B.replace(/'/g,'"'));try{k=JSON.parse(B),D&&(k={...D,...k})}catch(z){return this.logger.warn(`failed parsing options string in nesting for key ${P}`,z),`${P}${L}${B}`}return k.defaultValue&&k.defaultValue.indexOf(this.prefix)>-1&&delete k.defaultValue,P};for(;T=this.nestingRegexp.exec(v);){let P=[];k={...R},k=k.replace&&!isString$1(k.replace)?k.replace:k,k.applyPostProcessor=!1,delete k.defaultValue;const D=/{.*}/.test(T[1])?T[1].lastIndexOf("}")+1:T[1].indexOf(this.formatSeparator);if(D!==-1&&(P=T[1].slice(D).split(this.formatSeparator).map(L=>L.trim()).filter(Boolean),T[1]=T[1].slice(0,D)),A=S(M.call(this,T[1].trim(),k),k),A&&T[0]===v&&!isString$1(A))return A;isString$1(A)||(A=makeString(A)),A||(this.logger.warn(`missed to resolve ${T[1]} for nesting ${v}`),A=""),P.length&&(A=P.reduce((L,q)=>this.format(L,q,R.lng,{...R,interpolationkey:T[1].trim()}),A.trim())),v=v.replace(T[0],A),this.regexp.lastIndex=0}return v}}const parseFormatStr=_=>{let v=_.toLowerCase().trim();const S={};if(_.indexOf("(")>-1){const R=_.split("(");v=R[0].toLowerCase().trim();const T=R[1].substring(0,R[1].length-1);v==="currency"&&T.indexOf(":")<0?S.currency||(S.currency=T.trim()):v==="relativetime"&&T.indexOf(":")<0?S.range||(S.range=T.trim()):T.split(";").forEach(k=>{if(k){const[M,...P]=k.split(":"),D=P.join(":").trim().replace(/^'+|'+$/g,""),L=M.trim();S[L]||(S[L]=D),D==="false"&&(S[L]=!1),D==="true"&&(S[L]=!0),isNaN(D)||(S[L]=parseInt(D,10))}})}return{formatName:v,formatOptions:S}},createCachedFormatter=_=>{const v={};return(S,R,T)=>{let A=T;T&&T.interpolationkey&&T.formatParams&&T.formatParams[T.interpolationkey]&&T[T.interpolationkey]&&(A={...A,[T.interpolationkey]:void 0});const k=R+JSON.stringify(A);let M=v[k];return M||(M=_(getCleanedCode(R),T),v[k]=M),M(S)}},createNonCachedFormatter=_=>(v,S,R)=>_(getCleanedCode(S),R)(v);class Formatter{constructor(v={}){this.logger=baseLogger.create("formatter"),this.options=v,this.init(v)}init(v,S={interpolation:{}}){this.formatSeparator=S.interpolation.formatSeparator||",";const R=S.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:R((T,A)=>{const k=new Intl.NumberFormat(T,{...A});return M=>k.format(M)}),currency:R((T,A)=>{const k=new Intl.NumberFormat(T,{...A,style:"currency"});return M=>k.format(M)}),datetime:R((T,A)=>{const k=new Intl.DateTimeFormat(T,{...A});return M=>k.format(M)}),relativetime:R((T,A)=>{const k=new Intl.RelativeTimeFormat(T,{...A});return M=>k.format(M,A.range||"day")}),list:R((T,A)=>{const k=new Intl.ListFormat(T,{...A});return M=>k.format(M)})}}add(v,S){this.formats[v.toLowerCase().trim()]=S}addCached(v,S){this.formats[v.toLowerCase().trim()]=createCachedFormatter(S)}format(v,S,R,T={}){const A=S.split(this.formatSeparator);if(A.length>1&&A[0].indexOf("(")>1&&A[0].indexOf(")")<0&&A.find(M=>M.indexOf(")")>-1)){const M=A.findIndex(P=>P.indexOf(")")>-1);A[0]=[A[0],...A.splice(1,M)].join(this.formatSeparator)}return A.reduce((M,P)=>{const{formatName:D,formatOptions:L}=parseFormatStr(P);if(this.formats[D]){let q=M;try{const B=T?.formatParams?.[T.interpolationkey]||{},F=B.locale||B.lng||T.locale||T.lng||R;q=this.formats[D](M,F,{...L,...T,...B})}catch(B){this.logger.warn(B)}return q}else this.logger.warn(`there was no format function for ${D}`);return M},v)}}const removePending=(_,v)=>{_.pending[v]!==void 0&&(delete _.pending[v],_.pendingCount--)};class Connector extends EventEmitter{constructor(v,S,R,T={}){super(),this.backend=v,this.store=S,this.services=R,this.languageUtils=R.languageUtils,this.options=T,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=T.maxParallelReads||10,this.readingCalls=0,this.maxRetries=T.maxRetries>=0?T.maxRetries:5,this.retryTimeout=T.retryTimeout>=1?T.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(R,T.backend,T)}queueLoad(v,S,R,T){const A={},k={},M={},P={};return v.forEach(D=>{let L=!0;S.forEach(q=>{const B=`${D}|${q}`;!R.reload&&this.store.hasResourceBundle(D,q)?this.state[B]=2:this.state[B]<0||(this.state[B]===1?k[B]===void 0&&(k[B]=!0):(this.state[B]=1,L=!1,k[B]===void 0&&(k[B]=!0),A[B]===void 0&&(A[B]=!0),P[q]===void 0&&(P[q]=!0)))}),L||(M[D]=!0)}),(Object.keys(A).length||Object.keys(k).length)&&this.queue.push({pending:k,pendingCount:Object.keys(k).length,loaded:{},errors:[],callback:T}),{toLoad:Object.keys(A),pending:Object.keys(k),toLoadLanguages:Object.keys(M),toLoadNamespaces:Object.keys(P)}}loaded(v,S,R){const T=v.split("|"),A=T[0],k=T[1];S&&this.emit("failedLoading",A,k,S),!S&&R&&this.store.addResourceBundle(A,k,R,void 0,void 0,{skipCopy:!0}),this.state[v]=S?-1:2,S&&R&&(this.state[v]=0);const M={};this.queue.forEach(P=>{pushPath(P.loaded,[A],k),removePending(P,v),S&&P.errors.push(S),P.pendingCount===0&&!P.done&&(Object.keys(P.loaded).forEach(D=>{M[D]||(M[D]={});const L=P.loaded[D];L.length&&L.forEach(q=>{M[D][q]===void 0&&(M[D][q]=!0)})}),P.done=!0,P.errors.length?P.callback(P.errors):P.callback())}),this.emit("loaded",M),this.queue=this.queue.filter(P=>!P.done)}read(v,S,R,T=0,A=this.retryTimeout,k){if(!v.length)return k(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:v,ns:S,fcName:R,tried:T,wait:A,callback:k});return}this.readingCalls++;const M=(D,L)=>{if(this.readingCalls--,this.waitingReads.length>0){const q=this.waitingReads.shift();this.read(q.lng,q.ns,q.fcName,q.tried,q.wait,q.callback)}if(D&&L&&T<this.maxRetries){setTimeout(()=>{this.read.call(this,v,S,R,T+1,A*2,k)},A);return}k(D,L)},P=this.backend[R].bind(this.backend);if(P.length===2){try{const D=P(v,S);D&&typeof D.then=="function"?D.then(L=>M(null,L)).catch(M):M(null,D)}catch(D){M(D)}return}return P(v,S,M)}prepareLoading(v,S,R={},T){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),T&&T();isString$1(v)&&(v=this.languageUtils.toResolveHierarchy(v)),isString$1(S)&&(S=[S]);const A=this.queueLoad(v,S,R,T);if(!A.toLoad.length)return A.pending.length||T(),null;A.toLoad.forEach(k=>{this.loadOne(k)})}load(v,S,R){this.prepareLoading(v,S,{},R)}reload(v,S,R){this.prepareLoading(v,S,{reload:!0},R)}loadOne(v,S=""){const R=v.split("|"),T=R[0],A=R[1];this.read(T,A,"read",void 0,void 0,(k,M)=>{k&&this.logger.warn(`${S}loading namespace ${A} for language ${T} failed`,k),!k&&M&&this.logger.log(`${S}loaded namespace ${A} for language ${T}`,M),this.loaded(v,k,M)})}saveMissing(v,S,R,T,A,k={},M=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(S)){this.logger.warn(`did not save key "${R}" as the namespace "${S}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(R==null||R==="")){if(this.backend?.create){const P={...k,isUpdate:A},D=this.backend.create.bind(this.backend);if(D.length<6)try{let L;D.length===5?L=D(v,S,R,T,P):L=D(v,S,R,T),L&&typeof L.then=="function"?L.then(q=>M(null,q)).catch(M):M(null,L)}catch(L){M(L)}else D(v,S,R,T,M,P)}!v||!v[0]||this.store.addResource(v[0],S,R,T)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:_=>{let v={};if(typeof _[1]=="object"&&(v=_[1]),isString$1(_[1])&&(v.defaultValue=_[1]),isString$1(_[2])&&(v.tDescription=_[2]),typeof _[2]=="object"||typeof _[3]=="object"){const S=_[3]||_[2];Object.keys(S).forEach(R=>{v[R]=S[R]})}return v},interpolation:{escapeValue:!0,format:_=>_,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=_=>(isString$1(_.ns)&&(_.ns=[_.ns]),isString$1(_.fallbackLng)&&(_.fallbackLng=[_.fallbackLng]),isString$1(_.fallbackNS)&&(_.fallbackNS=[_.fallbackNS]),_.supportedLngs?.indexOf?.("cimode")<0&&(_.supportedLngs=_.supportedLngs.concat(["cimode"])),typeof _.initImmediate=="boolean"&&(_.initAsync=_.initImmediate),_),noop=()=>{},bindMemberFunctions=_=>{Object.getOwnPropertyNames(Object.getPrototypeOf(_)).forEach(S=>{typeof _[S]=="function"&&(_[S]=_[S].bind(_))})},usesLocize=_=>!!(_?.modules?.backend?.name?.indexOf("Locize")>0||_?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||_?.options?.backend?.backends&&_.options.backend.backends.some(v=>v?.name?.indexOf("Locize")>0||v?.constructor?.name?.indexOf("Locize")>0));class I18n extends EventEmitter{constructor(v={},S){if(super(),this.options=transformOptions(v),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),S&&!this.isInitialized&&!v.isClone){if(!this.options.initAsync)return this.init(v,S),this;setTimeout(()=>{this.init(v,S)},0)}}init(v={},S){this.isInitializing=!0,typeof v=="function"&&(S=v,v={}),v.defaultNS==null&&v.ns&&(isString$1(v.ns)?v.defaultNS=v.ns:v.ns.indexOf("translation")<0&&(v.defaultNS=v.ns[0]));const R=get();this.options={...R,...this.options,...transformOptions(v)},this.options.interpolation={...R.interpolation,...this.options.interpolation},v.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=v.keySeparator),v.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=v.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=R.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!usesLocize(this)&&typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ");const T=D=>D?typeof D=="function"?new D:D:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(T(this.modules.logger),this.options):baseLogger.init(null,this.options);let D;this.modules.formatter?D=this.modules.formatter:D=Formatter;const L=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const q=this.services;q.logger=baseLogger,q.resourceStore=this.store,q.languageUtils=L,q.pluralResolver=new PluralResolver(L,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==R.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),D&&(!this.options.interpolation.format||this.options.interpolation.format===R.interpolation.format)&&(q.formatter=T(D),q.formatter.init&&q.formatter.init(q,this.options),this.options.interpolation.format=q.formatter.format.bind(q.formatter)),q.interpolator=new Interpolator(this.options),q.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},q.backendConnector=new Connector(T(this.modules.backend),q.resourceStore,q,this.options),q.backendConnector.on("*",(F,...j)=>{this.emit(F,...j)}),this.modules.languageDetector&&(q.languageDetector=T(this.modules.languageDetector),q.languageDetector.init&&q.languageDetector.init(q,this.options.detection,this.options)),this.modules.i18nFormat&&(q.i18nFormat=T(this.modules.i18nFormat),q.i18nFormat.init&&q.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",(F,...j)=>{this.emit(F,...j)}),this.modules.external.forEach(F=>{F.init&&F.init(this)})}if(this.format=this.options.interpolation.format,S||(S=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const D=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);D.length>0&&D[0]!=="dev"&&(this.options.lng=D[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(D=>{this[D]=(...L)=>this.store[D](...L)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(D=>{this[D]=(...L)=>(this.store[D](...L),this)});const M=defer(),P=()=>{const D=(L,q)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),M.resolve(q),S(L,q)};if(this.languages&&!this.isInitialized)return D(null,this.t.bind(this));this.changeLanguage(this.options.lng,D)};return this.options.resources||!this.options.initAsync?P():setTimeout(P,0),M}loadResources(v,S=noop){let R=S;const T=isString$1(v)?v:this.language;if(typeof v=="function"&&(R=v),!this.options.resources||this.options.partialBundledLanguages){if(T?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return R();const A=[],k=M=>{if(!M||M==="cimode")return;this.services.languageUtils.toResolveHierarchy(M).forEach(D=>{D!=="cimode"&&A.indexOf(D)<0&&A.push(D)})};T?k(T):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(P=>k(P)),this.options.preload?.forEach?.(M=>k(M)),this.services.backendConnector.load(A,this.options.ns,M=>{!M&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),R(M)})}else R(null)}reloadResources(v,S,R){const T=defer();return typeof v=="function"&&(R=v,v=void 0),typeof S=="function"&&(R=S,S=void 0),v||(v=this.languages),S||(S=this.options.ns),R||(R=noop),this.services.backendConnector.reload(v,S,A=>{T.resolve(),R(A)}),T}use(v){if(!v)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!v.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return v.type==="backend"&&(this.modules.backend=v),(v.type==="logger"||v.log&&v.warn&&v.error)&&(this.modules.logger=v),v.type==="languageDetector"&&(this.modules.languageDetector=v),v.type==="i18nFormat"&&(this.modules.i18nFormat=v),v.type==="postProcessor"&&postProcessor.addPostProcessor(v),v.type==="formatter"&&(this.modules.formatter=v),v.type==="3rdParty"&&this.modules.external.push(v),this}setResolvedLanguage(v){if(!(!v||!this.languages)&&!(["cimode","dev"].indexOf(v)>-1)){for(let S=0;S<this.languages.length;S++){const R=this.languages[S];if(!(["cimode","dev"].indexOf(R)>-1)&&this.store.hasLanguageSomeTranslations(R)){this.resolvedLanguage=R;break}}!this.resolvedLanguage&&this.languages.indexOf(v)<0&&this.store.hasLanguageSomeTranslations(v)&&(this.resolvedLanguage=v,this.languages.unshift(v))}}changeLanguage(v,S){this.isLanguageChangingTo=v;const R=defer();this.emit("languageChanging",v);const T=M=>{this.language=M,this.languages=this.services.languageUtils.toResolveHierarchy(M),this.resolvedLanguage=void 0,this.setResolvedLanguage(M)},A=(M,P)=>{P?this.isLanguageChangingTo===v&&(T(P),this.translator.changeLanguage(P),this.isLanguageChangingTo=void 0,this.emit("languageChanged",P),this.logger.log("languageChanged",P)):this.isLanguageChangingTo=void 0,R.resolve((...D)=>this.t(...D)),S&&S(M,(...D)=>this.t(...D))},k=M=>{!v&&!M&&this.services.languageDetector&&(M=[]);const P=isString$1(M)?M:M&&M[0],D=this.store.hasLanguageSomeTranslations(P)?P:this.services.languageUtils.getBestMatchFromCodes(isString$1(M)?[M]:M);D&&(this.language||T(D),this.translator.language||this.translator.changeLanguage(D),this.services.languageDetector?.cacheUserLanguage?.(D)),this.loadResources(D,L=>{A(L,D)})};return!v&&this.services.languageDetector&&!this.services.languageDetector.async?k(this.services.languageDetector.detect()):!v&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(k):this.services.languageDetector.detect(k):k(v),R}getFixedT(v,S,R){const T=(A,k,...M)=>{let P;typeof k!="object"?P=this.options.overloadTranslationOptionHandler([A,k].concat(M)):P={...k},P.lng=P.lng||T.lng,P.lngs=P.lngs||T.lngs,P.ns=P.ns||T.ns,P.keyPrefix!==""&&(P.keyPrefix=P.keyPrefix||R||T.keyPrefix);const D=this.options.keySeparator||".";let L;return P.keyPrefix&&Array.isArray(A)?L=A.map(q=>(typeof q=="function"&&(q=keysFromSelector(q,{...this.options,...k})),`${P.keyPrefix}${D}${q}`)):(typeof A=="function"&&(A=keysFromSelector(A,{...this.options,...k})),L=P.keyPrefix?`${P.keyPrefix}${D}${A}`:A),this.t(L,P)};return isString$1(v)?T.lng=v:T.lngs=v,T.ns=S,T.keyPrefix=R,T}t(...v){return this.translator?.translate(...v)}exists(...v){return this.translator?.exists(...v)}setDefaultNamespace(v){this.options.defaultNS=v}hasLoadedNamespace(v,S={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const R=S.lng||this.resolvedLanguage||this.languages[0],T=this.options?this.options.fallbackLng:!1,A=this.languages[this.languages.length-1];if(R.toLowerCase()==="cimode")return!0;const k=(M,P)=>{const D=this.services.backendConnector.state[`${M}|${P}`];return D===-1||D===0||D===2};if(S.precheck){const M=S.precheck(this,k);if(M!==void 0)return M}return!!(this.hasResourceBundle(R,v)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||k(R,v)&&(!T||k(A,v)))}loadNamespaces(v,S){const R=defer();return this.options.ns?(isString$1(v)&&(v=[v]),v.forEach(T=>{this.options.ns.indexOf(T)<0&&this.options.ns.push(T)}),this.loadResources(T=>{R.resolve(),S&&S(T)}),R):(S&&S(),Promise.resolve())}loadLanguages(v,S){const R=defer();isString$1(v)&&(v=[v]);const T=this.options.preload||[],A=v.filter(k=>T.indexOf(k)<0&&this.services.languageUtils.isSupportedCode(k));return A.length?(this.options.preload=T.concat(A),this.loadResources(k=>{R.resolve(),S&&S(k)}),R):(S&&S(),Promise.resolve())}dir(v){if(v||(v=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!v)return"rtl";try{const T=new Intl.Locale(v);if(T&&T.getTextInfo){const A=T.getTextInfo();if(A&&A.direction)return A.direction}}catch{}const S=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],R=this.services?.languageUtils||new LanguageUtil(get());return v.toLowerCase().indexOf("-latn")>1?"ltr":S.indexOf(R.getLanguagePartFromCode(v))>-1||v.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(v={},S){const R=new I18n(v,S);return R.createInstance=I18n.createInstance,R}cloneInstance(v={},S=noop){const R=v.forkResourceStore;R&&delete v.forkResourceStore;const T={...this.options,...v,isClone:!0},A=new I18n(T);if((v.debug!==void 0||v.prefix!==void 0)&&(A.logger=A.logger.clone(v)),["store","services","language"].forEach(M=>{A[M]=this[M]}),A.services={...this.services},A.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},R){const M=Object.keys(this.store.data).reduce((P,D)=>(P[D]={...this.store.data[D]},P[D]=Object.keys(P[D]).reduce((L,q)=>(L[q]={...P[D][q]},L),P[D]),P),{});A.store=new ResourceStore(M,T),A.services.resourceStore=A.store}if(v.interpolation){const P={...get().interpolation,...this.options.interpolation,...v.interpolation},D={...T,interpolation:P};A.services.interpolator=new Interpolator(D)}return A.translator=new Translator(A.services,T),A.translator.on("*",(M,...P)=>{A.emit(M,...P)}),A.init(T,S),A.translator.options=T,A.translator.backendConnector.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},A}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const warn=(_,v,S,R)=>{const T=[S,{code:v,...R||{}}];if(_?.services?.logger?.forward)return _.services.logger.forward(T,"warn","react-i18next::",!0);isString(T[0])&&(T[0]=`react-i18next:: ${T[0]}`),_?.services?.logger?.warn?_.services.logger.warn(...T):console?.warn&&console.warn(...T)},alreadyWarned={},warnOnce=(_,v,S,R)=>{isString(S)&&alreadyWarned[S]||(isString(S)&&(alreadyWarned[S]=new Date),warn(_,v,S,R))},loadedClb=(_,v)=>()=>{if(_.isInitialized)v();else{const S=()=>{setTimeout(()=>{_.off("initialized",S)},0),v()};_.on("initialized",S)}},loadNamespaces=(_,v,S)=>{_.loadNamespaces(v,loadedClb(_,S))},loadLanguages=(_,v,S,R)=>{if(isString(S)&&(S=[S]),_.options.preload&&_.options.preload.indexOf(v)>-1)return loadNamespaces(_,S,R);S.forEach(T=>{_.options.ns.indexOf(T)<0&&_.options.ns.push(T)}),_.loadLanguages(v,loadedClb(_,R))},hasLoadedNamespace=(_,v,S={})=>!v.languages||!v.languages.length?(warnOnce(v,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:v.languages}),!0):v.hasLoadedNamespace(_,{lng:S.lng,precheck:(R,T)=>{if(S.bindI18n&&S.bindI18n.indexOf("languageChanging")>-1&&R.services.backendConnector.backend&&R.isLanguageChangingTo&&!T(R.isLanguageChangingTo,_))return!1}}),isString=_=>typeof _=="string",isObject=_=>typeof _=="object"&&_!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=_=>htmlEntities[_],unescape=_=>_.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape,transDefaultProps:void 0};const setDefaults=(_={})=>{defaultOptions={...defaultOptions,..._}},getDefaults$1=()=>defaultOptions;let i18nInstance;const setI18n=_=>{i18nInstance=_},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(_){setDefaults(_.options.react),setI18n(_)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(v){v.forEach(S=>{this.usedNamespaces[S]||(this.usedNamespaces[S]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var _=requireReact();function v(q,B){return q===B&&(q!==0||1/q===1/B)||q!==q&&B!==B}var S=typeof Object.is=="function"?Object.is:v,R=_.useState,T=_.useEffect,A=_.useLayoutEffect,k=_.useDebugValue;function M(q,B){var F=B(),j=R({inst:{value:F,getSnapshot:B}}),z=j[0].inst,V=j[1];return A(function(){z.value=F,z.getSnapshot=B,P(z)&&V({inst:z})},[q,F,B]),T(function(){return P(z)&&V({inst:z}),q(function(){P(z)&&V({inst:z})})},[q]),k(F),F}function P(q){var B=q.getSnapshot;q=q.value;try{var F=B();return!S(q,F)}catch{return!0}}function D(q,B){return B()}var L=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D:M;return useSyncExternalStoreShim_production.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:L,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var shimExports=requireShim();const notReadyT=(_,v)=>isString(v)?v:isObject(v)&&isString(v.defaultValue)?v.defaultValue:Array.isArray(_)?_[_.length-1]:_,notReadySnapshot={t:notReadyT,ready:!1},dummySubscribe=()=>()=>{},useTranslation=(_,v={})=>{const{i18n:S}=v,{i18n:R,defaultNS:T}=reactExports.useContext(I18nContext)||{},A=S||R||getI18n();A&&!A.reportNamespaces&&(A.reportNamespaces=new ReportNamespaces),A||warnOnce(A,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const k=reactExports.useMemo(()=>({...getDefaults$1(),...A?.options?.react,...v}),[A,v]),{useSuspense:M,keyPrefix:P}=k,D=T||A?.options?.defaultNS,L=isString(D)?[D]:D||["translation"],q=reactExports.useMemo(()=>L,L);A?.reportNamespaces?.addUsedNamespaces?.(q);const B=reactExports.useRef(0),F=reactExports.useCallback(ae=>{if(!A)return dummySubscribe;const{bindI18n:oe,bindI18nStore:se}=k,ce=()=>{B.current+=1,ae()};return oe&&A.on(oe,ce),se&&A.store.on(se,ce),()=>{oe&&oe.split(" ").forEach(de=>A.off(de,ce)),se&&se.split(" ").forEach(de=>A.store.off(de,ce))}},[A,k]),j=reactExports.useRef(),z=reactExports.useCallback(()=>{if(!A)return notReadySnapshot;const ae=!!(A.isInitialized||A.initializedStoreOnce)&&q.every(we=>hasLoadedNamespace(we,A,k)),oe=v.lng||A.language,se=B.current,ce=j.current;if(ce&&ce.ready===ae&&ce.lng===oe&&ce.keyPrefix===P&&ce.revision===se)return ce;const ye={t:A.getFixedT(oe,k.nsMode==="fallback"?q:q[0],P),ready:ae,lng:oe,keyPrefix:P,revision:se};return j.current=ye,ye},[A,q,P,k,v.lng]),[V,G]=reactExports.useState(0),{t:W,ready:Y}=shimExports.useSyncExternalStore(F,z,z);reactExports.useEffect(()=>{if(A&&!Y&&!M){const ae=()=>G(oe=>oe+1);v.lng?loadLanguages(A,v.lng,q,ae):loadNamespaces(A,q,ae)}},[A,v.lng,q,Y,M,V]);const X=A||{},ee=reactExports.useRef(null),re=reactExports.useRef(),Q=ae=>{const oe=Object.getOwnPropertyDescriptors(ae);oe.__original&&delete oe.__original;const se=Object.create(Object.getPrototypeOf(ae),oe);if(!Object.prototype.hasOwnProperty.call(se,"__original"))try{Object.defineProperty(se,"__original",{value:ae,writable:!1,enumerable:!1,configurable:!1})}catch{}return se},ne=reactExports.useMemo(()=>{const ae=X,oe=ae?.language;let se=ae;ae&&(ee.current&&ee.current.__original===ae?re.current!==oe?(se=Q(ae),ee.current=se,re.current=oe):se=ee.current:(se=Q(ae),ee.current=se,re.current=oe));const ce=[W,se,Y];return ce.t=W,ce.i18n=se,ce.ready=Y,ce},[W,X,Y,X.resolvedLanguage,X.language,X.languages]);if(A&&M&&!Y)throw new Promise(ae=>{const oe=()=>ae();v.lng?loadLanguages(A,v.lng,q,oe):loadNamespaces(A,q,oe)});return ne};function Homepage(){const{t:_}=useTranslation(),[v,S]=reactExports.useState(null),R=T=>{S(T)};return jsxRuntimeExports.jsxs("div",{className:"p-4 pt-0",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl",children:_("core.selectProgram")})}),jsxRuntimeExports.jsx(CardContent,{})]})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl",children:_("core.program",{name:"Main"})})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(EditorWrap,{initValue:`

A = a.A
B = ((A|'a.0)|b.0)[c/a]
`,onSubmit:R})})]})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl",children:_("core.proof")})}),jsxRuntimeExports.jsx(CardContent,{children:v&&jsxRuntimeExports.jsx(ProofWrapper,{program:v})})]})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl",children:_("core.simulation")})}),jsxRuntimeExports.jsx(CardContent,{children:v&&jsxRuntimeExports.jsx(SimulationWithGraph,{ast:v})})]})})]})}function Aboutpage(){return jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"About"})})}const LanguageSwitcher=()=>{const{i18n:_}=useTranslation(),v=_.language?_.language.split("-")[0]:"cs",S=R=>{_.changeLanguage(R)};return jsxRuntimeExports.jsxs(Select,{value:v,onValueChange:S,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto border-none shadow-none bg-transparent px-2 focus:ring-0 hover:bg-slate-100 rounded-md transition-colors",children:jsxRuntimeExports.jsx(Earth,{className:"h-5 w-5"})}),jsxRuntimeExports.jsxs(SelectContent,{align:"end",children:[jsxRuntimeExports.jsx(SelectItem,{value:"cs",children:jsxRuntimeExports.jsx("span",{className:"flex items-center gap-2",children:"etina"})}),jsxRuntimeExports.jsx(SelectItem,{value:"en",children:jsxRuntimeExports.jsx("span",{className:"flex items-center gap-2",children:"English"})})]})]})};function Header(){const{t:_}=useTranslation();return jsxRuntimeExports.jsxs("header",{className:"max-w-[1280px] w-full mx-auto my-6 px-6 flex justify-between items-center gap-4 flex-wrap",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold",children:_("core.ccs")}),jsxRuntimeExports.jsx("div",{className:"flex gap-4 justify-end flex-1",children:jsxRuntimeExports.jsx(LanguageSwitcher,{})})]})}function Footer(){return jsxRuntimeExports.jsx("footer",{className:"",children:jsxRuntimeExports.jsx("div",{className:"max-w-[1280px] m-auto w-full px-6 pb-4 text-foreground/65",children:" Jakub Kobrsk - Diplomov prce - Kalkulus komunikujcch systm"})})}function __insertCSS(_){if(typeof document>"u")return;let v=document.head||document.getElementsByTagName("head")[0],S=document.createElement("style");S.type="text/css",v.appendChild(S),S.styleSheet?S.styleSheet.cssText=_:S.appendChild(document.createTextNode(_))}const getAsset=_=>{switch(_){case"success":return SuccessIcon;case"info":return InfoIcon;case"warning":return WarningIcon;case"error":return ErrorIcon;default:return null}},bars=Array(12).fill(0),Loader=({visible:_,className:v})=>React.createElement("div",{className:["sonner-loading-wrapper",v].filter(Boolean).join(" "),"data-visible":_},React.createElement("div",{className:"sonner-spinner"},bars.map((S,R)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${R}`})))),SuccessIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WarningIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),InfoIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ErrorIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CloseIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),useIsDocumentHidden=()=>{const[_,v]=React.useState(document.hidden);return React.useEffect(()=>{const S=()=>{v(document.hidden)};return document.addEventListener("visibilitychange",S),()=>window.removeEventListener("visibilitychange",S)},[]),_};let toastsCounter=1;class Observer{constructor(){this.subscribe=v=>(this.subscribers.push(v),()=>{const S=this.subscribers.indexOf(v);this.subscribers.splice(S,1)}),this.publish=v=>{this.subscribers.forEach(S=>S(v))},this.addToast=v=>{this.publish(v),this.toasts=[...this.toasts,v]},this.create=v=>{var S;const{message:R,...T}=v,A=typeof v?.id=="number"||((S=v.id)==null?void 0:S.length)>0?v.id:toastsCounter++,k=this.toasts.find(P=>P.id===A),M=v.dismissible===void 0?!0:v.dismissible;return this.dismissedToasts.has(A)&&this.dismissedToasts.delete(A),k?this.toasts=this.toasts.map(P=>P.id===A?(this.publish({...P,...v,id:A,title:R}),{...P,...v,id:A,dismissible:M,title:R}):P):this.addToast({title:R,...T,dismissible:M,id:A}),A},this.dismiss=v=>(v?(this.dismissedToasts.add(v),requestAnimationFrame(()=>this.subscribers.forEach(S=>S({id:v,dismiss:!0})))):this.toasts.forEach(S=>{this.subscribers.forEach(R=>R({id:S.id,dismiss:!0}))}),v),this.message=(v,S)=>this.create({...S,message:v}),this.error=(v,S)=>this.create({...S,message:v,type:"error"}),this.success=(v,S)=>this.create({...S,type:"success",message:v}),this.info=(v,S)=>this.create({...S,type:"info",message:v}),this.warning=(v,S)=>this.create({...S,type:"warning",message:v}),this.loading=(v,S)=>this.create({...S,type:"loading",message:v}),this.promise=(v,S)=>{if(!S)return;let R;S.loading!==void 0&&(R=this.create({...S,promise:v,type:"loading",message:S.loading,description:typeof S.description!="function"?S.description:void 0}));const T=Promise.resolve(v instanceof Function?v():v);let A=R!==void 0,k;const M=T.then(async D=>{if(k=["resolve",D],React.isValidElement(D))A=!1,this.create({id:R,type:"default",message:D});else if(isHttpResponse(D)&&!D.ok){A=!1;const q=typeof S.error=="function"?await S.error(`HTTP error! status: ${D.status}`):S.error,B=typeof S.description=="function"?await S.description(`HTTP error! status: ${D.status}`):S.description,j=typeof q=="object"&&!React.isValidElement(q)?q:{message:q};this.create({id:R,type:"error",description:B,...j})}else if(D instanceof Error){A=!1;const q=typeof S.error=="function"?await S.error(D):S.error,B=typeof S.description=="function"?await S.description(D):S.description,j=typeof q=="object"&&!React.isValidElement(q)?q:{message:q};this.create({id:R,type:"error",description:B,...j})}else if(S.success!==void 0){A=!1;const q=typeof S.success=="function"?await S.success(D):S.success,B=typeof S.description=="function"?await S.description(D):S.description,j=typeof q=="object"&&!React.isValidElement(q)?q:{message:q};this.create({id:R,type:"success",description:B,...j})}}).catch(async D=>{if(k=["reject",D],S.error!==void 0){A=!1;const L=typeof S.error=="function"?await S.error(D):S.error,q=typeof S.description=="function"?await S.description(D):S.description,F=typeof L=="object"&&!React.isValidElement(L)?L:{message:L};this.create({id:R,type:"error",description:q,...F})}}).finally(()=>{A&&(this.dismiss(R),R=void 0),S.finally==null||S.finally.call(S)}),P=()=>new Promise((D,L)=>M.then(()=>k[0]==="reject"?L(k[1]):D(k[1])).catch(L));return typeof R!="string"&&typeof R!="number"?{unwrap:P}:Object.assign(R,{unwrap:P})},this.custom=(v,S)=>{const R=S?.id||toastsCounter++;return this.create({jsx:v(R),id:R,...S}),R},this.getActiveToasts=()=>this.toasts.filter(v=>!this.dismissedToasts.has(v.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ToastState=new Observer,toastFunction=(_,v)=>{const S=v?.id||toastsCounter++;return ToastState.addToast({title:_,...v,id:S}),S},isHttpResponse=_=>_&&typeof _=="object"&&"ok"in _&&typeof _.ok=="boolean"&&"status"in _&&typeof _.status=="number",basicToast=toastFunction,getHistory=()=>ToastState.toasts,getToasts=()=>ToastState.getActiveToasts();Object.assign(basicToast,{success:ToastState.success,info:ToastState.info,warning:ToastState.warning,error:ToastState.error,custom:ToastState.custom,message:ToastState.message,promise:ToastState.promise,dismiss:ToastState.dismiss,loading:ToastState.loading},{getHistory,getToasts});__insertCSS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function isAction(_){return _.label!==void 0}const VISIBLE_TOASTS_AMOUNT=3,VIEWPORT_OFFSET="24px",MOBILE_VIEWPORT_OFFSET="16px",TOAST_LIFETIME=4e3,TOAST_WIDTH=356,GAP=14,SWIPE_THRESHOLD=45,TIME_BEFORE_UNMOUNT=200;function cn(..._){return _.filter(Boolean).join(" ")}function getDefaultSwipeDirections(_){const[v,S]=_.split("-"),R=[];return v&&R.push(v),S&&R.push(S),R}const Toast=_=>{var v,S,R,T,A,k,M,P,D;const{invert:L,toast:q,unstyled:B,interacting:F,setHeights:j,visibleToasts:z,heights:V,index:G,toasts:W,expanded:Y,removeToast:X,defaultRichColors:ee,closeButton:re,style:Q,cancelButtonStyle:ne,actionButtonStyle:ae,className:oe="",descriptionClassName:se="",duration:ce,position:de,gap:ye,expandByDefault:we,classNames:ge,icons:ve,closeButtonAriaLabel:be="Close toast"}=_,[ke,me]=React.useState(null),[fe,xe]=React.useState(null),[Ae,Se]=React.useState(!1),[Me,Oe]=React.useState(!1),[Ce,$e]=React.useState(!1),[Be,Pe]=React.useState(!1),[De,Le]=React.useState(!1),[Ne,tt]=React.useState(0),[it,dt]=React.useState(0),pt=React.useRef(q.duration||ce||TOAST_LIFETIME),We=React.useRef(null),Et=React.useRef(null),st=G===0,xt=G+1<=z,gt=q.type,_t=q.dismissible!==!1,St=q.className||"",Lt=q.descriptionClassName||"",jt=React.useMemo(()=>V.findIndex(yt=>yt.toastId===q.id)||0,[V,q.id]),Gt=React.useMemo(()=>{var yt;return(yt=q.closeButton)!=null?yt:re},[q.closeButton,re]),At=React.useMemo(()=>q.duration||ce||TOAST_LIFETIME,[q.duration,ce]),Nt=React.useRef(0),Ct=React.useRef(0),bt=React.useRef(0),et=React.useRef(null),[Re,je]=de.split("-"),Ue=React.useMemo(()=>V.reduce((yt,vt,Ot)=>Ot>=jt?yt:yt+vt.height,0),[V,jt]),Ze=useIsDocumentHidden(),nt=q.invert||L,wt=gt==="loading";Ct.current=React.useMemo(()=>jt*ye+Ue,[jt,Ue]),React.useEffect(()=>{pt.current=At},[At]),React.useEffect(()=>{Se(!0)},[]),React.useEffect(()=>{const yt=Et.current;if(yt){const vt=yt.getBoundingClientRect().height;return dt(vt),j(Ot=>[{toastId:q.id,height:vt,position:q.position},...Ot]),()=>j(Ot=>Ot.filter(It=>It.toastId!==q.id))}},[j,q.id]),React.useLayoutEffect(()=>{if(!Ae)return;const yt=Et.current,vt=yt.style.height;yt.style.height="auto";const Ot=yt.getBoundingClientRect().height;yt.style.height=vt,dt(Ot),j(It=>It.find(zt=>zt.toastId===q.id)?It.map(zt=>zt.toastId===q.id?{...zt,height:Ot}:zt):[{toastId:q.id,height:Ot,position:q.position},...It])},[Ae,q.title,q.description,j,q.id,q.jsx,q.action,q.cancel]);const lt=React.useCallback(()=>{Oe(!0),tt(Ct.current),j(yt=>yt.filter(vt=>vt.toastId!==q.id)),setTimeout(()=>{X(q)},TIME_BEFORE_UNMOUNT)},[q,X,j,Ct]);React.useEffect(()=>{if(q.promise&&gt==="loading"||q.duration===1/0||q.type==="loading")return;let yt;return Y||F||Ze?(()=>{if(bt.current<Nt.current){const It=new Date().getTime()-Nt.current;pt.current=pt.current-It}bt.current=new Date().getTime()})():(()=>{pt.current!==1/0&&(Nt.current=new Date().getTime(),yt=setTimeout(()=>{q.onAutoClose==null||q.onAutoClose.call(q,q),lt()},pt.current))})(),()=>clearTimeout(yt)},[Y,F,q,gt,Ze,lt]),React.useEffect(()=>{q.delete&&(lt(),q.onDismiss==null||q.onDismiss.call(q,q))},[lt,q.delete]);function Tt(){var yt;if(ve?.loading){var vt;return React.createElement("div",{className:cn(ge?.loader,q==null||(vt=q.classNames)==null?void 0:vt.loader,"sonner-loader"),"data-visible":gt==="loading"},ve.loading)}return React.createElement(Loader,{className:cn(ge?.loader,q==null||(yt=q.classNames)==null?void 0:yt.loader),visible:gt==="loading"})}const Rt=q.icon||ve?.[gt]||getAsset(gt);var Mt,$t;return React.createElement("li",{tabIndex:0,ref:Et,className:cn(oe,St,ge?.toast,q==null||(v=q.classNames)==null?void 0:v.toast,ge?.default,ge?.[gt],q==null||(S=q.classNames)==null?void 0:S[gt]),"data-sonner-toast":"","data-rich-colors":(Mt=q.richColors)!=null?Mt:ee,"data-styled":!(q.jsx||q.unstyled||B),"data-mounted":Ae,"data-promise":!!q.promise,"data-swiped":De,"data-removed":Me,"data-visible":xt,"data-y-position":Re,"data-x-position":je,"data-index":G,"data-front":st,"data-swiping":Ce,"data-dismissible":_t,"data-type":gt,"data-invert":nt,"data-swipe-out":Be,"data-swipe-direction":fe,"data-expanded":!!(Y||we&&Ae),"data-testid":q.testId,style:{"--index":G,"--toasts-before":G,"--z-index":W.length-G,"--offset":`${Me?Ne:Ct.current}px`,"--initial-height":we?"auto":`${it}px`,...Q,...q.style},onDragEnd:()=>{$e(!1),me(null),et.current=null},onPointerDown:yt=>{yt.button!==2&&(wt||!_t||(We.current=new Date,tt(Ct.current),yt.target.setPointerCapture(yt.pointerId),yt.target.tagName!=="BUTTON"&&($e(!0),et.current={x:yt.clientX,y:yt.clientY})))},onPointerUp:()=>{var yt,vt,Ot;if(Be||!_t)return;et.current=null;const It=Number(((yt=Et.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sr=Number(((vt=Et.current)==null?void 0:vt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),zt=new Date().getTime()-((Ot=We.current)==null?void 0:Ot.getTime()),ur=ke==="x"?It:sr,hr=Math.abs(ur)/zt;if(Math.abs(ur)>=SWIPE_THRESHOLD||hr>.11){tt(Ct.current),q.onDismiss==null||q.onDismiss.call(q,q),xe(ke==="x"?It>0?"right":"left":sr>0?"down":"up"),lt(),Pe(!0);return}else{var or,rr;(or=Et.current)==null||or.style.setProperty("--swipe-amount-x","0px"),(rr=Et.current)==null||rr.style.setProperty("--swipe-amount-y","0px")}Le(!1),$e(!1),me(null)},onPointerMove:yt=>{var vt,Ot,It;if(!et.current||!_t||((vt=window.getSelection())==null?void 0:vt.toString().length)>0)return;const zt=yt.clientY-et.current.y,ur=yt.clientX-et.current.x;var hr;const or=(hr=_.swipeDirections)!=null?hr:getDefaultSwipeDirections(de);!ke&&(Math.abs(ur)>1||Math.abs(zt)>1)&&me(Math.abs(ur)>Math.abs(zt)?"x":"y");let rr={x:0,y:0};const wr=qr=>1/(1.5+Math.abs(qr)/20);if(ke==="y"){if(or.includes("top")||or.includes("bottom"))if(or.includes("top")&&zt<0||or.includes("bottom")&&zt>0)rr.y=zt;else{const qr=zt*wr(zt);rr.y=Math.abs(qr)<Math.abs(zt)?qr:zt}}else if(ke==="x"&&(or.includes("left")||or.includes("right")))if(or.includes("left")&&ur<0||or.includes("right")&&ur>0)rr.x=ur;else{const qr=ur*wr(ur);rr.x=Math.abs(qr)<Math.abs(ur)?qr:ur}(Math.abs(rr.x)>0||Math.abs(rr.y)>0)&&Le(!0),(Ot=Et.current)==null||Ot.style.setProperty("--swipe-amount-x",`${rr.x}px`),(It=Et.current)==null||It.style.setProperty("--swipe-amount-y",`${rr.y}px`)}},Gt&&!q.jsx&&gt!=="loading"?React.createElement("button",{"aria-label":be,"data-disabled":wt,"data-close-button":!0,onClick:wt||!_t?()=>{}:()=>{lt(),q.onDismiss==null||q.onDismiss.call(q,q)},className:cn(ge?.closeButton,q==null||(R=q.classNames)==null?void 0:R.closeButton)},($t=ve?.close)!=null?$t:CloseIcon):null,(gt||q.icon||q.promise)&&q.icon!==null&&(ve?.[gt]!==null||q.icon)?React.createElement("div",{"data-icon":"",className:cn(ge?.icon,q==null||(T=q.classNames)==null?void 0:T.icon)},q.promise||q.type==="loading"&&!q.icon?q.icon||Tt():null,q.type!=="loading"?Rt:null):null,React.createElement("div",{"data-content":"",className:cn(ge?.content,q==null||(A=q.classNames)==null?void 0:A.content)},React.createElement("div",{"data-title":"",className:cn(ge?.title,q==null||(k=q.classNames)==null?void 0:k.title)},q.jsx?q.jsx:typeof q.title=="function"?q.title():q.title),q.description?React.createElement("div",{"data-description":"",className:cn(se,Lt,ge?.description,q==null||(M=q.classNames)==null?void 0:M.description)},typeof q.description=="function"?q.description():q.description):null),React.isValidElement(q.cancel)?q.cancel:q.cancel&&isAction(q.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:q.cancelButtonStyle||ne,onClick:yt=>{isAction(q.cancel)&&_t&&(q.cancel.onClick==null||q.cancel.onClick.call(q.cancel,yt),lt())},className:cn(ge?.cancelButton,q==null||(P=q.classNames)==null?void 0:P.cancelButton)},q.cancel.label):null,React.isValidElement(q.action)?q.action:q.action&&isAction(q.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:q.actionButtonStyle||ae,onClick:yt=>{isAction(q.action)&&(q.action.onClick==null||q.action.onClick.call(q.action,yt),!yt.defaultPrevented&&lt())},className:cn(ge?.actionButton,q==null||(D=q.classNames)==null?void 0:D.actionButton)},q.action.label):null)};function getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";const _=document.documentElement.getAttribute("dir");return _==="auto"||!_?window.getComputedStyle(document.documentElement).direction:_}function assignOffset(_,v){const S={};return[_,v].forEach((R,T)=>{const A=T===1,k=A?"--mobile-offset":"--offset",M=A?MOBILE_VIEWPORT_OFFSET:VIEWPORT_OFFSET;function P(D){["top","right","bottom","left"].forEach(L=>{S[`${k}-${L}`]=typeof D=="number"?`${D}px`:D})}typeof R=="number"||typeof R=="string"?P(R):typeof R=="object"?["top","right","bottom","left"].forEach(D=>{R[D]===void 0?S[`${k}-${D}`]=M:S[`${k}-${D}`]=typeof R[D]=="number"?`${R[D]}px`:R[D]}):P(M)}),S}const Toaster=React.forwardRef(function _(v,S){const{id:R,invert:T,position:A="bottom-right",hotkey:k=["altKey","KeyT"],expand:M,closeButton:P,className:D,offset:L,mobileOffset:q,theme:B="light",richColors:F,duration:j,style:z,visibleToasts:V=VISIBLE_TOASTS_AMOUNT,toastOptions:G,dir:W=getDocumentDirection(),gap:Y=GAP,icons:X,containerAriaLabel:ee="Notifications"}=v,[re,Q]=React.useState([]),ne=React.useMemo(()=>R?re.filter(Ae=>Ae.toasterId===R):re.filter(Ae=>!Ae.toasterId),[re,R]),ae=React.useMemo(()=>Array.from(new Set([A].concat(ne.filter(Ae=>Ae.position).map(Ae=>Ae.position)))),[ne,A]),[oe,se]=React.useState([]),[ce,de]=React.useState(!1),[ye,we]=React.useState(!1),[ge,ve]=React.useState(B!=="system"?B:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),be=React.useRef(null),ke=k.join("+").replace(/Key/g,"").replace(/Digit/g,""),me=React.useRef(null),fe=React.useRef(!1),xe=React.useCallback(Ae=>{Q(Se=>{var Me;return(Me=Se.find(Oe=>Oe.id===Ae.id))!=null&&Me.delete||ToastState.dismiss(Ae.id),Se.filter(({id:Oe})=>Oe!==Ae.id)})},[]);return React.useEffect(()=>ToastState.subscribe(Ae=>{if(Ae.dismiss){requestAnimationFrame(()=>{Q(Se=>Se.map(Me=>Me.id===Ae.id?{...Me,delete:!0}:Me))});return}setTimeout(()=>{ReactDOM.flushSync(()=>{Q(Se=>{const Me=Se.findIndex(Oe=>Oe.id===Ae.id);return Me!==-1?[...Se.slice(0,Me),{...Se[Me],...Ae},...Se.slice(Me+1)]:[Ae,...Se]})})})}),[re]),React.useEffect(()=>{if(B!=="system"){ve(B);return}if(B==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ve("dark"):ve("light")),typeof window>"u")return;const Ae=window.matchMedia("(prefers-color-scheme: dark)");try{Ae.addEventListener("change",({matches:Se})=>{ve(Se?"dark":"light")})}catch{Ae.addListener(({matches:Me})=>{try{ve(Me?"dark":"light")}catch(Oe){console.error(Oe)}})}},[B]),React.useEffect(()=>{re.length<=1&&de(!1)},[re]),React.useEffect(()=>{const Ae=Se=>{var Me;if(k.every($e=>Se[$e]||Se.code===$e)){var Ce;de(!0),(Ce=be.current)==null||Ce.focus()}Se.code==="Escape"&&(document.activeElement===be.current||(Me=be.current)!=null&&Me.contains(document.activeElement))&&de(!1)};return document.addEventListener("keydown",Ae),()=>document.removeEventListener("keydown",Ae)},[k]),React.useEffect(()=>{if(be.current)return()=>{me.current&&(me.current.focus({preventScroll:!0}),me.current=null,fe.current=!1)}},[be.current]),React.createElement("section",{ref:S,"aria-label":`${ee} ${ke}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ae.map((Ae,Se)=>{var Me;const[Oe,Ce]=Ae.split("-");return ne.length?React.createElement("ol",{key:Ae,dir:W==="auto"?getDocumentDirection():W,tabIndex:-1,ref:be,className:D,"data-sonner-toaster":!0,"data-sonner-theme":ge,"data-y-position":Oe,"data-x-position":Ce,style:{"--front-toast-height":`${((Me=oe[0])==null?void 0:Me.height)||0}px`,"--width":`${TOAST_WIDTH}px`,"--gap":`${Y}px`,...z,...assignOffset(L,q)},onBlur:$e=>{fe.current&&!$e.currentTarget.contains($e.relatedTarget)&&(fe.current=!1,me.current&&(me.current.focus({preventScroll:!0}),me.current=null))},onFocus:$e=>{$e.target instanceof HTMLElement&&$e.target.dataset.dismissible==="false"||fe.current||(fe.current=!0,me.current=$e.relatedTarget)},onMouseEnter:()=>de(!0),onMouseMove:()=>de(!0),onMouseLeave:()=>{ye||de(!1)},onDragEnd:()=>de(!1),onPointerDown:$e=>{$e.target instanceof HTMLElement&&$e.target.dataset.dismissible==="false"||we(!0)},onPointerUp:()=>we(!1)},ne.filter($e=>!$e.position&&Se===0||$e.position===Ae).map(($e,Be)=>{var Pe,De;return React.createElement(Toast,{key:$e.id,icons:X,index:Be,toast:$e,defaultRichColors:F,duration:(Pe=G?.duration)!=null?Pe:j,className:G?.className,descriptionClassName:G?.descriptionClassName,invert:T,visibleToasts:V,closeButton:(De=G?.closeButton)!=null?De:P,interacting:ye,position:Ae,style:G?.style,unstyled:G?.unstyled,classNames:G?.classNames,cancelButtonStyle:G?.cancelButtonStyle,actionButtonStyle:G?.actionButtonStyle,closeButtonAriaLabel:G?.closeButtonAriaLabel,removeToast:xe,toasts:ne.filter(Le=>Le.position==$e.position),heights:oe.filter(Le=>Le.position==$e.position),setHeights:se,expandByDefault:M,gap:Y,expanded:ce,swipeDirections:v.swipeDirections})})):null}))});function RouteList(){return jsxRuntimeExports.jsx("div",{className:"max-w-[1280px] m-auto w-full px-2 grow",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Homepage,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(Aboutpage,{})})]})})}function App(){return jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-background text-foreground min-h-svh antialiased flex flex-col",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(RouteList,{}),jsxRuntimeExports.jsx(Footer,{})]}),jsxRuntimeExports.jsx(Toaster,{richColors:!0})]})}const{slice,forEach}=[];function defaults(_){return forEach.call(slice.call(arguments,1),v=>{if(v)for(const S in v)_[S]===void 0&&(_[S]=v[S])}),_}function hasXSS(_){return typeof _!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(S=>S.test(_))}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=function(_,v){const R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},T=encodeURIComponent(v);let A=`${_}=${T}`;if(R.maxAge>0){const k=R.maxAge-0;if(Number.isNaN(k))throw new Error("maxAge should be a Number");A+=`; Max-Age=${Math.floor(k)}`}if(R.domain){if(!fieldContentRegExp.test(R.domain))throw new TypeError("option domain is invalid");A+=`; Domain=${R.domain}`}if(R.path){if(!fieldContentRegExp.test(R.path))throw new TypeError("option path is invalid");A+=`; Path=${R.path}`}if(R.expires){if(typeof R.expires.toUTCString!="function")throw new TypeError("option expires is invalid");A+=`; Expires=${R.expires.toUTCString()}`}if(R.httpOnly&&(A+="; HttpOnly"),R.secure&&(A+="; Secure"),R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"strict":A+="; SameSite=Strict";break;case"none":A+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return R.partitioned&&(A+="; Partitioned"),A},cookie={create(_,v,S,R){let T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};S&&(T.expires=new Date,T.expires.setTime(T.expires.getTime()+S*60*1e3)),R&&(T.domain=R),document.cookie=serializeCookie(_,v,T)},read(_){const v=`${_}=`,S=document.cookie.split(";");for(let R=0;R<S.length;R++){let T=S[R];for(;T.charAt(0)===" ";)T=T.substring(1,T.length);if(T.indexOf(v)===0)return T.substring(v.length,T.length)}return null},remove(_,v){this.create(_,"",-1,v)}};var cookie$1={name:"cookie",lookup(_){let{lookupCookie:v}=_;if(v&&typeof document<"u")return cookie.read(v)||void 0},cacheUserLanguage(_,v){let{lookupCookie:S,cookieMinutes:R,cookieDomain:T,cookieOptions:A}=v;S&&typeof document<"u"&&cookie.create(S,_,R,T,A)}},querystring={name:"querystring",lookup(_){let{lookupQuerystring:v}=_,S;if(typeof window<"u"){let{search:R}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(R=window.location.hash.substring(window.location.hash.indexOf("?")));const A=R.substring(1).split("&");for(let k=0;k<A.length;k++){const M=A[k].indexOf("=");M>0&&A[k].substring(0,M)===v&&(S=A[k].substring(M+1))}}return S}},hash={name:"hash",lookup(_){let{lookupHash:v,lookupFromHashIndex:S}=_,R;if(typeof window<"u"){const{hash:T}=window.location;if(T&&T.length>2){const A=T.substring(1);if(v){const k=A.split("&");for(let M=0;M<k.length;M++){const P=k[M].indexOf("=");P>0&&k[M].substring(0,P)===v&&(R=k[M].substring(P+1))}}if(R)return R;if(!R&&S>-1){const k=T.match(/\/([a-zA-Z-]*)/g);return Array.isArray(k)?k[typeof S=="number"?S:0]?.replace("/",""):void 0}}}return R}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{if(hasLocalStorageSupport=typeof window<"u"&&window.localStorage!==null,!hasLocalStorageSupport)return!1;const _="i18next.translate.boo";window.localStorage.setItem(_,"foo"),window.localStorage.removeItem(_)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(_){let{lookupLocalStorage:v}=_;if(v&&localStorageAvailable())return window.localStorage.getItem(v)||void 0},cacheUserLanguage(_,v){let{lookupLocalStorage:S}=v;S&&localStorageAvailable()&&window.localStorage.setItem(S,_)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{if(hasSessionStorageSupport=typeof window<"u"&&window.sessionStorage!==null,!hasSessionStorageSupport)return!1;const _="i18next.translate.boo";window.sessionStorage.setItem(_,"foo"),window.sessionStorage.removeItem(_)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(_){let{lookupSessionStorage:v}=_;if(v&&sessionStorageAvailable())return window.sessionStorage.getItem(v)||void 0},cacheUserLanguage(_,v){let{lookupSessionStorage:S}=v;S&&sessionStorageAvailable()&&window.sessionStorage.setItem(S,_)}},navigator$1={name:"navigator",lookup(_){const v=[];if(typeof navigator<"u"){const{languages:S,userLanguage:R,language:T}=navigator;if(S)for(let A=0;A<S.length;A++)v.push(S[A]);R&&v.push(R),T&&v.push(T)}return v.length>0?v:void 0}},htmlTag={name:"htmlTag",lookup(_){let{htmlTag:v}=_,S;const R=v||(typeof document<"u"?document.documentElement:null);return R&&typeof R.getAttribute=="function"&&(S=R.getAttribute("lang")),S}},path={name:"path",lookup(_){let{lookupFromPathIndex:v}=_;if(typeof window>"u")return;const S=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(S)?S[typeof v=="number"?v:0]?.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(_){let{lookupFromSubdomainIndex:v}=_;const S=typeof v=="number"?v+1:1,R=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(R)return R[S]}};let canCookies=!1;try{document.cookie,canCookies=!0}catch(_){}const order=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];canCookies||order.splice(1,1);const getDefaults=()=>({order,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:_=>_});class Browser{constructor(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(v,S)}init(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=v,this.options=defaults(S,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=T=>T.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=R,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain),this.addDetector(hash)}addDetector(v){return this.detectors[v.name]=v,this}detect(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,S=[];return v.forEach(R=>{if(this.detectors[R]){let T=this.detectors[R].lookup(this.options);T&&typeof T=="string"&&(T=[T]),T&&(S=S.concat(T))}}),S=S.filter(R=>R!=null&&!hasXSS(R)).map(R=>this.options.convertDetectedLanguage(R)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?S:S.length>0?S[0]:null}cacheUserLanguage(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;S&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(v)>-1||S.forEach(R=>{this.detectors[R]&&this.detectors[R].cacheUserLanguage(v,this.options)}))}}Browser.type="languageDetector";const core$1={ccs:"Kalkulus Komunikujcch Systm",selectProgram:"Vbr CCS programu",program:"Program {{name}}",proof:"Dkaz",simulation:"Simulace"},csTranslation={core:core$1},core={ccs:"Calculus of Communicating Systems",selectProgram:"Select CCS program",program:"Program {{name}}",proof:"Proof",simulation:"Simulation"},enTranslation={core},resources={cs:{translation:csTranslation},en:{translation:enTranslation}};instance.use(Browser).use(initReactI18next).init({resources,fallbackLng:"cs",debug:!0,detection:{order:["localStorage","navigator"],lookupLocalStorage:"i18nextLng",caches:["localStorage"]},interpolation:{escapeValue:!1}});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
